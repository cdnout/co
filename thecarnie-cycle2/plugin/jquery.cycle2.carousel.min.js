/* Plugin for Cycle2; Copyright (c) 2012 M. Alsup; v20210125 */

!function(u){"use strict";u(document).on("cycle-bootstrap",function(e,i,s){"carousel"===i.fx&&(s.getSlideIndex=function(e){var i=this.opts()._carouselWrap.children();return i.index(e)%i.length},s.next=function(){var e=i.reverse?-1:1;!1===i.allowWrap&&i.currSlide+e>i.slideCount-i.carouselVisible||(i.API.advanceSlide(e),i.API.trigger("cycle-next",[i]).log("cycle-next"))})}),u.fn.cycle.transitions.carousel={preInit:function(e){e.hideNonActive=!1,e.container.on("cycle-destroyed",u.proxy(this.onDestroy,e.API)),e.API.stopTransition=this.stopTransition;for(var i=0;i<e.startingSlide;i++)e.container.append(e.slides[0])},postInit:function(e){var i,s,l,t=e.carouselVertical;e.carouselVisible&&e.carouselVisible>e.slideCount&&(e.carouselVisible=e.slideCount-1);var r=e.carouselVisible||e.slides.length,o={display:t?"block":"inline-block",position:"static"};if(e.container.css({position:"relative",overflow:"hidden"}),e.slides.css(o),e._currSlide=e.currSlide,l=u('<div class="cycle-carousel-wrap"></div>').prependTo(e.container).css({margin:0,padding:0,top:0,left:0,position:"absolute"}).append(e.slides),e._carouselWrap=l,t||l.css("white-space","nowrap"),!1!==e.allowWrap){for(s=0;s<(void 0===e.carouselVisible?2:1);s++){for(i=0;i<e.slideCount;i++)l.append(e.slides[i].cloneNode(!0));for(i=e.slideCount;i--;)l.prepend(e.slides[i].cloneNode(!0))}l.find(".cycle-slide-active").removeClass("cycle-slide-active"),e.slides.eq(e.startingSlide).addClass("cycle-slide-active")}e.pager&&!1===e.allowWrap&&(r=e.slideCount-r,u(e.pager).children().filter(":gt("+r+")").hide()),e._nextBoundry=e.slideCount-e.carouselVisible,this.prepareDimensions(e)},prepareDimensions:function(e){var i,s,l,t,r=e.carouselVertical,o=e.carouselVisible||e.slides.length;if(e.carouselFluid&&e.carouselVisible?e._carouselResizeThrottle||this.fluidSlides(e):e.carouselVisible&&e.carouselSlideDimension?(i=o*e.carouselSlideDimension,e.container[r?"height":"width"](i)):e.carouselVisible&&(i=o*u(e.slides[0])[r?"outerHeight":"outerWidth"](!0),e.container[r?"height":"width"](i)),s=e.carouselOffset||0,!1!==e.allowWrap)if(e.carouselSlideDimension)s-=(e.slideCount+e.currSlide)*e.carouselSlideDimension;else for(l=e._carouselWrap.children(),t=0;t<e.slideCount+e.currSlide;t++)s-=u(l[t])[r?"outerHeight":"outerWidth"](!0);e._carouselWrap.css(r?"top":"left",s)},fluidSlides:function(i){var e,s=i.slides.eq(0),l=s.outerWidth()-s.width(),t=this.prepareDimensions;function r(){clearTimeout(e),e=setTimeout(o,20)}function o(){i._carouselWrap.stop(!1,!0);var e=i.container.width()/i.carouselVisible,e=Math.ceil(e-l);i._carouselWrap.children().width(e),i._sentinel&&i._sentinel.width(e),t(i)}u(window).on("resize",r),i._carouselResizeThrottle=r,o()},transition:function(e,i,s,l,t){var r,o,n={},c=e.nextSlide-e.currSlide,a=e.carouselVertical,d=e.speed;!1===e.allowWrap?(l=0<c,r=e._currSlide,o=e.slideCount-e.carouselVisible,0<c&&e.nextSlide>o&&r==o?c=0:0<c&&e.nextSlide>o?c=e.nextSlide-r-(e.nextSlide-o):c<0&&e.currSlide>o&&e.nextSlide>o?c=0:c<0&&e.currSlide>o?c+=e.currSlide-o:r=e.currSlide,r=this.getScroll(e,a,r,c),e.API.opts()._currSlide=e.nextSlide>o?o:e.nextSlide):(!l||0!==e.nextSlide)&&(l||e.nextSlide!=e.slideCount-1)?r=this.getScroll(e,a,e.currSlide,c):(r=this.getDim(e,e.currSlide,a),t=this.genCallback(e,l,a,t)),n[a?"top":"left"]=l?"-="+r:"+="+r,e.throttleSpeed&&(d=r/u(e.slides[0])[a?"height":"width"]()*e.speed),e._carouselWrap.animate(n,d,e.easing,t)},getDim:function(e,i,s){return u(e.slides[i])[s?"outerHeight":"outerWidth"](!0)},getScroll:function(e,i,s,l){var t,r=0;if(0<l)for(t=s;t<s+l;t++)r+=this.getDim(e,t,i);else for(t=s;s+l<t;t--)r+=this.getDim(e,t,i);return r},genCallback:function(i,e,s,l){return function(){var e=0-u(i.slides[i.nextSlide]).position()[s?"top":"left"]+(i.carouselOffset||0);i._carouselWrap.css(i.carouselVertical?"top":"left",e),l()}},stopTransition:function(){var e=this.opts();e.slides.stop(!1,!0),e._carouselWrap.stop(!1,!0)},onDestroy:function(e){var i=this.opts();i._carouselResizeThrottle&&u(window).off("resize",i._carouselResizeThrottle),i.slides.prependTo(i.container),i._carouselWrap.remove()}}}(jQuery);