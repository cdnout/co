/* Plugin for Cycle2; Copyright (c) 2012 M. Alsup; v20210125 */

!function(s){"use strict";s.extend(s.fn.cycle.defaults,{progressive:!1}),s(document).on("cycle-pre-initialize",function(e,r){if(r.progressive){var c,n=r.API,i=n.next,l=n.prev,t=n.prepareTx,a=s.fn.cycle.varType(r.progressive);if("array"==a)c=r.progressive;else if("function"===s.fn.cycle.varType(r.progressive))c=r.progressive(r);else if("string"==a){if(a=s(r.progressive),!(c=a.html().trim()))return;if(/^(\[)/.test(c))try{c=s.parseJSON(c)}catch(e){return void n.log("error parsing progressive slides",e)}else(c=c.split(new RegExp(a.data("cycle-split")||"\n")))[c.length-1]||c.pop()}t&&(n.prepareTx=function(e,n){var i;e||0===c.length?t.apply(r.API,[e,n]):n&&r.currSlide==r.slideCount-1?(i=c[0],c=c.slice(1),r.container.one("cycle-slide-added",function(e,n){setTimeout(function(){n.API.advanceSlide(1)},50)}),r.API.add(i)):n||0!==r.currSlide?t.apply(r.API,[e,n]):(n=c.length-1,i=c[n],c=c.slice(0,n),r.container.one("cycle-slide-added",function(e,n){setTimeout(function(){n.currSlide=1,n.API.advanceSlide(-1)},50)}),r.API.add(i,!0))}),i&&(n.next=function(){var e,n=this.opts();c.length&&n.currSlide==n.slideCount-1?(e=c[0],c=c.slice(1),n.container.one("cycle-slide-added",function(e,n){i.apply(n.API),n.container.removeClass("cycle-loading")}),n.container.addClass("cycle-loading"),n.API.add(e)):i.apply(n.API)}),l&&(n.prev=function(){var e,n,i=this.opts();c.length&&0===i.currSlide?(e=c.length-1,n=c[e],c=c.slice(0,e),i.container.one("cycle-slide-added",function(e,n){n.currSlide=1,n.API.advanceSlide(-1),n.container.removeClass("cycle-loading")}),i.container.addClass("cycle-loading"),i.API.add(n,!0)):l.apply(i.API)})}})}(jQuery);