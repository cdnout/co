"use strict";function t(t){return t.replace(/\[([^[\]]*)\]/g,".$1.").split(".").filter((function(t){return""!==t}))}function e(e,r,n){for(var o=t(r),i=e,a=0;a<o.length-1;a++){var s=o[a];i.hasOwnProperty(s)||(i[s]={}),i=i[s]}i[o[o.length-1]]=n}function r(r,n,o){e(r,o,function(e,r){return t(r).reduce((function(t,e){return t&&t[e]}),e)}(n,o))}var n=function(){function t(t){this.storage=t}return t.prototype.set=function(t,e){this.storage.setItem(t,JSON.stringify(e))},t.prototype.get=function(t){return JSON.parse(this.storage.getItem(t))},t.prototype.has=function(t){return!!this.storage.getItem(t)},t}(),o=new n(window.localStorage),i=new n(window.sessionStorage),a=Object.freeze({__proto__:null,default:n,localStorage:o,sessionStorage:i});function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var u=function t(e,r){for(var n=0,o=Object.keys(r);n<o.length;n++){var i=o[n];"object"!==s(a=r[i])||Array.isArray(a)||null===a?e[i]=r[i]:i in e?t(e[i],r[i]):e[i]=r[i]}var a;return e};function f(t,n){for(var i=n.keys,a=n.merge,s=void 0===a?u:a,f=n.namespace,c=n.driver,l=void 0===c?o:c,p={},g=0,v=i;g<v.length;g++){var y=v[g];r(p,t,y)}var h=null;if(l.has(f))h=l.get(f);else{for(var m={},d=0,b=i;d<b.length;d++){r(m,p,y=b[d])}h=m,l.set(f,h)}h=s(p,h);for(var S=function(n){r(t,h,n),t.$watch(n,{handler:function(t){e(h,n,t),l.set(f,h)},deep:!0})},w=0,O=i;w<O.length;w++){S(y=O[w])}}var c=function(t){return function(t){var e=t.keys,n=t.merge,i=void 0===n?u:n,a=t.namespace,s=t.driver,f=void 0===s?o:s;return function(t){if(f.has(a)){var n=f.get(a);t.replaceState(i(t.state,n))}else{n={};for(var o=0,s=e;o<s.length;o++){var u=s[o];r(n,t.state,u)}f.set(a,n)}t.subscribe((function(t,n){for(var o={},i=0,s=e;i<s.length;i++){r(o,n,s[i])}f.set(a,o)}))}}(t)};c.install=function(t){t.mixin({created:function(){var t=this;if("storage"in this.$options){var e=this.$options.storage;"function"==typeof e&&(e=e.apply(this)),Array.isArray(e)?e.forEach((function(e){return f(t,e)})):f(this,e)}}})},c.drivers=a,module.exports=c;
//# sourceMappingURL=vuejs-storage.cjs.min.js.map
