var e,t=require("react"),n=(e=t)&&"object"==typeof e&&"default"in e?e.default:e;require("prop-types");var r=require("flip-toolkit");function i(e,t){if(null==e)return{};for(var r,n={},i=Object.keys(e),o=0;o<i.length;o++)0<=t.indexOf(r=i[o])||(n[r]=e[r]);return n}var o=t.createContext({}),p=t.createContext("portal"),s=function(t){var e;function i(){var e;return(e=t.apply(this,arguments)||this).inProgressAnimations={},e.flipCallbacks={},e.el=void 0,e}s=t,(e=i).prototype=Object.create(s.prototype),(e.prototype.constructor=e).__proto__=s;var s=i.prototype;return s.getSnapshotBeforeUpdate=function(e){return e.flipKey!==this.props.flipKey&&this.el?r.getFlippedElementPositionsBeforeUpdate({element:this.el,flipCallbacks:this.flipCallbacks,inProgressAnimations:this.inProgressAnimations,portalKey:this.props.portalKey}):null},s.componentDidUpdate=function(e,t,n){this.props.flipKey!==e.flipKey&&this.el&&r.onFlipKeyUpdate({flippedElementPositionsBeforeUpdate:n.flippedElementPositions,cachedOrderedFlipIds:n.cachedOrderedFlipIds,containerEl:this.el,inProgressAnimations:this.inProgressAnimations,flipCallbacks:this.flipCallbacks,applyTransformOrigin:this.props.applyTransformOrigin,spring:this.props.spring,debug:this.props.debug,portalKey:this.props.portalKey,staggerConfig:this.props.staggerConfig,handleEnterUpdateDelete:this.props.handleEnterUpdateDelete,decisionData:{previous:e.decisionData,current:this.props.decisionData},onComplete:this.props.onComplete,onStart:this.props.onStart})},s.render=function(){var t=this,e=this.props,r=e.portalKey,e=n.createElement(o.Provider,{value:this.flipCallbacks},n.createElement(e.element,{className:e.className,ref:function(e){return t.el=e}},this.props.children));return r&&(e=n.createElement(p.Provider,{value:r},e)),e},i}(t.Component);s.defaultProps={applyTransformOrigin:!0,element:"div"};var l=function(e){var n=e.children,o=e.flipId,p=e.inverseFlipId,s=e.portalKey,l=i(e,["children","flipId","inverseFlipId","portalKey"]),a=n,c="function"==typeof a;if(!c)try{a=t.Children.only(n)}catch(e){throw new Error("Each Flipped component must wrap a single child")}l.scale||l.translate||l.opacity||r.utilities.assign(l,{translate:!0,scale:!0,opacity:!0});var d=((d={})[r.constants.DATA_FLIP_CONFIG]=JSON.stringify(l),d);return void 0!==o?d[r.constants.DATA_FLIP_ID]=String(o):p&&(d[r.constants.DATA_INVERSE_FLIP_ID]=String(p)),void 0!==s&&(d[r.constants.DATA_PORTAL_KEY]=s),c?a(d):t.cloneElement(a,d)},a=function(e){var s=e.children,a=e.flipId,c=e.shouldFlip,d=e.shouldInvert,u=e.onAppear,f=e.onStart,h=e.onStartImmediate,m=e.onComplete,g=e.onExit,y=e.onSpringUpdate,v=i(e,["children","flipId","shouldFlip","shouldInvert","onAppear","onStart","onStartImmediate","onComplete","onExit","onSpringUpdate"]);return s?v.inverseFlipId?n.createElement(l,Object.assign({},v),s):n.createElement(p.Consumer,null,function(t){return n.createElement(o.Consumer,null,function(e){return r.utilities.isObject(e)&&a&&(e[a]={shouldFlip:c,shouldInvert:d,onAppear:u,onStart:f,onStartImmediate:h,onComplete:m,onExit:g,onSpringUpdate:y}),n.createElement(l,Object.assign({flipId:a},v,{portalKey:t}),s)})}):null};a.displayName="Flipped",exports.ExitContainer=function(e){return t.cloneElement(e.children,((e={})[r.constants.DATA_EXIT_CONTAINER]=!0,e))},exports.Flipped=a,exports.Flipper=s,exports.spring=r.spring;