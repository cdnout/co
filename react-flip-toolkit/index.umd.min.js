!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("prop-types"),require("flip-toolkit")):"function"==typeof define&&define.amd?define(["exports","react","prop-types","flip-toolkit"],t):t((e=e||self).ReactFlipToolkit={},e.React,e.PropTypes,e.FlipToolkit)}(this,function(e,a,t,u){var h="default"in a?a.default:a;function m(e,t){if(null==e)return{};for(var n,i={},r=Object.keys(e),o=0;o<r.length;o++)0<=t.indexOf(n=r[o])||(i[n]=e[n]);return i}t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;var y=a.createContext({}),g=a.createContext("portal"),n=function(t){var e;function n(){var e;return(e=t.apply(this,arguments)||this).inProgressAnimations={},e.flipCallbacks={},e.el=void 0,e}i=t,(e=n).prototype=Object.create(i.prototype),(e.prototype.constructor=e).__proto__=i;var i=n.prototype;return i.getSnapshotBeforeUpdate=function(e){return e.flipKey!==this.props.flipKey&&this.el?u.getFlippedElementPositionsBeforeUpdate({element:this.el,flipCallbacks:this.flipCallbacks,inProgressAnimations:this.inProgressAnimations,portalKey:this.props.portalKey}):null},i.componentDidUpdate=function(e,t,n){this.props.flipKey!==e.flipKey&&this.el&&u.onFlipKeyUpdate({flippedElementPositionsBeforeUpdate:n.flippedElementPositions,cachedOrderedFlipIds:n.cachedOrderedFlipIds,containerEl:this.el,inProgressAnimations:this.inProgressAnimations,flipCallbacks:this.flipCallbacks,applyTransformOrigin:this.props.applyTransformOrigin,spring:this.props.spring,debug:this.props.debug,portalKey:this.props.portalKey,staggerConfig:this.props.staggerConfig,handleEnterUpdateDelete:this.props.handleEnterUpdateDelete,decisionData:{previous:e.decisionData,current:this.props.decisionData},onComplete:this.props.onComplete,onStart:this.props.onStart})},i.render=function(){var t=this,e=this.props,n=e.portalKey,e=h.createElement(y.Provider,{value:this.flipCallbacks},h.createElement(e.element,{className:e.className,ref:function(e){return t.el=e}},this.props.children));return n&&(e=h.createElement(g.Provider,{value:n},e)),e},n}(a.Component);n.defaultProps={applyTransformOrigin:!0,element:"div"};function E(e){var t=e.children,n=e.flipId,i=e.inverseFlipId,r=e.portalKey,o=m(e,["children","flipId","inverseFlipId","portalKey"]),p=t,l="function"==typeof p;if(!l)try{p=a.Children.only(t)}catch(e){throw new Error("Each Flipped component must wrap a single child")}o.scale||o.translate||o.opacity||u.utilities.assign(o,{translate:!0,scale:!0,opacity:!0});var s=((s={})[u.constants.DATA_FLIP_CONFIG]=JSON.stringify(o),s);return void 0!==n?s[u.constants.DATA_FLIP_ID]=String(n):i&&(s[u.constants.DATA_INVERSE_FLIP_ID]=String(i)),void 0!==r&&(s[u.constants.DATA_PORTAL_KEY]=r),l?p(s):a.cloneElement(p,s)}t=function(e){var n=e.children,i=e.flipId,r=e.shouldFlip,o=e.shouldInvert,p=e.onAppear,l=e.onStart,s=e.onStartImmediate,a=e.onComplete,c=e.onExit,d=e.onSpringUpdate,f=m(e,["children","flipId","shouldFlip","shouldInvert","onAppear","onStart","onStartImmediate","onComplete","onExit","onSpringUpdate"]);return n?f.inverseFlipId?h.createElement(E,Object.assign({},f),n):h.createElement(g.Consumer,null,function(t){return h.createElement(y.Consumer,null,function(e){return u.utilities.isObject(e)&&i&&(e[i]={shouldFlip:r,shouldInvert:o,onAppear:p,onStart:l,onStartImmediate:s,onComplete:a,onExit:c,onSpringUpdate:d}),h.createElement(E,Object.assign({flipId:i},f,{portalKey:t}),n)})}):null};t.displayName="Flipped",e.ExitContainer=function(e){return a.cloneElement(e.children,((e={})[u.constants.DATA_EXIT_CONTAINER]=!0,e))},e.Flipped=t,e.Flipper=n,e.spring=u.spring});