!function(a){var t={selector:"[data-adaptive-background]",parent:null,exclude:["rgb(0,0,0)","rgba(255,255,255)"],normalizeTextColor:!1,normalizedTextColors:{light:"#fff",dark:"#000"},lumaClasses:{light:"ab-light",dark:"ab-dark"}};!function(a){"use strict";var t=function(a,t){var n=new Image,e=a.src||a;"data:"!==e.substring(0,5)&&(n.crossOrigin="Anonymous"),n.onload=function(){var a=document.createElement("canvas").getContext("2d");a.drawImage(n,0,0);var e=a.getImageData(0,0,n.width,n.height);t&&t(e.data)},n.src=e},n=function(a){return["rgb(",a,")"].join("")},e={};e.colors=function(a,e){var r=(e=e||{}).exclude||[],o=e.paletteSize||10;t(a,function(t){for(var c=a.width*a.height||t.length,s={},i="",l=[],u={dominant:{name:"",count:0},palette:Array.apply(null,new Array(o)).map(Boolean).map(function(){return{name:"0,0,0",count:0}})},d=0;c>d;){if(l[0]=t[d],l[1]=t[d+1],l[2]=t[d+2],i=l.join(","),s[i]=i in s?s[i]+1:1,-1===r.indexOf(n(i))){var m=s[i];m>u.dominant.count?(u.dominant.name=i,u.dominant.count=m):u.palette.some(function(a){return m>a.count?(a.name=i,a.count=m,!0):void 0})}d+=20}if(e.success){var p=function(a){return a.map(function(a){return n(a.name)})}(u.palette);e.success({dominant:n(u.dominant.name),secondary:p[0],palette:p})}})},a.RGBaster=a.RGBaster||e}(window),a.adaptiveBackground={run:function(n){var e=a.extend({},t,n);a(e.selector).each(function(t,n){var r=a(this),o=function(){var a=r.attr("data-ab-css-background");return void 0!==a&&!1!==a},c=function(){var a=r.css("background-image");return/\(([^)]+)\)/.exec(a)[1].replace(/"/g,"")};r.on("ab-color-found",function(a,t){var n;(n=e.parent&&r.parents(e.parent).length?r.parents(e.parent):r.attr("data-ab-parent")&&r.parents(r.attr("data-ab-parent")).length?r.parents(r.attr("data-ab-parent")):o()?r:e.parent?r.parents(e.parent):r.parent()).css({backgroundColor:t.color});var c=function(a){var n=t.color.match(/\d+/g);return(299*n[0]+587*n[1]+114*n[2])/1e3};e.normalizeTextColor&&n.css({color:(t.color,c()>=128?e.normalizedTextColors.dark:e.normalizedTextColors.light)}),n.addClass((t.color,c()<=128?e.lumaClasses.dark:e.lumaClasses.light)).attr("data-ab-yaq",c(t.color)),e.success&&e.success(r,t)}),function(){var a=o()?c():r[0];RGBaster.colors(a,{paletteSize:20,exclude:e.exclude,success:function(a){r.attr("data-ab-color",a.dominant),r.trigger("ab-color-found",{color:a.dominant,palette:a.palette})}})}()})}}}(jQuery);