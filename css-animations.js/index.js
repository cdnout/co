!function(){function e(t,s){for(var n=t.cssRules||t.rules||[],i=0;i<n.length;i++){var a=n[i];a.type==CSSRule.IMPORT_RULE?e(a.styleSheet,s):a.type!==CSSRule.KEYFRAMES_RULE&&a.type!==CSSRule.WEBKIT_KEYFRAMES_RULE||s(a,t,i)}}function t(e){this.original=e,this.keyText=e.keyText,this.css={};for(var t=e.style.cssText.split(";"),s=0;s<t.length;s++){var n=t[s].split(":");if(2==n.length){var i=n[0].replace(/^\s+|\s+$/g,""),a=n[1].replace(/^\s+|\s+$/g,"");this.css[i]=a}}}function s(e){this.original=e,this.name=e.name,this.keyframes=[],this.keytexts=[],this.keyframeHash={},this.initKeyframes()}function n(){this.animations={};for(var t=document.styleSheets,n=this.animations,i=0;i<t.length;i++)try{e(t[i],function(e){n[e.name]=new s(e)})}catch(e){}}s.prototype.initKeyframes=function(){this.keyframes=[],this.keytexts=[],this.keyframeHash={};for(var e=this.original,s=0;s<e.cssRules.length;s++){var n=new t(e.cssRules[s]);this.keyframes.push(n),this.keytexts.push(n.keyText),this.keyframeHash[n.keyText]=n}},s.prototype.getKeyframeTexts=function(){return this.keytexts},s.prototype.getKeyframe=function(e){return this.keyframeHash[e]},s.prototype.setKeyframe=function(e,t){var s=e+" {";for(var n in t)s+=n+":"+t[n]+";";return s+="}",this.original.insertRule(s),this.initKeyframes(),this},s.prototype.clear=function(){for(var e=0;e<this.keyframes.length;e++)this.original.deleteRule(this.keyframes[e].keyText)},n.prototype.get=function(e){return this.animations[e]},n.prototype.getDynamicSheet=function(){if(!this.dynamicSheet){var e=document.createElement("style");e.rel="stylesheet",e.type="text/css",document.getElementsByTagName("head")[0].appendChild(e),this.dynamicSheet=e.sheet}return this.dynamicSheet},n.prototype.create=function(e){var t=this.getDynamicSheet();e||(e="anim"+Math.floor(1e5*Math.random()));try{var n=t.insertRule("@keyframes "+e+"{}",t.cssRules.length)}catch(s){if("SYNTAX_ERR"!=s.name)throw s;n=t.insertRule("@-webkit-keyframes "+e+"{}",t.cssRules.length)}return this.animations[e]=new s(t.cssRules[n]),this.animations[e]},n.prototype.remove=function(t){var n=this.getDynamicSheet();t=t instanceof s?t.name:t,this.animations[t]=null;try{e(n,function(e,s,n){e.name==t&&s.deleteRule(n)})}catch(e){}},"function"==typeof define&&define.amd?define(function(){return new n}):window.CSSAnimations=new n}();