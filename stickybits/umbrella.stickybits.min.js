!function(t){"function"==typeof define&&define.amd?define(t):t()}(function(){"use strict";function S(){return(S=Object.assign||function(t){for(var s=1;s<arguments.length;s++){var e,i=arguments[s];for(e in i)Object.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e])}return t}).apply(this,arguments)}var t,s=function(){function t(t,s){var e=this,i=void 0!==s?s:{};this.version="3.7.9",this.userAgent=window.navigator.userAgent||"no `userAgent` provided by the browser",this.props={customStickyChangeNumber:i.customStickyChangeNumber||null,noStyles:i.noStyles||!1,stickyBitStickyOffset:i.stickyBitStickyOffset||0,parentClass:i.parentClass||"js-stickybit-parent",scrollEl:"string"==typeof i.scrollEl?document.querySelector(i.scrollEl):i.scrollEl||window,stickyClass:i.stickyClass||"js-is-sticky",stuckClass:i.stuckClass||"js-is-stuck",stickyChangeClass:i.stickyChangeClass||"js-is-sticky--change",useStickyClasses:i.useStickyClasses||!1,useFixed:i.useFixed||!1,useGetBoundingClientRect:i.useGetBoundingClientRect||!1,verticalPosition:i.verticalPosition||"top",applyStyle:i.applyStyle||function(t,s){return e.applyStyle(t,s)}},this.props.positionVal=this.definePosition()||"fixed",this.instances=[];var n=this.props,s=n.positionVal,o=n.verticalPosition,i=n.noStyles,n=n.stickyBitStickyOffset,a="top"!==o||i?"":n+"px",l="fixed"!==s?s:"";this.els="string"==typeof t?document.querySelectorAll(t):t,"length"in this.els||(this.els=[this.els]);for(var r=0;r<this.els.length;r++){var c=this.els[r],p=this.addInstance(c,this.props);this.props.applyStyle({styles:((c={})[o]=a,c.position=l,c),classes:{}},p),this.manageState(p),this.instances.push(p)}}var s=t.prototype;return s.definePosition=function(){var t;if(this.props.useFixed)t="fixed";else{for(var s=["","-o-","-webkit-","-moz-","-ms-"],e=document.head.style,i=0;i<s.length;i+=1)e.position=s[i]+"sticky";t=e.position||"fixed",e.position=""}return t},s.addInstance=function(t,s){var e=this,i={el:t,parent:t.parentNode,props:s};return"fixed"!==s.positionVal&&!s.useStickyClasses||(this.isWin=this.props.scrollEl===window,t=this.isWin?window:this.getClosestParent(i.el,i.props.scrollEl),this.computeScrollOffsets(i),this.toggleClasses(i.parent,"",s.parentClass),i.state="default",i.stateChange="default",i.stateContainer=function(){return e.manageState(i)},t.addEventListener("scroll",i.stateContainer)),i},s.getClosestParent=function(t,s){var e=s,i=t;if(i.parentElement===e)return e;for(;i.parentElement!==e;)i=i.parentElement;return e},s.getTopPosition=function(t){if(this.props.useGetBoundingClientRect)return t.getBoundingClientRect().top+(this.props.scrollEl.pageYOffset||document.documentElement.scrollTop);for(var s=0;s=t.offsetTop+s,t=t.offsetParent;);return s},s.computeScrollOffsets=function(t){var s=t,e=s.props,i=s.el,n=s.parent,o=!this.isWin&&"fixed"===e.positionVal,a="bottom"!==e.verticalPosition,l=o?this.getTopPosition(e.scrollEl):0,r=o?this.getTopPosition(n)-l:this.getTopPosition(n),t=null!==e.customStickyChangeNumber?e.customStickyChangeNumber:i.offsetHeight,n=r+n.offsetHeight;s.offset=o?0:l+e.stickyBitStickyOffset,s.stickyStart=a?r-s.offset:0,s.stickyChange=s.stickyStart+t,s.stickyStop=a?n-(i.offsetHeight+s.offset):n-window.innerHeight},s.toggleClasses=function(t,s,e){var i=t,t=i.className.split(" ");e&&-1===t.indexOf(e)&&t.push(e);s=t.indexOf(s);-1!==s&&t.splice(s,1),i.className=t.join(" ")},s.manageState=function(e){var i=this,n=e,o=n.props,t=n.state,s=n.stateChange,a=n.stickyStart,l=n.stickyChange,r=n.stickyStop,c=o.positionVal,p=o.scrollEl,f=o.stickyClass,u=o.stickyChangeClass,y=o.stuckClass,h=o.verticalPosition,d="bottom"!==h,g=o.applyStyle,k=o.noStyles,m=function(t){t()},C=this.isWin&&(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame)||m,m=this.isWin?window.scrollY||window.pageYOffset:p.scrollTop,p=d&&m<=a&&("sticky"===t||"stuck"===t),d=r<=m&&"sticky"===t;a<m&&m<r&&("default"===t||"stuck"===t)?n.state="sticky":p?n.state="default":d&&(n.state="stuck");var v=l<=m&&m<=r;m<l/2||r<m?n.stateChange="default":v&&(n.stateChange="sticky"),t===n.state&&s===n.stateChange||C(function(){var t={sticky:{styles:((s={position:c,top:"",bottom:""})[h]=o.stickyBitStickyOffset+"px",s),classes:((t={})[f]=!0,t)},default:{styles:((s={})[h]="",s),classes:{}},stuck:{styles:S(((t={})[h]="",t),"fixed"===c&&!k||!i.isWin?{position:"absolute",top:"",bottom:"0"}:{}),classes:((s={})[y]=!0,s)}};"fixed"===c&&(t.default.styles.position="");var s=t[n.state];s.classes=((t={})[y]=!!s.classes[y],t[f]=!!s.classes[f],t[u]=v,t),g(s,e)})},s.applyStyle=function(t,s){var e,i,n=t.styles,o=t.classes,t=s.el,s=s.props,a=t.style,s=s.noStyles,l=t.className.split(" ");for(e in o)o[e]?-1===l.indexOf(e)&&l.push(e):-1!==(i=l.indexOf(e))&&l.splice(i,1);if(t.className=l.join(" "),n.position&&(a.position=n.position),!s)for(var r in n)a[r]=n[r]},s.update=function(e){var i=this;return void 0===e&&(e=null),this.instances.forEach(function(t){if(i.computeScrollOffsets(t),e)for(var s in e)t.props[s]=e[s]}),this},s.removeInstance=function(t){var s,e=t.el,i=t.props;this.applyStyle({styles:((s={position:""})[i.verticalPosition]="",s),classes:((s={})[i.stickyClass]="",s[i.stuckClass]="",s)},t),this.toggleClasses(e.parentNode,i.parentClass)},s.cleanup=function(){for(var t=0;t<this.instances.length;t+=1){var s=this.instances[t];s.stateContainer&&s.props.scrollEl.removeEventListener("scroll",s.stateContainer),this.removeInstance(s)}this.manageState=!1,this.instances=[]},t}();"undefined"==typeof window||(t=window.u)&&(t.prototype.stickybits=function(t){return new s(this,t)})});