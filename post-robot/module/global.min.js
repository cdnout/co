"use strict";exports.__esModule=!0,exports.getGlobalKey=getGlobalKey,exports.getGlobal=getGlobal,exports.deleteGlobal=deleteGlobal,exports.globalStore=globalStore,exports.getWildcard=getWildcard,exports.windowStore=windowStore,exports.WildCard=void 0;var _src=require("cross-domain-safe-weakmap/src"),_src2=require("belter/src");function getGlobalKey(){return __POST_ROBOT__.__SCRIPT_NAMESPACE__?`${__POST_ROBOT__.__GLOBAL_KEY__}_${(0,_src2.getCurrentScriptUID)()}`:__POST_ROBOT__.__GLOBAL_KEY__}function getGlobal(e=window){const t=getGlobalKey();return e!==window?e[t]:e[t]=e[t]||{}}function deleteGlobal(){const e=getGlobalKey();delete window[e]}const getObj=()=>({});function globalStore(e="store",t=getObj){return(0,_src2.getOrSet)(getGlobal(),e,()=>{let e=t();return{has:t=>e.hasOwnProperty(t),get:(t,r)=>e.hasOwnProperty(t)?e[t]:r,set:(t,r)=>(e[t]=r,r),del:t=>{delete e[t]},getOrSet:(t,r)=>(0,_src2.getOrSet)(e,t,r),reset:()=>{e=t()},keys:()=>Object.keys(e)}})}class WildCard{}function getWildcard(){const e=getGlobal();return e.WINDOW_WILDCARD=e.WINDOW_WILDCARD||new WildCard,e.WINDOW_WILDCARD}function windowStore(e="store",t=getObj){return globalStore("windowStore").getOrSet(e,()=>{const r=new _src.WeakMap,o=e=>r.getOrSet(e,t);return{has:t=>{return o(t).hasOwnProperty(e)},get:(t,r)=>{const l=o(t);return l.hasOwnProperty(e)?l[e]:r},set:(t,r)=>{return o(t)[e]=r,r},del:t=>{delete o(t)[e]},getOrSet:(t,r)=>{const l=o(t);return(0,_src2.getOrSet)(l,e,r)}}})}exports.WildCard=WildCard;