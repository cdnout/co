import{int,pad}from"../utils";const doNothing=()=>void 0;export const monthToStr=(t,e,o)=>o.months[e?"shorthand":"longhand"][t];export const revFormat={D:doNothing,F:function(t,e,o){t.setMonth(o.months.longhand.indexOf(e))},G:(t,e)=>{t.setHours(parseFloat(e))},H:(t,e)=>{t.setHours(parseFloat(e))},J:(t,e)=>{t.setDate(parseFloat(e))},K:(t,e,o)=>{t.setHours(t.getHours()%12+12*int(new RegExp(o.amPM[1],"i").test(e)))},M:function(t,e,o){t.setMonth(o.months.shorthand.indexOf(e))},S:(t,e)=>{t.setSeconds(parseFloat(e))},U:(t,e)=>new Date(1e3*parseFloat(e)),W:function(t,e,o){const n=parseInt(e),a=new Date(t.getFullYear(),0,2+7*(n-1),0,0,0,0);return a.setDate(a.getDate()-a.getDay()+o.firstDayOfWeek),a},Y:(t,e)=>{t.setFullYear(parseFloat(e))},Z:(t,e)=>new Date(e),d:(t,e)=>{t.setDate(parseFloat(e))},h:(t,e)=>{t.setHours(parseFloat(e))},i:(t,e)=>{t.setMinutes(parseFloat(e))},j:(t,e)=>{t.setDate(parseFloat(e))},l:doNothing,m:(t,e)=>{t.setMonth(parseFloat(e)-1)},n:(t,e)=>{t.setMonth(parseFloat(e)-1)},s:(t,e)=>{t.setSeconds(parseFloat(e))},u:(t,e)=>new Date(parseFloat(e)),w:doNothing,y:(t,e)=>{t.setFullYear(2e3+parseFloat(e))}};export const tokenRegex={D:"(\\w+)",F:"(\\w+)",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"(\\w+)",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"(\\w+)",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"};export const formats={Z:t=>t.toISOString(),D:function(t,e,o){return e.weekdays.shorthand[formats.w(t,e,o)]},F:function(t,e,o){return monthToStr(formats.n(t,e,o)-1,!1,e)},G:function(t,e,o){return pad(formats.h(t,e,o))},H:t=>pad(t.getHours()),J:function(t,e){return void 0!==e.ordinal?t.getDate()+e.ordinal(t.getDate()):t.getDate()},K:(t,e)=>e.amPM[int(t.getHours()>11)],M:function(t,e){return monthToStr(t.getMonth(),!0,e)},S:t=>pad(t.getSeconds()),U:t=>t.getTime()/1e3,W:function(t,e,o){return o.getWeek(t)},Y:t=>pad(t.getFullYear(),4),d:t=>pad(t.getDate()),h:t=>t.getHours()%12?t.getHours()%12:12,i:t=>pad(t.getMinutes()),j:t=>t.getDate(),l:function(t,e){return e.weekdays.longhand[t.getDay()]},m:t=>pad(t.getMonth()+1),n:t=>t.getMonth()+1,s:t=>t.getSeconds(),u:t=>t.getTime(),w:t=>t.getDay(),y:t=>String(t.getFullYear()).substring(2)};