import{getEventTarget}from"../../utils/dom";function weekSelectPlugin(){return function(e){function t(t){const n=getEventTarget(t);if(!n.classList.contains("flatpickr-day"))return;const o=e.days.childNodes,a=n.$i/7,i=o[7*Math.floor(a)].dateObj,s=o[7*Math.ceil(a+.01)-1].dateObj;for(let e=o.length;e--;){const t=o[e],n=t.dateObj;n>s||n<i?t.classList.remove("inRange"):t.classList.add("inRange")}}function n(){const t=e.latestSelectedDateObj;void 0!==t&&t.getMonth()===e.currentMonth&&t.getFullYear()===e.currentYear&&(e.weekStartDay=e.days.childNodes[7*Math.floor(e.selectedDateElem.$i/7)].dateObj,e.weekEndDay=e.days.childNodes[7*Math.ceil(e.selectedDateElem.$i/7+.01)-1].dateObj);const n=e.days.childNodes;for(let t=n.length;t--;){const o=n[t].dateObj;o>=e.weekStartDay&&o<=e.weekEndDay&&n[t].classList.add("week","selected")}}return{onValueUpdate:n,onMonthChange:n,onYearChange:n,onOpen:n,onClose:function(){const t=e.days.childNodes;for(let e=t.length;e--;)t[e].classList.remove("inRange")},onParseConfig:function(){e.config.mode="single",e.config.enableTime=!1,e.config.dateFormat=e.config.dateFormat?e.config.dateFormat:"\\W\\e\\e\\k #W, Y",e.config.altFormat=e.config.altFormat?e.config.altFormat:"\\W\\e\\e\\k #W, Y"},onReady:[function(){void 0!==e.daysContainer&&e.daysContainer.addEventListener("mouseover",t)},n,()=>{e.loadedPlugins.push("weekSelect")}],onDestroy:function(){void 0!==e.daysContainer&&e.daysContainer.removeEventListener("mouseover",t)}}}}export default weekSelectPlugin;