import{getEventTarget}from"../utils/dom";if("function"!=typeof window.CustomEvent){function CustomEvent(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}CustomEvent.prototype=window.Event.prototype,window.CustomEvent=CustomEvent}function delta(e){return Math.max(-1,Math.min(1,e.wheelDelta||-e.deltaY))}const scroll=e=>{e.preventDefault();const t=new CustomEvent("increment",{bubbles:!0});t.delta=delta(e),getEventTarget(e).dispatchEvent(t)};function scrollMonth(e){return t=>{t.preventDefault();const n=delta(t);e.changeMonth(n)}}function scrollPlugin(){return function(e){const t=scrollMonth(e);return{onReady(){e.timeContainer&&e.timeContainer.addEventListener("wheel",scroll),e.yearElements.forEach(e=>e.addEventListener("wheel",scroll)),e.monthElements.forEach(e=>e.addEventListener("wheel",t)),e.loadedPlugins.push("scroll")},onDestroy(){e.timeContainer&&e.timeContainer.removeEventListener("wheel",scroll),e.yearElements.forEach(e=>e.removeEventListener("wheel",scroll)),e.monthElements.forEach(e=>e.removeEventListener("wheel",t))}}}}export default scrollPlugin;