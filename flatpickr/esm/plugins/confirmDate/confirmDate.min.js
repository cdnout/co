import{getEventTarget}from"../../utils/dom";const defaultConfig={confirmIcon:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='17' height='17' viewBox='0 0 17 17'> <g> </g> <path d='M15.418 1.774l-8.833 13.485-4.918-4.386 0.666-0.746 4.051 3.614 8.198-12.515 0.836 0.548z' fill='#000000' /> </svg>",confirmText:"OK ",showAlways:!1,theme:"light"};function confirmDatePlugin(e){const n=Object.assign(Object.assign({},defaultConfig),e);let i;return function(e){return e.config.noCalendar||e.isMobile?{}:Object.assign({onKeyDown(n,t,o,l){const a=getEventTarget(l);e.config.enableTime&&"Tab"===l.key&&a===e.amPM?(l.preventDefault(),i.focus()):"Enter"===l.key&&a===i&&e.close()},onReady(){(i=e._createElement("div",`flatpickr-confirm ${n.showAlways?"visible":""} ${n.theme}Theme`,n.confirmText)).tabIndex=-1,i.innerHTML+=n.confirmIcon,i.addEventListener("click",e.close),e.calendarContainer.appendChild(i),e.loadedPlugins.push("confirmDate")}},n.showAlways?{}:{onChange:function(n,i){const t=e.config.enableTime||"multiple"===e.config.mode||-1!==e.loadedPlugins.indexOf("monthSelect"),o=e.calendarContainer.querySelector(".flatpickr-confirm");if(o)return i&&!e.config.inline&&t&&o?o.classList.add("visible"):void o.classList.remove("visible")}})}}export default confirmDatePlugin;