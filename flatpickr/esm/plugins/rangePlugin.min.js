function rangePlugin(e={}){return function(t){let n,o,i,a="";const l={onParseConfig(){t.config.mode="range",a=t.config.altInput?t.config.altFormat:t.config.dateFormat},onReady(){(()=>{if(e.input){if(!(n=e.input instanceof Element?e.input:window.document.querySelector(e.input)))return void t.config.errorHandler(new Error("Invalid input element specified"));t.config.wrap&&(n=n.querySelector("[data-input]"))}else(n=t._input.cloneNode()).removeAttribute("id"),n._flatpickr=void 0;if(n.value){const e=t.parseDate(n.value);e&&t.selectedDates.push(e)}n.setAttribute("data-fp-omit",""),t.config.clickOpens&&(t._bind(n,["focus","click"],()=>{t.selectedDates[1]&&(t.latestSelectedDateObj=t.selectedDates[1],t._setHoursFromDate(t.selectedDates[1]),t.jumpToDate(t.selectedDates[1])),o=!0,t.isOpen=!1,t.open(void 0,"left"===e.position?t._input:n)}),t._bind(t._input,["focus","click"],e=>{e.preventDefault(),t.isOpen=!1,t.open()})),t.config.allowInput&&t._bind(n,"keydown",e=>{"Enter"===e.key&&(t.setDate([t.selectedDates[0],n.value],!0,a),n.click())}),e.input||t._input.parentNode&&t._input.parentNode.insertBefore(n,t._input.nextSibling)})(),t.config.ignoredFocusElements.push(n),t.config.allowInput?(t._input.removeAttribute("readonly"),n.removeAttribute("readonly")):n.setAttribute("readonly","readonly"),t._bind(t._input,"focus",()=>{t.latestSelectedDateObj=t.selectedDates[0],t._setHoursFromDate(t.selectedDates[0]),o=!1,t.jumpToDate(t.selectedDates[0])}),t.config.allowInput&&t._bind(t._input,"keydown",e=>{"Enter"===e.key&&t.setDate([t._input.value,t.selectedDates[1]],!0,a)}),t.setDate(t.selectedDates,!1),l.onValueUpdate(t.selectedDates),t.loadedPlugins.push("range")},onPreCalendarPosition(){o&&(t._positionElement=n,setTimeout(()=>{t._positionElement=t._input},0))},onChange(){t.selectedDates.length||setTimeout(()=>{t.selectedDates.length||(n.value="",i=[])},10),o&&setTimeout(()=>{n.focus()},0)},onDestroy(){e.input||n.parentNode&&n.parentNode.removeChild(n)},onValueUpdate(e){if(n){if((i=!i||e.length>=i.length?[...e]:i).length>e.length){const n=e[0],a=o?[i[0],n]:[n,i[1]];t.setDate(a,!1),i=[...a]}[t._input.value="",n.value=""]=t.selectedDates.map(e=>t.formatDate(e,a))}}};return l}}export default rangePlugin;