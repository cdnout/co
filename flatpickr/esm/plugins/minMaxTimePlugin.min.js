import{compareDates,compareTimes,createDateFormatter}from"../utils/dates";function minMaxTimePlugin(e={}){const t={formatDate:createDateFormatter({}),tableDateFormat:e.tableDateFormat||"Y-m-d",defaults:{minTime:void 0,maxTime:void 0}};return function(i){return{onReady(){t.formatDate=this.formatDate,t.defaults={minTime:this.config.minTime&&t.formatDate(this.config.minTime,"H:i"),maxTime:this.config.maxTime&&t.formatDate(this.config.maxTime,"H:i")},i.loadedPlugins.push("minMaxTime")},onChange(){const m=this.latestSelectedDateObj,a=m&&(o=m,void 0!==e.table?e.table[t.formatDate(o,t.tableDateFormat)]:e.getTimeLimits&&e.getTimeLimits(o));var o;if(m&&void 0!==a)this.set(a),i.config.minTime.setFullYear(m.getFullYear()),i.config.maxTime.setFullYear(m.getFullYear()),i.config.minTime.setMonth(m.getMonth()),i.config.maxTime.setMonth(m.getMonth()),i.config.minTime.setDate(m.getDate()),i.config.maxTime.setDate(m.getDate()),compareDates(m,i.config.maxTime,!1)>0?i.setDate(new Date(m.getTime()).setHours(i.config.maxTime.getHours(),i.config.maxTime.getMinutes(),i.config.maxTime.getSeconds(),i.config.maxTime.getMilliseconds()),!1):compareDates(m,i.config.minTime,!1)<0&&i.setDate(new Date(m.getTime()).setHours(i.config.minTime.getHours(),i.config.minTime.getMinutes(),i.config.minTime.getSeconds(),i.config.minTime.getMilliseconds()),!1);else{const e=t.defaults||{minTime:void 0,maxTime:void 0};if(this.set(e),!m)return;const{minTime:a,maxTime:o}=i.config;a&&compareTimes(m,a)<0?i.setDate(new Date(m.getTime()).setHours(a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds()),!1):o&&compareTimes(m,o)>0&&i.setDate(new Date(m.getTime()).setHours(o.getHours(),o.getMinutes(),o.getSeconds(),o.getMilliseconds()))}}}}}export default minMaxTimePlugin;