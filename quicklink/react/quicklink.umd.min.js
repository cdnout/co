!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((e=e||self).quicklink={})}(this,function(e){function r(r){return new Promise(function(e,n,t){(t=new XMLHttpRequest).open("GET",r,t.withCredentials=!0),t.onload=function(){(200===t.status?e:n)()},t.send()})}var n,o=(n=document.createElement("link")).relList&&n.relList.supports&&n.relList.supports("prefetch")?function(r){return new Promise(function(e,n,t){(t=document.createElement("link")).rel="prefetch",t.href=r,t.onload=e,t.onerror=n,document.head.appendChild(t)})}:r,a=window.requestIdleCallback||function(e){var n=Date.now();return setTimeout(function(){e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-n))}})},1)},l=new Set;function d(e,n,t){if(t=navigator.connection){if(t.saveData)return Promise.reject(new Error("Cannot prefetch, Save-Data is enabled"));if(/2g/.test(t.effectiveType))return Promise.reject(new Error("Cannot prefetch, network conditions are poor"))}return Promise.all([].concat(e).map(function(e){if(!l.has(e))return l.add(e),(n?function(e){return window.fetch?fetch(e,{credentials:"include"}):r(e)}:o)(new URL(e,location.href).toString())}))}e.listen=function(n){if(n=n||{},window.IntersectionObserver){function t(e){d(e,n.priority).then(o).catch(function(e){o(),n.onError&&n.onError(e)})}var e=function(e){e=e||1;var n=[],t=0;function r(){t<e&&0<n.length&&(n.shift()(),t++)}return[function(e){1<n.push(e)||r()},function(){t--,r()}]}(n.throttle||1/0),r=e[0],o=e[1],i=n.limit||1/0,c=n.origins||[location.hostname],u=n.ignores||[],e=n.timeoutFn||a,f=n.prefetchChunks,s=new IntersectionObserver(function(e){e.forEach(function(e){e.isIntersecting&&(s.unobserve(e=e.target),l.size<i&&r(function(){f?f(e,t):t(e.href)}))})});return e(function(){(n.el||document).querySelectorAll("a").forEach(function(e){c.length&&!c.includes(e.hostname)||function n(t,e){return Array.isArray(e)?e.some(function(e){return n(t,e)}):(e.test||e).call(e,t.href,t)}(e,u)||s.observe(e)})},{timeout:n.timeout||2e3}),function(){l.clear(),s.disconnect()}}},e.prefetch=d});