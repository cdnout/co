function n(n){return new Promise(function(e,t,r){(r=new XMLHttpRequest).open("GET",n,r.withCredentials=!0),r.onload=function(){200===r.status?e():t()},r.send()})}var e,t=(e=document.createElement("link")).relList&&e.relList.supports&&e.relList.supports("prefetch")?function(n){return new Promise(function(e,t,r){(r=document.createElement("link")).rel="prefetch",r.href=n,r.onload=e,r.onerror=t,document.head.appendChild(r)})}:n,r=window.requestIdleCallback||function(n){var e=Date.now();return setTimeout(function(){n({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-e))}})},1)},o=new Set;function i(e,r,i){if(!(i=navigator.connection)||!i.saveData&&!/2g/.test(i.effectiveType))return Promise.all([].concat(e).map(function(e){if(!o.has(e))return o.add(e),(r?function(e){return window.fetch?fetch(e,{credentials:"include"}):n(e)}:t)(new URL(e,location.href).toString())}))}exports.listen=function(n){if(n||(n={}),window.IntersectionObserver){var e=function(n){n=n||1;var e=[],t=0;function r(){t<n&&e.length>0&&(e.shift()(),t++)}return[function(n){e.push(n)>1||r()},function(){t--,r()}]}(n.throttle||1/0),t=e[0],c=e[1],u=n.limit||1/0,s=n.origins||[location.hostname],f=n.ignores||[],a=n.timeoutFn||r,l=n.prefetchChunks,h=function(e){i(e,n.priority).then(c).catch(function(e){c(),n.onError&&n.onError(e)})},d=new IntersectionObserver(function(n){n.forEach(function(n){n.isIntersecting&&(d.unobserve(n=n.target),o.size<u&&t(function(){l?l(n,h):h(n.href)}))})});return a(function(){(n.el||document).querySelectorAll("a").forEach(function(n){s.length&&!s.includes(n.hostname)||function n(e,t){return Array.isArray(t)?t.some(function(t){return n(e,t)}):(t.test||t).call(t,e.href,e)}(n,f)||d.observe(n)})},{timeout:n.timeout||2e3}),function(){o.clear(),d.disconnect()}}},exports.prefetch=i;
