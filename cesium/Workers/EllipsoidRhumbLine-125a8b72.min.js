define(["exports","./Matrix2-37e55508","./RuntimeError-8952249c","./defaultValue-81eec7ed","./ComponentDatatype-a15c9a19"],function(t,d,i,M,c){"use strict";function I(t,i,e){if(0===t)return i*e;var a=t*t,n=a*a,s=n*a,h=s*a,u=h*a,t=u*a,e=e;return i*((1-a/4-3*n/64-5*s/256-175*h/16384-441*u/65536-4851*t/1048576)*e-(3*a/8+3*n/32+45*s/1024+105*h/4096+2205*u/131072+6237*t/524288)*Math.sin(2*e)+(15*n/256+45*s/1024+525*h/16384+1575*u/65536+155925*t/8388608)*Math.sin(4*e)-(35*s/3072+175*h/12288+3675*u/262144+13475*t/1048576)*Math.sin(6*e)+(315*h/131072+2205*u/524288+43659*t/8388608)*Math.sin(8*e)-(693*u/1310720+6237*t/5242880)*Math.sin(10*e)+1001*t/8388608*Math.sin(12*e))}function h(t,i){if(0===t)return Math.log(Math.tan(.5*(c.CesiumMath.PI_OVER_TWO+i)));var e=t*Math.sin(i);return Math.log(Math.tan(.5*(c.CesiumMath.PI_OVER_TWO+i)))-t/2*Math.log((1+e)/(1-e))}const u=new d.Cartesian3,o=new d.Cartesian3;function a(t,i,e,a){d.Cartesian3.normalize(a.cartographicToCartesian(i,o),u),d.Cartesian3.normalize(a.cartographicToCartesian(e,o),o);var n=a.maximumRadius,s=a.minimumRadius,n=n*n;t._ellipticitySquared=(n-s*s)/n,t._ellipticity=Math.sqrt(t._ellipticitySquared),t._start=d.Cartographic.clone(i,t._start),t._start.height=0,t._end=d.Cartographic.clone(e,t._end),t._end.height=0,t._heading=function(t,i,e,a,n){e=h(t._ellipticity,e),n=h(t._ellipticity,n);return Math.atan2(c.CesiumMath.negativePiToPi(a-i),n-e)}(t,i.longitude,i.latitude,e.longitude,e.latitude),t._distance=function(t,i,e,a,n,s,h){var u=t._heading,a=s-a;let o=0;if(c.CesiumMath.equalsEpsilon(Math.abs(u),c.CesiumMath.PI_OVER_TWO,c.CesiumMath.EPSILON8))if(i===e)o=i*Math.cos(n)*c.CesiumMath.negativePiToPi(a);else{const e=Math.sin(n);o=i*Math.cos(n)*c.CesiumMath.negativePiToPi(a)/Math.sqrt(1-t._ellipticitySquared*e*e)}else{const e=I(t._ellipticity,i,n);o=(I(t._ellipticity,i,h)-e)/Math.cos(u)}return Math.abs(o)}(t,a.maximumRadius,a.minimumRadius,i.longitude,i.latitude,e.longitude,e.latitude)}function r(f,P,O,E,v,t){if(0===O)return d.Cartographic.clone(f,t);var i=v*v;let e,a,n;if(Math.abs(c.CesiumMath.PI_OVER_TWO-Math.abs(P))>c.CesiumMath.EPSILON8){a=function(){var t=(I(v,E,f.latitude)+O*Math.cos(P))/E;if(0===v)return t;var i=t*t,e=i*t,a=e*t,n=v*v,s=n*n,h=s*n,u=h*n,o=u*n,r=o*n,l=Math.sin(2*t),d=Math.cos(2*t),M=Math.sin(4*t),c=Math.cos(4*t),m=Math.sin(6*t),g=Math.cos(6*t),_=Math.sin(8*t),p=Math.cos(8*t),C=Math.sin(10*t);return t+t*n/4+7*t*s/64+15*t*h/256+579*t*u/16384+1515*t*o/65536+16837*t*r/1048576+(3*t*s/16+45*t*h/256-t*(32*i-561)*u/4096-t*(232*i-1677)*o/16384+t*(399985-90560*i+512*a)*r/5242880)*d+(21*t*h/256+483*t*u/4096-t*(224*i-1969)*o/16384-t*(33152*i-112599)*r/1048576)*c+(151*t*u/4096+4681*t*o/65536+1479*t*r/16384-453*e*r/32768)*g+(1097*t*o/65536+42783*t*r/1048576)*p+8011*t*r/1048576*Math.cos(10*t)+(3*n/8+3*s/16+213*h/2048-3*i*h/64+255*u/4096-33*i*u/512+20861*o/524288-33*i*o/512+a*o/1024+28273*r/1048576-471*i*r/8192+9*a*r/4096)*l+(21*s/256+21*h/256+533*u/8192-21*i*u/512+197*o/4096-315*i*o/4096+584039*r/16777216-12517*i*r/131072+7*a*r/2048)*M+(151*h/6144+151*u/4096+5019*o/131072-453*i*o/16384+26965*r/786432-8607*i*r/131072)*m+(1097*u/131072+1097*o/65536+225797*r/10485760-1097*i*r/65536)*_+(8011*o/2621440+8011*r/1048576)*C+293393*r/251658240*Math.sin(12*t)}();const d=h(v,f.latitude),M=h(v,a);n=Math.tan(P)*(M-d),e=c.CesiumMath.negativePiToPi(f.longitude+n)}else{let t;if(a=f.latitude,0===v)t=E*Math.cos(f.latitude);else{const P=Math.sin(f.latitude);t=E*Math.cos(f.latitude)/Math.sqrt(1-i*P*P)}n=O/t,e=0<P?c.CesiumMath.negativePiToPi(f.longitude+n):c.CesiumMath.negativePiToPi(f.longitude-n)}return M.defined(t)?(t.longitude=e,t.latitude=a,t.height=0,t):new d.Cartographic(e,a,0)}function l(t,i,e){e=M.defaultValue(e,d.Ellipsoid.WGS84);this._ellipsoid=e,this._start=new d.Cartographic,this._end=new d.Cartographic,this._heading=void 0,this._distance=void 0,this._ellipticity=void 0,this._ellipticitySquared=void 0,M.defined(t)&&M.defined(i)&&a(this,t,i,e)}Object.defineProperties(l.prototype,{ellipsoid:{get:function(){return this._ellipsoid}},surfaceDistance:{get:function(){return this._distance}},start:{get:function(){return this._start}},end:{get:function(){return this._end}},heading:{get:function(){return this._heading}}}),l.fromStartHeadingDistance=function(t,i,e,a,n){var s=M.defaultValue(a,d.Ellipsoid.WGS84),h=s.maximumRadius,u=s.minimumRadius,h=h*h,h=Math.sqrt((h-u*u)/h),h=r(t,i=c.CesiumMath.negativePiToPi(i),e,s.maximumRadius,h);return!M.defined(n)||M.defined(a)&&!a.equals(n.ellipsoid)?new l(t,h,s):(n.setEndPoints(t,h),n)},l.prototype.setEndPoints=function(t,i){a(this,t,i,this._ellipsoid)},l.prototype.interpolateUsingFraction=function(t,i){return this.interpolateUsingSurfaceDistance(t*this._distance,i)},l.prototype.interpolateUsingSurfaceDistance=function(t,i){return r(this._start,this._heading,t,this._ellipsoid.maximumRadius,this._ellipticity,i)},l.prototype.findIntersectionWithLongitude=function(t,i){var e=this._ellipticity,a=this._heading,n=Math.abs(a),s=this._start;if(t=c.CesiumMath.negativePiToPi(t),c.CesiumMath.equalsEpsilon(Math.abs(t),Math.PI,c.CesiumMath.EPSILON14)&&(t=c.CesiumMath.sign(s.longitude)*Math.PI),M.defined(i)||(i=new d.Cartographic),Math.abs(c.CesiumMath.PI_OVER_TWO-n)<=c.CesiumMath.EPSILON8)return i.longitude=t,i.latitude=s.latitude,i.height=0,i;if(c.CesiumMath.equalsEpsilon(Math.abs(c.CesiumMath.PI_OVER_TWO-n),c.CesiumMath.PI_OVER_TWO,c.CesiumMath.EPSILON8))return c.CesiumMath.equalsEpsilon(t,s.longitude,c.CesiumMath.EPSILON12)?void 0:(i.longitude=t,i.latitude=c.CesiumMath.PI_OVER_TWO*c.CesiumMath.sign(c.CesiumMath.PI_OVER_TWO-a),i.height=0,i);var h=s.latitude,n=e*Math.sin(h),u=Math.tan(.5*(c.CesiumMath.PI_OVER_TWO+h))*Math.exp((t-s.longitude)/Math.tan(a)),o=(1+n)/(1-n);let r,l=s.latitude;do{r=l;const t=e*Math.sin(r),d=(1+t)/(1-t);l=2*Math.atan(u*Math.pow(d/o,e/2))-c.CesiumMath.PI_OVER_TWO}while(!c.CesiumMath.equalsEpsilon(l,r,c.CesiumMath.EPSILON12));return i.longitude=t,i.latitude=l,i.height=0,i},l.prototype.findIntersectionWithLatitude=function(t,i){var e=this._ellipticity,a=this._heading,n=this._start;if(!c.CesiumMath.equalsEpsilon(Math.abs(a),c.CesiumMath.PI_OVER_TWO,c.CesiumMath.EPSILON8)){var s=h(e,n.latitude),e=h(e,t),s=Math.tan(a)*(e-s),s=c.CesiumMath.negativePiToPi(n.longitude+s);return M.defined(i)?(i.longitude=s,i.latitude=t,i.height=0,i):new d.Cartographic(s,t,0)}},t.EllipsoidRhumbLine=l});