define(["./defaultValue-81eec7ed","./Matrix2-37e55508","./GeometryOffsetAttribute-8c5e10db","./Transforms-dca21951","./ComponentDatatype-a15c9a19","./RuntimeError-8952249c","./GeometryAttribute-cc3a5bc9","./GeometryAttributes-32b29525","./IndexDatatype-f1dcdf35","./PolygonPipeline-b6cd7820","./RectangleGeometryLibrary-97b50beb","./_commonjsHelpers-3aae1032-26891ab7","./combine-3c023bda","./WebGLConstants-508b9636","./EllipsoidRhumbLine-125a8b72"],function(u,c,p,d,_,e,E,A,v,G,R,t,i,n,o){"use strict";const f=new d.BoundingSphere,g=new d.BoundingSphere,P=new c.Cartesian3,h=new c.Rectangle;function L(e,t){var i=e._ellipsoid,n=t.height,o=t.width,a=t.northCap,e=t.southCap;let r=n,l=2,s=0,u=4;a&&(--l,--r,s+=1,u-=2),e&&(--l,--r,s+=1,u-=2),s+=l*o+2*r-u;const c=new Float64Array(3*s);let p,d=0,f=0;var g=P;if(a)R.RectangleGeometryLibrary.computePosition(t,i,!1,f,0,g),c[d++]=g.x,c[d++]=g.y,c[d++]=g.z;else for(p=0;p<o;p++)R.RectangleGeometryLibrary.computePosition(t,i,!1,f,p,g),c[d++]=g.x,c[d++]=g.y,c[d++]=g.z;for(p=o-1,f=1;f<n;f++)R.RectangleGeometryLibrary.computePosition(t,i,!1,f,p,g),c[d++]=g.x,c[d++]=g.y,c[d++]=g.z;if(f=n-1,!e)for(p=o-2;0<=p;p--)R.RectangleGeometryLibrary.computePosition(t,i,!1,f,p,g),c[d++]=g.x,c[d++]=g.y,c[d++]=g.z;for(p=0,f=n-2;0<f;f--)R.RectangleGeometryLibrary.computePosition(t,i,!1,f,p,g),c[d++]=g.x,c[d++]=g.y,c[d++]=g.z;const h=c.length/3*2,y=v.IndexDatatype.createTypedArray(c.length/3,h);let b=0;for(let e=0;e<c.length/3-1;e++)y[b++]=e,y[b++]=e+1;y[b++]=c.length/3-1,y[b++]=0;const m=new E.Geometry({attributes:new A.GeometryAttributes,primitiveType:E.PrimitiveType.LINES});return m.attributes.position=new E.GeometryAttribute({componentDatatype:_.ComponentDatatype.DOUBLE,componentsPerAttribute:3,values:c}),m.indices=y,m}function y(e){var t=(e=u.defaultValue(e,u.defaultValue.EMPTY_OBJECT)).rectangle,i=u.defaultValue(e.granularity,_.CesiumMath.RADIANS_PER_DEGREE),n=u.defaultValue(e.ellipsoid,c.Ellipsoid.WGS84),o=u.defaultValue(e.rotation,0),a=u.defaultValue(e.height,0),r=u.defaultValue(e.extrudedHeight,a);this._rectangle=c.Rectangle.clone(t),this._granularity=i,this._ellipsoid=n,this._surfaceHeight=Math.max(a,r),this._rotation=o,this._extrudedHeight=Math.min(a,r),this._offsetAttribute=e.offsetAttribute,this._workerName="createRectangleOutlineGeometry"}y.packedLength=c.Rectangle.packedLength+c.Ellipsoid.packedLength+5,y.pack=function(e,t,i){return i=u.defaultValue(i,0),c.Rectangle.pack(e._rectangle,t,i),i+=c.Rectangle.packedLength,c.Ellipsoid.pack(e._ellipsoid,t,i),i+=c.Ellipsoid.packedLength,t[i++]=e._granularity,t[i++]=e._surfaceHeight,t[i++]=e._rotation,t[i++]=e._extrudedHeight,t[i]=u.defaultValue(e._offsetAttribute,-1),t};const b=new c.Rectangle,m=c.Ellipsoid.clone(c.Ellipsoid.UNIT_SPHERE),w={rectangle:b,ellipsoid:m,granularity:void 0,height:void 0,rotation:void 0,extrudedHeight:void 0,offsetAttribute:void 0};y.unpack=function(e,t,i){t=u.defaultValue(t,0);var n=c.Rectangle.unpack(e,t,b);t+=c.Rectangle.packedLength;var o=c.Ellipsoid.unpack(e,t,m);t+=c.Ellipsoid.packedLength;var a=e[t++],r=e[t++],l=e[t++],s=e[t++],t=e[t];return u.defined(i)?(i._rectangle=c.Rectangle.clone(n,i._rectangle),i._ellipsoid=c.Ellipsoid.clone(o,i._ellipsoid),i._surfaceHeight=r,i._rotation=l,i._extrudedHeight=s,i._offsetAttribute=-1===t?void 0:t,i):(w.granularity=a,w.height=r,w.rotation=l,w.extrudedHeight=s,w.offsetAttribute=-1===t?void 0:t,new y(w))};const C=new c.Cartographic;return y.createGeometry=function(i){var e=i._rectangle,n=i._ellipsoid,o=R.RectangleGeometryLibrary.computeOptions(e,i._granularity,i._rotation,0,h,C);let a,r;if(!_.CesiumMath.equalsEpsilon(e.north,e.south,_.CesiumMath.EPSILON10)&&!_.CesiumMath.equalsEpsilon(e.east,e.west,_.CesiumMath.EPSILON10)){var l=i._surfaceHeight,s=i._extrudedHeight;let t;if(_.CesiumMath.equalsEpsilon(l,s,0,_.CesiumMath.EPSILON2)){if(a=L(i,o),a.attributes.position.values=G.PolygonPipeline.scaleToGeodeticHeight(a.attributes.position.values,l,n,!1),u.defined(i._offsetAttribute)){const u=a.attributes.position.values.length,d=new Uint8Array(u/3);t=i._offsetAttribute===p.GeometryOffsetAttribute.NONE?0:1,p.arrayFill(d,t),a.attributes.applyOffset=new E.GeometryAttribute({componentDatatype:_.ComponentDatatype.UNSIGNED_BYTE,componentsPerAttribute:1,values:d})}r=d.BoundingSphere.fromRectangle3D(e,n,l)}else{if(a=function(e,t){const i=e._surfaceHeight,n=e._extrudedHeight,o=e._ellipsoid,a=n,r=i,l=L(e,t),s=t.height,u=t.width,c=G.PolygonPipeline.scaleToGeodeticHeight(l.attributes.position.values,r,o,!1);var p=c.length;const d=new Float64Array(2*p);d.set(c);e=G.PolygonPipeline.scaleToGeodeticHeight(l.attributes.position.values,a,o);d.set(e,p),l.attributes.position.values=d;e=t.northCap,t=t.southCap;let f=4;e&&--f,t&&--f;const g=2*(d.length/3+f),h=v.IndexDatatype.createTypedArray(d.length/3,g);p=d.length/6;let y,b=0;for(let e=0;e<p-1;e++)h[b++]=e,h[b++]=e+1,h[b++]=e+p,h[b++]=e+p+1;if(h[b++]=p-1,h[b++]=0,h[b++]=p+p-1,h[b++]=p,h[b++]=0,h[b++]=p,e)y=s-1;else{const m=u-1;h[b++]=m,h[b++]=m+p,y=u+s-2}if(h[b++]=y,h[b++]=y+p,!t){const m=u+y-1;h[b++]=m,h[b]=m+p}return l.indices=h,l}(i,o),u.defined(i._offsetAttribute)){const u=a.attributes.position.values.length/3;let e=new Uint8Array(u);e=i._offsetAttribute===p.GeometryOffsetAttribute.TOP?p.arrayFill(e,1,0,u/2):(t=i._offsetAttribute===p.GeometryOffsetAttribute.NONE?0:1,p.arrayFill(e,t)),a.attributes.applyOffset=new E.GeometryAttribute({componentDatatype:_.ComponentDatatype.UNSIGNED_BYTE,componentsPerAttribute:1,values:e})}const R=d.BoundingSphere.fromRectangle3D(e,n,l,g),h=d.BoundingSphere.fromRectangle3D(e,n,s,f);r=d.BoundingSphere.union(R,h)}return new E.Geometry({attributes:a.attributes,indices:a.indices,primitiveType:E.PrimitiveType.LINES,boundingSphere:r,offsetAttribute:i._offsetAttribute})}},function(e,t){return(e=u.defined(t)?y.unpack(e,t):e)._ellipsoid=c.Ellipsoid.clone(e._ellipsoid),e._rectangle=c.Rectangle.clone(e._rectangle),y.createGeometry(e)}});