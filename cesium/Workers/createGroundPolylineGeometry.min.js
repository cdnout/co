define(["./Transforms-dca21951","./Matrix2-37e55508","./RuntimeError-8952249c","./defaultValue-81eec7ed","./ComponentDatatype-a15c9a19","./ArcType-fc72c06c","./arrayRemoveDuplicates-dc2f4046","./EllipsoidGeodesic-cc3bace8","./EllipsoidRhumbLine-125a8b72","./EncodedCartesian3-96fdc0ef","./GeometryAttribute-cc3a5bc9","./IntersectionTests-ee135b8e","./Plane-6ee42cab","./WebMercatorProjection-2839e524","./_commonjsHelpers-3aae1032-26891ab7","./combine-3c023bda","./WebGLConstants-508b9636"],function(ce,ue,e,L,Ce,S,x,t,I,pe,de,N,r,a,n,i,s){"use strict";function o(e){e=L.defaultValue(e,L.defaultValue.EMPTY_OBJECT),this._ellipsoid=L.defaultValue(e.ellipsoid,ue.Ellipsoid.WGS84),this._rectangle=L.defaultValue(e.rectangle,ue.Rectangle.MAX_VALUE),this._projection=new ce.GeographicProjection(this._ellipsoid),this._numberOfLevelZeroTilesX=L.defaultValue(e.numberOfLevelZeroTilesX,2),this._numberOfLevelZeroTilesY=L.defaultValue(e.numberOfLevelZeroTilesY,1)}Object.defineProperties(o.prototype,{ellipsoid:{get:function(){return this._ellipsoid}},rectangle:{get:function(){return this._rectangle}},projection:{get:function(){return this._projection}}}),o.prototype.getNumberOfXTilesAtLevel=function(e){return this._numberOfLevelZeroTilesX<<e},o.prototype.getNumberOfYTilesAtLevel=function(e){return this._numberOfLevelZeroTilesY<<e},o.prototype.rectangleToNativeRectangle=function(e,t){var a=Ce.CesiumMath.toDegrees(e.west),n=Ce.CesiumMath.toDegrees(e.south),i=Ce.CesiumMath.toDegrees(e.east),e=Ce.CesiumMath.toDegrees(e.north);return L.defined(t)?(t.west=a,t.south=n,t.east=i,t.north=e,t):new ue.Rectangle(a,n,i,e)},o.prototype.tileXYToNativeRectangle=function(e,t,a,n){const i=this.tileXYToRectangle(e,t,a,n);return i.west=Ce.CesiumMath.toDegrees(i.west),i.south=Ce.CesiumMath.toDegrees(i.south),i.east=Ce.CesiumMath.toDegrees(i.east),i.north=Ce.CesiumMath.toDegrees(i.north),i},o.prototype.tileXYToRectangle=function(e,t,a,n){var i=this._rectangle,r=this.getNumberOfXTilesAtLevel(a),s=this.getNumberOfYTilesAtLevel(a),a=i.width/r,r=e*a+i.west,e=(e+1)*a+i.west,a=i.height/s,s=i.north-t*a,a=i.north-(t+1)*a;return(n=!L.defined(n)?new ue.Rectangle(r,a,e,s):n).west=r,n.south=a,n.east=e,n.north=s,n},o.prototype.positionToTileXY=function(n,i,r){var s=this._rectangle;if(ue.Rectangle.contains(s,n)){var o=this.getNumberOfXTilesAtLevel(i),l=this.getNumberOfYTilesAtLevel(i),c=s.width/o,i=s.height/l;let e=n.longitude;s.east<s.west&&(e+=Ce.CesiumMath.TWO_PI);let t=(e-s.west)/c|0;t>=o&&(t=o-1);let a=(s.north-n.latitude)/i|0;return a>=l&&(a=l-1),L.defined(r)?(r.x=t,r.y=a,r):new ue.Cartesian2(t,a)}};const l=new ue.Cartesian3,c=new ue.Cartesian3,u=new ue.Cartographic,C=new ue.Cartesian3,p=new ue.Cartesian3,d=new ce.BoundingSphere,h=new o,g=[new ue.Cartographic,new ue.Cartographic,new ue.Cartographic,new ue.Cartographic],f=new ue.Cartesian2,he={};function m(e){ue.Cartographic.fromRadians(e.east,e.north,0,g[0]),ue.Cartographic.fromRadians(e.west,e.north,0,g[1]),ue.Cartographic.fromRadians(e.east,e.south,0,g[2]),ue.Cartographic.fromRadians(e.west,e.south,0,g[3]);let a=0,n=0,i=0,r=0;var t=he._terrainHeightsMaxLevel;let s;for(s=0;s<=t;++s){let t=!1;for(let e=0;e<4;++e){const a=g[e];if(h.positionToTileXY(a,s,f),0===e)i=f.x,r=f.y;else if(i!==f.x||r!==f.y){t=!0;break}}if(t)break;a=i,n=r}if(0!==s)return{x:a,y:n,level:s>t?t:s-1}}he.initialize=function(){let e=he._initPromise;return L.defined(e)||(e=ce.Resource.fetchJson(ce.buildModuleUrl("Assets/approximateTerrainHeights.json")).then(function(e){he._terrainHeights=e}),he._initPromise=e),e},he.getMinimumMaximumHeights=function(e,t){t=L.defaultValue(t,ue.Ellipsoid.WGS84);var a=m(e);let n=he._defaultMinTerrainHeight,i=he._defaultMaxTerrainHeight;if(L.defined(a)){a=`${a.level}-${a.x}-${a.y}`,a=he._terrainHeights[a];L.defined(a)&&(n=a[0],i=a[1]),t.cartographicToCartesian(ue.Rectangle.northeast(e,u),l),t.cartographicToCartesian(ue.Rectangle.southwest(e,u),c),ue.Cartesian3.midpoint(c,l,C);t=t.scaleToGeodeticSurface(C,p);if(L.defined(t)){const e=ue.Cartesian3.distance(C,t);n=Math.min(n,-e)}else n=he._defaultMinTerrainHeight}return n=Math.max(he._defaultMinTerrainHeight,n),{minimumTerrainHeight:n,maximumTerrainHeight:i}},he.getBoundingSphere=function(e,t){t=L.defaultValue(t,ue.Ellipsoid.WGS84);var a=m(e);let n=he._defaultMaxTerrainHeight;if(L.defined(a)){const ce=`${a.level}-${a.x}-${a.y}`,ue=he._terrainHeights[ce];L.defined(ue)&&(n=ue[1])}a=ce.BoundingSphere.fromRectangle3D(e,t,0);return ce.BoundingSphere.fromRectangle3D(e,t,n,d),ce.BoundingSphere.union(a,d,a)},he._terrainHeightsMaxLevel=6,he._defaultMaxTerrainHeight=9e3,he._defaultMinTerrainHeight=-1e5,he._terrainHeights=void 0,he._initPromise=void 0,Object.defineProperties(he,{initialized:{get:function(){return L.defined(he._terrainHeights)}}});const R=[ce.GeographicProjection,a.WebMercatorProjection],w=R.length,ge=Math.cos(Ce.CesiumMath.toRadians(30)),y=Math.cos(Ce.CesiumMath.toRadians(150));function M(e){var t=(e=L.defaultValue(e,L.defaultValue.EMPTY_OBJECT)).positions;this.width=L.defaultValue(e.width,1),this._positions=t,this.granularity=L.defaultValue(e.granularity,9999),this.loop=L.defaultValue(e.loop,!1),this.arcType=L.defaultValue(e.arcType,S.ArcType.GEODESIC),this._ellipsoid=ue.Ellipsoid.WGS84,this._projectionIndex=0,this._workerName="createGroundPolylineGeometry",this._scene3DOnly=!1}Object.defineProperties(M.prototype,{packedLength:{get:function(){return 1+3*this._positions.length+1+1+1+ue.Ellipsoid.packedLength+1+1}}}),M.setProjectionAndEllipsoid=function(e,t){let a=0;for(let e=0;e<w;e++)if(t instanceof R[e]){a=e;break}e._projectionIndex=a,e._ellipsoid=t.ellipsoid};const T=new ue.Cartesian3,E=new ue.Cartesian3,_=new ue.Cartesian3;function D(e,t,a,n,i){var r=H(n,e,0,T),a=H(n,e,a,E),t=H(n,t,0,_),a=fe(a,r,E),r=fe(t,r,_);return ue.Cartesian3.cross(r,a,i),ue.Cartesian3.normalize(i,i)}const O=new ue.Cartographic,b=new ue.Cartesian3,P=new ue.Cartesian3,v=new ue.Cartesian3;function z(i,r,s,o,e,l,c,u,C,p,d){if(0!==e){let n;l===S.ArcType.GEODESIC?n=new t.EllipsoidGeodesic(i,r,c):l===S.ArcType.RHUMB&&(n=new I.EllipsoidRhumbLine(i,r,c));l=n.surfaceDistance;if(!(l<e)){var h=D(i,r,o,c,v),e=Math.ceil(l/e),g=l/e;let t=g;var f=e-1;let a=u.length;for(let e=0;e<f;e++){const i=n.interpolateUsingSurfaceDistance(t,O),r=H(c,i,s,b),S=H(c,i,o,P);ue.Cartesian3.pack(h,u,a),ue.Cartesian3.pack(r,C,a),ue.Cartesian3.pack(S,p,a),d.push(i.latitude),d.push(i.longitude),a+=3,t+=g}}}}const A=new ue.Cartographic;function H(e,t,a,n){return ue.Cartographic.clone(t,A),A.height=a,ue.Cartographic.toCartesian(A,e,n)}function fe(e,t,a){return ue.Cartesian3.subtract(e,t,a),ue.Cartesian3.normalize(a,a),a}function k(e,t,a,n){return n=fe(e,t,n),n=ue.Cartesian3.cross(n,a,n),n=ue.Cartesian3.normalize(n,n),ue.Cartesian3.cross(a,n,n)}M.pack=function(e,t,a){let n=L.defaultValue(a,0);var i=e._positions,r=i.length;t[n++]=r;for(let e=0;e<r;++e){const L=i[e];ue.Cartesian3.pack(L,t,n),n+=3}return t[n++]=e.granularity,t[n++]=e.loop?1:0,t[n++]=e.arcType,ue.Ellipsoid.pack(e._ellipsoid,t,n),n+=ue.Ellipsoid.packedLength,t[n++]=e._projectionIndex,t[n++]=e._scene3DOnly?1:0,t},M.unpack=function(t,e,a){let n=L.defaultValue(e,0);const i=t[n++],r=new Array(i);for(let e=0;e<i;e++)r[e]=ue.Cartesian3.unpack(t,n),n+=3;var s=t[n++],o=1===t[n++],l=t[n++],c=ue.Ellipsoid.unpack(t,n);n+=ue.Ellipsoid.packedLength;var u=t[n++],e=1===t[n++];return(a=!L.defined(a)?new M({positions:r}):a)._positions=r,a.granularity=s,a.loop=o,a.arcType=l,a._ellipsoid=c,a._projectionIndex=u,a._scene3DOnly=e,a};const j=new ue.Cartesian3,B=new ue.Cartesian3,V=new ue.Cartesian3,G=new ue.Cartesian3;function Y(e,t,a,n,i){a=fe(a,t,G),e=k(e,t,a,j),t=k(n,t,a,B);if(Ce.CesiumMath.equalsEpsilon(ue.Cartesian3.dot(e,t),-1,Ce.CesiumMath.EPSILON5))return i=ue.Cartesian3.cross(a,e,i),ue.Cartesian3.normalize(i,i);i=ue.Cartesian3.add(t,e,i),i=ue.Cartesian3.normalize(i,i);a=ue.Cartesian3.cross(a,i,V);return i=ue.Cartesian3.dot(t,a)<0?ue.Cartesian3.negate(i,i):i}const F=r.Plane.fromPointNormal(ue.Cartesian3.ZERO,ue.Cartesian3.UNIT_Y),q=new ue.Cartesian3,X=new ue.Cartesian3,W=new ue.Cartesian3,U=new ue.Cartesian3,Z=new ue.Cartesian3,$=new ue.Cartesian3,J=new ue.Cartographic,Q=new ue.Cartographic,K=new ue.Cartographic;M.createGeometry=function(e){var r=!e._scene3DOnly;let s=e.loop;const o=e._ellipsoid,l=e.granularity,c=e.arcType,u=new R[e._projectionIndex](o),C=1e3;let p,d;var t=e._positions,a=t.length;let n,i,h,g;2===a&&(s=!1);const f=new I.EllipsoidRhumbLine(void 0,void 0,o);let m,w,y;const M=[t[0]];for(d=0;d<a-1;d++)n=t[d],i=t[d+1],m=N.IntersectionTests.lineSegmentPlane(n,i,F,$),!L.defined(m)||ue.Cartesian3.equalsEpsilon(m,n,Ce.CesiumMath.EPSILON7)||ue.Cartesian3.equalsEpsilon(m,i,Ce.CesiumMath.EPSILON7)||(e.arcType===S.ArcType.GEODESIC?M.push(ue.Cartesian3.clone(m)):e.arcType===S.ArcType.RHUMB&&(y=o.cartesianToCartographic(m,J).longitude,h=o.cartesianToCartographic(n,J),g=o.cartesianToCartographic(i,Q),f.setEndPoints(h,g),w=f.findIntersectionWithLongitude(y,K),m=o.cartographicToCartesian(w,$),!L.defined(m)||ue.Cartesian3.equalsEpsilon(m,n,Ce.CesiumMath.EPSILON7)||ue.Cartesian3.equalsEpsilon(m,i,Ce.CesiumMath.EPSILON7)||M.push(ue.Cartesian3.clone(m)))),M.push(i);s&&(n=t[a-1],i=t[0],m=N.IntersectionTests.lineSegmentPlane(n,i,F,$),!L.defined(m)||ue.Cartesian3.equalsEpsilon(m,n,Ce.CesiumMath.EPSILON7)||ue.Cartesian3.equalsEpsilon(m,i,Ce.CesiumMath.EPSILON7)||(e.arcType===S.ArcType.GEODESIC?M.push(ue.Cartesian3.clone(m)):e.arcType===S.ArcType.RHUMB&&(y=o.cartesianToCartographic(m,J).longitude,h=o.cartesianToCartographic(n,J),g=o.cartesianToCartographic(i,Q),f.setEndPoints(h,g),w=f.findIntersectionWithLongitude(y,K),m=o.cartographicToCartesian(w,$),!L.defined(m)||ue.Cartesian3.equalsEpsilon(m,n,Ce.CesiumMath.EPSILON7)||ue.Cartesian3.equalsEpsilon(m,i,Ce.CesiumMath.EPSILON7)||M.push(ue.Cartesian3.clone(m)))));let T=M.length,E=new Array(T);for(d=0;d<T;d++){const ce=ue.Cartographic.fromCartesian(M[d],o);ce.height=0,E[d]=ce}if(E=x.arrayRemoveDuplicates(E,ue.Cartographic.equalsEpsilon),T=E.length,!(T<2)){const P=[],v=[],A=[],k=[];let e=q,t=X,a=W,n=U,i=Z;var _=E[0],O=E[1];for(e=H(o,E[T-1],0,e),n=H(o,O,0,n),t=H(o,_,0,t),a=H(o,_,C,a),i=s?Y(e,t,a,n,i):D(_,O,C,o,i),ue.Cartesian3.pack(i,v,0),ue.Cartesian3.pack(t,A,0),ue.Cartesian3.pack(a,k,0),P.push(_.latitude),P.push(_.longitude),z(_,O,0,C,l,c,o,v,A,k,P),d=1;d<T-1;++d){e=ue.Cartesian3.clone(t,e),t=ue.Cartesian3.clone(n,t);const ce=E[d];H(o,ce,C,a),H(o,E[d+1],0,n),Y(e,t,a,n,i),p=v.length,ue.Cartesian3.pack(i,v,p),ue.Cartesian3.pack(t,A,p),ue.Cartesian3.pack(a,k,p),P.push(ce.latitude),P.push(ce.longitude),z(E[d],E[d+1],0,C,l,c,o,v,A,k,P)}var b=E[T-1],O=E[T-2];if(t=H(o,b,0,t),a=H(o,b,C,a),s){const ce=E[0];e=H(o,O,0,e),n=H(o,ce,0,n),i=Y(e,t,a,n,i)}else i=D(O,b,C,o,i);if(p=v.length,ue.Cartesian3.pack(i,v,p),ue.Cartesian3.pack(t,A,p),ue.Cartesian3.pack(a,k,p),P.push(b.latitude),P.push(b.longitude),s){for(z(b,_,0,C,l,c,o,v,A,k,P),p=v.length,d=0;d<3;++d)v[p+d]=v[d],A[p+d]=A[d],k[p+d]=k[d];P.push(_.latitude),P.push(_.longitude)}return function(e,C,p,d,h,g,f){let t,m;const w=C._ellipsoid,a=p.length/3-1,n=8*a,i=4*n,y=36*a,M=new(65535<n?Uint32Array:Uint16Array)(y),T=new Float64Array(3*n),E=new Float32Array(i),_=new Float32Array(i),O=new Float32Array(i),b=new Float32Array(i),P=new Float32Array(i);let v,A,k,L;f&&(v=new Float32Array(i),A=new Float32Array(i),k=new Float32Array(i),L=new Float32Array(2*n));const S=g.length/2;let x=0;const I=Te;I.height=0;const N=Ee;N.height=0;let R=_e,r=Oe;if(f)for(m=0,t=1;t<S;t++)I.latitude=g[m],I.longitude=g[m+1],N.latitude=g[m+2],N.longitude=g[m+3],R=C.project(I,R),r=C.project(N,r),x+=ue.Cartesian3.distance(R,r),m+=2;var s=d.length/3;r=ue.Cartesian3.unpack(d,0,r);let D,z=0;for(m=3,t=1;t<s;t++)R=ue.Cartesian3.clone(r,R),r=ue.Cartesian3.unpack(d,m,r),z+=ue.Cartesian3.distance(R,r),m+=3;let H=0,j=0,B=0,V=0,G=!(m=3),Y=ue.Cartesian3.unpack(p,0,Pe),F=ue.Cartesian3.unpack(d,0,Oe),q=ue.Cartesian3.unpack(h,0,Ae);e&&me(q,ue.Cartesian3.unpack(p,p.length-6,be),Y,F)&&(q=ue.Cartesian3.negate(q,q));let X=0,W=0,U=0;for(t=0;t<a;t++){const ce=ue.Cartesian3.clone(Y,be),ee=ue.Cartesian3.clone(F,_e);let e,t,a,n,i=ue.Cartesian3.clone(q,ve);if(G&&(i=ue.Cartesian3.negate(i,i)),Y=ue.Cartesian3.unpack(p,m,Pe),F=ue.Cartesian3.unpack(d,m,Oe),q=ue.Cartesian3.unpack(h,m,Ae),G=me(q,ce,Y,F),I.latitude=g[H],I.longitude=g[H+1],N.latitude=g[H+2],N.longitude=g[H+3],f){const ce=function(e,t){const a=Math.abs(e.longitude),n=Math.abs(t.longitude);if(Ce.CesiumMath.equalsEpsilon(a,Ce.CesiumMath.PI,Ce.CesiumMath.EPSILON11)){const n=Ce.CesiumMath.sign(t.longitude);return e.longitude=n*(a-Ce.CesiumMath.EPSILON11),1}if(Ce.CesiumMath.equalsEpsilon(n,Ce.CesiumMath.PI,Ce.CesiumMath.EPSILON11)){const a=Ce.CesiumMath.sign(e.longitude);return t.longitude=a*(n-Ce.CesiumMath.EPSILON11),2}return 0}(I,N);e=C.project(I,Re),t=C.project(N,De);const ee=fe(t,e,We);ee.y=Math.abs(ee.y),a=ze,n=He,0===ce||ue.Cartesian3.dot(ee,ue.Cartesian3.UNIT_Y)>ge?(a=we(C,I,i,e,ze),n=we(C,N,q,t,He)):1===ce?(n=we(C,N,q,t,He),a.x=0,a.y=Ce.CesiumMath.sign(I.longitude-Math.abs(N.longitude)),a.z=0):(a=we(C,I,i,e,ze),n.x=0,n.y=Ce.CesiumMath.sign(I.longitude-N.longitude),n.z=0)}const y=ue.Cartesian3.distance(ee,F),M=pe.EncodedCartesian3.fromCartesian(ce,qe),S=ue.Cartesian3.subtract(Y,ce,je),R=ue.Cartesian3.normalize(S,Ge);var Z=ue.Cartesian3.subtract(ee,ce,Be),Z=ue.Cartesian3.normalize(Z,Z),$=ue.Cartesian3.cross(R,Z,Ge),$=ue.Cartesian3.normalize($,$),J=ue.Cartesian3.cross(Z,i,Ye),J=ue.Cartesian3.normalize(J,J),Z=ue.Cartesian3.subtract(F,Y,Ve),Z=ue.Cartesian3.normalize(Z,Z),Q=ue.Cartesian3.cross(q,Z,Fe),Q=ue.Cartesian3.normalize(Q,Q);const K=y/z,te=X/z;let r,s,o,l=0,c=0,u=0;if(f){l=ue.Cartesian3.distance(e,t),r=pe.EncodedCartesian3.fromCartesian(e,Xe),s=ue.Cartesian3.subtract(t,e,We),o=ue.Cartesian3.normalize(s,Ue);const ce=o.x;o.x=o.y,o.y=-ce,c=l/x,u=W/x}for(D=0;D<8;D++){const ce=V+4*D,ee=j+2*D,C=ce+3,Ce=D<4?1:-1,p=2===D||3===D||6===D||7===D?1:-1;ue.Cartesian3.pack(M.high,E,ce),E[C]=S.x,ue.Cartesian3.pack(M.low,_,ce),_[C]=S.y,ue.Cartesian3.pack(J,O,ce),O[C]=S.z,ue.Cartesian3.pack(Q,b,ce),b[C]=K*Ce,ue.Cartesian3.pack($,P,ce);let e=te*p;0===e&&p<0&&(e=9),P[C]=e,f&&(v[ce]=r.high.x,v[ce+1]=r.high.y,v[ce+2]=r.low.x,v[ce+3]=r.low.y,k[ce]=-a.y,k[ce+1]=a.x,k[ce+2]=n.y,k[ce+3]=-n.x,A[ce]=s.x,A[ce+1]=s.y,A[ce+2]=o.x,A[ce+3]=o.y,L[ee]=c*Ce,e=u*p,0===e&&p<0&&(e=9),L[ee+1]=e)}const ae=Ie,ne=Ne,ie=Se,re=xe,se=ue.Rectangle.fromCartographicArray(ke,Le),oe=he.getMinimumMaximumHeights(se,w),le=oe.minimumTerrainHeight,Te=oe.maximumTerrainHeight;U+=le,U+=Te,ye(ce,ee,le,Te,ae,ie),ye(Y,F,le,Te,ne,re);Z=ue.Cartesian3.multiplyByScalar($,Ce.CesiumMath.EPSILON5,Ze);ue.Cartesian3.add(ae,Z,ae),ue.Cartesian3.add(ne,Z,ne),ue.Cartesian3.add(ie,Z,ie),ue.Cartesian3.add(re,Z,re),Me(ae,ne),Me(ie,re),ue.Cartesian3.pack(ae,T,B),ue.Cartesian3.pack(ne,T,B+3),ue.Cartesian3.pack(re,T,B+6),ue.Cartesian3.pack(ie,T,B+9),Z=ue.Cartesian3.multiplyByScalar($,-2*Ce.CesiumMath.EPSILON5,Ze),ue.Cartesian3.add(ae,Z,ae),ue.Cartesian3.add(ne,Z,ne),ue.Cartesian3.add(ie,Z,ie),ue.Cartesian3.add(re,Z,re),Me(ae,ne),Me(ie,re),ue.Cartesian3.pack(ae,T,B+12),ue.Cartesian3.pack(ne,T,B+15),ue.Cartesian3.pack(re,T,B+18),ue.Cartesian3.pack(ie,T,B+21),H+=2,m+=3,j+=16,B+=24,V+=32,X+=y,W+=l}let o=m=0;for(t=0;t<a;t++){for(D=0;D<Qe;D++)M[m+D]=Je[D]+o;o+=8,m+=Qe}e=$e;ce.BoundingSphere.fromVertices(p,ue.Cartesian3.ZERO,3,e[0]),ce.BoundingSphere.fromVertices(d,ue.Cartesian3.ZERO,3,e[1]);const l=ce.BoundingSphere.fromBoundingSpheres(e);l.radius+=U/(2*a);const K={position:new de.GeometryAttribute({componentDatatype:Ce.ComponentDatatype.DOUBLE,componentsPerAttribute:3,normalize:!1,values:T}),startHiAndForwardOffsetX:Ke(E),startLoAndForwardOffsetY:Ke(_),startNormalAndForwardOffsetZ:Ke(O),endNormalAndTextureCoordinateNormalizationX:Ke(b),rightNormalAndTextureCoordinateNormalizationY:Ke(P)};return f&&(K.startHiLo2D=Ke(v),K.offsetAndRight2D=Ke(A),K.startEndNormals2D=Ke(k),K.texcoordNormalization2D=new de.GeometryAttribute({componentDatatype:Ce.ComponentDatatype.FLOAT,componentsPerAttribute:2,normalize:!1,values:L})),new de.Geometry({attributes:K,indices:M,boundingSphere:l})}(s,u,A,k,v,P,r)}};const ee=new ue.Cartesian3,te=new ue.Matrix3,ae=new ce.Quaternion;function me(e,t,a,n){const i=fe(a,t,ee),r=ue.Cartesian3.dot(i,e);if(r>ge||r<y){const t=fe(n,a,G),i=r<y?Ce.CesiumMath.PI_OVER_TWO:-Ce.CesiumMath.PI_OVER_TWO,s=ce.Quaternion.fromAxisAngle(t,i,ae),o=ue.Matrix3.fromQuaternion(s,te);return ue.Matrix3.multiplyByVector(o,e,e),!0}return!1}const ne=new ue.Cartographic,ie=new ue.Cartesian3,re=new ue.Cartesian3;function we(e,t,a,n,i){var r=ue.Cartographic.toCartesian(t,e._ellipsoid,ie);let s=ue.Cartesian3.add(r,a,re),o=!1;const l=e._ellipsoid;let c=l.cartesianToCartographic(s,ne);Math.abs(t.longitude-c.longitude)>Ce.CesiumMath.PI_OVER_TWO&&(o=!0,s=ue.Cartesian3.subtract(r,a,re),c=l.cartesianToCartographic(s,ne)),c.height=0;e=e.project(c,i);return(i=ue.Cartesian3.subtract(e,n,i)).z=0,i=ue.Cartesian3.normalize(i,i),o&&ue.Cartesian3.negate(i,i),i}const se=new ue.Cartesian3,oe=new ue.Cartesian3;function ye(e,t,a,n,i,r){var s=ue.Cartesian3.subtract(t,e,se);ue.Cartesian3.normalize(s,s);a=ue.Cartesian3.multiplyByScalar(s,+a,oe);ue.Cartesian3.add(e,a,i);a=ue.Cartesian3.multiplyByScalar(s,n-1e3,oe);ue.Cartesian3.add(t,a,r)}const le=new ue.Cartesian3;function Me(e,t){var a=r.Plane.getPointDistance(F,e),n=r.Plane.getPointDistance(F,t);let i=le;Ce.CesiumMath.equalsEpsilon(a,0,Ce.CesiumMath.EPSILON2)?(i=fe(t,e,i),ue.Cartesian3.multiplyByScalar(i,Ce.CesiumMath.EPSILON2,i),ue.Cartesian3.add(e,i,e)):Ce.CesiumMath.equalsEpsilon(n,0,Ce.CesiumMath.EPSILON2)&&(i=fe(e,t,i),ue.Cartesian3.multiplyByScalar(i,Ce.CesiumMath.EPSILON2,i),ue.Cartesian3.add(t,i,t))}const Te=new ue.Cartographic,Ee=new ue.Cartographic,_e=new ue.Cartesian3,Oe=new ue.Cartesian3,be=new ue.Cartesian3,Pe=new ue.Cartesian3,ve=new ue.Cartesian3,Ae=new ue.Cartesian3,ke=[Te,Ee],Le=new ue.Rectangle,Se=new ue.Cartesian3,xe=new ue.Cartesian3,Ie=new ue.Cartesian3,Ne=new ue.Cartesian3,Re=new ue.Cartesian3,De=new ue.Cartesian3,ze=new ue.Cartesian3,He=new ue.Cartesian3,je=new ue.Cartesian3,Be=new ue.Cartesian3,Ve=new ue.Cartesian3,Ge=new ue.Cartesian3,Ye=new ue.Cartesian3,Fe=new ue.Cartesian3,qe=new pe.EncodedCartesian3,Xe=new pe.EncodedCartesian3,We=new ue.Cartesian3,Ue=new ue.Cartesian3,Ze=new ue.Cartesian3,$e=[new ce.BoundingSphere,new ce.BoundingSphere],Je=[0,2,1,0,3,2,0,7,3,0,4,7,0,5,4,0,1,5,5,7,4,5,6,7,5,2,6,5,1,2,3,6,2,3,7,6],Qe=Je.length;function Ke(e){return new de.GeometryAttribute({componentDatatype:Ce.ComponentDatatype.FLOAT,componentsPerAttribute:4,normalize:!1,values:e})}return M._projectNormal=we,function(e,t){return he.initialize().then(function(){return L.defined(t)&&(e=M.unpack(e,t)),M.createGeometry(e)})}});