define(["exports","./Matrix2-37e55508","./RuntimeError-8952249c","./defaultValue-81eec7ed","./ComponentDatatype-a15c9a19"],function(t,p,a,_,S){"use strict";function q(t,a,i,n,e,s,r){i=t*i*(4+t*(4-3*i))/16;return(1-i)*t*a*(n+i*e*(r+i*s*(2*r*r-1)))}const e=new p.Cartesian3,s=new p.Cartesian3;function n(t,a,i,n){p.Cartesian3.normalize(n.cartographicToCartesian(a,s),e),p.Cartesian3.normalize(n.cartographicToCartesian(i,s),s),function(a,t,i,n,e,s,r){var o=(t-i)/t,h=s-n,n=Math.atan((1-o)*Math.tan(e)),e=Math.atan((1-o)*Math.tan(r)),r=Math.cos(n),n=Math.sin(n),d=Math.cos(e),e=Math.sin(e),c=r*d,u=r*e,l=n*e,M=n*d;let g,p,_,f,m,v=h,H,C=Math.cos(v),O=Math.sin(v);do{C=Math.cos(v),O=Math.sin(v);const a=u-M*C;let t;_=Math.sqrt(d*d*O*O+a*a),p=l+c*C,g=Math.atan2(_,p),f=0===_?(t=0,1):(t=c*O/_,1-t*t),H=v,m=p-2*l/f,isFinite(m)||(m=0),v=h+q(o,t,f,g,_,p,m)}while(Math.abs(v-H)>S.CesiumMath.EPSILON12);e=f*(t*t-i*i)/(i*i),n=e*(256+e*(e*(74-47*e)-128))/1024,t=m*m,n=i*(1+e*(4096+e*(e*(320-175*e)-768))/16384)*(g-n*_*(m+n*(p*(2*t-1)-n*m*(4*_*_-3)*(4*t-3)/6)/4)),t=Math.atan2(d*O,u-M*C),r=Math.atan2(r*O,u*C-M);a._distance=n,a._startHeading=t,a._endHeading=r,a._uSquared=e}(t,n.maximumRadius,n.minimumRadius,a.longitude,a.latitude,i.longitude,i.latitude),t._start=p.Cartographic.clone(a,t._start),t._end=p.Cartographic.clone(i,t._end),t._start.height=0,t._end.height=0,function(t){const a=t._uSquared,i=t._ellipsoid.maximumRadius,n=t._ellipsoid.minimumRadius,e=(i-n)/i,s=Math.cos(t._startHeading),r=Math.sin(t._startHeading),o=(1-e)*Math.tan(t._start.latitude),h=1/Math.sqrt(1+o*o),d=h*o,c=Math.atan2(o,s),u=h*r,l=u*u,M=1-l,g=Math.sqrt(M),p=a/4,_=p*p,f=_*p,m=_*_,v=1+p-3*_/4+5*f/4-175*m/64,H=1-p+15*_/8-35*f/8,C=1-3*p+35*_/4,O=1-5*p,S=v*c-H*Math.sin(2*c)*p/2-C*Math.sin(4*c)*_/16-O*Math.sin(6*c)*f/48-5*Math.sin(8*c)*m/512,q=t._constants;q.a=i,q.b=n,q.f=e,q.cosineHeading=s,q.sineHeading=r,q.tanU=o,q.cosineU=h,q.sineU=d,q.sigma=c,q.sineAlpha=u,q.sineSquaredAlpha=l,q.cosineSquaredAlpha=M,q.cosineAlpha=g,q.u2Over4=p,q.u4Over16=_,q.u6Over64=f,q.u8Over256=m,q.a0=v,q.a1=H,q.a2=C,q.a3=O,q.distanceRatio=S}(t)}function i(t,a,i){i=_.defaultValue(i,p.Ellipsoid.WGS84);this._ellipsoid=i,this._start=new p.Cartographic,this._end=new p.Cartographic,this._constants={},this._startHeading=void 0,this._endHeading=void 0,this._distance=void 0,this._uSquared=void 0,_.defined(t)&&_.defined(a)&&n(this,t,a,i)}Object.defineProperties(i.prototype,{ellipsoid:{get:function(){return this._ellipsoid}},surfaceDistance:{get:function(){return this._distance}},start:{get:function(){return this._start}},end:{get:function(){return this._end}},startHeading:{get:function(){return this._startHeading}},endHeading:{get:function(){return this._endHeading}}}),i.prototype.setEndPoints=function(t,a){n(this,t,a,this._ellipsoid)},i.prototype.interpolateUsingFraction=function(t,a){return this.interpolateUsingSurfaceDistance(this._distance*t,a)},i.prototype.interpolateUsingSurfaceDistance=function(t,a){var i=this._constants,n=i.distanceRatio+t/i.b,e=Math.cos(2*n),s=Math.cos(4*n),r=Math.cos(6*n),o=Math.sin(2*n),h=Math.sin(4*n),d=Math.sin(6*n),c=Math.sin(8*n),u=n*n,l=i.u8Over256,M=i.u2Over4,g=i.u6Over64,t=i.u4Over16,u=2*(n*u)*l*e/3+n*(1-M+7*t/4-15*g/4+579*l/64-(t-15*g/4+187*l/16)*e-(5*g/4-115*l/16)*s-29*l*r/16)+(M/2-t+71*g/32-85*l/16)*o+(5*t/16-5*g/4+383*l/96)*h-u*((g-11*l/2)*o+5*l*h/2)+(29*g/96-29*l/16)*d+539*l*c/1536,o=Math.asin(Math.sin(u)*i.cosineAlpha),h=Math.atan(i.a/i.b*Math.tan(o));u-=i.sigma;g=Math.cos(2*i.sigma+u),d=Math.sin(u),l=Math.cos(u),c=i.cosineU*l,o=i.sineU*d,g=Math.atan2(d*i.sineHeading,c-o*i.cosineHeading)-q(i.f,i.sineAlpha,i.cosineSquaredAlpha,u,d,l,g);return _.defined(a)?(a.longitude=this._start.longitude+g,a.latitude=h,a.height=0,a):new p.Cartographic(this._start.longitude+g,h,0)},t.EllipsoidGeodesic=i});