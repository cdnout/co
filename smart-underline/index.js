(function(){var e,t,n,r,i,o,a,l,d,u,m,c,s,g,f,p,h,v,b,y,x,w,k,S,C,z,A,E,L,M,T,H,D,I,N,q,F;window.SmartUnderline={init:function(){},destroy:function(){}},window.getComputedStyle&&document.documentElement.getAttribute&&(e=1.618034,D="#b4d5fe",z="data-smart-underline-link-color",M="data-smart-underline-link-small",L="data-smart-underline-link-large",S="data-smart-underline-link-always",C="data-smart-underline-link-background-position",E="data-smart-underline-link-hover",a="data-smart-underline-container-id",T=[],q=function(){return+new Date},A={},F=function(){var e;return e=0,function(){return e+=1}}(),o=function(e,t){return t.clearRect(0,0,e.width,e.height)},r=function(e,t,n){var r,i,a,l,d,u,m,c,s,g,f;for(o(t,n),n.fillStyle="red",s=n.measureText(e).width,n.fillText(e,0,0),i=void 0,g=a=0,m=s;0<=m?a<=m:a>=m;g=0<=m?++a:--a)for(f=l=0,c=t.height;0<=c?l<=c:l>=c;f=0<=c?++l:--l)d=n.getImageData(g,f,g+1,f+1),u=d.data[0],r=d.data[3],255===u&&r>50&&(i||(i=f),f>i&&(i=f));return o(t,n),i},i=function(e){var t,n,i,o,a;return n=document.createElement("canvas"),i=n.getContext("2d"),n.height=n.width=2*parseInt(e.fontSize,10),i.textBaseline="top",i.textAlign="start",i.fontStretch=1,i.angle=0,i.font=e.fontVariant+" "+e.fontStyle+" "+e.fontWeight+" "+e.fontSize+"/"+e.lineHeight+" "+e.fontFamily,t=r("I",n,i),a=r("g",n,i),o=a-t,{baselineY:t,descenderHeight:o}},n=function(e){var t,n,r,i,o,a,l,d;return d=document.createElement("div"),d.style.display="block",d.style.position="absolute",d.style.bottom=0,d.style.right=0,d.style.width=0,d.style.height=0,d.style.margin=0,d.style.padding=0,d.style.visibility="hidden",d.style.overflow="hidden",d.style.wordWrap="normal",d.style.whiteSpace="nowrap",a=document.createElement("span"),i=document.createElement("span"),a.style.display="inline",i.style.display="inline",a.style.fontSize="0px",i.style.fontSize="2000px",a.innerHTML="X",i.innerHTML="X",d.appendChild(a),d.appendChild(i),e.appendChild(d),l=a.getBoundingClientRect(),o=i.getBoundingClientRect(),e.removeChild(d),t=l.top-o.top,r=o.height,n=Math.abs(t/r)},t={},f=function(e){var t,n,r,i;for(n=e.split(","),r=0,i=n.length;r<i;r++)if(t=n[r],c(t))return t;return!1},c=function(e){var t,n,r,i,o;return n=document.createElement("canvas"),r=n.getContext("2d"),o="abcdefghijklmnopqrstuvwxyz0123456789",r.font="72px monospace",t=r.measureText(o).width,r.font="72px "+e+", monospace",i=r.measureText(o).width,i!==t},h=function(r){var o,a,l,d,u,m,c,s,g,p,h,v,b,y,x,w;return g=getComputedStyle(r),v=f(g.fontFamily),c=v?"font:"+v+"size:"+g.fontSize+"weight:"+g.fontWeight:""+Math.random(),(m=t[c])?m:(x=i(g),d=x.baselineY,p=x.descenderHeight,s=r.getClientRects(),(null!=s?s.length:void 0)?(o=1,w=s[0].height-o,-1<navigator.userAgent.toLowerCase().indexOf("firefox")&&(o=.98,u=n(r),d=u*w*o),h=d+p,b=parseInt(g.fontSize,10),y=3,a=d+Math.max(y,p/e),4===p&&(a=h-1),3===p&&(a=h),l=Math.round(100*a/w),p>2&&b>10&&l<=100?(t[c]=l,l):void 0):void 0)},w=function(e){var t,n;return"transparent"===e||"rgba(0, 0, 0, 0)"===e||(n=e.match(/^rgba\(.*,(.+)\)/i),2===(null!=n?n.length:void 0)&&(t=parseFloat(n[1]),t<1e-4))},g=function(e){var t,n,r,i;return n=getComputedStyle(e),t=n.backgroundColor,r=e.parentNode,i=!r||r===document.documentElement||r===e,"none"!==n.backgroundImage?null:w(t)?i?e.parentNode||e:g(r):e},v=function(e){return d(e)||l(e)},d=function(e){var t,n,r,i,o,a;for(i=e.children,n=0,r=i.length;n<r;n++)return t=i[n],"img"===(o=null!=(a=t.tagName)?a.toLowerCase():void 0)||"video"===o||"canvas"===o||"embed"===o||"object"===o||"iframe"===o||d(t);return!1},l=function(e){var t,n,r,i,o;for(i=e.children,n=0,r=i.length;n<r;n++)return t=i[n],o=getComputedStyle(t),"inline"!==o.display||l(t);return!1},s=function(e){var t;return t=getComputedStyle(e).backgroundColor,e===document.documentElement&&w(t)?"rgb(255, 255, 255)":t},p=function(e){return getComputedStyle(e).color},N=document.createElement("style"),u=function(e,t){var n,r;return null==t&&(t=0),n=e.parentNode,r=!n||n===document||n===e,r?t:(n.hasAttribute(a)&&(t+=1),t+u(n))},I=function(e){var t,n,r;r=[];for(n in e)t=e[n],t.depth=u(t.container),r.push(t);return r.sort(function(e,t){return e.depth<t.depth?-1:e.depth>t.depth?1:0}),r},k=function(e){var t,n,r,i,o;for(i=["textDecorationLine","textDecoration"],t=0,n=i.length;t<n;t++)if(r=i[t],null!=(o=e[r])?o.match(/\bunderline\b/):void 0)return!0;return!1},y=function(e){var t,n,r,i,o;return o=getComputedStyle(e),r=parseFloat(o.fontSize),!!(k(o)&&"inline"===o.display&&r>=10&&!v(e)&&(n=g(e),n&&(t=h(e))))&&(e.setAttribute(z,p(e)),e.setAttribute(C,t),i=n.getAttribute(a),i?A[i].links.push(e):(i=F(),n.setAttribute(a,i),A[i]={id:i,container:n,links:[e]}),!0)},H=function(){var e,t,n,r,i,o,l,d,u,m,c,g,f,v,b;for(b="",i=I(A),c={},o=0,d=i.length;o<d;o++){for(r=i[o],g={},v=r.links,l=0,u=v.length;l<u;l++)m=v[l],g[p(m)]=!0,c[h(m)]=!0;e=s(r.container);for(n in g)f=function(e){return null==e&&(e=""),"["+a+'="'+r.id+'"] a['+z+'="'+n+'"]['+S+"]"+e+",\n["+a+'="'+r.id+'"] a['+z+'="'+n+'"]['+E+"]"+e+":hover"},b+=f()+", "+f(":visited")+" {\n  color: "+n+";\n  text-decoration: none !important;\n  text-shadow: 0.03em 0 "+e+", -0.03em 0 "+e+", 0 0.03em "+e+", 0 -0.03em "+e+", 0.06em 0 "+e+", -0.06em 0 "+e+", 0.09em 0 "+e+", -0.09em 0 "+e+", 0.12em 0 "+e+", -0.12em 0 "+e+", 0.15em 0 "+e+", -0.15em 0 "+e+";\n  background-color: transparent;\n  background-image: -webkit-linear-gradient("+e+", "+e+"), -webkit-linear-gradient("+e+", "+e+"), -webkit-linear-gradient("+n+", "+n+");\n  background-image: -moz-linear-gradient("+e+", "+e+"), -moz-linear-gradient("+e+", "+e+"), -moz-linear-gradient("+n+", "+n+");\n  background-image: -o-linear-gradient("+e+", "+e+"), -o-linear-gradient("+e+", "+e+"), -o-linear-gradient("+n+", "+n+");\n  background-image: -ms-linear-gradient("+e+", "+e+"), -ms-linear-gradient("+e+", "+e+"), -ms-linear-gradient("+n+", "+n+");\n  background-image: linear-gradient("+e+", "+e+"), linear-gradient("+e+", "+e+"), linear-gradient("+n+", "+n+");\n  -webkit-background-size: 0.05em 1px, 0.05em 1px, 1px 1px;\n  -moz-background-size: 0.05em 1px, 0.05em 1px, 1px 1px;\n  background-size: 0.05em 1px, 0.05em 1px, 1px 1px;\n  background-repeat: no-repeat, no-repeat, repeat-x;\n}\n\n"+f("::selection")+" {\n  text-shadow: 0.03em 0 "+D+", -0.03em 0 "+D+", 0 0.03em "+D+", 0 -0.03em "+D+", 0.06em 0 "+D+", -0.06em 0 "+D+", 0.09em 0 "+D+", -0.09em 0 "+D+", 0.12em 0 "+D+", -0.12em 0 "+D+", 0.15em 0 "+D+", -0.15em 0 "+D+";\n  background: "+D+";\n}\n\n"+f("::-moz-selection")+" {\n  text-shadow: 0.03em 0 "+D+", -0.03em 0 "+D+", 0 0.03em "+D+", 0 -0.03em "+D+", 0.06em 0 "+D+", -0.06em 0 "+D+", 0.09em 0 "+D+", -0.09em 0 "+D+", 0.12em 0 "+D+", -0.12em 0 "+D+", 0.15em 0 "+D+", -0.15em 0 "+D+";\n  background: "+D+";\n}"}for(t in c)b+="a["+C+'="'+t+'"] {\n  background-position: 0% '+t+"%, 100% "+t+"%, 0% "+t+"%;\n}";return N.innerHTML=b},x=function(){var e,t,n;if(t=this,e=t.hasAttribute(E),!e&&(n=y(t)))return t.setAttribute(E,""),H()},b=function(e){var t,n,r,i,o,a;if(a=q(),i=document.querySelectorAll((e.location?e.location+" ":"")+"a"),i.length){for(A={},t=0,n=i.length;t<n;t++)r=i[t],o=y(r),o?r.setAttribute(S,""):(r.removeEventListener("mouseover",x),r.addEventListener("mouseover",x));return H(),document.body.appendChild(N),T.push(q()-a)}},m=function(){var e,t,n,r,i,o;for(null!=(r=N.parentNode)&&r.removeChild(N),Array.prototype.forEach.call(document.querySelectorAll("["+E+"]"),function(e){return e.removeEventListener(x)}),i=[z,M,L,S,E,a],o=[],t=0,n=i.length;t<n;t++)e=i[t],o.push(Array.prototype.forEach.call(document.querySelectorAll("["+e+"]"),function(t){return t.removeAttribute(e)}));return o},window.SmartUnderline={init:function(e){return null==e&&(e={}),"loading"===document.readyState?(window.addEventListener("DOMContentLoaded",function(){return b(e)}),window.addEventListener("load",function(){return m(),b(e)})):(m(),b(e))},destroy:function(){return m()},performanceTimes:function(){return T}})}).call(this);
//# sourceMappingURL=smart-underline.min.js.map