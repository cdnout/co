/*!
 * Copyright (c) 2017 NAVER Corp.
 * @egjs/persist project is licensed under the MIT license
 * 
 * @egjs/persist JavaScript library
 * 
 * 
 * @version 2.0.0
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("Persist",[],t):"object"==typeof exports?exports.Persist=t():(e.eg=e.eg||{},e.eg.Persist=t())}(this,function(){return function(e){function __webpack_require__(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,__webpack_require__),n.l=!0,n.exports}var t={};return __webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.d=function(e,t,r){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return __webpack_require__.d(t,"a",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=2)}([function(e,t,r){"use strict";t.__esModule=!0;var n="undefined"!=typeof window&&window||{};t.window=n;t.console=n.console,t.document=n.document,t.history=n.history,t.localStorage=n.localStorage,t.location=n.location,t.sessionStorage=n.sessionStorage,t.navigator=n.navigator,t.JSON=n.JSON,t.RegExp=n.RegExp,t.parseFloat=n.parseFloat,t.performance=n.performance},function(e,t,r){"use strict";function isBackForwardNavigated(){return n.performance.navigation.type===a}t.__esModule=!0;var n=r(0),o=n.navigator.userAgent,a=n.performance.navigation.TYPE_BACK_FORWARD||2,i=function(){var e=new n.RegExp("iPhone|iPad","i").test(o),t=new n.RegExp("Mac","i").test(o)&&!new n.RegExp("Chrome","i").test(o)&&new n.RegExp("Apple","i").test(o),r=new n.RegExp("Android ","i").test(o),a=new n.RegExp("wv; |inapp;","i").test(o),i=r?(0,n.parseFloat)(new n.RegExp("(Android)\\s([\\d_\\.]+|\\d_0)","i").exec(o)[2]):undefined;return!(e||t||r&&(i<=4.3&&a||i<3))}();t["default"]={isBackForwardNavigated:isBackForwardNavigated,isNeeded:i},e.exports=t["default"]},function(e,t,r){"use strict";var n=r(3),o=function(e){return e&&e.__esModule?e:{"default":e}}(n);o["default"].VERSION="2.0.0",e.exports=o["default"]},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function setRec(e,t,r){var n=e;n||(n=isNaN(t[0])?{}:[]);var o=t.shift();return 0===t.length?(n instanceof Array&&isNaN(o)&&i.console.warn("Don't use key string on array"),n[o]=r,n):(n[o]=setRec(n[o],t,r),n)}t.__esModule=!0;var n=r(4),o=function(e){return e&&e.__esModule?e:{"default":e}}(n),a=r(1),i=r(0),s=function(){function Persist(e,t){_classCallCheck(this,Persist),this.key=e}return Persist.prototype.get=function(e){var t=o["default"].getStateByKey(this.key);if(0===e.length)return t;for(var r=e.split("."),n=t,a=!0,i=0;i<r.length;i++){if(!n){a=!1;break}n=n[r[i]]}return a&&n?n:null},Persist.prototype.set=function(e,t){var r=o["default"].getStateByKey(this.key);return 0===e.length?o["default"].setStateByKey(this.key,t):o["default"].setStateByKey(this.key,setRec(r,e.split("."),t)),this},Persist.isNeeded=function(){return a.isNeeded},Persist}();t["default"]=s,e.exports=t["default"]},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function isStorageAvailable(e){if(!e)return undefined;var t="__tmp__"+u["default"];try{return e.setItem(t,u["default"]),e.getItem(t)===u["default"]}catch(r){return!1}}function warnInvalidStorageValue(){console.warn("window.history or session/localStorage has no valid format data to be handled in persist.")}function getStorageKey(){return c?o.location.href+u["default"]:undefined}function getStorage(){return c}function getState(){var e=void 0,t=o.location.href+u["default"],r=void 0;if(c?r=c.getItem(t):o.history.state&&("object"!==n(o.history.state)?r=o.history.state[t]:warnInvalidStorageValue()),null===r)return{};var a="string"==typeof r&&r.length>0&&"null"!==r;try{e=o.JSON.parse(r);var i=!("object"!==(void 0===e?"undefined":n(e))||e instanceof Array);if(!a||!i)throw new Error}catch(s){warnInvalidStorageValue(),e={}}return e}function getStateByKey(e){if(!l&&!c)return undefined;var t=getState()[e];return"null"!==t&&void 0!==t||(t=null),t}function setState(e){var t=o.location.href+u["default"];if(c)e?c.setItem(t,o.JSON.stringify(e)):c.removeItem(t);else try{var r=o.history.state;"object"===(void 0===r?"undefined":n(r))?(r[t]=o.JSON.stringify(e),o.history.replaceState(r,document.title,o.location.href)):console.warn("To use a history object, it must be an object that is not a primitive type.")}catch(a){console.warn(a.message)}e?o.window[u["default"]]=!0:delete o.window[u["default"]]}function setStateByKey(e,t){if(l||c){var r=getState();r[e]=t,setState(r)}}function reset(){setState(null)}t.__esModule=!0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=r(0),a=r(1),i=_interopRequireDefault(a),s=r(5),u=_interopRequireDefault(s),l="replaceState"in o.history&&"state"in o.history,c=function(){var e=void 0;return isStorageAvailable(o.sessionStorage)?e=o.sessionStorage:isStorageAvailable(o.localStorage)&&(e=o.localStorage),e}();!i["default"].isBackForwardNavigated()&&reset(),t["default"]={reset:reset,setStateByKey:setStateByKey,getStateByKey:getStateByKey,getStorageKey:getStorageKey,getStorage:getStorage},e.exports=t["default"]},function(e,t,r){"use strict";t.__esModule=!0;t["default"]="___persist___",e.exports=t["default"]}])});