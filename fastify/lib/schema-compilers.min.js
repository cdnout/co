"use strict";const Ajv=require("ajv"),fastJsonStringify=require("fast-json-stringify");function ValidatorSelector(){const t=new Map,e=new Map;return e.put=e.set,function(r,o){const n=`${JSON.stringify(r)}${JSON.stringify(o.customOptions)}`;if(t.has(n))return t.get(n);const i=ValidatorCompiler(r,o,e);return t.set(n,i),i}}function ValidatorCompiler(t,e,r){const o=new Ajv(Object.assign({coerceTypes:!0,useDefaults:!0,removeAdditional:!0,allErrors:!1,nullable:!0},e.customOptions,{cache:r}));if(e.plugins&&e.plugins.length>0)for(const t of e.plugins)t[0](o,t[1]);const n=Object.values(t);for(const t of n)o.addSchema(t);return function({schema:t,method:e,url:r,httpPart:n}){return o.compile(t)}}function SerializerCompiler(t){return function({schema:e,method:r,url:o,httpStatus:n}){return fastJsonStringify(e,{schema:t})}}module.exports.ValidatorSelector=ValidatorSelector,module.exports.SerializerCompiler=SerializerCompiler;