"use strict";const Ajv=require("ajv"),fastJsonStringify=require("fast-json-stringify");function ValidatorSelector(){const e=new Map,t=new Map;return t.put=t.set,function(r,o){const i=`${JSON.stringify(r)}${JSON.stringify(o.customOptions)}`;if(e.has(i))return e.get(i);const n=ValidatorCompiler(r,o,t);return e.set(i,n),n}}function ValidatorCompiler(e,t,r){const o=new Ajv(Object.assign({coerceTypes:!0,useDefaults:!0,removeAdditional:!0,allErrors:!1,nullable:!0},t.customOptions,{cache:r}));if(t.plugins&&t.plugins.length>0)for(const e of t.plugins)e[0](o,e[1]);return Object.values(e).forEach(e=>o.addSchema(e)),({schema:e,method:t,url:r,httpPart:i})=>o.compile(e)}function SerializerCompiler(e){return function({schema:t,method:r,url:o,httpStatus:i}){return fastJsonStringify(t,{schema:e})}}module.exports.ValidatorCompiler=ValidatorCompiler,module.exports.ValidatorSelector=ValidatorSelector,module.exports.SerializerCompiler=SerializerCompiler;