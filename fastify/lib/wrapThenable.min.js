"use strict";const{kReplyIsError,kReplyHijacked}=require("./symbols");function wrapThenable(e,r){e.then(function(e){if(!0!==r[kReplyHijacked]&&(void 0!==e||!1===r.sent))try{r.send(e)}catch(e){r[kReplyIsError]=!0,r.send(e)}},function(e){!0!==r.sent?(r[kReplyIsError]=!0,r.send(e)):r.log.error({err:e},"Promise errored, but reply.sent = true was set")})}module.exports=wrapThenable;