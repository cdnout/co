(function(e){"use strict";var t=function(e){var t=void 0!==e.prototype?e.prototype.toString:function(){return""};e.prototype.toString=function(){return["ComplexStorageCache","debug","info","warn","QC_Append","set","get","done","componentDone","_new_","__new__","Class","ClassFactory","New","Export","Package","Import","subelements","componentLoader","buildComponents","Controller","View","VO","Service","serviceLoader","JSONService","ConfigService","SourceJS","SourceCSS","ArrayList","ArrayCollection","Effect","Timer","sum","avg","table","max","min","range","matrix","matrix2d","matrix3d","unique"].includes(this.name)?this.name+"{ [QCObjects native code] }":t.call(this)}};t(Function);var n="undefined"!=typeof window&&void 0!==window.self&&window===window.self,o=function(e){return n?document.createElement(e):{}};if(!n){require("fs")}var r=function(e){var t,n;return JSON.stringify(e,(t=new WeakSet,n=0,function(e,o){if("object"==typeof o&&null!==o){if(t.has(o))return(n+=1)<=3?_(o):null;t.add(o)}return o}))};if(n){var a=function(e){return[...this.querySelectorAll(e)]};Element.prototype.subelements=a,HTMLDocument.prototype.subelements=a,HTMLElement.prototype.subelements=a,"undefined"!=typeof ShadowRoot&&(ShadowRoot.prototype.subelements=a)}if(n)try{(e=void 0!==window.top?window.top:window)._allowed_=!0}catch(t){try{(e=document)._allowed_=!0}catch(t){try{(e=global)._allowed_=!0}catch(t){(e={})._allowed_=!0}}}else"undefined"!=typeof global&&(e=global);var i=function(){var t="";if(n){var o=e.document.baseURI.split("?")[0].split("/");o.pop(),t=o.join("/")+"/"}else{var r;try{r=require("process")}catch(e){}t=void 0!==r?`${r.cwd()}/`:""}return t}();if(n){"Promise"in e||(e.Promise=function(e){var t={then:function(){},catch:function(){},_then:function(e){this.then.call(t,e)},_catch:function(e){this.catch.call(t,e)}};return e.call(t,t._then,t._catch),t}),void 0===e.console&&(e.console=function(){},e.console.prototype.log=function(e){});var s="undefined"!=typeof document&&""!==document.domain?document.domain:"localhost",c=e[(!1+[])[+!+[]+ +!+[]]+(typeof!1)[+!+[]]+(typeof[])[(+!+[]+ +!+[])*(+!+[]+ +!+[])]+(!1+[])[+!+[]]+(!0+[])[+[]]+([]+[]+[][[]])[+[+!+[]+[+[]]]/(+!+[]+ +!+[])]+(typeof!1)[+!+[]]+([]+[]+[][[]])[+!+[]]]["h"+(typeof!1)[+!+[]]+(!1+[])[+!+[]+ +!+[]+ +!+[]]+(!0+[])[+[]]].toLowerCase(),l="undefined"!=typeof cordova}else c="secret",s="localhost";e._asyncLoad=[];var u=function(t,n){var o={func:t,args:n,dispatch:function(){this.func.apply(null,this.args)}};return e._asyncLoad.push(o),o};if(n){document.onreadystatechange=function(){"complete"===document.readyState&&e._asyncLoad.map(function(e){e.dispatch.call(e)})}}else"undefined"!=typeof global&&(global._fireAsyncLoad=function(){e._asyncLoad.map(function(e){e.dispatch.call(e)})});e.asyncLoad=u;var d=new function(){return{debugEnabled:!0,infoEnabled:!0,warnEnabled:!0,debug:function(e){this.debugEnabled&&console.log("[35m%s[0m","[DEBUG] "+e)},info:function(e){this.infoEnabled&&console.info("[33m%s[0m","[INFO] "+e)},warn:function(e){this.warnEnabled&&console.warn("[31m%s[0m","[WARN] "+e)}}};d.debugEnabled=!1,d.infoEnabled=!1,e.logger=d;var p,h={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var t,n,o,r,a,i,s,c="",l=0;for(e=h._utf8_encode(e);l<e.length;)r=(t=e.charCodeAt(l++))>>2,a=(3&t)<<4|(n=e.charCodeAt(l++))>>4,i=(15&n)<<2|(o=e.charCodeAt(l++))>>6,s=63&o,isNaN(n)?i=s=64:isNaN(o)&&(s=64),c=c+this._keyStr.charAt(r)+this._keyStr.charAt(a)+this._keyStr.charAt(i)+this._keyStr.charAt(s);return c},decode:function(e){var t,n,o,r,a,i,s="",c=0;for(e=e.replace(/[^A-Za-z0-9+/=]/g,"");c<e.length;)t=this._keyStr.indexOf(e.charAt(c++))<<2|(r=this._keyStr.indexOf(e.charAt(c++)))>>4,n=(15&r)<<4|(a=this._keyStr.indexOf(e.charAt(c++)))>>2,o=(3&a)<<6|(i=this._keyStr.indexOf(e.charAt(c++))),s+=String.fromCharCode(t),64!==a&&(s+=String.fromCharCode(n)),64!==i&&(s+=String.fromCharCode(o));return s=h._utf8_decode(s)},_utf8_encode:function(e){e=e.replace(/rn/g,"n");for(var t="",n=0;n<e.length;n++){var o=e.charCodeAt(n);o<128?t+=String.fromCharCode(o):o>127&&o<2048?(t+=String.fromCharCode(o>>6|192),t+=String.fromCharCode(63&o|128)):(t+=String.fromCharCode(o>>12|224),t+=String.fromCharCode(o>>6&63|128),t+=String.fromCharCode(63&o|128))}return t},_utf8_decode:function(e){for(var t,n="",o=0,r=0,a=0;o<e.length;)(r=e.charCodeAt(o))<128?(n+=String.fromCharCode(r),o++):r>191&&r<224?(a=e.charCodeAt(o+1),n+=String.fromCharCode((31&r)<<6|63&a),o+=2):(a=e.charCodeAt(o+1),t=e.charCodeAt(o+2),n+=String.fromCharCode((15&r)<<12|(63&a)<<6|63&t),o+=3);return n}},f=function(e){var t,n,o;t=e.index,n=e.load,o=e.alternate;var r=this.getID(t),a=localStorage.getItem(r);if(this.isEmpty(a)){var i=n.call(null,{cachedObjectID:r,cachedResponse:a,cache:this});this.save(t,i),d.debug("RESPONSE OF {{cachedObjectID}} CACHED".replace("{{cachedObjectID}}",r))}else{o.call(null,{cachedObjectID:r,cachedResponse:a,cache:this});d.debug("RESPONSE OF {{cachedObjectID}} IS ALREADY CACHED ".replace("{{cachedObjectID}}",r))}return this};if(f.prototype.getItem=function(e){var t=localStorage.getItem(e);return this.isEmpty(t)?null:JSON.parse(t)},f.prototype.setItem=function(e,t){localStorage.setItem(e,r(t))},f.prototype.isEmpty=function(e){var t=!1;switch(!0){case void 0===e:case"string"==typeof e&&""===e:case"string"==typeof e&&"undefined"===e:case"number"==typeof e&&0===e:case null===e:t=!0;break;default:t=!1}return t},f.prototype.getID=function(e){return"cachedObject_"+h.encode(r(e).replace(",","_").replace("{","_").replace("}","_"))},f.prototype.save=function(e,t){var n=this.getID(e);d.debug("CACHING THE RESPONSE OF {{cachedObjectID}} ".replace("{{cachedObjectID}}",n)),this.setItem(n,t)},f.prototype.getCached=function(e){var t=this.getID(e);return this.getItem(t)},f.prototype.clear=function(){for(var e in localStorage)e.startsWith("cachedObject_")&&localStorage.removeItem(e)},n){var g=!1;try{var m=Object.defineProperty({},"passive",{get:function(){return g=!0}});window.addEventListener("testPassive",null,m),window.removeEventListener("testPassive",null,m)}catch(e){}var y=function(){return!!g&&{passive:!0}}}n&&(Element.prototype.find=function(e){var t=[],n=document.subelements(e);return n.map(function(e,o){void 0!==n[o]&&n[o].parentNode.tagName===this.parentNode.tagName&&t.push(P(e,new Object))}),t});var b,v=(b=Object.prototype.hasOwnProperty,function(e){if("object"!=typeof e)throw TypeError("Object prototype may only be an Object or null. The type is "+typeof e);var t=function(){};t.prototype=e;var n=new t;if(arguments.length>1){var o=Object(arguments[1]);for(var r in o)b.call(o,r)&&(n[r]=o[r])}return n});"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){if(null===e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),o=1;o<arguments.length;o++){var r=arguments[o];if(null!==r)for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])}return n},writable:!0,configurable:!0});var _=function(e){var t;switch(typeof e){case"string":case"number":t=e;break;case"object":case"function":t=Object.assign({},e)}return t},O={},C={},w=[],A=[],N=function(e){var t="";return"function"==typeof e.constructor?t=e.constructor.name:"object"==typeof e.constructor&&(t=e.constructor.toString().split(" ")[1].replace("]","")),t},P=function(e,t){for(var n in e)if(void 0!==e[n])try{t[n]=e[n]}catch(e){}return t},T=function(e,t){for(var n in e)if(void 0!==e[n]&&"function"!=typeof e[n])try{t[n]=e[n]}catch(e){}else if("function"==typeof e[n])try{t[n]=e[n].bind(t)}catch(e){}return t},E=function(o,r,a){var i;o=arguments[0];if(n)r=arguments.length>2?arguments[1]:HTMLElement;else r=arguments.length>2?arguments[1]:Object;a=arguments.length>2?arguments[2]:arguments.length>1?arguments[1]:{};return void 0===r?r=n?HTMLElement:Object:a=P(void 0===a?{}:a,void 0!==r.__definition?_(r.__definition):{}),r=r.hasOwnProperty.call(r,"prototype")?r.prototype:_(r),void 0===a||a.hasOwnProperty.call(a,"__new__")||(a.__new__=function(e){T(e,this)},t(a.__new__)),void 0===a||a.hasOwnProperty.call(a,"css")||(a.css=function(e){void 0!==this.body&&"undefined"!==this.body.style&&(d.debug("body style"),this.body.style=P(e,this.body.style))},t(a.css)),void 0===a||a.hasOwnProperty.call(a,"hierarchy")||(a.hierarchy=function(){var e,t=[];return t.push((e=this).hasOwnProperty.call(e,"__classType")?e.__classType:e.hasOwnProperty.call(e,"__definition")?e.__definition.__classType:N(e)),this.hasOwnProperty.call(this,"__definition")&&(t=t.concat(this.__definition.hierarchy.call(this.__definition))),t}),void 0===a||a.hasOwnProperty.call(a,"append")||(a.append=function(){var e=arguments.length>0?arguments[0]:this.body;void 0!==this.body&&(d.debug("append element"),arguments.lenght>0?(d.debug("append to element"),this.body.append(e),void 0===this.childs&&(this.childs=[]),this.childs.push(e)):n&&(d.debug("append to body"),document.body.append(e)))},t(a.append)),void 0===a||a.hasOwnProperty.call(a,"attachIn")||(a.attachIn=function(e){if(n)for(var t=document.subelements(e),o=0,r=t.length;o<r;o++)t[o].append(this)},t(a.attachIn)),void 0!==a&&a.hasOwnProperty.call(a,"__instanceID")&&delete a.__instanceID,(i=v(r,a)).__definition=a,i.__definition.__classType=o,O[o]=i,e[o]=O[o],e[o]};E.prototype.toString=function(){return"Class(name, type, definition) { [QCObjects native code] }"};var I=function(e){var t;if(null!==e&&e.indexOf(".")>-1){var n=e.split(".").slice(0,e.split(".").length-1).join("."),o=e.split(".").slice(-1).join(""),r=x(n),a=void 0!==r?r.filter(e=>void 0!==e&&e.hasOwnProperty.call(e,"__definition")&&G(e)&&e.__definition.__classType===o&&!e.hasOwnProperty.call(e,"__instanceID")).reverse():[];a.length>0&&(t=a[0])}else null!==e&&O.hasOwnProperty.call(O,e)&&(t=O[e]);return t};n&&(Element.prototype.append=function(e){void 0!==e.__definition&&void 0!==e.__definition.__classType&&(e.body,1)?this.appendChild(e.body):this.appendChild(e)},Element.prototype.render=function(e){var t=function(e,t){if(void 0!==document.implementation.createHTMLDocument){var n=document.implementation.createHTMLDocument("");n.innerHTML=t,n.body.subelements("*").map(function(t){return e.append(t)})}};if(void 0!==this.innerHTML)try{this.innerHTML+=e}catch(n){t(this,e)}else t(this,e)});var S=function(e,t,n){return I(e)[t]};S.prototype.toString=function(){return"_super_(className,classMethodName,params) { [QCObjects native code] }"};var L=function(e,t){t=arguments.length>1?arguments[1]:{};Object.__instanceID=void 0===Object.__instanceID||null===Object.__instanceID?0:Object.__instanceID+1,p=Object.__instanceID;var r=void 0===e?v({}.constructor.prototype,{}):v(e.constructor.prototype,e.__definition);if(r.__definition=P({__instanceID:p},void 0!==e?e.__definition:{}),r.__instanceID=p,r.hasOwnProperty.call(r,"definition")&&void 0!==r.__definition&&null!==r.__definition&&(r.__definition.__instanceID=p),r.hasOwnProperty.call(r,"__new__")){if(void 0===r||r.__definition.hasOwnProperty.call(r.__definition,"body"))r.__definition.hasOwnProperty.call(r.__definition,"body")&&(r.body=r.__definition.body);else try{n?(r.body=P(r.__definition,o(r.__definition.__classType)),r.body.style=P(r.__definition,r.body.style)):(r.body={},r.body.style={})}catch(e){r.body={},r.body.style={}}r.__new__(t),r.hasOwnProperty.call(r,"_new_")&&r._new_(t)}return r};L.prototype.toString=function(){return"New(QCObjectsClassName, args) { [QCObjects native code] }"};var j=function(t){if(n)try{e[t.name]=t,window[t.name]=t}catch(e){}else"undefined"!=typeof global&&(global.hasOwnProperty.call(global,t.name)||(global[t.name]=t))};if(j.prototype.toString=function(){return"Export(function or symbol) { [QCObjects native code] }"},!n){var F=function(e){const t=require("fs");var n=null;try{var o=[`${I("CONFIG").get("projectPath")}${I("CONFIG").get("relativeImportPath")}`,`${I("CONFIG").get("basePath")}${I("CONFIG").get("relativeImportPath")}`,`${I("CONFIG").get("projectPath")}`,`${I("CONFIG").get("basePath")}`,`${I("CONFIG").get("relativeImportPath")}`,`${process.cwd()}${I("CONFIG").get("relativeImportPath")}`,`${process.cwd()}/node_modules/`+e,`${process.cwd()}/node_modules`,`${process.cwd()}`,"node_modules","./",""].concat(module.paths);(o=o.filter(n=>t.existsSync(n+"/"+e))).length>0&&(n=o[0],d.info(e+" is Installed."))}catch(e){console.log(e)}return n};j(F)}E("_Crypt",Object,{last_string:"",last_key:"",construct:!1,_new_:function(e){var t=e.string,n=e.hasOwnProperty.call(e,"key")?e.key:null;this.__new__(e),n=null===n?this.__instanceID:n,this.last_key=n,this.last_string=t,this.construct=!0},_encrypt:function(){for(var e,t,n=this.last_string,o=this.last_key,r="",a=0;a<n.length;a++)e=n.substr(a,1),t=o.substr(a%o.length-1,1),r+=e=String.fromCharCode(e.charCodeAt(0)+t.charCodeAt(0));return this.last_string=h.encode(r),this.last_string},_decrypt:function(){var e,t,n=this.last_string,o=this.last_key,r="";n=h.decode(n);for(var a=0;a<n.length;a++)e=n.substr(a,1),t=o.substr(a%o.length-1,1),r+=e=String.fromCharCode(e.charCodeAt(0)-t.charCodeAt(0));return this.last_string=r,this.last_string},encrypt:function(e,t){return L(I("_Crypt"),{string:e,key:""!==t?t:"12345678ABC"})._encrypt()},decrypt:function(e,t){return L(I("_Crypt"),{string:e,key:""!==t?t:"12345678ABC"})._decrypt()}});var R=function(e){return JSON.parse(I("_Crypt").decrypt(e,c))};E("Processor",{processors:{config:function(e){return M.get(e,"")},ENV:function(e){return"undefined"!=typeof process?process.env[e]:""},global:function(e){return"undefined"!=typeof global?global[e]:""}},setProcessor:function(e){"function"==typeof e&&""!==e.name&&(this.processors[e.name]=e)},execute:function(e,t){return this.processors[e].apply(this,t.split(","))},process:function(e){if("string"==typeof e){let t=this;Object.keys(t.processors).map(function(n){[...e.matchAll(new RegExp("\\$"+n+"\\((.*)\\).*","g"))].map(function(o){var r=`$${n}(${o[1]})`;e=e.replace(r,t.execute.call(t,n,o[1]))})})}return e},processObject:function(e){let t=this;return"object"==typeof e?Object.keys(e).map(function(n){"object"!=typeof e[n]||e[n].hasOwnProperty.call(e[n],"call")?"string"==typeof e[n]&&(e[n]=t.process(e[n])):e[n]=t.processObject(e[n])}):"string"==typeof e&&(e=t.process(e)),e}}),E("CONFIG",Object,{_CONFIG:{relativeImportPath:"",remoteImportsPath:"",remoteSDKPath:"https://sdk.qcobjects.dev/",asynchronousImportsLoad:!1,removePackageScriptAfterLoading:!0,componentsBasePath:"",delayForReady:0,preserveComponentBodyTag:!1,overrideComponentTag:!1,useConfigService:!1,routingWay:"hash",useSDK:!0,useLocalSDK:!1,basePath:i},_CONFIG_ENC:null,set:function(e,t){"basePath"===e&&(i=t);var n,o=function(e){null===e._CONFIG_ENC&&(e._CONFIG_ENC=I("_Crypt").encrypt(r({}),c));var t=e._CONFIG_ENC.valueOf(),n=e._CONFIG.valueOf();return T(n,R(t))}(this);o[e]=t,this._CONFIG_ENC=(n=o,I("_Crypt").encrypt(r(n),c)),this._CONFIG.hasOwnProperty.call(this._CONFIG,e)&&(this._CONFIG[e]=t)},get:function(e,t){var n;try{var o=function(e){null===e._CONFIG_ENC&&(e._CONFIG_ENC=I("_Crypt").encrypt(r({}),c));var t=e._CONFIG_ENC.valueOf(),n=e._CONFIG.valueOf();return T(n,R(t))}(this);void 0!==o[e]?n=o[e]:void 0!==t&&(n=t)}catch(o){d.debug("Something wrong when trying to get CONFIG values"),d.debug("No config value for: "+e),n=t}return I("Processor").processObject.call(I("Processor"),n)}});var M=I("CONFIG");j(M),j(function(e,t){setTimeout(function(){!function(e,t){var n=0,o=setInterval(function(){t.call()?(clearInterval(o),e.call(),d.debug("Ejecuting "+e.name+" after wait")):n<2e3?(n+=1,d.debug("WAIT UNTIL "+e.name+" is true, "+n.toString()+" cycles")):(d.debug("Max execution time for "+e.name+" expression until true"),clearInterval(o))},1)}(e,t)},1)}),j(S),j(f),j(I),j(o);var G=function(e){return!("object"!=typeof e||e.hasOwnProperty.call(e,"__instanceID")||!e.hasOwnProperty.call(e,"__definition")||void 0===e.__definition||!e.__definition.hasOwnProperty.call(e.__definition,"__classType"))},x=function(e,t){return C.hasOwnProperty.call(C,e)&&void 0!==C[e]&&C[e].hasOwnProperty.call(C[e],"length")&&C[e].length>0&&void 0!==t&&t.hasOwnProperty.call(t,"length")&&t.length>0?(t.filter(function(e){return G(e)}).map(function(t){t.__definition.__namespace=e}),C[e]=C[e].concat(t)):void 0!==t&&("object"==typeof t&&t.hasOwnProperty.call(t,"length")?t.filter(function(e){return G(e)}).map(function(t){t.__definition.__namespace=e}):G(t)&&(t.__definition.__namespace=e),C[e]=t),C.hasOwnProperty.call(C,e)?C[e]:void 0};x.prototype.toString=function(){return"Package(namespace, classes) { [QCObjects native code] }"};var D=function(){var e,t,r=function(){},a=!1;if(!(arguments.length<1))return 1===arguments.length?e=arguments[0]:2===arguments.length?(e=arguments[0],r=arguments[1]):arguments.length>2&&(e=arguments[0],r=arguments[1],a=arguments[2],d.debug("[Import] Setting external="+a.toString()+" resource to import: "+e)),a?d.debug("[Import] Registering external resource to import: "+e):d.debug("[Import] Registering local resource to import: "+e),n?(t=new Promise(function(s,c){var l=function(o){w.push(r),function(){var e=0;for(var t in C)e++;return!(e<w.length)}()&&w.map(function(e){A.push(e)}),n&&I("CONFIG").get("removePackageScriptAfterLoading")&&o.target.remove(),s.call(t,{_imported_:o.target,_package_name_:e})};if(!C.hasOwnProperty.call(C,e)){var u=o("script");u.type="text/javascript",u.async=!!I("CONFIG").get("asynchronousImportsLoad"),u.onreadystatechange=function(){"complete"===u.readyState&&l.call()},u.onload=l,u.onerror=function(n){c.call(t,{_imported_:u,_package_name_:e})},u.src=a?I("CONFIG").get("remoteImportsPath")+e+".js":i+I("CONFIG").get("relativeImportPath")+e+".js",document.getElementsByTagName("head")[0].appendChild(u)}})).catch(function(){d.debug("Import: Error loading a package ")}):t=new Promise(function(n,o){try{var r=F(e),a="";if(null!==r)a=r+"/"+e;else{var s=F(e+".js");a=null!==s?s+"/"+e+".js":i+I("CONFIG").get("relativeImportPath")+e}try{n.call(t,{_imported_:require(`${a}`),_package_name_:e})}catch(n){console.log(n),o.call(t,{_imported_:null,_package_name_:e})}}catch(n){console.log(n),o.call(t,{_imported_:null,_package_name_:e})}}).catch(function(t){console.log(t),d.debug("Something happened when importing "+e)}),t};D.prototype.toString=function(){return"Import(packagename,ready,external) { [QCObjects native code] }"},n&&(Element.prototype.Cast=function(e){return e.__definition.body=this,e=L(e)}),E("TagElements",Array,{show:function(){this.map(function(e){return e.style.opacity=1})},hide:function(){this.map(function(e){return e.style.opacity=0})},effect:function(){var e=[...arguments].slice(1),t=arguments[0];"string"===(typeof t).toLowerCase()&&(t=I(t)),this.map(function(n){return t.apply.apply(t,[n].concat(e))})},findElements:function(e){var t=L(I("TagElements"));if(n)for(var o in this)"number"==typeof o&&"function"!=typeof this[o]&&this[o].hasOwnProperty.call(this[o],"subelements")&&t.push(this[o].subelements(e));return t}});var k=function(e,t){var o=L(I("TagElements"));if(n)for(var r=document.subelements(e),a=[],i=0;i<r.length;i++)void 0!==t&&r[i].hasOwnProperty.call(r[i],"innerHTML")&&(r[i].innerHTML=t),a.indexOf(i)<0&&(o.push(r[i]),a.push(i));return o};function H(e){n?A.push(e.bind(window)):"undefined"!=typeof global&&A.push(e.bind(global))}var q=H,U=function(t){var o=function(){A.map(function(e,t){"function"==typeof e&&(e.call(),delete A[t])})};I("CONFIG").get("delayForReady")>0?n?setTimeout(o.bind(window),I("CONFIG").get("delayForReady")):"undefined"!=typeof global&&setTimeout(o.bind(global),I("CONFIG").get("delayForReady")):o.call(e)};n?(window.onload=U,l&&document.addEventListener("deviceready",U,y)):global.onload=U,E("DDO",Object,{_new_:function({instance:e,name:t,fget:n,fset:o,value:r}){var a;t=void 0===t?N(this):t;Object.defineProperty(e,t,{set(e){a=e,d.debug("value changed "+t),void 0!==o&&"function"==typeof o&&o(a)},get(){d.debug("returning value "+t);var e=function(e){return"object"==typeof e&&e.hasOwnProperty.call(e,"value")?e.value:e};return void 0!==n&&"function"==typeof n?n(e(a)):e(a)}})}}),E("InheritClass",Object,{}),E("DefaultTemplateHandler",Object,{template:"",assign:function(e){var t,n=this.template;for(var o in e)t=e[o],t=I("Processor").processObject.call(I("Processor"),t),n=n.replace(new RegExp("{{"+o+"}}","g"),t);return n=I("Processor").processObject.call(I("Processor"),n)}});var W=function(e,t){return e.includes(t)};e.__oldpopstate=e.onpopstate,E("Component",Object,{domain:s,basePath:i,templateURI:"",templateHandler:"DefaultTemplateHandler",tplsource:"default",url:"",name:"",method:"GET",data:{},reload:!1,shadowed:!1,cached:!0,done:function(){},fail:function(){},set:function(e,t){this[e]=t},get:function(e){return this[e]},feedComponent:function(){var e=this.hasOwnProperty.call(this,"container")&&void 0!==this.container&&null!==this.container?this.container:this.body,t=this.parsedAssignmentText;if(this.innerHTML=t,this.shadowed){d.debug("COMPONENT {{NAME}} is shadowed".replace("{{NAME}}",this.name)),d.debug("Preparing slots for Shadowed COMPONENT {{NAME}}".replace("{{NAME}}",this.name));var n=o("div");e.subelements("[slot]").map(function(t){t.parentElement===e&&n.appendChild(t)}),d.debug("Creating shadowedContainer for COMPONENT {{NAME}}".replace("{{NAME}}",this.name));var r=o("div");r.classList.add("shadowHost");try{this.shadowRoot=r.attachShadow({mode:"open"})}catch(e){try{d.debug("Shadowed COMPONENT {{NAME}} is repeated".replace("{{NAME}}",this.name)),this.shadowRoot=r.shadowRoot}catch(e){d.debug("Shadowed COMPONENT {{NAME}} is not allowed on this browser".replace("{{NAME}}",this.name))}}void 0!==this.shadowRoot&&null!==this.shadowRoot?(this.reload?(d.debug("FORCED RELOADING OF CONTAINER FOR Shadowed COMPONENT {{NAME}}".replace("{{NAME}}",this.name)),r.shadowRoot.innerHTML=this.innerHTML):(n.innerHTML=this.parseTemplate(n.innerHTML),d.debug("ADDING Shadowed COMPONENT {{NAME}} ".replace("{{NAME}}",this.name)),r.shadowRoot.innerHTML+=this.innerHTML),d.debug("ADDING Slots to Shadowed COMPONENT {{NAME}} ".replace("{{NAME}}",this.name)),r.innerHTML+=n.innerHTML,d.debug("APPENDING Shadowed COMPONENT {{NAME}} to Container ".replace("{{NAME}}",this.name)),e.subelements(".shadowHost")<1?e.appendChild(r):d.debug("Shadowed Container for COMPONENT {{NAME}} is already present in the tree ".replace("{{NAME}}",this.name))):d.debug("Shadowed COMPONENT {{NAME}} is bad configured".replace("{{NAME}}",this.name))}else this.reload?(d.debug("FORCED RELOADING OF CONTAINER FOR COMPONENT {{NAME}}".replace("{{NAME}}",this.name)),e.innerHTML=this.innerHTML):(d.debug("ADDING COMPONENT {{NAME}} ".replace("{{NAME}}",this.name)),e.innerHTML+=this.innerHTML)},rebuild:function(){var e=this,t=new Promise(function(n,o){switch(!0){case void 0!==e.get("tplsource")&&"default"===e.get("tplsource")&&void 0!==e.get("templateURI")&&""!==e.get("templateURI"):e.set("url",e.get("basePath")+e.get("templateURI")),$(e,!1).then(function(e){n.call(t,e)},function(e){o.call(t,e)});break;case void 0!==e.get("tplsource")&&"external"===e.get("tplsource")&&void 0!==e.get("templateURI")&&""!==e.get("templateURI"):e.set("url",e.get("templateURI")),$(e,!1).then(function(e){n.call(t,e)},function(e){o.call(t,e)});break;case void 0!==e.get("tplsource")&&"inline"===e.get("tplsource"):d.debug("Component "+e.name+" has specified template-source=inline, so it is assumed that template is already declared"),e.feedComponent();var r={request:null,component:e};"function"==typeof e.done&&e.done.call(e,r),n(t,r);break;case void 0!==e.get("tplsource")&&"none"===e.get("tplsource"):d.debug("Component "+e.name+" has specified template-source=none, so no template load was done");r={request:null,component:e};"function"==typeof e.done&&e.done.call(e,r),n(t,r);break;default:d.debug("Component "+e.name+" will not be rebuilt because no templateURI is present"),o.call(t,{request:null,component:e})}});return t},Cast:function(e){return P(this,e)},routingWay:null,validRoutingWays:["pathname","hash","search"],routingNodes:[],routings:[],routingPath:"",_bindroute:function(){n&&(I("Component")._bindroute.__assigned||document.addEventListener("componentsloaded",function(t){t.stopImmediatePropagation(),t.stopPropagation(),I("Component")._bindroute.__assigned||(e.onpopstate=function(e){e.stopImmediatePropagation(),e.stopPropagation(),I("Component").route(),void 0!==e.target.__oldpopstate&&"function"==typeof e.target.__oldpopstate&&e.target.__oldpopstate.call(e.target,e)},k("a").map(function(t){return t.oldclick=t.onclick,t.onclick=function(t){var n=!0;e.global.get("routingPaths")||e.global.set("routingPaths",[]);var o=I("CONFIG").get("routingWay"),r=t.target[o];return e.global.get("routingPaths").includes(r)&&t.target[o]!==document.location[o]&&t.target.href!==document.location.href?(d.debug("A ROUTING WAS FOUND: "+r),window.history.pushState({href:t.target.href},t.target.href,t.target.href),I("Component").route(),n=!1):d.debug("NO ROUTING FOUND FOR: "+r),void 0!==t.target.oldclick&&"function"==typeof t.target.oldclick&&t.target.oldclick.call(t.target,t),n},null}),I("Component")._bindroute.__assigned=!0)},y))},route:function(){var e=this,t=!(!e.hasOwnProperty.call(e,"__instanceID")||!e.hasOwnProperty.call(e,"subcomponents")),n=function(t){t.map(function(t,o){t.hasOwnProperty.call(t,"_reroute_")?(t._reroute_(),t.hasOwnProperty.call(t,"subcomponents")&&void 0!==t.subcomponents&&t.subcomponents.length>0&&(d.debug("LOOKING FOR ROUTINGS IN SUBCOMPONENTS FOR: "+t.name),n.call(e,t.subcomponents))):d.debug("IT WAS NOT POSSIBLE TO RE-ROUTE: "+t.name)})};t||global.hasOwnProperty.call(global,"componentsStack")?(t&&e.hasOwnProperty.call(e,"name")&&d.debug("loading routings for instance"+e.name),n.call(e,t?e.subcomponents:global.componentsStack)):d.debug("An undetermined result expected if load routings. So will not be loaded this time.")},fullscreen:function(){if(n){var e=this.body;e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()}},closefullscreen:function(){n&&(document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen())},_generateRoutingPaths:function(t){var o=this;n&&W(o.validRoutingWays,o.routingWay)&&void 0!==t&&(o.innerHTML=t.innerHTML,o.routingNodes=t.subelements("routing"),o.routings=[],o.routingNodes.map(function(t,n){var r=t.getAttributeNames(),a={};r.map(function(e,n){a[r[n]]=t.getAttribute(r[n])}),o.routings.push(a),e.global.get("routingPaths")||e.global.set("routingPaths",[]),e.global.get("routingPaths").includes(a.path)||e.global.get("routingPaths").push(a.path)}))},parseTemplate:function(e){var t;if(this.hasOwnProperty.call(this,"templateHandler")){var n=e,o=(this.templateHandler,I(this.templateHandler)),r=L(o,{template:n}),a=this.data;if(this.hasOwnProperty.call(this,"assignRoutingParams")&&this.assignRoutingParams)try{a=Object.assign(a,this.routingParams)}catch(e){d.debug("[parseTemplate] it was not possible to assign the routing params to the template")}t=r.assign(a)}else t=n;return t},_new_:function(e){this.routingWay=I("CONFIG").get("routingWay");var t=this;Object.defineProperty(t,"body",{set(e){t._body=e,t._generateRoutingPaths(e)},get:()=>t._body}),Object.defineProperty(t,"cacheIndex",{set(e){d.debug("[cacheIndex] This property is readonly")},get:()=>h.encode(t.name+r(t.routingSelected))}),Object.defineProperty(t,"parsedAssignmentText",{set(e){d.debug("[parsedAssignmentText] This property is readonly")},get:()=>(t._parsedAssignmentText=t.parseTemplate(t.template),t._parsedAssignmentText)}),Object.defineProperty(t,"shadowRoot",{set(e){void 0===t.__shadowRoot?t.__shadowRoot=e:d.debug("[shadowRoot] This property can only be assigned once!")},get:()=>t.__shadowRoot}),Object.defineProperty(t,"routingSelected",{set(e){d.debug("[routingSelected] This is a read-only property of the component")},get(){return e=this.routings,t=this.routingPath,e.filter(function(e){var n=e.path.replace(/{(.*?)}/g,"(?<$1>.*)");return new RegExp(n,"g").test(t)}).reverse();var e,t}}),Object.defineProperty(t,"routingParams",{set(e){d.debug("[routingParams] This is a read-only property of the component")},get(){var e=this;return[{}].concat(e.routingSelected.map(function(t){return function(e,t){let n=e.path.replace(/{(.*?)}/g,"(?<$1>.*)");return{...[...t.matchAll(new RegExp(n,"g"))][0].groups}}(t,e.routingPath)})).reduce(function(e,t,n){return Object.assign(e,t)})}}),this.__new__(e),this._reroute_()||this.rebuild().catch(function(e){d.debug("Component not rebuilt")})},_reroute_:function(){var e=this,t=!1;return n&&W(e.validRoutingWays,e.routingWay)&&(e.routingPath=document.location[e.routingWay],e.routingSelected.map(function(t,n){var o=B({COMPONENTS_BASE_PATH:I("CONFIG").get("componentsBasePath"),COMPONENT_NAME:t.name.toString(),TPLEXTENSION:t.hasOwnProperty.call(t,"tplextension")?t.tplextension:e.tplextension,TPL_SOURCE:"default"});e.templateURI=o}),e.routingSelected.length>0&&(e.template="",e.body.innerHTML="",e.rebuild().then(function(){}).catch(function(e){d.debug("Component not rebuilt")}),t=!0)),t},lazyLoadImages:function(){if(n){var e=[...(this.shadowed?this.shadowRoot:this.body).subelements("img[lazy-src]")],t=function(e){e.setAttribute("src",e.getAttribute("lazy-src")),e.onload=(()=>{e.removeAttribute("lazy-src")})};if("IntersectionObserver"in window){var o=new IntersectionObserver((e,n)=>{e.forEach(e=>{e.isIntersecting&&(t(e.target),n.unobserve(e.target))})});e.map(function(e){return o.observe(e)})}else e.map(t)}return null},scrollIntoHash:function(){if(n){if(""!==document.location.hash)(this.shadowed?this.shadowRoot:this.body).subelements(document.location.hash).map(function(e){"function"==typeof e.scrollIntoView&&e.scrollIntoView(I("CONFIG").get("scrollIntoHash",{behavior:"auto",block:"top",inline:"top"}))})}},i18n_translate:function(){if(n&&I("CONFIG").get("use_i18n")){var t=this,o=t.shadowed?t.shadowRoot:t.body,r=I("CONFIG").get("lang","en"),a=navigator.language.slice(0,2),i=e.global.get("i18n");if(r!==a&&"object"==typeof i&&i.hasOwnProperty.call(i,"messages")){(function(){return new Promise(function(e,t){var n=i.messages.filter(function(e){return e.hasOwnProperty.call(e,r)&&e.hasOwnProperty.call(e,a)});o.subelements("ul,li,h1,h2,h3,a,b,p,input,textarea,summary,details,option,component").map(function(e){return n.map(function(t){var n=e.innerHTML;return n=n.replace(new RegExp(`${t[r]}`,"g"),t[a]),e.innerHTML=n,null}),e}),e()})}).call(t).then(function(){d.debug("i18n loaded for component: "+t.name)})}}},_componentHelpers:[],addComponentHelper:function(e){this._componentHelpers.push(e)},runComponentHelpers:function(){if(n){var e=[];e.push(this.i18n_translate.bind(this)),e.push(this.scrollIntoHash.bind(this)),e.push(this.lazyLoadImages.bind(this)),(e=e.concat(this._componentHelpers)).map(function(e){e()})}}}),I("Component")._bindroute.__assigned=!1,E("Controller",Object,{dependencies:[],component:null,routingSelectedAttr:function(e){return this.component.routingSelected.map(function(t){return t[e]}).filter(function(e){return e}).pop()},isTouchable:function(){return"ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0},onpress:function(e,t){try{this.isTouchable()?this.component.body.subelements(e)[0].addEventListener("touchstart",t,{passive:!0}):this.component.body.subelements(e)[0].addEventListener("click",t,{passive:!0})}catch(e){d.debug("No button to assign press event")}},createRoutingController:function(){var e=this.component,t=this.routingSelectedAttr("controllerclass");if(void 0!==t){var n=I(t);void 0!==n&&(e.routingController=L(n,{component:e}),e.routingController.hasOwnProperty.call(e.routingController,"done")&&"function"==typeof e.routingController.done&&e.routingController.done.call(e.routingController))}}}),E("View",Object,{dependencies:[],component:null}),E("Service",Object,{domain:s,basePath:i,url:"",method:"GET",data:{},reload:!1,cached:!1,set:function(e,t){this[e]=t},get:function(e){return this[e]}}),E("JSONService",I("Service"),{method:"GET",cached:!1,headers:{"Content-Type":"application/json",charset:"utf-8"},JSONresponse:null,done:function(e){d.debug("***** RECEIVED RESPONSE:"),d.debug(e.service.template),this.JSONresponse=JSON.parse(e.service.template)}}),E("ConfigService",I("JSONService"),{method:"GET",cached:!1,configFileName:"config.json",headers:{"Content-Type":"application/json",charset:"utf-8"},JSONresponse:null,done:function(e){for(var t in d.debug("***** CONFIG LOADED:"),d.debug(e.service.template),this.JSONresponse=JSON.parse(e.service.template),this.JSONresponse.hasOwnProperty.call(this.JSONresponse,"__encoded__")&&(this.JSONresponse=JSON.parse(I("_Crypt").decrypt(this.JSONresponse.__encoded__,c))),this.JSONresponse)I("CONFIG").set(t,this.JSONresponse[t]);this.configLoaded.call(this)},fail:function(e){this.configLoaded.call(this)},_new_:function(e){this.set("url",this.get("basePath")+this.get("configFileName"))}}),E("VO",Object,{});var B=function(e){var t="";if("default"===e.TPL_SOURCE)for(var n in t="{{COMPONENTS_BASE_PATH}}{{COMPONENT_NAME}}.{{TPLEXTENSION}}",e){e[n];t=t.replace("{{"+n+"}}",e[n])}return t},$=function(t,n){var o=function(t,n){var o=new Promise(function(n,a){if(null===(t.hasOwnProperty.call(t,"container")&&void 0!==t.container&&null!==t.container?t.container:t.body))d.debug("CONTAINER DOESNT EXIST");else{var i=function(e){e.feedComponent();var t={request:u,component:e};n.call(o,t)};d.debug("LOADING COMPONENT DATA {{DATA}} FROM {{URL}}".replace("{{DATA}}",r(t.data)).replace("{{URL}}",t.url));var s=function(){var e=c?0:200;if(u.status===e){var n=u.responseText;d.debug("Data received {{DATA}}".replace("{{DATA}}",r(n))),d.debug("CREATING COMPONENT {{NAME}}".replace("{{NAME}}",t.name)),t.template=n,t.cached&&void 0!==h&&h.save(t.name,t.template),i.call(this,t)}else{var s={request:u,component:t};a.call(o,s)}};if("string"==typeof t.template&&""!==t.template)i.call(this,t);else{var c=!!t.url.startsWith("file:"),u=new XMLHttpRequest;if(c){if("fetch"in e){d.debug("I can use fetch..."),d.debug("It is a file to be loaded, so I will try to use fetch");fetch(t.url).then(e=>{d.debug("I got a response from fetch, so I'll feed the component"),e.text().then(e=>{t.template=e,i.call(this,t)})})}}else try{d.debug("Calling the url of component in async mode."),u.open(t.method,t.url,!0)}catch(e){d.debug("Last try has failed... The component cannot be loaded.")}l||c||u.setRequestHeader("Content-Type","text/html"),c||(u.onload=s);var p=function(n){n=!(void 0===n||!n),d.debug("SENDING THE NORMAL REQUEST  "),n?"fetch"in e||(d.debug("I have to try to load the file using xhr...  "),u.send(null),u.status===XMLHttpRequest.DONE&&s.call(this)):(d.debug("Trying to send the data to the component...  "),u.send(r(t.data)))};if(t.cached&&!c){d.debug("USING CACHE FOR COMPONENT: "+t.name);var h=new f({index:t.cacheIndex,load:function(e){p.call(this,c)},alternate:function(e){"GET"===t.method?(t.template=e.cache.getCached(t.cacheIndex),i.call(this,t)):p.call(this,c)}});global.lastCache=h}else d.debug("NOT USING CACHE FOR COMPONENT: "+t.name),p.call(this,c)}}});return o.then(function(e){var n;return"function"==typeof t.done&&(n=t.done.call(t,e)),Promise.resolve(n)},function(e){var n;return"function"==typeof t.fail&&(n=t.fail.call(t,e)),Promise.reject(n)}).catch(function(e){d.debug("Something wrong loading the component")}),o};return void 0!==n&&n?u(o,arguments):o(t)},J=function(e,t){var o=function(e,t){var n=new Promise(function(t,o){d.debug("LOADING SERVICE DATA {{DATA}} FROM {{URL}}".replace("{{DATA}}",r(e.data)).replace("{{URL}}",e.url));var a=new XMLHttpRequest;a.withCredentials=e.withCredentials;for(var i in a.open(e.method,e.url,!0),e.headers)try{"function"!=typeof e.headers[i]&&a.setRequestHeader(i,e.headers[i])}catch(e){d.debug("Something went wrong when assign the header "+i)}a.onload=function(){if(200===a.status){var i=a.responseText;if(d.debug("Data received {{DATA}}".replace("{{DATA}}",r(i))),d.debug("CREATING SERVICE {{NAME}}".replace("{{NAME}}",e.name)),e.template=i,e.cached&&void 0!==c&&c.save(e.name,e.template),"function"==typeof e.done){var s={request:a,service:e};e.done.call(e,s),t.call(n,s)}}else if("function"==typeof e.fail){s={request:a,service:e};e.fail.call(e,s),o.call(n,s)}};var s=function(){d.debug("SENDING THE NORMAL REQUEST  ");try{a.send(r(e.data))}catch(t){d.debug("SOMETHING WRONG WITH REQUEST  "),o.call(n,{request:a,service:e})}};if(e.cached){var c=new f({index:e.data,load:function(e){s.call(this)},alternate:function(o){if("GET"===e.method){if(e.template=o.cache.getCached(e.name),"function"==typeof e.done){var r={request:a,service:e};e.done.call(e,r),t.call(n,r)}}else s.call(this)}});global.lastCache=c}else s.call(this);return a});return n};return n?void 0!==t&&t?u(o,arguments):o(e):function(e,t){var n=new Promise(function(t,o){var a=new URL(e.url);e.useHTTP2=e.hasOwnProperty.call(e,"useHTTP2")&&e.useHTTP2;try{var i,s;if(e.useHTTP2){d.debug("using http2");var c=require("http2").connect(a.origin);i=Object.assign({":method":e.method,":path":a.pathname},e.options),i=Object.assign(i,e.headers),(u=c.request(i)).setEncoding("utf8")}else{var l=require("request");i=Object.assign({url:e.url,headers:e.headers},e.options);var u=l[e.method.toLowerCase()](i)}d.debug("LOADING SERVICE DATA (non-browser) {{DATA}} FROM {{URL}}".replace("{{DATA}}",r(e.data)).replace("{{URL}}",e.url));var p={http2Client:c,request:u,service:e,responseHeaders:null};if("object"==typeof e.data&&null!==e.data&&e.useHTTP2)try{d.debug("Sending data...");let t=new Buffer(r(e.data));u.write(t)}catch(e){d.debug("It was not possible to send any data")}s="",u.on("response",(e,t)=>{var n=e.headers;d.debug("receiving response..."),p.responseHeaders=n;for(const e in n)d.debug(`${e}: ${n[e]}`);s=""}),u.on("data",e=>{d.debug("receiving data..."),s+=""+e.toString()}),e.useHTTP2&&u.resume(),u.on("end",()=>{d.debug("ending call..."),e.template=s,e.hasOwnProperty.call(e,"useHTTP2")&&e.useHTTP2?c.destroy():u.destroy(),e.done.call(e,p),t.call(n,p)}),e.useHTTP2&&u.end()}catch(t){d.debug(t),e.fail.call(e,t),o.call(n,t)}}).catch(function(t){console.log(t),d.debug("Something happened when trying to call the service: "+e.name),e.fail.call(e,t)});return n}(e)};if(j(J),j($),j(B),j(N),j(r),j(G),j(function(e){return!!("object"==typeof e&&e.hasOwnProperty.call(e,"__classType")&&e.hasOwnProperty.call(e,"__instanceID")&&e.hasOwnProperty.call(e,"__definition")&&void 0!==e.__definition)}),u(function(){E("global",Object,{_GLOBAL:{},set:function(e,t){this._GLOBAL[e]=t},get:function(e,t){var n;return void 0!==this._GLOBAL[e]?n=this._GLOBAL[e]:void 0!==t&&(n=t),n},__start__:function(){var t=function(){n&&(d.debug("Starting to bind routes"),I("Component")._bindroute.call(I("Component")),d.debug("Starting to building components"),global.componentsStack=document.buildComponents.call(document),d.debug("Initializing the service worker"),function(){var e;return n&&(e=new Promise(function(t,n){"serviceWorker"in navigator&&void 0!==I("CONFIG").get("serviceWorkerURI")&&(I("CONFIG").set("serviceWorkerScope",I("CONFIG").get("serviceWorkerScope")?I("CONFIG").get("serviceWorkerScope"):"/"),navigator.serviceWorker.register(I("CONFIG").get("serviceWorkerURI"),{scope:I("CONFIG").get("serviceWorkerScope")}).then(function(n){d.debug("Service Worker Registered"),t.call(e,n)},function(t){d.debug("Error registering Service Worker"),n.call(e,t)}),navigator.serviceWorker.ready.then(function(n){d.debug("Service Worker Ready"),t.call(e,n)},function(t){d.debug("Error loading Service Worker"),n.call(e,t)}))})),e}.call(e).catch(function(){d.debug("error loading the service worker")}))};I("CONFIG").get("useConfigService")?(global.configService=L(I("ConfigService")),global.configService.configLoaded=t,J(global.configService)):t.call(this)}}),Object.defineProperty(global,"PackagesNameList",{set(e){d.debug("PackagesNameList is readonly")},get(){var e=function(t){var n=[];for(var o in t)void 0!==t[o]&&"function"!=typeof t[o]&&t[o].hasOwnProperty.call(t[o],"length")&&t[o].length>0&&(n.push(o),n=n.concat(e(t[o])));return n};return e(C)}}),Object.defineProperty(global,"PackagesList",{set(e){d.debug("PackagesList is readonly")},get:()=>global.PackagesNameList.map(function(e){let t,n=x(e);return n&&(t={packageName:e,classesList:n.filter(function(e){return G(e)})}),t}).filter(function(e){return void 0!==e})}),Object.defineProperty(global,"ClassesList",{set(e){d.debug("ClassesList is readonly")},get(){var e=[];return global.PackagesList.map(function(t){return e=e.concat(t.classesList.map(function(e){return{packageName:t.packageName,className:t.packageName+"."+e.__definition.__classType,classFactory:e}})),t}),e}}),Object.defineProperty(global,"ClassesNameList",{set(e){d.debug("ClassesNameList is readonly")},get:()=>global.ClassesList.map(function(e){return e.className})}),n&&(E("GLOBAL",O.global),j(I("GLOBAL"))),j(global),I("CONFIG").get("useSDK")&&function(){var e=I("CONFIG").get("remoteImportsPath"),t=!I("CONFIG").get("useLocalSDK");I("CONFIG").set("remoteImportsPath",I("CONFIG").get("remoteSDKPath"));var o=!1,r="QCObjects-SDK";n?o=!0:null!==F("qcobjects-sdk")?(r="qcobjects-sdk",o=!0):(r="node_modules/qcobjects-sdk/QCObjects-SDK",o=!0);o?(d.info("Importing SDK... "+r),D(r,function(){t?d.debug("QCObjects-SDK.js loaded from remote location"):d.debug("QCObjects-SDK.js loaded from local"),I("CONFIG").set("remoteImportsPath",e)},t)):d.debug("SDK has not been imported as it is not available at the moment")}.call(null)},null),n){Element.prototype.buildComponents=function(e=!1){var n=e?"component":"component:not([loaded])",r=this,a=function(e){for(var i=[],s=0;s<e.length;s++){var c={};e[s].getAttributeNames().filter(function(e){return e.startsWith("data-")}).map(function(e){return e.split("-")[1]}).map(function(t){c[t]=e[s].getAttribute("data-"+t)});var l=function(){var e=this.body.getAttribute("viewClass"),t=I(e);void 0!==t&&(this.view=L(t,{component:this}),this.view.hasOwnProperty.call(this.view,"done")&&"function"==typeof this.view.done&&this.view.done.call(this.view));var o=this.body.getAttribute("controllerClass");o||(o="Controller");var i=I(o);void 0!==i&&(this.controller=L(i,{component:this}),this.controller.hasOwnProperty.call(this.controller,"done")&&"function"==typeof this.controller.done&&this.controller.done.call(this.controller),this.controller.hasOwnProperty.call(this.controller,"createRoutingController")&&this.controller.createRoutingController.call(this.controller));var s=this.body.getAttribute("effectClass"),c=I(s);void 0!==c&&(this.effect=L(c,{component:this}),this.effect.apply(this.effect.defaultParams)),this.shadowed&&void 0!==this.shadowRoot?this.subcomponents=a(this.shadowRoot.subelements(n)):this.subcomponents=a(this.body.subelements(n)),I("CONFIG").get("overrideComponentTag")&&(this.body.outerHTML=this.body.innerHTML),this.body.setAttribute("loaded",!0),this.runComponentHelpers(),100*k("component[loaded=true]").length/k("component:not([template-source=none])").length>=100&&r.dispatchEvent(new CustomEvent("componentsloaded",{detail:{lastComponent:this}}))};t(l);var u=null===e[s].getAttribute("shadowed"),d="true"===e[s].getAttribute("shadowed"),p=null===e[s].getAttribute("cached"),h="true"===e[s].getAttribute("cached"),f=void 0!==I("CONFIG").get("tplextension")?I("CONFIG").get("tplextension"):"html";f=null!==e[s].getAttribute("tplextension")?e[s].getAttribute("tplextension"):f;var g,m=null===e[s].getAttribute("template-source")?"default":e[s].getAttribute("template-source"),y=e[s].getAttribute("name"),b=null!==e[s].getAttribute("componentClass")?e[s].getAttribute("componentClass"):"Component",v=I("CONFIG").get("preserveComponentBodyTag")?null!==y?"com.qcobjects.components."+y+".ComponentBody":"com.qcobjects.components.ComponentBody":b;y=null!==y?y:I(v)&&I(v).hasOwnProperty.call(I(v),"name")?I(v).name:"",g=B({COMPONENTS_BASE_PATH:I("CONFIG").get("componentsBasePath"),COMPONENT_NAME:y,TPLEXTENSION:f,TPL_SOURCE:m}),I("CONFIG").get("preserveComponentBodyTag")&&x(""!==y?"com.qcobjects.components."+y:"com.qcobjects.components",[E("ComponentBody",I("Component"),{name:y,tplsource:m,tplextension:f,reload:!0})]);var _=I(v),O=u?_&&_.shadowed||I("Component").shadowed:d,C={name:y,data:c,cached:p?I("Component").cached:h,shadowed:O,tplextension:f,body:I("CONFIG").get("preserveComponentBodyTag")?o("componentBody"):e[s],templateURI:g,tplsource:m,subcomponents:[]};void 0!==y&&""!==y&&null!==y||delete C.name,""===g&&delete C.templateURI;var w=L(_,C);I("CONFIG").get("preserveComponentBodyTag")&&e[s].append(w),w.done=l,i.push(w)}return i},i=r.subelements(n);return a(i)},HTMLDocument.prototype.buildComponents=Element.prototype.buildComponents,HTMLElement.prototype.buildComponents=Element.prototype.buildComponents;var Q=class extends HTMLElement{constructor(){super();const e=this,t=e.nodeName.toLowerCase(),n=o("component");n.setAttribute("name",t),e.hasAttribute("shadowed")&&"false"===e.getAttribute("shadowed")?(n.setAttribute("shadowed","false"),e.removeAttribute("shadowed")):(n.setAttribute("shadowed","true"),e.hasAttribute("shadowed")&&e.removeAttribute("shadowed")),e.hasAttribute("componentClass")&&(n.setAttribute("componentClass",e.getAttribute("componentClass")),e.removeAttribute("componentClass")),e.hasAttribute("controllerClass")&&(n.setAttribute("controllerClass",e.getAttribute("controllerClass")),e.removeAttribute("controllerClass")),e.hasAttribute("viewClass")&&(n.setAttribute("viewClass",e.getAttribute("viewClass")),e.removeAttribute("viewClass")),e.hasAttribute("tplextension")&&(n.setAttribute("tplextension",e.getAttribute("tplextension")),e.removeAttribute("tplextension")),e.hasAttribute("template-source")&&(n.setAttribute("template-source",e.getAttribute("template-source")),e.removeAttribute("template-source")),e.hasAttribute("data")&&(n.setAttribute("data",e.getAttribute("data")),e.removeAttribute("data")),e.getAttributeNames().filter(function(e){return e.startsWith("data-")}).map(function(e){return e.split("-")[1]}).map(function(t){n.setAttribute("data-"+t,e.getAttribute("data-"+t)),e.removeAttribute("data-"+t)}),[...e.children].map(function(e){n.appendChild(e.cloneNode(!0)),e.remove()}),e.append(n)}};j(Q);var K=function(e){customElements.define(e,Q)};j(K),j(function(){[...arguments].slice(1).filter(function(e){return"string"==typeof e}).map(function(e){K(e)})})}n||E("BackendMicroservice",Object,{domain:s,basePath:i,body:null,stream:null,request:null,cors:function(){if(this.route.cors){let{allow_origins:e,allow_credentials:t,allow_methods:n,allow_headers:o}=this.route.cors;if("object"!=typeof this.headers&&(this.headers={}),void 0!==e)if("*"===e||void 0===this.request.headers.origin||-1!==[...e].indexOf(this.request.headers.origin))this.headers["Access-Control-Allow-Origin"]="*";else{d.debug("Origin is not allowed: "+this.request.headers.origin),d.debug("Forcing to finish the response..."),this.body={};try{this.done()}catch(e){}}else this.headers["Access-Control-Allow-Origin"]="*";this.headers["Access-Control-Allow-Credentials"]=void 0!==t?t.toString():"true",this.headers["Access-Control-Allow-Methods"]=void 0!==n?[...n].join(","):"GET, OPTIONS, POST",this.headers["Access-Control-Allow-Headers"]=void 0!==o?[...o].join(","):"*"}},_new_:function(e){d.debug("Executing BackendMicroservice ");let t=this;t.body=null;let n=t.request;this.cors();let o=e.stream;t.stream=o,o.on("data",e=>{var o=n.method.toLowerCase(),r={post:t.post};r.hasOwnProperty.call(r,o)&&r[o].call(t,e)});var r=n.method.toLowerCase(),a={get:t.get,head:t.head,put:t.put,delete:t.delete,connect:t.connect,options:t.options,trace:t.trace,patch:t.patch};a.hasOwnProperty.call(a,r)&&a[r].call(t)},head:function(e){this.done()},get:function(e){this.done()},post:function(e){this.done()},put:function(e){this.done()},delete:function(e){this.done()},connect:function(e){this.done()},options:function(e){this.done()},trace:function(e){this.done()},patch:function(e){this.done()},finishWithBody:function(e){try{e.write(r(this.body)),e.end()}catch(e){d.debug("Something wrong writing the response for microservice"+e.toString())}},done:function(){var e=this.stream;e.respond(this.headers),null!==this.body&&this.finishWithBody.call(this,e)}}),E("SourceJS",Object,{domain:s,basePath:i,body:o("script"),type:"text/javascript",containerTag:"body",url:"",data:{},async:!1,external:!1,set:function(e,t){this[e]=t},get:function(e){return this[e]},status:!1,done:function(){},fail:function(){},rebuild:function(){try{document.getElementsByTagName(this.containerTag)[0].appendChild(function(e,t,n){return e.type=n.type,e.src=t,e.crossOrigin=n.hasOwnProperty.call(n,"crossOrigin")?n.crossOrigin:"anonymous",e.async=n.async,e.onreadystatechange=function(){"complete"===this.readyState&&n.done.call(n)},e.onload=function(e){n.status=!0,n.done.call(n,e)},e.onerror=function(e){n.status=!1,n.fail.call(n,e)},n.body=e,e}.call(this,o("script"),this.external?this.url:this.basePath+this.url,this))}catch(e){this.status=!1,this.fail.call(this,e)}},Cast:function(e){return P(this,e)},_new_:function(e){this.__new__(e),this.rebuild()}}),E("SourceCSS",Object,{domain:s,basePath:i,body:o("link"),url:"",data:{},async:!1,external:!1,set:function(e,t){this[e]=t},get:function(e){return this[e]},done:function(){},rebuild:function(){n&&window.document.getElementsByTagName("head")[0].appendChild(function(e,t,n){return e.type="text/css",e.rel="stylesheet",e.href=t,e.crossOrigin="anonymous",e.onreadystatechange=function(){"complete"===this.readyState&&n.done.call(n)},e.onload=n.done,n.body=e,e}.call(this,o("link"),this.external?this.url:this.basePath+this.url,this))},Cast:function(e){return P(this,e)},_new_:function(e){this.__new__(e),this.rebuild()}});var V=function(e){return isNaN(e)?new Number(0):new Number(e)};Array.prototype.unique=function(){return this.filter(function(e,t,n){return n.indexOf(e)===t})},Array.unique=function(e){return e.unique()},t(Array.unique),t(Array.prototype.unique),Array.prototype.table=function(){console.table(this)},Array.table=function(e){return e.table()},t(Array.table),t(Array.prototype.table),Array.prototype.sum=function(){return this.reduce(function(e,t){return V(e)+V(t)},0)},Array.sum=function(e){return e.sum()},t(Array.sum),t(Array.prototype.sum),Array.prototype.avg=function(){return this.length<1?0:this.reduce(function(e,t){return(V(e)+V(t))/2})},Array.avg=function(e){return e.avg()},t(Array.avg),t(Array.prototype.avg),Array.prototype.min=function(){return this.reduce(function(e,t){return V(e)<=V(t)?e:t},1/0)},Array.min=function(e){return e.min()},t(Array.min),t(Array.prototype.min),Array.prototype.max=function(){return this.reduce(function(e,t){return V(e)>=V(t)?e:t},0)},Array.max=function(e){return e.max()},t(Array.max),t(Array.prototype.max),Array.prototype.sortBy=function(e,t=!0){var n=t?function(t,n){return n[e]<t[e]?1:-1}:function(t,n){return n[e]>t[e]?1:-1};return this.sort(n)},Array.sortBy=function(e,t,n=!0){return e.sortBy(t,n)},t(Array.sortBy),t(Array.prototype.sortBy),Array.matrix=function(e,t=0){return Array.from({length:e},function(e){return t})},t(Array.matrix),Array.matrix2d=function(e,t=0){var n=function(e){return t};return Array.from({length:e},function(t){return Array.from({length:e},n)})},t(Array.matrix2d),Array.matrix3d=function(e,t=0){var n=function(n){return Array.from({length:e},function(){return t})};return Array.from({length:e},function(t){return Array.from({length:e},n)})},t(Array.matrix3d),e.range=function(e,t=0,n=1){return 0!==t&&void 0!==t||(t=e,e=0),Array.from({length:(t-e)/n+1},function(t,o){return e+o*n})},t(e.range),String.prototype.list=function(){var t=this;return e.range(0,t.length-1).map(function(e){return t[e]})},t(String.prototype.list),E("ArrayList",Array,[]),I("ArrayList").matrix=Array.matrix,I("ArrayList").matrix2d=Array.matrix2d,I("ArrayList").matrix3d=Array.matrix3d,t(I("ArrayList").matrix),t(I("ArrayList").matrix2d),t(I("ArrayList").matrix3d),E("ArrayCollection",Object,{source:L(I("ArrayList"),[]),changed:function(e,t){d.debug("VALUE CHANGED"),d.debug(e),d.debug(t)},push:function(e){d.debug("VALUE ADDED"),d.debug(e),this.source.push(e)},pop:function(e){d.debug("VALUE POPPED"),d.debug(e),this.source.pop(e)},_new_:function(e){var t=this,n=0;for(var o in t.source=L(I("ArrayList"),e),t.source)isNaN(o)||(d.debug("binding "+o.toString()),function(e){Object.defineProperty(t,e,{set(n){d.debug("setting "+e+"="+n),t.source[e]=n,t.changed(e,n)},get:()=>t.source[e]})}(o),n++);t.source.length=n,Object.defineProperty(t,"length",{get:()=>t.source.length})}}),E("Effect",{duration:1e3,animate:function({timing:e,draw:t,duration:n}){let o=performance.now();requestAnimationFrame(function r(a){let i=(a-o)/n;i>1&&(i=1);let s=e(i);t(Math.round(100*s)),i<1?requestAnimationFrame(r):void 0!==this&&this.hasOwnProperty.call(this,"done")&&"function"===(typeof this.done).toLowerCase()&&this.done.call(this)})}}),E("TransitionEffect",I("Effect"),{duration:385,defaultParams:{alphaFrom:0,alphaTo:1,angleFrom:180,angleTo:0,radiusFrom:0,radiusTo:30,scaleFrom:0,scaleTo:1},fitToHeight:!1,fitToWidth:!1,effects:[],_new_:function(e){d.info("DECLARING TransitionEffect  "),this.component.defaultParams=this.defaultParams},apply:function({alphaFrom:e,alphaTo:t,angleFrom:n,angleTo:o,radiusFrom:r,radiusTo:a,scaleFrom:i,scaleTo:s}){var c=this;d.info("EXECUTING TransitionEffect  "),c.fitToHeight&&(c.component.body.height=c.component.body.offsetParent.scrollHeight),c.fitToWidth&&(c.component.body.width=c.component.body.offsetParent.scrollWidth),c.component.body.style.display="block",c.effects.map(function(l,u){var d=S(l,"apply"),p=[c.component.body].concat(Object.values({alphaFrom:e,alphaTo:t,angleFrom:n,angleTo:o,radiusFrom:r,radiusTo:a,scaleFrom:i,scaleTo:s}));d.apply(c,p)})}}),E("Timer",{duration:1e3,alive:!0,thread:function({timing:e,intervalInterceptor:t,duration:n}){var o=this;let r=performance.now();requestAnimationFrame(function a(i){let s=i-r,c=s/n;c>1&&(c=1);let l=e(c,s);t(Math.round(100*l)),(c<1||-1===n)&&o.alive&&requestAnimationFrame(a)})}}),E("Toggle",I("InheritClass"),{_toggle:!1,_inverse:!0,_positive:null,_negative:null,_dispatched:null,_args:{},changeToggle:function(){this._toggle=!this._toggle},_new_:function({positive:e,negative:t,args:n}){this._positive=e,this._negative=t,this._args=n},fire:function(){var e=this,t=new Promise(function(n,o){"function"==typeof e._positive&&"function"==typeof e._negative?(e._inverse?e._dispatched=e._toggle?e._negative.bind(e):e._positive.bind(e):e._dispatched=e._toggle?e._positive.bind(e):e._negative.bind(e),e._dispatched.call(e,e._args),n.call(t,e)):(d.debug("Toggle functions are not declared"),o.call(t,e))}).then(function(e){e.changeToggle()}).catch(function(e){d.debug(e.toString())});return t}}),H(function(){I("CONFIG").get("useSDK")||global.__start__()}),j(j),j(D),j(x),j(E),j(L),j(k),j(H),j(q),j(n),j(function(e){var t=[];for(var n in e)"function"===(typeof e[n]).toLowerCase()&&t.push(e[n]);return t}),n||("undefined"!=typeof global&&global.hasOwnProperty.call(global,"_fireAsyncLoad")&&global._fireAsyncLoad.call(this),"undefined"!=typeof global&&global.hasOwnProperty.call(global,"onload")&&global.onload.call(this)),n&&u(function(){H(function(){window.onpopstate=function(e){e.stopImmediatePropagation(),e.stopPropagation(),I("Component").route()},k("*").map(function(e){return e.addEventListener("scroll",function(e){e.preventDefault();var t=Math.round(100*e.target.scrollTop/e.target.scrollHeight),n=Math.round(100*e.target.scrollLeft/e.target.scrollWidth),o=new CustomEvent("scrollpercent",{detail:{percentX:n,percentY:t}});e.target.dispatchEvent(o);var r="defaultscroll";switch(!0){case 0===t:r="percentY0";break;case 25===t:r="percentY25";break;case 50===t:r="percentY50";break;case 75===t:r="percentY75";break;case 90===t:r="percentY90"}var a=new CustomEvent(r,{detail:{percentX:n,percentY:t}});e.target.dispatchEvent(a)}),null})})},null)}).call(null,"object"==typeof module&&"object"==typeof module.exports?module.exports=global:"object"==typeof global?global:"object"==typeof window?window:{});