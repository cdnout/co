!function(P,I){"use strict";provide(["/demand/validator/isObject","/demand/validator/isInstanceOf","/demand/validator/isTypeOf","/demand/function/uuid","/demand/function/iterate","/demand/descriptor","./event","../hooks/css","../support/method"],function(r,i,n,a,e,o,f,s,t){var u=I.body||I.getElementsByTagName("body")[0],d=Array.prototype.concat,c=Array.prototype.slice,h=Object.defineProperty,l=Object.defineProperties,p=I.getElementsByTagName("head")[0],g=null,v="undefined",m="string",y="textContent"in I.createElement("a")?"textContent":"innerText",b=t("matches",u)||t("matchesSelector",u),S=/^<(\w+)\s*\/>$/,C=/ +/g,A=/^\s*^/,E=n(p.previousElementSibling,v)?function(){for(var t=this;t=t.previousSibling;)if(1===t.nodeType)return t}:function(){return this.previousElementSibling},T=n(p.nextElementSibling,v)?function(){for(var t=this;t=t.nextSibling;)if(1===t.nodeType)return t}:function(){return this.nextElementSibling},N={},w=!1;function B(t){return w||"boolean"==typeof t?t:t&&t.capture}function L(e){if("string"==typeof e)try{e=S.test(e)?I.createElement(e.replace(S,"$1").toLowerCase()):I.querySelector(e)}catch(t){e=g}if(!e)throw new Error("Element could not be resolved");return e}function x(t){return d.apply([],c.call(t)).join(" ").split(C)}function j(t,e,n,i,r){var o=!(i&&1===i),s=!!o&&[];for(r=!o&&r;t=e.call(t);)if(1===t.nodeType){if(!n||t[b](n)){if(!o)return t;s.push(t)}if(r)break}return s}function H(t,e,n,i){var r=!(n&&1===n),o=!!r&&[];for(i=!r&&i;t=t.parentNode;)if(1===t.nodeType){if(!e||t[b](e)){if(!r)return t;o.push(t)}if(i)break}return o}function O(t,e,n){var i;return(i=(t=L(t)).uuid)||(i=a(),N[i]={},h(t,"uuid",new o(i))),l(this,{uuid:new o(i),type:new o(t===P?"#window":t.nodeName),node:new o(t)}),r(e)&&this.setAttributes(e),r(n)&&this.setStyles(n),this}return function(){function t(){}var e,n=""+ +new Date;try{e=Object.defineProperty({},"passive",{get:function(){w=!0}}),P.addEventListener(n,t,e),P.removeEventListener(n,t,e)}catch(t){}}(),O.prototype={clone:function(){return new O(this.node.cloneNode(!0))},focus:function(){return this.node.focus(),this},blur:function(){return this.node.blur(),this},getPosition:function(){var t=this.node.getBoundingClientRect();return{left:t.left+u.scrollLeft,top:t.top+u.scrollTop}},getOffset:function(t){var e=this.node,n=t?e.getBoundingClientRect():null;return{left:t?n.left:e.offsetLeft,top:t?n.top:e.offsetTop}},getWidth:function(t){var e=this.node,n=e.offsetWidth;return t&&(e=getComputedStyle(e),n+=parseInt(e.marginLeft)+parseInt(e.marginRight)),n},getHeight:function(t){var e=this.node,n=e.offsetHeight;return t&&(e=getComputedStyle(e),n+=parseInt(e.marginTop)+parseInt(e.marginBottom)),n},getContent:function(t){var e=this.node;return t?e.innerHTML:e[y]},getAttribute:function(t){if(n(t,m))return this.node.getAttribute(t)},getAttributes:function(){for(var t,e={},n=x(arguments),i=0;t=n[i];i++)e[t]=this.node.getAttribute(t);return e},getStyle:function(t){if(n(t,m))return s.process("get",this.node,t)},getStyles:function(){for(var t,e={},n=x(arguments),i=0;t=n[i];i++)e[t]=s.process("get",this.node,t);return e},getSiblingBefore:function(t,e){return j(this.node,E,t,1,e)},getSiblingAfter:function(t,e){return j(this.node,T,t,1,e)},getSiblings:function(t){return this.getSiblingsBefore(t).concat(this.getSiblingsAfter(t))},getSiblingsBefore:function(t){return j(this.node,E,t)},getSiblingsAfter:function(t){return j(this.node,T,t)},getChildren:function(t){var e,n,i,r,o=this.node;if(t)A.test(t)?(e=o.uuid,o.setAttribute("nucleus-uuid",e),t='[nucleus-uuid="'+e+'"] '+t,n=c.call(o.parentNode.querySelectorAll(t)),o.removeAttribute("nucleus-uuid")):n=c.call(o.querySelectorAll(t));else for(n=[],i=0;r=o.childNodes[i];i++)1===r.nodeType&&n.push(r);return n},getParent:function(t,e){return H(this.node,t,1,e)},getParents:function(t){return H(this.node,t)},hasChild:function(t){var e=this.node;return e!==t&&e.contains(t.node||t)},hasClass:function(t){return!!t&&new RegExp("(?:^|\\s)"+t+"(?:\\s|$)").test(this.node.className)},isVisible:function(){var t=this.node;return!(t.offsetWidth<=0&&t.offsetHeight<=0||"hidden"===this.getStyle("visibility")||this.getStyle("opacity")<=0)},setContent:function(t,e){var n=this.node;return e?n.innerHTML=t:n[y]=t,this},setAttribute:function(t,e){return n(t,m)&&this.node.setAttribute(t,e),this},setAttributes:function(t){var n=this;return e(t,function(t,e){n.setAttribute(t,e)}),n},removeAttribute:function(t){return n(t,m)&&this.node.removeAttribute(t),this},removeAttributes:function(){for(var t,e=x(arguments),n=0;t=e[n];n++)this.removeAttribute(t);return this},setStyle:function(t,e){return n(t,m)&&s.process("set",this.node,t,e),this},setStyles:function(t){var n=this;return e(t,function(t,e){s.process("set",n.node,t,e)}),n},removeStyle:function(t){return n(t,m)&&this.setStyle(t,""),this},removeStyles:function(){for(var t,e=x(arguments),n=0;t=e[n];n++)this.setStyle(t,"");return this},addClass:function(t){return t&&!this.hasClass(t)&&(this.node.className+=this.node.className?" "+t:t),this},removeClass:function(t){return t&&this.hasClass(t)&&(this.node.className=this.node.className.replace(new RegExp("(?:^|\\s)"+t+"(?!\\S)"),"").trim()),this},toggleClass:function(t){return t&&(this.hasClass(t)?this.removeClass(t):this.addClass(t)),this},prepend:function(e){var n=this.node;if(e)try{e=i(e,O)?e.node:L(e),n.firstChild?n.insertBefore(e,n.firstChild):this.append(e)}catch(t){n.insertAdjacentHTML("afterBegin",e)}return this},append:function(e){var n=this.node;if(e)try{n.appendChild(i(e,O)?e.node:L(e))}catch(t){n.insertAdjacentHTML("beforeEnd",e)}return this},prependTo:function(t){var e=this.node;return t&&((t=t.node||L(t)).firstChild?t.insertBefore(e,t.firstChild):this.appendTo(t)),this},appendTo:function(t){return t&&(t.node||L(t)).appendChild(this.node),this},insertBefore:function(t){var e=this.node;return t&&(t=t.node||L(t)).parentNode.insertBefore(e,t),this},insertAfter:function(t){var e=this.node;return t&&((t=t.node||L(t)).nextSibling?t.parentNode.insertBefore(e,t.nextSibling):this.appendTo(t.parentNode)),this},replace:function(t){var e=this.node;return t&&(t=t.node||L(t)).parentNode.replaceChild(e,t),this},replaceWith:function(t){var e=this.node;return t&&(t=i(t,O)?t.node:L(t),e.parentNode.replaceChild(t,e)),this},detach:function(){var t=this.node;return t.parentNode&&t.parentNode.removeChild(t),this},on:function(t){var e,n=4===arguments.length||"string"==typeof arguments[1]?arguments[1]:g,i=4===arguments.length||"function"==typeof arguments[2]?arguments[2]:arguments[1],r=B(3<arguments.length?arguments[3]:arguments[2]),o=i.uuid||(i.uuid=a()),s=0;for(t=t.split(C);e=t[s];s++){var u=e+"-"+o,d=function(t){(t=new f(t)).isPropagationStopped||(t.uuid=a(),n&&!function(t,e){for(var n,i=0;n=t.path[i];i++){if(n[b]&&n[b](e))return t.isDelegate=!0,t.currentTarget=n,1;if(n===t.currentTarget)break}}(t,n)||i.call(t.currentTarget,t,t.originalEvent.detail))};d.type=e,N[this.uuid][u]=d,this.node.addEventListener(e,d,r)}return this},one:function(e){var n=this,t=5===arguments.length||"string"==typeof arguments[1]?arguments[1]:g,i=5===arguments.length||"function"==typeof arguments[2]?arguments[2]:arguments[1],r=B(3<arguments.length?arguments[3]:arguments[2]),o=!1!==(4<arguments.length?arguments[4]:arguments[3]),s=function(t){n.off(!0==o?t.type:e,s,r),i.call(this,t,t.originalEvent.detail)};return i.uuid=s.uuid=a(),t?n.on(e,t,s,r):n.on(e,s,r),n},off:function(t,e,n){var i,r,o,s=this.node,u=0;for(n=B(n),t=t.split(" ");i=t[u];u++)(o=(r=e.uuid&&i+"-"+e.uuid||g)&&N[this.uuid][r]||g)?(s.removeEventListener(i,o,n),delete N[this.uuid][r]):s.removeEventListener(i,e,n);return this},emit:function(t,e){return function(t,e){var n;(n=I.createEvent("CustomEvent")).initCustomEvent(t,"load"!==t&&"resize"!==t,"load"!==t&&"resize"!==t,e),this.node.dispatchEvent(n)}.call(this,t,e),this}},O})}(this,document);