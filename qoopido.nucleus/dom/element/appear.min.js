!function(b,v,w){"use strict";if("CSS1Compat"!==v.compatMode)throw new Error("Browser needs to be in standards mode");provide(["/demand/weakmap","../element","../../function/merge","../../function/debounce"],function(t,i,n,o){var r=v.documentElement,s=new i(b),a={},c=new t,u=[],d="resize orientationchange",h="appear",l="disappear";function e(){a.left=0,a.top=0,a.right=b.innerWidth||r.clientWidth,a.bottom=b.innerHeight||r.clientHeight}function g(){var t=c.get(this),e=t.settings,i=t.boundaries,n=e.threshold,t=void 0!==n?n:r.clientWidth*e.auto,e=void 0!==n?n:r.clientHeight*e.auto;i.left=a.left-t,i.top=a.top-e,i.right=a.right+t,i.bottom=a.bottom+e}function f(t,e){t=t.getBoundingClientRect();return!(t.right<=e.left||t.bottom<=e.top||t.left>=e.right||t.top>=e.bottom)}function m(){var t=this.node,e=c.get(this);return f(t,a)?2:f(t,e.boundaries)?1:0}function p(t,e){t=i.call(this,t);return"auto"===(e=n({},p.settings,e)).threshold&&delete e.threshold,c.set(t,{settings:e,boundaries:{},state:-1}),s.on(d,o(g.bind(t))),g.call(t),u.push(t),t}return s.on(d,o(e)),e(),w(function(){for(var t,e,i,n,o=0;t=u[o];o++)if(!(i=(e=c.get(t)).settings).visibility||t.isVisible()){if((n=m.call(t))!==e.state){switch(n){case 0:t.emit(l,{priority:1});break;case 1:t.emit(e.state<=0?h:l,{priority:2});break;case 2:t.emit(h,{priority:1})}e.state=n}i.recur||2!==n||(u.splice(o,1),o--)}},1e3/30),p.settings={threshold:"auto",recur:!0,auto:1,visibility:!0},p.extends(i)})}(this,document,setInterval);