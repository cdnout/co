!function(n,g){"use strict";provide(["/demand/weakmap","/demand/pledge","/demand/validator/isObject","/demand/function/iterate","../url","../function/merge"],function(e,l,p,h,f,r){var m="XDomainRequest"in n&&n.XDomainRequest||g,T=new e;function t(e){var t,n=T.get(this),r="string"==typeof n.data,a=n.settings,s=n.url,i=r?n.data:function n(e,r,a){var t,s=0;if(r=r||"",a=a||{},Array.isArray(e))for(s=0;void 0!==(t=e[s]);s++)n(t,r+"["+s+"]",a);else p(e)?h(e,function(e,t){n(t,r?r+"["+e+"]":e,a)}):r&&void 0!==e&&(a[r]=e);return a}(n.data),o=new(s.local?g:m),u=l.defer(),c=function(){this.readyState<4&&this.abort()}.bind(o),d=a.timeout;return i&&"GET"===e&&(r?s.parameter=i:h(i,s.parameter.set,s),i=null),a.cache||s.parameter.set("nucleus",+new Date),i&&!r&&(n=i,r=new f("/"),h(n,r.parameter.set,r),i=r.search.substr(1)),p(a.xhrOptions)&&h(a.xhrOptions,function(e,t){o[e]=t}),o.ontimeout=o.onerror=o.onabort=function(){u.reject(o)},o.onprogress=o.onreadystatechange=function(){clearTimeout(t),t=setTimeout(c,d)},o.onload=function(){t=clearTimeout(t),"status"in o&&200!==o.status?u.reject(o):u.resolve(o.responseText,o)},o.open(e,s.href,!0),o.setRequestHeader&&(o.setRequestHeader("Accept",a.accept),i&&"GET"!==e&&o.setRequestHeader("Content-Type",a.contentType),p(a.header)&&h(a.header,function(e,t){o.setRequestHeader(e,t)})),o.send(i),t=setTimeout(c,d),u.pledge}function a(e,t,n){return T.set(this,{settings:r({},a.settings,n),url:new f(e),data:t}),this}return a.prototype={get:function(){return t.call(this,"GET")},post:function(){return t.call(this,"POST")},put:function(){return t.call(this,"PUT")},patch:function(){return t.call(this,"PATCH")},delete:function(){return t.call(this,"DELETE")},head:function(){return t.call(this,"HEAD")}},a.settings={accept:"*/*",timeout:8e3,async:!0,cache:!1,username:null,password:null,contentType:"application/x-www-form-urlencoded; charset=UTF-8",header:{"x-requested-with":"XMLHttpRequest"},xhrOptions:{}},a})}(this,XMLHttpRequest);