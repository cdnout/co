!function(v){"use strict";provide(["/demand/abstract/uuid","/demand/descriptor","/demand/function/iterate"],function(i,u,n){var e,s=Object.defineProperties,o={},t=/^\//,a=/[?&]?([^=]+)=([^&]*)/g,h=/%20/g,d=/%5B/g,c=/%5D/g,r=new RegExp("^"+((e=v.createElement("a")).href="/",e.href.slice(0,-1)),"i"),p={"http:":/:80$/,"https:":/:443$/,"ftp:":/:21$/};function f(e,t){if(e=o[e])return e.link[t]}function l(e,t,r){(e=o[e])&&(e.link[t]=r)}function m(e){s(this,{uuid:new u(e)}),m.update(this)}function g(e){var t=i.call(this),r=v.createElement("a");return r.href=e,o[t.uuid]={link:r,parameter:{}},s(t,{toString:new u(function(){return r.toString()}),valueOf:new u(function(){return r.valueOf()}),parameter:new u(new m(t.uuid))}),t}return m.prototype={get:function(e){return o[this.uuid].parameter[e]},set:function(e,t){o[this.uuid].parameter[e]=t,m.serialize(this)},remove:function(e){delete o[this.uuid].parameter[e],m.serialize(this)}},m.update=function(e){var t,e=o[e.uuid],r=e.parameter,i=e.link.search.split("+").join(" ");for(n(r,function(e){delete r[e]});t=a.exec(i);)r[decodeURIComponent(t[1])]=decodeURIComponent(t[2])},m.serialize=function(e){var t=o[e.uuid],e=t.parameter,r="";n(e,function(e,t){r+=(r?"&":"?")+encodeURIComponent(e)+"="+encodeURIComponent(t)}),t.link.search=r.replace(h,"+").replace(d,"[").replace(c,"]")},g.prototype={get local(){var e;if(e=f(this.uuid,"href"))return r.test(e)},get href(){return f(this.uuid,"href")},set href(e){l(this.uuid,"href",e)},get origin(){var e=this;return f(e.uuid,"origin")||e.protocol+"//"+e.host},get protocol(){return f(this.uuid,"protocol")},set protocol(e){l(this.uuid,"protocol",e)},get username(){return f(this.uuid,"username")},set username(e){l(this.uuid,"username",e)},get password(){return f(this.uuid,"password")},set password(e){l(this.uuid,"password",e)},get host(){var e,t;if(e=f(this.uuid,"host"))return t=f(this.uuid,"protocol"),p[t]?e.replace(p[t],""):e},set host(e){l(this.uuid,"host",e)},get hostname(){return f(this.uuid,"hostname")},set hostname(e){l(this.uuid,"hostname",e)},get port(){return f(this.uuid,"port")},set port(e){l(this.uuid,"port",e)},get pathname(){var e;if(e=f(this.uuid,"pathname"))return t.test(e)?e:"/"+e},set pathname(e){l(this.uuid,"pathname",e)},get search(){return f(this.uuid,"search")},set search(e){l(this.uuid,"search",e),m.update.call(this)},get hash(){return f(this.uuid,"hash")},set hash(e){l(this.uuid,"hash",e)}},g.extends(i)})}(document);