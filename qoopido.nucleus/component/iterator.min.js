!function(){"use strict";provide(["/demand/weakmap","../emitter","../function/merge"],function(t,i,s){var r=new t;function e(t,e){if((t=r.get(t))&&t.data)return t.data[e]}function u(t,e){var n=i.call(this);return r.set(n,{settings:s({},u.settings,e),index:null,data:null}),t&&n.setData(t),n}return u.prototype={get length(){return e(this,"length")||0},get index(){return function(t){if(t=r.get(t))return t.index}(this)},get item(){return e(this,this.index)},setData:function(t){var e,n,i=this;return"object"==typeof t&&t.length&&(n=(e=r.get(i)).settings,e.data=t,null!==n.initial&&i.seek(n.initial)),i},seek:function(t){var e=r.get(this);return(t=parseInt(t,10))!==e.index&&void 0!==e.data[t]&&(e.index=t),this},first:function(){return this.seek(0)},last:function(){return this.seek(this.length-1)},previous:function(){var t=this,e=r.get(t).settings,n=!0===e.loop?(t.index-1)%t.length:t.index-1;return n=!0===e.loop&&n<0?t.length+n:n,t.seek(n)},next:function(){var t=this,e=!0===r.get(t).settings.loop?(t.index+1)%t.length:t.index+1;return t.seek(e)}},u.settings={loop:!0,initial:0},u.extends(i)})}();