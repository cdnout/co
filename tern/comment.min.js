!function(e){"object"==typeof exports&&"object"==typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(tern.comment||(tern.comment={}))}(function(t){function m(e){return e<14&&8<e||32===e||160===e}function s(e,r){for(;0<r;--r){var t=e.charCodeAt(r-1);if(10==t)break;if(!m(t))return}return 1}t.commentsBefore=function(e,r){var t,n=null,o=0;e:for(;0<r;){var f=e.charCodeAt(r-1);if(10==f)for(var i=--r,c=!1;0<i;--i){if(47==(f=e.charCodeAt(i-1))&&47==e.charCodeAt(i-2)){if(!s(e,i-2))break e;var a=e.slice(i,r);!o&&t?n[0]=a+"\n"+n[0]:(n=n||[]).unshift(a),t=!0,o=0,r=i-2;break}if(10==f){if(!c&&1<++o)break e;break}c||m(f)||(c=!0)}else if(47==f&&42==e.charCodeAt(r-2)){for(i=r-2;1<i;--i)if(42==e.charCodeAt(i-1)&&47==e.charCodeAt(i-2)){if(!s(e,i-2))break e;(n=n||[]).unshift(e.slice(i,r-2)),t=!1,o=0;break}r=i-2}else{if(!m(f))break;--r}}return n},t.commentAfter=function(e,r){for(;r<e.length;){var t=e.charCodeAt(r);if(47==t){var n,o=e.charCodeAt(r+1);if(47==o)n=e.indexOf("\n",r+2);else{if(42!=o)return;n=e.indexOf("*/",r+2)}return e.slice(r+2,n<0?e.length:n)}m(t)&&++r}},t.ensureCommentsBefore=function(e,r){return r.hasOwnProperty("commentsBefore")?r.commentsBefore:r.commentsBefore=t.commentsBefore(e,r.start)}});