!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../lib/infer"),require("../lib/tern"),require("acorn-walk")):"function"==typeof define&&define.amd?define(["../lib/infer","../lib/tern","acorn-walk/dist/walk"],e):e(tern,tern,acorn.walk)}(function(c,u,e){"use strict";function n(t){var n=c.cx().parent.mod.completeStrings;e.simple(t,{Literal:function(e){"string"==typeof e.value&&e.value&&e.value.length<n.maxLen&&(n.seen[e.value]=t.sourceFile.name)}})}function r(e,t){var n=u.resolvePos(e,t.end),r=c.findExpressionAround(e.ast,null,n,e.scope,"Literal");if(r&&"string"==typeof r.node.value){var i=r.node.value.slice(0,n-r.node.start-1),o=[],s=c.cx().parent.mod.completeStrings.seen;for(var l in s)if(l.length>i.length&&0==l.indexOf(i))if(t.types||t.docs||t.urls||t.origins){var a={name:JSON.stringify(l),displayName:l};o.push(a),t.types&&(a.type="string"),t.origins&&(a.origin=s[l])}else o.push(JSON.stringify(l));return o.length?{start:u.outputPos(t,e,r.node.start),end:u.outputPos(t,e,n+(e.text.charAt(n)==e.text.charAt(r.node.start)?1:0)),isProperty:!1,completions:o}:void 0}}u.registerPlugin("complete_strings",function(e,t){e.mod.completeStrings={maxLen:t&&t.maxLength||15,seen:Object.create(null)},e.on("reset",function(){e.mod.completeStrings.seen=Object.create(null)}),e.on("postParse",n),e.on("completion",r)})});