var __extends=this&&this.__extends||function(){var i=function(t,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)};return function(t,n){function e(){this.constructor=t}i(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}}();import{shiftKeyOnly,mouseOnly}from"../events/condition.js";import PointerInteraction from"./Pointer.js";var DragRotateAndZoom=function(e){function t(t){var n=this,t=t||{};return(n=e.call(this,t)||this).condition_=t.condition||shiftKeyOnly,n.lastAngle_=void 0,n.lastMagnitude_=void 0,n.lastScaleDelta_=0,n.duration_=void 0!==t.duration?t.duration:400,n}return __extends(t,e),t.prototype.handleDragEvent=function(t){var n,e,i;mouseOnly(t)&&(e=(i=t.map).getSize(),n=(t=t.pixel)[0]-e[0]/2,e=e[1]/2-t[1],t=Math.atan2(e,n),n=Math.sqrt(n*n+e*e),e=i.getView(),void 0!==this.lastAngle_&&(i=this.lastAngle_-t,e.adjustRotationInternal(i)),this.lastAngle_=t,void 0!==this.lastMagnitude_&&e.adjustResolution(this.lastMagnitude_/n),void 0!==this.lastMagnitude_&&(this.lastScaleDelta_=this.lastMagnitude_/n),this.lastMagnitude_=n)},t.prototype.handleUpEvent=function(t){if(!mouseOnly(t))return!0;var t=t.map.getView(),n=1<this.lastScaleDelta_?1:-1;return t.endInteraction(this.duration_,n),this.lastScaleDelta_=0,!1},t.prototype.handleDownEvent=function(t){return!!mouseOnly(t)&&(!!this.condition_(t)&&(t.map.getView().beginInteraction(),this.lastAngle_=void 0,!(this.lastMagnitude_=void 0)))},t}(PointerInteraction);export default DragRotateAndZoom;