var __extends=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var o in n)n.hasOwnProperty(o)&&(t[o]=n[o])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();import Event from"../events/Event.js";import{always,mouseOnly,mouseActionButton}from"../events/condition.js";import{VOID}from"../functions.js";import PointerInteraction from"./Pointer.js";import RenderBox from"../render/Box.js";var DragBoxEventType={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend"},DragBoxEvent=function(e){function t(t,n,o){t=e.call(this,t)||this;return t.coordinate=n,t.mapBrowserEvent=o,t}return __extends(t,e),t}(Event),DragBox=function(o){function t(t){var n=o.call(this)||this,t=t||{};return n.box_=new RenderBox(t.className||"ol-dragbox"),n.minArea_=void 0!==t.minArea?t.minArea:64,n.onBoxEnd_=t.onBoxEnd||VOID,n.startPixel_=null,n.condition_=t.condition||always,n.boxEndCondition_=t.boxEndCondition||n.defaultBoxEndCondition,n}return __extends(t,o),t.prototype.defaultBoxEndCondition=function(t,n,o){var e=o[0]-n[0],o=o[1]-n[1];return e*e+o*o>=this.minArea_},t.prototype.getGeometry=function(){return this.box_.getGeometry()},t.prototype.handleDragEvent=function(t){mouseOnly(t)&&(this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new DragBoxEvent(DragBoxEventType.BOXDRAG,t.coordinate,t)))},t.prototype.handleUpEvent=function(t){return!mouseOnly(t)||(this.box_.setMap(null),this.boxEndCondition_(t,this.startPixel_,t.pixel)&&(this.onBoxEnd_(t),this.dispatchEvent(new DragBoxEvent(DragBoxEventType.BOXEND,t.coordinate,t))),!1)},t.prototype.handleDownEvent=function(t){return!!mouseOnly(t)&&(!(!mouseActionButton(t)||!this.condition_(t))&&(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new DragBoxEvent(DragBoxEventType.BOXSTART,t.coordinate,t)),!0))},t}(PointerInteraction);export default DragBox;