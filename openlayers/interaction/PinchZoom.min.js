var __extends=this&&this.__extends||function(){var o=function(t,n){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)};return function(t,n){function e(){this.constructor=t}o(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}}();import{FALSE}from"../functions.js";import PointerInteraction,{centroid as centroidFromPointers}from"./Pointer.js";var PinchZoom=function(o){function t(t){var n=this,t=t||{},e=t;return e.stopDown||(e.stopDown=FALSE),(n=o.call(this,e)||this).anchor_=null,n.duration_=void 0!==t.duration?t.duration:400,n.lastDistance_=void 0,n.lastScaleDelta_=1,n}return __extends(t,o),t.prototype.handleDragEvent=function(t){var n=1,e=this.targetPointers[0],o=this.targetPointers[1],i=e.clientX-o.clientX,e=e.clientY-o.clientY,o=Math.sqrt(i*i+e*e),i=(void 0!==this.lastDistance_&&(n=this.lastDistance_/o),this.lastDistance_=o,t.map),e=i.getView(),o=(1!=n&&(this.lastScaleDelta_=n),i.getViewport().getBoundingClientRect()),t=centroidFromPointers(this.targetPointers);t[0]-=o.left,t[1]-=o.top,this.anchor_=i.getCoordinateFromPixel(t),i.render(),e.adjustResolution(n,this.anchor_)},t.prototype.handleUpEvent=function(t){var n;return!(this.targetPointers.length<2)||(t=t.map.getView(),n=1<this.lastScaleDelta_?1:-1,t.endInteraction(this.duration_,n),!1)},t.prototype.handleDownEvent=function(t){return 2<=this.targetPointers.length&&(t=t.map,this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0)},t}(PointerInteraction);export default PinchZoom;