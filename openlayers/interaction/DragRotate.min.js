var __extends=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var o in n)n.hasOwnProperty(o)&&(t[o]=n[o])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();import{disable}from"../rotationconstraint.js";import{altShiftKeysOnly,mouseOnly,mouseActionButton}from"../events/condition.js";import{FALSE}from"../functions.js";import PointerInteraction from"./Pointer.js";var DragRotate=function(o){function t(t){var n=this,t=t||{};return(n=o.call(this,{stopDown:FALSE})||this).condition_=t.condition||altShiftKeysOnly,n.lastAngle_=void 0,n.duration_=void 0!==t.duration?t.duration:250,n}return __extends(t,o),t.prototype.handleDragEvent=function(t){var n,o;!mouseOnly(t)||(n=(o=t.map).getView()).getConstraints().rotation!==disable&&(o=o.getSize(),t=t.pixel,t=Math.atan2(o[1]/2-t[1],t[0]-o[0]/2),void 0!==this.lastAngle_&&(o=t-this.lastAngle_,n.adjustRotationInternal(-o)),this.lastAngle_=t)},t.prototype.handleUpEvent=function(t){return!mouseOnly(t)||(t.map.getView().endInteraction(this.duration_),!1)},t.prototype.handleDownEvent=function(t){return!!mouseOnly(t)&&(!(!mouseActionButton(t)||!this.condition_(t))&&(t.map.getView().beginInteraction(),!(this.lastAngle_=void 0)))},t}(PointerInteraction);export default DragRotate;