import{createEmpty}from"../../extent.js";import Builder from"./Builder.js";import ImageBuilder from"./ImageBuilder.js";import LineStringBuilder from"./LineStringBuilder.js";import PolygonBuilder from"./PolygonBuilder.js";import TextBuilder from"./TextBuilder.js";var BATCH_CONSTRUCTORS={Circle:PolygonBuilder,Default:Builder,Image:ImageBuilder,LineString:LineStringBuilder,Polygon:PolygonBuilder,Text:TextBuilder},BuilderGroup=function(){function e(e,t,r,i,o){this.declutter_=o,this.declutterGroups_=null,this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=i,this.resolution_=r,this.buildersByZIndex_={}}return e.prototype.addDeclutter=function(e){var t=null;return this.declutter_&&(e?(t=this.declutterGroups_)[0][4]++:(t=this.declutterGroups_=[createEmpty()])[0].push(1)),t},e.prototype.finish=function(){var e,t={};for(e in this.buildersByZIndex_){t[e]=t[e]||{};var r,i=this.buildersByZIndex_[e];for(r in i){var o=i[r].finish();t[e][r]=o}}return t},e.prototype.getBuilder=function(e,t){var e=void 0!==e?e.toString():"0",r=this.buildersByZIndex_[e],e=(void 0===r&&(this.buildersByZIndex_[e]=r={}),r[t]);return void 0===e&&(e=new BATCH_CONSTRUCTORS[t](this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),r[t]=e),e},e}();export default BuilderGroup;