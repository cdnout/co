var __extends=this&&this.__extends||function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();import{getUid}from"../../util.js";import LRUCache from"../../structs/LRUCache.js";var LabelCache=function(o){function t(t){t=o.call(this,t)||this;return t.consumers={},t}return __extends(t,o),t.prototype.clear=function(){this.consumers={},o.prototype.clear.call(this)},t.prototype.get=function(t,e){var r=o.prototype.get.call(this,t),e=getUid(e);return e in this.consumers||(this.consumers[e]={}),this.consumers[e][t]=!0,r},t.prototype.prune=function(){t:for(;this.canExpireCache();){var t=this.peekLastKey();for(e in this.consumers)if(t in this.consumers[e])break t;var e,r=this.pop();for(e in r.width=r.height=0,this.consumers)delete this.consumers[e][t]}},t.prototype.release=function(t){delete this.consumers[getUid(t)]},t}(LRUCache);export default LabelCache;