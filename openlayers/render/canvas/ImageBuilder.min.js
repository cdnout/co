var __extends=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var o in i)i.hasOwnProperty(o)&&(t[o]=i[o])})(t,i)};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}();import CanvasInstruction from"./Instruction.js";import CanvasBuilder from"./Builder.js";var CanvasImageBuilder=function(s){function t(t,i,o,e){t=s.call(this,t,i,o,e)||this;return t.declutterGroups_=null,t.hitDetectionImage_=null,t.image_=null,t.anchorX_=void 0,t.anchorY_=void 0,t.height_=void 0,t.opacity_=void 0,t.originX_=void 0,t.originY_=void 0,t.rotateWithView_=void 0,t.rotation_=void 0,t.scale_=void 0,t.width_=void 0,t}return __extends(t,s),t.prototype.drawCoordinates_=function(t,i,o,e){return this.appendFlatCoordinates(t,i,o,e,!1,!1)},t.prototype.drawPoint=function(t,i){var o,e;this.image_&&(this.beginGeometry(i),e=t.getFlatCoordinates(),t=t.getStride(),o=this.coordinates.length,e=this.drawCoordinates_(e,0,e.length,t),this.instructions.push([CanvasInstruction.DRAW_IMAGE,o,e,this.image_,this.anchorX_,this.anchorY_,this.declutterGroups_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.width_]),this.hitDetectionInstructions.push([CanvasInstruction.DRAW_IMAGE,o,e,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroups_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_]),this.endGeometry(i))},t.prototype.drawMultiPoint=function(t,i){var o,e;this.image_&&(this.beginGeometry(i),e=t.getFlatCoordinates(),t=t.getStride(),o=this.coordinates.length,e=this.drawCoordinates_(e,0,e.length,t),this.instructions.push([CanvasInstruction.DRAW_IMAGE,o,e,this.image_,this.anchorX_,this.anchorY_,this.declutterGroups_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.width_]),this.hitDetectionInstructions.push([CanvasInstruction.DRAW_IMAGE,o,e,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroups_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_]),this.endGeometry(i))},t.prototype.finish=function(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,s.prototype.finish.call(this)},t.prototype.setImageStyle=function(t,i){var o=t.getAnchor(),e=t.getSize(),s=t.getHitDetectionImage(1),h=t.getImage(1),n=t.getOrigin();this.anchorX_=o[0],this.anchorY_=o[1],this.declutterGroups_=i,this.hitDetectionImage_=s,this.image_=h,this.height_=e[1],this.opacity_=t.getOpacity(),this.originX_=n[0],this.originY_=n[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScale(),this.width_=e[0]},t}(CanvasBuilder);export default CanvasImageBuilder;