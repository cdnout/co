import{extend}from"../array.js";import{createOrUpdateFromCoordinate,createOrUpdateFromFlatCoordinates,getCenter,getHeight}from"../extent.js";import GeometryType from"../geom/GeometryType.js";import{linearRingss as linearRingssCenter}from"../geom/flat/center.js";import{getInteriorPointOfArray,getInteriorPointsOfMultiArray}from"../geom/flat/interiorpoint.js";import{interpolatePoint}from"../geom/flat/interpolate.js";import{get as getProjection}from"../proj.js";import{transform2D}from"../geom/flat/transform.js";import{create as createTransform,compose as composeTransform}from"../transform.js";var tmpTransform=createTransform(),RenderFeature=function(){function t(t,e,r,o,i){this.extent_,this.id_=i,this.type_=t,this.flatCoordinates_=e,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=r,this.properties_=o}return t.prototype.get=function(t){return this.properties_[t]},t.prototype.getExtent=function(){return this.extent_||(this.extent_=this.type_===GeometryType.POINT?createOrUpdateFromCoordinate(this.flatCoordinates_):createOrUpdateFromFlatCoordinates(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_},t.prototype.getFlatInteriorPoint=function(){var t;return this.flatInteriorPoints_||(t=getCenter(this.getExtent()),this.flatInteriorPoints_=getInteriorPointOfArray(this.flatCoordinates_,0,this.ends_,2,t,0)),this.flatInteriorPoints_},t.prototype.getFlatInteriorPoints=function(){var t;return this.flatInteriorPoints_||(t=linearRingssCenter(this.flatCoordinates_,0,this.ends_,2),this.flatInteriorPoints_=getInteriorPointsOfMultiArray(this.flatCoordinates_,0,this.ends_,2,t)),this.flatInteriorPoints_},t.prototype.getFlatMidpoint=function(){return this.flatMidpoints_||(this.flatMidpoints_=interpolatePoint(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_},t.prototype.getFlatMidpoints=function(){if(!this.flatMidpoints_){this.flatMidpoints_=[];for(var t=this.flatCoordinates_,e=0,r=this.ends_,o=0,i=r.length;o<i;++o){var n=r[o],s=interpolatePoint(t,e,n,2,.5);extend(this.flatMidpoints_,s),e=n}}return this.flatMidpoints_},t.prototype.getId=function(){return this.id_},t.prototype.getOrientedFlatCoordinates=function(){return this.flatCoordinates_},t.prototype.getGeometry=function(){return this},t.prototype.getSimplifiedGeometry=function(t){return this},t.prototype.getProperties=function(){return this.properties_},t.prototype.getStride=function(){return 2},t.prototype.getStyleFunction=function(){},t.prototype.getType=function(){return this.type_},t.prototype.transform=function(t,e){var r=(t=getProjection(t)).getExtent(),t=t.getWorldExtent(),r=getHeight(t)/getHeight(r);composeTransform(tmpTransform,t[0],t[3],r,-r,0,0,0),transform2D(this.flatCoordinates_,0,this.flatCoordinates_.length,2,tmpTransform,this.flatCoordinates_)},t}();RenderFeature.prototype.getEnds=RenderFeature.prototype.getEndss=function(){return this.ends_},RenderFeature.prototype.getFlatCoordinates=RenderFeature.prototype.getOrientedFlatCoordinates;export default RenderFeature;