import{assign}from"../obj.js";import{abstract}from"../util.js";import{get as getProjection,equivalent as equivalentProjection,transformExtent}from"../proj.js";import Units from"../proj/Units.js";var FeatureFormat=function(){function t(){this.dataProjection=null,this.defaultFeatureProjection=null}return t.prototype.getReadOptions=function(t,r){var e;return r&&(t=r.dataProjection?getProjection(r.dataProjection):this.readProjection(t),r.extent&&t&&t.getUnits()===Units.TILE_PIXELS&&(t=getProjection(t)).setWorldExtent(r.extent),e={dataProjection:t,featureProjection:r.featureProjection}),this.adaptOptions(e)},t.prototype.adaptOptions=function(t){return assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},t)},t.prototype.getType=function(){return abstract()},t.prototype.readFeature=function(t,r){return abstract()},t.prototype.readFeatures=function(t,r){return abstract()},t.prototype.readGeometry=function(t,r){return abstract()},t.prototype.readProjection=function(t){return abstract()},t.prototype.writeFeature=function(t,r){return abstract()},t.prototype.writeFeatures=function(t,r){return abstract()},t.prototype.writeGeometry=function(t,r){return abstract()},t}();export default FeatureFormat;function transformGeometryWithOptions(t,r,e){var o,n=e?getProjection(e.featureProjection):null,a=e?getProjection(e.dataProjection):null,a=n&&a&&!equivalentProjection(n,a)?(r?t.clone():t).transform(r?n:a,r?a:n):t;return r&&e&&void 0!==e.decimals&&(o=Math.pow(10,e.decimals),(a=a===t?t.clone():a).applyTransform(function(t){for(var r=0,e=t.length;r<e;++r)t[r]=Math.round(t[r]*o)/o;return t})),a}function transformExtentWithOptions(t,r){var e=r?getProjection(r.featureProjection):null,r=r?getProjection(r.dataProjection):null;return e&&r&&!equivalentProjection(e,r)?transformExtent(t,r,e):t}export{transformGeometryWithOptions,transformExtentWithOptions};