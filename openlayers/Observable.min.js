var __extends=this&&this.__extends||function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}();import{listen,unlistenByKey,listenOnce}from"./events.js";import EventTarget from"./events/Target.js";import EventType from"./events/EventType.js";var Observable=function(e){function t(){var t=e.call(this)||this;return t.revision_=0,t}return __extends(t,e),t.prototype.changed=function(){++this.revision_,this.dispatchEvent(EventType.CHANGE)},t.prototype.getRevision=function(){return this.revision_},t.prototype.on=function(t,e){if(Array.isArray(t)){for(var n=t.length,r=new Array(n),i=0;i<n;++i)r[i]=listen(this,t[i],e);return r}return listen(this,t,e)},t.prototype.once=function(t,e){if(Array.isArray(t)){for(var n=t.length,r=new Array(n),i=0;i<n;++i)r[i]=listenOnce(this,t[i],e);return r}return listenOnce(this,t,e)},t.prototype.un=function(t,e){if(Array.isArray(t))for(var n=0,r=t.length;n<r;++n)this.removeEventListener(t[n],e);else this.removeEventListener(t,e)},t}(EventTarget);function unByKey(t){if(Array.isArray(t))for(var e=0,n=t.length;e<n;++e)unlistenByKey(t[e]);else unlistenByKey(t)}export default Observable;export{unByKey};