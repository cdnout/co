import{find}from"../array.js";import{get as getProjection}from"../proj.js";import TileGrid from"./TileGrid.js";class WMTSTileGrid extends TileGrid{constructor(i){super({extent:i.extent,origin:i.origin,origins:i.origins,resolutions:i.resolutions,tileSize:i.tileSize,tileSizes:i.tileSizes,sizes:i.sizes}),this.matrixIds_=i.matrixIds}getMatrixId(i){return this.matrixIds_[i]}getMatrixIds(){return this.matrixIds_}}export default WMTSTileGrid;function createFromCapabilitiesMatrixSet(o,i,e){const n=[],a=[],l=[],d=[],u=[],x=void 0!==e?e:[];const c="TileMatrix",p="Identifier",g="ScaleDenominator",f="TopLeftCorner",t=o.SupportedCRS,r=getProjection(t.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"))||getProjection(t),h=r.getMetersPerUnit(),m="ne"==r.getAxisOrientation().substr(0,2);return o[c].sort(function(i,e){return e[g]-i[g]}),o[c].forEach(function(e){let i;var t,r,s;(i=!(0<x.length)||find(x,function(i){return e[p]==i[c]||-1===e[p].indexOf(":")&&o[p]+":"+e[p]===i[c]}))&&(a.push(e[p]),t=28e-5*e[g]/h,r=e.TileWidth,s=e.TileHeight,m?l.push([e[f][1],e[f][0]]):l.push(e[f]),n.push(t),d.push(r==s?r:[r,s]),u.push([e.MatrixWidth,e.MatrixHeight]))}),new WMTSTileGrid({extent:i,origins:l,resolutions:n,matrixIds:a,tileSizes:d,sizes:u})}export{createFromCapabilitiesMatrixSet};