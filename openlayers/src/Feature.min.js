import{assert}from"./asserts.js";import{listen,unlistenByKey}from"./events.js";import EventType from"./events/EventType.js";import BaseObject,{getChangeEventType}from"./Object.js";class Feature extends BaseObject{constructor(e){super(),this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addEventListener(getChangeEventType(this.geometryName_),this.handleGeometryChanged_),e&&("function"==typeof e.getSimplifiedGeometry?this.setGeometry(e):this.setProperties(e))}clone(){const e=new Feature(this.getProperties()),t=(e.setGeometryName(this.getGeometryName()),this.getGeometry());t&&e.setGeometry(t.clone());var n=this.getStyle();return n&&e.setStyle(n),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(unlistenByKey(this.geometryChangeKey_),this.geometryChangeKey_=null);var e=this.getGeometry();e&&(this.geometryChangeKey_=listen(e,EventType.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?createStyleFunction(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeEventListener(getChangeEventType(this.geometryName_),this.handleGeometryChanged_),this.geometryName_=e,this.addEventListener(getChangeEventType(this.geometryName_),this.handleGeometryChanged_),this.handleGeometryChanged_()}}function createStyleFunction(t){if("function"==typeof t)return t;{let e;return e=Array.isArray(t)?t:(assert("function"==typeof t.getZIndex,41),[t]),function(){return e}}}export default Feature;export{createStyleFunction};