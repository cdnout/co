import{DEFAULT_MAX_ZOOM,DEFAULT_TILE_SIZE}from"./tilegrid/common.js";import{toSize}from"./size.js";import{containsCoordinate,createOrUpdate,getCorner,getHeight,getWidth}from"./extent.js";import Corner from"./extent/Corner.js";import{get as getProjection,METERS_PER_UNIT}from"./proj.js";import Units from"./proj/Units.js";import TileGrid from"./tilegrid/TileGrid.js";function getForProjection(t){let e=t.getDefaultTileGrid();return e||(e=createForProjection(t),t.setDefaultTileGrid(e)),e}function wrapX(t,e,r){var o=e[0];const i=t.getTileCoordCenter(e);var r=extentFromProjection(r);return containsCoordinate(r,i)?e:(e=getWidth(r),r=Math.ceil((r[0]-i[0])/e),i[0]+=e*r,t.getTileCoordForCoordAndZ(i,o))}function createForExtent(t,e,r,o){o=void 0!==o?o:Corner.TOP_LEFT,e=resolutionsFromExtent(t,e,r);return new TileGrid({extent:t,origin:getCorner(t,o),resolutions:e,tileSize:r})}function createXYZ(t){var t=t||{},e=t.extent||getProjection("EPSG:3857").getExtent(),e={extent:e,minZoom:t.minZoom,tileSize:t.tileSize,resolutions:resolutionsFromExtent(e,t.maxZoom,t.tileSize)};return new TileGrid(e)}function resolutionsFromExtent(t,e,r){var e=void 0!==e?e:DEFAULT_MAX_ZOOM,o=getHeight(t),t=getWidth(t),r=toSize(void 0!==r?r:DEFAULT_TILE_SIZE),i=Math.max(t/r[0],o/r[1]),n=e+1;const c=new Array(n);for(let t=0;t<n;++t)c[t]=i/Math.pow(2,t);return c}function createForProjection(t,e,r,o){return createForExtent(extentFromProjection(t),e,r,o)}function extentFromProjection(t){let e=(t=getProjection(t)).getExtent();return e||(t=180*METERS_PER_UNIT[Units.DEGREES]/t.getMetersPerUnit(),e=createOrUpdate(-t,-t,t,t)),e}export{getForProjection,wrapX,createForExtent,createXYZ,createForProjection,extentFromProjection};