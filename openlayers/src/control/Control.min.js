import{VOID}from"../functions.js";import MapEventType from"../MapEventType.js";import BaseObject from"../Object.js";import{removeNode}from"../dom.js";import{listen,unlistenByKey}from"../events.js";class Control extends BaseObject{constructor(e){super(),this.element=e.element||null,this.target_=null,this.map_=null,this.listenerKeys=[],this.render=e.render||VOID,e.target&&this.setTarget(e.target)}disposeInternal(){removeNode(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(e){this.map_&&removeNode(this.element);for(let e=0,t=this.listenerKeys.length;e<t;++e)unlistenByKey(this.listenerKeys[e]);if(this.listenerKeys.length=0,this.map_=e,this.map_){const t=this.target_||e.getOverlayContainerStopEvent();t.appendChild(this.element),this.render!==VOID&&this.listenerKeys.push(listen(e,MapEventType.POSTRENDER,this.render,this)),e.render()}}setTarget(e){this.target_="string"==typeof e?document.getElementById(e):e}}export default Control;