import CanvasInstruction from"./Instruction.js";import CanvasBuilder from"./Builder.js";class CanvasImageBuilder extends CanvasBuilder{constructor(t,i,s,h){super(t,i,s,h),this.declutterGroups_=null,this.hitDetectionImage_=null,this.image_=null,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0}drawCoordinates_(t,i,s,h){return this.appendFlatCoordinates(t,i,s,h,!1,!1)}drawPoint(t,i){var s,h;this.image_&&(this.beginGeometry(i),h=t.getFlatCoordinates(),t=t.getStride(),s=this.coordinates.length,h=this.drawCoordinates_(h,0,h.length,t),this.instructions.push([CanvasInstruction.DRAW_IMAGE,s,h,this.image_,this.anchorX_,this.anchorY_,this.declutterGroups_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.width_]),this.hitDetectionInstructions.push([CanvasInstruction.DRAW_IMAGE,s,h,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroups_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_]),this.endGeometry(i))}drawMultiPoint(t,i){var s,h;this.image_&&(this.beginGeometry(i),h=t.getFlatCoordinates(),t=t.getStride(),s=this.coordinates.length,h=this.drawCoordinates_(h,0,h.length,t),this.instructions.push([CanvasInstruction.DRAW_IMAGE,s,h,this.image_,this.anchorX_,this.anchorY_,this.declutterGroups_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.width_]),this.hitDetectionInstructions.push([CanvasInstruction.DRAW_IMAGE,s,h,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroups_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_]),this.endGeometry(i))}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(t,i){var s=t.getAnchor(),h=t.getSize(),e=t.getHitDetectionImage(1),o=t.getImage(1),r=t.getOrigin();this.anchorX_=s[0],this.anchorY_=s[1],this.declutterGroups_=i,this.hitDetectionImage_=e,this.image_=o,this.height_=h[1],this.opacity_=t.getOpacity(),this.originX_=r[0],this.originY_=r[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScale(),this.width_=h[0]}}export default CanvasImageBuilder;