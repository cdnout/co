import{getUid}from"../../util.js";import LRUCache from"../../structs/LRUCache.js";class LabelCache extends LRUCache{constructor(e){super(e),this.consumers={}}clear(){this.consumers={},super.clear()}get(e,s){var t=super.get(e),s=getUid(s);return s in this.consumers||(this.consumers[s]={}),this.consumers[s][e]=!0,t}prune(){e:for(;this.canExpireCache();){var e=this.peekLastKey();for(const t in this.consumers)if(e in this.consumers[t])break e;const s=this.pop();s.width=s.height=0;for(const r in this.consumers)delete this.consumers[r][e]}}release(e){delete this.consumers[getUid(e)]}}export default LabelCache;