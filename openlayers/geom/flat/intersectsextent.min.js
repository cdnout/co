import{containsExtent,createEmpty,extendFlatCoordinates,intersects,intersectsSegment}from"../../extent.js";import{linearRingContainsXY,linearRingContainsExtent}from"./contains.js";import{forEach as forEachSegment}from"./segments.js";function intersectsLineString(n,t,e,r,i){var s=extendFlatCoordinates(createEmpty(),n,t,e,r);return!!intersects(i,s)&&(!!containsExtent(i,s)||(s[0]>=i[0]&&s[2]<=i[2]||(s[1]>=i[1]&&s[3]<=i[3]||forEachSegment(n,t,e,r,function(n,t){return intersectsSegment(i,n,t)}))))}function intersectsLineStringArray(n,t,e,r,i){for(var s=0,a=e.length;s<a;++s){if(intersectsLineString(n,t,e[s],r,i))return!0;t=e[s]}return!1}function intersectsLinearRing(n,t,e,r,i){return!!intersectsLineString(n,t,e,r,i)||(!!linearRingContainsXY(n,t,e,r,i[0],i[1])||(!!linearRingContainsXY(n,t,e,r,i[0],i[3])||(!!linearRingContainsXY(n,t,e,r,i[2],i[1])||!!linearRingContainsXY(n,t,e,r,i[2],i[3]))))}function intersectsLinearRingArray(n,t,e,r,i){if(!intersectsLinearRing(n,t,e[0],r,i))return!1;if(1===e.length)return!0;for(var s=1,a=e.length;s<a;++s)if(linearRingContainsExtent(n,e[s-1],e[s],r,i)&&!intersectsLineString(n,e[s-1],e[s],r,i))return!1;return!0}function intersectsLinearRingMultiArray(n,t,e,r,i){for(var s=0,a=e.length;s<a;++s){var c=e[s];if(intersectsLinearRingArray(n,t,c,r,i))return!0;t=c[c.length-1]}return!1}export{intersectsLineString,intersectsLineStringArray,intersectsLinearRing,intersectsLinearRingArray,intersectsLinearRingMultiArray};