var __extends=this&&this.__extends||function(){var i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)};return function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}}();import{closestSquaredDistanceXY}from"../extent.js";import GeometryLayout from"./GeometryLayout.js";import GeometryType from"./GeometryType.js";import SimpleGeometry from"./SimpleGeometry.js";import{linearRing as linearRingArea}from"./flat/area.js";import{assignClosestPoint,maxSquaredDelta}from"./flat/closest.js";import{deflateCoordinates}from"./flat/deflate.js";import{inflateCoordinates}from"./flat/inflate.js";import{douglasPeucker}from"./flat/simplify.js";var LinearRing=function(i){function o(t,e){var o=i.call(this)||this;return o.maxDelta_=-1,o.maxDeltaRevision_=-1,void 0===e||Array.isArray(t[0])?o.setCoordinates(t,e):o.setFlatCoordinates(e,t),o}return __extends(o,i),o.prototype.clone=function(){return new o(this.flatCoordinates.slice(),this.layout)},o.prototype.closestPointXY=function(t,e,o,i){return i<closestSquaredDistanceXY(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(maxSquaredDelta(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),assignClosestPoint(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,o,i))},o.prototype.getArea=function(){return linearRingArea(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},o.prototype.getCoordinates=function(){return inflateCoordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},o.prototype.getSimplifiedGeometryInternal=function(t){var e=[];return e.length=douglasPeucker(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new o(e,GeometryLayout.XY)},o.prototype.getType=function(){return GeometryType.LINEAR_RING},o.prototype.intersectsExtent=function(t){return!1},o.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=deflateCoordinates(this.flatCoordinates,0,t,this.stride),this.changed()},o}(SimpleGeometry);export default LinearRing;