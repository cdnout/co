var __extends=this&&this.__extends||function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();import{abstract}from"../util.js";import BaseObject from"../Object.js";import{createEmpty,getHeight,returnOrUpdate}from"../extent.js";import{transform2D}from"./flat/transform.js";import{get as getProjection,getTransform}from"../proj.js";import Units from"../proj/Units.js";import{create as createTransform,compose as composeTransform}from"../transform.js";var tmpTransform=createTransform(),Geometry=function(e){function t(){var t=e.call(this)||this;return t.extent_=createEmpty(),t.extentRevision_=-1,t.simplifiedGeometryCache={},t.simplifiedGeometryMaxMinSquaredTolerance=0,t.simplifiedGeometryRevision=0,t}return __extends(t,e),t.prototype.clone=function(){return abstract()},t.prototype.closestPointXY=function(t,e,r,o){return abstract()},t.prototype.containsXY=function(t,e){var r=this.getClosestPoint([t,e]);return r[0]===t&&r[1]===e},t.prototype.getClosestPoint=function(t,e){e=e||[NaN,NaN];return this.closestPointXY(t[0],t[1],e,1/0),e},t.prototype.intersectsCoordinate=function(t){return this.containsXY(t[0],t[1])},t.prototype.computeExtent=function(t){return abstract()},t.prototype.getExtent=function(t){return this.extentRevision_!=this.getRevision()&&(this.extent_=this.computeExtent(this.extent_),this.extentRevision_=this.getRevision()),returnOrUpdate(this.extent_,t)},t.prototype.rotate=function(t,e){abstract()},t.prototype.scale=function(t,e,r){abstract()},t.prototype.simplify=function(t){return this.getSimplifiedGeometry(t*t)},t.prototype.getSimplifiedGeometry=function(t){return abstract()},t.prototype.getType=function(){return abstract()},t.prototype.applyTransform=function(t){abstract()},t.prototype.intersectsExtent=function(t){return abstract()},t.prototype.translate=function(t,e){abstract()},t.prototype.transform=function(t,i){var s=getProjection(t),t=s.getUnits()==Units.TILE_PIXELS?function(t,e,r){var o=s.getExtent(),n=s.getWorldExtent(),o=getHeight(n)/getHeight(o);return composeTransform(tmpTransform,n[0],n[3],o,-o,0,0,0),transform2D(t,0,t.length,r,tmpTransform,e),getTransform(s,i)(t,e,r)}:getTransform(s,i);return this.applyTransform(t),this},t}(BaseObject);export default Geometry;