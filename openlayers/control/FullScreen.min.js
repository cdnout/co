var __extends=this&&this.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var l in t)t.hasOwnProperty(l)&&(e[l]=t[l])})(e,t)};return function(e,t){function l(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(l.prototype=t.prototype,new l)}}();import Control from"./Control.js";import{CLASS_CONTROL,CLASS_UNSELECTABLE,CLASS_UNSUPPORTED}from"../css.js";import{replaceNode}from"../dom.js";import{listen}from"../events.js";import EventType from"../events/EventType.js";var events=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"],FullScreen=function(s){function e(e){var t=this,e=e||{},l=((t=s.call(this,{element:document.createElement("div"),target:e.target})||this).cssClassName_=void 0!==e.className?e.className:"ol-full-screen",void 0!==e.label?e.label:"⤢"),l=(t.labelNode_="string"==typeof l?document.createTextNode(l):l,void 0!==e.labelActive?e.labelActive:"×"),l=(t.labelActiveNode_="string"==typeof l?document.createTextNode(l):l,t.button_=document.createElement("button"),e.tipLabel||"Toggle full-screen"),l=(t.setClassName_(t.button_,isFullScreen()),t.button_.setAttribute("type","button"),t.button_.title=l,t.button_.appendChild(t.labelNode_),t.button_.addEventListener(EventType.CLICK,t.handleClick_.bind(t),!1),t.cssClassName_+" "+CLASS_UNSELECTABLE+" "+CLASS_CONTROL+" "+(isFullScreenSupported()?"":CLASS_UNSUPPORTED)),n=t.element;return n.className=l,n.appendChild(t.button_),t.keys_=void 0!==e.keys&&e.keys,t.source_=e.source,t}return __extends(e,s),e.prototype.handleClick_=function(e){e.preventDefault(),this.handleFullScreen_()},e.prototype.handleFullScreen_=function(){var e,t;!isFullScreenSupported()||(e=this.getMap())&&(isFullScreen()?exitFullScreen():(t=void 0,t=this.source_?"string"==typeof this.source_?document.getElementById(this.source_):this.source_:e.getTargetElement(),(this.keys_?requestFullScreenWithKeys:requestFullScreen)(t)))},e.prototype.handleFullScreenChange_=function(){var e=this.getMap();isFullScreen()?(this.setClassName_(this.button_,!0),replaceNode(this.labelActiveNode_,this.labelNode_)):(this.setClassName_(this.button_,!1),replaceNode(this.labelNode_,this.labelActiveNode_)),e&&e.updateSize()},e.prototype.setClassName_=function(e,t){var l=this.cssClassName_+"-true",n=this.cssClassName_+"-false",t=t?l:n;e.classList.remove(l),e.classList.remove(n),e.classList.add(t)},e.prototype.setMap=function(e){if(s.prototype.setMap.call(this,e),e)for(var t=0,l=events.length;t<l;++t)this.listenerKeys.push(listen(document,events[t],this.handleFullScreenChange_,this))},e}(Control);function isFullScreenSupported(){var e=document.body;return!!(e.webkitRequestFullscreen||e.msRequestFullscreen&&document.msFullscreenEnabled||e.requestFullscreen&&document.fullscreenEnabled)}function isFullScreen(){return!!(document.webkitIsFullScreen||document.msFullscreenElement||document.fullscreenElement)}function requestFullScreen(e){e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen()}function requestFullScreenWithKeys(e){e.webkitRequestFullscreen?e.webkitRequestFullscreen():requestFullScreen(e)}function exitFullScreen(){document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()}export default FullScreen;