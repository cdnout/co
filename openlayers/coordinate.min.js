import{modulo}from"./math.js";import{padNumber}from"./string.js";function add(t,e){return t[0]+=+e[0],t[1]+=+e[1],t}function closestOnCircle(t,e){var r=e.getRadius(),e=e.getCenter(),n=e[0],e=e[1],o=t[0]-n,t=t[1]-e,a=(0===o&&0==t&&(o=1),Math.sqrt(o*o+t*t));return[n+r*o/a,e+r*t/a]}function closestOnSegment(t,e){var r,n=t[0],t=t[1],o=e[0],e=e[1],a=o[0],o=o[1],i=e[0],e=e[1],u=i-a,s=e-o,n=0==u&&0==s?0:(u*(n-a)+s*(t-o))/(u*u+s*s||0),t=n<=0?(r=a,o):1<=n?(r=i,e):(r=a+n*u,o+n*s);return[r,t]}function createStringXY(e){return function(t){return toStringXY(t,e)}}function degreesToStringHDMS(t,e,r){var e=modulo(e+180,360)-180,n=Math.abs(3600*e),r=r||0,o=Math.pow(10,r),a=Math.floor(n/3600),i=Math.floor((n-3600*a)/60),n=n-3600*a-60*i;return 60<=(n=Math.ceil(n*o)/o)&&(n=0,i+=1),60<=i&&(i=0,a+=1),a+"° "+padNumber(i,2)+"′ "+padNumber(n,2,r)+"″"+(0==e?"":" "+t.charAt(e<0?1:0))}function format(t,e,r){return t?e.replace("{x}",t[0].toFixed(r)).replace("{y}",t[1].toFixed(r)):""}function equals(t,e){for(var r=!0,n=t.length-1;0<=n;--n)if(t[n]!=e[n]){r=!1;break}return r}function rotate(t,e){var r=Math.cos(e),e=Math.sin(e),n=t[0]*r-t[1]*e,r=t[1]*r+t[0]*e;return t[0]=n,t[1]=r,t}function scale(t,e){return t[0]*=e,t[1]*=e,t}function squaredDistance(t,e){var r=t[0]-e[0],t=t[1]-e[1];return r*r+t*t}function distance(t,e){return Math.sqrt(squaredDistance(t,e))}function squaredDistanceToSegment(t,e){return squaredDistance(t,closestOnSegment(t,e))}function toStringHDMS(t,e){return t?degreesToStringHDMS("NS",t[1],e)+" "+degreesToStringHDMS("EW",t[0],e):""}function toStringXY(t,e){return format(t,"{x}, {y}",e)}export{add,closestOnCircle,closestOnSegment,createStringXY,degreesToStringHDMS,format,equals,rotate,scale,squaredDistance,distance,squaredDistanceToSegment,toStringHDMS,toStringXY};