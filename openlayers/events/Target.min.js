var __extends=this&&this.__extends||function(){var i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}();import Disposable from"../Disposable.js";import{VOID}from"../functions.js";import Event from"./Event.js";import{clear}from"../obj.js";var Target=function(e){function t(){var t=e.call(this)||this;return t.pendingRemovals_={},t.dispatching_={},t.listeners_={},t}return __extends(t,e),t.prototype.addEventListener=function(t,e){var n=this.listeners_[t];-1===(n=n||(this.listeners_[t]=[])).indexOf(e)&&n.push(e)},t.prototype.dispatchEvent=function(t){var e,n="string"==typeof t?new Event(t):t,i=n.type,s=(n.target||(n.target=this),this.listeners_[i]);if(s){i in this.dispatching_||(this.dispatching_[i]=0,this.pendingRemovals_[i]=0),++this.dispatching_[i];for(var r=0,o=s.length;r<o;++r)if(!1===s[r].call(this,n)||n.propagationStopped){e=!1;break}if(--this.dispatching_[i],0===this.dispatching_[i]){var p=this.pendingRemovals_[i];for(delete this.pendingRemovals_[i];p--;)this.removeEventListener(i,VOID);delete this.dispatching_[i]}return e}},t.prototype.disposeInternal=function(){clear(this.listeners_)},t.prototype.getListeners=function(t){return this.listeners_[t]},t.prototype.hasListener=function(t){return t?t in this.listeners_:0<Object.keys(this.listeners_).length},t.prototype.removeEventListener=function(t,e){var n=this.listeners_[t];n&&(e=n.indexOf(e),t in this.pendingRemovals_?(n[e]=VOID,++this.pendingRemovals_[t]):(n.splice(e,1),0===n.length&&delete this.listeners_[t]))},t}(Disposable);export default Target;