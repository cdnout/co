var __extends=this&&this.__extends||function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])})(t,e)};return function(t,e){function a(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}}();import ImageBase from"./ImageBase.js";import ImageState from"./ImageState.js";var ImageCanvas=function(i){function t(t,e,a,r,o){var n=this,s=void 0!==o?ImageState.IDLE:ImageState.LOADED;return(n=i.call(this,t,e,a,s)||this).loader_=void 0!==o?o:null,n.canvas_=r,n.error_=null,n}return __extends(t,i),t.prototype.getError=function(){return this.error_},t.prototype.handleLoad_=function(t){t?(this.error_=t,this.state=ImageState.ERROR):this.state=ImageState.LOADED,this.changed()},t.prototype.load=function(){this.state==ImageState.IDLE&&(this.state=ImageState.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))},t.prototype.getImage=function(){return this.canvas_},t}(ImageBase);export default ImageCanvas;