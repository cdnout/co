var __extends=this&&this.__extends||function(){var o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};return function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}();import{assert}from"./asserts.js";import{listen,unlistenByKey}from"./events.js";import EventType from"./events/EventType.js";import BaseObject,{getChangeEventType}from"./Object.js";var Feature=function(n){function o(e){var t=n.call(this)||this;return t.id_=void 0,t.geometryName_="geometry",t.style_=null,t.styleFunction_=void 0,t.geometryChangeKey_=null,t.addEventListener(getChangeEventType(t.geometryName_),t.handleGeometryChanged_),e&&("function"==typeof e.getSimplifiedGeometry?t.setGeometry(e):t.setProperties(e)),t}return __extends(o,n),o.prototype.clone=function(){var e=new o(this.getProperties()),t=(e.setGeometryName(this.getGeometryName()),this.getGeometry()),t=(t&&e.setGeometry(t.clone()),this.getStyle());return t&&e.setStyle(t),e},o.prototype.getGeometry=function(){return this.get(this.geometryName_)},o.prototype.getId=function(){return this.id_},o.prototype.getGeometryName=function(){return this.geometryName_},o.prototype.getStyle=function(){return this.style_},o.prototype.getStyleFunction=function(){return this.styleFunction_},o.prototype.handleGeometryChange_=function(){this.changed()},o.prototype.handleGeometryChanged_=function(){this.geometryChangeKey_&&(unlistenByKey(this.geometryChangeKey_),this.geometryChangeKey_=null);var e=this.getGeometry();e&&(this.geometryChangeKey_=listen(e,EventType.CHANGE,this.handleGeometryChange_,this)),this.changed()},o.prototype.setGeometry=function(e){this.set(this.geometryName_,e)},o.prototype.setStyle=function(e){this.style_=e,this.styleFunction_=e?createStyleFunction(e):void 0,this.changed()},o.prototype.setId=function(e){this.id_=e,this.changed()},o.prototype.setGeometryName=function(e){this.removeEventListener(getChangeEventType(this.geometryName_),this.handleGeometryChanged_),this.geometryName_=e,this.addEventListener(getChangeEventType(this.geometryName_),this.handleGeometryChanged_),this.handleGeometryChanged_()},o}(BaseObject);function createStyleFunction(e){var t;return"function"==typeof e?e:(t=Array.isArray(e)?e:(assert("function"==typeof e.getZIndex,41),[e]),function(){return t})}export default Feature;export{createStyleFunction};