!function(){function g(t,d,h,f){function p(t,n,e,a,o,i,r){return a&&!a.length?t||"":t?(e=e||n,(o=t.indexOf(n,o||0))<0?[]:(i=t.indexOf(e,o+1),a?t.slice(0,o)+a[0]+p(t.slice(i+e.length),n,e,a.slice(1),0,i,r):[t.slice(o+n.length,i)].concat(p(t,n,e,a,i,i,r)))):[]}t=$(t),d===g.gui&&g.el&&g.el.is(t)||((f=f||{}).match=f.match||"{{ ",f.end=f.end||" }}",function e(u,s){var t,n=(u=$(u))[0].outerHTML;if(!(n&&n.indexOf(f.match)<0)){if(!s&&($.each(u[0].attributes,function(t,n){n&&p(n.value,f.match,f.end).length&&e(u,n.name)}),(t=u.children()).length))return t.each(function(){e(this)});var a,l=[],h=s?u.attr(s):u.html();(a=p(h,f.match,f.end)).length&&$.each(a,function(e,t){var a=t.split(" "),n=a[0].split(".");(a=a.slice(1).join(" "))&&(a=new Function("_","b","return (_)"+a));var o=a&&a("")||"";l.push(o),s||u.text(o);var i,r=d,c=[];(i=u.attr("name"))&&c.push(i),u.parents("[name]").each(function(){c.push($(this).attr("name"))}),$.each(n=c.reverse().concat(n),function(t,n){r=r.get(n)}),r.on(function(t){t=l[e]=a?a(t):t;var n=p(h,f.match,f.end,l);s?u.attr(s,n):u.text(n)})})}}(t),g.gui=d,(g.el=t).data("as")?t.html(t.data("as").fresh):t.data("as",{fresh:t.html()}),t.find("[name]").each(function(){var u,t,n,e,s,l;$(this).find("[name]").length||(t=(u=$(this)).parents("[name]"),e=d,(n=[]).push(u.attr("name")),t.each(function(){n.push($(this).attr("name"))}),(n=n.reverse()).forEach(function(t){e="#"===t?e.map():e.get(t)}),l=n.slice().reverse().indexOf("#"),(l=0<++l&&l)&&(s=(s=u.closest("[name='#']")).data("model")||s.data("model",{$:s.clone(),on:s.parent(),has:{}}).hide().data("model")),e.get(function(t){var n,e,a,o=t.put,i=t.get,r=t.gun||t.$,c=u;if(s&&!(c=s.has[r._.id])){if(n=r.back(l-1),!(c=s.has[n._.id])){if(!n._.get)return;c=s.has[n._.id]=s.$.clone(!0).prependTo(s.on)}c=c.find("[name='"+i+"']").first(),s.has[r._.id]=c}c.data("gun",r),c.data("was")!==o&&(l&&c.is(".sort")&&(e=c.closest("[name='#']"),(a=g.sort(o,e.parent().children().last()))?e.insertAfter(a):e.prependTo(e.parent())),g.lock!==r&&(o&&o instanceof Object||(c[0]&&m===c[0].value?c.text(o):c.val(o)),c.data("was",o),h&&h(o,i,c)))}))}))}var m;g.wait=function(o,i,r){return function(t,n,e){var a=g.typing=this;clearTimeout(r),r=setTimeout(function(){o.call(a,t,n,e),g.typing=a=!1},i||200)}},g.sort=function t(n,e){return parseFloat(n)>=parseFloat($(e).find(".sort").text()||-1/0)?e:t(n,e.prev())},$(document).on("keyup","input, textarea, [contenteditable]",g.wait(function(){var t=$(this),n=t[0]&&m===t[0].value?t.text():t.val(),e=t.data("gun");e&&(g.lock=e).put(n)},99)),window.as=g,$.as=g}(),function(){function e(t){if(t){"#"==t[0]&&(t=t.slice(1));var n=t.split("/")[0];if($(".page").hide(),$("#"+n).show(),e.on!==n)return location.hash=t,(e.page[n]||{on:function(){}}).on(),e.on=n,e}}$(document).on("click","a, button",function(t){var n=$(this).attr("href")||"";0!==n.indexOf("http")&&(t.preventDefault(),e(n))}),e.page=function(t,n){return e.page[t]=e.page[t]||{on:n},e},e.render=function(t,n,e,a){var o=$($("#"+t).get(0)||$(".model").find(n).clone(!0).attr("id",t).appendTo(e));return $.each(a,function(t,n){$.isPlainObject(n)||o.find("[name='"+t+"']").val(n).text(n)}),o},window.onhashchange=function(){e(location.hash.slice(1))},$.as&&($.as.route=e),window.as?as.route=e:$.route=e}(),$(function(){$(".page").not(":first").hide(),$.as.route(location.hash.slice(1)),$(JOY.start=JOY.start||function(){$.as(document,gun,null,JOY.opt)}),$("body").attr("peers")&&(console.warn||console.log)('Warning: Please upgrade <body peers=""> to https://github.com/eraeco/joydb#peers !')}),function(){var t=window.JOY=function(){};t.auth=function(t,n,e,a){a||(a=e,e=0),!0!==a?gun.user().auth(t,n,e,a):gun.user().create(t,n)};var n,e=t.opt=window.CONFIG||{};$("link[type=peer]").each(function(){(n=n||[]).push($(this).attr("href"))}),window.gun||(e.peers=e.peers||n||((console.warn||console.log)("Warning: No peer provided, defaulting to DEMO peer. Do not run in production, or your data will be regularly wiped, reset, or deleted. For more info, check https://github.com/eraeco/joydb#peers !"),["https://gunjs.herokuapp.com/gun"])),window.gun=window.gun||Gun(e),gun.on("auth",function(t){console.log("Your namespace is publicly available at",t.soul)})}();