!function(){function t(e,r){return r?require(e):e.slice?t[n(e)]:function(r,a){e(r={exports:{}}),t[n(a)]=r.exports};function n(t){return t.split("/").slice(-1).toString().replace(".js","")}}if("undefined"!=typeof module)var e=module;t(function(t){"undefined"!=typeof window&&(t.window=window);var r=(t.window||t).SEA||{};(r.window=t.window)&&(r.window.SEA=r);try{void 0!==e&&(e.exports=r)}catch(t){}t.exports=r})(t,"./root"),t(function(e){var r=t("./root");try{r.window&&location.protocol.indexOf("s")<0&&location.host.indexOf("localhost")<0&&location.protocol.indexOf("file:")<0&&(location.protocol="https:")}catch(t){}})(t,"./https"),t(function(t){"undefined"==typeof btoa&&("undefined"==typeof Buffer&&(global.Buffer=require("buffer").Buffer),global.btoa=function(t){return Buffer.from(t,"binary").toString("base64")},global.atob=function(t){return Buffer.from(t,"base64").toString("binary")})})(t,"./base64"),t(function(e){function r(){}t("./base64"),Object.assign(r,{from:Array.from}),r.prototype=Object.create(Array.prototype),r.prototype.toString=function(t,e,r){t=t||"utf8",e=e||0;const n=this.length;if("hex"===t){const t=new Uint8Array(this);return[...Array((r&&r+1||n)-e).keys()].map(r=>t[r+e].toString(16).padStart(2,"0")).join("")}return"utf8"===t?Array.from({length:(r||n)-e},(t,r)=>String.fromCharCode(this[r+e])).join(""):"base64"===t?btoa(this):void 0},e.exports=r})(t,"./array"),t(function(e){t("./base64");var r=t("./array");function n(...t){return console.warn("new SafeBuffer() is depreciated, please use SafeBuffer.from()"),n.from(...t)}n.prototype=Object.create(Array.prototype),Object.assign(n,{from(){if(!Object.keys(arguments).length||null==arguments[0])throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.");const t=arguments[0];let e;if("string"==typeof t){const n=arguments[1]||"utf8";if("hex"===n){const n=t.match(/([\da-fA-F]{2})/g).map(t=>parseInt(t,16));if(!n||!n.length)throw new TypeError("Invalid first argument for type 'hex'.");e=r.from(n)}else if("utf8"===n){const n=t.length,a=new Uint16Array(n);Array.from({length:n},(e,r)=>a[r]=t.charCodeAt(r)),e=r.from(a)}else if("base64"===n){const n=atob(t),a=n.length,o=new Uint8Array(a);Array.from({length:a},(t,e)=>o[e]=n.charCodeAt(e)),e=r.from(o)}else"binary"===n?e=r.from(t):console.info("SafeBuffer.from unknown encoding: "+n);return e}t.byteLength;if(t.byteLength?t.byteLength:t.length){let e;return t instanceof ArrayBuffer&&(e=new Uint8Array(t)),r.from(e||t)}},alloc:(t,e=0)=>r.from(new Uint8Array(Array.from({length:t},()=>e))),allocUnsafe:t=>r.from(new Uint8Array(Array.from({length:t}))),concat(t){if(!Array.isArray(t))throw new TypeError("First argument must be Array containing ArrayBuffer or Uint8Array instances.");return r.from(t.reduce((t,e)=>t.concat(Array.from(e)),[]))}}),n.prototype.from=n.from,n.prototype.toString=r.prototype.toString,e.exports=n})(t,"./buffer"),t(function(e){const r=t("./root"),n=t("./buffer"),a={Buffer:n};var o={};if(r.window&&(a.crypto=window.crypto||window.msCrypto,a.subtle=(a.crypto||o).subtle||(a.crypto||o).webkitSubtle,a.TextEncoder=window.TextEncoder,a.TextDecoder=window.TextDecoder,a.random=(t=>n.from(a.crypto.getRandomValues(new Uint8Array(n.alloc(t)))))),!a.TextDecoder){const{TextEncoder:t,TextDecoder:e}=require("text-encoding");a.TextDecoder=e,a.TextEncoder=t}if(!a.crypto)try{var i=t("crypto",1);Object.assign(a,{crypto:i,random:t=>n.from(i.randomBytes(t))});const{Crypto:e}=t("@peculiar/webcrypto",1);a.ossl=a.subtle=new e({directory:"ossl"}).subtle}catch(t){console.log("text-encoding and @peculiar/webcrypto may not be included by default, please add it to your package.json!")}e.exports=a})(t,"./shim"),t(function(e){var r=t("./root"),n=(t("./buffer"),{pbkdf2:{hash:{name:"SHA-256"},iter:1e5,ks:64},ecdsa:{pair:{name:"ECDSA",namedCurve:"P-256"},sign:{name:"ECDSA",hash:{name:"SHA-256"}}},ecdh:{name:"ECDH",namedCurve:"P-256"},jwk:function(t,e){var r={kty:"EC",crv:"P-256",x:(t=t.split("."))[0],y:t[1],ext:!0};return r.key_ops=e?["sign"]:["verify"],e&&(r.d=e),r},keyToJwk:function(t){return{kty:"oct",k:t.toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,""),ext:!1,alg:"A256GCM"}},recall:{validity:43200,hook:function(t){return t}},check:function(t){return"string"==typeof t&&"SEA{"===t.slice(0,4)},parse:function(t){try{var e="string"==typeof t;return e&&"SEA{"===t.slice(0,4)&&(t=t.slice(3)),e?JSON.parse(t):t}catch(t){}return t}});r.opt=n,e.exports=n})(t,"./settings"),t(function(e){var r=t("./shim");e.exports=async function(t,e){var n="string"==typeof t?t:JSON.stringify(t),a=await r.subtle.digest({name:e||"SHA-256"},(new r.TextEncoder).encode(n));return r.Buffer.from(a)}})(t,"./sha256"),t(function(e){const r=t("./shim"),n=r.subtle,a=r.ossl?r.ossl:n;e.exports=(t=>a.digest({name:"SHA-1"},new ArrayBuffer(t)))})(t,"./sha1"),t(function(e){var r=t("./root"),n=t("./shim"),a=t("./settings"),o=t("./sha256");r.work=r.work||(async(t,e,i,s)=>{try{var c=(e||{}).epub||e;s=s||{};if(c instanceof Function&&(i=c,c=void 0),t="string"==typeof t?t:JSON.stringify(t),"sha"===(s.name||"").toLowerCase().slice(0,3)){var u=n.Buffer.from(await o(t,s.name),"binary").toString(s.encode||"base64");if(i)try{i(u)}catch(t){console.log(t)}return u}c=c||n.random(9);var f=await(n.ossl||n.subtle).importKey("raw",(new n.TextEncoder).encode(t),{name:s.name||"PBKDF2"},!1,["deriveBits"]),p=await(n.ossl||n.subtle).deriveBits({name:s.name||"PBKDF2",iterations:s.iterations||a.pbkdf2.iter,salt:(new n.TextEncoder).encode(s.salt||c),hash:s.hash||a.pbkdf2.hash},f,s.length||8*a.pbkdf2.ks);t=n.random(t.length);var l=n.Buffer.from(p,"binary").toString(s.encode||"base64");if(i)try{i(l)}catch(t){console.log(t)}return l}catch(t){if(console.log(t),r.err=t,r.throw)throw t;return void(i&&i())}}),e.exports=r.work})(t,"./work"),t(function(e){var r=t("./root"),n=t("./shim");t("./settings");r.name=r.name||(async(t,e)=>{try{if(t)try{t()}catch(t){console.log(t)}return}catch(e){if(console.log(e),r.err=e,r.throw)throw e;return void(t&&t())}}),r.pair=r.pair||(async(t,e)=>{try{var a=n.ossl||n.subtle,o=await n.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!0,["sign","verify"]).then(async t=>{var e={};e.priv=(await n.subtle.exportKey("jwk",t.privateKey)).d;var r=await n.subtle.exportKey("jwk",t.publicKey);return e.pub=r.x+"."+r.y,e});try{var i=await a.generateKey({name:"ECDH",namedCurve:"P-256"},!0,["deriveKey"]).then(async t=>{var e={};e.epriv=(await a.exportKey("jwk",t.privateKey)).d;var r=await a.exportKey("jwk",t.publicKey);return e.epub=r.x+"."+r.y,e})}catch(t){if(r.window)throw t;if("Error: ECDH is not a supported algorithm"!=t)throw t;console.log("Ignoring ECDH...")}i=i||{};var s={pub:o.pub,priv:o.priv,epub:i.epub,epriv:i.epriv};if(t)try{t(s)}catch(t){console.log(t)}return s}catch(e){if(console.log(e),r.err=e,r.throw)throw e;return void(t&&t())}}),e.exports=r.pair})(t,"./pair"),t(function(e){var r,n=t("./root"),a=t("./shim"),o=t("./settings"),i=t("./sha256");n.sign=n.sign||(async(t,e,s,c)=>{try{if(c=c||{},(e||c).priv||(e=await n.I(null,{what:t,how:"sign",why:c.why})),r===t)throw"`undefined` not allowed.";var u=o.parse(t),f=c.check=c.check||u;if(n.verify&&(n.opt.check(f)||f&&f.s&&f.m)&&r!==await n.verify(f,e)){var p=o.parse(f);if(c.raw||(p="SEA"+JSON.stringify(p)),s)try{s(p)}catch(t){console.log(t)}return p}var l=e.pub,y=e.priv,h=o.jwk(l,y),d=await i(u),w=await(a.ossl||a.subtle).importKey("jwk",h,{name:"ECDSA",namedCurve:"P-256"},!1,["sign"]).then(t=>(a.ossl||a.subtle).sign({name:"ECDSA",hash:{name:"SHA-256"}},t,new Uint8Array(d)));p={m:u,s:a.Buffer.from(w,"binary").toString(c.encode||"base64")};if(c.raw||(p="SEA"+JSON.stringify(p)),s)try{s(p)}catch(t){console.log(t)}return p}catch(t){if(console.log(t),n.err=t,n.throw)throw t;return void(s&&s())}}),e.exports=n.sign})(t,"./sign"),t(function(e){var r,n=t("./root"),a=t("./shim"),o=t("./settings"),i=t("./sha256");n.verify=n.verify||(async(t,e,s,c)=>{try{var u=o.parse(t);if(!1===e){var f=o.parse(u.m);if(s)try{s(f)}catch(t){console.log(t)}return f}c=c||{};var p,l,y,h=e.pub||e,d=n.opt.slow_leak?await n.opt.slow_leak(h):await(a.ossl||a.subtle).importKey("jwk",o.jwk(h),{name:"ECDSA",namedCurve:"P-256"},!1,["verify"]),w=await i(u.m);try{if(p=a.Buffer.from(u.s,c.encode||"base64"),l=new Uint8Array(p),!(y=await(a.ossl||a.subtle).verify({name:"ECDSA",hash:{name:"SHA-256"}},d,l,new Uint8Array(w))))throw"Signature did not match."}catch(r){if(n.opt.fallback)return await n.opt.fall_verify(t,e,s,c)}var g=y?o.parse(u.m):r;if(s)try{s(g)}catch(t){console.log(t)}return g}catch(t){if(console.log(t),n.err=t,n.throw)throw t;return void(s&&s())}}),e.exports=n.verify;var s={},c=(n.opt.slow_leak=(t=>{if(s[t])return s[t];var e=o.jwk(t);return s[t]=(a.ossl||a.subtle).importKey("jwk",e,{name:"ECDSA",namedCurve:"P-256"},!1,["verify"]),s[t]}),n.opt);n.opt.fall_verify=async function(t,e,s,u,f){if(f===n.opt.fallback)throw"Signature did not match";f=f||1;var p=t||"";t=n.opt.unpack(t)||t;var l,y,h,d=o.parse(t),w=e.pub||e,g=await n.opt.slow_leak(w),b=f<=n.opt.fallback?a.Buffer.from(await a.subtle.digest({name:"SHA-256"},(new a.TextEncoder).encode(o.parse(d.m)))):await i(d.m);try{if(l=a.Buffer.from(d.s,u.encode||"base64"),y=new Uint8Array(l),!(h=await(a.ossl||a.subtle).verify({name:"ECDSA",hash:{name:"SHA-256"}},g,y,new Uint8Array(b))))throw"Signature did not match."}catch(t){if(l=a.Buffer.from(d.s,"utf8"),y=new Uint8Array(l),!(h=await(a.ossl||a.subtle).verify({name:"ECDSA",hash:{name:"SHA-256"}},g,y,new Uint8Array(b))))throw"Signature did not match."}var v=h?o.parse(d.m):r;if(c.fall_soul=p["#"],c.fall_key=p["."],c.fall_val=t,c.fall_state=p[">"],s)try{s(v)}catch(t){console.log(t)}return v},n.opt.fallback=2})(t,"./verify"),t(function(e){var r=t("./shim"),n=t("./settings"),a=t("./sha256");e.exports=(async(t,e,o)=>{const i=t+(e||r.random(8)).toString("utf8"),s=r.Buffer.from(await a(i),"binary"),c=n.keyToJwk(s);return await r.subtle.importKey("jwk",c,{name:"AES-GCM"},!1,["encrypt","decrypt"])})})(t,"./aeskey"),t(function(e){var r=t("./root"),n=t("./shim"),a=(t("./settings"),t("./aeskey"));r.encrypt=r.encrypt||(async(t,e,o,i)=>{try{i=i||{};var s=(e||i).epriv||e;if(void 0===t)throw"`undefined` not allowed.";s||(s=(e=await r.I(null,{what:t,how:"encrypt",why:i.why})).epriv||e);var c="string"==typeof t?t:JSON.stringify(t),u={s:n.random(9),iv:n.random(15)},f=await a(s,u.s,i).then(t=>n.subtle.encrypt({name:i.name||"AES-GCM",iv:new Uint8Array(u.iv)},t,(new n.TextEncoder).encode(c))),p={ct:n.Buffer.from(f,"binary").toString(i.encode||"base64"),iv:u.iv.toString(i.encode||"base64"),s:u.s.toString(i.encode||"base64")};if(i.raw||(p="SEA"+JSON.stringify(p)),o)try{o(p)}catch(t){console.log(t)}return p}catch(t){if(console.log(t),r.err=t,r.throw)throw t;return void(o&&o())}}),e.exports=r.encrypt})(t,"./encrypt"),t(function(e){var r=t("./root"),n=t("./shim"),a=t("./settings"),o=t("./aeskey");r.decrypt=r.decrypt||(async(t,e,i,s)=>{try{s=s||{};var c=(e||s).epriv||e;c||(c=(e=await r.I(null,{what:t,how:"decrypt",why:s.why})).epriv||e);var u,f,p,l=a.parse(t);try{u=n.Buffer.from(l.s,s.encode||"base64"),f=n.Buffer.from(l.iv,s.encode||"base64"),p=n.Buffer.from(l.ct,s.encode||"base64");var y=await o(c,u,s).then(t=>n.subtle.decrypt({name:s.name||"AES-GCM",iv:new Uint8Array(f),tagLength:128},t,new Uint8Array(p)))}catch(n){if("utf8"===s.encode)throw"Could not decrypt";if(r.opt.fallback)return s.encode="utf8",await r.decrypt(t,e,i,s)}var h=a.parse(new n.TextDecoder("utf8").decode(y));if(i)try{i(h)}catch(t){console.log(t)}return h}catch(t){if(console.log(t),r.err=t,r.throw)throw t;return void(i&&i())}}),e.exports=r.decrypt})(t,"./decrypt"),t(function(e){var r=t("./root"),n=t("./shim");t("./settings");r.secret=r.secret||(async(t,e,o,i)=>{try{i=i||{},e&&e.epriv&&e.epub||(e=await r.I(null,{what:t,how:"secret",why:i.why}));var s=t.epub||t,c=e.epub,u=e.epriv,f=n.ossl||n.subtle,p=a(s),l=Object.assign({public:await f.importKey(...p,!0,[])},{name:"ECDH",namedCurve:"P-256"}),y=a(c,u),h=await f.importKey(...y,!1,["deriveBits"]).then(async t=>{var e=await f.deriveBits(l,t,256),r=new Uint8Array(e),n=await f.importKey("raw",r,{name:"AES-GCM",length:256},!0,["encrypt","decrypt"]);return f.exportKey("jwk",n).then(({k:t})=>t)});if(o)try{o(h)}catch(t){console.log(t)}return h}catch(t){if(console.log(t),r.err=t,r.throw)throw t;return void(o&&o())}});var a=(t,e)=>{var[r,n]=t.split("."),a=e?{d:e}:{};return["jwk",Object.assign(a,{x:r,y:n,kty:"EC",crv:"P-256",ext:!0}),{name:"ECDH",namedCurve:"P-256"}]};e.exports=r.secret})(t,"./secret"),t(function(r){var n=t("./shim"),a=t("./root");a.work=t("./work"),a.sign=t("./sign"),a.verify=t("./verify"),a.encrypt=t("./encrypt"),a.decrypt=t("./decrypt"),a.random=a.random||n.random,a.Buffer=a.Buffer||t("./buffer"),a.keyid=a.keyid||(async t=>{try{const e=Buffer.concat(t.replace(/-/g,"+").replace(/_/g,"/").split(".").map(t=>Buffer.from(t,"base64"))),r=Buffer.concat([Buffer.from([153,e.length/256,e.length%256]),e]),n=await sha1hash(r),a=Buffer.from(n,"binary");return a.toString("hex",a.length-8)}catch(t){throw console.log(t),t}});var o=(a.window||{}).Gun||t((void 0===e?".":"")+"./gun",1);o.SEA=a,a.GUN=a.Gun=o,r.exports=a})(t,"./sea"),t(function(e){t("./sea").Gun.chain.then=function(t,e){var r=this,n=new Promise(function(t,n){r.once(t,e)});return t?n.then(t):n}})(t,"./then"),t(function(e){var r=t("./sea").Gun;t("./then");function n(t){this._={$:this}}n.prototype=function(){function t(){}return t.prototype=r.chain,new t}(),n.prototype.constructor=n,r.chain.user=function(t){var e,a=this.back(-1);if(t)return a.get("~"+t);if(e=a.back("user"))return e;var o=a=a._,i=o.opt.uuid||r.state.lex;return(o=(e=o.user=this.chain(new n))._).opt={},o.opt.uuid=function(t){var e=i(),r=a.user;return r&&(r=r.is)&&(r=r.pub)?(e=e+"~"+r+"/",t&&t.call&&t(null,e),e):e},e},r.User=n,e.exports=n})(t,"./user"),t(function(e){var r=t("./sea"),n=t("./user"),a=(t("./settings"),r.Gun),o=function(){};n.prototype.create=function(t,e,n,i){var s=this,c=s._,u=s.back(-1);if(n=n||o,c.ing)return n({err:a.log("User is already being created or authenticated!"),wait:!0}),s;c.ing=!0,i=i||{};var f={};return f.a=function(t){if(f.pubs=t,t&&!i.already){var o={err:a.log("User already created!")};return c.ing=!1,n(o),void s.leave()}f.salt=a.text.random(64),r.work(e,f.salt,f.b)},f.b=function(t){f.proof=t,r.pair(f.c)},f.c=function(e){var r;f.pair=e||{},(r=c.root.user)&&(r._.sea=e,r.is={pub:e.pub,epub:e.epub,alias:t}),f.data={pub:e.pub},f.d()},f.d=function(){f.data.alias=t,f.e()},f.e=function(){f.data.epub=f.pair.epub,r.encrypt({priv:f.pair.priv,epriv:f.pair.epriv},f.proof,f.f,{raw:1})},f.f=function(t){f.data.auth=JSON.stringify({ek:t,s:f.salt}),f.g(f.data.auth)},f.g=function(r){var i;f.data.auth=f.data.auth||r,u.get(i="~"+f.pair.pub).put(f.data),u.get("~@"+t).put(a.obj.put({},i,a.val.link.ify(i))),setTimeout(function(){c.ing=!1,n({ok:0,pub:f.pair.pub}),o===n&&s.auth(t,e)},10)},u.get("~@"+t).once(f.a),s},n.prototype.auth=function(t,e,n,o){var i=this,s=i._,c=i.back(-1);if(n=n||function(){},s.ing)return n({err:a.log("User is already being created or authenticated!"),wait:!0}),i;s.ing=!0,o=o||{};var u,f=t&&(t.pub||t.epub)?t:e&&(e.pub||e.epub)?e:null,p={};return p.a=function(t){if(!t)return p.b();if(!t.pub){var e=[];return a.node.is(t,function(t){e.push(t)}),p.b(e)}if(p.name)return p.f(t);p.c((p.data=t).auth)},p.b=function(t){var e=(p.list=(p.list||[]).concat(t||[])).shift();if(u===e)return p.name?p.err("Your user account is not published for dApps to access, please consider syncing it online, or allowing local access by adding your device as a peer."):p.err("Wrong user or password.");c.get(e).once(p.a)},p.c=function(t){return u===t?p.b():a.text.is(t)?p.c(a.obj.ify(t)):void r.work(e,(p.auth=t).s,p.d,p.enc)},p.d=function(t){r.decrypt(p.auth.ek,t,p.e,p.enc)},p.e=function(t){if(u===t)return p.enc?(p.enc=null,p.b()):(p.enc={encode:"utf8"},p.c(p.auth));p.half=t,p.f(p.data)},p.f=function(t){if(!t||!t.pub)return p.b();var e=p.half||{};p.g({pub:t.pub,epub:t.epub,priv:e.priv,epriv:e.epriv})},p.g=function(u){p.pair=u;var f=c._.user,l=f._,y=(l.tag,l.opt);(l=f._=c.get("~"+u.pub)._).opt=y,f.is={pub:u.pub,epub:u.epub,alias:t},l.sea=p.pair,s.ing=!1;try{e&&!a.obj.has(a.obj.ify(s.root.graph["~"+u.pub].auth),":")&&(o.shuffle=o.change=e)}catch(t){}if(o.change?p.z():n(l),r.window&&(i.back("user")._.opt||o).remember)try{var h={};(h=window.sessionStorage).recall=!0,h.alias=t,h.tmp=e}catch(t){}try{c._.on("auth",l)}catch(t){a.log("Your 'auth' callback crashed with:",t)}},p.z=function(){p.salt=a.text.random(64),r.work(o.change,p.salt,p.y)},p.y=function(t){r.encrypt({priv:p.pair.priv,epriv:p.pair.epriv},t,p.x,{raw:1})},p.x=function(t){p.w(JSON.stringify({ek:t,s:p.salt}))},p.w=function(t){if(o.shuffle){console.log("migrate core account from UTF8 & shuffle");var e=a.obj.to(p.data);a.obj.del(e,"_"),e.auth=t,c.get("~"+p.pair.pub).put(e)}c.get("~"+p.pair.pub).get("auth").put(t,n)},p.err=function(t){var e={err:a.log(t||"User cannot be found!")};s.ing=!1,n(e)},p.plugin=function(t){if(!(p.name=t))return p.err();var e=[t];"~"!==t[0]&&(e[1]="~"+t,e[2]="~@"+t),p.b(e)},f?p.g(f):t?c.get("~@"+t).once(p.a):t||e||r.name(p.plugin),i},n.prototype.pair=function(){console.log("user.pair() IS DEPRECATED AND WILL BE DELETED!!!");return!!this.is&&this._.sea},n.prototype.leave=function(t,e){var n=this.back(-1)._.user;if(n&&(delete n.is,delete n._.is,delete n._.sea),r.window)try{var a={};delete(a=window.sessionStorage).alias,delete a.tmp,delete a.recall}catch(t){}return this},n.prototype.delete=async function(t,e,r){console.log("user.delete() IS DEPRECATED AND WILL BE MOVED TO A MODULE!!!");this.back(-1);var n=this.back("user");try{n.auth(t,e,function(t){(n.is||{}).pub;n.map().once(function(){this.put(null)}),n.leave(),(r||o)({ok:0})})}catch(t){a.log("User.delete failed! Error:",t)}return this},n.prototype.recall=function(t,e){var n=this.back(-1);if((t=t||{})&&t.sessionStorage){if(r.window)try{var a;(a=window.sessionStorage)&&(n._.opt.remember=!0,(this.back("user")._.opt||t).remember=!0,(a.recall||a.alias&&a.tmp)&&n.user().auth(a.alias,a.tmp,e))}catch(t){}return this}return this},n.prototype.alive=async function(){console.log("user.alive() IS DEPRECATED!!!");const t=this.back(-1);try{return await authRecall(t),t._.user._}catch(t){const e="No session!";throw a.log(e),{err:e}}},n.prototype.trust=async function(t){a.is(t)&&t.get("pub").get((t,e)=>{console.log(t,e)}),t.get("trust").get(path).put(theirPubkey)},n.prototype.grant=function(t,e){console.log("`.grant` API MAY BE DELETED OR CHANGED OR RENAMED, DO NOT USE!");var n=this.back(-1).user(),a=n._.sea,o="";return this.back(function(t){t.is||(o+=t.get||"")}),async function(){var i,s=await n.get("grant").get(a.pub).get(o).then();(s=await r.decrypt(s,a))||(s=r.random(16).toString(),i=await r.encrypt(s,a),n.get("grant").get(a.pub).get(o).put(i));var c=t.get("pub").then(),u=t.get("epub").then();c=await c,u=await u;var f=await r.secret(u,a);i=await r.encrypt(s,f),n.get("grant").get(c).get(o).put(i,e)}(),this},n.prototype.secret=function(t,e){console.log("`.secret` API MAY BE DELETED OR CHANGED OR RENAMED, DO NOT USE!");var n=this,a=n.back(-1).user(),o=a.pair(),i="";return n.back(function(t){t.is||(i+=t.get||"")}),async function(){var s,c=await a.get("trust").get(o.pub).get(i).then();(c=await r.decrypt(c,o))||(c=r.random(16).toString(),s=await r.encrypt(c,o),a.get("trust").get(o.pub).get(i).put(s)),s=await r.encrypt(t,c),n.put(s,e)}(),n},e.exports=n})(t,"./create"),t(function(e){var r=t("./sea"),n=r.Gun;function a(t){var e,o=this,i=o.as,s=t.put,c=s["#"],u=s["."],f=s[":"],p=s[">"],l=t["#"];if(c&&u)if((t._||"").faith&&(i.opt||"").faith&&"function"==typeof t._)r.verify(r.opt.pack(s),!1,function(e){s["="]=r.opt.unpack(e),o.to.next(t)});else{var y=function(t){i.on("in",{"@":l,err:t})};(t._||"").DBG&&((t._||"").DBG.c=+new Date),0<=c.indexOf("<?")&&(e=parseFloat(c.split("<?")[1]||""))&&p<n.state()-1e3*e?(e=t._)&&(e=e.lot)&&e.more--:"~@"!==c?"~@"!==c.slice(0,2)?(e=r.opt.pub(c))?a.pub(o,t,f,u,c,i,y,i.user||"",e):0<=c.indexOf("#")?a.hash(o,t,f,u,c,i,y):a.any(o,t,f,u,c,i,y,i.user||""):a.pubs(o,t,f,u,c,i,y):a.alias(o,t,f,u,c,i,y)}}n.on("opt",function(t){t.sea||(t.sea={own:{}},t.on("put",a,t)),this.to.next(t)}),a.hash=function(t,e,n,a,o,i,s){r.work(n,null,function(r){if(r&&r===a.split("#").slice(-1)[0])return t.to.next(e);s("Data hash not same as hash!")},{name:"SHA-256"})},a.alias=function(t,e,r,n,a,i,s){return r?"~@"+n===o(r)?t.to.next(e):void s("Alias not same!"):s("Data must exist!")},a.pubs=function(t,e,r,n,a,i,s){return r?n===o(r)?t.to.next(e):void s("Alias not same!"):s("Alias must exist!")},a.pub=function(t,e,n,a,i,s,u,f,p){var l;if("pub"===a&&"~"+p===i)return n===p?t.to.next(e):u("Account not same!");(l=f.is)&&p===l.pub?r.sign(r.opt.pack(e.put),f._.sea,function(a){if(c===a)return u(r.err||"Signature fail.");(l=o(n))&&((s.sea.own[l]=s.sea.own[l]||{})[p]=1),e.put[":"]=JSON.stringify({":":l=r.opt.unpack(a.m),"~":a.s}),e.put["="]=l,t.to.next(e)},{raw:1}):r.verify(r.opt.pack(e.put),p,function(n){var a;if(n=r.opt.unpack(n),c===n)return u("Unverified data.");(a=o(n))&&p===r.opt.pub(a)&&((s.sea.own[a]=s.sea.own[a]||{})[p]=1),e.put["="]=n,t.to.next(e)})},a.any=function(t,e,r,n,a,o,i,s){if(o.opt.secure)return i("Soul missing public key at '"+n+"'.");o.on("secure",function(e){if(this.off(),!o.opt.secure)return t.to.next(e);i("Data cannot be changed.")}).on.on("secure",e)};var o=n.val.link.is;n.state.ify;var i=/[^\w_-]/;r.opt.pub=function(t){if(t&&(t=t.split("~"))&&(t=t[1])&&(t=t.split(i).slice(0,2))&&2==t.length&&"@"!==(t[0]||"")[0])return t=t.slice(0,2).join(".")},r.opt.prep=function(t,e,a,o){return{"#":o,".":e,":":r.opt.parse(t),">":n.state.is(a,e)}},r.opt.pack=function(t,e,a,o){if(r.opt.check(t))return t;var i=n.obj.ify(t&&t[":"]||t)||"",s=i["~"];return s?{m:{"#":o||t["#"],".":e||t["."],":":i[":"],">":t[">"]||n.state.is(a,e)},s:s}:t};var s=r.opt;r.opt.unpack=function(t,e,a){var o;if(c!==t){if(t&&c!==(o=t[":"]))return o;if(e=e||s.fall_key,!a&&s.fall_val&&((a={})[e]=s.fall_val),e&&a){if(t===a[e])return t;if(!r.opt.check(a[e]))return t;var i=n.node.soul(a)||s.fall_soul,f=n.state.is(a,e)||s.fall_state;return t&&4===t.length&&i===t[0]&&e===t[1]&&u(f)===u(t[3])?t[2]:f<r.opt.shuffle_attack?t:void 0}}},r.opt.shuffle_attack=15463296e5;var c,u=Math.floor;n.val.rel.is,n.obj.ify})(t,"./index")}();