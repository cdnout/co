!function(e,n){"function"==typeof define&&define.amd?define(["../galleria","jquery"],function(t,i){return n(e,t,i)}):"object"==typeof module&&module.exports?module.exports=n(e,require("galleria"),require("jquery")):n(e,e.Galleria,e.jQuery)}(window,function(v,I,$){return I.addTheme({name:"folio",version:1.6,author:"Galleria",css:"galleria.folio.css",defaults:{transition:"pulse",thumbCrop:"width",imageCrop:!1,carousel:!1,show:!1,easing:"galleriaOut",trueFullscreen:!1,_webkitCursor:!1,_animate:!0,_center:!1,_onClick:null},init:function(a){I.requires(1.6,"This version of Folio theme requires Galleria version 1.6 or later"),this.addElement("preloader","loaded","close").append({container:"preloader",preloader:"loaded",stage:"close"});function e(t){s.$("info").css({left:s.finger?20:Math.max(20,$(v).width()/2-t/2+10)})}function u(t){return Math.max.apply(v,t)}function o(t,s){s=$.extend({speed:400,width:190,onbrick:function(){},onheight:function(){},delay:0,debug:!1},s);var r,h,c,i,e=(t=$(t)).children(),n=t.width(),l=Math.floor(n/s.width),d=[],a={float:"none",position:"absolute",display:I.SAFARI?"inline-block":"block"};if(p){var o=((n=g.width())-(l*m-10))/2;f.css("left",l?o:0)}if(t.data("colCount")!==l&&(t.data("colCount",l),e.length)){for(r=0;r<l;r++)d[r]=0;t.css("position","relative"),e.css(a).each(function(t,i){for(i=$(i),r=l-1;-1<r;r--)d[r]===(e=d,Math.min.apply(v,e))&&(h=r);var e,n,a,o;"number"==typeof(c={top:d[h],left:s.width*h}).top&&"number"==typeof c.left&&(s.speed?v.setTimeout((n=i,o=c,function(t){I.utils.animate(n,o,{easing:"galleriaOut",duration:a.speed,complete:a.onbrick})}),t*(a=s).delay):(i.css(c),s.onbrick.call(i)),i.data("height")||i.data("height",i.outerHeight(!0)),d[h]+=i.data("height"))}),(i=u(d))<0||"number"==typeof i&&(s.speed?t.animate({height:u(d)},s.speed,s.onheight):(t.height(u(d)),s.onheight.call(t)))}}var s=this,r=this.$("stage"),f=this.$("thumbnails"),g=this.$("thumbnails-container"),h=this.$("images"),i=this.$("info"),n=this.$("loader"),c=this.$("target"),l=0,d=c.width(),p=a._center,m=0,b=0,t=v.location.hash.substr(2);p&&this.$("container").addClass("center"),this.bind("fullscreen_enter",function(t){this.$("container").css("height","100%"),s.finger&&$.each(s._controls.slides,function(t,i){$(i.container).show()})}),this.bind("fullscreen_exit",function(t){this.getData().iframe&&($(this._controls.getActive().container).find("iframe").remove(),this.$("container").removeClass("iframe")),I.TOUCH||$(s._controls.getActive().container).hide(),s.finger&&$.each(s._controls.slides,function(t,i){$(i.container).hide()})}),this._fullscreen.beforeExit=function(t){i.hide(),I.IE8&&I.utils.animate(s.getActiveImage(),{opacity:0},{duration:200}),I.utils.animate(r[0],{opacity:0},{duration:200,complete:function(){r.css({visibility:"hidden",opacity:1}),f.show(),I.utils.animate(f[0],{opacity:1},{duration:200}),t()}})},this.bind("thumbnail",function(t){this.addElement("plus");var i=t.thumbTarget,e=this.$("plus").css({display:"block"}).insertAfter(i),n=$(i).parent().data("index",t.index);a.showInfo&&this.hasInfo(t.index)&&e.append("<span>"+this.getData(t.index).title+"</span>"),m=m||$(i).parent().outerWidth(!0),b=b||m-$(i).width(),$(i).css("opacity",0),n.off(a.thumbEventType),I.IE?e.hide():e.css("opacity",0),I.TOUCH?n.on("touchstart",function(){e.css("opacity",1)}).on("touchend",function(){e.hide()}):n.hover(function(){I.IE?e.show():e.stop().css("opacity",1)},function(){I.IE?e.hide():e.stop().animate({opacity:0},300)}),l++,this.$("loaded").css("width",l/this.getDataLength()*100+"%"),l===this.getDataLength()&&(this.$("preloader").fadeOut(100),f.data("colCount",null),o(f,{width:m,speed:a._animate?400:0,onbrick:function(){var t,i=$(this).find("img, .img");v.setTimeout((t=i,function(){I.utils.animate(t,{opacity:1},{duration:a.transition_speed,complete:function(){$(t).parent().css("background","#000")}}),t.parent().off("click:fast click").on("click:fast",function(){var t=$(this).data("index");I.IE<9&&$(this).find(".galleria-plus").hide(),$.isFunction(a._onClick)?a._onClick.call(s,s.getData(t)):(r.css({visibility:"visible",opacity:0}),s.$("target").height(s.$("target").height()),s.finger&&h.css("opacity",0),I.utils.animate(f[0],{opacity:0},{duration:100,complete:function(){f.hide(),s.enterFullscreen(),I.utils.animate(r[0],{opacity:1},{duration:200,complete:function(){s.finger&&(h.animate({opacity:1}),s.finger.moveTo(t)),s.finger&&s.finger.setPosition(-t*s.finger.width),s.show(t)}})}}))})}),a._animate?100*i.parent().data("index"):0)},onheight:function(){c.height(f.height())}}))}),this.bind("loadstart",function(t){t.cached||n.show()}),this.bind("data",function(){l=0}),this.bind("loadfinish",function(t){t.galleriaData&&(n.hide(),this.finger||i.hide(),this.hasInfo()&&a.showInfo&&this.isFullscreen()&&!this.finger&&i.fadeIn(a.transition?a.transitionSpeed:0),e($(t.imageTarget).width()),this.finger&&a.showInfo&&i.show())}),I.TOUCH||a._webkitCursor||(this.addIdleState(this.get("image-nav-left"),{left:-100}),this.addIdleState(this.get("image-nav-right"),{right:-100}),this.addIdleState(this.get("info"),{opacity:0})),this.$("container").css({width:a.width,height:"auto"}),a._webkitCursor&&I.WEBKIT&&!I.TOUCH&&this.$("image-nav-right,image-nav-left").addClass("cur"),I.TOUCH&&this.setOptions({transition:"fadeslide",initialTransition:!1}),this.$("close").on("click:fast",function(){s.exitFullscreen()}),I.History&&t&&(r.css("visibility","visible"),f.css("opacity",0),this.$("preloader").hide(),this.enterFullscreen(function(){this.show(parseInt(t,10))}));function y(t){if(w=null,s.isFullscreen())s.getActiveImage()&&e(s.getActiveImage().width);else{var i=g.width();i!==d&&(d=i,o(f,{width:m,delay:50,debug:!0,onheight:function(){c.height(f.height())}}))}}var w=null;$(v).resize(function(){w&&clearTimeout(w),w=setTimeout(y,200)}),y()}}),I});