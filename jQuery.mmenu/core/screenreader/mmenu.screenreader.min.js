import Mmenu from"./../oncanvas/mmenu.oncanvas";import options from"./_options";import configs from"./_configs";import translate from"./translations/translate";import{extendShorthandOptions}from"./_options";import*as DOM from"../../_modules/dom";import{extend}from"../../_modules/helpers";translate(),Mmenu.options.screenReader=options,Mmenu.configs.screenReader=configs;export default function(){var n=this,i=extendShorthandOptions(this.opts.screenReader);this.opts.screenReader=extend(i,Mmenu.options.screenReader);var t=this.conf.screenReader;i.aria&&(this.bind("initAddons:after",function(){n.bind("initMenu:after",function(){this.trigger("initMenu:after:sr-aria",[].slice.call(arguments))}),n.bind("initNavbar:after",function(){this.trigger("initNavbar:after:sr-aria",[].slice.call(arguments))}),n.bind("openPanel:start",function(){this.trigger("openPanel:start:sr-aria",[].slice.call(arguments))}),n.bind("close:start",function(){this.trigger("close:start:sr-aria",[].slice.call(arguments))}),n.bind("close:finish",function(){this.trigger("close:finish:sr-aria",[].slice.call(arguments))}),n.bind("open:start",function(){this.trigger("open:start:sr-aria",[].slice.call(arguments))}),n.bind("initOpened:after",function(){this.trigger("initOpened:after:sr-aria",[].slice.call(arguments))})}),this.bind("updateListview",function(){n.node.pnls.querySelectorAll(".mm-listitem").forEach(function(n){Mmenu.sr_aria(n,"hidden",n.matches(".mm-hidden"))})}),this.bind("openPanel:start",function(i){var t=DOM.find(n.node.pnls,".mm-panel").filter(function(n){return n!==i}).filter(function(n){return!n.parentElement.matches(".mm-panel")}),e=[i];DOM.find(i,".mm-listitem_vertical .mm-listitem_opened").forEach(function(n){e.push.apply(e,DOM.children(n,".mm-panel"))}),t.forEach(function(n){Mmenu.sr_aria(n,"hidden",!0)}),e.forEach(function(n){Mmenu.sr_aria(n,"hidden",!1)})}),this.bind("closePanel",function(n){Mmenu.sr_aria(n,"hidden",!0)}),this.bind("initPanel:after",function(n){DOM.find(n,".mm-btn").forEach(function(n){Mmenu.sr_aria(n,"haspopup",!0);var i=n.getAttribute("href");i&&Mmenu.sr_aria(n,"owns",i.replace("#",""))})}),this.bind("initNavbar:after",function(n){var i=DOM.children(n,".mm-navbar")[0],t=i.matches(".mm-hidden");Mmenu.sr_aria(i,"hidden",t)}),i.text&&"parent"==this.opts.navbar.titleLink&&this.bind("initNavbar:after",function(n){var i=DOM.children(n,".mm-navbar")[0],t=!!i.querySelector(".mm-btn_prev");Mmenu.sr_aria(DOM.find(i,".mm-navbar__title")[0],"hidden",t)})),i.text&&(this.bind("initAddons:after",function(){n.bind("setPage:after",function(){this.trigger("setPage:after:sr-text",[].slice.call(arguments))}),n.bind("initBlocker:after",function(){this.trigger("initBlocker:after:sr-text",[].slice.call(arguments))})}),this.bind("initNavbar:after",function(i){var e=DOM.children(i,".mm-navbar")[0];if(e){var r=DOM.children(e,".mm-btn_prev")[0];r&&(r.innerHTML=Mmenu.sr_text(n.i18n(t.text.closeSubmenu)))}}),this.bind("initListview:after",function(i){var e=i.closest(".mm-panel").mmParent;if(e){var r=DOM.children(e,".mm-btn_next")[0];if(r){var a=n.i18n(t.text[r.parentElement.matches(".mm-listitem_vertical")?"toggleSubmenu":"openSubmenu"]);r.innerHTML+=Mmenu.sr_text(a)}}}))}()();