/*!
* js-data-angular
* @version 3.2.4 - Homepage <https://github.com/js-data/js-data-angular>
* @copyright (c) 2014-2016 js-data-angular project authors
* @license MIT <https://github.com/js-data/js-data-angular/blob/master/LICENSE>
*
* @overview Angular wrapper for js-data.
*/
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("js-data"),require("angular"),function(){try{return require("axios")}catch(e){}}()):"function"==typeof define&&define.amd?define(["js-data","angular"],function(r,a){return t(r,a,e.axios)}):"object"==typeof exports?exports.jsDataAngularModuleName=t(require("js-data"),require("angular"),function(){try{return require("axios")}catch(e){}}()):e.jsDataAngularModuleName=t(e.JSData,e.angular,e.axios)}(this,function(e,t,r){return function(e){function t(a){if(r[a])return r[a].exports;var n=r[a]={exports:{},id:a,loaded:!1};return e[a].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e){var t=void 0;try{t=r(5)(e.project)}catch(e){}t||(t=window[e.class]),t&&(e.loaded=!0,u.module("js-data").provider(e.class,function(){var e=this;e.defaults={},e.$get=[function(){return new t(e.defaults)}]}))}var i=r(1),s=r(2),u=r(4),o=i.DSUtils,f=i.DSErrors,l=o.get,d=o.isString,c=o.isNumber,p=o.isObject,h=o.set,m=o.resolveId,v=[{project:"js-data-localstorage",name:"localstorage",class:"DSLocalStorageAdapter"},{project:"js-data-localforage",name:"localforage",class:"DSLocalForageAdapter"},{project:"js-data-firebase",name:"firebase",class:"DSFirebaseAdapter"},{project:"js-data-sql",name:"sql",class:"DSSqlAdapter"}],y=["compute","digest","eject","inject"],g=function e(){a(this,e);var t={};this.defaults=t,this.$get=["$http","DS",function(e,r){t.http=t.http||e;var a=new s(t);return r.registerAdapter("http",a,{default:!0}),a}]},b=function e(){function t(){function e(e){var t=f.defer();try{e(u.bind(t,t.resolve),u.bind(t,t.reject))}catch(e){t.reject(e)}return t.promise}for(var t=arguments.length,a=Array(t),n=0;t>n;n++)a[n]=arguments[n];var s=a[a.length-2],f=a[a.length-1],l=new i.DS(r.defaults),d={};if(e.all=f.all,e.when=f.when,e.reject=f.reject,o.Promise=e,a.length)for(var c=0;c<a.length;c++)for(var p=0;p<v.length;p++)if(v[p].loaded&&!v[p].registered){v[p].registered=!0,l.registerAdapter(v[p].name,a[c]);break}for(var h=function(){var e=y[m];d[e]=l[e],l[e]=function(){for(var t=arguments.length,r=Array(t),a=0;t>a;a++)r[a]=arguments[a];return s.$$phase?d[e].apply(l,r):s.$apply(function(){return d[e].apply(l,r)})}},m=0;m<y.length;m++)h();return"function"==typeof Object.observe&&"function"==typeof Array.observe||s.$watch(function(){return l.observe.Platform.performMicrotaskCheckpoint()}),l}a(this,e);for(var r=this,n=[],s=0;s<v.length;s++)v[s].loaded&&n.push(v[s].class);r.defaults={},i.DS.prototype.bindAll=function(e,t,r,a,n){var i=this;if(t=t||{},!i.definitions[e])throw new f.NER(e);if(!p(t))throw new f.IA('"params" must be an object!');if(!p(r))throw new f.IA('"scope" must be an object!');if(!d(a))throw new f.IA('"expr" must be a string!');var s=i.definitions[e].idAttribute;try{return r.$watch(function(){return i.lastModified(e)},function(){var o=i.filter(e,t);o&&o.length&&u.forEach(o,function(t){i.compute(e,l(t,s))}),h(r,a,o),n&&n(null,o)})}catch(e){if(!n)throw e;n(e)}},i.DS.prototype.bindOne=function(e,t,r,a,n){var i=this;if(t=m(i.definitions[e],t),!i.definitions[e])throw new f.NER(e);if(!d(t)&&!c(t))throw new f.IA('"id" must be a string or a number!');if(!p(r))throw new f.IA('"scope" must be an object!');if(!d(a))throw new f.IA('"expr" must be a string!');try{return r.$watch(function(){return i.lastModified(e,t)},function(){var s=i.get(e,t);s&&i.compute(e,t),h(r,a,s),n&&n(null,s)})}catch(e){if(!n)throw e;n(e)}},n.push("$rootScope"),n.push("$q"),n.push(t),r.$get=n};u.module("js-data",["ng"]).value("DSUtils",o).value("DSErrors",f).value("DSVersion",i.version).provider("DS",b).provider("DSHttpAdapter",g).run(["DS","DSHttpAdapter",function(e,t){e.registerAdapter("http",t,{default:!0})}]);for(var x=0;x<v.length;x++)n(v[x]);e.exports="js-data";try{e.exports.name="js-data"}catch(e){}},function(t,r){t.exports=e},function(e,t,r){"use strict";function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){return void 0===e}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),o=r(1),f=null;try{f=r(3)}catch(e){}var l=o.DSUtils,d=l.deepMixIn,c=l.removeCircular,p=l.copy,h=l.makePath,m=l.isString,v=l.isNumber,y=function(){function e(){n(this,e)}return u(e,[{key:"queryTransform",value:function(e,t){return t}},{key:"deserialize",value:function(e,t){return t&&"data"in t?t.data:t}},{key:"serialize",value:function(e,t){return t}},{key:"log",value:function(){}},{key:"error",value:function(){}}]),e}(),g=y.prototype;g.basePath="",g.forceTrailingSlash="",g.httpConfig={},g.verbsUseBasePath=!1;var b=function(){function e(t){n(this,e),t||(t={}),this.defaults=new y,console&&(this.defaults.log=function(e,t){return console["function"==typeof console.info?"info":"log"](e,t)}),console&&(this.defaults.error=function(e,t){return console["function"==typeof console.error?"error":"log"](e,t)}),d(this.defaults,t),this.http=t.http||f}return u(e,[{key:"getEndpoint",value:function(e,t,r){r||(r={}),r.params=i(r.params)?{}:r.params;var n=r.hasOwnProperty("endpoint")?r.endpoint:e.endpoint,s=e.parents||(e.parent?a({},e.parent,{key:e.parentKey,field:e.parentField}):{});return l.forOwn(s,function(a,i){var s=void 0,u=a.key,o=a.field,f=e.getResource(i),d=r.params[u];if(d!==!1&&u&&f){if(delete r.params[u],l._sn(t)?s=e.get(t):l._o(t)&&(s=t),s&&(d=d||s[u]||(s[o]?s[o][f.idAttribute]:null)),d){delete r.endpoint;var c={};l.forOwn(r,function(e,t){c[t]=e}),n=l.makePath(this.getEndpoint(f,d,l._(f,c)),d,n)}}else d===!1&&delete r.params[u]},this),n}},{key:"getPath",value:function(e,t,r,a){var n=this;if(a||(a={}),m(a.urlPath))return h.apply(l,[a.basePath||t.basePath||n.defaults.basePath,a.urlPath]);var i=[a.basePath||t.basePath||n.defaults.basePath,this.getEndpoint(t,m(r)||v(r)||"create"===e?r:null,a)];return"find"!==e&&"update"!==e&&"destroy"!==e||i.push(r),h.apply(l,i)}},{key:"HTTP",value:function(e){function t(t,n){if(t=t||{},t instanceof Error)return r.defaults.error("FAILED: "+(t.message||"Unknown Error"),t),l.Promise.reject(t);if("object"===("undefined"==typeof t?"undefined":s(t))){var i=a.toUTCString()+" - "+e.method+" "+e.url+" - "+t.status+" "+((new Date).getTime()-a.getTime())+"ms";return t.status>=200&&t.status<300&&!n?(r.defaults.log&&r.defaults.log(i,t),t):(r.defaults.error&&r.defaults.error("FAILED: "+i,t),l.Promise.reject(t))}return r.defaults.error("FAILED",t),l.Promise.reject(t)}var r=this,a=new Date,n=e.data,u=e.cache,o=e.timeout,f=e.params;e=p(e,null,null,null,["data","cache","timeout","params"]),e.params=p(f),e=d(e,r.defaults.httpConfig),e.data=n,e.cache=u,e.timeout=o,"verbsUseBasePath"in e||(e.verbsUseBasePath=r.defaults.verbsUseBasePath),!e.urlOverride&&e.verbsUseBasePath&&(e.url=h(e.basePath||r.defaults.basePath,e.url)),r.defaults.forceTrailingSlash&&"/"!==e.url[e.url.length-1]&&!e.urlOverride&&(e.url+="/"),"object"===s(e.data)&&(e.data=c(e.data)),e.method=e.method.toUpperCase();var m=i(e.suffix)?r.defaults.suffix:e.suffix;if(m&&e.url.substr(e.url.length-m.length)!==m&&!e.urlOverride&&(e.url+=m),!this.http)throw new Error("You have not configured this adapter with an http library!");return this.http(e).then(t,function(e){return t(e,!0)})}},{key:"GET",value:function(e,t){return t=t||{},t.method=t.method||"get",t.urlOverride=!!t.url,t.url=t.url||e,this.HTTP(t)}},{key:"POST",value:function(e,t,r){return r=r||{},r.method=r.method||"post",r.urlOverride=!!r.url,r.url=r.url||e,r.data=r.data||t,this.HTTP(r)}},{key:"PUT",value:function(e,t,r){return r=r||{},r.method=r.method||"put",r.urlOverride=!!r.url,r.url=r.url||e,r.data=r.data||t,this.HTTP(r)}},{key:"DEL",value:function(e,t){return t=t||{},t.method=t.method||"delete",t.urlOverride=!!t.url,t.url=t.url||e,this.HTTP(t)}},{key:"find",value:function(e,t,r){var a=this;return r||(r={}),r.suffix=i(r.suffix)?e.suffix:r.suffix,r.params=i(r.params)?{}:p(r.params),r.params=a.defaults.queryTransform(e,r.params),a.GET(a.getPath("find",e,t,r),r).then(function(t){var n=(r.deserialize?r.deserialize:a.defaults.deserialize)(e,t);return n?n:l.Promise.reject(new Error("Not Found!"))})}},{key:"findAll",value:function(e,t,r){var a=this;return r||(r={}),r.suffix=i(r.suffix)?e.suffix:r.suffix,r.params=i(r.params)?{}:p(r.params),t&&(t=a.defaults.queryTransform(e,t),d(r.params,t)),a.GET(a.getPath("findAll",e,t,r),r).then(function(t){return(r.deserialize?r.deserialize:a.defaults.deserialize)(e,t)})}},{key:"create",value:function(e,t,r){var a=this;return r||(r={}),r.suffix=i(r.suffix)?e.suffix:r.suffix,r.params=i(r.params)?{}:p(r.params),r.params=a.defaults.queryTransform(e,r.params),a.POST(a.getPath("create",e,t,r),r.serialize?r.serialize(e,t):a.defaults.serialize(e,t),r).then(function(t){return(r.deserialize?r.deserialize:a.defaults.deserialize)(e,t)})}},{key:"update",value:function(e,t,r,a){var n=this;return a||(a={}),a.suffix=i(a.suffix)?e.suffix:a.suffix,a.params=i(a.params)?{}:p(a.params),a.params=n.defaults.queryTransform(e,a.params),n.PUT(n.getPath("update",e,t,a),a.serialize?a.serialize(e,r):n.defaults.serialize(e,r),a).then(function(t){return(a.deserialize?a.deserialize:n.defaults.deserialize)(e,t)})}},{key:"updateAll",value:function(e,t,r,a){var n=this;return a||(a={}),a.suffix=i(a.suffix)?e.suffix:a.suffix,a.params=i(a.params)?{}:p(a.params),r&&(r=n.defaults.queryTransform(e,r),d(a.params,r)),this.PUT(n.getPath("updateAll",e,t,a),a.serialize?a.serialize(e,t):n.defaults.serialize(e,t),a).then(function(t){return(a.deserialize?a.deserialize:n.defaults.deserialize)(e,t)})}},{key:"destroy",value:function(e,t,r){var a=this;return r||(r={}),r.suffix=i(r.suffix)?e.suffix:r.suffix,r.params=i(r.params)?{}:p(r.params),r.params=a.defaults.queryTransform(e,r.params),a.DEL(a.getPath("destroy",e,t,r),r).then(function(t){return(r.deserialize?r.deserialize:a.defaults.deserialize)(e,t)})}},{key:"destroyAll",value:function(e,t,r){var a=this;return r||(r={}),r.suffix=i(r.suffix)?e.suffix:r.suffix,r.params=i(r.params)?{}:p(r.params),t&&(t=a.defaults.queryTransform(e,t),d(r.params,t)),this.DEL(a.getPath("destroyAll",e,t,r),r).then(function(t){return(r.deserialize?r.deserialize:a.defaults.deserialize)(e,t)})}}]),e}();b.version={full:"<%= pkg.version %>",major:parseInt("<%= major %>",10),minor:parseInt("<%= minor %>",10),patch:parseInt("<%= patch %>",10),alpha:"<%= alpha %>",beta:"<%= beta %>"},e.exports=b},function(e,t){if("undefined"==typeof r){var a=new Error('Cannot find module "axios"');throw a.code="MODULE_NOT_FOUND",a}e.exports=r},function(e,r){e.exports=t},function(e,t,r){function a(e){return r(n(e))}function n(e){return i[e]||function(){throw new Error("Cannot find module '"+e+"'.")}()}var i={};a.keys=function(){return Object.keys(i)},a.resolve=n,e.exports=a,a.id=5}])});
//# sourceMappingURL=js-data-angular.min.map