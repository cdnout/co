"use strict";var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard"),_interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.PureDayPicker=exports.defaultProps=void 0;var _enzymeShallowEqual=_interopRequireDefault(require("enzyme-shallow-equal")),_extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends")),_toConsumableArray2=_interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray")),_assertThisInitialized2=_interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized")),_inheritsLoose2=_interopRequireDefault(require("@babel/runtime/helpers/inheritsLoose")),_defineProperty2=_interopRequireDefault(require("@babel/runtime/helpers/defineProperty")),_react=_interopRequireDefault(require("react")),_propTypes=_interopRequireDefault(require("prop-types")),_airbnbPropTypes=require("airbnb-prop-types"),_reactWithStyles=require("react-with-styles"),_moment=_interopRequireDefault(require("moment")),_throttle=_interopRequireDefault(require("lodash/throttle")),_isTouchDevice=_interopRequireDefault(require("is-touch-device")),_reactOutsideClickHandler=_interopRequireDefault(require("react-outside-click-handler")),_defaultPhrases=require("../defaultPhrases"),_getPhrasePropTypes=_interopRequireDefault(require("../utils/getPhrasePropTypes")),_noflip=_interopRequireDefault(require("../utils/noflip")),_CalendarMonthGrid=_interopRequireDefault(require("./CalendarMonthGrid")),_DayPickerNavigation=_interopRequireDefault(require("./DayPickerNavigation")),_DayPickerKeyboardShortcuts=_interopRequireWildcard(require("./DayPickerKeyboardShortcuts")),_getNumberOfCalendarMonthWeeks=_interopRequireDefault(require("../utils/getNumberOfCalendarMonthWeeks")),_getCalendarMonthWidth=_interopRequireDefault(require("../utils/getCalendarMonthWidth")),_calculateDimension=_interopRequireDefault(require("../utils/calculateDimension")),_getActiveElement=_interopRequireDefault(require("../utils/getActiveElement")),_isDayVisible=_interopRequireDefault(require("../utils/isDayVisible")),_isSameMonth=_interopRequireDefault(require("../utils/isSameMonth")),_ModifiersShape=_interopRequireDefault(require("../shapes/ModifiersShape")),_NavPositionShape=_interopRequireDefault(require("../shapes/NavPositionShape")),_ScrollableOrientationShape=_interopRequireDefault(require("../shapes/ScrollableOrientationShape")),_DayOfWeekShape=_interopRequireDefault(require("../shapes/DayOfWeekShape")),_CalendarInfoPositionShape=_interopRequireDefault(require("../shapes/CalendarInfoPositionShape")),_constants=require("../constants");function ownKeys(t,e){var n,a=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,n)),a}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(n),!0).forEach(function(e){(0,_defineProperty2.default)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var MONTH_PADDING=23,PREV_TRANSITION="prev",NEXT_TRANSITION="next",MONTH_SELECTION_TRANSITION="month_selection",YEAR_SELECTION_TRANSITION="year_selection",PREV_NAV="prev_nav",NEXT_NAV="next_nav",propTypes="production"!==process.env.NODE_ENV?(0,_airbnbPropTypes.forbidExtraProps)(_objectSpread({},_reactWithStyles.withStylesPropTypes,{enableOutsideDays:_propTypes.default.bool,numberOfMonths:_propTypes.default.number,orientation:_ScrollableOrientationShape.default,withPortal:_propTypes.default.bool,onOutsideClick:_propTypes.default.func,hidden:_propTypes.default.bool,initialVisibleMonth:_propTypes.default.func,firstDayOfWeek:_DayOfWeekShape.default,renderCalendarInfo:_propTypes.default.func,calendarInfoPosition:_CalendarInfoPositionShape.default,hideKeyboardShortcutsPanel:_propTypes.default.bool,daySize:_airbnbPropTypes.nonNegativeInteger,isRTL:_propTypes.default.bool,verticalHeight:_airbnbPropTypes.nonNegativeInteger,noBorder:_propTypes.default.bool,transitionDuration:_airbnbPropTypes.nonNegativeInteger,verticalBorderSpacing:_airbnbPropTypes.nonNegativeInteger,horizontalMonthPadding:_airbnbPropTypes.nonNegativeInteger,renderKeyboardShortcutsButton:_propTypes.default.func,renderKeyboardShortcutsPanel:_propTypes.default.func,dayPickerNavigationInlineStyles:_propTypes.default.object,disablePrev:_propTypes.default.bool,disableNext:_propTypes.default.bool,navPosition:_NavPositionShape.default,navPrev:_propTypes.default.node,navNext:_propTypes.default.node,renderNavPrevButton:_propTypes.default.func,renderNavNextButton:_propTypes.default.func,noNavButtons:_propTypes.default.bool,noNavNextButton:_propTypes.default.bool,noNavPrevButton:_propTypes.default.bool,onPrevMonthClick:_propTypes.default.func,onNextMonthClick:_propTypes.default.func,onMonthChange:_propTypes.default.func,onYearChange:_propTypes.default.func,onGetNextScrollableMonths:_propTypes.default.func,onGetPrevScrollableMonths:_propTypes.default.func,renderMonthText:(0,_airbnbPropTypes.mutuallyExclusiveProps)(_propTypes.default.func,"renderMonthText","renderMonthElement"),renderMonthElement:(0,_airbnbPropTypes.mutuallyExclusiveProps)(_propTypes.default.func,"renderMonthText","renderMonthElement"),renderWeekHeaderElement:_propTypes.default.func,modifiers:_propTypes.default.objectOf(_propTypes.default.objectOf(_ModifiersShape.default)),renderCalendarDay:_propTypes.default.func,renderDayContents:_propTypes.default.func,onDayClick:_propTypes.default.func,onDayMouseEnter:_propTypes.default.func,onDayMouseLeave:_propTypes.default.func,isFocused:_propTypes.default.bool,getFirstFocusableDay:_propTypes.default.func,onBlur:_propTypes.default.func,showKeyboardShortcuts:_propTypes.default.bool,onTab:_propTypes.default.func,onShiftTab:_propTypes.default.func,monthFormat:_propTypes.default.string,weekDayFormat:_propTypes.default.string,phrases:_propTypes.default.shape((0,_getPhrasePropTypes.default)(_defaultPhrases.DayPickerPhrases)),dayAriaLabelFormat:_propTypes.default.string})):{},defaultProps={enableOutsideDays:!1,numberOfMonths:2,orientation:_constants.HORIZONTAL_ORIENTATION,withPortal:!1,onOutsideClick:function(){},hidden:!1,initialVisibleMonth:function(){return(0,_moment.default)()},firstDayOfWeek:null,renderCalendarInfo:null,calendarInfoPosition:_constants.INFO_POSITION_BOTTOM,hideKeyboardShortcutsPanel:!1,daySize:_constants.DAY_SIZE,isRTL:!1,verticalHeight:null,noBorder:!1,transitionDuration:void 0,verticalBorderSpacing:void 0,horizontalMonthPadding:13,renderKeyboardShortcutsButton:void 0,renderKeyboardShortcutsPanel:void 0,dayPickerNavigationInlineStyles:null,disablePrev:!1,disableNext:!1,navPosition:_constants.NAV_POSITION_TOP,navPrev:null,navNext:null,renderNavPrevButton:null,renderNavNextButton:null,noNavButtons:!1,noNavNextButton:!1,noNavPrevButton:!1,onPrevMonthClick:function(){},onNextMonthClick:function(){},onMonthChange:function(){},onYearChange:function(){},onGetNextScrollableMonths:function(){},onGetPrevScrollableMonths:function(){},renderMonthText:null,renderMonthElement:null,renderWeekHeaderElement:null,modifiers:{},renderCalendarDay:void 0,renderDayContents:null,onDayClick:function(){},onDayMouseEnter:function(){},onDayMouseLeave:function(){},isFocused:!1,getFirstFocusableDay:null,onBlur:function(){},showKeyboardShortcuts:!1,onTab:function(){},onShiftTab:function(){},monthFormat:"MMMM YYYY",weekDayFormat:"dd",phrases:_defaultPhrases.DayPickerPhrases,dayAriaLabelFormat:void 0};exports.defaultProps=defaultProps;var DayPicker=function(i){(0,_inheritsLoose2.default)(t,i);var e=t.prototype;function t(e){var t=i.call(this,e)||this,n=e.hidden?(0,_moment.default)():e.initialVisibleMonth(),a=n.clone().startOf("month");e.getFirstFocusableDay&&(a=e.getFirstFocusableDay(n));var r=e.horizontalMonthPadding,o=e.isRTL&&t.isHorizontal()?-(0,_getCalendarMonthWidth.default)(e.daySize,r):0;return t.hasSetInitialVisibleMonth=!e.hidden,t.state={currentMonthScrollTop:null,currentMonth:n,monthTransition:null,translationValue:o,scrollableMonthMultiple:1,calendarMonthWidth:(0,_getCalendarMonthWidth.default)(e.daySize,r),focusedDate:!e.hidden||e.isFocused?a:null,nextFocusedDate:null,showKeyboardShortcuts:e.showKeyboardShortcuts,onKeyboardShortcutsPanelClose:function(){},isTouchDevice:(0,_isTouchDevice.default)(),withMouseInteractions:!0,calendarInfoWidth:0,monthTitleHeight:null,hasSetHeight:!1},t.setCalendarMonthWeeks(n),t.calendarMonthGridHeight=0,t.setCalendarInfoWidthTimeout=null,t.setCalendarMonthGridHeightTimeout=null,t.onKeyDown=t.onKeyDown.bind((0,_assertThisInitialized2.default)(t)),t.throttledKeyDown=(0,_throttle.default)(t.onFinalKeyDown,200,{trailing:!1}),t.onPrevMonthClick=t.onPrevMonthClick.bind((0,_assertThisInitialized2.default)(t)),t.onPrevMonthTransition=t.onPrevMonthTransition.bind((0,_assertThisInitialized2.default)(t)),t.onNextMonthClick=t.onNextMonthClick.bind((0,_assertThisInitialized2.default)(t)),t.onNextMonthTransition=t.onNextMonthTransition.bind((0,_assertThisInitialized2.default)(t)),t.onMonthChange=t.onMonthChange.bind((0,_assertThisInitialized2.default)(t)),t.onYearChange=t.onYearChange.bind((0,_assertThisInitialized2.default)(t)),t.getNextScrollableMonths=t.getNextScrollableMonths.bind((0,_assertThisInitialized2.default)(t)),t.getPrevScrollableMonths=t.getPrevScrollableMonths.bind((0,_assertThisInitialized2.default)(t)),t.updateStateAfterMonthTransition=t.updateStateAfterMonthTransition.bind((0,_assertThisInitialized2.default)(t)),t.openKeyboardShortcutsPanel=t.openKeyboardShortcutsPanel.bind((0,_assertThisInitialized2.default)(t)),t.closeKeyboardShortcutsPanel=t.closeKeyboardShortcutsPanel.bind((0,_assertThisInitialized2.default)(t)),t.setCalendarInfoRef=t.setCalendarInfoRef.bind((0,_assertThisInitialized2.default)(t)),t.setContainerRef=t.setContainerRef.bind((0,_assertThisInitialized2.default)(t)),t.setTransitionContainerRef=t.setTransitionContainerRef.bind((0,_assertThisInitialized2.default)(t)),t.setMonthTitleHeight=t.setMonthTitleHeight.bind((0,_assertThisInitialized2.default)(t)),t}return e[!_react.default.PureComponent&&"shouldComponentUpdate"]=function(e,t){return!(0,_enzymeShallowEqual.default)(this.props,e)||!(0,_enzymeShallowEqual.default)(this.state,t)},e.componentDidMount=function(){var e=this.props.orientation,t=this.state.currentMonth,n=this.calendarInfo?(0,_calculateDimension.default)(this.calendarInfo,"width",!0,!0):0,a=this.transitionContainer&&e===_constants.VERTICAL_SCROLLABLE?this.transitionContainer.scrollHeight-this.transitionContainer.scrollTop:null;this.setState({isTouchDevice:(0,_isTouchDevice.default)(),calendarInfoWidth:n,currentMonthScrollTop:a}),this.setCalendarMonthWeeks(t)},e.componentWillReceiveProps=function(e,t){var n=e.hidden,a=e.isFocused,r=e.showKeyboardShortcuts,o=e.onBlur,i=e.orientation,s=e.renderMonthText,l=e.horizontalMonthPadding,u=this.state.currentMonth,h=t.currentMonth;n||this.hasSetInitialVisibleMonth||(this.hasSetInitialVisibleMonth=!0,this.setState({currentMonth:e.initialVisibleMonth()}));var d,c,p=this.props,f=p.daySize,_=p.isFocused,y=p.renderMonthText;e.daySize!==f&&this.setState({calendarMonthWidth:(0,_getCalendarMonthWidth.default)(e.daySize,l)}),a!==_&&(a?(d=this.getFocusedDay(u),c=this.state.onKeyboardShortcutsPanelClose,e.showKeyboardShortcuts&&(c=o),this.setState({showKeyboardShortcuts:r,onKeyboardShortcutsPanelClose:c,focusedDate:d,withMouseInteractions:!1})):this.setState({focusedDate:null})),s!==y&&this.setState({monthTitleHeight:null}),i===_constants.VERTICAL_SCROLLABLE&&this.transitionContainer&&!(0,_isSameMonth.default)(u,h)&&this.setState({currentMonthScrollTop:this.transitionContainer.scrollHeight-this.transitionContainer.scrollTop})},e.componentWillUpdate=function(){var n=this,e=this.props.transitionDuration;this.calendarInfo&&(this.setCalendarInfoWidthTimeout=setTimeout(function(){var e=n.state.calendarInfoWidth,t=(0,_calculateDimension.default)(n.calendarInfo,"width",!0,!0);e!==t&&n.setState({calendarInfoWidth:t})},e))},e.componentDidUpdate=function(e,t){var n,a,r=this.props,o=r.orientation,i=r.daySize,s=r.isFocused,l=r.numberOfMonths,u=this.state,h=u.currentMonth,d=u.currentMonthScrollTop,c=u.focusedDate,p=u.monthTitleHeight;!this.isHorizontal()||o===e.orientation&&i===e.daySize||(n=this.calendarMonthWeeks.slice(1,l+1),a=p+Math.max.apply(Math,[0].concat((0,_toConsumableArray2.default)(n)))*(i-1)+1,this.adjustDayPickerHeight(a)),e.isFocused||!s||c||this.container.focus(),o===_constants.VERTICAL_SCROLLABLE&&!(0,_isSameMonth.default)(t.currentMonth,h)&&d&&this.transitionContainer&&(this.transitionContainer.scrollTop=this.transitionContainer.scrollHeight-d)},e.componentWillUnmount=function(){clearTimeout(this.setCalendarInfoWidthTimeout),clearTimeout(this.setCalendarMonthGridHeightTimeout)},e.onKeyDown=function(e){e.stopPropagation(),_constants.MODIFIER_KEY_NAMES.has(e.key)||this.throttledKeyDown(e)},e.onFinalKeyDown=function(e){this.setState({withMouseInteractions:!1});var t=this.props,n=t.onBlur,a=t.onTab,r=t.onShiftTab,o=t.isRTL,i=this.state,s=i.focusedDate,l=i.showKeyboardShortcuts;if(s){var u=s.clone(),h=!1,d=(0,_getActiveElement.default)();switch(e.key){case"ArrowUp":e.preventDefault(),u.subtract(1,"week"),h=this.maybeTransitionPrevMonth(u);break;case"ArrowLeft":e.preventDefault(),o?u.add(1,"day"):u.subtract(1,"day"),h=this.maybeTransitionPrevMonth(u);break;case"Home":e.preventDefault(),u.startOf("week"),h=this.maybeTransitionPrevMonth(u);break;case"PageUp":e.preventDefault(),u.subtract(1,"month"),h=this.maybeTransitionPrevMonth(u);break;case"ArrowDown":e.preventDefault(),u.add(1,"week"),h=this.maybeTransitionNextMonth(u);break;case"ArrowRight":e.preventDefault(),o?u.subtract(1,"day"):u.add(1,"day"),h=this.maybeTransitionNextMonth(u);break;case"End":e.preventDefault(),u.endOf("week"),h=this.maybeTransitionNextMonth(u);break;case"PageDown":e.preventDefault(),u.add(1,"month"),h=this.maybeTransitionNextMonth(u);break;case"?":this.openKeyboardShortcutsPanel(function(){d&&d.focus()});break;case"Escape":l?this.closeKeyboardShortcutsPanel():n(e);break;case"Tab":e.shiftKey?r():a(e)}h||this.setState({focusedDate:u})}},e.onPrevMonthClick=function(e){e&&e.preventDefault(),this.onPrevMonthTransition()},e.onPrevMonthTransition=function(e){var t,n,a,r=this.props,o=r.daySize,i=r.isRTL,s=r.numberOfMonths,l=this.state,u=l.calendarMonthWidth,h=l.monthTitleHeight;this.isVertical()?t=h+this.calendarMonthWeeks[0]*(o-1)+1:this.isHorizontal()&&(t=i?-2*u:u,n=this.calendarMonthWeeks.slice(0,s),a=h+Math.max.apply(Math,[0].concat((0,_toConsumableArray2.default)(n)))*(o-1)+1,this.adjustDayPickerHeight(a)),this.setState({monthTransition:PREV_TRANSITION,translationValue:t,focusedDate:null,nextFocusedDate:e})},e.onMonthChange=function(e){this.setCalendarMonthWeeks(e),this.calculateAndSetDayPickerHeight(),this.setState({monthTransition:MONTH_SELECTION_TRANSITION,translationValue:1e-5,focusedDate:null,nextFocusedDate:e,currentMonth:e})},e.onYearChange=function(e){this.setCalendarMonthWeeks(e),this.calculateAndSetDayPickerHeight(),this.setState({monthTransition:YEAR_SELECTION_TRANSITION,translationValue:1e-4,focusedDate:null,nextFocusedDate:e,currentMonth:e})},e.onNextMonthClick=function(e){e&&e.preventDefault(),this.onNextMonthTransition()},e.onNextMonthTransition=function(e){var t,n,a,r=this.props,o=r.isRTL,i=r.numberOfMonths,s=r.daySize,l=this.state,u=l.calendarMonthWidth,h=l.monthTitleHeight;this.isVertical()&&(t=-(h+this.calendarMonthWeeks[1]*(s-1)+1)),this.isHorizontal()&&(t=o?0:-u,n=this.calendarMonthWeeks.slice(2,i+2),a=h+Math.max.apply(Math,[0].concat((0,_toConsumableArray2.default)(n)))*(s-1)+1,this.adjustDayPickerHeight(a)),this.setState({monthTransition:NEXT_TRANSITION,translationValue:t,focusedDate:null,nextFocusedDate:e})},e.getFirstDayOfWeek=function(){var e=this.props.firstDayOfWeek;return null==e?_moment.default.localeData().firstDayOfWeek():e},e.getWeekHeaders=function(){for(var e=this.props.weekDayFormat,t=this.state.currentMonth,n=this.getFirstDayOfWeek(),a=[],r=0;r<7;r+=1)a.push(t.clone().day((r+n)%7).format(e));return a},e.getFirstVisibleIndex=function(){var e=this.props.orientation,t=this.state.monthTransition;if(e===_constants.VERTICAL_SCROLLABLE)return 0;var n=1;return t===PREV_TRANSITION?--n:t===NEXT_TRANSITION&&(n+=1),n},e.getFocusedDay=function(e){var t,n=this.props,a=n.getFirstFocusableDay,r=n.numberOfMonths;return a&&(t=a(e)),!e||t&&(0,_isDayVisible.default)(t,e,r)||(t=e.clone().startOf("month")),t},e.setMonthTitleHeight=function(e){var t=this;this.setState({monthTitleHeight:e},function(){t.calculateAndSetDayPickerHeight()})},e.setCalendarMonthWeeks=function(e){var t=this.props.numberOfMonths;this.calendarMonthWeeks=[];for(var n=e.clone().subtract(1,"months"),a=this.getFirstDayOfWeek(),r=0;r<t+2;r+=1){var o=(0,_getNumberOfCalendarMonthWeeks.default)(n,a);this.calendarMonthWeeks.push(o),n=n.add(1,"months")}},e.setContainerRef=function(e){this.container=e},e.setCalendarInfoRef=function(e){this.calendarInfo=e},e.setTransitionContainerRef=function(e){this.transitionContainer=e},e.getNextScrollableMonths=function(e){var t=this.props.onGetNextScrollableMonths;e&&e.preventDefault(),t&&t(e),this.setState(function(e){return{scrollableMonthMultiple:e.scrollableMonthMultiple+1}})},e.getPrevScrollableMonths=function(e){var t=this.props,a=t.numberOfMonths,n=t.onGetPrevScrollableMonths;e&&e.preventDefault(),n&&n(e),this.setState(function(e){var t=e.currentMonth,n=e.scrollableMonthMultiple;return{currentMonth:t.clone().subtract(a,"month"),scrollableMonthMultiple:n+1}})},e.maybeTransitionNextMonth=function(e){var t=this.props.numberOfMonths,n=this.state,a=n.currentMonth,r=n.focusedDate,o=e.month(),i=r.month(),s=(0,_isDayVisible.default)(e,a,t);return o!==i&&!s&&(this.onNextMonthTransition(e),!0)},e.maybeTransitionPrevMonth=function(e){var t=this.props.numberOfMonths,n=this.state,a=n.currentMonth,r=n.focusedDate,o=e.month(),i=r.month(),s=(0,_isDayVisible.default)(e,a,t);return o!==i&&!s&&(this.onPrevMonthTransition(e),!0)},e.isHorizontal=function(){return this.props.orientation===_constants.HORIZONTAL_ORIENTATION},e.isVertical=function(){var e=this.props.orientation;return e===_constants.VERTICAL_ORIENTATION||e===_constants.VERTICAL_SCROLLABLE},e.updateStateAfterMonthTransition=function(){var e,t,n,a,r,o,i,s=this,l=this.props,u=l.onPrevMonthClick,h=l.onNextMonthClick,d=l.numberOfMonths,c=l.onMonthChange,p=l.onYearChange,f=l.isRTL,_=this.state,y=_.currentMonth,b=_.monthTransition,T=_.focusedDate,P=_.nextFocusedDate,M=_.withMouseInteractions,D=_.calendarMonthWidth;b&&(e=y.clone(),t=this.getFirstDayOfWeek(),b===PREV_TRANSITION?(e.subtract(1,"month"),u&&u(e),n=e.clone().subtract(1,"month"),a=(0,_getNumberOfCalendarMonthWeeks.default)(n,t),this.calendarMonthWeeks=[a].concat((0,_toConsumableArray2.default)(this.calendarMonthWeeks.slice(0,-1)))):b===NEXT_TRANSITION?(e.add(1,"month"),h&&h(e),r=e.clone().add(d,"month"),o=(0,_getNumberOfCalendarMonthWeeks.default)(r,t),this.calendarMonthWeeks=[].concat((0,_toConsumableArray2.default)(this.calendarMonthWeeks.slice(1)),[o])):b===MONTH_SELECTION_TRANSITION?c&&c(e):b===YEAR_SELECTION_TRANSITION&&p&&p(e),i=null,P?i=P:T||M||(i=this.getFocusedDay(e)),this.setState({currentMonth:e,monthTransition:null,translationValue:f&&this.isHorizontal()?-D:0,nextFocusedDate:null,focusedDate:i},function(){var e;!M||(e=(0,_getActiveElement.default)())&&e!==document.body&&s.container.contains(e)&&e.blur&&e.blur()}))},e.adjustDayPickerHeight=function(e){var t=this,n=e+MONTH_PADDING;n!==this.calendarMonthGridHeight&&(this.transitionContainer.style.height="".concat(n,"px"),this.calendarMonthGridHeight||(this.setCalendarMonthGridHeightTimeout=setTimeout(function(){t.setState({hasSetHeight:!0})},0)),this.calendarMonthGridHeight=n)},e.calculateAndSetDayPickerHeight=function(){var e=this.props,t=e.daySize,n=e.numberOfMonths,a=this.state.monthTitleHeight,r=this.calendarMonthWeeks.slice(1,n+1),o=a+Math.max.apply(Math,[0].concat((0,_toConsumableArray2.default)(r)))*(t-1)+1;this.isHorizontal()&&this.adjustDayPickerHeight(o)},e.openKeyboardShortcutsPanel=function(e){this.setState({showKeyboardShortcuts:!0,onKeyboardShortcutsPanelClose:e})},e.closeKeyboardShortcutsPanel=function(){var e=this.state.onKeyboardShortcutsPanelClose;e&&e(),this.setState({onKeyboardShortcutsPanelClose:null,showKeyboardShortcuts:!1})},e.renderNavigation=function(e){var t=this.props,n=t.dayPickerNavigationInlineStyles,a=t.disablePrev,r=t.disableNext,o=t.navPosition,i=t.navPrev,s=t.navNext,l=t.noNavButtons,u=t.noNavNextButton,h=t.noNavPrevButton,d=t.orientation,c=t.phrases,p=t.renderNavPrevButton,f=t.renderNavNextButton,_=t.isRTL;if(l)return null;var y=d===_constants.VERTICAL_SCROLLABLE?this.getPrevScrollableMonths:this.onPrevMonthClick,b=d===_constants.VERTICAL_SCROLLABLE?this.getNextScrollableMonths:this.onNextMonthClick;return _react.default.createElement(_DayPickerNavigation.default,{disablePrev:a,disableNext:r,inlineStyles:n,onPrevMonthClick:y,onNextMonthClick:b,navPosition:o,navPrev:i,navNext:s,renderNavPrevButton:p,renderNavNextButton:f,orientation:d,phrases:c,isRTL:_,showNavNextButton:!(u||d===_constants.VERTICAL_SCROLLABLE&&e===PREV_NAV),showNavPrevButton:!(h||d===_constants.VERTICAL_SCROLLABLE&&e===NEXT_NAV)})},e.renderWeekHeader=function(e){var t=this.props,n=t.daySize,a=t.horizontalMonthPadding,r=t.orientation,o=t.renderWeekHeaderElement,i=t.styles,s=this.state.calendarMonthWidth,l=r===_constants.VERTICAL_SCROLLABLE,u={left:e*s},h={marginLeft:-s/2},d={};this.isHorizontal()?d=u:this.isVertical()&&!l&&(d=h);var c=this.getWeekHeaders().map(function(e){return _react.default.createElement("li",(0,_extends2.default)({key:e},(0,_reactWithStyles.css)(i.DayPicker_weekHeader_li,{width:n})),o?o(e):_react.default.createElement("small",null,e))});return _react.default.createElement("div",(0,_extends2.default)({},(0,_reactWithStyles.css)(i.DayPicker_weekHeader,this.isVertical()&&i.DayPicker_weekHeader__vertical,l&&i.DayPicker_weekHeader__verticalScrollable,d,{padding:"0 ".concat(a,"px")}),{key:"week-".concat(e)}),_react.default.createElement("ul",(0,_reactWithStyles.css)(i.DayPicker_weekHeader_ul),c))},e.render=function(){for(var e=this,t=this.state,n=t.calendarMonthWidth,a=t.currentMonth,r=t.monthTransition,o=t.translationValue,i=t.scrollableMonthMultiple,s=t.focusedDate,l=t.showKeyboardShortcuts,u=t.isTouchDevice,h=t.hasSetHeight,d=t.calendarInfoWidth,c=t.monthTitleHeight,p=this.props,f=p.enableOutsideDays,_=p.numberOfMonths,y=p.orientation,b=p.modifiers,T=p.withPortal,P=p.onDayClick,M=p.onDayMouseEnter,D=p.onDayMouseLeave,S=p.firstDayOfWeek,v=p.renderMonthText,k=p.renderCalendarDay,m=p.renderDayContents,g=p.renderCalendarInfo,N=p.renderMonthElement,C=p.renderKeyboardShortcutsButton,O=p.renderKeyboardShortcutsPanel,I=p.calendarInfoPosition,R=p.hideKeyboardShortcutsPanel,E=p.onOutsideClick,x=p.monthFormat,w=p.daySize,A=p.isFocused,L=p.isRTL,H=p.styles,W=p.theme,z=p.phrases,q=p.verticalHeight,V=p.dayAriaLabelFormat,K=p.noBorder,F=p.transitionDuration,B=p.verticalBorderSpacing,j=p.horizontalMonthPadding,G=p.navPosition,Y=W.reactDates.spacing.dayPickerHorizontalPadding,U=this.isHorizontal(),X=this.isVertical()?1:_,Z=[],J=0;J<X;J+=1)Z.push(this.renderWeekHeader(J));var Q,$=y===_constants.VERTICAL_SCROLLABLE;U?Q=this.calendarMonthGridHeight:!this.isVertical()||$||T||(Q=q||1.75*n);var ee=null!==r,te=!ee&&A,ne=_DayPickerKeyboardShortcuts.BOTTOM_RIGHT;this.isVertical()&&(ne=T?_DayPickerKeyboardShortcuts.TOP_LEFT:_DayPickerKeyboardShortcuts.TOP_RIGHT);var ae=U&&h,re=I===_constants.INFO_POSITION_TOP,oe=I===_constants.INFO_POSITION_BOTTOM,ie=I===_constants.INFO_POSITION_BEFORE,se=I===_constants.INFO_POSITION_AFTER,le=ie||se,ue=g&&_react.default.createElement("div",(0,_extends2.default)({ref:this.setCalendarInfoRef},(0,_reactWithStyles.css)(le&&H.DayPicker_calendarInfo__horizontal)),g()),he=g&&le?d:0,de=this.getFirstVisibleIndex(),ce=n*_+2*Y,pe=ce+he+1,fe={width:U&&ce,height:Q},_e={width:U&&ce},ye={width:U&&pe,marginLeft:U&&T?-pe/2:null,marginTop:U&&T?-n/2:null};return _react.default.createElement("div",(0,_reactWithStyles.css)(H.DayPicker,U&&H.DayPicker__horizontal,$&&H.DayPicker__verticalScrollable,U&&T&&H.DayPicker_portal__horizontal,this.isVertical()&&T&&H.DayPicker_portal__vertical,ye,!c&&H.DayPicker__hidden,!K&&H.DayPicker__withBorder),_react.default.createElement(_reactOutsideClickHandler.default,{onOutsideClick:E},(re||ie)&&ue,_react.default.createElement("div",(0,_reactWithStyles.css)(_e,le&&U&&H.DayPicker_wrapper__horizontal),_react.default.createElement("div",(0,_extends2.default)({},(0,_reactWithStyles.css)(H.DayPicker_weekHeaders,U&&H.DayPicker_weekHeaders__horizontal),{"aria-hidden":"true",role:"presentation"}),Z),_react.default.createElement("div",(0,_extends2.default)({},(0,_reactWithStyles.css)(H.DayPicker_focusRegion),{ref:this.setContainerRef,onClick:function(e){e.stopPropagation()},onKeyDown:this.onKeyDown,onMouseUp:function(){e.setState({withMouseInteractions:!0})},tabIndex:-1,role:"application","aria-roledescription":z.roleDescription,"aria-label":z.calendarLabel}),!$&&G===_constants.NAV_POSITION_TOP&&this.renderNavigation(),_react.default.createElement("div",(0,_extends2.default)({},(0,_reactWithStyles.css)(H.DayPicker_transitionContainer,ae&&H.DayPicker_transitionContainer__horizontal,this.isVertical()&&H.DayPicker_transitionContainer__vertical,$&&H.DayPicker_transitionContainer__verticalScrollable,fe),{ref:this.setTransitionContainerRef}),$&&this.renderNavigation(PREV_NAV),_react.default.createElement(_CalendarMonthGrid.default,{setMonthTitleHeight:c?void 0:this.setMonthTitleHeight,translationValue:o,enableOutsideDays:f,firstVisibleMonthIndex:de,initialMonth:a,isAnimating:ee,modifiers:b,orientation:y,numberOfMonths:_*i,onDayClick:P,onDayMouseEnter:M,onDayMouseLeave:D,onMonthChange:this.onMonthChange,onYearChange:this.onYearChange,renderMonthText:v,renderCalendarDay:k,renderDayContents:m,renderMonthElement:N,onMonthTransitionEnd:this.updateStateAfterMonthTransition,monthFormat:x,daySize:w,firstDayOfWeek:S,isFocused:te,focusedDate:s,phrases:z,isRTL:L,dayAriaLabelFormat:V,transitionDuration:F,verticalBorderSpacing:B,horizontalMonthPadding:j}),$&&this.renderNavigation(NEXT_NAV)),!$&&G===_constants.NAV_POSITION_BOTTOM&&this.renderNavigation(),!u&&!R&&_react.default.createElement(_DayPickerKeyboardShortcuts.default,{block:this.isVertical()&&!T,buttonLocation:ne,showKeyboardShortcutsPanel:l,openKeyboardShortcutsPanel:this.openKeyboardShortcutsPanel,closeKeyboardShortcutsPanel:this.closeKeyboardShortcutsPanel,phrases:z,renderKeyboardShortcutsButton:C,renderKeyboardShortcutsPanel:O}))),(oe||se)&&ue))},t}(_react.default.PureComponent||_react.default.Component);(exports.PureDayPicker=DayPicker).propTypes="production"!==process.env.NODE_ENV?propTypes:{},DayPicker.defaultProps=defaultProps;var _default=(0,_reactWithStyles.withStyles)(function(e){var t=e.reactDates,n=t.color,a=t.font,r=t.noScrollBarOnVerticalScrollable,o=t.spacing,i=t.zIndex;return{DayPicker:{background:n.background,position:"relative",textAlign:(0,_noflip.default)("left")},DayPicker__horizontal:{background:n.background},DayPicker__verticalScrollable:{height:"100%"},DayPicker__hidden:{visibility:"hidden"},DayPicker__withBorder:{boxShadow:(0,_noflip.default)("0 2px 6px rgba(0, 0, 0, 0.05), 0 0 0 1px rgba(0, 0, 0, 0.07)"),borderRadius:3},DayPicker_portal__horizontal:{boxShadow:"none",position:"absolute",left:(0,_noflip.default)("50%"),top:"50%"},DayPicker_portal__vertical:{position:"initial"},DayPicker_focusRegion:{outline:"none"},DayPicker_calendarInfo__horizontal:{display:"inline-block",verticalAlign:"top"},DayPicker_wrapper__horizontal:{display:"inline-block",verticalAlign:"top"},DayPicker_weekHeaders:{position:"relative"},DayPicker_weekHeaders__horizontal:{marginLeft:(0,_noflip.default)(o.dayPickerHorizontalPadding)},DayPicker_weekHeader:{color:n.placeholderText,position:"absolute",top:62,zIndex:i+2,textAlign:(0,_noflip.default)("left")},DayPicker_weekHeader__vertical:{left:(0,_noflip.default)("50%")},DayPicker_weekHeader__verticalScrollable:{top:0,display:"table-row",borderBottom:"1px solid ".concat(n.core.border),background:n.background,marginLeft:(0,_noflip.default)(0),left:(0,_noflip.default)(0),width:"100%",textAlign:"center"},DayPicker_weekHeader_ul:{listStyle:"none",margin:"1px 0",paddingLeft:(0,_noflip.default)(0),paddingRight:(0,_noflip.default)(0),fontSize:a.size},DayPicker_weekHeader_li:{display:"inline-block",textAlign:"center"},DayPicker_transitionContainer:{position:"relative",overflow:"hidden",borderRadius:3},DayPicker_transitionContainer__horizontal:{transition:"height 0.2s ease-in-out"},DayPicker_transitionContainer__vertical:{width:"100%"},DayPicker_transitionContainer__verticalScrollable:_objectSpread({paddingTop:20,height:"100%",position:"absolute",top:0,bottom:0,right:(0,_noflip.default)(0),left:(0,_noflip.default)(0),overflowY:"scroll"},r&&{"-webkitOverflowScrolling":"touch","::-webkit-scrollbar":{"-webkit-appearance":"none",display:"none"}})}},{pureComponent:void 0!==_react.default.PureComponent})(DayPicker);exports.default=_default;