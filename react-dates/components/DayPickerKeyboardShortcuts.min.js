"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.BOTTOM_RIGHT=exports.TOP_RIGHT=exports.TOP_LEFT=void 0;var _enzymeShallowEqual=_interopRequireDefault(require("enzyme-shallow-equal")),_extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends")),_assertThisInitialized2=_interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized")),_inheritsLoose2=_interopRequireDefault(require("@babel/runtime/helpers/inheritsLoose")),_defineProperty2=_interopRequireDefault(require("@babel/runtime/helpers/defineProperty")),_react=_interopRequireDefault(require("react")),_propTypes=_interopRequireDefault(require("prop-types")),_airbnbPropTypes=require("airbnb-prop-types"),_reactWithStyles=require("react-with-styles"),_defaultPhrases=require("../defaultPhrases"),_getPhrasePropTypes=_interopRequireDefault(require("../utils/getPhrasePropTypes")),_KeyboardShortcutRow=_interopRequireDefault(require("./KeyboardShortcutRow")),_CloseButton=_interopRequireDefault(require("./CloseButton"));function ownKeys(t,e){var o,r=Object.keys(t);return Object.getOwnPropertySymbols&&(o=Object.getOwnPropertySymbols(t),e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,o)),r}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(o),!0).forEach(function(e){(0,_defineProperty2.default)(t,e,o[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):ownKeys(Object(o)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))})}return t}var TOP_LEFT="top-left";exports.TOP_LEFT=TOP_LEFT;var TOP_RIGHT="top-right";exports.TOP_RIGHT=TOP_RIGHT;var BOTTOM_RIGHT="bottom-right";exports.BOTTOM_RIGHT=BOTTOM_RIGHT;var propTypes="production"!==process.env.NODE_ENV?(0,_airbnbPropTypes.forbidExtraProps)(_objectSpread({},_reactWithStyles.withStylesPropTypes,{block:_propTypes.default.bool,buttonLocation:_propTypes.default.oneOf([TOP_LEFT,TOP_RIGHT,BOTTOM_RIGHT]),showKeyboardShortcutsPanel:_propTypes.default.bool,openKeyboardShortcutsPanel:_propTypes.default.func,closeKeyboardShortcutsPanel:_propTypes.default.func,phrases:_propTypes.default.shape((0,_getPhrasePropTypes.default)(_defaultPhrases.DayPickerKeyboardShortcutsPhrases)),renderKeyboardShortcutsButton:_propTypes.default.func,renderKeyboardShortcutsPanel:_propTypes.default.func})):{},defaultProps={block:!1,buttonLocation:BOTTOM_RIGHT,showKeyboardShortcutsPanel:!1,openKeyboardShortcutsPanel:function(){},closeKeyboardShortcutsPanel:function(){},phrases:_defaultPhrases.DayPickerKeyboardShortcutsPhrases,renderKeyboardShortcutsButton:void 0,renderKeyboardShortcutsPanel:void 0};function getKeyboardShortcuts(e){return[{unicode:"↵",label:e.enterKey,action:e.selectFocusedDate},{unicode:"←/→",label:e.leftArrowRightArrow,action:e.moveFocusByOneDay},{unicode:"↑/↓",label:e.upArrowDownArrow,action:e.moveFocusByOneWeek},{unicode:"PgUp/PgDn",label:e.pageUpPageDown,action:e.moveFocusByOneMonth},{unicode:"Home/End",label:e.homeEnd,action:e.moveFocustoStartAndEndOfWeek},{unicode:"Esc",label:e.escape,action:e.returnFocusToInput},{unicode:"?",label:e.questionMark,action:e.openThisPanel}]}var DayPickerKeyboardShortcuts=function(s){(0,_inheritsLoose2.default)(t,s);var e=t.prototype;function t(){for(var e,t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];var a=(e=s.call.apply(s,[this].concat(o))||this).props.phrases;return e.keyboardShortcuts=getKeyboardShortcuts(a),e.onShowKeyboardShortcutsButtonClick=e.onShowKeyboardShortcutsButtonClick.bind((0,_assertThisInitialized2.default)(e)),e.setShowKeyboardShortcutsButtonRef=e.setShowKeyboardShortcutsButtonRef.bind((0,_assertThisInitialized2.default)(e)),e.setHideKeyboardShortcutsButtonRef=e.setHideKeyboardShortcutsButtonRef.bind((0,_assertThisInitialized2.default)(e)),e.handleFocus=e.handleFocus.bind((0,_assertThisInitialized2.default)(e)),e.onKeyDown=e.onKeyDown.bind((0,_assertThisInitialized2.default)(e)),e}return e[!_react.default.PureComponent&&"shouldComponentUpdate"]=function(e,t){return!(0,_enzymeShallowEqual.default)(this.props,e)||!(0,_enzymeShallowEqual.default)(this.state,t)},e.componentWillReceiveProps=function(e){var t=this.props.phrases;e.phrases!==t&&(this.keyboardShortcuts=getKeyboardShortcuts(e.phrases))},e.componentDidUpdate=function(){this.handleFocus()},e.onKeyDown=function(e){e.stopPropagation();var t=this.props.closeKeyboardShortcutsPanel;switch(e.key){case"Escape":t();break;case"ArrowUp":case"ArrowDown":break;case"Tab":case"Home":case"End":case"PageUp":case"PageDown":case"ArrowLeft":case"ArrowRight":e.preventDefault()}},e.onShowKeyboardShortcutsButtonClick=function(){var e=this;(0,this.props.openKeyboardShortcutsPanel)(function(){e.showKeyboardShortcutsButton.focus()})},e.setShowKeyboardShortcutsButtonRef=function(e){this.showKeyboardShortcutsButton=e},e.setHideKeyboardShortcutsButtonRef=function(e){this.hideKeyboardShortcutsButton=e},e.handleFocus=function(){this.hideKeyboardShortcutsButton&&this.hideKeyboardShortcutsButton.focus()},e.render=function(){var e=this.props,a=e.block,t=e.buttonLocation,o=e.showKeyboardShortcutsPanel,r=e.closeKeyboardShortcutsPanel,s=e.styles,i=e.phrases,n=e.renderKeyboardShortcutsButton,c=e.renderKeyboardShortcutsPanel,u=o?i.hideKeyboardShortcutsPanel:i.showKeyboardShortcutsPanel,d=t===BOTTOM_RIGHT,l=t===TOP_RIGHT,h=t===TOP_LEFT;return _react.default.createElement("div",null,n&&n({ref:this.setShowKeyboardShortcutsButtonRef,onClick:this.onShowKeyboardShortcutsButtonClick,ariaLabel:u}),!n&&_react.default.createElement("button",(0,_extends2.default)({ref:this.setShowKeyboardShortcutsButtonRef},(0,_reactWithStyles.css)(s.DayPickerKeyboardShortcuts_buttonReset,s.DayPickerKeyboardShortcuts_show,d&&s.DayPickerKeyboardShortcuts_show__bottomRight,l&&s.DayPickerKeyboardShortcuts_show__topRight,h&&s.DayPickerKeyboardShortcuts_show__topLeft),{type:"button","aria-label":u,onClick:this.onShowKeyboardShortcutsButtonClick,onMouseUp:function(e){e.currentTarget.blur()}}),_react.default.createElement("span",(0,_reactWithStyles.css)(s.DayPickerKeyboardShortcuts_showSpan,d&&s.DayPickerKeyboardShortcuts_showSpan__bottomRight,l&&s.DayPickerKeyboardShortcuts_showSpan__topRight,h&&s.DayPickerKeyboardShortcuts_showSpan__topLeft),"?")),o&&(c?c({closeButtonAriaLabel:i.hideKeyboardShortcutsPanel,keyboardShortcuts:this.keyboardShortcuts,onCloseButtonClick:r,onKeyDown:this.onKeyDown,title:i.keyboardShortcuts}):_react.default.createElement("div",(0,_extends2.default)({},(0,_reactWithStyles.css)(s.DayPickerKeyboardShortcuts_panel),{role:"dialog","aria-labelledby":"DayPickerKeyboardShortcuts_title","aria-describedby":"DayPickerKeyboardShortcuts_description"}),_react.default.createElement("div",(0,_extends2.default)({},(0,_reactWithStyles.css)(s.DayPickerKeyboardShortcuts_title),{id:"DayPickerKeyboardShortcuts_title"}),i.keyboardShortcuts),_react.default.createElement("button",(0,_extends2.default)({ref:this.setHideKeyboardShortcutsButtonRef},(0,_reactWithStyles.css)(s.DayPickerKeyboardShortcuts_buttonReset,s.DayPickerKeyboardShortcuts_close),{type:"button",tabIndex:"0","aria-label":i.hideKeyboardShortcutsPanel,onClick:r,onKeyDown:this.onKeyDown}),_react.default.createElement(_CloseButton.default,(0,_reactWithStyles.css)(s.DayPickerKeyboardShortcuts_closeSvg))),_react.default.createElement("ul",(0,_extends2.default)({},(0,_reactWithStyles.css)(s.DayPickerKeyboardShortcuts_list),{id:"DayPickerKeyboardShortcuts_description"}),this.keyboardShortcuts.map(function(e){var t=e.unicode,o=e.label,r=e.action;return _react.default.createElement(_KeyboardShortcutRow.default,{key:o,unicode:t,label:o,action:r,block:a})})))))},t}(_react.default.PureComponent||_react.default.Component);DayPickerKeyboardShortcuts.propTypes="production"!==process.env.NODE_ENV?propTypes:{},DayPickerKeyboardShortcuts.defaultProps=defaultProps;var _default=(0,_reactWithStyles.withStyles)(function(e){var t=e.reactDates,o=t.color,r=t.font,a=t.zIndex;return{DayPickerKeyboardShortcuts_buttonReset:{background:"none",border:0,borderRadius:0,color:"inherit",font:"inherit",lineHeight:"normal",overflow:"visible",padding:0,cursor:"pointer",fontSize:r.size,":active":{outline:"none"}},DayPickerKeyboardShortcuts_show:{width:33,height:26,position:"absolute",zIndex:a+2,"::before":{content:'""',display:"block",position:"absolute"}},DayPickerKeyboardShortcuts_show__bottomRight:{bottom:0,right:0,"::before":{borderTop:"26px solid transparent",borderRight:"33px solid ".concat(o.core.primary),bottom:0,right:0},":hover::before":{borderRight:"33px solid ".concat(o.core.primary_dark)}},DayPickerKeyboardShortcuts_show__topRight:{top:0,right:0,"::before":{borderBottom:"26px solid transparent",borderRight:"33px solid ".concat(o.core.primary),top:0,right:0},":hover::before":{borderRight:"33px solid ".concat(o.core.primary_dark)}},DayPickerKeyboardShortcuts_show__topLeft:{top:0,left:0,"::before":{borderBottom:"26px solid transparent",borderLeft:"33px solid ".concat(o.core.primary),top:0,left:0},":hover::before":{borderLeft:"33px solid ".concat(o.core.primary_dark)}},DayPickerKeyboardShortcuts_showSpan:{color:o.core.white,position:"absolute"},DayPickerKeyboardShortcuts_showSpan__bottomRight:{bottom:0,right:5},DayPickerKeyboardShortcuts_showSpan__topRight:{top:1,right:5},DayPickerKeyboardShortcuts_showSpan__topLeft:{top:1,left:5},DayPickerKeyboardShortcuts_panel:{overflow:"auto",background:o.background,border:"1px solid ".concat(o.core.border),borderRadius:2,position:"absolute",top:0,bottom:0,right:0,left:0,zIndex:a+2,padding:22,margin:33,textAlign:"left"},DayPickerKeyboardShortcuts_title:{fontSize:16,fontWeight:"bold",margin:0},DayPickerKeyboardShortcuts_list:{listStyle:"none",padding:0,fontSize:r.size},DayPickerKeyboardShortcuts_close:{position:"absolute",right:22,top:22,zIndex:a+2,":active":{outline:"none"}},DayPickerKeyboardShortcuts_closeSvg:{height:15,width:15,fill:o.core.grayLighter,":hover":{fill:o.core.grayLight},":focus":{fill:o.core.grayLight}}}},{pureComponent:void 0!==_react.default.PureComponent})(DayPickerKeyboardShortcuts);exports.default=_default;