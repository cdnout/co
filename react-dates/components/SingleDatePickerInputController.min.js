"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _enzymeShallowEqual=_interopRequireDefault(require("enzyme-shallow-equal")),_assertThisInitialized2=_interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized")),_inheritsLoose2=_interopRequireDefault(require("@babel/runtime/helpers/inheritsLoose")),_react=_interopRequireDefault(require("react")),_propTypes=_interopRequireDefault(require("prop-types")),_moment=_interopRequireDefault(require("moment")),_reactMomentProptypes=_interopRequireDefault(require("react-moment-proptypes")),_airbnbPropTypes=require("airbnb-prop-types"),_OpenDirectionShape=_interopRequireDefault(require("../shapes/OpenDirectionShape")),_defaultPhrases=require("../defaultPhrases"),_getPhrasePropTypes=_interopRequireDefault(require("../utils/getPhrasePropTypes")),_SingleDatePickerInput=_interopRequireDefault(require("./SingleDatePickerInput")),_IconPositionShape=_interopRequireDefault(require("../shapes/IconPositionShape")),_DisabledShape=_interopRequireDefault(require("../shapes/DisabledShape")),_toMomentObject=_interopRequireDefault(require("../utils/toMomentObject")),_toLocalizedDateString=_interopRequireDefault(require("../utils/toLocalizedDateString")),_isInclusivelyAfterDay=_interopRequireDefault(require("../utils/isInclusivelyAfterDay")),_constants=require("../constants"),propTypes="production"!==process.env.NODE_ENV?(0,_airbnbPropTypes.forbidExtraProps)({children:_propTypes.default.node,date:_reactMomentProptypes.default.momentObj,onDateChange:_propTypes.default.func.isRequired,focused:_propTypes.default.bool,onFocusChange:_propTypes.default.func.isRequired,id:_propTypes.default.string.isRequired,placeholder:_propTypes.default.string,ariaLabel:_propTypes.default.string,screenReaderMessage:_propTypes.default.string,showClearDate:_propTypes.default.bool,showCaret:_propTypes.default.bool,showDefaultInputIcon:_propTypes.default.bool,inputIconPosition:_IconPositionShape.default,disabled:_DisabledShape.default,required:_propTypes.default.bool,readOnly:_propTypes.default.bool,openDirection:_OpenDirectionShape.default,noBorder:_propTypes.default.bool,block:_propTypes.default.bool,small:_propTypes.default.bool,regular:_propTypes.default.bool,verticalSpacing:_airbnbPropTypes.nonNegativeInteger,keepOpenOnDateSelect:_propTypes.default.bool,reopenPickerOnClearDate:_propTypes.default.bool,isOutsideRange:_propTypes.default.func,displayFormat:_propTypes.default.oneOfType([_propTypes.default.string,_propTypes.default.func]),onClose:_propTypes.default.func,onKeyDownArrowDown:_propTypes.default.func,onKeyDownQuestionMark:_propTypes.default.func,customInputIcon:_propTypes.default.node,customCloseIcon:_propTypes.default.node,isFocused:_propTypes.default.bool,phrases:_propTypes.default.shape((0,_getPhrasePropTypes.default)(_defaultPhrases.SingleDatePickerInputPhrases)),isRTL:_propTypes.default.bool}):{},defaultProps={children:null,date:null,focused:!1,placeholder:"",ariaLabel:void 0,screenReaderMessage:"Date",showClearDate:!1,showCaret:!1,showDefaultInputIcon:!1,inputIconPosition:_constants.ICON_BEFORE_POSITION,disabled:!1,required:!1,readOnly:!1,openDirection:_constants.OPEN_DOWN,noBorder:!1,block:!1,small:!1,regular:!1,verticalSpacing:void 0,keepOpenOnDateSelect:!1,reopenPickerOnClearDate:!1,isOutsideRange:function(e){return!(0,_isInclusivelyAfterDay.default)(e,(0,_moment.default)())},displayFormat:function(){return _moment.default.localeData().longDateFormat("L")},onClose:function(){},onKeyDownArrowDown:function(){},onKeyDownQuestionMark:function(){},customInputIcon:null,customCloseIcon:null,isFocused:!1,phrases:_defaultPhrases.SingleDatePickerInputPhrases,isRTL:!1},SingleDatePickerInputController=function(t){(0,_inheritsLoose2.default)(o,t);var e=o.prototype;function o(e){var o=t.call(this,e)||this;return o.onChange=o.onChange.bind((0,_assertThisInitialized2.default)(o)),o.onFocus=o.onFocus.bind((0,_assertThisInitialized2.default)(o)),o.onClearFocus=o.onClearFocus.bind((0,_assertThisInitialized2.default)(o)),o.clearDate=o.clearDate.bind((0,_assertThisInitialized2.default)(o)),o}return e[!_react.default.PureComponent&&"shouldComponentUpdate"]=function(e,o){return!(0,_enzymeShallowEqual.default)(this.props,e)||!(0,_enzymeShallowEqual.default)(this.state,o)},e.onChange=function(e){var o=this.props,t=o.isOutsideRange,r=o.keepOpenOnDateSelect,a=o.onDateChange,n=o.onFocusChange,s=o.onClose,i=(0,_toMomentObject.default)(e,this.getDisplayFormat());i&&!t(i)?(a(i),r||(n({focused:!1}),s({date:i}))):a(null)},e.onFocus=function(){var e=this.props,o=e.onFocusChange;e.disabled||o({focused:!0})},e.onClearFocus=function(){var e=this.props,o=e.focused,t=e.onFocusChange,r=e.onClose,a=e.date;o&&(t({focused:!1}),r({date:a}))},e.getDisplayFormat=function(){var e=this.props.displayFormat;return"string"==typeof e?e:e()},e.getDateString=function(e){var o=this.getDisplayFormat();return e&&o?e&&e.format(o):(0,_toLocalizedDateString.default)(e)},e.clearDate=function(){var e=this.props,o=e.onDateChange,t=e.reopenPickerOnClearDate,r=e.onFocusChange;o(null),t&&r({focused:!0})},e.render=function(){var e=this.props,o=e.children,t=e.id,r=e.placeholder,a=e.ariaLabel,n=e.disabled,s=e.focused,i=e.isFocused,p=e.required,l=e.readOnly,u=e.openDirection,d=e.showClearDate,c=e.showCaret,f=e.showDefaultInputIcon,_=e.inputIconPosition,h=e.customCloseIcon,D=e.customInputIcon,y=e.date,g=e.phrases,b=e.onKeyDownArrowDown,T=e.onKeyDownQuestionMark,m=e.screenReaderMessage,I=e.isRTL,q=e.noBorder,C=e.block,P=e.small,S=e.regular,w=e.verticalSpacing,O=this.getDateString(y);return _react.default.createElement(_SingleDatePickerInput.default,{id:t,placeholder:r,ariaLabel:a,focused:s,isFocused:i,disabled:n,required:p,readOnly:l,openDirection:u,showCaret:c,onClearDate:this.clearDate,showClearDate:d,showDefaultInputIcon:f,inputIconPosition:_,customCloseIcon:h,customInputIcon:D,displayValue:O,onChange:this.onChange,onFocus:this.onFocus,onKeyDownShiftTab:this.onClearFocus,onKeyDownArrowDown:b,onKeyDownQuestionMark:T,screenReaderMessage:m,phrases:g,isRTL:I,noBorder:q,block:C,small:P,regular:S,verticalSpacing:w},o)},o}(_react.default.PureComponent||_react.default.Component);(exports.default=SingleDatePickerInputController).propTypes="production"!==process.env.NODE_ENV?propTypes:{},SingleDatePickerInputController.defaultProps=defaultProps;