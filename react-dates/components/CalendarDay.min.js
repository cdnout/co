"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.PureCalendarDay=void 0;var _enzymeShallowEqual=_interopRequireDefault(require("enzyme-shallow-equal")),_extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends")),_assertThisInitialized2=_interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized")),_inheritsLoose2=_interopRequireDefault(require("@babel/runtime/helpers/inheritsLoose")),_defineProperty2=_interopRequireDefault(require("@babel/runtime/helpers/defineProperty")),_react=_interopRequireDefault(require("react")),_propTypes=_interopRequireDefault(require("prop-types")),_reactMomentProptypes=_interopRequireDefault(require("react-moment-proptypes")),_airbnbPropTypes=require("airbnb-prop-types"),_reactWithStyles=require("react-with-styles"),_moment=_interopRequireDefault(require("moment")),_raf=_interopRequireDefault(require("raf")),_defaultPhrases=require("../defaultPhrases"),_getPhrasePropTypes=_interopRequireDefault(require("../utils/getPhrasePropTypes")),_getCalendarDaySettings=_interopRequireDefault(require("../utils/getCalendarDaySettings")),_ModifiersShape=_interopRequireDefault(require("../shapes/ModifiersShape")),_constants=require("../constants");function ownKeys(r,e){var o,a=Object.keys(r);return Object.getOwnPropertySymbols&&(o=Object.getOwnPropertySymbols(r),e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})),a.push.apply(a,o)),a}function _objectSpread(r){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(o),!0).forEach(function(e){(0,_defineProperty2.default)(r,e,o[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):ownKeys(Object(o)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(o,e))})}return r}var propTypes="production"!==process.env.NODE_ENV?(0,_airbnbPropTypes.forbidExtraProps)(_objectSpread({},_reactWithStyles.withStylesPropTypes,{day:_reactMomentProptypes.default.momentObj,daySize:_airbnbPropTypes.nonNegativeInteger,isOutsideDay:_propTypes.default.bool,modifiers:_ModifiersShape.default,isFocused:_propTypes.default.bool,tabIndex:_propTypes.default.oneOf([0,-1]),onDayClick:_propTypes.default.func,onDayMouseEnter:_propTypes.default.func,onDayMouseLeave:_propTypes.default.func,renderDayContents:_propTypes.default.func,ariaLabelFormat:_propTypes.default.string,phrases:_propTypes.default.shape((0,_getPhrasePropTypes.default)(_defaultPhrases.CalendarDayPhrases))})):{},defaultProps={day:(0,_moment.default)(),daySize:_constants.DAY_SIZE,isOutsideDay:!1,modifiers:new Set,isFocused:!1,tabIndex:-1,onDayClick:function(){},onDayMouseEnter:function(){},onDayMouseLeave:function(){},renderDayContents:null,ariaLabelFormat:"dddd, LL",phrases:_defaultPhrases.CalendarDayPhrases},CalendarDay=function(t){(0,_inheritsLoose2.default)(r,t);var e=r.prototype;function r(){for(var e,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))||this).setButtonRef=e.setButtonRef.bind((0,_assertThisInitialized2.default)(e)),e}return e[!_react.default.PureComponent&&"shouldComponentUpdate"]=function(e,r){return!(0,_enzymeShallowEqual.default)(this.props,e)||!(0,_enzymeShallowEqual.default)(this.state,r)},e.componentDidUpdate=function(e){var r=this,o=this.props,a=o.isFocused,t=o.tabIndex;0===t&&(!a&&t===e.tabIndex||(0,_raf.default)(function(){r.buttonRef&&r.buttonRef.focus()}))},e.onDayClick=function(e,r){var o=this.props.onDayClick;o(e,r)},e.onDayMouseEnter=function(e,r){var o=this.props.onDayMouseEnter;o(e,r)},e.onDayMouseLeave=function(e,r){var o=this.props.onDayMouseLeave;o(e,r)},e.onKeyDown=function(e,r){var o=this.props.onDayClick,a=r.key;"Enter"!==a&&" "!==a||o(e,r)},e.setButtonRef=function(e){this.buttonRef=e},e.render=function(){var r=this,e=this.props,o=e.day,a=e.ariaLabelFormat,t=e.daySize,n=e.isOutsideDay,d=e.modifiers,l=e.renderDayContents,c=e.tabIndex,s=e.styles,_=e.phrases;if(!o)return _react.default.createElement("td",null);var i=(0,_getCalendarDaySettings.default)(o,a,t,d,_),u=i.daySizeStyles,p=i.useDefaultCursor,b=i.selected,h=i.hoveredSpan,y=i.isOutsideRange,f=i.ariaLabel;return _react.default.createElement("td",(0,_extends2.default)({},(0,_reactWithStyles.css)(s.CalendarDay,p&&s.CalendarDay__defaultCursor,s.CalendarDay__default,n&&s.CalendarDay__outside,d.has("today")&&s.CalendarDay__today,d.has("first-day-of-week")&&s.CalendarDay__firstDayOfWeek,d.has("last-day-of-week")&&s.CalendarDay__lastDayOfWeek,d.has("hovered-offset")&&s.CalendarDay__hovered_offset,d.has("hovered-start-first-possible-end")&&s.CalendarDay__hovered_start_first_possible_end,d.has("hovered-start-blocked-minimum-nights")&&s.CalendarDay__hovered_start_blocked_min_nights,d.has("highlighted-calendar")&&s.CalendarDay__highlighted_calendar,d.has("blocked-minimum-nights")&&s.CalendarDay__blocked_minimum_nights,d.has("blocked-calendar")&&s.CalendarDay__blocked_calendar,h&&s.CalendarDay__hovered_span,d.has("after-hovered-start")&&s.CalendarDay__after_hovered_start,d.has("selected-span")&&s.CalendarDay__selected_span,d.has("selected-start")&&s.CalendarDay__selected_start,d.has("selected-end")&&s.CalendarDay__selected_end,b&&!d.has("selected-span")&&s.CalendarDay__selected,d.has("before-hovered-end")&&s.CalendarDay__before_hovered_end,d.has("no-selected-start-before-selected-end")&&s.CalendarDay__no_selected_start_before_selected_end,d.has("selected-start-in-hovered-span")&&s.CalendarDay__selected_start_in_hovered_span,d.has("selected-end-in-hovered-span")&&s.CalendarDay__selected_end_in_hovered_span,d.has("selected-start-no-selected-end")&&s.CalendarDay__selected_start_no_selected_end,d.has("selected-end-no-selected-start")&&s.CalendarDay__selected_end_no_selected_start,y&&s.CalendarDay__blocked_out_of_range,u),{role:"button",ref:this.setButtonRef,"aria-disabled":d.has("blocked"),"aria-label":f,onMouseEnter:function(e){r.onDayMouseEnter(o,e)},onMouseLeave:function(e){r.onDayMouseLeave(o,e)},onMouseUp:function(e){e.currentTarget.blur()},onClick:function(e){r.onDayClick(o,e)},onKeyDown:function(e){r.onKeyDown(o,e)},tabIndex:c}),l?l(o,d):o.format("D"))},r}(_react.default.PureComponent||_react.default.Component);(exports.PureCalendarDay=CalendarDay).propTypes="production"!==process.env.NODE_ENV?propTypes:{},CalendarDay.defaultProps=defaultProps;var _default=(0,_reactWithStyles.withStyles)(function(e){var r=e.reactDates,o=r.color;return{CalendarDay:{boxSizing:"border-box",cursor:"pointer",fontSize:r.font.size,textAlign:"center",":active":{outline:0}},CalendarDay__defaultCursor:{cursor:"default"},CalendarDay__default:{border:"1px solid ".concat(o.core.borderLight),color:o.text,background:o.background,":hover":{background:o.core.borderLight,border:"1px solid ".concat(o.core.borderLight),color:"inherit"}},CalendarDay__hovered_offset:{background:o.core.borderBright,border:"1px double ".concat(o.core.borderLight),color:"inherit"},CalendarDay__outside:{border:0,background:o.outside.backgroundColor,color:o.outside.color,":hover":{border:0}},CalendarDay__blocked_minimum_nights:{background:o.minimumNights.backgroundColor,border:"1px solid ".concat(o.minimumNights.borderColor),color:o.minimumNights.color,":hover":{background:o.minimumNights.backgroundColor_hover,color:o.minimumNights.color_active},":active":{background:o.minimumNights.backgroundColor_active,color:o.minimumNights.color_active}},CalendarDay__highlighted_calendar:{background:o.highlighted.backgroundColor,color:o.highlighted.color,":hover":{background:o.highlighted.backgroundColor_hover,color:o.highlighted.color_active},":active":{background:o.highlighted.backgroundColor_active,color:o.highlighted.color_active}},CalendarDay__selected_span:{background:o.selectedSpan.backgroundColor,border:"1px double ".concat(o.selectedSpan.borderColor),color:o.selectedSpan.color,":hover":{background:o.selectedSpan.backgroundColor_hover,border:"1px double ".concat(o.selectedSpan.borderColor),color:o.selectedSpan.color_active},":active":{background:o.selectedSpan.backgroundColor_active,border:"1px double ".concat(o.selectedSpan.borderColor),color:o.selectedSpan.color_active}},CalendarDay__selected:{background:o.selected.backgroundColor,border:"1px double ".concat(o.selected.borderColor),color:o.selected.color,":hover":{background:o.selected.backgroundColor_hover,border:"1px double ".concat(o.selected.borderColor),color:o.selected.color_active},":active":{background:o.selected.backgroundColor_active,border:"1px double ".concat(o.selected.borderColor),color:o.selected.color_active}},CalendarDay__hovered_span:{background:o.hoveredSpan.backgroundColor,border:"1px double ".concat(o.hoveredSpan.borderColor),color:o.hoveredSpan.color,":hover":{background:o.hoveredSpan.backgroundColor_hover,border:"1px double ".concat(o.hoveredSpan.borderColor),color:o.hoveredSpan.color_active},":active":{background:o.hoveredSpan.backgroundColor_active,border:"1px double ".concat(o.hoveredSpan.borderColor),color:o.hoveredSpan.color_active}},CalendarDay__blocked_calendar:{background:o.blocked_calendar.backgroundColor,border:"1px solid ".concat(o.blocked_calendar.borderColor),color:o.blocked_calendar.color,":hover":{background:o.blocked_calendar.backgroundColor_hover,border:"1px solid ".concat(o.blocked_calendar.borderColor),color:o.blocked_calendar.color_active},":active":{background:o.blocked_calendar.backgroundColor_active,border:"1px solid ".concat(o.blocked_calendar.borderColor),color:o.blocked_calendar.color_active}},CalendarDay__blocked_out_of_range:{background:o.blocked_out_of_range.backgroundColor,border:"1px solid ".concat(o.blocked_out_of_range.borderColor),color:o.blocked_out_of_range.color,":hover":{background:o.blocked_out_of_range.backgroundColor_hover,border:"1px solid ".concat(o.blocked_out_of_range.borderColor),color:o.blocked_out_of_range.color_active},":active":{background:o.blocked_out_of_range.backgroundColor_active,border:"1px solid ".concat(o.blocked_out_of_range.borderColor),color:o.blocked_out_of_range.color_active}},CalendarDay__hovered_start_first_possible_end:{background:o.core.borderLighter,border:"1px double ".concat(o.core.borderLighter)},CalendarDay__hovered_start_blocked_min_nights:{background:o.core.borderLighter,border:"1px double ".concat(o.core.borderLight)},CalendarDay__selected_start:{},CalendarDay__selected_end:{},CalendarDay__today:{},CalendarDay__firstDayOfWeek:{},CalendarDay__lastDayOfWeek:{},CalendarDay__after_hovered_start:{},CalendarDay__before_hovered_end:{},CalendarDay__no_selected_start_before_selected_end:{},CalendarDay__selected_start_in_hovered_span:{},CalendarDay__selected_end_in_hovered_span:{},CalendarDay__selected_start_no_selected_end:{},CalendarDay__selected_end_no_selected_start:{}}},{pureComponent:void 0!==_react.default.PureComponent})(CalendarDay);exports.default=_default;