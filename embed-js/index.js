!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):t.embed=n()}(this,function(){"use strict";function t(){var n=[].slice.call(arguments),e=!1;"boolean"==typeof n[0]&&(e=n.shift());var o=n[0];if(!o||"object"!=typeof o&&"function"!=typeof o)throw new Error("extendee must be an object");for(var r=n.slice(1),i=r.length,u=0;u<i;u++){var s=r[u];for(var p in s)if(s.hasOwnProperty(p)){var c=s[p];if(e&&function(t){return Array.isArray(t)||"[object Object]"=={}.toString.call(t)}(c)){var f=Array.isArray(c)?[]:{};o[p]=t(!0,o.hasOwnProperty(p)?o[p]:f,c)}else o[p]=c}}return o}function n(t){var n=t.input,e=t.target;return r(n)||e&&r(e)}var e=t,o=function(t,n){return n={exports:{}},t(n,n.exports),n.exports}(function(t){t.exports=function(t,n,e){return new Promise(function(o,r){var i=t[Symbol.iterator](),u=0,s=function(t){var e=i.next();e.done?o(t):Promise.all([t,e.value]).then(function(t){s(n(t[0],t[1],u++))}).catch(r)};s(e)})}}),r=function(t){return!(!t||"object"!=typeof t)&&("object"==typeof window&&"object"==typeof window.Node?t instanceof window.Node:"number"==typeof t.nodeType&&"string"==typeof t.nodeName)},i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u="object"===("undefined"==typeof window?"undefined":i(window))&&"object"===("undefined"==typeof document?"undefined":i(document))&&9===document.nodeType,s=function(t){var n={plugins:[],preset:null,fetch:u&&(window.fetch||window.unfetch),inlineEmbed:!0,replaceUrl:!1,_embeds:[],_services:[]},o=t.input,i=t.plugins;void 0===i&&(i=[]);var s=t.preset;if(!o)throw new Error("You need to pass input element or string in the options object.");var p=r(o)?o.innerHTML:o;this.options=e({},n,t,{result:p,plugins:s?i.concat(s):i,inputString:p})};return s.prototype.text=function(){var t=this.resetOptions();return function(t,n){return o(t,function(t,n){return n(t)},n)}(t.plugins.map(function(t){return t.transform}),t)},s.prototype.resetOptions=function(){return e({},this.options,{_embeds:[]})},s.prototype.load=function(){var t=this;this.options.plugins.forEach(function(n){return n.onLoad&&n.onLoad(t.options)})},s.prototype.render=function(){var t=this;return new Promise(function(e,o){function i(){return this.load(),e(f)}var u,s,p,c,f,a;return a=t.options,u=a.input,s=a.target,p=a.inlineEmbed,n(t.options)?r(u)&&u.classList.contains("ejs-applied")?(f=t.options,i.call(t)):t.text().then(function(n){try{return f=n,c=s||u,c.innerHTML=p?f.result:function(t){return t.result+" "+t._embeds.sort(function(t,n){return t.index-n.index}).map(function(t){return t.content}).join(" ")}(f),c.classList.add("ejs-applied"),i.call(t)}catch(t){return o(t)}},o):o(new Error("You haven't passed the input as an element."))})},s.prototype.destroy=function(){var t=this.options,e=t.inputString,o=t.input,r=t.target;if(!n(this.options))throw new Error("You haven't passed the input as an element.");var i=r||o;return i.innerHTML=e,i.classList.remove("ejs-applied"),this.options},s});
//# sourceMappingURL=embed.min.js.map
