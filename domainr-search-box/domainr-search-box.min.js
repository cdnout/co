!function(t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).domainr=t()}(function(){return function s(n,r,a){function o(e,t){if(!r[e]){if(!n[e]){var i="function"==typeof require&&require;if(!t&&i)return i(e,!0);if(u)return u(e,!0);throw(i=new Error("Cannot find module '"+e+"'")).code="MODULE_NOT_FOUND",i}i=r[e]={exports:{}},n[e][0].call(i.exports,function(t){return o(n[e][1][t]||t)},i,i.exports,s,n,r,a)}return r[e].exports}for(var u="function"==typeof require&&require,t=0;t<a.length;t++)o(a[t]);return o}({1:[function(t,e,i){"use strict";var u=t("./util"),h=0,s=!1;function r(){try{return new(window.XMLHttpRequest||window.ActiveXObject)("MSXML2.XMLHTTP.3.0")}catch(t){return{}}}"withCredentials"in r()&&(s=!0),e.exports={getJSON:function(t,e,i){if(!e)throw new Error("[domainr] Missing callback");(s?function(t,i,s){s=s||function(){};var n=r();n.onreadystatechange=function(){var e,t;if(4==n.readyState){if(200!=n.status)return e="Error fetching data: "+n.responseText,u.error(e),void s({message:e});try{t=JSON.parse(n.responseText)}catch(t){return e="Unable to parse data: "+n.responseText+"; "+t,u.error(e),void s({message:e})}i(t)}},n.open("GET",t,!0),n.send()}:function(e,i,s){var t=document.createElement("script");t.async=!0;var n="_jsonp"+h++,r=!1,a=setTimeout(function(){var t="Timeout trying to retrieve "+e;u.error(t),s&&(s({message:t}),r=!0)},5e3);window[n]=function(t){clearTimeout(a),setTimeout(function(){var t=document.getElementById(n);t.parentNode.removeChild(t),window[n]=void 0;try{delete window[n]}catch(t){}},0),r||i(t)};var o=0<=e.indexOf("?")?"&":"?";t.setAttribute("src",e+o+"callback="+n),t.id=n;o=document.head||document.getElementsByTagName("head")[0]||document.documentElement;o.insertBefore(t,o.firstChild)})(t,e,i)}}},{"./util":6}],2:[function(t,e,i){"use strict";var n=t("./ajax"),o=t("./util");function s(t){if(t=t||{},this.clientId=t.clientId,this.mashapeKey=t.mashapeKey,!this.clientId&&!this.mashapeKey)throw new Error("[domainr] Missing mashapeKey or clientId");this.baseURL=t.baseURL||(this.clientId?"https://api.domainr.com/v2":"https://domainr.p.rapidapi.com/v2")}s.prototype={search:function(t,e){this._get("/search",this.searchParams(t),e)},searchParams:function(t){return o.extract(t,["query","registrar","location","defaults"])},status:function(t,e){var i=this;if(!t)throw new Error("[domainr] domains array is required");o.uniq(t);for(var s={status:[]},n=0,r=function(){++n===t.length&&e(s)},a=0;a<t.length;a++)!function(t){t={domain:t};i._get("/status",t,function(t){t&&t.status&&t.status[0]?s.status.push(t.status[0]):o.error("Empty status result",t),r()},r)}(t[a])},options:function(t,e){this._get("/options",{domain:t},e)},zones:function(t){this._get("/zones",{},t)},registerURL:function(t,e){e=o.extract(e,["registrar"]);return e.domain=t,this._url("/register",e)},_get:function(t,e,i,s){e=this.baseURL+t+"?"+o.qs(e||{},this._key());n.getJSON(e,i,s)},_url:function(t,e){return this.baseURL+t+"?"+o.qs(e||{},this._key())},_key:function(){return this.clientId?{client_id:this.clientId}:{"mashape-key":this.mashapeKey}}},e.exports=s},{"./ajax":1,"./util":6}],3:[function(t,e,i){"use strict";var s=t("./client"),n=t("./search-box");t("./jquery"),e.exports={Client:s,SearchBox:n}},{"./client":2,"./jquery":4,"./search-box":5}],4:[function(t,e,i){"use strict";t("./search-box");var n,r=t("./util");window.jQuery&&((n=window.jQuery).fn.domainrSearchBox=function(s){return this.each(function(t,e){var i=r.extract(s,["clientId","mashapeKey","renderWith","limit","registrar","defaults","onSelect"]);i.observe=e,!s.renderTo||0<(e=n(s.renderTo)).length&&(i.renderTo=e[0]);new domainr.SearchBox(i)}),this})},{"./search-box":5,"./util":6}],5:[function(t,e,i){"use strict";var n=t("./client"),a=t("./util"),t=function(t){var e,i,s=this;if(!(t=t||{}).observe)throw new Error('[domainr] "observe" is required');this._client=new n(a.extract(t,["clientId","mashapeKey"])),this._state={query:"",results:[],limit:20,selection:-1},this._seq=0,this._last=0,this._cache={},this._listeners={},this._searchTimeout=null,this._searchDelay=250,this._renderer=r,this._in=t.observe,o(this._in,"keyup",this._input,this),o(this._in,"input",this._input,this),o(this._in,"change",this._input,this),o(this._in,"keydown",this._keydown,this),void 0!==t.renderTo&&(this._out=t.renderTo,e=this._out,i="domainr-results-container",e.classList?e.classList.add(i):e.className+=" "+i,o(this._out,"click",this._click,this)),void 0!==t.renderWith&&(this._renderer=t.renderWith),void 0!==t.limit&&(this._state.limit=t.limit),void 0!==t.registrar&&(this._state.registrar=t.registrar),void 0!==t.defaults&&(this._state.defaults=t.defaults.join(",")),void 0!==t.searchDelay&&(this._searchDelay=t.searchDelay),void 0!==t.onSelect?this._onSelect=t.onSelect:this._onSelect=function(t){s._in.value=t.domain,window.open(s._client.registerURL(t.domain))},this._input()};function r(t){var e=t.results,i=e.length;if(0===i)return"";for(var s=['<div class="domainr-results">'],n=0;n<i;n++){var r=e[n],a=["domainr-result",r.status];t.selection===n&&a.push("selected"),s.push('<div class="'+a.join(" ")+'" data-domain="'+r.domain+'"><span class="domainr-result-domain"><span class="domainr-result-host">'+r.host+'</span><span class="domainr-result-subdomain">'+r.subdomain+'</span><span class="domainr-result-zone">'+r.zone+'</span></span><span class="domainr-result-path">'+r.path+"</span></div>")}return s.push("</div>"),s.join("")}function o(t,e,i,s){var n;s&&(n=i,i=function(){return n.apply(s,arguments)}),t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent?t.attachEvent("on"+e,i):t["on"+e]=i}t.prototype={_input:function(){if(this._state.query!=this._in.value){if(""===this._in.value)return this._state.results=[],void this._update();this._state.query=this._in.value,window.clearTimeout(this._searchTimeout),this._searchTimeout=window.setTimeout(this._search.bind(this),this._searchDelay)}},_keydown:function(t){var e=!1;38===(t=t||window.event).keyCode?(e=!0,this._state.selection--,this._state.selection<0&&(this._state.selection=this._state.results.length-1),this._update()):40===t.keyCode?(e=!0,this._state.selection++,this._state.selection>=this._state.results.length&&(this._state.selection=0),this._update()):13===t.keyCode&&-1!==this._state.selection&&(e=!0,this._choose(this._state.results[this._state.selection])),e&&t.preventDefault&&t.preventDefault()},_click:function(t){t=t||window.event;for(var e=this._state.results,i=t.target||t.srcElement;i&&i!=document;i=i.parentNode){var s=i.getAttribute("data-domain");if(s)for(var n=0;n<e.length;n++){var r=e[n];if(r.domain==s)return void this._choose(r)}}},_render:function(){if(this._out)return this._out.innerHTML=this._renderer(this._state),this},_search:function(){var e=this;this._state.selection=-1;var i=a.qs(this._client.searchParams(this._state)),t=this._cache[i];if(void 0!==t)return this._state.results=t.results,void this._update();var s=this._seq++;this._client.search(this._state,function(t){e._cache[i]=t,e._last>s||(e._last=s,e._state.results=t.results,e._update())})},_update:function(){this._sort(),this._limit(),this._status(),this._render()},_sort:function(){var n;this._state.defaults&&this._state.results&&(n=this._state.defaults.split(","),this._state.results.sort(function(t,e){var i=a.indexOf(n,t.zone);-1===i&&(i=n.length);var s=a.indexOf(n,e.zone);return-1===s&&(s=n.length),i!==s?i-s:t.domain-e.domain}))},_limit:function(){0<=this._state.limit&&this._state.results.length>this._state.limit&&(this._state.results.length=this._state.limit)},_status:function(){var e=this,t=[],i=this._state.results;for(r=0;r<i.length&&t.length<10;r++){var s=i[r];s.status=this._cache[s.domain+":status"]||s.status,s.status||(s.status="unknown",t.push(s.domain))}if(0!==t.length){a.uniq(t);for(var n,r=0;r<t.length;r++)n=t[r],e._client.status([n],function(t){t=t.status[0];t&&(e._cache[t.domain+":status"]=t.status,e._update())})}},_choose:function(t){this._onSelect&&this._onSelect(t)}},e.exports=t},{"./client":2,"./util":6}],6:[function(t,e,i){"use strict";var n=encodeURIComponent;e.exports={euc:n,extract:function(t,e){var i={};if(t)for(var s=0;s<e.length;s++){var n=e[s];void 0!==t[n]&&(i[n]=t[n])}return i},qs:function(){for(var t=[],e=0;e<arguments.length;e++){var i,s=arguments[e];for(i in s)t.push(n(i)+"="+n(s[i]))}return t.sort().join("&")},error:function(t){window.console&&window.console.error&&window.console.error("[domainr] "+t)},uniq:function(t){if(t)for(var e,i=0;i<t.length;i++)for(e=i+1;e<t.length;e++)t[i]===t[e]&&(t.splice(e,1),e--)},indexOf:function(t,e){if(!t)return-1;for(var i=0;i<t.length;i++)if(t[i]===e)return i;return-1}}},{}]},{},[3])(3)});