/*!
 * EmberFire is the officially supported adapter for using Firebase with
 * Ember Data. The DS.FirebaseAdapter provides all of the standard DS.Adapter
 * methods and will automatically synchronize the store with Firebase.
 *
 * EmberFire 0.0.0
 * https://github.com/firebase/emberfire/
 * License: MIT
 */
!function e(t,r,i){function n(a,d){if(!r[a]){if(!t[a]){var s="function"==typeof require&&require;if(!d&&s)return s(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var u=r[a]={exports:{}};t[a][0].call(u.exports,function(e){var r=t[a][1][e];return n(r?r:e)},u,u.exports,e,t,r,i)}return r[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)n(i[a]);return n}({1:[function(e,t,r){(function(i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var o="undefined"!=typeof window?window.Ember:"undefined"!=typeof i?i.Ember:null,a=n(o),d="undefined"!=typeof window?window.DS:"undefined"!=typeof i?i.DS:null,s=n(d),l=e("../mixins/waitable"),u=n(l),f=e("../utils/to-promise"),c=n(f),h=e("ember-inflector"),p=a["default"].assign,y=a["default"].RSVP,_=y.Promise,v=function(e){var t=a["default"].A();return e.forEach(function(e){t.indexOf(e)<0&&t.push(e)}),t},m=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e};r["default"]=s["default"].Adapter.extend(u["default"],{firebase:a["default"].inject.service(),store:a["default"].inject.service(),defaultSerializer:"-firebase",init:function(){this._super.apply(this,arguments);var e=this.get("firebase");if(!e)throw new Error("Please set the `firebase` property in the environment config.");this._ref=e,this._findAllMapForType={},this._recordCacheForType={},this._queue=[],this._queuedPayloads={}},generateIdForRecord:function(){return this._getKey(this._ref.push())},_assignIdToPayload:function(e){var t=e.val();return null!==t&&"object"==typeof t&&"undefined"==typeof t.id&&(t.id=this._getKey(e)),t},findRecord:function(e,t,r){var i=this,n=this._getCollectionRef(t,r),o="DS: FirebaseAdapter#findRecord "+t.modelName+" to "+n.toString();return this._fetch(n,o).then(function(o){var a=i._assignIdToPayload(o);if(i._updateRecordCacheForType(t,a,e),null===a){var d=new Error("no record was found at "+n.toString());throw d.recordId=r,d}return a})},_fetch:function(e,t){return y.resolve(e.once("value"),t)},recordWasPushed:function(e,t,r){if(!r.__listening){var i=e.modelFor(t);this.listenForChanges(e,i,r)}},recordWillUnload:function(e,t){t.__listening&&this.stopListening(e,t.constructor,t)},recordWillDelete:function(e,t){var r=this;t.eachRelationship(function(i,n){if("belongsTo"===n.kind){var o=t.get(n.key),a=t.inverseFor(n.key);if(a&&o.get("id")){var d=r._getCollectionRef(a.type,o.get("id"));r._removeHasManyRecord(e,d,a.name,t.constructor,t.id)}}})},listenForChanges:function(e,t,r){var i=this;if(!this.isRecordEmbedded(r)){r.__listening=!0;var n=this._getCollectionRef(t,r.id),o=!1;n.on("value",function(r){o&&a["default"].run(function(){i._handleChildValue(e,t,r)}),o=!0},function(e){a["default"].Logger.error(e)})}},stopListening:function(e,t,r){if(r.__listening){var i=this._getCollectionRef(t,r.id);i.off("value"),r.__listening=!1}},findAll:function(e,t){var r=this,i=this._getCollectionRef(t),n="DS: FirebaseAdapter#findAll "+t.modelName+" to "+i.toString();return this._fetch(i,n).then(function(n){r._findAllHasEventsForType(t)||r._findAllAddEventListeners(e,t,i);var o=[];return n.forEach(function(i){var n=r._assignIdToPayload(i);r._updateRecordCacheForType(t,n,e),o.push(n)}),o})},query:function(e,t,r,i){var n=this,o=this._getCollectionRef(t),d=t.modelName;o=this.applyQueryToRef(o,r),o.on("child_added",a["default"].run.bind(this,function(r){var n=e.peekRecord(d,this._getKey(r));if(!n||!n.__listening){var o=this._assignIdToPayload(r),a=e.normalize(t.modelName,o);this._updateRecordCacheForType(t,o,e),n=e.push(a)}n&&i.get("content").addObject(n._internalModel)})),o.on("child_removed",a["default"].run.bind(this,function(t){var r=e.peekRecord(d,this._getKey(t));r&&i.get("content").removeObject(r._internalModel)})),i.__firebaseCleanup=function(){o.off("child_added"),o.off("child_removed")};var s="DS: FirebaseAdapter#query "+d+" with "+r;return this._fetch(o,s).then(function(r){n._findAllHasEventsForType(t)||n._findAllAddEventListeners(e,t,o);var i=[];return r.forEach(function(r){var o=n._assignIdToPayload(r);n._updateRecordCacheForType(t,o,e),i.push(o)}),i})},applyQueryToRef:function(e,t){return t.orderBy||(t.orderBy="_key"),e="_key"===t.orderBy?e.orderByKey():"_value"===t.orderBy?e.orderByValue():"_priority"===t.orderBy?e.orderByPriority():e.orderByChild(t.orderBy),e=this._applyRangesToRef(e,t),e=this._applyLimitsToRef(e,t)},_applyRangesToRef:function(e,t){var r=["equalTo","startAt","endAt"];return r.forEach(function(r){void 0!==t[r]&&(e=e[r](t[r]))}),e},_applyLimitsToRef:function(e,t){var r=["limitToFirst","limitToLast"];return r.forEach(function(r){m(t[r])&&(e=e[r](t[r]))}),e},_findAllMapForType:void 0,_findAllHasEventsForType:function(e){return!a["default"].isNone(this._findAllMapForType[e.modelName])},_findAllAddEventListeners:function(e,t,r){var i=t.modelName;this._findAllMapForType[i]=!0,r.on("child_added",a["default"].run.bind(this,function(r){e.hasRecordForId(i,this._getKey(r))||this._handleChildValue(e,t,r)}))},_handleChildValue:function(e,t,r){if(!e.isDestroying){var i=r.val();if(null===i){var n=this._getKey(r),o=e.peekRecord(t.modelName,n);o.get("isDeleted")||o.deleteRecord()}else{var a=this._assignIdToPayload(r);this._pushLater(t.modelName,a.id,a)}}},createRecord:function(e,t,r){var i=this;return this.updateRecord(e,t,r).then(function(){i.listenForChanges(e,t,r.record)})},updateRecord:function(e,t,r){var i=this,n=this._getAbsoluteRef(r.record),o=this._getRecordCache(t,r.id),d=n.path.toString().split("/"),s=d[d.length-1],l=r.serialize({includeId:s!==r.id}),u=e.serializerFor(t.modelName);return new _(function(d,s){var f=[];r.record.eachRelationship(function(r,n){var o=u.keyForRelationship(r),d=l[o],s=i.isRelationshipEmbedded(e,t.modelName,n),c="hasMany"===n.kind;(c||s)&&(a["default"].isNone(d)||f.push({data:d,relationship:n,isEmbedded:s,hasMany:c}),delete l[o])});var c=function(e){var i=new Error("Some errors were encountered while saving "+t+" "+r.id);i.errors=e,s(i)};i._updateRecord(n,l).then(function(){var r=f.map(function(r){var a=r.data,d=r.relationship;return r.hasMany?i._saveHasManyRelationship(e,t,d,a,n,o):r.isEmbedded?i._saveEmbeddedBelongsToRecord(e,t,d,a,n):void 0});return a["default"].RSVP.allSettled(r)})["catch"](function(e){c([e])}).then(function(e){var t=a["default"].A(e).filterBy("state","rejected");0!==t.length?c(t.mapBy("reason").toArray()):d()})},"DS: FirebaseAdapter#updateRecord "+t+" to "+n.toString())},_updateRecord:function(e,t){var r=this;return this._incrementWaiters(),(0,c["default"])(e.update,e,[t]).then(function(e){return r._decrementWaiters(),e})["catch"](function(e){return r._decrementWaiters(),a["default"].RSVP.reject(e)})},_saveHasManyRelationship:function(e,t,r,i,n,o){var d=this;if(!a["default"].isArray(i))throw new Error("hasMany relationships must must be an array");var s=a["default"].A(o[r.key]),l=[],u=i.filter(function(e){return!s.includes(e)});l=i.filter(function(t){var i=r.type;return e.hasRecordForId(i,t)&&e.peekRecord(i,t).get("hasDirtyAttributes")===!0}),l=v(l.concat(u)).map(function(i){return d._saveHasManyRecord(e,t,r,n,i)});var f=s.filter(function(e){return!i.includes(e)});f=f.map(function(i){return d._removeHasManyRecord(e,n,r.key,t,i)});var c=l.concat(f);return a["default"].RSVP.allSettled(c).then(function(e){var t=a["default"].A(a["default"].A(e).filterBy("state","rejected"));if(0===t.get("length"))return o[r.key]=i,e;var n=new Error("Some errors were encountered while saving a hasMany relationship "+r.parentType+" -> "+r.type);throw n.errors=a["default"].A(t).mapBy("reason"),n})},_saveHasManyRecord:function(e,t,r,i,n){var o=e.serializerFor(t.modelName),a=this._getRelationshipRef(i,o.keyForRelationship(r.key),n),d=e.peekRecord(r.type,n),s=this.isRelationshipEmbedded(e,t.modelName,r);return s?d.save():(0,c["default"])(a.set,a,[!0])},isRelationshipEmbedded:function(e,t,r){var i=e.serializerFor(t);return i.hasDeserializeRecordsOption(r.key)},isRecordEmbedded:function(e){e._internalModel&&(e=e._internalModel);var t=this.getFirstEmbeddingParent(e);return!!t},_removeHasManyRecord:function(e,t,r,i,n){var o=e.serializerFor(i.modelName).keyForRelationship(r),a=this._getRelationshipRef(t,o,n);return(0,c["default"])(a.remove,a,[],a.toString())},_saveEmbeddedBelongsToRecord:function(e,t,r,i,n){var o=e.peekRecord(r.type,i);return o?o.save():a["default"].RSVP.Promise.reject(new Error("Unable to find record with id "+i+" from embedded relationship: "+JSON.stringify(r)))},deleteRecord:function(e,t,r){var i=this._getAbsoluteRef(r.record);return i.off("value"),(0,c["default"])(i.remove,i)},pathForType:function(e){var t=a["default"].String.camelize(e);return(0,h.pluralize)(t)},_getCollectionRef:function(e,t){var r=this._ref;return e&&(r=r.child(this.pathForType(e.modelName))),t&&(r=r.child(t)),r},_getAbsoluteRef:function(e){e._internalModel&&(e=e._internalModel);var t=this.getFirstEmbeddingParent(e);if(t){var r=t.record,i=t.relationship,n=r.store.serializerFor(r.modelName).keyForRelationship(i.key),o=this._getAbsoluteRef(r).child(n);return"hasMany"===i.kind&&(o=o.child(e.id)),o}return this._getCollectionRef(e.type,e.id)},getFirstEmbeddingParent:function(e){for(var t=p({},e._implicitRelationships,e._relationships.initializedRelationships),r=void 0,i=Object.keys(t),n=0;n<i.length;n++){var o=t[i[n]],a=o.members.toArray(),d=a[0];if(d&&o.inverseKey){var s=d._relationships.get(o.inverseKey);if(this.isRelationshipEmbedded(this.store,d.type.modelName,s.relationshipMeta)){r=o;break}}}if(r){var l=r.members.toArray()[0],u=r.inverseKey,f=l._relationships.get(u).relationshipMeta;return{record:l,relationship:f}}},_getRelationshipRef:function(e,t,r){return e.child(t).child(r)},_queueFlushDelay:1e3/60,_flushLater:function(){a["default"].run.later(this,this._flushQueue,this._queueFlushDelay)},_flushQueue:function(){var e=this,t=this.get("store");t.isDestroying||(this._queue.forEach(function(r){var i=e._queuedPayloads[r],n=i.payload,o=i.modelName,a=t.normalize(o,n);t.push(a)}),this._queuedPayloads={},this._queue.length=0)},_pushLater:function(e,t,r){var i=this.get("store");if(!this._queueFlushDelay){var n=i.normalize(e,r);return void i.push(n)}var o=e+"-"+t;if(this._queuedPayloads[o]){var a=this._queue.indexOf(o);this._queue.splice(a,1)}this._queuedPayloads[o]={payload:r,modelName:e},this._queue.push(o),1===this._queue.length&&this._flushLater()},_recordCacheForType:void 0,_updateRecordCacheForType:function(e,t,r){var i=this;if(t){var n=t.id,o=this._getRecordCache(e,n),d=r.serializerFor(e.modelName);e.eachRelationship(function(n,s){if("hasMany"===s.kind){var l=t[d.keyForRelationship(n)];if(l){var u=i.isRelationshipEmbedded(r,e.modelName,s);if(u){var f=r.modelFor(s.type);for(var c in l){var h=l[c];h.id=c,i._updateRecordCacheForType(f,h,r)}}else{var p=Object.keys(l);o[n]=a["default"].A(p)}}else o[n]=a["default"].A()}})}},_getRecordCache:function(e,t){var r=e.modelName,i=this._recordCacheForType;return i[r]=i[r]||{},i[r][t]=i[r][t]||{},i[r][t]},_getKey:function(e){var t;return t="function"==typeof e.key?e.key():"string"==typeof e.key?e.key:e.name()},shouldBackgroundReloadRecord:function(){return!1}}),t.exports=r["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../mixins/waitable":3,"../utils/to-promise":5,"ember-inflector":6}],2:[function(e,t,r){(function(i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var o="undefined"!=typeof window?window.Ember:"undefined"!=typeof i?i.Ember:null,a=n(o),d="undefined"!=typeof window?window.DS:"undefined"!=typeof i?i.DS:null,s=n(d),l="undefined"!=typeof window?window.firebase:"undefined"!=typeof i?i.firebase:null,u=n(l),f=e("../adapters/firebase"),c=n(f),h=e("../serializers/firebase"),p=n(h),y="2.0.10";a["default"].libraries&&(u["default"].SDK_VERSION&&a["default"].libraries.registerCoreLibrary("Firebase",u["default"].SDK_VERSION),a["default"].libraries.registerCoreLibrary("EmberFire",y)),r["default"]={name:"emberfire",before:"ember-data",initialize:function(){var e=arguments[1]||arguments[0];e.register("adapter:-firebase",c["default"]),e.register("serializer:-firebase",p["default"]);var t={instantiate:!1,singleton:!1};e.register("firebase-auth-provider:twitter",u["default"].auth.TwitterAuthProvider,t),e.register("firebase-auth-provider:facebook",u["default"].auth.FacebookAuthProvider,t),e.register("firebase-auth-provider:github",u["default"].auth.GithubAuthProvider,t),e.register("firebase-auth-provider:google",u["default"].auth.GoogleAuthProvider,t),s["default"].Store.prototype._emberfirePatched||s["default"].Store.reopen({_emberfirePatched:!0,_emberfireHandleRecordPush:function(e){var t=this;"undefined"!=typeof e&&e.forEach(function(e){var r=e.constructor.modelName,i=t.adapterFor(r);i.recordWasPushed&&i.recordWasPushed(t,r,e)})},push:function(){var e=this._super.apply(this,arguments),t=e;return null===t?null:(a["default"].isArray(e)||(t=[e]),this._emberfireHandleRecordPush(t),e)},_push:function(){var e,t=this._super.apply(this,arguments);return Array.isArray(t)?e=t.map(function(e){return e.getRecord()}):t&&(e=[t.getRecord()]),this._emberfireHandleRecordPush(e),t},recordWillUnload:function(e){var t=this.adapterFor(e.constructor.modelName);t.recordWillUnload&&t.recordWillUnload(this,e)},recordWillDelete:function(e){var t=this.adapterFor(e.constructor.modelName);t.recordWillDelete&&t.recordWillDelete(this,e)}}),s["default"].Model.prototype._emberfirePatched||s["default"].Model.reopen({_emberfirePatched:!0,unloadRecord:function(){return this.store.recordWillUnload(this),this._super()},deleteRecord:function(){this.store.recordWillDelete(this),this._super()},ref:function(){var e=this.store.adapterFor(this.constructor.modelName);return e._getAbsoluteRef?e._getAbsoluteRef(this):void 0}}),s["default"].AdapterPopulatedRecordArray.prototype._emberfirePatched||s["default"].AdapterPopulatedRecordArray.reopen({_emberfirePatched:!0,willDestroy:function(){return this.__firebaseCleanup&&this.__firebaseCleanup(),this._super()}}),s["default"].FirebaseAdapter=c["default"],s["default"].FirebaseSerializer=p["default"]}},t.exports=r["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../adapters/firebase":1,"../serializers/firebase":4}],3:[function(e,t,r){(function(e){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n="undefined"!=typeof window?window.Ember:"undefined"!=typeof e?e.Ember:null,o=i(n);r["default"]=o["default"].Mixin.create({init:function(){this._super.apply(this,arguments),this._reasons=0,o["default"].testing&&this._registerWaiter()},_incrementWaiters:function(){this._reasons++},_decrementWaiters:function(){this._reasons--},_shouldWait:function(){return 0===this._reasons},_registerWaiter:function(){var e=this;this._waiter=function(){return e._shouldWait()},o["default"].Test.registerWaiter(this._waiter)}}),t.exports=r["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],4:[function(e,t,r){(function(e){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n="undefined"!=typeof window?window.Ember:"undefined"!=typeof e?e.Ember:null,o=i(n),a="undefined"!=typeof window?window.DS:"undefined"!=typeof e?e.DS:null,d=i(a),s="undefined"!=typeof window?window.firebase:"undefined"!=typeof e?e.firebase:null,l=i(s),u=o["default"].assign;r["default"]=d["default"].JSONSerializer.extend(d["default"].EmbeddedRecordsMixin,{isNewSerializerAPI:!0,serializeAttribute:function(e,t,r,i){var n=e.attr(r);if(this._super(e,t,r,i),this._canSerialize(r)&&n===l["default"].database.ServerValue.TIMESTAMP){var o=this._getMappedKey(r,e.type);o===r&&this.keyForAttribute&&(o=this.keyForAttribute(r,"serialize")),t[o]=n}},extractAttributes:function(e,t){var r=this._super(e,t);return e.eachAttribute(function(e){r.hasOwnProperty(e)||(r[e]=null)}),r},extractRelationships:function(e,t){return this.normalizeRelationships(e,t),this._super(e,t)},normalizeRelationships:function(e,t){var r=this;e.eachRelationship(function(i,n){var a=r.keyForRelationship(i,n.kind,"deserialize");"hasMany"===n.kind&&(t.hasOwnProperty(a)?!function(){var d=t[a];if(r.hasDeserializeRecordsOption(i))if("object"!=typeof d||o["default"].isArray(d)){if(!o["default"].isArray(d))throw new Error(e.toString()+" relationship "+n.kind+"('"+n.type+"') must contain embedded records with an `id`. Example: { \""+i+'": { "'+n.type+'_1": { "id": "'+n.type+'_1" } } } instead got: '+JSON.stringify(t[i]));d=r._addNumericIdsToEmbeddedArray(d)}else d=Object.keys(d).map(function(e){return u({id:e},d[e])});else if("object"!=typeof d||o["default"].isArray(d)){if(!o["default"].isArray(d))throw new Error(e.toString()+" relationship "+n.kind+"('"+n.type+"') must be a key/value map. Example: { \""+i+'": { "'+n.type+'_1": true } } instead got: '+JSON.stringify(t[i]));d=r._convertBooleanArrayToIds(d)}else d=Object.keys(d);t[a]=d}():t[a]=[]),"belongsTo"===n.kind&&(t.hasOwnProperty(a)||(t[a]=null))})},_convertBooleanArrayToIds:function(e){for(var t=[],r=0;r<e.length;r++)if(e[r]===!0)t.push(""+r);else if("string"==typeof e[r])throw new Error("hasMany relationship contains invalid data, should be in the form: { comment_1: true, comment_2: true } but was "+JSON.stringify(e));return t},_addNumericIdsToEmbeddedArray:function(e){for(var t=[],r=0;r<e.length;r++)if(e[r]){if("object"!=typeof e[r])throw new Error("expecting embedded object hash but found "+JSON.stringify(e[r]));t.push(u({id:""+r},e[r]))}return t},serializeHasMany:function(e,t,r){d["default"].JSONSerializer.prototype.serializeHasMany.call(this,e,t,r)},serializeBelongsTo:function(e,t,r){d["default"].JSONSerializer.prototype.serializeBelongsTo.call(this,e,t,r)},shouldSerializeHasMany:function(e,t,r){return this._canSerialize(t)},_shouldSerializeHasMany:function(e,t,r){return this._canSerialize(t)}}),t.exports=r["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],5:[function(e,t,r){(function(e){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n="undefined"!=typeof window?window.Ember:"undefined"!=typeof e?e.Ember:null,o=i(n);r["default"]=function(e,t,r,i){var n=r||[];return new o["default"].RSVP.Promise(function(r,a){var d=function(e){e?(i&&"object"==typeof e&&(e.location=i),o["default"].run(null,a,e)):o["default"].run(null,r)};n.push(d),e.apply(t,n)})},t.exports=r["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],6:[function(e,t,r){"use strict";t.exports={name:"ember-inflector"}},{}],7:[function(e,t,r){(function(t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var i="undefined"!=typeof window?window.Ember:"undefined"!=typeof t?t.Ember:null,n=r(i),o="undefined"!=typeof window?window.DS:"undefined"!=typeof t?t.DS:null,a=r(o),d=e("../../addon/adapters/firebase"),s=r(d),l=e("../../addon/serializers/firebase"),u=r(l),f=e("../../addon/initializers/emberfire"),c=r(f);a["default"].FirebaseAdapter=s["default"],a["default"].FirebaseSerializer=u["default"],n["default"].onLoad("Ember.Application",function(e){e.initializer(c["default"])})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../addon/adapters/firebase":1,"../../addon/initializers/emberfire":2,"../../addon/serializers/firebase":4}]},{},[7]);