// Hprose for HTML5 v2.0.36
// Copyright (c) 2008-2016 http://hprose.com
// Hprose is freely distributable under the MIT license.
// For all details and documentation:
// https://github.com/hprose/hprose-html5

var hprose=Object.create(null);hprose.global="object"==typeof global?global:"object"==typeof window?window:"object"==typeof self?self:this,function(e,t){"use strict";function r(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return function(t){return e.apply(t,Array.prototype.slice.call(arguments,1))}}function n(e){for(var t=e.length,r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function i(e){e instanceof ArrayBuffer&&(e=new Uint8Array(e));var t=e.length;if(t<65535)return String.fromCharCode.apply(String,u(e));for(var r=32767&t,n=t>>15,i=new Array(r?n+1:n),o=0;o<n;++o)i[o]=String.fromCharCode.apply(String,u(e.subarray(o<<15,o+1<<15)));return r&&(i[n]=String.fromCharCode.apply(String,u(e.subarray(n<<15,t)))),i.join("")}function o(e){for(var t=e.length,r=new Uint8Array(t),n=0;n<t;n++)r[n]=255&e.charCodeAt(n);return r}var a=!0;try{String.fromCharCode.apply(String,new Uint8Array([1]))}catch(e){a=!1}var u=a?function(e){return e}:n,s=function(e){var t=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),r=e.match(t),n=r[4].split(":",2);return{protocol:r[1],host:r[4],hostname:n[0],port:parseInt(n[1],10)||0,path:r[5],query:r[7],fragment:r[9]}},c=function(e){if(e){var t;for(t in e)return!1}return!0};e.generic=r,e.toBinaryString=i,e.toUint8Array=o,e.toArray=n,e.parseuri=s,e.isObjectEmpty=c}(hprose),function(e,t){"use strict";function r(t,r){for(var n=t.prototype,i=0,o=r.length;i<o;i++){var a=r[i],u=n[a];"function"==typeof u&&void 0===t[a]&&Object.defineProperty(t,a,{value:e(u)})}}Function.prototype.bind||Object.defineProperty(Function.prototype,"bind",{value:function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),r=this,n=function(){},i=function(){return r.apply(this instanceof n?this:e,t.concat(Array.prototype.slice.call(arguments)))};return this.prototype&&(n.prototype=this.prototype),i.prototype=new n,i}}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e){var t=Object(this),r=parseInt(t.length,10)||0;if(0===r)return!1;var n,i=parseInt(arguments[1],10)||0;i>=0?n=i:(n=r+i)<0&&(n=0);for(var o;n<r;){if(o=t[n],e===o||e!==e&&o!==o)return!0;n++}return!1}}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null===this||void 0===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t,r=Object(this),n=r.length>>>0,i=arguments[1],o=0;o<n;o++)if(t=r[o],e.call(i,t,o,r))return t}}),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(e){if(null===this||void 0===this)throw new TypeError("Array.prototype.findIndex called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t,r=Object(this),n=r.length>>>0,i=arguments[1],o=0;o<n;o++)if(t=r[o],e.call(i,t,o,r))return o;return-1}}),Array.prototype.fill||Object.defineProperty(Array.prototype,"fill",{value:function(e){if(null===this||void 0===this)throw new TypeError("this is null or not defined");for(var t=Object(this),r=t.length>>>0,n=arguments[1],i=n>>0,o=i<0?Math.max(r+i,0):Math.min(i,r),a=arguments[2],u=void 0===a?r:a>>0,s=u<0?Math.max(r+u,0):Math.min(u,r);o<s;)t[o]=e,o++;return t}}),Array.prototype.copyWithin||Object.defineProperty(Array.prototype,"copyWithin",{value:function(e,t){if(null===this||void 0===this)throw new TypeError("this is null or not defined");var r=Object(this),n=r.length>>>0,i=e>>0,o=i<0?Math.max(n+i,0):Math.min(i,n),a=t>>0,u=a<0?Math.max(n+a,0):Math.min(a,n),s=arguments[2],c=void 0===s?n:s>>0,f=c<0?Math.max(n+c,0):Math.min(c,n),l=Math.min(f-u,n-o),h=1;for(u<o&&o<u+l&&(h=-1,u+=l-1,o+=l-1);l>0;)u in r?r[o]=r[u]:delete r[o],u+=h,o+=h,l--;return r}}),Array.from||Object.defineProperty(Array,"from",{value:function(){var e=Object.prototype.toString,t=function(t){return"function"==typeof t||"[object Function]"===e.call(t)},r=function(e){var t=Number(e);return isNaN(t)?0:0!==t&&isFinite(t)?(t>0?1:-1)*Math.floor(Math.abs(t)):t},n=Math.pow(2,53)-1,i=function(e){var t=r(e);return Math.min(Math.max(t,0),n)};return function(e){var r=this,n=Object(e);if(null===e||void 0===e)throw new TypeError("Array.from requires an array-like object - not null or undefined");var o,a=arguments.length>1?arguments[1]:void 0;if(void 0!==a){if(!t(a))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(o=arguments[2])}for(var u,s=i(n.length),c=t(r)?Object(new r(s)):new Array(s),f=0;f<s;)u=n[f],c[f]=a?void 0===o?a(u,f):a.call(o,u,f):u,f+=1;return c.length=s,c}}()}),Array.of||Object.defineProperty(Array,"of",{value:function(){return Array.prototype.slice.call(arguments)}}),String.prototype.startsWith||Object.defineProperty(String.prototype,"startsWith",{value:function(e,t){return t=t||0,this.substr(t,e.length)===e}}),String.prototype.endsWith||Object.defineProperty(String.prototype,"endsWith",{value:function(e,t){var r=this.toString();("number"!=typeof t||!isFinite(t)||Math.floor(t)!==t||t>r.length)&&(t=r.length),t-=e.length;var n=r.indexOf(e,t);return-1!==n&&n===t}}),String.prototype.includes||Object.defineProperty(String.prototype,"includes",{value:function(){return"number"==typeof arguments[1]?!(this.length<arguments[0].length+arguments[1].length)&&this.substr(arguments[1],arguments[0].length)===arguments[0]:-1!==String.prototype.indexOf.apply(this,arguments)}}),String.prototype.repeat||Object.defineProperty(String.prototype,"repeat",{value:function(e){var t=this.toString();if(e=+e,e!==e&&(e=0),e<0)throw new RangeError("repeat count must be non-negative");if(e===1/0)throw new RangeError("repeat count must be less than infinity");if(e=Math.floor(e),0===t.length||0===e)return"";if(t.length*e>=1<<28)throw new RangeError("repeat count must not overflow maximum string size");for(var r="";1==(1&e)&&(r+=t),0!==(e>>>=1);)t+=t;return r}}),String.prototype.trim||Object.defineProperty(String.prototype,"trim",{value:function(){return this.toString().replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")}}),String.prototype.trimLeft||Object.defineProperty(String.prototype,"trimLeft",{value:function(){return this.toString().replace(/^[\s\xa0]+/,"")}}),String.prototype.trimRight||Object.defineProperty(String.prototype,"trimRight",{value:function(){return this.toString().replace(/[\s\xa0]+$/,"")}}),Object.keys||Object.defineProperty(Object,"keys",{value:function(){var e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),r=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],n=r.length;return function(i){if("object"!=typeof i&&"function"!=typeof i||null===i)throw new TypeError("Object.keys called on non-object");var o=[];for(var a in i)e.call(i,a)&&o.push(a);if(t)for(var u=0;u<n;u++)e.call(i,r[u])&&o.push(r[u]);return o}}()}),r(Array,["pop","push","reverse","shift","sort","splice","unshift","concat","join","slice","indexOf","lastIndexOf","filter","forEach","every","map","some","reduce","reduceRight","includes","find","findIndex"]),r(String,["quote","substring","toLowerCase","toUpperCase","charAt","charCodeAt","indexOf","lastIndexOf","include","startsWith","endsWith","repeat","trim","trimLeft","trimRight","toLocaleLowerCase","toLocaleUpperCase","match","search","replace","split","substr","concat","slice"])}(hprose.generic),function(e){"use strict";var t="WeakMap"in e,r="Map"in e,n=!0;if(r&&(n="forEach"in new e.Map),!(t&&r&&n)){var i=Object.create(null),o=0,a=function(e){var t=Object.create(null),r=e.valueOf;Object.defineProperty(e,"valueOf",{value:function(n,o){return this===e&&o in i&&i[o]===n?(o in t||(t[o]=Object.create(null)),t[o]):r.apply(this,arguments)},writable:!0,configurable:!0,enumerable:!1})};if(t||(e.WeakMap=function e(){var t=Object.create(null),r=o++;i[r]=t;var n=function(e){if(e!==Object(e))throw new Error("value is not a non-null object");var n=e.valueOf(t,r);return n!==e.valueOf()?n:(a(e),e.valueOf(t,r))},u=Object.create(e.prototype,{get:{value:function(e){return n(e).value}},set:{value:function(e,t){n(e).value=t}},has:{value:function(e){return"value"in n(e)}},delete:{value:function(e){return delete n(e).value}},clear:{value:function(){delete i[r],r=o++,i[r]=t}}});if(arguments.length>0&&Array.isArray(arguments[0]))for(var s=arguments[0],c=0,f=s.length;c<f;c++)u.set(s[c][0],s[c][1]);return u}),!r){var u=function(){var e=Object.create(null),t=o++,r=Object.create(null);i[t]=e;var n=function(n){if(null===n)return r;var i=n.valueOf(e,t);return i!==n.valueOf()?i:(a(n),n.valueOf(e,t))};return{get:function(e){return n(e).value},set:function(e,t){n(e).value=t},has:function(e){return"value"in n(e)},delete:function(e){return delete n(e).value},clear:function(){delete i[t],t=o++,i[t]=e}}},s=function(){var e=Object.create(null);return{get:function(){return e.value},set:function(t,r){e.value=r},has:function(){return"value"in e},delete:function(){return delete e.value},clear:function(){e=Object.create(null)}}},c=function(){var e=Object.create(null);return{get:function(t){return e[t]},set:function(t,r){e[t]=r},has:function(t){return t in e},delete:function(t){return delete e[t]},clear:function(){e=Object.create(null)}}};e.Map=function e(){var t={number:c(),string:c(),boolean:c(),object:u(),function:u(),unknown:u(),undefined:s(),null:s()},r=0,n=[],i=Object.create(e.prototype,{size:{get:function(){return r}},get:{value:function(e){return t[typeof e].get(e)}},set:{value:function(e,i){this.has(e)||(n.push(e),r++),t[typeof e].set(e,i)}},has:{value:function(e){return t[typeof e].has(e)}},delete:{value:function(e){return!!this.has(e)&&(r--,n.splice(n.indexOf(e),1),t[typeof e].delete(e))}},clear:{value:function(){n.length=0;for(var e in t)t[e].clear();r=0}},forEach:{value:function(e,t){for(var r=0,i=n.length;r<i;r++)e.call(t,this.get(n[r]),n[r],this)}}});if(arguments.length>0&&Array.isArray(arguments[0]))for(var o=arguments[0],a=0,f=o.length;a<f;a++)i.set(o[a][0],o[a][1]);return i}}if(!n){var f=e.Map;e.Map=function e(){var t=new f,r=0,n=[],i=Object.create(e.prototype,{size:{get:function(){return r}},get:{value:function(e){return t.get(e)}},set:{value:function(e,i){t.has(e)||(n.push(e),r++),t.set(e,i)}},has:{value:function(e){return t.has(e)}},delete:{value:function(e){return!!t.has(e)&&(r--,n.splice(n.indexOf(e),1),t.delete(e))}},clear:{value:function(){if("clear"in t)t.clear();else for(var e=0,i=n.length;e<i;e++)t.delete(n[e]);n.length=0,r=0}},forEach:{value:function(e,t){for(var r=0,i=n.length;r<i;r++)e.call(t,this.get(n[r]),n[r],this)}}});if(arguments.length>0&&Array.isArray(arguments[0]))for(var o=arguments[0],a=0,u=o.length;a<u;a++)i.set(o[a][0],o[a][1]);return i}}}}(hprose.global),function(e){function t(e){Error.call(this),this.message=e,this.name=t.name,"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,t)}t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,e.TimeoutError=t}(hprose.global),function(e,t){"use strict";function r(e){var r=Array.prototype.slice.call(arguments,1);return function(){e.apply(t,r)}}function n(e){delete f[e]}function i(e){var t=f[e];if(t)try{t()}finally{n(e)}}function o(e){return f[c]=r.apply(t,e),c++}if(!e.setImmediate){var a=e.document,u=e.MutationObserver||e.WebKitMutationObserver||e.MozMutationOvserver,s={},c=1,f={};s.mutationObserver=function(){var e=[],t=a.createTextNode("");return new u(function(){for(;e.length>0;)i(e.shift())}).observe(t,{characterData:!0}),function(){var r=o(arguments);return e.push(r),t.data=1&r,r}},s.messageChannel=function(){var t=new e.MessageChannel;return t.port1.onmessage=function(e){i(Number(e.data))},function(){var e=o(arguments);return t.port2.postMessage(e),e}},s.nextTick=function(){return function(){var t=o(arguments);return e.process.nextTick(r(i,t)),t}},s.postMessage=function(){var e=a.createElement("iframe");e.style.display="none",a.documentElement.appendChild(e);var t=e.contentWindow;t.document.write('<script>window.onmessage=function(){parent.postMessage(1, "*");};<\/script>'),t.document.close();var r=[];return window.addEventListener("message",function(){for(;r.length>0;)i(r.shift())}),function(){var e=o(arguments);return r.push(e),t.postMessage(1,"*"),e}},s.readyStateChange=function(){var e=a.documentElement;return function(){var t=o(arguments),r=a.createElement("script");return r.onreadystatechange=function(){i(t),r.onreadystatechange=null,e.removeChild(r),r=null},e.appendChild(r),t}};var l=Object.getPrototypeOf&&Object.getPrototypeOf(e);l=l&&l.setTimeout?l:e,s.setTimeout=function(){return function(){var e=o(arguments);return l.setTimeout(r(i,e),0),e}},void 0===e.process||"[object process]"!==Object.prototype.toString.call(e.process)||e.process.browser?a&&"onreadystatechange"in a.createElement("script")?l.setImmediate=s.readyStateChange():a&&u?l.setImmediate=s.mutationObserver():e.MessageChannel?l.setImmediate=s.messageChannel():l.setImmediate=a&&"postMessage"in e&&"addEventListener"in e?s.postMessage():s.setTimeout():l.setImmediate=s.nextTick(),l.clearImmediate=n}}(hprose.global),function(e,t,r){"use strict";function n(e){var t=this;Object.defineProperties(this,{_subscribers:{value:[]},resolve:{value:this.resolve.bind(this)},reject:{value:this.reject.bind(this)}}),"function"==typeof e&&J(function(){try{t.resolve(e())}catch(e){t.reject(e)}})}function i(e){return e instanceof n}function o(e){return i(e)?e:c(e)}function a(e){return"function"==typeof e.then}function u(e,t){var r="function"==typeof t?t:function(){return t},i=new n;return X(function(){try{i.resolve(r())}catch(e){i.reject(e)}},e),i}function s(e){var t=new n;return t.reject(e),t}function c(e){var t=new n;return t.resolve(e),t}function f(e){try{return c(e())}catch(e){return s(e)}}function l(e){var t=new n;return e(t.resolve,t.reject),t}function h(e){var t=0;return V.call(e,function(){++t}),t}function v(e){return o(e).then(function(e){var t=e.length,r=h(e),i=new Array(t);if(0===r)return i;var a=new n;return V.call(e,function(e,t){o(e).then(function(e){i[t]=e,0==--r&&a.resolve(i)},a.reject)}),a})}function p(){return v(arguments)}function g(e){return o(e).then(function(e){var t=new n;return V.call(e,function(e){o(e).fill(t)}),t})}function d(e){return o(e).then(function(e){var t=e.length,r=h(e);if(0===r)throw new RangeError("any(): array must not be empty");var i=new Array(t),a=new n;return V.call(e,function(e,t){o(e).then(a.resolve,function(e){i[t]=e,0==--r&&a.reject(i)})}),a})}function y(e){return o(e).then(function(e){var t=e.length,r=h(e),i=new Array(t);if(0===r)return i;var a=new n;return V.call(e,function(e,t){var n=o(e);n.complete(function(){i[t]=n.inspect(),0==--r&&a.resolve(i)})}),a})}function w(e){var t=function(){return this}();return v(Z.call(arguments,1)).then(function(r){return e.apply(t,r)})}function m(e,t){return v(Z.call(arguments,2)).then(function(r){return e.apply(t,r)})}function b(e){return!!e&&("function"==typeof e.next&&"function"==typeof e.throw)}function T(e){if(!e)return!1;var t=e.constructor;return!!t&&("GeneratorFunction"===t.name||"GeneratorFunction"===t.displayName||b(t.prototype))}function _(e){return function(t,n){return t instanceof Error?e.reject(t):arguments.length<2?e.resolve(t):(n=null===t||t===r?Z.call(arguments,1):Z.call(arguments,0),void(1==n.length?e.resolve(n[0]):e.resolve(n)))}}function O(e){if(T(e)||b(e))return A(e);var t=function(){return this}(),r=new n;return e.call(t,_(r)),r}function j(e){return function(){var t=Z.call(arguments,0),r=this,i=new n;t.push(function(){r=this,i.resolve(arguments)});try{e.apply(this,t)}catch(e){i.resolve([e])}return function(e){i.then(function(t){e.apply(r,t)})}}}function E(e){return function(){var t=Z.call(arguments,0),r=new n;t.push(_(r));try{e.apply(this,t)}catch(e){r.reject(e)}return r}}function S(e){return T(e)||b(e)?A(e):o(e)}function A(e){function t(t){try{i(e.next(t))}catch(e){s.reject(e)}}function r(t){try{i(e.throw(t))}catch(e){s.reject(e)}}function i(e){e.done?s.resolve(e.value):("function"==typeof e.value?O(e.value):S(e.value)).then(t,r)}var a=function(){return this}();if("function"==typeof e){var u=Z.call(arguments,1);e=e.apply(a,u)}if(!e||"function"!=typeof e.next)return o(e);var s=new n;return t(),s}function B(e,t){return function(){return t=t||this,v(arguments).then(function(r){var n=e.apply(t,r);return T(n)||b(n)?A.call(t,n):n})}}function k(e,t,r){return r=r||function(){return this}(),v(e).then(function(e){return e.forEach(t,r)})}function C(e,t,r){return r=r||function(){return this}(),v(e).then(function(e){return e.every(t,r)})}function I(e,t,r){return r=r||function(){return this}(),v(e).then(function(e){return e.some(t,r)})}function x(e,t,r){return r=r||function(){return this}(),v(e).then(function(e){return e.filter(t,r)})}function R(e,t,r){return r=r||function(){return this}(),v(e).then(function(e){return e.map(t,r)})}function P(e,t,r){return arguments.length>2?v(e).then(function(e){return o(r).then(function(r){return e.reduce(t,r)})}):v(e).then(function(e){return e.reduce(t)})}function M(e,t,r){return arguments.length>2?v(e).then(function(e){return o(r).then(function(r){return e.reduceRight(t,r)})}):v(e).then(function(e){return e.reduceRight(t)})}function U(e,t,r){return v(e).then(function(e){return o(t).then(function(t){return e.indexOf(t,r)})})}function L(e,t,n){return v(e).then(function(e){return o(t).then(function(t){return n===r&&(n=e.length-1),e.lastIndexOf(t,n)})})}function N(e,t,r){return v(e).then(function(e){return o(t).then(function(t){return e.includes(t,r)})})}function F(e,t,r){return r=r||function(){return this}(),v(e).then(function(e){return e.find(t,r)})}function W(e,t,r){return r=r||function(){return this}(),v(e).then(function(e){return e.findIndex(t,r)})}function D(e,t,r){J(function(){try{var n=e(r);t.resolve(n)}catch(e){t.reject(e)}})}function H(e,t,r){e?D(e,t,r):t.resolve(r)}function z(e,t,r){e?D(e,t,r):t.reject(r)}function q(){var e=new n;Object.defineProperties(this,{future:{value:e},complete:{value:e.resolve},completeError:{value:e.reject},isCompleted:{get:function(){return e._state!==Q}}})}function G(e){n.call(this),e(this.resolve,this.reject)}var Q=0,Y="Promise"in t,J=t.setImmediate,X=t.setTimeout,$=t.clearTimeout,K=t.TimeoutError,V=Array.prototype.forEach,Z=Array.prototype.slice;A.wrap=B,Object.defineProperties(n,{delayed:{value:u},error:{value:s},sync:{value:f},value:{value:c},all:{value:v},race:{value:g},resolve:{value:c},reject:{value:s},promise:{value:l},isFuture:{value:i},toFuture:{value:o},isPromise:{value:a},toPromise:{value:S},join:{value:p},any:{value:d},settle:{value:y},attempt:{value:w},run:{value:m},thunkify:{value:j},promisify:{value:E},co:{value:A},wrap:{value:B},forEach:{value:k},every:{value:C},some:{value:I},filter:{value:x},map:{value:R},reduce:{value:P},reduceRight:{value:M},indexOf:{value:U},lastIndexOf:{value:L},includes:{value:N},find:{value:F},findIndex:{value:W}}),Object.defineProperties(n.prototype,{_value:{writable:!0},_reason:{writable:!0},_state:{value:Q,writable:!0},resolve:{value:function(e){if(e===this)return void this.reject(new TypeError("Self resolution"));if(i(e))return void e.fill(this);if(null!==e&&"object"==typeof e||"function"==typeof e){var t;try{t=e.then}catch(e){return void this.reject(e)}if("function"==typeof t){var r=!0;try{var n=this;return void t.call(e,function(e){r&&(r=!1,n.resolve(e))},function(e){r&&(r=!1,n.reject(e))})}catch(e){r&&(r=!1,this.reject(e))}return}}if(this._state===Q){this._state=1,this._value=e;for(var o=this._subscribers;o.length>0;){var a=o.shift();H(a.onfulfill,a.next,e)}}}},reject:{value:function(e){if(this._state===Q){this._state=2,this._reason=e;for(var t=this._subscribers;t.length>0;){var r=t.shift();z(r.onreject,r.next,e)}}}},then:{value:function(e,t){"function"!=typeof e&&(e=null),"function"!=typeof t&&(t=null);var r=new n;return 1===this._state?H(e,r,this._value):2===this._state?z(t,r,this._reason):this._subscribers.push({onfulfill:e,onreject:t,next:r}),r}},done:{value:function(e,t){this.then(e,t).then(null,function(e){J(function(){throw e})})}},inspect:{value:function(){switch(this._state){case Q:return{state:"pending"};case 1:return{state:"fulfilled",value:this._value};case 2:return{state:"rejected",reason:this._reason}}}},catchError:{value:function(e,t){if("function"==typeof t){var r=this;return this.catch(function(n){if(t(n))return r.catch(e);throw n})}return this.catch(e)}},catch:{value:function(e){return this.then(null,e)}},fail:{value:function(e){this.done(null,e)}},whenComplete:{value:function(e){return this.then(function(t){return e(),t},function(t){throw e(),t})}},complete:{value:function(e){return e=e||function(e){return e},this.then(e,e)}},always:{value:function(e){this.done(e,e)}},fill:{value:function(e){this.then(e.resolve,e.reject)}},timeout:{value:function(e,t){var r=new n,i=X(function(){r.reject(t||new K("timeout"))},e);return this.whenComplete(function(){$(i)}).fill(r),r}},delay:{value:function(e){var t=new n;return this.then(function(r){X(function(){t.resolve(r)},e)},t.reject),t}},tap:{value:function(e,t){return this.then(function(r){return e.call(t,r),r})}},spread:{value:function(e,t){return this.then(function(r){return e.apply(t,r)})}},get:{value:function(e){return this.then(function(t){return t[e]})}},set:{value:function(e,t){return this.then(function(r){return r[e]=t,r})}},apply:{value:function(e,t){return t=t||[],this.then(function(r){return v(t).then(function(t){return r[e].apply(r,t)})})}},call:{value:function(e){var t=Z.call(arguments,1);return this.then(function(r){return v(t).then(function(t){return r[e].apply(r,t)})})}},bind:{value:function(e){var t=Z.call(arguments);{if(!Array.isArray(e)){t.shift();var r=this;return Object.defineProperty(this,e,{value:function(){var n=Z.call(arguments);return r.then(function(r){return v(t.concat(n)).then(function(t){return r[e].apply(r,t)})})}}),this}for(var n=0,i=e.length;n<i;++n)t[0]=e[n],this.bind.apply(this,t)}}},forEach:{value:function(e,t){return k(this,e,t)}},every:{value:function(e,t){return C(this,e,t)}},some:{value:function(e,t){return I(this,e,t)}},filter:{value:function(e,t){return x(this,e,t)}},map:{value:function(e,t){return R(this,e,t)}},reduce:{value:function(e,t){return arguments.length>1?P(this,e,t):P(this,e)}},reduceRight:{value:function(e,t){return arguments.length>1?M(this,e,t):M(this,e)}},indexOf:{value:function(e,t){return U(this,e,t)}},lastIndexOf:{value:function(e,t){return L(this,e,t)}},includes:{value:function(e,t){return N(this,e,t)}},find:{value:function(e,t){return F(this,e,t)}},findIndex:{value:function(e,t){return W(this,e,t)}}}),e.Future=n,e.thunkify=j,e.promisify=E,e.co=A,e.co.wrap=e.wrap=B,e.Completer=q,e.resolved=c,e.rejected=s,e.deferred=function(){var e=new n;return Object.create(null,{promise:{value:e},resolve:{value:e.resolve},reject:{value:e.reject}})},Y||(G.prototype=Object.create(n.prototype),G.prototype.constructor=n,Object.defineProperties(G,{all:{value:v},race:{value:g},resolve:{value:c},reject:{value:s}}),t.Promise=G)}(hprose,hprose.global),function(e,t){"use strict";function r(e,t,r){return e[t++]=r>>>24&255,e[t++]=r>>>16&255,e[t++]=r>>>8&255,e[t++]=255&r,t}function n(e,t,r){return e[t++]=255&r,e[t++]=r>>>8&255,e[t++]=r>>>16&255,e[t++]=r>>>24&255,t}function i(e,t,r){for(var n=r.length,i=0;i<n;++i){var o=r.charCodeAt(i);if(o<128)e[t++]=o;else if(o<2048)e[t++]=192|o>>6,e[t++]=128|63&o;else{if(!(o<55296||o>57343)){if(i+1<n){var a=r.charCodeAt(i+1);if(o<56320&&56320<=a&&a<=57343){var u=65536+((1023&o)<<10|1023&a);e[t++]=240|u>>18,e[t++]=128|u>>12&63,e[t++]=128|u>>6&63,e[t++]=128|63&u,++i;continue}}throw new Error("Malformed string")}e[t++]=224|o>>12,e[t++]=128|o>>6&63,e[t++]=128|63&o}}return t}function o(e,t){for(var r=new Array(t),n=0,i=0,o=e.length;n<t&&i<o;n++){var a=e[i++];switch(a>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:r[n]=a;break;case 12:case 13:if(i<o){r[n]=(31&a)<<6|63&e[i++];break}throw new Error("Unfinished UTF-8 octet sequence");case 14:if(i+1<o){r[n]=(15&a)<<12|(63&e[i++])<<6|63&e[i++];break}throw new Error("Unfinished UTF-8 octet sequence");case 15:if(i+2<o){var u=((7&a)<<18|(63&e[i++])<<12|(63&e[i++])<<6|63&e[i++])-65536;if(0<=u&&u<=1048575){r[n++]=u>>10&1023|55296,r[n]=1023&u|56320;break}throw new Error("Character outside valid Unicode range: 0x"+u.toString(16))}throw new Error("Unfinished UTF-8 octet sequence");default:throw new Error("Bad UTF-8 encoding 0x"+a.toString(16))}}return n<t&&(r.length=n),[String.fromCharCode.apply(String,r),i]}function a(e,t){for(var r=[],n=new Array(32768),i=0,o=0,a=e.length;i<t&&o<a;i++){var u=e[o++];switch(u>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:n[i]=u;break;case 12:case 13:if(o<a){n[i]=(31&u)<<6|63&e[o++];break}throw new Error("Unfinished UTF-8 octet sequence");case 14:if(o+1<a){n[i]=(15&u)<<12|(63&e[o++])<<6|63&e[o++];break}throw new Error("Unfinished UTF-8 octet sequence");case 15:if(o+2<a){var s=((7&u)<<18|(63&e[o++])<<12|(63&e[o++])<<6|63&e[o++])-65536;if(0<=s&&s<=1048575){n[i++]=s>>10&1023|55296,n[i]=1023&s|56320;break}throw new Error("Character outside valid Unicode range: 0x"+s.toString(16))}throw new Error("Unfinished UTF-8 octet sequence");default:throw new Error("Bad UTF-8 encoding 0x"+u.toString(16))}if(i>=32766){var c=i+1;n.length=c,r.push(String.fromCharCode.apply(String,n)),t-=c,i=-1}}return i>0&&(n.length=i,r.push(String.fromCharCode.apply(String,n))),[r.join(""),o]}function u(e,r){return(r===t||null===r||r<0)&&(r=e.length),0===r?["",0]:r<65535?o(e,r):a(e,r)}function s(e,r){if(r===t&&(r=e.length),0===r)return[v,0];for(var n=0,i=0,o=e.length;n<r&&i<o;n++){var a=e[i++];switch(a>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:break;case 12:case 13:if(i<o){i++;break}throw new Error("Unfinished UTF-8 octet sequence");case 14:if(i+1<o){i+=2;break}throw new Error("Unfinished UTF-8 octet sequence");case 15:if(i+2<o){var u=((7&a)<<18|(63&e[i++])<<12|(63&e[i++])<<6|63&e[i++])-65536;if(0<=u&&u<=1048575){n++;break}throw new Error("Character outside valid Unicode range: 0x"+u.toString(16))}throw new Error("Unfinished UTF-8 octet sequence");default:throw new Error("Bad UTF-8 encoding 0x"+a.toString(16))}}return[e.subarray(0,i),i]}function c(e){return--e,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,(e|=e>>16)+1}function f(){var e=arguments;switch(e.length){case 1:switch(e[0].constructor){case Uint8Array:this._bytes=e[0],this._length=e[0].length;break;case f:this._bytes=e[0].toBytes(),this._length=e[0].length;break;case String:this.writeString(e[0]);break;case Number:this._bytes=new Uint8Array(e[0]);break;default:this._bytes=new Uint8Array(e[0]),this._length=this._bytes.length}break;case 2:this._bytes=new Uint8Array(e[0],e[1]),this._length=e[1];break;case 3:this._bytes=new Uint8Array(e[0],e[1],e[2]),this._length=e[2]}this.mark()}function l(e){if(0===e.length)return"";switch(e.constructor){case String:return e;case f:e=e.bytes;case ArrayBuffer:e=new Uint8Array(e);case Uint8Array:return u(e,e.length)[0];default:return String.fromCharCode.apply(String,e)}}var h=e.toBinaryString,v=new Uint8Array(0);Object.defineProperties(f.prototype,{_bytes:{value:null,writable:!0},_length:{value:0,writable:!0},_wmark:{value:0,writable:!0},_off:{value:0,writable:!0},_rmark:{value:0,writable:!0},_grow:{value:function(e){var t=this._bytes,r=this._length+e,n=c(r);if(t){if((n*=2)>t.length){var i=new Uint8Array(n);i.set(t),this._bytes=i}}else n=Math.max(n,1024),this._bytes=new Uint8Array(n)}},length:{get:function(){return this._length}},capacity:{get:function(){return this._bytes?this._bytes.length:0}},position:{get:function(){return this._off}},bytes:{get:function(){return null===this._bytes?v:this._bytes.subarray(0,this._length)}},buffer:{get:function(){if(null===this._bytes)return v.buffer;if(this._bytes.buffer.slice)return this._bytes.buffer.slice(0,this._length);var e=new Uint8Array(this._length);return e.set(this._bytes.subarray(0,this._length)),e.buffer}},mark:{value:function(){this._wmark=this._length,this._rmark=this._off}},reset:{value:function(){this._length=this._wmark,this._off=this._rmark}},clear:{value:function(){this._bytes=null,this._length=0,this._wmark=0,this._off=0,this._rmark=0}},writeByte:{value:function(e){this._grow(1),this._bytes[this._length++]=e}},writeInt32BE:{value:function(e){if(e===(0|e)&&e<=2147483647)return this._grow(4),void(this._length=r(this._bytes,this._length,e));throw new TypeError("value is out of bounds")}},writeUInt32BE:{value:function(e){if(2147483648+(2147483647&e)===e&&e>=0)return this._grow(4),void(this._length=r(this._bytes,this._length,0|e));throw new TypeError("value is out of bounds")}},writeInt32LE:{value:function(e){if(e===(0|e)&&e<=2147483647)return this._grow(4),void(this._length=n(this._bytes,this._length,e));throw new TypeError("value is out of bounds")}},writeUInt32LE:{value:function(e){if(2147483648+(2147483647&e)===e&&e>=0)return this._grow(4),void(this._length=n(this._bytes,this._length,0|e));throw new TypeError("value is out of bounds")}},write:{value:function(e){var t=e.byteLength||e.length;if(0!==t){this._grow(t);var r=this._bytes,n=this._length;switch(e.constructor){case ArrayBuffer:r.set(new Uint8Array(e),n);break;case Uint8Array:r.set(e,n);break;case f:r.set(e.bytes,n);break;default:for(var i=0;i<t;i++)r[n+i]=e[i]}this._length+=t}}},writeAsciiString:{value:function(e){var t=e.length;if(0!==t){this._grow(t);for(var r=this._bytes,n=this._length,i=0;i<t;++i,++n)r[n]=e.charCodeAt(i);this._length=n}}},writeString:{value:function(e){var t=e.length;0!==t&&(this._grow(3*t),this._length=i(this._bytes,this._length,e))}},readByte:{value:function(){return this._off<this._length?this._bytes[this._off++]:-1}},readInt32BE:{value:function(){var e=this._bytes,t=this._off;if(t+3<this._length){var r=e[t++]<<24|e[t++]<<16|e[t++]<<8|e[t++];return this._off=t,r}throw new Error("EOF")}},readUInt32BE:{value:function(){var e=this.readInt32BE();return e<0?2147483648+(2147483647&e):e}},readInt32LE:{value:function(){var e=this._bytes,t=this._off;if(t+3<this._length){var r=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;return this._off=t,r}throw new Error("EOF")}},readUInt32LE:{value:function(){var e=this.readInt32LE();return e<0?2147483648+(2147483647&e):e}},read:{value:function(e){return this._off+e>this._length&&(e=this._length-this._off),0===e?v:this._bytes.subarray(this._off,this._off+=e)}},skip:{value:function(e){return this._off+e>this._length?(e=this._length-this._off,this._off=this._length):this._off+=e,e}},readBytes:{value:function(e){var t,r=Array.indexOf(this._bytes,e,this._off);return-1===r?(t=this._bytes.subarray(this._off,this._length),this._off=this._length):(t=this._bytes.subarray(this._off,r+1),this._off=r+1),t}},readUntil:{value:function(e){var t=Array.indexOf(this._bytes,e,this._off),r="";return t===this._off?this._off++:-1===t?(r=u(this._bytes.subarray(this._off,this._length))[0],this._off=this._length):(r=u(this._bytes.subarray(this._off,t))[0],this._off=t+1),r}},readAsciiString:{value:function(e){return this._off+e>this._length&&(e=this._length-this._off),0===e?"":h(this._bytes.subarray(this._off,this._off+=e))}},readStringAsBytes:{value:function(e){var t=s(this._bytes.subarray(this._off,this._length),e);return this._off+=t[1],t[0]}},readString:{value:function(e){var t=u(this._bytes.subarray(this._off,this._length),e);return this._off+=t[1],t[0]}},takeBytes:{value:function(){var e=this.bytes;return this.clear(),e}},toBytes:{value:function(){return new Uint8Array(this.bytes)}},toString:{value:function(){return u(this.bytes,this._length)[0]}},clone:{value:function(){return new f(this.toBytes())}},trunc:{value:function(){this._bytes=this._bytes.subarray(this._off,this._length),this._length=this._bytes.length,this._off=0,this._wmark=0,this._rmark=0}}}),Object.defineProperty(f,"toString",{value:l}),e.BytesIO=f}(hprose),function(e){"use strict";e.Tags={TagInteger:105,TagLong:108,TagDouble:100,TagNull:110,TagEmpty:101,TagTrue:116,TagFalse:102,
TagNaN:78,TagInfinity:73,TagDate:68,TagTime:84,TagUTC:90,TagBytes:98,TagUTF8Char:117,TagString:115,TagGuid:103,TagList:97,TagMap:109,TagClass:99,TagObject:111,TagRef:114,TagPos:43,TagNeg:45,TagSemicolon:59,TagOpenbrace:123,TagClosebrace:125,TagQuote:34,TagPoint:46,TagFunctions:70,TagCall:67,TagResult:82,TagArgument:65,TagError:69,TagEnd:122}}(hprose),function(e,t){"use strict";function r(e,t){u.set(e,t),a[t]=e}function n(e){return u.get(e)}function i(e){return a[e]}var o=t.WeakMap,a=Object.create(null),u=new o;e.ClassManager=Object.create(null,{register:{value:r},getClassAlias:{value:n},getClass:{value:i}}),e.register=r,r(Object,"Object")}(hprose,hprose.global),function(e,t,r){"use strict";function n(e){var t=e.constructor;if(!t)return"Object";var r=A.getClassAlias(t);if(r)return r;if(t.name)r=t.name;else{var n=t.toString();if(""===(r=n.substr(0,n.indexOf("(")).replace(/(^\s*function\s*)|(\s*$)/gi,""))||"Object"===r)return"function"==typeof e.getClassName?e.getClassName():"Object"}return"Object"!==r&&A.register(t,r),r}function i(e){Object.defineProperties(this,{_stream:{value:e},_ref:{value:new j,writable:!0}})}function o(e){return new i(e)}function a(e,t){Object.defineProperties(this,{stream:{value:e},_classref:{value:Object.create(null),writable:!0},_fieldsref:{value:[],writable:!0},_refer:{value:t?B:o(e)}})}function u(e,t){var i=e.stream;if(t===r||null===t)return void i.writeByte(S.TagNull);switch(t.constructor){case Function:return void i.writeByte(S.TagNull);case Number:return void s(e,t);case Boolean:return void l(e,t);case String:switch(t.length){case 0:return void i.writeByte(S.TagEmpty);case 1:return i.writeByte(S.TagUTF8Char),void i.writeString(t)}return void e.writeStringWithRef(t);case Date:return void e.writeDateWithRef(t);case j:return void e.writeMapWithRef(t);case ArrayBuffer:case Uint8Array:case E:return void e.writeBytesWithRef(t);case Int8Array:case Int16Array:case Int32Array:case Uint16Array:case Uint32Array:return void w(e,t);case Float32Array:case Float64Array:return void m(e,t);default:if(Array.isArray(t))e.writeListWithRef(t);else{"Object"===n(t)?e.writeMapWithRef(t):e.writeObjectWithRef(t)}}}function s(e,t){var r=e.stream;t=t.valueOf(),t===(0|t)?0<=t&&t<=9?r.writeByte(t+48):(r.writeByte(S.TagInteger),r.writeAsciiString(""+t),r.writeByte(S.TagSemicolon)):isNaN(t)?r.writeByte(S.TagNaN):isFinite(t)?(r.writeByte(S.TagDouble),r.writeAsciiString(""+t),r.writeByte(S.TagSemicolon)):(r.writeByte(S.TagInfinity),r.writeByte(t>0?S.TagPos:S.TagNeg))}function c(e,t){var r=e.stream;0<=t&&t<=9?r.writeByte(t+48):(t<-2147483648||t>2147483647?r.writeByte(S.TagLong):r.writeByte(S.TagInteger),r.writeAsciiString(""+t),r.writeByte(S.TagSemicolon))}function f(e,t){var r=e.stream;isNaN(t)?r.writeByte(S.TagNaN):isFinite(t)?(r.writeByte(S.TagDouble),r.writeAsciiString(""+t),r.writeByte(S.TagSemicolon)):(r.writeByte(S.TagInfinity),r.writeByte(t>0?S.TagPos:S.TagNeg))}function l(e,t){e.stream.writeByte(t.valueOf()?S.TagTrue:S.TagFalse)}function h(e,t){e._refer.set(t);var r=e.stream,n=("0000"+t.getUTCFullYear()).slice(-4),i=("00"+(t.getUTCMonth()+1)).slice(-2),o=("00"+t.getUTCDate()).slice(-2),a=("00"+t.getUTCHours()).slice(-2),u=("00"+t.getUTCMinutes()).slice(-2),s=("00"+t.getUTCSeconds()).slice(-2),c=("000"+t.getUTCMilliseconds()).slice(-3);r.writeByte(S.TagDate),r.writeAsciiString(n+i+o),r.writeByte(S.TagTime),r.writeAsciiString(a+u+s),"000"!==c&&(r.writeByte(S.TagPoint),r.writeAsciiString(c)),r.writeByte(S.TagUTC)}function v(e,t){e._refer.set(t);var r=e.stream,n=("0000"+t.getFullYear()).slice(-4),i=("00"+(t.getMonth()+1)).slice(-2),o=("00"+t.getDate()).slice(-2),a=("00"+t.getHours()).slice(-2),u=("00"+t.getMinutes()).slice(-2),s=("00"+t.getSeconds()).slice(-2),c=("000"+t.getMilliseconds()).slice(-3);"00"===a&&"00"===u&&"00"===s&&"000"===c?(r.writeByte(S.TagDate),r.writeAsciiString(n+i+o)):"1970"===n&&"01"===i&&"01"===o?(r.writeByte(S.TagTime),r.writeAsciiString(a+u+s),"000"!==c&&(r.writeByte(S.TagPoint),r.writeAsciiString(c))):(r.writeByte(S.TagDate),r.writeAsciiString(n+i+o),r.writeByte(S.TagTime),r.writeAsciiString(a+u+s),"000"!==c&&(r.writeByte(S.TagPoint),r.writeAsciiString(c))),r.writeByte(S.TagSemicolon)}function p(e,t){e._refer.set(t);var r=e.stream,n=("00"+t.getHours()).slice(-2),i=("00"+t.getMinutes()).slice(-2),o=("00"+t.getSeconds()).slice(-2),a=("000"+t.getMilliseconds()).slice(-3);r.writeByte(S.TagTime),r.writeAsciiString(n+i+o),"000"!==a&&(r.writeByte(S.TagPoint),r.writeAsciiString(a)),r.writeByte(S.TagSemicolon)}function g(e,t){e._refer.set(t);var r=e.stream;r.writeByte(S.TagBytes);var n=t.byteLength||t.length;n>0?(r.writeAsciiString(""+n),r.writeByte(S.TagQuote),r.write(t)):r.writeByte(S.TagQuote),r.writeByte(S.TagQuote)}function d(e,t){e._refer.set(t);var r=e.stream,n=t.length;r.writeByte(S.TagString),n>0?(r.writeAsciiString(""+n),r.writeByte(S.TagQuote),r.writeString(t)):r.writeByte(S.TagQuote),r.writeByte(S.TagQuote)}function y(e,t,r){e._refer.set(t);var n=e.stream,i=t.length;if(n.writeByte(S.TagList),i>0){n.writeAsciiString(""+i),n.writeByte(S.TagOpenbrace);for(var o=0;o<i;o++)r(e,t[o])}else n.writeByte(S.TagOpenbrace);n.writeByte(S.TagClosebrace)}function w(e,t){e._refer.write(t)||y(e,t,c)}function m(e,t){e._refer.write(t)||y(e,t,f)}function b(e,t){e._refer.set(t);var r=e.stream,n=[];for(var i in t)t.hasOwnProperty(i)&&"function"!=typeof t[i]&&(n[n.length]=i);var o=n.length;if(r.writeByte(S.TagMap),o>0){r.writeAsciiString(""+o),r.writeByte(S.TagOpenbrace);for(var a=0;a<o;a++)u(e,n[a]),u(e,t[n[a]])}else r.writeByte(S.TagOpenbrace);r.writeByte(S.TagClosebrace)}function T(e,t){e._refer.set(t);var r=e.stream,n=t.size;r.writeByte(S.TagMap),n>0?(r.writeAsciiString(""+n),r.writeByte(S.TagOpenbrace),t.forEach(function(t,r){u(e,r),u(e,t)})):r.writeByte(S.TagOpenbrace),r.writeByte(S.TagClosebrace)}function _(e,t){var r,i,o=e.stream,a=n(t);if(a in e._classref)i=e._classref[a],r=e._fieldsref[i];else{r=[];for(var s in t)t.hasOwnProperty(s)&&"function"!=typeof t[s]&&(r[r.length]=s.toString());i=O(e,a,r)}o.writeByte(S.TagObject),o.writeAsciiString(""+i),o.writeByte(S.TagOpenbrace),e._refer.set(t);for(var c=r.length,f=0;f<c;f++)u(e,t[r[f]]);o.writeByte(S.TagClosebrace)}function O(e,t,r){var n=e.stream,i=r.length;if(n.writeByte(S.TagClass),n.writeAsciiString(""+t.length),n.writeByte(S.TagQuote),n.writeString(t),n.writeByte(S.TagQuote),i>0){n.writeAsciiString(""+i),n.writeByte(S.TagOpenbrace);for(var o=0;o<i;o++)d(e,r[o])}else n.writeByte(S.TagOpenbrace);n.writeByte(S.TagClosebrace);var a=e._fieldsref.length;return e._classref[t]=a,e._fieldsref[a]=r,a}var j=t.Map,E=e.BytesIO,S=e.Tags,A=e.ClassManager,B=Object.create(null,{set:{value:function(){}},write:{value:function(){return!1}},reset:{value:function(){}}});Object.defineProperties(i.prototype,{_refcount:{value:0,writable:!0},set:{value:function(e){this._ref.set(e,this._refcount++)}},write:{value:function(e){var t=this._ref.get(e);return t!==r&&(this._stream.writeByte(S.TagRef),this._stream.writeString(""+t),this._stream.writeByte(S.TagSemicolon),!0)}},reset:{value:function(){this._ref=new j,this._refcount=0}}}),Object.defineProperties(a.prototype,{serialize:{value:function(e){u(this,e)}},writeInteger:{value:function(e){c(this,e)}},writeDouble:{value:function(e){f(this,e)}},writeBoolean:{value:function(e){l(this,e)}},writeUTCDate:{value:function(e){h(this,e)}},writeUTCDateWithRef:{value:function(e){this._refer.write(e)||h(this,e)}},writeDate:{value:function(e){v(this,e)}},writeDateWithRef:{value:function(e){this._refer.write(e)||v(this,e)}},writeTime:{value:function(e){p(this,e)}},writeTimeWithRef:{value:function(e){this._refer.write(e)||p(this,e)}},writeBytes:{value:function(e){g(this,e)}},writeBytesWithRef:{value:function(e){this._refer.write(e)||g(this,e)}},writeString:{value:function(e){d(this,e)}},writeStringWithRef:{value:function(e){this._refer.write(e)||d(this,e)}},writeList:{value:function(e){y(this,e,u)}},writeListWithRef:{value:function(e){this._refer.write(e)||y(this,e,u)}},writeMap:{value:function(e){e instanceof j?T(this,e):b(this,e)}},writeMapWithRef:{value:function(e){this._refer.write(e)||(e instanceof j?T(this,e):b(this,e))}},writeObject:{value:function(e){_(this,e)}},writeObjectWithRef:{value:function(e){this._refer.write(e)||_(this,e)}},reset:{value:function(){this._classref=Object.create(null),this._fieldsref.length=0,this._refer.reset()}}}),e.Writer=a}(hprose,hprose.global),function(e,t,r){"use strict";function n(e,t){if(e&&t){var r="";throw r="number"==typeof t?String.fromCharCode(t):String.fromCharCode.apply(String,t),new Error('Tag "'+r+'" expected, but "'+String.fromCharCode(e)+'" found in stream')}throw e?new Error('Unexpected serialize tag "'+String.fromCharCode(e)+'" in stream'):new Error("No byte found in stream")}function i(e){var t=new ee;return o(e,t),t.bytes}function o(e,t){a(e,t,e.readByte())}function a(e,t,r){switch(t.writeByte(r),r){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case te.TagNull:case te.TagEmpty:case te.TagTrue:case te.TagFalse:case te.TagNaN:break;case te.TagInfinity:t.writeByte(e.readByte());break;case te.TagInteger:case te.TagLong:case te.TagDouble:case te.TagRef:u(e,t);break;case te.TagDate:case te.TagTime:s(e,t);break;case te.TagUTF8Char:c(e,t);break;case te.TagBytes:f(e,t);break;case te.TagString:l(e,t);break;case te.TagGuid:h(e,t);break;case te.TagList:case te.TagMap:case te.TagObject:v(e,t);break;case te.TagClass:v(e,t),o(e,t);break;case te.TagError:o(e,t);break;default:n(r)}}function u(e,t){var r;do{r=e.readByte(),t.writeByte(r)}while(r!==te.TagSemicolon)}function s(e,t){var r;do{r=e.readByte(),t.writeByte(r)}while(r!==te.TagSemicolon&&r!==te.TagUTC)}function c(e,t){t.writeString(e.readString(1))}function f(e,t){var r=0,n=48;do{r*=10,r+=n-48,n=e.readByte(),t.writeByte(n)}while(n!==te.TagQuote);t.write(e.read(r+1))}function l(e,t){var r=0,n=48;do{r*=10,r+=n-48,n=e.readByte(),t.writeByte(n)}while(n!==te.TagQuote);t.write(e.readStringAsBytes(r+1))}function h(e,t){t.write(e.read(38))}function v(e,t){var r;do{r=e.readByte(),t.writeByte(r)}while(r!==te.TagOpenbrace);for(;(r=e.readByte())!==te.TagClosebrace;)a(e,t,r);t.writeByte(r)}function p(e){Object.defineProperties(this,{stream:{value:e},readRaw:{value:function(){return i(e)}}})}function g(){Object.defineProperties(this,{ref:{value:[]}})}function d(){return new g}function y(e){var n,i=t,o=e.split(".");for(n=0;n<o.length;n++)if((i=i[o[n]])===r)return null;return i}function w(e,t,r,n){if(r<t.length){e[t[r]]=n;var i=w(e,t,r+1,".");return r+1<t.length&&null===i&&(i=w(e,t,r+1,"_")),i}var o=e.join("");try{var a=y(o);return"function"==typeof a?a:null}catch(e){return null}}function m(e){var t=re.getClass(e);if(t)return t;if("function"==typeof(t=y(e)))return re.register(t,e),t;for(var r=[],n=e.indexOf("_");n>=0;)r[r.length]=n,n=e.indexOf("_",n+1);if(r.length>0){var i=e.split("");if(t=w(i,r,0,"."),null===t&&(t=w(i,r,0,"_")),"function"==typeof t)return re.register(t,e),t}return t=function(){},Object.defineProperty(t.prototype,"getClassName",{value:function(){return e}}),re.register(t,e),t}function b(e,t){var r=e.readUntil(t);return 0===r.length?0:parseInt(r,10)}function T(e){var t=e.stream,r=t.readByte();switch(r){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return r-48;case te.TagInteger:return _(t);case te.TagLong:return j(t);case te.TagDouble:return S(t);case te.TagNull:return null;case te.TagEmpty:return"";case te.TagTrue:return!0;case te.TagFalse:return!1;case te.TagNaN:return NaN;case te.TagInfinity:return B(t);case te.TagDate:return C(e);case te.TagTime:return x(e);case te.TagBytes:return P(e);case te.TagUTF8Char:return U(e);case te.TagString:return N(e);case te.TagGuid:return W(e);case te.TagList:return H(e);case te.TagMap:return e.useHarmonyMap?Q(e):q(e);case te.TagClass:return $(e),X(e);case te.TagObject:return J(e);case te.TagRef:return K(e);case te.TagError:throw new Error(F(e));default:n(r)}}function _(e){return b(e,te.TagSemicolon)}function O(e){var t=e.readByte();switch(t){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return t-48;case te.TagInteger:return _(e);default:n(t)}}function j(e){var t=e.readUntil(te.TagSemicolon),r=parseInt(t,10);return r.toString()===t?r:t}function E(e){var t=e.readByte();switch(t){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return t-48;case te.TagInteger:case te.TagLong:return j(e);default:n(t)}}function S(e){return parseFloat(e.readUntil(te.TagSemicolon))}function A(e){var t=e.readByte();switch(t){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return t-48;case te.TagInteger:case te.TagLong:case te.TagDouble:return S(e);case te.TagNaN:return NaN;case te.TagInfinity:return B(e);default:n(t)}}function B(e){return e.readByte()===te.TagNeg?-1/0:1/0}function k(e){var t=e.readByte();switch(t){case te.TagTrue:return!0;case te.TagFalse:return!1;default:n(t)}}function C(e){var t,r=e.stream,n=parseInt(r.readAsciiString(4),10),i=parseInt(r.readAsciiString(2),10)-1,o=parseInt(r.readAsciiString(2),10),a=r.readByte();if(a===te.TagTime){var u=parseInt(r.readAsciiString(2),10),s=parseInt(r.readAsciiString(2),10),c=parseInt(r.readAsciiString(2),10),f=0;a=r.readByte(),a===te.TagPoint&&(f=parseInt(r.readAsciiString(3),10),(a=r.readByte())>=48&&a<=57&&(r.skip(2),(a=r.readByte())>=48&&a<=57&&(r.skip(2),a=r.readByte()))),t=a===te.TagUTC?new Date(Date.UTC(n,i,o,u,s,c,f)):new Date(n,i,o,u,s,c,f)}else t=a===te.TagUTC?new Date(Date.UTC(n,i,o)):new Date(n,i,o);return e.refer.set(t),t}function I(e){var t=e.stream.readByte();switch(t){case te.TagNull:return null;case te.TagDate:return C(e);case te.TagRef:return K(e);default:n(t)}}function x(e){var t,r=e.stream,n=parseInt(r.readAsciiString(2),10),i=parseInt(r.readAsciiString(2),10),o=parseInt(r.readAsciiString(2),10),a=0,u=r.readByte();return u===te.TagPoint&&(a=parseInt(r.readAsciiString(3),10),(u=r.readByte())>=48&&u<=57&&(r.skip(2),(u=r.readByte())>=48&&u<=57&&(r.skip(2),u=r.readByte()))),t=u===te.TagUTC?new Date(Date.UTC(1970,0,1,n,i,o,a)):new Date(1970,0,1,n,i,o,a),e.refer.set(t),t}function R(e){var t=e.stream.readByte();switch(t){case te.TagNull:return null;case te.TagTime:return x(e);case te.TagRef:return K(e);default:n(t)}}function P(e){var t=e.stream,r=b(t,te.TagQuote),n=t.read(r);return t.skip(1),e.refer.set(n),n}function M(e){var t=e.stream.readByte();switch(t){case te.TagNull:return null;case te.TagEmpty:return new Uint8Array(0);case te.TagBytes:return P(e);case te.TagRef:return K(e);default:n(t)}}function U(e){return e.stream.readString(1)}function L(e){var t=e.stream,r=t.readString(b(t,te.TagQuote));return t.skip(1),r}function N(e){var t=L(e);return e.refer.set(t),t}function F(e){var t=e.stream.readByte();switch(t){case te.TagNull:return null;case te.TagEmpty:return"";case te.TagUTF8Char:return U(e);case te.TagString:return N(e);case te.TagRef:return K(e);default:n(t)}}function W(e){var t=e.stream;t.skip(1);var r=t.readAsciiString(36);return t.skip(1),e.refer.set(r),r}function D(e){var t=e.stream.readByte();switch(t){case te.TagNull:return null;case te.TagGuid:return W(e);case te.TagRef:return K(e);default:n(t)}}function H(e){var t=e.stream,r=[];e.refer.set(r);for(var n=b(t,te.TagOpenbrace),i=0;i<n;i++)r[i]=T(e);return t.skip(1),r}function z(e){var t=e.stream.readByte();switch(t){case te.TagNull:return null;case te.TagList:return H(e);case te.TagRef:return K(e);default:n(t)}}function q(e){var t=e.stream,r={};e.refer.set(r);for(var n=b(t,te.TagOpenbrace),i=0;i<n;i++){var o=T(e),a=T(e);r[o]=a}return t.skip(1),r}function G(e){var t=e.stream.readByte();switch(t){case te.TagNull:return null;case te.TagMap:return q(e);case te.TagRef:return K(e);default:n(t)}}function Q(e){var t=e.stream,r=new Z;e.refer.set(r);for(var n=b(t,te.TagOpenbrace),i=0;i<n;i++){var o=T(e),a=T(e);r.set(o,a)}return t.skip(1),r}function Y(e){var t=e.stream.readByte();switch(t){case te.TagNull:return null;case te.TagMap:return Q(e);case te.TagRef:return K(e);default:n(t)}}function J(e){var t=e.stream,r=e.classref[b(t,te.TagOpenbrace)],n=new r.classname;e.refer.set(n);for(var i=0;i<r.count;i++)n[r.fields[i]]=T(e);return t.skip(1),n}function X(e){var t=e.stream.readByte();switch(t){case te.TagNull:return null;case te.TagClass:return $(e),X(e);case te.TagObject:return J(e);case te.TagRef:return K(e);default:n(t)}}function $(e){for(var t=e.stream,r=L(e),n=b(t,te.TagOpenbrace),i=[],o=0;o<n;o++)i[o]=F(e);t.skip(1),r=m(r),e.classref.push({classname:r,count:n,fields:i})}function K(e){return e.refer.read(b(e.stream,te.TagSemicolon))}function V(e,t,r){p.call(this,e),this.useHarmonyMap=!!r,Object.defineProperties(this,{classref:{value:[]},refer:{value:t?ne:d()}})}var Z=t.Map,ee=e.BytesIO,te=e.Tags,re=e.ClassManager;e.RawReader=p;var ne=Object.create(null,{set:{value:function(){}},read:{value:function(){n(te.TagRef)}},reset:{value:function(){}}});Object.defineProperties(g.prototype,{set:{value:function(e){this.ref.push(e)}},read:{value:function(e){return this.ref[e]}},reset:{value:function(){this.ref.length=0}}}),V.prototype=Object.create(p.prototype),V.prototype.constructor=V,Object.defineProperties(V.prototype,{useHarmonyMap:{value:!1,writable:!0},checkTag:{value:function(e,t){t===r&&(t=this.stream.readByte()),t!==e&&n(t,e)}},checkTags:{value:function(e,t){if(t===r&&(t=this.stream.readByte()),e.indexOf(t)>=0)return t;n(t,e)}},unserialize:{value:function(){return T(this)}},readInteger:{value:function(){return O(this.stream)}},readLong:{value:function(){return E(this.stream)}},readDouble:{value:function(){return A(this.stream)}},readBoolean:{value:function(){return k(this.stream)}},readDateWithoutTag:{value:function(){return C(this)}},readDate:{value:function(){return I(this)}},readTimeWithoutTag:{value:function(){return x(this)}},readTime:{value:function(){return R(this)}},readBytesWithoutTag:{value:function(){return P(this)}},readBytes:{value:function(){return M(this)}},readStringWithoutTag:{value:function(){return N(this)}},readString:{value:function(){return F(this)}},readGuidWithoutTag:{value:function(){return W(this)}},readGuid:{value:function(){return D(this)}},readListWithoutTag:{value:function(){return H(this)}},readList:{value:function(){return z(this)}},readMapWithoutTag:{value:function(){return this.useHarmonyMap?Q(this):q(this)}},readMap:{value:function(){return this.useHarmonyMap?Y(this):G(this)}},readObjectWithoutTag:{value:function(){return J(this)}},readObject:{value:function(){return X(this)}},reset:{value:function(){this.classref.length=0,this.refer.reset()}}}),e.Reader=V}(hprose,hprose.global),function(e){"use strict";function t(e,t){var r=new n;return new i(r,t).serialize(e),r}function r(e,t,r){return e instanceof n||(e=new n(e)),new o(e,t,r).unserialize()}var n=e.BytesIO,i=e.Writer,o=e.Reader;e.Formatter={serialize:function(e,r){return t(e,r).bytes},unserialize:r},e.serialize=t,e.unserialize=r}(hprose),function(e){"use strict";e.ResultMode={Normal:0,Serialized:1,Raw:2,RawWithEndTag:3},e.Normal=e.ResultMode.Normal,e.Serialized=e.ResultMode.Serialized,e.Raw=e.ResultMode.Raw,e.RawWithEndTag=e.ResultMode.RawWithEndTag}(hprose),function(e,t,r){"use strict";function n(){}function i(e,t){var n={};this.get=function(o,a){var u=a.toString();if(t&&(u=t+"_"+u),"then"===u)return r;if(!o.hasOwnProperty(u)){n[u]={};var s=new i(e,u),c=e(n,u);s.apply=function(e,t,r){return c.apply(null,r)},s.set=function(e,t,r){return n[u][t]=r,!0},o[u]=new Proxy(function(){},s)}return o[u]}}function o(e,t,o){function a(e,t){for(var r=0,n=Ze.length;r<n;r++)e=Ze[r].outputFilter(e,t);return e}function u(e,t){for(var r=Ze.length-1;r>=0;r--)e=Ze[r].inputFilter(e,t);return e}function g(e,t){return e=a(e,t),ct(e,t).then(function(e){if(!t.oneway)return u(e,t)})}function O(e,t){return pt.sendAndReceive(e,t).catchError(function(r){var n=S(e,t);if(null!==n)return n;throw r})}function j(e,t,r,n){st(e,t).then(r,n)}function E(){var e=Fe.length;if(e>1){var t=We+1;t>=e&&(t=0,Ye++),We=t,Ne=Fe[We]}else Ye++;Ve(pt)}function S(e,t){if(t.failswitch&&E(),t.idempotent&&t.retried<t.retry){var r=500*++t.retried;return t.failswitch&&(r-=500*(Fe.length-1)),r>5e3&&(r=5e3),r>0?p.delayed(r,function(){return O(e,t)}):O(e,t)}return null}function A(e){var t=[Object.create(null)];for(var n in e){var i=e[n].split("_"),o=i.length-1;if(o>0){for(var a=t,u=0;u<o;u++){var s=i[u];a[0][s]===r&&(a[0][s]=[Object.create(null)]),a=a[0][s]}a.push(i[o])}t.push(e[n])}return t}function B(e){j(y,{retry:qe,retried:0,idempotent:!0,failswitch:!0,timeout:ze,client:pt,userdata:{}},function(t){var r=null;try{var n=new l(t),i=new v(n,!0);switch(n.readByte()){case c.TagError:r=new Error(i.readString());break;case c.TagFunctions:var o=A(i.readList());i.checkTag(c.TagEnd),I(e,o);break;default:r=new Error("Wrong Response:\r\n"+l.toString(t))}}catch(e){r=e}null!==r?rt.reject(r):rt.resolve(e)},rt.reject)}function k(e,t){return function(){return et?L(e,t,Array.slice(arguments),!0):p.all(arguments).then(function(r){return L(e,t,r,!1)})}}function C(e,t,n,i,o){if(t[i]===r&&(t[i]={},typeof o!==m&&o.constructor!==Object||(o=[o]),Array.isArray(o)))for(var a=0;a<o.length;a++){var u=o[a];if(typeof u===m)t[i][u]=k(e,n+i+"_"+u);else for(var s in u)C(e,t[i],n+i+"_",s,u[s])}}function I(e,t){for(var n=0;n<t.length;n++){var i=t[n];if(typeof i===m)e[i]===r&&(e[i]=k(e,i));else for(var o in i)C(e,e,"",o,i[o])}}function x(e,t){for(var r=Math.min(e.length,t.length),n=0;n<r;++n)t[n]=e[n]}function R(e){return e?{mode:f.Normal,byref:De,simple:He,onsuccess:r,onerror:r,useHarmonyMap:$e,client:pt,userdata:{}}:{mode:f.Normal,byref:De,simple:He,timeout:ze,retry:qe,retried:0,idempotent:Ge,failswitch:Qe,oneway:!1,sync:!1,onsuccess:r,onerror:r,useHarmonyMap:$e,client:pt,userdata:{}}}function P(e,t,r,n){var i=R(n);if(t in e){var o=e[t];for(var a in o)a in i&&(i[a]=o[a])}for(var u=0,s=r.length;u<s&&typeof r[u]!==T;++u);if(u===s)return i;var c=r.splice(u,s-u);for(i.onsuccess=c[0],s=c.length,u=1;u<s;++u){var f=c[u];switch(typeof f){case T:i.onerror=f;break;case w:i.byref=f;break;case b:i.mode=f;break;case _:for(var l in f)l in i&&(i[l]=f[l])}}return i}function M(e,t,r){var n=new l;n.writeByte(c.TagCall);var i=new h(n,r.simple);return i.writeString(e),(t.length>0||r.byref)&&(i.reset(),i.writeList(t),r.byref&&i.writeBoolean(!0)),n}function U(e,t,r,n){return Je?p.promise(function(i,o){Xe.push({batch:n,name:e,args:t,context:r,resolve:i,reject:o})}):n?H(e,t,r):D(e,t,r)}function L(e,t,r,n){return U(t,r,P(e,t,r,n),n)}function N(e,t,r,n){try{r.onerror?r.onerror(e,t):Ke(e,t),n(t)}catch(e){n(e)}}function F(e,t,r){var n=M(e,t,r);return n.writeByte(c.TagEnd),p.promise(function(e,i){j(n.bytes,r,function(n){if(r.oneway)return void e();var o=null,a=null;try{if(r.mode===f.RawWithEndTag)o=n;else if(r.mode===f.Raw)o=n.subarray(0,n.byteLength-1);else{var u=new l(n),s=new v(u,!1,r.useHarmonyMap),h=u.readByte();if(h===c.TagResult){if(o=r.mode===f.Serialized?s.readRaw():s.unserialize(),(h=u.readByte())===c.TagArgument){s.reset();var p=s.readList();x(p,t),h=u.readByte()}}else h===c.TagError&&(a=new Error(s.readString()),h=u.readByte());h!==c.TagEnd&&(a=new Error("Wrong Response:\r\n"+l.toString(n)))}}catch(e){a=e}a?i(a):e(o)},i)})}function W(e){return function(){e&&(Je=!1,s(function(e){e.forEach(function(e){"settings"in e?Q(e.settings).then(e.resolve,e.reject):U(e.name,e.args,e.context,e.batch).then(e.resolve,e.reject)})},Xe),Xe=[])}}function D(e,t,r){r.sync&&(Je=!0);var n=p.promise(function(n,i){at(e,t,r).then(function(o){try{if(r.onsuccess)try{r.onsuccess(o,t)}catch(t){r.onerror&&r.onerror(e,t),i(t)}n(o)}catch(e){i(e)}},function(t){N(e,t,r,i)})});return n.whenComplete(W(r.sync)),n}function H(e,t,r){return p.promise(function(n,i){tt.push({args:t,name:e,context:r,resolve:n,reject:i})})}function z(e){var t={timeout:ze,retry:qe,retried:0,idempotent:Ge,failswitch:Qe,oneway:!1,sync:!1,client:pt,userdata:{}};for(var r in e)r in t&&(t[r]=e[r]);return t}function q(e,t){var r=e.reduce(function(e,t){return e.write(M(t.name,t.args,t.context)),e},new l);return r.writeByte(c.TagEnd),p.promise(function(n,i){j(r.bytes,t,function(r){if(t.oneway)return void n(e);var o=-1,a=new l(r),u=new v(a,!1),s=a.readByte();try{for(;s!==c.TagEnd;){var h=null,p=null,g=e[++o].context.mode;if(g>=f.Raw&&(h=new l),s===c.TagResult){if(g===f.Serialized?h=u.readRaw():g>=f.Raw?(h.writeByte(c.TagResult),h.write(u.readRaw())):(u.useHarmonyMap=e[o].context.useHarmonyMap,u.reset(),h=u.unserialize()),(s=a.readByte())===c.TagArgument){if(g>=f.Raw)h.writeByte(c.TagArgument),h.write(u.readRaw());else{u.reset();var d=u.readList();x(d,e[o].args)}s=a.readByte()}}else s===c.TagError&&(g>=f.Raw?(h.writeByte(c.TagError),h.write(u.readRaw())):(u.reset(),p=new Error(u.readString())),s=a.readByte());if([c.TagEnd,c.TagResult,c.TagError].indexOf(s)<0)return void i(new Error("Wrong Response:\r\n"+l.toString(r)));g>=f.Raw?(g===f.RawWithEndTag&&h.writeByte(c.TagEnd),e[o].result=h.bytes):e[o].result=h,e[o].error=p}}catch(e){return void i(e)}n(e)},i)})}function G(){et=!0}function Q(e){if(e=e||{},et=!1,Je)return p.promise(function(t,r){Xe.push({batch:!0,settings:e,resolve:t,reject:r})});if(0===tt.length)return p.value([]);var t=z(e);t.sync&&(Je=!0);var r=tt;tt=[];var n=p.promise(function(e,n){ut(r,t).then(function(t){t.forEach(function(e){if(e.error)N(e.name,e.error,e.context,e.reject);else try{if(e.context.onsuccess)try{e.context.onsuccess(e.result,e.args)}catch(t){e.context.onerror&&e.context.onerror(e.name,t),e.reject(t)}e.resolve(e.result)}catch(t){e.reject(t)}delete e.context,delete e.resolve,delete e.reject}),e(t)},function(e){r.forEach(function(t){"reject"in t&&N(t.name,e,t.context,t.reject)}),n(e)})});return n.whenComplete(W(t.sync)),n}function Y(){return Ke}function J(e){typeof e===T&&(Ke=e)}function X(){return Ve}function $(e){typeof e===T&&(Ve=e)}function K(){return Ne}function V(){return Fe}function Z(e){if(typeof e===m)Fe=[e];else{if(!Array.isArray(e))return;Fe=e.slice(0),Fe.sort(function(){return Math.random()-.5})}We=0,Ne=Fe[We]}function ee(){return Qe}function te(e){Qe=!!e}function re(){return Ye}function ne(){return ze}function ie(e){ze="number"==typeof e?0|e:0}function oe(){return qe}function ae(e){qe="number"==typeof e?0|e:0}function ue(){return Ge}function se(e){Ge=!!e}function ce(e){ot=!!e}function fe(){return ot}function le(){return De}function he(e){De=!!e}function ve(){return He}function pe(e){He=!!e}function ge(){return $e}function de(e){$e=!!e}function ye(){return 0===Ze.length?null:1===Ze.length?Ze[0]:Ze.slice()}function we(e){Ze.length=0,Array.isArray(e)?e.forEach(function(e){me(e)}):me(e)}function me(e){e&&"function"==typeof e.inputFilter&&"function"==typeof e.outputFilter&&Ze.push(e)}function be(e){var t=Ze.indexOf(e);return-1!==t&&(Ze.splice(t,1),!0)}function Te(){return Ze}function _e(e,t,n){n===r&&(typeof t===w&&(n=t,t=!1),t||(typeof e===w?(n=e,e=!1):(e&&e.constructor===Object||Array.isArray(e))&&(t=e,e=!1)));var o=pt;if(n&&(o={}),!e&&!Ne)return new Error("You should set server uri first!");if(e&&(Ne=e),(typeof t===m||t&&t.constructor===Object)&&(t=[t]),Array.isArray(t))I(o,t);else{if("undefined"==typeof Proxy)return s(B,o),rt;o=new Proxy({},new i(k))}return rt.resolve(o),o}function Oe(e,t,r){var i=arguments.length;if(i<1||typeof e!==m)throw new Error("name must be a string");if(1===i&&(t=[]),2===i&&!Array.isArray(t)){var o=[];typeof t!==T&&o.push(n),o.push(t),t=o}if(i>2){typeof r!==T&&t.push(n);for(var a=2;a<i;a++)t.push(arguments[a])}return L(pt,e,t,et)}function je(e,t){return rt.then(e,t)}function Ee(e,t){if(nt[e]){var r=nt[e];if(r[t])return r[t]}return null}function Se(e,t,n,i,o){if(typeof e!==m)throw new TypeError("topic name must be a string.");if(t===r||null===t){if(typeof n!==T)throw new TypeError("callback must be a function.");t=n}if(nt[e]||(nt[e]=Object.create(null)),typeof t===T)return i=n,n=t,void xe().then(function(t){Se(e,t,n,i,o)});if(typeof n!==T)throw new TypeError("callback must be a function.");if(p.isPromise(t))return void t.then(function(t){Se(e,t,n,i,o)});i===r&&(i=3e5);var a=Ee(e,t);if(null===a){var u=function(){L(pt,e,[t,a.handler,u,{idempotent:!0,failswitch:o,timeout:i}],!1)};a={handler:function(r){var n=Ee(e,t);if(n){if(null!==r)for(var i=n.callbacks,o=0,a=i.length;o<a;++o)try{i[o](r)}catch(e){}null!==Ee(e,t)&&u()}},callbacks:[n]},nt[e][t]=a,u()}else a.callbacks.indexOf(n)<0&&a.callbacks.push(n)}function Ae(e,t,r){if(e)if(typeof r===T){var n=e[t];if(n){var i=n.callbacks,o=i.indexOf(r);o>=0&&(i[o]=i[i.length-1],i.length--),0===i.length&&delete e[t]}}else delete e[t]}function Be(e,t,n){if(typeof e!==m)throw new TypeError("topic name must be a string.");if(t===r||null===t){if(typeof n!==T)return void delete nt[e];t=n}if(typeof t===T&&(n=t,t=null),null===t)if(null===it){if(nt[e]){var i=nt[e];for(t in i)Ae(i,t,n)}}else it.then(function(t){Be(e,t,n)});else p.isPromise(t)?t.then(function(t){Be(e,t,n)}):Ae(nt[e],t,n);d(nt[e])&&delete nt[e]}function ke(e){return!!nt[e]}function Ce(){var e=[];for(var t in nt)e.push(t);return e}function Ie(){return it}function xe(){return null===it&&(it=L(pt,"#",[],!1)),it}function Re(e){ft.push(e),at=ft.reduceRight(function(e,t){return function(r,n,i){return p.toPromise(t(r,n,i,e))}},F)}function Pe(e){lt.push(e),ut=lt.reduceRight(function(e,t){return function(r,n){return p.toPromise(t(r,n,e))}},q)}function Me(e){ht.push(e),st=ht.reduceRight(function(e,t){return function(r,n){return p.toPromise(t(r,n,e))}},g)}function Ue(e){vt.push(e),ct=vt.reduceRight(function(e,t){return function(r,n){return p.toPromise(t(r,n,e))}},O)}function Le(e){return Re(e),pt}var Ne,Fe=[],We=-1,De=!1,He=!1,ze=3e4,qe=10,Ge=!1,Qe=!1,Ye=0,Je=!1,Xe=[],$e=!1,Ke=n,Ve=n,Ze=[],et=!1,tt=[],rt=new p,nt=Object.create(null),it=null,ot=!0,at=F,ut=q,st=g,ct=O,ft=[],lt=[],ht=[],vt=[],pt=this;xe.sync=!0,xe.idempotent=!0,xe.failswitch=!0;var gt=Object.create(null,{begin:{value:G},end:{value:Q},use:{value:function(e){return Pe(e),gt}}}),dt=Object.create(null,{use:{value:function(e){return Me(e),dt}}}),yt=Object.create(null,{use:{value:function(e){return Ue(e),yt}}});Object.defineProperties(this,{"#":{value:xe},onerror:{get:Y,set:J},onfailswitch:{get:X,set:$},uri:{get:K},uriList:{get:V,set:Z},id:{get:Ie},failswitch:{get:ee,set:te},failround:{get:re},timeout:{get:ne,set:ie},retry:{get:oe,set:ae},idempotent:{get:ue,set:se},keepAlive:{get:fe,set:ce},byref:{get:le,set:he},simple:{get:ve,set:pe},useHarmonyMap:{get:ge,set:de},filter:{get:ye,set:we},addFilter:{value:me},removeFilter:{value:be},filters:{get:Te},useService:{value:_e},invoke:{value:Oe},ready:{value:je},subscribe:{value:Se},unsubscribe:{value:Be},isSubscribed:{value:ke},subscribedList:{value:Ce},use:{value:Le},batch:{value:gt},beforeFilter:{value:dt},afterFilter:{value:yt}}),o&&typeof o===_&&["failswitch","timeout","retry","idempotent","keepAlive","byref","simple","useHarmonyMap","filter"].forEach(function(e){e in o&&(pt[e]=o[e])}),e&&(Z(e),_e(t))}function a(e){var t=g(e),r=t.protocol;if("http:"!==r&&"https:"!==r&&"tcp:"!==r&&"tcp4:"!==r&&"tcp6:"!==r&&"tcps:"!==r&&"tcp4s:"!==r&&"tcp6s:"!==r&&"tls:"!==r&&"ws:"!==r&&"wss:"!==r)throw new Error("The "+r+" client isn't implemented.")}function u(t,r,n){try{return e.HttpClient.create(t,r,n)}catch(e){}try{return e.TcpClient.create(t,r,n)}catch(e){}try{return e.WebSocketClient.create(t,r,n)}catch(e){}if("string"==typeof t)a(t);else if(Array.isArray(t))throw t.forEach(function(e){a(e)}),new Error("Not support multiple protocol.");throw new Error("You should set server uri first!")}var s=t.setImmediate,c=e.Tags,f=e.ResultMode,l=e.BytesIO,h=e.Writer,v=e.Reader,p=e.Future,g=e.parseuri,d=e.isObjectEmpty,y=new Uint8Array(1);y[0]=c.TagEnd;var w="boolean",m="string",b="number",T="function",_="object";Object.defineProperty(o,"create",{value:u}),e.Client=o}(hprose,hprose.global),function(e){"use strict";function t(e,t){function r(e){var t,r,n;for(t=e.replace(/(^\s*)|(\s*$)/g,"").split(";"),r={},e=t[0].replace(/(^\s*)|(\s*$)/g,"").split("=",2),void 0===e[1]&&(e[1]=null),r.name=e[0],r.value=e[1],
n=1;n<t.length;n++)e=t[n].replace(/(^\s*)|(\s*$)/g,"").split("=",2),void 0===e[1]&&(e[1]=null),r[e[0].toUpperCase()]=e[1];r.PATH?('"'===r.PATH.charAt(0)&&(r.PATH=r.PATH.substr(1)),'"'===r.PATH.charAt(r.PATH.length-1)&&(r.PATH=r.PATH.substr(0,r.PATH.length-1))):r.PATH="/",r.EXPIRES&&(r.EXPIRES=Date.parse(r.EXPIRES)),r.DOMAIN?r.DOMAIN=r.DOMAIN.toLowerCase():r.DOMAIN=s,r.SECURE=void 0!==r.SECURE,void 0===i[r.DOMAIN]&&(i[r.DOMAIN]={}),i[r.DOMAIN][r.name]=r}var o,a,u=n(t),s=u.host;for(o in e)a=e[o],"set-cookie"!==(o=o.toLowerCase())&&"set-cookie2"!==o||("string"==typeof a&&(a=[a]),a.forEach(r))}function r(e){var t=n(e),r=t.host,o=t.path,a="https:"===t.protocol,u=[];for(var s in i)if(r.indexOf(s)>-1){var c=[];for(var f in i[s]){var l=i[s][f];l.EXPIRES&&(new Date).getTime()>l.EXPIRES?c.push(f):0===o.indexOf(l.PATH)&&(a&&l.SECURE||!l.SECURE)&&null!==l.value&&u.push(l.name+"="+l.value)}for(var h in c)delete i[s][c[h]]}return u.length>0?u.join("; "):""}var n=e.parseuri,i={};e.cookieManager={setCookie:t,getCookie:r}}(hprose),function(e,t,r){"use strict";function n(){}function i(e){var t=Object.create(null);if(e){e=e.split("\r\n");for(var r=0,n=e.length;r<n;r++)if(""!==e[r]){var i=e[r].split(": ",2),o=i[0].trim(),a=i[1].trim();o in t?Array.isArray(t[o])?t[o].push(a):t[o]=[t[o],a]:t[o]=a}}return t}function o(e,a,u){function h(e){var t,r,n=Object.create(null);for(t in j)n[t]=j[t];if(e)for(t in e)r=e[t],Array.isArray(r)?n[t]=r.join(", "):n[t]=r;return n}function p(e,t){var o=new c,a=new v;a.open("POST",A.uri,!0),g&&(a.withCredentials="true"),a.responseType="arraybuffer";var u=h(t.httpHeader);for(var s in u)a.setRequestHeader(s,u[s]);if(a.onload=function(){if(a.onload=n,a.status){var e=a.getAllResponseHeaders();t.httpHeader=i(e),200===a.status?o.resolve(new Uint8Array(a.response)):o.reject(new Error(a.status+":"+a.statusText))}},a.onerror=function(){o.reject(new Error("error"))},a.upload!==r&&(a.upload.onprogress=E),a.onprogress=S,t.timeout>0&&(o=o.timeout(t.timeout).catchError(function(e){throw a.onload=n,a.onerror=n,a.abort(),e},function(e){return e instanceof l})),e.constructor===String||ArrayBuffer.isView)a.send(e);else if(e.buffer.slice)a.send(e.buffer.slice(0,e.length));else{var f=new Uint8Array(e.length);f.set(e),a.send(f.buffer)}return o}function d(e,r){var n=new c,i=h(r.httpHeader),o=y.getCookie(A.uri());return""!==o&&(i.Cookie=o),t.api.ajax({url:A.uri,method:"post",data:{body:f.toString(e)},timeout:r.timeout,dataType:"text",headers:i,returnAll:!0,certificate:A.certificate},function(e,t){e?(r.httpHeader=e.headers,200===e.statusCode?(y.setCookie(e.headers,A.uri),n.resolve(new f(e.body).takeBytes())):n.reject(new Error(e.statusCode+":"+e.body))):n.reject(new Error(t.msg))}),n}function w(e,r){var n=void 0!==t.api&&void 0!==t.api.ajax,i=n?d(e,r):p(e,r);return r.oneway&&i.resolve(),i}function m(e){"function"==typeof e&&(E=e)}function b(){return E}function T(e){"function"==typeof e&&(S=e)}function _(){return S}function O(e,t){"content-type"!==e.toLowerCase()&&"content-length"!==e.toLowerCase()&&(t?j[e]=t:delete j[e])}if(this.constructor!==o)return new o(e,a,u);s.call(this,e,a,u);var j=Object.create(null),E=n,S=n,A=this;Object.defineProperties(this,{onprogress:{get:b,set:m},onRequestProgress:{get:b,set:m},onResponseProgress:{get:_,set:T},setHeader:{value:O},sendAndReceive:{value:w}})}function a(e){var t=d(e);if("http:"!==t.protocol&&"https:"!==t.protocol)throw new Error("This client desn't support "+t.protocol+" scheme.")}function u(e,t,r){if("string"==typeof e)a(e);else{if(!Array.isArray(e))throw new Error("You should set server uri first!");e.forEach(function(e){a(e)})}return new o(e,t,r)}var s=e.Client,c=e.Future,f=e.BytesIO,l=t.TimeoutError,h=t.location!==r&&"file:"===t.location.protocol,v=t.XMLHttpRequest,p=void 0!==v,g=!h&&p&&"withCredentials"in new v,d=e.parseuri,y=e.cookieManager;Object.defineProperty(o,"create",{value:u}),e.HttpClient=o}(hprose,hprose.global),function(e,t,r){"use strict";function n(){}function i(e,t,o){function a(){return m<2147483647?++m:m=0}function l(e,t){var r=new u;r.writeInt32BE(e),t.constructor===String?r.writeString(t):r.write(t);var n=r.bytes;ArrayBuffer.isView?j.send(n):n.buffer.slice?j.send(n.buffer.slice(0,n.length)):j.send(n.buffer)}function v(e){O.resolve(e)}function p(e){var t=new u(e.data),n=t.readInt32BE(),i=T[n];if(delete T[n],i!==r&&(--b,i.resolve(t.read(t.length-4))),b<100&&_.length>0){++b;var o=_.pop();O.then(function(){l(o[0],o[1])})}0!==b||E.keepAlive||w()}function g(e){T.forEach(function(t,r){t.reject(new Error(e.code+":"+e.reason)),delete T[r]}),b=0,j=null}function d(){O=new c,j=new h(E.uri),j.binaryType="arraybuffer",j.onopen=v,j.onmessage=p,j.onerror=n,j.onclose=g}function y(e,t){var r=a(),n=new c;return T[r]=n,t.timeout>0&&(n=n.timeout(t.timeout).catchError(function(e){throw delete T[r],--b,w(),e},function(e){return e instanceof f})),null!==j&&j.readyState!==h.CLOSING&&j.readyState!==h.CLOSED||d(),b<100?(++b,O.then(function(){l(r,e)})):_.push([r,e]),t.oneway&&n.resolve(),n}function w(){null!==j&&(j.onopen=n,j.onmessage=n,j.onclose=n,j.close())}if(void 0===h)throw new Error("WebSocket is not supported by this browser.");if(this.constructor!==i)return new i(e,t,o);s.call(this,e,t,o);var m=0,b=0,T=[],_=[],O=null,j=null,E=this;Object.defineProperties(this,{sendAndReceive:{value:y},close:{value:w}})}function o(e){var t=l(e);if("ws:"!==t.protocol&&"wss:"!==t.protocol)throw new Error("This client desn't support "+t.protocol+" scheme.")}function a(e,t,r){if("string"==typeof e)o(e);else{if(!Array.isArray(e))throw new Error("You should set server uri first!");e.forEach(function(e){o(e)})}return new i(e,t,r)}var u=e.BytesIO,s=e.Client,c=e.Future,f=t.TimeoutError,l=e.parseuri,h=t.WebSocket||t.MozWebSocket;Object.defineProperty(i,"create",{value:a}),e.WebSocketClient=i}(hprose,hprose.global),function(e,t,r){"use strict";function n(){}function i(e){s[e.socketId].onreceive(e.data)}function o(e){var t=s[e.socketId];t.onerror(e.resultCode),t.destroy()}function a(){null===c&&(c=t.chrome.sockets.tcp,c.onReceive.addListener(i),c.onReceiveError.addListener(o)),this.socketId=new u,this.connected=!1,this.timeid=r,this.onclose=n,this.onconnect=n,this.onreceive=n,this.onerror=n}var u=e.Future,s={},c=null;Object.defineProperties(a.prototype,{connect:{value:function(e,t,r){var n=this;c.create({persistent:r&&r.persistent},function(i){r&&("noDelay"in r&&c.setNoDelay(i.socketId,r.noDelay,function(e){e<0&&(n.socketId.reject(e),c.disconnect(i.socketId),c.close(i.socketId),n.onclose())}),"keepAlive"in r&&c.setKeepAlive(i.socketId,r.keepAlive,function(e){e<0&&(n.socketId.reject(e),c.disconnect(i.socketId),c.close(i.socketId),n.onclose())})),r&&r.tls?c.setPaused(i.socketId,!0,function(){c.connect(i.socketId,e,t,function(e){e<0?(n.socketId.reject(e),c.disconnect(i.socketId),c.close(i.socketId),n.onclose()):c.secure(i.socketId,function(t){0!==t?(n.socketId.reject(e),c.disconnect(i.socketId),c.close(i.socketId),n.onclose()):c.setPaused(i.socketId,!1,function(){n.socketId.resolve(i.socketId)})})})}):c.connect(i.socketId,e,t,function(e){e<0?(n.socketId.reject(e),c.disconnect(i.socketId),c.close(i.socketId),n.onclose()):n.socketId.resolve(i.socketId)})}),this.socketId.then(function(e){s[e]=n,n.connected=!0,n.onconnect(e)},function(e){n.onerror(e)})}},send:{value:function(e){var t=this,r=new u;return this.socketId.then(function(n){c.send(n,e,function(e){e.resultCode<0?(t.onerror(e.resultCode),r.reject(e.resultCode),t.destroy()):r.resolve(e.bytesSent)})}),r}},destroy:{value:function(){var e=this;this.connected=!1,this.socketId.then(function(t){c.disconnect(t),c.close(t),delete s[t],e.onclose()})}},ref:{value:function(){this.socketId.then(function(e){c.setPaused(e,!1)})}},unref:{value:function(){this.socketId.then(function(e){c.setPaused(e,!0)})}},clearTimeout:{value:function(){this.timeid!==r&&t.clearTimeout(this.timeid)}},setTimeout:{value:function(e,r){this.clearTimeout(),this.timeid=t.setTimeout(r,e)}}}),e.ChromeTcpSocket=a}(hprose,hprose.global),function(e,t,r){"use strict";function n(){}function i(){null===l&&(l=t.api.require("socketManager")),this.socketId=new o,this.connected=!1,this.timeid=r,this.onclose=n,this.onconnect=n,this.onreceive=n,this.onerror=n}var o=e.Future,a=t.atob,u=t.btoa,s=e.toUint8Array,c=e.toBinaryString,f={},l=null;Object.defineProperties(i.prototype,{connect:{value:function(e,t,r){var n=this;l.createSocket({type:"tcp",host:e,port:t,timeout:r.timeout,returnBase64:!0},function(e){if(e)switch(e.state){case 101:break;case 102:n.socketId.resolve(e.sid);break;case 103:n.onreceive(s(a(e.data.replace(/\s+/g,""))));break;case 201:n.socketId.reject(new Error("Create TCP socket failed"));break;case 202:n.socketId.reject(new Error("TCP connection failed"));break;case 203:n.onclose(),n.onerror(new Error("Abnormal disconnect connection"));break;case 204:n.onclose();break;case 205:n.onclose(),n.onerror(new Error("Unknown error"))}}),this.socketId.then(function(e){f[e]=n,n.connected=!0,n.onconnect(e)},function(e){n.onerror(e)})}},send:{value:function(e){var t=this,r=new o;return this.socketId.then(function(n){l.write({sid:n,data:u(c(e)),base64:!0},function(e,n){e.status?r.resolve():(t.onerror(new Error(n.msg)),r.reject(n.msg),t.destroy())})}),r}},destroy:{value:function(){var e=this;this.connected=!1,this.socketId.then(function(t){l.closeSocket({sid:t},function(t,r){t.status||e.onerror(new Error(r.msg))}),delete f[t]})}},ref:{value:n},unref:{value:n},clearTimeout:{value:function(){this.timeid!==r&&t.clearTimeout(this.timeid)}},setTimeout:{value:function(e,r){this.clearTimeout(),this.timeid=t.setTimeout(r,e)}}}),e.APICloudTcpSocket=i}(hprose,hprose.global),function(e,t,r){"use strict";function n(){}function i(e,t){e.onreceive=function(r){"receiveEntry"in e||(e.receiveEntry={stream:new p,headerLength:4,dataLength:-1,id:null});var n=e.receiveEntry,i=n.stream,o=n.headerLength,a=n.dataLength,u=n.id;for(i.write(r);;){if(a<0&&i.length>=o&&0!=(2147483648&(a=i.readInt32BE()))&&(a&=2147483647,o=8),8===o&&null===u&&i.length>=o&&(u=i.readInt32BE()),!(a>=0&&i.length-o>=a))break;t(i.read(a),u),o=4,u=null,i.trunc(),a=-1}n.stream=i,n.headerLength=o,n.dataLength=a,n.id=u}}function o(e){e&&(this.client=e,this.uri=this.client.uri,this.size=0,this.pool=[],this.requests=[])}function a(e){o.call(this,e)}function u(e){o.call(this,e)}function s(e,t,r){function n(){return w}function i(e){w=!!e}function o(){return m}function c(e){m=!!e}function f(){return b}function l(e){"number"==typeof e?(b=0|e)<1&&(b=10):b=10}function h(){return T}function p(e){T="number"==typeof e?0|e:0}function d(e,t){var r=new g;return m?(null!==_&&_.uri===y.uri||(_=new a(y)),_.sendAndReceive(e,r,t)):(null!==O&&O.uri===y.uri||(O=new u(y)),O.sendAndReceive(e,r,t)),t.oneway&&r.resolve(),r}if(this.constructor!==s)return new s(e,t,r);v.call(this,e,t,r);var y=this,w=!0,m=!1,b=10,T=3e4,_=null,O=null;Object.defineProperties(this,{noDelay:{get:n,set:i},fullDuplex:{get:o,set:c},maxPoolSize:{get:f,set:l},poolTimeout:{get:h,set:p},sendAndReceive:{value:d}})}function c(e){var t=y(e),r=t.protocol;if("tcp:"!==r&&"tcp4:"!==r&&"tcp6:"!==r&&"tcps:"!==r&&"tcp4s:"!==r&&"tcp6s:"!==r&&"tls:"!==r)throw new Error("This client desn't support "+r+" scheme.")}function f(e,t,r){if("string"==typeof e)c(e);else{if(!Array.isArray(e))throw new Error("You should set server uri first!");e.forEach(function(e){c(e)})}return new s(e,t,r)}var l=e.ChromeTcpSocket,h=e.APICloudTcpSocket,v=e.Client,p=e.BytesIO,g=e.Future,d=t.TimeoutError,y=e.parseuri;Object.defineProperties(o.prototype,{create:{value:function(){var e,r=y(this.uri),n=r.protocol,i=r.hostname,o=parseInt(r.port,10);if("tcp:"===n||"tcp4:"===n||"tcp6:"===n)e=!1;else{if("tcps:"!==n&&"tcp4s:"!==n&&"tcp6s:"!==n&&"tls:"!==n)throw new Error("Unsupported "+n+" protocol!");e=!0}var a;if(t.chrome&&t.chrome.sockets&&t.chrome.sockets.tcp)a=new l;else{if(!t.api||!t.api.require)throw new Error("TCP Socket is not supported by this browser or platform.");a=new h}var u=this;return a.connect(i,o,{persistent:!0,tls:e,timeout:this.client.timeout,noDelay:this.client.noDelay,keepAlive:this.client.keepAlive}),a.onclose=function(){--u.size},++this.size,a}}}),a.prototype=Object.create(o.prototype,{fetch:{value:function(){for(var e=this.pool;e.length>0;){var t=e.pop();if(t.connected)return 0===t.count&&(t.clearTimeout(),t.ref()),t}return null}},init:{value:function(e){var t=this;e.count=0,e.futures={},e.timeoutIds={},i(e,function(r,n){var i=e.futures[n];i&&(t.clean(e,n),0===e.count&&t.recycle(e),i.resolve(r))}),e.onerror=function(r){var n=e.futures;for(var i in n){var o=n[i];t.clean(e,i),o.reject(r)}}}},recycle:{value:function(e){e.unref(),e.setTimeout(this.client.poolTimeout,function(){e.destroy()})}},clean:{value:function(e,r){void 0!==e.timeoutIds[r]&&(t.clearTimeout(e.timeoutIds[r]),delete e.timeoutIds[r]),delete e.futures[r],--e.count,this.sendNext(e)}},sendNext:{value:function(e){if(e.count<10)if(this.requests.length>0){var t=this.requests.pop();t.push(e),this.send.apply(this,t)}else this.pool.lastIndexOf(e)<0&&this.pool.push(e)}},send:{value:function(e,r,n,i,o){var a=this,u=i.timeout;u>0&&(o.timeoutIds[n]=t.setTimeout(function(){a.clean(o,n),0===o.count&&a.recycle(o),r.reject(new d("timeout"))},u)),o.count++,o.futures[n]=r;var s=e.length,c=new p(8+s);c.writeInt32BE(2147483648|s),c.writeInt32BE(n),c.write(e),o.send(c.buffer).then(function(){a.sendNext(o)})}},getNextId:{value:function(){return this.nextid<2147483647?++this.nextid:this.nextid=0}},sendAndReceive:{value:function(e,t,r){var n=this.fetch(),i=this.getNextId();if(n)this.send(e,t,i,r,n);else if(this.size<this.client.maxPoolSize){n=this.create(),n.onerror=function(e){t.reject(e)};var o=this;n.onconnect=function(){o.init(n),o.send(e,t,i,r,n)}}else this.requests.push([e,t,i,r])}}}),a.prototype.constructor=o,u.prototype=Object.create(o.prototype,{fetch:{value:function(){for(var e=this.pool;e.length>0;){var t=e.pop();if(t.connected)return t.clearTimeout(),t.ref(),t}return null}},recycle:{value:function(e){this.pool.lastIndexOf(e)<0&&(e.unref(),e.setTimeout(this.client.poolTimeout,function(){e.destroy()}),this.pool.push(e))}},clean:{value:function(e){e.onreceive=n,e.onerror=n,void 0!==e.timeoutId&&(t.clearTimeout(e.timeoutId),delete e.timeoutId)}},sendNext:{value:function(e){if(this.requests.length>0){var t=this.requests.pop();t.push(e),this.send.apply(this,t)}else this.recycle(e)}},send:{value:function(e,r,n,o){var a=this,u=n.timeout;u>0&&(o.timeoutId=t.setTimeout(function(){a.clean(o),o.destroy(),r.reject(new d("timeout"))},u)),i(o,function(e){a.clean(o),a.sendNext(o),r.resolve(e)}),o.onerror=function(e){a.clean(o),r.reject(e)};var s=e.length,c=new p(4+s);c.writeInt32BE(s),c.write(e),o.send(c.buffer)}},sendAndReceive:{value:function(e,t,r){var n=this.fetch();if(n)this.send(e,t,r,n);else if(this.size<this.client.maxPoolSize){n=this.create();var i=this;n.onerror=function(e){t.reject(e)},n.onconnect=function(){i.send(e,t,r,n)}}else this.requests.push([e,t,r])}}}),u.prototype.constructor=o,Object.defineProperty(s,"create",{value:f}),e.TcpClient=s}(hprose,hprose.global),function(e){"use strict";function t(e){this.version=e||"2.0"}var r=e.Tags,n=e.BytesIO,i=e.Writer,o=e.Reader,a=1;t.prototype.inputFilter=function(e){var t=n.toString(e);"{"===t.charAt(0)&&(t="["+t+"]");for(var o=JSON.parse(t),a=new n,u=new i(a,!0),s=0,c=o.length;s<c;++s){var f=o[s];f.error?(a.writeByte(r.TagError),u.writeString(f.error.message)):(a.writeByte(r.TagResult),u.serialize(f.result))}return a.writeByte(r.TagEnd),a.bytes},t.prototype.outputFilter=function(e){var t=[],i=new n(e),u=new o(i,!1,!1),s=i.readByte();do{var c={};s===r.TagCall&&(c.method=u.readString(),s=i.readByte(),s===r.TagList&&(c.params=u.readListWithoutTag(),s=i.readByte()),s===r.TagTrue&&(s=i.readByte())),"1.1"===this.version?c.version="1.1":"2.0"===this.version&&(c.jsonrpc="2.0"),c.id=a++,t.push(c)}while(s===r.TagCall);return t.length>1?JSON.stringify(t):JSON.stringify(t[0])},e.JSONRPCClientFilter=t}(hprose),function(e){"use strict";e.common={Completer:e.Completer,Future:e.Future,ResultMode:e.ResultMode},e.io={BytesIO:e.BytesIO,ClassManager:e.ClassManager,Tags:e.Tags,RawReader:e.RawReader,Reader:e.Reader,Writer:e.Writer,Formatter:e.Formatter},e.client={Client:e.Client,HttpClient:e.HttpClient,TcpClient:e.TcpClient,WebSocketClient:e.WebSocketClient},e.filter={JSONRPCClientFilter:e.JSONRPCClientFilter},"function"==typeof define&&(define.cmd?define("hprose",[],e):define.amd&&define("hprose",[],function(){return e})),"object"==typeof module&&(module.exports=e)}(hprose),function(e){"use strict";function t(e,t,r,i){var o=t&&t.prototype instanceof n?t:n,a=Object.create(o.prototype),u=new h(i||[]);return a._invoke=c(e,r,u),a}function r(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}function n(){}function i(){}function o(){}function a(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function u(e){this.arg=e}function s(e){function t(n,i,o,a){var s=r(e[n],e,i);if("throw"!==s.type){var c=s.arg,f=c.value;return f instanceof u?Promise.resolve(f.arg).then(function(e){t("next",e,o,a)},function(e){t("throw",e,o,a)}):Promise.resolve(f).then(function(e){c.value=e,o(c)},a)}a(s.arg)}function n(e,r){function n(){return new Promise(function(n,i){t(e,r,n,i)})}return i=i?i.then(n,n):n()}"object"==typeof process&&process.domain&&(t=process.domain.bind(t));var i;this._invoke=n}function c(e,t,n){var i=_;return function(o,a){if(i===j)throw new Error("Generator is already running");if(i===E){if("throw"===o)throw a;return p()}for(;;){var u=n.delegate;if(u){if("return"===o||"throw"===o&&u.iterator[o]===g){n.delegate=null;var s=u.iterator.return;if(s){var c=r(s,u.iterator,a);if("throw"===c.type){o="throw",a=c.arg;continue}}if("return"===o)continue}var c=r(u.iterator[o],u.iterator,a);if("throw"===c.type){n.delegate=null,o="throw",a=c.arg;continue}o="next",a=g;var f=c.arg;if(!f.done)return i=O,f;n[u.resultName]=f.value,n.next=u.nextLoc,n.delegate=null}if("next"===o)n.sent=n._sent=a;else if("throw"===o){if(i===_)throw i=E,a;n.dispatchException(a)&&(o="next",a=g)}else"return"===o&&n.abrupt("return",a);i=j;var c=r(e,t,n);if("normal"===c.type){i=n.done?E:O;var f={value:c.arg,done:n.done};if(c.arg!==S)return f;n.delegate&&"next"===o&&(a=g)}else"throw"===c.type&&(i=E,o="throw",a=c.arg)}}}function f(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function l(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function h(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(f,this),this.reset(!0)}function v(e){if(e){var t=e[w];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(d.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=g,t.done=!0,t};return n.next=n}}return{next:p}}function p(){return{value:g,done:!0}}var g,d=Object.prototype.hasOwnProperty,y="function"==typeof Symbol?Symbol:{},w=y.iterator||"@@iterator",m=y.toStringTag||"@@toStringTag",b="object"==typeof module,T=e.regeneratorRuntime;if(T)return void(b&&(module.exports=T));T=e.regeneratorRuntime=b?module.exports:{},T.wrap=t;var _="suspendedStart",O="suspendedYield",j="executing",E="completed",S={},A=o.prototype=n.prototype;i.prototype=A.constructor=o,o.constructor=i,o[m]=i.displayName="GeneratorFunction",T.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},T.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,o):(e.__proto__=o,m in e||(e[m]="GeneratorFunction")),e.prototype=Object.create(A),e},T.awrap=function(e){return new u(e)},a(s.prototype),T.async=function(e,r,n,i){var o=new s(t(e,r,n,i));return T.isGeneratorFunction(r)?o:o.next().then(function(e){return e.done?e.value:o.next()})},a(A),A[w]=function(){return this},A[m]="Generator",A.toString=function(){return"[object Generator]"},T.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},T.values=v,h.prototype={constructor:h,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=g,this.done=!1,this.delegate=null,this.tryEntries.forEach(l),!e)for(var t in this)"t"===t.charAt(0)&&d.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=g)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){function t(t,n){return o.type="throw",o.arg=e,r.next=t,!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=d.call(i,"catchLoc"),u=d.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&d.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?this.next=i.finallyLoc:this.complete(o),S},complete:function(e,t){if("throw"===e.type)throw e.arg;"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=e.arg,this.next="end"):"normal"===e.type&&t&&(this.next=t)},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),l(r),S}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;l(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:v(e),resultName:t,nextLoc:r},S}}}("object"==typeof global?global:"object"==typeof window?window:"object"==typeof self?self:this);