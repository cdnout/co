var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}import*as utils from"./utils";var storage={setItem:function(e,t){if(window.localStorage)try{window.localStorage.setItem(e,t)}catch(e){}},getItem:function(e,t){if(window.localStorage)try{return window.localStorage.getItem(e,t)}catch(e){}}};function getDefaults(){return{enabled:!1,prefix:"i18next_res_",expirationTime:6048e5,versions:{}}}var Cache=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,e),this.init(t,n),this.type="cache",this.debouncedStore=utils.debounce(this.store,1e4)}return _createClass(e,[{key:"init",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.services=e,this.options=utils.defaults(t,this.options||{},getDefaults())}},{key:"load",value:function(e,t){var n=this,i={},o=(new Date).getTime();if(!window.localStorage||!e.length)return t(null,null);var a=e.length;e.forEach(function(e){var r=storage.getItem(n.options.prefix+e);r&&(r=JSON.parse(r)).i18nStamp&&r.i18nStamp+n.options.expirationTime>o&&n.options.versions[e]===r.i18nVersion&&(delete r.i18nVersion,i[e]=r),0===(a-=1)&&t(null,i)})}},{key:"store",value:function(e){var t=e;if(window.localStorage)for(var n in t)t[n].i18nStamp=(new Date).getTime(),this.options.versions[n]&&(t[n].i18nVersion=this.options.versions[n]),storage.setItem(this.options.prefix+n,JSON.stringify(t[n]))}},{key:"save",value:function(e){this.debouncedStore(e)}}]),e}();Cache.type="cache";export default Cache;