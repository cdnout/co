!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):n.mergeImages=t()}(this,function(){"use strict";var u={format:"image/png",quality:.92,width:void 0,height:void 0,Canvas:void 0,crossOrigin:void 0};return function(i,a){return void 0===i&&(i=[]),void 0===a&&(a={}),new Promise(function(n){var o=(a=Object.assign({},u,a)).Canvas?new a.Canvas:window.document.createElement("canvas"),r=a.Image||window.Image,t=i.map(function(i){return new Promise(function(n,t){"Object"!==i.constructor.name&&(i={src:i});var e=new r;e.crossOrigin=a.crossOrigin,e.onerror=function(){return t(new Error("Couldn't load image"))},e.onload=function(){return n(Object.assign({},i,{img:e}))},e.src=i.src})}),e=o.getContext("2d");n(Promise.all(t).then(function(n){function t(t){return a[t]||Math.max.apply(Math,n.map(function(n){return n.img[t]}))}return o.width=t("width"),o.height=t("height"),n.forEach(function(n){return e.globalAlpha=n.opacity||1,e.drawImage(n.img,n.x||0,n.y||0)}),a.Canvas&&"image/jpeg"===a.format?new Promise(function(e,i){o.toDataURL(a.format,{quality:a.quality,progressive:!1},function(n,t){n?i(n):e(t)})}):o.toDataURL(a.format,a.quality)}))})}});