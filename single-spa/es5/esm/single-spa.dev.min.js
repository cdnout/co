var singleSpa=Object.freeze({__proto__:null,get start(){return start},get ensureJQuerySupport(){return ensureJQuerySupport},get setBootstrapMaxTime(){return setBootstrapMaxTime},get setMountMaxTime(){return setMountMaxTime},get setUnmountMaxTime(){return setUnmountMaxTime},get setUnloadMaxTime(){return setUnloadMaxTime},get registerApplication(){return registerApplication},get unregisterApplication(){return unregisterApplication},get getMountedApps(){return getMountedApps},get getAppStatus(){return getAppStatus},get unloadApplication(){return unloadApplication},get checkActivityFunctions(){return checkActivityFunctions},get getAppNames(){return getAppNames},get pathToActiveWhen(){return pathToActiveWhen},get navigateToUrl(){return navigateToUrl},get patchHistoryApi(){return patchHistoryApi},get triggerAppChange(){return triggerAppChange},get addErrorHandler(){return addErrorHandler},get removeErrorHandler(){return removeErrorHandler},get mountRootParcel(){return mountRootParcel},get NOT_LOADED(){return NOT_LOADED},get LOADING_SOURCE_CODE(){return LOADING_SOURCE_CODE},get NOT_BOOTSTRAPPED(){return NOT_BOOTSTRAPPED},get BOOTSTRAPPING(){return BOOTSTRAPPING},get NOT_MOUNTED(){return NOT_MOUNTED},get MOUNTING(){return MOUNTING},get UPDATING(){return UPDATING},get LOAD_ERROR(){return LOAD_ERROR},get MOUNTED(){return MOUNTED},get UNMOUNTING(){return UNMOUNTING},get SKIP_BECAUSE_BROKEN(){return SKIP_BECAUSE_BROKEN}});function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _defineProperty(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},NativeCustomEvent=commonjsGlobal.CustomEvent;function useNative(){try{var t=new NativeCustomEvent("cat",{detail:{foo:"bar"}});return"cat"===t.type&&"bar"===t.detail.foo}catch(t){}return!1}var customEvent=useNative()?NativeCustomEvent:"undefined"!=typeof document&&"function"==typeof document.createEvent?function(t,e){var n=document.createEvent("CustomEvent");return e?n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail):n.initCustomEvent(t,!1,!1,void 0),n}:function(t,e){var n=document.createEventObject();return n.type=t,e?(n.bubbles=Boolean(e.bubbles),n.cancelable=Boolean(e.cancelable),n.detail=e.detail):(n.bubbles=!1,n.cancelable=!1,n.detail=void 0),n},errorHandlers=[];function handleAppError(t,e,n){var r=transformErr(t,e,n);errorHandlers.length?errorHandlers.forEach(function(t){return t(r)}):setTimeout(function(){throw r})}function addErrorHandler(t){if("function"!=typeof t)throw Error(formatErrorMessage(28,"a single-spa error handler must be a function"));errorHandlers.push(t)}function removeErrorHandler(e){if("function"!=typeof e)throw Error(formatErrorMessage(29,"a single-spa error handler must be a function"));var n=!1;return errorHandlers=errorHandlers.filter(function(t){t=t===e;return n=n||t,!t}),n}function formatErrorMessage(t,e){for(var n=arguments.length,r=new Array(2<n?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];return"single-spa minified message #".concat(t,": ").concat(e?e+" ":"","See https://single-spa.js.org/error/?code=").concat(t).concat(r.length?"&arg=".concat(r.join("&arg=")):"")}function transformErr(e,t,n){var r,o="".concat(objectType(t)," '").concat(toName(t),"' died in status ").concat(t.status,": ");if(e instanceof Error){try{e.message=o+e.message}catch(t){}r=e}else{console.warn(formatErrorMessage(30,"While ".concat(t.status,", '").concat(toName(t),"' rejected its lifecycle function promise with a non-Error. This will cause stack traces to not be accurate."),t.status,toName(t)));try{r=Error(o+JSON.stringify(e))}catch(t){r=e}}return r.appOrParcelName=toName(t),t.status=n,r}var NOT_LOADED="NOT_LOADED",LOADING_SOURCE_CODE="LOADING_SOURCE_CODE",NOT_BOOTSTRAPPED="NOT_BOOTSTRAPPED",BOOTSTRAPPING="BOOTSTRAPPING",NOT_MOUNTED="NOT_MOUNTED",MOUNTING="MOUNTING",MOUNTED="MOUNTED",UPDATING="UPDATING",UNMOUNTING="UNMOUNTING",UNLOADING="UNLOADING",LOAD_ERROR="LOAD_ERROR",SKIP_BECAUSE_BROKEN="SKIP_BECAUSE_BROKEN";function isActive(t){return t.status===MOUNTED}function shouldBeActive(e){try{return e.activeWhen(window.location)}catch(t){return handleAppError(t,e,SKIP_BECAUSE_BROKEN),!1}}function toName(t){return t.name}function isParcel(t){return Boolean(t.unmountThisParcel)}function objectType(t){return isParcel(t)?"parcel":"application"}function assign(){for(var t=arguments.length-1;0<t;t--)for(var e in arguments[t])"__proto__"!==e&&(arguments[t-1][e]=arguments[t][e]);return arguments[0]}function find(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return t[n];return null}function validLifecycleFn(t){return t&&("function"==typeof t||(e=t,Array.isArray(e)&&!find(e,function(t){return"function"!=typeof t})));var e}function flattenFnArray(t,o){var e=t[o]||[];0===(e=Array.isArray(e)?e:[e]).length&&(e=[function(){return Promise.resolve()}]);var a=objectType(t),i=toName(t);return function(r){return e.reduce(function(t,e,n){return t.then(function(){var t=e(r);return smellsLikeAPromise(t)?t:Promise.reject(formatErrorMessage(15,"Within ".concat(a," ").concat(i,", the lifecycle function ").concat(o," at array index ").concat(n," did not return a promise"),a,i,o,n))})},Promise.resolve())}}function smellsLikeAPromise(t){return t&&"function"==typeof t.then&&"function"==typeof t.catch}function toBootstrapPromise(e,n){return Promise.resolve().then(function(){return e.status!==NOT_BOOTSTRAPPED?e:(e.status=BOOTSTRAPPING,e.bootstrap?reasonableTime(e,"bootstrap").then(t).catch(function(t){if(n)throw transformErr(t,e,SKIP_BECAUSE_BROKEN);return handleAppError(t,e,SKIP_BECAUSE_BROKEN),e}):Promise.resolve().then(t))});function t(){return e.status=NOT_MOUNTED,e}}function toUnmountPromise(r,o){return Promise.resolve().then(function(){if(r.status!==MOUNTED)return r;r.status=UNMOUNTING;var t=Object.keys(r.parcels).map(function(t){return r.parcels[t].unmountThisParcel()});return Promise.all(t).then(n,function(e){return n().then(function(){var t=Error(e.message);if(o)throw transformErr(t,r,SKIP_BECAUSE_BROKEN);handleAppError(t,r,SKIP_BECAUSE_BROKEN)})}).then(function(){return r});function n(){return reasonableTime(r,"unmount").then(function(){r.status=NOT_MOUNTED}).catch(function(t){if(o)throw transformErr(t,r,SKIP_BECAUSE_BROKEN);handleAppError(t,r,SKIP_BECAUSE_BROKEN)})}})}var beforeFirstMountFired=!1,firstMountFired=!1;function toMountPromise(n,r){return Promise.resolve().then(function(){return n.status!==NOT_MOUNTED?n:(beforeFirstMountFired||(window.dispatchEvent(new customEvent("single-spa:before-first-mount")),beforeFirstMountFired=!0),n.status=MOUNTING,reasonableTime(n,"mount").then(function(){return n.status=MOUNTED,firstMountFired||(window.dispatchEvent(new customEvent("single-spa:first-mount")),firstMountFired=!0),n}).catch(function(t){return n.status=MOUNTED,toUnmountPromise(n,!0).then(e,e);function e(){if(r)throw transformErr(t,n,SKIP_BECAUSE_BROKEN);return handleAppError(t,n,SKIP_BECAUSE_BROKEN),n}}))})}function toUpdatePromise(e){return Promise.resolve().then(function(){if(e.status!==MOUNTED)throw Error(formatErrorMessage(32,"Cannot update parcel '".concat(toName(e),"' because it is not mounted"),toName(e)));return e.status=UPDATING,reasonableTime(e,"update").then(function(){return e.status=MOUNTED,e}).catch(function(t){throw transformErr(t,e,SKIP_BECAUSE_BROKEN)})})}var parcelCount=0,rootParcels={parcels:{}};function mountRootParcel(){return mountParcel.apply(rootParcels,arguments)}function mountParcel(t,e){var n=this;if(!t||"object"!==_typeof(t)&&"function"!=typeof t)throw Error(formatErrorMessage(2,"Cannot mount parcel without a config object or config loading function"));if(t.name&&"string"!=typeof t.name)throw Error(formatErrorMessage(3,"Parcel name must be a string, if provided. Was given ".concat(_typeof(t.name)),_typeof(t.name)));var o=parcelCount++,a=t.name||"parcel-".concat(o);if("object"!==_typeof(e))throw Error(formatErrorMessage(4,"Parcel ".concat(a," has invalid customProps -- must be an object but was given ").concat(_typeof(e)),a,_typeof(e)));if(!e.domElement)throw Error(formatErrorMessage(5,"Parcel ".concat(a," cannot be mounted without a domElement provided as a prop"),a));var r="function"==typeof t,i=r?t:function(){return Promise.resolve(t)},s={id:o,parcels:{},status:r?LOADING_SOURCE_CODE:NOT_BOOTSTRAPPED,customProps:e,parentName:toName(n),unmountThisParcel:function(){return p.then(function(){if(s.status!==MOUNTED)throw Error(formatErrorMessage(6,"Cannot unmount parcel '".concat(a,"' -- it is in a ").concat(s.status," status"),a,s.status));return toUnmountPromise(s,!0)}).then(function(t){return s.parentName&&delete n.parcels[s.id],t}).then(function(t){return u(t),t}).catch(function(t){throw s.status=SKIP_BECAUSE_BROKEN,c(t),t})}};n.parcels[o]=s;r=i();if(!r||"function"!=typeof r.then)throw Error(formatErrorMessage(7,"When mounting a parcel, the config loading function must return a promise that resolves with the parcel config"));var u,c,l,e=(r=r.then(function(t){if(!t)throw Error(formatErrorMessage(8,"When mounting a parcel, the config loading function returned a promise that did not resolve with a parcel config"));if(a=t.name||"parcel-".concat(o),Object.prototype.hasOwnProperty.call(t,"bootstrap")&&!validLifecycleFn(t.bootstrap))throw Error(formatErrorMessage(9,"Parcel ".concat(a," provided an invalid bootstrap function"),a));if(!validLifecycleFn(t.mount))throw Error(formatErrorMessage(10,"Parcel ".concat(a," must have a valid mount function"),a));if(!validLifecycleFn(t.unmount))throw Error(formatErrorMessage(11,"Parcel ".concat(a," must have a valid unmount function"),a));if(t.update&&!validLifecycleFn(t.update))throw Error(formatErrorMessage(12,"Parcel ".concat(a," provided an invalid update function"),a));var e=flattenFnArray(t,"bootstrap"),n=flattenFnArray(t,"mount"),r=flattenFnArray(t,"unmount");s.status=NOT_BOOTSTRAPPED,s.name=a,s.bootstrap=e,s.mount=n,s.unmount=r,s.timeouts=ensureValidAppTimeouts(t.timeouts),t.update&&(s.update=flattenFnArray(t,"update"),l.update=function(t){return s.customProps=t,promiseWithoutReturnValue(toUpdatePromise(s))})})).then(function(){return toBootstrapPromise(s,!0)}),p=e.then(function(){return toMountPromise(s,!0)}),i=new Promise(function(t,e){u=t,c=e});return l={mount:function(){return promiseWithoutReturnValue(Promise.resolve().then(function(){if(s.status!==NOT_MOUNTED)throw Error(formatErrorMessage(13,"Cannot mount parcel '".concat(a,"' -- it is in a ").concat(s.status," status"),a,s.status));return toMountPromise(n.parcels[o]=s)}))},unmount:function(){return promiseWithoutReturnValue(s.unmountThisParcel())},getStatus:function(){return s.status},loadPromise:promiseWithoutReturnValue(r),bootstrapPromise:promiseWithoutReturnValue(e),mountPromise:promiseWithoutReturnValue(p),unmountPromise:promiseWithoutReturnValue(i)}}function promiseWithoutReturnValue(t){return t.then(function(){return null})}function getProps(t){var e=toName(t),n="function"==typeof t.customProps?t.customProps(e,window.location):t.customProps;"object"===_typeof(n)&&null!==n&&!Array.isArray(n)||(n={},console.warn(formatErrorMessage(40,"single-spa: ".concat(e,"'s customProps function must return an object. Received ").concat(n)),e,n));e=assign({},n,{name:e,mountParcel:mountParcel.bind(t),singleSpa:singleSpa});return isParcel(t)&&(e.unmountSelf=t.unmountThisParcel),e}var defaultWarningMillis=1e3,globalTimeoutConfig={bootstrap:{millis:4e3,dieOnTimeout:!1,warningMillis:defaultWarningMillis},mount:{millis:3e3,dieOnTimeout:!1,warningMillis:defaultWarningMillis},unmount:{millis:3e3,dieOnTimeout:!1,warningMillis:defaultWarningMillis},unload:{millis:3e3,dieOnTimeout:!1,warningMillis:defaultWarningMillis},update:{millis:3e3,dieOnTimeout:!1,warningMillis:defaultWarningMillis}};function setBootstrapMaxTime(t,e,n){if("number"!=typeof t||t<=0)throw Error(formatErrorMessage(16,"bootstrap max time must be a positive integer number of milliseconds"));globalTimeoutConfig.bootstrap={millis:t,dieOnTimeout:e,warningMillis:n||defaultWarningMillis}}function setMountMaxTime(t,e,n){if("number"!=typeof t||t<=0)throw Error(formatErrorMessage(17,"mount max time must be a positive integer number of milliseconds"));globalTimeoutConfig.mount={millis:t,dieOnTimeout:e,warningMillis:n||defaultWarningMillis}}function setUnmountMaxTime(t,e,n){if("number"!=typeof t||t<=0)throw Error(formatErrorMessage(18,"unmount max time must be a positive integer number of milliseconds"));globalTimeoutConfig.unmount={millis:t,dieOnTimeout:e,warningMillis:n||defaultWarningMillis}}function setUnloadMaxTime(t,e,n){if("number"!=typeof t||t<=0)throw Error(formatErrorMessage(19,"unload max time must be a positive integer number of milliseconds"));globalTimeoutConfig.unload={millis:t,dieOnTimeout:e,warningMillis:n||defaultWarningMillis}}function reasonableTime(t,s){var u=t.timeouts[s],c=u.warningMillis,l=objectType(t);return new Promise(function(e,n){var r=!1,o=!1;t[s](getProps(t)).then(function(t){r=!0,e(t)}).catch(function(t){r=!0,n(t)}),setTimeout(function(){return i(1)},c),setTimeout(function(){return i(!0)},u.millis);var a=formatErrorMessage(31,"Lifecycle function ".concat(s," for ").concat(l," ").concat(toName(t)," lifecycle did not resolve or reject for ").concat(u.millis," ms."),s,l,toName(t),u.millis);function i(t){var e;r||(!0===t?(o=!0,u.dieOnTimeout?n(Error(a)):console.error(a)):o||(t=(e=t)*c,console.warn(a),t+c<u.millis&&setTimeout(function(){return i(e+1)},c)))}})}function ensureValidAppTimeouts(t){var e,n={};for(e in globalTimeoutConfig)n[e]=assign({},globalTimeoutConfig[e],t&&t[e]||{});return n}function toLoadPromise(a){return Promise.resolve().then(function(){return a.loadPromise||(a.status!==NOT_LOADED&&a.status!==LOAD_ERROR?a:(a.status=LOADING_SOURCE_CODE,a.loadPromise=Promise.resolve().then(function(){var t=a.loadApp(getProps(a));if(!smellsLikeAPromise(t))throw n=!0,Error(formatErrorMessage(33,"single-spa loading function did not return a promise. Check the second argument to registerApplication('".concat(toName(a),"', loadingFunction, activityFunction)"),toName(a)));return t.then(function(t){var e,n;a.loadErrorTime=null,"object"!==_typeof(o=t)&&(n=34,e="does not export anything"),Object.prototype.hasOwnProperty.call(o,"bootstrap")&&!validLifecycleFn(o.bootstrap)&&(n=35,e="does not export a valid bootstrap function or array of functions"),validLifecycleFn(o.mount)||(n=36,e="does not export a mount function or array of functions"),validLifecycleFn(o.unmount)||(n=37,e="does not export a unmount function or array of functions");var r,t=objectType(o);if(n){try{r=JSON.stringify(o)}catch(t){}return console.error(formatErrorMessage(n,"The loading function for single-spa ".concat(t," '").concat(toName(a),"' resolved with the following, which does not have bootstrap, mount, and unmount functions"),t,toName(a),r),o),handleAppError(e,a,SKIP_BECAUSE_BROKEN),a}return o.devtools&&o.devtools.overlays&&(a.devtools.overlays=assign({},a.devtools.overlays,o.devtools.overlays)),a.status=NOT_BOOTSTRAPPED,a.bootstrap=flattenFnArray(o,"bootstrap"),a.mount=flattenFnArray(o,"mount"),a.unmount=flattenFnArray(o,"unmount"),a.unload=flattenFnArray(o,"unload"),a.timeouts=ensureValidAppTimeouts(o.timeouts),delete a.loadPromise,a})}).catch(function(t){var e;return delete a.loadPromise,n?e=SKIP_BECAUSE_BROKEN:(e=LOAD_ERROR,a.loadErrorTime=(new Date).getTime()),handleAppError(t,a,e),a})));var o,n})}var urlRerouteOnly,isInBrowser="undefined"!=typeof window,capturedEventListeners={hashchange:[],popstate:[]},routingEventsListeningTo=["hashchange","popstate"];function navigateToUrl(t){var e;if("string"==typeof t)e=t;else if(this&&this.href)e=this.href;else{if(!(t&&t.currentTarget&&t.currentTarget.href&&t.preventDefault))throw Error(formatErrorMessage(14,"singleSpaNavigate/navigateToUrl must be either called with a string url, with an <a> tag as its context, or with an event whose currentTarget is an <a> tag"));e=t.currentTarget.href,t.preventDefault()}var n=parseUri(window.location.href),t=parseUri(e);0===e.indexOf("#")?window.location.hash=t.hash:n.host!==t.host&&t.host?window.location.href=e:t.pathname===n.pathname&&t.search===n.search?window.location.hash=t.hash:window.history.pushState(null,null,e)}function callCapturedEventListeners(e){var t,n=this;e&&(t=e[0].type,0<=routingEventsListeningTo.indexOf(t)&&capturedEventListeners[t].forEach(function(t){try{t.apply(n,e)}catch(t){setTimeout(function(){throw t})}}))}function urlReroute(){reroute([],arguments)}function patchedUpdateState(r,o){return function(){var t=window.location.href,e=r.apply(this,arguments),n=window.location.href;return urlRerouteOnly&&t===n||window.dispatchEvent(createPopStateEvent(window.history.state,o)),e}}function createPopStateEvent(e,t){var n;try{n=new PopStateEvent("popstate",{state:e})}catch(t){(n=document.createEvent("PopStateEvent")).initPopStateEvent("popstate",!1,!1,e)}return n.singleSpa=!0,n.singleSpaTrigger=t,n}var originalReplaceState=null,historyApiIsPatched=!1;function patchHistoryApi(t){if(historyApiIsPatched)throw Error(formatErrorMessage(43,"single-spa: patchHistoryApi() was called after the history api was already patched."));urlRerouteOnly=!t||!t.hasOwnProperty("urlRerouteOnly")||t.urlRerouteOnly,historyApiIsPatched=!0,originalReplaceState=window.history.replaceState,window.addEventListener("hashchange",urlReroute),window.addEventListener("popstate",urlReroute);var n=window.addEventListener,r=window.removeEventListener;window.addEventListener=function(t,e){if(!("function"==typeof e&&0<=routingEventsListeningTo.indexOf(t))||find(capturedEventListeners[t],function(t){return t===e}))return n.apply(this,arguments);capturedEventListeners[t].push(e)},window.removeEventListener=function(t,e){if(!("function"==typeof e&&0<=routingEventsListeningTo.indexOf(t)))return r.apply(this,arguments);capturedEventListeners[t]=capturedEventListeners[t].filter(function(t){return t!==e})},window.history.pushState=patchedUpdateState(window.history.pushState,"pushState"),window.history.replaceState=patchedUpdateState(originalReplaceState,"replaceState")}function parseUri(t){var e=document.createElement("a");return e.href=t,e}isInBrowser&&(window.singleSpaNavigate?console.warn(formatErrorMessage(41,"single-spa has been loaded twice on the page. This can result in unexpected behavior.")):window.singleSpaNavigate=navigateToUrl);var hasInitialized=!1;function ensureJQuerySupport(){var n,r,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:window.jQuery;t||window.$&&window.$.fn&&window.$.fn.jquery&&(t=window.$),t&&!hasInitialized&&(n=t.fn.on,r=t.fn.off,t.fn.on=function(t,e){return captureRoutingEvents.call(this,n,window.addEventListener,t,e,arguments)},t.fn.off=function(t,e){return captureRoutingEvents.call(this,r,window.removeEventListener,t,e,arguments)},hasInitialized=!0)}function captureRoutingEvents(t,e,n,r,o){return"string"!=typeof n?t.apply(this,o):(n.split(/\s+/).forEach(function(t){0<=routingEventsListeningTo.indexOf(t)&&(e(t,r),n=n.replace(t,""))}),""===n.trim()?this:t.apply(this,o))}var appsToUnload={};function toUnloadPromise(n){return Promise.resolve().then(function(){var e=appsToUnload[toName(n)];if(!e)return n;if(n.status===NOT_LOADED)return finishUnloadingApp(n,e),n;if(n.status===UNLOADING)return e.promise.then(function(){return n});if(n.status!==NOT_MOUNTED&&n.status!==LOAD_ERROR)return n;var t=n.status===LOAD_ERROR?Promise.resolve():reasonableTime(n,"unload");return n.status=UNLOADING,t.then(function(){return finishUnloadingApp(n,e),n}).catch(function(t){return errorUnloadingApp(n,e,t),n})})}function finishUnloadingApp(t,e){delete appsToUnload[toName(t)],delete t.bootstrap,delete t.mount,delete t.unmount,delete t.unload,t.status=NOT_LOADED,e.resolve()}function errorUnloadingApp(t,e,n){delete appsToUnload[toName(t)],delete t.bootstrap,delete t.mount,delete t.unmount,delete t.unload,handleAppError(n,t,SKIP_BECAUSE_BROKEN),e.reject(n)}function addAppToUnload(t,e,n,r){appsToUnload[toName(t)]={app:t,resolve:n,reject:r},Object.defineProperty(appsToUnload[toName(t)],"promise",{get:e})}function getAppUnloadInfo(t){return appsToUnload[t]}var apps=[];function getAppChanges(){var n=[],r=[],o=[],a=[],i=(new Date).getTime();return apps.forEach(function(t){var e=t.status!==SKIP_BECAUSE_BROKEN&&shouldBeActive(t);switch(t.status){case LOAD_ERROR:e&&200<=i-t.loadErrorTime&&o.push(t);break;case NOT_LOADED:case LOADING_SOURCE_CODE:e&&o.push(t);break;case NOT_BOOTSTRAPPED:case NOT_MOUNTED:!e&&getAppUnloadInfo(toName(t))?n.push(t):e&&a.push(t);break;case MOUNTED:e||r.push(t)}}),{appsToUnload:n,appsToUnmount:r,appsToLoad:o,appsToMount:a}}function getMountedApps(){return apps.filter(isActive).map(toName)}function getAppNames(){return apps.map(toName)}function getRawAppData(){return[].concat(apps)}function getAppStatus(e){var t=find(apps,function(t){return toName(t)===e});return t?t.status:null}var startWarningInitialized=!1;function registerApplication(t,e,n,r){r=sanitizeArguments(t,e,n,r);if(isStarted()||startWarningInitialized||(startWarningInitialized=!0,setTimeout(function(){isStarted()||console.warn(formatErrorMessage(1,"singleSpa.start() has not been called, 5000ms after single-spa was loaded. Before start() is called, apps can be declared and loaded, but not bootstrapped or mounted."))},5e3)),-1!==getAppNames().indexOf(r.name))throw Error(formatErrorMessage(21,"There is already an app registered with name ".concat(r.name),r.name));apps.push(assign({loadErrorTime:null,status:NOT_LOADED,parcels:{},devtools:{overlays:{options:{},selectors:[]}}},r)),isInBrowser&&(ensureJQuerySupport(),reroute())}function checkActivityFunctions(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:window.location;return apps.filter(function(t){return t.activeWhen(e)}).map(toName)}function unregisterApplication(e){if(0===apps.filter(function(t){return toName(t)===e}).length)throw Error(formatErrorMessage(25,"Cannot unregister application '".concat(e,"' because no such application has been registered"),e));return unloadApplication(e).then(function(){var t=apps.map(toName).indexOf(e);apps.splice(t,1)})}function unloadApplication(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{waitForUnmount:!1};if("string"!=typeof e)throw Error(formatErrorMessage(26,"unloadApplication requires a string 'appName'"));var n=find(apps,function(t){return toName(t)===e});if(!n)throw Error(formatErrorMessage(27,"Could not unload application '".concat(e,"' because no such application has been registered"),e));var r,o=getAppUnloadInfo(toName(n));if(t&&t.waitForUnmount){if(o)return o.promise;var a=new Promise(function(t,e){addAppToUnload(n,function(){return a},t,e)});return a}return o?(r=o.promise,immediatelyUnloadApp(n,o.resolve,o.reject)):r=new Promise(function(t,e){addAppToUnload(n,function(){return r},t,e),immediatelyUnloadApp(n,t,e)}),r}function immediatelyUnloadApp(t,e,n){toUnmountPromise(t).then(toUnloadPromise).then(function(){e(),setTimeout(function(){reroute()})}).catch(n)}function validateRegisterWithArguments(t,e,n,r){if("string"!=typeof t||0===t.length)throw Error(formatErrorMessage(20,"The 1st argument to registerApplication must be a non-empty string 'appName'"));if(!e)throw Error(formatErrorMessage(23,"The 2nd argument to registerApplication must be an application or loading application function"));if("function"!=typeof n)throw Error(formatErrorMessage(24,"The 3rd argument to registerApplication must be an activeWhen function"));if(!validCustomProps(r))throw Error(formatErrorMessage(22,"The optional 4th argument is a customProps and must be an object"))}function validateRegisterWithConfig(t){if(Array.isArray(t)||null===t)throw Error(formatErrorMessage(39,"Configuration object can't be an Array or null!"));var n=["name","app","activeWhen","customProps"],e=Object.keys(t).reduce(function(t,e){return 0<=n.indexOf(e)?t:t.concat(e)},[]);if(0!==e.length)throw Error(formatErrorMessage(38,"The configuration object accepts only: ".concat(n.join(", "),". Invalid keys: ").concat(e.join(", "),"."),n.join(", "),e.join(", ")));if("string"!=typeof t.name||0===t.name.length)throw Error(formatErrorMessage(20,"The config.name on registerApplication must be a non-empty string"));if("object"!==_typeof(t.app)&&"function"!=typeof t.app)throw Error(formatErrorMessage(20,"The config.app on registerApplication must be an application or a loading function"));e=function(t){return"string"==typeof t||"function"==typeof t};if(!(e(t.activeWhen)||Array.isArray(t.activeWhen)&&t.activeWhen.every(e)))throw Error(formatErrorMessage(24,"The config.activeWhen on registerApplication must be a string, function or an array with both"));if(!validCustomProps(t.customProps))throw Error(formatErrorMessage(22,"The optional config.customProps must be an object"))}function validCustomProps(t){return!t||"function"==typeof t||"object"===_typeof(t)&&null!==t&&!Array.isArray(t)}function sanitizeArguments(t,e,n,r){var o={name:null,loadApp:null,activeWhen:null,customProps:null};return"object"===_typeof(t)?(validateRegisterWithConfig(t),o.name=t.name,o.loadApp=t.app,o.activeWhen=t.activeWhen,o.customProps=t.customProps):(validateRegisterWithArguments(t,e,n,r),o.name=t,o.loadApp=e,o.activeWhen=n,o.customProps=r),o.loadApp=sanitizeLoadApp(o.loadApp),o.customProps=sanitizeCustomProps(o.customProps),o.activeWhen=sanitizeActiveWhen(o.activeWhen),o}function sanitizeLoadApp(t){return"function"!=typeof t?function(){return Promise.resolve(t)}:t}function sanitizeCustomProps(t){return t||{}}function sanitizeActiveWhen(t){var n=(n=Array.isArray(t)?t:[t]).map(function(t){return"function"==typeof t?t:pathToActiveWhen(t)});return function(e){return n.some(function(t){return t(e)})}}function pathToActiveWhen(t,e){var n=toDynamicPathValidatorRegex(t,e);return function(t){var e=(e=t.origin)||"".concat(t.protocol,"//").concat(t.host),t=t.href.replace(e,"").replace(t.search,"").split("?")[0];return n.test(t)}}function toDynamicPathValidatorRegex(n,r){var o=0,a=!1,i="^";"/"!==n[0]&&(n="/"+n);for(var t=0;t<n.length;t++){var e=n[t];(!a&&":"===e||a&&"/"===e)&&s(t)}return s(n.length),new RegExp(i,"i");function s(t){var e=n.slice(o,t).replace(/[|\\{}()[\]^$+*?.]/g,"\\$&");i+=a?"[^/]+/?":e,t===n.length&&(a?r&&(i+="$"):(e=r?"":".*",i="/"===i.charAt(i.length-1)?"".concat(i).concat(e,"$"):"".concat(i,"(/").concat(e,")?(#.*)?$"))),a=!a,o=t}}var appChangeUnderway=!1,peopleWaitingOnAppChange=[],currentUrl=isInBrowser&&window.location.href;function triggerAppChange(){return reroute()}function reroute(){var o=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],u=1<arguments.length?arguments[1]:void 0,n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];if(appChangeUnderway)return new Promise(function(t,e){peopleWaitingOnAppChange.push({resolve:t,reject:e,eventArguments:u})});var c,t=getAppChanges(),l=t.appsToUnload,p=t.appsToUnmount,f=t.appsToLoad,m=t.appsToMount,e=[],d=currentUrl,h=currentUrl=window.location.href;return isStarted()?(appChangeUnderway=!0,c=l.concat(f,p,m),Promise.resolve().then(function(){return g(0===c.length?"before-no-app-change":"before-app-change",s(!0)),g("before-routing-event",s(!0,{cancelNavigation:r})),Promise.all(e).then(function(t){if(t.some(function(t){return t}))return originalReplaceState.call(window.history,history.state,"",d.substring(location.origin.length)),currentUrl=location.href,reroute(o,u,!(appChangeUnderway=!1));var t=l.map(toUnloadPromise),t=p.map(toUnmountPromise).map(function(t){return t.then(toUnloadPromise)}).concat(t),e=Promise.all(t);e.then(function(){g("before-mount-routing-event",s(!0))});var n=f.map(function(t){return toLoadPromise(t).then(function(t){return tryToBootstrapAndMount(t,e)})}),r=m.filter(function(t){return f.indexOf(t)<0}).map(function(t){return tryToBootstrapAndMount(t,e)});return e.catch(function(t){throw i(),t}).then(function(){return i(),Promise.all(n.concat(r)).catch(function(e){throw o.forEach(function(t){return t.reject(e)}),e}).then(a)})})})):(c=f,Promise.resolve().then(function(){var t=f.map(toLoadPromise);return Promise.all(t).then(i).then(function(){return[]}).catch(function(t){throw i(),t})}));function r(){var t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],t="function"==typeof(null==t?void 0:t.then)?t:Promise.resolve(t);e.push(t.catch(function(t){return console.warn(Error(formatErrorMessage(42,"single-spa: A cancelNavigation promise rejected with the following value: ".concat(t)))),console.warn(t),!1}))}function a(){var t,e=getMountedApps();o.forEach(function(t){return t.resolve(e)});try{g(0===c.length?"no-app-change":"app-change",s()),g("routing-event",s())}catch(t){setTimeout(function(){throw t})}return appChangeUnderway=!1,0<peopleWaitingOnAppChange.length&&(t=peopleWaitingOnAppChange,peopleWaitingOnAppChange=[],reroute(t)),e}function i(){n||(o.forEach(function(t){callCapturedEventListeners(t.eventArguments)}),callCapturedEventListeners(u))}function s(t,e){var n,r=0<arguments.length&&void 0!==t&&t,o=1<arguments.length?e:void 0,a={},i=(_defineProperty(n={},MOUNTED,[]),_defineProperty(n,NOT_MOUNTED,[]),_defineProperty(n,NOT_LOADED,[]),_defineProperty(n,SKIP_BECAUSE_BROKEN,[]),n);r?(f.concat(m).forEach(function(t,e){s(t,MOUNTED)}),l.forEach(function(t){s(t,NOT_LOADED)}),p.forEach(function(t){s(t,NOT_MOUNTED)})):c.forEach(function(t){s(t)});r={detail:{newAppStatuses:a,appsByNewStatus:i,totalAppChanges:c.length,originalEvent:null==u?void 0:u[0],oldUrl:d,newUrl:h}};return o&&assign(r.detail,o),r;function s(t,e){t=toName(t);e=e||getAppStatus(t),a[t]=e,(i[e]=i[e]||[]).push(t)}}function g(t,e){n||window.dispatchEvent(new customEvent("single-spa:".concat(t),e))}}function tryToBootstrapAndMount(t,e){return shouldBeActive(t)?toBootstrapPromise(t).then(function(t){return e.then(function(){return shouldBeActive(t)?toMountPromise(t):t})}):e.then(function(){return t})}var started=!1;function start(t){started=!0,isInBrowser&&(patchHistoryApi(t),reroute())}function isStarted(){return started}var devtools={getRawAppData:getRawAppData,reroute:reroute,NOT_LOADED:NOT_LOADED,toLoadPromise:toLoadPromise,toBootstrapPromise:toBootstrapPromise,unregisterApplication:unregisterApplication};isInBrowser&&window.__SINGLE_SPA_DEVTOOLS__&&(window.__SINGLE_SPA_DEVTOOLS__.exposedMethods=devtools);export{BOOTSTRAPPING,LOADING_SOURCE_CODE,LOAD_ERROR,MOUNTED,MOUNTING,NOT_BOOTSTRAPPED,NOT_LOADED,NOT_MOUNTED,SKIP_BECAUSE_BROKEN,UNMOUNTING,UPDATING,addErrorHandler,checkActivityFunctions,ensureJQuerySupport,getAppNames,getAppStatus,getMountedApps,mountRootParcel,navigateToUrl,patchHistoryApi,pathToActiveWhen,registerApplication,removeErrorHandler,setBootstrapMaxTime,setMountMaxTime,setUnloadMaxTime,setUnmountMaxTime,start,triggerAppChange,unloadApplication,unregisterApplication};