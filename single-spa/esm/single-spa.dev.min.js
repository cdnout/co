var singleSpa=Object.freeze({__proto__:null,get start(){return start},get ensureJQuerySupport(){return ensureJQuerySupport},get setBootstrapMaxTime(){return setBootstrapMaxTime},get setMountMaxTime(){return setMountMaxTime},get setUnmountMaxTime(){return setUnmountMaxTime},get setUnloadMaxTime(){return setUnloadMaxTime},get registerApplication(){return registerApplication},get unregisterApplication(){return unregisterApplication},get getMountedApps(){return getMountedApps},get getAppStatus(){return getAppStatus},get unloadApplication(){return unloadApplication},get checkActivityFunctions(){return checkActivityFunctions},get getAppNames(){return getAppNames},get pathToActiveWhen(){return pathToActiveWhen},get navigateToUrl(){return navigateToUrl},get triggerAppChange(){return triggerAppChange},get addErrorHandler(){return addErrorHandler},get removeErrorHandler(){return removeErrorHandler},get mountRootParcel(){return mountRootParcel},get NOT_LOADED(){return NOT_LOADED},get LOADING_SOURCE_CODE(){return LOADING_SOURCE_CODE},get NOT_BOOTSTRAPPED(){return NOT_BOOTSTRAPPED},get BOOTSTRAPPING(){return BOOTSTRAPPING},get NOT_MOUNTED(){return NOT_MOUNTED},get MOUNTING(){return MOUNTING},get UPDATING(){return UPDATING},get LOAD_ERROR(){return LOAD_ERROR},get MOUNTED(){return MOUNTED},get UNMOUNTING(){return UNMOUNTING},get SKIP_BECAUSE_BROKEN(){return SKIP_BECAUSE_BROKEN}});function _typeof(t){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _defineProperty(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},NativeCustomEvent=commonjsGlobal.CustomEvent;function useNative(){try{var t=new NativeCustomEvent("cat",{detail:{foo:"bar"}});return"cat"===t.type&&"bar"===t.detail.foo}catch(t){}return!1}var customEvent=useNative()?NativeCustomEvent:"undefined"!=typeof document&&"function"==typeof document.createEvent?function(t,e){var n=document.createEvent("CustomEvent");return e?n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail):n.initCustomEvent(t,!1,!1,void 0),n}:function(t,e){var n=document.createEventObject();return n.type=t,e?(n.bubbles=Boolean(e.bubbles),n.cancelable=Boolean(e.cancelable),n.detail=e.detail):(n.bubbles=!1,n.cancelable=!1,n.detail=void 0),n},errorHandlers=[];function handleAppError(t,e,n){var r=transformErr(t,e,n);errorHandlers.length?errorHandlers.forEach(function(t){return t(r)}):setTimeout(function(){throw r})}function addErrorHandler(t){if("function"!=typeof t)throw Error(formatErrorMessage(28,"a single-spa error handler must be a function"));errorHandlers.push(t)}function removeErrorHandler(t){if("function"!=typeof t)throw Error(formatErrorMessage(29,"a single-spa error handler must be a function"));var e=!1;return errorHandlers=errorHandlers.filter(function(n){var r=n===t;return e=e||r,!r}),e}function formatErrorMessage(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];return"single-spa minified message #".concat(t,": ").concat(e?e+" ":"","See https://single-spa.js.org/error/?code=").concat(t).concat(r.length?"&arg=".concat(r.join("&arg=")):"")}function transformErr(t,e,n){var r,o="".concat(objectType(e)," '").concat(toName(e),"' died in status ").concat(e.status,": ");if(t instanceof Error){try{t.message=o+t.message}catch(t){}r=t}else{console.warn(formatErrorMessage(30,"While ".concat(e.status,", '").concat(toName(e),"' rejected its lifecycle function promise with a non-Error. This will cause stack traces to not be accurate."),e.status,toName(e)));try{r=Error(o+JSON.stringify(t))}catch(e){r=t}}return r.appOrParcelName=toName(e),e.status=n,r}var NOT_LOADED="NOT_LOADED",LOADING_SOURCE_CODE="LOADING_SOURCE_CODE",NOT_BOOTSTRAPPED="NOT_BOOTSTRAPPED",BOOTSTRAPPING="BOOTSTRAPPING",NOT_MOUNTED="NOT_MOUNTED",MOUNTING="MOUNTING",MOUNTED="MOUNTED",UPDATING="UPDATING",UNMOUNTING="UNMOUNTING",UNLOADING="UNLOADING",LOAD_ERROR="LOAD_ERROR",SKIP_BECAUSE_BROKEN="SKIP_BECAUSE_BROKEN";function isActive(t){return t.status===MOUNTED}function shouldBeActive(t){try{return t.activeWhen(window.location)}catch(e){return handleAppError(e,t,SKIP_BECAUSE_BROKEN),!1}}function toName(t){return t.name}function isParcel(t){return Boolean(t.unmountThisParcel)}function objectType(t){return isParcel(t)?"parcel":"application"}function assign(){for(var t=arguments.length-1;t>0;t--)for(var e in arguments[t])"__proto__"!==e&&(arguments[t-1][e]=arguments[t][e]);return arguments[0]}function find(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return t[n];return null}function validLifecycleFn(t){return t&&("function"==typeof t||(e=t,Array.isArray(e)&&!find(e,function(t){return"function"!=typeof t})));var e}function flattenFnArray(t,e){var n=t[e]||[];0===(n=Array.isArray(n)?n:[n]).length&&(n=[function(){return Promise.resolve()}]);var r=objectType(t),o=toName(t);return function(t){return n.reduce(function(n,a,i){return n.then(function(){var n=a(t);return smellsLikeAPromise(n)?n:Promise.reject(formatErrorMessage(15,"Within ".concat(r," ").concat(o,", the lifecycle function ").concat(e," at array index ").concat(i," did not return a promise"),r,o,e,i))})},Promise.resolve())}}function smellsLikeAPromise(t){return t&&"function"==typeof t.then&&"function"==typeof t.catch}function toBootstrapPromise(t,e){return Promise.resolve().then(function(){return t.status!==NOT_BOOTSTRAPPED?t:(t.status=BOOTSTRAPPING,t.bootstrap?reasonableTime(t,"bootstrap").then(n).catch(function(n){if(e)throw transformErr(n,t,SKIP_BECAUSE_BROKEN);return handleAppError(n,t,SKIP_BECAUSE_BROKEN),t}):Promise.resolve().then(n))});function n(){return t.status=NOT_MOUNTED,t}}function toUnmountPromise(t,e){return Promise.resolve().then(function(){if(t.status!==MOUNTED)return t;t.status=UNMOUNTING;var n=Object.keys(t.parcels).map(function(e){return t.parcels[e].unmountThisParcel()});return Promise.all(n).then(r,function(n){return r().then(function(){var r=Error(n.message);if(e)throw transformErr(r,t,SKIP_BECAUSE_BROKEN);handleAppError(r,t,SKIP_BECAUSE_BROKEN)})}).then(function(){return t});function r(){return reasonableTime(t,"unmount").then(function(){t.status=NOT_MOUNTED}).catch(function(n){if(e)throw transformErr(n,t,SKIP_BECAUSE_BROKEN);handleAppError(n,t,SKIP_BECAUSE_BROKEN)})}})}var beforeFirstMountFired=!1,firstMountFired=!1;function toMountPromise(t,e){return Promise.resolve().then(function(){return t.status!==NOT_MOUNTED?t:(beforeFirstMountFired||(window.dispatchEvent(new customEvent("single-spa:before-first-mount")),beforeFirstMountFired=!0),reasonableTime(t,"mount").then(function(){return t.status=MOUNTED,firstMountFired||(window.dispatchEvent(new customEvent("single-spa:first-mount")),firstMountFired=!0),t}).catch(function(n){return t.status=MOUNTED,toUnmountPromise(t,!0).then(r,r);function r(){if(e)throw transformErr(n,t,SKIP_BECAUSE_BROKEN);return handleAppError(n,t,SKIP_BECAUSE_BROKEN),t}}))})}function toUpdatePromise(t){return Promise.resolve().then(function(){if(t.status!==MOUNTED)throw Error(formatErrorMessage(32,"Cannot update parcel '".concat(toName(t),"' because it is not mounted"),toName(t)));return t.status=UPDATING,reasonableTime(t,"update").then(function(){return t.status=MOUNTED,t}).catch(function(e){throw transformErr(e,t,SKIP_BECAUSE_BROKEN)})})}var parcelCount=0,rootParcels={parcels:{}};function mountRootParcel(){return mountParcel.apply(rootParcels,arguments)}function mountParcel(t,e){var n=this;if(!t||"object"!==_typeof(t)&&"function"!=typeof t)throw Error(formatErrorMessage(2,"Cannot mount parcel without a config object or config loading function"));if(t.name&&"string"!=typeof t.name)throw Error(formatErrorMessage(3,"Parcel name must be a string, if provided. Was given ".concat(_typeof(t.name)),_typeof(t.name)));if("object"!==_typeof(e))throw Error(formatErrorMessage(4,"Parcel ".concat(name," has invalid customProps -- must be an object but was given ").concat(_typeof(e)),name,_typeof(e)));if(!e.domElement)throw Error(formatErrorMessage(5,"Parcel ".concat(name," cannot be mounted without a domElement provided as a prop"),name));var r,o=parcelCount++,a="function"==typeof t,i=a?t:function(){return Promise.resolve(t)},s={id:o,parcels:{},status:a?LOADING_SOURCE_CODE:NOT_BOOTSTRAPPED,customProps:e,parentName:toName(n),unmountThisParcel:function(){return f.then(function(){if(s.status!==MOUNTED)throw Error(formatErrorMessage(6,"Cannot unmount parcel '".concat(name,"' -- it is in a ").concat(s.status," status"),name,s.status));return toUnmountPromise(s,!0)}).then(function(t){return s.parentName&&delete n.parcels[s.id],t}).then(function(t){return c(t),t}).catch(function(t){throw s.status=SKIP_BECAUSE_BROKEN,l(t),t})}};n.parcels[o]=s;var u=i();if(!u||"function"!=typeof u.then)throw Error(formatErrorMessage(7,"When mounting a parcel, the config loading function must return a promise that resolves with the parcel config"));var c,l,p=(u=u.then(function(t){if(!t)throw Error(formatErrorMessage(8,"When mounting a parcel, the config loading function returned a promise that did not resolve with a parcel config"));var e=t.name||"parcel-".concat(o);if(Object.prototype.hasOwnProperty.call(t,"bootstrap")&&!validLifecycleFn(t.bootstrap))throw Error(formatErrorMessage(9,"Parcel ".concat(e," provided an invalid bootstrap function"),e));if(!validLifecycleFn(t.mount))throw Error(formatErrorMessage(10,"Parcel ".concat(e," must have a valid mount function"),e));if(!validLifecycleFn(t.unmount))throw Error(formatErrorMessage(11,"Parcel ".concat(e," must have a valid unmount function"),e));if(t.update&&!validLifecycleFn(t.update))throw Error(formatErrorMessage(12,"Parcel ".concat(e," provided an invalid update function"),e));var n=flattenFnArray(t,"bootstrap"),a=flattenFnArray(t,"mount"),i=flattenFnArray(t,"unmount");s.status=NOT_BOOTSTRAPPED,s.name=e,s.bootstrap=n,s.mount=a,s.unmount=i,s.timeouts=ensureValidAppTimeouts(t.timeouts),t.update&&(s.update=flattenFnArray(t,"update"),r.update=function(t){return s.customProps=t,promiseWithoutReturnValue(toUpdatePromise(s))})})).then(function(){return toBootstrapPromise(s,!0)}),f=p.then(function(){return toMountPromise(s,!0)}),m=new Promise(function(t,e){c=t,l=e});return r={mount:function(){return promiseWithoutReturnValue(Promise.resolve().then(function(){if(s.status!==NOT_MOUNTED)throw Error(formatErrorMessage(13,"Cannot mount parcel '".concat(name,"' -- it is in a ").concat(s.status," status"),name,s.status));return n.parcels[o]=s,toMountPromise(s)}))},unmount:function(){return promiseWithoutReturnValue(s.unmountThisParcel())},getStatus:function(){return s.status},loadPromise:promiseWithoutReturnValue(u),bootstrapPromise:promiseWithoutReturnValue(p),mountPromise:promiseWithoutReturnValue(f),unmountPromise:promiseWithoutReturnValue(m)}}function promiseWithoutReturnValue(t){return t.then(function(){return null})}function getProps(t){var e=toName(t),n="function"==typeof t.customProps?t.customProps(e,window.location):t.customProps;("object"!==_typeof(n)||null===n||Array.isArray(n))&&(n={},console.warn(formatErrorMessage(40,"single-spa: ".concat(e,"'s customProps function must return an object. Received ").concat(n)),e,n));var r=assign({},n,{name:e,mountParcel:mountParcel.bind(t),singleSpa:singleSpa});return isParcel(t)&&(r.unmountSelf=t.unmountThisParcel),r}var defaultWarningMillis=1e3,globalTimeoutConfig={bootstrap:{millis:4e3,dieOnTimeout:!1,warningMillis:defaultWarningMillis},mount:{millis:3e3,dieOnTimeout:!1,warningMillis:defaultWarningMillis},unmount:{millis:3e3,dieOnTimeout:!1,warningMillis:defaultWarningMillis},unload:{millis:3e3,dieOnTimeout:!1,warningMillis:defaultWarningMillis},update:{millis:3e3,dieOnTimeout:!1,warningMillis:defaultWarningMillis}};function setBootstrapMaxTime(t,e,n){if("number"!=typeof t||t<=0)throw Error(formatErrorMessage(16,"bootstrap max time must be a positive integer number of milliseconds"));globalTimeoutConfig.bootstrap={millis:t,dieOnTimeout:e,warningMillis:n||defaultWarningMillis}}function setMountMaxTime(t,e,n){if("number"!=typeof t||t<=0)throw Error(formatErrorMessage(17,"mount max time must be a positive integer number of milliseconds"));globalTimeoutConfig.mount={millis:t,dieOnTimeout:e,warningMillis:n||defaultWarningMillis}}function setUnmountMaxTime(t,e,n){if("number"!=typeof t||t<=0)throw Error(formatErrorMessage(18,"unmount max time must be a positive integer number of milliseconds"));globalTimeoutConfig.unmount={millis:t,dieOnTimeout:e,warningMillis:n||defaultWarningMillis}}function setUnloadMaxTime(t,e,n){if("number"!=typeof t||t<=0)throw Error(formatErrorMessage(19,"unload max time must be a positive integer number of milliseconds"));globalTimeoutConfig.unload={millis:t,dieOnTimeout:e,warningMillis:n||defaultWarningMillis}}function reasonableTime(t,e){var n=t.timeouts[e],r=n.warningMillis,o=objectType(t);return new Promise(function(a,i){var s=!1,u=!1;t[e](getProps(t)).then(function(t){s=!0,a(t)}).catch(function(t){s=!0,i(t)}),setTimeout(function(){return l(1)},r),setTimeout(function(){return l(!0)},n.millis);var c=formatErrorMessage(31,"Lifecycle function ".concat(e," for ").concat(o," ").concat(toName(t)," lifecycle did not resolve or reject for ").concat(n.millis," ms."),e,o,toName(t),n.millis);function l(t){if(!s)if(!0===t)u=!0,n.dieOnTimeout?i(Error(c)):console.error(c);else if(!u){var e=t,o=e*r;console.warn(c),o+r<n.millis&&setTimeout(function(){return l(e+1)},r)}}})}function ensureValidAppTimeouts(t){var e={};for(var n in globalTimeoutConfig)e[n]=assign({},globalTimeoutConfig[n],t&&t[n]||{});return e}function toLoadPromise(t){return Promise.resolve().then(function(){return t.loadPromise?t.loadPromise:t.status!==NOT_LOADED&&t.status!==LOAD_ERROR?t:(t.status=LOADING_SOURCE_CODE,t.loadPromise=Promise.resolve().then(function(){var r=t.loadApp(getProps(t));if(!smellsLikeAPromise(r))throw n=!0,Error(formatErrorMessage(33,"single-spa loading function did not return a promise. Check the second argument to registerApplication('".concat(toName(t),"', loadingFunction, activityFunction)"),toName(t)));return r.then(function(n){var r,o;t.loadErrorTime=null,"object"!==_typeof(e=n)&&(o=34,r="does not export anything"),Object.prototype.hasOwnProperty.call(e,"bootstrap")&&!validLifecycleFn(e.bootstrap)&&(o=35,r="does not export a valid bootstrap function or array of functions"),validLifecycleFn(e.mount)||(o=36,r="does not export a mount function or array of functions"),validLifecycleFn(e.unmount)||(o=37,r="does not export a unmount function or array of functions");var a=objectType(e);if(o){var i;try{i=JSON.stringify(e)}catch(t){}return console.error(formatErrorMessage(o,"The loading function for single-spa ".concat(a," '").concat(toName(t),"' resolved with the following, which does not have bootstrap, mount, and unmount functions"),a,toName(t),i),e),handleAppError(r,t,SKIP_BECAUSE_BROKEN),t}return e.devtools&&e.devtools.overlays&&(t.devtools.overlays=assign({},t.devtools.overlays,e.devtools.overlays)),t.status=NOT_BOOTSTRAPPED,t.bootstrap=flattenFnArray(e,"bootstrap"),t.mount=flattenFnArray(e,"mount"),t.unmount=flattenFnArray(e,"unmount"),t.unload=flattenFnArray(e,"unload"),t.timeouts=ensureValidAppTimeouts(e.timeouts),delete t.loadPromise,t})}).catch(function(e){var r;return delete t.loadPromise,n?r=SKIP_BECAUSE_BROKEN:(r=LOAD_ERROR,t.loadErrorTime=(new Date).getTime()),handleAppError(e,t,r),t}));var e,n})}var urlRerouteOnly,isInBrowser="undefined"!=typeof window,capturedEventListeners={hashchange:[],popstate:[]},routingEventsListeningTo=["hashchange","popstate"];function navigateToUrl(t){var e;if("string"==typeof t)e=t;else if(this&&this.href)e=this.href;else{if(!(t&&t.currentTarget&&t.currentTarget.href&&t.preventDefault))throw Error(formatErrorMessage(14,"singleSpaNavigate/navigateToUrl must be either called with a string url, with an <a> tag as its context, or with an event whose currentTarget is an <a> tag"));e=t.currentTarget.href,t.preventDefault()}var n=parseUri(window.location.href),r=parseUri(e);0===e.indexOf("#")?window.location.hash=r.hash:n.host!==r.host&&r.host?window.location.href=e:r.pathname===n.pathname&&r.search===n.search?window.location.hash=r.hash:window.history.pushState(null,null,e)}function callCapturedEventListeners(t){var e=this;if(t){var n=t[0].type;routingEventsListeningTo.indexOf(n)>=0&&capturedEventListeners[n].forEach(function(n){try{n.apply(e,t)}catch(t){setTimeout(function(){throw t})}})}}function setUrlRerouteOnly(t){urlRerouteOnly=t}function urlReroute(){reroute([],arguments)}function patchedUpdateState(t,e){return function(){var n=window.location.href,r=t.apply(this,arguments),o=window.location.href;return urlRerouteOnly&&n===o||(isStarted()?window.dispatchEvent(createPopStateEvent(window.history.state,e)):reroute([])),r}}function createPopStateEvent(t,e){var n;try{n=new PopStateEvent("popstate",{state:t})}catch(e){(n=document.createEvent("PopStateEvent")).initPopStateEvent("popstate",!1,!1,t)}return n.singleSpa=!0,n.singleSpaTrigger=e,n}if(isInBrowser){window.addEventListener("hashchange",urlReroute),window.addEventListener("popstate",urlReroute);var originalAddEventListener=window.addEventListener,originalRemoveEventListener=window.removeEventListener;window.addEventListener=function(t,e){if(!("function"==typeof e&&routingEventsListeningTo.indexOf(t)>=0)||find(capturedEventListeners[t],function(t){return t===e}))return originalAddEventListener.apply(this,arguments);capturedEventListeners[t].push(e)},window.removeEventListener=function(t,e){if(!("function"==typeof e&&routingEventsListeningTo.indexOf(t)>=0))return originalRemoveEventListener.apply(this,arguments);capturedEventListeners[t]=capturedEventListeners[t].filter(function(t){return t!==e})},window.history.pushState=patchedUpdateState(window.history.pushState,"pushState"),window.history.replaceState=patchedUpdateState(window.history.replaceState,"replaceState"),window.singleSpaNavigate?console.warn(formatErrorMessage(41,"single-spa has been loaded twice on the page. This can result in unexpected behavior.")):window.singleSpaNavigate=navigateToUrl}function parseUri(t){var e=document.createElement("a");return e.href=t,e}var hasInitialized=!1;function ensureJQuerySupport(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.jQuery;if(t||window.$&&window.$.fn&&window.$.fn.jquery&&(t=window.$),t&&!hasInitialized){var e=t.fn.on,n=t.fn.off;t.fn.on=function(t,n){return captureRoutingEvents.call(this,e,window.addEventListener,t,n,arguments)},t.fn.off=function(t,e){return captureRoutingEvents.call(this,n,window.removeEventListener,t,e,arguments)},hasInitialized=!0}}function captureRoutingEvents(t,e,n,r,o){return"string"!=typeof n?t.apply(this,o):(n.split(/\s+/).forEach(function(t){routingEventsListeningTo.indexOf(t)>=0&&(e(t,r),n=n.replace(t,""))}),""===n.trim()?this:t.apply(this,o))}var appsToUnload={};function toUnloadPromise(t){return Promise.resolve().then(function(){var e=appsToUnload[toName(t)];return e?t.status===NOT_LOADED?(finishUnloadingApp(t,e),t):t.status===UNLOADING?e.promise.then(function(){return t}):t.status!==NOT_MOUNTED?t:(t.status=UNLOADING,reasonableTime(t,"unload").then(function(){return finishUnloadingApp(t,e),t}).catch(function(n){return errorUnloadingApp(t,e,n),t})):t})}function finishUnloadingApp(t,e){delete appsToUnload[toName(t)],delete t.bootstrap,delete t.mount,delete t.unmount,delete t.unload,t.status=NOT_LOADED,e.resolve()}function errorUnloadingApp(t,e,n){delete appsToUnload[toName(t)],delete t.bootstrap,delete t.mount,delete t.unmount,delete t.unload,handleAppError(n,t,SKIP_BECAUSE_BROKEN),e.reject(n)}function addAppToUnload(t,e,n,r){appsToUnload[toName(t)]={app:t,resolve:n,reject:r},Object.defineProperty(appsToUnload[toName(t)],"promise",{get:e})}function getAppUnloadInfo(t){return appsToUnload[t]}var apps=[];function getAppChanges(){var t=[],e=[],n=[],r=[],o=(new Date).getTime();return apps.forEach(function(a){var i=a.status!==SKIP_BECAUSE_BROKEN&&shouldBeActive(a);switch(a.status){case LOAD_ERROR:i&&o-a.loadErrorTime>=200&&n.push(a);break;case NOT_LOADED:case LOADING_SOURCE_CODE:i&&n.push(a);break;case NOT_BOOTSTRAPPED:case NOT_MOUNTED:!i&&getAppUnloadInfo(toName(a))?t.push(a):i&&r.push(a);break;case MOUNTED:i||e.push(a)}}),{appsToUnload:t,appsToUnmount:e,appsToLoad:n,appsToMount:r}}function getMountedApps(){return apps.filter(isActive).map(toName)}function getAppNames(){return apps.map(toName)}function getRawAppData(){return[].concat(apps)}function getAppStatus(t){var e=find(apps,function(e){return toName(e)===t});return e?e.status:null}function registerApplication(t,e,n,r){var o=sanitizeArguments(t,e,n,r);if(-1!==getAppNames().indexOf(o.name))throw Error(formatErrorMessage(21,"There is already an app registered with name ".concat(o.name),o.name));apps.push(assign({loadErrorTime:null,status:NOT_LOADED,parcels:{},devtools:{overlays:{options:{},selectors:[]}}},o)),isInBrowser&&(ensureJQuerySupport(),reroute())}function checkActivityFunctions(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location;return apps.filter(function(e){return e.activeWhen(t)}).map(toName)}function unregisterApplication(t){if(0===apps.filter(function(e){return toName(e)===t}).length)throw Error(formatErrorMessage(25,"Cannot unregister application '".concat(t,"' because no such application has been registered"),t));return unloadApplication(t).then(function(){var e=apps.map(toName).indexOf(t);apps.splice(e,1)})}function unloadApplication(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{waitForUnmount:!1};if("string"!=typeof t)throw Error(formatErrorMessage(26,"unloadApplication requires a string 'appName'"));var n=find(apps,function(e){return toName(e)===t});if(!n)throw Error(formatErrorMessage(27,"Could not unload application '".concat(t,"' because no such application has been registered"),t));var r,o=getAppUnloadInfo(toName(n));if(e&&e.waitForUnmount){if(o)return o.promise;var a=new Promise(function(t,e){addAppToUnload(n,function(){return a},t,e)});return a}return o?(r=o.promise,immediatelyUnloadApp(n,o.resolve,o.reject)):r=new Promise(function(t,e){addAppToUnload(n,function(){return r},t,e),immediatelyUnloadApp(n,t,e)}),r}function immediatelyUnloadApp(t,e,n){toUnmountPromise(t).then(toUnloadPromise).then(function(){e(),setTimeout(function(){reroute()})}).catch(n)}function validateRegisterWithArguments(t,e,n,r){if("string"!=typeof t||0===t.length)throw Error(formatErrorMessage(20,"The 1st argument to registerApplication must be a non-empty string 'appName'"));if(!e)throw Error(formatErrorMessage(23,"The 2nd argument to registerApplication must be an application or loading application function"));if("function"!=typeof n)throw Error(formatErrorMessage(24,"The 3rd argument to registerApplication must be an activeWhen function"));if(!validCustomProps(r))throw Error(formatErrorMessage(22,"The optional 4th argument is a customProps and must be an object"))}function validateRegisterWithConfig(t){if(Array.isArray(t)||null===t)throw Error(formatErrorMessage(39,"Configuration object can't be an Array or null!"));var e=["name","app","activeWhen","customProps"],n=Object.keys(t).reduce(function(t,n){return e.indexOf(n)>=0?t:t.concat(n)},[]);if(0!==n.length)throw Error(formatErrorMessage(38,"The configuration object accepts only: ".concat(e.join(", "),". Invalid keys: ").concat(n.join(", "),"."),e.join(", "),n.join(", ")));if("string"!=typeof t.name||0===t.name.length)throw Error(formatErrorMessage(20,"The config.name on registerApplication must be a non-empty string"));if("object"!==_typeof(t.app)&&"function"!=typeof t.app)throw Error(formatErrorMessage(20,"The config.app on registerApplication must be an application or a loading function"));var r=function(t){return"string"==typeof t||"function"==typeof t};if(!(r(t.activeWhen)||Array.isArray(t.activeWhen)&&t.activeWhen.every(r)))throw Error(formatErrorMessage(24,"The config.activeWhen on registerApplication must be a string, function or an array with both"));if(!validCustomProps(t.customProps))throw Error(formatErrorMessage(22,"The optional config.customProps must be an object"))}function validCustomProps(t){return!t||"function"==typeof t||"object"===_typeof(t)&&null!==t&&!Array.isArray(t)}function sanitizeArguments(t,e,n,r){var o={name:null,loadApp:null,activeWhen:null,customProps:null};return"object"===_typeof(t)?(validateRegisterWithConfig(t),o.name=t.name,o.loadApp=t.app,o.activeWhen=t.activeWhen,o.customProps=t.customProps):(validateRegisterWithArguments(t,e,n,r),o.name=t,o.loadApp=e,o.activeWhen=n,o.customProps=r),o.loadApp=sanitizeLoadApp(o.loadApp),o.customProps=sanitizeCustomProps(o.customProps),o.activeWhen=sanitizeActiveWhen(o.activeWhen),o}function sanitizeLoadApp(t){return"function"!=typeof t?function(){return Promise.resolve(t)}:t}function sanitizeCustomProps(t){return t||{}}function sanitizeActiveWhen(t){var e=Array.isArray(t)?t:[t];return e=e.map(function(t){return"function"==typeof t?t:pathToActiveWhen(t)}),function(t){return e.some(function(e){return e(t)})}}function pathToActiveWhen(t,e){var n=toDynamicPathValidatorRegex(t,e);return function(t){var e=t.href.replace(t.origin,"").replace(t.search,"").split("?")[0];return n.test(e)}}function toDynamicPathValidatorRegex(t,e){var n=0,r=!1,o="^";"/"!==t[0]&&(t="/"+t);for(var a=0;a<t.length;a++){var i=t[a];(!r&&":"===i||r&&"/"===i)&&s(a)}return s(t.length),new RegExp(o,"i");function s(a){var i=t.slice(n,a).replace(/[|\\{}()[\]^$+*?.]/g,"\\$&");if(o+=r?"[^/]+/?":i,a===t.length)if(r)e&&(o+="$");else{var s=e?"":".*";o="/"===o.charAt(o.length-1)?"".concat(o).concat(s,"$"):"".concat(o,"(/").concat(s,")?(#.*)?$")}r=!r,n=a}}var appChangeUnderway=!1,peopleWaitingOnAppChange=[],currentUrl=isInBrowser&&window.location.href;function triggerAppChange(){return reroute()}function reroute(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;if(appChangeUnderway)return new Promise(function(t,n){peopleWaitingOnAppChange.push({resolve:t,reject:n,eventArguments:e})});var n,r=getAppChanges(),o=r.appsToUnload,a=r.appsToUnmount,i=r.appsToLoad,s=r.appsToMount,u=!1,c=currentUrl,l=currentUrl=window.location.href;return isStarted()?(appChangeUnderway=!0,n=o.concat(i,a,s),Promise.resolve().then(function(){if(window.dispatchEvent(new customEvent(0===n.length?"single-spa:before-no-app-change":"single-spa:before-app-change",d(!0))),window.dispatchEvent(new customEvent("single-spa:before-routing-event",d(!0,{cancelNavigation:p}))),u)return window.dispatchEvent(new customEvent("single-spa:before-mount-routing-event",d(!0))),f(),void navigateToUrl(c);var e=o.map(toUnloadPromise),r=a.map(toUnmountPromise).map(function(t){return t.then(toUnloadPromise)}),l=r.concat(e),h=Promise.all(l);h.then(function(){window.dispatchEvent(new customEvent("single-spa:before-mount-routing-event",d(!0)))});var g=i.map(function(t){return toLoadPromise(t).then(function(t){return tryToBootstrapAndMount(t,h)})}),E=s.filter(function(t){return i.indexOf(t)<0}).map(function(t){return tryToBootstrapAndMount(t,h)});return h.catch(function(t){throw m(),t}).then(function(){return m(),Promise.all(g.concat(E)).catch(function(e){throw t.forEach(function(t){return t.reject(e)}),e}).then(f)})})):(n=i,Promise.resolve().then(function(){var t=i.map(toLoadPromise);return Promise.all(t).then(m).then(function(){return[]}).catch(function(t){throw m(),t})}));function p(){u=!0}function f(){var e=getMountedApps();t.forEach(function(t){return t.resolve(e)});try{var r=0===n.length?"single-spa:no-app-change":"single-spa:app-change";window.dispatchEvent(new customEvent(r,d())),window.dispatchEvent(new customEvent("single-spa:routing-event",d()))}catch(t){setTimeout(function(){throw t})}if(appChangeUnderway=!1,peopleWaitingOnAppChange.length>0){var o=peopleWaitingOnAppChange;peopleWaitingOnAppChange=[],reroute(o)}return e}function m(){t.forEach(function(t){callCapturedEventListeners(t.eventArguments)}),callCapturedEventListeners(e)}function d(){var t,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0],p=arguments.length>1?arguments[1]:void 0,f={},m=(_defineProperty(t={},MOUNTED,[]),_defineProperty(t,NOT_MOUNTED,[]),_defineProperty(t,NOT_LOADED,[]),_defineProperty(t,SKIP_BECAUSE_BROKEN,[]),t);r?(i.concat(s).forEach(function(t,e){h(t,MOUNTED)}),o.forEach(function(t){h(t,NOT_LOADED)}),a.forEach(function(t){h(t,NOT_MOUNTED)})):n.forEach(function(t){h(t)});var d={detail:{newAppStatuses:f,appsByNewStatus:m,totalAppChanges:n.length,originalEvent:null==e?void 0:e[0],oldUrl:c,newUrl:l,navigationIsCanceled:u}};return p&&assign(d.detail,p),d;function h(t,e){var n=toName(t);e=e||getAppStatus(n),f[n]=e,(m[e]=m[e]||[]).push(n)}}}function tryToBootstrapAndMount(t,e){return shouldBeActive(t)?toBootstrapPromise(t).then(function(t){return e.then(function(){return shouldBeActive(t)?toMountPromise(t):t})}):e.then(function(){return t})}var started=!1;function start(t){started=!0,t&&t.urlRerouteOnly&&setUrlRerouteOnly(t.urlRerouteOnly),isInBrowser&&reroute()}function isStarted(){return started}isInBrowser&&setTimeout(function(){started||console.warn(formatErrorMessage(1,"singleSpa.start() has not been called, 5000ms after single-spa was loaded. Before start() is called, apps can be declared and loaded, but not bootstrapped or mounted."))},5e3);var devtools={getRawAppData:getRawAppData,reroute:reroute,NOT_LOADED:NOT_LOADED,toLoadPromise:toLoadPromise,toBootstrapPromise:toBootstrapPromise,unregisterApplication:unregisterApplication};isInBrowser&&window.__SINGLE_SPA_DEVTOOLS__&&(window.__SINGLE_SPA_DEVTOOLS__.exposedMethods=devtools);export{BOOTSTRAPPING,LOADING_SOURCE_CODE,LOAD_ERROR,MOUNTED,MOUNTING,NOT_BOOTSTRAPPED,NOT_LOADED,NOT_MOUNTED,SKIP_BECAUSE_BROKEN,UNMOUNTING,UPDATING,addErrorHandler,checkActivityFunctions,ensureJQuerySupport,getAppNames,getAppStatus,getMountedApps,mountRootParcel,navigateToUrl,pathToActiveWhen,registerApplication,removeErrorHandler,setBootstrapMaxTime,setMountMaxTime,setUnloadMaxTime,setUnmountMaxTime,start,triggerAppChange,unloadApplication,unregisterApplication};