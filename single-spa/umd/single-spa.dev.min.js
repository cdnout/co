!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((t=t||self).singleSpa={})}(this,function(t){"use strict";var r=Object.freeze({__proto__:null,get start(){return It},get ensureJQuerySupport(){return pt},get setBootstrapMaxTime(){return Q},get setMountMaxTime(){return q},get setUnmountMaxTime(){return V},get setUnloadMaxTime(){return z},get registerApplication(){return Ot},get unregisterApplication(){return At},get getMountedApps(){return Et},get getAppStatus(){return Tt},get unloadApplication(){return Nt},get checkActivityFunctions(){return Pt},get getAppNames(){return bt},get pathToActiveWhen(){return jt},get navigateToUrl(){return at},get triggerAppChange(){return xt},get addErrorHandler(){return e},get removeErrorHandler(){return i},get mountRootParcel(){return k},get NOT_LOADED(){return O},get LOADING_SOURCE_CODE(){return P},get NOT_BOOTSTRAPPED(){return A},get BOOTSTRAPPING(){return u},get NOT_MOUNTED(){return N},get MOUNTING(){return c},get UPDATING(){return m},get LOAD_ERROR(){return _},get MOUNTED(){return S},get UNMOUNTING(){return s},get SKIP_BECAUSE_BROKEN(){return j}});function f(t){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function b(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var n=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{}).CustomEvent;var T=function(){try{var t=new n("cat",{detail:{foo:"bar"}});return"cat"===t.type&&"bar"===t.detail.foo}catch(t){}}()?n:"undefined"!=typeof document&&"function"==typeof document.createEvent?function(t,n){var e=document.createEvent("CustomEvent");return n?e.initCustomEvent(t,n.bubbles,n.cancelable,n.detail):e.initCustomEvent(t,!1,!1,void 0),e}:function(t,n){var e=document.createEventObject();return e.type=t,n?(e.bubbles=Boolean(n.bubbles),e.cancelable=Boolean(n.cancelable),e.detail=n.detail):(e.bubbles=!1,e.cancelable=!1,e.detail=void 0),e},o=[];function a(t,n,e){var r=h(t,n,e);o.length?o.forEach(function(t){return t(r)}):setTimeout(function(){throw r})}function e(t){if("function"!=typeof t)throw Error(p(28,"a single-spa error handler must be a function"));o.push(t)}function i(n){if("function"!=typeof n)throw Error(p(29,"a single-spa error handler must be a function"));var e=!1;return o=o.filter(function(t){t=t===n;return e=e||t,!t}),e}function p(t,n){for(var e=arguments.length,r=new Array(2<e?e-2:0),o=2;o<e;o++)r[o-2]=arguments[o];return"single-spa minified message #".concat(t,": ").concat(n?n+" ":"","See https://single-spa.js.org/error/?code=").concat(t).concat(r.length?"&arg=".concat(r.join("&arg=")):"")}function h(n,t,e){var r,o="".concat(v(t)," '").concat(M(t),"' died in status ").concat(t.status,": ");if(n instanceof Error){try{n.message=o+n.message}catch(t){}r=n}else{console.warn(p(30,"While ".concat(t.status,", '").concat(M(t),"' rejected its lifecycle function promise with a non-Error. This will cause stack traces to not be accurate."),t.status,M(t)));try{r=Error(o+JSON.stringify(n))}catch(t){r=n}}return r.appOrParcelName=M(t),t.status=e,r}var O="NOT_LOADED",P="LOADING_SOURCE_CODE",A="NOT_BOOTSTRAPPED",u="BOOTSTRAPPING",N="NOT_MOUNTED",c="MOUNTING",S="MOUNTED",m="UPDATING",s="UNMOUNTING",l="UNLOADING",_="LOAD_ERROR",j="SKIP_BECAUSE_BROKEN";function d(t){return t.status===S}function U(n){try{return n.activeWhen(window.location)}catch(t){return a(t,n,j),!1}}function M(t){return t.name}function g(t){return Boolean(t.unmountThisParcel)}function v(t){return g(t)?"parcel":"application"}function D(t){for(var n=arguments.length-1;0<n;n--)for(var e in arguments[n])"__proto__"!==e&&(arguments[n-1][e]=arguments[n][e]);return t}function w(t,n){for(var e=0;e<t.length;e++)if(n(t[e]))return t[e];return null}function y(t){return t&&("function"==typeof t||(n=t,Array.isArray(n)&&!w(n,function(t){return"function"!=typeof t})));var n}function E(t,o){var n=t[o]||[];0===(n=Array.isArray(n)?n:[n]).length&&(n=[function(){return Promise.resolve()}]);var i=v(t),a=M(t);return function(r){return n.reduce(function(t,n,e){return t.then(function(){var t=n(r);return x(t)?t:Promise.reject(p(15,"Within ".concat(i," ").concat(a,", the lifecycle function ").concat(o," at array index ").concat(e," did not return a promise"),i,a,o,e))})},Promise.resolve())}}function x(t){return t&&"function"==typeof t.then&&"function"==typeof t.catch}function R(n,e){return Promise.resolve().then(function(){return n.status!==A?n:(n.status=u,n.bootstrap?X(n,"bootstrap").then(t).catch(function(t){if(e)throw h(t,n,j);return a(t,n,j),n}):Promise.resolve().then(t))});function t(){return n.status=N,n}}function L(r,o){return Promise.resolve().then(function(){if(r.status!==S)return r;r.status=s;var t=Object.keys(r.parcels).map(function(t){return r.parcels[t].unmountThisParcel()});return Promise.all(t).then(e,function(n){return e().then(function(){var t=Error(n.message);if(o)throw h(t,r,j);a(t,r,j)})}).then(function(){return r});function e(){return X(r,"unmount").then(function(){r.status=N}).catch(function(t){if(o)throw h(t,r,j);a(t,r,j)})}})}var C=!1,I=!1;function W(e,r){return Promise.resolve().then(function(){return e.status!==N?e:(C||(window.dispatchEvent(new T("single-spa:before-first-mount")),C=!0),X(e,"mount").then(function(){return e.status=S,I||(window.dispatchEvent(new T("single-spa:first-mount")),I=!0),e}).catch(function(t){return e.status=S,L(e,!0).then(n,n);function n(){if(r)throw h(t,e,j);return a(t,e,j),e}}))})}var B=0,G={parcels:{}};function k(){return $.apply(G,arguments)}function $(t,n){var e=this;if(!t||"object"!==f(t)&&"function"!=typeof t)throw Error(p(2,"Cannot mount parcel without a config object or config loading function"));if(t.name&&"string"!=typeof t.name)throw Error(p(3,"Parcel name must be a string, if provided. Was given ".concat(f(t.name)),f(t.name)));if("object"!==f(n))throw Error(p(4,"Parcel ".concat(name," has invalid customProps -- must be an object but was given ").concat(f(n)),name,f(n)));if(!n.domElement)throw Error(p(5,"Parcel ".concat(name," cannot be mounted without a domElement provided as a prop"),name));var i=B++,r="function"==typeof t,o=r?t:function(){return Promise.resolve(t)},a={id:i,parcels:{},status:r?P:A,customProps:n,parentName:M(e),unmountThisParcel:function(){return l.then(function(){if(a.status!==S)throw Error(p(6,"Cannot unmount parcel '".concat(name,"' -- it is in a ").concat(a.status," status"),name,a.status));return L(a,!0)}).then(function(t){return a.parentName&&delete e.parcels[a.id],t}).then(function(t){return u(t),t}).catch(function(t){throw a.status=j,c(t),t})}};e.parcels[i]=a;r=o();if(!r||"function"!=typeof r.then)throw Error(p(7,"When mounting a parcel, the config loading function must return a promise that resolves with the parcel config"));var u,c,s,n=(r=r.then(function(t){if(!t)throw Error(p(8,"When mounting a parcel, the config loading function returned a promise that did not resolve with a parcel config"));var n=t.name||"parcel-".concat(i);if(Object.prototype.hasOwnProperty.call(t,"bootstrap")&&!y(t.bootstrap))throw Error(p(9,"Parcel ".concat(n," provided an invalid bootstrap function"),n));if(!y(t.mount))throw Error(p(10,"Parcel ".concat(n," must have a valid mount function"),n));if(!y(t.unmount))throw Error(p(11,"Parcel ".concat(n," must have a valid unmount function"),n));if(t.update&&!y(t.update))throw Error(p(12,"Parcel ".concat(n," provided an invalid update function"),n));var e=E(t,"bootstrap"),r=E(t,"mount"),o=E(t,"unmount");a.status=A,a.name=n,a.bootstrap=e,a.mount=r,a.unmount=o,a.timeouts=Y(t.timeouts),t.update&&(a.update=E(t,"update"),s.update=function(t){return a.customProps=t,F((n=a,Promise.resolve().then(function(){if(n.status!==S)throw Error(p(32,"Cannot update parcel '".concat(M(n),"' because it is not mounted"),M(n)));return n.status=m,X(n,"update").then(function(){return n.status=S,n}).catch(function(t){throw h(t,n,j)})})));var n})})).then(function(){return R(a,!0)}),l=n.then(function(){return W(a,!0)}),o=new Promise(function(t,n){u=t,c=n});return s={mount:function(){return F(Promise.resolve().then(function(){if(a.status!==N)throw Error(p(13,"Cannot mount parcel '".concat(name,"' -- it is in a ").concat(a.status," status"),name,a.status));return W(e.parcels[i]=a)}))},unmount:function(){return F(a.unmountThisParcel())},getStatus:function(){return a.status},loadPromise:F(r),bootstrapPromise:F(n),mountPromise:F(l),unmountPromise:F(o)}}function F(t){return t.then(function(){return null})}function K(t){var n=M(t),e="function"==typeof t.customProps?t.customProps(n,window.location):t.customProps;"object"===f(e)&&null!==e&&!Array.isArray(e)||(e={},console.warn(p(40,"single-spa: ".concat(n,"'s customProps function must return an object. Received ").concat(e)),n,e));n=D({},e,{name:n,mountParcel:$.bind(t),singleSpa:r});return g(t)&&(n.unmountSelf=t.unmountThisParcel),n}var H=1e3,J={bootstrap:{millis:4e3,dieOnTimeout:!1,warningMillis:H},mount:{millis:3e3,dieOnTimeout:!1,warningMillis:H},unmount:{millis:3e3,dieOnTimeout:!1,warningMillis:H},unload:{millis:3e3,dieOnTimeout:!1,warningMillis:H},update:{millis:3e3,dieOnTimeout:!1,warningMillis:H}};function Q(t,n,e){if("number"!=typeof t||t<=0)throw Error(p(16,"bootstrap max time must be a positive integer number of milliseconds"));J.bootstrap={millis:t,dieOnTimeout:n,warningMillis:e||H}}function q(t,n,e){if("number"!=typeof t||t<=0)throw Error(p(17,"mount max time must be a positive integer number of milliseconds"));J.mount={millis:t,dieOnTimeout:n,warningMillis:e||H}}function V(t,n,e){if("number"!=typeof t||t<=0)throw Error(p(18,"unmount max time must be a positive integer number of milliseconds"));J.unmount={millis:t,dieOnTimeout:n,warningMillis:e||H}}function z(t,n,e){if("number"!=typeof t||t<=0)throw Error(p(19,"unload max time must be a positive integer number of milliseconds"));J.unload={millis:t,dieOnTimeout:n,warningMillis:e||H}}function X(t,u){var c=t.timeouts[u],s=c.warningMillis,l=v(t);return new Promise(function(n,e){var r=!1,o=!1;t[u](K(t)).then(function(t){r=!0,n(t)}).catch(function(t){r=!0,e(t)}),setTimeout(function(){return a(1)},s),setTimeout(function(){return a(!0)},c.millis);var i=p(31,"Lifecycle function ".concat(u," for ").concat(l," ").concat(M(t)," lifecycle did not resolve or reject for ").concat(c.millis," ms."),u,l,M(t),c.millis);function a(t){var n;r||(!0===t?(o=!0,c.dieOnTimeout?e(Error(i)):console.error(i)):o||(t=(n=t)*s,console.warn(i),t+s<c.millis&&setTimeout(function(){return a(n+1)},s)))}})}function Y(t){var n,e={};for(n in J)e[n]=D({},J[n],t&&t[n]||{});return e}function Z(i){return Promise.resolve().then(function(){return i.loadPromise||(i.status!==O&&i.status!==_?i:(i.status=P,i.loadPromise=Promise.resolve().then(function(){var t=i.loadApp(K(i));if(!x(t))throw e=!0,Error(p(33,"single-spa loading function did not return a promise. Check the second argument to registerApplication('".concat(M(i),"', loadingFunction, activityFunction)"),M(i)));return t.then(function(t){var n,e;i.loadErrorTime=null,"object"!==f(o=t)&&(e=34,n="does not export anything"),Object.prototype.hasOwnProperty.call(o,"bootstrap")&&!y(o.bootstrap)&&(e=35,n="does not export a valid bootstrap function or array of functions"),y(o.mount)||(e=36,n="does not export a mount function or array of functions"),y(o.unmount)||(e=37,n="does not export a unmount function or array of functions");var r,t=v(o);if(e){try{r=JSON.stringify(o)}catch(t){}return console.error(p(e,"The loading function for single-spa ".concat(t," '").concat(M(i),"' resolved with the following, which does not have bootstrap, mount, and unmount functions"),t,M(i),r),o),a(n,i,j),i}return o.devtools&&o.devtools.overlays&&(i.devtools.overlays=D({},i.devtools.overlays,o.devtools.overlays)),i.status=A,i.bootstrap=E(o,"bootstrap"),i.mount=E(o,"mount"),i.unmount=E(o,"unmount"),i.unload=E(o,"unload"),i.timeouts=Y(o.timeouts),delete i.loadPromise,i})}).catch(function(t){var n;return delete i.loadPromise,e?n=j:(n=_,i.loadErrorTime=(new Date).getTime()),a(t,i,n),i})));var o,e})}var tt,nt,et,rt="undefined"!=typeof window,ot={hashchange:[],popstate:[]},it=["hashchange","popstate"];function at(t){var n;if("string"==typeof t)n=t;else if(this&&this.href)n=this.href;else{if(!(t&&t.currentTarget&&t.currentTarget.href&&t.preventDefault))throw Error(p(14,"singleSpaNavigate/navigateToUrl must be either called with a string url, with an <a> tag as its context, or with an event whose currentTarget is an <a> tag"));n=t.currentTarget.href,t.preventDefault()}var e=lt(window.location.href),t=lt(n);0===n.indexOf("#")?window.location.hash=t.hash:e.host!==t.host&&t.host?window.location.href=n:t.pathname===e.pathname&&t.search===e.search?window.location.hash=t.hash:window.history.pushState(null,null,n)}function ut(n){var t,e=this;n&&(t=n[0].type,0<=it.indexOf(t)&&ot[t].forEach(function(t){try{t.apply(e,n)}catch(t){setTimeout(function(){throw t})}}))}function ct(){Rt([],arguments)}function st(r,o){return function(){var t=window.location.href,n=r.apply(this,arguments),e=window.location.href;return tt&&t===e||(Ct?window.dispatchEvent(function(n,t){var e;try{e=new PopStateEvent("popstate",{state:n})}catch(t){(e=document.createEvent("PopStateEvent")).initPopStateEvent("popstate",!1,!1,n)}return e.singleSpa=!0,e.singleSpaTrigger=t,e}(window.history.state,o)):Rt([])),n}}function lt(t){var n=document.createElement("a");return n.href=t,n}rt&&(window.addEventListener("hashchange",ct),window.addEventListener("popstate",ct),nt=window.addEventListener,et=window.removeEventListener,window.addEventListener=function(t,n){if(!("function"==typeof n&&0<=it.indexOf(t))||w(ot[t],function(t){return t===n}))return nt.apply(this,arguments);ot[t].push(n)},window.removeEventListener=function(t,n){if(!("function"==typeof n&&0<=it.indexOf(t)))return et.apply(this,arguments);ot[t]=ot[t].filter(function(t){return t!==n})},window.history.pushState=st(window.history.pushState,"pushState"),window.history.replaceState=st(window.history.replaceState,"replaceState"),window.singleSpaNavigate?console.warn(p(41,"single-spa has been loaded twice on the page. This can result in unexpected behavior.")):window.singleSpaNavigate=at);var ft=!1;function pt(){var e,r,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:window.jQuery;t||window.$&&window.$.fn&&window.$.fn.jquery&&(t=window.$),t&&!ft&&(e=t.fn.on,r=t.fn.off,t.fn.on=function(t,n){return ht.call(this,e,window.addEventListener,t,n,arguments)},t.fn.off=function(t,n){return ht.call(this,r,window.removeEventListener,t,n,arguments)},ft=!0)}function ht(t,n,e,r,o){return"string"!=typeof e?t.apply(this,o):(e.split(/\s+/).forEach(function(t){0<=it.indexOf(t)&&(n(t,r),e=e.replace(t,""))}),""===e.trim()?this:t.apply(this,o))}var mt={};function dt(o){return Promise.resolve().then(function(){var r=mt[M(o)];return r?o.status===O?(gt(o,r),o):o.status===l?r.promise.then(function(){return o}):o.status!==N?o:(o.status=l,X(o,"unload").then(function(){return gt(o,r),o}).catch(function(t){var n,e;return n=r,e=t,delete mt[M(t=o)],delete t.bootstrap,delete t.mount,delete t.unmount,delete t.unload,a(e,t,j),n.reject(e),o})):o})}function gt(t,n){delete mt[M(t)],delete t.bootstrap,delete t.mount,delete t.unmount,delete t.unload,t.status=O,n.resolve()}function vt(t,n,e,r){mt[M(t)]={app:t,resolve:e,reject:r},Object.defineProperty(mt[M(t)],"promise",{get:n})}function wt(t){return mt[t]}var yt=[];function Et(){return yt.filter(d).map(M)}function bt(){return yt.map(M)}function Tt(n){var t=w(yt,function(t){return M(t)===n});return t?t.status:null}function Ot(t,n,e,r){r=function(t,n,e,r){var o="object"===f(t),i={name:null,loadApp:null,activeWhen:null,customProps:null};o?(function(t){if(Array.isArray(t)||null===t)throw Error(p(39,"Configuration object can't be an Array or null!"));var e=["name","app","activeWhen","customProps"],n=Object.keys(t).reduce(function(t,n){return 0<=e.indexOf(n)?t:t.concat(n)},[]);if(0!==n.length)throw Error(p(38,"The configuration object accepts only: ".concat(e.join(", "),". Invalid keys: ").concat(n.join(", "),"."),e.join(", "),n.join(", ")));if("string"!=typeof t.name||0===t.name.length)throw Error(p(20,"The config.name on registerApplication must be a non-empty string"));if("object"!==f(t.app)&&"function"!=typeof t.app)throw Error(p(20,"The config.app on registerApplication must be an application or a loading function"));n=function(t){return"string"==typeof t||"function"==typeof t};if(!(n(t.activeWhen)||Array.isArray(t.activeWhen)&&t.activeWhen.every(n)))throw Error(p(24,"The config.activeWhen on registerApplication must be a string, function or an array with both"));if(!_t(t.customProps))throw Error(p(22,"The optional config.customProps must be an object"))}(t),i.name=t.name,i.loadApp=t.app,i.activeWhen=t.activeWhen,i.customProps=t.customProps):(function(t,n,e,r){if("string"!=typeof t||0===t.length)throw Error(p(20,"The 1st argument to registerApplication must be a non-empty string 'appName'"));if(!n)throw Error(p(23,"The 2nd argument to registerApplication must be an application or loading application function"));if("function"!=typeof e)throw Error(p(24,"The 3rd argument to registerApplication must be an activeWhen function"));if(!_t(r))throw Error(p(22,"The optional 4th argument is a customProps and must be an object"))}(t,n,e,r),i.name=t,i.loadApp=n,i.activeWhen=e,i.customProps=r);return i.loadApp=function(t){return"function"==typeof t?t:function(){return Promise.resolve(t)}}(i.loadApp),i.customProps=function(t){return t||{}}(i.customProps),i.activeWhen=function(t){var e=Array.isArray(t)?t:[t];return e=e.map(function(t){return"function"==typeof t?t:jt(t)}),function(n){return e.some(function(t){return t(n)})}}(i.activeWhen),i}(t,n,e,r);if(-1!==bt().indexOf(r.name))throw Error(p(21,"There is already an app registered with name ".concat(r.name),r.name));yt.push(D({loadErrorTime:null,status:O,parcels:{},devtools:{overlays:{options:{},selectors:[]}}},r)),rt&&(pt(),Rt())}function Pt(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:window.location;return yt.filter(function(t){return t.activeWhen(n)}).map(M)}function At(n){if(0===yt.filter(function(t){return M(t)===n}).length)throw Error(p(25,"Cannot unregister application '".concat(n,"' because no such application has been registered"),n));return Nt(n).then(function(){var t=yt.map(M).indexOf(n);yt.splice(t,1)})}function Nt(n){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{waitForUnmount:!1};if("string"!=typeof n)throw Error(p(26,"unloadApplication requires a string 'appName'"));var e=w(yt,function(t){return M(t)===n});if(!e)throw Error(p(27,"Could not unload application '".concat(n,"' because no such application has been registered"),n));var r,o=wt(M(e));if(t&&t.waitForUnmount){if(o)return o.promise;var i=new Promise(function(t,n){vt(e,function(){return i},t,n)});return i}return o?(r=o.promise,St(e,o.resolve,o.reject)):r=new Promise(function(t,n){vt(e,function(){return r},t,n),St(e,t,n)}),r}function St(t,n,e){L(t).then(dt).then(function(){n(),setTimeout(function(){Rt()})}).catch(e)}function _t(t){return!t||"function"==typeof t||"object"===f(t)&&null!==t&&!Array.isArray(t)}function jt(t,n){var e=function(e,r){var o=0,i=!1,a="^";"/"!==e[0]&&(e="/"+e);for(var t=0;t<e.length;t++){var n=e[t],u=i&&"/"===n;(!i&&":"===n||u)&&c(t)}return c(e.length),new RegExp(a,"i");function c(t){var n=e.slice(o,t).replace(/[|\\{}()[\]^$+*?.]/g,"\\$&");a+=i?"[^/]+/?":n,t===e.length&&(i?r&&(a+="$"):(n=r?"":".*",a="/"===a.charAt(a.length-1)?"".concat(a).concat(n,"$"):"".concat(a,"(/").concat(n,")?(#.*)?$"))),i=!i,o=t}}(t,n);return function(t){t=t.href.replace(t.origin,"").replace(t.search,"").split("?")[0];return e.test(t)}}var Ut=!1,Mt=[],Dt=rt&&window.location.href;function xt(){return Rt()}function Rt(){var o=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],a=1<arguments.length?arguments[1]:void 0;if(Ut)return new Promise(function(t,n){Mt.push({resolve:t,reject:n,eventArguments:a})});var e,r,i,u,c,s,t=(e=[],r=[],i=[],u=[],c=(new Date).getTime(),yt.forEach(function(t){var n=t.status!==j&&U(t);switch(t.status){case _:n&&200<=c-t.loadErrorTime&&i.push(t);break;case O:case P:n&&i.push(t);break;case A:case N:!n&&wt(M(t))?e.push(t):n&&u.push(t);break;case S:n||r.push(t)}}),{appsToUnload:e,appsToUnmount:r,appsToLoad:i,appsToMount:u}),l=t.appsToUnload,f=t.appsToUnmount,p=t.appsToLoad,h=t.appsToMount,m=!1,d=Dt,g=Dt=window.location.href;return Ct?(Ut=!0,s=l.concat(p,f,h),Promise.resolve().then(function(){if(window.dispatchEvent(new T(0===s.length?"single-spa:before-no-app-change":"single-spa:before-app-change",E(!0))),window.dispatchEvent(new T("single-spa:before-routing-event",E(!0,{cancelNavigation:v}))),m)return window.dispatchEvent(new T("single-spa:before-mount-routing-event",E(!0))),w(),void at(d);var t=l.map(dt),t=f.map(L).map(function(t){return t.then(dt)}).concat(t),n=Promise.all(t);n.then(function(){window.dispatchEvent(new T("single-spa:before-mount-routing-event",E(!0)))});var e=p.map(function(t){return Z(t).then(function(t){return Lt(t,n)})}),r=h.filter(function(t){return p.indexOf(t)<0}).map(function(t){return Lt(t,n)});return n.catch(function(t){throw y(),t}).then(function(){return y(),Promise.all(e.concat(r)).catch(function(n){throw o.forEach(function(t){return t.reject(n)}),n}).then(w)})})):(s=p,Promise.resolve().then(function(){var t=p.map(Z);return Promise.all(t).then(y).then(function(){return[]}).catch(function(t){throw y(),t})}));function v(){m=!0}function w(){var t,n=Et();o.forEach(function(t){return t.resolve(n)});try{var e=0===s.length?"single-spa:no-app-change":"single-spa:app-change";window.dispatchEvent(new T(e,E())),window.dispatchEvent(new T("single-spa:routing-event",E()))}catch(t){setTimeout(function(){throw t})}return Ut=!1,0<Mt.length&&(t=Mt,Mt=[],Rt(t)),n}function y(){o.forEach(function(t){ut(t.eventArguments)}),ut(a)}function E(t,n){var e=0<arguments.length&&void 0!==t&&t,t=1<arguments.length?n:void 0,r={},o=(b(n={},S,[]),b(n,N,[]),b(n,O,[]),b(n,j,[]),n);e?(p.concat(h).forEach(function(t,n){i(t,S)}),l.forEach(function(t){i(t,O)}),f.forEach(function(t){i(t,N)})):s.forEach(function(t){i(t)});e={detail:{newAppStatuses:r,appsByNewStatus:o,totalAppChanges:s.length,originalEvent:null==a?void 0:a[0],oldUrl:d,newUrl:g,navigationIsCanceled:m}};return t&&D(e.detail,t),e;function i(t,n){t=M(t);n=n||Tt(t),r[t]=n,(o[n]=o[n]||[]).push(t)}}}function Lt(t,n){return U(t)?R(t).then(function(t){return n.then(function(){return U(t)?W(t):t})}):n.then(function(){return t})}var Ct=!1;function It(t){Ct=!0,t&&t.urlRerouteOnly&&(t=t.urlRerouteOnly,tt=t),rt&&Rt()}rt&&setTimeout(function(){Ct||console.warn(p(1,"singleSpa.start() has not been called, 5000ms after single-spa was loaded. Before start() is called, apps can be declared and loaded, but not bootstrapped or mounted."))},5e3);var Wt={getRawAppData:function(){return[].concat(yt)},reroute:Rt,NOT_LOADED:O,toLoadPromise:Z,toBootstrapPromise:R,unregisterApplication:At};rt&&window.__SINGLE_SPA_DEVTOOLS__&&(window.__SINGLE_SPA_DEVTOOLS__.exposedMethods=Wt),t.BOOTSTRAPPING=u,t.LOADING_SOURCE_CODE=P,t.LOAD_ERROR=_,t.MOUNTED=S,t.MOUNTING=c,t.NOT_BOOTSTRAPPED=A,t.NOT_LOADED=O,t.NOT_MOUNTED=N,t.SKIP_BECAUSE_BROKEN=j,t.UNMOUNTING=s,t.UPDATING=m,t.addErrorHandler=e,t.checkActivityFunctions=Pt,t.ensureJQuerySupport=pt,t.getAppNames=bt,t.getAppStatus=Tt,t.getMountedApps=Et,t.mountRootParcel=k,t.navigateToUrl=at,t.pathToActiveWhen=jt,t.registerApplication=Ot,t.removeErrorHandler=i,t.setBootstrapMaxTime=Q,t.setMountMaxTime=q,t.setUnloadMaxTime=z,t.setUnmountMaxTime=V,t.start=It,t.triggerAppChange=xt,t.unloadApplication=Nt,t.unregisterApplication=At,Object.defineProperty(t,"__esModule",{value:!0})});