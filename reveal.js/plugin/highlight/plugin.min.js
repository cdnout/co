import hljs from"highlight.js";!function(e,t){"use strict";function n(n){try{var r=t.querySelectorAll("code.hljs,code.nohighlight");for(var l in r)r.hasOwnProperty(l)&&i(r[l],n)}catch(t){e.console.error("LineNumbers error: ",t)}}function i(e,t){"object"==typeof e&&function(e){e()}(function(){e.innerHTML=r(e,t)})}function r(e,t){var n=(t=t||{singleLine:!1}).singleLine?0:1;return function e(t){var n=t.childNodes;for(var i in n)if(n.hasOwnProperty(i)){var r=n[i];a(r.textContent)>0&&(r.childNodes.length>0?e(r):l(r.parentNode))}}(e),function(e,t){var n=o(e);if(""===n[n.length-1].trim()&&n.pop(),n.length>t){for(var i="",r=0,l=n.length;r<l;r++)i+=s('<tr><td class="{0}"><div class="{1} {2}" {3}="{5}"></div></td><td class="{4}"><div class="{1}">{6}</div></td></tr>',[g,h,d,f,u,r+1,n[r].length>0?n[r]:" "]);return s('<table class="{0}">{1}</table>',[c,i])}return e}(e.innerHTML,n)}function l(e){var t=e.className;if(/hljs-/.test(t)){for(var n=o(e.innerHTML),i=0,r="";i<n.length;i++){r+=s('<span class="{0}">{1}</span>\n',[t,n[i].length>0?n[i]:" "])}e.innerHTML=r.trim()}}function o(e){return 0===e.length?[]:e.split(p)}function a(e){return(e.trim().match(p)||[]).length}function s(e,t){return e.replace(/\{(\d+)\}/g,function(e,n){return t[n]?t[n]:e})}var c="hljs-ln",h="hljs-ln-line",u="hljs-ln-code",g="hljs-ln-numbers",d="hljs-ln-n",f="data-line-number",p=/\r\n|\r|\n/g;hljs?(hljs.initLineNumbersOnLoad=function(i){"interactive"===t.readyState||"complete"===t.readyState?n(i):e.addEventListener("DOMContentLoaded",function(){n(i)})},hljs.lineNumbersBlock=i,hljs.lineNumbersValue=function(e,t){if("string"==typeof e){var n=document.createElement("code");return n.innerHTML=e,r(n,t)}},function(){var e=t.createElement("style");e.type="text/css",e.innerHTML=s(".{0}{border-collapse:collapse}.{0} td{padding:0}.{1}:before{content:attr({2})}",[c,d,f]),t.getElementsByTagName("head")[0].appendChild(e)}()):e.console.error("highlight.js not detected!")}(window,document);const Plugin={id:"highlight",HIGHLIGHT_STEP_DELIMITER:"|",HIGHLIGHT_LINE_DELIMITER:",",HIGHLIGHT_LINE_RANGE_DELIMITER:"-",hljs:hljs,init:function(e){var t=e.getConfig().highlight||{};t.highlightOnLoad="boolean"!=typeof t.highlightOnLoad||t.highlightOnLoad,t.escapeHTML="boolean"!=typeof t.escapeHTML||t.escapeHTML,[].slice.call(e.getRevealElement().querySelectorAll("pre code")).forEach(function(e){let n=e.querySelector('script[type="text/template"]');n&&(e.textContent=n.innerHTML),e.hasAttribute("data-trim")&&"function"==typeof e.innerHTML.trim&&(e.innerHTML=betterTrim(e)),t.escapeHTML&&!e.hasAttribute("data-noescape")&&(e.innerHTML=e.innerHTML.replace(/</g,"&lt;").replace(/>/g,"&gt;")),e.addEventListener("focusout",function(e){hljs.highlightBlock(e.currentTarget)},!1),t.highlightOnLoad&&Plugin.highlightBlock(e)}),e.on("pdf-ready",function(){[].slice.call(e.getRevealElement().querySelectorAll("pre code[data-line-numbers].current-fragment")).forEach(function(e){Plugin.scrollHighlightedLineIntoView(e,{},!0)})})},highlightBlock:function(e){if(hljs.highlightBlock(e),0!==e.innerHTML.trim().length&&e.hasAttribute("data-line-numbers")){hljs.lineNumbersBlock(e,{singleLine:!0});var t={currentBlock:e},n=Plugin.deserializeHighlightSteps(e.getAttribute("data-line-numbers"));if(n.length>1){var i=parseInt(e.getAttribute("data-fragment-index"),10);("number"!=typeof i||isNaN(i))&&(i=null),n.slice(1).forEach(function(n){var r=e.cloneNode(!0);r.setAttribute("data-line-numbers",Plugin.serializeHighlightSteps([n])),r.classList.add("fragment"),e.parentNode.appendChild(r),Plugin.highlightLines(r),"number"==typeof i?(r.setAttribute("data-fragment-index",i),i+=1):r.removeAttribute("data-fragment-index"),r.addEventListener("visible",Plugin.scrollHighlightedLineIntoView.bind(Plugin,r,t)),r.addEventListener("hidden",Plugin.scrollHighlightedLineIntoView.bind(Plugin,r.previousSibling,t))}),e.removeAttribute("data-fragment-index"),e.setAttribute("data-line-numbers",Plugin.serializeHighlightSteps([n[0]]))}var r="function"==typeof e.closest?e.closest("section:not(.stack)"):null;if(r){var l=function(){Plugin.scrollHighlightedLineIntoView(e,t,!0),r.removeEventListener("visible",l)};r.addEventListener("visible",l)}Plugin.highlightLines(e)}},scrollHighlightedLineIntoView:function(e,t,n){cancelAnimationFrame(t.animationFrameID),t.currentBlock&&(e.scrollTop=t.currentBlock.scrollTop),t.currentBlock=e;var i=this.getHighlightedLineBounds(e),r=e.offsetHeight,l=getComputedStyle(e);r-=parseInt(l.paddingTop)+parseInt(l.paddingBottom);var o=e.scrollTop,a=i.top+(Math.min(i.bottom-i.top,r)-r)/2,s=e.querySelector(".hljs-ln");if(s&&(a+=s.offsetTop-parseInt(l.paddingTop)),a=Math.max(Math.min(a,e.scrollHeight-r),0),!0===n||o===a)e.scrollTop=a;else{if(e.scrollHeight<=r)return;var c=0,h=function(){c=Math.min(c+.02,1),e.scrollTop=o+(a-o)*Plugin.easeInOutQuart(c),c<1&&(t.animationFrameID=requestAnimationFrame(h))};h()}},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},getHighlightedLineBounds:function(e){var t=e.querySelectorAll(".highlight-line");if(0===t.length)return{top:0,bottom:0};var n=t[0],i=t[t.length-1];return{top:n.offsetTop,bottom:i.offsetTop+i.offsetHeight}},highlightLines:function(e,t){var n=Plugin.deserializeHighlightSteps(t||e.getAttribute("data-line-numbers"));n.length&&n[0].forEach(function(t){var n=[];"number"==typeof t.end?n=[].slice.call(e.querySelectorAll("table tr:nth-child(n+"+t.start+"):nth-child(-n+"+t.end+")")):"number"==typeof t.start&&(n=[].slice.call(e.querySelectorAll("table tr:nth-child("+t.start+")"))),n.length&&(n.forEach(function(e){e.classList.add("highlight-line")}),e.classList.add("has-highlights"))})},deserializeHighlightSteps:function(e){return(e=(e=e.replace(/\s/g,"")).split(Plugin.HIGHLIGHT_STEP_DELIMITER)).map(function(e){return e.split(Plugin.HIGHLIGHT_LINE_DELIMITER).map(function(e){if(/^[\d-]+$/.test(e)){e=e.split(Plugin.HIGHLIGHT_LINE_RANGE_DELIMITER);var t=parseInt(e[0],10),n=parseInt(e[1],10);return isNaN(n)?{start:t}:{start:t,end:n}}return{}})})},serializeHighlightSteps:function(e){return e.map(function(e){return e.map(function(e){return"number"==typeof e.end?e.start+Plugin.HIGHLIGHT_LINE_RANGE_DELIMITER+e.end:"number"==typeof e.start?e.start:""}).join(Plugin.HIGHLIGHT_LINE_DELIMITER)}).join(Plugin.HIGHLIGHT_STEP_DELIMITER)}};function betterTrim(e){function t(e){return e.replace(/^[\s\uFEFF\xA0]+/g,"")}return function(e){var n=function(e){for(var t=e.split("\n"),n=0;n<t.length&&""===t[n].trim();n++)t.splice(n--,1);for(n=t.length-1;n>=0&&""===t[n].trim();n--)t.splice(n,1);return t.join("\n")}(e.innerHTML).split("\n"),i=n.reduce(function(e,n){return n.length>0&&t(n).length>0&&e>n.length-t(n).length?n.length-t(n).length:e},Number.POSITIVE_INFINITY);return n.map(function(e,t){return e.slice(i)}).join("\n")}(e)}export default()=>Plugin;