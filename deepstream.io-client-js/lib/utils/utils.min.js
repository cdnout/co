"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},C=require("../constants/constants"),TRIM_REGULAR_EXPRESSION=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,OBJECT="object";exports.isNode="undefined"!=typeof process&&"[object process]"===process.toString(),exports.nextTick=function(t){exports.isNode?process.nextTick(t):setTimeout(t,0)},exports.trim=function(t){return t.trim?t.trim():t.replace(TRIM_REGULAR_EXPRESSION,"")},exports.deepEquals=function(t,e){return t===e||(void 0===t?"undefined":_typeof(t))===OBJECT&&(void 0===e?"undefined":_typeof(e))===OBJECT&&JSON.stringify(t)===JSON.stringify(e)},exports.deepCopy=function(t){return(void 0===t?"undefined":_typeof(t))===OBJECT?JSON.parse(JSON.stringify(t)):t},exports.shallowCopy=function(t){if(Array.isArray(t))return t.slice(0);if((void 0===t?"undefined":_typeof(t))!==OBJECT)return t;for(var e=Object.create(null),o=Object.keys(t),r=0;r<o.length;r++)e[o[r]]=t[o[r]];return e},exports.setTimeout=function(t,e){return null!==e?setTimeout(t,e):-1},exports.setInterval=function(t,e){return null!==e?setInterval(t,e):-1},exports.requestIdleCallback=!exports.isNode&&window.requestIdleCallback&&window.requestIdleCallback.bind(window)||function(t){var e=Date.now();return setTimeout(function(){t({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-e))}})},1)},exports.cancelIdleCallback=!exports.isNode&&window.cancelIdleCallback&&window.cancelIdleCallback.bind(window)||function(t){clearTimeout(t)};var hasUrlProtocol=/^wss:|^ws:|^\/\//,unsupportedProtocol=/^http:|^https:/,URL=require("url");exports.parseUrl=function(t,e){var o=t;if(unsupportedProtocol.test(o))throw new Error("Only ws and wss are supported");hasUrlProtocol.test(o)?0===o.indexOf("//")&&(o="ws:"+o):o="ws://"+o;var r=URL.parse(o);if(!r.host)throw new Error("invalid url, missing host");return r.protocol=r.protocol?r.protocol:"ws:","/"===r.pathname&&"/"!==t.charAt(t.length-1)&&(r.pathname=e),r.pathname=r.pathname?r.pathname:e,URL.format(r)},exports.isConnected=function(t){return t.getConnectionState()===C.CONNECTION_STATE.OPEN};