"use strict";var C=require("../constants/constants"),ResubscribeNotifier=function(e,n){this._client=e,this._resubscribe=n,this._isReconnecting=!1,this._connectionStateChangeHandler=this._handleConnectionStateChanges.bind(this),this._client.on("connectionStateChanged",this._connectionStateChangeHandler)};ResubscribeNotifier.prototype.destroy=function(){this._client.removeListener("connectionStateChanged",this._connectionStateChangeHandler),this._connectionStateChangeHandler=null,this._client=null},ResubscribeNotifier.prototype._handleConnectionStateChanges=function(){var e=this._client.getConnectionState();e===C.CONNECTION_STATE.RECONNECTING&&!1===this._isReconnecting&&(this._isReconnecting=!0),e===C.CONNECTION_STATE.OPEN&&!0===this._isReconnecting&&(this._isReconnecting=!1,this._resubscribe())},module.exports=ResubscribeNotifier;