!function(e,t){"object"==typeof module&&"object"==typeof exports?module.exports=t:"function"==typeof define&&define.amd?define(t):(e.NW||(e.NW={}),e.NW.Dom=t(e))}(this,function(e){var t,n,r,i,a,o,l,s,c,u,f,g,d,m,p,h,E,N,C,x,v,b,S,y=e.document,A=y.documentElement,R="(?:[#.:]|::)?",I="[\\x20\\t\\n\\r\\f]",T="\\[.*\\]|\\(.*\\)|\\{.*\\}",O='"[^"\\\\]*(?:\\\\.[^"\\\\]*)*"'+"|'[^'\\\\]*(?:\\\\.[^'\\\\]*)*'",k=/([^,\\()[\]]+|\[[^[\]]*\]|\[.*\]|\([^()]+\)|\(.*\)|\{[^{}]+\}|\{.*\}|\\.)+/g,w=RegExp("[\\n\\r\\f]|^"+I+"+|"+I+"+$","g"),U=/\\([0-9a-fA-F]{1,6}[\x20\t\n\r\f]?|.)|([\x22\x27])/g,L={children:RegExp("^"+I+"*\\>"+I+"*(.*)"),adjacent:RegExp("^"+I+"*\\+"+I+"*(.*)"),relative:RegExp("^"+I+"*\\~"+I+"*(.*)"),ancestor:RegExp("^"+I+"+(.*)"),universal:RegExp("^\\*(.*)")},D={prefixes:R,identifier:v,attributes:m},B="getElementsByTagName"in y,H="getElementsByClassName"in y,G="function"!=typeof y.addEventListener,P={checked:1,disabled:1,ismap:1,multiple:1,readonly:1,selected:1},$={value:"defaultValue",checked:"defaultChecked",selected:"defaultSelected"},_={action:2,cite:2,codebase:2,data:2,href:2,longdesc:2,lowsrc:2,src:2,usemap:2},j={accept:1,"accept-charset":1,align:1,alink:1,axis:1,bgcolor:1,charset:1,checked:1,clear:1,codetype:1,color:1,compact:1,declare:1,defer:1,dir:1,direction:1,disabled:1,enctype:1,face:1,frame:1,hreflang:1,"http-equiv":1,lang:1,language:1,link:1,media:1,method:1,multiple:1,nohref:1,noresize:1,noshade:1,nowrap:1,readonly:1,rel:1,rev:1,rules:1,scope:1,scrolling:1,selected:1,shape:1,target:1,text:1,type:1,valign:1,valuetype:1,vlink:1},F="nextElementSibling"in A&&"previousElementSibling"in A,M={},V={"=":"n=='%m'","^=":"n.indexOf('%m')==0","*=":"n.indexOf('%m')>-1","|=":"(n+'-').indexOf('%m-')==0","~=":"(' '+n+' ').indexOf(' %m ')>-1","$=":"n.substr(n.length-'%m'.length)=='%m'"},z=function(e,t,n){for(var r,i=-1;(r=t[++i])&&!1!==n(e[e.length]=r););return e},Q=function(e,t){var n=y;i=e,y=e.ownerDocument||e,(t||n!==y)&&(A=y.documentElement,S="DiV"==y.createElement("DiV").nodeName,b=S||"string"!=typeof y.compatMode?function(){var e=y.createElement("div").style;return e&&(e.width=1)&&"1px"==e.width}():y.compatMode.indexOf("CSS")<0,re.CACHING&&Ne.setCache(!0,y))},W=function(e){if(e<1||e>1114111||e>55295&&e<57344)return"\\ufffd";if(e<65536){var t="000"+e.toString(16);return"\\u"+t.substr(t.length-4)}return"\\u"+(55296+(e-65536>>10)).toString(16)+"\\u"+((e-65536)%1024+56320).toString(16)},Y=function(e){return e<1||e>1114111||e>55295&&e<57344?"�":e<65536?String.fromCharCode(e):String.fromCodePoint?String.fromCodePoint(e):String.fromCharCode(55296+(e-65536>>10),(e-65536)%1024+56320)},Z=function(e){return e.replace(U,function(e,t,n){return n?"\\"+n:/^[0-9a-fA-F]/.test(t)?W(parseInt(t,16)):/^[\\\x22\x27]/.test(t)?e:t})},q=function(e){return e.replace(U,function(e,t,n){return n||(/^[0-9a-fA-F]/.test(t)?Y(parseInt(t,16)):/^[\\\x22\x27]/.test(t)?e:t)})},J=function(e,t){for(var n,r=-1;(n=t[++r])&&n.getAttribute("id")!=e;);return n||null},K=G?function(e,t){var n=null;return e=/\\/.test(e)?q(e):e,S||9!=t.nodeType?J(e,t.getElementsByTagName("*")):(n=t.getElementById(e))&&n.name==e&&t.getElementsByName?J(e,t.getElementsByName(e)):n}:function(e,t){return e=/\\/.test(e)?q(e):e,t.getElementById&&t.getElementById(e)||J(e,t.getElementsByTagName("*"))},X=function(e,t){var n="*"==e,r=t,i=[],a=r.firstChild;for(n||(e=e.toUpperCase());r=a;)if(r.tagName>"@"&&(n||r.tagName.toUpperCase()==e)&&(i[i.length]=r),!(a=r.firstChild||r.nextSibling))for(;!a&&(r=r.parentNode)&&r!==t;)a=r.nextSibling;return i},ee=G?function(e,t){return t=t.toLowerCase(),"object"==typeof e[t]?e.attributes[t]&&e.attributes[t].value:"type"==t?e.getAttribute(t):_[t]?e.getAttribute(t,2):P[t]?e.getAttribute(t)?t:"false":(e=e.getAttributeNode(t))&&e.value}:function(e,t){return e.getAttribute(t)},te=!G&&A.hasAttribute?function(e,t){return e.hasAttribute(t)}:function(e,t){var n=e.getAttributeNode(t=t.toLowerCase());return $[t]&&"value"!=t?e[$[t]]:n&&n.specified},ne=function(e){if(re.VERBOSITY)throw Error(e);re.LOGERRORS&&console&&console.log&&console.log(e)},re={CACHING:!1,ESCAPECHR:!0,NON_ASCII:!0,SELECTOR3:!0,UNICODE16:!0,SHORTCUTS:!1,SIMPLENOT:!0,UNIQUE_ID:!0,USE_HTML5:!0,VERBOSITY:!0,LOGERRORS:!0},ie=function(){var e="",t=re.SELECTOR3?"-{2}|":"";re.NON_ASCII&&(e+="|[^\\x00-\\x9f]"),re.UNICODE16&&(e+="|\\\\[0-9a-fA-F]{1,6}(?:\\r\\n|[\\x20\\t\\n\\r\\f])?"),re.ESCAPECHR&&(e+="|\\\\[^\\n\\r\\f0-9a-fA-F]"),e+=re.UNICODE16||re.ESCAPECHR?"":"|\\\\.",p=(m=I+"*("+(v="-?(?:"+t+"[_a-zA-Z]"+e+")(?:-|[0-9]|[_a-zA-Z]"+e+")*")+"(?::"+v+")?)"+I+"*(?:([~*^$|!]?={1})"+I+"*"+(d="("+O+"|"+v+")")+")?"+I+"*").replace(d,"([\\x22\\x27]*)((?:\\\\?.)*?)\\3"),u="(?=[\\x20\\t\\n\\r\\f]*[^>+~(){}<>])(\\*|(?:"+R+v+")|\\x20|[>+~](?=[^>+~])|\\["+m+"\\]|\\("+(h="((?:(?:[-+]?\\d*n)?[-+]?\\d*|"+O+"|"+R+v+"|\\["+m+"\\]|\\(.+\\)|"+I+"*|,)+)")+"\\)|\\{.+\\}|(?:,|"+I+"*))+",N=RegExp("^((?!:not)("+R+v+"|\\([^()]*\\))+|\\["+m+"\\])$"),C=RegExp("("+R+v+"|\\["+m+"\\]|\\("+h+"\\)|\\\\.|[^\\x20\\t\\n\\r\\f>+~])+","g"),E=RegExp(v+"|^$"),x={ID:RegExp("^\\*?#("+v+")|"+T),TAG:RegExp("^("+v+")|"+T),CLASS:RegExp("^\\.("+v+"$)|"+T)},L.id=RegExp("^#("+v+")(.*)"),L.tagName=RegExp("^("+v+")(.*)"),L.className=RegExp("^\\.("+v+")(.*)"),L.attribute=RegExp("^\\["+p+"\\](.*)"),D.identifier=v,D.attributes=m,f=u.replace(h,".*"),g=RegExp(u)},ae="r[r.length]=c[k];if(f&&false===f(c[k]))break main;else continue main;",oe=G?'if(e.nodeName<"A")continue;':"",le=G?".toUpperCase()":"",se=function(e,t,n){var r="string"==typeof e?e.match(k):e;if("string"==typeof t||(t=""),1==r.length)t+=ce(r[0],n?ae:"f&&f(k);return true;",n);else for(var i,a=-1,o={};i=r[++a];)!o[i=i.replace(w,"")]&&(o[i]=!0)&&(t+=ce(i,n?ae:"f&&f(k);return true;",n));return n?Function("c,s,d,h,g,f","var N,n,x=0,k=-1,e,r=[];main:while((e=c[++k])){"+t+"}return r;"):Function("e,s,d,h,g,f","var N,n,x=0,k=e;"+t+"return false;")},ce=function(e,t,n){for(var r,i,a,o,l,s,c=0;e;){if(c++,i=e.match(L.universal))r="";else if(i=e.match(L.id))i[1]=/\\/.test(i[1])?Z(i[1]):i[1],t="if("+(S?'s.getAttribute(e,"id")':'(e.submit?s.getAttribute(e,"id"):e.id)')+'=="'+i[1]+'"){'+t+"}";else if(i=e.match(L.tagName))t="if(e.nodeName"+(S?'=="'+i[1]+'"':le+'=="'+i[1].toUpperCase()+'"')+"){"+t+"}";else if(i=e.match(L.className))i[1]=/\\/.test(i[1])?Z(i[1]):i[1],i[1]=b?i[1].toLowerCase():i[1],t="if((n="+(S?'e.getAttribute("class")':"e.className")+')&&n.length&&(" "+'+(b?"n.toLowerCase()":"n")+".replace(/"+I+'+/g," ")+" ").indexOf(" '+i[1]+' ")>-1){'+t+"}";else if(i=e.match(L.attribute)){if(r=i[1].split(":"),r=2==r.length?r[1]:r[0]+"",i[2]&&!V[i[2]])return ne('Unsupported operator in attribute selectors "'+e+'"'),"";l="false",i[2]&&i[4]&&(l=V[i[2]])?(i[4]=/\\/.test(i[4])?Z(i[4]):i[4],s=S?0:j[r.toLowerCase()],l=l.replace(/\%m/g,s?i[4].toLowerCase():i[4])):"!="!=i[2]&&"="!=i[2]||(l="n"+i[2]+'=""'),t='if(n=s.hasAttribute(e,"'+i[1]+'")){'+(i[2]?'n=s.getAttribute(e,"'+i[1]+'")':"")+(s&&i[2]?".toLowerCase();":";")+"if("+(i[2]?l:"n")+"){"+t+"}}"}else if(i=e.match(L.adjacent))t=F?"var N"+c+"=e;if((e=e.previousElementSibling)){"+t+"}e=N"+c+";":"var N"+c+"=e;while((e=e.previousSibling)){if(e.nodeType==1){"+t+"break;}}e=N"+c+";";else if(i=e.match(L.relative))t=F?"var N"+c+"=e;while((e=e.previousElementSibling)){"+t+"}e=N"+c+";":"var N"+c+"=e;while((e=e.previousSibling)){if(e.nodeType==1){"+t+"}}e=N"+c+";";else if(i=e.match(L.children))t="var N"+c+"=e;if((e=e.parentNode)&&e.nodeType==1){"+t+"}e=N"+c+";";else if(i=e.match(L.ancestor))t="var N"+c+"=e;while((e=e.parentNode)&&e.nodeType==1){"+t+"}e=N"+c+";";else{r=!1,o=!1;for(r in M)if((i=e.match(M[r].Expression))&&i[1]&&("match"in(a=M[r].Callback(i,t))&&(i=a.match),t=a.source,o=a.status))break;if(!o)return ne('Unknown pseudo-class selector "'+e+'"'),"";if(!r)return ne('Unknown token in selector "'+e+'"'),""}if(!i)return ne('Invalid syntax in selector "'+e+'"'),"";e=i&&i[i.length-1]}return t},ue=function(e,n,r,a){var l;if(!e||1!=e.nodeType)return ne("Invalid element argument"),!1;if("string"!=typeof n)return ne("Invalid selector argument"),!1;if(i!==r&&Q(r||(r=e.ownerDocument)),n=n.replace(w,"").replace(/\x00|\\$/g,"�"),re.SHORTCUTS&&(n=Ne.shortcuts(n,e,r)),o!=n){if(!(l=n.match(g))||l[0]!=n)return ne('The string "'+n+'", is not a valid CSS selector'),!1;t=(l=n.match(k)).length<2,o=n,s=l}else l=s;return me[n]&&de[n]===r||(me[n]=se(t?[n]:l,"",!1),de[n]=r),me[n](e,Ee,y,A,r,a)},fe=function(e,t,o){var s,u,f,d,m,p=e;if(0===arguments.length)return ne("Not enough arguments"),[];if("string"!=typeof e)return[];if(t&&!/1|9|11/.test(t.nodeType))return ne("Invalid or illegal context element"),[];if(i!==t&&Q(t||(t=y)),re.CACHING&&(f=Ne.loadResults(p,t,y,A)))return o?z([],f,o):f;if(e=e.replace(w,"").replace(/\x00|\\$/g,"�"),re.SHORTCUTS&&(e=Ne.shortcuts(e,t)),s=l!=e){if(!(d=e.match(g))||d[0]!=e)return ne('The string "'+e+'", is not a valid CSS selector'),[];n=(d=e.match(k)).length<2,l=e,c=d}else d=c;if(11==t.nodeType)f=X("*",t);else if(n){if(s&&(m=(d=e.match(C))[d.length-1],r=m.split(":not"),r=r[r.length-1],a=e.length-m.length),re.UNIQUE_ID&&(d=r.match(x.ID))&&(m=d[1])?(u=K(m,t))&&(ue(u,e)?(o&&o(u),f=[u]):f=[]):re.UNIQUE_ID&&(d=e.match(x.ID))&&(m=d[1])&&((u=K(m,y))?"#"+m==e?(o&&o(u),f=[u]):t=/[>+~]/.test(e)?u.parentNode:u:f=[]),f)return re.CACHING&&Ne.saveResults(p,t,y,f),f;if(!S&&B&&(d=r.match(x.TAG))&&(m=d[1])){if(0===(f=t.getElementsByTagName(m)).length)return[];e=e.slice(0,a)+e.slice(a).replace(m,"*")}else if(!S&&H&&(d=r.match(x.CLASS))&&(m=d[1])){if(0===(f=t.getElementsByClassName(q(m))).length)return[];e=e.slice(0,a)+e.slice(a).replace("."+m,E.test(e.charAt(e.indexOf(m)-1))?"":"*")}}return f||(f=G?/^(?:applet|object)$/i.test(t.nodeName)?t.children:X("*",t):t.getElementsByTagName("*")),he[e]&&pe[e]===t||(he[e]=se(n?[e]:d,oe,!0),pe[e]=t),f=he[e](f,Ee,y,A,t,o),re.CACHING&&Ne.saveResults(p,t,y,f),f},ge=function(e){return e},de={},me={},pe={},he={},Ee={byId:K,match:ue,select:fe,getAttribute:ee,hasAttribute:te},Ne={ACCEPT_NODE:ae,byId:function(e,t){return t||(t=y),i!==t&&Q(t),K(e,t)},match:ue,first:function(e,t){return fe(e,t,function(){return!1})[0]||null},select:fe,compile:se,configure:function(e){if("string"==typeof e)return!!re[e];if("object"!=typeof e)return re;for(var t in e)re[t]=!!e[t],"SIMPLENOT"==t&&(de={},me={},pe={},he={});return ie(),g=RegExp(re.SIMPLENOT?u:f),!0},setCache:ge,shortcuts:ge,loadResults:ge,saveResults:ge,emit:ne,Config:re,Snapshot:Ee,Operators:V,Selectors:M,Tokens:D,Version:"nwmatcher-1.4.2",registerOperator:function(e,t){V[e]||(V[e]=t)},registerSelector:function(e,t,n){M[e]||(M[e]={Expression:t,Callback:n})}};return function(e){ie(),Q(e,!0)}(y),Ne});