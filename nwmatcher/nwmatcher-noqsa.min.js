!function(e,t){"object"==typeof module&&"object"==typeof exports?module.exports=t:"function"==typeof define&&define.amd?define(t):(e.NW||(e.NW={}),e.NW.Dom=t(e))}(this,function(e){var t,n,i,r,a,s,o,l,c,f,u,d,p,m,g,h,b,E,N,v,y,x,C,S=e.document,k=S.documentElement,A="(?:[#.:]|::)?",I="[\\x20\\t\\n\\r\\f]",T="\\[.*\\]|\\(.*\\)|\\{.*\\}",R='"[^"\\\\]*(?:\\\\.[^"\\\\]*)*"'+"|'[^'\\\\]*(?:\\\\.[^'\\\\]*)*'",w=/([^,\\()[\]]+|\[[^[\]]*\]|\[.*\]|\([^()]+\)|\(.*\)|\{[^{}]+\}|\{.*\}|\\.)+/g,L=RegExp("[\\n\\r\\f]|^"+I+"+|"+I+"+$","g"),O=/\\([0-9a-fA-F]{1,6}[\x20\t\n\r\f]?|.)|([\x22\x27])/g,U={spseudos:/^\:(root|empty|(?:first|last|only)(?:-child|-of-type)|nth(?:-last)?(?:-child|-of-type)\(\s*(even|odd|(?:[-+]{0,1}\d*n\s*)?[-+]{0,1}\s*\d*)\s*\))?(.*)/i,dpseudos:/^\:(link|visited|target|active|focus|hover|checked|disabled|enabled|selected|lang\(([-\w]{2,})\)|not\(\s*(:nth(?:-last)?(?:-child|-of-type)\(\s*(?:even|odd|(?:[-+]{0,1}\d*n\s*)?[-+]{0,1}\s*\d*)\s*\)|[^()]*)\s*\))?(.*)/i,epseudos:/^((?:[:]{1,2}(?:after|before|first-letter|first-line))|(?:[:]{2,2}(?:selection|backdrop|placeholder)))?(.*)/i,children:RegExp("^"+I+"*\\>"+I+"*(.*)"),adjacent:RegExp("^"+I+"*\\+"+I+"*(.*)"),relative:RegExp("^"+I+"*\\~"+I+"*(.*)"),ancestor:RegExp("^"+I+"+(.*)"),universal:RegExp("^\\*(.*)")},D={prefixes:A,identifier:y,attributes:m},H="getElementsByTagName"in S,$="getElementsByClassName"in S,B="function"!=typeof S.addEventListener,P={a:1,A:1,area:1,AREA:1,link:1,LINK:1},_={checked:1,disabled:1,ismap:1,multiple:1,readonly:1,selected:1},M={value:"defaultValue",checked:"defaultChecked",selected:"defaultSelected"},F={action:2,cite:2,codebase:2,data:2,href:2,longdesc:2,lowsrc:2,src:2,usemap:2},G={accept:1,"accept-charset":1,align:1,alink:1,axis:1,bgcolor:1,charset:1,checked:1,clear:1,codetype:1,color:1,compact:1,declare:1,defer:1,dir:1,direction:1,disabled:1,enctype:1,face:1,frame:1,hreflang:1,"http-equiv":1,lang:1,language:1,link:1,media:1,method:1,multiple:1,nohref:1,noresize:1,noshade:1,nowrap:1,readonly:1,rel:1,rev:1,rules:1,scope:1,scrolling:1,selected:1,shape:1,target:1,text:1,type:1,valign:1,valuetype:1,vlink:1},j="nextElementSibling"in k&&"previousElementSibling"in k,V={},z={"=":"n=='%m'","^=":"n.indexOf('%m')==0","*=":"n.indexOf('%m')>-1","|=":"(n+'-').indexOf('%m-')==0","~=":"(' '+n+' ').indexOf(' %m ')>-1","$=":"n.substr(n.length-'%m'.length)=='%m'"},Q=function(e,t,n){for(var i,r=-1;(i=t[++r])&&!1!==n(e[e.length]=i););return e},W=function(e,t){var n=S;r=e,S=e.ownerDocument||e,(t||n!==S)&&(k=S.documentElement,C="DiV"==S.createElement("DiV").nodeName,x=C||"string"!=typeof S.compatMode?function(){var e=S.createElement("div").style;return e&&(e.width=1)&&"1px"==e.width}():S.compatMode.indexOf("CSS")<0,ae.CACHING&&ve.setCache(!0,S))},Y=function(e){if(e<1||e>1114111||e>55295&&e<57344)return"\\ufffd";if(e<65536){var t="000"+e.toString(16);return"\\u"+t.substr(t.length-4)}return"\\u"+(55296+(e-65536>>10)).toString(16)+"\\u"+((e-65536)%1024+56320).toString(16)},Z=function(e){return e<1||e>1114111||e>55295&&e<57344?"�":e<65536?String.fromCharCode(e):String.fromCodePoint?String.fromCodePoint(e):String.fromCharCode(55296+(e-65536>>10),(e-65536)%1024+56320)},q=function(e){return e.replace(O,function(e,t,n){return n?"\\"+n:/^[0-9a-fA-F]/.test(t)?Y(parseInt(t,16)):/^[\\\x22\x27]/.test(t)?e:t})},K=function(e){return e.replace(O,function(e,t,n){return n||(/^[0-9a-fA-F]/.test(t)?Z(parseInt(t,16)):/^[\\\x22\x27]/.test(t)?e:t)})},J=function(e,t){for(var n,i=-1;(n=t[++i])&&n.getAttribute("id")!=e;);return n||null},X=B?function(e,t){var n=null;return e=/\\/.test(e)?K(e):e,C||9!=t.nodeType?J(e,t.getElementsByTagName("*")):(n=t.getElementById(e))&&n.name==e&&t.getElementsByName?J(e,t.getElementsByName(e)):n}:function(e,t){return e=/\\/.test(e)?K(e):e,t.getElementById&&t.getElementById(e)||J(e,t.getElementsByTagName("*"))},ee=function(e,t){var n="*"==e,i=t,r=[],a=i.firstChild;for(n||(e=e.toUpperCase());i=a;)if(i.tagName>"@"&&(n||i.tagName.toUpperCase()==e)&&(r[r.length]=i),!(a=i.firstChild||i.nextSibling))for(;!a&&(i=i.parentNode)&&i!==t;)a=i.nextSibling;return r},te="compareDocumentPosition"in k?function(e,t){return 16==(16&e.compareDocumentPosition(t))}:"contains"in k?function(e,t){return e!==t&&e.contains(t)}:function(e,t){for(;t=t.parentNode;)if(t===e)return!0;return!1},ne=B?function(e,t){return t=t.toLowerCase(),"object"==typeof e[t]?e.attributes[t]&&e.attributes[t].value:"type"==t?e.getAttribute(t):F[t]?e.getAttribute(t,2):_[t]?e.getAttribute(t)?t:"false":(e=e.getAttributeNode(t))&&e.value}:function(e,t){return e.getAttribute(t)},ie=!B&&k.hasAttribute?function(e,t){return e.hasAttribute(t)}:function(e,t){var n=e.getAttributeNode(t=t.toLowerCase());return M[t]&&"value"!=t?e[M[t]]:n&&n.specified},re=function(e){if(ae.VERBOSITY)throw Error(e);ae.LOGERRORS&&console&&console.log&&console.log(e)},ae={CACHING:!1,ESCAPECHR:!0,NON_ASCII:!0,SELECTOR3:!0,UNICODE16:!0,SHORTCUTS:!1,SIMPLENOT:!0,UNIQUE_ID:!0,USE_HTML5:!0,VERBOSITY:!0,LOGERRORS:!0},se=function(){var e="",t=ae.SELECTOR3?"-{2}|":"";ae.NON_ASCII&&(e+="|[^\\x00-\\x9f]"),ae.UNICODE16&&(e+="|\\\\[0-9a-fA-F]{1,6}(?:\\r\\n|[\\x20\\t\\n\\r\\f])?"),ae.ESCAPECHR&&(e+="|\\\\[^\\n\\r\\f0-9a-fA-F]"),e+=ae.UNICODE16||ae.ESCAPECHR?"":"|\\\\.",g=(m=I+"*("+(y="-?(?:"+t+"[_a-zA-Z]"+e+")(?:-|[0-9]|[_a-zA-Z]"+e+")*")+"(?::"+y+")?)"+I+"*(?:([~*^$|!]?={1})"+I+"*"+(p="("+R+"|"+y+")")+")?"+I+"*").replace(p,"([\\x22\\x27]*)((?:\\\\?.)*?)\\3"),f="(?=[\\x20\\t\\n\\r\\f]*[^>+~(){}<>])(\\*|(?:"+A+y+")|\\x20|[>+~](?=[^>+~])|\\["+m+"\\]|\\("+(h="((?:(?:[-+]?\\d*n)?[-+]?\\d*|"+R+"|"+A+y+"|\\["+m+"\\]|\\(.+\\)|"+I+"*|,)+)")+"\\)|\\{.+\\}|(?:,|"+I+"*))+",E=RegExp("^((?!:not)("+A+y+"|\\([^()]*\\))+|\\["+m+"\\])$"),N=RegExp("("+A+y+"|\\["+m+"\\]|\\("+h+"\\)|\\\\.|[^\\x20\\t\\n\\r\\f>+~])+","g"),b=RegExp(y+"|^$"),v={ID:RegExp("^\\*?#("+y+")|"+T),TAG:RegExp("^("+y+")|"+T),CLASS:RegExp("^\\.("+y+"$)|"+T)},U.id=RegExp("^#("+y+")(.*)"),U.tagName=RegExp("^("+y+")(.*)"),U.className=RegExp("^\\.("+y+")(.*)"),U.attribute=RegExp("^\\["+g+"\\](.*)"),D.identifier=y,D.attributes=m,u=f.replace(h,".*"),d=RegExp(f)},oe="r[r.length]=c[k];if(f&&false===f(c[k]))break main;else continue main;",le=B?'if(e.nodeName<"A")continue;':"",ce=B?".toUpperCase()":"",fe=function(e,t,n){var i="string"==typeof e?e.match(w):e;if("string"==typeof t||(t=""),1==i.length)t+=ue(i[0],n?oe:"f&&f(k);return true;",n);else for(var r,a=-1,s={};r=i[++a];)!s[r=r.replace(L,"")]&&(s[r]=!0)&&(t+=ue(r,n?oe:"f&&f(k);return true;",n));return n?Function("c,s,d,h,g,f","var N,n,x=0,k=-1,e,r=[];main:while((e=c[++k])){"+t+"}return r;"):Function("e,s,d,h,g,f","var N,n,x=0,k=e;"+t+"return false;")},ue=function(e,t,n){for(var i,r,a,s,o,l,c,f,u,d=0;e;){if(d++,o=e.match(U.universal))s="";else if(o=e.match(U.id))o[1]=/\\/.test(o[1])?q(o[1]):o[1],t="if("+(C?'s.getAttribute(e,"id")':'(e.submit?s.getAttribute(e,"id"):e.id)')+'=="'+o[1]+'"){'+t+"}";else if(o=e.match(U.tagName))t="if(e.nodeName"+(C?'=="'+o[1]+'"':ce+'=="'+o[1].toUpperCase()+'"')+"){"+t+"}";else if(o=e.match(U.className))o[1]=/\\/.test(o[1])?q(o[1]):o[1],o[1]=x?o[1].toLowerCase():o[1],t="if((n="+(C?'e.getAttribute("class")':"e.className")+')&&n.length&&(" "+'+(x?"n.toLowerCase()":"n")+".replace(/"+I+'+/g," ")+" ").indexOf(" '+o[1]+' ")>-1){'+t+"}";else if(o=e.match(U.attribute)){if(s=o[1].split(":"),s=2==s.length?s[1]:s[0]+"",o[2]&&!z[o[2]])return re('Unsupported operator in attribute selectors "'+e+'"'),"";f="false",o[2]&&o[4]&&(f=z[o[2]])?(o[4]=/\\/.test(o[4])?q(o[4]):o[4],u=C?0:G[s.toLowerCase()],f=f.replace(/\%m/g,u?o[4].toLowerCase():o[4])):"!="!=o[2]&&"="!=o[2]||(f="n"+o[2]+'=""'),t='if(n=s.hasAttribute(e,"'+o[1]+'")){'+(o[2]?'n=s.getAttribute(e,"'+o[1]+'")':"")+(u&&o[2]?".toLowerCase();":";")+"if("+(o[2]?f:"n")+"){"+t+"}}"}else if(o=e.match(U.adjacent))t=j?"var N"+d+"=e;if((e=e.previousElementSibling)){"+t+"}e=N"+d+";":"var N"+d+"=e;while((e=e.previousSibling)){if(e.nodeType==1){"+t+"break;}}e=N"+d+";";else if(o=e.match(U.relative))t=j?"var N"+d+"=e;while((e=e.previousElementSibling)){"+t+"}e=N"+d+";":"var N"+d+"=e;while((e=e.previousSibling)){if(e.nodeType==1){"+t+"}}e=N"+d+";";else if(o=e.match(U.children))t="var N"+d+"=e;if((e=e.parentNode)&&e.nodeType==1){"+t+"}e=N"+d+";";else if(o=e.match(U.ancestor))t="var N"+d+"=e;while((e=e.parentNode)&&e.nodeType==1){"+t+"}e=N"+d+";";else if((o=e.match(U.spseudos))&&o[1])switch(o[1]){case"root":t=o[3]?"if(e===h||s.contains(h,e)){"+t+"}":"if(e===h){"+t+"}";break;case"empty":t="if(s.isEmpty(e)){"+t+"}";break;default:if(o[1]&&o[2]){if("n"==o[2]){t="if(e!==h){"+t+"}";break}"even"==o[2]?(i=2,r=0):"odd"==o[2]?(i=2,r=1):(r=(a=o[2].match(/(-?\d+)$/))?parseInt(a[1],10):0,i=(a=o[2].match(/(-?\d*)n/i))?parseInt(a[1],10):0,a&&"-"==a[1]&&(i=-1)),f=i>1?/last/i.test(o[1])?"(n-("+r+"))%"+i+"==0":"n>="+r+"&&(n-("+r+"))%"+i+"==0":i<-1?/last/i.test(o[1])?"(n-("+r+"))%"+i+"==0":"n<="+r+"&&(n-("+r+"))%"+i+"==0":0===i?"n=="+r:-1==i?"n<="+r:"n>="+r,t="if(e!==h){n=s["+(/-of-type/i.test(o[1])?'"nthOfType"':'"nthElement"')+"](e,"+(/last/i.test(o[1])?"true":"false")+");if("+f+"){"+t+"}}"}else i=/first/i.test(o[1])?"previous":"next",a=/only/i.test(o[1])?"previous":"next",r=/first|last/i.test(o[1]),t="if(e!==h){n=e;while((n=n."+i+"Sibling)"+(u=/-of-type/i.test(o[1])?"&&n.nodeName!=e.nodeName":'&&n.nodeName<"@"')+");if(!n){"+(r?t:"n=e;while((n=n."+a+"Sibling)"+u+");if(!n){"+t+"}")+"}}"}else if((o=e.match(U.dpseudos))&&o[1])switch(o[1].match(/^\w+/)[0]){case"not":if(s=o[3].replace(L,""),ae.SIMPLENOT&&!E.test(s))return re('Negation pseudo-class only accepts simple selectors "'+e+'"'),"";t="compatMode"in S?"if(!"+fe(s,"",!1)+"(e,s,d,h,g)){"+t+"}":'if(!s.match(e, "'+s.replace(/\x22/g,'\\"')+'",g)){'+t+"}";break;case"checked":t='if((typeof e.form!=="undefined"&&(/^(?:radio|checkbox)$/i).test(e.type)&&e.checked)'+(ae.USE_HTML5?"||(/^option$/i.test(e.nodeName)&&(e.selected||e.checked))":"")+"){"+t+"}";break;case"disabled":t='if(((typeof e.form!=="undefined"'+(ae.USE_HTML5?"":"&&!(/^hidden$/i).test(e.type)")+")||s.isLink(e))&&e.disabled===true){"+t+"}";break;case"enabled":t='if(((typeof e.form!=="undefined"'+(ae.USE_HTML5?"":"&&!(/^hidden$/i).test(e.type)")+")||s.isLink(e))&&e.disabled===false){"+t+"}";break;case"lang":f="",o[2]&&(f=o[2].substr(0,2)+"-"),t='do{(n=e.lang||"").toLowerCase();if((n==""&&h.lang=="'+o[2].toLowerCase()+'")||(n&&(n=="'+o[2].toLowerCase()+'"||n.substr(0,3)=="'+f.toLowerCase()+'"))){'+t+"break;}}while((e=e.parentNode)&&e!==g);";break;case"target":t="if(e.id==d.location.hash.slice(1)){"+t+"}";break;case"link":t="if(s.isLink(e)&&!e.visited){"+t+"}";break;case"visited":t="if(s.isLink(e)&&e.visited){"+t+"}";break;case"active":t="if(e===d.activeElement){"+t+"}";break;case"hover":t="if(e===d.hoverElement){"+t+"}";break;case"focus":t="hasFocus"in S?'if(e===d.activeElement&&d.hasFocus()&&(e.type||e.href||typeof e.tabIndex=="number")){'+t+"}":"if(e===d.activeElement&&(e.type||e.href)){"+t+"}";break;case"selected":t="if(/^option$/i.test(e.nodeName)&&(e.selected||e.checked)){"+t+"}"}else if((o=e.match(U.epseudos))&&o[1])t="if(!(/1|11/).test(e.nodeType)){"+t+"}";else{s=!1,c=!1;for(s in V)if((o=e.match(V[s].Expression))&&o[1]&&("match"in(l=V[s].Callback(o,t))&&(o=l.match),t=l.source,c=l.status))break;if(!c)return re('Unknown pseudo-class selector "'+e+'"'),"";if(!s)return re('Unknown token in selector "'+e+'"'),""}if(!o)return re('Invalid syntax in selector "'+e+'"'),"";e=o&&o[o.length-1]}return t},de=function(e,n,i,a){var o;if(!e||1!=e.nodeType)return re("Invalid element argument"),!1;if("string"!=typeof n)return re("Invalid selector argument"),!1;if(r!==i&&W(i||(i=e.ownerDocument)),n=n.replace(L,"").replace(/\x00|\\$/g,"�"),ae.SHORTCUTS&&(n=ve.shortcuts(n,e,i)),s!=n){if(!(o=n.match(d))||o[0]!=n)return re('The string "'+n+'", is not a valid CSS selector'),!1;t=(o=n.match(w)).length<2,s=n,l=o}else o=l;return he[n]&&ge[n]===i||(he[n]=fe(t?[n]:o,"",!1),ge[n]=i),he[n](e,Ne,S,k,i,a)},pe=function(e,t,s){var l,f,u,p,m,g=e;if(0===arguments.length)return re("Not enough arguments"),[];if("string"!=typeof e)return[];if(t&&!/1|9|11/.test(t.nodeType))return re("Invalid or illegal context element"),[];if(r!==t&&W(t||(t=S)),ae.CACHING&&(u=ve.loadResults(g,t,S,k)))return s?Q([],u,s):u;if(e=e.replace(L,"").replace(/\x00|\\$/g,"�"),ae.SHORTCUTS&&(e=ve.shortcuts(e,t)),l=o!=e){if(!(p=e.match(d))||p[0]!=e)return re('The string "'+e+'", is not a valid CSS selector'),[];n=(p=e.match(w)).length<2,o=e,c=p}else p=c;if(11==t.nodeType)u=ee("*",t);else if(n){if(l&&(m=(p=e.match(N))[p.length-1],i=m.split(":not"),i=i[i.length-1],a=e.length-m.length),ae.UNIQUE_ID&&(p=i.match(v.ID))&&(m=p[1])?(f=X(m,t))&&(de(f,e)?(s&&s(f),u=[f]):u=[]):ae.UNIQUE_ID&&(p=e.match(v.ID))&&(m=p[1])&&((f=X(m,S))?"#"+m==e?(s&&s(f),u=[f]):t=/[>+~]/.test(e)?f.parentNode:f:u=[]),u)return ae.CACHING&&ve.saveResults(g,t,S,u),u;if(!C&&H&&(p=i.match(v.TAG))&&(m=p[1])){if(0===(u=t.getElementsByTagName(m)).length)return[];e=e.slice(0,a)+e.slice(a).replace(m,"*")}else if(!C&&$&&(p=i.match(v.CLASS))&&(m=p[1])){if(0===(u=t.getElementsByClassName(K(m))).length)return[];e=e.slice(0,a)+e.slice(a).replace("."+m,b.test(e.charAt(e.indexOf(m)-1))?"":"*")}}return u||(u=B?/^(?:applet|object)$/i.test(t.nodeName)?t.children:ee("*",t):t.getElementsByTagName("*")),Ee[e]&&be[e]===t||(Ee[e]=fe(n?[e]:p,le,!0),be[e]=t),u=Ee[e](u,Ne,S,k,t,s),ae.CACHING&&ve.saveResults(g,t,S,u),u},me=function(e){return e},ge={},he={},be={},Ee={},Ne={byId:X,match:de,select:pe,isLink:function(e){return ie(e,"href")&&P[e.nodeName]},isEmpty:function(e){for(e=e.firstChild;e;){if(3==e.nodeType||e.nodeName>"@")return!1;e=e.nextSibling}return!0},contains:te,nthOfType:function(e,t){for(var n=1,i=t?"nextSibling":"previousSibling",r=e.nodeName;e=e[i];)e.nodeName==r&&++n;return n},nthElement:function(e,t){for(var n=1,i=t?"nextSibling":"previousSibling";e=e[i];)e.nodeName>"@"&&++n;return n},getAttribute:ne,hasAttribute:ie},ve={ACCEPT_NODE:oe,byId:function(e,t){return t||(t=S),r!==t&&W(t),X(e,t)},match:de,first:function(e,t){return pe(e,t,function(){return!1})[0]||null},select:pe,compile:fe,contains:te,configure:function(e){if("string"==typeof e)return!!ae[e];if("object"!=typeof e)return ae;for(var t in e)ae[t]=!!e[t],"SIMPLENOT"==t&&(ge={},he={},be={},Ee={});return se(),d=RegExp(ae.SIMPLENOT?f:u),!0},getAttribute:ne,hasAttribute:ie,setCache:me,shortcuts:me,loadResults:me,saveResults:me,emit:re,Config:ae,Snapshot:Ne,Operators:z,Selectors:V,Tokens:D,Version:"nwmatcher-1.4.2",registerOperator:function(e,t){z[e]||(z[e]=t)},registerSelector:function(e,t,n){V[e]||(V[e]={Expression:t,Callback:n})}};return function(e){se(),W(e,!0)}(S),ve});