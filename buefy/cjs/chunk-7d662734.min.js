"use strict";var helpers=require("./helpers.js"),__chunk_2=require("./chunk-0e70abe7.js"),__chunk_3=require("./chunk-089eb4d1.js"),AM="AM",PM="PM",HOUR_FORMAT_24="24",HOUR_FORMAT_12="12",defaultTimeFormatter=function(e,t){return t.dtf.format(e)},defaultTimeParser=function(e,t){if(e){var i=null;if(t.computedValue&&!isNaN(t.computedValue)?i=new Date(t.computedValue):(i=t.timeCreator()).setMilliseconds(0),t.dtf.formatToParts&&"function"==typeof t.dtf.formatToParts){var n=t.dtf.formatToParts(i).map(function(e){return"literal"===e.type?e.value.replace(/ /g,"\\s?"):"dayPeriod"===e.type?"((?!=<".concat(e.type,">)(").concat(t.amString,"|").concat(t.pmString,"|").concat(AM,"|").concat(PM,"|").concat(AM.toLowerCase(),"|").concat(PM.toLowerCase(),")?)"):"((?!=<".concat(e.type,">)\\d+)")}).join(""),s=helpers.matchWithGroups(n,e);if(s.hour=s.hour?parseInt(s.hour,10):null,s.minute=s.minute?parseInt(s.minute,10):null,s.second=s.second?parseInt(s.second,10):null,s.hour&&0<=s.hour&&s.hour<24&&s.minute&&0<=s.minute&&s.minute<59)return s.dayPeriod&&(s.dayPeriod.toLowerCase()===t.pmString.toLowerCase()||s.dayPeriod.toLowerCase()===PM.toLowerCase())&&s.hour<12&&(s.hour+=12),i.setHours(s.hour),i.setMinutes(s.minute),i.setSeconds(s.second||0),i}var r,o=!1;t.hourFormat===HOUR_FORMAT_12&&(e=(r=e.split(" "))[0],o=r[1]===t.amString||r[1]===AM);var u=e.split(":"),a=parseInt(u[0],10),l=parseInt(u[1],10),c=t.enableSeconds?parseInt(u[2],10):0;return isNaN(a)||a<0||23<a||t.hourFormat===HOUR_FORMAT_12&&(a<1||12<a)||isNaN(l)||l<0||59<l?null:(i.setSeconds(c),i.setMinutes(l),t.hourFormat===HOUR_FORMAT_12&&(o&&12===a?a=0:o||12===a||(a+=12)),i.setHours(a),new Date(i.getTime()))}return null},TimepickerMixin={mixins:[__chunk_3.FormElementMixin],inheritAttrs:!1,props:{value:Date,inline:Boolean,minTime:Date,maxTime:Date,placeholder:String,editable:Boolean,disabled:Boolean,hourFormat:{type:String,validator:function(e){return e===HOUR_FORMAT_24||e===HOUR_FORMAT_12}},incrementHours:{type:Number,default:1},incrementMinutes:{type:Number,default:1},incrementSeconds:{type:Number,default:1},timeFormatter:{type:Function,default:function(e,t){return"function"==typeof __chunk_2.config.defaultTimeFormatter?__chunk_2.config.defaultTimeFormatter(e):defaultTimeFormatter(e,t)}},timeParser:{type:Function,default:function(e,t){return"function"==typeof __chunk_2.config.defaultTimeParser?__chunk_2.config.defaultTimeParser(e):defaultTimeParser(e,t)}},mobileNative:{type:Boolean,default:function(){return __chunk_2.config.defaultTimepickerMobileNative}},timeCreator:{type:Function,default:function(){return"function"==typeof __chunk_2.config.defaultTimeCreator?__chunk_2.config.defaultTimeCreator():new Date}},position:String,unselectableTimes:Array,openOnFocus:Boolean,enableSeconds:Boolean,defaultMinutes:Number,defaultSeconds:Number,focusable:{type:Boolean,default:!0},tzOffset:{type:Number,default:0},appendToBody:Boolean,resetOnMeridianChange:{type:Boolean,default:!1}},data:function(){return{dateSelected:this.value,hoursSelected:null,minutesSelected:null,secondsSelected:null,meridienSelected:null,_elementRef:"input",AM:AM,PM:PM,HOUR_FORMAT_24:HOUR_FORMAT_24,HOUR_FORMAT_12:HOUR_FORMAT_12}},computed:{computedValue:{get:function(){return this.dateSelected},set:function(e){this.dateSelected=e,this.$emit("input",this.dateSelected)}},localeOptions:function(){return new Intl.DateTimeFormat(this.locale,{hour:"numeric",minute:"numeric",second:this.enableSeconds?"numeric":void 0}).resolvedOptions()},dtf:function(){return new Intl.DateTimeFormat(this.locale,{hour:this.localeOptions.hour||"numeric",minute:this.localeOptions.minute||"numeric",second:this.enableSeconds?this.localeOptions.second||"numeric":void 0,hour12:!this.isHourFormat24,timezome:"UTC"})},newHourFormat:function(){return this.hourFormat||(this.localeOptions.hour12?HOUR_FORMAT_12:HOUR_FORMAT_24)},sampleTime:function(){var e=this.timeCreator();return e.setHours(10),e.setSeconds(0),e.setMinutes(0),e.setMilliseconds(0),e},hourLiteral:function(){if(this.dtf.formatToParts&&"function"==typeof this.dtf.formatToParts){var e=this.sampleTime,i=this.dtf.formatToParts(e),t=i.find(function(e,t){return 0<t&&"hour"===i[t-1].type});if(t)return t.value}return":"},minuteLiteral:function(){if(this.dtf.formatToParts&&"function"==typeof this.dtf.formatToParts){var e=this.sampleTime,i=this.dtf.formatToParts(e),t=i.find(function(e,t){return 0<t&&"minute"===i[t-1].type});if(t)return t.value}return":"},secondLiteral:function(){if(this.dtf.formatToParts&&"function"==typeof this.dtf.formatToParts){var e=this.sampleTime,i=this.dtf.formatToParts(e),t=i.find(function(e,t){return 0<t&&"second"===i[t-1].type});if(t)return t.value}},amString:function(){if(this.dtf.formatToParts&&"function"==typeof this.dtf.formatToParts){var e=this.sampleTime;e.setHours(10);var t=this.dtf.formatToParts(e).find(function(e){return"dayPeriod"===e.type});if(t)return t.value}return this.AM},pmString:function(){if(this.dtf.formatToParts&&"function"==typeof this.dtf.formatToParts){var e=this.sampleTime;e.setHours(20);var t=this.dtf.formatToParts(e).find(function(e){return"dayPeriod"===e.type});if(t)return t.value}return this.PM},hours:function(){if(!this.incrementHours||this.incrementHours<1)throw new Error("Hour increment cannot be null or less than 1.");for(var e=[],t=this.isHourFormat24?24:12,i=0;i<t;i+=this.incrementHours){var n=i,s=n;this.isHourFormat24||(s=n=i+1,this.meridienSelected===this.amString||this.meridienSelected===this.AM?12===n&&(n=0):this.meridienSelected!==this.pmString&&this.meridienSelected!==this.PM||12!==n&&(n+=12)),e.push({label:this.formatNumber(s),value:n})}return e},minutes:function(){if(!this.incrementMinutes||this.incrementMinutes<1)throw new Error("Minute increment cannot be null or less than 1.");for(var e=[],t=0;t<60;t+=this.incrementMinutes)e.push({label:this.formatNumber(t,!0),value:t});return e},seconds:function(){if(!this.incrementSeconds||this.incrementSeconds<1)throw new Error("Second increment cannot be null or less than 1.");for(var e=[],t=0;t<60;t+=this.incrementSeconds)e.push({label:this.formatNumber(t,!0),value:t});return e},meridiens:function(){return[this.amString,this.pmString]},isMobile:function(){return this.mobileNative&&helpers.isMobile.any()},isHourFormat24:function(){return this.newHourFormat===HOUR_FORMAT_24}},watch:{hourFormat:function(){null!==this.hoursSelected&&(this.meridienSelected=12<=this.hoursSelected?this.pmString:this.amString)},value:{handler:function(e){this.updateInternalState(e),this.isValid||this.$refs.input.checkHtml5Validity()},immediate:!0}},methods:{onMeridienChange:function(e){null!==this.hoursSelected&&this.resetOnMeridianChange?(this.hoursSelected=null,this.minutesSelected=null,this.secondsSelected=null,this.computedValue=null):null!==this.hoursSelected&&(e===this.pmString||e===PM?this.hoursSelected+=12:e!==this.amString&&e!==AM||(this.hoursSelected-=12)),this.updateDateSelected(this.hoursSelected,this.minutesSelected,this.enableSeconds?this.secondsSelected:0,e)},onHoursChange:function(e){this.minutesSelected||void 0===this.defaultMinutes||(this.minutesSelected=this.defaultMinutes),this.secondsSelected||void 0===this.defaultSeconds||(this.secondsSelected=this.defaultSeconds),this.updateDateSelected(parseInt(e,10),this.minutesSelected,this.enableSeconds?this.secondsSelected:0,this.meridienSelected)},onMinutesChange:function(e){!this.secondsSelected&&this.defaultSeconds&&(this.secondsSelected=this.defaultSeconds),this.updateDateSelected(this.hoursSelected,parseInt(e,10),this.enableSeconds?this.secondsSelected:0,this.meridienSelected)},onSecondsChange:function(e){this.updateDateSelected(this.hoursSelected,this.minutesSelected,parseInt(e,10),this.meridienSelected)},updateDateSelected:function(e,t,i,n){var s;null!=e&&null!=t&&(!this.isHourFormat24&&null!==n||this.isHourFormat24)&&(s=null,this.computedValue&&!isNaN(this.computedValue)?s=new Date(this.computedValue):(s=this.timeCreator()).setMilliseconds(0),s.setHours(e),s.setMinutes(t),s.setSeconds(i),this.computedValue=new Date(s.getTime()))},updateInternalState:function(e){e?(this.hoursSelected=e.getHours(),this.minutesSelected=e.getMinutes(),this.secondsSelected=e.getSeconds(),this.meridienSelected=12<=e.getHours()?this.pmString:this.amString):(this.hoursSelected=null,this.minutesSelected=null,this.secondsSelected=null,this.meridienSelected=this.amString),this.dateSelected=e},isHourDisabled:function(i){var e,t,n=this,s=!1;return this.minTime&&(e=this.minTime.getHours(),t=this.minutes.every(function(e){return n.isMinuteDisabledForHour(i,e.value)}),s=i<e||t),this.maxTime&&(s=s||this.maxTime.getHours()<i),this.unselectableTimes&&(s=s||(0<this.unselectableTimes.filter(function(e){return n.enableSeconds&&null!==n.secondsSelected?e.getHours()===i&&e.getMinutes()===n.minutesSelected&&e.getSeconds()===n.secondsSelected:null!==n.minutesSelected&&(e.getHours()===i&&e.getMinutes()===n.minutesSelected)}).length||this.minutes.every(function(t){return 0<n.unselectableTimes.filter(function(e){return e.getHours()===i&&e.getMinutes()===t.value}).length}))),s},isMinuteDisabledForHour:function(e,t){var i,n,s,r,o=!1;return this.minTime&&(i=this.minTime.getHours(),n=this.minTime.getMinutes(),o=e===i&&t<n),this.maxTime&&(o||(s=this.maxTime.getHours(),r=this.maxTime.getMinutes(),o=e===s&&r<t)),o},isMinuteDisabled:function(t){var i=this,e=!1;return null!==this.hoursSelected&&(e=!!this.isHourDisabled(this.hoursSelected)||this.isMinuteDisabledForHour(this.hoursSelected,t),this.unselectableTimes&&(e=e||0<this.unselectableTimes.filter(function(e){return i.enableSeconds&&null!==i.secondsSelected?e.getHours()===i.hoursSelected&&e.getMinutes()===t&&e.getSeconds()===i.secondsSelected:e.getHours()===i.hoursSelected&&e.getMinutes()===t}).length)),e},isSecondDisabled:function(t){var e,i,n,s,r,o,u=this,a=!1;return null!==this.minutesSelected&&(this.isMinuteDisabled(this.minutesSelected)?a=!0:(this.minTime&&(e=this.minTime.getHours(),i=this.minTime.getMinutes(),n=this.minTime.getSeconds(),a=this.hoursSelected===e&&this.minutesSelected===i&&t<n),this.maxTime&&(a||(s=this.maxTime.getHours(),r=this.maxTime.getMinutes(),o=this.maxTime.getSeconds(),a=this.hoursSelected===s&&this.minutesSelected===r&&o<t))),this.unselectableTimes&&(a=a||0<this.unselectableTimes.filter(function(e){return e.getHours()===u.hoursSelected&&e.getMinutes()===u.minutesSelected&&e.getSeconds()===t}).length)),a},onChange:function(e){var t=this.timeParser(e,this);this.updateInternalState(t),t&&!isNaN(t)?this.computedValue=t:(this.computedValue=null,this.$refs.input.newValue=this.computedValue)},toggle:function(e){this.$refs.dropdown&&(this.$refs.dropdown.isActive="boolean"==typeof e?e:!this.$refs.dropdown.isActive)},close:function(){this.toggle(!1)},handleOnFocus:function(){this.onFocus(),this.openOnFocus&&this.toggle(!0)},formatHHMMSS:function(e){var t=new Date(e);if(!e||isNaN(t))return"";var i=t.getHours(),n=t.getMinutes(),s=t.getSeconds();return this.formatNumber(i,!0)+":"+this.formatNumber(n,!0)+":"+this.formatNumber(s,!0)},onChangeNativePicker:function(e){var t,i,n=e.target.value;n?(t=null,this.computedValue&&!isNaN(this.computedValue)?t=new Date(this.computedValue):(t=new Date).setMilliseconds(0),i=n.split(":"),t.setHours(parseInt(i[0],10)),t.setMinutes(parseInt(i[1],10)),t.setSeconds(i[2]?parseInt(i[2],10):0),this.computedValue=new Date(t.getTime())):this.computedValue=null},formatNumber:function(e,t){return this.isHourFormat24||t?this.pad(e):e},pad:function(e){return(e<10?"0":"")+e},formatValue:function(e){return e&&!isNaN(e)?this.timeFormatter(e,this):null},keyPress:function(e){var t=e.key;this.$refs.dropdown&&this.$refs.dropdown.isActive&&("Escape"===t||"Esc"===t)&&this.toggle(!1)},onActiveChange:function(e){e||this.onBlur()}},created:function(){"undefined"!=typeof window&&document.addEventListener("keyup",this.keyPress)},beforeDestroy:function(){"undefined"!=typeof window&&document.removeEventListener("keyup",this.keyPress)}};exports.TimepickerMixin=TimepickerMixin;