"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var __chunk_1=require("./chunk-14c82365.js");require("./helpers.js");var __chunk_2=require("./chunk-0e70abe7.js");require("./chunk-089eb4d1.js");var __chunk_4=require("./chunk-dbd288d9.js"),__chunk_5=require("./chunk-13e039f5.js"),__chunk_6=require("./chunk-687ab17c.js");require("./chunk-b7119999.js");var __chunk_11=require("./chunk-7d662734.js");require("./chunk-ae7e641a.js");var __chunk_13=require("./chunk-bfaeef3e.js"),__chunk_14=require("./chunk-6c6b37c4.js"),indicatorSize=40,paddingInner=5,script={name:"BClockpickerFace",props:{pickerSize:Number,min:Number,max:Number,double:Boolean,value:Number,faceNumbers:Array,disabledValues:Function},data:function(){return{isDragging:!1,inputValue:this.value,prevAngle:720}},computed:{count:function(){return this.max-this.min+1},countPerRing:function(){return this.double?this.count/2:this.count},radius:function(){return this.pickerSize/2},outerRadius:function(){return this.radius-paddingInner-indicatorSize/2},innerRadius:function(){return Math.max(.6*this.outerRadius,this.outerRadius-paddingInner-indicatorSize)},degreesPerUnit:function(){return 360/this.countPerRing},degrees:function(){return this.degreesPerUnit*Math.PI/180},handRotateAngle:function(){for(var e=this.prevAngle;e<0;)e+=360;var i=this.calcHandAngle(this.displayedValue),t=this.shortestDistanceDegrees(e,i);return this.prevAngle+t},handScale:function(){return this.calcHandScale(this.displayedValue)},handStyle:function(){return{transform:"rotate(".concat(this.handRotateAngle,"deg) scaleY(").concat(this.handScale,")"),transition:".3s cubic-bezier(.25,.8,.50,1)"}},displayedValue:function(){return null==this.inputValue?this.min:this.inputValue}},watch:{value:function(e){e!==this.inputValue&&(this.prevAngle=this.handRotateAngle),this.inputValue=e}},methods:{isDisabled:function(e){return this.disabledValues&&this.disabledValues(e)},euclidean:function(e,i){var t=i.x-e.x,n=i.y-e.y;return Math.sqrt(t*t+n*n)},shortestDistanceDegrees:function(e,i){var t=(i-e)%360,n=180-Math.abs(Math.abs(t)-180);return(t+360)%360<180?1*n:-1*n},coordToAngle:function(e,i){var t=2*Math.atan2(i.y-e.y-this.euclidean(e,i),i.x-e.x);return Math.abs(180*t/Math.PI)},getNumberTranslate:function(e){var i=this.getNumberCoords(e),t=i.x,n=i.y;return"translate(".concat(t,"px, ").concat(n,"px)")},getNumberCoords:function(e){var i=this.isInnerRing(e)?this.innerRadius:this.outerRadius;return{x:Math.round(i*Math.sin((e-this.min)*this.degrees)),y:Math.round(-i*Math.cos((e-this.min)*this.degrees))}},getFaceNumberClasses:function(e){return{active:e.value===this.displayedValue,disabled:this.isDisabled(e.value)}},isInnerRing:function(e){return this.double&&e-this.min>=this.countPerRing},calcHandAngle:function(e){var i=this.degreesPerUnit*(e-this.min);return this.isInnerRing(e)&&(i-=360),i},calcHandScale:function(e){return this.isInnerRing(e)?this.innerRadius/this.outerRadius:1},onMouseDown:function(e){e.preventDefault(),this.isDragging=!0,this.onDragMove(e)},onMouseUp:function(){this.isDragging=!1,this.isDisabled(this.inputValue)||this.$emit("change",this.inputValue)},onDragMove:function(e){if(e.preventDefault(),this.isDragging||"click"===e.type){var i=this.$refs.clock.getBoundingClientRect(),t=i.width,n=i.top,s=i.left,r="touches"in e?e.touches[0]:e,c={x:t/2,y:-t/2},a={x:r.clientX-s,y:n-r.clientY},o=Math.round(this.coordToAngle(c,a)+360)%360,u=this.double&&this.euclidean(c,a)<(this.outerRadius+this.innerRadius)/2-16,l=Math.round(o/this.degreesPerUnit)+this.min+(u?this.countPerRing:0);o>=360-this.degreesPerUnit/2&&(l=u?this.max:this.min),this.update(l)}},update:function(e){this.inputValue===e||this.isDisabled(e)||(this.prevAngle=this.handRotateAngle,this.inputValue=e,this.$emit("input",e))}}};const __vue_script__=script;var __vue_render__=function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{staticClass:"b-clockpicker-face",on:{mousedown:e.onMouseDown,mouseup:e.onMouseUp,mousemove:e.onDragMove,touchstart:e.onMouseDown,touchend:e.onMouseUp,touchmove:e.onDragMove}},[t("div",{ref:"clock",staticClass:"b-clockpicker-face-outer-ring"},[t("div",{staticClass:"b-clockpicker-face-hand",style:e.handStyle}),e._l(e.faceNumbers,function(i,n){return t("span",{key:n,staticClass:"b-clockpicker-face-number",class:e.getFaceNumberClasses(i),style:{transform:e.getNumberTranslate(i.value)}},[t("span",[e._v(e._s(i.label))])])})],2)])},__vue_staticRenderFns__=[];const __vue_inject_styles__=void 0,__vue_scope_id__=void 0,__vue_module_identifier__=void 0,__vue_is_functional_template__=!1;var _components,ClockpickerFace=__chunk_5.__vue_normalize__({render:__vue_render__,staticRenderFns:__vue_staticRenderFns__},void 0,__vue_script__,void 0,!1,void 0,void 0,void 0),outerPadding=12,script$1={name:"BClockpicker",components:(_components={},__chunk_1._defineProperty(_components,ClockpickerFace.name,ClockpickerFace),__chunk_1._defineProperty(_components,__chunk_6.Input.name,__chunk_6.Input),__chunk_1._defineProperty(_components,__chunk_14.Field.name,__chunk_14.Field),__chunk_1._defineProperty(_components,__chunk_4.Icon.name,__chunk_4.Icon),__chunk_1._defineProperty(_components,__chunk_13.Dropdown.name,__chunk_13.Dropdown),__chunk_1._defineProperty(_components,__chunk_13.DropdownItem.name,__chunk_13.DropdownItem),_components),mixins:[__chunk_11.TimepickerMixin],props:{pickerSize:{type:Number,default:290},incrementMinutes:{type:Number,default:5},autoSwitch:{type:Boolean,default:!0},type:{type:String,default:"is-primary"},hoursLabel:{type:String,default:function(){return __chunk_2.config.defaultClockpickerHoursLabel||"Hours"}},minutesLabel:{type:String,default:function(){return __chunk_2.config.defaultClockpickerMinutesLabel||"Min"}}},data:function(){return{isSelectingHour:!0,isDragging:!1,_isClockpicker:!0}},computed:{hoursDisplay:function(){if(null==this.hoursSelected)return"--";if(this.isHourFormat24)return this.pad(this.hoursSelected);var e=this.hoursSelected;return this.meridienSelected!==this.pmString&&this.meridienSelected!==this.PM||(e-=12),0===e&&(e=12),e},minutesDisplay:function(){return null==this.minutesSelected?"--":this.pad(this.minutesSelected)},minFaceValue:function(){return!this.isSelectingHour||this.isHourFormat24||this.meridienSelected!==this.pmString&&this.meridienSelected!==this.PM?0:12},maxFaceValue:function(){return this.isSelectingHour?this.isHourFormat24||this.meridienSelected!==this.amString&&this.meridienSelected!==this.AM?23:11:59},faceSize:function(){return this.pickerSize-2*outerPadding},faceDisabledValues:function(){return this.isSelectingHour?this.isHourDisabled:this.isMinuteDisabled}},methods:{onClockInput:function(e){this.isSelectingHour?(this.hoursSelected=e,this.onHoursChange(e)):(this.minutesSelected=e,this.onMinutesChange(e))},onClockChange:function(e){this.autoSwitch&&this.isSelectingHour&&(this.isSelectingHour=!this.isSelectingHour)},onMeridienClick:function(e){this.meridienSelected!==e&&(this.meridienSelected=e,this.onMeridienChange(e))}}};const __vue_script__$1=script$1;var __vue_render__$1=function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{staticClass:"b-clockpicker control",class:[e.size,e.type,{"is-expanded":e.expanded}]},[!e.isMobile||e.inline?t("b-dropdown",{ref:"dropdown",attrs:{position:e.position,disabled:e.disabled,inline:e.inline,"append-to-body":e.appendToBody,"append-to-body-copy-parent":""},on:{"active-change":e.onActiveChange},scopedSlots:e._u([e.inline?null:{key:"trigger",fn:function(){return[e._t("trigger",[t("b-input",e._b({ref:"input",attrs:{slot:"trigger",autocomplete:"off",value:e.formatValue(e.computedValue),placeholder:e.placeholder,size:e.size,icon:e.icon,"icon-pack":e.iconPack,loading:e.loading,disabled:e.disabled,readonly:!e.editable,rounded:e.rounded,"use-html5-validation":e.useHtml5Validation},on:{focus:e.handleOnFocus,blur:function(i){e.onBlur()&&e.checkHtml5Validity()}},nativeOn:{click:function(i){return i.stopPropagation(),e.toggle(!0)},keyup:function(i){return!i.type.indexOf("key")&&e._k(i.keyCode,"enter",13,i.key,"Enter")?null:e.toggle(!0)},change:function(i){return e.onChange(i.target.value)}},slot:"trigger"},"b-input",e.$attrs,!1))])]},proxy:!0}],null,!0)},[t("div",{staticClass:"card",attrs:{disabled:e.disabled,custom:""}},[e.inline?t("header",{staticClass:"card-header"},[t("div",{staticClass:"b-clockpicker-header card-header-title"},[t("div",{staticClass:"b-clockpicker-time"},[t("span",{staticClass:"b-clockpicker-btn",class:{active:e.isSelectingHour},on:{click:function(i){e.isSelectingHour=!0}}},[e._v(e._s(e.hoursDisplay))]),t("span",[e._v(e._s(e.hourLiteral))]),t("span",{staticClass:"b-clockpicker-btn",class:{active:!e.isSelectingHour},on:{click:function(i){e.isSelectingHour=!1}}},[e._v(e._s(e.minutesDisplay))])]),e.isHourFormat24?e._e():t("div",{staticClass:"b-clockpicker-period"},[t("div",{staticClass:"b-clockpicker-btn",class:{active:e.meridienSelected===e.amString||e.meridienSelected===e.AM},on:{click:function(i){return e.onMeridienClick(e.amString)}}},[e._v(e._s(e.amString))]),t("div",{staticClass:"b-clockpicker-btn",class:{active:e.meridienSelected===e.pmString||e.meridienSelected===e.PM},on:{click:function(i){return e.onMeridienClick(e.pmString)}}},[e._v(e._s(e.pmString))])])])]):e._e(),t("div",{staticClass:"card-content"},[t("div",{staticClass:"b-clockpicker-body",style:{width:e.faceSize+"px",height:e.faceSize+"px"}},[e.inline?e._e():t("div",{staticClass:"b-clockpicker-time"},[t("div",{staticClass:"b-clockpicker-btn",class:{active:e.isSelectingHour},on:{click:function(i){e.isSelectingHour=!0}}},[e._v(e._s(e.hoursLabel))]),t("span",{staticClass:"b-clockpicker-btn",class:{active:!e.isSelectingHour},on:{click:function(i){e.isSelectingHour=!1}}},[e._v(e._s(e.minutesLabel))])]),e.isHourFormat24||e.inline?e._e():t("div",{staticClass:"b-clockpicker-period"},[t("div",{staticClass:"b-clockpicker-btn",class:{active:e.meridienSelected===e.amString||e.meridienSelected===e.AM},on:{click:function(i){return e.onMeridienClick(e.amString)}}},[e._v(e._s(e.amString))]),t("div",{staticClass:"b-clockpicker-btn",class:{active:e.meridienSelected===e.pmString||e.meridienSelected===e.PM},on:{click:function(i){return e.onMeridienClick(e.pmString)}}},[e._v(e._s(e.pmString))])]),t("b-clockpicker-face",{attrs:{"picker-size":e.faceSize,min:e.minFaceValue,max:e.maxFaceValue,"face-numbers":e.isSelectingHour?e.hours:e.minutes,"disabled-values":e.faceDisabledValues,double:e.isSelectingHour&&e.isHourFormat24,value:e.isSelectingHour?e.hoursSelected:e.minutesSelected},on:{input:e.onClockInput,change:e.onClockChange}})],1)]),void 0!==e.$slots.default&&e.$slots.default.length?t("footer",{staticClass:"b-clockpicker-footer card-footer"},[e._t("default")],2):e._e()])]):t("b-input",e._b({ref:"input",attrs:{type:"time",autocomplete:"off",value:e.formatHHMMSS(e.computedValue),placeholder:e.placeholder,size:e.size,icon:e.icon,"icon-pack":e.iconPack,loading:e.loading,max:e.formatHHMMSS(e.maxTime),min:e.formatHHMMSS(e.minTime),disabled:e.disabled,readonly:!1,"use-html5-validation":e.useHtml5Validation},on:{focus:e.handleOnFocus,blur:function(i){e.onBlur()&&e.checkHtml5Validity()}},nativeOn:{click:function(i){return i.stopPropagation(),e.toggle(!0)},keyup:function(i){return!i.type.indexOf("key")&&e._k(i.keyCode,"enter",13,i.key,"Enter")?null:e.toggle(!0)},change:function(i){return e.onChangeNativePicker(i)}}},"b-input",e.$attrs,!1))],1)},__vue_staticRenderFns__$1=[];const __vue_inject_styles__$1=void 0,__vue_scope_id__$1=void 0,__vue_module_identifier__$1=void 0,__vue_is_functional_template__$1=!1;var Clockpicker=__chunk_5.__vue_normalize__({render:__vue_render__$1,staticRenderFns:__vue_staticRenderFns__$1},void 0,__vue_script__$1,void 0,!1,void 0,void 0,void 0),Plugin={install:function(e){__chunk_5.registerComponent(e,Clockpicker)}};__chunk_5.use(Plugin),exports.BClockpicker=Clockpicker,exports.default=Plugin;