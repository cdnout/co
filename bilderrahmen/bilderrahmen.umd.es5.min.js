!function(e){if("object"==typeof module&&"object"==typeof module.exports){var t=e(require,exports);void 0!==t&&(module.exports=t)}else"function"==typeof define&&define.amd&&define(["require","exports"],e)}(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});
/*!
     * @license MIT
     * Copyright (c) 2017 - 2018 Bernhard Gr√ºnewaldt
     * https://github.com/codeclou/bilderrahmen
     */
var r=(n.prototype.__stopDefaultEvent=function(e){e&&e.preventDefault?e.preventDefault():window.event&&window.event.returnValue&&(window.event.returnValue=!1)},n.prototype._setCurrentOpenImage=function(e,t){this.store.current.galleryId=e,this.store.current.index=t},n.prototype._getCurrentOpenImage=function(){return this.store.current},n.prototype._clearCurrentOpenImage=function(){this.store.current.galleryId=null,this.store.current.index=null},n.prototype._isCurrentOpenImage=function(){return null!==this.store.current.galleryId},n.prototype._getGallery=function(e){return void 0!==this.store[e]&&null!==this.store[e]||(this.store[e]=[]),this.store[e]},n.prototype._getImage=function(e,t){var r=this._getGallery(e);return void 0!==r[t]&&null!==r[t]||(r[t]={}),r[t]},n.prototype._isImage=function(e,t){var r=this._getImage(e,t);return!(void 0===r.src||null===r.src)},n.prototype._renderNextOrPreviousButton=function(e,t,r){var n=this,i=document.createElement("div");return i.setAttribute("class","bilderrahmen--"+r),n._isImage(e,t)&&(i.setAttribute("class","left"===r?"bilderrahmen--left bilderrahmen--left--has-previous":"bilderrahmen--right bilderrahmen--right--has-next"),i.onclick=function(){return n.open(e,t)}),i},n.prototype._generateId=function(e,t){return"bilderrahmen--"+e+"--"+t},n.prototype.closeIfOpen=function(){var e=document.getElementsByClassName("bilderrahmen-wrapper");void 0!==e[0]&&null!==e[0]&&e[0].parentNode.removeChild(e[0]),this._clearCurrentOpenImage()},n.prototype.open=function(e,t){this.closeIfOpen(),this._setCurrentOpenImage(e,t),this.create(e,t)},n.prototype.create=function(e,t){var r=this,n=parseInt(t,10),i=document.createElement("div");i.setAttribute("class","bilderrahmen-wrapper"),i.setAttribute("data-bilderrahmen-gallery-id",e),document.body.appendChild(i);var l=document.createElement("div");l.setAttribute("class","bilderrahmen--top"),i.appendChild(l);var a=document.createElement("div");a.setAttribute("class","bilderrahmen--top-title"),a.innerHTML=r._getImage(e,t).title,l.appendChild(a);var o=document.createElement("div");o.setAttribute("class","bilderrahmen--top-close"),o.onclick=function(){return r.closeIfOpen()},l.appendChild(o),i.appendChild(r._renderNextOrPreviousButton(e,n-1,"left"));var d=r._getImage(e,t);if(!1===d.isVideo){var s=document.createElement("div");s.setAttribute("class","bilderrahmen--image"),i.appendChild(s),(c=document.createElement("div")).setAttribute("class","bilderrahmen--image-inner"),s.appendChild(c),(p=document.createElement("div")).setAttribute("class","bilderrahmen--image-inner-wrap"),c.appendChild(p);var u=document.createElement("img");u.onload=function(){s.setAttribute("class","bilderrahmen--image bilderrahmen--image-loaded")},u.setAttribute("src",r._getImage(e,t).src),u.setAttribute("class","bilderrahmen--image-img"),u.setAttribute("id",r._generateId(e,t)),p.appendChild(u),!0===r.store.closeOnOutsideClick&&(p.onclick=function(){return r.closeIfOpen()},u.addEventListener("click",function(e){return r.__stopDefaultEvent(e)}))}if(!0===d.isVideo){var c,p,m=document.createElement("div");m.setAttribute("class","bilderrahmen--image"),i.appendChild(m),(c=document.createElement("div")).setAttribute("class","bilderrahmen--image-inner"),m.appendChild(c),(p=document.createElement("div")).setAttribute("class","bilderrahmen--image-inner-wrap"),c.appendChild(p);var h=document.createElement("video");h.onload=function(){m.setAttribute("class","bilderrahmen--image bilderrahmen--image-loaded")},h.setAttribute("poster",d.poster),h.setAttribute("autoplay",""),h.setAttribute("controls","");var g=document.createElement("source");g.setAttribute("src",d.src),g.setAttribute("type","video/mp4"),h.appendChild(g),h.setAttribute("class","bilderrahmen--image-img"),h.setAttribute("id",r._generateId(e,t)),p.appendChild(h),!0===r.store.closeOnOutsideClick&&(p.onclick=function(){return r.closeIfOpen()},h.addEventListener("click",function(e){return r.__stopDefaultEvent(e)}))}return i.appendChild(r._renderNextOrPreviousButton(e,n+1,"right")),!1},n.prototype.init=function(){console.log("Bilderrahmen init()");for(var a=this,o=document.querySelectorAll("[data-bilderrahmen]"),e=function(e){var t=o[e],r=t.getAttribute("data-bilderrahmen"),n=a._getGallery(r).length,i=a._getImage(r,n);i.title=t.getAttribute("data-bilderrahmen-title");var l=t.parentNode;t.getAttribute("data-bilderrahmen-video")?(i.src=t.getAttribute("data-bilderrahmen-video"),i.poster=t.getAttribute("src"),i.isVideo=!0):(i.src=l.getAttribute("href"),i.poster=null,i.isVideo=!1),l.addEventListener("click",function(e){return a.open(r,n),a.__stopDefaultEvent(e)})},t=0;t<o.length;t++)e(t);document.addEventListener("keydown",function(e){if(27===e.keyCode&&a.closeIfOpen(),37===e.keyCode&&a._isCurrentOpenImage()){var t=a._getCurrentOpenImage();a._isImage(t.galleryId,t.index-1)&&a.open(t.galleryId,t.index-1)}39===e.keyCode&&a._isCurrentOpenImage()&&(t=a._getCurrentOpenImage(),a._isImage(t.galleryId,t.index+1)&&a.open(t.galleryId,t.index+1))},!1)},n);function n(e){this.store={current:{galleryId:null,index:null},galleries:[],closeOnOutsideClick:!1},null!=e&&void 0!==e.closeOnOutsideClick&&null!==e.closeOnOutsideClick&&!0===e.closeOnOutsideClick&&(this.store.closeOnOutsideClick=!0),this.init()}t.Bilderrahmen=r});