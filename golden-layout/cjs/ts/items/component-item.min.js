"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ComponentItem=void 0;const resolved_config_1=require("../config/resolved-config"),component_container_1=require("../container/component-container"),internal_error_1=require("../errors/internal-error"),types_1=require("../utils/types"),utils_1=require("../utils/utils"),content_item_1=require("./content-item");class ComponentItem extends content_item_1.ContentItem{constructor(e,t,i){super(e,t,i,document.createElement("div")),this._parentItem=i,this._focused=!1,this.isComponent=!0,this._reorderEnabled=t.reorderEnabled,this.applyUpdatableConfig(t),this._initialWantMaximise=t.maximised;const n=document.createElement("div");n.classList.add("lm_content"),this.element.appendChild(n),this._container=new component_container_1.ComponentContainer(t,this,e,n,e=>this.handleUpdateItemConfigEvent(e),()=>this.show(),()=>this.hide(),e=>this.focus(e),e=>this.blur(e))}get componentName(){return this._container.componentType}get componentType(){return this._container.componentType}get reorderEnabled(){return this._reorderEnabled}get initialWantMaximise(){return this._initialWantMaximise}get component(){return this._container.component}get container(){return this._container}get parentItem(){return this._parentItem}get headerConfig(){return this._headerConfig}get title(){return this._title}get tab(){return this._tab}get focused(){return this._focused}destroy(){this._container.destroy(),super.destroy()}applyUpdatableConfig(e){this.setTitle(e.title),this._headerConfig=e.header}toConfig(){const e=this._container.stateRequestEvent,t=void 0===e?this._container.state:e();return{type:types_1.ItemType.component,content:[],width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight,id:this.id,maximised:!1,isClosable:this.isClosable,reorderEnabled:this._reorderEnabled,title:this._title,header:resolved_config_1.ResolvedHeaderedItemConfig.Header.createCopy(this._headerConfig),componentType:resolved_config_1.ResolvedComponentItemConfig.copyComponentType(this.componentType),componentState:t}}close(){if(null===this.parent)throw new internal_error_1.UnexpectedNullError("CIC68883");this.parent.removeChild(this,!1)}setDragSize(e,t){"none"!==this.element.style.display&&(utils_1.setElementWidth(this.element,e),utils_1.setElementHeight(this.element,t),this._container.setDragSize(e,t))}updateSize(){this.updateNodeSize()}init(){this.updateNodeSize(),super.init(),this._container.emit("open"),this.initContentItems()}setTitle(e){this._title=e,this.emit("titleChanged",e),this.emit("stateChanged")}setTab(e){this._tab=e,this.emit("tab",e),this._container.setTab(e)}hide(){this._container.checkEmitHide(),super.hide()}show(){this._container.checkEmitShow(),super.show()}focus(e=!1){this.parentItem.setActiveComponentItem(this,!0,e)}setFocused(e){this._focused=!0,this.tab.setFocused(),e||this.emitBaseBubblingEvent("focus")}blur(e=!1){this._focused&&this.layoutManager.setFocusedComponentItem(void 0,e)}setBlurred(e){this._focused=!1,this.tab.setBlurred(),e||this.emitBaseBubblingEvent("blur")}setParent(e){this._parentItem=e,super.setParent(e)}handleUpdateItemConfigEvent(e){this.applyUpdatableConfig(e)}updateNodeSize(){if("none"!==this.element.style.display){const{width:e,height:t}=utils_1.getElementWidthAndHeight(this.element);this._container.setSizeToNodeSize(e,t)}}}exports.ComponentItem=ComponentItem;