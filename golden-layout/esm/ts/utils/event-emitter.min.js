export class EventEmitter{constructor(){this._allEventSubscriptions=[],this._subscriptionsMap=new Map,this.unbind=this.removeEventListener,this.trigger=this.emit}tryBubbleEvent(t,e){}emit(t,...e){let n=this._subscriptionsMap.get(t);if(void 0!==n){n=n.slice();for(let t=0;t<n.length;t++){(0,n[t])(...e)}}this.emitAllEvent(t,e),this.tryBubbleEvent(t,e)}emitUnknown(t,...e){let n=this._subscriptionsMap.get(t);if(void 0!==n){n=n.slice();for(let t=0;t<n.length;t++)n[t](...e)}this.emitAllEvent(t,e),this.tryBubbleEvent(t,e)}emitBaseBubblingEvent(t){const e=new EventEmitter.BubblingEvent(t,this);this.emitUnknown(t,e)}emitUnknownBubblingEvent(t){const e=new EventEmitter.BubblingEvent(t,this);this.emitUnknown(t,e)}removeEventListener(t,e){const n=e;this.removeUnknownEventListener(t,n)}off(t,e){this.removeEventListener(t,e)}addEventListener(t,e){const n=e;this.addUnknownEventListener(t,n)}on(t,e){this.addEventListener(t,e)}addUnknownEventListener(t,e){if(t===EventEmitter.ALL_EVENT)this._allEventSubscriptions.push(e);else{let n=this._subscriptionsMap.get(t);void 0!==n?n.push(e):(n=[e],this._subscriptionsMap.set(t,n))}}removeUnknownEventListener(t,e){if(t===EventEmitter.ALL_EVENT)this.removeSubscription(t,this._allEventSubscriptions,e);else{const n=this._subscriptionsMap.get(t);if(void 0===n)throw new Error("No subscribtions to unsubscribe for event "+t);this.removeSubscription(t,n,e)}}removeSubscription(t,e,n){const i=e.indexOf(n);if(i<0)throw new Error("Nothing to unbind for "+t);e.splice(i,1)}emitAllEvent(t,e){const n=this._allEventSubscriptions.length;if(n>0){const i=e.slice();i.unshift(t);const s=this._allEventSubscriptions.slice();for(let t=0;t<n;t++)s[t](i)}}};!function(t){t.ALL_EVENT="__all",t.headerClickEventName="stackHeaderClick",t.headerTouchStartEventName="stackHeaderTouchStart";class e{constructor(t,e){this._name=t,this._target=e,this._isPropagationStopped=!1}get name(){return this._name}get target(){return this._target}get origin(){return this._target}get isPropagationStopped(){return this._isPropagationStopped}stopPropagation(){this._isPropagationStopped=!0}}t.BubblingEvent=e;t.ClickBubblingEvent=class extends e{constructor(t,e,n){super(t,e),this._mouseEvent=n}get mouseEvent(){return this._mouseEvent}};t.TouchStartBubblingEvent=class extends e{constructor(t,e,n){super(t,e),this._touchEvent=n}get touchEvent(){return this._touchEvent}}}(EventEmitter||(EventEmitter={}));