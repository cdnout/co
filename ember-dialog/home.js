/** Copyright Wheely Inc. 2014 **/
define("ember-dialog/app",["ember-dialog/initializers/dialog-manager","exports"],function(__dependency1__,__exports__){"use strict";var DialogManagerInitializer=__dependency1__["default"];var App=Ember.Application.extend();App.initializer(DialogManagerInitializer);__exports__["default"]=App});define("ember-dialog/initializers/dialog-manager",["ember-dialog/services/dialog-manager","ember-dialog/components/dialog","exports"],function(__dependency1__,__dependency2__,__exports__){"use strict";var DialogManager=__dependency1__["default"];var DialogComponent=__dependency2__["default"];var initialize=function(container,application){application.register("component:dialog",DialogComponent);application.register("dialog:manager",DialogManager,{singleton:true});application.inject("controller","dialogManager","dialog:manager");application.inject("component:dialog","dialogManager","dialog:manager")};__exports__["default"]={name:"dialog-manager",initialize:initialize}});define("ember-dialog/services/dialog-manager",["exports"],function(__exports__){"use strict";__exports__["default"]=Ember.Object.extend(Ember.Evented,{rootElement:"body",defaults:{ms:5e3,decline:"decline",accept:"accept"},dialogData:{acceptLabel:"yes",declineLabel:"no",acceptClass:"btn-primary",declineClass:"btn-default",acceptHandlerName:"accept",declineHandlerName:"decline",substrate:false,title:"",className:""},active:Ember.computed.alias("dialogsList.lastObject"),dialogsList:Ember.makeArray(),_dialogs:Ember.Object.create(),alert:function(view,controller,dialogData){dialogData=Ember.typeOf(dialogData)==="object"?dialogData:{};var className=dialogData.className||"";dialogData=Ember.$.extend({},this.get("dialogData"),dialogData,{className:["alert",className].join(" ")});return this._openWithLayout("dialogs/alert",view,controller,dialogData)},confirm:function(view,controller,dialogData){dialogData=Ember.typeOf(dialogData)==="object"?dialogData:{};var className=dialogData.className||"";dialogData=Ember.$.extend({},this.get("dialogData"),dialogData,{className:["confirm",className].join(" ")});return this._openWithLayout("dialogs/confirm",view,controller,dialogData)},custom:function(view,controller,dialogData){dialogData=Ember.typeOf(dialogData)==="object"?dialogData:{};var className=dialogData.className||"";dialogData=Ember.$.extend({},this.get("dialogData"),dialogData,{className:["custom",className].join(" ")});return this._openWithLayout("dialogs/custom",view,controller,dialogData)},notice:function(view,ms,dialogData){dialogData=Ember.typeOf(dialogData)==="object"?dialogData:{};var name=dialogData.name||this._generateDialogName();var className=dialogData.className||"";dialogData=Ember.$.extend({name:name},this.get("dialogData"),dialogData,{className:["notice","highest",className].join(" "),substrate:false});var promise=this._openWithLayout("dialogs/notice",view,null,dialogData,false),dialog=this.getDialog(name);dialog.reopen({click:function(){this.accept()}});if(Ember.typeOf(ms)!=="null"&&ms!==Infinity){ms=ms>>0||this.get("defaults.ms");return new Ember.RSVP.Promise(function(resolve,reject){setTimeout(dialog.accept.bind(dialog),ms);promise.then(resolve,reject)}.bind(this))}else{return promise}},open:function(name,view,controller,dialogData,setActive){var container=controller.container||this.container,dialog=this.getDialog(name),rootElement=controller.namespace&&controller.namespace.rootElement||this.get("rootElement"),template,data={name:name};Ember.merge(data,dialogData||{});Ember.ENV.LOG_DIALOG&&Ember.Logger.log("%cDialogManager:%c Opening dialog named %s","font-weight: 900;",null,name);if(Ember.typeOf(dialog)==="undefined"){Ember.ENV.LOG_DIALOG&&Ember.Logger.log("%cDialogManager:%c Creating dialog named %s","font-weight: 900;",null,name);dialog=container.lookupFactory("component:dialog").createWithMixins(data);if(!Ember.isEqual(data.declineHandlerName,this.get("defaults.decline"))||!Ember.isEqual(data.acceptHandlerName,this.get("defaults.accept"))){var actions={};if(!Ember.isEqual(data.declineHandlerName,this.get("defaults.decline"))){actions[data.declineHandlerName]=function(dialog){this.decline()}}if(!Ember.isEqual(data.acceptHandlerName,this.get("defaults.accept"))){actions[data.acceptHandlerName]=function(dialog){this.accept()}}dialog.reopen({actions:actions})}this.setDialog(name,dialog);if(Ember.typeOf(view)==="string"){view=this._getView(view,controller);dialog.set("body",view)}else if(Ember.typeOf(view)==="class"){dialog.setProperties({body:view})}else{throw new Ember.Error("The given view unrecognized")}dialog.appendTo(rootElement)}setActive&&this.get("dialogsList").pushObject(name);return dialog.show()},close:function(name){this.get("controllers:"+name).reopen({target:this.get("targets:"+name)});return new Ember.RSVP.Promise(Ember.run.bind(this,function(resolve,reject){var dialogsList=this.get("dialogsList");this.set("dialogsList",dialogsList.without(name));var dialog=this.getDialog(name);Ember.ENV.LOG_DIALOG&&Ember.Logger.log("%cDialogManager:%c Closing dialog named %s","font-weight: 900;",null,name);this._destroyDialog(name);resolve(dialog);if(this.get("active")){var nextDialog=this.getDialog(this.get("active"));nextDialog&&nextDialog.focus()}}))},getDialog:function(name){return this.get("_dialogs").get(name)},setDialog:function(name,instance){Ember.ENV.LOG_DIALOG&&Ember.Logger.log("%cDialogManager:%c Register dialog named %s","font-weight: 900;",null,name);return this.get("_dialogs").set(name,instance)},_generateDialogName:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=Math.random()*16|0,v=c=="x"?r:r&3|8;return v.toString(16)})},_destroyDialog:function(name){var dialog=Ember.typeOf(name)==="string"?this.getDialog(name):name;if(dialog){dialog.destroy()}return this},_getView:function(view,controller){var template="",container=controller.container||this.container;if(Ember.typeOf(view)==="string"){template=container.lookup("template:"+view);template=template||Ember.Handlebars.compile(view);view=Ember.View.extend({template:template,controller:controller})}else if(Ember.typeOf(view)==="class"){view=Ember.copy(view);view=Ember.View.extend({controller:controller})}else{throw new Ember.Error("The given view unrecognized. Should be a text or name of template or view class.")}return view},_openWithLayout:function(layoutName,view,controller,dialogData,setActive){var dialog,promise,name=Ember.typeOf(dialogData.name)==="string"?dialogData.name:this._generateDialogName();if(!(controller instanceof Ember.Controller)&&Ember.typeOf(controller)==="object"){controller=Ember.Controller.create(controller)}else{controller=controller||Ember.Controller.create()}view=this._getView(view,controller);dialogData=dialogData||{};setActive=Ember.typeOf(setActive)==="undefined"?true:setActive;view.reopen({layoutName:layoutName});dialog=this.open(name,view,controller,dialogData,setActive);this.set("controllers:"+name,controller);this.set("targets:"+name,controller.target);controller.reopen({target:dialog,dialog:Ember.computed.alias("target").readOnly()});promise=new Ember.RSVP.Promise(function(resolve,reject){dialog.resolved=function(){resolve&&resolve()};dialog.rejected=function(){reject&&reject()}});return promise}})});define("ember-dialog/components/dialog",["ember-dialog/utils/highest-zindex","exports"],function(__dependency1__,__exports__){"use strict";var maxZIndex=__dependency1__["default"];__exports__["default"]=Ember.Component.extend({layoutName:"components/dialog",isVisible:false,fixedZIndex:false,isActive:function(){return this.get("name")===this.get("dialogManager.active")}.property("name","dialogManager.active"),_visibleDidChange:function(){if(!this.get("isVisible")){return}Ember.run.later(this,function(){var dialog,zindex;if(!this.get("fixedZIndex")){var zindex=maxZIndex(),dialog=this.$(".dialog-dialog");dialog.css({"z-index":zindex+1})}this.focus()},0)}.observes("isVisible"),show:function(){return this.set("isVisible",true)},hide:function(){this.set("isVisible",false)},close:function(){return this.get("dialogManager").close(this.get("name"))},decline:function(){Ember.ENV.LOG_DIALOG&&Ember.Logger.log("✘ %cDecline action%c: "+this.get("name"),"font-weight: 900; color: #900;",null);this.has("rejected")&&this.get("rejected").call(this,this);this.trigger("declined",this);this.close();return this},accept:function(){Ember.ENV.LOG_DIALOG&&Ember.Logger.log("✓ %cConfirm action%c "+this.get("name"),"font-weight: 900; color: #070;",null);this.has("resolved")&&this.get("resolved").call(this,this);this.trigger("accepted",this);this.close();return this},keyDown:function(e){var viewsController;if(this.get("isActive")){viewsController=this.get("childViews").findBy("controller").get("controller");if(e.keyCode===27){viewsController.send(this.get("declineHandlerName"),this);return false}if(e.keyCode===13){viewsController.send(this.get("acceptHandlerName"),this);return false}}},click:function(e){if(Ember.$(e.target).hasClass("substrate")){this.close()}},focus:function(){var firstInput=this.$().find("input:visible:first, button:visible:not(.close):first").first();if(firstInput.size()){firstInput.focus()}else{this.$(".dialog-content").focus()}},actions:{decline:function(dialog){this.decline()},accept:function(dialog){this.accept()}}})});define("ember-dialog/utils/highest-zindex",["exports"],function(__exports__){"use strict";__exports__["default"]=function(){var $=Ember.$;var max=Math.max.apply(null,$.map($(":visible:not(.highest)"),function(element){if($(element).css("position")==="absolute"||$(element).css("position")==="relative"){return $(element).css("z-index")>>0||1}return 0}));return max}});define("ember-dialog/templates/components/dialog",["exports"],function(__exports__){"use strict";__exports__["default"]=Ember.Handlebars.compile('<div {{bind-attr class=":dialog-dialog :component-dialog-dialog className substrate"}}>\n    <div class="dialog-content" tabindex="-1">\n        {{view body}}\n    </div>\n</div>')});define("ember-dialog/templates/dialogs/alert",["exports"],function(__exports__){"use strict";__exports__["default"]=Ember.Handlebars.compile('<div class="dialog-header">\n    <button type="button" class="close" {{action dialog.acceptHandlerName dialog}}>×</button>\n    <div class="dialog-title">{{ dialog.title }}</div>\n</div>\n<div class="dialog-body">\n    {{yield}}\n</div>\n<div class="dialog-footer">\n    <button class="btn btn-default" type="button" {{action dialog.acceptHandlerName dialog}}>{{dialog.acceptLabel}}</button>\n</div>')});define("ember-dialog/templates/dialogs/confirm",["exports"],function(__exports__){"use strict";__exports__["default"]=Ember.Handlebars.compile('<div class="dialog-header">\n    <button type="button" class="close" {{action dialog.declineHandlerName dialog}}>×</button>\n    <div class="dialog-title">{{ dialog.title }}</div>\n</div>\n<div class="dialog-body">\n    {{yield}}\n</div>\n<div class="dialog-footer">\n    <button {{bind-attr class=":btn dialog.acceptClass"}} type="button" {{action dialog.acceptHandlerName dialog}}>{{dialog.acceptLabel}}</button>\n    <button {{bind-attr class=":btn dialog.declineClass"}} type="button" {{action dialog.declineHandlerName dialog}}>{{dialog.declineLabel}}</button>\n</div>')});define("ember-dialog/templates/dialogs/custom",["exports"],function(__exports__){"use strict";__exports__["default"]=Ember.Handlebars.compile("{{yield}}")});define("ember-dialog/templates/dialogs/notice",["exports"],function(__exports__){"use strict";__exports__["default"]=Ember.Handlebars.compile('<div class="dialog-body">\n    {{yield}}\n</div>')});
Ember.TEMPLATES["dialogs/alert"]=Ember.Handlebars.compile('<div class="dialog-header">    <button type="button" class="close" {{action dialog.acceptHandlerName dialog}}>×</button>    <div class="dialog-title">{{ dialog.title }}</div></div><div class="dialog-body">    {{yield}}</div><div class="dialog-footer">    <button class="btn btn-default" type="button" {{action dialog.acceptHandlerName dialog}}>{{dialog.acceptLabel}}</button></div>');Ember.TEMPLATES["dialogs/confirm"]=Ember.Handlebars.compile('<div class="dialog-header">    <button type="button" class="close" {{action dialog.declineHandlerName dialog}}>×</button>    <div class="dialog-title">{{ dialog.title }}</div></div><div class="dialog-body">    {{yield}}</div><div class="dialog-footer">    <button {{bind-attr class=":btn dialog.acceptClass"}} type="button" {{action dialog.acceptHandlerName dialog}}>{{dialog.acceptLabel}}</button>    <button {{bind-attr class=":btn dialog.declineClass"}} type="button" {{action dialog.declineHandlerName dialog}}>{{dialog.declineLabel}}</button></div>');Ember.TEMPLATES["dialogs/custom"]=Ember.Handlebars.compile("{{yield}}");Ember.TEMPLATES["dialogs/notice"]=Ember.Handlebars.compile('<div class="dialog-body">    {{yield}}</div>');Ember.TEMPLATES["components/dialog"]=Ember.Handlebars.compile('<div {{bind-attr class=":dialog-dialog :component-dialog-dialog className substrate"}}>    <div class="dialog-content" tabindex="-1">        {{view body}}    </div></div>');
Ember.onLoad("Ember.Application",function(Application){var initializer=require("ember-dialog/initializers/dialog-manager")["default"];Application.initializer(initializer)});