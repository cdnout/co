/**
 * Vidom
 * @author Filatov Dmitry <dfilatov@inbox.ru>
 * @version 0.11.4
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).vidom={})}(this,function(t){"use strict";var e=/&/g,n=/"/g;function r(t,e){for(var n=t.length,r=0;r<n;)if(t[r++]==e)return!0;return!1}var i=/([^A-Z]+)([A-Z])/g;function o(t,e,n){var r={};for(var i in t)r[i]=t[i];for(var o in e){var u=e[o];(n||void 0!==u)&&(r[o]=u)}return r}function u(t,e,n){if("type"===e&&"INPUT"===t.tagName){var r=t.value;t.setAttribute(e,""+n),t.value=r}else t.setAttribute(m(e),""+n)}function s(t,e){t.removeAttribute(m(e))}function l(t,e){"style"===e?t[e].cssText="":"value"===e&&"SELECT"===t.tagName?function(t){var e=t.options,n=e.length,r=0;for(;r<n;)e[r++].selected=!1}(t):t[e]=function(t,e){var n=t+":"+e;if(n in d)return d[n];var r=t in c?c[t]:c[t]=document.createElement(t);return d[n]=r[e]}(t.tagName,e)}function a(t,r){var i=m(t);return i&&i+'="'+function(t){for(var r=(t+="").length,i=0;r-- >0;)switch(t.charCodeAt(r)){case 38:i|=1;break;case 34:i|=2}return 1==(1&i)&&(t=t.replace(e,"&amp;")),2==(2&i)&&(t=t.replace(n,"&quot;")),t}(r)+'"'}function h(t,e){return e?m(t):""}var c=Object.create(null),d=Object.create(null);var f=":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",p=new RegExp("^["+f+"][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),v=Object.create(null);function m(t){return t in v?v[t]:v[t]=p.test(t)?t.toLowerCase():""}var g={set:u,remove:s,toString:a},_=o(g,{set:function(t,e,n){n?u(t,e,n):s(t,e)},toString:h}),y=o(_,{toString:function(t,e){return"boolean"==typeof e?h(t,e):a(t,e)}}),C={set:function(t,e,n){t[e]=n},remove:l,toString:a},x=o(C,{toString:h}),A=Object.create(null);function b(t){return t in A?A[t]:g}function D(t,e){if(Array.isArray(t))w(e,t[1]);else if(Array.isArray(e)){for(var n,r=e[0],i=e[1];r!==i;)n=r.nextSibling,t.appendChild(r),r=n;t.appendChild(i)}else t.appendChild(e)}function N(t){if(Array.isArray(t)){for(var e,n=t[0],r=t[1],i=r.parentNode;n!==r;)e=n.nextSibling,i.removeChild(n),n=e;i.removeChild(r)}else t.parentNode.removeChild(t)}function w(t,e){if(Array.isArray(e)&&(e=e[0]),Array.isArray(t)){for(var n,r=t[0],i=t[1],o=i.parentNode;r!==i;)n=r.nextSibling,o.insertBefore(r,e),r=n;o.insertBefore(i,e)}else e.parentNode.insertBefore(t,e)}v.acceptCharset="accept-charset",v.className="class",v.htmlFor="for",v.httpEquiv="http-equiv",A.autoPlay=_,A.checked=x,A.controls=C,A.disabled=_,A.download=y,A.id=C,A.ismap=_,A.loop=C,A.multiple=x,A.muted=C,A.open=_,A.readOnly=x,A.selected=x,A.srcDoc=C,A.style={set:function(t,e,n){var r=t[e];for(var i in n)r[i]=null==n[i]?"":n[i]},remove:l,toString:function(t,e){var n,r="";for(n in e)null!=e[n]&&(r+=n.replace(i,"$1-$2").toLowerCase()+":"+e[n]+";");return r?t+'="'+r+'"':r}},A.value={set:function(t,e,n){"value"===e&&"SELECT"===t.tagName?function(t,e){if(Array.isArray(e))for(var n,i=t.options,o=i.length,u=0;u<o;)(n=i[u++]).selected=null!=e&&r(e,n.value);else t.value=e}(t,n):t[e]!==n&&(t[e]=n)},remove:l,toString:a};var E={append:D,remove:N,insertBefore:w,move:function(t,e,n){if(n){Array.isArray(e)&&(e=e[1]);var r=e.nextSibling;r?w(t,r):D(e.parentNode,t)}else w(t,e)},replace:function(t,e){Array.isArray(t)?(w(e,t),N(t)):t.parentNode.replaceChild(e,t)},removeChildren:function(t){if(Array.isArray(t))for(var e,n=t[0].nextSibling,r=t[1],i=r.parentNode;n!==r;)e=n.nextSibling,i.removeChild(n),n=e;else t.textContent=""},updateText:function(t,e,n){if(Array.isArray(t)){var r=t[1],i=r.previousSibling;i===t[0]?r.parentNode.insertBefore(document.createTextNode(e),r):i.nodeValue=e}else if(n){var o=t.firstChild;o?o.nodeValue=e:t.textContent=e}else t.innerHTML=e},removeText:function(t){if(Array.isArray(t)){var e=t[0].nextSibling;e.parentNode.removeChild(e)}else t.textContent=""}},k="undefined"==typeof Symbol?"__vidom__id__":Symbol(),T=1;function R(t,e){return k in t?t[k]:e?null:t[k]=T++}var S="undefined"==typeof navigator?"":navigator.userAgent,F="undefined"==typeof navigator?"":navigator.platform,M=S.indexOf("Trident")>-1,O=S.indexOf("Edge")>-1,j=/iPad|iPhone|iPod/.test(F),I=["click","mousedown","mousemove","mouseout","mouseover","mouseup"],L=["animationend","animationiteration","animationstart","blur","change","contextmenu","copy","cut","dblclick","drag","dragend","dragenter","dragleave","dragover","dragstart","drop","focus","input","keydown","keypress","keyup","paste","pointerover","pointerdown","pointermove","pointerup","pointercancel","pointerout","submit","touchcancel","touchend","touchmove","touchstart","transitionend","wheel"],P=["canplay","canplaythrough","complete","durationchange","emptied","ended","error","gotpointercapture","load","loadeddata","loadedmetadata","loadstart","lostpointercapture","mouseenter","mouseleave","pause","play","playing","pointerenter","pointerleave","progress","ratechange","scroll","seeked","seeking","select","stalled","suspend","timeupdate","volumechange","waiting"];j?P=[].concat(P,I):L=[].concat(L,I);var U=Object.create(null),q=Object.create(null),B=!0;function H(t,e){if(void 0===e&&(e=t.type),B)for(var n,r,i=t.target,o=q[e].listenersCount;o&&i&&i!==document;){if((r=R(i,!0))&&r in U&&null!=(n=U[r][e])&&(n(t),0==--o||t.cancelBubble))return;i=i.parentNode}}function Z(t){B&&U[R(t.currentTarget)][t.type](t)}function z(t,e,n){t.bubbles?++t.listenersCount:e.addEventListener(n,Z,!1)}function K(t,e,n){if(e in q){var r=q[e];r.set||(null!==r.setup?r.setup():r.bubbles&&document.addEventListener(e,H,!1),r.set=!0);var i,o=R(t);o in U?null==(i=U[o])[e]&&z(r,t,e):(i=U[o]=Object.create(null),z(r,t,e)),i[e]=n}}function V(t,e,n){t.bubbles?--t.listenersCount:e.removeEventListener(n,Z)}"undefined"!=typeof document&&function(){var t,e={focus:"focusin",blur:"focusout"},n=0,r=!0,i=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/);for(null!==i&&Number(i[1])<52&&(r=!1);n<L.length;)t=L[n++],q[t]={type:t,bubbles:!0,listenersCount:0,set:!1,setup:t in e?r?function(){var t=this.type;document.addEventListener(e[t],function(e){H(e,t)})}:function(){document.addEventListener(this.type,H,!0)}:null};for(n=0;n<P.length;)q[P[n++]]={type:t,bubbles:!1,set:!1,setup:null}}();var W=Object.create(null);function $(t){return Array.isArray(t)?G(t):t.namespaceURI===W.html?null:t.namespaceURI}function G(t){return $((Array.isArray(t)?t[t.length-1]:t).parentNode)}W.html="http://www.w3.org/1999/xhtml",W.svg="http://www.w3.org/2000/svg",W.math="http://www.w3.org/1998/Math/MathML";var J=["onAnimationEnd","onAnimationIteration","onAnimationStart","onBlur","onCanPlay","onCanPlayThrough","onChange","onClick","onComplete","onContextMenu","onCopy","onCut","onDblClick","onDrag","onDragEnd","onDragEnter","onDragLeave","onDragOver","onDragStart","onDrop","onDurationChange","onEmptied","onEnded","onError","onFocus","onGotPointerCapture","onInput","onKeyDown","onKeyPress","onKeyUp","onLoad","onLoadedData","onLoadedMetadata","onLoadStart","onLostPointerCapture","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onPaste","onPause","onPlay","onPlaying","onPointerCancel","onPointerDown","onPointerEnter","onPointerLeave","onPointerMove","onPointerOut","onPointerOver","onPointerUp","onProgress","onRateChange","onScroll","onSeeked","onSeeking","onSelect","onStalled","onSubmit","onSuspend","onTimeUpdate","onTouchCancel","onTouchEnd","onTouchMove","onTouchStart","onTransitionEnd","onVolumeChange","onWaiting","onWheel"].reduce(function(t,e){return t[e]=e.substr(2).toLowerCase(),t},Object.create(null));var Q={appendChild:function(t,e){var n=t.getDomNode();E.append(n,e.renderToDom($(n))),e.mount()},insertChild:function(t,e){var n=e.getDomNode();E.insertBefore(t.renderToDom(G(n)),n),t.mount()},removeChild:function(t){var e=t.getDomNode();t.unmount(),E.remove(e)},moveChild:function(t,e,n){var r=document.activeElement;B=!1,E.move(t.getDomNode(),e.getDomNode(),n),document.activeElement!==r&&r.focus(),B=!0},removeChildren:function(t){for(var e=t.getDomNode(),n=t.children,r=n.length,i=0;i<r;)n[i++].unmount();E.removeChildren(e)},replace:function(t,e){var n=t.getDomNode();t.unmount(),E.replace(n,e.renderToDom(G(n))),e.mount()},updateAttr:function(t,e,n){var r=t.getDomNode();e in J?K(r,J[e],n):b(e).set(r,e,n)},removeAttr:function(t,e){var n=t.getDomNode();e in J?function(t,e){var n=R(t,!0);null!==n&&n in U&&(U[n][e]=null,V(q[e],t,e))}(n,J[e]):b(e).remove(n,e)},updateText:function(t,e,n){E.updateText(t.getDomNode(),e,n)},removeText:function(t){E.removeText(t.getDomNode())}};function X(t,e){var n=t.children,r=e.children,i=n.length,o=r.length;if(1!==i||1!==o){for(var u,s,l=0,a=i-1,h=n[l],c=h.key,d=n[a],f=d.key,p=0,v=o-1,m=r[p],g=m.key,_=r[v],y=_.key,C=0,x=null,A=Object.create(null);l<=a&&p<=v;)l in A?C=1:a in A?C=2:c===g?(h.patch(m),C=5):f===y?(d.patch(_),C=10):null!==c&&c===y?(Q.moveChild(h,d,!0),h.patch(_),C=9):null!==f&&f===g?(Q.moveChild(d,h,!1),d.patch(m),C=6):null!==c&&null===g?(Q.insertChild(m,h),C=4):null===c&&null!==g?(Q.removeChild(h),C=1):(null===x&&(x=Y(n,l,a)),g in x?(s=n[u=x[g]],A[u]=!0,Q.moveChild(s,h,!1),s.patch(m)):Q.insertChild(m,h),C=4),1==(1&C)&&++l<=a&&(c=(h=n[l]).key),2==(2&C)&&--a>=l&&(f=(d=n[a]).key),4==(4&C)&&++p<=v&&(g=(m=r[p]).key),8==(8&C)&&--v>=p&&(y=(_=r[v]).key),C=0;for(;l<=a;)l in A||Q.removeChild(n[l]),++l;for(;p<=v;)v<o-1?Q.insertChild(r[p],r[v+1]):Q.appendChild(e,r[p]),++p}else n[0].patch(r[0])}function Y(t,e,n){for(var r,i=Object.create(null);e<n;)null!==(r=t[e].key)&&(i[r]=e),++e;return i}var tt=/&/g,et=/</g,nt=/>/g;function rt(t){var e=(t+="").length;if(0===e)return t;for(var n=0;e-- >0;)switch(t.charCodeAt(e)){case 38:n|=1;break;case 60:n|=2;break;case 62:n|=4}return 1==(1&n)&&(t=t.replace(tt,"&amp;")),2==(2&n)&&(t=t.replace(et,"&lt;")),4==(4&n)&&(t=t.replace(nt,"&gt;")),t}var it=Object.create(null),ot=Object.create(null);function ut(t,e){var n;if(null===e)n=t in ot?ot[t]:ot[t]="!"===t?document.createComment(""):document.createElement(t);else{var r=e+":"+t;n=r in ot?ot[r]:ot[r]=document.createElementNS(e,t)}return n.cloneNode()}var st={"http://www.w3.org/2000/svg":"svg","http://www.w3.org/1998/Math/MathML":"math"},lt={thead:"table",tbody:"table",tfoot:"table",tr:"tbody",td:"tr"},at=Object.create(null);var ht=1,ct=2,dt=3,ft=4,pt=5;function vt(t){if(null==t)return null;var e=typeof t;if("object"!==e)return"string"===e?t||null:"boolean"===e?null:""+t;if(!Array.isArray(t))return t;if(0===t.length)return null;for(var n,r=t,i=0,o=!1,u=t.length,s=Object.create(null);i<u;){if(null===(n=i in s?s[i]:vt(t[i])))null!==r&&(o?r===t&&(r=t.slice(0,i)):r=null);else if("object"==typeof n)Array.isArray(n)?r=o?(r===t?r.slice(0,i):Array.isArray(r)?r:[mt(r)]).concat(n):n.slice():r!==t?o?Array.isArray(r)?r.push(n):r=[mt(r),n]:r=n:n!==t[i]&&(o?(r=r.slice(0,i)).push(n):r=n),o=!0;else{for(var l=void 0,a=i;++a<u;)if("string"==typeof(l=s[a]=vt(t[a])))n+=l;else if(null!==l)break;o?Array.isArray(r)?(r===t&&(r=r.slice(0,i)),r.push(mt(n))):r=[r,mt(n)]:r=""+n,i=a-1,o=!0}++i}return r}function mt(t){return"object"==typeof t?t:Ce("plaintext",null,null,t)}var gt=["area","base","br","col","command","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"].reduce(function(t,e){return t[e]=!0,t},Object.create(null)),_t=M||O;function yt(t,e,n,r,i,o){this.type=ht,this.tag=t,this.key=null==e?null:e,this.attrs=n||it,this.children=Ct(r),this.ref=null==i?null:i,this._domNode=null,this._ns=t in W?W[t]:null,this._escapeChildren=!1!==o,this._ctx=it}function Ct(t){var e=vt(t);return null===e||"object"!=typeof e||Array.isArray(e)?e:[e]}function xt(){}yt.prototype={getDomNode:function(){return this._domNode},setCtx:function(t){if(t!==it){this._ctx=t;var e=this.children;if(null!==e&&"string"!=typeof e)for(var n=e.length,r=0;r<n;)e[r++].setCtx(t)}return this},renderToDom:function(t){var e=this.tag,n=this.children,r=this._ns||t;if(_t&&n&&"string"!=typeof n){var i=function(t,e,n){var r=lt[e]||"div",i=at[r]||(at[r]=document.createElement(r));if(!n||!st[n]||st[n]===e)return i.innerHTML=t,i.removeChild(i.firstChild);var o=st[n];return i.innerHTML="<"+o+' xmlns="'+n+'">'+t+"</"+o+">",i.removeChild(i.firstChild).firstChild}(this.renderToString(),e,r);return this.adoptDom([i],0),i}var o,u,s=this._domNode=ut(e,r),l=this.attrs;if(null!==n)if("string"==typeof n)this._escapeChildren?s.textContent=n:s.innerHTML=n;else for(var a=0,h=n.length;a<h;)s.appendChild(n[a++].renderToDom(r));if(l!==it)for(o in l)null!=(u=l[o])&&(o in J?K(s,J[o],u):b(o).set(s,o,u));return s},renderToString:function(){var t=this.tag;if("!"===t)return"\x3c!----\x3e";var e,n,i,o=this._ns,u=this.attrs,s=this.children,l="<"+t;if(null!==o&&(l+=' xmlns="'+o+'"'),u!==it)for(e in u)if(null!=(n=u[e])){if("value"===e)switch(t){case"textarea":s=n;continue;case"select":this.setCtx({value:n,multiple:u.multiple});continue;case"option":var a=this._ctx;(a.multiple?r(a.value,n):a.value===n)&&(l+=" "+b("selected").toString("selected",!0))}e in J||""===(i=b(e).toString(e,n))||(l+=" "+i)}if(t in gt)l+="/>";else{if(l+=">",null!==s)if("string"==typeof s)l+=this._escapeChildren?rt(s):s;else for(var h=0,c=s.length;h<c;)l+=s[h++].renderToString();l+="</"+t+">"}return l},adoptDom:function(t,e){var n,r,i=this._domNode=t[e],o=this.attrs,u=this.children;if(o!==it)for(n in o)null!=(r=o[n])&&n in J&&K(i,J[n],r);if(null!==u&&"string"!=typeof u){var s=0,l=u.length;if(l>0)for(var a=i.childNodes,h=0;s<l;)h=u[s++].adoptDom(a,h)}return e+1},mount:function(){var t=this.children;if(null!==t&&"string"!=typeof t)for(var e=0,n=t.length;e<n;)t[e++].mount();null!==this.ref&&this.ref(this._domNode)},unmount:function(){var t=this.children;if(t&&"string"!=typeof t)for(var e=0,n=t.length;e<n;)t[e++].unmount();!function(t){var e=R(t,!0);if(null!==e&&e in U){var n=U[e];for(var r in n)null!==n[r]&&V(q[r],t,r);delete U[e]}}(this._domNode),this._domNode=null,null!==this.ref&&this.ref(null)},clone:function(t,e,n){var r=new yt(this.tag,this.key);return r.attrs=null==t?this.attrs:o(this.attrs,t),r.children=null==e?this.children:Ct(e),r.ref=null==n?this.ref:n,r._escapeChildren=this._escapeChildren,r._ctx=this._ctx,r},patch:function(t){this===t?this._patchChildren(t):this.key===t.key&&this.type===t.type&&this.tag===t.tag&&this._ns===t._ns?(t._domNode=this._domNode,this._patchAttrs(t),this._patchChildren(t),this._patchRef(t)):Q.replace(this,t)},_patchChildren:function(t){var e=this.children,n=t.children;if(null!==e||null!==n){var r="string"==typeof e;if("string"==typeof n)return r?void(e!==n&&Q.updateText(this,n,t._escapeChildren)):(null!==e&&e.length>0&&Q.removeChildren(this),void(""!==n&&Q.updateText(this,n,t._escapeChildren)));if(null!==n&&0!==n.length)if(r&&""!==e&&Q.removeText(this),r||null===e||0===e.length)for(var i=n.length,o=0;o<i;)Q.appendChild(t,n[o++]);else X(this,t);else e&&(r?Q.removeText(this):e.length>0&&Q.removeChildren(this))}},_patchAttrs:function(t){var e=this.attrs,n=t.attrs;if(e!==n){var r,i,o,u,s;if(n!==it)for(r in n)o=n[r],e===it||null==(i=e[r])?null!=o&&Q.updateAttr(this,r,o):null==o?Q.removeAttr(this,r):"object"==typeof o&&"object"==typeof i?(s=Array.isArray(o),u=Array.isArray(i),s||u?s&&u?this._patchAttrArr(r,i,o):Q.updateAttr(this,r,o):this._patchAttrObj(r,i,o)):i!==o&&Q.updateAttr(this,r,o);if(e!==it)for(r in e)n!==it&&r in n||null==e[r]||Q.removeAttr(this,r)}},_patchAttrArr:function(t,e,n){if(e!==n){var r=e.length,i=!1;if(r===n.length)for(var o=0;!i&&o<r;)e[o]!=n[o]&&(i=!0),++o;else i=!0;i&&Q.updateAttr(this,t,n)}},_patchAttrObj:function(t,e,n){if(e!==n){var r=Object.create(null),i=!1;for(var o in n)e[o]!=n[o]&&(i=!0,r[o]=n[o]);for(var u in e)null==e[u]||u in n||(i=!0,r[u]=null);i&&Q.updateAttr(this,t,r)}},_patchRef:function(t){null!==this.ref?this.ref!==t.ref&&(this.ref(null),null!==t.ref&&t.ref(t._domNode)):null!==t.ref&&t.ref(t._domNode)}};var At="undefined"!=typeof window&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame)||function(t){setTimeout(t,1e3/60)},bt=[];function Dt(t,e){return t.priority-e.priority}function Nt(){for(var t=0;t<bt.length;){bt.sort(Dt);for(var e=bt.length;t<e;){var n=bt[t++],r=n.fn,i=n.ctx;r.call(i)}bt.length>e&&(bt=bt.slice(e),t=0)}bt=[]}function wt(t){1===bt.push(t)&&At(Nt)}var Et="undefined"==typeof console?null:console,kt={},Tt={log:"",info:"",warn:"Warning!",error:"Error!"};function Rt(t){var e=vt(t);return null===e?Ce("!"):"object"==typeof e?Array.isArray(e)?Ce("fragment",null,null,e):e:Ce("plaintext",null,null,e)}function St(){this._listeners=Object.create(null)}["log","info","warn","error"].forEach(function(t){kt[t]=Et?Et[t]?function(e,n,r,i,o){var u=Tt[t];switch(arguments.length){case 1:Et[t](u,e);break;case 2:Et[t](u,e,n);break;case 3:Et[t](u,e,n,r);break;case 4:Et[t](u,e,n,r,i);break;case 5:Et[t](u,e,n,r,i,o)}}:function(){Et.log.apply(Et,arguments)}:xt}),St.prototype={on:function(t,e,n){return void 0===n&&(n=null),(this._listeners[t]||(this._listeners[t]=[])).push({fn:e,fnCtx:n}),this},off:function(t,e,n){void 0===n&&(n=null);var r=this._listeners[t];if(r)for(var i,o=0;o<r.length;){if((i=r[o]).fn===e&&i.fnCtx===n){r.splice(o,1);break}o++}return this},emit:function(t){var e=this._listeners[t];if(e){for(var n=0,r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];for(;n<e.length;){var u=e[n++],s=u.fn,l=u.fnCtx;s.call.apply(s,[l].concat(i))}}return this}};var Ft=Object.create(null),Mt=0;function Ot(t,e,n,r,i){var o,u=R(t),s=Ft[u];if(s&&null!==s.tree){o=++s.id;var l=function(){if((s=Ft[u])&&s.id===o){var t=s.tree,i=Rt(e);n&&i.setCtx(n),t.patch(i),s.tree=i,It(r)}};i?l():wt({priority:0,fn:l})}else{if(s=Ft[u]={tree:null,id:o=++Mt},t.childNodes.length>0){var a=function(t){var e,n=t.childNodes,r=n.length,i=0,o=null;for(;i<r;)e=n[i++],o?o.push(e):e.nodeType===Node.COMMENT_NODE&&"vidom"===e.textContent&&(o=[]);return o}(t);if(null!==a){var h=s.tree=Rt(e);return n&&h.setCtx(n),h.adoptDom(a,0),h.mount(),void It(r)}t.textContent=""}var c=function(){var i=Ft[u];if(i&&i.id===o){var s=i.tree=Rt(e);n&&s.setCtx(n),E.append(t,s.renderToDom($(t))),s.mount(),It(r)}};i?c():wt({priority:0,fn:c})}}function jt(t,e,n){var r=R(t),i=Ft[r];if(i){var o=++i.id,u=function(){if((i=Ft[r])&&i.id===o){delete Ft[r];var t=i.tree;if(null!==t){var n=t.getDomNode();t.unmount(),E.remove(n)}It(e)}};i.tree?n?u():wt({priority:0,fn:u}):n||It(e)}else n||It(e)}function It(t){t&&t()}function Lt(){var t=[];for(var e in Ft){var n=Ft[e].tree;n&&t.push(n)}return t}(new St).getRootNodes=Lt;var Pt=1;function Ut(){this.onInit()}function qt(){this.__isMounted=!0,this.__prevState=this.state,this.getRootElement().mount(),this.onMount()}function Bt(){this.__isMounted=!1,this.getRootElement().unmount(),this.onUnmount()}function Ht(t,e,n,r){if(r&&(this.__prevAttrs=this.attrs,this.__prevChildren=this.children,this.__prevContext=this.context,this.attrs=this.__buildAttrs(t),this.children=e,this.context=n),this.__isUpdating=!0,this.onChange(this.__prevAttrs,this.__prevChildren,this.__prevState,this.__prevContext),this.__isUpdating=!1,this.shouldRerender(this.__prevAttrs,this.__prevChildren,this.__prevState,this.__prevContext)){var i=this.getRootElement();this.__rootElement=this.render(),i.patch(this.__rootElement)}this.onUpdate(this.__prevAttrs,this.__prevChildren,this.__prevState,this.__prevContext),this.__prevAttrs=this.attrs,this.__prevChildren=this.children,this.__prevState=this.state,this.__prevContext=this.context}function Zt(){return!0}function zt(){return null}function Kt(t){return this.getRootElement().renderToDom(t)}function Vt(){return this.getRootElement().renderToString()}function Wt(t,e){return this.getRootElement().adoptDom(t,e)}function $t(){return this.getRootElement().getDomNode()}function Gt(){return it}function Jt(t){this.state=this.state===it?t:o(this.state,t,!0),this.update()}function Qt(){var t=Rt(this.onRender()),e=this.onChildContextRequest(),n=e===it?this.context:this.context===it?e:o(this.context,e);return t.setCtx(n),t}function Xt(){!this.__isUpdating&&this.isMounted()&&(this.__isUpdating=!0,wt({priority:this.__id,fn:Yt,ctx:this}))}function Yt(){this.__isUpdating&&this.isMounted()&&this.patch(this.attrs,this.children,this.context,!1)}function te(){return null===this.__rootElement?this.__rootElement=this.render():this.__rootElement}function ee(){return this.__isMounted}function ne(){return this}function re(t){if(t===this.attrs)return t;var e=this.constructor.defaultAttrs,n=null!=e;return t===it?n?e:t:n?o(e,t):t}function ie(t,e){var n=function(t,e,n){this.attrs=this.__buildAttrs(t),this.children=e,this.state=it,this.context=n,this.__id=Pt++,this.__isMounted=!1,this.__isUpdating=!1,this.__rootElement=null,this.__prevAttrs=this.attrs,this.__prevChildren=this.children,this.__prevState=it,this.__prevContext=this.context},r={constructor:n,init:Ut,onInit:xt,mount:qt,unmount:Bt,onMount:xt,onUnmount:xt,onChange:xt,shouldRerender:Zt,onRender:zt,onUpdate:xt,isMounted:ee,setState:Jt,renderToDom:Kt,renderToString:Vt,adoptDom:Wt,getDomNode:$t,getRootElement:te,render:Qt,update:Xt,patch:Ht,onChildContextRequest:Gt,onRefRequest:ne,__buildAttrs:re};for(var i in t)r[i]=t[i];for(var o in n.prototype=r,e)n[o]=e[o];return n.__vidom__component__=!0,n}var oe=ie({onInit:function(){var t=this;this._addAttrs={onChange:null,onInput:function(e){t.onInput(e)}}},onRender:function(){return new yt("input",null,o(this.attrs,this._addAttrs))},onInput:function(t){var e=this.attrs,n=e.onChange,r=e.value,i=void 0===r?"":r,o=this.getDomNode();if(i!==o.value&&(n&&n(t),Nt(),this.isMounted())){var u=this.attrs.value;void 0!==u&&o.value!==u&&(o.value=u)}},onRefRequest:function(){return this.getDomNode()}}),ue=Object.create(null),se=ie({onInit:function(){var t=this;this._addAttrs={onChange:function(e){t.onInputChange(e)}}},onRender:function(){return new yt("input",null,o(this.attrs,this._addAttrs))},onMount:function(){var t=this.attrs.name;t&&le(t,this)},onUpdate:function(t){var e=t.name,n=this.attrs.name;n!==e&&(e&&ae(e,this),n&&le(n,this))},onUnmount:function(){var t=this.attrs.name;t&&ae(t,this)},onInputChange:function(t){var e=this.attrs.onChange;if(e&&e(t),Nt(),this.isMounted()){var n=this.getDomNode(),r=this.attrs,i=r.name,o=r.checked;if(void 0!==o&&n.checked!==o)if(i){for(var u,s,l=ue[i],a=l.length,h=0;h<a;)if(void 0!==(s=(u=l[h++]).attrs.checked)){var c=u.getDomNode();s!==c.checked&&(c.checked=s)}}else n.checked=o}},onRefRequest:function(){return this.getDomNode()}});function le(t,e){t in ue?ue[t].push(e):ue[t]=[e]}function ae(t,e){for(var n=ue[t],r=n.length,i=0;i<r;){if(n[i]===e)return void(1===r?delete ue[t]:n.splice(i,1));i++}}var he=ie({onInit:function(){var t=this;this._addAttrs={onChange:function(e){t.onInputChange(e)}}},onRender:function(){return new yt("input",null,o(this.attrs,this._addAttrs))},onInputChange:function(t){var e=this.attrs.onChange;if(e&&e(t),Nt(),this.isMounted()){var n=this.getDomNode(),r=this.attrs.checked;void 0!==r&&n.checked!==r&&(n.checked=r)}},onRefRequest:function(){return this.getDomNode()}}),ce=ie({onRender:function(){return new yt("input",null,this.attrs)},onRefRequest:function(){return this.getDomNode()}});function de(t,e,n,r,i){if(this.type=ft,this.key=null==e?null:e,this.attrs=n||it,this.children=r,this.ref=null==i?null:i,t===oe)switch(this.attrs.type){case"radio":this.component=se;break;case"checkbox":this.component=he;break;case"file":this.component=ce;break;default:this.component=t}else this.component=t;this._instance=null,this._ctx=it}function fe(t,e,n,r){this.type=pt,this.component=t,this.key=null==e?null:e,this.attrs=n||it,this.children=r,this._rootElement=null,this._ctx=it}function pe(t,e){this.type=dt,this.key=null==t?null:t,this.children=ve(e),this._domNode=null,this._ctx=it}function ve(t){var e=vt(t);return null===e||Array.isArray(e)?e:["string"==typeof e?Rt(e):e]}function me(t,e){this.type=ct,this.key=null==t?null:t,this.children=ge(e),this._domNode=null}function ge(t){if(null==t)return null;switch(typeof t){case"string":return t;case"boolean":return null;default:return""+t}}de.prototype={getDomNode:function(){return null===this._instance?null:this._instance.getDomNode()},setCtx:function(t){return this._ctx=t,this},renderToDom:function(t){return this._getInstance().renderToDom(t)},renderToString:function(){return this._getInstance().renderToString()},adoptDom:function(t,e){return this._getInstance().adoptDom(t,e)},mount:function(){this._instance.mount(),null!==this.ref&&this.ref(this._instance.onRefRequest())},unmount:function(){null!==this._instance&&(this._instance.unmount(),this._instance=null),null!==this.ref&&this.ref(null)},clone:function(t,e,n){var r=new de(this.component,this.key);return r.attrs=null==t?this.attrs:o(this.attrs,t),r.children=null==e?this.children:e,r.ref=null==n?this.ref:n,r._ctx=this._ctx,r},patch:function(t){var e=this._getInstance();this===t?e.patch(t.attrs,t.children,t._ctx,!0):this.key===t.key&&this.type===t.type&&this.component===t.component?(e.patch(t.attrs,t.children,t._ctx,!0),t._instance=e,this._patchRef(t)):(Q.replace(this,t),this._instance=null)},_patchRef:function(t){null!==this.ref?this.ref!==t.ref&&(this.ref(null),null!==t.ref&&t.ref(t._instance.onRefRequest())):null!==t.ref&&t.ref(t._instance.onRefRequest())},_getInstance:function(){return null===this._instance&&(this._instance=new this.component(this.attrs,this.children,this._ctx),this._instance.init()),this._instance}},fe.prototype={getDomNode:function(){return null===this._rootElement?null:this._rootElement.getDomNode()},setCtx:function(t){return this._ctx=t,this},renderToDom:function(t){return this._getRootElement().renderToDom(t)},renderToString:function(){return this._getRootElement().renderToString()},adoptDom:function(t,e){return this._getRootElement().adoptDom(t,e)},mount:function(){this._getRootElement().mount()},unmount:function(){null!==this._rootElement&&(this._rootElement.unmount(),this._rootElement=null)},clone:function(t,e){var n=new fe(this.component,this.key);return n.attrs=null==t?this.attrs:o(this.attrs,t),n.children=null==e?this.children:e,n._ctx=this._ctx,n},patch:function(t){if(this===t){var e=this._getRootElement();this._rootElement=null,e.patch(this._getRootElement())}else this.key===t.key&&this.type===t.type&&this.component===t.component?(this._getRootElement().patch(t._getRootElement()),this._rootElement=null):(Q.replace(this,t),this._rootElement=null)},_getRootElement:function(){if(null!==this._rootElement)return this._rootElement;var t=this.attrs,e=this.component,n=e.defaultAttrs,r=null!=n,i=t===it?r?n:t:r?o(n,t):t;return this._rootElement=Rt(e(i,this.children,this._ctx)),this._rootElement.setCtx(this._ctx),this._rootElement}},pe.prototype={getDomNode:function(){return this._domNode},setCtx:function(t){if(t!==it){this._ctx=t;var e=this.children;if(null!==e)for(var n=e.length,r=0;r<n;)e[r++].setCtx(t)}return this},renderToDom:function(t){var e=this.children,n=[ut("!",null),ut("!",null)],r=document.createDocumentFragment();if(r.appendChild(n[0]),null!==e)for(var i=e.length,o=0;o<i;)r.appendChild(e[o++].renderToDom(t));return r.appendChild(n[1]),this._domNode=n,r},renderToString:function(){var t=this.children,e="\x3c!----\x3e";if(null!==t)for(var n=t.length-1;n>=0;)e=t[n--].renderToString()+e;return"\x3c!----\x3e"+e},adoptDom:function(t,e){var n=[t[e++]],r=this.children;if(null!==r)for(var i=r.length,o=0;o<i;)e=r[o++].adoptDom(t,e);return n.push(t[e]),this._domNode=n,e+1},mount:function(){var t=this.children;if(null!==t)for(var e=0,n=t.length;e<n;)t[e++].mount()},unmount:function(){var t=this.children;if(null!==t)for(var e=t.length,n=0;n<e;)t[n++].unmount();this._domNode=null},clone:function(t){var e=new pe(this.key);return e.children=null==t?this.children:ve(t),e._ctx=this._ctx,e},patch:function(t){this===t?this._patchChildren(t):this.key===t.key&&this.type===t.type?(t._domNode=this._domNode,this._patchChildren(t)):Q.replace(this,t)},_patchChildren:function(t){var e=this.children,n=t.children;if(null!==e||null!==n)if(null!==n&&0!==n.length)if(null!==e&&0!==e.length)X(this,t);else for(var r=n.length,i=0;i<r;)Q.appendChild(t,n[i++]);else null!==e&&e.length>0&&Q.removeChildren(this)}},me.prototype={getDomNode:function(){return this._domNode},setCtx:function(){return this},renderToDom:function(){var t=this.children;return this._domNode=document.createTextNode(null===t?"":t),this._domNode},renderToString:function(){return"\x3c!----\x3e"+(null===this.children?"":rt(this.children))+"\x3c!----\x3e"},adoptDom:function(t,e){var n=[t[e++]];return this.children&&e++,n.push(t[e++]),this._domNode=n,e},mount:xt,unmount:function(){this._domNode=null},clone:function(t){var e=new me(this.key);return e.children=null==t?this.children:ge(t),e},patch:function(t){this!==t&&(this.type===t.type?(t._domNode=this._domNode,this._patchChildren(t)):Q.replace(this,t))},_patchChildren:function(t){var e=this.children,n=t.children;e!==n&&(n?Q.updateText(this,n,!0):e&&Q.removeText(this))}};var _e=ie({onInit:function(){var t=this;this._addAttrs={onChange:null,onInput:function(e){t.onInput(e)}}},onRender:function(){return new yt("textarea",null,o(this.attrs,this._addAttrs))},onInput:function(t){var e=this.attrs,n=e.onChange,r=e.value,i=void 0===r?"":r,o=this.getDomNode();if(i!==o.value&&(n&&n(t),Nt(),this.isMounted())){var u=this.attrs.value;void 0!==u&&o.value!==u&&(o.value=u)}},onRefRequest:function(){return this.getDomNode()}}),ye=ie({onInit:function(){var t=this;this._addAttrs={onChange:function(e){t.onInputChange(e)}}},onRender:function(){return new yt("select",null,o(this.attrs,this._addAttrs),this.children)},onInputChange:function(t){var e=t.target,n=this.attrs,i=n.onChange,o=n.multiple;if(i)if(o){for(var u,s=[],l=e.options,a=l.length,h=0;h<a;)(u=l[h++]).selected&&s.push(u.value);i(t,s)}else i(t);if(Nt(),this.isMounted()){var c=this.attrs,d=c.value,f=c.multiple;if(void 0!==d)if(f)for(var p,v=e.options,m=v.length,g=0;g<m;)(p=v[g++]).selected=r(d,p.value);else e.value!=d&&(e.value=d)}},onRefRequest:function(){return this.getDomNode()}});function Ce(t,e,n,r,i,o){switch(typeof t){case"string":switch(t){case"fragment":return new pe(e,r);case"plaintext":return new me(e,r);case"input":return new de(oe,e,n,r,i);case"textarea":return new de(_e,e,n,r,i);case"select":return new de(ye,e,n,r,i);default:return new yt(t,e,n,r,i,o)}case"function":return t.__vidom__component__?new de(t,e,n,r,i):new fe(t,e,n,r)}}var xe=Array.prototype.slice;var Ae=ie();t.Component=Ae,t.IS_DEBUG=!1,t.console=kt,t.createComponent=ie,t.elem=Ce,t.getMountedRootNodes=Lt,t.h=function(t,e){var n,r=!1,i=null,o=null,u=null,s=arguments.length>2?arguments.length>3?xe.call(arguments,2):arguments[2]:null;if(e)for(var l in e)switch(l){case"key":o=e[l],r=!0;break;case"ref":u=e[l],r=!0;break;case"html":s=e[l],n=!1,r=!0;break;default:null===i&&(i=Object.create(null)),i[l]=e[l]}return Ce(t,o,r?i:e,s,u,n)},t.mount=function(t,e,n,r){"function"==typeof n&&(r=n,n=this),Ot(t,e,n,r,!1)},t.mountSync=function(t,e,n){Ot(t,e,n,null,!0)},t.renderToString=function(t){return"\x3c!--vidom--\x3e"+Rt(t).renderToString()},t.toElem=Rt,t.toElems=function(t){var e=vt(t);return null===e?[]:"string"==typeof e?[Ce("plaintext",null,null,e)]:Array.isArray(e)?e:[e]},t.unmount=function(t,e){jt(t,e,!1)},t.unmountSync=function(t){jt(t,null,!0)},Object.defineProperty(t,"__esModule",{value:!0})});
