"use strict";!function(){window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=function(e,t){t=t||window;for(var r=0;r<this.length;r++)e.call(t,this[r],r,this)}),window.addEventListener("setIframeHeight",function(e){var t,r=e.detail;(t=function(t){var r=null;return document.querySelectorAll("iframe").forEach(function(e){r||e.dataset.setIframeHeightId!==t||(r=e)}),r}(r.iframeId))||(t=c(r.iframeSrc));!t&&r.iframeReferrer&&(t=c(r.iframeReferrer));if(!t){var i=document.querySelectorAll("iframe[data-set-iframe-height-id]");1===i.length&&(t=i[0])}if(t){t.dataset.setIframeHeightId=r.iframeId,t.style.height=r.height+"px";var n=h(t.dataset.iframeAutoHeightCurrentSrc||t.src)!==h(r.iframeSrc);t.dataset.iframeAutoHeightCurrentSrc=r.iframeSrc;var a=d[r.iframeId],o=r.height;if(void 0===a?m(window,"setIframeHeight:determined",r):o<a?m(window,"setIframeHeight:shrinked",r):a<o&&m(window,"setIframeHeight:enlarged",r),d[r.iframeId]=o,window.history.replaceState&&t.dataset.iframeAutoHeightDeepLinkPattern&&n){var f=s(t.dataset.iframeAutoHeightDeepLinkPattern.replace(/%deepLinkIframeSrc%/,encodeURIComponent(r.iframeSrc)));h(document.location.href)!==h(f)&&(window.history.replaceState({},"",f),m(window,"setIframeHeight:deepLink:changed",{childUrl:r.iframeSrc,parentUrl:f})),t.contentWindow&&t.contentWindow.postMessage&&t.contentWindow.postMessage('setIframeHeight:deepLink:changed::{ "parentUrl": "'+f+'", "childUrl": "'+r.iframeSrc+'"}',"*")}}}),window.addEventListener("message",function(e){if("string"==typeof(t=e.data)&&t.indexOf("::")){var t;if(2===(t=t.split("::")).length&&"setIframeHeight"===t[0]){var r=JSON.parse(t[1]);i.setHeight(r)}}});var i={setHeight:function(e){e.height=parseInt(e.height,10),m(window,"setIframeHeight",e)}},d={};function c(r){var i=null;return document.querySelectorAll("iframe").forEach(function(e){var t=e.dataset.iframeAutoHeightCurrentSrc||e.src;if(t&&(t=s(t))===r)return i=e,!1}),i}function s(e){return 0===e.indexOf("/")&&(e=(document.location.href.match(/https?:\/\/.[^/]+/)||[])[0]+e),e}function h(e){return e.replace(/^https?:\/\//,"//")}function m(e,t,r){var i=document.createEvent("CustomEvent");i.initCustomEvent(t,!0,!0,r),e.dispatchEvent(i)}}();