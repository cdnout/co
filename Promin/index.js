!function(e){var t,n,s=-1,r=[];e.promin={key:{backspace:8,tab:9,enter:13,return:13,shift:16,ctrl:17,alt:18,caps:20,escape:27,space:32,pageup:33,pagedown:34,end:35,home:36,left:37,up:38,right:39,down:40,del:46}};var a={ajaxCallback:null,autofocus:!0,actions:{submit:"default"},events:{change:null,next:null,previous:null,submit:null,reset:null},shortcuts:{next:[e.promin.key.tab,e.promin.key.enter],previous:[[e.promin.key.tab,e.promin.key.shift]],reset:[e.promin.key.escape]}},i={next:function(e){var t=s+1;u.eventIsSet("next",e)&&a.events.next.call(this,t)===!1||(t===n.length?i.submit():i.show(t))},previous:function(e){var t=s-1;u.eventIsSet("previous",e)&&a.events.next.call(this,t)===!1||t<0||i.show(t)},show:function(e,t,r){var i,o;u.eventIsSet("change",t)&&a.events.change.call(this,e)===!1||(i=n.eq(s),o=u.getField(i),i.hide(),o.blur(),e<n.length&&(i=n.eq(e),o=u.getField(i),i.show(),r&&!a.autofocus||o.focus()),s=e)},submit:function(s){var r;if(!u.eventIsSet("submit",s)||(r=n.find("input, textarea, select"),a.events.submit.call(this,r)!==!1))if(a.actions.submit&&"default"===a.actions.submit)t.submit();else if(a.actions.submit&&"ajax"===a.actions.submit){var i=t.attr("action");r=t.serialize(),r.ajax=!0,e.ajax({cache:!1,complete:a.ajaxCallback,data:r,type:"POST",url:i})}},reset:function(e){i.show(0,!1,!0),n.find("input").each(u.resetInput),n.find("textarea").each(u.resetTextarea),n.find("select").each(u.resetSelect),u.eventIsSet("reset",e)&&a.events.reset.call(this)}},u={init:function(s){e.extend(a,s),t=this,n=this.find(".pm-step"),t.addClass("promin"),n.hide().each(function(t,n){var s=e(n),r=u.getField(s);r.keydown(u.keydownHandler),r.keyup(u.keyupHandler)}),n.length>0&&i.show(0,!1,!0)},keydownHandler:function(e){if(r.push(e.keyCode),a.shortcuts)return a.shortcuts.next&&a.shortcuts.next.length>0&&u.keydown.apply(null,a.shortcuts.next)?(i.next(),!1):a.shortcuts.previous&&a.shortcuts.previous.length>0&&u.keydown.apply(null,a.shortcuts.previous)?(i.previous(),!1):a.shortcuts.reset&&a.shortcuts.reset.length>0&&u.keydown.apply(null,a.shortcuts.reset)?(i.reset(),!1):void 0},keyupHandler:function(e){for(var t=r.length;t--;)r[t]===e.keyCode&&r.splice(t,1)},keydown:function(){var t=!1;return e.each(arguments,function(n,s){if("number"==typeof s){if(1!==r.length)return;if(e.inArray(s,r)>=0)return t=!0,!1}else{if(s.length!==r.length)return;var a=0;if(e.each(s,function(t,n){e.inArray(n,r)>=0&&a++}),a===s.length)return t=!0,!1}}),t},resetInput:function(t,n){var s=e(n);s.val(s.attr("value"))},resetTextarea:function(t,n){var s=e(n);s.val(s.html())},resetSelect:function(t,n){var s=e(n),r=s.find("option[selected]").attr("value");s.val(r)},getField:function(e){var t=e.prop("nodeName").toLowerCase(),n=e.find("input, textarea, select");return"input"===t||"textarea"===t||"select"===t?e:n.length>0?n.eq(0):n},eventIsSet:function(e,t){return!t&&a.events&&a.events[e]&&"function"==typeof a.events[e]}};e.fn.promin=function(e){return i[e]?i[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?this:u.init.apply(this,arguments)}}(jQuery);
//# sourceMappingURL=jquery.promin.min.js.map