function t(t){for(var e=arguments.length,r=Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];if("production"!==process.env.NODE_ENV){var o=Y[t],i=o?"function"==typeof o?o.apply(null,r):o:"unknown error nr: "+t;throw Error("[Immer] "+i)}throw Error("[Immer] minified error nr: "+t+(r.length?" "+r.map(function(t){return"'"+t+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function n(t){return!!t&&!!t[Q]}function r(t){return!!t&&(function(t){if(!t||"object"!=typeof t)return!1;var e=Object.getPrototypeOf(t);return!e||e===Object.prototype}(t)||Array.isArray(t)||!!t[L]||!!t.constructor[L]||s(t)||v(t))}function e(e){return n(e)||t(23,e),e[Q].t}function i(t,e,r){void 0===r&&(r=!1),0===o(t)?(r?Object.keys:Z)(t).forEach(function(n){r&&"symbol"==typeof n||e(n,t[n],t)}):t.forEach(function(r,n){return e(n,r,t)})}function o(t){var e=t[Q];return e?e.i>3?e.i-4:e.i:Array.isArray(t)?1:s(t)?2:v(t)?3:0}function u(t,e){return 2===o(t)?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function a(t,e){return 2===o(t)?t.get(e):t[e]}function f(t,e,r){var n=o(t);2===n?t.set(e,r):3===n?(t.delete(e),t.add(r)):t[e]=r}function c(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}function s(t){return X&&t instanceof Map}function v(t){return q&&t instanceof Set}function p(t){return t.o||t.t}function l(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var e=tt(t);delete e[Q];for(var r=Z(e),n=0;n<r.length;n++){var o=r[n],i=e[o];!1===i.writable&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(e[o]={configurable:!0,writable:!0,enumerable:i.enumerable,value:t[o]})}return Object.create(Object.getPrototypeOf(t),e)}function d(t,e){return void 0===e&&(e=!1),y(t)||n(t)||!r(t)?t:(o(t)>1&&(t.set=t.add=t.clear=t.delete=h),Object.freeze(t),e&&i(t,function(t,e){return d(e,!0)},!0),t)}function h(){t(2)}function y(t){return null==t||"object"!=typeof t||Object.isFrozen(t)}function b(e){var r=nt[e];return r||t(18,e),r}function m(t,e){nt[t]||(nt[t]=e)}function _(){return"production"===process.env.NODE_ENV||U||t(0),U}function j(t,e){e&&(b("Patches"),t.u=[],t.s=[],t.v=e)}function g(t){w(t),t.p.forEach(S),t.p=null}function w(t){t===U&&(U=t.l)}function O(t){return U={p:[],l:U,h:t,m:!0,_:0}}function S(t){var e=t[Q];0===e.i||1===e.i?e.j():e.g=!0}function P(e,n){n._=n.p.length;var o=n.p[0],i=void 0!==e&&e!==o;return n.h.O||b("ES5").S(n,e,i),i?(o[Q].P&&(g(n),t(4)),r(e)&&(e=M(n,e),n.l||x(n,e)),n.u&&b("Patches").M(o[Q],e,n.u,n.s)):e=M(n,o,[]),g(n),n.u&&n.v(n.u,n.s),e!==H?e:void 0}function M(t,e,r){if(y(e))return e;var n=e[Q];if(!n)return i(e,function(o,i){return A(t,n,e,o,i,r)},!0),e;if(n.A!==t)return e;if(!n.P)return x(t,n.t,!0),n.t;if(!n.I){n.I=!0,n.A._--;var o=4===n.i||5===n.i?n.o=l(n.k):n.o;i(3===n.i?new Set(o):o,function(e,i){return A(t,n,o,e,i,r)}),x(t,o,!1),r&&t.u&&b("Patches").R(n,r,t.u,t.s)}return n.o}function A(e,o,i,a,c,s){if("production"!==process.env.NODE_ENV&&c===i&&t(5),n(c)){var p=M(e,c,s&&o&&3!==o.i&&!u(o.D,a)?s.concat(a):void 0);if(f(i,a,p),!n(p))return;e.m=!1}if(r(c)&&!y(c)){if(!e.h.N&&e._<1)return;M(e,c),o&&o.A.l||x(e,c)}}function x(t,e,r){void 0===r&&(r=!1),t.h.N&&t.m&&d(e,r)}function z(t,e){var r=t[Q];return(r?p(r):t)[e]}function I(t,e){if(e in t)for(var r=Object.getPrototypeOf(t);r;){var n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=Object.getPrototypeOf(r)}}function k(t){t.P||(t.P=!0,t.l&&k(t.l))}function E(t){t.o||(t.o=l(t.t))}function R(t,e,r){var n=s(e)?b("MapSet").T(e,r):v(e)?b("MapSet").F(e,r):t.O?function(t,e){var r=Array.isArray(t),n={i:r?1:0,A:e?e.A:_(),P:!1,I:!1,D:{},l:e,t:t,k:null,o:null,j:null,C:!1},o=n,i=rt;r&&(o=[n],i=et);var a=Proxy.revocable(o,i),u=a.revoke,c=a.proxy;return n.k=c,n.j=u,c}(e,r):b("ES5").J(e,r);return(r?r.A:_()).p.push(n),n}function D(e){return n(e)||t(22,e),function t(e){if(!r(e))return e;var n,u=e[Q],c=o(e);if(u){if(!u.P&&(u.i<4||!b("ES5").K(u)))return u.t;u.I=!0,n=N(e,c),u.I=!1}else n=N(e,c);return i(n,function(e,r){u&&a(u.t,e)===r||f(n,e,t(r))}),3===c?new Set(n):n}(e)}function N(t,e){switch(e){case 2:return new Map(t);case 3:return Array.from(t)}return l(t)}function T(){function e(t,e){var r=s[t];return r?r.enumerable=e:s[t]=r={configurable:!0,enumerable:e,get:function(){var e=this[Q];return"production"!==process.env.NODE_ENV&&f(e),rt.get(e,t)},set:function(e){var r=this[Q];"production"!==process.env.NODE_ENV&&f(r),rt.set(r,t,e)}},r}function r(t){for(var e=t.length-1;e>=0;e--){var r=t[e][Q];if(!r.P)switch(r.i){case 5:a(r)&&k(r);break;case 4:o(r)&&k(r)}}}function o(t){for(var e=t.t,r=t.k,n=Z(r),o=n.length-1;o>=0;o--){var i=n[o];if(i!==Q){var a=e[i];if(void 0===a&&!u(e,i))return!0;var f=r[i],s=f&&f[Q];if(s?s.t!==a:!c(f,a))return!0}}var p=!!e[Q];return n.length!==Z(e).length+(p?0:1)}function a(t){var e=t.k;if(e.length!==t.t.length)return!0;var r=Object.getOwnPropertyDescriptor(e,e.length-1);return!(!r||r.get)}function f(e){e.g&&t(3,JSON.stringify(p(e)))}var s={};m("ES5",{J:function(t,r){var n=Array.isArray(t),o=function(t,r){if(t){for(var n=Array(r.length),o=0;o<r.length;o++)Object.defineProperty(n,""+o,e(o,!0));return n}var i=tt(r);delete i[Q];for(var a=Z(i),u=0;u<a.length;u++){var c=a[u];i[c]=e(c,t||!!i[c].enumerable)}return Object.create(Object.getPrototypeOf(r),i)}(n,t),i={i:n?5:4,A:r?r.A:_(),P:!1,I:!1,D:{},l:r,t:t,k:o,o:null,g:!1,C:!1};return Object.defineProperty(o,Q,{value:i,writable:!0}),o},S:function(t,e,o){o?n(e)&&e[Q].A===t&&r(t.p):(t.u&&function t(e){if(e&&"object"==typeof e){var r=e[Q];if(r){var n=r.t,o=r.k,c=r.D,f=r.i;if(4===f)i(o,function(e){e!==Q&&(void 0!==n[e]||u(n,e)?c[e]||t(o[e]):(c[e]=!0,k(r)))}),i(n,function(t){void 0!==o[t]||u(o,t)||(c[t]=!1,k(r))});else if(5===f){if(a(r)&&(k(r),c.length=!0),o.length<n.length)for(var s=o.length;s<n.length;s++)c[s]=!1;else for(var p=n.length;p<o.length;p++)c[p]=!0;for(var l=Math.min(o.length,n.length),h=0;h<l;h++)void 0===c[h]&&t(o[h])}}}}(t.p[0]),r(t.p))},K:function(t){return 4===t.i?o(t):a(t)}})}function F(){function e(t){if(!r(t))return t;if(Array.isArray(t))return t.map(e);if(s(t))return new Map(Array.from(t.entries()).map(function(t){return[t[0],e(t[1])]}));if(v(t))return new Set(Array.from(t).map(e));var n=Object.create(Object.getPrototypeOf(t));for(var o in t)n[o]=e(t[o]);return n}function c(t){return n(t)?e(t):t}var f="add";m("Patches",{$:function(r,n){return n.forEach(function(n){for(var i=n.path,u=n.op,c=r,s=0;s<i.length-1;s++){var p=o(c),l=i[s];0!==p&&1!==p||"__proto__"!==l&&"constructor"!==l||t(24),"function"==typeof c&&"prototype"===l&&t(24),"object"!=typeof(c=a(c,l))&&t(15,i.join("/"))}var h=o(c),v=e(n.value),d=i[i.length-1];switch(u){case"replace":switch(h){case 2:return c.set(d,v);case 3:t(16);default:return c[d]=v}case f:switch(h){case 1:return c.splice(d,0,v);case 2:return c.set(d,v);case 3:return c.add(v);default:return c[d]=v}case"remove":switch(h){case 1:return c.splice(d,1);case 2:return c.delete(d);case 3:return c.delete(n.value);default:return delete c[d]}default:t(17,u)}}),r},R:function(t,e,r,n){switch(t.i){case 0:case 4:case 2:return function(t,e,r,n){var o=t.t,s=t.o;i(t.D,function(t,i){var p=a(o,t),l=a(s,t),h=i?u(o,t)?"replace":f:"remove";if(p!==l||"replace"!==h){var v=e.concat(t);r.push("remove"===h?{op:h,path:v}:{op:h,path:v,value:l}),n.push(h===f?{op:"remove",path:v}:"remove"===h?{op:f,path:v,value:c(p)}:{op:"replace",path:v,value:c(p)})}})}(t,e,r,n);case 5:case 1:return function(t,e,r,n){var o=t.t,i=t.D,a=t.o;if(a.length<o.length){var u=[a,o];o=u[0],a=u[1];var s=[n,r];r=s[0],n=s[1]}for(var p=0;p<o.length;p++)if(i[p]&&a[p]!==o[p]){var l=e.concat([p]);r.push({op:"replace",path:l,value:c(a[p])}),n.push({op:"replace",path:l,value:c(o[p])})}for(var h=o.length;h<a.length;h++){var v=e.concat([h]);r.push({op:f,path:v,value:c(a[h])})}o.length<a.length&&n.push({op:"replace",path:e.concat(["length"]),value:o.length})}(t,e,r,n);case 3:return function(t,e,r,n){var o=t.t,i=t.o,a=0;o.forEach(function(t){if(!i.has(t)){var o=e.concat([a]);r.push({op:"remove",path:o,value:t}),n.unshift({op:f,path:o,value:t})}a++}),a=0,i.forEach(function(t){if(!o.has(t)){var i=e.concat([a]);r.push({op:f,path:i,value:t}),n.unshift({op:"remove",path:i,value:t})}a++})}(t,e,r,n)}},M:function(t,e,r,n){r.push({op:"replace",path:[],value:e}),n.push({op:"replace",path:[],value:t.t})}})}function C(){function e(t,e){function r(){this.constructor=t}u(t,e),t.prototype=(r.prototype=e.prototype,new r)}function n(t){t.o||(t.D=new Map,t.o=new Map(t.t))}function o(t){t.o||(t.o=new Set,t.t.forEach(function(e){if(r(e)){var n=R(t.A.h,e,t);t.p.set(e,n),t.o.add(n)}else t.o.add(e)}))}function a(e){e.g&&t(3,JSON.stringify(p(e)))}var u=function(t,e){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},c=function(){function t(t,e){return this[Q]={i:2,l:e,A:e?e.A:_(),P:!1,I:!1,o:void 0,D:void 0,t:t,k:this,C:!1,g:!1},this}e(t,Map);var o=t.prototype;return Object.defineProperty(o,"size",{get:function(){return p(this[Q]).size}}),o.has=function(t){return p(this[Q]).has(t)},o.set=function(t,e){var r=this[Q];return a(r),p(r).has(t)&&p(r).get(t)===e||(n(r),k(r),r.D.set(t,!0),r.o.set(t,e),r.D.set(t,!0)),this},o.delete=function(t){if(!this.has(t))return!1;var e=this[Q];return a(e),n(e),k(e),e.D.set(t,!1),e.o.delete(t),!0},o.clear=function(){var t=this[Q];a(t),p(t).size&&(n(t),k(t),t.D=new Map,i(t.t,function(e){t.D.set(e,!1)}),t.o.clear())},o.forEach=function(t,e){var r=this;p(this[Q]).forEach(function(n,o){t.call(e,r.get(o),o,r)})},o.get=function(t){var e=this[Q];a(e);var o=p(e).get(t);if(e.I||!r(o))return o;if(o!==e.t.get(t))return o;var i=R(e.A.h,o,e);return n(e),e.o.set(t,i),i},o.keys=function(){return p(this[Q]).keys()},o.values=function(){var t,e=this,r=this.keys();return(t={})[V]=function(){return e.values()},t.next=function(){var t=r.next();return t.done?t:{done:!1,value:e.get(t.value)}},t},o.entries=function(){var t,e=this,r=this.keys();return(t={})[V]=function(){return e.entries()},t.next=function(){var t=r.next();if(t.done)return t;var n=e.get(t.value);return{done:!1,value:[t.value,n]}},t},o[V]=function(){return this.entries()},t}(),f=function(){function t(t,e){return this[Q]={i:3,l:e,A:e?e.A:_(),P:!1,I:!1,o:void 0,t:t,k:this,p:new Map,g:!1,C:!1},this}e(t,Set);var r=t.prototype;return Object.defineProperty(r,"size",{get:function(){return p(this[Q]).size}}),r.has=function(t){var e=this[Q];return a(e),e.o?!!e.o.has(t)||!(!e.p.has(t)||!e.o.has(e.p.get(t))):e.t.has(t)},r.add=function(t){var e=this[Q];return a(e),this.has(t)||(o(e),k(e),e.o.add(t)),this},r.delete=function(t){if(!this.has(t))return!1;var e=this[Q];return a(e),o(e),k(e),e.o.delete(t)||!!e.p.has(t)&&e.o.delete(e.p.get(t))},r.clear=function(){var t=this[Q];a(t),p(t).size&&(o(t),k(t),t.o.clear())},r.values=function(){var t=this[Q];return a(t),o(t),t.o.values()},r.entries=function(){var t=this[Q];return a(t),o(t),t.o.entries()},r.keys=function(){return this.values()},r[V]=function(){return this.values()},r.forEach=function(t,e){for(var r=this.values(),n=r.next();!n.done;)t.call(e,n.value,n.value,this),n=r.next()},t}();m("MapSet",{T:function(t,e){return new c(t,e)},F:function(t,e){return new f(t,e)}})}function J(){T(),C(),F()}function K(t){return t}function $(t){return t}var G,U,W="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),X="undefined"!=typeof Map,q="undefined"!=typeof Set,B="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,H=W?Symbol.for("immer-nothing"):((G={})["immer-nothing"]=!0,G),L=W?Symbol.for("immer-draftable"):"__$immer_draftable",Q=W?Symbol.for("immer-state"):"__$immer_state",V="undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator",Y={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(t){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+t},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(t){return"Cannot apply patch, path doesn't resolve: "+t},16:'Sets cannot have "replace" patches.',17:function(t){return"Unsupported patch operation: "+t},18:function(t){return"The plugin for '"+t+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+t+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(t){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+t+"'"},22:function(t){return"'current' expects a draft, got: "+t},23:function(t){return"'original' expects a draft, got: "+t},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},Z="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,tt=Object.getOwnPropertyDescriptors||function(t){var e={};return Z(t).forEach(function(r){e[r]=Object.getOwnPropertyDescriptor(t,r)}),e},nt={},rt={get:function(t,e){if(e===Q)return t;var n=p(t);if(!u(n,e))return function(t,e,r){var n,o=I(e,r);return o?"value"in o?o.value:null===(n=o.get)||void 0===n?void 0:n.call(t.k):void 0}(t,n,e);var o=n[e];return t.I||!r(o)?o:o===z(t.t,e)?(E(t),t.o[e]=R(t.A.h,o,t)):o},has:function(t,e){return e in p(t)},ownKeys:function(t){return Reflect.ownKeys(p(t))},set:function(t,e,r){var n=I(p(t),e);if(null==n?void 0:n.set)return n.set.call(t.k,r),!0;if(!t.P){var o=z(p(t),e),i=null==o?void 0:o[Q];if(i&&i.t===r)return t.o[e]=r,t.D[e]=!1,!0;if(c(r,o)&&(void 0!==r||u(t.t,e)))return!0;E(t),k(t)}return t.o[e]=r,t.D[e]=!0,!0},deleteProperty:function(t,e){return void 0!==z(t.t,e)||e in t.t?(t.D[e]=!1,E(t),k(t)):delete t.D[e],t.o&&delete t.o[e],!0},getOwnPropertyDescriptor:function(t,e){var r=p(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n?{writable:!0,configurable:1!==t.i||"length"!==e,enumerable:n.enumerable,value:r[e]}:n},defineProperty:function(){t(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){t(12)}},et={};i(rt,function(t,e){et[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}}),et.deleteProperty=function(e,r){return"production"!==process.env.NODE_ENV&&isNaN(parseInt(r))&&t(13),rt.deleteProperty.call(this,e[0],r)},et.set=function(e,r,n){return"production"!==process.env.NODE_ENV&&"length"!==r&&isNaN(parseInt(r))&&t(14),rt.set.call(this,e[0],r,n,e[0])};var it=function(){function e(t){this.O=B,this.N=!0,"boolean"==typeof(null==t?void 0:t.useProxies)&&this.setUseProxies(t.useProxies),"boolean"==typeof(null==t?void 0:t.autoFreeze)&&this.setAutoFreeze(t.autoFreeze),this.produce=this.produce.bind(this),this.produceWithPatches=this.produceWithPatches.bind(this)}var o=e.prototype;return o.produce=function(e,n,o){if("function"==typeof e&&"function"!=typeof n){var i=n;n=e;var a=this;return function(t){var e=this;void 0===t&&(t=i);for(var r=arguments.length,o=Array(r>1?r-1:0),u=1;u<r;u++)o[u-1]=arguments[u];return a.produce(t,function(t){var r;return(r=n).call.apply(r,[e,t].concat(o))})}}var u;if("function"!=typeof n&&t(6),void 0!==o&&"function"!=typeof o&&t(7),r(e)){var c=O(this),f=R(this,e,void 0),s=!0;try{u=n(f),s=!1}finally{s?g(c):w(c)}return"undefined"!=typeof Promise&&u instanceof Promise?u.then(function(t){return j(c,o),P(t,c)},function(t){throw g(c),t}):(j(c,o),P(u,c))}if(!e||"object"!=typeof e){if((u=n(e))===H)return;return void 0===u&&(u=e),this.N&&d(u,!0),u}t(21,e)},o.produceWithPatches=function(t,e){var r,n,o=this;return"function"==typeof t?function(e){for(var r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return o.produceWithPatches(e,function(e){return t.apply(void 0,[e].concat(n))})}:[this.produce(t,e,function(t,e){r=t,n=e}),r,n]},o.createDraft=function(e){r(e)||t(8),n(e)&&(e=D(e));var o=O(this),i=R(this,e,void 0);return i[Q].C=!0,w(o),i},o.finishDraft=function(e,r){var n=e&&e[Q];"production"!==process.env.NODE_ENV&&(n&&n.C||t(9),n.I&&t(10));var o=n.A;return j(o,r),P(void 0,o)},o.setAutoFreeze=function(t){this.N=t},o.setUseProxies=function(e){e&&!B&&t(20),this.O=e},o.applyPatches=function(t,e){var r;for(r=e.length-1;r>=0;r--){var o=e[r];if(0===o.path.length&&"replace"===o.op){t=o.value;break}}var i=b("Patches").$;return n(t)?i(t,e):this.produce(t,function(t){return i(t,e.slice(r+1))})},e}(),ot=new it,ut=ot.produce,at=ot.produceWithPatches.bind(ot),ft=ot.setAutoFreeze.bind(ot),ct=ot.setUseProxies.bind(ot),st=ot.applyPatches.bind(ot),vt=ot.createDraft.bind(ot),pt=ot.finishDraft.bind(ot);export default ut;export{it as Immer,st as applyPatches,K as castDraft,$ as castImmutable,vt as createDraft,D as current,J as enableAllPlugins,T as enableES5,C as enableMapSet,F as enablePatches,pt as finishDraft,d as freeze,L as immerable,n as isDraft,r as isDraftable,H as nothing,e as original,ut as produce,at as produceWithPatches,ft as setAutoFreeze,ct as setUseProxies};