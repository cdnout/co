!function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?module.exports=e():t.StringMask=e()}(this,function(){function t(t,e){for(var n=0,r=e-1,i={escape:!0};r>=0&&i&&i.escape;)i=a[t.charAt(r)],n+=i&&i.escape?1:0,r--;return n>0&&n%2===1}function e(t,e){var n=t.replace(/[^0]/g,"").length,r=e.replace(/[^\d]/g,"").length;return r-n}function n(t,e,n,r){return r&&"function"==typeof r.transform&&(e=r.transform(e)),n.reverse?e+t:t+e}function r(t,e,n){var i=t.charAt(e),s=a[i];return""===i?!1:s&&!s.escape?!0:r(t,e+n,n)}function i(t,e,n){var r=t.charAt(e),s=a[r];return""===r?!1:s&&s.recursive?!0:i(t,e+n,n)}function s(t,e,n){var r=t.split("");return r.splice(n,0,e),r.join("")}function o(t,e){this.options=e||{},this.options={reverse:this.options.reverse||!1,usedefaults:this.options.usedefaults||this.options.reverse},this.pattern=t}var a={0:{pattern:/\d/,_default:"0"},9:{pattern:/\d/,optional:!0},"#":{pattern:/\d/,optional:!0,recursive:!0},A:{pattern:/[a-zA-Z0-9]/},S:{pattern:/[a-zA-Z]/},U:{pattern:/[a-zA-Z]/,transform:function(t){return t.toLocaleUpperCase()}},L:{pattern:/[a-zA-Z]/,transform:function(t){return t.toLocaleLowerCase()}},$:{escape:!0}};return o.prototype.process=function(o){function p(t){if(!A&&!g.length&&r(u,l,y.inc))return!0;if(!A&&g.length&&i(u,l,y.inc))return!0;if(A||(A=g.length>0),A){var e=g.shift();if(g.push(e),t.reverse&&h>=0)return l++,u=s(u,e,l),!0;if(!t.reverse&&h<o.length)return u=s(u,e,l),!0}return l<u.length&&l>=0}if(!o)return{result:"",valid:!1};o+="";var u=this.pattern,c=!0,f="",h=this.options.reverse?o.length-1:0,l=0,v=e(u,o),d=!1,g=[],A=!1,y={start:this.options.reverse?u.length-1:0,end:this.options.reverse?-1:u.length,inc:this.options.reverse?-1:1};for(l=y.start;p(this.options);l+=y.inc){var m=o.charAt(h),w=u.charAt(l),z=a[w];if(g.length&&z&&!z.recursive&&(z=null),!A||m){if(this.options.reverse&&t(u,l)){f=n(f,w,this.options,z),l+=y.inc;continue}if(!this.options.reverse&&d){f=n(f,w,this.options,z),d=!1;continue}if(!this.options.reverse&&z&&z.escape){d=!0;continue}}if(!A&&z&&z.recursive)g.push(w);else{if(A&&!m){f=n(f,w,this.options,z);continue}if(!A&&g.length>0&&!m)continue}if(z)if(z.optional){if(z.pattern.test(m)&&v)f=n(f,m,this.options,z),h+=y.inc,v--;else if(g.length>0&&m){c=!1;break}}else if(z.pattern.test(m))f=n(f,m,this.options,z),h+=y.inc;else{if(m||!z._default||!this.options.usedefaults){c=!1;break}f=n(f,z._default,this.options,z)}else f=n(f,w,this.options,z),!A&&g.length&&g.push(w)}return{result:f,valid:c}},o.prototype.apply=function(t){return this.process(t).result},o.prototype.validate=function(t){return this.process(t).valid},o.process=function(t,e,n){return new o(e,n).process(t)},o.apply=function(t,e,n){return new o(e,n).apply(t)},o.validate=function(t,e,n){return new o(e,n).validate(t)},o});
//# sourceMappingURL=./string-mask.min.js.map