!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).IncrementalDOM={})}(this,function(t){"use strict";var o="key";function a(t){return t}var c=Object.prototype.hasOwnProperty;function e(){}function n(){return new e}function s(t,e){for(;t.length>e;)t.pop()}e.prototype=Object.create(null);var r={default:"__default"};function i(t,e,n){if(null==n)t.removeAttribute(e);else{var r=0===(i=e).lastIndexOf("xml:",0)?"http://www.w3.org/XML/1998/namespace":0===i.lastIndexOf("xlink:",0)?"http://www.w3.org/1999/xlink":null;r?t.setAttributeNS(r,e,String(n)):t.setAttribute(e,String(n))}var i}function u(t,e,n){t[e]=n}var l=n();function d(t,e,n){(l[e]||l[r.default])(t,e,n)}l[r.default]=function(t,e,n){var r=typeof n;("object"==r||"function"==r?u:i)(t,e,n)},l.style=function(t,e,n){var r,i,o,a,u,l=t.style;if("string"==typeof n)l.cssText=n;else for(var f in l.cssText="",n)a=n,u=f,c.call(a,u)&&(r=l,o=n[i=f],0<=i.indexOf("-")?r.setProperty(i,o):r[i]=o)};var f={nodesCreated:null,nodesDeleted:null},p=(h.prototype.markCreated=function(t){this.created.push(t)},h.prototype.markDeleted=function(t){this.deleted.push(t)},h.prototype.notifyChanges=function(){f.nodesCreated&&0<this.created.length&&f.nodesCreated(this.created),f.nodesDeleted&&0<this.deleted.length&&f.nodesDeleted(this.deleted)},h);function h(){this.created=[],this.deleted=[]}function v(t){return 1===t.nodeType}var g="undefined"!=typeof Node&&Node.prototype.getRootNode||function(){for(var t=this,e=t;t;)t=(e=t).parentNode;return e};function y(t,e){var n,r,i,o=(n=t,i=g.call(n),11===(r=i).nodeType||9===r.nodeType?i.activeElement:null);return o&&t.contains(o)?function(t,e){for(var n=[],r=t;r!==e;){var i=a(r);n.push(i),r=i.parentNode}return n}(o,e):[]}var m=(x.prototype.hasEmptyAttrsArr=function(){var t=this._attrsArr;return!t||!t.length},x.prototype.getAttrsArr=function(t){return this._attrsArr||(this._attrsArr=(s(e=new Array(t),0),e));var e},x);function x(t,e,n){this._attrsArr=null,this.staticsApplied=!1,this.nameOrCtor=t,this.key=e,this.text=n}function A(t,e,n,r){var i=new m(e,n,r);return t.__incrementalDOMData=i}function O(t,e){if(t.__incrementalDOMData)return t.__incrementalDOMData;var n=v(t)?t.localName:t.nodeName,r=v(t)&&null!=o?t.getAttribute(o):null,i=A(t,n,v(t)?r||e:null);return v(t)&&function(t,e){var n=t.attributes,r=n.length;if(r)for(var i=e.getAttrsArr(r),o=0,a=0;o<r;o+=1,a+=2){var u=n[o],l=u.name,f=u.value;i[a]=l,i[a+1]=f}}(t,i),i}function b(t,e){return O(t,e)}function w(t,e,n,r){var i,o,a;if("function"==typeof n)i=new n;else{var u=(a=e,"svg"===(o=n)?"http://www.w3.org/2000/svg":"math"===o?"http://www.w3.org/1998/Math/MathML":null==a||"foreignObject"===b(a).nameOrCtor?null:a.namespaceURI);i=u?t.createElementNS(u,n):t.createElement(n)}return A(i,n,r),i}function D(t,e,n,r,i){return e==n&&r==i}var _=null,C=null,N=null,S=null,k=[],M=D,E=[],I=[];function P(){return E}function j(){return I}function T(t,e,n){for(var r=t,i=e;i!==n;){var o=i.nextSibling;r.removeChild(i),_.markDeleted(i),i=o}}function B(){return C?C.nextSibling:N.firstChild}function K(){N=C,C=null}function L(){T(N,B(),null),N=(C=N).parentNode}function R(){C=B()}function z(t,e){var n,r;return n="#text"===t?(A(r=S.createTextNode(""),"#text",null),r):w(S,N,t,e),_.markCreated(n),n}function U(t,e){R();var n=function(t,e,n){if(!t)return null;var r,i,o,a,u=t;do{if(i=e,a=b(r=u,o=n),M(r,i,a.nameOrCtor,o,a.key))return u}while(n&&(u=u.nextSibling));return null}(C,t,e)||z(t,e);n!==C&&(0<=k.indexOf(n)?function(t,e,n){for(var r=e.nextSibling,i=n;null!==i&&i!==e;){var o=i.nextSibling;t.insertBefore(i,r),i=o}}(N,n,C):N.insertBefore(n,C),C=n)}function V(t,e){return U(t,e),K(),N}function W(){return L(),C}function X(){return N}function q(s,t){void 0===t&&(t={});var e=t.matches,d=void 0===e?D:e;return function(t,e,n){var r=_,i=S,o=k,a=E,u=I,l=C,f=N,c=M;S=t.ownerDocument,_=new p,M=d,E=[],I=[],C=null,N=t.parentNode,k=y(t,N);try{return s(t,e,n)}finally{_.notifyChanges(),S=i,_=r,M=c,E=a,I=u,C=l,N=f,k=o}}}function F(t){return q(function(t,e,n){return C=t,K(),e(n),L(),t},t)}function G(t){return q(function(t,e,n){var r={nextSibling:t};return C=r,e(n),N&&T(N,B(),t.nextSibling),r===C?null:C},t)}var H=F(),J=G(),Q=[],Y=0;function Z(t,e,n,r){Q.push(t),Q.push(e),Q.push(n),Q.push(r)}var $=n();function tt(t,e,n,r){for(var i=!t.length,o=0;o<e.length;o+=2){var a=e[o];if(i)t[o]=a;else if(t[o]!==a)break;var u=e[o+1];!i&&t[o+1]===u||Z(r,n,a,t[o+1]=u)}if(o<e.length||o<t.length){var l=o;for(o=l;o<t.length;o+=2)$[t[o]]=t[o+1];for(o=l;o<e.length;o+=2){var f=e[o];u=e[o+1];$[f]!==u&&Z(r,n,f,u),t[o]=f,t[o+1]=u,delete $[f]}for(var c in s(t,e.length),$)Z(r,n,c,void 0),delete $[c]}!function(){var t=Y,e=Q.length;Y=e;for(var n=t;n<e;n+=4){(0,Q[n])(Q[n+1],Q[n+2],Q[n+3])}s(Q,Y=t)}()}var et=3,nt=n();function rt(t,e){var n=j();tt(e.getAttrsArr(n.length),n,t,d),s(n,0)}function it(t,e,n){if(!e.staticsApplied&&(e.staticsApplied=!0,n&&n.length))if(e.hasEmptyAttrsArr())for(var r=0;r<n.length;r+=2)d(t,n[r],n[r+1]);else{for(r=0;r<n.length;r+=2)nt[n[r]]=r+1;var i=e.getAttrsArr(0),o=0;for(r=0;r<i.length;r+=2){var a=i[r],u=i[r+1],l=nt[a];l?n[l]===u&&delete nt[a]:(i[o]=a,i[o+1]=u,o+=2)}for(var f in s(i,o),nt)d(t,f,n[nt[f]]),delete nt[f]}}function ot(t,e,n){var r=P();r[0]=t,r[1]=e,r[2]=n}function at(t,e){var n=j();n.push(t),n.push(e)}function ut(){var t=P(),e=V(t[0],t[1]),n=b(e);return it(e,n,t[2]),rt(e,n),s(t,0),e}function lt(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];ot(t,e,n);for(var o=et;o<arguments.length;o+=2)at(arguments[o],arguments[o+1]);return ut()}function ft(t){return W()}t.applyAttr=i,t.applyProp=u,t.attributes=l,t.alignWithDOM=U,t.close=W,t.createPatchInner=F,t.createPatchOuter=G,t.currentElement=X,t.currentPointer=function(){return B()},t.open=V,t.patch=H,t.patchInner=H,t.patchOuter=J,t.skip=function(){C=N.lastChild},t.skipNode=R,t.setKeyAttributeName=function(t){o=t},t.clearCache=function t(e){e.__incrementalDOMData=null;for(var n=e.firstChild;n;n=n.nextSibling)t(n)},t.getKey=function(t){return a(t.__incrementalDOMData),b(t).key},t.importNode=function t(e){O(e);for(var n=e.firstChild;n;n=n.nextSibling)t(n)},t.isDataInitialized=function(t){return Boolean(t.__incrementalDOMData)},t.notifications=f,t.symbols=r,t.applyAttrs=function(){var t=X();rt(t,b(t))},t.applyStatics=function(t){var e=X();it(e,b(e),t)},t.attr=at,t.elementClose=ft,t.elementOpen=lt,t.elementOpenEnd=ut,t.elementOpenStart=ot,t.elementVoid=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];return lt.apply(null,arguments),ft()},t.key=function(t){P()[1]=t},t.text=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=(U("#text",null),C),i=b(r);if(i.text!==t){for(var o=i.text=t,a=1;a<arguments.length;a+=1){o=(0,arguments[a])(o)}r.data!==o&&(r.data=o)}return r},Object.defineProperty(t,"__esModule",{value:!0})});