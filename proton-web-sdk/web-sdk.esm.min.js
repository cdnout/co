import ProtonLinkBrowserTransport from"@proton/browser-transport";import ProtonLink from"@proton/link";import{JsonRpc}from"@proton/js";function asyncGeneratorStep(e,t,r,n,o,a,i){try{var s=e[a](i),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,o)}function _asyncToGenerator(s){return function(){var e=this,i=arguments;return new Promise(function(t,r){var n=s.apply(e,i);function o(e){asyncGeneratorStep(n,t,r,o,a,"next",e)}function a(e){asyncGeneratorStep(n,t,r,o,a,"throw",e)}o(void 0)})}}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(r="Object"===r&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _createForOfIteratorHelperLoose(e,t){var r,n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length)return n&&(e=n),r=0,function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function createCommonjsModule(e,t){return e(t={exports:{}},t.exports),t.exports}var runtime_1=createCommonjsModule(function(t){t=function(i){var l,e=Object.prototype,c=e.hasOwnProperty,t="function"==typeof Symbol?Symbol:{},n=t.iterator||"@@iterator",r=t.asyncIterator||"@@asyncIterator",o=t.toStringTag||"@@toStringTag";function a(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{a({},"")}catch(e){a=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var o,a,i,s,t=t&&t.prototype instanceof C?t:C,t=Object.create(t.prototype),n=new L(n||[]);return t._invoke=(o=e,a=r,i=n,s=p,function(e,t){if(s===d)throw new Error("Generator is already running");if(s===g){if("throw"===e)throw t;return T()}for(i.method=e,i.arg=t;;){var r=i.delegate;if(r){r=function e(t,r){var n=t.iterator[r.method];if(n===l){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=l,e(t,r),"throw"===r.method))return f;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}n=u(n,t.iterator,r.arg);if("throw"===n.type)return r.method="throw",r.arg=n.arg,r.delegate=null,f;n=n.arg;if(!n)return r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,f;{if(!n.done)return n;r[t.resultName]=n.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=l)}r.delegate=null;return f}(r,i);if(r){if(r===f)continue;return r}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(s===p)throw s=g,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);s=d;r=u(o,a,i);if("normal"===r.type){if(s=i.done?g:h,r.arg!==f)return{value:r.arg,done:i.done}}else"throw"===r.type&&(s=g,i.method="throw",i.arg=r.arg)}}),t}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}i.wrap=s;var p="suspendedStart",h="suspendedYield",d="executing",g="completed",f={};function C(){}function w(){}function m(){}var t={},x=(a(t,n,function(){return this}),Object.getPrototypeOf),x=x&&x(x(k([]))),y=(x&&x!==e&&c.call(x,n)&&(t=x),m.prototype=C.prototype=Object.create(t));function v(e){["next","throw","return"].forEach(function(t){a(e,t,function(e){return this._invoke(t,e)})})}function E(i,s){var t;this._invoke=function(r,n){function e(){return new s(function(e,t){!function t(e,r,n,o){var a,e=u(i[e],i,r);if("throw"!==e.type)return(r=(a=e.arg).value)&&"object"==typeof r&&c.call(r,"__await")?s.resolve(r.__await).then(function(e){t("next",e,n,o)},function(e){t("throw",e,n,o)}):s.resolve(r).then(function(e){a.value=e,n(a)},function(e){return t("throw",e,n,o)});o(e.arg)}(r,n,e,t)})}return t=t?t.then(e,e):e()}}function b(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function M(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(b,this),this.reset(!0)}function k(t){if(t){var r,e=t[n];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return r=-1,(e=function e(){for(;++r<t.length;)if(c.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=l,e.done=!0,e}).next=e}return{next:T}}function T(){return{value:l,done:!0}}return a(y,"constructor",w.prototype=m),a(m,"constructor",w),w.displayName=a(m,o,"GeneratorFunction"),i.isGeneratorFunction=function(e){e="function"==typeof e&&e.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},i.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,a(e,o,"GeneratorFunction")),e.prototype=Object.create(y),e},i.awrap=function(e){return{__await:e}},v(E.prototype),a(E.prototype,r,function(){return this}),i.AsyncIterator=E,i.async=function(e,t,r,n,o){void 0===o&&(o=Promise);var a=new E(s(e,t,r,n),o);return i.isGeneratorFunction(t)?a:a.next().then(function(e){return e.done?e.value:a.next()})},v(y),a(y,o,"Generator"),a(y,n,function(){return this}),a(y,"toString",function(){return"[object Generator]"}),i.keys=function(r){var e,n=[];for(e in r)n.push(e);return n.reverse(),function e(){for(;n.length;){var t=n.pop();if(t in r)return e.value=t,e.done=!1,e}return e.done=!0,e}},i.values=k,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=l,this.done=!1,this.delegate=null,this.method="next",this.arg=l,this.tryEntries.forEach(M),!e)for(var t in this)"t"===t.charAt(0)&&c.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=l)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var n=this;function e(e,t){return a.type="throw",a.arg=r,n.next=e,t&&(n.method="next",n.arg=l),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var o=this.tryEntries[t],a=o.completion;if("root"===o.tryLoc)return e("end");if(o.tryLoc<=this.prev){var i=c.call(o,"catchLoc"),s=c.call(o,"finallyLoc");if(i&&s){if(this.prev<o.catchLoc)return e(o.catchLoc,!0);if(this.prev<o.finallyLoc)return e(o.finallyLoc)}else if(i){if(this.prev<o.catchLoc)return e(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return e(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;0<=r;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&c.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}var a=(o=o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc?null:o)?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),M(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r,n,o=this.tryEntries[t];if(o.tryLoc===e)return"throw"===(r=o.completion).type&&(n=r.arg,M(o)),n}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:k(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=l),f}},i}(t.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}}),getStyleText=function(e){var e=Object.assign({modalBackgroundColor:"#ffffff",logoBackgroundColor:"transparent",isLogoRound:!1,optionBackgroundColor:"transparent",optionFontColor:"#000531",primaryFontColor:"black",secondaryFontColor:"#a1a5b0",linkColor:"#00AAEF"},e),t=e.modalBackgroundColor,r=e.logoBackgroundColor,n=e.isLogoRound,o=e.optionBackgroundColor,a=e.optionFontColor,i=e.primaryFontColor,s=e.secondaryFontColor;return"\n    .wallet-selector * {\n        box-sizing: border-box;\n        line-height: 1;\n    }\n\n    .wallet-selector {\n        font-family: 'Circular Std Book', -apple-system, system-ui, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue',\n            Arial, sans-serif;\n        font-size: 13px;\n        background: rgba(0, 0, 0, 0.65);\n        position: fixed;\n        top: 0px;\n        left: 0px;\n        width: 100%;\n        height: 100%;\n        z-index: 2147483647;\n        display: none;\n        align-items: center;\n        justify-content: center;\n    }\n\n    .wallet-selector-active {\n        display: flex;\n        flex-direction: column;\n    }\n\n    .wallet-selector-inner {\n        background: "+t+";\n        color: white;\n        margin: 20px 20px 13px 20px;\n        padding-top: 50px;\n        border-radius: 10px;\n        box-shadow: 0px -10px 50px rgba(0, 0, 0, .5) !important;\n        width: 360px;\n        transition-property: all;\n        transition-duration: .5s;\n        transition-timing-function: ease-in-out;\n        position: relative;\n    }\n\n    .wallet-selector-close {\n        display: block;\n        position: absolute;\n        top: 16px;\n        right: 16px;\n        width: 28px;\n        height: 28px;\n        background-image: url(\"data:image/svg+xml,%3Csvg width='12' height='12' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M9.66 10.987L6 7.327l-3.66 3.66A1.035 1.035 0 11.876 9.523l3.66-3.66-3.66-3.66A1.035 1.035 0 012.34.737L6 4.398 9.66.739a1.035 1.035 0 111.464 1.464l-3.66 3.66 3.66 3.661a1.035 1.035 0 11-1.464 1.464z' fill='rgba(161, 165, 176, 0.7)' fill-rule='nonzero'/%3E%3C/svg%3E\");\n        background-size: 14px;\n        background-repeat: no-repeat;\n        background-position: 50%;\n        cursor: pointer;\n        transition: background-image 0.2s ease;\n    }\n\n    .wallet-selector-close:hover {\n        background-image: url(\"data:image/svg+xml,%3Csvg width='12' height='12' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M9.66 10.987L6 7.327l-3.66 3.66A1.035 1.035 0 11.876 9.523l3.66-3.66-3.66-3.66A1.035 1.035 0 012.34.737L6 4.398 9.66.739a1.035 1.035 0 111.464 1.464l-3.66 3.66 3.66 3.661a1.035 1.035 0 11-1.464 1.464z' fill='rgba(161, 165, 176, 1)' fill-rule='nonzero'/%3E%3C/svg%3E\");\n        transition: background-image 0.2s ease;\n    }\n\n    .wallet-selector-connect {\n        padding: 0px 20px;\n        border-radius: 10px;\n        border-top-left-radius: 0;\n        border-top-right-radius: 0;\n        background: "+t+";\n    }\n\n    .wallet-selector-connect-header {\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n    }\n\n    .wallet-selector-logo {\n        width: 100px;\n        height: 100px;\n        background: "+r+";\n        "+(n&&"\n        width: 120px;\n        height: 120px;\n        padding: 10px;\n        margin-bottom: 10px;\n        border: 1px solid rgba(161, 165, 176, 0.23);\n        border-radius: 50%;\n        ")+"\n    }\n\n    .wallet-selector-title {\n        font-size: 16px;\n        font-family: 'Circular Std Book', sans-serif;\n        line-height: 24px;\n        color: "+i+";\n        text-align: center;\n    }\n\n    .wallet-selector-subtitle {\n        font-size: 16px;\n        font-family: 'Circular Std Book', sans-serif;\n        line-height: 24px;\n        color: "+s+";\n        text-align: center;\n    }\n\n    .wallet-selector-connect-body {\n        margin-top: 55px;\n    }\n\n    .wallet-selector-wallet-list {\n        margin: 0px;\n        padding: 0px;\n        list-style: none;\n    }\n\n    .wallet-selector-wallet-list li {\n        background: "+o+";\n    }\n\n    .wallet-selector-proton-wallet, .wallet-selector-webauth-wallet, .wallet-selector-anchor-wallet {\n        display: flex;\n        align-items: center;\n        padding: 20px 20px 20px 16px;\n        border: 1px solid rgba(161, 165, 176, 0.23);\n    }\n\n    .wallet-selector-webauth-wallet, .wallet-selector-anchor-wallet {\n        margin-top: 8px;\n    }\n\n    .wallet-selector-proton-wallet:hover, .wallet-selector-webauth-wallet:hover, .wallet-selector-anchor-wallet:hover {\n        cursor: pointer;\n    }\n\n    .wallet-selector-proton-logo {\n        background-image: url(\"data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='45px' height='50px' viewBox='0 0 45 50' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3Elogo%3C/title%3E%3Cdefs%3E%3ClinearGradient x1='15.004%25' y1='50%25' x2='89.621%25' y2='53.538%25' id='linearGradient-1'%3E%3Cstop stop-color='%237543E3' offset='0%25'%3E%3C/stop%3E%3Cstop stop-color='%23582ACB' offset='100%25'%3E%3C/stop%3E%3C/linearGradient%3E%3C/defs%3E%3Cg id='Page-1' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3E%3Cg id='logo' fill='url(%23linearGradient-1)' fill-rule='nonzero'%3E%3Cg id='Group'%3E%3Cpath d='M22.257,0 C25.457,0 28.219,3.328 30.037,8.735 C29.303,8.94 28.553,9.169 27.795,9.424 C26.285,4.95 24.211,2.318 22.257,2.318 C20.054,2.318 17.705,5.656 16.174,11.205 C16.772,11.399 17.376,11.604 17.991,11.831 C19.379,12.343 20.811,12.945 22.271,13.628 L22.521,13.51 C23.457,13.08 24.386,12.682 25.306,12.318 C25.418,12.275 25.527,12.232 25.636,12.188 C28.391,11.123 31.052,10.358 33.489,9.954 C38.737,9.079 42.427,9.984 43.875,12.5 C45.327,15.017 44.265,18.669 40.886,22.781 C40.691,23.017 40.493,23.255 40.284,23.491 C39.782,22.931 39.246,22.371 38.674,21.811 C41.657,18.348 42.831,15.321 41.872,13.659 C40.966,12.086 37.976,11.556 33.87,12.239 C32.992,12.385 32.08,12.583 31.143,12.827 C31.277,13.443 31.403,14.071 31.512,14.722 C31.765,16.179 31.962,17.72 32.101,19.325 C32.822,19.834 33.527,20.349 34.204,20.875 C36.856,22.93 39.134,25.086 40.886,27.219 C44.266,31.331 45.327,34.983 43.876,37.5 C42.788,39.39 40.433,40.37 37.104,40.37 C36.003,40.37 34.795,40.265 33.489,40.046 C33.152,39.99 32.809,39.927 32.461,39.858 C32.669,39.139 32.861,38.388 33.036,37.609 C33.317,37.666 33.596,37.715 33.87,37.762 C37.973,38.444 40.966,37.914 41.872,36.342 C42.973,34.43 41.253,30.714 37.209,26.604 C36.805,26.974 36.389,27.34 35.959,27.705 C35.897,27.758 35.83,27.815 35.768,27.865 C34.624,28.825 33.394,29.767 32.096,30.681 C32.033,31.409 31.962,32.127 31.876,32.825 C30.613,43.01 26.896,50 22.256,50 C19.063,50 16.305,46.682 14.486,41.288 C15.217,41.089 15.964,40.858 16.728,40.599 C18.239,45.059 20.306,47.682 22.257,47.682 C24.46,47.682 26.815,44.332 28.347,38.768 C27.747,38.577 27.141,38.373 26.529,38.146 C25.132,37.636 23.706,37.04 22.269,36.374 L22.177,36.417 C21.367,36.795 20.57,37.146 19.783,37.47 C19.661,37.52 19.543,37.57 19.423,37.613 C14.893,39.44 10.756,40.387 7.466,40.387 C4.189,40.387 1.759,39.447 0.635,37.5 C-0.972,34.712 0.549,30.63 4.355,26.325 L5.972,28.033 C2.893,31.563 1.67,34.656 2.642,36.341 C3.742,38.25 7.804,38.619 13.368,37.171 C13.237,36.558 13.112,35.931 13.002,35.281 C12.751,33.826 12.555,32.289 12.416,30.687 C11.691,30.179 10.986,29.667 10.316,29.152 C3.87,24.185 0,18.911 0,14.983 C0,14.076 0.208,13.242 0.635,12.5 C2.235,9.728 6.485,8.997 12.063,10.116 C11.851,10.844 11.656,11.606 11.481,12.394 C6.894,11.487 3.611,11.974 2.642,13.659 C1.542,15.567 3.255,19.275 7.287,23.379 C7.804,22.909 8.341,22.443 8.905,21.98 C9.991,21.08 11.167,20.187 12.418,19.31 C12.481,18.58 12.553,17.86 12.641,17.162 C13.904,6.987 17.621,0 22.257,0 Z M29.581,32.36 C29.024,32.714 28.461,33.063 27.885,33.404 C27.69,33.52 27.495,33.632 27.299,33.745 C26.615,34.139 25.93,34.52 25.253,34.877 C25.153,34.931 25.053,34.981 24.953,35.034 C25.656,35.332 26.354,35.611 27.045,35.868 C27.669,36.1 28.285,36.313 28.895,36.513 C29.03,35.878 29.156,35.223 29.27,34.546 C29.388,33.843 29.489,33.108 29.581,32.36 Z M14.925,32.357 C15.023,33.142 15.135,33.906 15.26,34.642 C15.37,35.287 15.492,35.906 15.622,36.511 C15.996,36.389 16.374,36.262 16.758,36.126 C16.874,36.086 16.993,36.043 17.108,36 C17.898,35.715 18.708,35.4 19.535,35.046 L19.558,35.036 C18.776,34.626 17.994,34.196 17.214,33.745 C17.174,33.722 17.132,33.699 17.092,33.672 C16.348,33.241 15.629,32.801 14.925,32.357 L14.925,32.357 Z M22.258,16.195 C21.467,16.581 20.673,16.985 19.879,17.417 C19.377,17.689 18.874,17.97 18.372,18.262 C17.055,19.022 15.814,19.805 14.644,20.596 C14.596,21.272 14.555,21.956 14.529,22.659 C14.499,23.424 14.486,24.205 14.486,25 C14.486,26.524 14.542,27.991 14.642,29.402 C15.317,29.859 16.012,30.312 16.738,30.758 C17.27,31.089 17.813,31.418 18.372,31.738 C19.665,32.486 20.966,33.175 22.259,33.804 L22.509,33.685 C23.368,33.262 24.237,32.805 25.12,32.315 C25.46,32.129 25.802,31.937 26.142,31.738 C27.459,30.978 28.7,30.196 29.87,29.405 C29.917,28.729 29.959,28.044 29.984,27.341 C30.014,26.576 30.027,25.795 30.027,25 C30.027,23.477 29.971,22.01 29.872,20.599 C29.198,20.143 28.505,19.689 27.779,19.242 C27.246,18.911 26.701,18.586 26.142,18.262 C24.825,17.5 23.528,16.815 22.258,16.195 L22.258,16.195 Z M22.257,22.02 C23.901,22.02 25.233,23.354 25.233,25 C25.233,26.646 23.901,27.98 22.257,27.98 C20.613,27.98 19.28,26.646 19.28,25 C19.28,23.354 20.612,22.02 22.256,22.02 L22.257,22.02 Z M32.29,22.33 C32.324,23.204 32.342,24.095 32.342,25 C32.342,25.219 32.342,25.437 32.339,25.656 C32.332,26.34 32.312,27.013 32.285,27.68 C32.881,27.229 33.453,26.776 33.999,26.325 C34.068,26.268 34.134,26.215 34.2,26.159 C34.663,25.771 35.105,25.385 35.531,24.999 C35.141,24.648 34.737,24.294 34.316,23.94 C33.678,23.4 32.998,22.864 32.29,22.33 L32.29,22.33 Z M12.229,22.324 C11.693,22.728 11.175,23.134 10.68,23.54 C10.084,24.025 9.518,24.513 8.98,25.001 C9.37,25.354 9.776,25.708 10.198,26.063 C10.836,26.6 11.516,27.136 12.224,27.671 C12.19,26.796 12.172,25.905 12.172,25 C12.172,24.781 12.172,24.563 12.178,24.348 C12.183,23.664 12.202,22.991 12.228,22.324 L12.229,22.324 Z M28.892,13.488 C28.583,13.588 28.273,13.692 27.961,13.801 C27.041,14.119 26.109,14.481 25.163,14.877 C25.097,14.905 25.029,14.937 24.963,14.964 C25.737,15.373 26.516,15.802 27.299,16.255 C27.339,16.278 27.382,16.301 27.422,16.328 C28.162,16.754 28.88,17.197 29.589,17.645 C29.491,16.859 29.379,16.095 29.254,15.358 C29.144,14.714 29.02,14.093 28.892,13.488 L28.892,13.488 Z M15.62,13.488 C15.486,14.121 15.36,14.775 15.247,15.45 C15.127,16.154 15.025,16.887 14.932,17.634 C15.638,17.188 16.363,16.747 17.108,16.314 L17.214,16.255 C17.994,15.804 18.779,15.375 19.562,14.964 C18.852,14.664 18.155,14.386 17.472,14.132 C16.84,13.894 16.225,13.683 15.62,13.488 L15.62,13.488 Z' id='Shape'%3E%3C/path%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E\");\n    }\n\n    .wallet-selector-webauth-logo {\n        background-image: url(\"data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='45px' height='50px' viewBox='0 0 45 50' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3Elogo%3C/title%3E%3Cdefs%3E%3ClinearGradient x1='15.004%25' y1='50%25' x2='89.621%25' y2='53.538%25' id='linearGradient-1'%3E%3Cstop stop-color='%237543E3' offset='0%25'%3E%3C/stop%3E%3Cstop stop-color='%23582ACB' offset='100%25'%3E%3C/stop%3E%3C/linearGradient%3E%3C/defs%3E%3Cg id='Page-1' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3E%3Cg id='logo' fill='url(%23linearGradient-1)' fill-rule='nonzero'%3E%3Cg id='Group'%3E%3Cpath d='M22.257,0 C25.457,0 28.219,3.328 30.037,8.735 C29.303,8.94 28.553,9.169 27.795,9.424 C26.285,4.95 24.211,2.318 22.257,2.318 C20.054,2.318 17.705,5.656 16.174,11.205 C16.772,11.399 17.376,11.604 17.991,11.831 C19.379,12.343 20.811,12.945 22.271,13.628 L22.521,13.51 C23.457,13.08 24.386,12.682 25.306,12.318 C25.418,12.275 25.527,12.232 25.636,12.188 C28.391,11.123 31.052,10.358 33.489,9.954 C38.737,9.079 42.427,9.984 43.875,12.5 C45.327,15.017 44.265,18.669 40.886,22.781 C40.691,23.017 40.493,23.255 40.284,23.491 C39.782,22.931 39.246,22.371 38.674,21.811 C41.657,18.348 42.831,15.321 41.872,13.659 C40.966,12.086 37.976,11.556 33.87,12.239 C32.992,12.385 32.08,12.583 31.143,12.827 C31.277,13.443 31.403,14.071 31.512,14.722 C31.765,16.179 31.962,17.72 32.101,19.325 C32.822,19.834 33.527,20.349 34.204,20.875 C36.856,22.93 39.134,25.086 40.886,27.219 C44.266,31.331 45.327,34.983 43.876,37.5 C42.788,39.39 40.433,40.37 37.104,40.37 C36.003,40.37 34.795,40.265 33.489,40.046 C33.152,39.99 32.809,39.927 32.461,39.858 C32.669,39.139 32.861,38.388 33.036,37.609 C33.317,37.666 33.596,37.715 33.87,37.762 C37.973,38.444 40.966,37.914 41.872,36.342 C42.973,34.43 41.253,30.714 37.209,26.604 C36.805,26.974 36.389,27.34 35.959,27.705 C35.897,27.758 35.83,27.815 35.768,27.865 C34.624,28.825 33.394,29.767 32.096,30.681 C32.033,31.409 31.962,32.127 31.876,32.825 C30.613,43.01 26.896,50 22.256,50 C19.063,50 16.305,46.682 14.486,41.288 C15.217,41.089 15.964,40.858 16.728,40.599 C18.239,45.059 20.306,47.682 22.257,47.682 C24.46,47.682 26.815,44.332 28.347,38.768 C27.747,38.577 27.141,38.373 26.529,38.146 C25.132,37.636 23.706,37.04 22.269,36.374 L22.177,36.417 C21.367,36.795 20.57,37.146 19.783,37.47 C19.661,37.52 19.543,37.57 19.423,37.613 C14.893,39.44 10.756,40.387 7.466,40.387 C4.189,40.387 1.759,39.447 0.635,37.5 C-0.972,34.712 0.549,30.63 4.355,26.325 L5.972,28.033 C2.893,31.563 1.67,34.656 2.642,36.341 C3.742,38.25 7.804,38.619 13.368,37.171 C13.237,36.558 13.112,35.931 13.002,35.281 C12.751,33.826 12.555,32.289 12.416,30.687 C11.691,30.179 10.986,29.667 10.316,29.152 C3.87,24.185 0,18.911 0,14.983 C0,14.076 0.208,13.242 0.635,12.5 C2.235,9.728 6.485,8.997 12.063,10.116 C11.851,10.844 11.656,11.606 11.481,12.394 C6.894,11.487 3.611,11.974 2.642,13.659 C1.542,15.567 3.255,19.275 7.287,23.379 C7.804,22.909 8.341,22.443 8.905,21.98 C9.991,21.08 11.167,20.187 12.418,19.31 C12.481,18.58 12.553,17.86 12.641,17.162 C13.904,6.987 17.621,0 22.257,0 Z M29.581,32.36 C29.024,32.714 28.461,33.063 27.885,33.404 C27.69,33.52 27.495,33.632 27.299,33.745 C26.615,34.139 25.93,34.52 25.253,34.877 C25.153,34.931 25.053,34.981 24.953,35.034 C25.656,35.332 26.354,35.611 27.045,35.868 C27.669,36.1 28.285,36.313 28.895,36.513 C29.03,35.878 29.156,35.223 29.27,34.546 C29.388,33.843 29.489,33.108 29.581,32.36 Z M14.925,32.357 C15.023,33.142 15.135,33.906 15.26,34.642 C15.37,35.287 15.492,35.906 15.622,36.511 C15.996,36.389 16.374,36.262 16.758,36.126 C16.874,36.086 16.993,36.043 17.108,36 C17.898,35.715 18.708,35.4 19.535,35.046 L19.558,35.036 C18.776,34.626 17.994,34.196 17.214,33.745 C17.174,33.722 17.132,33.699 17.092,33.672 C16.348,33.241 15.629,32.801 14.925,32.357 L14.925,32.357 Z M22.258,16.195 C21.467,16.581 20.673,16.985 19.879,17.417 C19.377,17.689 18.874,17.97 18.372,18.262 C17.055,19.022 15.814,19.805 14.644,20.596 C14.596,21.272 14.555,21.956 14.529,22.659 C14.499,23.424 14.486,24.205 14.486,25 C14.486,26.524 14.542,27.991 14.642,29.402 C15.317,29.859 16.012,30.312 16.738,30.758 C17.27,31.089 17.813,31.418 18.372,31.738 C19.665,32.486 20.966,33.175 22.259,33.804 L22.509,33.685 C23.368,33.262 24.237,32.805 25.12,32.315 C25.46,32.129 25.802,31.937 26.142,31.738 C27.459,30.978 28.7,30.196 29.87,29.405 C29.917,28.729 29.959,28.044 29.984,27.341 C30.014,26.576 30.027,25.795 30.027,25 C30.027,23.477 29.971,22.01 29.872,20.599 C29.198,20.143 28.505,19.689 27.779,19.242 C27.246,18.911 26.701,18.586 26.142,18.262 C24.825,17.5 23.528,16.815 22.258,16.195 L22.258,16.195 Z M22.257,22.02 C23.901,22.02 25.233,23.354 25.233,25 C25.233,26.646 23.901,27.98 22.257,27.98 C20.613,27.98 19.28,26.646 19.28,25 C19.28,23.354 20.612,22.02 22.256,22.02 L22.257,22.02 Z M32.29,22.33 C32.324,23.204 32.342,24.095 32.342,25 C32.342,25.219 32.342,25.437 32.339,25.656 C32.332,26.34 32.312,27.013 32.285,27.68 C32.881,27.229 33.453,26.776 33.999,26.325 C34.068,26.268 34.134,26.215 34.2,26.159 C34.663,25.771 35.105,25.385 35.531,24.999 C35.141,24.648 34.737,24.294 34.316,23.94 C33.678,23.4 32.998,22.864 32.29,22.33 L32.29,22.33 Z M12.229,22.324 C11.693,22.728 11.175,23.134 10.68,23.54 C10.084,24.025 9.518,24.513 8.98,25.001 C9.37,25.354 9.776,25.708 10.198,26.063 C10.836,26.6 11.516,27.136 12.224,27.671 C12.19,26.796 12.172,25.905 12.172,25 C12.172,24.781 12.172,24.563 12.178,24.348 C12.183,23.664 12.202,22.991 12.228,22.324 L12.229,22.324 Z M28.892,13.488 C28.583,13.588 28.273,13.692 27.961,13.801 C27.041,14.119 26.109,14.481 25.163,14.877 C25.097,14.905 25.029,14.937 24.963,14.964 C25.737,15.373 26.516,15.802 27.299,16.255 C27.339,16.278 27.382,16.301 27.422,16.328 C28.162,16.754 28.88,17.197 29.589,17.645 C29.491,16.859 29.379,16.095 29.254,15.358 C29.144,14.714 29.02,14.093 28.892,13.488 L28.892,13.488 Z M15.62,13.488 C15.486,14.121 15.36,14.775 15.247,15.45 C15.127,16.154 15.025,16.887 14.932,17.634 C15.638,17.188 16.363,16.747 17.108,16.314 L17.214,16.255 C17.994,15.804 18.779,15.375 19.562,14.964 C18.852,14.664 18.155,14.386 17.472,14.132 C16.84,13.894 16.225,13.683 15.62,13.488 L15.62,13.488 Z' id='Shape'%3E%3C/path%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E\");\n    }\n\n    .wallet-selector-anchor-logo {\n        background-image: url(\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPHN2ZyB3aWR0aD0iMTYwIiBoZWlnaHQ9IjE2MCIgdmlld0JveD0iMCAwIDI1NiAyNTYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPGcgc3R5bGU9IiIgdHJhbnNmb3JtPSJtYXRyaXgoMC45LCAwLCAwLCAwLjksIDEyLjc5OTk5NSwgMTIuNzk5OTk1KSI+CiAgICA8Y2lyY2xlIGN4PSIxMjgiIGN5PSIxMjgiIHI9IjEyOCIgZmlsbD0iIzM2NTBBMiIgc3R5bGU9IiIvPgogICAgPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0gMTI4LjAxIDQ4IEMgMTMxLjY4OSA0OCAxMzUuMDQ0IDUwLjEwMiAxMzYuNjQ3IDUzLjQxMiBMIDE3NS4wNTcgMTMyLjYxMyBMIDE3NS45MjQgMTM0LjQgTCAxNTQuNTg3IDEzNC40IEwgMTQ4LjM3OCAxMjEuNiBMIDEwNy42NCAxMjEuNiBMIDEwMS40MzMgMTM0LjQgTCA4MC4wOTQgMTM0LjQgTCA4MC45NjMgMTMyLjYxMSBMIDExOS4zNzIgNTMuNDEyIEMgMTIwLjk3OCA1MC4xMDIgMTI0LjMzMSA0OCAxMjguMDEgNDggWiBNIDExNS40IDEwNS42MDEgTCAxNDAuNjE5IDEwNS42MDEgTCAxMjguMDEgNzkuNjAxIEwgMTE1LjQgMTA1LjYwMSBaIE0gMTU2Ljc5OCAxNjEuNiBMIDE3Ni4wMDggMTYxLjYgQyAxNzUuNDMgMTg3LjQ0MyAxNTQuMDM5IDIwOCAxMjguMDEgMjA4IEMgMTAxLjk4MyAyMDggODAuNTg5IDE4Ny40NDMgODAuMDEyIDE2MS42IEwgOTkuMjIgMTYxLjYgQyA5OS42NzEgMTczLjM2NyAxMDcuNDg5IDE4My40MDkgMTE4LjM5OSAxODcuMTk1IEwgMTE4LjM5OSAxNDguODAxIEMgMTE4LjM5OSAxNDMuNDk5IDEyMi42OTggMTM5LjIgMTI4IDEzOS4yIEMgMTMzLjMwMiAxMzkuMiAxMzcuNjAxIDE0My40OTkgMTM3LjYwMSAxNDguODAxIEwgMTM3LjYwMSAxODcuMjAxIEMgMTQ4LjUyMiAxODMuNDIxIDE1Ni4zNDkgMTczLjM3NiAxNTYuNzk4IDE2MS42IFoiIGZpbGw9IndoaXRlIiBzdHlsZT0iIi8+CiAgPC9nPgo8L3N2Zz4=\");\n    }\n\n    .wallet-selector-anchor-logo {\n        width: 40px;\n        height: 40px;\n        background-size: 40px;\n        background-repeat: no-repeat;\n        background-position: 50%;\n    }\n\n    .wallet-selector-proton-logo,\n    .wallet-selector-webauth-logo {\n        width: 40px;\n        height: 40px;\n        background-size: 30px;\n        background-repeat: no-repeat;\n        background-position: 50%;\n    }\n\n    .wallet-selector-wallet-name {\n        font-family: 'Circular Std Book', sans-serif;\n        font-size: 16px;\n        line-height: 24px;\n        color: "+a+";\n        margin-left: 20px;\n    }\n\n    .wallet-selector-right-arrow {\n        background-image: url(\"data:image/svg+xml,%3Csvg aria-hidden='true' focusable='false' data-prefix='fas' data-icon='chevron-right' class='svg-inline--fa fa-chevron-right fa-w-10' role='img' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 320 512'%3E%3Cpath fill='rgba(161, 165, 176, 0.7)' d='M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z'%3E%3C/path%3E%3C/svg%3E\");\n        width: 10px;\n        height: 20px;\n        background-size: 10px;\n        background-repeat: no-repeat;\n        background-position: 50%;\n        margin-left: auto;\n    }\n\n    .wallet-selector-proton-wallet:hover .wallet-selector-right-arrow {\n        background-image: url(\"data:image/svg+xml,%3Csvg aria-hidden='true' focusable='false' data-prefix='fas' data-icon='chevron-right' class='svg-inline--fa fa-chevron-right fa-w-10' role='img' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 320 512'%3E%3Cpath fill='rgba(161, 165, 176, 1)' d='M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z'%3E%3C/path%3E%3C/svg%3E\");\n    }\n\n    .wallet-selector-webauth-wallet:hover .wallet-selector-right-arrow {\n        background-image: url(\"data:image/svg+xml,%3Csvg aria-hidden='true' focusable='false' data-prefix='fas' data-icon='chevron-right' class='svg-inline--fa fa-chevron-right fa-w-10' role='img' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 320 512'%3E%3Cpath fill='rgba(161, 165, 176, 1)' d='M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z'%3E%3C/path%3E%3C/svg%3E\");\n    }\n\n    .wallet-selector-anchor-wallet:hover .wallet-selector-right-arrow {\n        background-image: url(\"data:image/svg+xml,%3Csvg aria-hidden='true' focusable='false' data-prefix='fas' data-icon='chevron-right' class='svg-inline--fa fa-chevron-right fa-w-10' role='img' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 320 512'%3E%3Cpath fill='rgba(161, 165, 176, 1)' d='M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z'%3E%3C/path%3E%3C/svg%3E\");\n    }\n\n    .wallet-selector-tos-agreement {\n        font-family: 'Circular Std Book', sans-serif;\n        font-size: 12px;\n        line-height: 16px;\n        text-align: center;\n        margin-top: 55px;\n        margin-bottom: 30px;\n        color: "+s+";\n    }\n\n    .wallet-selector-tos-link {\n        color: "+e.linkColor+";\n        text-decoration: none;\n    }\n\n    .wallet-selector-footnote {\n        font-family: 'Circular Std Book', sans-serif;\n        font-size: 16px;\n        text-align: center;\n        width: 100%;\n        bottom: -30px;\n        left: 0;\n        color: white !important;\n    }\n    \n    .wallet-selector-footnote a {\n        color: #ffffff !important;\n    }\n    "},WalletTypeSelector=function(){function e(e,t,r){this.name=e,this.appLogo=t,this.appName=e||"app",this.customStyleOptions=r}var t=e.prototype;return t.hideSelector=function(){this.selectorContainerEl&&this.selectorContainerEl.classList.remove("wallet-selector-active")},t.showSelector=function(){this.selectorContainerEl&&this.selectorContainerEl.classList.add("wallet-selector-active")},t.setUpSelectorContainer=function(t){var e,r=this,n=(this.font=document.createElement("link"),this.font.href="https://fonts.cdnfonts.com/css/circular-std-book",this.font.rel="stylesheet",this.styleEl=document.createElement("style"),this.styleEl.type="text/css",getStyleText(this.customStyleOptions));this.styleEl.appendChild(document.createTextNode(n)),this.styleEl.appendChild(this.font),document.head.appendChild(this.styleEl),this.selectorContainerEl||(this.clearDuplicateContainers(),this.selectorContainerEl=this.createEl(),this.selectorContainerEl.className="wallet-selector",this.selectorContainerEl.onclick=function(e){e.target===r.selectorContainerEl&&(e.stopPropagation(),r.hideSelector(),t("no wallet selected"))},document.body.appendChild(this.selectorContainerEl)),this.selectorEl||(n=this.createEl({class:"inner"}),(e=this.createEl({class:"close"})).onclick=function(e){e.stopPropagation(),r.hideSelector(),t("no wallet selected")},this.selectorEl=this.createEl({class:"connect"}),n.appendChild(this.selectorEl),n.appendChild(e),this.selectorContainerEl.appendChild(n))},t.clearDuplicateContainers=function(){for(var e=document.getElementsByClassName("wallet-selector");0<e.length;)e[0].remove()},t.createEl=function(e){e=e||{};var t=document.createElement(e.tag||"div");if(e)for(var r=0,n=Object.keys(e);r<n.length;r++){var o=n[r],a=e[o];switch(o){case"src":t.setAttribute(o,a);break;case"tag":break;case"text":t.appendChild(document.createTextNode(a));break;case"class":t.className="wallet-selector-"+a;break;default:t.setAttribute(o,a)}}return t},t.displayWalletSelector=function(d){var g=this;return new Promise(function(r,e){g.setUpSelectorContainer(e);for(var e=g.createEl({class:"connect-header"}),t=g.createEl({class:"connect-body"}),n=(g.appLogo&&(n=g.createEl({class:"logo",tag:"img",src:g.appLogo,alt:"app-logo"}),e.appendChild(n)),"To start using "+g.appName),o=g.createEl({class:"title",tag:"span",text:"Connect Wallet"}),n=g.createEl({class:"subtitle",tag:"span",text:n}),a=g.createEl({class:"wallet-list",tag:"ul"}),i=_createForOfIteratorHelperLoose(d);!(s=i()).done;){var s=s.value,l=s.key,s=s.value,c=g.createEl({class:l+"-wallet",tag:"li"}),l=(c.onclick=function(t){return function(e){e.stopPropagation(),g.hideSelector(),r(t)}}(l),g.createEl({class:l+"-logo"})),s=g.createEl({class:"wallet-name",tag:"span",text:s}),u=g.createEl({class:"right-arrow"});c.appendChild(l),c.appendChild(s),c.appendChild(u),a.appendChild(c)}var p=g.createEl({class:"tos-link",tag:"a",text:"Terms of Service",href:"https://protonchain.com/terms",target:"_blank"}),h=g.createEl({class:"tos-agreement",tag:"p",text:"By connecting, I accept Proton's "}),p=(h.appendChild(p),e.appendChild(o),e.appendChild(n),t.appendChild(a),t.appendChild(h),g.createEl({class:"footnote",text:"Don't have a wallet? "})),o=g.createEl({tag:"a",target:"_blank",href:"https://protonchain.com/wallet",text:"Download it here"});p.appendChild(o),emptyElement(g.selectorEl),g.selectorEl.appendChild(e),g.selectorEl.appendChild(t),g.selectorContainerEl.appendChild(p),g.showSelector()})},e}();function emptyElement(e){for(;e.firstChild;)e.removeChild(e.firstChild)}var OPEN_SETTINGS="menubar=1,resizable=1,width=400,height=600",Deferred=function(){var r=this;this.promise=new Promise(function(e,t){r.reject=t,r.resolve=e})},ProtonWebLink=function(){function e(e){var t=this;this.childWindow=null,this.scheme=e.scheme,this.storage=e.storage,this.testUrl=e.testUrl,setInterval(function(){return t.closeChild()},500),window.addEventListener("message",function(e){return t.onEvent(e)},!1)}var t=e.prototype;return t.childUrl=function(e){return""+(this.testUrl||("proton"===this.scheme?"https://webauth.com":"https://testnet.webauth.com"))+e},t.closeChild=function(e){void 0===e&&(e=!1),this.childWindow&&(e&&this.childWindow.close(),(e||this.childWindow.closed)&&(this.childWindow=null))},t.createSession=function(e){var r=this;return{auth:e,transact:function(e,t){r.deferredLogin&&(r.closeChild(!0),r.deferredLogin.reject("Trying to login"),r.deferredLogin=void 0),r.deferredTransact={deferral:new Deferred,transaction:e.transaction||{actions:e.actions},params:t,waitingForOpen:!0},r.childWindow=window.open(r.childUrl("/auth"),"_blank",OPEN_SETTINGS);try{return r.deferredTransact.deferral.promise}catch(e){throw console.error(e),e}},link:{walletType:"webauth"}}},t.login=function(){var e=_asyncToGenerator(runtime_1.mark(function e(){var t;return runtime_1.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.deferredTransact&&(this.closeChild(!0),this.deferredTransact.deferral.reject("Trying to login"),this.deferredTransact=void 0),this.childWindow=window.open(this.childUrl("/login"),"_blank",OPEN_SETTINGS),this.deferredLogin=new Deferred,e.prev=3,this.storage.write("wallet-type","webauth"),e.next=7,this.deferredLogin.promise;case 7:return t=e.sent,e.abrupt("return",{session:this.createSession(t)});case 11:throw e.prev=11,e.t0=e.catch(3),console.error(e.t0),e.t0;case 15:case"end":return e.stop()}},e,this,[[3,11]])}));return function(){return e.apply(this,arguments)}}(),t.restoreSession=function(){var r=_asyncToGenerator(runtime_1.mark(function e(t,r){return runtime_1.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.createSession(r));case 1:case"end":return e.stop()}},e,this)}));return function(e,t){return r.apply(this,arguments)}}(),t.removeSession=function(){var n=_asyncToGenerator(runtime_1.mark(function e(t,r,n){return runtime_1.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.storage){e.next=2;break}throw new Error("Unable to remove session: No storage adapter configured");case 2:return e.next=4,this.storage.read("wallet-type");case 4:if(!e.sent){e.next=6;break}this.storage.remove("wallet-type");case 6:return e.next=8,this.storage.read("user-auth");case 8:if(!e.sent){e.next=10;break}this.storage.remove("user-auth");case 10:return e.abrupt("return",{appIdentifier:t,auth:r,chainId:n});case 11:case"end":return e.stop()}},e,this)}));return function(e,t,r){return n.apply(this,arguments)}}(),t.onEvent=function(){var t=_asyncToGenerator(runtime_1.mark(function e(t){var r,n,o,a;return runtime_1.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(-1!==t.origin.indexOf("https://webauth.com")&&-1!==t.origin.indexOf("https://testnet.webauth.com"))return e.abrupt("return");e.next=2;break;case 2:e.prev=2,r=JSON.parse(t.data),e.next=9;break;case 6:return e.prev=6,e.t0=e.catch(2),e.abrupt("return");case 9:if(e.prev=9,n=(a=r).type,o=a.data,a=a.error,n){e.next=13;break}return e.abrupt("return");case 13:"isReady"===n?this.deferredTransact&&this.deferredTransact.waitingForOpen&&(this.deferredTransact.waitingForOpen=!1,this.childWindow.postMessage(JSON.stringify({type:"transaction",data:{transaction:this.deferredTransact.transaction,params:this.deferredTransact.params}}),"*")):"close"===n?(this.closeChild(!0),this.deferredTransact?this.deferredTransact.deferral.reject("Closed"):this.deferredLogin&&this.deferredLogin.reject("Closed")):"transactionSuccess"===n?(this.closeChild(!0),this.deferredTransact&&(a?this.deferredTransact.deferral.reject(a&&a.json?a.json:a):this.deferredTransact.deferral.resolve(o),this.deferredTransact=void 0)):"loginSuccess"===n&&(this.closeChild(!0),this.deferredLogin&&(this.deferredLogin.resolve(o),this.deferredLogin=void 0)),e.next=19;break;case 16:e.prev=16,e.t1=e.catch(9),console.error(e.t1);case 19:case"end":return e.stop()}},e,this,[[2,6],[9,16]])}));return function(e){return t.apply(this,arguments)}}(),e}(),Storage=function(){function e(e){this.keyPrefix=e}var t=e.prototype;return t.write=function(){var r=_asyncToGenerator(runtime_1.mark(function e(t,r){return runtime_1.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.setItem(this.storageKey(t),r);case 1:case"end":return e.stop()}},e,this)}));return function(e,t){return r.apply(this,arguments)}}(),t.read=function(){var t=_asyncToGenerator(runtime_1.mark(function e(t){return runtime_1.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",localStorage.getItem(this.storageKey(t)));case 1:case"end":return e.stop()}},e,this)}));return function(e){return t.apply(this,arguments)}}(),t.remove=function(){var t=_asyncToGenerator(runtime_1.mark(function e(t){return runtime_1.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.removeItem(this.storageKey(t));case 1:case"end":return e.stop()}},e,this)}));return function(e){return t.apply(this,arguments)}}(),t.storageKey=function(e){return this.keyPrefix+"-"+e},e}(),WALLET_TYPES=[{key:"proton",value:"Mobile Wallet"},{key:"webauth",value:"Browsersz Wallet"},{key:"anchor",value:"Anchor"}],ConnectWallet=function(){var t=_asyncToGenerator(runtime_1.mark(function e(t){var r,n,o,a;return runtime_1.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.linkOptions,n=t.transportOptions,n=void 0===n?{}:n,o=t.selectorOptions,o=void 0===o?{}:o,a=new JsonRpc(r.endpoints),r.client=a,r.chainId){e.next=9;break}return e.next=6,a.get_info();case 6:a=e.sent,r.chainId=a.chain_id;case 9:return r.storage||(r.storage=new Storage(r.storagePrefix||"proton-storage")),e.abrupt("return",login(o,r,n));case 11:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}(),login=function(){var n=_asyncToGenerator(runtime_1.mark(function e(t,r,n){var o,a,i,s,l,c,u,p,h;return runtime_1.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=new WalletTypeSelector(t.appName,t.appLogo,t.customStyleOptions),s=t.walletType){e.next=19;break}if(r.restoreSession)return e.next=6,r.storage.read("wallet-type");e.next=9;break;case 6:s=e.sent,e.next=19;break;case 9:return l=t.enabledWalletTypes?WALLET_TYPES.filter(function(e){return t.enabledWalletTypes&&t.enabledWalletTypes.includes(e.key)}):WALLET_TYPES,e.prev=10,e.next=13,i.displayWalletSelector(l);case 13:s=e.sent,e.next=19;break;case 16:return e.prev=16,e.t0=e.catch(10),e.abrupt("return",{error:e.t0});case 19:if(s){e.next=21;break}return e.abrupt("return",{error:new Error("Wallet Type Unavailable: No wallet provided")});case 21:if(l="proton","71ee83bcf52142d61019d95f9cc5427ba6a0d7ff8accd9e2088ae2abeaf3d3dd"===r.chainId&&(l="proton-test"),c="proton","anchor"===s?c="esr":"proton-test"===l&&(c="proton-dev"),c=_extends({},r,{scheme:c,transport:new ProtonLinkBrowserTransport(_extends({},n,{walletType:s})),walletType:s,chains:[]}),c=new("webauth"===s?ProtonWebLink:ProtonLink)(c),r.restoreSession){e.next=51;break}return u=!1,document.addEventListener("backToSelector",function(){u=!0}),e.prev=30,e.next=33,c.login(n.requestAccount||"");case 33:a=e.sent,o=a.session,p=JSON.stringify({actor:a.session.auth.actor.toString(),permission:a.session.auth.permission.toString()}),r.storage.write("user-auth",p),e.next=49;break;case 39:if(e.prev=39,e.t1=e.catch(30),console.error("restoreSession Error:"),console.error(e.t1),u)return document.removeEventListener("backToSelector",function(){u=!0}),e.abrupt("return",login(t,r,n));e.next=48;break;case 48:return e.abrupt("return",{error:e.t1});case 49:e.next=64;break;case 51:return e.next=53,r.storage.read("user-auth");case 53:if(p=e.sent,h=p?JSON.parse(p):{},h=0<Object.keys(h).length?h:null)return e.next=59,c.restoreSession(n.requestAccount||"",h);e.next=64;break;case 59:if(o=e.sent){e.next=64;break}return r.storage.remove("wallet-type"),r.storage.remove("user-auth"),e.abrupt("return",{link:void 0,session:void 0,loginResult:void 0});case 64:return o&&o.auth&&(o.auth={actor:o.auth.actor.toString(),permission:o.auth.permission.toString()},o.publicKey=o.publicKey?o.publicKey.toString():void 0),e.abrupt("return",{session:o,link:c,loginResult:a});case 66:case"end":return e.stop()}},e,null,[[10,16],[30,39]])}));return function(e,t,r){return n.apply(this,arguments)}}();export default ConnectWallet;