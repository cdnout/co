!function(i,o){"function"==typeof define&&define.amd?define("pnotify.desktop",["jquery","pnotify"],o):"object"==typeof exports&&"undefined"!=typeof module?module.exports=o(require("jquery"),require("./pnotify")):o(i.jQuery,i.PNotify)}("undefined"!=typeof window?window:this,function(i,t){var n,e=function(i,o){return(e="Notification"in window?function(i,o){return new Notification(i,o)}:"mozNotification"in navigator?function(i,o){return navigator.mozNotification.createNotification(i,o.body,o.icon).show()}:"webkitNotifications"in window?function(i,o){return window.webkitNotifications.createNotification(o.icon,i,o.body)}:function(i,o){return null})(i,o)};return t.prototype.options.desktop={desktop:!1,fallback:!0,icon:null,tag:null},t.prototype.modules.desktop={tag:null,icon:null,genNotice:function(i,o){null===o.icon?this.icon="http://sciactive.com/pnotify/includes/desktop/"+i.options.type+".png":!1===o.icon?this.icon=null:this.icon=o.icon,null!==this.tag&&null===o.tag||(this.tag=null===o.tag?"PNotify-"+Math.round(1e6*Math.random()):o.tag),i.desktop=e(i.options.title,{icon:this.icon,body:o.text||i.options.text,tag:this.tag}),!("close"in i.desktop)&&"cancel"in i.desktop&&(i.desktop.close=function(){i.desktop.cancel()}),i.desktop.onclick=function(){i.elem.trigger("click")},i.desktop.onclose=function(){"closing"!==i.state&&"closed"!==i.state&&i.remove()}},init:function(i,o){o.desktop&&(0===(n=t.desktop.checkPermission())?this.genNotice(i,o):o.fallback||(i.options.auto_display=!1))},update:function(i,o,t){0!==n&&o.fallback||!o.desktop||this.genNotice(i,o)},beforeOpen:function(i,o){0!==n&&o.fallback||!o.desktop||i.elem.css({left:"-10000px"}).removeClass("ui-pnotify-in")},afterOpen:function(i,o){0!==n&&o.fallback||!o.desktop||(i.elem.css({left:"-10000px"}).removeClass("ui-pnotify-in"),"show"in i.desktop&&i.desktop.show())},beforeClose:function(i,o){0!==n&&o.fallback||!o.desktop||i.elem.css({left:"-10000px"}).removeClass("ui-pnotify-in")},afterClose:function(i,o){0!==n&&o.fallback||!o.desktop||(i.elem.css({left:"-10000px"}).removeClass("ui-pnotify-in"),"close"in i.desktop&&i.desktop.close())}},t.desktop={permission:function(){"undefined"!=typeof Notification&&"requestPermission"in Notification?Notification.requestPermission():"webkitNotifications"in window&&window.webkitNotifications.requestPermission()},checkPermission:function(){return"undefined"!=typeof Notification&&"permission"in Notification?"granted"===Notification.permission?0:1:"webkitNotifications"in window&&0==window.webkitNotifications.checkPermission()?0:1}},n=t.desktop.checkPermission(),t});