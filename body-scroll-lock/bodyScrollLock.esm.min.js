function _toConsumableArray(e){if(Array.isArray(e)){for(var o=0,t=Array(e.length);o<e.length;o++)t[o]=e[o];return t}return Array.from(e)}var passiveTestOptions,hasPassiveEvents=!1;"undefined"!=typeof window&&(passiveTestOptions={get passive(){hasPassiveEvents=!0}},window.addEventListener("testPassive",null,passiveTestOptions),window.removeEventListener("testPassive",null,passiveTestOptions));var isIosDevice="undefined"!=typeof window&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||"MacIntel"===window.navigator.platform&&1<window.navigator.maxTouchPoints),locks=[],documentListenerAdded=!1,initialClientY=-1,previousBodyOverflowSetting=void 0,previousBodyPosition=void 0,previousBodyPaddingRight=void 0,allowTouchMove=function(o){return locks.some(function(e){return!(!e.options.allowTouchMove||!e.options.allowTouchMove(o))})},preventDefault=function(e){e=e||window.event;return!!allowTouchMove(e.target)||(1<e.touches.length||(e.preventDefault&&e.preventDefault(),!1))},setOverflowHidden=function(e){var o;void 0===previousBodyPaddingRight&&(o=!!e&&!0===e.reserveScrollBarGap,e=window.innerWidth-document.documentElement.clientWidth,o&&0<e&&(o=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right"),10),previousBodyPaddingRight=document.body.style.paddingRight,document.body.style.paddingRight=o+e+"px")),void 0===previousBodyOverflowSetting&&(previousBodyOverflowSetting=document.body.style.overflow,document.body.style.overflow="hidden")},restoreOverflowSetting=function(){void 0!==previousBodyPaddingRight&&(document.body.style.paddingRight=previousBodyPaddingRight,previousBodyPaddingRight=void 0),void 0!==previousBodyOverflowSetting&&(document.body.style.overflow=previousBodyOverflowSetting,previousBodyOverflowSetting=void 0)},setPositionFixed=function(){return window.requestAnimationFrame(function(){var e,o,t,n;void 0===previousBodyPosition&&(previousBodyPosition={position:document.body.style.position,top:document.body.style.top,left:document.body.style.left},e=window,o=e.scrollY,t=e.scrollX,n=e.innerHeight,document.body.style.position="fixed",document.body.style.top=-o,document.body.style.left=-t,setTimeout(function(){return window.requestAnimationFrame(function(){var e=n-window.innerHeight;e&&n<=o&&(document.body.style.top=-(o+e))})},300))})},restorePositionSetting=function(){var e,o;void 0!==previousBodyPosition&&(e=-parseInt(document.body.style.top,10),o=-parseInt(document.body.style.left,10),document.body.style.position=previousBodyPosition.position,document.body.style.top=previousBodyPosition.top,document.body.style.left=previousBodyPosition.left,window.scrollTo(o,e),previousBodyPosition=void 0)},isTargetElementTotallyScrolled=function(e){return!!e&&e.scrollHeight-e.scrollTop<=e.clientHeight},handleScroll=function(e,o){var t=e.targetTouches[0].clientY-initialClientY;return!allowTouchMove(e.target)&&(o&&0===o.scrollTop&&0<t||isTargetElementTotallyScrolled(o)&&t<0?preventDefault(e):(e.stopPropagation(),!0))},disableBodyScroll=function(o,e){var t;o?locks.some(function(e){return e.targetElement===o})||(t={targetElement:o,options:e||{}},locks=[].concat(_toConsumableArray(locks),[t]),isIosDevice?setPositionFixed():setOverflowHidden(e),isIosDevice&&(o.ontouchstart=function(e){1===e.targetTouches.length&&(initialClientY=e.targetTouches[0].clientY)},o.ontouchmove=function(e){1===e.targetTouches.length&&handleScroll(e,o)},documentListenerAdded||(document.addEventListener("touchmove",preventDefault,hasPassiveEvents?{passive:!1}:void 0),documentListenerAdded=!0))):console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.")},clearAllBodyScrollLocks=function(){isIosDevice&&(locks.forEach(function(e){e.targetElement.ontouchstart=null,e.targetElement.ontouchmove=null}),documentListenerAdded&&(document.removeEventListener("touchmove",preventDefault,hasPassiveEvents?{passive:!1}:void 0),documentListenerAdded=!1),initialClientY=-1),(isIosDevice?restorePositionSetting:restoreOverflowSetting)(),locks=[]},enableBodyScroll=function(o){o?(locks=locks.filter(function(e){return e.targetElement!==o}),isIosDevice&&(o.ontouchstart=null,o.ontouchmove=null,documentListenerAdded&&0===locks.length&&(document.removeEventListener("touchmove",preventDefault,hasPassiveEvents?{passive:!1}:void 0),documentListenerAdded=!1)),(isIosDevice?restorePositionSetting:restoreOverflowSetting)()):console.error("enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.")};export{disableBodyScroll,clearAllBodyScrollLocks,enableBodyScroll};