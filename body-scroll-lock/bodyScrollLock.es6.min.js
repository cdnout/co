let hasPassiveEvents=!1;if("undefined"!=typeof window){const a={get passive(){hasPassiveEvents=!0}};window.addEventListener("testPassive",null,a),window.removeEventListener("testPassive",null,a)}const isIosDevice="undefined"!=typeof window&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||"MacIntel"===window.navigator.platform&&1<window.navigator.maxTouchPoints);let locks=[],documentListenerAdded=!1,initialClientY=-1,previousBodyOverflowSetting,previousBodyPosition,previousBodyPaddingRight;const allowTouchMove=o=>locks.some(e=>!(!e.options.allowTouchMove||!e.options.allowTouchMove(o))),preventDefault=e=>{const o=e||window.event;return!!allowTouchMove(o.target)||(1<o.touches.length||(o.preventDefault&&o.preventDefault(),!1))},setOverflowHidden=e=>{var o;void 0===previousBodyPaddingRight&&(o=!!e&&!0===e.reserveScrollBarGap,e=window.innerWidth-document.documentElement.clientWidth,o&&0<e&&(o=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right"),10),previousBodyPaddingRight=document.body.style.paddingRight,document.body.style.paddingRight=`${o+e}px`)),void 0===previousBodyOverflowSetting&&(previousBodyOverflowSetting=document.body.style.overflow,document.body.style.overflow="hidden")},restoreOverflowSetting=()=>{void 0!==previousBodyPaddingRight&&(document.body.style.paddingRight=previousBodyPaddingRight,previousBodyPaddingRight=void 0),void 0!==previousBodyOverflowSetting&&(document.body.style.overflow=previousBodyOverflowSetting,previousBodyOverflowSetting=void 0)},setPositionFixed=()=>window.requestAnimationFrame(()=>{if(void 0===previousBodyPosition){previousBodyPosition={position:document.body.style.position,top:document.body.style.top,left:document.body.style.left};const{scrollY:o,scrollX:e,innerHeight:t}=window;document.body.style.position="fixed",document.body.style.top=-o,document.body.style.left=-e,setTimeout(()=>window.requestAnimationFrame(()=>{var e=t-window.innerHeight;e&&o>=t&&(document.body.style.top=-(o+e))}),300)}}),restorePositionSetting=()=>{var e,o;void 0!==previousBodyPosition&&(e=-parseInt(document.body.style.top,10),o=-parseInt(document.body.style.left,10),document.body.style.position=previousBodyPosition.position,document.body.style.top=previousBodyPosition.top,document.body.style.left=previousBodyPosition.left,window.scrollTo(o,e),previousBodyPosition=void 0)},isTargetElementTotallyScrolled=e=>!!e&&e.scrollHeight-e.scrollTop<=e.clientHeight,handleScroll=(e,o)=>{var t=e.targetTouches[0].clientY-initialClientY;return!allowTouchMove(e.target)&&(o&&0===o.scrollTop&&0<t||isTargetElementTotallyScrolled(o)&&t<0?preventDefault(e):(e.stopPropagation(),!0))},disableBodyScroll=(o,e)=>{var t;o?locks.some(e=>e.targetElement===o)||(t={targetElement:o,options:e||{}},locks=[...locks,t],isIosDevice?setPositionFixed():setOverflowHidden(e),isIosDevice&&(o.ontouchstart=e=>{1===e.targetTouches.length&&(initialClientY=e.targetTouches[0].clientY)},o.ontouchmove=e=>{1===e.targetTouches.length&&handleScroll(e,o)},documentListenerAdded||(document.addEventListener("touchmove",preventDefault,hasPassiveEvents?{passive:!1}:void 0),documentListenerAdded=!0))):console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.")},clearAllBodyScrollLocks=()=>{isIosDevice&&(locks.forEach(e=>{e.targetElement.ontouchstart=null,e.targetElement.ontouchmove=null}),documentListenerAdded&&(document.removeEventListener("touchmove",preventDefault,hasPassiveEvents?{passive:!1}:void 0),documentListenerAdded=!1),initialClientY=-1),(isIosDevice?restorePositionSetting:restoreOverflowSetting)(),locks=[]},enableBodyScroll=o=>{o?(locks=locks.filter(e=>e.targetElement!==o),isIosDevice&&(o.ontouchstart=null,o.ontouchmove=null,documentListenerAdded&&0===locks.length&&(document.removeEventListener("touchmove",preventDefault,hasPassiveEvents?{passive:!1}:void 0),documentListenerAdded=!1)),(isIosDevice?restorePositionSetting:restoreOverflowSetting)()):console.error("enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.")};export{disableBodyScroll,clearAllBodyScrollLocks,enableBodyScroll};