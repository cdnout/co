"use strict";Backbone.tabletopSync=function(e,t,n,o){var a;"function"==typeof n&&(n={success:n,error:o});var i=t.tabletop||t.collection.tabletop,s=i.instance;if(void 0===s?(s=Tabletop.init({key:i.key,wanted:[i.sheet],wait:!0}),i.instance=s):s.addWanted(i.sheet),void 0!==i.sheet){var c=s.sheets(i.sheet);if(void 0!==c){switch(e){case"read":a=t.id?_.find(c.all(),function(e){return t.id===e[t.idAttribute]},this):c.all();break;default:throw"Backbone.tabletopSync is read-only"}a?n.success(a):n.error("Record not found")}else{if(void 0!==s.foundSheetNames&&-1===_.indexOf(s.foundSheetNames,i.sheet))throw"Can't seem to find sheet "+i.sheet;s.fetch(function(){Backbone.tabletopSync(e,t,n,o)})}}};