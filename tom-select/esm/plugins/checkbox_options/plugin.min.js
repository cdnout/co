const hash_key=e=>null==e?null:get_hash(e),get_hash=e=>"boolean"==typeof e?e?"1":"0":e+"",preventDefault=(e,t=!1)=>{e&&(e.preventDefault(),t&&e.stopPropagation())},latin_convert={"æ":"ae","ⱥ":"a","ø":"o"};new RegExp(Object.keys(latin_convert).join("|"),"g");const getDom=t=>{if(t.jquery)return t[0];if(t instanceof HTMLElement)return t;if(isHtmlString(t)){let e=document.createElement("div");return e.innerHTML=t.trim(),e.firstChild}return document.querySelector(t)},isHtmlString=e=>"string"==typeof e&&-1<e.indexOf("<");function plugin(){var o=this,n=o.onOptionSelect;o.settings.hideSelected=!1;function i(t){setTimeout(()=>{var e=t.querySelector("input");t.classList.contains("selected")?e.checked=!0:e.checked=!1},1)}o.hook("after","setupTemplates",()=>{var i=o.settings.render.option;o.settings.render.option=(e,t)=>{var n=getDom(i.call(o,e,t)),t=document.createElement("input");t.addEventListener("click",function(e){preventDefault(e)}),t.type="checkbox";e=hash_key(e[o.settings.valueField]);return e&&-1<o.items.indexOf(e)&&(t.checked=!0),n.prepend(t),n}}),o.on("item_remove",e=>{e=o.getOption(e);e&&(e.classList.remove("selected"),i(e))}),o.hook("instead","onOptionSelect",(e,t)=>t.classList.contains("selected")?(t.classList.remove("selected"),o.removeItem(t.dataset.value),o.refreshOptions(),void preventDefault(e,!0)):(n.call(o,e,t),void i(t)))}export{plugin as default};