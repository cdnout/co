!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(e="undefined"!=typeof globalThis?globalThis:e||self).dropdown_input=n()}(this,function(){"use strict";"undefined"!=typeof navigator&&/Mac/.test(navigator.userAgent);new RegExp(Object.keys({"æ":"ae","ⱥ":"a","ø":"o"}).join("|"),"g");const r=e=>"string"==typeof e&&-1<e.indexOf("<"),s=e=>{var n=[];return((e,n)=>{if(Array.isArray(e))e.forEach(n);else for(var o in e)e.hasOwnProperty(o)&&n(e[o],o)})(e,e=>{"string"==typeof e&&(e=e.trim().split(/[\11\12\14\15\40]/)),Array.isArray(e)&&(n=n.concat(e))}),n.filter(Boolean)},a=e=>e=Array.isArray(e)?e:[e];return function(){var i=this;i.settings.shouldOpen=!0,i.hook("before","setup",()=>{var e,n,o;i.focus_node=i.control,e=i.control_input,n=["dropdown-input"],o=s(n),(e=a(e)).map(n=>{o.map(e=>{n.classList.add(e)})});const t=(n=>{if(n.jquery)return n[0];if(n instanceof HTMLElement)return n;if(r(n)){let e=document.createElement("div");return e.innerHTML=n.trim(),e.firstChild}return document.querySelector(n)})('<div class="dropdown-input-wrap">');t.append(i.control_input),i.dropdown.insertBefore(t,i.dropdown.firstChild)}),i.on("initialize",()=>{i.control_input.addEventListener("keydown",e=>{switch(e.keyCode){case 27:return i.isOpen&&(o=!0,(n=e)&&(n.preventDefault(),o&&n.stopPropagation()),i.close()),void i.clearActiveItems();case 9:i.focus_node.tabIndex=-1}var n,o;return i.onKeyDown.call(i,e)}),i.on("blur",()=>{i.focus_node.tabIndex=i.isDisabled?-1:i.tabIndex}),i.on("dropdown_open",()=>{i.control_input.focus()});const n=i.onBlur;var e,o,t,r;i.hook("instead","onBlur",e=>{if(!e||e.relatedTarget!=i.control_input)return n.call(i)}),e=i.control_input,o="blur",t=()=>i.onBlur(),e.addEventListener(o,t,r),i.hook("before","close",()=>{i.isOpen&&i.focus_node.focus()})})}});