!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).checkbox_options=t()}(this,function(){"use strict";const s=e=>"boolean"==typeof e?e?"1":"0":e+"",c=(e,t=!1)=>{e&&(e.preventDefault(),t&&e.stopPropagation())};new RegExp(Object.keys({"æ":"ae","ⱥ":"a","ø":"o"}).join("|"),"g");const r=e=>"string"==typeof e&&-1<e.indexOf("<");return function(){var i=this,n=i.onOptionSelect;function o(t){setTimeout(()=>{var e=t.querySelector("input");t.classList.contains("selected")?e.checked=!0:e.checked=!1},1)}i.settings.hideSelected=!1,i.hook("after","setupTemplates",()=>{var o=i.settings.render.option;i.settings.render.option=(e,t)=>{var n=(t=>{if(t.jquery)return t[0];if(t instanceof HTMLElement)return t;if(r(t)){let e=document.createElement("div");return e.innerHTML=t.trim(),e.firstChild}return document.querySelector(t)})(o.call(i,e,t)),t=document.createElement("input");t.addEventListener("click",function(e){c(e)}),t.type="checkbox";e=null==(e=e[i.settings.valueField])?null:s(e);return e&&-1<i.items.indexOf(e)&&(t.checked=!0),n.prepend(t),n}}),i.on("item_remove",e=>{e=i.getOption(e);e&&(e.classList.remove("selected"),o(e))}),i.hook("instead","onOptionSelect",(e,t)=>t.classList.contains("selected")?(t.classList.remove("selected"),i.removeItem(t.dataset.value),i.refreshOptions(),void c(e,!0)):(n.call(i,e,t),void o(t)))}});