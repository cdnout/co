!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(e="undefined"!=typeof globalThis?globalThis:e||self).Vidage=n()}(this,function(){"use strict";function e(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function n(n,t,o){var i,a,r,s,l;function u(){var e=Date.now()-s;e<t&&0<=e?i=setTimeout(u,t-e):(i=null,o||(l=n.apply(r,a),r=a=null))}null==t&&(t=100);function e(){r=this,a=arguments,s=Date.now();var e=o&&!i;return i=i||setTimeout(u,t),e&&(l=n.apply(r,a),r=a=null),l}return e.clear=function(){i&&(clearTimeout(i),i=null)},e.flush=function(){i&&(l=n.apply(r,a),r=a=null,clearTimeout(i),i=null)},e}var t,o,i=n.debounce=n,a={helperClass:"vidage-ready",videoRemoval:!1},r=null;return e((t=s).prototype,[{key:"init",value:function(){var e=this;this.element.readyState>=this.element.HAVE_FUTURE_DATA?this.handler():this.element.addEventListener("canplay",function(){e.handler()}),window.addEventListener("resize",i(function(){e.handler()},250))}},{key:"handler",value:function(){var e,n,t,o=document.body;(n={touch:!!("ontouchstart"in window||window.navigator&&window.navigator.msPointerEnabled&&window.MSGesture||window.DocumentTouch&&document instanceof DocumentTouch),ie:0<window.navigator.userAgent.indexOf("MSIE")||!!window.navigator.userAgent.match(/Trident.*rv\:11\./),small:window.matchMedia("(max-width: 34em)").matches}).touch&&!n.ie||n.small?(this.element.pause(),this.options.videoRemoval&&(e=this.element,null===r&&(r=e.parentNode),document.body.contains(e)&&r.removeChild(e)),o.classList.remove(this.options.helperClass)):(this.options.videoRemoval&&(t=this.element,document.body.contains(t)||r.insertAdjacentElement("afterbegin",t)),this.element.play(),o.classList.add(this.options.helperClass))}}]),o&&e(t,o),s;function s(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};(function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")})(this,s),this.options=Object.assign(a,n),this._name=this.constructor.name,this.element=function(e,n){if(void 0===e)throw new Error("".concat(n," requires a video selector as first argument."));if("video"!==(e="string"==typeof e?document.querySelector(e):e).nodeName.toLowerCase())throw new Error("".concat(n," requires a valid video selector. You passed a <").concat(e.nodeName,">"));return e}(e,this._name),this.init()}});