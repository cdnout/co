!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(e=e||self).EmblaCarousel=n()}(this,function(){"use strict";function E(){return(E=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function Re(e){var n=e.start,t=e.limit,r=e.loop,o=t.min,i=t.max,a=r?"loop":"constrain",c=l(n);function u(){return c}function s(e){return c=l(e),d}function l(e){return t[a](e)}var d={add:function e(n){if(0===n)return d;var t=n/Math.abs(n);return s(c+t),e(n+-1*t)},clone:function(){return Re({start:c,limit:t,loop:r})},get:u,max:i,min:o,set:s};return d}function Xe(e){var n=e;function t(e){return n/=e,o}function r(e){return"number"==typeof e?e:e.get()}var o={add:function(e){return n+=r(e),o},divide:t,get:function(){return n},multiply:function(e){return n*=e,o},normalize:function(){return 0!==n&&t(n),o},set:function(e){return n=r(e),o},subtract:function(e){return n-=r(e),o}};return o}function k(e){var t=Xe(r(e));function r(e){return 0===e?0:e/Math.abs(e)}var o={get:t.get,set:function(e){var n=r(e.get());return 0!==n&&t.set(n),o}};return o}function N(){var o=[],i={add:function(e,n,t,r){return void 0===r&&(r=!1),e.addEventListener(n,t,r),o.push(function(){return e.removeEventListener(n,t,r)}),i},removeAll:function(){return o.filter(function(e){return e()}),o.length=0,i}};return i}function Ge(s){var l=s.target,d=s.scrollBody,f=s.dragFree,u=s.animation,e=s.axis,c=s.element,m=s.dragTracker,p=s.location,g=s.events,v=s.limit,x=e.scroll,h=e.cross,S=["INPUT","SELECT","TEXTAREA"],y=Xe(0),w=Xe(0),b=Xe(0),n=N(),T=N(),t=n.removeAll,r=T.removeAll,M={mouse:2.5,touch:3.5},z={mouse:4,touch:7},D={mouse:12,touch:14},E={mouse:6,touch:5},P=!1,A=!1,I=!1,B=!1;function o(e){var n,t,r,o,i,a;(B="mousedown"===e.type)&&0!==e.button||(t=2<=O(l.get(),p.get()),r=B||!t,n=e.target.nodeName||"",o=!(-1<S.indexOf(n)),i=t||B&&o,P=!0,m.pointerDown(e),b.set(l),l.set(p),d.useDefaultMass().useSpeed(80),a=B?document:c,T.add(a,"touchmove",L).add(a,"touchend",C).add(a,"mousemove",L).add(a,"mouseup",C),y.set(m.readPoint(e,x)),w.set(m.readPoint(e,h)),g.emit("pointerDown"),r&&(I=!1),i&&e.preventDefault())}function L(e){if(!A&&!B){var n=m.readPoint(e,x).get(),t=m.readPoint(e,h).get(),r=O(n,y.get()),o=O(t,w.get());if(!(A=o<r)&&!I)return C()}var i=m.pointerMove(e),a=v.reachedAny(p.get()),c=!s.loop&&a?2:1;!I&&i&&(I=!0),u.start(),l.add(i/c),e.preventDefault()}function C(){var e,n,t,r,o,i,a,c,u=m.pointerUp()*(f?z:M)[B?"mouse":"touch"];.5<=O(l.get(),b.get())&&!B&&(I=!0),P=A=B=!1,T.removeAll(),d.useSpeed((f?E:D)[B?"mouse":"touch"]),e=u,r=s.scrollTo,o=s.scrollTarget,i=s.index,a=v.reachedAny(l.get()+e),c=!(o.byDistance(0,!1).index!==i.get())&&4<Math.abs(e),f||a||!c?r.distance(e,!f):(n=-1*k(e).get(),t=i.clone().add(n),r.index(t.get(),0)),g.emit("pointerUp")}function O(e,n){return Math.abs(e-n)}function i(e){I&&e.preventDefault()}return{addActivationEvents:function(){var e=c;n.add(e,"touchmove",function(){}).add(e,"touchend",function(){}).add(e,"touchstart",o).add(e,"mousedown",o).add(e,"touchcancel",C).add(e,"contextmenu",C).add(e,"click",i)},clickAllowed:function(){return!I},pointerDown:function(){return P},removeActivationEvents:t,removeInteractionEvents:r}}function Ye(e){var n=e.min,t=e.max,r={min:t,max:n},o={min:n,max:t},i=Math.abs(n-t);function a(e){return e<n}function c(e){return t<e}function u(e){return e<n?"min":t<e?"max":""}return{constrain:function(e){var n=u(e);return n?o[n]:e},length:i,loop:function(e){var n=u(e);return n?r[n]:e},max:t,min:n,reachedAny:function(e){return e<n||t<e},reachedMax:c,reachedMin:a,removeOffset:function(e){if(n===t)return e;for(;e<n;)e+=i;for(;t<e;)e-=i;return e}}}function Je(e){var n=Math.pow(10,e);return function(e){return Math.round(e*n)/n}}function Ke(e){return Object.keys(e).map(Number)}function P(e,n){var t=e.classList;t.contains(n)&&t.remove(n)}function A(e,n){var t=e.classList;t.contains(n)||t.add(n)}function Qe(e){var r=e.location,n=e.speed,t=e.mass,o=Je(2),i=Xe(0),a=Xe(0),c=Xe(0),u=k(0),s={speed:n,mass:t};function l(e){return s.speed=e,f}function d(e){return s.mass=e,f}var f={direction:u,location:r,seek:function(e){c.set(e).subtract(r);var n,t=0+c.get()/100*s.speed;return u.set(c),c.normalize().multiply(t).subtract(i),(n=c).divide(s.mass),a.add(n),f},settle:function(e){var n=e.get()-r.get(),t=!o(n);return t&&r.set(e),t},update:function(){i.add(a),r.add(i),a.multiply(0)},useDefaultMass:function(){return d(t),f},useDefaultSpeed:function(){return l(n),f},useMass:d,useSpeed:l};return f}function We(e){var t=e.limit,r=e.location,o=e.scrollBody,i=e.animation,a=t.min,c=t.max,u=t.reachedMin,s=t.reachedMax,l=!1,d=0;return{constrain:function(n){var e;e=n,l||d||(u(r.get())?e.get()===a:!s(r.get())||e.get()===c)||(d=window.setTimeout(function(){var e=t.constrain(n.get());n.set(e),o.useSpeed(10).useMass(3),i.start(),d=0},50))},toggleActive:function(e){l=!e}}}function Ze(e){var n=e.alignment,t=e.contentSize,r=e.viewSize,s=Ye({min:-t+r,max:0}),l=[n.measure(t)],d=r<t;return{measure:function(e,n){var t,r,o,i=e.map(s.constrain),a=(r=(t=i)[0],o=t[t.length-1],Ye({min:t.lastIndexOf(r)+1,max:t.indexOf(o)})),c=a.min,u=a.max;return d?n?i.slice(c-1,u+1):i:l}}}function $e(e){var o=e.contentSize,i=e.location,n=e.limit,t=e.pxToPercent,r=Ye({min:n.min+t.measure(.1),max:n.max+t.measure(.1)}),a=r.reachedMin,c=r.reachedMax;return{loop:function(e,n){var t,r;(1===(r=n)?c(i.get()):-1===r&&a(i.get()))&&(t=o*(-1*n),e.forEach(function(e){return e.add(t)}))}}}function _e(c){var u=c.loop,e=c.limit,s=c.scrollSnaps,a=c.contentSize,l=e.reachedMax,d=e.reachedAny,f=e.removeOffset;function m(e,n){return Math.abs(e)<Math.abs(n)?e:n}function p(e,n){var t=e,r=e+a,o=e-a;if(!u)return t;if(!n)return m(m(t,r),o);var i=m(t,1===n?r:o);return Math.abs(i)*n}return{byDistance:function(e,n){var t,r=c.target.get()+e,o=(t=f(r),{index:s.map(function(e){return e-t}).map(function(e){return p(e,0)}).map(function(e,n){return{diff:e,index:n}}).sort(function(e,n){return Math.abs(e.diff)-Math.abs(n.diff)})[0].index,distance:t}),i=function(e,n){if(u||!d(e))return n;var t=c.index,r=t.min,o=t.max;return l(e)?r:o}(r,o.index),a=!u&&d(r);return!n||a?{index:i,distance:e}:{index:i,distance:e+p(s[i]-o.distance,0)}},byIndex:function(e,n){return{index:e,distance:p(s[e]-c.target.get(),n)}},shortcut:p}}function en(e){var n,t,r=e.axis,a=e.location,f=e.contentSize,o=e.viewSize,i=e.slideSizes,c=e.scrollSnaps,m=Ke(i),u=Ke(i).reverse(),s=v(t=d(n=c[0]-1,u),g(n,t,0),1).concat(v(d(o-c[0]-1,m),-g(f,m,-o),0)),l="x"===r.scroll?"left":"top";function p(e,n){return e.reduce(function(e,n){return e-i[n]},n)}function d(t,e){return e.reduce(function(e,n){return 0<p(e,t)?e.concat([n]):e},[])}function g(r,e,n){return e.reduce(function(e,n){var t=e+i[n];return t<r?t:e},n)}function v(e,s,l){var d=e.slice().sort(function(e,n){return e-n});return d.map(function(e,n){var t,r,o,i,a=f*(l?-1:0),c=f*(l?0:1),u=(t=d.slice(0,n),r=s,o=l,i=m.length-1,p(t.map(function(e){return(e+o)%i}),r));return{point:u,getTarget:function(e){return u<e?a:c},index:e,location:-1}})}return{canLoop:function(){return s.every(function(e){var n=e.index;return p(m.filter(function(e){return e!==n}),o)<=0})},clear:function(t){s.forEach(function(e){var n=e.index;t[n].style[l]=""})},loop:function(i){s.forEach(function(e){var n=e.getTarget,t=e.location,r=e.index,o=n(a.get());o!==t&&(i[r].style[l]=o+"%",e.location=o)})},loopPoints:s}}function nn(e){var n=e.contentSize,r=e.slideSizes,o=e.viewSize,t=e.inViewThreshold,i=e.loop,a=r.map(function(e){return e*t}),c=Ke(r).map(function(e){return r.slice(0,e).reduce(function(e,n){return e-n},0)}),u=(i?[0,n,-n]:[0]).map(function(t){return c.map(function(e,n){return{start:e-r[n]+a[n]+t,end:e+o-a[n]+t,index:n}})}).reduce(function(e,n){return e.concat(n)},[]);return{check:function(i){return u.reduce(function(e,n){var t=n.index,r=n.start,o=n.end;return-1===e.indexOf(t)&&r<i&&i<o?e.concat([t]):e},[])}}}function I(e,n,t,r,o){var i,a,c,u,s,l,d,f,m,p,g,v,x,h,S,y,w,b,T,M,z,D,E,P,A,I,B,L,C,O,k,N,U,V,F,j,H,q,R,X,G,Y,J,K,Q,W,Z,$,_,ee,ne,te=r.align,re=r.axis,oe=r.startIndex,ie=r.inViewThreshold,ae=r.loop,ce=r.speed,ue=r.dragFree,se=r.slidesToScroll,le=r.containScroll,de={cross:"y"===re?"x":"y",measure:function(e){var n=e.getBoundingClientRect(),t=n.width,r=n.height;return"x"==ne?t:r},scroll:ne="y"===re?"y":"x"},fe=(_=de.measure(n),ee={measure:function(e){return e/_*100},totalPercent:100},Object.freeze(ee)),me=fe.totalPercent,pe=t.map(de.measure).map(fe.measure),ge=function(e,n){for(var t=[],r=0;r<e.length;r+=n)t.push(e.slice(r,r+n));return t}(pe,se).map(function(e){return e.reduce(function(e,n){return e+n})}),ve=Ke(ge),xe=pe.reduce(function(e,n){return e+n},0),he=(W=(Q={align:te,viewSize:me}).viewSize,Z=Q.align,$={start:function(){return 0},center:function(e){return(W-e)/2},end:function(e){return W-e}},{measure:function(e){return"number"==typeof Z?W*Number(Z):$[Z](e)}}),Se=(G=(q={snapSizes:ge,alignment:he,loop:ae}).alignment,Y=q.loop,J=(X=q.snapSizes).map(G.measure),R=Re({limit:Ye({min:0,max:X.length-1}),start:0,loop:Y}),K=X.map(function(e,n){var t=R.set(n+1).get();return e+J[n]-J[t]}),{measure:function(e){return K.slice(0,e).reduce(function(e,n){return e-n},J[0])}}),ye=ve.map(Se.measure),we=Ze({alignment:he,contentSize:xe,viewSize:me}),be=!ae&&""!==le,Te="trimSnaps"===le,Me=we.measure(ye,Te),ze=be?Me:ye,De=Re({limit:Ye({min:0,max:ze.length-1}),start:oe,loop:ae}),Ee=De.clone(),Pe=(j=(F={loop:ae,contentSize:xe}).contentSize,H=F.loop,function(e){var n=e[0],t=e[e.length-1];return Ye({min:H?n-j:t,max:n})}(ze)),Ae=(k=function(){Ve.scrollBody.seek(Le).update();var e,n=Ve.scrollBody.settle(Le);Ue.pointerDown()||(ae||Ve.scrollBounds.constrain(Le),n&&(Ve.animation.stop(),o.emit("settle"))),ae&&(e=Ve.scrollBody.direction.get(),Ve.scrollLooper.loop(Ce,e),Ve.slideLooper.loop(t)),n||o.emit("scroll"),Ve.translate.to(Ve.scrollBody.location),Ve.animation.proceed()},N=requestAnimationFrame.bind(window),U=cancelAnimationFrame.bind(window),{proceed:He(!(V=0),qe),start:He(!1,qe),stop:He(!0,function(){U(V),V=0})}),Ie=ze[De.get()],Be=Xe(Ie),Le=Xe(Ie),Ce=[Be,Le],Oe=Qe({location:Be,speed:ce,mass:1}),ke=_e({contentSize:xe,index:De,limit:Pe,loop:ae,scrollSnaps:ze,target:Le}),Ne=(A=(P={animation:Ae,events:o,index:De,indexPrevious:Ee,scrollTarget:ke,target:Le}).index,I=P.scrollTarget,B=P.animation,L=P.indexPrevious,C=P.events,O=P.target,{distance:function(e,n){je(I.byDistance(e,n))},index:function(e,n){var t=A.clone().set(e);je(I.byIndex(t.get(),n))}}),Ue=Ge({animation:Ae,axis:de,dragFree:ue,dragTracker:(x=(v={axis:de,pxToPercent:fe}).axis,h=v.pxToPercent,S=x.scroll,y={x:"clientX",y:"clientY"},w=Xe(0),b=Xe(0),T=Xe(0),M=Xe(0),z=[],D=(new Date).getTime(),E=!1,{pointerDown:function(e){var n=Fe(e,S);return w.set(n),T.set(n),h.measure(w.get())},pointerMove:function(e){var n=Fe(e,S),t=(new Date).getTime();return 10<=t-D&&(z.push(n.get()),D=t),b.set(n).subtract(T),T.set(n),h.measure(b.get())},pointerUp:function(){var n=T.get(),e=E?5:4,t=z.slice(-e).map(function(e){return n-e}).sort(function(e,n){return Math.abs(e)<Math.abs(n)?1:-1})[0];return T.set(t||0),z=[],h.measure(T.get())},readPoint:Fe}),element:e,events:o,index:De,limit:Pe,location:Be,loop:ae,scrollBody:Oe,scrollTo:Ne,scrollTarget:ke,target:Le}),Ve={animation:Ae,axis:de,dragHandler:Ue,pxToPercent:fe,index:De,indexPrevious:Ee,limit:Pe,location:Be,options:r,scrollBody:Oe,scrollBounds:We({animation:Ae,limit:Pe,location:Be,scrollBody:Oe}),scrollLooper:$e({contentSize:xe,limit:Pe,location:Be,pxToPercent:fe}),scrollProgress:(a=(i={limit:Pe}.limit).max,c=i.length,{get:function(e){return(e-a)/-c}}),scrollSnaps:ze,scrollTarget:ke,scrollTo:Ne,slideLooper:en({axis:de,contentSize:xe,location:Be,scrollSnaps:ze,slideSizes:pe,viewSize:me}),slidesInView:nn({contentSize:xe,inViewThreshold:ie,loop:ae,slideSizes:pe,viewSize:me}),snapIndexes:ve,target:Le,translate:(s=(u={axis:de,container:n}).axis,l=u.container,d={x:function(e){return"translate3d("+e+"%,0px,0px)"},y:function(e){return"translate3d(0px,"+e+"%,0px)"}}[s.scroll],f=Je(2),m=l.style,p=!1,g=0,{clear:function(){m.transform="",g=0},to:function(e){var n;p||(n=f(e.get()),g!==n&&(getComputedStyle(l).transform,m.transform=d(n),g=n))},toggleActive:function(e){p=!e}})};function Fe(e,n){E=!e.touches;var t=y[n],r=E?e[t]:e.touches[0][t];return M.set(r)}function je(e){var n=e.distance,t=e.index!==A.get();n&&(B.start(),O.add(n)),t&&(L.set(A.get()),A.set(e.index),C.emit("select"))}function He(e,n){return function(){e===!!V&&n()}}function qe(){V=N(k)}return Ve}var B={align:"center",axis:"x",containScroll:"",containerSelector:"*",dragFree:!1,draggable:!0,draggableClass:"is-draggable",draggingClass:"is-dragging",inViewThreshold:0,loop:!1,selectedClass:"is-selected",slidesToScroll:1,speed:10,startIndex:0};return function(d,e){void 0===e&&(e={});var n,t,f,m,p,r,o,g=(r={destroy:[],pointerDown:[],pointerUp:[],init:[],reInit:[],resize:[],scroll:[],select:[],settle:[]},o={emit:function(n){return r[n].forEach(function(e){return e(n)}),o},off:function(e,n){return r[e]=r[e].filter(function(e){return e!==n}),o},on:function(e,n){return r[e]=r[e].concat([n]),o}}),v=N(),x=(n=function(){var e=f.axis.measure(m);y!==e&&M(),g.emit("resize")},t={id:0},function(){window.clearTimeout(t.id),t.id=window.setTimeout(n,500)||0}),i=M,a=g.on,c=g.off,h=!1,S=E({},B),y=0;function u(e){void 0===e&&(e={}),function(){if(!d)throw new Error("Missing root node ðŸ˜¢");var e,n=S.containerSelector,t=d.querySelector(n);if(!t)throw new Error("Missing container node ðŸ˜¢");e=(m=t).children,p=Array.prototype.slice.call(e)}(),S=E(S,e);var n=(f=I(d,m,p,S,g)).axis,t=f.scrollBody,r=f.translate,o=f.dragHandler,i=f.slideLooper,a=S.loop,c=S.draggable,u=S.draggableClass,s=S.selectedClass,l=S.draggingClass;if(y=n.measure(m),v.add(window,"resize",x),r.to(t.location),p.forEach(T),o.addActivationEvents(),a){if(!i.canLoop())return M({loop:!1});i.loop(p)}c?(u&&A(d,u),l&&(g.on("pointerDown",w),g.on("pointerUp",w))):g.on("pointerDown",o.removeInteractionEvents),s&&(b(),g.on("select",b),g.on("pointerUp",b)),h||(setTimeout(function(){return g.emit("init")},0),h=!0)}function w(e){var n=S.draggingClass;("pointerDown"===e?A:P)(d,n)}function b(){var n=S.selectedClass,e=l(!0);z(!0).forEach(function(e){return P(p[e],n)}),e.forEach(function(e){return A(p[e],n)})}function T(e,t){v.add(e,"focus",function(){var e=Math.floor(t/S.slidesToScroll),n=t?e:t;d.scrollLeft=0,D(n)},!0)}function M(e){void 0===e&&(e={});var n=E({startIndex:f.index.get()},e);s(),u(n),g.emit("reInit")}function s(){var n=S.selectedClass,e=S.draggableClass;f.dragHandler.removeActivationEvents(),f.dragHandler.removeInteractionEvents(),f.animation.stop(),v.removeAll(),f.translate.clear(),f.slideLooper.clear(p),P(d,e),p.forEach(function(e){return P(e,n)}),g.off("select",b),g.off("pointerUp",b),g.off("pointerDown",w),g.off("pointerUp",w)}function l(e){void 0===e&&(e=!1);var n=f[e?"target":"location"].get(),t=S.loop?"removeOffset":"constrain";return f.slidesInView.check(f.limit[t](n))}function z(e){void 0===e&&(e=!1);var n=l(e);return f.snapIndexes.filter(function(e){return-1===n.indexOf(e)})}function D(e){f.scrollBody.useDefaultMass().useDefaultSpeed(),f.scrollTo.index(e,0)}return u(e),{canScrollNext:function(){var e=f.index;return S.loop||e.get()!==e.max},canScrollPrev:function(){var e=f.index;return S.loop||e.get()!==e.min},clickAllowed:function(){return f.dragHandler.clickAllowed()},containerNode:function(){return m},dangerouslyGetEngine:function(){return f},destroy:function(){h&&(s(),h=!1,f={},g.emit("destroy"))},off:c,on:a,previousScrollSnap:function(){return f.indexPrevious.get()},reInit:i,scrollNext:function(){var e=f.index.clone().add(1);f.scrollBody.useDefaultMass().useDefaultSpeed(),f.scrollTo.index(e.get(),-1)},scrollPrev:function(){var e=f.index.clone().add(-1);f.scrollBody.useDefaultMass().useDefaultSpeed(),f.scrollTo.index(e.get(),1)},scrollProgress:function(){var e=f.location.get();return f.scrollProgress.get(e)},scrollSnapList:function(){var e=f.scrollProgress.get;return f.scrollSnaps.map(e)},scrollTo:D,selectedScrollSnap:function(){return f.index.get()},slideNodes:function(){return p},slidesInView:l,slidesNotInView:z}}});