!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.$clamp=t()}(this,function(){return function(l,e){e=e||{};var a,n=window,r={clamp:e.clamp||2,useNativeClamp:void 0===e.useNativeClamp||e.useNativeClamp,splitOnChars:e.splitOnChars||[".","-","–","—"," "],animate:e.animate||!1,truncationChar:e.truncationChar||"…",truncationHTML:e.truncationHTML},t=l.style,i=l.innerHTML,o=void 0!==l.style.webkitLineClamp,u=r.clamp,c=u.indexOf&&(-1<u.indexOf("px")||-1<u.indexOf("em"));function s(e,t){return n.getComputedStyle||(n.getComputedStyle=function(n,e){return this.el=n,this.getPropertyValue=function(e){var t=/(\-([a-z]){1})/g;return"float"==e&&(e="styleFloat"),t.test(e)&&(e=e.replace(t,function(){return arguments[2].toUpperCase()})),n.currentStyle&&n.currentStyle[e]?n.currentStyle[e]:null},this}),n.getComputedStyle(e,null).getPropertyValue(t)}function p(e){var t=e||l.clientHeight,n=h(l);return Math.max(Math.floor(t/n),0)}function h(e){var t=s(e,"line-height");return"normal"==t&&(t=1.2*parseInt(s(e,"font-size"))),parseInt(t)}r.truncationHTML&&((a=document.createElement("span")).innerHTML=r.truncationHTML);var d,f,C,m,g,v=r.splitOnChars.slice(0),y=v[0];function H(e){return e.lastChild.children&&0<e.lastChild.children.length?H(Array.prototype.slice.call(e.children).pop()):e.lastChild&&e.lastChild.nodeValue&&""!==e.lastChild.nodeValue&&e.lastChild.nodeValue!=r.truncationChar?e.lastChild:(e.lastChild.parentNode.removeChild(e.lastChild),H(l))}function x(e,t){e.nodeValue=t+r.truncationChar}return"auto"==u?u=p():c&&(u=p(parseInt(u))),o&&r.useNativeClamp?(t.overflow="hidden",t.textOverflow="ellipsis",t.webkitBoxOrient="vertical",t.display="-webkit-box",t.webkitLineClamp=u,c&&(t.height=r.clamp+"px")):(m=(g=u,h(l)*g))<=l.clientHeight&&(C=function e(t,n){if(n){var i=t.nodeValue.replace(r.truncationChar,"");if(d||(y=0<v.length?v.shift():"",d=i.split(y)),1<d.length?(f=d.pop(),x(t,d.join(y))):d=null,a&&(t.nodeValue=t.nodeValue.replace(r.truncationChar,""),l.innerHTML=t.nodeValue+" "+a.innerHTML+r.truncationChar),d){if(l.clientHeight<=n){if(!(0<=v.length&&""!==y))return l.innerHTML;x(t,d.join(y)+y+f),d=null}}else""===y&&(x(t,""),t=H(l),v=r.splitOnChars.slice(0),y=v[0],f=d=null);if(!r.animate)return e(t,n);setTimeout(function(){e(t,n)},!0===r.animate?10:r.animate)}}(H(l),m)),{original:i,clamped:C}}});