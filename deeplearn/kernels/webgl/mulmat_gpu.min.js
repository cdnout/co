"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var MatMulProgram=function(t,n,e,r){void 0===e&&(e=!1),void 0===r&&(r=!1),this.variableNames=["matrixA","matrixB"];var i=e?t[1]:t[0],a=r?n[0]:n[1],o=e?t[0]:t[1];function M(t,n){return e?n+" + "+t+", aRow":"aRow, "+n+" + "+t}function u(t,n){return r?"bCol, "+n+" + "+t:n+" + "+t+", bCol"}this.outputShape=[i,a];var x=4*Math.floor(o/4),g=o%4;this.userCode=" float dotARowBCol(int aRow, int bCol) {\n      float result = 0.0;\n      for (int i = 0; i < "+x+"; i += 4) {\n        vec4 a = vec4(\n          getMatrixA("+M(0,"i")+"),\n          getMatrixA("+M(1,"i")+"),\n          getMatrixA("+M(2,"i")+"),\n          getMatrixA("+M(3,"i")+")\n        );\n        vec4 b = vec4(\n          getMatrixB("+u(0,"i")+"),\n          getMatrixB("+u(1,"i")+"),\n          getMatrixB("+u(2,"i")+"),\n          getMatrixB("+u(3,"i")+")\n        );\n\n        result += dot(a, b);\n      }\n\n      if ("+(1==g)+") {\n        result += getMatrixA("+M(0,x)+") *\n          getMatrixB("+u(0,x)+");\n      } else if ("+(2==g)+") {\n        vec2 a = vec2(\n          getMatrixA("+M(0,x)+"),\n          getMatrixA("+M(1,x)+")\n        );\n        vec2 b = vec2(\n          getMatrixB("+u(0,x)+"),\n          getMatrixB("+u(1,x)+")\n        );\n        result += dot(a, b);\n      } else if ("+(3==g)+") {\n        vec3 a = vec3(\n          getMatrixA("+M(0,x)+"),\n          getMatrixA("+M(1,x)+"),\n          getMatrixA("+M(2,x)+")\n        );\n        vec3 b = vec3(\n          getMatrixB("+u(0,x)+"),\n          getMatrixB("+u(1,x)+"),\n          getMatrixB("+u(2,x)+")\n        );\n        result += dot(a, b);\n      }\n\n      return result;\n    }\n\n    void main() {\n      ivec2 resRC = getOutputCoords();\n      setOutput(dotARowBCol(resRC.x, resRC.y));\n    }\n    "};exports.MatMulProgram=MatMulProgram;