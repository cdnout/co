"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var LRNProgram=function(n,t,o,i,r,d){this.variableNames=["x"],this.outputShape=[];var s=t,a=n[1]-1,e=n[2]-1,u=n[3]-1;this.outputShape=n;var c="float("+o+") + float("+i+") * sum",l=.5===r?"inversesqrt("+c+")":1===r?"1.0/("+c+")":"exp(log("+c+") * float(-"+r+"));";this.userCode="withinChannel"===d?"\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int b = coords[0];\n          int r = coords[1];\n          int c = coords[2];\n          int d = coords[3];\n          float x = getX(b, r, c, d);\n          float sum = 0.0;\n          for (int u = -"+s+"; u <= "+s+"; u++) {\n            for (int v = -"+s+"; v <= "+s+"; v++) {\n              int idx = r + u;\n              int idy = c + v;\n              if (idx >= 0 && idx <= "+a+" && idy >= 0 && idy <= "+e+") {\n                float z = getX(b, idx, idy, d);\n                sum += z * z;\n              }\n            }\n          }\n          float val = x * "+l+";\n          setOutput(val);\n        }\n      ":"\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int b = coords[0];\n          int r = coords[1];\n          int c = coords[2];\n          int d = coords[3];\n          float x = getX(b, r, c, d);\n          float sum = 0.0;\n          for (int j = -"+s+"; j <= "+s+"; j++) {\n            int idx = d + j;\n            if (idx >= 0 && idx <=  "+u+") {\n              float z = getX(b, r, c, idx);\n              sum += z * z;\n            }\n          }\n          float val = x * "+l+";\n          setOutput(val);\n        }\n      "};exports.LRNProgram=LRNProgram;