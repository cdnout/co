"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var shader_compiler_1=require("./shader_compiler"),GatherProgram=function(r,e,t){this.variableNames=["A","indices"];var s=r.slice();s[t]=e,this.outputShape=s,this.rank=s.length;var o=shader_compiler_1.getCoordsDataType(this.rank),i=getSourceCoords(r,t);this.userCode="\n      void main() {\n        "+o+" resRC = getOutputCoords();\n        setOutput(getA("+i+"));\n      }\n    "};function getSourceCoords(r,e){var t=r.length;if(4<t)throw Error("Gather for rank "+t+" is not yet supported");if(1===t)return"int(getIndices(resRC))";for(var s=["resRC.x","resRC.y","resRC.z","resRC.w"],o=[],i=0;i<r.length;i++)i===e?o.push("int(getIndices("+s[i]+"))"):o.push(""+s[i]);return o.join()}exports.GatherProgram=GatherProgram;