"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var shader_compiler_1=require("./shader_compiler"),SliceProgram=function(){function r(r){this.variableNames=["source"],this.outputShape=r,this.rank=r.length;var o=shader_compiler_1.getCoordsDataType(this.rank),t=getCoords(this.rank);this.userCode="\n      uniform "+o+" start;\n\n      void main() {\n        "+o+" sourceLoc = start + getOutputCoords();\n        setOutput(getSource("+t+"));\n      }\n    "}return r.prototype.getCustomSetupFunc=function(t){var e=this;if(t.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+t.length+")");return function(r,o){if(null!=e.startLoc||(e.startLoc=r.getUniformLocationNoThrow(o,"start"),null!=e.startLoc))if(1===e.rank)r.gl.uniform1i(e.startLoc,t[0]);else if(2===e.rank)r.gl.uniform2i(e.startLoc,t[0],t[1]);else if(3===e.rank)r.gl.uniform3i(e.startLoc,t[0],t[1],t[2]);else{if(4!==e.rank)throw Error("Slicing for rank "+e.rank+" is not yet supported");r.gl.uniform4i(e.startLoc,t[0],t[1],t[2],t[3])}}},r}();function getCoords(r){if(1===r)return"sourceLoc";if(2===r)return"sourceLoc.x, sourceLoc.y";if(3===r)return"sourceLoc.x, sourceLoc.y, sourceLoc.z";if(4===r)return"sourceLoc.x, sourceLoc.y, sourceLoc.z, sourceLoc.w";throw Error("Slicing for rank "+r+" is not yet supported")}exports.SliceProgram=SliceProgram;