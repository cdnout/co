"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var shader_compiler_1=require("./shader_compiler"),TileProgram=function(r,e){this.variableNames=["A"];for(var t=new Array(r.length),o=0;o<t.length;o++)t[o]=r[o]*e[o];this.outputShape=t,this.rank=t.length;var s=shader_compiler_1.getCoordsDataType(this.rank),i=getSourceCoords(r);this.userCode="\n      void main() {\n        "+s+" resRC = getOutputCoords();\n        setOutput(getA("+i+"));\n      }\n    "};function getSourceCoords(r){var e=r.length;if(4<e)throw Error("Tile for rank "+e+" is not yet supported");if(1===e)return"imod(resRC, "+r[0]+")";for(var t=["resRC.x","resRC.y","resRC.z","resRC.w"],o=[],s=0;s<r.length;s++)o.push("imod("+t[s]+", "+r[s]+")");return o.join()}exports.TileProgram=TileProgram;