"use strict";var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();Object.defineProperty(exports,"__esModule",{value:!0});var TensorArrayMapBase=function(){function t(){this.dict={}}return t.prototype.get=function(t,r){if(void 0===r&&(r=!1),!r&&void 0===this.dict[t.id])throw new Error("tensor "+t.id+" not in array map.");var i=this.dict[t.id];if(!r&&null===i)throw new Error("tensor "+t.id+" has null array.");return i},t.prototype.delete=function(t){delete this.dict[t.id]},t.prototype.nullify=function(t){this.dict[t.id]=null},t.prototype.disposeArray=function(t){var r;void 0===this.dict[t.id]||null!==(r=this.dict[t.id])&&(r.dispose(),this.dict[t.id]=null)},t.prototype.size=function(){return Object.keys(this.dict).length},t.prototype.dispose=function(){var i=this;Object.keys(this.dict).forEach(function(t){var r=i.dict[+t];r&&r.dispose()}),this.dict={}},t.prototype.hasNullArray=function(t){if(void 0===this.dict[t.id])throw new Error("tensor "+t.id+" not in array map.");return null===this.dict[t.id]},t}(),TensorArrayMap=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return __extends(r,t),r.prototype.set=function(t,r){this.dict[t.id]=r},r}(exports.TensorArrayMapBase=TensorArrayMapBase);exports.TensorArrayMap=TensorArrayMap;var SummedTensorArrayMap=function(i){function t(t){var r=i.call(this)||this;return r.math=t,r}return __extends(t,i),t.prototype.add=function(t,r){var i,e;null==this.dict[t.id]?this.dict[t.id]=this.math.keep(r):(i=this.get(t),e=this.math.keep(this.math.addStrict(i,r)),this.dict[t.id]=e,i.dispose())},t}(TensorArrayMapBase);exports.SummedTensorArrayMap=SummedTensorArrayMap;