"use strict";var __extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t])};return function(e,r){function t(){this.constructor=e}o(e,r),e.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t)}}();Object.defineProperty(exports,"__esModule",{value:!0});var globals_1=require("../../globals"),graph_util=require("../graph_util"),op_1=require("./op"),LinearCombination=function(a){function e(e,r,t,o,s){var n=a.call(this)||this;return n.x1Tensor=e,n.x2Tensor=r,n.c1Tensor=t,n.c2Tensor=o,n.outTensor=s,n}return __extends(e,a),e.prototype.feedForward=function(e,r){var t=this,o=r.get(this.x1Tensor),s=r.get(this.x2Tensor),n=r.get(this.c1Tensor).asScalar(),a=r.get(this.c2Tensor).asScalar();globals_1.tidy(function(){r.set(t.outTensor,globals_1.keep(e.scaledArrayAdd(n,o,a,s)))})},e.prototype.backProp=function(t,e,o){var s=this,n=e.get(this.x1Tensor),a=e.get(this.x2Tensor),i=e.get(this.c1Tensor),c=e.get(this.c2Tensor),u=o.get(this.outTensor);globals_1.tidy(function(){var e,r;graph_util.shouldBackProp(s.x1Tensor)&&o.add(s.x1Tensor,t.scalarTimesArray(i,u)),graph_util.shouldBackProp(s.x2Tensor)&&o.add(s.x2Tensor,t.scalarTimesArray(c,u)),graph_util.shouldBackProp(s.c1Tensor)&&(e=t.elementWiseMul(n,u),o.add(s.c1Tensor,t.sum(e))),graph_util.shouldBackProp(s.c2Tensor)&&(r=t.elementWiseMul(a,u),o.add(s.c2Tensor,t.sum(r)))})},e}(op_1.Operation);exports.LinearCombination=LinearCombination;