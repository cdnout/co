"use strict";var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)o.hasOwnProperty(e)&&(t[e]=o[e])};return function(t,o){function e(){this.constructor=t}n(t,o),t.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)}}();Object.defineProperty(exports,"__esModule",{value:!0});var globals_1=require("../../globals"),concat_util=require("../../ops/concat_util"),util=require("../../util"),op_1=require("./op"),Concat1D=function(r){function t(t,o,e){var n=r.call(this)||this;return n.x1Tensor=t,n.x2Tensor=o,n.yTensor=e,n}return __extends(t,r),t.prototype.feedForward=function(o,e){var n=this,r=e.get(this.x1Tensor),s=e.get(this.x2Tensor);globals_1.tidy(function(){var t=o.concat1D(r,s);e.set(n.yTensor,globals_1.keep(t))})},t.prototype.backProp=function(t,o,e){var n=this;globals_1.tidy(function(){concatBackProp(t,n.x1Tensor,n.x2Tensor,n.yTensor,0,e,o)})},t}(op_1.Operation);exports.Concat1D=Concat1D;var Concat2D=function(s){function t(t,o,e,n){var r=s.call(this)||this;return r.x1Tensor=t,r.x2Tensor=o,r.axis=e,r.yTensor=n,concat_util.assertParams(t.shape,o.shape,e),r}return __extends(t,s),t.prototype.feedForward=function(o,e){var n=this,r=e.get(this.x1Tensor),s=e.get(this.x2Tensor);globals_1.tidy(function(){var t=o.concat2D(r,s,n.axis);e.set(n.yTensor,globals_1.keep(t))})},t.prototype.backProp=function(t,o,e){var n=this;globals_1.tidy(function(){concatBackProp(t,n.x1Tensor,n.x2Tensor,n.yTensor,n.axis,e,o)})},t}(op_1.Operation);exports.Concat2D=Concat2D;var Concat3D=function(s){function t(t,o,e,n){var r=s.call(this)||this;return r.x1Tensor=t,r.x2Tensor=o,r.axis=e,r.yTensor=n,concat_util.assertParams(t.shape,o.shape,e),r}return __extends(t,s),t.prototype.feedForward=function(o,e){var n=this,r=e.get(this.x1Tensor),s=e.get(this.x2Tensor);globals_1.tidy(function(){var t=o.concat3D(r,s,n.axis);e.set(n.yTensor,globals_1.keep(t))})},t.prototype.backProp=function(t,o,e){var n=this;globals_1.tidy(function(){concatBackProp(t,n.x1Tensor,n.x2Tensor,n.yTensor,n.axis,e,o)})},t}(op_1.Operation);exports.Concat3D=Concat3D;var Concat4D=function(s){function t(t,o,e,n){var r=s.call(this)||this;return r.x1Tensor=t,r.x2Tensor=o,r.axis=e,r.yTensor=n,concat_util.assertParams(t.shape,o.shape,e),r}return __extends(t,s),t.prototype.feedForward=function(o,e){var n=this,r=e.get(this.x1Tensor),s=e.get(this.x2Tensor);globals_1.tidy(function(){var t=o.concat4D(r,s,n.axis);e.set(n.yTensor,globals_1.keep(t))})},t.prototype.backProp=function(t,o,e){var n=this;globals_1.tidy(function(){concatBackProp(t,n.x1Tensor,n.x2Tensor,n.yTensor,n.axis,e,o)})},t}(op_1.Operation);function concatBackProp(t,o,e,n,r,s,a){var i=s.get(n),c=a.get(o),p=a.get(e),u=c.as2D(-1,util.sizeFromShape(c.shape.slice(r))),l=p.as2D(-1,util.sizeFromShape(p.shape.slice(r))),_=concat_util.computeGradientSliceShapes(u.shape,l.shape),h=_.aBegin,x=_.aSize,f=_.bBegin,T=_.bSize,y=i.as2D(-1,u.shape[1]+l.shape[1]),d=t.slice2D(y,h,x).reshapeAs(c),g=t.slice2D(y,f,T).reshapeAs(p);s.add(o,d),s.add(e,g)}exports.Concat4D=Concat4D;