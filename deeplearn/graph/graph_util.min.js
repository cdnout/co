"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var graph_1=require("./graph"),priority_queue=require("./priority_queue"),priority_queue_1=require("./priority_queue");function getUnorderedEvaluationSet(e,t){var r={},n={},u=[],o=e.slice();t.forEach(function(e){return r[e.id]=e});for(var i=function(){var t=o.pop();null==n[t.id]&&(null==r[t.id]&&Object.keys(t.inputs).map(function(e){return t.inputs[e]}).forEach(function(e){return o.push(e.node)}),u.push(t),n[t.id]=t)};0!==o.length;)i();return u}function getOrderedEvaluationSet(r){var t=[],n={},u={},o=new priority_queue_1.PriorityQueue(function(e,t){return priority_queue.defaultCompare(u[e.id],u[t.id])},function(e,t){return n[e.id]=t});for(r.forEach(function(e){return u[e.id]=0}),r.forEach(function(t){return Object.keys(t.inputs).map(function(e){return t.inputs[e]}).forEach(function(e){-1!==r.indexOf(e.node)&&u[e.node.id]++})}),r.forEach(function(e){return o.enqueue(e)});!o.empty();)t.unshift(o.dequeue()),Object.keys(t[0].inputs).map(function(e){return t[0].inputs[e]}).forEach(function(e){-1!==r.indexOf(e.node)&&(u[e.node.id]--,o.update(e.node,n[e.node.id]))});return t}function isInputNode(e){return 0===Object.keys(e.inputs).length}function shouldBackProp(e){return!(e.node instanceof graph_1.ConstantNode)}function isPassthroughNode(e,t){for(var r=Object.keys(e.inputs),n=0;n<r.length;n++){var u=e.inputs[r[n]];if(t.get(u,!0)===t.get(e.output,!0))return!0}return!1}exports.getUnorderedEvaluationSet=getUnorderedEvaluationSet,exports.getOrderedEvaluationSet=getOrderedEvaluationSet,exports.isInputNode=isInputNode,exports.shouldBackProp=shouldBackProp,exports.isPassthroughNode=isPassthroughNode;