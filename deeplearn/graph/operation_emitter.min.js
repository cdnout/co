"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var graph_1=require("./graph"),graph_util=require("./graph_util"),add_1=require("./ops/add"),argmax_1=require("./ops/argmax"),argmaxequals_1=require("./ops/argmaxequals"),concat_1=require("./ops/concat"),convolution_1=require("./ops/convolution"),divide_1=require("./ops/divide"),element_wise_activation_1=require("./ops/element_wise_activation"),element_wise_cost_1=require("./ops/element_wise_cost"),exp_1=require("./ops/exp"),linear_combination_1=require("./ops/linear_combination"),log_1=require("./ops/log"),matmul_1=require("./ops/matmul"),max_pool_1=require("./ops/max_pool"),multiply_1=require("./ops/multiply"),reduce_sum_1=require("./ops/reduce_sum"),reshape_1=require("./ops/reshape"),softmax_1=require("./ops/softmax"),subtract_1=require("./ops/subtract");function emitFromGraphNodes(e){var t=[];return e.forEach(function(e){return Array.prototype.push.apply(t,emitOpFromNode(e))}),t}function emitOpFromNode(e){if(e instanceof graph_1.ReshapeNode)return[new reshape_1.Reshape(e.inputs[graph_1.ReshapeNode.X],e.output)];if(e instanceof graph_1.MatMulNode){var t=e.inputs[graph_1.MatMulNode.X1],o=e.inputs[graph_1.MatMulNode.X2];return[new matmul_1.MatMul(t,o,e.output)]}if(e instanceof graph_1.Convolution2DNode){var n=e.inputs[graph_1.Convolution2DNode.W],a=e.inputs[graph_1.Convolution2DNode.X],r=e.inputs[graph_1.Convolution2DNode.B];return[new convolution_1.Convolution2D(n,a,r,e.output,e.fieldSize,e.outputDepth,e.stride,e.zeroPad)]}if(e instanceof graph_1.MaxPoolNode){a=e.inputs[graph_1.MaxPoolNode.X];return[new max_pool_1.MaxPool(a,e.output,e.fieldSize,e.stride,e.zeroPad)]}if(e instanceof graph_1.ExpNode)return[new exp_1.Exp(e.inputs[graph_1.ExpNode.X],e.output)];if(e instanceof graph_1.LogNode)return[new log_1.Log(e.inputs[graph_1.LogNode.X],e.output)];if(e instanceof graph_1.ReLUNode)return[new element_wise_activation_1.ReLU(e.inputs[graph_1.ReLUNode.X],e.output)];if(e instanceof graph_1.LeakyReLUNode)return[new element_wise_activation_1.LeakyReLU(e.inputs[graph_1.LeakyReLUNode.X],e.output,e.alpha)];if(e instanceof graph_1.PReLUNode)return[new element_wise_activation_1.PReLU(e.inputs[graph_1.PReLUNode.X],e.inputs[graph_1.PReLUNode.ALPHA],e.output)];if(e instanceof graph_1.EluNode)return[new element_wise_activation_1.Elu(e.inputs[graph_1.EluNode.X],e.output)];if(e instanceof graph_1.TanHNode)return[new element_wise_activation_1.TanH(e.inputs[graph_1.TanHNode.X],e.output)];if(e instanceof graph_1.SigmoidNode)return[new element_wise_activation_1.Sigmoid(e.inputs[graph_1.SigmoidNode.X],e.output)];if(e instanceof graph_1.SoftmaxCrossEntropyCostNode){var a=e.inputs[graph_1.SoftmaxCrossEntropyCostNode.X],i=e.inputs[graph_1.SoftmaxCrossEntropyCostNode.TARGET];return[new softmax_1.SoftmaxCrossEntropyCost(a,i,e.output)]}if(e instanceof graph_1.SoftmaxNode)return[new softmax_1.Softmax(e.inputs[graph_1.SoftmaxNode.X],e.output)];if(e instanceof graph_1.MeanSquaredCostNode){var u=e.inputs[graph_1.MeanSquaredCostNode.LABEL],p=e.inputs[graph_1.MeanSquaredCostNode.PREDICTION];return[new element_wise_cost_1.MeanSquaredCost(u,p,e.output)]}if(e instanceof graph_1.ArgMaxEqualsNode)return[new argmaxequals_1.ArgMaxEquals(e.inputs[graph_1.ArgMaxEqualsNode.X1],e.inputs[graph_1.ArgMaxEqualsNode.X2],e.output)];if(e instanceof graph_1.ArgMaxNode)return[new argmax_1.ArgMax(e.x,e.output)];if(e instanceof graph_1.FusedLinearCombinationNode)return[new linear_combination_1.LinearCombination(e.inputs[graph_1.FusedLinearCombinationNode.T1],e.inputs[graph_1.FusedLinearCombinationNode.T2],e.inputs[graph_1.FusedLinearCombinationNode.C1],e.inputs[graph_1.FusedLinearCombinationNode.C2],e.output)];if(e instanceof graph_1.Concat1DNode)return[new concat_1.Concat1D(e.inputs[graph_1.Concat1DNode.X1],e.inputs[graph_1.Concat1DNode.X2],e.output)];if(e instanceof graph_1.Concat2DNode)return[new concat_1.Concat2D(e.inputs[graph_1.Concat2DNode.X1],e.inputs[graph_1.Concat2DNode.X2],e.axis,e.output)];if(e instanceof graph_1.Concat3DNode)return[new concat_1.Concat3D(e.inputs[graph_1.Concat3DNode.X1],e.inputs[graph_1.Concat3DNode.X2],e.axis,e.output)];if(e instanceof graph_1.Concat4DNode)return[new concat_1.Concat4D(e.inputs[graph_1.Concat4DNode.X1],e.inputs[graph_1.Concat4DNode.X2],e.axis,e.output)];if(e instanceof graph_1.SquareNode)return[new element_wise_activation_1.Square(e.inputs[graph_1.SquareNode.X],e.output)];if(e instanceof graph_1.AddNode)return[new add_1.Add(e.inputs[graph_1.AddNode.T1],e.inputs[graph_1.AddNode.T2],e.output)];if(e instanceof graph_1.SubtractNode)return[new subtract_1.Subtract(e.inputs[graph_1.SubtractNode.T1],e.inputs[graph_1.SubtractNode.T2],e.output)];if(e instanceof graph_1.MultiplyNode)return[new multiply_1.Multiply(e.inputs[graph_1.MultiplyNode.T1],e.inputs[graph_1.MultiplyNode.T2],e.output)];if(e instanceof graph_1.DivideNode)return[new divide_1.Divide(e.inputs[graph_1.DivideNode.T1],e.inputs[graph_1.DivideNode.T2],e.output)];if(e instanceof graph_1.ReduceSumNode)return[new reduce_sum_1.ReduceSum(e.inputs[graph_1.ReduceSumNode.X],e.output)];if(graph_util.isInputNode(e))return[];throw Error("Unsupported node type: "+e.constructor.name)}exports.emitFromGraphNodes=emitFromGraphNodes;