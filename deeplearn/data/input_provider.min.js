"use strict";var __extends=this&&this.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(exports,"__esModule",{value:!0});var util=require("../util"),InMemoryShuffledInputProviderBuilder=function(){function t(t){this.inputs=t,this.idx=0,this.inputCounter=0,this.epoch=0,this.shuffledIndices=util.createShuffledIndices(t[0].length),this.numInputs=t.length;for(var e=this.inputs[0].length,n=0;n<this.numInputs;n++)util.assert(this.inputs[n].length===e,"Number of examples must match across different inputs.");for(n=0;n<this.numInputs;n++)for(var r=this.inputs[n][0].shape,u=0;u<this.inputs[n].length;u++)util.assertShapesMatch(r,this.inputs[n][u].shape)}return t.prototype.getCurrentExampleIndex=function(){var t=this.idx;return this.inputCounter++,this.inputCounter>=this.numInputs&&(this.idx++,this.inputCounter=0,this.idx>=this.inputs[0].length&&(this.idx=0,this.epoch++)),t},t.prototype.getNextInput=function(t){var e=this.getCurrentExampleIndex();return this.inputs[t][this.shuffledIndices[e]]},t.prototype.getEpoch=function(){return this.epoch},t.prototype.getInputProviders=function(){for(var t=[],e=0;e<this.numInputs;e++)t.push(this.getInputProvider(e));return t},t}(),InCPUMemoryShuffledInputProviderBuilder=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.getInputProvider=function(t){var e=this;return{getNextCopy:function(){return e.getNextInput(t).clone()},disposeCopy:function(t){t.dispose()}}},e}(exports.InMemoryShuffledInputProviderBuilder=InMemoryShuffledInputProviderBuilder);exports.InCPUMemoryShuffledInputProviderBuilder=InCPUMemoryShuffledInputProviderBuilder;var InGPUMemoryShuffledInputProviderBuilder=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.getInputProvider=function(t){var e=this;return{getNextCopy:function(){return e.getNextInput(t).clone()},disposeCopy:function(t){t.dispose()}}},e}(InMemoryShuffledInputProviderBuilder);exports.InGPUMemoryShuffledInputProviderBuilder=InGPUMemoryShuffledInputProviderBuilder;