"use strict";var __decorate=this&&this.__decorate||function(e,n,t,r){var i,o=arguments.length,c=o<3?n:null===r?r=Object.getOwnPropertyDescriptor(n,t):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,n,t,r);else for(var u=e.length-1;0<=u;u--)(i=e[u])&&(c=(o<3?i(c):3<o?i(n,t,c):i(n,t))||c);return 3<o&&c&&Object.defineProperty(n,t,c),c};Object.defineProperty(exports,"__esModule",{value:!0});var doc_1=require("./doc"),environment_1=require("./environment"),util_1=require("./util"),Tracking=function(){function e(){}return e.tidy=function(e,n,t){void 0===t&&(t=!1);var r=null;if(null==n){if("function"!=typeof e)throw new Error("Please provide a function to dl.tidy()");n=e}else{if("string"!=typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to dl.tidy() must be a string");if("function"!=typeof n)throw new Error("When calling with two arguments, the 2nd argument to dl.tidy() must be a function");r=e}environment_1.ENV.engine.startScope(r,t);var i=n();return i instanceof Promise&&console.warn("Returning a promise inside of tidy is dangerous. This will be a run-time error in 0.6.0"),environment_1.ENV.engine.endScope(i,t),i},e.dispose=function(e){util_1.extractTensorsFromAny(e).forEach(function(e){return e.dispose()})},e.keep=function(e){return environment_1.ENV.engine.keep(e)},e.time=function(e){return environment_1.ENV.engine.time(e)},__decorate([doc_1.doc({heading:"Performance",subheading:"Memory"})],e,"tidy",null),__decorate([doc_1.doc({heading:"Performance",subheading:"Memory"})],e,"keep",null),__decorate([doc_1.doc({heading:"Performance",subheading:"Timing"})],e,"time",null),e}();exports.Tracking=Tracking;