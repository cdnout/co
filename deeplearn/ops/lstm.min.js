"use strict";var __decorate=this&&this.__decorate||function(e,t,r,o){var i,n=arguments.length,c=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,r,o);else for(var a=e.length-1;0<=a;a--)(i=e[a])&&(c=(n<3?i(c):3<n?i(t,r,c):i(t,r))||c);return 3<n&&c&&Object.defineProperty(t,r,c),c};Object.defineProperty(exports,"__esModule",{value:!0});var doc_1=require("../doc"),operation_1=require("./operation"),LSTMOps=function(){function e(){}return e.multiRNNCell=function(e,t,r,o){for(var i=t,n=[],c=0;c<e.length;c++){var a=e[c](i,r[c],o[c]);n.push(a[0]),n.push(a[1]),i=a[1]}for(var l=[],s=[],c=0;c<n.length;c+=2)l.push(n[c]),s.push(n[c+1]);return[l,s]},e.basicLSTMCell=function(e,t,r,o,i,n){var c=o.concat(n,1).matMul(t).add(r),a=c.shape[0],l=c.shape[1]/4,s=[a,l],u=c.slice([0,0],s),d=c.slice([0,l],s),p=c.slice([0,2*l],s),h=c.slice([0,3*l],s),f=u.sigmoid().mulStrict(d.tanh()).addStrict(i.mulStrict(e.add(p).sigmoid())),_=f.tanh().mulStrict(h.sigmoid());return[f,_]},__decorate([doc_1.doc({heading:"Operations",subheading:"RNN"}),operation_1.operation],e,"multiRNNCell",null),__decorate([doc_1.doc({heading:"Operations",subheading:"RNN"}),operation_1.operation],e,"basicLSTMCell",null),e}();exports.LSTMOps=LSTMOps;