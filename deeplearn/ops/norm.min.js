"use strict";var __decorate=this&&this.__decorate||function(r,e,n,o){var i,t=arguments.length,a=t<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(r,e,n,o);else for(var s=r.length-1;0<=s;s--)(i=r[s])&&(a=(t<3?i(a):3<t?i(e,n,a):i(e,n))||a);return 3<t&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(exports,"__esModule",{value:!0});var doc_1=require("../doc"),axis_util=require("./axis_util"),operation_1=require("./operation"),ops=require("./ops"),NormOps=function(){function r(){}return r.norm=function(r,e,n,o){void 0===e&&(e="euclidean"),void 0===n&&(n=null),void 0===o&&(o=!1);var i,t=normImpl(r,e,n),a=t.shape;return o&&(i=axis_util.parseAxisParam(n,r.shape),a=axis_util.expandShapeToKeepDim(t.shape,i)),t.reshape(a)},__decorate([doc_1.doc({heading:"Operations",subheading:"Matrices"}),operation_1.operation],r,"norm",null),r}();function normImpl(r,e,n){if(void 0===n&&(n=null),0===r.rank)return r.abs();if(1!==r.rank&&null===n)return normImpl(r.reshape([-1]),e,n);if(1===r.rank||"number"==typeof n||n instanceof Array&&1===n.length){if(1===e)return r.abs().sum(n);if(e===1/0)return r.abs().max(n);if(e===-1/0)return r.abs().min(n);if("euclidean"===e||2===e)return r.abs().pow(ops.scalar(2,"int32")).sum(n).sqrt();throw new Error("Error in norm: invalid ord value: "+e)}if(n instanceof Array&&2===n.length){if(1===e)return r.abs().sum(n[0]).max(n[1]-1);if(e===1/0)return r.abs().sum(n[1]).max(n[0]);if(e===-1/0)return r.abs().sum(n[1]).min(n[0]);if("fro"===e||"euclidean"===e)return r.square().sum(n).sqrt();throw new Error("Error in norm: invalid ord value: "+e)}throw new Error("Error in norm: invalid axis: "+n)}exports.NormOps=NormOps;