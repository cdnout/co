"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var test_util_1=require("../test_util"),tensor_1=require("../tensor");function jarqueBeraNormalityTest(e){var t=e instanceof tensor_1.Tensor?e.dataSync():e,r=t.length,a=skewness(t),n=kurtosis(t),o=r/6*(Math.pow(a,2)+.25*Math.pow(n-3,2));if(5.991<o)throw new Error("Invalid p-value for JB: "+o)}function expectArrayInMeanStdRange(e,t,r,a){var n;void 0===a&&(a=test_util_1.TEST_EPSILON);var o=mean(n=e instanceof tensor_1.Tensor?e.dataSync():e);test_util_1.expectNumbersClose(o,t,a),test_util_1.expectNumbersClose(standardDeviation(n,o),r,a)}function mean(e){for(var t=0,r=0;r<e.length;r++)t+=e[r];return t/e.length}function standardDeviation(e,t){for(var r=0,a=0;a<e.length;a++){var n=e[a]-t;r+=n*n}return Math.sqrt(r/e.length)}function kurtosis(e){for(var t=mean(e),r=e.length,a=0,n=0,o=0;o<r;o++){var s=e[o]-t;a+=Math.pow(s,2),n+=Math.pow(s,4)}return 1/r*n/Math.pow(1/r*a,2)}function skewness(e){for(var t=mean(e),r=e.length,a=0,n=0,o=0;o<r;o++){var s=e[o]-t;a+=Math.pow(s,2),n+=Math.pow(s,3)}return 1/r*n/Math.pow(1/(r-1)*a,1.5)}exports.jarqueBeraNormalityTest=jarqueBeraNormalityTest,exports.expectArrayInMeanStdRange=expectArrayInMeanStdRange;