var clone=require("clone"),parserlib=require("parserlib"),CSSLint=function(){"use strict";var g=[],t=[],b=/\/\*\s*csslint([^\*]*)\*\//,e=new parserlib.util.EventTarget;return e.version="1.0.4",e.addRule=function(e){g.push(e),g[e.id]=e},e.clearRules=function(){g=[]},e.getRules=function(){return[].concat(g).sort(function(e,t){return e.id>t.id?1:0})},e.getRuleset=function(){for(var e={},t=0,r=g.length;t<r;)e[g[t++].id]=1;return e},e.addFormatter=function(e){t[e.id]=e},e.getFormatter=function(e){return t[e]},e.format=function(e,t,r,i){var n=this.getFormatter(r),s=null;return n&&(s=n.startFormat(),s+=n.formatResults(e,t,i||{}),s+=n.endFormat()),s},e.hasFormat=function(e){return t.hasOwnProperty(e)},e.verify=function(e,t){var r,i,n=0,s={},o=[],a=new parserlib.css.Parser({starHack:!0,ieFilters:!0,underscoreHack:!0,strict:!1}),l=e.replace(/\n\r?/g,"$split$").split("$split$");CSSLint.Util.forEach(l,function(e,t){var r=e&&e.match(/\/\*[ \t]*csslint[ \t]+allow:[ \t]*([^\*]*)\*\//i),i=r&&r[1],n={};i&&(i.toLowerCase().split(",").forEach(function(e){n[e.trim()]=!0}),0<Object.keys(n).length&&(s[t+1]=n))});var d,u,c,p,f,m=null,h=null;for(n in CSSLint.Util.forEach(l,function(e,t){null===m&&e.match(/\/\*[ \t]*csslint[ \t]+ignore:start[ \t]*\*\//i)&&(m=t),e.match(/\/\*[ \t]*csslint[ \t]+ignore:end[ \t]*\*\//i)&&(h=t),null!==m&&null!==h&&(o.push([m,h]),m=h=null)}),null!==m&&o.push([m,l.length]),t=t||this.getRuleset(),b.test(e)&&(t=clone(t),u=t,p=(d=e)&&d.match(b),(f=p&&p[1])&&(c={true:2,"":1,false:0,2:2,1:1,0:0},f.toLowerCase().split(",").forEach(function(e){var t=e.split(":"),r=t[0]||"",i=t[1]||"";u[r.trim()]=c[i.trim()]})),t=u),r=new Reporter(l,t,s,o),t.errors=2,t)t.hasOwnProperty(n)&&t[n]&&g[n]&&g[n].init(a,r);try{a.parse(e)}catch(e){r.error("Fatal error, cannot continue: "+e.message,e.line,e.col,{})}return(i={messages:r.messages,stats:r.stats,ruleset:r.ruleset,allow:r.allow,ignore:r.ignore}).messages.sort(function(e,t){return e.rollup&&!t.rollup?1:!e.rollup&&t.rollup?-1:e.line-t.line}),i},e}();function Reporter(e,t,r,i){"use strict";this.messages=[],this.stats=[],this.lines=e,this.ruleset=t,this.allow=r,this.allow||(this.allow={}),this.ignore=i,this.ignore||(this.ignore=[])}Reporter.prototype={constructor:Reporter,error:function(e,t,r,i){"use strict";this.messages.push({type:"error",line:t,col:r,message:e,evidence:this.lines[t-1],rule:i||{}})},warn:function(e,t,r,i){"use strict";this.report(e,t,r,i)},report:function(e,t,r,i){"use strict";var n;this.allow.hasOwnProperty(t)&&this.allow[t].hasOwnProperty(i.id)||(n=!1,CSSLint.Util.forEach(this.ignore,function(e){e[0]<=t&&t<=e[1]&&(n=!0)}),n||this.messages.push({type:2===this.ruleset[i.id]?"error":"warning",line:t,col:r,message:e,evidence:this.lines[t-1],rule:i}))},info:function(e,t,r,i){"use strict";this.messages.push({type:"info",line:t,col:r,message:e,evidence:this.lines[t-1],rule:i})},rollupError:function(e,t){"use strict";this.messages.push({type:"error",rollup:!0,message:e,rule:t})},rollupWarn:function(e,t){"use strict";this.messages.push({type:"warning",rollup:!0,message:e,rule:t})},stat:function(e,t){"use strict";this.stats[e]=t}},CSSLint._Reporter=Reporter,CSSLint.Util={mix:function(e,t){"use strict";var r;for(r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return r},indexOf:function(e,t){"use strict";if(e.indexOf)return e.indexOf(t);for(var r=0,i=e.length;r<i;r++)if(e[r]===t)return r;return-1},forEach:function(e,t){"use strict";if(e.forEach)return e.forEach(t);for(var r=0,i=e.length;r<i;r++)t(e[r],r,e)}},CSSLint.addRule({id:"adjoining-classes",name:"Disallow adjoining classes",desc:"Don't use adjoining classes.",url:"https://github.com/CSSLint/csslint/wiki/Disallow-adjoining-classes",browsers:"IE6",init:function(l,d){"use strict";var u=this;l.addListener("startrule",function(e){for(var t,r,i,n,s,o=e.selectors,a=0;a<o.length;a++)for(t=o[a],n=0;n<t.parts.length;n++)if((r=t.parts[n]).type===l.SELECTOR_PART_TYPE)for(s=i=0;s<r.modifiers.length;s++)"class"===r.modifiers[s].type&&i++,1<i&&d.report("Adjoining classes: "+o[a].text,r.line,r.col,u)})}}),CSSLint.addRule({id:"box-model",name:"Beware of broken box size",desc:"Don't use width or height when using padding or border.",url:"https://github.com/CSSLint/csslint/wiki/Beware-of-box-model-size",browsers:"All",init:function(e,r){"use strict";var i,n=this,s={border:1,"border-left":1,"border-right":1,padding:1,"padding-left":1,"padding-right":1},o={border:1,"border-bottom":1,"border-top":1,padding:1,"padding-bottom":1,"padding-top":1},a=!1;function t(){a=!(i={})}function l(){var e,t;if(!a){if(i.height)for(e in o)o.hasOwnProperty(e)&&i[e]&&(t=i[e].value,"padding"===e&&2===t.parts.length&&0===t.parts[0].value||r.report("Using height with "+e+" can sometimes make elements larger than you expect.",i[e].line,i[e].col,n));if(i.width)for(e in s)s.hasOwnProperty(e)&&i[e]&&(t=i[e].value,"padding"===e&&2===t.parts.length&&0===t.parts[1].value||r.report("Using width with "+e+" can sometimes make elements larger than you expect.",i[e].line,i[e].col,n))}}e.addListener("startrule",t),e.addListener("startfontface",t),e.addListener("startpage",t),e.addListener("startpagemargin",t),e.addListener("startkeyframerule",t),e.addListener("startviewport",t),e.addListener("property",function(e){var t=e.property.text.toLowerCase();o[t]||s[t]?/^0\S*$/.test(e.value)||"border"===t&&"none"===e.value.toString()||(i[t]={line:e.property.line,col:e.property.col,value:e.value}):/^(width|height)/i.test(t)&&/^(length|percentage)/.test(e.value.parts[0].type)?i[t]=1:"box-sizing"===t&&(a=!0)}),e.addListener("endrule",l),e.addListener("endfontface",l),e.addListener("endpage",l),e.addListener("endpagemargin",l),e.addListener("endkeyframerule",l),e.addListener("endviewport",l)}}),CSSLint.addRule({id:"box-sizing",name:"Disallow use of box-sizing",desc:"The box-sizing properties isn't supported in IE6 and IE7.",url:"https://github.com/CSSLint/csslint/wiki/Disallow-box-sizing",browsers:"IE6, IE7",tags:["Compatibility"],init:function(e,t){"use strict";var r=this;e.addListener("property",function(e){"box-sizing"===e.property.text.toLowerCase()&&t.report("The box-sizing property isn't supported in IE6 and IE7.",e.line,e.col,r)})}}),CSSLint.addRule({id:"bulletproof-font-face",name:"Use the bulletproof @font-face syntax",desc:"Use the bulletproof @font-face syntax to avoid 404's in old IE (http://www.fontspring.com/blog/the-new-bulletproof-font-face-syntax).",url:"https://github.com/CSSLint/csslint/wiki/Bulletproof-font-face",browsers:"All",init:function(e,t){"use strict";var n,s,r=this,o=!1,a=!0,l=!1;e.addListener("startfontface",function(){o=!0}),e.addListener("property",function(e){var t,r,i;o&&(t=e.property.toString().toLowerCase(),r=e.value.toString(),n=e.line,s=e.col,"src"===t&&(i=/^\s?url\(['"].+\.eot\?.*['"]\)\s*format\(['"]embedded-opentype['"]\).*$/i,!r.match(i)&&a?a=!(l=!0):r.match(i)&&!a&&(l=!1)))}),e.addListener("endfontface",function(){o=!1,l&&t.report("@font-face declaration doesn't follow the fontspring bulletproof syntax.",n,s,r)})}}),CSSLint.addRule({id:"compatible-vendor-prefixes",name:"Require compatible vendor prefixes",desc:"Include all compatible vendor prefixes to reach a wider range of users.",url:"https://github.com/CSSLint/csslint/wiki/Require-compatible-vendor-prefixes",browsers:"All",init:function(e,c){"use strict";var p,t,r,i,n,s,f=this,o=!1,a=Array.prototype.push,l=[],m={animation:"webkit","animation-delay":"webkit","animation-direction":"webkit","animation-duration":"webkit","animation-fill-mode":"webkit","animation-iteration-count":"webkit","animation-name":"webkit","animation-play-state":"webkit","animation-timing-function":"webkit",appearance:"webkit moz","border-end":"webkit moz","border-end-color":"webkit moz","border-end-style":"webkit moz","border-end-width":"webkit moz","border-image":"webkit moz o","border-radius":"webkit","border-start":"webkit moz","border-start-color":"webkit moz","border-start-style":"webkit moz","border-start-width":"webkit moz","box-align":"webkit moz ms","box-direction":"webkit moz ms","box-flex":"webkit moz ms","box-lines":"webkit ms","box-ordinal-group":"webkit moz ms","box-orient":"webkit moz ms","box-pack":"webkit moz ms","box-sizing":"","box-shadow":"","column-count":"webkit moz ms","column-gap":"webkit moz ms","column-rule":"webkit moz ms","column-rule-color":"webkit moz ms","column-rule-style":"webkit moz ms","column-rule-width":"webkit moz ms","column-width":"webkit moz ms",hyphens:"epub moz","line-break":"webkit ms","margin-end":"webkit moz","margin-start":"webkit moz","marquee-speed":"webkit wap","marquee-style":"webkit wap","padding-end":"webkit moz","padding-start":"webkit moz","tab-size":"moz o","text-size-adjust":"webkit ms",transform:"webkit ms","transform-origin":"webkit ms",transition:"","transition-delay":"","transition-duration":"","transition-property":"","transition-timing-function":"","user-modify":"webkit moz","user-select":"webkit moz ms","word-break":"epub ms","writing-mode":"epub ms"};for(t in m)if(m.hasOwnProperty(t)){for(r=[],n=0,s=(i=m[t].split(" ")).length;n<s;n++)r.push("-"+i[n]+"-"+t);m[t]=r,a.apply(l,r)}e.addListener("startrule",function(){p=[]}),e.addListener("startkeyframes",function(e){o=e.prefix||!0}),e.addListener("endkeyframes",function(){o=!1}),e.addListener("property",function(e){var t=e.property;-1<CSSLint.Util.indexOf(l,t.text)&&(o&&"string"==typeof o&&0===t.text.indexOf("-"+o+"-")||p.push(t))}),e.addListener("endrule",function(){if(p.length){for(var e,t,r,i,n,s,o,a,l={},d=0,u=p.length;d<u;d++)for(t in e=p[d],m)m.hasOwnProperty(t)&&(r=m[t],-1<CSSLint.Util.indexOf(r,e.text)&&(l[t]||(l[t]={full:r.slice(0),actual:[],actualNodes:[]}),-1===CSSLint.Util.indexOf(l[t].actual,e.text)&&(l[t].actual.push(e.text),l[t].actualNodes.push(e))));for(t in l)if(l.hasOwnProperty(t)&&(n=(i=l[t]).full,s=i.actual,n.length>s.length))for(d=0,u=n.length;d<u;d++)o=n[d],-1===CSSLint.Util.indexOf(s,o)&&(a=1===s.length?s[0]:2===s.length?s.join(" and "):s.join(", "),c.report("The property "+o+" is compatible with "+a+" and should be included as well.",i.actualNodes[0].line,i.actualNodes[0].col,f))}})}}),CSSLint.addRule({id:"display-property-grouping",name:"Require properties appropriate for display",desc:"Certain properties shouldn't be used with certain display property values.",url:"https://github.com/CSSLint/csslint/wiki/Require-properties-appropriate-for-display",browsers:"All",init:function(e,i){"use strict";var n,s=this,o={display:1,float:"none",height:1,width:1,margin:1,"margin-left":1,"margin-right":1,"margin-bottom":1,"margin-top":1,padding:1,"padding-left":1,"padding-right":1,"padding-bottom":1,"padding-top":1,"vertical-align":1};function t(e,t,r){n[e]&&("string"==typeof o[e]&&n[e].value.toLowerCase()===o[e]||i.report(r||e+" can't be used with display: "+t+".",n[e].line,n[e].col,s))}function r(){n={}}function a(){var e=n.display?n.display.value:null;if(e)switch(e){case"inline":t("height",e),t("width",e),t("margin",e),t("margin-top",e),t("margin-bottom",e),t("float",e,"display:inline has no effect on floated elements (but may be used to fix the IE6 double-margin bug).");break;case"block":t("vertical-align",e);break;case"inline-block":t("float",e);break;default:0===e.indexOf("table-")&&(t("margin",e),t("margin-left",e),t("margin-right",e),t("margin-top",e),t("margin-bottom",e),t("float",e))}}e.addListener("startrule",r),e.addListener("startfontface",r),e.addListener("startkeyframerule",r),e.addListener("startpagemargin",r),e.addListener("startpage",r),e.addListener("startviewport",r),e.addListener("property",function(e){var t=e.property.text.toLowerCase();o[t]&&(n[t]={value:e.value.text,line:e.property.line,col:e.property.col})}),e.addListener("endrule",a),e.addListener("endfontface",a),e.addListener("endkeyframerule",a),e.addListener("endpagemargin",a),e.addListener("endpage",a),e.addListener("endviewport",a)}}),CSSLint.addRule({id:"duplicate-background-images",name:"Disallow duplicate background images",desc:"Every background-image should be unique. Use a common class for e.g. sprites.",url:"https://github.com/CSSLint/csslint/wiki/Disallow-duplicate-background-images",browsers:"All",init:function(e,s){"use strict";var o=this,a={};e.addListener("property",function(e){var t,r,i=e.property.text,n=e.value;if(i.match(/background/i))for(t=0,r=n.parts.length;t<r;t++)"uri"===n.parts[t].type&&(void 0===a[n.parts[t].uri]?a[n.parts[t].uri]=e:s.report("Background image '"+n.parts[t].uri+"' was used multiple times, first declared at line "+a[n.parts[t].uri].line+", col "+a[n.parts[t].uri].col+".",e.line,e.col,o))})}}),CSSLint.addRule({id:"duplicate-properties",name:"Disallow duplicate properties",desc:"Duplicate properties must appear one after the other.",url:"https://github.com/CSSLint/csslint/wiki/Disallow-duplicate-properties",browsers:"All",init:function(e,r){"use strict";var i,n,s=this;function t(){i={}}e.addListener("startrule",t),e.addListener("startfontface",t),e.addListener("startpage",t),e.addListener("startpagemargin",t),e.addListener("startkeyframerule",t),e.addListener("startviewport",t),e.addListener("property",function(e){var t=e.property.text.toLowerCase();!i[t]||n===t&&i[t]!==e.value.text||r.report("Duplicate property '"+e.property+"' found.",e.line,e.col,s),i[t]=e.value.text,n=t})}}),CSSLint.addRule({id:"empty-rules",name:"Disallow empty rules",desc:"Rules without any properties specified should be removed.",url:"https://github.com/CSSLint/csslint/wiki/Disallow-empty-rules",browsers:"All",init:function(e,r){"use strict";var i=this,n=0;e.addListener("startrule",function(){n=0}),e.addListener("property",function(){n++}),e.addListener("endrule",function(e){var t=e.selectors;0===n&&r.report("Rule is empty.",t[0].line,t[0].col,i)})}}),CSSLint.addRule({id:"errors",name:"Parsing Errors",desc:"This rule looks for recoverable syntax errors.",browsers:"All",init:function(e,t){"use strict";var r=this;e.addListener("error",function(e){t.error(e.message,e.line,e.col,r)})}}),CSSLint.addRule({id:"fallback-colors",name:"Require fallback colors",desc:"For older browsers that don't support RGBA, HSL, or HSLA, provide a fallback color.",url:"https://github.com/CSSLint/csslint/wiki/Require-fallback-colors",browsers:"IE6,IE7,IE8",init:function(e,o){"use strict";var a,l=this,d={color:1,background:1,"border-color":1,"border-top-color":1,"border-right-color":1,"border-bottom-color":1,"border-left-color":1,border:1,"border-top":1,"border-right":1,"border-bottom":1,"border-left":1,"background-color":1};function t(){a=null}e.addListener("startrule",t),e.addListener("startfontface",t),e.addListener("startpage",t),e.addListener("startpagemargin",t),e.addListener("startkeyframerule",t),e.addListener("startviewport",t),e.addListener("property",function(e){var t=e.property.text.toLowerCase(),r=e.value.parts,i=0,n="",s=r.length;if(d[t])for(;i<s;)"color"===r[i].type&&("alpha"in r[i]||"hue"in r[i]?(/([^\)]+)\(/.test(r[i])&&(n=RegExp.$1.toUpperCase()),a&&a.property.text.toLowerCase()===t&&"compat"===a.colorType||o.report("Fallback "+t+" (hex or RGB) should precede "+n+" "+t+".",e.line,e.col,l)):e.colorType="compat"),i++;a=e})}}),CSSLint.addRule({id:"floats",name:"Disallow too many floats",desc:"This rule tests if the float property is used too many times",url:"https://github.com/CSSLint/csslint/wiki/Disallow-too-many-floats",browsers:"All",init:function(e,t){"use strict";var r=this,i=0;e.addListener("property",function(e){"float"===e.property.text.toLowerCase()&&"none"!==e.value.text.toLowerCase()&&i++}),e.addListener("endstylesheet",function(){t.stat("floats",i),10<=i&&t.rollupWarn("Too many floats ("+i+"), you're probably using them for layout. Consider using a grid system instead.",r)})}}),CSSLint.addRule({id:"font-faces",name:"Don't use too many web fonts",desc:"Too many different web fonts in the same stylesheet.",url:"https://github.com/CSSLint/csslint/wiki/Don%27t-use-too-many-web-fonts",browsers:"All",init:function(e,t){"use strict";var r=this,i=0;e.addListener("startfontface",function(){i++}),e.addListener("endstylesheet",function(){5<i&&t.rollupWarn("Too many @font-face declarations ("+i+").",r)})}}),CSSLint.addRule({id:"font-sizes",name:"Disallow too many font sizes",desc:"Checks the number of font-size declarations.",url:"https://github.com/CSSLint/csslint/wiki/Don%27t-use-too-many-font-size-declarations",browsers:"All",init:function(e,t){"use strict";var r=this,i=0;e.addListener("property",function(e){"font-size"===e.property.toString()&&i++}),e.addListener("endstylesheet",function(){t.stat("font-sizes",i),10<=i&&t.rollupWarn("Too many font-size declarations ("+i+"), abstraction needed.",r)})}}),CSSLint.addRule({id:"gradients",name:"Require all gradient definitions",desc:"When using a vendor-prefixed gradient, make sure to use them all.",url:"https://github.com/CSSLint/csslint/wiki/Require-all-gradient-definitions",browsers:"All",init:function(e,r){"use strict";var i,n=this;e.addListener("startrule",function(){i={moz:0,webkit:0,oldWebkit:0,o:0}}),e.addListener("property",function(e){/\-(moz|o|webkit)(?:\-(?:linear|radial))\-gradient/i.test(e.value)?i[RegExp.$1]=1:/\-webkit\-gradient/i.test(e.value)&&(i.oldWebkit=1)}),e.addListener("endrule",function(e){var t=[];i.moz||t.push("Firefox 3.6+"),i.webkit||t.push("Webkit (Safari 5+, Chrome)"),i.oldWebkit||t.push("Old Webkit (Safari 4+, Chrome)"),i.o||t.push("Opera 11.1+"),t.length&&t.length<4&&r.report("Missing vendor-prefixed CSS gradients for "+t.join(", ")+".",e.selectors[0].line,e.selectors[0].col,n)})}}),CSSLint.addRule({id:"ids",name:"Disallow IDs in selectors",desc:"Selectors should not contain IDs.",url:"https://github.com/CSSLint/csslint/wiki/Disallow-IDs-in-selectors",browsers:"All",init:function(l,d){"use strict";var u=this;l.addListener("startrule",function(e){for(var t,r,i,n,s,o=e.selectors,a=0;a<o.length;a++){for(t=o[a],n=i=0;n<t.parts.length;n++)if((r=t.parts[n]).type===l.SELECTOR_PART_TYPE)for(s=0;s<r.modifiers.length;s++)"id"===r.modifiers[s].type&&i++;1===i?d.report("Don't use IDs in selectors.",t.line,t.col,u):1<i&&d.report(i+" IDs in the selector, really?",t.line,t.col,u)}})}}),CSSLint.addRule({id:"import-ie-limit",name:"@import limit on IE6-IE9",desc:"IE6-9 supports up to 31 @import per stylesheet",browsers:"IE6, IE7, IE8, IE9",init:function(e,t){"use strict";var r=this,i=0;e.addListener("startpage",function(){i=0}),e.addListener("import",function(){i++}),e.addListener("endstylesheet",function(){31<i&&t.rollupError("Too many @import rules ("+i+"). IE6-9 supports up to 31 import per stylesheet.",r)})}}),CSSLint.addRule({id:"import",name:"Disallow @import",desc:"Don't use @import, use <link> instead.",url:"https://github.com/CSSLint/csslint/wiki/Disallow-%40import",browsers:"All",init:function(e,t){"use strict";var r=this;e.addListener("import",function(e){t.report("@import prevents parallel downloads, use <link> instead.",e.line,e.col,r)})}}),CSSLint.addRule({id:"important",name:"Disallow !important",desc:"Be careful when using !important declaration",url:"https://github.com/CSSLint/csslint/wiki/Disallow-%21important",browsers:"All",init:function(e,t){"use strict";var r=this,i=0;e.addListener("property",function(e){!0===e.important&&(i++,t.report("Use of !important",e.line,e.col,r))}),e.addListener("endstylesheet",function(){t.stat("important",i),10<=i&&t.rollupWarn("Too many !important declarations ("+i+"), try to use less than 10 to avoid specificity issues.",r)})}}),CSSLint.addRule({id:"known-properties",name:"Require use of known properties",desc:"Properties should be known (listed in CSS3 specification) or be a vendor-prefixed property.",url:"https://github.com/CSSLint/csslint/wiki/Require-use-of-known-properties",browsers:"All",init:function(e,t){"use strict";var r=this;e.addListener("property",function(e){e.invalid&&t.report(e.invalid.message,e.line,e.col,r)})}}),CSSLint.addRule({id:"order-alphabetical",name:"Alphabetical order",desc:"Assure properties are in alphabetical order",browsers:"All",init:function(e,t){"use strict";function r(){n=[]}function i(e){n.join(",")!==n.sort().join(",")&&t.report("Rule doesn't have all its properties in alphabetical order.",e.line,e.col,s)}var n,s=this;e.addListener("startrule",r),e.addListener("startfontface",r),e.addListener("startpage",r),e.addListener("startpagemargin",r),e.addListener("startkeyframerule",r),e.addListener("startviewport",r),e.addListener("property",function(e){var t=e.property.text.toLowerCase().replace(/^-.*?-/,"");n.push(t)}),e.addListener("endrule",i),e.addListener("endfontface",i),e.addListener("endpage",i),e.addListener("endpagemargin",i),e.addListener("endkeyframerule",i),e.addListener("endviewport",i)}}),CSSLint.addRule({id:"outline-none",name:"Disallow outline: none",desc:"Use of outline: none or outline: 0 should be limited to :focus rules.",url:"https://github.com/CSSLint/csslint/wiki/Disallow-outline%3Anone",browsers:"All",tags:["Accessibility"],init:function(e,t){"use strict";var i,r=this;function n(e){i=e.selectors?{line:e.line,col:e.col,selectors:e.selectors,propCount:0,outline:!1}:null}function s(){i&&i.outline&&(-1===i.selectors.toString().toLowerCase().indexOf(":focus")?t.report("Outlines should only be modified using :focus.",i.line,i.col,r):1===i.propCount&&t.report("Outlines shouldn't be hidden unless other visual changes are made.",i.line,i.col,r))}e.addListener("startrule",n),e.addListener("startfontface",n),e.addListener("startpage",n),e.addListener("startpagemargin",n),e.addListener("startkeyframerule",n),e.addListener("startviewport",n),e.addListener("property",function(e){var t=e.property.text.toLowerCase(),r=e.value;i&&(i.propCount++,"outline"!==t||"none"!==r.toString()&&"0"!==r.toString()||(i.outline=!0))}),e.addListener("endrule",s),e.addListener("endfontface",s),e.addListener("endpage",s),e.addListener("endpagemargin",s),e.addListener("endkeyframerule",s),e.addListener("endviewport",s)}}),CSSLint.addRule({id:"overqualified-elements",name:"Disallow overqualified elements",desc:"Don't use classes or IDs with elements (a.foo or a#foo).",url:"https://github.com/CSSLint/csslint/wiki/Disallow-overqualified-elements",browsers:"All",init:function(l,d){"use strict";var u=this,c={};l.addListener("startrule",function(e){for(var t,r,i,n,s,o=e.selectors,a=0;a<o.length;a++)for(t=o[a],n=0;n<t.parts.length;n++)if((r=t.parts[n]).type===l.SELECTOR_PART_TYPE)for(s=0;s<r.modifiers.length;s++)i=r.modifiers[s],r.elementName&&"id"===i.type?d.report("Element ("+r+") is overqualified, just use "+i+" without element name.",r.line,r.col,u):"class"===i.type&&(c[i]||(c[i]=[]),c[i].push({modifier:i,part:r}))}),l.addListener("endstylesheet",function(){var e;for(e in c)c.hasOwnProperty(e)&&1===c[e].length&&c[e][0].part.elementName&&d.report("Element ("+c[e][0].part+") is overqualified, just use "+c[e][0].modifier+" without element name.",c[e][0].part.line,c[e][0].part.col,u)})}}),CSSLint.addRule({id:"qualified-headings",name:"Disallow qualified headings",desc:"Headings should not be qualified (namespaced).",url:"https://github.com/CSSLint/csslint/wiki/Disallow-qualified-headings",browsers:"All",init:function(o,a){"use strict";var l=this;o.addListener("startrule",function(e){for(var t,r,i,n=e.selectors,s=0;s<n.length;s++)for(t=n[s],i=0;i<t.parts.length;i++)(r=t.parts[i]).type===o.SELECTOR_PART_TYPE&&r.elementName&&/h[1-6]/.test(r.elementName.toString())&&0<i&&a.report("Heading ("+r.elementName+") should not be qualified.",r.line,r.col,l)})}}),CSSLint.addRule({id:"regex-selectors",name:"Disallow selectors that look like regexs",desc:"Selectors that look like regular expressions are slow and should be avoided.",url:"https://github.com/CSSLint/csslint/wiki/Disallow-selectors-that-look-like-regular-expressions",browsers:"All",init:function(l,d){"use strict";var u=this;l.addListener("startrule",function(e){for(var t,r,i,n,s,o=e.selectors,a=0;a<o.length;a++)for(t=o[a],n=0;n<t.parts.length;n++)if((r=t.parts[n]).type===l.SELECTOR_PART_TYPE)for(s=0;s<r.modifiers.length;s++)"attribute"===(i=r.modifiers[s]).type&&/([~\|\^\$\*]=)/.test(i)&&d.report("Attribute selectors with "+RegExp.$1+" are slow!",i.line,i.col,u)})}}),CSSLint.addRule({id:"rules-count",name:"Rules Count",desc:"Track how many rules there are.",browsers:"All",init:function(e,t){"use strict";var r=0;e.addListener("startrule",function(){r++}),e.addListener("endstylesheet",function(){t.stat("rule-count",r)})}}),CSSLint.addRule({id:"selector-max-approaching",name:"Warn when approaching the 4095 selector limit for IE",desc:"Will warn when selector count is >= 3800 selectors.",browsers:"IE",init:function(e,t){"use strict";var r=this,i=0;e.addListener("startrule",function(e){i+=e.selectors.length}),e.addListener("endstylesheet",function(){3800<=i&&t.report("You have "+i+" selectors. Internet Explorer supports a maximum of 4095 selectors per stylesheet. Consider refactoring.",0,0,r)})}}),CSSLint.addRule({id:"selector-max",name:"Error when past the 4095 selector limit for IE",desc:"Will error when selector count is > 4095.",browsers:"IE",init:function(e,t){"use strict";var r=this,i=0;e.addListener("startrule",function(e){i+=e.selectors.length}),e.addListener("endstylesheet",function(){4095<i&&t.report("You have "+i+" selectors. Internet Explorer supports a maximum of 4095 selectors per stylesheet. Consider refactoring.",0,0,r)})}}),CSSLint.addRule({id:"selector-newline",name:"Disallow new-line characters in selectors",desc:"New-line characters in selectors are usually a forgotten comma and not a descendant combinator.",browsers:"All",init:function(e,f){"use strict";var m=this;e.addListener("startrule",function(e){for(var t,r,i,n,s,o,a,l,d,u=e.selectors,c=0,p=u.length;c<p;c++)for(r=0,n=(t=u[c]).parts.length;r<n;r++)for(i=r+1;i<n;i++)s=t.parts[r],o=t.parts[i],a=s.type,l=s.line,d=o.line,"descendant"===a&&l<d&&f.report("newline character found in selector (forgot a comma?)",l,u[c].parts[0].col,m)})}}),CSSLint.addRule({id:"shorthand",name:"Require shorthand properties",desc:"Use shorthand properties where possible.",url:"https://github.com/CSSLint/csslint/wiki/Require-shorthand-properties",browsers:"All",init:function(e,s){"use strict";var t,r,i,o,a=this,n={},l={margin:["margin-top","margin-bottom","margin-left","margin-right"],padding:["padding-top","padding-bottom","padding-left","padding-right"]};for(t in l)if(l.hasOwnProperty(t))for(r=0,i=l[t].length;r<i;r++)n[l[t][r]]=t;function d(){o={}}function u(e){var t,r,i,n;for(t in l)if(l.hasOwnProperty(t)){for(r=n=0,i=l[t].length;r<i;r++)n+=o[l[t][r]]?1:0;n===l[t].length&&s.report("The properties "+l[t].join(", ")+" can be replaced by "+t+".",e.line,e.col,a)}}e.addListener("startrule",d),e.addListener("startfontface",d),e.addListener("property",function(e){var t=e.property.toString().toLowerCase();n[t]&&(o[t]=1)}),e.addListener("endrule",u),e.addListener("endfontface",u)}}),CSSLint.addRule({id:"star-property-hack",name:"Disallow properties with a star prefix",desc:"Checks for the star property hack (targets IE6/7)",url:"https://github.com/CSSLint/csslint/wiki/Disallow-star-hack",browsers:"All",init:function(e,t){"use strict";var r=this;e.addListener("property",function(e){"*"===e.property.hack&&t.report("Property with star prefix found.",e.property.line,e.property.col,r)})}}),CSSLint.addRule({id:"text-indent",name:"Disallow negative text-indent",desc:"Checks for text indent less than -99px",url:"https://github.com/CSSLint/csslint/wiki/Disallow-negative-text-indent",browsers:"All",init:function(e,t){"use strict";var i,n,r=this;function s(){i=!1,n="inherit"}function o(){i&&"ltr"!==n&&t.report("Negative text-indent doesn't work well with RTL. If you use text-indent for image replacement explicitly set direction for that item to ltr.",i.line,i.col,r)}e.addListener("startrule",s),e.addListener("startfontface",s),e.addListener("property",function(e){var t=e.property.toString().toLowerCase(),r=e.value;"text-indent"===t&&r.parts[0].value<-99?i=e.property:"direction"===t&&"ltr"===r.toString()&&(n="ltr")}),e.addListener("endrule",o),e.addListener("endfontface",o)}}),CSSLint.addRule({id:"underscore-property-hack",name:"Disallow properties with an underscore prefix",desc:"Checks for the underscore property hack (targets IE6)",url:"https://github.com/CSSLint/csslint/wiki/Disallow-underscore-hack",browsers:"All",init:function(e,t){"use strict";var r=this;e.addListener("property",function(e){"_"===e.property.hack&&t.report("Property with underscore prefix found.",e.property.line,e.property.col,r)})}}),CSSLint.addRule({id:"unique-headings",name:"Headings should only be defined once",desc:"Headings should be defined only once.",url:"https://github.com/CSSLint/csslint/wiki/Headings-should-only-be-defined-once",browsers:"All",init:function(e,a){"use strict";var l=this,d={h1:0,h2:0,h3:0,h4:0,h5:0,h6:0};e.addListener("startrule",function(e){for(var t,r,i,n,s=e.selectors,o=0;o<s.length;o++)if((r=(t=s[o]).parts[t.parts.length-1]).elementName&&/(h[1-6])/i.test(r.elementName.toString())){for(n=0;n<r.modifiers.length;n++)if("pseudo"===r.modifiers[n].type){i=!0;break}i||(d[RegExp.$1]++,1<d[RegExp.$1]&&a.report("Heading ("+r.elementName+") has already been defined.",r.line,r.col,l))}}),e.addListener("endstylesheet",function(){var e,t=[];for(e in d)d.hasOwnProperty(e)&&1<d[e]&&t.push(d[e]+" "+e+"s");t.length&&a.rollupWarn("You have "+t.join(", ")+" defined in this stylesheet.",l)})}}),CSSLint.addRule({id:"universal-selector",name:"Disallow universal selector",desc:"The universal selector (*) is known to be slow.",url:"https://github.com/CSSLint/csslint/wiki/Disallow-universal-selector",browsers:"All",init:function(e,s){"use strict";var o=this;e.addListener("startrule",function(e){for(var t,r,i=e.selectors,n=0;n<i.length;n++)"*"===(r=(t=i[n]).parts[t.parts.length-1]).elementName&&s.report(o.desc,r.line,r.col,o)})}}),CSSLint.addRule({id:"unqualified-attributes",name:"Disallow unqualified attribute selectors",desc:"Unqualified attribute selectors are known to be slow.",url:"https://github.com/CSSLint/csslint/wiki/Disallow-unqualified-attribute-selectors",browsers:"All",init:function(l,d){"use strict";var u=this;l.addListener("startrule",function(e){for(var t,r,i,n,s=e.selectors,o=!1,a=0;a<s.length;a++)if((r=(t=s[a]).parts[t.parts.length-1]).type===l.SELECTOR_PART_TYPE){for(n=0;n<r.modifiers.length;n++)if("class"===(i=r.modifiers[n]).type||"id"===i.type){o=!0;break}if(!o)for(n=0;n<r.modifiers.length;n++)"attribute"!==(i=r.modifiers[n]).type||r.elementName&&"*"!==r.elementName||d.report(u.desc,r.line,r.col,u)}})}}),CSSLint.addRule({id:"vendor-prefix",name:"Require standard property with vendor prefix",desc:"When using a vendor-prefixed property, make sure to include the standard one.",url:"https://github.com/CSSLint/csslint/wiki/Require-standard-property-with-vendor-prefix",browsers:"All",init:function(e,o){"use strict";var a,r,l=this,d={"-webkit-border-radius":"border-radius","-webkit-border-top-left-radius":"border-top-left-radius","-webkit-border-top-right-radius":"border-top-right-radius","-webkit-border-bottom-left-radius":"border-bottom-left-radius","-webkit-border-bottom-right-radius":"border-bottom-right-radius","-o-border-radius":"border-radius","-o-border-top-left-radius":"border-top-left-radius","-o-border-top-right-radius":"border-top-right-radius","-o-border-bottom-left-radius":"border-bottom-left-radius","-o-border-bottom-right-radius":"border-bottom-right-radius","-moz-border-radius":"border-radius","-moz-border-radius-topleft":"border-top-left-radius","-moz-border-radius-topright":"border-top-right-radius","-moz-border-radius-bottomleft":"border-bottom-left-radius","-moz-border-radius-bottomright":"border-bottom-right-radius","-moz-column-count":"column-count","-webkit-column-count":"column-count","-moz-column-gap":"column-gap","-webkit-column-gap":"column-gap","-moz-column-rule":"column-rule","-webkit-column-rule":"column-rule","-moz-column-rule-style":"column-rule-style","-webkit-column-rule-style":"column-rule-style","-moz-column-rule-color":"column-rule-color","-webkit-column-rule-color":"column-rule-color","-moz-column-rule-width":"column-rule-width","-webkit-column-rule-width":"column-rule-width","-moz-column-width":"column-width","-webkit-column-width":"column-width","-webkit-column-span":"column-span","-webkit-columns":"columns","-moz-box-shadow":"box-shadow","-webkit-box-shadow":"box-shadow","-moz-transform":"transform","-webkit-transform":"transform","-o-transform":"transform","-ms-transform":"transform","-moz-transform-origin":"transform-origin","-webkit-transform-origin":"transform-origin","-o-transform-origin":"transform-origin","-ms-transform-origin":"transform-origin","-moz-box-sizing":"box-sizing","-webkit-box-sizing":"box-sizing"};function t(){a={},r=1}function i(){var e,t,r,i,n,s=[];for(e in a)d[e]&&s.push({actual:e,needed:d[e]});for(t=0,r=s.length;t<r;t++)i=s[t].needed,n=s[t].actual,a[i]?a[i][0].pos<a[n][0].pos&&o.report("Standard property '"+i+"' should come after vendor-prefixed property '"+n+"'.",a[n][0].name.line,a[n][0].name.col,l):o.report("Missing standard property '"+i+"' to go along with '"+n+"'.",a[n][0].name.line,a[n][0].name.col,l)}e.addListener("startrule",t),e.addListener("startfontface",t),e.addListener("startpage",t),e.addListener("startpagemargin",t),e.addListener("startkeyframerule",t),e.addListener("startviewport",t),e.addListener("property",function(e){var t=e.property.text.toLowerCase();a[t]||(a[t]=[]),a[t].push({name:e.property,value:e.value,pos:r++})}),e.addListener("endrule",i),e.addListener("endfontface",i),e.addListener("endpage",i),e.addListener("endpagemargin",i),e.addListener("endkeyframerule",i),e.addListener("endviewport",i)}}),CSSLint.addRule({id:"zero-units",name:"Disallow units for 0 values",desc:"You don't need to specify units when a value is 0.",url:"https://github.com/CSSLint/csslint/wiki/Disallow-units-for-zero-values",browsers:"All",init:function(e,n){"use strict";var s=this;e.addListener("property",function(e){for(var t=e.value.parts,r=0,i=t.length;r<i;)!t[r].units&&"percentage"!==t[r].type||0!==t[r].value||"time"===t[r].type||n.report("Values of 0 shouldn't have units specified.",t[r].line,t[r].col,s),r++})}}),function(){"use strict";function n(e){return e&&e.constructor===String?e.replace(/["&><]/g,function(e){switch(e){case'"':return"&quot;";case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;"}}):""}CSSLint.addFormatter({id:"checkstyle-xml",name:"Checkstyle XML format",startFormat:function(){return'<?xml version="1.0" encoding="utf-8"?><checkstyle>'},endFormat:function(){return"</checkstyle>"},readError:function(e,t){return'<file name="'+n(e)+'"><error line="0" column="0" severty="error" message="'+n(t)+'"></error></file>'},formatResults:function(e,t){var r=e.messages,i=[];return 0<r.length&&(i.push('<file name="'+t+'">'),CSSLint.Util.forEach(r,function(e){var t;e.rollup||i.push('<error line="'+e.line+'" column="'+e.col+'" severity="'+e.type+'" message="'+n(e.message)+'" source="'+((t=e.rule)&&"name"in t?"net.csslint."+t.name.replace(/\s/g,""):"")+'"/>')}),i.push("</file>")),i.join("")}})}(),CSSLint.addFormatter({id:"compact",name:"Compact, 'porcelain' format",startFormat:function(){"use strict";return""},endFormat:function(){"use strict";return""},formatResults:function(e,t,r){"use strict";var i=e.messages,n="";r=r||{};function s(e){return e.charAt(0).toUpperCase()+e.slice(1)}return 0===i.length?r.quiet?"":t+": Lint Free!":(CSSLint.Util.forEach(i,function(e){e.rollup?n+=t+": "+s(e.type)+" - "+e.message+" ("+e.rule.id+")\n":n+=t+": line "+e.line+", col "+e.col+", "+s(e.type)+" - "+e.message+" ("+e.rule.id+")\n"}),n)}}),CSSLint.addFormatter({id:"csslint-xml",name:"CSSLint XML format",startFormat:function(){"use strict";return'<?xml version="1.0" encoding="utf-8"?><csslint>'},endFormat:function(){"use strict";return"</csslint>"},formatResults:function(e,t){"use strict";function r(e){return e&&e.constructor===String?e.replace(/"/g,"'").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):""}var i=e.messages,n=[];return 0<i.length&&(n.push('<file name="'+t+'">'),CSSLint.Util.forEach(i,function(e){e.rollup?n.push('<issue severity="'+e.type+'" reason="'+r(e.message)+'" evidence="'+r(e.evidence)+'"/>'):n.push('<issue line="'+e.line+'" char="'+e.col+'" severity="'+e.type+'" reason="'+r(e.message)+'" evidence="'+r(e.evidence)+'"/>')}),n.push("</file>")),n.join("")}}),CSSLint.addFormatter({id:"json",name:"JSON",startFormat:function(){"use strict";return this.json=[],""},endFormat:function(){"use strict";var e="";return 0<this.json.length&&(e=1===this.json.length?JSON.stringify(this.json[0]):JSON.stringify(this.json)),e},formatResults:function(e,t,r){"use strict";return(0<e.messages.length||!r.quiet)&&this.json.push({filename:t,messages:e.messages,stats:e.stats}),""}}),CSSLint.addFormatter({id:"junit-xml",name:"JUNIT XML format",startFormat:function(){"use strict";return'<?xml version="1.0" encoding="utf-8"?><testsuites>'},endFormat:function(){"use strict";return"</testsuites>"},formatResults:function(e,t){"use strict";function i(e){return e&&e.constructor===String?e.replace(/"/g,"'").replace(/</g,"&lt;").replace(/>/g,"&gt;"):""}var r=e.messages,n=[],s={error:0,failure:0};return 0<r.length&&(r.forEach(function(e){var t,r="warning"===e.type?"error":e.type;e.rollup||(n.push('<testcase time="0" name="'+((t=e.rule)&&"name"in t?"net.csslint."+t.name.replace(/\s/g,""):"")+'">'),n.push("<"+r+' message="'+i(e.message)+'"><![CDATA['+e.line+":"+e.col+":"+i(e.evidence)+"]]></"+r+">"),n.push("</testcase>"),s[r]+=1)}),n.unshift('<testsuite time="0" tests="'+r.length+'" skipped="0" errors="'+s.error+'" failures="'+s.failure+'" package="net.csslint" name="'+t+'">'),n.push("</testsuite>")),n.join("")}}),CSSLint.addFormatter({id:"lint-xml",name:"Lint XML format",startFormat:function(){"use strict";return'<?xml version="1.0" encoding="utf-8"?><lint>'},endFormat:function(){"use strict";return"</lint>"},formatResults:function(e,t){"use strict";function r(e){return e&&e.constructor===String?e.replace(/"/g,"'").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):""}var i=e.messages,n=[];return 0<i.length&&(n.push('<file name="'+t+'">'),CSSLint.Util.forEach(i,function(e){var t;e.rollup?n.push('<issue severity="'+e.type+'" reason="'+r(e.message)+'" evidence="'+r(e.evidence)+'"/>'):(t="",e.rule&&e.rule.id&&(t='rule="'+r(e.rule.id)+'" '),n.push("<issue "+t+'line="'+e.line+'" char="'+e.col+'" severity="'+e.type+'" reason="'+r(e.message)+'" evidence="'+r(e.evidence)+'"/>'))}),n.push("</file>")),n.join("")}}),CSSLint.addFormatter({id:"text",name:"Plain Text",startFormat:function(){"use strict";return""},endFormat:function(){"use strict";return""},formatResults:function(e,t,r){"use strict";var i=e.messages,n="";if(r=r||{},0===i.length)return r.quiet?"":"\n\ncsslint: No errors in "+t+".";n="\n\ncsslint: There ",1===i.length?n+="is 1 problem":n+="are "+i.length+" problems",n+=" in "+t+".";var s=t.lastIndexOf("/"),o=t;return-1===s&&(s=t.lastIndexOf("\\")),-1<s&&(o=t.substring(s+1)),CSSLint.Util.forEach(i,function(e,t){n=n+"\n\n"+o,e.rollup?(n+="\n"+(t+1)+": "+e.type,n+="\n"+e.message):(n+="\n"+(t+1)+": "+e.type+" at line "+e.line+", col "+e.col,n+="\n"+e.message,n+="\n"+e.evidence)}),n}}),exports.CSSLint=CSSLint;