!function(d){d.jqx.jqxWidget("jqxDocking","",{}),d.extend(d.jqx._jqxDocking.prototype,{defineInstance:function(){var i={orientation:"horizontal",mode:"default",floatingWindowOpacity:.3,panelsRoundedCorners:!0,disabled:!1,width:"auto",height:"auto",windowsMode:null,cookies:!1,cookieOptions:{},windowsOffset:5,rtl:!1,keyboardNavigation:!1,_windowOptions:{},_draggedFired:!1,_dragging:!1,_draggingItem:null,_panels:[],_windows:[],_indicator:null,_events:["dragEnd","dragStart"]};return this===d.jqx._jqxDocking.prototype||d.extend(!0,this,i),i},createInstance:function(){if(!this.host.jqxWindow)throw new Error("jqxDocking: Missing reference to jqxwindow.js.");this._refresh(!0),this.disabled&&(this.disabled=!1,this.disable())},refresh:function(i){1!=i&&this._performLayout()},_refresh:function(i){this._render(),this._removeClasses(),this._addClasses(),this._setWindowsOptions(!0),this._performLayout(),this._cookieHandler(),this._cookieExporter(),this._removeEventListeners(),this._addEventListeners();var t=d.Event("resize");this.host.trigger(t)},resize:function(){this._refresh()},_addClasses:function(){this.host.addClass("jqx-docking");for(var i=0;i<this._panels.length;i+=1)this._panels[i].addClass(this.toThemeProperty("jqx-docking-panel")),this.panelsRoundedCorners&&this._panels[i].addClass(this.toThemeProperty("jqx-rc-all"));for(i=0;i<this._windows.length;i+=1)this._windows[i].addClass(this.toThemeProperty("jqx-docking-window"))},_removeClasses:function(){this.host.removeClass("jqx-docking");for(var i=0;i<this._panels.length;i+=1)this._panels[i].removeClass(this.toThemeProperty("jqx-docking-panel")),this._panels[i].removeClass(this.toThemeProperty("jqx-rc-all"));for(i=0;i<this._windows.length;i+=1)this._windows[i].removeClass(this.toThemeProperty("jqx-docking-window"))},_render:function(){for(var i=this.host.children("div"),t=0;t<i.length;t+=1)this._panels.push(d(i[t])),this._renderWindows(d(i[t]))},focus:function(i){this.focusedWindow&&d(this.focusedWindow).removeClass(this.toThemeProperty("jqx-fill-state-focus")),!d.isEmptyObject(i)&&"string"===d.type(i)&&0<d("#"+i).length?this.focusedWindow=d("#"+i)[0]:this.focusedWindow=this._windows[0][0],d(this.focusedWindow).addClass(this.toThemeProperty("jqx-fill-state-focus")),this.host.focus()},_renderWindows:function(i){for(var t=i.children("div"),e=0;e<t.length;e+=1)this._windows.push(d(t[e])),d(t[e]).jqxWindow({keyboardNavigation:!1,rtl:this.rtl,theme:this.theme,enableResize:!1,width:d(t[e]).css("width"),maxWidth:Number.MAX_VALUE}),d(t[e]).detach(),i.append(d(t[e]));i.append('<div class="spacer" style="clear: both;"></div>');var o,s=this;this.keyboardNavigation&&(o=function(i){if(13===i.keyCode?s.focusedWindow&&d(s.focusedWindow).jqxWindow("showCollapseButton")&&d(s.focusedWindow).jqxWindow("_collapseButton").trigger("click"):(s.focusedWindow&&27===i.keyCode&&"esc"===d(s.focusedWindow).jqxWindow("keyboardCloseKey")||s.focusedWindow&&d(s.focusedWindow).jqxWindow("keyboardCloseKey")==i.keyCode)&&d(s.focusedWindow).jqxWindow("closeWindow",i),9===i.keyCode){if(null==s.focusedWindow)s.focusedWindow=s._windows[0],d(s.focusedWindow).focus(),i.stopPropagation();else{var e=-1;if(d.each(s._windows,function(i,t){this[0]==s.focusedWindow&&(e=i)}),i.shiftKey?e--:e++,e>=s._windows.length||e<0)return d(s.focusedWindow).removeClass(s.toThemeProperty("jqx-fill-state-focus")),s.focusedWindow=null,i.stopPropagation(),!0;var t=(t=s._windows[e])||s._windows[0];d(s.focusedWindow).removeClass(s.toThemeProperty("jqx-fill-state-focus")),s.focusedWindow=t[0],d(s.focusedWindow).focus()}d(s.focusedWindow).addClass(s.toThemeProperty("jqx-fill-state-focus")),i.preventDefault&&(i.preventDefault(),i.stopPropagation())}},d.each(s._windows,function(i,t){var e=d(this);s.removeHandler(e,"focus"),s.removeHandler(e,"blur"),s.removeHandler(e,"mousedown"),s.addHandler(e,"mousedown",function(i){s.focusedWindow&&d(s.focusedWindow).removeClass(s.toThemeProperty("jqx-fill-state-focus")),s.focusedWindow=e[0],d(s.focusedWindow).addClass(s.toThemeProperty("jqx-fill-state-focus")),d(s.focusedWindow).focus()}),s.addHandler(e,"focus",function(i){s.focusedWindow&&d(s.focusedWindow).removeClass(s.toThemeProperty("jqx-fill-state-focus")),s.focusedWindow=e[0],d(s.focusedWindow).addClass(s.toThemeProperty("jqx-fill-state-focus"))}),s.addHandler(e,"blur",function(i){return!!d(document.activeElement).ischildof(d(e))||void d(e).removeClass(s.toThemeProperty("jqx-fill-state-focus"))}),s.removeHandler(e,"keydown"),s.addHandler(e,"keydown",function(i){o(i)})}),this.removeHandler(this.host,"keydown"),this.addHandler(this.host,"keydown",function(i){o(i)}),this.removeHandler(this.host,"blur"),this.addHandler(this.host,"blur",function(i){s.focusedWindow&&(d(s.focusedWindow).removeClass(s.toThemeProperty("jqx-fill-state-focus")),s.focusedWindow=null)}))},_performLayout:function(){this.host.css("width",this.width),this.host.css("height",this.height),this._performWindowsLayout(),this._performPanelsLayout(),this._performWindowsLayout()},_performPanelsLayout:function(){this.host.css("overflow","hidden");for(var i,t=this.host.width(),e=0,o=0;o<this._panels.length;o+=1)(i=this._panels[o]).css("height","auto"),i.css("min-width","auto"),i[0].style.width="auto","vertical"===this.orientation?(i.css("width","auto"),i.css("float","none")):(e+=this._handleHorizontalSize(i,e,t),0<o&&i.css("margin-left",-this.windowsOffset));"horizontal"===this.orientation&&e<t&&this._fillContainer(t,e)},_handleHorizontalSize:function(i,t,e){var o=e/this._panels.length,s=i.outerWidth()-i.width();if(i.css("float","left"),"auto"!==i[0].style.width&&0!==parseInt(i.css("width"),10))return t+i.outerWidth()>=e&&(t=t+o<e?o-s:i.width()-(t+i.outerWidth()-e),i.css("min-width",t),i.width(t)),i.outerWidth();e=99.99/this._panels.length;return i[0].style.width=e+"%",i.outerWidth()},_fillContainer:function(i,t){var e=this._panels.length,e=this._panels[e-1],e=i-t+e.width();d.jqx.browser.msie&&d.jqx.browser.version<9&&(e-=this._panels.length)},_performWindowsLayout:function(){for(var i,t=0;t<this._windows.length;t+=1)i=this._getWindowOptions(this._windows[t]),this._windows[t].ischildof(this.host)&&(i?"floating"!==i.mode&&(this._windows[t].css("margin",this.windowsOffset),this._windows[t].css("position","static")):"floating"!==this.mode&&(this._windows[t].css("position","static"),this._windows[t].css("margin",this.windowsOffset))),this._setWindowSize(this._windows[t],i)},_setWindowSize:function(i,t){"floating"!==t.mode&&i.ischildof(this.host)&&(t=i.parent().width()-(i.outerWidth()-i.width())-2*this.windowsOffset,this.orientation,i.jqxWindow("width",t)),this._setWindowOption(i,"size",{width:i.width(),height:i.height()})},_setWindowsOptions:function(i){for(var t=0;t<this._windows.length;t+=1){var e,o=this._windows[t].attr("id"),s=this._getWindowOptions(o);i||0,e=null,this.windowsMode&&this.windowsMode.hasOwnProperty(o)?(e=this.windowsMode[o],this._setWindowOption(this._windows[t],"mode",e)):void 0!==s&&void 0===s.mode&&(e=this.mode,this._setWindowOption(this._windows[t],"mode",e)),i&&(this._setWindowOption(this._windows[t],"resizable",!0),"floating"==e?this._windows[t].jqxWindow({enableResize:!0}):this._windows[t].jqxWindow({enableResize:!1}),this._setWindowOption(this._windows[t],"size",{height:this._windows[t].height(),width:this._windows[t].width()}))}},_removeEventListeners:function(){for(var i=0;i<this._windows.length;i+=1)this.removeHandler(this._windows[i],"moving",this._itemDragging),this.removeHandler(this._windows[i],"moved",this._itemDrop),this.removeHandler(this._windows[i],"resized",this._itemResized),this.removeHandler(this._windows[i],"collapse",this._collapsed),this.removeHandler(this._windows[i],"expand",this._expanded)},_addEventListeners:function(){for(var i=0;i<this._windows.length;i+=1)this._addEventListenersTo(this._windows[i]);var t=this;d.jqx.utilities.resize(this.host,function(){t._performLayout()})},_addEventListenersTo:function(i){this.addHandler(i,"moving",this._itemDragging,{self:this}),this.addHandler(i,"moved",this._itemDrop,{self:this}),this.addHandler(i,"resized",this._itemResized,{self:this}),this.addHandler(i,"collapse",this._collapsed,{self:this}),this.addHandler(i,"expand",this._expanded,{self:this})},_itemDragging:function(i){var t=i.data.self,e=d(i.target),o=t._getWindowOptions(e);if(e.removeClass(t.toThemeProperty("jqx-docking-window")),e.css("margin","0px"),t._dragging||t._prepareForDragging(e),"floating"!==o.mode){o={x:i.args.pageX,y:i.args.pageY},i=t._getMouseOverPanel(o);return i?t._mouseOverPanel(i,o):t._mouseLeavePanel(),t._draggedFired||(t._raiseEvent(1,{window:d(e).attr("id")}),t._draggedFired=!0),!0}},_prepareForDragging:function(i){this._dragging=!0;var t={parent:i.parent(),next:i.next(),prev:i.prev()};this._setWindowOption(i,"lastPosition",t),i.detach(),d(document.body).append(i),this._setDraggingStyles(i),this._draggingItem=i},_setDraggingStyles:function(i){i.css({position:"absolute",left:i.offset().left,top:i.offset().top}),i.fadeTo(0,this.floatingWindowOpacity)},_getMouseOverPanel:function(i){for(var t=0;t<this._panels.length;t+=1)if(this._isMouseOverItem(this._panels[t],i,!1))return this._panels[t];return null},_mouseOverPanel:function(i,t){var e;this._dragging&&(e=i.children("div"),"indicator"!==(e=this._getHoverWindow(t,e))&&(t=this._centerOffset(e,t),this._handleIndicator(i,e,t)))},_getHoverWindow:function(i,t){if(this._isMouseOverItem(this._indicator,i,!0))return"indicator";for(var e=0;e<t.length;e+=1)if(this._isMouseOverItem(d(t[e]),i,!0))return d(t[e]);return null},_centerOffset:function(i,t){if(i){i.offset().left;var e=i.offset().top,o=i.height(),o=(i.width(),e+o/2);return t.y>o?"next":"prev"}return"all"},_handleIndicator:function(i,t,e){var o=this._getIndicator(t);"all"===e?"vertical"===this.orientation?o.insertBefore(i.children(".spacer")):i.append(o):"prev"===e?o.insertBefore(t):o.insertAfter(t),this._resizeIndicator(o,i)},_getIndicator:function(){var i=(i=this._indicator)||d('<div class="'+this.toThemeProperty("jqx-docking-drop-indicator")+'"></div>');return this._indicator=i,this._indicator.css("margin",this.windowsOffset),"vertical"===this.orientation&&this._indicator.css("float","left"),i},_resizeIndicator:function(i,t){"horizontal"===this.orientation?i.width(t.width()-(i.outerWidth(!0)-i.width())):i.width(this._draggingItem.width()),i.height(this._draggingItem.height())},_mouseLeavePanel:function(i){this._indicator&&(this._indicator.remove(),this._indicator=null)},_itemDrop:function(i){var t=i.data.self,i=d(i.currentTarget);t._dragging=!1,t._indicator?(i.detach(),i.insertAfter(t._indicator),t._indicator.remove(),t._dropFixer(i)):t._dropHandler(i),i.fadeTo(0,1),i.focus(),t._indicator=null,t._cookieExporter(),t._draggedFired=!1,t._raiseEvent(0,{window:i.attr("id")})},_dropFixer:function(i){i.css("position","static"),i.addClass(this.toThemeProperty("jqx-docking-window")),i.css("margin",this.windowsOffset),i.jqxWindow("enableResize",!1),"horizontal"===this.orientation&&this._fixWindowSize(i)},_dropHandler:function(i){this._getWindowOptions(i);"docked"===this.mode?this._dropDocked(i):this._dropFloating(i)},_dropDocked:function(i){var t=this._getWindowOptions(i).lastPosition;i.detach(),t.next[0]?i.insertBefore(t.next):t.prev[0]?i.insertAfter(t.prev):t.parent.append(i),this._dropFixer(i)},_fixWindowSize:function(i){d(i).jqxWindow({width:i.parent().width()-(i.outerWidth()-i.width())-2*parseInt(this.windowsOffset,10)})},_itemResized:function(i){var t=i.data.self,e=d(i.currentTarget);t._setWindowOption(e,"size",{width:i.args.width,height:i.args.height}),t._cookieExporter()},_dropFloating:function(i){var t;d(i).jqxWindow("collapsed")||(t=this._getWindowOptions(i),d(i).jqxWindow("enableResize",t.resizable)),d(document.body).append(i),this._restoreWindowSize(i)},_restoreWindowSize:function(i){var t=this._getWindowOptions(i);d(i).jqxWindow({width:t.size.width})},_isMouseOverItem:function(i,t,e){if(!i)return!1;var o=i.outerWidth(!0),s=i.outerHeight(!0),n=i.width(),d=i.height(),r=i.offset().top,i=i.offset().left;return e&&(r-=(s-d)/2,i-=(o-n)/2,n=o,d=s),i<=t.x&&i+n>=t.x&&r<=t.y&&r+d+2*this._draggingItem.height()/3>=t.y},_cookieHandler:function(){var i;!this.cookies||null!==(i=d.jqx.cookie.cookie("jqxDocking"+this.element.id))&&(this.importLayout(i),this.layoutImported=!0)},_cookieExporter:function(){this.cookies&&d.jqx.cookie.cookie("jqxDocking"+this.element.id,this.exportLayout(),this.cookieOptions)},_indexOf:function(i,t){for(var e=0;e<t.length;e+=1)if(i[0]===t[e][0])return e;return-1},_exportFixed:function(){for(var i,t,e=[],o="",s=0;s<this._panels.length;s+=1){o+='"panel'+s+'": {',i=this._panels[s].children();for(var n=0;n<i.length;n+=1)(t=d(i[n])).attr("id")&&(e.push(t),o+='"'+t.attr("id")+'":{"collapsed":'+t.jqxWindow("collapsed")+"},");1<i.length&&(o=o.substring(0,o.length-1)),o+="},"}return{JSON:o=o.substring(0,o.length-1),children:e}},_exportFloating:function(i){var t,e="";e+='"floating":{';for(var o=0;o<this._windows.length;o+=1)t=d(this._windows[o]),-1===this._indexOf(t,i)&&(e+='"'+t.attr("id")+'":{"x":"'+t.css("left")+'","y":"'+t.css("top")+'","width":"'+t.jqxWindow("width")+'","height":"'+t.jqxWindow("height")+'","collapsed":'+t.jqxWindow("collapsed")+"},");return","===e.substring(e.length-1,e.length)&&(e=e.substring(0,e.length-1)),e+="}"},_importFixed:function(i){for(var t in i)if("orientation"!==t&&"floating"!==t&&i.hasOwnProperty(t)){var e=t.substring(t.length-1,t.length),e=parseInt(e,10),o=i[t];for(t in o)d("#"+t).css("position","static"),o[t].collapsed&&function(i){setTimeout(function(){d("#"+i).jqxWindow("collapsed",!0)},0)}(t),this._panels[e].append(d("#"+t)),"horizontal"===this.orientation&&this._fixWindowSize(d("#"+t))}},_importFloating:function(i){var t,e,o=i.floating;for(e in o)o.hasOwnProperty(e)&&(d("#"+e).css("position","absolute"),d(document.body).append(d("#"+e)),t=this._dragging,d("#"+e).jqxWindow("move",o[e].x,o[e].y),this._dragging=t,d("#"+e).jqxWindow("width",o[e].width),d("#"+e).jqxWindow("height",o[e].height),d("#"+e).jqxWindow("enableResize",!0),this._setWindowsOptions(!0),function(i){setTimeout(function(){d("#"+i).jqxWindow("collapsed",o[i].collapsed)},0)}(e),d("#"+e).fadeTo(0,1))},_getWindowOptions:function(i){return"object"==typeof i&&null!==i&&(i=0<i.length?i.attr("id"):i.id),this._windowOptions[i]},_setWindowOption:function(i,t,e){"object"==typeof i&&null!==i&&(i=0<i.length?i.attr("id"):i.id),void 0===this._windowOptions[i]&&(this._windowOptions[i]={}),this._windowOptions[i][t]=e,"mode"===t&&this.setWindowMode(i,e)},_expanded:function(i){i.data.self._cookieExporter()},_collapsed:function(i){i.data.self._cookieExporter()},_raiseEvent:function(i){var t=d.Event(this._events[i]);return t.args=arguments[1],this.host.trigger(t)},_moveWindow:function(t,i,e){var o=i.children(),s=null,n=0;d.each(o,function(i){"static"==d(this).css("position")&&(n==e&&this!=t[0]&&(s=this),n++)}),n<=e?t.appendTo(i):null!=s&&t.insertBefore(s),t.css("position","static")},propertyChangedHandler:function(i,t,e,o){switch(t){case"rtl":d.each(i._windows,function(){this.jqxWindow({rtl:o})});break;case"theme":d.each(i._windows,function(){this.jqxWindow({theme:o})});break;case"orientation":case"height":case"width":i._performLayout(),i._cookieExporter();break;case"panelsRoundedCorners":i._removeClasses(),i._addClasses();break;case"disabled":o?(i.disabled=!1,i.disable()):(i.disabled=!0,i.enable());break;case"windowsMode":case"mode":i._setWindowsOptions(!1);break;case"cookies":i._cookieExporter();break;case"windowsOffset":i._performLayout()}},destroy:function(){this._removeEventListeners(),this.host.remove(),this.windowsMode=null,this.cookieOptions=null,this._windowOptions=null,this._panels=null,this._windows=null,this._events=null},disable:function(){if(!this.disabled){this.disabled=!0,this._removeEventListeners();for(var i=0;i<this._windows.length;i+=1)this._windows[i][0].style.opacity="",d(this._windows[i]).jqxWindow("disable")}},enable:function(){if(this.disabled){this.disabled=!1,this._addEventListeners();for(var i=0;i<this._windows.length;i+=1)d(this._windows[i]).jqxWindow("enable")}},move:function(i,t,e){var o;(t=this._panels[t])&&((o=d(t.children(".spacer"))).detach(),i=d("#"+i),"floating"!==this._getWindowOptions(i).mode&&(this._moveWindow(i,t,e),t.append(o),this._cookieExporter(),this._dropFixer(i)))},exportLayout:function(){var i="{",t=this._exportFixed();return i+=t.JSON+","+this._exportFloating(t.children)+',"orientation": "'+this.orientation+'"',i+="}"},importLayout:function(i){try{var t=d.parseJSON(i);this.orientation=t.orientation,this._performLayout(),this._importFixed(t),this._importFloating(t)}catch(i){alert("Invalid JSON string.")}},setWindowMode:function(i,t){var i=d("#"+i),e=this._getWindowOptions(i);"floating"===t?(i.css("position","absolute"),this._windowOptions[i.attr("id")].mode=t):"floating"===e.mode&&"absolute"===i.css("position")&&(e.lastPosition?this._dropDocked(i):(this._panels[0].append(i),this._dropFixer(i))),this._windowOptions[i.attr("id")].mode=t},hideCloseButton:function(i){d("#"+i).jqxWindow("showCloseButton",!1)},showCloseButton:function(i){d("#"+i).jqxWindow("showCloseButton",!0)},hideCollapseButton:function(i){d("#"+i).jqxWindow("showCollapseButton",!1)},showCollapseButton:function(i){d("#"+i).jqxWindow("showCollapseButton",!0)},expandWindow:function(i,t){d("#"+i).jqxWindow("expand",t)},collapseWindow:function(i,t){d("#"+i).jqxWindow("collapse",t)},setWindowProperty:function(i,t,e){d("#"+i).jqxWindow(t,e)},getWindowProperty:function(i,t){return d("#"+i).jqxWindow(t)},setWindowPosition:function(i,t,e){i=d("#"+i);"floating"===this._getWindowOptions(i).mode&&(i.css("position","absolute"),d(i).jqxWindow("move",t,e,null,!1))},hideAllCloseButtons:function(){for(var i=0;i<this._windows.length;i+=1)this._windows[i].jqxWindow("showCloseButton",!1)},hideAllCollapseButtons:function(){for(var i=0;i<this._windows.length;i+=1)this._windows[i].jqxWindow("showCollapseButton",!1)},showAllCloseButtons:function(){for(var i=0;i<this._windows.length;i+=1)this._windows[i].jqxWindow("showCloseButton",!0)},showAllCollapseButtons:function(){for(var i=0;i<this._windows.length;i+=1)this._windows[i].jqxWindow("showCollapseButton",!0)},pinWindow:function(i){d("#"+i).jqxWindow("draggable",!1)},unpinWindow:function(i){d("#"+i).jqxWindow("draggable",!0)},setDraggingMode:function(i){i=d("#"+i);this._prepareForDragging(i),i.fadeTo(0,1)},enableWindowResize:function(i){"absolute"===(i=d("#"+i)).css("position")&&(this._setWindowOption(i,"resizable",!0),i.jqxWindow("enableResize",!0))},disableWindowResize:function(i){i=d("#"+i),this._setWindowOption(i,"resizable",!1),i.jqxWindow("enableResize",!1)},addWindow:function(i,t,e,o){var s="#"+i;d(s).jqxWindow({keyboardNavigation:!1,rtl:this.rtl,theme:this.theme,enableResize:!1,width:d(s).css("width"),maxWidth:Number.MAX_VALUE}),this._panels[0].append(d(s)),this._windows.push(d(s)),t?this._setWindowOption(d(s),"mode",t):this._setWindowOption(d(s),"mode",this.mode),this._setWindowOption(d(s),"resizable",!0),this._setWindowOption(d(s),"size",{width:d(s).width(),height:d(s).height()}),"floating"==t?d(s).jqxWindow({enableResize:!0}):d(s).jqxWindow({enableResize:!1}),null!=this._panels[e]&&this._setWindowOption(d(s),"size",{width:this._panels[e].width(),height:this._panels[e].height()}),this._addEventListenersTo(d(s)),void 0!==e&&void 0!==o&&this.move(i,e,o),this._dropFixer(d(s))},closeWindow:function(i){d("#"+i).jqxWindow("closeWindow")}})}(jqxBaseFramework);