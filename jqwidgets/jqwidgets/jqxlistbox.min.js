!function(C){C.jqx.jqxWidget("jqxListBox","",{}),C.extend(C.jqx._jqxListBox.prototype,{defineInstance:function(){var e={disabled:!1,checkboxSize:16,checkboxes:!1,width:null,height:null,items:new Array,multiple:!1,selectedIndex:-1,selectedIndexes:new Array,source:null,scrollBarSize:C.jqx.utilities.scrollBarSize,enableHover:!0,enableSelection:!0,visualItems:new Array,groups:new Array,equalItemsWidth:!0,itemHeight:-1,visibleItems:new Array,emptyGroupText:"Group",hasThreeStates:!1,autoHeight:!1,autoItemsHeight:!1,roundedcorners:!0,touchMode:"auto",displayMember:"",groupMember:"",valueMember:"",searchMember:"",searchMode:"startswithignorecase",incrementalSearch:!0,incrementalSearchDelay:1e3,incrementalSearchKeyDownDelay:300,allowDrag:!1,allowDrop:!0,dropAction:"default",touchModeStyle:"auto",keyboardNavigation:!0,enableMouseWheel:!0,multipleextended:!1,selectedValues:new Array,emptyString:"",rtl:!1,rendered:null,renderer:null,dragStart:null,dragEnd:null,focusable:!0,ready:null,_checkForHiddenParent:!0,autoBind:!0,_renderOnDemand:!1,filterable:!1,filterHeight:27,filterPlaceHolder:"Looking for",filterDelay:100,filterChange:null,aria:{"aria-disabled":{name:"disabled",type:"boolean"}},events:["select","unselect","change","checkChange","dragStart","dragEnd","bindingComplete","itemAdd","itemRemove","itemUpdate"]};return this===C.jqx._jqxListBox.prototype||C.extend(!0,this,e),e},createInstance:function(e){var t,i=this;15!=C.jqx.utilities.scrollBarSize&&(i.scrollBarSize=C.jqx.utilities.scrollBarSize),null==i.width&&(i.width=200),null==i.height&&(i.height=200),!i.isMaterialized()||(t=window.getComputedStyle(i.element).getPropertyValue("--jqx-list-item-height"))&&-1===this.itemHeight&&(this.itemHeight=parseInt(t)),i.renderListBox();var s=i;C.jqx.utilities.resize(i.host,function(){s._updateSize()},!1,i._checkForHiddenParent)},resize:function(e,t){this.width=e,this.height=t,this._updateSize()},render:function(){this.renderListBox(),this.refresh()},renderListBox:function(){var e,t,i=this,s=i.element.nodeName.toLowerCase();"select"==s||"ul"==s||"ol"==s?(i.field=i.element,i.field.className&&(i._className=i.field.className),e={title:i.field.title},i.field.id.length?e.id=i.field.id.replace(/[^\w]/g,"_")+"_jqxListBox":e.id=C.jqx.utilities.createId()+"_jqxListBox",t=C("<div></div>",e),i.width||(i.width=C(i.field).width()),i.height||(i.height=C(i.field).outerHeight()),i.element.style.cssText=i.field.style.cssText,C(i.field).hide().after(t),s=i.host.data(),i.host=t,i.host.data(s),i.element=t[0],i.element.id=i.field.id,i.field.id=e.id,i._className&&(i.host.addClass(i._className),C(i.field).removeClass(i._className)),i.field.tabIndex&&(l=i.field.tabIndex,i.field.tabIndex=-1,i.element.tabIndex=l)):(0<i.host.find("li").length||0<i.host.find("option").length)&&(n=C.jqx.parseSourceTag(i.element),i.source=n.items),i.element.innerHTML="";var l=(i=i).element.className;l+=" "+i.toThemeProperty("jqx-listbox"),l+=" "+i.toThemeProperty("jqx-reset"),l+=" "+i.toThemeProperty("jqx-rc-all"),l+=" "+i.toThemeProperty("jqx-widget"),l+=" "+i.toThemeProperty("jqx-widget-content"),i.element.className=l;var n=window.getComputedStyle(this.element),l=2*parseInt(n.borderLeftWidth),n=n.boxSizing;0===this.element.offsetWidth&&(l=2),"border-box"!==n&&!isNaN(l)||(l=0),null!=i.width&&-1!=i.width.toString().indexOf("%")&&(i.host.width(i.width),0<l&&this.host.css("box-sizing","border-box")),null!=i.height&&-1!=i.height.toString().indexOf("%")&&(i.host.height(i.height),0==i.host.height()&&i.host.height(200)),(null!=i.width&&-1!=i.width.toString().indexOf("px")||null!=i.width&&!isNaN(i.width))&&(i.element.style.width=parseInt(i.width)-l+"px"),(null!=i.height&&-1!=i.height.toString().indexOf("px")||null!=i.height&&!isNaN(i.height))&&(i.element.style.height=parseInt(i.height)-l+"px"),i.multiple||i.multipleextended||i.checkboxes?C.jqx.aria(i,"aria-multiselectable",!0):C.jqx.aria(i,"aria-multiselectable",!1);n="<div style='-webkit-appearance: none; background: transparent; outline: none; width:100%; height: 100%; align:left; border: 0px; padding: 0px; margin: 0px; left: 0px; top: 0px; valign:top; position: relative;'><div style='-webkit-appearance: none; border: none; background: transparent; outline: none; width:100%; height: 100%; padding: 0px; margin: 0px; align:left; left: 0px; top: 0px; valign:top; position: relative;'><div id='filter"+i.element.id+"' style='display: none; visibility: inherit; align:left; valign:top; left: 0px; top: 0px; position: absolute;'><input style='position: absolute;'/></div><div id='listBoxContent' style='-webkit-appearance: none; border: none; background: transparent; outline: none; border: none; padding: 0px; overflow: hidden; margin: 0px; align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='verticalScrollBar"+i.element.id+"' style='visibility: inherit; align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='horizontalScrollBar"+i.element.id+"' style='visibility: inherit; align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='bottomRight' style='align:left; valign:top; left: 0px; top: 0px; border: none; position: absolute;'/></div></div>";i.host.attr("role","listbox"),i.element.innerHTML=n,i._checkForHiddenParent&&(i._addInput(),i.host.attr("tabIndex")||i.host.attr("tabIndex",1)),i.filter=C(i.element.firstChild.firstChild.firstChild),i.filterInput=C(i.filter[0].firstChild),i.filterInput.attr("placeholder",i.filterPlaceHolder),i.filterInput.addClass(i.toThemeProperty("jqx-widget jqx-listbox-filter-input jqx-input jqx-rc-all")),i.addHandler(i.filterInput,"keyup.textchange",function(e){13==e.keyCode?i._search(e):0<i.filterDelay&&(i._filterTimer&&clearTimeout(i._filterTimer),i._filterTimer=setTimeout(function(){i._search(e)},i.filterDelay)),e.stopPropagation()});l=C(i.element.firstChild.firstChild.firstChild.nextSibling.nextSibling);if(!i.host.jqxButton)throw new Error("jqxListBox: Missing reference to jqxbuttons.js.");if(!l.jqxScrollBar)throw new Error("jqxListBox: Missing reference to jqxscrollbar.js.");n=parseInt(i.host.height())/2;0==n&&(n=10),i.vScrollBar=l.jqxScrollBar({_initialLayout:!0,vertical:!0,rtl:i.rtl,theme:i.theme,touchMode:i.touchMode,largestep:n});n=C(i.element.firstChild.firstChild.firstChild.nextSibling.nextSibling.nextSibling);i.hScrollBar=n.jqxScrollBar({_initialLayout:!0,vertical:!1,rtl:i.rtl,touchMode:i.touchMode,theme:i.theme}),i.content=C(i.element.firstChild.firstChild.firstChild.nextSibling),i.content[0].id="listBoxContent"+i.element.id,i.bottomRight=C(i.element.firstChild.firstChild.firstChild.nextSibling.nextSibling.nextSibling.nextSibling).addClass(i.toThemeProperty("jqx-listbox-bottomright")).addClass(i.toThemeProperty("jqx-scrollbar-state-normal")),i.bottomRight[0].id="bottomRight"+i.element.id,i.vScrollInstance=C.data(i.vScrollBar[0],"jqxScrollBar").instance,i.hScrollInstance=C.data(i.hScrollBar[0],"jqxScrollBar").instance,i.isTouchDevice()&&(C.jqx.browser.msie&&C.jqx.browser.version<9||(n=C("<div class='overlay' unselectable='on' style='z-index: 99; -webkit-appearance: none; border: none; background: black; opacity: 0.01; outline: none; border: none; padding: 0px; overflow: hidden; margin: 0px; align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div>"),i.content.parent().append(n),i.overlayContent=i.host.find(".overlay"),i.filterable&&i.overlayContent.css("top","30px"))),i._updateTouchScrolling(),i.host.addClass("jqx-disableselect"),i.host.jqxDragDrop&&window.jqxListBoxDragDrop()},_highlight:function(e,t){t=t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return e.replace(new RegExp("("+t+")","ig"),function(e,t){return"<b>"+t+"</b>"})},_addInput:function(){var e=this.host.attr("name");e&&this.host.attr("name",""),this.input=C("<input type='hidden'/>"),this.host.append(this.input),this.input.attr("name",e)},_updateTouchScrolling:function(){var e,i=this;this.isTouchDevice()&&(i.enableHover=!1,e=this.overlayContent||this.content,this.removeHandler(C(e),C.jqx.mobile.getTouchEventName("touchstart")+".touchScroll"),this.removeHandler(C(e),C.jqx.mobile.getTouchEventName("touchmove")+".touchScroll"),this.removeHandler(C(e),C.jqx.mobile.getTouchEventName("touchend")+".touchScroll"),this.removeHandler(C(e),"touchcancel.touchScroll"),C.jqx.mobile.touchScroll(e,i.vScrollInstance.max,function(e,t){null!=t&&"hidden"!=i.vScrollBar.css("visibility")&&(i.vScrollInstance.value,i.vScrollInstance.setPosition(t),i._lastScroll=new Date),null!=e&&"hidden"!=i.hScrollBar.css("visibility")&&(i.hScrollInstance.value,i.hScrollInstance.setPosition(e),i._lastScroll=new Date)},this.element.id,this.hScrollBar,this.vScrollBar),"visible"!=i.vScrollBar.css("visibility")&&"visible"!=i.hScrollBar.css("visibility")?C.jqx.mobile.setTouchScroll(!1,this.element.id):C.jqx.mobile.setTouchScroll(!0,this.element.id),this._arrange())},isTouchDevice:function(){var e=C.jqx.mobile.isTouchDevice();if(1==this.touchMode){if(this.touchDevice)return!0;if(C.jqx.browser.msie&&C.jqx.browser.version<9)return!1;e=this.touchDevice=!0,C.jqx.mobile.setMobileSimulator(this.element)}else 0==this.touchMode&&(e=!1);return e&&0!=this.touchModeStyle&&(this.scrollBarSize=C.jqx.utilities.touchScrollBarSize),e&&this.host.addClass(this.toThemeProperty("jqx-touch")),e},beginUpdate:function(){this.updatingListBox=!0},endUpdate:function(){this.updatingListBox=!1,this.allowDrag&&this._enableDragDrop||this.virtualSize&&this.virtualSize.height<10+this.host.height()?this._addItems(!0):this._addItems(!1),this._renderItems(),this.allowDrag&&this._enableDragDrop&&this._enableDragDrop()},beginUpdateLayout:function(){this.updating=!0},resumeUpdateLayout:function(){this.updating=!1,this.vScrollInstance.value=0,this._render(!1)},propertiesChangedHandler:function(e,t,i){i.width&&i.height&&2==Object.keys(i).length&&(e._cachedItemHtml=new Array,e.refresh())},propertyChangedHandler:function(e,t,i,s){var l,n;null!=this.isInitialized&&0!=this.isInitialized&&i!=s&&(e.batchUpdate&&e.batchUpdate.width&&e.batchUpdate.height&&2==Object.keys(e.batchUpdate).length||("_renderOnDemand"==t&&(e._render(!1,!0),-1!=e.selectedIndex&&(l=e.selectedIndex,e.selectedIndex=-1,e._stopEvents=!0,e.selectIndex(l,!1,!0),-1==e.selectedIndex&&(e.selectedIndex=l),e._stopEvents=!1)),"filterable"==t&&e.refresh(),"filterHeight"==t&&e._arrange(),"filterPlaceHolder"==t&&e.filterInput.attr("placeholder",s),"renderer"==t&&(e._cachedItemHtml=new Array,e.refresh()),"itemHeight"!=t&&"checkboxSize"!==t||e.refresh(),"source"!=t&&"checkboxes"!=t||(null==s&&i&&i.unbindBindingUpdate&&(i.unbindBindingUpdate(e.element.id),i.unbindDownloadComplete(e.element.id)),e.clearSelection(),e.refresh()),"scrollBarSize"!=t&&"equalItemsWidth"!=t||s!=i&&e._updatescrollbars(),"disabled"==t&&(e._renderItems(),e.vScrollBar.jqxScrollBar({disabled:s}),e.hScrollBar.jqxScrollBar({disabled:s})),"touchMode"!=t&&"rtl"!=t||(e._removeHandlers(),e.vScrollBar.jqxScrollBar({touchMode:s}),e.hScrollBar.jqxScrollBar({touchMode:s}),"touchMode"==t&&(C.jqx.browser.msie&&C.jqx.browser.version<9||(n=C("<div class='overlay' unselectable='on' style='z-index: 99; -webkit-appearance: none; border: none; background: black; opacity: 0.01; outline: none; border: none; padding: 0px; overflow: hidden; margin: 0px; align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div>"),e.content.parent().append(n),e.overlayContent=e.host.find(".overlay"))),e.filterable&&e.filterInput&&("rtl"==t&&s?e.filterInput.addClass(e.toThemeProperty("jqx-rtl")):"rtl"!=t||s||e.filterInput.removeClass(e.toThemeProperty("jqx-rtl")),e._arrange()),e._updateTouchScrolling(),e._addHandlers(),e._render(!1)),this.updating||"width"!=t&&"height"!=t||e._updateSize(),"theme"==t&&i!=s&&(e.hScrollBar.jqxScrollBar({theme:e.theme}),e.vScrollBar.jqxScrollBar({theme:e.theme}),e.host.removeClass(),e.host.addClass(e.toThemeProperty("jqx-listbox")),e.host.addClass(e.toThemeProperty("jqx-widget")),e.host.addClass(e.toThemeProperty("jqx-widget-content")),e.host.addClass(e.toThemeProperty("jqx-reset")),e.host.addClass(e.toThemeProperty("jqx-rc-all")),e.refresh()),"selectedIndex"==t&&(e.clearSelection(),e.selectIndex(s,!0)),"displayMember"!=t&&"valueMember"!=t||(i!=s&&(n=e.selectedIndex,e.refresh(),e.selectedIndex=n,e.selectedIndexes[n]=n),e._renderItems()),"autoHeight"==t&&(i!=s?e._render(!1):(e._updatescrollbars(),e._renderItems())),e._checkForHiddenParent&&C.jqx.isHidden(e.host)&&C.jqx.utilities.resize(this.host,function(){e._updateSize()},!1,e._checkForHiddenParent)))},loadFromSelect:function(e){var t;null==e||0<(t=C("#"+e)).length&&(t=(e=C.jqx.parseSourceTag(t[0])).items,e=e.index,this.source=t,this.fromSelect=!0,this.clearSelection(),this.selectedIndex=e,this.selectedIndexes[this.selectedIndex]=this.selectedIndex,this.refresh())},invalidate:function(){this._cachedItemHtml=[],this._renderItems(),this.virtualSize=null,this._updateSize()},refresh:function(e){var t=this;if(null!=this.vScrollBar){this.itemHeight=parseInt(this.itemHeight),this._cachedItemHtml=[],this.visibleItems=new Array;function i(e){1==e&&-1!=t.selectedIndex&&(e=t.selectedIndex,t.selectedIndex=-1,t._stopEvents=!0,t.selectIndex(e,!1,!0),-1==t.selectedIndex&&(t.selectedIndex=e),t._stopEvents=!1)}if(null!=this.itemswrapper&&(this.itemswrapper.remove(),this.itemswrapper=null),C.jqx.dataAdapter&&null!=this.source&&this.source._source)return this.databind(this.source,e),void i(e);!this.autoBind&&(this.autoBind||e)||(this.field&&this.loadSelectTag(),this.items=this.loadItems(this.source)),this._render(!1,1==e),i(e),this._raiseEvent("6")}},loadSelectTag:function(){var e=C.jqx.parseSourceTag(this.field);this.source=e.items,-1==this.selectedIndex&&(this.selectedIndex=e.index)},_render:function(e,t){return this._renderOnDemand?(this.visibleItems=new Array,this.renderedVisibleItems=new Array,void this._renderItems()):(this._addItems(),this._renderItems(),this.vScrollInstance.setPosition(0),this._cachedItemHtml=new Array,(null==e||e)&&null!=this.items&&null!=this.items&&0<=this.selectedIndex&&this.selectedIndex<this.items.length&&this.selectIndex(this.selectedIndex,!0,!0,!0),this.allowDrag&&this._enableDragDrop&&(this._enableDragDrop(),this.isTouchDevice())?(this._removeHandlers(),this.overlayContent&&(this.overlayContent.remove(),this.overlayContent=null),this._updateTouchScrolling(),void this._addHandlers()):(this._updateTouchScrolling(),this.rendered&&this.rendered(),void(this.ready&&this.ready())))},_hitTest:function(e,t){this.filterable&&(t-=this.filterHeight)<0&&(t=0);var i=parseInt(this.vScrollInstance.value),s=this._searchFirstVisibleIndex(t+i,this.renderedVisibleItems);if(null!=this.renderedVisibleItems[s]&&this.renderedVisibleItems[s].isGroup)return null;if(0<this.renderedVisibleItems.length){var l=this.renderedVisibleItems[this.renderedVisibleItems.length-1];if(l.height+l.top<t+i)return null}return s=this._searchFirstVisibleIndex(t+i),this.visibleItems[s]},_searchFirstVisibleIndex:function(e,t){null==e&&(e=parseInt(this.vScrollInstance.value));var i=0;null!=t&&null!=t||(t=this.visibleItems);for(var s=t.length;i<=s;){var l=parseInt((i+s)/2),n=t[l];if(null==n)break;if(n.initialTop>e&&n.initialTop+n.height>e)s=l-1;else{if(!(n.initialTop<e&&n.initialTop+n.height<=e))return l;i=l+1}}return 0},_renderItems:function(){if(null!=this.items&&0!=this.items.length){if(1!=this.updatingListBox){var e=this.isTouchDevice(),t=this.vScrollInstance,i=this.hScrollInstance,s=parseInt(t.value),l=parseInt(i.value);this.rtl&&"hidden"!=this.hScrollBar[0].style.visibility&&(l=i.max-l);this.items.length,this.host.width();var n=parseInt(this.content[0].style.width),r=n+parseInt(i.max);parseInt(this.vScrollBar[0].style.width);this.vScrollBar[0].style.visibility,"visible"!=this.hScrollBar[0].style.visibility&&(r=n);this._getVirtualItemsCount();var a=new Array,h=0,o=parseInt(this.element.style.height)+2;-1!=this.element.style.height.indexOf("%")&&(o=this.host.outerHeight()),isNaN(o)&&(o=0);var d=0,c=0,u=0;if(0==t.value||0==this.visibleItems.length)for(var m=0;m<this.items.length;m++)(_=this.items[m]).visible&&(_.top=-s,_.initialTop=-s,!_.isGroup&&_.visible&&((this.visibleItems[c++]=_).visibleIndex=c-1),(this.renderedVisibleItems[u++]=_).left=-l,0<=_.top+_.height&&_.top-_.height<=o&&(a[h++]={index:m,item:_}),s-=_.height,s--);for(var v=0<s?this._searchFirstVisibleIndex(this.vScrollInstance.value,this.renderedVisibleItems):0,p=0,h=0,g=this.vScrollInstance.value,b=0;p<100+o;){if(null==(_=this.renderedVisibleItems[v]))break;if(_.visible&&(_.left=-l,0<=_.top+_.height-g&&_.initialTop-g-_.height<=2*o&&(a[h++]={index:v,item:_})),v++,_.visible&&(p+=_.initialTop-g+_.height-p),++b>this.items.length-1)break}if(!this._renderOnDemand){var x=this.toThemeProperty("jqx-listitem-state-normal")+" "+this.toThemeProperty("jqx-item"),f=this.toThemeProperty("jqx-listitem-state-group"),I=this.toThemeProperty("jqx-listitem-state-disabled")+" "+this.toThemeProperty("jqx-fill-state-disabled");this.checkboxes&&(x+=" checkboxes");for(var y=0,S=this,m=0;m<this.visualItems.length;m++){var _,w,k,q,j,B,T=this.visualItems[m],H=function(){var e=T[0].firstChild;S.checkboxes&&(e=T[0].lastChild),null!=e&&(e.style.visibility="hidden",e.className=""),S.checkboxes&&(T[0].firstChild.style.visibility="hidden")};!(m<a.length)||(_=a[m].item).initialTop-g>=o?H():(w=C(T[0].firstChild),this.checkboxes&&(w=C(T[0].lastChild)),0!=w.length&&null!=w[0]&&(w[0].className="",w[0].style.display="block",w[0].style.visibility="inherit",H="",H=!_.isGroup&&0<=!this.selectedIndexes[_.index]?x:f,(_.disabled||this.disabled)&&(H+=" "+I),this.roundedcorners&&(H+=" "+this.toThemeProperty("jqx-rc-all")),e&&(H+=" "+this.toThemeProperty("jqx-listitem-state-normal-touch")),w[0].className=H,this.renderer?(_.key||(_.key=this.generatekey()),this._cachedItemHtml||(this._cachedItemHtml=new Array),this._cachedItemHtml[_.key]?w[0].innerHTML!=this._cachedItemHtml[_.key]&&(w[0].innerHTML=this._cachedItemHtml[_.key]):(H=this.renderer(_.index,_.label,_.value),w[0].innerHTML=H,this._cachedItemHtml[_.key]=w[0].innerHTML)):(-1!==this.itemHeight&&(k=2+2*parseInt(w.css("padding-top")),w[0].style.lineHeight=_.height-k+"px",w.css("vertical-align","middle")),null!=_.html&&0<_.html.toString().length?w[0].innerHTML=_.html:null!=_.label||null!=_.value?null!=_.label?(w[0].innerHTML!==_.label&&(w[0].innerHTML=_.label),""==C.trim(_.label)&&(w[0].innerHTML=this.emptyString,""==this.emptyString&&(w[0].style.height=_.height-8+"px")),this.incrementalSearch||_.disabled||null!=this.searchString&&""!=this.searchString&&(w[0].innerHTML=this._highlight(_.label.toString(),this.searchString))):null===_.label?(w[0].innerHTML=this.emptyString,""==this.emptyString&&(w[0].style.height=_.height-8+"px")):w[0].innerHTML!==_.value?w[0].innerHTML=_.value:""==_.label&&(w[0].innerHTML=" "):""!=_.label&&null!=_.label||(w[0].innerHTML="",w[0].style.height=_.height-8+"px")),T[0].style.left=_.left+"px",T[0].style.top=_.initialTop-g+"px",_.element=w[0],this.isMaterialized()&&!this.renderer&&this._checkForHiddenParent&&(C(_.element).addClass("ripple"),C.jqx.ripple(C(_.element))),_.title&&(w[0].title=_.title),this.equalItemsWidth&&!_.isGroup?(0==d&&(q=parseInt(r),q-=parseInt(w.outerWidth())-parseInt(w.width()),k=null!=(k=1)?parseInt(k):0,"border-box"===this.host.css("box-sizing")&&(q-=2),d=q,this.checkboxes&&"hidden"==this.hScrollBar[0].style.visibility&&(d-=this.checkboxSize+13)),n>this.virtualSize.width?(w[0].style.width=d+"px",_.width=d):(w[0].style.width=-4+this.virtualSize.width+"px",_.width=this.virtualSize.width-4)):w.width()<this.host.width()&&w.width(this.host.width()-2),this.rtl&&(w[0].style.textAlign="right"),this.autoItemsHeight&&(w[0].style.whiteSpace="pre-line",w.width(d),_.width=d),y=0,this.checkboxes&&!_.isGroup?(0==y&&(y=(_.height-this.checkboxSize-3)/2,y=parseInt(y),y++),(B=C(T.children()[0]))[0].item=_,this.rtl?"0px"!=w[0].style.left&&(w[0].style.left="0px"):(j=this.checkboxSize+9,w[0].style.left!=j+"px"&&(w[0].style.left=j+"px")),this.rtl&&B.css("left",8+_.width+"px"),B[0].style.top=y+"px",B[0].style.display="block",B[0].style.visibility="inherit",q=_.checked,j=_.checked?" "+this.toThemeProperty("jqx-checkbox-check-checked"):"",B[0].setAttribute("checked",_.checked),B[0].firstChild&&B[0].firstChild.firstChild&&B[0].firstChild.firstChild.firstChild&&B[0].firstChild.firstChild&&(q?B[0].firstChild.firstChild.firstChild.className=j:!1===q?B[0].firstChild.firstChild.firstChild.className="":null===q&&(B[0].firstChild.firstChild.firstChild.className=this.toThemeProperty("jqx-checkbox-check-indeterminate"))),C.jqx.ariaEnabled&&(q?T[0].setAttribute("aria-selected",!0):T[0].removeAttribute("aria-selected"))):this.checkboxes&&(B=C(T.children()[0])).css({display:"none",visibility:"inherit"}),!_.disabled&&(!this.filterable&&0<=this.selectedIndexes[_.visibleIndex]||_.selected&&this.filterable)?(w.addClass(this.toThemeProperty("jqx-listitem-state-selected")),w.addClass(this.toThemeProperty("jqx-fill-state-pressed")),C.jqx.ariaEnabled&&(T[0].setAttribute("aria-selected",!0),this._activeElement=T[0])):this.checkboxes||C.jqx.ariaEnabled&&T[0].removeAttribute("aria-selected")))}}}}else this.visibleItems=new Array},escape_HTML:function(e){return e.replace(/[&<>"]/g,function(e){return{"&":"&","<":"<",">":">",'"':'"'}[e]||e})},generatekey:function(){function e(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},_calculateVirtualSize:function(e){if(!this._renderOnDemand){var t=0,i=2,s=0,l=document.createElement("span");this.equalItemsWidth&&C(l).css("float","left"),l.style.whiteSpace="pre";var n=0,r=void 0===e?this.host.outerHeight():e+2;document.body.appendChild(l);var a=this.items.length,h=this.host.width();if(this.autoItemsHeight&&(h-=10,"hidden"!=this.vScrollBar.css("visibility")&&(h-=20)),this.autoItemsHeight||this.renderer||1<=this.groups.length||0<a&&null!=this.items[0].html&&""!=this.items[0].html)for(var o,s=0;s<a;s++)(d=this.items[s]).isGroup&&""==d.label&&""==d.html||d.visible&&(c="",d.isGroup?c+=this.toThemeProperty("jqx-listitem-state-group jqx-rc-all"):c+=this.toThemeProperty("jqx-widget jqx-listitem-state-normal jqx-rc-all"),c+=" "+this.toThemeProperty("jqx-fill-state-normal"),this.isTouchDevice()&&(c+=" "+this.toThemeProperty("jqx-touch")),l.className=c,this.autoItemsHeight&&(l.style.whiteSpace="pre-line",u=this.checkboxSize+9,m=this.checkboxes?-u:0,l.style.width=m+h+"px"),this.renderer?(o=this.renderer(d.index,d.label,d.value),l.innerHTML=o):null!=d.html&&0<d.html.toString().length?l.innerHTML=d.html:null==d.label&&null==d.value||(null!=d.label?(l.innerHTML=d.label,""==d.label&&(l.innerHTML="Empty")):l.innerHTML=this.escape_HTML(d.value)),v=l.offsetHeight,o=l.offsetWidth,-1<this.itemHeight&&(v=this.itemHeight),d.height=v,d.width=o,i+=++v,t=Math.max(t,o),i<=r&&n++);else{for(var d,c,u,m,v,i=0,p=0,g="",b=0,x=0,f=-1,s=0;s<a;s++)(d=this.items[s]).isGroup&&""==d.label&&""==d.html||d.visible&&(c="",0==++f&&(c+=this.toThemeProperty("jqx-listitem-state-normal jqx-rc-all"),c+=" "+this.toThemeProperty("jqx-fill-state-normal"),c+=" "+this.toThemeProperty("jqx-widget"),c+=" "+this.toThemeProperty("jqx-listbox"),c+=" "+this.toThemeProperty("jqx-widget-content"),this.isTouchDevice()&&(c+=" "+this.toThemeProperty("jqx-touch"),c+=" "+this.toThemeProperty("jqx-listitem-state-normal-touch")),l.className=c,this.autoItemsHeight&&(l.style.whiteSpace="pre-line",u=this.checkboxSize+9,m=this.checkboxes?-u:0,l.style.width=m+h+"px"),null==d.html||""==d.label||null==d.label?l.innerHTML="Item":null!=d.html&&0<d.html.toString().length?l.innerHTML=d.html:null==d.label&&null==d.value||(null!=d.label?null!=d.label.toString().match(new RegExp("\\w"))||null!=d.label.toString().match(new RegExp("\\d"))?l.innerHTML=d.label:l.innerHTML="Item":l.innerHTML=d.value),v=1+l.offsetHeight,-1<this.itemHeight&&(v=this.itemHeight),p=v),null!=b&&(x=b),null!=d.html&&0<d.html.toString().length?x!=(b=Math.max(b,d.html.toString().length))&&(g=d.html):null!=d.label?x!=(b=Math.max(b,d.label.length))&&(g=d.label):null!=d.value&&x!=(b=Math.max(b,d.value.length))&&(g=d.value),i+=d.height=p,++i<=r&&n++);l.innerHTML=g,t=l.offsetWidth}return i+=2,n<10&&(n=10),this.filterable&&(i+=this.filterHeight),i-=4,l.parentNode.removeChild(l),{width:t,height:i,itemsPerPage:n}}},_getVirtualItemsCount:function(){if(0!=this.virtualItemsCount)return this.virtualItemsCount;var e=parseInt(this.host.height())/5;return e>this.items.length&&(e=this.items.length),e},_addItems:function(e){if(!this._renderOnDemand&&1!=(l=this).updatingListBox){if(null==l.items||0==l.items.length)return l.virtualSize={width:0,height:0,itemsPerPage:0},l._updatescrollbars(),l.renderedVisibleItems=new Array,void(l.itemswrapper&&l.itemswrapper.children().remove());var t=l.host.height();if(0==e){var i=2*(c=l._calculateVirtualSize(t)).itemsPerPage;l.autoHeight&&(i=l.items.length),l.virtualItemsCount=Math.min(i,l.items.length);c.width;return l.virtualSize=c,void l._updatescrollbars()}var s=0;l.visibleItems=new Array,l.renderedVisibleItems=new Array,l._removeHandlers(),l.allowDrag&&l._enableDragDrop&&(l.itemswrapper=null),null==l.itemswrapper&&(l.content[0].innerHTML="",l.itemswrapper=C('<div style="outline: 0 none; overflow:hidden; width:100%; position: relative;"></div>'),l.itemswrapper[0].style.height=2*t+"px",l.content[0].appendChild(l.itemswrapper[0]));i=2*(c=l._calculateVirtualSize(t)).itemsPerPage;l.autoHeight&&(i=l.items.length),l.virtualItemsCount=Math.min(i,l.items.length);var l=this;c.width;l.virtualSize=c;e=Math.max(l.host.width(),17+c.width);l.itemswrapper[0].style.width=e+"px";for(var n="",r=C.jqx.browser.msie&&C.jqx.browser.version<9?' unselectable="on"':"",a=0;a<l.virtualItemsCount;a++){var h,o=l.items[a],d="listitem"+a+l.element.id;""!=l.theme?n+="<div"+r+" role='option' id='"+d+"' class='jqx-listitem-element jqx-listitem-element-"+l.theme+"'>":n+="<div"+r+" role='option' id='"+d+"' class='jqx-listitem-element'>",l.checkboxes&&(n+='<div style="background-color: transparent; padding: 0; margin: 0; overflow:hidden; position: absolute; float: left; width: '+(h=this.checkboxSize+8)+"px; height:  "+h+'px;" class="'+l.toThemeProperty("jqx-checkbox")+' chkbox">',d='<div class="'+l.toThemeProperty("jqx-checkbox-default")+" "+l.toThemeProperty("jqx-fill-state-normal")+" "+l.toThemeProperty("jqx-rc-all")+'"><div style="cursor: pointer; width:  '+this.checkboxSize+"px; height:  "+this.checkboxSize+'px;">',h=o.checked?" "+l.toThemeProperty("jqx-checkbox-check-checked"):"",d+='<span style="width: '+this.checkboxSize+"px; height:  "+this.checkboxSize+'px;" class="checkBoxCheck'+h+'"></span>',n+=d+="</div></div>",n+="</div>"),n+="<span"+r+" style='white-space: pre; -ms-touch-action: none;'></span></div>"}this.WinJS?l.itemswrapper.html(n):l.itemswrapper[0].innerHTML=n;for(var c,u=l.itemswrapper.children(),a=0;a<l.virtualItemsCount;a++){var o=l.items[a],m=C(u[a]);l.allowDrag&&l._enableDragDrop&&m.addClass("draggable"),l.checkboxes&&(C(m.children()[0]),m.css("float","left"),C(m[0].firstChild).css("float","left")),m[0].style.height=o.height+"px",m[0].style.top=s+"px",s+=o.height+1,l.visualItems[a]=m}l._addHandlers(),l._updatescrollbars(),l.autoItemsHeight&&(i=2*(c=l._calculateVirtualSize(t)).itemsPerPage,l.autoHeight&&(i=l.items.length),l.virtualItemsCount=Math.min(i,l.items.length),l=this,c.width,l.virtualSize=c,l._updatescrollbars()),C.jqx.browser.msie&&C.jqx.browser.version<8&&(l.host.attr("hideFocus",!0),l.host.find("div").attr("hideFocus",!0))}},_updatescrollbars:function(){var e,t,i,s,l,n,r,a,h,o,d=this;d.virtualSize&&(e=d.virtualSize.height,t=d.virtualSize.width,i=d.vScrollInstance,s=d.hScrollInstance,d._arrange(!1),l=!1,n=d.host.outerWidth(),r=d.host.outerHeight(),h=0,n<t&&(h=d.hScrollBar.outerHeight()+2),r<e+h?(o=i.max,i.max=2+parseInt(e)+h-parseInt(r-2),"inherit"!=d.vScrollBar[0].style.visibility&&(d.vScrollBar[0].style.visibility="inherit",l=!0),o!=i.max&&i._arrange()):"hidden"!=d.vScrollBar[0].style.visibility&&(d.vScrollBar[0].style.visibility="hidden",l=!0,i.setPosition(0)),a=0,"hidden"!=d.vScrollBar[0].style.visibility&&(a=d.scrollBarSize+6),h=d.checkboxes?this.checkboxSize+6:0,d.autoItemsHeight?d.hScrollBar[0].style.visibility="hidden":n-a-h<=t?(o=s.max,"inherit"==d.vScrollBar[0].style.visibility?s.max=h+a+parseInt(t)-d.host.width()+2:s.max=h+parseInt(t)-d.host.width()+4,"inherit"!=d.hScrollBar[0].style.visibility&&(d.hScrollBar[0].style.visibility="inherit",l=!0),o!=s.max&&s._arrange(),"inherit"==d.vScrollBar[0].style.visibility&&(i.max=2+parseInt(e)+d.hScrollBar.outerHeight()+2-parseInt(d.host.height()))):"hidden"!=d.hScrollBar[0].style.visibility&&(d.hScrollBar[0].style.visibility="hidden",l=!0),s.setPosition(0),l&&d._arrange(),d.itemswrapper&&(d.itemswrapper[0].style.width=Math.max(0,Math.max(n-2,17+t))+"px",d.itemswrapper[0].style.height=Math.max(0,2*r)+"px"),d.isTouchDevice()&&("visible"!=d.vScrollBar.css("visibility")&&"visible"!=d.hScrollBar.css("visibility")?C.jqx.mobile.setTouchScroll(!1,d.element.id):C.jqx.mobile.setTouchScroll(!0,d.element.id)))},clear:function(){this.source=null,this.visibleItems=new Array,this.renderedVisibleItems=new Array,this.itemsByValue=new Array,this.clearSelection(),this.refresh()},clearSelection:function(e){for(var t=0;t<this.selectedIndexes.length;t++)this.selectedIndexes[t]&&-1!=this.selectedIndexes[t]&&this._raiseEvent("1",{index:t,type:"api",item:this.getVisibleItem(t),originalEvent:null}),this.selectedIndexes[t]=-1;this.selectedIndex=-1,this.selectedValue=null,this.selectedValues=new Array,0!=e&&this._renderItems()},unselectIndex:function(e,t){if(!isNaN(e)){for(var i,s=!(this.selectedIndexes[e]=-1),l=0;l<this.selectedIndexes.length;l++){var n=this.selectedIndexes[l];-1!=n&&null!=n&&(s=!0)}s||(this.selectedValue=null,this.selectedIndex=-1,(i=this.getVisibleItem(e))&&this.selectedValues[i.value]&&(this.selectedValues[i.value]=null)),null!=t&&1!=t||(this._renderItems(),this._raiseEvent("1",{index:e,type:"api",item:this.getVisibleItem(e),originalEvent:null})),this._updateInputSelection(),this._raiseEvent("2",{index:e,type:"api",item:this.getItem(e)})}},getInfo:function(){var r=this,e=this.getItems(),a=this.getVisibleItems(),t=function(){var e=r.vScrollInstance.value;r.filterable&&(e-=r.filterHeight);for(var t=new Array,i=0;i<a.length;i++){var s,l,n=a[i];n&&(l=!0,((s=n.initialTop)+n.height-e<0||s-e>=r.host.height())&&(l=!1),l&&t.push(n))}return t}();return{items:e,visibleItems:a,viewItems:t}},getItem:function(e){if(-1==e||isNaN(e)||"string"==typeof e)return-1===e?null:this.getItemByValue(e);var t=null;C.each(this.items,function(){if(this.index==e)return t=this,!1});return t},getVisibleItem:function(e){return-1==e||isNaN(e)||"string"==typeof e?-1===e?null:this.getItemByValue(e):this.visibleItems[e]},getVisibleItems:function(){return this.visibleItems},checkIndex:function(e,t,i){var s;this.checkboxes&&(isNaN(e)||e<0||e>=this.visibleItems.length||null!=this.visibleItems[e]&&this.visibleItems[e].disabled||this.disabled||(s=this.getItem(e),(0<this.groups.length||this.filterable)&&(s=this.getVisibleItem(e)),null!=s&&(C(s.checkBoxElement),s.checked=!0,null!=t&&1!=t||this._updateCheckedItems()),null!=i&&1!=i||this._raiseEvent(3,{label:s.label,value:s.value,checked:!0,item:s})))},getCheckedItems:function(){if(!this.checkboxes)return null;var e=new Array;return null!=this.items?(C.each(this.items,function(){this.checked&&(e[e.length]=this)}),e):void 0},checkAll:function(t){var i;this.checkboxes&&(this.disabled||(i=this,C.each(this.items,function(){var e=this.checked;!(this.checked=!0)!==t&&!0!==e&&i._raiseEvent(3,{label:this.label,value:this.value,checked:!0,item:this})}),this._updateCheckedItems()))},uncheckAll:function(t){var i;this.checkboxes&&(this.disabled||(i=this,C.each(this.items,function(){var e=this.checked;(this.checked=!1)!==t&&!1!==e&&(this.checked=!1,i._raiseEvent(3,{label:this.label,value:this.value,checked:!1,item:this}))}),this._updateCheckedItems()))},uncheckIndex:function(e,t,i){var s;this.checkboxes&&(isNaN(e)||e<0||e>=this.visibleItems.length||null!=this.visibleItems[e]&&this.visibleItems[e].disabled||this.disabled||(s=this.getItem(e),(0<this.groups.length||this.filterable)&&(s=this.getVisibleItem(e)),null!=s&&(C(s.checkBoxElement),s.checked=!1,null!=t&&1!=t||this._updateCheckedItems()),null!=i&&1!=i||this._raiseEvent(3,{label:s.label,value:s.value,checked:!1,item:s})))},indeterminateIndex:function(e,t,i){var s;this.checkboxes&&(isNaN(e)||e<0||e>=this.visibleItems.length||null!=this.visibleItems[e]&&this.visibleItems[e].disabled||this.disabled||(s=this.getItem(e),(0<this.groups.length||this.filterable)&&(s=this.getVisibleItem(e)),null!=s&&(C(s.checkBoxElement),(s.checked=null)!=t&&1!=t||this._updateCheckedItems()),null!=i&&1!=i||this._raiseEvent(3,{checked:null})))},getSelectedIndex:function(){return this.selectedIndex},getSelectedItems:function(){var e,t=this.getVisibleItems(),i=this.selectedIndexes,s=[];for(e in i)-1!=i[e]&&(s[s.length]=t[e]);return s},getSelectedItem:function(){var e=this.getSelectedItems();return e&&0<e.length?e[0]:null},_updateCheckedItems:function(){var e=this.selectedIndex;this.clearSelection(!1);this.getCheckedItems();this.selectedIndex=e,this._renderItems();e=C.data(this.element,"hoveredItem");null!=e&&(C(e).addClass(this.toThemeProperty("jqx-listitem-state-hover")),C(e).addClass(this.toThemeProperty("jqx-fill-state-hover"))),this._updateInputSelection()},getItemByValue:function(e){if(null!=this.visibleItems){if(e&&e.value&&(e=e.value),this.itemsByValue)return this.itemsByValue[C.trim(e).split(" ").join("?")];for(var t=this.visibleItems,i=0;i<t.length;i++)if(t[i].value==e)return t[i]}},checkItem:function(e){if(null==e)return!1;e=this._getItemByParam(e);return this.checkIndex(e.visibleIndex,!0)},uncheckItem:function(e){if(null==e)return!1;e=this._getItemByParam(e);return this.uncheckIndex(e.visibleIndex,!0)},indeterminateItem:function(e){if(null==e)return!1;e=this._getItemByParam(e);return this.indeterminateIndex(e.visibleIndex,!0)},val:function(i){if(this.input){if(function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return"number"!=typeof i&&("date"!=typeof i&&("boolean"!=typeof i&&"string"!=typeof i))}(i)||0==arguments.length)return this.input.val();var e=this.getItemByValue(i);return null!=e&&this.selectItem(e),this.input?this.input.val():void 0}},selectItem:function(e){var t;return null!=e?(null!=e.index||(t=this.getItemByValue(e))&&(e=t),this.selectIndex(e.visibleIndex,!0)):(this.clearSelection(),!1)},unselectItem:function(e){return null!=e&&(null!=e.index||(t=this.getItemByValue(e))&&(e=t),this.unselectIndex(e.visibleIndex,!0));var t},selectIndex:function(e,t,i,s,l,n){if(!isNaN(e)){var r=this.selectedIndex;if(this.filterable&&(this.selectedIndex=-1),!(e<-1||e>=this.visibleItems.length||null!=this.visibleItems[e]&&this.visibleItems[e].disabled||this.disabled)){if(this.multiple||this.multipleextended||this.selectedIndex!=e||s||this.checkboxes){if(this.checkboxes){this._updateCheckedItems();var a=r;this.selectedIndex!=e||this.multiple||(a=-1),null==l&&(l="none");var h=this.getItem(e),o=this.getItem(a);return this.visibleItems&&this.items&&this.visibleItems.length!=this.items.length&&(h=this.getVisibleItem(e),o=this.getVisibleItem(a)),this._raiseEvent("1",{index:a,type:l,item:o,originalEvent:n}),this.selectedIndex=e,this.selectedIndexes[a]=-1,this.selectedIndexes[e]=e,h&&(this.selectedValue=h.value,this.selectedValues[h.value]=h.value),this._raiseEvent("0",{index:e,type:l,item:h,originalEvent:n}),void this._renderItems()}var d=!(this.focused=!0);this.selectedIndex!=e&&(d=!0);a=r;this.selectedIndex!=e||this.multiple||(a=-1),null==l&&(l="none");h=this.getItem(e),o=this.getItem(a);if(this.visibleItems&&this.items&&this.visibleItems.length!=this.items.length&&(h=this.getVisibleItem(e),o=this.getVisibleItem(a)),null!=s&&s)this._raiseEvent("1",{index:a,type:l,item:o,originalEvent:n}),this.selectedIndex=e,this.selectedIndexes[a]=-1,this.selectedIndexes[e]=e,h&&(this.selectedValue=h.value,this.selectedValues[h.value]=h.value),this._raiseEvent("0",{index:e,type:l,item:h,originalEvent:n});else{function c(e,t,i,s,l,n){u._raiseEvent("1",{index:t,type:i,item:s,originalEvent:n}),u.selectedIndex=e,u.selectedIndexes=[],t=e,u.selectedIndexes[e]=e,u.selectedValues=new Array,l&&(u.selectedValues[l.value]=l.value),u._raiseEvent("0",{index:e,type:i,item:l,originalEvent:n})}var u=this,r=function(e,t,i,s,l,n){null==u.selectedIndexes[e]||-1==u.selectedIndexes[e]?(u.selectedIndexes[e]=e,u.selectedIndex=e,l&&(u.selectedValues[l.value]=l.value,u._raiseEvent("0",{index:e,type:i,item:l,originalEvent:n}))):(t=u.selectedIndexes[e],(s=u.getVisibleItem(t))&&(u.selectedValues[s.value]=null),u.selectedIndexes[e]=-1,u.selectedIndex=-1,u._raiseEvent("1",{index:t,type:i,item:s,originalEvent:n}))};if(this.multipleextended)if(this._shiftKey||this._ctrlKey){if(this._ctrlKey)"keyboard"==l&&(this.clearSelection(!1),u._clickedIndex=e),r(e,0,l,0,h,n);else if(this._shiftKey){null==u._clickedIndex&&(u._clickedIndex=a);var s=Math.min(u._clickedIndex,e),m=Math.max(u._clickedIndex,e);this.clearSelection(!1);for(var v=s;v<=m;v++)u.selectedIndexes[v]=v,u.selectedValues[u.getVisibleItem(v).value]=u.getVisibleItem(v).value,u._raiseEvent("0",{index:v,type:l,item:this.getVisibleItem(v),originalEvent:n});u.selectedIndex="keyboard"!=l?u._clickedIndex:e}}else"keyboard"!=l&&"mouse"!=l?(r(e,0,l,0,h,n),u._clickedIndex=e):(this.clearSelection(!1),u._clickedIndex=e,c(e,a,l,o,h,n));else this.multiple?r(e,0,l,0,h,n):(h&&(this.selectedValue=h.value),c(e,a,l,o,h,n))}return null!=i&&1!=i||this._renderItems(),null!=t&&null!=t&&1==t&&this.ensureVisible(e),this._raiseEvent("2",{index:e,item:h,oldItem:o,type:l,originalEvent:n}),this._updateInputSelection(),d}this.visibleItems&&this.items&&this.visibleItems.length!=this.items.length&&(h=this.getVisibleItem(e))&&(this.selectedValue=h.value,this.selectedValues[h.value]=h.value)}}},_updateInputSelection:function(){this._syncSelection();var i=new Array;if(this.input&&(-1==this.selectedIndex?this.input.val(""):this.items&&null!=this.items[this.selectedIndex]&&(this.input.val(this.items[this.selectedIndex].value),i.push(this.items[this.selectedIndex].value)),this.multiple||this.multipleextended||this.checkboxes)){var e=this.checkboxes?this.getCheckedItems():this.getSelectedItems(),t="";if(e){for(var s=0;s<e.length;s++)null!=e[s]&&(s==e.length-1?t+=e[s].value:t+=e[s].value+",",i.push(e[s].value));this.input.val(t)}}this.field&&this.input&&("select"==this.field.nodeName.toLowerCase()?C.each(this.field,function(e,t){C(this).removeAttr("selected"),this.selected=0<=i.indexOf(this.value),this.selected&&C(this).attr("selected",!0)}):C.each(this.items,function(e,t){C(this.originalItem.originalItem).removeAttr("data-selected"),this.selected=0<=i.indexOf(this.value),this.selected&&C(this.originalItem.originalItem).attr("data-selected",!0)}))},isIndexInView:function(e){if(isNaN(e))return!1;if(!this.items)return!1;if(e<0||e>=this.items.length)return!1;var t=this.vScrollInstance.value,i=0;this.filterable&&(i=this.filterHeight);var s=this.visibleItems[e];if(null==s)return!0;e=s.initialTop,s=s.height;return!(e-t<i||e-t+i+s>=this.host.outerHeight())},_itemsInPage:function(){var e=0,t=this;return this.items&&C.each(this.items,function(){return!(this.initialTop+this.height>=t.content.height())&&void e++}),e},_firstItemIndex:function(){return null!=this.visibleItems?this.visibleItems[0]&&this.visibleItems[0].isGroup?this._nextItemIndex(0):0:-1},_lastItemIndex:function(){return null!=this.visibleItems?this.visibleItems[this.visibleItems.length-1]&&this.visibleItems[this.visibleItems.length-1].isGroup?this._prevItemIndex(this.visibleItems.length-1):this.visibleItems.length-1:-1},_nextItemIndex:function(e){for(var t=e+1;t<this.visibleItems.length;t++)if(this.visibleItems[t]&&!this.visibleItems[t].disabled&&!this.visibleItems[t].isGroup)return t;return-1},_prevItemIndex:function(e){for(var t=e-1;0<=t;t--)if(this.visibleItems[t]&&!this.visibleItems[t].disabled&&!this.visibleItems[t].isGroup)return t;return-1},clearFilter:function(){this.filterInput.val(""),this._updateItemsVisibility("")},_search:function(e){var t=this,i=t.filterInput.val();if(9!=e.keyCode&&"none"!=t.searchMode&&null!=t.searchMode&&"undefined"!=t.searchMode&&16!=e.keyCode&&17!=e.keyCode&&20!=e.keyCode)return 37!=e.keyCode&&39!=e.keyCode&&void(e.altKey||18==e.keyCode||33<=e.keyCode&&e.keyCode<=40||(e.ctrlKey||e.metaKey||t.ctrlKey)&&88!=e.keyCode&&86!=e.keyCode||i!==t.searchString&&t._updateItemsVisibility(i))},_updateItemsVisibility:function(s){var e=this.getItems();if(null==e)return{index:-1,matchItem:new Array};var l=this,n=new Array,r=0;C.each(e,function(e){var t="";if(!this.isGroup){t=(t=this.searchLabel||this.label||this.value||this.title||"jqxItem").toString();var i=!1;switch(l.searchMode){case"containsignorecase":i=C.jqx.string.containsIgnoreCase(t,s);break;case"contains":i=C.jqx.string.contains(t,s);break;case"equals":i=C.jqx.string.equals(t,s);break;case"equalsignorecase":i=C.jqx.string.equalsIgnoreCase(t,s);break;case"startswith":i=C.jqx.string.startsWith(t,s);break;case"startswithignorecase":i=C.jqx.string.startsWithIgnoreCase(t,s);break;case"endswith":i=C.jqx.string.endsWith(t,s);break;case"endswithignorecase":i=C.jqx.string.endsWithIgnoreCase(t,s)}i||(this.visible=!1),i&&((n[r++]=this).visible=!0,this.visibleIndex),""==s&&(i=!(this.visible=!0))}}),l.renderedVisibleItems=new Array,l.visibleItems=new Array,l.vScrollInstance.setPosition(0,!0),l._addItems(!1),l._renderItems();for(var t,i=0;i<l.items.length;i++)l.selectedIndexes[i]=-1;for(t in l.selectedIndex=-1,l.selectedValues){var s=l.selectedValues[t],a=l.getItemByValue(s);a&&a.visible&&(l.selectedIndex=a.visibleIndex,l.selectedIndexes[a.visibleIndex]=a.visibleIndex)}l._syncSelection(),l.filterChange&&l.filterChange(s)},_getMatches:function(s,l){if(null==s||0==s.length)return-1;null==l&&(l=0);var e=this.getItems(),n=this,r=-1;return C.each(e,function(e){var t="";if(!this.isGroup){t=this.searchLabel?this.searchLabel.toString():this.label?this.label.toString():this.value?this.value.toString():this.title?this.title.toString():"jqxItem";var i=!1;switch(n.searchMode){case"containsignorecase":i=C.jqx.string.containsIgnoreCase(t,s);break;case"contains":i=C.jqx.string.contains(t,s);break;case"equals":i=C.jqx.string.equals(t,s);break;case"equalsignorecase":i=C.jqx.string.equalsIgnoreCase(t,s);break;case"startswith":i=C.jqx.string.startsWith(t,s);break;case"startswithignorecase":i=C.jqx.string.startsWithIgnoreCase(t,s);break;case"endswith":i=C.jqx.string.endsWith(t,s);break;case"endswithignorecase":i=C.jqx.string.endsWithIgnoreCase(t,s)}if(i&&this.visibleIndex>=l)return r=this.visibleIndex,!1}}),r},findItems:function(s){var e=this.getItems(),l=this,n=0,r=new Array;return C.each(e,function(e){var t="";if(!this.isGroup){t=this.label||this.value||this.title||"jqxItem";var i=!1;switch(l.searchMode){case"containsignorecase":i=C.jqx.string.containsIgnoreCase(t,s);break;case"contains":i=C.jqx.string.contains(t,s);break;case"equals":i=C.jqx.string.equals(t,s);break;case"equalsignorecase":i=C.jqx.string.equalsIgnoreCase(t,s);break;case"startswith":i=C.jqx.string.startsWith(t,s);break;case"startswithignorecase":i=C.jqx.string.startsWithIgnoreCase(t,s);break;case"endswith":i=C.jqx.string.endsWith(t,s);break;case"endswithignorecase":i=C.jqx.string.endsWithIgnoreCase(t,s)}i&&(r[n++]=this)}}),r},_syncSelection:function(){var e=this;if(e.filterable){if(e.items)for(var t=0;t<e.items.length;t++)(i=e.items[t]).selected=!1;for(t=0;t<e.visibleItems.length;t++){var i=e.visibleItems[t];e.selectedIndexes&&e.selectedIndexes[t]==i.visibleIndex&&(i.selected=!0)}e.itemswrapper&&e._renderItems()}},_handleKeyDown:function(e){var t=e.keyCode,i=this,s=i.selectedIndex,l=i.selectedIndex;if(this.keyboardNavigation&&this.enableSelection&&!(this.filterInput&&e.target==this.filterInput[0]||e.target instanceof HTMLInputElement&&C(e.target).ischildof(this.host))){function n(){(i.multiple||i.checkboxes)&&i.clearSelection(!1)}var r,a,h;if(e.altKey&&(t=-1),32==t&&this.checkboxes)return null!=(r=this.getItem(s))&&(i._updateItemCheck(r,s),e.preventDefault()),i._searchString="",i.selectIndex(r.visibleIndex,!1,!0,!0,"keyboard",e),void i._renderItems();if(i.incrementalSearch){var o=-1;i._searchString||(i._searchString=""),(8==t||46==t)&&1<=i._searchString.length&&(i._searchString=i._searchString.substr(0,i._searchString.length-1));var d=String.fromCharCode(t);e.key&&(d=e.key);var c=!isNaN(parseInt(d)),u=!1;if((65<=t&&t<=97||c||8==t||32==t||46==t)&&(e.shiftKey||(d=d.toLocaleLowerCase()),c=1+i.selectedIndex,8!=t&&32!=t&&46!=t&&(0<i._searchString.length&&i._searchString.substr(0,1)==d&&(c=1+i.selectedIndex),i._searchString+=d),32==t&&(i._searchString+=" "),c=this._getMatches(i._searchString,c),(o=c)!=i._lastMatchIndex&&-1!=o||(o=c=this._getMatches(i._searchString,0)),0<=(i._lastMatchIndex=o)&&(i._toSelectTimer&&clearTimeout(i._toSelectTimer),i._toSelectTimer=setTimeout(function(){n(),i.selectIndex(o,!1,!1,!1,"keyboard",e),i.isIndexInView(o)?i._renderItems():i.ensureVisible(o)},i.incrementalSearchKeyDownDelay)),u=!0),null!=i._searchTimer&&clearTimeout(i._searchTimer),27!=t&&13!=t||(i._searchString=""),i._searchTimer=setTimeout(function(){i._searchString="",i._renderItems()},i.incrementalSearchDelay),0<=o)return;if(u)return!1}if(33==t&&(a=i._itemsInPage(),0<=i.selectedIndex-a?(n(),i.selectIndex(l-a,!1,!1,!1,"keyboard",e)):(n(),i.selectIndex(i._firstItemIndex(),!1,!1,!1,"keyboard",e)),i._searchString=""),32==t&&this.checkboxes&&(null!=(r=this.getItem(s))&&(i._updateItemCheck(r,s),e.preventDefault()),i._searchString=""),36==t&&(n(),i.selectIndex(i._firstItemIndex(),!1,!1,!1,"keyboard",e),i._searchString=""),35==t&&(n(),i.selectIndex(i._lastItemIndex(),!1,!1,!1,"keyboard",e),i._searchString=""),34==t&&(a=i._itemsInPage(),i.selectedIndex+a<i.visibleItems.length?(n(),i.selectIndex(l+a,!1,!1,!1,"keyboard",e)):(n(),i.selectIndex(i._lastItemIndex(),!1,!1,!1,"keyboard",e)),i._searchString=""),38==t){if(i._searchString="",!(0<i.selectedIndex))return!1;if((h=i._prevItemIndex(i.selectedIndex))==i.selectedIndex||-1==h)return!0;n(),i.selectIndex(h,!1,!1,!1,"keyboard",e)}else if(40==t){if(i._searchString="",!(i.selectedIndex+1<i.visibleItems.length))return!1;if((h=i._nextItemIndex(i.selectedIndex))==i.selectedIndex||-1==h)return!0;n(),i.selectIndex(h,!1,!1,!1,"keyboard",e)}return 35!=t&&36!=t&&38!=t&&40!=t&&34!=t&&33!=t?!0:(i.isIndexInView(i.selectedIndex)?i._renderItems():i.ensureVisible(i.selectedIndex),!1)}},_updateItemCheck:function(e,t){if(!this.disabled)switch(1==e.checked?e.checked=!(!e.hasThreeStates||!this.hasThreeStates)&&null:e.checked=null!=e.checked,e.checked){case!0:this.checkIndex(t);break;case!1:this.uncheckIndex(t);break;default:this.indeterminateIndex(t)}},wheel:function(e,t){if(t.autoHeight||!t.enableMouseWheel)return e.returnValue=!0;if(t.disabled)return!0;var i=0;if((e=e||window.event).originalEvent&&e.originalEvent.wheelDelta&&(e.wheelDelta=e.originalEvent.wheelDelta),e.wheelDelta?i=e.wheelDelta/120:e.detail&&(i=-e.detail/3),i){i=t._handleDelta(i);return i&&(e.preventDefault&&e.preventDefault(),null!=e.originalEvent&&(e.originalEvent.mouseHandled=!0),null!=e.stopPropagation&&e.stopPropagation()),!!i&&(i=!1,e.returnValue=!1)}e.preventDefault&&e.preventDefault(),e.returnValue=!1},_handleDelta:function(e){var t=this.vScrollInstance.value;return e<0?this.scrollDown():this.scrollUp(),t!=this.vScrollInstance.value},focus:function(){try{this.focused=!0,this.host.focus();var e=this;setTimeout(function(){e.host.focus()},25)}catch(e){}},_removeHandlers:function(){this.removeHandler(C(document),"keydown.listbox"+this.element.id),this.removeHandler(C(document),"keyup.listbox"+this.element.id),this.removeHandler(this.vScrollBar,"valueChanged"),this.removeHandler(this.hScrollBar,"valueChanged"),this._mousewheelfunc?this.removeHandler(this.host,"mousewheel",this._mousewheelfunc):this.removeHandler(this.host,"mousewheel"),this.removeHandler(this.host,"keydown"),this.removeHandler(this.content,"mouseleave"),this.removeHandler(this.content,"focus"),this.removeHandler(this.content,"blur"),this.removeHandler(this.host,"focus"),this.removeHandler(this.host,"blur"),this.removeHandler(this.content,"mouseenter"),this.removeHandler(this.content,"mouseup"),this.removeHandler(this.content,"mousedown"),this.removeHandler(this.content,"touchend"),this._mousemovefunc?this.removeHandler(this.content,"mousemove",this._mousemovefunc):this.removeHandler(this.content,"mousemove"),this.removeHandler(this.content,"selectstart"),this.overlayContent&&this.removeHandler(this.overlayContent,C.jqx.mobile.getTouchEventName("touchend"))},_updateSize:function(){this.virtualSize||(this._oldheight=null,this.virtualSize=this._calculateVirtualSize());var e,t=this;t._arrange(),t.host.height()==t._oldheight&&t.host.width()==t._oldwidth||(t.host.width(),t._oldwidth,t.autoItemsHeight?t._render(!1):t.items&&(0<t.items.length&&t.virtualItemsCount*t.items[0].height<t._oldheight-2?t._render(!1):(e=t.vScrollInstance.value,t._updatescrollbars(),t._renderItems(),e<t.vScrollInstance.max?t.vScrollInstance.setPosition(e):t.vScrollInstance.setPosition(t.vScrollInstance.max))),t._oldwidth=t.host.width(),t._oldheight=t.host.height())},_addHandlers:function(){var o=this,n=(this.focused=!1,new Date,this.isTouchDevice());this.addHandler(this.vScrollBar,"valueChanged",function(e){C.jqx.browser.msie&&9<C.jqx.browser.version?setTimeout(function(){o._renderItems()},1):o._renderItems()}),this.addHandler(this.hScrollBar,"valueChanged",function(){o._renderItems()}),this._mousewheelfunc&&this.removeHandler(this.host,"mousewheel",this._mousewheelfunc),this._mousewheelfunc=function(e){o.wheel(e,o)},this.addHandler(this.host,"mousewheel",this._mousewheelfunc),this.addHandler(C(document),"keydown.listbox"+this.element.id,function(e){o._ctrlKey=e.ctrlKey||e.metaKey,o._shiftKey=e.shiftKey}),this.addHandler(C(document),"keyup.listbox"+this.element.id,function(e){o._ctrlKey=e.ctrlKey||e.metaKey,o._shiftKey=e.shiftKey}),this.addHandler(this.host,"keydown",function(e){return o._handleKeyDown(e)}),this.addHandler(this.content,"mouseleave",function(e){o.focused=!1;var t=C.data(o.element,"hoveredItem");null!=t&&(C(t).removeClass(o.toThemeProperty("jqx-listitem-state-hover")),C(t).removeClass(o.toThemeProperty("jqx-fill-state-hover")),C.data(o.element,"hoveredItem",null))}),this.addHandler(this.content,"focus",function(e){o.disabled||(o.host.addClass(o.toThemeProperty("jqx-fill-state-focus")),o.focused=!0)}),this.addHandler(this.content,"blur",function(e){o.focused=!1,o.host.removeClass(o.toThemeProperty("jqx-fill-state-focus"))}),this.addHandler(this.host,"focus",function(e){o.disabled||(o.host.addClass(o.toThemeProperty("jqx-fill-state-focus")),o.focused=!0)}),this.addHandler(this.host,"blur",function(e){C.jqx.browser.msie&&C.jqx.browser.version<9&&o.focused||(o.host.removeClass(o.toThemeProperty("jqx-fill-state-focus")),o.focused=!1)}),this.addHandler(this.content,"mouseenter",function(e){o.focused=!0});var d,c=C.jqx.utilities.hasTransform(this.host),u=o.isTouchDevice()&&!0!==this.touchMode,m=u?"touchend":"mousedown";this.overlayContent?this.addHandler(this.overlayContent,C.jqx.mobile.getTouchEventName("touchend"),function(e){if(!o.enableSelection)return!0;if(u&&(o._newScroll=new Date,o._newScroll-o._lastScroll<500))return!0;var t=C.jqx.mobile.getTouches(e)[0];if(null!=t){var i=o.host.offset(),s=parseInt(t.pageX),l=parseInt(t.pageY);1==o.touchMode&&null!=t._pageX&&(s=parseInt(t._pageX),l=parseInt(t._pageY)),s-=i.left,l-=i.top;var n=o._hitTest(s,l);if(null!=n&&!n.isGroup)return o._newScroll=new Date,!(o._newScroll-o._lastScroll<500)&&(o.checkboxes?void o._updateItemCheck(n,n.visibleIndex):-1==n.html.indexOf("href")?(o.selectIndex(n.visibleIndex,!1,!0,!1,"mouse",e),e.preventDefault&&e.preventDefault(),o.content.trigger("click"),!1):void setTimeout(function(){return o.selectIndex(n.visibleIndex,!1,!0,!1,"mouse",e),o.content.trigger("click"),!1},100))}}):(d=!1,this.addHandler(this.content,m,function(e){if(!o.enableSelection)return!0;if(d=!0,u&&(o._newScroll=new Date,o._newScroll-o._lastScroll<500))return!1;if(o.focused=!0,!o.isTouchDevice()&&o.focusable&&o.host.focus(),e.target.id!="listBoxContent"+o.element.id&&o.itemswrapper[0]!=e.target){var t,i=e.target,s=C(i).offset(),l=o.host.offset();c&&(t=C.jqx.mobile.getLeftPos(i),r=C.jqx.mobile.getTopPos(i),s.left=t,s.top=r,t=C.jqx.mobile.getLeftPos(o.element),r=C.jqx.mobile.getTopPos(o.element),l.left=t,l.top=r);var n,r=parseInt(s.top)-parseInt(l.top),a=parseInt(s.left)-parseInt(l.left),h=o._hitTest(a,r);if(null==h||h.isGroup||(n=function(e,t){o._shiftKey||(o._clickedIndex=e.visibleIndex),o.checkboxes?(a=20+t.pageX-s.left,o.rtl?("hidden"!=o.hScrollBar.css("visibility")?o.hScrollInstance.max:o.host.width(),a<=o.host.width()-20&&(o.allowDrag?setTimeout(function(){o._dragItem||d||(o._updateItemCheck(e,e.visibleIndex),o.selectIndex(e.visibleIndex,!1,!0,!1,"mouse",t))},200):(o._updateItemCheck(e,e.visibleIndex),o.selectIndex(e.visibleIndex,!1,!0,!1,"mouse",t)))):20<=a+o.hScrollInstance.value&&(o.allowDrag?setTimeout(function(){o._dragItem||d||(o._updateItemCheck(e,e.visibleIndex),o.selectIndex(e.visibleIndex,!1,!0,!1,"mouse",t))},200):(o._updateItemCheck(e,e.visibleIndex),o.selectIndex(e.visibleIndex,!1,!0,!1,"mouse",t)))):o.selectIndex(e.visibleIndex,!1,!0,!1,"mouse",t)},h.disabled||(-1!=h.html.indexOf("href")?setTimeout(function(){n(h,e)},100):n(h,e))),"mousedown"==m){r=!1;if(e.which?r=3==e.which:e.button&&(r=2==e.button),r)return!0}}return!0})),this.addHandler(this.content,"mouseup",function(e){o.vScrollInstance.handlemouseup(o,e),d=!1}),C.jqx.browser.msie&&this.addHandler(this.content,"selectstart",function(e){return!1});n=this.isTouchDevice();this.enableHover&&!n&&(this._mousemovefunc=function(e){if(n)return!0;if(!o.enableHover)return!0;var t,i,s,l;1==C.jqx.browser.msie&&C.jqx.browser.version;return null==e.target||(!!o.disabled||(o.focused=!0,void(o.vScrollInstance.isScrolling()||e.target.id=="listBoxContent"+o.element.id||o.itemswrapper[0]!=e.target&&(t=e.target,i=C(t).offset(),l=o.host.offset(),c&&(e=C.jqx.mobile.getLeftPos(t),s=C.jqx.mobile.getTopPos(t),i.left=e,i.top=s,e=C.jqx.mobile.getLeftPos(o.element),s=C.jqx.mobile.getTopPos(o.element),l.left=e,l.top=s),s=parseInt(i.top)-parseInt(l.top),l=parseInt(i.left)-parseInt(l.left),null==(l=o._hitTest(l,s))||l.isGroup||l.disabled||(null!=(s=C.data(o.element,"hoveredItem"))&&(C(s).removeClass(o.toThemeProperty("jqx-listitem-state-hover")),C(s).removeClass(o.toThemeProperty("jqx-fill-state-hover"))),C.data(o.element,"hoveredItem",l.element),(l=C(l.element)).addClass(o.toThemeProperty("jqx-listitem-state-hover")),l.addClass(o.toThemeProperty("jqx-fill-state-hover")))))))},this.addHandler(this.content,"mousemove",this._mousemovefunc))},_arrange:function(e){null==e&&(e=!0);var t=this,i=null,s=null,l=t.filterable?t.filterHeight:0,n=window.getComputedStyle(this.element),r=2*parseInt(n.borderLeftWidth),a=n.boxSizing;0===this.element.offsetWidth&&(r=2),"border-box"!==a&&!isNaN(r)||(r=0);var h=function(e){return 0==(e=t.host.height()-r)&&(e=200,t.host.height(e)),e};(null!=t.width&&-1!=t.width.toString().indexOf("px")||null!=t.width&&!isNaN(t.width))&&(i=t.width),(null!=t.height&&-1!=t.height.toString().indexOf("px")||null!=t.height&&!isNaN(t.height))&&(s=t.height),null!=t.width&&-1!=t.width.toString().indexOf("%")&&(t.host.css("width",t.width),i=t.host.width()),null!=t.height&&-1!=t.height.toString().indexOf("%")&&(t.host.css("height",t.height),s=h(s)),null!=i&&(i=parseInt(i)-r,parseInt(t.element.style.width)!=parseInt(t.width)&&(t.element.style.width=parseInt(i)+"px")),t.autoHeight?t.virtualSize&&(s="hidden"!=t.hScrollBar.css("visibility")?(t.host.height(t.virtualSize.height+parseInt(t.scrollBarSize)+3),t.height=t.virtualSize.height+parseInt(t.scrollBarSize)+3,t.height):(t.host.height(t.virtualSize.height),t.height=t.virtualSize.height,t.virtualSize.height)):null!=s&&(s=parseInt(s),parseInt(t.element.style.height)!=parseInt(t.height)&&(t.host.height(t.height),h(s)));var o=t.scrollBarSize;isNaN(o)&&(o=parseInt(o),isNaN(o)?o="17px":o+="px"),o=parseInt(o);var d,c,n=2,a=1;t.vScrollBar&&("hidden"!=t.vScrollBar[0].style.visibility?a=o+4:(a=0,t.vScrollInstance.setPosition(0)),0==o&&(n=a=0),t.hScrollBar&&(n="hidden"!=t.hScrollBar[0].style.visibility?o+4:(t.hScrollInstance.setPosition(0),0),t.autoItemsHeight&&(t.hScrollBar[0].style.visibility="hidden",n=0),null==s&&(s=0),(h=parseInt(s)-4-o)<0&&(h=0),parseInt(t.hScrollBar[0].style.height)!=o&&(parseInt(o)<0&&(o=0),t.hScrollBar[0].style.height=parseInt(o)+"px"),t.hScrollBar[0].style.top!=h+"px"&&(t.hScrollBar[0].style.top=h+"px",t.hScrollBar[0].style.left="0px"),(h=i-o-4)<0&&(h=0),h=h+"px",t.hScrollBar[0].style.width!=h&&(t.hScrollBar[0].style.width=h),a<=1&&2<=i&&(t.hScrollBar[0].style.width=parseInt(i-2)+"px"),o!=parseInt(t.vScrollBar[0].style.width)&&(t.vScrollBar[0].style.width=parseInt(o)+"px"),parseInt(s)-n!=parseInt(t.vScrollBar[0].style.height)&&((d=parseInt(s)-n)<0&&(d=0),t.vScrollBar[0].style.height=d+"px"),null==i&&(i=0),d=parseInt(i)-parseInt(o)-4+"px","border-box"===this.host.css("box-sizing")&&(d=parseInt(d)-2+"px"),d!=t.vScrollBar[0].style.left&&(0<=parseInt(d)&&(t.vScrollBar[0].style.left=d),t.vScrollBar[0].style.top="0px"),(d=t.vScrollInstance).disabled=t.disabled,e&&d._arrange(),(d=t.hScrollInstance).disabled=t.disabled,e&&d._arrange(),"hidden"!=t.vScrollBar[0].style.visibility&&"hidden"!=t.hScrollBar[0].style.visibility?(t.bottomRight[0].style.visibility="inherit",t.bottomRight[0].style.left=1+parseInt(t.vScrollBar[0].style.left)+"px",t.bottomRight[0].style.top=1+parseInt(t.hScrollBar[0].style.top)+"px",t.rtl&&t.bottomRight.css({left:0}),t.bottomRight[0].style.width=parseInt(o)+3+"px",t.bottomRight[0].style.height=parseInt(o)+3+"px"):t.bottomRight[0].style.visibility="hidden",parseInt(t.content[0].style.width)!=parseInt(i)-a&&((c=parseInt(i)-a)<0&&(c=0),t.content[0].style.width=c+"px"),t.rtl&&(t.vScrollBar.css({left:"0px",top:"0px"}),t.hScrollBar.css({left:t.vScrollBar.width()+2+"px"}),"hidden"!=t.vScrollBar[0].style.visibility?t.content.css("margin-left",4+t.vScrollBar.width()):(t.content.css("margin-left",0),t.hScrollBar.css({left:"0px"})),t.filterable&&t.filterInput&&t.filterInput.css({left:t.vScrollBar.width()+6+"px"})),parseInt(t.content[0].style.height)!=parseInt(s)-n&&((c=parseInt(s)-n)<0&&(c=0),t.content[0].style.height=c+"px",t.content[0].style.top="0px"),0<l&&(t.content[0].style.top=l+"px",t.content[0].style.height=parseInt(t.content[0].style.height)-l+"px"),t.filterable?(t.filterInput[0].style.height=l-6+"px",t.filterInput[0].style.top="3px",t.rtl||(t.filterInput[0].style.left=parseInt(t.content.css("left"))+3+"px"),t.filterInput[0].style.width=parseInt(t.content.css("width"))-7+"px",t.filter[0].style.display="block"):t.filter[0].style.display="none",t.overlayContent&&(t.overlayContent.width(parseInt(i)-a),t.overlayContent.height(parseInt(s)-n))))},ensureVisible:function(e,t){if(isNaN(e)&&(i=this.getItemByValue(e))&&(e=i.index),this.isIndexInView(e)){if(t)for(s=0;s<this.visibleItems.length;s++)(i=this.visibleItems[s]).visibleIndex!=e||i.isGroup||(r=this.vScrollInstance.value,n=i.initialTop,this.filterable&&(n=this.filterHeight+2+i.initialTop),r+this.host.height()<this.vScrollInstance.max&&this.vScrollInstance.setPosition(n))}else{if(e<0)return;if(this.autoHeight)(l=C.data(this.vScrollBar[0],"jqxScrollBar").instance).setPosition(0);else for(var i,s=0;s<this.visibleItems.length;s++)if((i=this.visibleItems[s]).visibleIndex==e&&!i.isGroup){var l,n,r=(l=C.data(this.vScrollBar[0],"jqxScrollBar").instance).value,a=this.filterable?this.filterHeight+2:0,h="hidden"===this.hScrollBar.css("visibility")?0:this.scrollBarSize+4;i.initialTop<r?(l.setPosition(i.initialTop),0==s&&l.setPosition(0)):i.initialTop+i.height>r+this.host.height()-a&&(a=this.host.height(),this.filterable?l.setPosition(this.filterHeight+2+i.initialTop+i.height+2-a+h):(l.setPosition(i.initialTop+i.height+2-a+h),s===this.visibleItems.length-1&&l.setPosition(l.max)),t&&(r=l.value,n=i.initialTop,this.filterable&&(n=this.filterHeight+2+i.initialTop),r+a<l.max&&l.setPosition(n)));break}}this._renderItems()},scrollTo:function(e,t){"hidden"!=this.vScrollBar.css("visibility")&&this.vScrollInstance.setPosition(t),"hidden"!=this.hScrollBar.css("visibility")&&this.hScrollInstance.setPosition(e)},scrollDown:function(){if("hidden"==this.vScrollBar.css("visibility"))return!1;var e=this.vScrollInstance;return e.value+e.largestep<=e.max?e.setPosition(e.value+e.largestep):e.setPosition(e.max),!0},scrollUp:function(){if("hidden"==this.vScrollBar.css("visibility"))return!1;var e=this.vScrollInstance;return e.value-e.largestep>=e.min?(e.setPosition(e.value-e.largestep),!0):e.value!=e.min&&(e.setPosition(e.min),!0)},databind:function(e,t){this.records=new Array;var i=!!e._source,r=new C.jqx.dataAdapter(e,{autoBind:!1});i&&(e=(r=e)._source);function s(c,s){function l(e){var t=null;"string"==typeof e?(s=i=e,l=""):null!=c.displayMember&&""!=c.displayMember&&(s=e[c.valueMember],i=e[c.displayMember]);var i,s,l="";c.groupMember?l=e[c.groupMember]:e&&null!=e.group&&(l=e.group),c.searchMember?t=e[c.searchMember]:e&&null!=e.searchLabel&&(t=e.searchLabel),c.valueMember||c.displayMember||"string"==C.type(e)&&(i=s=e.toString()),e&&null!=e.label&&(i=e.label),e&&null!=e.value&&(s=e.value);var n=!1;e&&null!=e.checked&&(n=e.checked);var r="";e&&null!=e.html&&(r=e.html);var a=!0;e&&null!=e.visible&&(a=e.visible);var h=!1;e&&null!=e.disabled&&(h=e.disabled);var o=!1;e&&null!=e.hasThreeStates&&(o=e.hasThreeStates);var d={};return d.label=i,d.value=s,d.searchLabel=t,d.html=r,d.visible=a,d.originalItem=e,d.group=l,d.groupHtml="",d.disabled=h,d.checked=n,d.hasThreeStates=o,d}if(null!=s&&r._changedrecords[0])return C.each(r._changedrecords,function(){var e,t=this.index,i=this.record;switch("remove"!=s&&(e=l(i)),s){case"update":c.updateAt(e,t);break;case"add":c.insertAt(e,t);break;case"remove":c.removeAt(t)}}),0;c.records=r.records;for(var e=c.records.length,t=new Array,i=0;i<e;i++){var n=c.records[i],n=l(n);t[n.index=i]=n}c.items=c.loadItems(t,!0),c._render(),c._raiseEvent("6")}null!=e.type&&(r._options.type=e.type),null!=e.formatdata&&(r._options.formatData=e.formatdata),null!=e.contenttype&&(r._options.contentType=e.contenttype),null!=e.async&&(r._options.async=e.async);var l=this;switch(e.datatype){case"local":case"array":default:null==e.localdata&&!C.isArray(e)||(r.unbindBindingUpdate(this.element.id),!this.autoBind&&(this.autoBind||t)||r.dataBind(),s(this),r.bindBindingUpdate(this.element.id,function(e){s(l,e)}));break;case"json":case"jsonp":case"xml":case"xhtml":case"script":case"text":case"csv":case"tab":if(null!=e.localdata)return r.unbindBindingUpdate(this.element.id),!this.autoBind&&(this.autoBind||t)||r.dataBind(),s(this),void r.bindBindingUpdate(this.element.id,function(){s(l)});i={};r._options.data?C.extend(r._options.data,i):(e.data&&C.extend(i,e.data),r._options.data=i);r.unbindDownloadComplete(l.element.id),r.bindDownloadComplete(l.element.id,function(){s(l)}),!this.autoBind&&(this.autoBind||t)||r.dataBind()}},loadItems:function(e,a){if(null==e)return this.groups=new Array,this.items=new Array,void(this.visualItems=new Array);var h=this,o=0,d=0,c=0;this.groups=new Array,this.items=new Array,this.visualItems=new Array;var u=new Array;this.itemsByValue=new Array,C.map(e,function(e){if(null==e)return null;var t=new C.jqx._jqxListBox.item,i=e.group,s=e.groupHtml,l=e.title,n=null;h.searchMember?n=e[h.searchMember]:e&&null!=e.searchLabel&&(n=e.searchLabel),null!=l&&null!=l||(l=""),null!=i&&null!=i||(i=""),h.groupMember&&(i=e[h.groupMember]),null!=s&&null!=s||(s=""),h.groups[i]||(h.groups[i]={items:new Array,index:-1,caption:i,captionHtml:s},r=++o+"jqxGroup",h.groups[r]=h.groups[i],d++,h.groups.length=d);var r=h.groups[i];return r.index++,r.items[r.index]=t,"string"==typeof e?(t.label=e,t.value=e,1<arguments.length&&arguments[1]&&"string"==C.type(arguments[1])&&(t.label=e,t.value=arguments[1])):null==e.label&&null==e.value&&null==e.html&&null==e.group&&null==e.groupHtml?(t.label=e.toString(),t.value=e.toString()):(t.label=e.label,t.value=e.value,void 0===t.label&&(t.label=e.value),void 0===t.value&&(t.value=e.label)),"string"!=typeof e&&(void 0===e.label&&""!=h.displayMember&&(null!=e[h.displayMember]?t.label=e[h.displayMember]:t.label=""),void 0===e.value&&""!=h.valueMember&&(t.value=e[h.valueMember])),t.hasThreeStates=null==e.hasThreeStates||e.hasThreeStates,t.originalItem=e,a&&(t.originalItem=e.originalItem),(t.title=l)&&void 0===t.value&&void 0===t.label&&(t.value=t.label=l),t.html=e.html||"",e.html&&e.html,t.label,t.group=i,t.checked=e.checked||!1,t.groupHtml=e.groupHtml||"",t.disabled=e.disabled||!1,t.visible=null==e.visible||e.visible,t.searchLabel=n,t.index=c,u[c]=t,c++,t});var t=new Array,i=0;if(null==this.fromSelect||0==this.fromSelect)for(var s=0;s<d;s++){var l=(o=s+1)+"jqxGroup",n=this.groups[l];if(null==n||null==n)break;if(0==s&&""==n.caption&&""==n.captionHtml&&d<=1){for(var r=0;r<n.items.length;r++){var m=n.items[r].value;null!=n.items[r].value&&null!=n.items[r].value||(m=r),this.itemsByValue[C.trim(m).split(" ").join("?")]=n.items[r]}return n.items}l=new C.jqx._jqxListBox.item;l.isGroup=!0,l.label=n.caption,""==n.caption&&""==n.captionHtml&&(n.caption=this.emptyGroupText,l.label=n.caption),l.html=n.captionHtml,t[i]=l,i++;for(var v=0;v<n.items.length;v++){t[i]=n.items[v];m=n.items[v].value;""!=n.items[v].value&&null!=n.items[v].value||(m=i),h.itemsByValue[C.trim(m).split(" ").join("?")]=n.items[v],i++}}else{var i=0,p=new Array;C.each(u,function(){p[this.group]||""!=this.group&&((e=new C.jqx._jqxListBox.item).isGroup=!0,e.label=this.group,t[i]=e,i++,p[this.group]=!0);var e=(t[i]=this).value;""!=this.value&&null!=this.value||(e=i-1),h.itemsByValue[C.trim(e).split(" ").join("?")]=this,i++})}return t},_mapItem:function(e){var t=new C.jqx._jqxListBox.item;return this.displayMember&&(null==e.label&&(e.label=e[this.displayMember]),null==e.value&&(e.value=e[this.valueMember])),"string"==typeof e?(t.label=e,t.value=e):"number"==typeof e?(t.label=e.toString(),t.value=e.toString()):(t.label=void 0!==e.label?e.label:e.value,t.value=void 0!==e.value?e.value:e.label),null==t.label&&null==t.value&&null==t.html&&(t.label=t.value=e),t.html=e.html||"",t.group=e.group||"",t.checked=e.checked||!1,t.title=e.title||"",t.groupHtml=e.groupHtml||"",t.disabled=e.disabled||!1,t.visible=e.visible||!0,t},addItem:function(e){return this.insertAt(e,this.items?this.items.length:0)},_getItemByParam:function(e){var t;return null!=e&&(null!=e.index||(t=this.getItemByValue(e))&&(e=t)),e},insertItem:function(e,t){e=this._getItemByParam(e);return this.insertAt(e,t)},updateItem:function(e,t){t=this._getItemByParam(t);return!(!t||null==t.index)&&this.updateAt(e,t.index)},updateAt:function(e,t){null!=e&&(e=this._mapItem(e),this.itemsByValue[C.trim(e.value).split(" ").join("?")]=this.items[t],this.items[t].value=e.value,this.items[t].label=e.label,this.items[t].html=e.html,this.items[t].disabled=e.disabled,this._raiseEvent("9",{item:this.items[t]})),this._cachedItemHtml=[],this._renderItems(),this.rendered&&this.rendered()},insertAt:function(e,t){if(null==e)return!1;if(this._cachedItemHtml=[],null==this.items||0==this.items.length){this.source=new Array,this.refresh(),(s=this._mapItem(e)).index=0,this.items[this.items.length]=s,this._addItems(!0),this._renderItems(),this.rendered&&this.rendered(),this.allowDrag&&this._enableDragDrop&&this._enableDragDrop();var i=s.value;return""!=s.value&&null!=s.value||(i=t),this.itemsByValue[C.trim(i).split(" ").join("?")]=s,!1}var s=this._mapItem(e);if(-1==t||null==t||null==t||t>=this.items.length)s.index=this.items.length,this.items[this.items.length]=s;else{for(var l=new Array,n=0,r=!1,a=0,h=0;h<this.items.length;h++)0==this.items[h].isGroup&&t<=a&&!r&&((l[n++]=s).index=t,a++,r=!0),l[n]=this.items[h],this.items[h].isGroup||(l[n].index=a,a++),n++;this.items=l}i=s.value;""!=s.value&&null!=s.value||(i=t),this.itemsByValue[C.trim(i).split(" ").join("?")]=s,this.visibleItems=new Array,this.renderedVisibleItems=new Array;e=C.data(this.vScrollBar[0],"jqxScrollBar").instance,i=e.value;return e.setPosition(0),this.allowDrag&&this._enableDragDrop||this.virtualSize&&this.virtualSize.height<10+this.host.height()?this._addItems(!0):this._addItems(!1),this.groups.length,this._renderItems(),this.allowDrag&&this._enableDragDrop&&this._enableDragDrop(),e.setPosition(i),this._raiseEvent("7",{item:s}),this.rendered&&this.rendered(),!0},removeAt:function(e){if(e<0||e>this.items.length-1)return!1;if(null==e)return!1;var t=this.items[e].height;""!=(d=this.items[e].value)&&null!=d||(d=e),this.itemsByValue[C.trim(d).split(" ").join("?")]=null;var i=this.items[e];if(1<this.groups.length){for(var s=new Array,l=0;l<this.items.length;l++)this.items[l].isGroup||s.push({item:this.items[l],key:l});if(!s[e])return!1;this.items.splice(s[e].key,1)}else this.items.splice(e,1);for(var n=new Array,r=0,a=0,l=0;l<this.items.length;l++)n[r]=this.items[l],this.items[l].isGroup||(n[r].index=a,a++),r++;this.items=n;var h=C.data(this.vScrollBar[0],"jqxScrollBar").instance,e=(h=C.data(this.vScrollBar[0],"jqxScrollBar").instance).value;h.setPosition(0),this.visibleItems=new Array,this.renderedVisibleItems=new Array,0<this.items.length?(this.virtualSize&&(this.virtualSize.height-=t,t=2*this.virtualSize.itemsPerPage,this.autoHeight&&(t=this.items.length),this.virtualItemsCount=Math.min(t,this.items.length)),this._updatescrollbars()):this._addItems(),this._renderItems(),this.allowDrag&&this._enableDragDrop&&this._enableDragDrop(),"hidden"!=this.vScrollBar.css("visibility")?h.setPosition(e):h.setPosition(0),this.itemsByValue=new Array;for(var o=0;o<this.items.length;o++){var d=this.items[o].value;""!=this.items[o].value&&null!=this.items[o].value||(d=o),this.itemsByValue[C.trim(d).split(" ").join("?")]=this.items[o]}return this._raiseEvent("8",{item:i}),0===this.items.length&&(this.selectedIndex=-1,this.selectedValue=null,this._updateInputSelection()),this.rendered&&this.rendered(),!0},removeItem:function(e,t){var i=this._getItemByParam(e),s=-1;if(i&&null!=i.index&&!0!==t){for(var l=0;l<this.items.length;l++)if(this.items[l].label==i.label&&this.items[l].value==i.value){s=l;break}if(-1!=s)return this.removeAt(s)}if(-1==s)return this.removeAt(i.index)},getItems:function(){return this.items},disableItem:function(e){e=this._getItemByParam(e);this.disableAt(e.index)},enableItem:function(e){e=this._getItemByParam(e);this.enableAt(e.index)},disableAt:function(e){return!!this.items&&(!(e<0||e>this.items.length-1)&&(this.items[e].disabled=!0,this._renderItems(),!0))},enableAt:function(e){return!!this.items&&(!(e<0||e>this.items.length-1)&&(this.items[e].disabled=!1,this._renderItems(),!0))},destroy:function(){this.source&&this.source.unbindBindingUpdate&&this.source.unbindBindingUpdate(this.element.id),this._removeHandlers(),this.vScrollBar.jqxScrollBar("destroy"),this.hScrollBar.jqxScrollBar("destroy"),this.vScrollBar.remove(),this.hScrollBar.remove(),this.content.remove(),C.jqx.utilities.resize(this.host,null,!0);var e=C.data(this.element,"jqxListBox");delete this.hScrollInstance,delete this.vScrollInstance,delete this.vScrollBar,delete this.hScrollBar,delete this.content,delete this.bottomRight,delete this.itemswrapper,delete this.visualItems,delete this.visibleItems,delete this.items,delete this.groups,delete this.renderedVisibleItems,delete this._mousewheelfunc,delete this._mousemovefunc,delete this._cachedItemHtml,delete this.itemsByValue,delete this._activeElement,delete this.source,delete this.events,this.input&&(this.input.remove(),delete this.input),e&&delete e.instance,this.host.removeData(),this.host.removeClass(),this.host.remove(),this.element=null,delete this.element,this.host=null,delete this.set,delete this.get,delete this.call,delete this.host},_raiseEvent:function(e,t){if(1==this._stopEvents)return!0;null==t&&(t={owner:null});e=this.events[e];(t.owner=this)._updateInputSelection();var i,e=new C.Event(e);return e.owner=this,e.args=t,null!=this.host&&(i=this.host.trigger(e)),i}})}(jqxBaseFramework),function(S){S.jqx.parseSourceTag=function(e){var l=new Array,t=S(e).find("option"),n=S(e).find("optgroup"),r=!1;if(0===t.length&&0<(t=S(e).find("li")).length&&(r=!0),0===t.length){var i=[],s=S(e).find("tr"),a=S(e).find("th"),h=0;0===a.length&&0<s.length&&(a=S(s[0]).find("td"),h=1);for(var o=[],d=[],i=[],c=0;c<s.length;c++){var u=s[c],m={};c===h+1&&(d=[]);for(var v=0;v<a.length;v++){var p,g=S.trim(S(a[v]).text()),b=S(u).find("td:eq("+v+")");m[g]=S.trim(b.text()),c===h&&(o.push({text:g,dataField:g}),d.push({name:g})),c===h+1&&(p="","string"===(b=typeof m[g])&&("true"===m[g]||"false"===m[g]?b="bool":isNaN(parseFloat(m[g]))||-1!==m[g].indexOf("-")||-1!==m[g].indexOf("/")?0<=m[g].indexOf("$")||0<=m[g].indexOf("%")?(b="number",0<=m[g].indexOf("$")&&(p="c"),0<=m[g].indexOf("%")&&(p="p"),m[g]=m[g].replace("%","").replace("$","")):"Invalid Date"!==new Date(m[g]).toString()&&(b="date",p="d"):(b="number",p=0<=m[g].indexOf(".")?"f":"n")),o[v].cellsformat=p,"number"===b&&(o[v].cellsalign="right",o[v].align="right"),d.push({name:g,type:b}))}1<=c&&(i[i.length]=m)}e={localdata:i,datatype:"array",datafields:d};return{source:new S.jqx.dataAdapter(e),columns:o}}var x=null,x=-1,f=new Array;if(S.each(t,function(e){var t,i=0<n.find(this).length;null==this.text||null!=this.label&&""!=this.label||(this.label=this.text),!0===r&&(this.label=S(this).text().trim(),this.selected=S(this).attr("data-selected"),this.checked=this.selected,this.value=S(this).attr("data-value")||e,this.disabled=S(this).attr("disabled"));var s={style:this.style.cssText,selected:this.selected,html:this.innerHTML.trim(),classes:this.className,disabled:this.disabled,value:this.value,label:this.label,title:this.title,originalItem:this};S.jqx.browser.msie&&S.jqx.browser.version<8&&!r&&""==s.value&&null!=this.text&&0<this.text.length&&(s.value=this.text),i&&(t=n.find(this).parent()[0].label,s.group=t,f[t]||(f[t]=new Array,f.length++),f[t].push(s)),this.selected&&(x=e),s.checked=this.selected,void 0!==s.label&&l.push(s)}),0<f.length){var I,y=new Array;for(I in f)if("indexOf"!==I){for(c=0;c<n.length;c++)if(I===n[c].label||n[c].text){n[c];break}S.each(f[I],function(e,t){void 0!==this.label&&y.push(this)})}}return y&&0<y.length?{items:y,index:x}:{items:l,index:x}},S.jqx._jqxListBox.item=function(){return{group:"",groupHtml:"",selected:!1,isGroup:!1,highlighted:!1,value:null,label:"",html:null,visible:!0,disabled:!1,element:null,width:null,height:null,initialTop:null,top:null,left:null,title:"",index:-1,checkBoxElement:null,originalItem:null,checked:!1,visibleIndex:-1}}}(jqxBaseFramework);