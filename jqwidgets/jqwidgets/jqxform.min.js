!function(w){w.jqx.jqxWidget("jqxForm","",{}),w.extend(w.jqx._jqxForm.prototype,{defineInstance:function(){w.extend(!0,this,{padding:{left:5,top:5,right:5,bottom:5},backgroundColor:"#F5F5F5",borderColor:"#E5E5E5",value:{},template:[{type:"text",label:"TextBox 1"},{type:"text",label:"TextBox 2"}]})},createInstance:function(t){var e=this;e._isInitialized=!1,e.host.addClass(e.toThemeProperty("jqx-widget")),e._renderAndInit(),this._setValue(this.value),this._prevValue=this._getValue(),e._isInitialized=!0},destroy:function(){this._destroyElements(),this.host.removeData(),this.host.remove(),delete this.host,delete this.set,delete this.get,delete this.call,delete this.element},_destroyElements:function(){for(var t=0;t<this.template.length;t++){if(w.isArray(this.template[t].columns))for(var e=0;e<this.template[t].columns.length;e++){var i=t+"_"+e;this._getComponentById(i).off(),this.host.find("#rowWrap_el_"+i).remove()}this._getComponentById(t).off(),this._getComponentLabelById(t).off(),this._getComponentLabelById(t).removeData(),this.host.find("#rowWrap_el_"+t).remove()}this.host.find("#formWrap").remove()},val:function(t){if(null==t)return this._getValue();this._setValue(t)},_onChangeHandler:function(t){if(this.isInitialized&&!this._suppressEvents){var e=this._getValue();if(!this._prevValue||JSON.stringify(e)!=JSON.stringify(this._prevValue)){var i=new w.Event("formDataChange");i.args={value:e,previousValue:this._prevValue};var o=(i.owner=this).host.trigger(i);return i.cancel?this._setValue(this._prevValue):this._prevValue=e,o}}},_onButtonClick:function(t,e){if(this.isInitialized){var i=new w.Event("buttonClick");return i.args={name:e.name,text:t.val()},(i.owner=this).host.trigger(i)}},submit:function(t,e,i){var o=this,n=o._getValue(!0),a="<form id='jqx_fromToSubmit'";t&&(a+=' action="'+t+'"'),e&&(a+=' target="'+e+'"'),i&&"get"===i.toString().toLowerCase()?a+=' method="GET"':a+=' method="POST"',a+=">";for(var l=0;l<n.length;l++){var s=n[l].value,r=n[l].tool,h=r.name;null==h&&(h=r.id),null==h&&(h=r.bind),("button"!=r.type&&"label"!=r.type||r.submit&&0!=r.submit)&&0!=r.submit&&void 0!==h&&(a+='<input type="hidden" ',a+=' name="'+h+'"',a+=' value="'+s+'"',a+=">")}a+="</form>",o.host.find("#formSubmit").html(a),o.host.find("#jqx_fromToSubmit").submit()},_getValue:function(t){for(var e={},i=[],o=0;o<this.template.length;o++){var n=this.template[o],a="el_"+this.element.id+o;if(w.isArray(n.columns))for(var l=0;l<n.columns.length;l++){var s,r,h=n.columns[l],d=a+"."+l;"option"!=h.type||"jqxDropDownList"==h.component?(void 0===(s=this._getComponentById(o+"_"+l).val())&&(s=null),null==h.bind||this._setObjectProperty(e,h.bind,s),t&&i.push({tool:h,value:s})):(r=this._radioGroupGetValue(h,d),null==h.bind||this._setObjectProperty(e,h.bind,r),t&&i.push({tool:h,value:r}))}else"option"!=n.type||"jqxDropDownList"==n.component?(void 0===(s=this._getComponentById(o).val())&&(s=null),null==n.bind||this._setObjectProperty(e,n.bind,s),t&&i.push({tool:n,value:s})):(r=this._radioGroupGetValue(n,a),null==n.bind||this._setObjectProperty(e,n.bind,r),t&&i.push({tool:n,value:r}))}return t?i:w.extend({},this._prevValue,e)},_getObjectProperty:function(t,e){if("object"!=typeof t||void 0===t||void 0===e||""==e)return t;for(var i=e.split("."),o=t,n=0;n<i.length;n++)o=o[i[n]];return o},_setObjectProperty:function(t,e,i){if(void 0!==t)if(null!=e&&""!=e){for(var o=e.split("."),n=0;n<o.length-1;)null==t[o[n]]&&(t[o[n]]={}),n++;t[o[n]]=i}else t=i},_setValue:function(t){this._suppressEvents=!0;for(var e=0;e<this.template.length;e++){var i,o=this.template[e],n="el_"+this.element.id+e,a=void 0;if(w.isArray(o.columns))for(var l=0;l<o.columns.length;l++){var s,r=o.columns[l],h=n+"."+l;r.bind&&(a=this._getObjectProperty(t,r.bind),"option"!=r.type||"jqxDropDownList"==r.component?(s=this._getComponentById(e+"_"+l),void 0!==t&&s.val(a)):this._radioGroupSetValue(r,h,a))}else o.bind&&(a=this._getObjectProperty(t,o.bind),"option"!=o.type||"jqxDropDownList"==o.component?(i=this._getComponentById(e),"label"!=o.type?void 0!==t&&i.val(a):i.html(a)):this._radioGroupSetValue(o,n,a))}this._prevValue=t,this._suppressEvents=!1},_radioGroupGetValue:function(t,e){for(var i=0;i<t.options.length;i++){var o=e+"_option_"+i,o=this.host.find("#"+o);if(0<o.length)if(1==o.jqxRadioButton("val"))return void 0!==t.options[i].value?t.options[i].value:t.options[i].label}},_radioGroupSetValue:function(t,e,i){for(var o=0;o<t.options.length;o++){if(void 0!==t.options[o].value){if(i!==t.options[o].value)continue}else if(i!==t.options[o].label)continue;var n=e+"_option_"+o,n=this.host.find("#"+n);0<n.length&&n.jqxRadioButton("val",!0)}},_getToolStyle:function(t){var e="display: block;";return t.height&&(e+="height: "+t.height+";"),void 0!==t.valign?e+="vertical-align: "+t.valign+";":e+="vertical-align: middle;",e},_getAlignMargin:function(t,e){if(!t||!t[e])return"";var i=["left","right","top","bottom"],o={},n="";if(t[e]&&(o={},"left"==t[e]?(o.left="0px",o.right="auto"):"right"==t[e]?(o.left="auto",o.right="0px"):(o.left="auto",o.right="auto")),o)for(var a in i)o[i[a]]&&(n+="margin-"+i[a]+": "+o[i[a]]+";");return n},_getPaddingAndMarginStyle:function(t,e){var i="",o=["left","right","top","bottom"],n=e?"labelpadding":"padding",e=e?"labelmargin":"margin",a=w.extend({left:5,top:5,right:5,bottom:5},t[n]);for(s in a)a[s]=isNaN(a[s])?parseFloat(a[s].toString()):a[s];var l=t[e];if(a)for(var s in o)a[o[s]]&&(i+="padding-"+o[s]+": "+a[o[s]]+"px;");if(l)for(var s in o)l[o[s]]&&(i+="margin-"+o[s]+": "+l[o[s]]+";");return i},_getToolLabelStyle:function(t){var e="display:block;";return void 0!==t.labelheight?e+="height: "+t.labelheight+";":e+="height: 100%;",void 0!==t.labelvalign?e+="vertical-align: "+t.labelvalign+";":void 0!==t.valign?e+="vertical-align: "+t.valign+";":e+="vertical-align: middle;",e},_renderAndInit:function(){var t=this._createTemplateHtml();this.host.append(t),this._initTools()},refresh:function(t){var e=this;e._isInitialized&&!0!==t&&(t=e.val(),e._destroyElements(),e._renderAndInit(),e._prevValue=t,e.val(t))},_createTemplateHtml:function(){this.groups;for(var t="padding-left: "+parseFloat(this.padding.left)+"px;padding-right: "+parseFloat(this.padding.right)+"px;padding-top: "+parseFloat(this.padding.top)+"px;padding-bottom: "+parseFloat(this.padding.bottom)+"px;",e="<table id='formWrap' style='background-color: "+this.backgroundColor+"; width: 100%; white-space: nowrap; border: 1px solid "+this.borderColor+";"+t+"' cellpadding='0' cellspacing='0'><div id='formSubmit' style='display:hidden;'><div>",i=this.template,o=0;o<i.length;o++){var n="el_"+this.element.id+o,a=this.template[o];e+=this._getToolTemplate(a,n)}return e+="</table>"},_beginRow:function(t,e,i){void 0===e&&(e="auto");i="<tr style='width: 100%; height: "+e+";' id='rowWrap_"+t+"' "+(i=i?"valign='"+i+"'":"")+">";return i+="<td style='width: 100%;'><table style='width: 100%; white-space: nowrap; border: 0px;' cellspacing='0' cellpadding='0'><tr style='width: 100%'>"},_endRow:function(){return"<td style='width: auto; background: transparent;'> </tr></table></td></tr>"},_beginColumn:function(t,e){void 0===t&&(t="auto");t="<td style='width:"+t+"; background: transparent;'>";return t+="<div style='display:block; overflow: visible; width: 100%; background: transparent;'>"},_endColumn:function(){return"</div></td>"},_splitLabelToolWidth:function(t,e){var i,o=e?"auto":t.columnwidth,e=t.labelwidth,n=w.extend({left:5,top:5,right:5,bottom:5},t.padding),a=w.extend({left:5,top:5,right:5,bottom:5},t.labelpadding);for(i in n)n[i]=isNaN(n[i])?parseFloat(n[i].toString()):n[i];for(i in a)a[i]=isNaN(a[i])?parseFloat(a[i].toString()):a[i];return""!=t.label&&null!=t.label||(a={left:e=0,right:0,top:0,bottom:0}),"top"==t.labelposition||"bottom"==t.labelposition?(void 0===e&&(e=o),void 0===o&&(o=e),o&&-1!=o.toString().indexOf("%")&&e&&-1!=e.toString().indexOf("%")&&(o=e=Math.max(parseFloat(o),parseFloat(e))+"%"),o&&-1==o.toString().indexOf("%")&&e&&-1==e.toString().indexOf("%")&&(o=e=Math.max(parseFloat(o),parseFloat(e))+"px"),[e,o]):void 0===e?void 0!==o&&"auto"!==o?["auto",o]:"right"!=t.labelposition||"right"==t.align||"center"==t.align||"middle"==t.align?["auto","100%"]:["100%","auto"]:-1!==e.toString().indexOf("%")?(e=parseFloat(e),void 0!==o?-1!==o.toString().indexOf("%")?(o=parseFloat(o),[Math.min(100,e)+"%",Math.min(o,100-e)+"%"]):(o=parseFloat(o),[Math.min(100,e)+"%",o]):[Math.min(100,e)+"%",Math.max(0,100-e)+"%"]):(e=parseFloat(e)+a.left+a.right,null==o?[e+"px","calc(100% - "+e+"px)"]:[e+"px",o])},_getToolTemplate:function(t,e,i,o){var n,a={};for(n in t)a[n.toLowerCase()]=t[n];if(w.isArray(a.columns)&&isNaN(i)){for(var l=this._beginRow(e,a.rowheight||"auto"),s=0;s<a.columns.length;s++){var r=this._getToolTemplate(a.columns[s],e+"_"+s,void 0,!0),h="auto";void 0!==a.columns[s].columnWidth?h=a.columns[s].columnWidth:void 0!==a.columns[s].width&&(h=a.columns[s].width),l+=this._beginColumn(h),l+="<table cellspacing='0' cellpadding='0' style='width: 100%; white-space: nowrap; border: 0px;'>"+r+"</table>",l+=this._endColumn()}return l+=this._endRow()}if("option"==a.type&&"jqxDropDownList"!=a.component&&isNaN(i)){for(var d=this._beginRow(e,a.rowheight||"auto",a.valign),s=0;s<a.options.length;s++){r=this._getToolTemplate(a,e+"_option_"+s,s,!0);"horizontal"==a.optionslayout?(h=100/Math.max(1,a.options.length)+"%",a.columnwidth&&(h=a.columnwidth),d+=this._beginColumn(h),d+="<table cellspacing='0' cellpadding='0' style='width: 100%; white-space: nowrap; border: 0px;'>"+r+"</table>",d+=this._endColumn()):d+=r}return d+=this._endRow()}var p=a.labelposition,u=a.label;"option"!=a.type||"jqxDropDownList"==a.component||isNaN(i)||(u=a.options[i].label),void 0===u&&(u="");var d="",g=this._getToolLabelStyle(a)+this._getPaddingAndMarginStyle(a,!0),m=this._getToolStyle(a)+this._getPaddingAndMarginStyle(a,!1),c=this._getAlignMargin(a,"align"),f="text-align: left;";"center"==a.labelalign||"middle"==a.labelalign?f="text-align: center":"right"==a.labelalign&&(f="text-align: right");var v="text-align: left;";"center"==a.align||"middle"==a.align?v="text-align: center":"right"==a.align&&(v="text-align: right");var _=this._splitLabelToolWidth(a,o),o=u;a.required&&(b="<span class='' style='color:red;'>*</span>",o=a.requiredposition&&"left"==a.requiredposition.toLowerCase()?b+" "+u:u+" "+b);var b="";"boolean"!=a.type&&("option"!=a.type||isNaN(i))||(b+="; cursor: pointer;");f="<div class='' style='"+g+"'><div style='"+f+b+";' id='label_"+e+"'>"+o+"</div></div>",b="<div style='"+(void 0!==a.info&&"left"!=a.infoposition?"margin-left: -3px;":"margin-right: -3px;")+"' class='"+this.toThemeProperty("jqx-info-icon")+"' title='"+a.info+"'></div>",o="<div style='background: transparent;"+m+"'><div style='width: auto; height: auto; "+c+"' id='"+e+"'></div></div>";return"text"==a.type||"button"==a.type?o="<div style='background: transparent;"+m+v+"'><input style='width: auto; height: auto; "+c+"' id='"+e+"' type='"+a.type+"'/></div>":"password"==a.type&&(o="<div style='background: transparent;"+m+v+"'><input type='password' style='width: auto; height: auto; "+c+"' id='"+e+"'/></div>"),"option"!=a.type||"jqxDropDownList"==a.component||isNaN(i)||(void 0===(h=a.width)&&(h="15px"),_=[a.labelwidth||"auto",h],!a.labelposition||"top"!=a.labelposition&&"bottom"!=a.labelposition||(_=["100%","100%"]),o="<div style='background: transparent;"+m+c+v+"'><div style='width: "+h+"; height: 100%; "+c+v+";' id='"+e+"'></div></div>"),void 0!==a.info&&""!==a.info&&(o="left"==a.infoposition?"<table cellspacing='0' cellpadding='0' style='border: 0px; white-space: nowrap;"+c+"'><tr><td>"+b+"</td><td>"+o+"</td></tr></table>":"<table cellspacing='0' cellpadding='0' style='border: 0px; white-space: nowrap;"+c+"'><tr><td>"+o+"</td><td>"+b+"</td></tr></table>"),"right"==p?(d+=this._beginRow(e,a.rowheight||"auto",a.valign),d+=this._beginColumn(_[1]),d+=o,""!=u&&(d+=this._endColumn(),d+=this._beginColumn(_[0]),d+=f)):"top"==p?(d+=this._beginRow(e,a.rowheight||"auto",a.valign),d+=this._beginColumn(a.columnwidth),""!=u&&(d+=f),d+=o):"bottom"==p?(d+=this._beginRow(e,a.rowheight||"auto",a.valign),d+=this._beginColumn(a.columnwidth),d+=o,""!=u&&(d+=f)):(d+=this._beginRow(e,a.rowheight||"auto",a.valign),""!=u&&(d+=this._beginColumn(_[0]),d+=f,d+=this._endColumn()),d+=this._beginColumn(_[1]),d+=o),d+=this._endColumn(),d+=this._endRow()},_initTools:function(t,e){var i=t||this.template;null==e&&(e="");for(var o=0;o<i.length;o++){var n=i[o];if(w.isArray(n.columns))this._initTools(n.columns,o+"_");else{var a=e+o;switch(n.type){case"color":this._initColorTool(a);break;case"option":"jqxDropDownList"==n.component?this._initOptionToolDropDownList(a):this._initOptionTool(a);break;case"dropdownlist":this._initOptionToolDropDownList(a);break;case"number":this._initNumberTool(a);break;case"boolean":case"checkbox":this._initBooleanTool(a);break;case"text":this._initTextTool(a);break;case"password":this._initPasswordTool(a);break;case"label":this._initLabelTool(a);break;case"date":case"time":case"datetime":this._initDateTimeTool(a);break;case"button":this._initButtonTool(a);break;case"custom":this._initCustomTool(a)}!1===n.visible&&this._showhideComponent(void 0,a,!1),n.theme&&this._setToolTheme(n,a)}}},_setToolTheme:function(t,e){var i=this._getComponentById(e),e=t.theme||this.theme;switch(t.type){case"option":"jqxDropDownList"==t.component&&i.jqxDropDownList("theme",e);break;case"number":i.jqxNumberInput("theme",e);break;case"text":i.jqxInput("theme",e);break;case"password":i.jqxPasswordInput("theme",e)}},_initOptionTool:function(t){for(var e=this,i="el_"+this.element.id+t,o=e._getTool(t),n=0;n<o.options.length;n++){var a=i+"_option_"+n,l=e.host.find("#"+a);0<l.length&&l.jqxRadioButton({width:25,theme:e.theme,groupName:"group_"+t}).on("change",function(t){e._onChangeHandler(t)});a=e.host.find("#label_"+a);a.data("el",l),a.on("mousedown",function(t){w(this).data("el").jqxRadioButton("toggle")})}},_initOptionToolDropDownList:function(t){var e=this,i="el_"+this.element.id+t,o=e._getTool(t),n=this.host.find("#"+i),a=[];if(o.options&&w.isArray(o.options))for(var l=0;l<o.options.length;l++)a.push(o.options[l]);o.init?o.init(n):(t=isNaN(parseFloat(o.width))?"auto":o.width,o.width&&-1!=o.width.toString().indexOf("%")&&void 0===o.columnwidth&&(t="100%"),i=isNaN(parseFloat(o.height))?"30px":o.height,n.jqxDropDownList({theme:e.theme,width:t||"auto",autoDropDownHeight:!0,height:i,enableBrowserBoundsDetection:!0,source:a,selectedIndex:0})),n.on("change",function(t){e._onChangeHandler(t)})},_initNumberTool:function(t){var e=this,i="el_"+this.element.id+t,o=e._getTool(t),t=this.host.find("#"+i);o.init?o.init(t):(i=isNaN(parseFloat(o.width))?"auto":o.width,o=isNaN(parseFloat(o.height))?"30px":o.height,t.jqxNumberInput({theme:e.theme,width:i,height:o,inputMode:"simple"})),t.on("change",function(t){e._onChangeHandler(t)})},_initBooleanTool:function(t){var i=this,o="el_"+this.element.id+t,e=i._getTool(t),n=this.host.find("#"+o);if(e.init)e.init(n);else{var a=isNaN(parseFloat(e.width))?"auto":e.width,l=isNaN(parseFloat(e.height))?"30px":e.height,t=1==e.isThreeState;if(void 0!==e.component&&"jqxCheckBox"!=e.component)return;n.jqxCheckBox({theme:i.theme,width:a,height:l,hasThreeStates:t})}n.on("change",function(t){i._onChangeHandler(t)}),i.host.find("#label_"+o).on("mousedown",function(t){var e=i.host.find("#"+o).val();i.host.find("#"+o).val(!e)})},_initTextTool:function(t){var e=this,i="el_"+this.element.id+t,o=e._getTool(t),t=this.host.find("#"+i);o.init?o.init(t):(i=isNaN(parseFloat(o.width))?"auto":o.width,o=isNaN(parseFloat(o.height))?"30px":o.height,t.jqxInput({theme:e.theme,width:i,height:o})),t.on("change",function(t){e._onChangeHandler(t)})},_initLabelTool:function(t){var e="el_"+this.element.id+t,t=this._getTool(t),e=this.host.find("#"+e);t.render&&w.isFunction(t.render)&&(t=t.render(),e.html(t||""))},_getTool:function(t){var e=t.split("_"),t=this.template[e[0]];return e[1]?w.isArray(t.columns)&&t.columns.length>e[1]?t.columns[e[1]]:void 0:t},_initCustomTool:function(t){var e="el_"+this.element.id+t,t=this._getTool(t),e=this.host.find("#"+e);t.init&&t.init(e)},_initButtonTool:function(t){var e,i=this,o="el_"+this.element.id+t,n=i._getTool(t),a=this.host.find("#"+o);n.init?n.init(a):(e=isNaN(parseFloat(n.width))?"auto":n.width,t=isNaN(parseFloat(n.height))?"30px":n.height,a.jqxButton({theme:i.theme,width:e,height:t}),a.val(void 0===n.text?"Button":n.text)),this.host.find("#"+o).on("click",function(t){i._onButtonClick(a,n)})},_initPasswordTool:function(t){var e=this,i="el_"+this.element.id+t,o=e._getTool(t),t=this.host.find("#"+i);o.init?o.init(t):(i=isNaN(parseFloat(o.width))?"auto":o.width,o=isNaN(parseFloat(o.height))?"25px":o.height,t.jqxPasswordInput({theme:e.theme,width:i,height:o})),t.on("change",function(t){e._onChangeHandler(t)})},_initDateTimeTool:function(t){var e,i=this,o="el_"+this.element.id+t,n=i._getTool(t),a=this.host.find("#"+o);n.init?n.init(a):(e=isNaN(parseFloat(n.width))?"auto":n.width,t=isNaN(parseFloat(n.height))?"30px":n.height,o=(o=n.formatString)||("time"==n.type?"hh mm ss tt":"date"==n.type?"MM/dd/yyyy":"MM/dd/yyyy hh:mm:ss tt"),a.jqxDateTimeInput({theme:i.theme,width:e,height:t,formatString:o,showTimeButton:"date"!=n.type,showCalendarButton:"time"!=n.type})),a.on("valueChanged",function(t){i._onChangeHandler(t)})},getComponentByName:function(t){if(w.isArray(this.template))for(var e=0;e<this.template.length;e++){if(this.template[e].name==t)return this._getComponentById(e);if(w.isArray(this.template[e].columns))for(var i=0;i<this.template[e].columns.length;i++)if(this.template[e].columns[i].name==t)return this._getComponentById(e+"_"+i)}},_getComponentById:function(t){return this.host.find("#el_"+this.element.id+t)},_getComponentLabelById:function(t){return this.host.find("#label_el_"+t)},hideComponent:function(t){this._showhideComponent(t,void 0,!1)},showComponent:function(t){this._showhideComponent(t,void 0,!0)},_showhideComponent:function(t,e,i){if(w.isArray(this.template)){var o="";if(void 0===e)for(var n=0;n<this.template.length;n++){if(this.template[n].name==t){o=n;break}if(this.template[n].bind==t){o=n;break}if(w.isArray(this.template[n].columns))for(var a=0;a<this.template[n].length;a++){if(this.template[n].columns[a].name==t){o=n+"_"+a;break}if(this.template[n].columns[a].bind==t){o=n+"_"+a;break}}}else o=e;""==o||(e=this.host.find("#rowWrap_el_"+this.element.id+o))&&0!=e.length&&(i?e.show():e.hide())}}})}(jqxBaseFramework);