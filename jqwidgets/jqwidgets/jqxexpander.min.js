!function(a){a.jqx.jqxWidget("jqxExpander","",{}),a.extend(a.jqx._jqxExpander.prototype,{defineInstance:function(){var e={width:"auto",height:"auto",expanded:!0,expandAnimationDuration:259,collapseAnimationDuration:250,animationType:"slide",toggleMode:"click",showArrow:!0,arrowPosition:"right",headerPosition:"top",disabled:!1,initContent:null,rtl:!1,easing:"easeInOutSine",aria:{"aria-disabled":{name:"disabled",type:"boolean"}},events:["expanding","expanded","collapsing","collapsed","resize"]};return this===a.jqx._jqxExpander.prototype||a.extend(!0,this,e),e},createInstance:function(){this._isTouchDevice=a.jqx.mobile.isTouchDevice(),a.jqx.aria(this),this._cachedHTMLStructure=this.host.html(),this._rendered=!1,this.render(),this._rendered=!0},expand:function(){if(!1===this.disabled&&!1===this.expanded&&1==this._expandChecker){var e=this;switch(this._expandChecker=0,this._raiseEvent("0"),this._header.removeClass(this.toThemeProperty("jqx-fill-state-normal")),this._header.addClass(this.toThemeProperty("jqx-fill-state-pressed jqx-expander-header-expanded")),"top"==this.headerPosition?(this._arrow.removeClass(this.toThemeProperty("jqx-icon-arrow-down jqx-icon-arrow-down-hover jqx-icon-arrow-up-hover jqx-icon-arrow-down-selected jqx-expander-arrow-top")),this._arrow.addClass(this.toThemeProperty("jqx-icon-arrow-up jqx-icon-arrow-up-selected jqx-expander-arrow-bottom jqx-expander-arrow-expanded"))):"bottom"==this.headerPosition&&(this._arrow.removeClass(this.toThemeProperty("jqx-icon-arrow-up jqx-icon-arrow-up-selected jqx-icon-arrow-down-hover jqx-icon-arrow-up-hover jqx-expander-arrow-bottom")),this._arrow.addClass(this.toThemeProperty("jqx-icon-arrow-down jqx-expander-arrow-top jqx-expander-arrow-expanded-top"))),this.animationType){case"slide":"top"==this.headerPosition?this._content.slideDown({duration:this.expandAnimationDuration,easing:this.easing,complete:function(){e.expanded=!0,a.jqx.aria(e._header,"aria-expanded",!0),a.jqx.aria(e._content,"aria-hidden",!1),e._raiseEvent("1"),e.initContent&&!1===e._initialized&&(e.initContent(),e._initialized=!0)}}):"bottom"==this.headerPosition&&(this._contentElement.style.display="",this._contentElement.style.height="0px",a.jqx.browser.msie&&a.jqx.browser.version<8&&(this._contentElement.style.display="block"),!0===this._cntntEmpty?this._content.animate({height:0},{duration:this.expandAnimationDuration,easing:this.easing,complete:function(){e.expanded=!0,a.jqx.aria(e._header,"aria-expanded",!0),a.jqx.aria(e._content,"aria-hidden",!1),e._raiseEvent("1"),e.initContent&&!1===e._initialized&&(e.initContent(),e._initialized=!0)}}):this._content.animate({height:this._contentHeight},{duration:this.expandAnimationDuration,easing:this.easing,complete:function(){e.expanded=!0,a.jqx.aria(e._header,"aria-expanded",!0),a.jqx.aria(e._content,"aria-hidden",!1),e._raiseEvent("1"),e.initContent&&!1===e._initialized&&(e.initContent(),e._initialized=!0)}}));break;case"fade":this._content.fadeIn({duration:this.expandAnimationDuration,easing:this.easing,complete:function(){e.expanded=!0,a.jqx.aria(e._header,"aria-expanded",!0),a.jqx.aria(e._content,"aria-hidden",!1),e._raiseEvent("1"),e.initContent&&!1===e._initialized&&(e.initContent(),e._initialized=!0)}});break;case"none":this._contentElement.style.display="",this.expanded=!0,a.jqx.aria(e._header,"aria-expanded",!0),a.jqx.aria(e._content,"aria-hidden",!1),this._raiseEvent("1"),this.initContent&&!1===this._initialized&&(this.initContent(),this._initialized=!0)}}},collapse:function(){if(!1===this.disabled&&!0===this.expanded&&0===this._expandChecker){var e=this;switch(this._expandChecker=1,this._raiseEvent("2"),this._header.removeClass(this.toThemeProperty("jqx-fill-state-pressed jqx-expander-header-expanded")),this._header.addClass(this.toThemeProperty("jqx-fill-state-normal")),"top"==this.headerPosition?(this._arrow.removeClass(this.toThemeProperty("jqx-icon-arrow-up jqx-icon-arrow-up-selected jqx-expander-arrow-bottom jqx-expander-arrow-expanded")),this._arrow.addClass(this.toThemeProperty("jqx-icon-arrow-down jqx-expander-arrow-top")),e._hovered&&this._arrow.addClass(this.toThemeProperty("jqx-icon-arrow-down-hover"))):"bottom"==this.headerPosition&&(this._arrow.removeClass(this.toThemeProperty("jqx-icon-arrow-down jqx-icon-arrow-down-selected jqx-expander-arrow-top jqx-expander-arrow-expanded-top")),this._arrow.addClass(this.toThemeProperty("jqx-icon-arrow-up jqx-expander-arrow-bottom")),e._hovered&&this._arrow.addClass(this.toThemeProperty("jqx-icon-arrow-up-hover"))),this.animationType){case"slide":"top"==this.headerPosition?this._content.slideUp({duration:this.collapseAnimationDuration,easing:this.easing,complete:function(){e.expanded=!1,a.jqx.aria(e._header,"aria-expanded",!1),a.jqx.aria(e._content,"aria-hidden",!0),e._raiseEvent("3")}}):"bottom"==this.headerPosition&&this._content.animate({height:0},{duration:this.expandAnimationDuration,easing:this.easing,complete:function(){e._contentElement.style.display="none",e.expanded=!1,a.jqx.aria(e._header,"aria-expanded",!1),a.jqx.aria(e._content,"aria-hidden",!0),e._raiseEvent("3")}});break;case"fade":this._content.fadeOut({duration:this.collapseAnimationDuration,easing:this.easing,complete:function(){e.expanded=!1,a.jqx.aria(e._header,"aria-expanded",!1),a.jqx.aria(e._content,"aria-hidden",!0),e._raiseEvent("3")}});break;case"none":e._contentElement.style.display="none",this.expanded=!1,a.jqx.aria(e._header,"aria-expanded",!1),a.jqx.aria(e._content,"aria-hidden",!0),this._raiseEvent("3")}}},setHeaderContent:function(e){this._headerText.innerHTML=e,this.invalidate()},getHeaderContent:function(){return this._headerText.innerHTML},setContent:function(e){this._content.html(e),this._checkContent(),this.invalidate()},getContent:function(){return this._content.html()},enable:function(){this.disabled=!1,this.refresh(),a.jqx.aria(this,"aria-disabled",!1)},disable:function(){this.disabled=!0,this.refresh(),a.jqx.aria(this,"aria-disabled",!0)},invalidate:function(){a.jqx.isHidden(this.host)||this._setSize()},refresh:function(e){!0!==e&&(this._removeHandlers(),!0===this.showArrow?this._arrowElement.style.display="":this._arrowElement.style.display="none",this._setTheme(),this._setSize(),!1===this.disabled&&this._toggle(),this._keyBoard())},render:function(){var e=this;if(e._rendered)e.refresh();else{this.widgetID=this.element.id;var t=this.host.children();this._headerText=t[0],this._headerElement=document.createElement("div"),this._header=a(this._headerElement),this._contentElement=t[1],this._content=a(this._contentElement),this._content.initAnimate&&this._content.initAnimate(),"top"===this.headerPosition?e.element.insertBefore(e._headerElement,e._headerText):e.element.appendChild(e._headerElement),e._headerElement.appendChild(e._headerText);var i=this._headerText.className;this._headerElement.className=i,this._headerText.className="",this.rtl?this._headerText.className+=" "+e.toThemeProperty("jqx-expander-header-content-rtl"):this._headerText.className+=" "+e.toThemeProperty("jqx-expander-header-content"),e._arrowElement=document.createElement("div"),e._headerElement.appendChild(e._arrowElement),this._arrow=a(e._arrowElement),!0===this.showArrow?e._arrowElement.style.display="":e._arrowElement.style.display="none",null===this._headerElement.getAttribute("tabindex")&&null===this._contentElement.getAttribute("tabindex")&&("top"===e.headerPosition?(this._headerElement.setAttribute("tabindex",1),this._contentElement.setAttribute("tabindex",2)):(this._headerElement.setAttribute("tabindex",2),this._contentElement.setAttribute("tabindex",1))),this._setTheme();try{if(0===this._header.length||0===this._content.length||t.length<2||2<t.length)throw"Invalid jqxExpander structure. Please add only two child div elements to your jqxExpander div that will represent the expander's header and content."}catch(e){throw new Error(e)}this._setSize(),!0===this.expanded?("top"==this.headerPosition?this._arrow.addClass(this.toThemeProperty("jqx-icon-arrow-up jqx-icon-arrow-up-selected jqx-expander-arrow-bottom jqx-expander-arrow-expanded")):"bottom"==this.headerPosition&&this._arrow.addClass(this.toThemeProperty("jqx-icon-arrow-down jqx-icon-arrow-down-selected jqx-expander-arrow-top jqx-expander-arrow-expanded-top")),this.initContent&&this.initContent(),this._initialized=!0,this._expandChecker=0):!1===this.expanded&&(this._arrow.removeClass(this.toThemeProperty("jqx-icon-arrow-down-selected jqx-icon-arrow-up-selected")),"top"==this.headerPosition?this._arrow.addClass(this.toThemeProperty("jqx-icon-arrow-down jqx-expander-arrow-top")):"bottom"==this.headerPosition&&this._arrow.addClass(this.toThemeProperty("jqx-icon-arrow-up jqx-expander-arrow-bottom")),this._initialized=!1,this._expandChecker=1,this._contentElement.style.display="none"),this._checkContent(),!1===this.disabled&&this._toggle(),this._keyBoard(),a.jqx.utilities.resize(this.host,function(){e.invalidate()})}},destroy:function(){this.removeHandler(a(window),"resize.expander"+this.widgetID),this.host.remove(),a(this.element).removeData("jqxExpander")},focus:function(){try{!1===this.disabled&&this._headerElement.focus()}catch(e){}},propertiesChangedHandler:function(e,t,i){i.width&&i.height&&2==Object.keys(i).length&&e._setSize()},propertyChangedHandler:function(e,t,i,r){e.batchUpdate&&e.batchUpdate.width&&e.batchUpdate.height&&2==Object.keys(e.batchUpdate).length||("width"!=t&&"height"!=t?"expanded"==t?!0===r&&!1===i?(this.expanded=!1,this.expand()):!1===r&&!0===i&&(this.expanded=!0,this.collapse()):this.refresh():e._setSize())},_raiseEvent:function(e,t){var i,e=this.events[e],r=new a.Event(e);r.owner=this,r.args=t;try{i=this.host.trigger(r)}catch(e){}return i},resize:function(e,t){this.width=e,this.height=t,this._setSize()},_setSize:function(){this.element.style.width=this._toPx(this.width),this.element.style.height=this._toPx(this.height),this._headerElement.style.height="auto",this._headerElement.style.minHeight=this._arrowElement.offsetHeight;var e=this.arrowPosition;if(this.rtl)switch(e){case"left":e="right";break;case"right":e="left"}"right"==e?(this._headerText.style.float="left",this._headerText.style.marginLeft="0px",this._arrowElement.style.float="right",this._arrowElement.style.position="relative"):"left"==e&&("auto"==this.width?(this._headerText.style.float="left",this._headerText.style.marginLeft="17px",this._arrowElement.style.float="left",this._arrowElement.style.position="absolute"):(this._headerText.style.float="right",this._headerText.style.marginLeft="0px",this._arrowElement.style.float="left",this._arrowElement.style.position="relative")),this._arrowElement.style.marginTop=this._headerText.offsetHeight/2-this._arrowElement.offsetHeight/2+"px",this._contentElement.style.height="auto";var t=Math.max(0,this._content.height());"auto"==this.height?this._contentHeight=t:((e=Math.round(this.element.offsetHeight)-Math.round(this._header.outerHeight())-1)<0&&(e=0),this._contentHeight||(this._contentHeight=t),e!=this._contentHeight?(this._contentElement.style.height=this._toPx(e),this._contentHeight=Math.round(this._content.outerHeight())):this._contentElement.style.height=this._toPx(this._contentHeight))},_toggle:function(){var e=this;if(!1===this._isTouchDevice)switch(this._header.removeClass(this.toThemeProperty("jqx-expander-header-disabled")),this.toggleMode){case"click":this.addHandler(this._header,"click.expander"+this.widgetID,function(){e._animate()});break;case"dblclick":this.addHandler(this._header,"dblclick.expander"+this.widgetID,function(){e._animate()});break;case"none":this._header.addClass(this.toThemeProperty("jqx-expander-header-disabled"))}else"none"!=this.toggleMode&&this.addHandler(this._header,a.jqx.mobile.getTouchEventName("touchstart")+"."+this.widgetID,function(){e._animate()})},_animate:function(){!0===this.expanded?(this.collapse(),this._header.addClass(this.toThemeProperty("jqx-fill-state-hover jqx-expander-header-hover")),"top"==this.headerPosition?this._arrow.addClass(this.toThemeProperty("jqx-expander-arrow-top-hover jqx-expander-arrow-down-hover")):"bottom"==this.headerPosition&&this._arrow.addClass(this.toThemeProperty("jqx-expander-arrow-bottom-hover jqx-expander-arrow-up-hover"))):(this.expand(),this._header.removeClass(this.toThemeProperty("jqx-fill-state-hover jqx-expander-header-hover")),"top"==this.headerPosition?this._arrow.removeClass(this.toThemeProperty("jqx-expander-arrow-top-hover jqx-expander-arrow-down-hover")):"bottom"==this.headerPosition&&this._arrow.removeClass(this.toThemeProperty("jqx-expander-arrow-bottom-hover jqx-expander-arrow-up-hover")))},_removeHandlers:function(){this.removeHandler(this._header,"click.expander"+this.widgetID),this.removeHandler(this._header,"dblclick.expander"+this.widgetID),this.removeHandler(this._header,"mouseenter.expander"+this.widgetID),this.removeHandler(this._header,"mouseleave.expander"+this.widgetID)},_setTheme:function(){var e=this,t="jqx-widget jqx-expander",i="jqx-widget-header jqx-expander-header",r="jqx-widget-content jqx-expander-content";!0===this.rtl&&(t+=" jqx-rtl"),!1===this.disabled?(this._header.removeClass(this.toThemeProperty("jqx-expander-header-disabled")),this.host.removeClass(this.toThemeProperty("jqx-fill-state-disabled")),!0===this.expanded?i+=" jqx-fill-state-pressed jqx-expander-header-expanded":(i+=" jqx-fill-state-normal",this._header.removeClass(this.toThemeProperty("jqx-expander-header-expanded"))),this._hovered=!1,e._isTouchDevice||(this.addHandler(this._header,"mouseenter.expander"+this.widgetID,function(){e._hovered=!0,1==e._expandChecker&&(e._header.removeClass(e.toThemeProperty("jqx-fill-state-normal jqx-fill-state-pressed")),e._header.addClass(e.toThemeProperty("jqx-fill-state-hover jqx-expander-header-hover")),"top"==e.headerPosition?(e.expanded?e._arrow.addClass(e.toThemeProperty("jqx-icon-arrow-up-hover")):e._arrow.addClass(e.toThemeProperty("jqx-icon-arrow-down-hover")),e._arrow.addClass(e.toThemeProperty("jqx-expander-arrow-top-hover jqx-expander-arrow-down-hover"))):"bottom"==e.headerPosition&&(e.expanded&&e._arrow.addClass(e.toThemeProperty("jqx-icon-arrow-down-hover")),e._arrow.addClass(e.toThemeProperty("jqx-expander-arrow-bottom-hover jqx-expander-arrow-up-hover"))))}),this.addHandler(this._header,"mouseleave.expander"+this.widgetID,function(){e._hovered=!1,e._header.removeClass(e.toThemeProperty("jqx-fill-state-hover jqx-expander-header-hover")),e._arrow.removeClass(e.toThemeProperty("jqx-icon-arrow-up-hover jqx-icon-arrow-down-hover")),"top"==e.headerPosition?e._arrow.removeClass(e.toThemeProperty("jqx-expander-arrow-top-hover jqx-expander-arrow-down-hover")):"bottom"==e.headerPosition&&e._arrow.removeClass(e.toThemeProperty("jqx-expander-arrow-bottom-hover jqx-expander-arrow-up-hover")),1==e._expandChecker?e._header.addClass(e.toThemeProperty("jqx-fill-state-normal")):e._header.addClass(e.toThemeProperty("jqx-fill-state-pressed"))}))):(t+=" jqx-fill-state-disabled",i+=" jqx-expander-header-disabled"),"top"==this.headerPosition?r+=" jqx-expander-content-bottom":"bottom"==this.headerPosition&&(r+=" jqx-expander-content-top"),this.host.addClass(this.toThemeProperty(t)),this._header.addClass(this.toThemeProperty(i)),this._content.addClass(this.toThemeProperty(r)),this._arrow.addClass(this.toThemeProperty("jqx-expander-arrow"))},_checkContent:function(){this._cntntEmpty=/^\s*$/.test(this._contentElement.innerHTML),!0===this._cntntEmpty?(this._contentElement.style.height="0px",this._content.addClass(this.toThemeProperty("jqx-expander-content-empty"))):("auto"===this.height?this._contentElement.style.height="auto":this._contentElement.style.height=this._contentHeight+"px",this._content.removeClass(this.toThemeProperty("jqx-expander-content-empty")))},_keyBoard:function(){var i=this;this._focus(),this.addHandler(this.host,"keydown.expander"+this.widgetID,function(e){var t=!1;if(!0!==i.focusedH&&!0!==i.focusedC||!1!==i.disabled)return t&&e.preventDefault&&e.preventDefault(),!t;switch(e.keyCode){case 13:case 32:"none"!=i.toggleMode&&(!0===i.focusedH&&i._animate(),t=!0);break;case 38:!0===e.ctrlKey&&!0===i.focusedC&&i._headerElement.focus(),t=!0;break;case 40:!0===e.ctrlKey&&!0===i.focusedH&&i._contentElement.focus(),t=!0}return!0})},_focus:function(){var e=this;this.addHandler(this._header,"focus.expander"+this.widgetID,function(){e.focusedH=!0,a.jqx.aria(e._header,"aria-selected",!0),e._header.addClass(e.toThemeProperty("jqx-fill-state-focus"))}),this.addHandler(this._header,"blur.expander"+this.widgetID,function(){e.focusedH=!1,a.jqx.aria(e._header,"aria-selected",!1),e._header.removeClass(e.toThemeProperty("jqx-fill-state-focus"))}),this.addHandler(this._headerText,"focus.expander"+this.widgetID,function(){e._headerElement.focus()}),this.addHandler(this._arrow,"focus.expander"+this.widgetID,function(){e._headerElement.focus()}),this.addHandler(this._content,"focus.expander"+this.widgetID,function(){e.focusedC=!0,e._content.addClass(e.toThemeProperty("jqx-fill-state-focus"))}),this.addHandler(this._content,"blur.expander"+this.widgetID,function(){e.focusedC=!1,e._content.removeClass(e.toThemeProperty("jqx-fill-state-focus"))})},_toPx:function(e){return"number"==typeof e?e+"px":e}})}(jqxBaseFramework);