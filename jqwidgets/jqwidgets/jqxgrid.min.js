!function(se){function h(s,e){return this.owner=s,this.datafield=null,this.displayfield=null,this.text="",this.createfilterpanel=null,this.sortable=!0,this.hideable=!0,this.editable=!0,this.hidden=!1,this.adaptivehidden=!1,this.groupable=!0,this.renderer=null,this.cellsrenderer=null,this.checkchange=null,this.threestatecheckbox=!1,this.buttonclick=null,this.columntype=null,this.cellsformat="",this.align="left",this.cellsalign="left",this.width="auto",this.minwidth=25,this.maxwidth="auto",this.pinned=!1,this.visibleindex=-1,this.filterable=!0,this.filter=null,this.filteritems=[],this.resizable=!0,this.initeditor=null,this.createeditor=null,this.createwidget=null,this.initwidget=null,this.destroywidget=null,this.destroyeditor=null,this.geteditorvalue=null,this.validation=null,this.classname="",this.cellclassname="",this.cellendedit=null,this.cellbeginedit=null,this.cellvaluechanging=null,this.aggregates=null,this.aggregatesrenderer=null,this.menu=!0,this.createfilterwidget=null,this.filtertype="default",this.filtercondition=null,this.rendered=null,this.exportable=!0,this.exporting=!1,this.draggable=!0,this.nullable=!0,this.clipboard=!0,this.selectable=!1,this.autofill=!0,this._applyStyle=function(){var e=this;return e.hovered?(e.style.headerBackgroundHoveredColor&&(e.element.style.backgroundColor=e.style.headerBackgroundHoveredColor),void(e.style.headerHoveredColor&&(e.element.style.color=e.style.headerHoveredColor))):e.selected?(e.style.headerBackgroundSelectedColor&&(e.element.style.backgroundColor=e.style.headerBackgroundSelectedColor),void(e.style.headerSelectedColor&&(e.element.style.color=e.style.headerSelectedColor))):(e.style.headerBackgroundColor?e.element.style.backgroundColor=e.style.headerBackgroundColor:e.element.style.backgroundColor="",void(e.style.headerColor?e.element.style.color=e.style.headerColor:e.element.style.color=""))},this._applyCellStyle=function(e){var t=this,i=!1;if(e.length)for(var s=0;s<e.length;s++)this._applyCellStyle(e[s]);else if((t.style.backgroundColor||t.style.color||t.style.hoveredColor||t.style.hoveredColor||t.style.backgroundSelectedColor||t.style.selectedColor)&&(i=!0),i)return 0<=e.className.indexOf("hover")?(t.style.backgroundHoveredColor&&(e.style.backgroundColor=t.style.backgroundHoveredColor),void(t.style.hoveredColor&&(e.style.color=t.style.hoveredColor))):0<=e.className.indexOf("selected")?(t.style.backgroundSelectedColor&&(e.style.backgroundColor=t.style.backgroundSelectedColor),void(t.style.selectedColor&&(e.style.color=t.style.selectedColor))):(t.style.backgroundColor&&(e.style.backgroundColor=t.style.backgroundColor),void(t.style.color&&(e.style.color=t.style.color)))},this.style={headerBackgroundColor:"",headerColor:"",headerBackgroundHoveredColor:"",headerHoveredColor:"",headerBackgroundSelectedColor:"",headerSelectedColor:"",backgroundColor:"",color:"",backgroundHoveredColor:"",hoveredColor:"",backgroundSelectedColor:"",selectedColor:""},this.enabletooltips=!0,this.columngroup=null,this.filterdelay=800,this.reseteverpresentrowwidgetvalue=null,this.geteverpresentrowwidgetvalue=null,this.createeverpresentrowwidget=null,this.initeverpresentrowwidget=null,this.validateeverpresentrowwidgetvalue=null,this.destroyeverpresentrowwidget=null,this.getcolumnproperties=function(){return{nullable:this.nullable,sortable:this.sortable,hideable:this.hideable,hidden:this.hidden,groupable:this.groupable,width:this.width,align:this.align,editable:this.editable,minwidth:this.minwidth,maxwidth:this.maxwidth,resizable:this.resizable,datafield:this.datafield,text:this.text,exportable:this.exportable,cellsalign:this.cellsalign,pinned:this.pinned,cellsformat:this.cellsformat,columntype:this.columntype,classname:this.classname,cellclassname:this.cellclassname,menu:this.menu}},this.setproperty=function(e,t){var i;this[e]?(i=this[e],this[e]=t,this.owner._columnPropertyChanged(this,e,t,i)):this[e.toLowerCase()]&&(i=this[e.toLowerCase()],this[e.toLowerCase()]=t,this.owner._columnPropertyChanged(this,e.toLowerCase(),t,i))},this._initfields=function(e){if(null!=e){var t=this.that;if(se.jqx.hasProperty(e,"dataField")&&(this.datafield=se.jqx.get(e,"dataField")),se.jqx.hasProperty(e,"selectable")&&(this.selectable=se.jqx.get(e,"selectable")),se.jqx.hasProperty(e,"displayField")?this.displayfield=se.jqx.get(e,"displayField"):this.displayfield=this.datafield,se.jqx.hasProperty(e,"enableTooltips")&&(this.enabletooltips=se.jqx.get(e,"enableTooltips")),se.jqx.hasProperty(e,"text")?this.text=se.jqx.get(e,"text"):this.text=this.displayfield,se.jqx.hasProperty(e,"style")&&(this.style=se.jqx.get(e,"style")),se.jqx.hasProperty(e,"createfilterpanel")&&(this.createfilterpanel=se.jqx.get(e,"createfilterpanel")),se.jqx.hasProperty(e,"sortable")&&(this.sortable=se.jqx.get(e,"sortable")),se.jqx.hasProperty(e,"hideable")&&(this.hideable=se.jqx.get(e,"hideable")),se.jqx.hasProperty(e,"hidden")&&(this.hidden=se.jqx.get(e,"hidden")),se.jqx.hasProperty(e,"adaptivehidden")&&(this.adaptivehidden=se.jqx.get(e,"adaptivehidden")),se.jqx.hasProperty(e,"groupable")&&(this.groupable=se.jqx.get(e,"groupable")),se.jqx.hasProperty(e,"renderer")&&(this.renderer=se.jqx.get(e,"renderer")),se.jqx.hasProperty(e,"align")&&(this.align=se.jqx.get(e,"align")),se.jqx.hasProperty(e,"cellsAlign")&&(this.cellsalign=se.jqx.get(e,"cellsAlign")),se.jqx.hasProperty(e,"clipboard")&&(this.clipboard=se.jqx.get(e,"clipboard")),se.jqx.hasProperty(e,"cellsFormat")&&(this.cellsformat=se.jqx.get(e,"cellsFormat")),se.jqx.hasProperty(e,"width")&&(this.width=se.jqx.get(e,"width")),se.jqx.hasProperty(e,"autofill")&&(this.autofill=se.jqx.get(e,"autofill")),se.jqx.hasProperty(e,"minWidth")&&(this.minwidth=parseInt(se.jqx.get(e,"minWidth")),isNaN(this.minwidth)&&(this.minwidth=25)),se.jqx.hasProperty(e,"maxWidth")&&(this.maxwidth=parseInt(se.jqx.get(e,"maxWidth")),isNaN(this.maxwidth)&&(this.maxwidth="auto")),se.jqx.hasProperty(e,"cellsRenderer")?this.cellsrenderer=se.jqx.get(e,"cellsRenderer"):e.cellsRenderer&&(this.cellsrenderer=e.cellsRenderer),se.jqx.hasProperty(e,"columnType")&&(this.columntype=se.jqx.get(e,"columnType")),se.jqx.hasProperty(e,"checkChange")&&(this.checkchange=se.jqx.get(e,"checkChange")),se.jqx.hasProperty(e,"buttonClick")?this.buttonclick=se.jqx.get(e,"buttonClick"):e.buttonClick&&(this.buttonclick=e.buttonClick),se.jqx.hasProperty(e,"pinned")&&(this.pinned=se.jqx.get(e,"pinned")),se.jqx.hasProperty(e,"visibleIndex")&&(this.visibleindex=se.jqx.get(e,"visibleIndex")),se.jqx.hasProperty(e,"filterable")&&(this.filterable=se.jqx.get(e,"filterable")),se.jqx.hasProperty(e,"filter")&&(this.filter=se.jqx.get(e,"filter")),se.jqx.hasProperty(e,"resizable")&&(this.resizable=se.jqx.get(e,"resizable")),se.jqx.hasProperty(e,"editable")&&(this.editable=se.jqx.get(e,"editable")),se.jqx.hasProperty(e,"initEditor")?this.initeditor=se.jqx.get(e,"initEditor"):e.initEditor&&(this.initeditor=e.initEditor),se.jqx.hasProperty(e,"createEditor")?this.createeditor=se.jqx.get(e,"createEditor"):e.createEditor&&(this.createeditor=e.createEditor),se.jqx.hasProperty(e,"initWidget")?this.initwidget=se.jqx.get(e,"initWidget"):e.initWidget&&(this.initwidget=e.initWidget),se.jqx.hasProperty(e,"createWidget")?this.createwidget=se.jqx.get(e,"createWidget"):e.createWidget&&(this.createwidget=e.createWidget),se.jqx.hasProperty(e,"destroyWidget")?this.destroywidget=se.jqx.get(e,"destroyWidget"):e.destroyWidget&&(this.destroywidget=e.destroyWidget),se.jqx.hasProperty(e,"reseteverpresentrowwidgetvalue")||se.jqx.hasFunction(e,"reseteverpresentrowwidgetvalue")?this.reseteverpresentrowwidgetvalue=se.jqx.get(e,"reseteverpresentrowwidgetvalue"):e.resetEverPresentRowWidgetValue&&(this.reseteverpresentrowwidgetvalue=e.resetEverPresentRowWidgetValue),se.jqx.hasProperty(e,"geteverpresentrowwidgetvalue")||se.jqx.hasFunction(e,"geteverpresentrowwidgetvalue")?this.geteverpresentrowwidgetvalue=se.jqx.get(e,"geteverpresentrowwidgetvalue"):e.getEverPresentRowWidgetValue&&(this.geteverpresentrowwidgetvalue=e.getEverPresentRowWidgetValue),se.jqx.hasProperty(e,"createeverpresentrowwidget")||se.jqx.hasFunction(e,"createeverpresentrowwidget")?this.createeverpresentrowwidget=se.jqx.get(e,"createeverpresentrowwidget"):e.createEverPresentRowWidget&&(this.createeverpresentrowwidget=e.createEverPresentRowWidget),se.jqx.hasProperty(e,"initeverpresentrowwidget")||se.jqx.hasFunction(e,"initeverpresentrowwidget")?this.initeverpresentrowwidget=se.jqx.get(e,"initeverpresentrowwidget"):e.initEverPresentRowWidget&&(this.initeverpresentrowwidget=e.initEverPresentRowWidget),se.jqx.hasProperty(e,"validateeverpresentrowwidgetvalue")?this.validateeverpresentrowwidgetvalue=se.jqx.get(e,"validateeverpresentrowwidgetvalue"):e.validateEverPresentRowWidgetValue&&(this.validateeverpresentrowwidgetvalue=e.validateEverPresentRowWidgetValue),se.jqx.hasProperty(e,"destroyeverpresentrowwidget")||se.jqx.hasFunction(e,"destroyeverpresentrowwidget")?this.destroyeverpresentrowwidget=se.jqx.get(e,"destroyeverpresentrowwidget"):e.destroyEverPresentRowWidget&&(this.destroyEverPresentRowWidget=e.destroyEverPresentRowWidget),se.jqx.hasProperty(e,"destroyEditor")?this.destroyeditor=se.jqx.get(e,"destroyEditor"):e.destroyEditor&&(this.destroyeditor=e.destroyEditor),se.jqx.hasProperty(e,"getEditorValue")?this.geteditorvalue=se.jqx.get(e,"getEditorValue"):e.getEditorValue&&(this.geteditorvalue=e.getEditorValue),se.jqx.hasProperty(e,"validation")?this.validation=se.jqx.get(e,"validation"):e.validation&&(this.validation=e.validation),se.jqx.hasProperty(e,"cellBeginEdit")?this.cellbeginedit=se.jqx.get(e,"cellBeginEdit"):e.cellBeginEdit&&(this.cellbeginedit=e.cellBeginEdit),se.jqx.hasProperty(e,"cellEndEdit")?this.cellendedit=se.jqx.get(e,"cellEndEdit"):e.cellEndEdit&&(this.cellendedit=e.cellEndEdit),se.jqx.hasProperty(e,"className")&&(this.classname=se.jqx.get(e,"className")),se.jqx.hasProperty(e,"cellClassName")?this.cellclassname=se.jqx.get(e,"cellClassName"):e.cellClassName&&(this.cellclassname=e.cellClassName),se.jqx.hasProperty(e,"menu")&&(this.menu=se.jqx.get(e,"menu")),se.jqx.hasProperty(e,"aggregates")&&(this.aggregates=se.jqx.get(e,"aggregates")),se.jqx.hasProperty(e,"aggregatesRenderer")&&(this.aggregatesrenderer=se.jqx.get(e,"aggregatesRenderer")),se.jqx.hasProperty(e,"createFilterWidget")&&(this.createfilterwidget=se.jqx.get(e,"createFilterWidget")),se.jqx.hasProperty(e,"filterType")&&(this.filtertype=se.jqx.get(e,"filterType")),se.jqx.hasProperty(e,"filterDelay")&&(this.filterdelay=se.jqx.get(e,"filterDelay")),se.jqx.hasProperty(e,"rendered")&&(this.rendered=se.jqx.get(e,"rendered")),se.jqx.hasProperty(e,"exportable")&&(this.exportable=se.jqx.get(e,"exportable")),se.jqx.hasProperty(e,"filterItems")&&(this.filteritems=se.jqx.get(e,"filterItems")),se.jqx.hasProperty(e,"cellValueChanging")&&(this.cellvaluechanging=se.jqx.get(e,"cellValueChanging")),se.jqx.hasProperty(e,"draggable")&&(this.draggable=se.jqx.get(e,"draggable")),se.jqx.hasProperty(e,"filterCondition")&&(this.filtercondition=se.jqx.get(e,"filterCondition")),se.jqx.hasProperty(e,"threeStateCheckbox")&&(this.threestatecheckbox=se.jqx.get(e,"threeStateCheckbox")),se.jqx.hasProperty(e,"nullable")&&(this.nullable=se.jqx.get(e,"nullable")),se.jqx.hasProperty(e,"columnGroup")&&(this.columngroup=se.jqx.get(e,"columnGroup")),!e instanceof String&&"string"!=typeof e)for(var i in e)if(!t.hasOwnProperty(i)&&!t.hasOwnProperty(i.toLowerCase()))throw s.host.remove(),new Error("jqxGrid: Invalid property name - "+i+".")}},this._initfields(e),this}function u(e,t){return this.setdata=function(e){null!=e&&(this.bounddata=e,this.boundindex=e.boundindex,this.visibleindex=e.visibleindex,this.group=e.group,this.parentbounddata=e.parentItem,this.uniqueid=e.uniqueid,this.level=e.level)},this.setdata(t),this.parentrow=null,this.subrows=new Array,this.owner=e,this.height=25,this.hidden=!1,this.rowdetails=null,this.rowdetailsheight=100,this.rowdetailshidden=!0,this.top=-1,this.setrowinfo=function(e){this.hidden=e.hidden,this.rowdetails=e.rowdetails,this.rowdetailsheight=e.rowdetailsheight,this.rowdetailshidden=!e.showdetails,this.height=e.height},this}se.jqx.jqxWidget("jqxGrid","",{}),se.extend(se.jqx._jqxGrid.prototype,{defineInstance:function(){var e={adaptive:!1,adaptivewidth:600,disabled:!1,width:600,height:400,pagerheight:40,groupsheaderheight:34,pagesize:10,pagesizeoptions:["5","10","20"],rowsheight:32,columnsheight:36,filterrowheight:36,groupindentwidth:30,rowdetails:!1,enablerowdetailsindent:!0,enablemousewheel:!0,initrowdetails:null,layoutrowdetails:null,editable:!1,editmode:"selectedcell",pageable:!1,pagermode:"default",pagerbuttonscount:5,groupable:!1,sortable:!1,sortmode:"one",filterable:!1,filtermode:"default",filterbarmode:"default",autoshowfiltericon:!0,showfiltercolumnbackground:!0,showpinnedcolumnbackground:!0,showsortcolumnbackground:!0,altrows:!1,altstart:1,altstep:1,showrowdetailscolumn:!0,showrowlines:!0,showcolumnlines:!0,showcolumnheaderlines:!0,showtoolbar:!1,showfilterbar:!1,toolbarheight:36,showstatusbar:!1,statusbarheight:36,enableellipsis:!0,groups:[],groupsrenderer:null,groupcolumnrenderer:null,groupsexpandedbydefault:!1,pagerrenderer:null,touchmode:"auto",columns:[],selectedrowindex:-1,selectedrowindexes:new Array,selectedcells:new Array,autobind:!0,selectedcell:null,tableZIndex:79,headerZIndex:29,updatefilterconditions:null,showgroupaggregates:!1,showaggregates:!1,showfilterrow:!1,showeverpresentrow:!1,everpresentrowposition:"top",everpresentrowactions:"add reset",everpresentrowactionsmode:"buttons",everpresentrowheight:30,autorowheight:!1,autokoupdates:!0,handlekeyboardnavigation:null,showsortmenuitems:!0,showfiltermenuitems:!0,showgroupmenuitems:!0,enablebrowserselection:!1,enablekeyboarddelete:!0,clipboard:!0,clipboardbegin:null,clipboardend:null,copytoclipboardwithheaders:!1,copytoclipboardhiddencolumns:!1,ready:null,updatefilterpanel:null,autogeneratecolumns:!1,rowdetailstemplate:null,scrollfeedback:null,rendertoolbar:null,renderstatusbar:null,rendered:null,multipleselectionbegins:null,columngroups:null,cellhover:null,source:{beforeprocessing:null,beforesend:null,loaderror:null,localdata:null,data:null,datatype:"array",datafields:[],url:"",root:"",record:"",id:"",totalrecords:0,recordstartindex:0,recordendindex:0,loadallrecords:!0,sortcolumn:null,sortdirection:null,sort:null,filter:null,sortcomparer:null},filter:null,dataview:null,updatedelay:null,autoheight:!1,autowidth:!1,showheader:!0,showgroupsheader:!0,closeablegroups:!0,scrollbarsize:se.jqx.utilities.scrollBarSize,touchscrollbarsize:se.jqx.utilities.touchScrollBarSize,scrollbarautoshow:se.jqx.utilities.scrollBarAutoShow,virtualmode:!1,sort:null,columnsmenu:!0,columnsresize:!1,columnsautoresize:!0,columnsreorder:!1,columnsmenuwidth:16,autoshowcolumnsmenubutton:!0,showcolumnsactionbutton:!1,popupwidth:"auto",popupheight:"auto",columnmenuopening:null,columnmenuclosing:null,sorttogglestates:2,rendergridrows:null,enableanimations:!0,enablecolumnsvirtualization:!0,enabletooltips:!1,selectionmode:"singlerow",autofill:!1,enableoptimization:!1,enablehover:!0,loadingerrormessage:"The data is still loading. When the data binding is completed, the Grid raises the 'bindingcomplete' event. Call this function in the 'bindingcomplete' event handler.",verticalscrollbarstep:30,verticalscrollbarlargestep:400,horizontalscrollbarstep:10,horizontalscrollbarlargestep:50,keyboardnavigation:!0,keyboardmenunavigation:!0,touchModeStyle:"auto",autoshowloadelement:!0,showdefaultloadelement:!0,showemptyrow:!0,autosavestate:!1,autoloadstate:!1,cardview:!1,cardviewcolumns:["20%","20%","20%","20%","20%"],cardheight:250,cardsize:3,_updating:!1,_pagescache:new Array,_pageviews:new Array,_cellscache:new Array,_rowdetailscache:new Array,_rowdetailselementscache:new Array,_requiresupdate:!1,_hasOpenedMenu:!1,scrollmode:"physical",deferreddatafields:null,localization:null,rtl:!1,menuitemsarray:[],charting:{appendTo:null,colorScheme:"scheme02",dialog:{header:"Data Visualization",height:400,width:400,position:"center",enabled:!0},ready:null,formatSettings:{}},events:["initialized","rowClick","rowSelect","rowUnselect","groupExpand","groupCollapse","sort","columnClick","cellClick","pageChanged","pageSizeChanged","bindingComplete","groupsChanged","filter","columnResized","cellSelect","cellUnselect","cellBeginEdit","cellEndEdit","cellValueChanged","rowExpand","rowCollapse","rowDoubleClick","cellDoubleClick","columnReordered","pageChanging"]};return this===se.jqx._jqxGrid.prototype||se.extend(!0,this,e),e},_applyThemeSettings:function(){var e,t,i,s,r,l=this;l.isMaterialized()&&(e=(r=window.getComputedStyle(l.element)).getPropertyValue("--jqx-grid-row-height"),t=r.getPropertyValue("--jqx-grid-column-height"),i=r.getPropertyValue("--jqx-grid-show-column-lines"),s=r.getPropertyValue("--jqx-grid-filter-menu-items-height"),r=r.getPropertyValue("--jqx-scrollbar-size"),e&&32===this.rowsheight&&!this.cardview&&(l.rowsheight=parseInt(e)),t&&36===this.columnsheight&&(l.columnsheight=parseInt(t)),i&&(l.showcolumnlines=l.showcolumnheaderlines=parseInt(i)),l.filterMenuItemsHeight=s?parseInt(s):23,r&&(l.scrollbarsize=r,se.jqx.utilities.scrollBarSize=r))},createInstance:function(e){var t=this.that=this;t.pagesize=parseInt(t.pagesize),t.toolbarheight=parseInt(t.toolbarheight),t.columnsheight=parseInt(t.columnsheight),t.filterrowheight=parseInt(t.filterrowheight),t.statusbarheight=parseInt(t.statusbarheight),t.groupsheaderheight=parseInt(t.groupsheaderheight),t._undoRedo=[],t._undoRedoIndex=-1,t.cardview&&(t.__rowsheight=t.rowsheight,t.rowsheight=t.cardheight),t._applyThemeSettings(),t.detailsVisibility=new Array,t.savedArgs=e&&0<e.length?e[0]:null;var i="<div class='jqx-clear jqx-border-reset jqx-overflow-hidden jqx-max-size jqx-position-relative'><div tabindex='1' class='jqx-clear jqx-max-size jqx-position-relative jqx-overflow-hidden jqx-background-reset' id='wrapper"+t.element.id+"'><div class='jqx-clear jqx-position-absolute' id='toolbar' style='visibility: hidden;'></div><div class='jqx-clear jqx-position-absolute' id='groupsheader' style='visibility: hidden;'></div><div class='jqx-clear jqx-position-absolute' id='filter' style='visibility: hidden;'></div><div class='jqx-clear jqx-overflow-hidden jqx-position-absolute jqx-border-reset jqx-background-reset' id='content"+t.element.id+"'></div><div class='jqx-clear jqx-position-absolute' id='verticalScrollBar"+t.element.id+"'></div><div class='jqx-clear jqx-position-absolute' id='horizontalScrollBar"+t.element.id+"'></div><div class='jqx-clear jqx-position-absolute jqx-border-reset' id='bottomRight'></div><div class='jqx-clear jqx-position-absolute' id='addrow'></div><div class='jqx-clear jqx-position-absolute' id='statusbar'></div><div class='jqx-clear jqx-position-absolute' id='pager' style='z-index: 20;'></div></div></div>";if(t.element.innerHTML="",t.source){if(!t.source.dataBind){if(!se.jqx.dataAdapter)throw new Error("jqxGrid: Missing reference to jqxdata.js");t.source=new se.jqx.dataAdapter(t.source)}(s=t.source._source.datafields)&&0<s.length&&(t.editmode=t.editmode.toLowerCase(),t.selectionmode=t.selectionmode.toLowerCase())}t.host.attr("role","grid"),t.host.attr("align","left"),t.element.innerHTML=i,t.host.addClass(t.toTP("jqx-grid")),t.host.addClass(t.toTP("jqx-reset")),t.host.addClass(t.toTP("jqx-rc-all")),t.host.addClass(t.toTP("jqx-widget")),t.host.addClass(t.toTP("jqx-widget-content")),t.wrapper=t.host.find("#wrapper"+t.element.id),t.content=t.host.find("#content"+t.element.id),t.content.addClass(t.toTP("jqx-reset")),this.filterbar=this.host.find("#filter"),this.filterbar[0].id="filter"+this.element.id,this.filterbar.addClass(this.toTP("jqx-widget-header")),this.filterbar.addClass(this.toTP("jqx-grid-toolbar"));var s,r=t.host.find("#verticalScrollBar"+t.element.id),e=t.host.find("#horizontalScrollBar"+t.element.id);if(t.bottomRight=t.host.find("#bottomRight").addClass(t.toTP("jqx-grid-bottomright jqx-scrollbar-state-normal")),!r.jqxScrollBar)throw new Error("jqxGrid: Missing reference to jqxscrollbar.js");if(t.editors=new Array,t.vScrollBar=r.jqxScrollBar({vertical:!0,rtl:t.rtl,touchMode:t.touchmode,step:t.verticalscrollbarstep,largestep:t.verticalscrollbarlargestep,theme:t.theme,_triggervaluechanged:!1}),t.hScrollBar=e.jqxScrollBar({vertical:!1,rtl:t.rtl,touchMode:t.touchmode,step:t.horizontalscrollbarstep,largestep:t.horizontalscrollbarlargestep,theme:t.theme,_triggervaluechanged:!1}),t.addnewrow=t.host.find("#addrow"),t.addnewrow[0].id="addrow"+t.element.id,t.addnewrow.addClass(t.toTP("jqx-widget-header")),t.pager=t.host.find("#pager"),t.pager[0].id="pager"+t.element.id,t.toolbar=t.host.find("#toolbar"),t.toolbar[0].id="toolbar"+t.element.id,t.toolbar.addClass(t.toTP("jqx-grid-toolbar")),t.toolbar.addClass(t.toTP("jqx-widget-header")),t.statusbar=t.host.find("#statusbar"),t.statusbar[0].id="statusbar"+t.element.id,t.statusbar.addClass(t.toTP("jqx-grid-statusbar")),t.statusbar.addClass(t.toTP("jqx-widget-header")),t.pager.addClass(t.toTP("jqx-grid-pager")),t.pager.addClass(t.toTP("jqx-widget-header")),t.groupsheader=t.host.find("#groupsheader"),t.groupsheader.addClass(t.toTP("jqx-grid-groups-header")),t.groupsheader.addClass(t.toTP("jqx-widget-header")),t.groupsheader[0].id="groupsheader"+t.element.id,t.vScrollBar.css("visibility","hidden"),t.hScrollBar.css("visibility","hidden"),t.vScrollInstance=se.data(t.vScrollBar[0],"jqxScrollBar").instance,t.hScrollInstance=se.data(t.hScrollBar[0],"jqxScrollBar").instance,t.gridtable=null,t.isNestedGrid=!!t.host.parent()&&299==t.host.parent().css("z-index"),t.touchdevice=t.isTouchDevice(),t.localizestrings&&(t.localizestrings(),null!=t.localization&&t.localizestrings(t.localization,!1)),t.rowdetailstemplate&&"function"!=typeof t.rowdetailstemplate&&(null==t.rowdetailstemplate.rowdetails&&(t.rowdetailstemplate.rowdetails="<div></div>"),null==t.rowdetailstemplate.rowdetailsheight&&(t.rowdetailstemplate.rowdetailsheight=200),null==t.rowdetailstemplate.rowdetailshidden&&(t.rowdetailstemplate.rowdetailshidden=!0)),t.showfilterrow&&!t.filterable)throw new Error('jqxGrid: "showfilterrow" requires setting the "filterable" property to true!');if(t.autorowheight&&!t.autoheight&&!t.pageable)throw new Error('jqxGrid: "autorowheight" requires setting the "autoheight" or "pageable" property to true!');if(t.virtualmode&&null==t.rendergridrows)throw new Error('jqxGrid: "virtualmode" requires setting the "rendergridrows"!');if(t.virtualmode&&!t.pageable&&t.groupable)throw new Error('jqxGrid: "grouping" in "virtualmode" without paging is not supported!');if(!t._testmodules()){if(t._builddataloadelement(),t._cachedcolumns=t.columns,t.columns&&t.columns.length>t.headerZIndex&&(t.headerZIndex=t.columns.length+100),t.theme&&0<=t.theme.indexOf("material")&&(i=se("<span>Test</span>"),l=se("<span>Test</span>"),i.addClass(t.toTP("jqx-grid-row-cell")),l.addClass(t.toTP("jqx-grid-column-header-cell")),t.host.append(i),t.host.append(l),r=i.outerHeight(),e=l.outerHeight(),r>this.rowsheight&&(t.rowsheight=r,this._cellheight=r),e>this.columnsheight&&(t.columnsheight=e,this._columnHeight=e),i.remove(),l.remove()),31!=t.rowsheight&&t._measureElement("cell"),32==t.columnsheight&&!t.columngroups||t._measureElement("column"),t.source)if(null==(s=t.source.datafields)&&t.source._source&&(s=t.source._source.datafields),s)for(var l,o=0;o<t.columns.length;o++)if((l=t.columns[o])&&l.cellsformat&&2<l.cellsformat.length)for(var a=0;a<s.length;a++)if(s[a].name==l.datafield&&!s[a].format){s[a].format=l.cellsformat;break}t.databind(t.source),t.showtoolbar&&t.toolbar.css("visibility","inherit"),t.showfilterbar&&t.filterbar.css("visibility","inherit"),t.showstatusbar&&t.statusbar.css("visibility","inherit"),t._arrange(),t.pageable&&t._initpager&&t._initpager(),t.tableheight=null;function n(){d.content&&(d.content[0].scrollTop=0,d.content[0].scrollLeft=0),d.gridcontent&&(d.gridcontent[0].scrollLeft=0,d.gridcontent[0].scrollTop=0)}var d=t.that;t.addHandler(t.content,"mousedown",function(){n()}),t.addHandler(t.content,"scroll",function(e){return n(),!1}),t.showfilterrow||(t.showstatusbar||t.showtoolbar||t.host.addClass("jqx-disableselect"),t.content.addClass("jqx-disableselect")),t.enablebrowserselection&&(t.content.removeClass("jqx-disableselect"),t.host.removeClass("jqx-disableselect")),t._resizeWindow(),t.disabled&&t.host.addClass(t.toThemeProperty("jqx-fill-state-disabled")),t.hasTransform=se.jqx.utilities.hasTransform(t.host),"logical"==t.scrollmode&&(t.vScrollInstance.thumbStep=t.rowsheight,t.vScrollInstance.step=t.rowsheight),se.jqx.isHidden(t.host)||(t.filterable||t.groupable||t.sortable)&&t._initmenu()}},_resizeWindow:function(){var e,t,o=this.that;(null!=this.width&&-1!=this.width.toString().indexOf("%")||null!=this.height&&-1!=this.height.toString().indexOf("%"))&&(this._updatesizeonwindowresize=!0,se.jqx.utilities.resize(this.host,function(e){var t,i=se(window).width(),s=se(window).height(),r=o.host.width(),l=o.host.height();if(o.pageable&&(t=o.host.find(".jqx-grid-pager-input"),i<350?t.hide():t.show()),o.autoheight&&(o._lastHostWidth=s),o._lastHostWidth!=r||o._lastHostHeight!=l){if(o.touchdevice&&o.editcell&&"orientationchange"!==e)return;o._updatesize(o._lastHostWidth!=r,o._lastHostHeight!=l)}o._lastWidth=i,o._lastHeight=s,o._lastHostWidth=r,o._lastHostHeight=l}),e=o.host.width(),t=o.host.height(),o._lastHostWidth=e,o._lastHostHeight=t)},_builddataloadelement:function(){var e;this.dataloadelement&&this.dataloadelement.remove(),this.dataloadelement=se('<div style="overflow: hidden; position: absolute;"></div>'),this.showdefaultloadelement?((e=se('<div style="z-index: 99; margin-left: -66px; left: 50%; top: 50%; margin-top: -24px; position: relative; width: 100px; height: 33px; padding: 5px; font-family: verdana; font-size: 12px; color: #767676; border-color: #898989; border-width: 1px; border-style: solid; background: #f6f6f6; border-collapse: collapse;"><div style="float: left;"><div style="float: left; overflow: hidden; width: 32px; height: 32px;" class="jqx-grid-load"/><span style="margin-top: 10px; float: left; display: block; margin-left: 5px;" >'+this.gridlocalization.loadtext+"</span></div></div>")).addClass(this.toTP("jqx-rc-all")),this.dataloadelement.addClass(this.toTP("jqx-rc-all")),e.addClass(this.toTP("jqx-fill-state-normal")),this.dataloadelement.append(e)):this.dataloadelement.addClass(this.toTP("jqx-grid-load")),this.dataloadelement.width(this.host.width()),this.dataloadelement.height(this.host.height()),this.wrapper.prepend(this.dataloadelement)},_measureElement:function(e){var t=se("<span style='visibility: hidden; white-space: nowrap;'>measure Text</span>");t.addClass(this.toTP("jqx-widget")),se(document.body).append(t),"cell"==e?this._cellheight=t.height():this._columnheight=t.height(),t.remove()},_measureMenuElement:function(){var e=se("<span style='visibility: hidden; white-space: nowrap;'>measure Text</span>");e.addClass(this.toTP("jqx-widget")),e.addClass(this.toTP("jqx-menu")),e.addClass(this.toTP("jqx-menu-item-top")),e.addClass(this.toTP("jqx-fill-state-normal")),this.isTouchDevice()&&e.addClass(this.toTP("jqx-grid-menu-item-touch")),se(document.body).append(e);var t=e.outerHeight();return"light"!==this.theme&&"dark"!==this.theme||this._isIE10()||36<(t+=10)&&(t=36),e.remove(),t},_measureElementWidth:function(e){var t=se("<span style='visibility: hidden; white-space: nowrap;'>"+e+"</span>");t.addClass(this.toTP("jqx-widget")),t.addClass(this.toTP("jqx-grid")),t.addClass(this.toTP("jqx-grid-column-header")),t.addClass(this.toTP("jqx-widget-header")),se(document.body).append(t);e=t.outerWidth()+20;return t.remove(),e},_getBodyOffset:function(){var e=0,t=0;return"0px"!=se("body").css("border-top-width")&&(e=parseInt(se("body").css("border-top-width")),isNaN(e)&&(e=0)),"0px"!=se("body").css("border-left-width")&&(t=parseInt(se("body").css("border-left-width")),isNaN(t)&&(t=0)),{left:t,top:e}},_testmodules:function(){function t(){""!=i.length&&(i+=",")}var i="",s=this.that;if(this.columnsmenu&&!this.host.jqxMenu&&(this.sortable||this.groupable||this.filterable)&&(t(),i+=" jqxmenu.js"),this.host.jqxScrollBar||(t(),i+=" jqxscrollbar.js"),this.host.jqxButton||(t(),i+=" jqxbuttons.js"),se.jqx.dataAdapter||(t(),i+=" jqxdata.js"),this.pageable&&!this.gotopage&&(t(),i+="jqxgrid.pager.js"),this.filterable&&!this.applyfilters&&(t(),i+=" jqxgrid.filter.js"),this.groupable&&!this._initgroupsheader&&(t(),i+=" jqxgrid.grouping.js"),this.columnsresize&&!this.autoresizecolumns&&(t(),i+=" jqxgrid.columnsresize.js"),this.columnsreorder&&!this.setcolumnindex&&(t(),i+=" jqxgrid.columnsreorder.js"),this.sortable&&!this.sortby&&(t(),i+=" jqxgrid.sort.js"),this.editable&&!this.begincelledit&&(t(),i+=" jqxgrid.edit.js"),this.showaggregates&&!this.getcolumnaggregateddata&&(t(),i+=" jqxgrid.aggregates.js"),this.keyboardnavigation&&!this.selectrow&&(t(),i+=" jqxgrid.selection.js"),""!=i||this.editable||this.filterable||this.pageable){function e(e){switch(e){case"checkbox":s.host.jqxCheckBox||r.checkbox||(r.checkbox=!0,t(),i+=" jqxcheckbox.js");break;case"numberinput":s.host.jqxNumberInput||r.numberinput||(r.numberinput=!0,t(),i+=" jqxnumberinput.js");break;case"datetimeinput":s.host.jqxDateTimeInput||r.datetimeinput?s.host.jqxCalendar||r.calendar||(t(),i+=" jqxcalendar.js"):(t(),r.datetimeinput=!0,i+=" jqxdatetimeinput.js(requires: jqxcalendar.js)");break;case"combobox":s.host.jqxComboBox||r.combobox?s.host.jqxListBox||r.listbox||(t(),r.listbox=!0,i+=" jqxlistbox.js"):(t(),r.combobox=!0,i+=" jqxcombobox.js(requires: jqxlistbox.js)");break;case"dropdownlist":s.host.jqxDropDownList||r.dropdownlist?s.host.jqxListBox||r.listbox||(t(),r.listbox=!0,i+=" jqxlistbox.js"):(t(),r.dropdownlist=!0,i+=" jqxdropdownlist.js(requires: jqxlistbox.js)")}}var r=[];(this.filterable||this.pageable)&&e("dropdownlist");for(var l,o=0;o<this.columns.length;o++)null!=this.columns[o]&&(e(l=this.columns[o].columntype),this.filterable&&this.showfilterrow&&("checkedlist"!=(l=this.columns[o].filtertype)&&"bool"!=l||e("checkbox"),"date"==l&&e("datetimeinput")));if(""!=i)throw new Error("jqxGrid: Missing references to the following module(s): "+i)}return!1},focus:function(){try{this.wrapper.focus();var e=this.that;setTimeout(function(){e.wrapper.focus()},25),this.focused=!0}catch(e){}},hiddenParent:function(){return se.jqx.isHidden(this.host)},resize:function(e,t){this.width=e,this.height=t,this._updatesize(!0,!0)},_updatesize:function(e,t){if(!this._loading){var i=this.that;i._newmax=null;var s=i.host.width(),r=i.host.height();i._oldWidth||(i._oldWidth=s),i._oldHeight||(i._oldHeight=r),i._resizeTimer&&clearTimeout(i._resizeTimer);var l,o;if(i.resizingGrid=!0,!se.jqx.isHidden(i.host)){if(i.editcell&&(i.endcelledit(i.editcell.row,i.editcell.column,!0,!0),i._oldselectedcell=null),r==i._oldHeight&&1!=t||(o=i.groupable&&0<i.groups.length,a=i.vScrollBar.css("visibility"),i.autoheight||(i.virtualmode&&(i._pageviews=new Array),o||i.rowdetails||i.pageable?(i._arrange(),i.prerenderrequired=!0,r=Math.round(i.host.height())+2*i.rowsheight,i._gettableheight(),l=Math.round(r/i.rowsheight),o=Math.max(i.dataview.totalrows,i.dataview.totalrecords),i.pageable&&(o=i.pagesize,i.pagesize>Math.max(i.dataview.totalrows,i.dataview.totalrecords)&&i.autoheight?o=Math.max(i.dataview.totalrows,i.dataview.totalrecords):i.autoheight||i.dataview.totalrows<i.pagesize&&(o=Math.max(i.dataview.totalrows,i.dataview.totalrecords))),i.rowsheight,i._getpagesize(),!i.pageable&&i.autoheight&&(l=o),i.virtualsizeinfo&&(i.virtualsizeinfo.visiblerecords=l),i.rendergridcontent(!0,!1),i._renderrows(i.virtualsizeinfo)):(i._arrange(),i.virtualsizeinfo=i._calculatevirtualheight(),r=Math.round(i.host.height())+2*i.rowsheight,parseInt(r)>=parseInt(i._oldHeight)&&(i.prerenderrequired=!0),i._renderrows(i.virtualsizeinfo),i.rtl&&(i._updatecolumnwidths(),i.table&&i.table.width(i.columnsheader.width()),i._updatecellwidths())),a!=i.vScrollBar.css("visibility")&&(i.vScrollInstance.setPosition(0),i._arrange(),i._updatecolumnwidths(),i.table&&i.table.width(i.columnsheader.width()),i._updatecellwidths()))),s!=i._oldWidth||1==e){var a=!1;if(i.editcell&&i.editcell.editor)switch(i.editcell.columntype){case"dropdownlist":if(a=i.editcell.editor.jqxDropDownList("isOpened")||i.editcell.editor.jqxDropDownList("isanimating")&&!i.editcell.editor.jqxDropDownList("ishiding"))return i.editcell.editor.jqxDropDownList({openDelay:0}),i.editcell.editor.jqxDropDownList("open"),void i.editcell.editor.jqxDropDownList({openDelay:250});break;case"combobox":if(a=i.editcell.editor.jqxComboBox("isOpened")||i.editcell.editor.jqxComboBox("isanimating")&&!i.editcell.editor.jqxComboBox("ishiding"))return i.editcell.editor.jqxComboBox({openDelay:0}),i.editcell.editor.jqxComboBox("open"),void i.editcell.editor.jqxComboBox({openDelay:250});break;case"datetimeinput":if(a)return a=i.editcell.editor.jqxDateTimeInput("isOpened")||i.editcell.editor.jqxDateTimeInput("isanimating")&&!i.editcell.editor.jqxDateTimeInput("ishiding"),i.editcell.editor.jqxDateTimeInput({openDelay:0}),i.editcell.editor.jqxDateTimeInput("open"),void i.editcell.editor.jqxDateTimeInput({openDelay:250})}a=i.hScrollBar.css("visibility");i._arrange(),i._updatecolumnwidths(),i.table&&i.table.width(i.columnsheader.width()),i._updatecellwidths(),0==e&&i._oldWidth>s||t&&0!=i.dataview.rows.length||i._renderrows(i.virtualsizeinfo),a!=i.hScrollBar.css("visibility")&&i.hScrollInstance.setPosition(0)}i._oldWidth=s,i._oldHeight=r,i.resizingGrid=!1}}},getTouches:function(e){return se.jqx.mobile.getTouches(e)},_updateTouchScrolling:function(){var e,t,i,s=this.that;s.isTouchDevice()&&(s.scrollmode="logical",s.vScrollInstance.thumbStep=s.rowsheight,e=se.jqx.mobile.getTouchEventName("touchstart"),t=se.jqx.mobile.getTouchEventName("touchend"),i=se.jqx.mobile.getTouchEventName("touchmove"),s.enablehover=!1,s.gridcontent&&(s.removeHandler(s.gridcontent,e+".touchScroll"),s.removeHandler(s.gridcontent,i+".touchScroll"),s.removeHandler(s.gridcontent,t+".touchScroll"),s.removeHandler(s.gridcontent,"touchcancel.touchScroll"),se.jqx.mobile.touchScroll(s.gridcontent[0],s.vScrollInstance.max,function(e,t){null!=t&&"visible"==s.vScrollBar.css("visibility")&&s.vScrollInstance.setPosition(t),null!=e&&"visible"==s.hScrollBar.css("visibility")&&s.hScrollInstance.setPosition(e),s.vScrollInstance.thumbCapture=!0,s._lastScroll=new Date},this.element.id,this.hScrollBar,this.vScrollBar),s._overlayElement&&(s.removeHandler(s._overlayElement,e+".touchScroll"),s.removeHandler(s._overlayElement,i+".touchScroll"),s.removeHandler(s._overlayElement,t+".touchScroll"),s.removeHandler(s._overlayElement,"touchcancel.touchScroll"),se.jqx.mobile.touchScroll(s._overlayElement[0],s.vScrollInstance.max,function(e,t){null!=t&&"visible"==s.vScrollBar.css("visibility")&&s.vScrollInstance.setPosition(t),null!=e&&"visible"==s.hScrollBar.css("visibility")&&s.hScrollInstance.setPosition(e),s.vScrollInstance.thumbCapture=!0,s._lastScroll=new Date},this.element.id,this.hScrollBar,this.vScrollBar),this.addHandler(this.host,e,function(){s.editcell?s._overlayElement.css("visibility","hidden"):s._overlayElement.css("visibility","visible")}),this.addHandler(this.host,t,function(){s.editcell?s._overlayElement.css("visibility","hidden"):s._overlayElement.css("visibility","visible")}))))},_rendercelltexts:function(){var e,t,i;"75CE8878-FCD1-4EC7-9249-BA0F153A5DE8"!==se.jqx.credits&&(e="www.jqwidgets.com",-1==location.hostname.indexOf(e.substring(4))&&(this._gridRenderElement&&se(this._gridRenderElement).remove(),i=String.fromCharCode(83,80,65,78),t=String.fromCharCode(72,84,84,80,58,47,47),(i=document.createElement(i)).id=se.jqx.utilities.createId(),i.innerHTML=e,i.style.position="absolute",i.style.right="5px",i.style.bottom="5px",i.style.color="#909090",i.style.cursor="pointer",i.style.zIndex="999999",i.style.display="none",i.style.fontSize="9px",i.onmousedown=function(){open(t+e)},this.content[0].appendChild(i),this._gridRenderElement=i))},isTouchDevice:function(){if(null!=this.touchDevice)return this.touchDevice;var e=se.jqx.mobile.isTouchDevice();if(this.touchDevice=e,1==this.touchmode){if(se.jqx.browser.msie&&se.jqx.browser.version<9)return this.enablehover=!1;e=!0,se.jqx.mobile.setMobileSimulator(this.element),this.touchDevice=e}else 0==this.touchmode&&(e=!1);return e&&0!=this.touchModeStyle&&(this.touchDevice=!0,this.host.addClass(this.toThemeProperty("jqx-touch")),this.host.find("jqx-widget-content").addClass(this.toThemeProperty("jqx-touch")),this.host.find("jqx-widget-header").addClass(this.toThemeProperty("jqx-touch")),this.scrollbarsize=this.touchscrollbarsize),e},toTP:function(e){return this.toThemeProperty(e)},localizestrings:function(e,t){if(this._cellscache=new Array,se.jqx.dataFormat&&se.jqx.dataFormat.cleardatescache(),this._loading)throw new Error("jqxGrid: "+this.loadingerrormessage);if(null!=e){for(var i in e)i.toLowerCase()!==i&&(e[i.toLowerCase()]=e[i]);if(e.okstring&&(this.gridlocalization.okstring=e.okstring),e.cancelstring&&(this.gridlocalization.cancelstring=e.cancelstring),e.pagergotopagestring&&(this.gridlocalization.pagergotopagestring=e.pagergotopagestring),e.pagershowrowsstring&&(this.gridlocalization.pagershowrowsstring=e.pagershowrowsstring),e.pagerrangestring&&(this.gridlocalization.pagerrangestring=e.pagerrangestring),e.pagernextbuttonstring&&(this.gridlocalization.pagernextbuttonstring=e.pagernextbuttonstring),e.pagerpreviousbuttonstring&&(this.gridlocalization.pagerpreviousbuttonstring=e.pagerpreviousbuttonstring),e.pagerfirstbuttonstring&&(this.gridlocalization.pagerfirstbuttonstring=e.pagerfirstbuttonstring),e.pagerlastbuttonstring&&(this.gridlocalization.pagerlastbuttonstring=e.pagerlastbuttonstring),e.groupsheaderstring&&(this.gridlocalization.groupsheaderstring=e.groupsheaderstring),e.sortascendingstring&&(this.gridlocalization.sortascendingstring=e.sortascendingstring),e.sortdescendingstring&&(this.gridlocalization.sortdescendingstring=e.sortdescendingstring),e.sortremovestring&&(this.gridlocalization.sortremovestring=e.sortremovestring),e.groupbystring&&(this.gridlocalization.groupbystring=e.groupbystring),e.groupremovestring&&(this.gridlocalization.groupremovestring=e.groupremovestring),e.firstDay&&(this.gridlocalization.firstDay=e.firstDay),e.days&&(this.gridlocalization.days=e.days),e.months&&(this.gridlocalization.months=e.months),e.AM&&(this.gridlocalization.AM=e.AM),e.PM&&(this.gridlocalization.PM=e.PM),e.patterns&&(this.gridlocalization.patterns=e.patterns),e.percentsymbol&&(this.gridlocalization.percentsymbol=e.percentsymbol),e.currencysymbol&&(this.gridlocalization.currencysymbol=e.currencysymbol),e.currencysymbolposition&&(this.gridlocalization.currencysymbolposition=e.currencysymbolposition),null!=e.decimalseparator&&(this.gridlocalization.decimalseparator=e.decimalseparator),null!=e.thousandsseparator&&(this.gridlocalization.thousandsseparator=e.thousandsseparator),e.filterclearstring&&(this.gridlocalization.filterclearstring=e.filterclearstring),e.filterstring&&(this.gridlocalization.filterstring=e.filterstring),e.filtershowrowstring&&(this.gridlocalization.filtershowrowstring=e.filtershowrowstring),e.filtershowrowdatestring&&(this.gridlocalization.filtershowrowdatestring=e.filtershowrowdatestring),e.filterselectallstring&&(this.gridlocalization.filterselectallstring=e.filterselectallstring),e.filterchoosestring&&(this.gridlocalization.filterchoosestring=e.filterchoosestring),e.filterorconditionstring&&(this.gridlocalization.filterorconditionstring=e.filterorconditionstring),e.filterandconditionstring&&(this.gridlocalization.filterandconditionstring=e.filterandconditionstring),e.filterstringcomparisonoperators&&(this.gridlocalization.filterstringcomparisonoperators=e.filterstringcomparisonoperators),e.filternumericcomparisonoperators&&(this.gridlocalization.filternumericcomparisonoperators=e.filternumericcomparisonoperators),e.filterdatecomparisonoperators&&(this.gridlocalization.filterdatecomparisonoperators=e.filterdatecomparisonoperators),e.filterbooleancomparisonoperators&&(this.gridlocalization.filterbooleancomparisonoperators=e.filterbooleancomparisonoperators),e.emptydatastring&&(this.gridlocalization.emptydatastring=e.emptydatastring),e.filterselectstring&&(this.gridlocalization.filterselectstring=e.filterselectstring),e.todaystring&&(this.gridlocalization.todaystring=e.todaystring),e.clearstring&&(this.gridlocalization.clearstring=e.clearstring),e.validationstring&&(this.gridlocalization.validationstring=e.validationstring),e.loadtext&&(this.gridlocalization.loadtext=e.loadtext),e.addrowstring&&(this.gridlocalization.addrowstring=e.addrowstring),e.udpaterowstring&&(this.gridlocalization.udpaterowstring=e.udpaterowstring),e.deleterowstring&&(this.gridlocalization.deleterowstring=e.deleterowstring),e.resetrowstring&&(this.gridlocalization.resetrowstring=e.resetrowstring),e.everpresentrowplaceholder&&(this.gridlocalization.everpresentrowplaceholder=e.everpresentrowplaceholder),!1!==t){if(this._initpager&&this._initpager(),this._initgroupsheader&&this._initgroupsheader(),this._initmenu&&this._initmenu(),this._builddataloadelement(),se(this.dataloadelement).css("visibility","hidden"),se(this.dataloadelement).css("display","none"),this.filterable&&this.showfilterrow&&this._updatefilterrow){for(var i in this._filterrowcache)se(this._filterrowcache[i]).remove();this._filterrowcache=[],this._updatefilterrow()}this.showaggregates&&this.refresheaggregates&&this.refresheaggregates(),this._renderrows(this.virtualsizeinfo)}}else this.gridlocalization={"/":"/",":":":",firstDay:0,days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",ISO:"yyyy-MM-dd hh:mm:ss",ISO2:"yyyy-MM-dd HH:mm:ss",d1:"dd.MM.yyyy",d2:"dd-MM-yyyy",d3:"dd-MMMM-yyyy",d4:"dd-MM-yy",d5:"H:mm",d6:"HH:mm",d7:"HH:mm tt",d8:"dd/MMMM/yyyy",d9:"MMMM-dd",d10:"MM-dd",d11:"MM-dd-yyyy"},percentsymbol:"%",currencysymbol:"$",currencysymbolposition:"before",decimalseparator:".",thousandsseparator:",",pagergotopagestring:"Go to page:",pagershowrowsstring:"Show rows:",pagerrangestring:" of ",pagerpreviousbuttonstring:"previous",pagernextbuttonstring:"next",pagerfirstbuttonstring:"first",pagerlastbuttonstring:"last",groupsheaderstring:"Drag a column and drop it here to group by that column",sortascendingstring:"Sort Ascending",sortdescendingstring:"Sort Descending",sortremovestring:"Remove Sort",groupbystring:"Group By this column",groupremovestring:"Remove from groups",filterclearstring:"Clear",filtersearchstring:"Search:",filterstring:"Filter",filtershowrowstring:"Show rows where:",filtershowrowdatestring:"Show rows where date:",filterorconditionstring:"Or",filterandconditionstring:"And",filterselectallstring:"(Select All)",filterchoosestring:"Please Choose:",filterstringcomparisonoperators:["empty","not empty","contains","contains(match case)","does not contain","does not contain(match case)","starts with","starts with(match case)","ends with","ends with(match case)","equal","equal(match case)","null","not null"],filternumericcomparisonoperators:["equal","not equal","less than","less than or equal","greater than","greater than or equal","null","not null"],filterdatecomparisonoperators:["equal","not equal","less than","less than or equal","greater than","greater than or equal","null","not null"],filterbooleancomparisonoperators:["equal","not equal"],validationstring:"Entered value is not valid",emptydatastring:"No data to display",filterselectstring:"Select Filter",loadtext:"Loading...",clearstring:"Clear",todaystring:"Today",addrowstring:"Add",udpaterowstring:"Update",deleterowstring:"Delete",resetrowstring:"Reset",everpresentrowplaceholder:"Enter ",okstring:"Ok",cancelstring:"Cancel"}},_getmenudefaultheight:function(){var e=0;this.sortable&&this._togglesort&&this.showsortmenuitems&&(e=3),this.groupable&&this._initgroupsheader&&this.showgroupmenuitems&&(e+=2);e=e*this._measureMenuElement()+9;return this.filterable&&!this.showfilterrow&&this.showfiltermenuitems&&(e+=224,se.jqx.browser.msie&&se.jqx.browser.version<8&&(e+=20)),e},_initmenu:function(){var c=this.that;if(this.host.jqxMenu){if(this.gridmenu){if(this._hasOpenedMenu)return;this.filterable&&this._destroyfilterpanel&&this._destroyfilterpanel(),this.removeHandler(this.gridmenu,"keydown"),this.removeHandler(this.gridmenu,"closed"),this.removeHandler(this.gridmenu,"itemclick"),this.gridmenu.jqxMenu("destroy"),this.gridmenu.removeData(),this.gridmenu.remove()}this.menuitemsarray=new Array;var e="";this.isTouchDevice()&&(e="jqx-grid-menu-item-touch"),this.gridmenu=se('<div tabindex=0 id="gridmenu'+this.element.id+'" style="z-index: 99;"></div>'),this.host.append(this.gridmenu);var t=se("<ul></ul>"),i=se('<li class="'+e+'"><div class="jqx-grid-sortasc-icon"></div>'+this.gridlocalization.sortascendingstring+"</li>"),s=se('<li class="'+e+'"><div class="jqx-grid-sortdesc-icon"></div>'+this.gridlocalization.sortdescendingstring+"</li>"),r=se('<li class="'+e+'"><div class="jqx-grid-sortremove-icon"></div>'+this.gridlocalization.sortremovestring+"</li>"),l='<div class="jqx-grid-groupby-icon"></div>',o=se('<li class="'+e+'">'+l+this.gridlocalization.groupbystring+"</li>"),a=se('<li class="'+e+'">'+l+this.gridlocalization.groupremovestring+"</li>"),n=se('<li type="separator"></li>'),u=se('<li class="filter '+e+'" style="height: 224px;" ignoretheme="true"><div class="filter"></div></li>');this.gridmenu.addClass("jqx-grid-menu");var d=this.gridlocalization.sortascendingstring.length,l=this.gridlocalization.sortascendingstring;this.gridlocalization.sortdescendingstring.length>d&&(d=this.gridlocalization.sortdescendingstring.length,l=this.gridlocalization.sortdescendingstring),this.gridlocalization.sortremovestring.length>d&&(d=this.gridlocalization.sortremovestring.length,l=this.gridlocalization.sortremovestring),this.groupable&&this._initgroupsheader&&this.showgroupmenuitems&&(this.gridlocalization.groupbystring.length>d&&(d=this.gridlocalization.groupbystring.length,l=this.gridlocalization.groupbystring),this.gridlocalization.groupremovestring.length>d&&(d=this.gridlocalization.groupremovestring.length,l=this.gridlocalization.groupremovestring));e=200,l=se.trim(l).replace(/\&nbsp\;/gi,"").replace(/\&#160\;/gi,""),d=se("<span>"+l+"</span>");d.addClass(this.toThemeProperty("jqx-menu-item")),this.host.append(d),e=d.outerWidth()+60,d.remove();l=0;this.sortable&&this._togglesort&&this.showsortmenuitems&&(t.append(i),this.menuitemsarray[0]=i[0],t.append(s),this.menuitemsarray[1]=s[0],t.append(r),this.menuitemsarray[2]=r[0],l=3),this.groupable&&this._initgroupsheader&&this.showgroupmenuitems&&(t.append(o),this.menuitemsarray[3]=o[0],t.append(a),this.menuitemsarray[4]=a[0],l+=2);d=l*this._measureMenuElement()+9,l=!0;if(this.filterable&&!this.showfilterrow&&this.showfiltermenuitems){if(!this._initfilterpanel)throw new Error("jqxGrid: Missing reference to jqxgrid.filter.js.");this.menuitemsarray[5]=u[0],this.menuitemsarray[6]=u[0],t.append(n),t.append(u),d+=220,se.jqx.browser.msie&&se.jqx.browser.version<8&&(d+=20),this.isTouchDevice()&&(d+=30);n=se(u).find("div:first");this.excelfilterpanel=se("<div></div>"),this.filterpanel=n,this.filtermenu=se(u),e+=20,this.adaptive&&this.element.offsetWidth<this.adaptivewidth&&(e=this.element.offsetWidth-50),this._initfilterpanel(this,n,"",e),this._initfilterpanel(this,this.excelfilterpanel,"",e,!0),l=!1,this.removeHandler(se(document),"click.menu"+c.element.id,c._closemenuafterclick,c),this.addHandler(se(document),"click.menu"+c.element.id,c._closemenuafterclick,c)}this.gridmenu.append(t),se.jqx.browser.msie&&se.jqx.browser.version<8&&this.filterable&&(se("#listBoxfilter1"+this.element.id).css("z-index",49),se("#listBoxfilter2"+this.element.id).css("z-index",49),se("#listBoxfilter3"+this.element.id).css("z-index",49),se("#gridmenu"+this.element.id).css("z-index",50),this.addHandler(se("#gridmenu"+this.element.id),"initialized",function(){se("#menuWrappergridmenu"+c.element.id).css("z-index",49)})),null==this.menuitemsarray[0]&&"light"!==this.theme&&"dark"!==this.theme&&(d=65),this.removeHandler(se(window),"orientationchange.jqxgrid"+this.element.id),this.removeHandler(se(window),"orientationchanged.jqxgrid"+this.element.id),this.addHandler(se(window),"orientationchange.jqxgrid"+this.element.id,function(){c.gridmenu.jqxMenu("close")}),this.addHandler(se(window),"orientationchanged.jqxgrid"+this.element.id,function(){c.gridmenu.jqxMenu("close")}),this.removeHandler(this.gridmenu,"keydown"),this.addHandler(this.gridmenu,"keydown",function(e){function t(e){for(var t=n.indexOf(e)-1;0<=t;t--)if(!(0<=n[t].className.indexOf("disabled")))return n[t];return e}function i(e){for(var t=n.indexOf(e)+1;t<n.length;t++)if(!(0<=n[t].className.indexOf("disabled")))return n[t];return e}function s(){var e=n[n.length-1];return 0<=e.className.indexOf("disabled")?t(e):e}var r,l,o,a,n=se(c.gridmenu.find(".jqx-item")).toArray(),d=function(){for(var e=0;e<n.length;e++)if(n[e].active)return n[e];return null},h=function(e){se(n).removeClass("jqx-fill-state-focus");for(var t=0;t<n.length;t++)n[t].active=!1;e&&(se(e).addClass("jqx-fill-state-focus"),e.active=!0)};if((d()||c.filterable||(n[0].active=!0),c.keyboardmenunavigation&&c.keyboardnavigation)&&(40===e.keyCode?(d=d(),h(i(d))):38===e.keyCode&&(d=d(),h(t(d))),9===e.keyCode)){if(!d())return e.shiftKey&&(document.activeElement===se.find("#filter1"+c.element.id)[0]?(h(s()),se(se.find("#filter1"+c.element.id)).removeClass("jqx-fill-state-focus"),c.gridmenu.focus(),e.stopPropagation(),e.preventDefault()):document.activeElement===se.find("#filter1"+c.element.id+"ex")[0]&&(h(s()),se(se.find("#filter1"+c.element.id)+"ex").removeClass("jqx-fill-state-focus"),c.gridmenu.focus(),e.stopPropagation(),e.preventDefault())),!0;e.shiftKey?(d=d(),h(t(d))):(d=d())===s()&&c.filterable&&!c.showfilterrow?(h(null),0<se(se.find("#filter1"+c.element.id)).length?se(se.find("#filter1"+c.element.id)).jqxDropDownList("focus"):0<se(se.find("#filter1"+c.element.id+"ex")).length&&se(se.find("#filter1"+c.element.id+"ex")).jqxListBox("focus")):h(i(d)),e.stopPropagation(),e.preventDefault()}27==e.keyCode?c.gridmenu.jqxMenu("close"):13==e.keyCode&&(n=c.gridmenu.find(".jqx-item"),(d=d())?(se(d).trigger("click"),h(null)):c._buildfilter&&c.filterable&&!c.showfilterrow&&(0<se.find("#filter1"+c.element.id).length&&(r="block"==se(se.find("#filter1"+c.element.id)).jqxDropDownList("container").css("display"),l="block"==se(se.find("#filter2"+c.element.id)).jqxDropDownList("container").css("display"),o="block"==se(se.find("#filter3"+c.element.id)).jqxDropDownList("container").css("display")),d=se(se.find("#filterclearbutton"+c.element.id)).hasClass("jqx-fill-state-focus"),h=se(se.find("#filterbutton"+c.element.id)).hasClass("jqx-fill-state-focus"),d?(a=se.data(document.body,"contextmenu"+c.element.id).column,c._clearfilter(c,c.element,a),c.gridmenu.jqxMenu("close")):h&&(r||l||o||(a=se.data(document.body,"contextmenu"+c.element.id).column,c.gridmenu.jqxMenu("close"),c._buildfilter(c,u,a)))),o=0<c.selectedcells.length||0<c.selectedrowindexes.length,c.clearselection(),(a=c.getdisplayrows()[0])&&(a=c.getboundindex(a),0<=c.selectionmode.indexOf("cell")?o&&c.selectcell(a,c.columns.records[0].displayfield):o&&c.selectrow(a)))}),"auto"!=this.popupwidth&&(e=this.popupwidth),this.gridmenu.jqxMenu({popupZIndex:3e3,width:e,height:d,autoCloseOnClick:l,autoOpenPopup:!1,mode:"popup",theme:this.theme,animationShowDuration:0,animationHideDuration:0,animationShowDelay:0});var h,l=document.querySelectorAll(".jqx-menu-wrapper");this.gridmenu.parent().attr("tabindex",l.length-1),this.filterable&&this.gridmenu.jqxMenu("_setItemProperty",u[0].id,"closeOnClick",!1),this.rtl&&(h=this.that,se.each(t.find("li"),function(){se(this).addClass(h.toTP("jqx-rtl"))}),(t=function(e){e=e.find("div");e.css("float","right"),e.css("margin-left","4px"),e.css("margin-right","-4px")})(r),t(s),t(i),t(o),t(a)),this._handlemenueevents()}else this.columnsmenu=!1},_arrangemenu:function(){this.gridmenu||this._initmenu();var e=this.gridlocalization.sortascendingstring.length,t=this.gridlocalization.sortascendingstring;this.gridlocalization.sortdescendingstring.length>e&&(e=this.gridlocalization.sortdescendingstring.length,t=this.gridlocalization.sortdescendingstring),this.gridlocalization.sortremovestring.length>e&&(e=this.gridlocalization.sortremovestring.length,t=this.gridlocalization.sortremovestring),this.groupable&&this._initgroupsheader&&(this.gridlocalization.groupbystring.length>e&&(e=this.gridlocalization.groupbystring.length,t=this.gridlocalization.groupbystring),this.gridlocalization.groupremovestring.length>e&&(e=this.gridlocalization.groupremovestring.length,t=this.gridlocalization.groupremovestring));e=200,t=se.trim(t).replace(/\&nbsp\;/gi,"").replace(/\&#160\;/gi,""),t=se("<span>"+t+"</span>");t.addClass(this.toThemeProperty("jqx-menu-item")),this.host.append(t),e=t.outerWidth()+60,t.remove();t=0;this.sortable&&this._togglesort&&this.showsortmenuitems&&(t=3),this.groupable&&this._initgroupsheader&&this.showgroupmenuitems&&(t+=2);t=t*this._measureMenuElement()+9;this.filterable&&this.showfiltermenuitems&&this._initfilterpanel&&(t+=224,e+=20,se.jqx.browser.msie&&se.jqx.browser.version<8&&(t+=20),this.isTouchDevice()&&(t+=30)),null==this.menuitemsarray[0]&&"light"!==this.theme&&"dark"!==this.theme&&(t=65),"auto"!=this.popupwidth&&(e=this.popupwidth),"auto"!=this.popupheight&&(t=this.popupheight),this.gridmenu.jqxMenu({width:e,height:t})},_closemenuafterclick:function(e){var t=null!=e?e.data:this,i=!1;if(null==e.target||null!=e.target&&null==e.target.className.indexOf)t.gridmenu.jqxMenu("close");else if(-1==e.target.className.indexOf("filter")||-1!=e.target.className.indexOf("jqx-grid-cell-filter"))if(-1==e.target.className.indexOf("jqx-grid-cell")){if(!t._hasOpenedMenu||!se(e.target).ischildof(t.gridmenu)){t.host.coord();var s=t.gridmenu.coord(),r=e.pageX,l=e.pageY;if(se.each(se(e.target).parents(),function(){return null!=this.id&&this.id.indexOf&&-1!=this.id.indexOf("filter")||this.className.indexOf&&-1!=this.className.indexOf("filter")&&-1==this.className.indexOf("jqx-grid-cell-filter")?!(i=!0):this.className.indexOf&&-1!=this.className.indexOf("jqx-grid-cell")||this.className.indexOf&&-1!=this.className.indexOf("jqx-grid-column")?(t.gridmenu.jqxMenu("close"),!1):void 0}),!i){try{if("default"===t.filtermode){var o=se(se.find("#filter1"+t.element.id)).jqxDropDownList("listBox").vScrollInstance._mouseup;if((a=new Date)-o<100)return;if(a-se(se.find("#filter3"+t.element.id)).jqxDropDownList("listBox").vScrollInstance._mouseup<100)return;if("block"==se(se.find("#filter3"+t.element.id)).jqxDropDownList("container").css("display"))return;if("block"==se(se.find("#filter1"+t.element.id)).jqxDropDownList("container").css("display"))return;if("block"==se(se.find("#filter2"+t.element.id)).jqxDropDownList("container").css("display"))return;if(t._hasdatefilter&&"div"==se(".filtertext1"+t.element.id)[0].nodeName.toLowerCase()){if("block"==se(".filtertext1"+t.element.id).jqxDateTimeInput("container").css("display"))return;if("block"==se(".filtertext2"+t.element.id).jqxDateTimeInput("container").css("display"))return}}else{var a,o=se(se.find("#filter1"+t.element.id)).data().jqxListBox.instance.vScrollInstance._mouseup;if((a=new Date)-o<100)return;if(a-se(se.find("#filter1"+t.element.id)).data().jqxListBox.instance.hScrollInstance._mouseup<100)return}}catch(e){}if(!(r>=s.left&&r<=s.left+t.gridmenu.width()&&l>=s.top&&l<=s.top+t.gridmenu.height())){if(t.columnmenuclosing){s=(s=se.data(document.body,"contextmenu"+t.element.id))||{column:{displayfield:null}};if(!1===t.columnmenuclosing(t.gridmenu,s.column.displayfield,se(t.gridmenu).height()))return}t.gridmenu.jqxMenu("close")}}}}else t.gridmenu.jqxMenu("close")},openColumnChooser:function(e,t){var s=this;t=t||"Columns",e&&!se.isEmptyObject(e)||(e=s.columns.records);for(var i=[],r=0;r<e.length;r++)null!==e[r].text&&i.push({label:e[r].text,value:e[r].datafield,checked:!e[r].hidden});var l=document.createElement("div");l.innerHTML="<div>"+t+'</div><div style="overflow:hidden;"></div>';var o=document.createElement("div");o.style.width="100%",o.style.height="calc(100% - 30px)";var a=new jqxListBox(o,{width:"100%",height:"calc(100% - 30px)",checkboxes:!0,source:i}),n=new jqxWindow(l,{width:400,height:400,position:"center",isModal:!0}),d=document.createElement("button");d.innerHTML=this.gridlocalization.okstring;var h=document.createElement("button");h.innerHTML=this.gridlocalization.cancelstring,d.style.width="50%",d.style.height="100%",h.style.width="50%",h.style.height="100%";var c=document.createElement("div");c.style.height="30px",n.open(),setTimeout(function(){l.querySelector(".jqx-widget-content").appendChild(o),l.querySelector(".jqx-widget-content").appendChild(c),c.appendChild(d),c.appendChild(h),d=new jqxButton(d,{theme:s.theme}),h=new jqxButton(h,{theme:s.theme}),d.element.style.borderTopRightRadius="0px",d.element.style.borderBottomRightRadius="0px",d.element.style.borderTopLeftRadius="0px",d.element.style.borderBottomLeftRadius="0px",h.element.style.borderTopLeftRadius="0px",h.element.style.borderBottomLeftRadius="0px",h.element.style.borderTopRightRadius="0px",h.element.style.borderBottomRightRadius="0px",h.element.style.marginLeft="-2px",a.on("checkChange",function(){var e=a.getCheckedItems();d.disabled=0===e.length}),d.on("click",function(){n.destroy(),s.beginupdate();for(var e=a.getItems(),t=0;t<e.length;t++){var i=e[t];!1===i.checked?s.hidecolumn(i.value):s.showcolumn(i.value)}s.endupdate()}),h.on("click",function(){n.destroy()})},100),n.on("close",function(){n.destroy()})},_handlemenueevents:function(){var o=this.that;this.removeHandler(this.gridmenu,"closed"),this.addHandler(this.gridmenu,"closed",function(e){o._closemenu()}),this.removeHandler(this.gridmenu,"itemclick"),this.addHandler(this.gridmenu,"itemclick",function(e){for(var t=e.args,i=0;i<o.menuitemsarray.length;i++)if(t==o.menuitemsarray[i]){if(null!=se(t).attr("ignoretheme"))return;var s=se.data(document.body,"contextmenu"+o.element.id),r=s.column;o.filterable&&o.gridmenu.jqxMenu("close");var l=r.displayfield;if(null==l&&(l=r.datafield),null!=s)switch(i){case 0:o.sortby(l,"ascending",null);break;case 1:o.sortby(l,"descending",null);break;case 2:o.sortby(l,null,null);break;case 3:o.addgroup(l);break;case 4:o.removegroup(l);break;case 5:l=se(o.menuitemsarray[6]);se(l).css("display","block")}break}})},getdatainformation:function(){var e=this.dataview.totalrecords;return this.summaryrows&&(e+=this.summaryrows.length),{rowscount:e,sortinformation:this.getsortinformation(),paginginformation:this.getpaginginformation()}},getsortinformation:function(){return{sortcolumns:this.getsortcolumns?this.getsortcolumns():[],sortcolumn:this.sortcolumn,sortdirection:this.sortdirection}},getpaginginformation:function(){return{pagenum:this.dataview.pagenum,pagesize:this.pagesize,pagescount:Math.ceil(this.dataview.totalrecords/this.pagesize)}},_updaterowsproperties:function(){this._updatehiddenrows(),this._updaterowheights(),this._updaterowdetails()},_updatehiddenrows:function(){var t=this.that;this.hiddens=new Array;var e=this.hiddenboundrows;se.each(e,function(e){null!=this.index&&(this.index,e=t.getrowvisibleindex(e),t.hiddens[e]=this.hidden)})},_updaterowheights:function(){var t=this.that;this.heights=new Array;var e=this.heightboundrows;se.each(e,function(e){null!=this.index&&(this.index,e=t.getrowvisibleindex(e),t.heights[e]=this.height)})},_updaterowdetails:function(){var t=this.that;this.details=new Array;var e=this.detailboundrows;se.each(e,function(e){null!=this.index&&(this.index,e=t.getrowvisibleindex(e),t.details[e]=this.details)})},_getmenuitembyindex:function(e){return null==e?null:this.menuitemsarray[e]},openmenu:function(e){if(!this._openingmenu){this._openingmenu=!0,this.closemenu();var t=this.getcolumn(e);if(!t.menu)return!1;this.gridmenu||this._initmenu();var i=t.columnsmenu;se(t.element).trigger("mouseenter"),this.menuOwner=t;for(var s=this,r=0;r<s.columns.records.length;r++)s.columns.records[r].datafield!=e&&se(s.columns.records[r].element).trigger("mouseleave");setTimeout(function(){"block"==se(i)[0].style.display&&se(i).trigger("click"),s._openingmenu=!1},200)}},closemenu:function(){this._closemenu()},_closemenu:function(){if(this._hasOpenedMenu){if(this.columnmenuclosing)if(e=(e=se.data(document.body,"contextmenu"+this.element.id))||{column:{displayfield:null}},!1===this.columnmenuclosing(this.gridmenu,e.column.displayfield,se(this.gridmenu).height()))return;null!=this.gridmenu&&this.gridmenu.jqxMenu("close");var e;null!=(e=se.data(document.body,"contextmenu"+this.element.id))&&this.autoshowcolumnsmenubutton&&(this.enableanimations?(se(e.columnsmenu).animate({"margin-left":0},"fast",function(){se(e.columnsmenu).css("display","none")}),i=this.rtl?0:-32,e.column.iconscontainer.animate({"margin-left":i},"fast")):(se(e.columnsmenu).css("display","none"),i=this.rtl?0:-32,e.column.iconscontainer.css("margin-left",i)),se.data(document.body,"contextmenu"+this.element.id,null)),this._hasOpenedMenu=!1,this.menuOwner=null;var t,i,s=this._getmenuitembyindex(5);s&&(t=se(s).find("#filter1"+this.element.id),i=se(s).find("#filter2"+this.element.id),s=se(s).find("#filter3"+this.element.id),0<t.length&&"default"===this.filtermode&&(t.jqxDropDownList("hideListBox"),0<i.length&&i.jqxDropDownList("hideListBox"),0<s.length&&s.jqxDropDownList("hideListBox"))),this.focus()}},scrolloffset:function(e,t){null!=e&&null!=t&&null!=e&&null!=t&&(this.vScrollBar.jqxScrollBar("setPosition",e),this.hScrollBar.jqxScrollBar("setPosition",t))},scrollleft:function(e){null!=e&&null!=e&&"hidden"!=this.hScrollBar.css("visibility")&&this.hScrollBar.jqxScrollBar("setPosition",e)},scrolltop:function(e){null!=e&&null!=e&&"hidden"!=this.vScrollBar.css("visibility")&&this.vScrollBar.jqxScrollBar("setPosition",e)},beginupdate:function(e,t){this._updating=!0,!(this._datachanged=!1)===e&&(this._batchupdate=!0),!0===t&&(this._stopbindings=!0)},endupdate:function(){this.resumeupdate()},resumeupdate:function(){if(this._updating=!1,this._batchupdate)return this._batchupdate=!1,this._datachanged=!1,void(this._stopbindings?this.updatebounddata():this.render());var e;this._stopbindings?this.updatebounddata("data"):(1==this._datachanged?(e=this.vScrollInstance.value,this.render(!0,!0,!1),this._datachanged=!1,0!=e&&e<this.vScrollInstance.max&&this.scrolltop(e)):(this.rendergridcontent(!0),this._renderrows(this.virtualsizeinfo)),this.showaggregates&&this.renderaggregates&&this.renderaggregates(),this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo))},updating:function(){return this._updating},showloadelement:function(){this.renderloadelement&&this.dataloadelement.html(this.renderloadelement()),this.dataloadelement.width(this.host.width()),this.dataloadelement.height(this.host.height()),se(this.dataloadelement).css("visibility","visible"),se(this.dataloadelement).css("display","block")},hideloadelement:function(){se(this.dataloadelement).css("visibility","hidden"),se(this.dataloadelement).css("display","none")},_updatefocusedfilter:function(){var i=this.that;i.focusedfilter&&(i.focusedfilter.focus(),setTimeout(function(){if(i.focusedfilter.focus(),"input"==i.focusedfilter[0].nodeName.toLowerCase()){var e,t=i.focusedfilter.val().length;try{"selectionStart"in i.focusedfilter[0]?i.focusedfilter[0].setSelectionRange(t,t):((e=i.focusedfilter[0].createTextRange()).collapse(!0),e.moveEnd("character",t),e.moveStart("character",t),e.select())}catch(e){}}},50))},databind:function(e,a){var n,d,t,i,s;!0!==this.loadingstate&&!0!==this._stopbindings&&(n=window,"block"==this.host.css("display")&&(this.autoshowloadelement?(se(this.dataloadelement).css("visibility","visible"),se(this.dataloadelement).css("display","block"),this.dataloadelement.width(this.host.width()),this.dataloadelement.height(this.host.height()),this._hideemptyrow()):(se(this.dataloadelement).css("visibility","hidden"),se(this.dataloadelement).css("display","none"))),!this._initgroupsheader&&0<this.groups.length&&(this.groups=new Array),d=this.that,null==e&&(e={}),e.recordstartindex||(e.recordstartindex=0),e.recordendindex||(e.recordendindex=0),null!=e.loadallrecords&&null!=e.loadallrecords||(e.loadallrecords=!0),null!=e.sortcomparer&&null!=e.sortcomparer||(e.sortcomparer=null),null!=e.filter&&null!=e.filter||(e.filter=null),null!=e.sort&&null!=e.sort||(e.sort=null),null!=e.data&&null!=e.data||(e.data=null),(t=null)!=e&&(t=(null!=e._source?e._source:e).url),this.dataview=this.dataview||new se.jqx.dataview,se.jqx.dataview.sort&&se.extend(this.dataview,new se.jqx.dataview.sort),se.jqx.dataview.grouping&&se.extend(this.dataview,new se.jqx.dataview.grouping),this.dataview.suspendupdate(),this.dataview.pageable=this.pageable,this.dataview.groupable=this.groupable,this.dataview.groups=this.groups,this.dataview.virtualmode=this.virtualmode,(this.dataview.grid=this).dataview._clearcaches(),this._columnClassNameCache=new Array,!this.pageable&&this.virtualmode&&(this.loadondemand=!0),d.initializedcall||(e._source&&this.sortable&&(null!=e._source.sortcolumn&&(this.sortcolumn=e._source.sortcolumn,this.source.sortcolumn=this.sortcolumn,this.dataview.sortfield=e._source.sortcolumn,e._source.sortcolumn=null),null!=e._source.sortdirection&&(this.dataview.sortfielddirection=e._source.sortdirection,s="a"==(i=e._source.sortdirection)||"asc"==i||"ascending"==i||1==i,this.sortdirection=null!=i?{ascending:s,descending:!s}:{ascending:!1,descending:!1})),this.pageable&&e._source&&(null!=e._source.pagenum&&(this.dataview.pagenum=e._source.pagenum),null!=e._source.pagesize?(this.pagesize=e._source.pagesize,this.dataview.pagesize=e._source.pagesize):(this.dataview.pagesize=e._source.pagesize,null==this.dataview.pagesize&&(this.dataview.pagesize=this.pagesize))),this.sortable&&(e.sortcolumn&&(this.dataview.sortfield=e.sortcolumn),e.sortdirection&&(this.dataview.sortfielddirection=e.sortdirection)),this.filterable&&this.columns&&se.each(this.columns,function(){this.filter&&d.dataview.addfilter(this.datafield,this.filter)})),this._loading=!0,this.dataview.update=function(e){if(!d.pageable&&d.virtualmode&&(d.loadondemand=!0),d._loading=!1,d.dataview.isupdating()&&d.dataview.resumeupdate(!1),d.pageable&&d.pagerrenderer){if(!d._initpager)throw new Error("jqxGrid: Missing reference to jqxgrid.pager.js.");d._initpager()}if(d.source&&d.source.sortcolumn&&d.sortby&&!d.virtualmode)d.render(),d.source._source.sort||d.sortby(d.source.sortcolumn,d.source.sortdirection,d.source.sortcomparer),d.source.sortcolumn=null,d._postrender("data");else{var t=d.vScrollInstance.value,i=d.hScrollInstance.value,s=d.source?d.source.datatype:"array";if("local"!=s||"array"!=s){var r=null==d.virtualsizeinfo||null!=d.virtualsizeinfo&&0==d.virtualsizeinfo.virtualheight;if("cells"==a){s=!1;if(d.filterable&&d._initfilterpanel&&d.dataview.filters.length&&(s=!0),0==e)return d.vScrollInstance.isScrolling()||d.hScrollInstance.isScrolling()||(d._cellscache=new Array,d._pagescache=new Array,d._renderrows(d.virtualsizeinfo),d.showfilterrow&&d.filterable&&d.filterrow&&d._updatelistfilters(!0),d.showaggregates&&d._updateaggregates&&d._updateaggregates()),d.sortcolumn&&d.sortby(d.sortcolumn,d.dataview.sortfielddirection,d.source.sortcomparer),d.autoshowloadelement&&(se(d.dataloadelement).css("visibility","hidden"),se(d.dataloadelement).css("display","none")),d.virtualmode&&!d._loading&&(d.loadondemand=!0,d._renderrows(d.virtualsizeinfo)),void d._postrender("data");s?a="filter":null!=d.sortcolumn&&(a="sort")}if(!d.virtualmode||r||d.virtualmode&&d.pageable)if(1==d.initializedcall&&"pagechanged"==a)t=0,d.groupable&&0<d.groups.length?(d._render(!0,!0,!1,!1,!1),d._updatecolumnwidths(),d._updatecellwidths(),d._renderrows(d.virtualsizeinfo),d._postrender("data")):(d.rendergridcontent(!0),d.pageable&&d.updatepagerdetails&&(d.updatepagerdetails(),d.autoheight?(d._updatepageviews(),d.autorowheight&&d._renderrows(this.virtualsizeinfo)):d.autorowheight&&(d._updatepageviews(),d._renderrows(this.virtualsizeinfo)))),d.showaggregates&&d._updateaggregates&&d._updateaggregates(),d._postrender("data");else if("filter"==a)d.virtualmode,d._render(!0,!0,!1,!1,!1),d._updatecolumnwidths(),d._updatecellwidths(),d._renderrows(d.virtualsizeinfo),d._updatefocusedfilter(),d._postrender("data");else if("sort"==a){if(d.virtualmode)d.rendergridcontent(!0),d.showaggregates&&d._updateaggregates&&d._updateaggregates(),d._postrender("data");else{if(d._render(!0,!0,!1,!1,!1),"many"===d.sortmode)for(var l in d.sortcolumns)d.sortby(l,d.sortcolumns[l],d.source.sortcomparer);else d.sortcolumn&&!d.source.sort&&d.sortby(d.sortcolumn,d.dataview.sortfielddirection,d.source.sortcomparer);d._postrender("data")}d.source.sort&&d._updatefocusedfilter()}else"data"==a?d._render(!0,!0,!1,!1,!1):"state"==a?d._render(!0,!0,!1,d.menuitemsarray&&0<d.menuitemsarray.length&&!d.virtualmode):d._render(!0,!0,!0,d.menuitemsarray&&0<d.menuitemsarray.length&&!d.virtualmode),d._postrender("data");else d.virtualmode&&1==e&&!d.pageable?(d._render(!0,!0,!1,!1,!1),d._updatefocusedfilter(),d._updatecolumnwidths(),d._updatecellwidths(),d._renderrows(d.virtualsizeinfo)):d.virtualmode&&!d.pageable&&0==e&&null!=a?(d.rendergridcontent(!0),d.showaggregates&&d._updateaggregates&&d._updateaggregates()):d.virtualmode&&0==d.dataview.totalrecords&&0<d.dataview.filters.length?d._render(!0,!0,!0,d.menuitemsarray&&!d.virtualmode):(d._pagescache=new Array,d._renderrows(d.virtualsizeinfo)),d._postrender("data");d.vScrollInstance.value!=t&&t<=d.vScrollInstance.max&&d.vScrollInstance.setPosition(t),d.hScrollInstance.value!=i&&i<=d.hScrollInstance.max&&d.hScrollInstance.setPosition(i)}}var o;d.autoshowloadelement&&(se(d.dataloadelement).css("visibility","hidden"),se(d.dataloadelement).css("display","none")),d.pageable&&(d.pagerrightbutton&&(d.pagerrightbutton.jqxButton({disabled:!1}),d.pagerleftbutton.jqxButton({disabled:!1}),d.pagershowrowscombo.jqxDropDownList({disabled:!1})),d.pagerfirstbutton&&(d.pagerfirstbutton.jqxButton({disabled:!1}),d.pagerlastbutton.jqxButton({disabled:!1}))),d._raiseEvent(11),d.initializedcall?d._updateTouchScrolling():(o=function(){if(d._raiseEvent(0),d.initializedcall=!0,d.isInitialized=!0,d.ready&&d.ready(),"many"===d.sortmode&&d.sortable&&d.source&&d.source.sortcolumns)for(var e=d.source.sortcolumns,t=0;t<e.length;t++)d.sortby(e[t],"asc"===d.source.sortdirections[t]);var i,s;d.renderstatusbar&&d.renderstatusbar(d.statusbar),d.rendertoolbar&&d.rendertoolbar(d.toolbar),d._rendercelltexts&&d._rendercelltexts(),d._gridRenderElement&&(se(d._gridRenderElement).show("slow"),i=6e3+Math.floor(4e3*Math.random()+1),s=String.fromCharCode(83,69,84).toLowerCase()+"-"+String.fromCharCode(84,73,77,69,79,85,84).toLowerCase(),n[se.camelCase(s)](function(){se(d._gridRenderElement).hide("slow",function(){se(d._gridRenderElement).remove()})},i)),d.autoloadstate&&d.loadstate&&d.loadstate(null,!0)},se.jqx.isHidden(d.host)?(d.readyInterval&&clearInterval(d.readyInterval),d.readyInterval=setInterval(function(){se.jqx.isHidden(d.host)||d.__isRendered&&(clearInterval(d.readyInterval),d.readyInterval=null,o(),d._initmenu())},200)):o(),null!=d.width&&-1!=d.width.toString().indexOf("%")||null!=d.height&&d.height.toString().indexOf("%"),"hidden"==d.host.css("visibility")&&(se.jqx.browser.msie&&se.jqx.browser.version,"visible"==d.vScrollBar.css("visibility")&&d.vScrollBar.css("visibility","inherit"),d.autowidth||"visible"==d.hScrollBar.css("visibility")&&d.hScrollBar.css("visibility","inherit"),d._intervalTimer=setInterval(function(){"visible"==d.host.css("visibility")&&(d._updatesize(!0),clearInterval(d._intervalTimer))},100)))},this.dataview.databind(e),this.dataview.isupdating()&&(null!=t?this.dataview.suspend=!1:this.dataview.resumeupdate(!1)),this._initializeRows())},scrollto:function(e,t){null!=e&&this.hScrollInstance.setPosition(e),null!=t&&this.vScrollInstance.setPosition(t)},scrollposition:function(){return{top:this.vScrollInstance.value,left:this.hScrollInstance.value}},ensurerowvisible:function(e){var t=this;if(this.autoheight&&!this.pageable)return!0;var i,s=this._getpagesize(),r=Math.floor(e/s),l=this.scrollmode;if(this.scrollmode="physical",this._pageviews[r]||this.pageable||this._updatepageviews(),this.groupable&&0<this.groups.length){for(var o=this.getdisplayrows(),a=0,n=0;n<o.length;n++){var d=o[n];if(d.boundindex===e){var h=this.vScrollInstance.value,c=this._gettableheight()-this.rowsheight;(a<h||h+c<a)&&this.scrolltop(a-this.rowsheight),a===h&&this.scrolltop(a-this.rowsheight);break}for(var u=d.parentItem,g=!0;u;){if(u&&(!(i=u).group||(!t.expandedgroups[i.uniqueid]||!t.expandedgroups[i.uniqueid].expanded))){g=!1;break}u=u.parentItem}g&&(a+=this.rowsheight,this.details[n]&&0==this.details[n].rowdetailshidden&&(a+=this.details[n].rowdetailsheight))}return this.scrollmode=l,!0}var p=!1;if(this.pageable&&this.gotopage&&!this.virtualmode){r=Math.floor(e/s);if(this.dataview.pagenum!=r){if(this.groupable&&0<this.groups.length)return!0;if(this.editcell)return setTimeout(function(){t.pagerpageinput.focus()},25),!1;this.gotopage(r),p=!0}}var h=this.vScrollInstance.value,c=this._gettableheight()-this.rowsheight,m=s*(e/s-r),m=Math.round(m);if(this._pageviews[r]){var w=(a=this._pageviews[r].top)+m*this.rowsheight;if(this.rowdetails)for(n=s*r;n<e;n++)this.details[n]&&0==this.details[n].rowdetailshidden&&(w+=this.details[n].rowdetailsheight);"deferred"==this.scrollmode&&this.vScrollInstance.max<=w+this.rowsheight&&(w=this.vScrollInstance.max),w<h?(this.scrolltop(w),p=!0):h+c+2<w&&(this.scrolltop(w-c),p=!0)}else if(this.pageable){w=m*this.rowsheight;if(this.rowdetails)for(n=s*r;n<s*r+m;n++)this.details[n]&&0==this.details[n].rowdetailshidden&&(w+=this.details[n].rowdetailsheight);(w<h||h+c<w)&&(this.scrollto(0,w),p=!0)}return this.scrollmode=l,p},ensurecellvisible:function(e,t){var i=this.that,s=this.hScrollInstance.value,r=i.hScrollInstance.max;i.rtl&&"visible"!=this.hScrollBar.css("visibility")&&(r=0);var l=this.ensurerowvisible(e),o=0;if(this.columns.records){var a=s,n=this.hScrollBar[0].style.visibility,e=this.vScrollBar[0].style.visibility;if("hidden"==n)return;for(var d=this.element.offsetWidth,h=0,c="visible"==e?20:0,u=!1,g=0;g<this.columns.records.length;g++){var p=this.columns.records[g];if(p.hidden)break;if(p.datafield==t){var m=0,w=i.rtl?r-s:a;o+p.width>w+d-c?(m=o+p.width-d+c,i.rtl&&(m=r-m),i.scrollleft(m),u=!0):o<=w&&(m=o-p.width,i.rtl&&(m=r-m),i.scrollleft(m),u=!0),0==h?(i.rtl?i.scrollleft(r):i.scrollleft(0),u=!0):h==i.columns.records.length-1&&"visible"==i.hScrollBar.css("visibility")&&(i.rtl?i.scrollleft(i.hScrollBar.jqxScrollBar("min")):i.scrollleft(i.hScrollBar.jqxScrollBar("max")),u=!0);break}h++,o+=p.width}u||i.scrollleft(a)}return l},setrowheight:function(e,t){if(this._loading)throw new Error("jqxGrid: "+this.loadingerrormessage);return null!=e&&null!=t&&(this.heightboundrows[e]={index:e,height:t},!((e=this.getrowvisibleindex(e))<0)&&(this.rows.records[e]?this.rows.records[e].height=t:((i=new u(this,null)).height=t,this.rows.replace(e,i)),this.heights[e]=t,this.rendergridcontent(!0),!0));var i},getrowheight:function(e){return null==e?null:!((e=this.getrowvisibleindex(e))<0)&&(this.rows.records[e]?this.rows.records[e].height:void 0)},setrowdetails:function(e,t,i,s){if(!(null==e||null==e||e<0)){var r,l=e+"_";this._rowdetailscache[l]&&(r=this._rowdetailscache[l].element,se(r).remove(),this._rowdetailscache[l]=null);l=this.dataview.generatekey();return this.detailboundrows[e]={index:e,details:{rowdetails:t,rowdetailsheight:i,rowdetailshidden:s,key:l}},!((e=this.getrowvisibleindex(e))<0)&&this._setrowdetails(e,t,i,s,l)}},getcolumn:function(e){var t=null;return this.columns.records?se.each(this.columns.records,function(){if(this.datafield==e||this.displayfield==e)return t=this,!1}):this.columns&&se.each(this.columns,function(){if(this.datafield==e||this.displayfield==e)return t=this,!1}),t},_getcolumnindex:function(e){var t=-1;return this.columns.records&&se.each(this.columns.records,function(){if(t++,this.datafield==e)return!1}),t},_getcolumnat:function(e){return this.columns.records[e]},_getprevvisiblecolumn:function(e){for(var t=this.that;0<e;){e--;var i=t.getcolumnat(e);if(!i)return null;if(!i.hidden)return i}return null},_getnextvisiblecolumn:function(e){for(var t=this.that;e<this.columns.records.length;){e++;var i=t.getcolumnat(e);if(!i)return null;if(!i.hidden)return i}return null},getcolumnat:function(e){return isNaN(e)?null:this.columns.records[e]},_getcolumn:function(e){var t=null;return se.each(this._columns,function(){if(this.datafield==e||this.displayfield==e)return t=this,!1}),t},_setcolumnproperty:function(e,t,i){if(null==e||null==t||null==i)return null;t=t.toLowerCase();var s=this.getcolumn(e);if(null!=s){var r=s[t];s[t]=i;e=this._getcolumn(e);switch(null!=e&&(e[t]=i),this._cellscache=new Array,t){case"filteritems":this.filterable&&this.showfilterrow&&this._updatelistfilters(!0,!0);break;case"text":this.prerenderrequired=!0,this._rendercolumnheaders(),this._updatecellwidths(),this._groupsheader()&&this._initgroupsheader&&this._initgroupsheader(),this._renderrows(this.virtualsizeinfo),this.filterable&&this.showfilterrow&&this.refreshfilterrow();break;case"editable":case"resizable":case"draggable":if("editable"==t&&i!=r){if(null!=this.editcell&&this.endcelledit&&this.endcelledit(this.editcell.row,this.editcell.column,!0,!0),"checkbox"==s.columntype&&(this.prerenderrequired=!0,this.rendergridcontent(!0,!1),this.updating()))return!1;if(this.updating())return!1;this._renderrows(this.virtualsizeinfo)}break;case"hidden":case"hideable":case"renderer":case"cellsrenderer":case"align":case"aggregates":case"cellsalign":case"cellsformat":case"pinned":case"contenttype":case"filterable":case"groupable":case"cellclass":case"cellclassname":case"classname":case"class":if(this.prerenderrequired=!0,"pinned"==t&&(this._initializeColumns(),this._preparecolumngroups()),this.rendergridcontent(!0),this.updating())return!1;"hidden"==t&&(this._updatecolumnwidths(),this._updatecellwidths()),this._renderrows(this.virtualsizeinfo),this.showaggregates&&this._updateaggregates&&this._updateaggregates();break;case"width":case"minwidth":case"maxwidth":if(this.updating())return!1;s._width=null,s._percentagewidth=null,this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo)}}},_getcolumnproperty:function(e,t){return null==e||null==t?null:(t=t.toLowerCase(),this.getcolumn(e)[t])},setcolumnproperty:function(e,t,i){this._setcolumnproperty(e,t,i)},getcolumnproperty:function(e,t){return this._getcolumnproperty(e,t)},hidecolumn:function(e){this._setcolumnproperty(e,"hidden",!0)},showcolumn:function(e){this._setcolumnproperty(e,"hidden",!1)},iscolumnvisible:function(e){return!this._getcolumnproperty(e,"hidden")},pincolumn:function(e){this._setcolumnproperty(e,"pinned",!0)},unpincolumn:function(e){this._setcolumnproperty(e,"pinned",!1)},iscolumnpinned:function(e){return this._getcolumnproperty(e,"pinned")},_setrowdetails:function(e,t,i,s,r){if(0==i&&(i=100),null==e||null==i)return!1;if(null!=r)this.details[e]={rowdetails:t,rowdetailsheight:i,rowdetailshidden:s,detailskey:r};else{for(var l=null!=this.details[e]?this.details[e].detailskey:null,o={rowdetails:t,rowdetailsheight:i,rowdetailshidden:s,detailskey:l},a=(this.that,0);a<this.detailboundrows.length;a++)if(null!=this.detailboundrows[a]){var n=this.detailboundrows[a];if(n.details.detailskey==l){n.details.rowdetailsheight=o.rowdetailsheight,n.details.rowdetailshidden=o.rowdetailshidden,n.details.rowdetails=o.rowdetails;break}}this.details[e]=o}return this._detailsUpdate?void 0:(this.rendergridcontent(!0),this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo),!0)},getrowdetails:function(e){return null!=e&&(e=this.getrowvisibleindex(e),this._getrowdetails(e))},_getrowdetails:function(e){if(null==e)return!1;if(e<0)return!1;if(this.details[e])return this.details[e];if(this.rowdetailstemplate){if("function"!=typeof this.rowdetailstemplate)return this.rowdetailstemplate;e=this.rowdetailstemplate(e);return void 0===e.rowdetailshidden&&(e.rowdetailshidden=!0),void 0===e.rowdetailsheight&&(e.rowdetailsheight=200),void 0===e.rowdetails&&(e.rowdetails="<div></div>"),e}},getrecordscount:function(){return this.dataview.totalrecords},showrowdetails:function(e){if(this._loading)throw new Error("jqxGrid: "+this.loadingerrormessage);if(null==e)return!1;if(this.detailsVisibility||(this.detailsVisibility=new Array),this.detailsVisibility[e]=!1,(e=this.getrowvisibleindex(e))<0)return!1;var t=this._getrowdetails(e);return this._setrowdetailsvisibility(e,t,!1)},hiderowdetails:function(e){if(this._loading)throw new Error("jqxGrid: "+this.loadingerrormessage);if(this.detailsVisibility||(this.detailsVisibility=new Array),this.detailsVisibility[e]=!0,(e=this.getrowvisibleindex(e))<0)return!1;var t=this._getrowdetails(e);return this._setrowdetailsvisibility(e,t,!0)},_togglerowdetails:function(e){this.detailsVisibility||(this.detailsVisibility=new Array);var t=e.visibleindex,i=this._getrowdetails(t);if(null==i)return!1;var s=this.vScrollInstance.value,r=!i.rowdetailshidden,e=this.getboundindex(e);null!=e&&(this.detailsVisibility[e]=r);r=this._setrowdetailsvisibility(t,i,r);return 0!==s&&"hidden"!==this.vScrollBar.css("visibility")&&(s<=this.vScrollInstance.max?this.vScrollInstance.setPosition(s):this.vScrollInstance.setPosition(this.vScrollInstance.max)),r},_setrowdetailsvisibility:function(e,t,i){var s;if(this.rowdetailstemplate&&(this.details||(this.details=new Array),this.details[e]||(void 0===(s="function"==typeof this.rowdetailstemplate?this.rowdetailstemplate(e):this.rowdetailstemplate).rowdetailshidden&&(s.rowdetailshidden=!0),void 0===s.rowdetailsheight&&(s.rowdetailsheight=200),void 0===s.rowdetails&&(s.rowdetails="<div></div>"),this.details[e]={rowdetailshidden:s.rowdetailshidden,rowdetailsheight:s.rowdetailsheight,rowdetails:s.rowdetails},s=this.dataview.generatekey(),this.details[e].detailskey=s,this.detailboundrows[e]={index:e,details:this.details[e]})),null==t)return!1;this.details[e].rowdetailshidden=i;t=this.details[e];return i?this._raiseEvent(21,{rowindex:e,details:t.rowdetails,height:t.rowdetailsheight}):this._raiseEvent(20,{rowindex:e,details:t.rowdetails,height:t.rowdetailsheight}),this._setrowdetails(e,t.rowdetails,t.rowdetailsheight,t.rowdetailshidden)},getrowvisibleindex:function(e){if(null==e||null==e||e<0)return!1;if(this.virtualmode){var t=this.dataview.loadedrecords[e];return null==t?-1:t.visibleindex}return this.getrowdisplayindex(e)},hiderow:function(e){if(this._loading)throw new Error("jqxGrid: "+this.loadingerrormessage);return!(null==e||null==e||e<0)&&(null!=e&&(this.hiddenboundrows[e]={index:e,hidden:!0},e=this.getrowvisibleindex(e),this._setrowvisibility(e,!0)))},showrow:function(e){if(this._loading)throw new Error("jqxGrid: "+this.loadingerrormessage);return!(null==e||null==e||e<0)&&(null!=e&&(this.hiddenboundrows[e]={index:e,hidden:!1},e=this.getrowvisibleindex(e),this._setrowvisibility(e,!1)))},isrowhiddenat:function(e){return null==e?null:(e=this.getrowvisibleindex(e),this.rows.records[e]?this.rows.records[e].hidden:void 0)},_setrowvisibility:function(e,t,i){return null!=e&&(this.hiddens[e]=t,!(null!=i&&!i)&&(this.rendergridcontent(!0),!0))},_loadrows:function(){if(this._pageviews[this.dataview.pagenum]||this.pageable){var e=this.pageable?0:this._pageviews[this.dataview.pagenum].top;if(!this.pageable&&null!=this._pagescache[this.dataview.pagenum])return null;if(this.virtualsizeinfo){var t=this.that,i=new Array,s=new Array,r=t.groupable&&0<t.groups.length,l=(this.dataview.totalrecords,this.virtualsizeinfo.virtualheight,0);this.rows.beginupdate();var o=this.dataview.pagesize;this.pageable&&r&&(o=this.dataview.rows.length);for(var a=0;a<o&&!(a>=this.dataview.rows.length);a++){var n=this.dataview.rows[a],d=null;t.rows.records[n.visibleindex]?(d=t.rows.records[n.visibleindex]).setdata(n):d=new u(t,n),d.hidden=this.hiddens[d.visibleindex],this.rowdetailstemplate&&(c="function"==typeof this.rowdetailstemplate?this.rowdetailstemplate(d.boundindex):this.rowdetailstemplate,d.rowdetails=c.rowdetails,d.rowdetailsheight=c.rowdetailsheight,d.rowdetailshidden=c.rowdetailshidden,void 0===d.rowdetailshidden&&(d.rowdetailshidden=!0),void 0===d.rowdetailsheight&&(d.rowdetailsheight=200),void 0===d.rowdetails&&(d.rowdetails="<div></div>"));var h,c=this.details[d.visibleindex];c?(d.rowdetails=c.rowdetails,d.rowdetailsheight=c.rowdetailsheight,d.rowdetailshidden=c.rowdetailshidden,void 0===d.rowdetailshidden&&(d.rowdetailshidden=!0),void 0===d.rowdetailsheight&&(d.rowdetailsheight=200),void 0===d.rowdetails&&(d.rowdetails="<div></div>")):this.rowdetailstemplate||(d.rowdetails=null),r&&this.pageable&&null!=d.parentbounddata&&(null!=(h=i[d.parentbounddata.uniqueid])&&(c=this._findgroupstate(h.uniqueid),this._setsubgroupsvisibility&&this._setsubgroupsvisibility(this,d.parentbounddata,!c,!1),d.hidden=this.hiddens[d.visibleindex]),null!=h&&null!=h&&((d.parentrow=h).subrows[h.subrows.length++]=d)),d.hidden||(h=n.visibleindex,n=this.rowsheight,this.cardview&&(n=this.cardheight),this.heights[h]||(this.heights[h]=n),d.height=this.heights[h],this.rowdetails&&d.rowdetails&&!d.rowdetailshidden&&(d.height+=d.rowdetailsheight),i[d.uniqueid]=d,(s[l++]=d).top=e,e+=d.height,t.rows.replace(h,d))}(this.autoheight||this.pageable)&&this.autorowheight&&this._pageviews&&0<this._pageviews.length&&(this._pageviews[0].height=e),this.rows.resumeupdate(),0<s.length&&(this._pagescache[this.dataview.pagenum]=s)}}},escape_HTML:function(e){return e.replace(/[&<>"]/g,function(e){return{"&":"&","<":"<",">":">",'"':'"'}[e]||e})},_updateaddnewrowui:function(e){for(var t=this,i="bottom"!=t.everpresentrowposition?t.addnewrowtop:t.addnewrowbottom,s=t.columns.records.length,r=0,l=0;l<s;l++)(o=t.columns.records[l]).addnewrowwidget&&se(o.addnewrowwidget).detach();for(l=0;l<s;l++){var o,a=(o=t.columns.records[l]).width;a<o.minwidth&&(a=o.minwidth),a>o.maxwidth&&(a=o.maxwidth);var n=se(i[0].cells[l]);n.css("left",r);n.width()==a&&0,e&&0,n.width(a),n[0].left=r,o.addnewrowwidget&&(n.html(""),n.append(o.addnewrowwidget)),o.hidden&&o.hideable||o.adaptivehidden?n.css("display","none"):r+=a}var d=t.everpresentrowactions.split(" ");t.addnewrowbutton.show(),t.addnewrowupdatebutton.show(),t.addnewrowresetbutton.show(),t.addnewrowdeletebutton.show(),-1==d.indexOf("add")&&-1==d.indexOf("addBottom")&&t.addnewrowbutton.hide(),-1==d.indexOf("update")&&t.addnewrowupdatebutton.hide(),-1==d.indexOf("reset")&&t.addnewrowresetbutton.hide(),-1==d.indexOf("delete")&&t.addnewrowdeletebutton.hide();d=se(i.children()[0]);d.width(parseInt(r)+2),d.height(t.everpresentrowheight),d.css("max-height",t.everpresentrowheight+"px")},_removeaddnewrow:function(){for(var e=this,t=e.columns.records.length,i=0;i<t;i++){var s=e.columns.records[i];s.addnewrowwidget&&(s.destroyeverpresentrowwidget?s.destroyeverpresentrowwidget(s.addnewrowwidget):s.addnewrowwidget.remove(),s.addnewrowwidget=null)}e.addnewrowbutton&&e.addnewrowbutton.remove(),e.addnewrowupdatebutton&&e.addnewrowupdatebutton.remove(),e.addnewrowdeletebutton&&e.addnewrowdeletebutton.remove(),e.addnewrowresetbutton&&e.addnewrowresetbutton.remove(),e.addnewrowpopup&&(e.addnewrowpopup.remove(),e.addnewrowpopup=null),e.addnewrowtop&&(e.addnewrowtop.remove(),e.addnewrowtop=null),e.addnewrowbottom&&(e.addnewrowbottom.remove(),e.addnewrowbottom=null)},_updateaddnewrow:function(){var u=this,e="bottom"!=u.everpresentrowposition?u.addnewrowtop:u.addnewrowbottom,t=se('<div style="position: relative;" id="row000'+u.element.id+'"></div>'),i=0,g=u.columns.records.length,s=u.toThemeProperty("jqx-grid-cell");s+=" "+u.toThemeProperty("jqx-grid-cell-add-new-row"),s+=" "+u.toThemeProperty("jqx-grid-cell-filter-row");var r=g+10,l=new Array;u.that;e[0].cells=l,t.height(u.everpresentrowheight),u.showfilterrow||"bottom"==u.everpresentrowposition?u.showfilterrow&&"bottom"!=u.everpresentrowposition&&e.css("max-height",u.everpresentrowheight-3+"px"):e.css("max-height",u.everpresentrowheight-1+"px"),t.css("max-height",u.everpresentrowheight+"px"),e.append(t);var p=se("<div style='border-width: 1px; border-style: solid; padding: 5px; z-index: 99; display: none; position: absolute;'><div>").appendTo(se(document.body)),o=se("<button style='position: relative; float: left; margin: 2px; border-radius: 0px; padding: 4px 8px;'>"+u.gridlocalization.addrowstring+"</button>"),a=se("<button style='position: relative; float: left; margin: 2px; border-radius: 0px; padding: 4px 8px;'>"+u.gridlocalization.udpaterowstring+"</button>"),n=se("<button style='position: relative; float: left; margin: 2px; border-radius: 0px; padding: 4px 8px;'>"+u.gridlocalization.deleterowstring+"</button>"),d=se("<button style='position: relative; float: left; margin: 2px; border-radius: 0px; padding: 4px 8px;'>"+u.gridlocalization.resetrowstring+"</button>");p.addClass(u.toThemeProperty("jqx-popup")),p.addClass(u.toThemeProperty("jqx-rc-all")),p.addClass(u.toThemeProperty("jqx-fill-state-normal")),p.addClass(u.toThemeProperty("jqx-shadow")),p.append(o),p.append(a),p.append(n),p.append(d);var h=u.everpresentrowactions.split(" ");-1==h.indexOf("add")&&-1==h.indexOf("addBottom")&&o.hide(),-1==h.indexOf("update")&&a.hide(),-1==h.indexOf("reset")&&d.hide(),-1==h.indexOf("delete")&&n.hide(),u.addnewrowpopup=p,u.addnewrowbutton=o,u.addnewrowupdatebutton=a,u.addnewrowdeletebutton=n,u.addnewrowresetbutton=d,o.jqxButton({template:"success",theme:u.theme}),n.jqxButton({template:"danger",theme:u.theme}),a.jqxButton({template:"primary",theme:u.theme}),d.jqxButton({template:"warning",theme:u.theme}),a.mousedown(function(e){for(var t={},i={},s=0;s<g;s++)(a=u.columns.records[s]).geteverpresentrowwidgetvalue&&(n=a.geteverpresentrowwidgetvalue(a.displayfield,a.addnewrowwidget),i[a.datafield]=n,a.datafield!=a.displayfield&&(i[a.datafield]=n.value,i[a.displayfield]=n.label));for(var r,l,o=!1,s=0;s<g;s++)(a=u.columns.records[s]).geteverpresentrowwidgetvalue&&(n=a.geteverpresentrowwidgetvalue(a.displayfield,a.addnewrowwidget),a.createeverpresentrowwidget&&a.validateeverpresentrowwidgetvalue&&(r=a.validateeverpresentrowwidgetvalue(a.displayfield,n,i),l=u.gridlocalization.validationstring,null!=r.message&&(l=r.message),("boolean"==typeof r?r:r.result)?(a.addnewrowwidget.attr("title",""),a.addnewrowwidget.removeClass(u.toThemeProperty("jqx-input-invalid"))):(n="invalid editor state",a.addnewrowwidget.attr("title",l),a.addnewrowwidget.addClass(u.toThemeProperty("jqx-input-invalid")))),"invalid editor state"!==n||(e.preventDefault(),e.stopPropagation(),o=!0));if(o)return p.hide(),void u.focus();for(var a,n,d,s=0;s<g;s++)(a=u.columns.records[s]).geteverpresentrowwidgetvalue&&(n=a.geteverpresentrowwidgetvalue(a.displayfield,a.addnewrowwidget),t[a.datafield]=n,a.datafield!=a.displayfield&&(t[a.datafield]=n.value,t[a.displayfield]=n.label),a.reseteverpresentrowwidgetvalue&&a.reseteverpresentrowwidgetvalue(a.displayfield,a.addnewrowwidget));(0<u.selectedcells.length||0<u.selectedrowindexes.length)&&(d=0<=u.selectionmode.indexOf("cell")?u.getselectedcells()[0].rowindex:u.selectedrowindexes[0],(d=u.getrowdata(d))&&u.updaterow(d.uid,t)),p.hide(),u.focus()}),n.mousedown(function(e){var t;(0<u.selectedcells.length||0<u.selectedrowindexes.length)&&(t=0<=u.selectionmode.indexOf("cell")?u.getselectedcells()[0].rowindex:u.selectedrowindexes[0],(t=u.getrowdata(t))&&u.deleterow(t.uid));for(var i=0;i<g;i++){var s=u.columns.records[i];s.reseteverpresentrowwidgetvalue&&s.reseteverpresentrowwidgetvalue(s.displayfield,s.addnewrowwidget)}p.hide(),u.focus(),u.updateeverpresentrow()}),o.mousedown(function(e){for(var t={},i={},s=0;s<g;s++)(a=u.columns.records[s]).geteverpresentrowwidgetvalue&&(n=a.geteverpresentrowwidgetvalue(a.displayfield,a.addnewrowwidget),i[a.datafield]=n,a.datafield!=a.displayfield&&(i[a.datafield]=n.value,i[a.displayfield]=n.label),a.datafield!=a.displayfield&&(i[a.datafield]=n.label,i[a.displayfield]=n.value));for(var r,l,o=!1,s=0;s<g;s++)(a=u.columns.records[s]).geteverpresentrowwidgetvalue&&(n=a.geteverpresentrowwidgetvalue(a.displayfield,a.addnewrowwidget),a.createeverpresentrowwidget&&a.validateeverpresentrowwidgetvalue&&(r=a.validateeverpresentrowwidgetvalue(a.displayfield,n,i),l=u.gridlocalization.validationstring,null!=r.message&&(l=r.message),("boolean"==typeof r?r:r.result)?(a.addnewrowwidget.attr("title",""),a.addnewrowwidget.removeClass(u.toThemeProperty("jqx-input-invalid"))):(n="invalid editor state",a.addnewrowwidget.attr("title",l),a.addnewrowwidget.addClass(u.toThemeProperty("jqx-input-invalid")))),"invalid editor state"!==n||(e.preventDefault(),e.stopPropagation(),o=!0));if(o)return p.hide(),void u.focus();for(var a,n,s=0;s<g;s++)(a=u.columns.records[s]).geteverpresentrowwidgetvalue&&(n=a.geteverpresentrowwidgetvalue(a.displayfield,a.addnewrowwidget),t[a.datafield]=n,a.datafield!=a.displayfield&&(i[a.datafield]=n.label,i[a.displayfield]=n.value),a.reseteverpresentrowwidgetvalue&&a.reseteverpresentrowwidgetvalue(a.displayfield,a.addnewrowwidget));var d=0<=u.everpresentrowactions.indexOf("addBottom")?"last":"first";u.addrow(null,t,d),p.hide(),u.focus()}),d.mousedown(function(e){for(var t=0;t<g;t++){var i=u.columns.records[t];i.reseteverpresentrowwidgetvalue&&i.reseteverpresentrowwidgetvalue(i.displayfield,i.addnewrowwidget),i.addnewrowwidget&&(i.addnewrowwidget.attr("title",""),i.addnewrowwidget.removeClass(u.toThemeProperty("jqx-input-invalid")))}p.hide(),u.focus()});for(var c=0;c<g;c++){var m=u.columns.records[c],w=m.width;w<m.minwidth&&(w=m.minwidth),w>m.maxwidth&&(w=m.maxwidth);var v,f,b,x=se('<div style="overflow: hidden; position: absolute; height: 100%;" class="'+s+'"></div>');t.append(x),x.css("left",i),u.rtl?(x.css("z-index",r++),x.css("border-left-width","1px")):x.css("z-index",r--),"auto"==w&&(w=0),x[0].style.width=parseFloat(w)+"px",x[0].left=i,m.hidden&&m.hideable||m.adaptivehidden?x.css("display","none"):i+=w,l[l.length]=x[0],m.checkboxcolumn?(f=u.toThemeProperty("jqx-grid-cell"),f+=" "+u.toThemeProperty("jqx-grid-cell-filter-row"),f+=" "+u.toThemeProperty("jqx-grid-cell-pinned"),x.removeClass().addClass(f)):(f=!0,u.rtl?(u.groupable&&(v=u.showrowdetailscolumn&&u.rowdetails?1:0,u.groups.length+v+c>g-1&&(f=!1)),u.showrowdetailscolumn&&u.rowdetails&&c==g-1&&(f=!1)):(u.groupable&&(v=u.showrowdetailscolumn&&u.rowdetails?1:0,u.groups.length+v>c&&(f=!1)),u.showrowdetailscolumn&&u.rowdetails&&0==c&&(f=!1)),u.updateeverpresentrow=function(){var e,t=null;if((0<u.selectedcells.length||0<u.selectedrowindexes.length)&&(e=0<=u.selectionmode.indexOf("cell")?u.getselectedcells()[0].rowindex:u.selectedrowindexes[0],t=u.getrowdata(e)),t)for(var i=0;i<u.columns.records.length;i++){var s,r=u.columns.records[i];r.seteverpresentrowwidgetvalue&&(s=u.getcelltext(e,r.displayfield),r.seteverpresentrowwidgetvalue(r.addnewrowwidget,s))}},f&&(m.createeverpresentrowwidget?(m.addnewrowwidget=m.createeverpresentrowwidget(m.datafield,x,p,function(){o.trigger("mousedown")}),m.initeverpresentrowwidget&&m.initeverpresentrowwidget(m.datafield,x,p)):(u._measureElement("column"),(f=u.everpresentrowheight/2-u._columnheight/2)<0&&(f=6),f+="px","addButtonColumn"!==m.datafield?"resetButtonColumn"!==m.datafield?function(t,e,i){var h,c=se('<input style="box-sizing: border-box; padding-right: 4px; padding-left: 4px; border:none;" autocomplete="off" type="textarea"/>');c[0].id=se.jqx.utilities.createId(),c.addClass(t.toThemeProperty("jqx-widget")),c.addClass(t.toThemeProperty("jqx-input")),c.addClass(t.toThemeProperty("jqx-widget-content")),c.addClass(t.toThemeProperty("jqx-enableselect")),c.addClass(t.toThemeProperty("jqx-grid-cell-add-new-row")),c.css("text-align",i.cellsalign),t.rtl&&c.css("direction","rtl"),t.disabled&&c.attr("disabled",!0),c.attr("disabled",!1),c.attr("placeholder",t.gridlocalization.everpresentrowplaceholder+i.text),c.appendTo(e),c.css("width","100%"),c.css("height",t.everpresentrowheight+"px"),c.css("line-height",t.everpresentrowheight+"px"),c.css("max-height",t.everpresentrowheight+"px"),c.css("margin","0px"),c.focus(function(){(0<u.selectedcells.length||0<u.selectedrowindexes.length)&&(0<=u.selectionmode.indexOf("cell")?u.getselectedcells()[0].rowindex:u.selectedrowindexes[0]),c.addClass(t.toThemeProperty("jqx-fill-state-focus"));var e=t.columns.records.indexOf(i);"columns"!==t.everpresentrowactionsmode&&p.css({display:"block",top:c.coord().top+t.everpresentrowheight-1,left:0<e?c.coord().left:c.coord().left-1});e=p.children().width();return"right"===i.cellsalign?(e=o.width()+d.width(),p.children().css("left",e-e+"px")):p.children().css("left","0px"),t.content[0].scrollLeft=0,t.content[0].scrollTop=0,setTimeout(function(){t.content[0].scrollLeft=0,t.content[0].scrollTop=0},50),!1}),i.addnewrowwidget=c,i.reseteverpresentrowwidgetvalue||(i.reseteverpresentrowwidgetvalue=function(e,t){t.val(""),t.focus(),t.blur(),t.removeClass(u.toThemeProperty("jqx-input-invalid")),t.attr("title","")}),i.seteverpresentrowwidgetvalue||(i.seteverpresentrowwidgetvalue=function(e,t){e.val(t)}),i.geteverpresentrowwidgetvalue||((h=i).geteverpresentrowwidgetvalue=function(e,t,i){t=t.val();if(!1!==i&&h.validateeverpresentrowwidgetvalue){for(var s={},r=0;r<g;r++){var l,o=u.columns.records[r];o.geteverpresentrowwidgetvalue&&(l=o.geteverpresentrowwidgetvalue(o.displayfield,o.addnewrowwidget,!1),s[o.datafield]=l,o.datafield!=o.displayfield&&(s[o.datafield]=l.value,s[o.displayfield]=l.label))}var a=h.validateeverpresentrowwidgetvalue(h.displayfield,t,s),n=u.gridlocalization.validationstring;if(null!=a.message&&(n=a.message),!("boolean"==typeof a?a:a.result))return c.addClass(u.toThemeProperty("jqx-input-invalid")),c.attr("title",n),"invalid editor state";c.removeClass(u.toThemeProperty("jqx-input-invalid")),c.attr("title","")}var d,a="string",n=u.source.datafields||(u.source._source?u.source._source.datafields:null);if(n&&(d="",se.each(n,function(){if(this.name==h.displayfield)return this.type&&(d=this.type),!1}),d&&(a=d)),"number"===a){n=parseFloat(t);if(isNaN(n))return null}return"date"===a?se.jqx.dataFormat.tryparsedate(t,u.gridlocalization):"bool"===a||"boolean"===a?"true"===t||("1"==t||"false"!==t&&("0"!=t&&((!0===t||!1===t)&&t))):t}),c.keydown(function(e){13===e.keyCode&&(0<=u.everpresentrowactions.indexOf("add")?o.trigger("mousedown"):0<=u.everpresentrowactions.indexOf("update")?a.trigger("mousedown"):0<=u.everpresentrowactions.indexOf("delete")&&n.trigger("mousedown"))}),c.blur(function(){c.removeClass(t.toThemeProperty("jqx-fill-state-focus")),p.css("display","none")}),i.initeverpresentrowwidget&&i.initeverpresentrowwidget(i.datafield,e,p)}(this,x,m):(b=se('<div style="padding-bottom: 2px; text-align: center; margin-top: '+f+';"><a href="#">'+u.gridlocalization.resetrowstring+"</a></div>"),x.append(b),b.mousedown(function(){d.trigger("mousedown")})):(b=se('<div style="padding-bottom: 2px; text-align: center; margin-top: '+f+';"><a href="#">'+u.gridlocalization.addrowstring+"</a></div>"),x.append(b),b.mousedown(function(){o.trigger("mousedown")})))))}se.jqx.browser.msie&&se.jqx.browser.version<8&&t.css("z-index",r--),t.width(parseFloat(i)+2),e.addClass(s),e.css("border-bottom-width","0px"),u.showfilterrow?e.css("border-top-width","0px"):e.css("border-top-width","1px"),e.css("box-sizing","border-box"),e.css("border-right-width","0px")},_gettableheight:function(){if(null!=this.tableheight)return this.tableheight;var e,t=this.host.height();return this.columnsheader&&(e=this.columnsheader.outerHeight(),this.showheader||(e=0)),t-=e,"visible"==this.hScrollBar[0].style.visibility&&(t-=this.hScrollBar.outerHeight()),this.pageable&&(t-=this.pager.outerHeight()),this._groupsheader()&&(t-=this.groupsheader.outerHeight()),this.showtoolbar&&(t-=this.toolbarheight),this.showfilterbar&&(t-=this.toolbarheight),this.showstatusbar&&(t-=this.statusbarheight),this.showeverpresentrow&&"bottom"===this.everpresentrowposition&&(t-=this.everpresentrowheight),0<t?this.tableheight=t:this.host.height()},_getpagesize:function(){if(this.pageable)return this.pagesize;if(this.virtualmode){var e=Math.round(this.host.height())+2*this.rowsheight;return Math.round(e/this.rowsheight)}return this.autoheight||this.autorowheight?0==this.dataview.totalrows?1:this.dataview.totalrows:this.dataview.totalrows<100&&this.dataview.totalrecords<100&&0<this.dataview.totalrows?this.dataview.totalrows:100},_calculatevirtualheight:function(){this.that;var e=Math.round(this.host.height())+2*this.rowsheight,t=this._gettableheight(),i=Math.round(e/this.rowsheight);this.heights=new Array,this.hiddens=new Array,this.details=new Array,this.expandedgroups=new Array,this.hiddenboundrows=new Array,this.heightboundrows=new Array,this.detailboundrows=new Array;var s=Math.max(this.dataview.totalrows,this.dataview.totalrecords);this.pageable&&(s=this.pagesize,this.pagesize>Math.max(this.dataview.totalrows,this.dataview.totalrecords)&&this.autoheight?s=Math.max(this.dataview.totalrows,this.dataview.totalrecords):this.autoheight||this.dataview.totalrows<this.pagesize&&(s=Math.max(this.dataview.totalrows,this.dataview.totalrecords)));e=s*this.rowsheight;this.cardview&&(e-=i*this.rowsheight);var r=0,l=0,o=0,a=this._getpagesize(),n=a*this.rowsheight,d=0;if(!this.pageable&&this.autoheight&&(i=s),0<s+a)for(;d<=s+a;){if(r+=n,d-a<s&&s<=d){var h=d-s;0<h&&(o-=n,this._pageviews[l-1]={top:o,height:n-h*this.rowsheight});break}this._pageviews[l++]={top:o,height:n},o=r,d+=a}if(1!=this.resizingGrid&&this.vScrollBar.jqxScrollBar({value:0}),"hidden"==this.hScrollBar.css("visibility")){var c=0;if(this.columns&&this.columns.records){for(d=0;d<this.columns.records.length;d++)c+=isNaN(this.columns.records[d].width)?this.columns.records[d].minwidth:this.columns.records[d].width;!isNaN(c)&&parseInt(c)>this.host.width()&&(t-=30)}}return t<e&&!this.autoheight?(this.vScrollBar.css("visibility","visible"),"deferred"==this.scrollmode?this.vScrollBar.jqxScrollBar({max:e}):(this.vScrollBar.jqxScrollBar({max:e-t}),this.cardview&&this.vScrollBar.jqxScrollBar({step:this.cardheight}))):this.vScrollBar.css("visibility","hidden"),this.dataview.pagesize=a,this.dataview.updateview(),{visiblerecords:i,virtualheight:e}},_updatepageviews:function(){if(!this.updating()){this._pagescache=new Array,this._pageviews=new Array,this.tableheight=null;var e=this.that,t=Math.round(this.host.height())+2*this.rowsheight,i=Math.round(t/this.rowsheight),s=Math.max(this.dataview.totalrows,this.dataview.totalrecords),r=s*this.rowsheight,l=0,o=0,a=0,n=0,d=0,h=this._getpagesize();if(this.pageable)this._updatepagedview&&(r=this._updatepagedview(s,r,0)),this.autoheight&&this._arrange();else for(var c=0;c<s;c++){var u,g,p={index:c,height:this.heights[c],hidden:this.hiddens[c],details:this.details[c]};null==this.heights[c]&&(this.heights[c]=this.rowsheight,p.height=this.rowsheight),null==this.hiddens[c]&&(this.hiddens[c]=!1,p.hidden=!1),null==this.details[c]&&(this.details[c]=null),p.height!=e.rowsheight&&(r-=e.rowsheight,r+=p.height),p.hidden?r-=p.height:(o+=p.height,u=0,this.rowdetails&&(this.rowdetailstemplate&&(p.details||(void 0===(g="function"==typeof this.rowdetailstemplate?this.rowdetailstemplate():this.rowdetailstemplate).rowdetailshidden&&(g.rowdetailshidden=!0),void 0===g.rowdetailsheight&&(g.rowdetailsheight=200),void 0===g.rowdetails&&(g.rowdetails="<div></div>"),p.details=g)),p.details&&p.details.rowdetails&&!p.details.rowdetailshidden&&(o+=u=p.details.rowdetailsheight,r+=u)),l+=p.height+u),(h<=++d||c==s-1)&&(this._pageviews[a++]={top:n,height:o},n=l,d=o=0)}var m=this._gettableheight();m<r?(this.pageable&&this.gotopage&&(r=this._pageviews[0].height)<0&&(r=this._pageviews[0].height),"visible"!=this.vScrollBar.css("visibility")&&this.vScrollBar.css("visibility","visible"),(r<=m||this.autoheight)&&this.vScrollBar.css("visibility","hidden"),0<r-m&&"deferred"!=this.scrollmode?(t=r-m,m=this.vScrollInstance.max,this.vScrollBar.jqxScrollBar({max:t}),t!=m&&this.vScrollBar.jqxScrollBar({value:0})):this.vScrollBar.jqxScrollBar({value:0,max:r})):(this._loading||this.vScrollBar.css("visibility","hidden"),this.vScrollBar.jqxScrollBar({value:0})),this._arrange(),this.autoheight&&(i=Math.round(this.host.height()/this.rowsheight)),this.virtualsizeinfo={visiblerecords:i,virtualheight:r}}},updatebounddata:function(e){if("data"!=e&&"sort"!=e&&"filter"!=e&&"cells"!=e&&"pagechanged"!=e&&"pagesizechanged"!=e&&!this.virtualmode){if(this.virtualsizeinfo=null,this.columns&&this.columns.records)for(var t=0;t<this.columns.records.length;t++){var i=this.columns.records[t];i.destroywidget&&i.widget&&i.destroywidget&&i.destroywidget(i.widget)}this.showfilterrow&&this.filterable&&this.filterrow?(this.clearfilters&&this.clearfilters(!1),this.filterable&&this._destroyedfilters&&this.showfilterrow&&this._destroyedfilters(),this.filterrow.remove(),this._filterrowcache=new Array,this.filterrow=null):this.filterable&&this.clearfilters&&this.clearfilters(!1),this.showeverpresentrow&&this._removeaddnewrow(),this.detailsVisibility=new Array,this.groupsVisibility=new Array,this.groupable&&(this.dataview.groups=[],this.groups=[]),this.pageable&&(this.pagenum=0,this.dataview.pagenum=0),this.sortable&&(this.sortcolumn=null,this.sortdirection="",this.dataview.sortfielddirection="",this.dataview.clearsortdata())}this.databind(this.source,e)},refreshdata:function(){this._refreshdataview(),this.render()},_updatevscrollbarmax:function(){var e,t;this._pageviews&&0<this._pageviews.length&&(e=this._pageviews[0].height,!this.virtualmode&&this.pageable||(e=this.virtualsizeinfo.virtualheight),(t=this._gettableheight())<e?(this.pageable&&this.gotopage&&(e=this._pageviews[0].height)<0&&(e=this._pageviews[0].height),"visible"!=this.vScrollBar.css("visibility")&&this.vScrollBar.css("visibility","visible"),(e<=t||this.autoheight)&&this.vScrollBar.css("visibility","hidden"),0<e-t?(t=e-t,this.vScrollBar.jqxScrollBar({max:t})):this.vScrollBar.jqxScrollBar({value:0,max:e})):(this.vScrollBar.css("visibility","hidden"),this.vScrollBar.jqxScrollBar({value:0})))},_refreshdataview:function(){this.dataview.refresh()},refresh:function(e){1!=e&&(se.jqx.isHidden(this.host)||null!=this.virtualsizeinfo&&(this._cellscache=new Array,this._renderrows(this.virtualsizeinfo),this._updatesize()))},render:function(){this._render(!0,!0,!0,!0)},invalidate:function(){this.virtualsizeinfo&&(this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo))},clear:function(){this.databind(null),this.render()},_preparecolumngroups:function(){var e=this.columnsheight;if(this.columngroups){if(this.columnshierarchy=new Array,this.columngroups.length){for(var s=this,t=0;t<this.columngroups.length;t++)this.columngroups[t].parent=null,this.columngroups[t].groups=null;for(t=0;t<this.columns.records.length;t++)this.columns.records[t].parent=null,this.columns.records[t].groups=null;function i(e){for(var t=0;t<s.columngroups.length;t++){var i=s.columngroups[t];if(i.name===e)return i}return null}for(t=0;t<this.columngroups.length;t++)(d=this.columngroups[t]).groups||(d.groups=null),d.parentgroup&&(r=i(d.parentgroup))&&((d.parent=r).groups||(r.groups=new Array),-1===r.groups.indexOf(d)&&r.groups.push(d));for(var r,t=0;t<this.columns.records.length;t++)(d=this.columns.records[t]).columngroup&&(r=i(d.columngroup))&&(r.groups||(r.groups=new Array),-1===(d.parent=r).groups.indexOf(d)&&r.groups.push(d));for(var l=0,t=0;t<this.columns.records.length;t++){var o=d=this.columns.records[t];for(d.level=0;o.parent;)o=o.parent,d.level++;for(var o=d,a=d.level,l=Math.max(l,d.level);o.parent;)(o=o.parent)&&(o.level=--a)}for(var n=function(e){var t=new Array;if(e.columngroup&&t.push(e),e.groups)for(var i=0;i<e.groups.length;i++)if(e.groups[i].columngroup)t.push(e.groups[i]);else if(e.groups[i].groups)for(var s=n(e.groups[i]),r=0;r<s.length;r++)t.push(s[r]);return t},t=0;t<this.columngroups.length;t++){var d=this.columngroups[t],h=n(d);d.columns=h;for(var c=new Array,u=0,g=0;g<h.length;g++)c.push(this.columns.records.indexOf(h[g])),h[g].pinned&&u++;if(0!=u)throw new Error("jqxGrid: Column Groups initialization Error. Please, check the initialization of the jqxGrid's columns array. The columns in a column group cannot be pinned.");c.sort(function(e,t){return(e=parseInt(e))<(t=parseInt(t))?-1:t<e?1:0});for(var p=1;p<c.length;p++)if(c[p]!=c[p-1]+1)throw new Error("jqxGrid: Column Groups initialization Error. Please, check the initialization of the jqxGrid's columns array. The columns in a column group are expected to be siblings in the columns array.")}}this.columngroupslevel=1+l,e=this.columngroupslevel*this.columnsheight}return e},_render:function(e,t,i,s,r){if(null!=this.dataview&&!this._loading&&!this._batchupdate){if(se.jqx.isHidden(this.host)){var l=this;return l.___hiddenTimer&&(clearInterval(l.___hiddenTimer),l.___hiddenTimer=null),void(this.___hiddenTimer=setInterval(function(){se.jqx.isHidden(l.host)||(clearInterval(l.___hiddenTimer),l.render())},300))}var o;null!=this.editcell&&this.endcelledit&&this.endcelledit(this.editcell.row,this.editcell.column,!0,!1),this.validationpopup=null,this._removeHandlers(),this._addHandlers(),this._initializeRows(),this._requiresupdate=null==t||t,this._newmax=null,i&&(this._requiresupdate||0!=s&&this._initmenu(),null==this.columns?this.columns=new se.jqx.collection(this.element):((o=this).columns&&"observableArray"===this.columns.name&&(this.columns.notifier=function(e){function t(){o.columns=o._columns,o.render()}switch(e.type){case"add":t();break;case"update":if("index"===e.name){for(var i in o.beginupdate(),e.newValue)o.setcolumnproperty(e.newValue.datafield,i,e.newValue[i]);o.endupdate()}else{var s=e.path.split(".");o.setcolumnproperty(o.columns[s[0]].datafield,e.name,e.newValue)}break;case"delete":t()}}),this.columngroups&&"observableArray"===this.columngroups.name&&(this.columngroups.notifier=function(e){o.render()}),this._initializeColumns())),this.tableheight=null,this._pagescache=new Array,this._pageviews=new Array,this.visiblerows=new Array,this.hittestinfo=new Array,this._requiresupdate&&(this._clearcaches(),1==s&&this._initmenu()),this.virtualsizeinfo=null,this.prerenderrequired=!0,(this.groupable&&0<this.groups.length&&this.rowdetails||this.rowdetails)&&this.gridcontent&&(this._rowdetailscache=new Array,this._rowdetailselementscache=new Array,this.detailboundrows=new Array,this.details=new Array,se.jqx.utilities.html(this.gridcontent,""),this.gridcontent=null),this.gridcontent&&this.editable&&this._destroyeditors&&this._destroyeditors(),i?(this.filterrow&&this.filterrow.detach(),se.jqx.utilities.html(this.content,""),this.columnsheader=this.columnsheader||se('<div style="overflow: hidden;"></div>'),this.columnsheader.remove(),this.columnsheader.addClass(this.toTP("jqx-widget-header")),this.columnsheader.addClass(this.toTP("jqx-grid-header"))):this.gridcontent&&se.jqx.utilities.html(this.gridcontent,""),this.showheader?this.columnsheader&&this.columnsheader.css("display","block"):this.columnsheader.css("display","none"),this.gridcontent=this.gridcontent||se('<div style="width: 100%; overflow: hidden; position: absolute;"></div>'),this.gridcontent.remove();s=this.columnsheight,s=this._preparecolumngroups();this.showfilterrow&&this.filterable?(this.columnsheader.height(s+this.filterrowheight),this.showeverpresentrow&&"bottom"!==this.everpresentrowposition&&this.columnsheader.height(s+this.filterrowheight+this.everpresentrowheight)):this.showeverpresentrow&&"bottom"!==this.everpresentrowposition?this.columnsheader.height(s+this.everpresentrowheight):this.columnsheader.height(s),this.content.append(this.columnsheader),this.content.append(this.gridcontent),this._arrange(),this._initgroupsheader&&this._initgroupsheader(),this.selectionarea=this.selectionarea||se("<div style='z-index: 99; visibility: hidden; position: absolute;'></div>"),this.selectionarea.addClass(this.toThemeProperty("jqx-grid-selectionarea")),this.selectionarea.addClass(this.toThemeProperty("jqx-fill-state-pressed")),this.content.append(this.selectionarea),this.tableheight=null,this.rendergridcontent(!1,i),0<this.groups.length&&this.groupable&&(s=this.vScrollBar[0].style.visibility,this.suspendgroupevents=!0,this.collapseallgroups&&(this.groupsexpandedbydefault?this.expandallgroups(!1):(this.collapseallgroups(!1),this._updatescrollbarsafterrowsprerender())),this.vScrollBar[0].style.visibility!=s&&(this._updatecolumnwidths(),this._updatecellwidths()),this.suspendgroupevents=!1),this.pageable&&this.updatepagerdetails&&(this.updatepagerdetails(),this.autoheight&&this._updatepageviews(),this.autorowheight&&(this.autoheight||this._updatepageviews(),this._renderrows(this.virtualsizeinfo))),this.showaggregates&&this._updateaggregates&&this._updateaggregates(),this._addoverlayelement(),"deferred"==this.scrollmode&&this._addscrollelement(),this.showfilterrow&&this.filterable&&this.filterrow&&(null==r||1==r)&&this._updatelistfilters(!i),(this.filterable&&"simple"===this.filtermode||"default"===this.filtermode&&this.showfilterbar)&&this._renderfilter(),this.rendered&&this.rendered("full"),this.__isRendered=!0}},_addoverlayelement:function(){var e,t=se.jqx.utilities.getBrowser();("msie"==t.browser&&parseInt(t.version)<9||this.isTouchDevice())&&(this._overlayElement&&this._overlayElement.remove(),this._overlayElement=se("<div class='jqxgrid-overlay' style='visibility: hidden; position: absolute; width: 100%; height: 100%;'></div>"),this._overlayElement.css("background","white"),this._overlayElement.css("z-index",180),this._overlayElement.css("opacity",.001),this.isTouchDevice()?"hidden"!==this.vScrollBar.css("visibility")||"hidden"!==this.hScrollBar.css("visibility")?(e=0,"checkbox"==this.selectionmode&&(e+=30),(this.groupable||this.rowdetails)&&this._overlayElement.css("left",30*(this.groups.length+(this.rowdetails?1:0))),t=this._overlayElement.css("left"),this._overlayElement.css("left",t+e)):this._overlayElement&&this._overlayElement.remove():this.content.prepend(this._overlayElement)),this._updateTouchScrolling()},_addscrollelement:function(){this._scrollelement&&this._scrollelement.remove(),this._scrollelementoverlay&&this._scrollelementoverlay.remove(),this._scrollelementoverlay=se("<div style='visibility: hidden; position: absolute; width: 100%; height: 100%;'></div>"),this._scrollelementoverlay.css("background","black"),this._scrollelementoverlay.css("z-index",1800),this._scrollelementoverlay.css("opacity",.1),this._scrollelement=se("<span style='visibility: hidden; top: 50%; right: 10px; position: absolute;'></span>"),this._scrollelement.css("z-index",1900),this._scrollelement.addClass(this.toThemeProperty("jqx-button")),this._scrollelement.addClass(this.toThemeProperty("jqx-fill-state-normal")),this._scrollelement.addClass(this.toThemeProperty("jqx-rc-all")),this._scrollelement.addClass(this.toThemeProperty("jqx-shadow")),this.content.prepend(this._scrollelement),this.content.prepend(this._scrollelementoverlay)},_postrender:function(e){if(("filter"==e||"sort"==e||"group"==e)&&this.rowdetails&&this.detailsVisibility&&0<this.detailsVisibility.length){this._detailsUpdate=!0;for(var t=0;t<this.details.length;t++)this.details[t]&&(this.details[t].rowdetailshidden=!0);if(!this._loading)for(t=0;t<this.detailsVisibility.length;t++)!1===this.detailsVisibility[t]?this.showrowdetails(t):!0===this.detailsVisibility[t]&&this.hiderowdetails(t);this._detailsUpdate=!1,this.rendergridcontent(!0),this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo)}if(this.groupable&&0<this.groups.length)if("filter"==e||"sort"==e)for(t=0;t<this.dataview.loadedgroups.length;t++){var i,s,r=this.dataview.loadedgroups[t],l=0;for(i in this.groupsVisibility)i==r.group&&this.groupsVisibility[i]&&(this._setgroupstate(r,!0,!1),l++);0<l&&(s=this.vScrollBar[0].style.visibility,this.rendergridcontent(!0,!1),s==this.vScrollBar[0].style.visibility&&!this._hiddencolumns||(this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo)))}else"group"==e&&(this.groupsVisibility=new Array)},rendergridcontent:function(e,t){if(this.updating())return!1;null!=e&&null!=e||(e=!1),this._requiresupdate=e;var i=this.prerenderrequired;this.prerenderrequired&&this._arrange();var s,r,e=this.that;return null!=(t=t)&&null!=t||(t=!0),this.tableheight=null,e.virtualsizeinfo=e.virtualsizeinfo||e._calculatevirtualheight(),e.pageable&&!e.autoheight&&e.dataview.totalrows<e.pagesize&&(e._requiresupdate=!0),t?e._rendercolumnheaders():(this._rendersortcolumn&&this._rendersortcolumn(),this._renderfiltercolumn&&this._renderfiltercolumn()),e._renderrows(e.virtualsizeinfo),this.gridcontent&&(0!=this.gridcontent[0].scrollTop&&(this.gridcontent[0].scrollTop=0),0!=this.gridcontent[0].scrollLeft&&(this.gridcontent[0].scrollLeft=0)),i&&(i=this.tableheight,this._arrange(),i!=this.tableheight&&this.autoheight&&e._renderrows(e.virtualsizeinfo)),this.rtl&&this._renderhorizontalscroll(),this.autosavestate&&null!=this.initializedcall&&this.savestate&&this.savestate(),this.adaptive&&this.element.offsetWidth<=this.adaptivewidth&&(s=0,r=e.element.offsetWidth-2,se.each(this.columns.records,function(e,t){return s+=this.width,"adaptive"===this.columntype||void(r<=s&&(this.adaptivehidden=!0))}),this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo)),!0},_updatecolumnwidths:function(){var l=this.host.width(),o=l,a="";if(null!=this.columns&&null!=this.columns.records){var i,n=this.that,r=this.rowdetails&&this.showrowdetailscolumn?(1+this.groups.length)*this.groupindentwidth:this.groups.length*this.groupindentwidth,e=this.adaptive&&this.element.offsetWidth<=this.adaptivewidth,d=0;e&&(i=1,se.each(this.columns.records,function(e,t){this.adaptivehidden&&i++}),e=0<this.vScrollBar[0].offsetWidth?this.vScrollBar[0].offsetWidth+4:0,"hidden"==this.vScrollBar.css("visibility")&&(e=0),t=this.columns.records.length-i,d=(this.element.offsetWidth-32-e)/t),se.each(this.columns.records,function(e,t){var i,s;this.hidden&&this.hideable||this.adaptivehidden||(-1!=this.width.toString().indexOf("%")||null!=this._percentagewidth?(t=0,i="hidden"==n.vScrollBar[0].style.visibility?0:n.scrollbarsize+5,!n.scrollbarautoshow&&0!=n.scrollbarsize||(i=0),s=o,t=parseFloat(this.width)*s/100,i+=r,null!=this._percentagewidth&&(t=parseFloat(this._percentagewidth)*(s-i)/100),t<this.minwidth&&"auto"!=this.minwidth&&(t=this.minwidth),t>this.maxwidth&&"auto"!=this.maxwidth&&(t=this.maxwidth),l-=t):"auto"==this.width||this._width?a+=this.text:l-=this.width)});var t=this._gettableheight();if(!this.autoheight&&this.virtualsizeinfo&&this.virtualsizeinfo.virtualheight>t)if(this.groupable&&0<this.groups.length)if(this.dataview&&this.dataview.loadedrootgroups&&!this.groupsexpandedbydefault){var s=this.dataview.loadedrootgroups.length*this.rowsheight;if(this.pageable)for(var h=0;h<this.dataview.rows.length;h++)this.dataview.rows[h].group&&0===this.dataview.rows[h].level&&(s+=this.rowsheight);(t<s||"visible"==this.vScrollBar.css("visibility"))&&(l-=this.scrollbarsize+5,o-=this.scrollbarsize+5)}else l-=this.scrollbarsize+5,o-=this.scrollbarsize+5;else"hidden"!=this.vScrollBar.css("visibility")&&0<this.scrollbarsize&&(l-=this.scrollbarsize+5,o-=this.scrollbarsize+5);var c,u,g,r=this.rowdetails&&this.showrowdetailscolumn?(1+this.groups.length)*this.groupindentwidth:this.groups.length*this.groupindentwidth;o-=r,!this.columnsheader||0!=(t=this.columnsheader.find("#columntable"+this.element.id)).length&&(u=this,g=c=0,se.each(this.columns.records,function(e,t){var i=se(this.element);this.hidden||this.adaptivehidden||"none"!==this.element.style.display||(this.element.style.display="block"),this.adaptivehidden&&(this.element.style.display="none");var s=!1,r=this.width;-1==this.width.toString().indexOf("%")&&null==this._percentagewidth||(r=null!=this._percentagewidth?parseFloat(this._percentagewidth)*o/100:parseFloat(this.width)*o/100,s=!0),0<d&&"adaptive"!==this.columntype?(i.width(d),this.adaptivewidth=d):"auto"==this.width||this._width||s?s?(r<this.minwidth&&"auto"!=this.minwidth&&(r=this.minwidth,this.width=r),r>this.maxwidth&&"auto"!=this.maxwidth&&(r=this.maxwidth,this.width=r),parseInt(i[0].style.width)!=r&&(i.width(r),this.width=r)):(r=Math.floor(l*(this.text.length/a.length)),l-(g+=r)<3&&l!=g&&.01<l-g?l-g==1?r++:r+=2:e==n.columns.records.length-1&&g<l&&(r+=l-g),isNaN(r)&&(r=this.minwidth),isNaN(r)&&(r=this.minwidth),r==1/0&&(r=0),r<0&&(e=se("<span>"+u.escape_HTML(this.text)+"</span>"),se(document.body).append(e),r=10+e.width(),e.remove()),r<this.minwidth&&(r=this.minwidth),r>this.maxwidth&&(r=this.maxwidth),this._width="auto",this.width=r,i.width(this.width)):parseInt(i[0].style.width)!=this.width&&i.width(this.width),parseInt(i[0].style.left)!=c&&i.css("left",c),this.hidden&&this.hideable||this.adaptivehidden||(0<d&&"adaptive"!==this.columntype?c+=d:c+=this.width),this._requirewidthupdate=!0}),this.columnsheader.width(2+c),t.width(this.columnsheader.width()),this.columnsheader[0].style.visibility=0==c?"hidden":"inherit",this._resizecolumngroups(),this.showfilterrow&&this.filterrow&&(this.filterrow.width(this.columnsheader.width()),this._updatefilterrowui()),this.showeverpresentrow&&(("bottom"!==this.everpresentrowposition?this.addnewrowtop:this.addnewrowbottom).width(this.columnsheader.width()),this._updateaddnewrowui()),this.autowidth&&this._arrange())}},_rendercolumnheaders:function(){var w=this.that;if(this.cardview?(0<w.cardviewcolumns.length&&se.each(this.columns.records,function(e,t){if("string"!=typeof w.cardviewcolumns[0]){for(var i=!1,s=0;s<w.cardviewcolumns.length;s++)w.cardviewcolumns[s].datafield===this.datafield&&(this.__width=this.width,this.width=w.cardviewcolumns[s].width||"",i=!0);i||(this.__hidden=this.hidden,this.hidden=!0)}else w.cardviewcolumns[e]?(this.__width=this.width,this.width=w.cardviewcolumns[e]):this.hideable&&(this.__hidden=this.hidden,this.hidden=!0)}),this._cardviewmode=!0):this._cardviewmode&&(se.each(this.columns.records,function(e,t){void 0!==this.__width&&(this.width=this.__width,delete this.__width),void 0!==this.__hidden&&(this.hidden=this.__hidden,delete this.__hidden)}),this._cardviewmode=!1),!this.prerenderrequired)return this._rendersortcolumn&&this._rendersortcolumn(),this._renderfiltercolumn&&this._renderfiltercolumn(),this.showfilterrow&&this.filterrow&&(this.filterrow.width(this.columnsheader.width()),this._updatefilterrowui()),void(this.showeverpresentrow&&(("bottom"!==this.everpresentrowposition?this.addnewrowtop:this.addnewrowbottom).width(this.columnsheader.width()),this._updateaddnewrowui()));this._columnsbydatafield=new Array,this.columnsheader.find("#columntable"+this.element.id).remove();var v=se('<div id="columntable'+this.element.id+'" style="height: 100%; position: relative;"></div>');v[0].cells=new Array;var f=0,b=0,x="",y=this.host.width(),_=y,s=new Array,r=new Array,l=this.rowdetails&&this.showrowdetailscolumn?(1+this.groups.length)*this.groupindentwidth:this.groups.length*this.groupindentwidth;if(se.each(this.columns.records,function(e,t){var i;this.hidden&&this.hideable||this.adaptivehidden||("auto"==this.width||this._width?x+=this.text:this.width<this.minwidth&&"auto"!=this.minwidth?y-=this.minwidth:this.width>this.maxwidth&&"auto"!=this.maxwidth?y-=this.maxwidth:-1!=this.width.toString().indexOf("%")?(t=0,i="hidden"==w.vScrollBar[0].style.visibility?0:w.scrollbarsize+5,i+=l,(t=parseFloat(this.width)*(_-i)/100)<this.minwidth&&"auto"!=this.minwidth&&(t=this.minwidth),t>this.maxwidth&&"auto"!=this.maxwidth&&(t=this.maxwidth),y-=t):("string"==typeof this.width&&(this.width=parseInt(this.width)),y-=this.width)),this.pinned||this.grouped||this.checkboxcolumn?(w._haspinned&&(this.pinned=!0),s[s.length]=this):r[r.length]=this}),this.rtl){var e=0;s.reverse();for(t=this.columns.records.length-1;t>=this.columns.records.length-s.length;t--)this.columns.replace(t,s[e++]);for(i=0;i<r.length;i++)this.columns.replace(i,r[i])}else{for(var t=0;t<s.length;t++)this.columns.replace(t,s[t]);for(var i=0;i<r.length;i++)this.columns.replace(s.length+i,r[i])}var q=this.headerZIndex,j=w.groupable?w.groups.length:0;this.rowdetails&&this.showrowdetailscolumn&&j++;var S=w.columnsheader.height();this.showfilterrow&&(this.columngroups?S-=this.filterrowheight:S=this.columnsheight),this.showeverpresentrow&&"bottom"!==this.everpresentrowposition&&(this.columngroups?S-=this.everpresentrowheight:S=this.columnsheight);var o=this._gettableheight();if(this.virtualsizeinfo&&this.virtualsizeinfo.virtualheight>o&&!this.scrollbarautoshow)if(this.groupable&&0<this.groups.length)if(this.dataview&&this.dataview.loadedrootgroups&&!this.groupsexpandedbydefault){var a=0;if(this.pageable){if(this.pageable)for(var n=0;n<this.dataview.rows.length;n++)this.dataview.rows[n].group&&0===this.dataview.rows[n].level&&(a+=this.rowsheight)}else a=this.dataview.loadedrootgroups.length*this.rowsheight;o<a&&(y-=this.scrollbarsize+5,_-=this.scrollbarsize+5)}else y-=this.scrollbarsize+5,_-=this.scrollbarsize+5;else!this.autoheight&&0<this.scrollbarsize&&(y-=this.scrollbarsize+5,_-=this.scrollbarsize+5);_-=l;var d,z=document.createDocumentFragment(),k=0;se.each(this.columns.records,function(e,t){this.height=w.columnsheight,w.columngroups&&w.columngroups.length&&(this.height=(this.datafield,r=this,o=w.columngroupslevel*w.columnsheight,o-=r.level*w.columnsheight),S=this.height);var i=w.toTP("jqx-grid-column-header")+" "+w.toTP("jqx-widget-header");w.rtl&&(i+=" "+w.toTP("jqx-grid-column-header-rtl"));var s=w.rtl?150+q+1:150+q-1,r=w.rtl?q++:q--,l=se('<div role="columnheader" style="z-index: '+r+';position: absolute; height: 100%;" class="'+i+'"><div style="height: 100%; width: 100%;"></div></div>');w.columngroups&&(l[0].style.height=S+"px",l[0].style.bottom="0px",this.pinned&&(l[0].style.zIndex=s)),this.uielement=l,""!=this.classname&&this.classname&&l.addClass(this.classname);var o=this.width,r=!1;null===this.width&&(this.width="auto"),-1==this.width.toString().indexOf("%")&&null==this._percentagewidth||(o=null!=this._percentagewidth?parseFloat(this._percentagewidth)*_/100:parseFloat(this.width)*_/100,r=!0),"auto"==this.width||this._width||r?r?(o<this.minwidth&&"auto"!=this.minwidth&&(o=this.minwidth),o>this.maxwidth&&"auto"!=this.maxwidth&&(o=this.maxwidth),null!=this._percentagewidth&&-1==this.width.toString().indexOf("%")||(this._percentagewidth=this.width),l.width(o),this.width=o):this.hidden||this.adaptivehidden||(h=Math.floor(y*(this.text.length/x.length)),y-(k+=h)<3&&y!=k&&.01<y-k?y-k==1?h++:h+=2:e==w.columns.records.length-1&&k<y&&(h+=y-k),isNaN(h)&&(h=this.minwidth),h<0&&(d=se("<span>"+this.text+"</span>"),se(document.body).append(d),h=10+d.width(),d.remove()),h<this.minwidth&&(h=this.minwidth),h>this.maxwidth&&(h=this.maxwidth),this._width="auto",this.width=h,o=this.width,l.width(this.width)):(o<this.minwidth&&"auto"!=this.minwidth&&(o=this.minwidth,this.width=o),o>this.maxwidth&&"auto"!=this.maxwidth&&(o=this.maxwidth,this.width=o),l[0].style.width=parseInt(o)+"px"),(this.hidden&&this.hideable||this.adaptivehidden)&&l.css("display","none");var a=se(l.children()[0]),i=w.rtl?w.toTP("jqx-grid-column-menubutton")+" "+w.toTP("jqx-grid-column-menubutton-rtl"):w.toTP("jqx-grid-column-menubutton");i+=" "+w.toTP("jqx-icon-arrow-down");s=se('<div style="height: '+S+'px; display: none; left: 100%; top: 0%; position: absolute;"><div class="'+i+'" style="width: 100%; height:100%;"></div></div>');w.enableanimations||s.css("margin-left",-16),w.rtl&&s.css("left","0px"),this.columnsmenu=s[0],v[0].cells[e]=l[0],s[0].style.width=parseInt(w.columnsmenuwidth)+"px";var n,r=w.columnsmenu,d=!1,h=!1,i=w.groupable&&0<j&&f<j||w.rowdetails&&f<j;if(w.rtl&&(i=w.groupable&&0<j&&f<j||w.rowdetails&&f<j,i&=e>w.columns.records.length-1-j),i?(f++,r&=!1,this.sortable=!1,h=!(this.editable=!1)):(null==(n=null!=this.renderer?this.renderer(this.text,this.align,S):w._rendercolumnheader(this.text,this.align,S,w))&&(n=w._rendercolumnheader(this.text,this.align,S,w)),null!=this.renderer&&(n=se(n)),r&=!0,d=!0),w.WinJS?MSApp.execUnsafeLocalFunction(function(){a.append(se(n))}):this.renderer?a.append(se(n)):n&&(a[0].innerHTML=n),null!=n&&(m=se('<div class="iconscontainer" style="height: '+S+'px; margin-left: -32px; display: block; position: absolute; left: 100%; top: 0%; width: 32px;"><div class="filtericon '+w.toTP("jqx-widget-header")+'" style="height: '+S+'px; float: right; display: none; width: 16px;"><div class="'+w.toTP("jqx-grid-column-filterbutton")+'" style="width: 100%; height:100%;"></div></div><div class="sortasc '+w.toTP("jqx-widget-header")+'" style="height: '+S+'px; float: right; display: none; width: 16px;"><div class="'+w.toTP("jqx-grid-column-sortascbutton")+" "+w.toTP("jqx-icon-arrow-up")+'" style="width: 100%; height:100%;"></div></div><div class="sortdesc '+w.toTP("jqx-widget-header")+'" style="height: '+S+'px; float: right; display: none; width: 16px;"><div class="'+w.toTP("jqx-grid-column-sortdescbutton")+" "+w.toTP("jqx-icon-arrow-down")+'" style="width: 100%; height:100%;"></div></div><div class="sorticon '+w.toTP("jqx-widget-header")+'" style="height: '+S+'px; float: right; visibility: hidden; width: 16px;"><div class="'+w.toTP("jqx-grid-column-sorticon")+" "+w.toTP("jqx-icon-arrow-down")+'" style="width: 100%; height:100%;"></div></div></div>'),s.addClass(w.toTP("jqx-widget-header")),a.append(m),i=m.children(),this.sorticon=i[3],this.sortasc=i[1],this.sortdesc=i[2],this.filtericon=i[0],this.iconscontainer=m,w.rtl&&(m.css("margin-left","0px"),m.css("left","0px"),se(this.sorticon).css("float","left"),se(this.sortasc).css("float","left"),se(this.filtericon).css("float","left"),se(this.sortdesc).css("float","left")),!w.autoshowfiltericon&&this.filterable&&se(this.filtericon).css("display","block")),this.element=l[0],r&&(w._handlecolumnsmenu(w,a,l,s,this),this.menu||s.hide()),z.appendChild(l[0]),w.groupable&&d){if(l[0].id=w.dataview.generatekey(),!w._handlecolumnstogroupsdragdrop)throw new Error("jqxGrid: Missing reference to jqxgrid.grouping.js.");w._handlecolumnstogroupsdragdrop(this,l)}w.columnsreorder&&this.draggable&&w._handlecolumnsdragreorder&&w._handlecolumnsdragreorder(this,l);var c=this;c._applyStyle(),w.addHandler(l,"mouseenter",function(e){c.hovered=!0,c._applyStyle()}),w.addHandler(l,"mouseleave",function(e){c.hovered=!1,c._applyStyle()});var u,g=function(e,t,i){if(e.selectable){var s=w.getrows();if(void 0===e.selected&&(e.selected=!1),t.shiftKey&&void 0!==w._clickedcolumn||(w._clickedcolumn=e),t.shiftKey&&w._clickedcolumn&&void 0===i){var r=w.columns.records.indexOf(w._clickedcolumn),l=w.columns.records.indexOf(e),o=Math.min(r,l),a=Math.max(r,l);w.clearselection();for(var n=o;n<=a;n++)g(w.columns.records[n],t,!0);w._renderrows(this.virtualsizeinfo)}else{i?e.selected=!0:(t.ctrlKey||w.clearselection(),e.selected=!e.selected);for(n=0;n<s.length;n++)w._applycellselection(s[n].boundindex,e.displayfield,e.selected,!1,!1);e.selected?e.element.setAttribute("selected",""):e.element.removeAttribute("selected"),e._applyStyle(),void 0===i&&(w.virtualsizeinfo=w._calculatevirtualheight(),w._renderrows(w.virtualsizeinfo))}}};if(w.addHandler(l,"click",function(e){if(c.checkboxcolumn)return!0;if(0<w.sorttogglestates&&w._togglesort&&!w._loading){if(w.suspendClick)return!0;w._togglesort(c)}g(c,e),e.preventDefault(),w._raiseEvent(7,{column:c.getcolumnproperties(),datafield:c.datafield,originalEvent:e})}),c.toggleSelection=g,c.resizable&&w.columnsresize&&!h&&(u=!1,h="mousemove",w.isTouchDevice()&&!0!==w.touchmode&&(u=!0,h=se.jqx.mobile.getTouchEventName("touchstart")),w.addHandler(l,h,function(e){var t=parseInt(e.pageX),i=5,s=parseInt(l.coord().left);if(w.hasTransform&&(s=se.jqx.utilities.getOffset(l).left),w.resizing)return!0;if(w._handlecolumnsresize){if(u){i=40;return(t=w.getTouches(e)[0].pageX)>=s+c.width-i?(w.resizablecolumn={columnelement:l,column:c},l.css("cursor","col-resize")):(l.css("cursor",""),w.resizablecolumn=null),!0}e=c.width;if(w.rtl&&(e=0),s+e-i<=t){if(t<=s+e+i)return w.resizablecolumn={columnelement:l,column:c},l.css("cursor","col-resize"),!1;l.css("cursor",""),w.resizablecolumn=null}else l.css("cursor",""),t<s+e-i&&(c._animating||c._menuvisible||l.mouseenter()),w.resizablecolumn=null}})),l.css("left",b),this.hidden&&this.hideable||this.adaptivehidden||(b+=o),c.rendered&&c.rendered(se(a[0].firstChild),c.align,S)&&null!=m&&m.hide(),c.checkboxcolumn){if(m&&m.hide(),!w.host.jqxCheckBox)throw new Error("jqxGrid: Missing reference to jqxcheckbox.js");a.html('<div style="cursor: pointer; margin-left: 3px; top: 50%; margin-top: -9px; position: relative;"></div>');var p=a.find("div:first");p.jqxCheckBox({_canFocus:!1,disabled:w.disabled,disabledContainer:!0,theme:w.theme,enableContainerClick:!1,animationShowDelay:0,animationHideDelay:0}),p.addClass(w.toThemeProperty("jqx-checkbox"));var m=(c.checkboxelement=p).data().jqxCheckBox.instance;w._checkboxcolumn=c,m.updated=function(e,t,i){w._checkboxcolumnupdating=!0,w.disabled&&(p.jqxCheckBox({disabled:w.disabled}),t=i),t?w.selectallrows():w.unselectallrows(),w._checkboxcolumnupdating=!1}}}),0<b?this.columnsheader.width(2+b):this.columnsheader.width(b),v[0].appendChild(z),this.columnsrow=v,w.columnsheader.append(v),this.showfilterrow&&this._updatefilterrow&&(this.columngroups?v.height(this.columngroupslevel*this.columnsheight):v.height(this.columnsheight),this.filterrow||((o=se("<div style='position: relative !important; '></div>"))[0].id="filterrow."+this.element.id,o.height(this.filterrowheight),this.filterrow=o),this.filterrow.width(2+b),this.columnsheader.append(this.filterrow),this._updatefilterrow()),this.showeverpresentrow&&"bottom"!==this.everpresentrowposition?(this.columngroups?v.height(this.columngroupslevel*this.columnsheight):v.height(this.columnsheight),this.addnewrowtop||((d=se("<div style='position: relative !important; z-index:"+this.headerZIndex+";'></div>"))[0].id="addnewrowtop."+this.element.id,d.height(this.everpresentrowheight),this.addnewrowtop=d),this.addnewrowtop.width(2+b),"topAboveFilterRow"==this.everpresentrowposition&&this.filterrow?this.addnewrowtop.insertBefore(this.filterrow):this.columnsheader.append(this.addnewrowtop),this._updateaddnewrow()):this.showeverpresentrow&&"bottom"===this.everpresentrowposition&&(this.addnewrowbottom||((d=se("<div style='position: relative !important; z-index:"+this.headerZIndex+";'></div>"))[0].id="addnewrowbottom."+this.element.id,d.height(this.everpresentrowheight),this.addnewrowbottom=d),this.addnewrowbottom.width(2+b),this.addnewrow.append(this.addnewrowbottom),this._updateaddnewrow()),v[0].style.visibility=0==b?"hidden":"inherit",v.width(b),this._handlecolumnsdragdrop&&this._handlecolumnsdragdrop(),this._handlecolumnsreorder&&this._handlecolumnsreorder(),this._rendersortcolumn&&this._rendersortcolumn(),this._renderfiltercolumn&&this._renderfiltercolumn(),this._handlecolumnsresize&&this._handlecolumnsresize(),this.columngroups&&this._rendercolumngroups(),this._updatecheckboxselection&&this._updatecheckboxselection()},_rendercolumngroups:function(){if(this.columngroups){for(var e=0,t=0;t<this.columns.records.length;t++)this.columns.records[t].pinned&&e++;var i=this.headerZIndex-e+this.columns.records.length,s=this.that,r=s.toTP("jqx-grid-column-header")+" "+s.toTP("jqx-grid-columngroup-header")+" "+s.toTP("jqx-widget-header");s.rtl&&(r+=" "+s.toTP("jqx-grid-columngroup-header-rtl"));var l=this.columnsheader.find("#columntable"+this.element.id);l.find("jqx-grid-columngroup-header").remove();for(var o=0;o<this.columngroupslevel-1;o++)for(t=0;t<this.columngroups.length;t++){var a,n,d,h,c,u,g=this.columngroups[t],p=g.level;p===o&&(a=p*this.columnsheight,n=99999,g.groups&&(d=function(e){for(var t=0,i=0;i<e.groups.length;i++){var s=e.groups[i];s.groups?t+=d(s):s.hidden||(t+=s.width,n=Math.min(parseFloat(s.element.style.left),n))}return t},g.width=d(g),g.left=n,h=this.columnsheight,u=i--,c=se('<div role="columnheader" style="z-index: '+u+';position: absolute;" class="'+r+'"></div>'),p=se(this._rendercolumnheader(g.text,g.align,this.columnsheight,this)),g.renderer&&(p=se("<div style='height: 100%; width: 100%;'></div>"),u=g.renderer(g.text,g.align,h),p.html(u)),c.append(p),c[0].style.left=n+"px",0===n&&(c[0].style.borderLeftColor="transparent"),this.showcolumnheaderlines||(c[0].style.borderRightColor="transparent",c[0].style.borderBottomColor="transparent",c[0].style.boxShadow="none"),c[0].style.top=a+"px",c[0].style.height=h+"px",c[0].style.width=-1+g.width+"px",l.append(c),g.element=c,g.rendered&&g.rendered(p,g.align,h)))}}},_resizecolumngroups:function(){if(this.columngroups)for(var e=0;e<this.columngroups.length;e++){var r,t,i,s=this.columngroups[e],l=s.level*this.columnsheight,o=99999;s.groups&&(r=function(e){for(var t=0,i=0;i<e.groups.length;i++){var s=e.groups[i];s.groups?t+=r(s):s.hidden||(t+=s.width,o=Math.min(parseFloat(s.element.style.left),o))}return t},s.width=r(s),s.left=o,t=this.columnsheight,(i=s.element)[0].style.left=o+"px",i[0].style.top=l+"px",i[0].style.height=t+"px",i[0].style.width=-1+s.width+"px")}},_handlecolumnsmenu:function(u,e,r,g,p){u.dragmousedown=null,g[0].id=u.dataview.generatekey(),e.append(g),r[0].columnsmenu=g[0],p.element=r[0];var l=this.columnsmenuwidth+1,e="mouseenter";u.isTouchDevice()&&(e="touchstart"),u.addHandler(r,e,function(e){var t=parseInt(e.pageX),i=u.columnsresize&&p.resizable?3:0,s=parseInt(r.coord().left);u.hasTransform&&(s=se.jqx.utilities.getOffset(r).left);e=p.width;if(u.rtl&&(e=0),0!=i&&s+e-i<=t&&t<=s+e+i)return!1;i=u.vScrollInstance.isScrolling();p.menu&&u.autoshowcolumnsmenubutton&&!i&&!u.disabled&&function(){if(!p.menu)return;if(!u.resizing){if(p._menuvisible&&u._hasOpenedMenu)return;var e;p._animating=!0,u.menuitemsarray&&0<u.menuitemsarray.length&&(u.enableanimations?(g.css("display","block"),g.stop(),p.iconscontainer.stop(),u.rtl?(g.css("margin-left",-l),g.animate({"margin-left":"0px"},"fast",function(){g.css("display","block"),p._animating=!1,p._menuvisible=!0})):(g.css("margin-left","0px"),g.animate({"margin-left":-l},"fast",function(){g.css("display","block"),p._animating=!1,p._menuvisible=!0})),e=u.rtl?l:-(32+l),p.iconscontainer.animate({"margin-left":e},"fast")):(g.css("display","block"),e=u.rtl?16:-48,p.iconscontainer.css("margin-left",e+"px"),p._animating=!1,p._menuvisible=!0))}}()}),u.autoshowcolumnsmenubutton||(g.css("display","block"),t=u.rtl?16:-48,p.iconscontainer.css("margin-left",t+"px"),u.rtl?g.css({"margin-left":"0px"}):g.css({"margin-left":-l})),u.addHandler(r,"mouseleave",function(e){var t,i;u.menuitemsarray&&0<u.menuitemsarray.length&&p.menu&&(null!=(t=se.data(document.body,"contextmenu"+u.element.id))&&g[0].id==t.columnsmenu.id||u.autoshowcolumnsmenubutton&&(u.enableanimations?(u.rtl?g.css("margin-left","0px"):g.css("margin-left",-l),g.stop(),p.iconscontainer.stop(),u.rtl?g.animate({"margin-left":-l},"fast",function(){g.css("display","none"),p._menuvisible=!1}):g.animate({"margin-left":0},"fast",function(){g.css("display","none"),p._menuvisible=!1}),i=u.rtl?0:-32,p.iconscontainer.animate({"margin-left":i},"fast")):(g.css("display","none"),i=u.rtl?0:-32,p.iconscontainer.css("margin-left",i+"px"),p._menuvisible=!1)))});var m=!0,w="",t=se(p.filtericon);u.addHandler(g,"mousedown",function(e){u.gridmenu||u._initmenu(),m=!se.data(u.gridmenu[0],"contextMenuOpened"+u.gridmenu[0].id),null!=(w=se.data(document.body,"contextmenu"+u.element.id))&&(w=w.column.datafield)}),u.addHandler(t,"mousedown",function(e){u.gridmenu||u._initmenu(),m=!se.data(u.gridmenu[0],"contextMenuOpened"+u.gridmenu[0].id),null!=(w=se.data(document.body,"contextmenu"+u.element.id))&&(w=w.column.datafield)});function i(){if(p.menu&&(u.gridmenu||u._initmenu(),!u.disabled)){for(var e=0;e<u.columns.records.length;e++)u.columns.records[e].datafield!=p.datafield&&(u.columns.records[e]._menuvisible=!1);var t=g.coord(!0),i=g.height();if(!m&&(m=!0,w==p.datafield))return u._closemenu(),0;var s=u.host.coord(!0);if(u.hasTransform&&(s=se.jqx.utilities.getOffset(u.host),t=se.jqx.utilities.getOffset(g)),s.left+u.host.width()>parseInt(t.left)+u.gridmenu.width()?u.gridmenu.jqxMenu("open",t.left,t.top+i):u.gridmenu.jqxMenu("open",g.width()+t.left-u.gridmenu.width(),t.top+i),u.gridmenu.width()<100&&u._arrangemenu(),u.adaptive&&u.element.offsetWidth<u.adaptivewidth){u.gridmenu.jqxMenu("close"),u.gridmenu.jqxMenu("open",s.left,t.top+i);for(var r=0,e=0;e<u.columns.records.length;e++){var l=u.columns.records[e];l.hidden||l.adaptivehidden||"adaptive"===l.columntype||(r+=l.adaptivewidth)}u.gridmenu.width(r),u.gridmenu.height(u.content.height())}(!u.filterable||u.filterable&&u.showfilterrow)&&setTimeout(function(){u.gridmenu.focus();for(var e=u.gridmenu.find(".jqx-item"),t=0;t<e.length;t++)e[t].active&&(e[t].active=!1);var i=e[0];0<=e[0].className.indexOf("disabled")&&(i=e[1]),se(e).removeClass("jqx-fill-state-focus"),se(i).addClass("jqx-fill-state-focus"),i.active=!0},225),u._hasOpenedMenu=!0;var o=u._getmenuitembyindex(0),a=u._getmenuitembyindex(1),n=u._getmenuitembyindex(2),d=u._getmenuitembyindex(3),h=u._getmenuitembyindex(4),c=u._getmenuitembyindex(5);null!=o&&null!=a&&null!=n&&(s=p.sortable&&u.sortable,u.gridmenu.jqxMenu("disable",o.id,!s),u.gridmenu.jqxMenu("disable",a.id,!s),u.gridmenu.jqxMenu("disable",n.id,!s),null!=p.displayfield&&(i=(t=u.getsortinformation())&&t.sortcolumns&&t.sortcolumns.find(function(e){return e.dataField===p.displayfield}),u.sortcolumn==p.displayfield||i?(t=u.getsortinformation(),s&&(t.sortdirection.ascending?u.gridmenu.jqxMenu("disable",o.id,!0):u.gridmenu.jqxMenu("disable",a.id,!0))):u.gridmenu.jqxMenu("disable",n.id,!0))),null!=d&&null!=h&&(u.groupable&&p.groupable?u.groups&&-1!=u.groups.indexOf(p.datafield)?(u.gridmenu.jqxMenu("disable",d.id,!0),u.gridmenu.jqxMenu("disable",h.id,!1)):(u.gridmenu.jqxMenu("disable",d.id,!1),u.gridmenu.jqxMenu("disable",h.id,!0)):(u.gridmenu.jqxMenu("disable",h.id,!0),u.gridmenu.jqxMenu("disable",d.id,!0))),null!=c&&(u.menuOwner=p,u._updatefilterpanel(u,c,p),h=0,u.sortable&&u._togglesort&&u.showsortmenuitems&&(h+=3),u.groupable&&u.addgroup&&u.showgroupmenuitems&&(h+=2),d=36*h+6,d=h*u._measureMenuElement()+20,se.jqx.browser.msie&&se.jqx.browser.version<8&&(d+=20,se(c).height(220)),u.isTouchDevice()&&(d+=10),u.filterable&&u.showfiltermenuitems&&(p.filterable?(u.gridmenu.height(d+230),se(c).css("display","block")):(u.gridmenu.height(d),se(c).css("display","none")))),u.columnmenuopening&&!1===u.columnmenuopening(u.gridmenu,p.displayfield,u.gridmenu.height())&&setTimeout(function(){u._closemenu()}),se.data(document.body,"contextmenu"+u.element.id,{column:p,columnsmenu:g[0]})}}u.addHandler(t,"click",function(e){return p.menu&&(u.showfilterrow||("block"!=g[0].style.display&&r.trigger("mouseenter"),setTimeout(function(){"block"!=g[0].style.display&&r.trigger("mouseenter"),i()},200))),!1}),u.addHandler(g,"click",function(e){return p.menu&&i(),!1}),u.isTouchDevice()&&u.addHandler(g,se.jqx.mobile.getTouchEventName("touchstart"),function(e){return p.menu&&(u._hasOpenedMenu?u._closemenu():i()),!1})},_removecolumnhandlers:function(e){var t=this.that,i=se(e.element);0<i.length&&(t.removeHandler(i,"mouseenter"),t.removeHandler(i,"mouseleave"),e=se(e.filtericon),t.removeHandler(e,"mousedown"),t.removeHandler(e,"click"),t.removeHandler(i,"click"),t.removeHandler(i,"mousemove"),t.columnsreorder&&(t.removeHandler(i,"mousedown.drag"),t.removeHandler(i,"mousemove.drag")),t.removeHandler(i,"dragstart"),i[0].columnsmenu&&(i=se(i[0].columnsmenu),t.removeHandler(i,"click"),t.removeHandler(i,"mousedown"),t.removeHandler(i,se.jqx.mobile.getTouchEventName("touchstart"))))},_rendercolumnheader:function(e,t,i,s){return s.columngroups?(i/2-this._columnheight/2<0&&0,0):32!=this.columnsheight&&(this.columnsheight/2-this._columnheight/2<0&&0,0),this.enableellipsis?"left"==t?'<div style="padding-bottom: 2px; overflow: hidden; text-overflow: ellipsis; text-align: '+t+"; margin-left: 4px; margin-right: 2px; line-height: "+i+'px;"><span style="text-overflow: ellipsis; cursor: default;">'+e+"</span></div>":'<div style="padding-bottom: 2px; overflow: hidden; text-overflow: ellipsis; text-align: '+t+"; margin-left: 2px; margin-right: 4px; line-height: "+i+'px;"><span style="text-overflow: ellipsis; cursor: default;">'+e+"</span></div>":"center"==t||"middle"==t?'<div style="padding-bottom: 2px; text-align: center; line-height: '+i+'px;"><a href="#">'+e+"</a></div>":'<a style="line-height: '+i+"px; float: "+t+';" href="#">'+e+"</a>"},_renderrows:function(e,s,t){var l=this.that;(this.pageable||this.groupable)&&(this.autoheight||this.autorowheight)&&null!=this.table&&null!=this.table[0].rows&&this.table[0].rows.length<this.dataview.rows.length&&(l.prerenderrequired=!0),this.pageable||!this.autoheight&&!this.autorowheight||!this.virtualmode&&!this.unboundmode||(o=this.source.totalrecords,isNaN(o)||null!=this.table&&null!=this.table[0].rows&&this.table[0].rows.length!=o&&(l.prerenderrequired=!0)),!this.autoheight&&!this.autorowheight||l.prerenderrequired||this.table&&this.table[0].rows&&(this.table[0].rows.length<this.dataview.records.length&&(!(this.pageable&&this.table[0].rows.length<this.dataview.pagesize)&&this.pageable||(l.prerenderrequired=!0)),this.table[0].rows.length<this.dataview.cachedrecords.length&&(!(this.pageable&&this.table[0].rows.length<this.dataview.pagesize)&&this.pageable||(l.prerenderrequired=!0))),l._prerenderrows(e),l._requiresupdate&&(l._requiresupdate=!1,l._updatepageviews());function i(){l._loading||(l.WinJS?MSApp.execUnsafeLocalFunction(function(){l._rendervisualrows()}):l._rendervisualrows(),l.virtualmode&&l.showaggregates&&l._updateaggregates&&l.refreshaggregates())}var r,o=se.jqx.browser.msie&&se.jqx.browser.version<10;if(this.virtualmode){this.loadondemand&&(i(),function(){if(l.rendergridrows){var e=l._startboundindex;null==e&&(e=0);var t=e+1+l.dataview.pagesize;if(null!=e&&null!=t){var i=!!l.source._source;if((i?l.source._source:l.source).recordstartindex!=e||1==s){if(i){if(t>=l.source._source.totalrecords&&((e=(t=l.source._source.totalrecords)-l.dataview.pagesize-1)<0&&(e=0),l.source._source.recordendindex==t&&l.source._source.recordstartindex==e))return;l.source._source.recordstartindex=e,l.source._source.recordendindex=t}else l.source.recordstartindex=e,l.source.recordendindex=t;l.updatebounddata("cells")}}}}(),this.loadondemand=!1);var a=null==this._browser?this._isIE10():this._browser;(!this.editable||!this.editcell||this.vScrollInstance.isScrolling()||this.hScrollInstance.isScrolling())&&!this.autoheight&&(a||o||navigator&&-1!=navigator.userAgent.indexOf("Safari"))?(null!=this._scrolltimer&&clearTimeout(this._scrolltimer),this._scrolltimer=setTimeout(function(){i()},5)):i()}else{if("deferred"==this.scrollmode&&(this.hScrollInstance.isScrolling()||this.vScrollInstance.isScrolling())){null!=this._scrolltimer&&clearInterval(this._scrolltimer);var n=this._getfirstvisualrow();return null!=n&&((e=this.scrollfeedback?this.scrollfeedback(n.bounddata):function(){if(null==n)return"";var e="<table>",t=l.deferreddatafields;null==t&&0<l.columns.records.length&&(t=new Array).push(l.columns.records[0].displayfield);for(var i=0;i<t.length;i++){var s=t[i],r=l._getcolumnbydatafield(s);r&&(s=l._getcellvalue(r,n),""!=r.cellsformat&&se.jqx.dataFormat&&(se.jqx.dataFormat.isDate(s)?s=se.jqx.dataFormat.formatdate(s,r.cellsformat,l.gridlocalization):se.jqx.dataFormat.isNumber(s)&&(s=se.jqx.dataFormat.formatnumber(s,r.cellsformat,l.gridlocalization))),e+="<tr><td>"+s+"</td></tr>")}return e+="</table>"}(n.bounddata))!=this._scrollelementcontent&&(this._scrollelement[0].innerHTML=e,this._scrollelementcontent=e)),this._scrollelement.css("visibility","visible"),this._scrollelementoverlay.css("visibility","visible"),this._scrollelement.css("margin-top",-this._scrollelement.height()/2),void(this._scrolltimer=setInterval(function(){l.hScrollInstance.isScrolling()||l.vScrollInstance.isScrolling()||(i(),l._scrollelement.css("visibility","hidden"),l._scrollelementoverlay.css("visibility","hidden"),clearInterval(l._scrolltimer),n&&l.ensurerowvisible(n.visibleindex))},100))}if(navigator&&-1==navigator.userAgent.indexOf("Chrome")&&-1!=navigator.userAgent.indexOf("Safari")&&(this._updatedelay=1),null!=this.touchDevice&&1==this.touchDevice&&(this._updatedelay=5),((a=null==this._browser?this._isIE10():this._browser)||o)&&(this._updatedelay=5),a&&this.hScrollInstance.isScrolling())return void i();se.jqx.browser.mozilla&&0==this._updatedelay&&(this.vScrollInstance.isScrolling()||this.hScrollInstance.isScrolling())&&(this._updatedelay=0),this.isTouchDevice()&&(this._updatedelay=0),null!=this.updatedelay&&(this._updatedelay=this.updatedelay),0==this._updatedelay?i():(null!=(r=this._jqxgridrendertimer)&&clearTimeout(r),this.vScrollInstance.isScrolling()||this.hScrollInstance.isScrolling()?(this._updatedelay?r=setTimeout(function(){i()},this._updatedelay):(r=null,i()),this._jqxgridrendertimer=r):(this._jqxgridrendertimer=r,i()))}l.autorowheight&&!l.autoheight&&0<this._pageviews.length&&((o=this._gettableheight())<(a=this._pageviews[0].height)?(this.pageable&&this.gotopage&&(a=this._pageviews[0].height)<0&&(a=this._pageviews[0].height),"visible"!=this.vScrollBar.css("visibility")&&this.vScrollBar.css("visibility","visible"),(a<=o||this.autoheight)&&this.vScrollBar.css("visibility","hidden"),0<a-o?"deferred"!=this.scrollmode&&(r=a-o,o=this.vScrollInstance.max,this.vScrollBar.jqxScrollBar({max:r}),Math.round(r)!=Math.round(o)&&r<this.vScrollBar.jqxScrollBar("value")&&this.vScrollBar.jqxScrollBar({value:0})):this.vScrollBar.jqxScrollBar({value:0,max:a})):(this._loading||this.vScrollBar.css("visibility","hidden"),this.vScrollBar.jqxScrollBar({value:0})),this._arrange(),this.virtualsizeinfo&&(this.virtualsizeinfo.virtualheight=a))},scrolling:function(){return{vertical:this.vScrollInstance.isScrolling(),horizontal:this.hScrollInstance.isScrolling()}},_renderhorizontalscroll:function(){var e=this.hScrollInstance,t=e.value;"hidden"===this.hScrollBar.css("visibility")&&(t=e.value=0);var i=parseInt(t);if(null!=this.table){var s=this.table[0].rows.length,r=this.columnsrow,l=this.groupable&&0<this.groups.length?this.groups.length:0,o=this.columns.records.length-l,a=this.columns.records,n=0==this.dataview.rows.length;if(this.rtl&&"hidden"!=this.hScrollBar.css("visibility")&&(i=e.max-i),n&&!this._haspinned){for(var d=0;d<s;d++)for(var h=this.table[0].rows[d],c=0;c<l+o;c++)null!=(u=h.cells[c])&&a[c].pinned&&(u.style.marginLeft=i+"px",0==d&&(r[0].cells[c].style.marginLeft=i+"px"));this.table[0].style.marginLeft=-i+"px",r[0].style.marginLeft=-i+"px"}else if(this._haspinned||null==this._haspinned){for(d=0;d<s;d++)for(var u,g,p,m,h=this.table[0].rows[d],c=0;c<l+o;c++)null!=(u=h.cells[c])&&a[c].pinned&&(0==i&&""==u.style.marginLeft||(m=p=g=null,this.showeverpresentrow&&this.addnewrowtop&&this.addnewrowtop[0].cells&&(m=this.addnewrowtop[0].cells[c]),this.showfilterrow&&this.filterrow&&this.filterrow[0].cells&&(p=this.filterrow[0].cells[c]),this.showaggregates&&this.statusbar[0].cells&&(g=this.statusbar[0].cells[c]),this.rtl?(u.style.marginLeft=-parseInt(t)+"px",0==d&&(r[0].cells[c].style.marginLeft=-parseInt(t)+"px",g&&(g.style.marginLeft=-parseInt(t)+"px"),p&&(p.style.marginLeft=-parseInt(t)+"px"),m&&(m.style.marginLeft=-parseInt(t)+"px"))):(u.style.marginLeft=i+"px",0==d&&(r[0].cells[c].style.marginLeft=i+"px",g&&(g.style.marginLeft=i+"px"),p&&(p.style.marginLeft=i+"px"),m&&(m.style.marginLeft=i+"px")))));this.table[0].style.marginLeft=-i+"px",r[0].style.marginLeft=-i+"px"}else 0==this._haspinned&&(this.table[0].style.marginLeft=-i+"px",r[0].style.marginLeft=-i+"px");this.showaggregates&&this.statusbar[0].cells&&(n=0,this.rtl&&"hidden"!=this.vScrollBar.css("visibility")&&"hidden"!=this.hScrollBar.css("visibility")&&(n=2+parseInt(this.hScrollBar.css("left"))),this.statusbar[0].style.marginLeft=-i+n+"px"),this.showfilterrow&&this.filterrow&&this.filterrow[0].cells&&(this.filterrow[0].style.marginLeft=-i+"px"),this.showeverpresentrow&&this.addnewrowtop&&this.addnewrowtop[0].cells&&(this.addnewrowtop[0].style.marginLeft=-i+"px")}},_updaterowdetailsvisibility:function(){if(this.rowdetails)for(var e=0;e<this._rowdetailselementscache.length;e++)se(this._rowdetailselementscache[e]).css("display","none")},_getvisualcolumnsindexes:function(e,t,i,s,r,l,o){var a=this.vScrollInstance.isScrolling()||this.hScrollInstance.isScrolling()||this._keydown;if((this.rowdetails||this.rtl||this.editcell&&a||this.width&&0<=this.width.toString().indexOf("%")&&!a&&!this.editcell||this.exporting)&&!o)return{start:0,end:i+s};var n=0,d=-1,h=i+s,c=!1;if(this.autorowheight)return{start:0,end:i+s};if(!r)for(var u=0;u<i+s;u++)if(c||this.columns.records[u].pinned&&l&&(c=!0),this.columns.records[u].hidden||this.columns.records[u].adaptivehidden||(n+=this.columns.records[u].width),e<=n&&-1==d&&(d=u),t+e<n){h=u;break}return i+s<++h&&(h=i+s),-1!=d&&!c||(d=0),{start:d,end:h}},_getvirtualcolumnsindexes:function(e,t,i,s,r){var l=this.vScrollInstance.isScrolling()||this.hScrollInstance.isScrolling()||this._keydown;if(this.enableoptimization&&(this.rowdetails||this.rtl||this.editcell&&l||this.width&&0<=this.width.toString().indexOf("%")&&!l&&!this.editcell||this.exporting))return{start:0,end:i+s};if(this.rtl||this.editcell||this.exporting)return{start:0,end:i+s};var o=0,a=-1,n=i+s;if(this.autorowheight)return{start:0,end:i+s};if(!r)for(var d=0;d<i+s;d++)if(this.columns.records[d].hidden||this.columns.records[d].adaptivehidden||(o+=this.columns.records[d].width),e<=o&&-1==a&&(a=d),t+e<o){n=d;break}return i+s<++n&&(n=i+s),-1==a&&(a=0),{start:a,end:n}},_getfirstvisualrow:function(){var e=this.vScrollInstance.value,e=parseInt(e);if(0==this._pagescache.length&&(this.dataview.updateview(),this._loadrows()),"visible"!=this.vScrollBar[0].style.visibility&&(e=0),!this.pageable){var t=this._findvisiblerow(e,this._pageviews);if(-1==t)return null;t!=this.dataview.pagenum?(this.dataview.pagenum=t,this.dataview.updateview(),this._loadrows()):this._pagescache[this.dataview.pagenum]||this._loadrows()}t=this._findvisiblerow(e,this._pagescache[this.dataview.pagenum]),e=this._pagescache[this.dataview.pagenum];if(e&&e[0])return e[t]},_rendervisualrows:function(){if(this.virtualsizeinfo){var e=this.vScrollInstance,t=this.hScrollInstance,i=e.value,s=t.value,r=parseInt(i),l=parseInt(s),o=this._gettableheight(),a=null!=this._hostwidth?this._hostwidth:this.host.width();"visible"==this.hScrollBar[0].style.visibility&&(o+=29),"deferred"==this.scrollmode&&0!=this._newmax&&r>this._newmax&&null!=this._newmax&&(r=this._newmax);var n=e.isScrolling()||t.isScrolling()||this._keydown,d=this.groupable&&0<this.groups.length;this.visiblerows=new Array,this.hittestinfo=new Array,this.editcell&&null==this.editrow&&this._hidecelleditor(!1),null!=this.editrow&&this._hideeditors(),this.virtualmode&&!this.pageable&&(this._pagescache=new Array),0==this._pagescache.length&&(this.dataview.updateview(),this._loadrows()),"hidden"==this.vScrollBar[0].style.visibility&&(r=0),this.pageable||(-1==(q=this._findvisiblerow(r,this._pageviews))&&(this._clearvisualrows(),this._renderemptyrow(),this._updaterowdetailsvisibility()),q!=this.dataview.pagenum?(this.dataview.pagenum=q,this.dataview.updateview(),this._loadrows()):this._pagescache[this.dataview.pagenum]||this._loadrows());var h=this.groupable&&0<this.groups.length?this.groups.length:0;if(this.columns.records){var c=this.columns.records.length-h,t=this._findvisiblerow(r,this._pagescache[this.dataview.pagenum]),u=this._pagescache[this.dataview.pagenum],g=t;g<0&&(g=0);var p=0,m=0,w=0,v=0,f=this.virtualsizeinfo.visiblerecords,b=this.groupable?this.groups.length:0,x=this.toTP("jqx-grid-cell")+" "+this.toTP("jqx-item");this.rtl&&(x+=" "+this.toTP("jqx-grid-cell-rtl")),(this.autoheight||this.autorowheight)&&this.pageable&&(!this.groupable||this.groupable&&0===this.groups.length)&&(f=this.dataview.pagesize),d&&(x=" "+this.toTP("jqx-grid-group-cell")),this.isTouchDevice()&&(x+=" "+this.toTP("jqx-touch")),this.autorowheight&&(x+=" jqx-grid-cell-wrap");var y=this.rowsheight;this.cardview&&(y=this.cardheight);var _=this._rendercell,q=this._getvisualcolumnsindexes(l,a,h,c,d,!0),j=q.start,S=q.end,t=this._getvirtualcolumnsindexes(l,a,h,c,d),z=t.start,k=t.end;se.jqx.browser.msie&&se.jqx.browser.version;if((this.autoheight||this.pageable)&&this.autorowheight&&this._pageviews[0]&&(this._oldpageviewheight=this._pageviews[0].height),this.autorowheight&&(g=0),0<=g){this._updaterowdetailsvisibility(),this._startboundindex=null!=u?u[g].bounddata.boundindex:0,this._startvisibleindex=null!=u?u[g].bounddata.visibleindex:0;var C=this.table[0].rows;if(10<this.columns.records.length&&this.enablecolumnsvirtualization){function T(e){return!(!e||!e.parentNode||"#document-fragment"==e.parentNode.nodeName)}for(var I=0;I<C.length;I++){for(var B=C[I],P=0;P<z;P++){var H=P;this.columns.records[H].pinned||null!=this.columns.records[H].datafield&&(T(Z=B.cells[H])&&Z.parentNode.removeChild(Z),M=this.columns.records[H].element,this.columns.records[H]._rendered=!1,T(M)&&this.columnsrow[0].removeChild(M),this.filterrow&&T(this.filterrow[0].cells[H])&&this.columns.records[H].filterable&&this.filterrow[0].cells[H].parentNode.removeChild(this.filterrow[0].cells[H]))}for(P=k;P<this.columns.records.length;P++){H=P;this.columns.records[H].pinned||null!=this.columns.records[H].datafield&&(T(Z=B.cells[H])&&Z.parentNode.removeChild(Z),M=this.columns.records[H].element,this.columns.records[H]._rendered=!1,T(M)&&this.columnsrow[0].removeChild(M),this.filterrow&&T(this.filterrow[0].cells[H])&&this.columns.records[H].filterable&&this.filterrow[0].cells[H].parentNode.removeChild(this.filterrow[0].cells[H]))}for(P=z;P<k;P++){H=P;T(Z=B.cells[H])||B.appendChild(Z);var M=this.columns.records[H].element;this.columns.records[H]._rendered=!0,M.selectable&&(Z.removeAttribute("selected"),M.selected&&Z.setAttribute("selected","")),T(M)||this.columnsrow[0].appendChild(M),this.filterrow&&this.showfilterrow&&!T(this.filterrow[0].cells[H])&&this.columns.records[H].filterable&&this.filterrow[0].firstChild.appendChild(this.filterrow[0].cells[H])}}}for(var A=0;A<f&&m<f;A+=1){var D,E,O=null!=u?u[g+A]:null;if(this.virtualmode&&A>=this.source.totalrecords&&(O=null),null==O){if(g=-A,this._pagescache[this.dataview.pagenum+1])u=this._pagescache[this.dataview.pagenum+1],this.dataview.pagenum++;else{var N=this._pageviews.length;do{if(!(this.dataview.pagenum<this._pageviews.length-1)){u=void 0;break}}while(this.dataview.pagenum++,u=void 0,0<this._pageviews[this.dataview.pagenum].height&&(this.dataview.updateview(),this._loadrows(),u=this._pagescache[this.dataview.pagenum]),null==u&&this.dataview.pagenum<N)}null!=u&&(O=u[g+A])}if(null!=O){if(O.hidden)continue;if(this._endboundindex=this._startboundindex+A,this._endvisibleindex=this._startvisibleindex+A,0==A&&(D=Math.abs(r-O.top),this.table[0].style.top=-D+"px",E=this.table,se.jqx.browser.chrome&&(this._chromeTimer&&clearTimeout(this._chromeTimer),this._chromeTimer=setTimeout(function(){E[0].style.top=.01-D+"px"},50)),v=-D),!(B=this.table[0].rows[m]))continue;parseInt(B.style.height)!=O.height&&(B.style.height=parseInt(O.height)+"px"),w+=O.height;var L=this.rowdetails&&O.rowdetails,F=!O.rowdetailshidden;L&&F&&(B.style.height=parseInt(O.height-O.rowdetailsheight)+"px",f++);for(var R=this._isrowselected(!0,O),P=j;P<S;P++){H=P;this._rendervisualcell(_,x,R,L,F,d,b,B,O,H,m,n)}if(null!=O.group&&this._rendergroup&&this._rendergroup(b,B,O,h,c,m,a),this.autorowheight&&(this.autoheight||this.pageable)){for(y=this.rowsheight,P=j;P<S;P++)this.editable&&this.editcell&&this.editcell.column==this.columns.records[P].datafield&&this.editcell.row==this.getboundindex(O)&&this.editcell.editor?y=Math.max(y,this.editcell.editor.height()):B.cells[P].firstChild&&(y=Math.max(y,8+parseInt(B.cells[P].firstChild.offsetHeight)));B.style.height=parseInt(y)+"px",this.heights[this._startboundindex+A]=y,L&&F&&(y+=O.rowdetailsheight),O.height=y}if(this.cardview){var W='<div class="jqx-grid-card-row"',V=B.innerHTML="";W+='style="grid-template-columns: ';for(var G=100/this.cardsize+"%",K=0;K<this.cardsize;K++)if(null!=u&&(O=u[g+A*this.cardsize+K]),O){W+=G+" ";var U='<div id="'+O.bounddata.uid+'" class="jqx-grid-card-cell">';U+="<table>";for(P=j;P<S;P++){var Y,Z,X,H=P,J=null;(te=this.columns.records[H]).hidden&&void 0===te.__hidden||(Y=this._getcellvalue(te,O),""!=te.cellsformat&&se.jqx.dataFormat&&(se.jqx.dataFormat.isDate(Y)?Y=se.jqx.dataFormat.formatdate(Y,te.cellsformat,this.gridlocalization):se.jqx.dataFormat.isNumber(Y)&&(Y=se.jqx.dataFormat.formatnumber(Y,te.cellsformat,this.gridlocalization))),Z=B.cells[H],X=this.editable&&te.editable?'<span row="'+O.bounddata.uid+'"  class="jqx-icon-edit"></span>':"",U+='<tr class="jqx-grid-card-table-row">',U+='<td class="jqx-grid-card-cell-label"><div>'+te.text+"</div></td>",U+='<td class="jqx-grid-card-cell-value"><div>'+Y+"</div></td>",U+="</tr>")}U+="</table>",U+=X,V+=U+="</div>"}W+=';">'+V+"</div>",B.innerHTML+=W,m++;continue}if(this.visiblerows[this.visiblerows.length]=O,this.hittestinfo[this.hittestinfo.length]={row:O,visualrow:B,details:!1},L&&F&&(m++,B=this.table[0].rows[m],this._renderrowdetails(x,B,O,h,c,m),this.visiblerows[this.visiblerows.length]=O,this.hittestinfo[this.hittestinfo.length]={row:O,visualrow:B,details:!0}),!this.autorowheight&&o<=w+v)break}else this._clearvisualrow(l,d,m,h,c),w+p+v<=o&&(p+=y);m++}this._horizontalvalue=l,0<p&&"visible"==this.vScrollBar[0].style.visibility&&(parseInt(this.table.css("top")),q=this._pageviews[this._pageviews.length-1],t=e.max,q=q.top+q.height-o,"visible"==this.hScrollBar.css("visibility")&&(q+=this.scrollbarsize+22),t==q||this.autorowheight||0<=q&&("deferred"!=this.scrollmode?(e.max=q,e.setPosition(e.max)):this._newmax!=q&&(this._newmax=q,this._rendervisualrows())))}if((this.autoheight||this.pageable)&&this.autorowheight){this._pagescache=new Array;for(var $=0,Q=0,I=0;I<this.visiblerows.length;I++){var ee=this.visiblerows[I];ee.top=$,$+=ee.height,Q+=ee.height;L=this.rowdetails&&ee.rowdetails,F=!ee.rowdetailshidden,B=this.table[0].rows[I];L&&F&&I++;for(var te,ie,P=j;P<S;P++)(te=this.columns.records[P]).hidden||te.adaptivehidden||te.cellsrenderer||(ie=0,(J=B.cells[P]).firstChild?(ie=(ee.height-parseInt(J.firstChild.offsetHeight)-8)/2,L&&F&&(ie=(ee.height-ee.rowdetailsheight-se(J.firstChild).height()-8)/2)):ie=(ee.height-parseInt(se(J).height())-8)/2,0<=ie&&(ie=parseInt(ie)+4,J.firstChild&&-1==J.firstChild.className.indexOf("jqx-grid-groups-row")&&"checkbox"!=te.columntype&&"button"!=te.columntype&&(this.editable&&this.editcell&&this.editcell.column==te.datafield&&this.editcell.row==this.getboundindex(ee)||(J.firstChild.style.marginTop=ie+"px"))))}this._pageviews[0]&&(this._pageviews[0].height=Q),this._arrange()}this._renderemptyrow(),this.toCompile&&0<this.toCompile.length&&se.each(this.toCompile,function(e,t){if(this.compiled)return!0;var i=this.cell;if(!i)return!0;se.jqx.angularCompile&&se.jqx.angularCompile(i,"<div>"+this.value+"</div>"),this.compiled=!0})}}},_hideemptyrow:function(){if(this.showemptyrow&&this.table&&this.table[0].rows){var e=this.table[0].rows[0];if(e)for(var t=!1,i=0;i<e.cells.length;i++){var s=se(e.cells[i]);"none"==s.css("display")||t||s.width()!=this.host.width()&&s.text()!=this.gridlocalization.emptydatastring||(s[0].checkbox=null,t=!(s[0].button=null),s[0].innerHTML="")}}},_renderemptyrow:function(){if(!this._loading&&0==this.dataview.records.length&&this.showemptyrow){var e=!1,t=this.toTP("jqx-grid-cell");if(this.table&&0<this.table.length&&this.table[0].rows&&0<this.table[0].rows.length){var i=this.table[0].rows[0];this.table[0].style.top="0px";for(var s=0;s<i.cells.length;s++){var r,l,o=se(i.cells[s]);"none"==o.css("display")||e||(o[0].checkbox=null,o[0].button=null,o[0].className=t,e=!0,o[0].innerHTML="",(l=se("<span style='white-space: nowrap; float: left; margin-left: 50%; position: relative;'></span>")).text(this.gridlocalization.emptydatastring),o.append(l),r=0,this.oldhscroll||(r=parseInt(this.table[0].style.marginLeft),this.rtl&&(o.css("z-index",999),o.css("overflow","visible"))),l.css("left",-r-l.width()/2),l.css("top",this._gettableheight()/2-l.height()/2),se.jqx.browser.msie&&se.jqx.browser.version<8&&(l.css("margin-left","0px"),l.css("left",this.host.width()/2-l.width()/2)),l=Math.abs(parseInt(this.table[0].style.top)),isNaN(l)&&(l=0),se(i).height(this._gettableheight()+l),o.css("margin-left","0px"),o.width(this.host.width()),this.table.width()<this.host.width()&&this.table.width(this.host.width())),o.addClass(this.toThemeProperty("jqx-grid-empty-cell"))}}}},_clearvisualrows:function(){var e=this.virtualsizeinfo.visiblerecords,t=this.hScrollInstance.value,i=parseInt(t),s=this.groupable&&0<this.groups.length;if(this.columns.records)for(var r=0;r<e;r++)this._clearvisualrow(i,s,r,0,this.columns.records.length)},_iscellselected:function(e,t,i){var s=!1,r=0;if(this.virtualmode&&this.pageable&&this.groupable&&0<this.groups.length&&(r=this.dataview.pagesize*this.dataview.pagenum),0<this.groups.length&&this.pageable&&this.groupable){var l=this.getrowboundindexbyid(t.bounddata.uid);if(-1==l)return!1;for(o in this.selectedcells)o==l+"_"+i&&(s=!0);return s}if(e&&null!=t.bounddata)if("singlerow"!=this.selectionmode){if(0<this.dataview.filters.length)if(this.virtualmode||null==t.bounddata.dataindex)for(var o in this.selectedcells)o==r+t.bounddata.boundindex+"_"+i&&(s=!0);else for(var o in this.selectedcells)o==r+t.bounddata.dataindex+"_"+i&&(s=!0);else for(var o in this.selectedcells)if(o==r+t.bounddata.boundindex+"_"+i){s=!0;break}}else if(0<this.dataview.filters.length){if(this.virtualmode||null==t.bounddata.dataindex){for(var o in this.selectedcells)if(o==r+t.bounddata.boundindex+"_"+i){s=!0;break}}else for(var o in this.selectedcells)if(o==r+t.bounddata.dataindex+"_"+i){s=!0;break}}else for(var o in this.selectedcells)if(o==r+t.bounddata.boundindex==this.selectedrowindex){s=!0;break}return s},_isrowselected:function(e,t){var i=!1,s=0;if(this.virtualmode&&this.pageable&&this.groupable&&0<this.groups.length&&(s=this.dataview.pagesize*this.dataview.pagenum),this.groupable&&0<this.groups.length&&this.pageable){var r=this.getrowboundindexbyid(t.bounddata.uid);return null==r||-1==r?!1:(-1!=this.selectedrowindexes.indexOf(r)&&(i=!0),i=i||r==this.selectedrowindex&&-1!=this.selectedrowindex)}return e&&null!=t.bounddata&&("singlerow"!=this.selectionmode?!(0<this.dataview.filters.length)||this.virtualmode||null==t.bounddata.dataindex?-1!=this.selectedrowindexes.indexOf(s+t.bounddata.boundindex)&&(i=!0):-1!=this.selectedrowindexes.indexOf(s+t.bounddata.dataindex)&&(i=!0):0<this.dataview.filters.length?this.virtualmode||null==t.bounddata.dataindex?-1!=this.selectedrowindexes.indexOf(s+t.bounddata.boundindex)&&(i=!0):-1!=this.selectedrowindexes.indexOf(s+t.bounddata.dataindex)&&(i=!0):s+t.bounddata.boundindex==this.selectedrowindex&&(i=!0)),i},_rendervisualcell:function(e,t,i,s,r,l,o,a,n,d,h,c){var u=this.columns.records[d];if(u.hidden||u.adaptivehidden)(p=a.cells[d]).innerHTML="";else{var g=this._getcellvalue(u,n),p=a.cells[d],m=t;-1!=this.selectionmode.indexOf("cell")&&(i=0<this.dataview.filters.length?!!this.selectedcells[n.bounddata.dataindex+"_"+u.datafield]:!!this.selectedcells[n.boundindex+"_"+u.datafield],this.editcell&&this.editcell.row===n.boundindex&&this.editcell.column===u.datafield&&"checkbox"!==u.columntype&&(i=!1),(this.virtualmode||this.groupable&&0<this.groups.length&&this.pageable)&&(i=this._iscellselected(!0,n,u.datafield))),""!=u.cellclassname&&u.cellclassname&&("string"==typeof u.cellclassname?m+=" "+u.cellclassname:(this._columnClassNameCache||(this._columnClassNameCache=[]),t=this.getboundindex(n),void 0!==this._columnClassNameCache[t+"_"+u.datafield+"_"+g]&&this.enableoptimization?(w=this._columnClassNameCache[t+"_"+u.datafield+"_"+g])&&(m+=" "+w):((w=u.cellclassname(t,u.datafield,g,n.bounddata))&&(m+=" "+w),this._columnClassNameCache[t+"_"+u.datafield+"_"+g]=w)));var w,v,f=this.showsortcolumnbackground&&this.sortcolumn&&u.displayfield==this.sortcolumn;if("many"===this.sortmode&&this.showsortcolumnbackground)for(var b=this.getsortcolumns(),x=0;x<b.length;x++)u.displayfield===b[x].dataField&&(f=!0);f&&(m+=" "+this.toTP("jqx-grid-cell-sort")),u.filter&&this.showfiltercolumnbackground&&(m+=" "+this.toTP("jqx-grid-cell-filter")),n.bounddata.totalsrow&&(m+=" "+this.toTP("jqx-grid-cell-pinned")),(u.pinned&&this.showpinnedcolumnbackground||u.grouped)&&(l&&n.bounddata.totalsrow||(m+=" "+this.toTP("jqx-grid-cell-pinned"))),!this.altrows||null!=n.group||(w=n.visibleindex)>=this.altstart&&(this.altstart+w)%(1+this.altstep)==0&&(m+=f?" "+this.toTP("jqx-grid-cell-sort-alt"):" "+this.toTP("jqx-grid-cell-alt"),u.filter&&this.showfiltercolumnbackground&&(m+=" "+this.toTP("jqx-grid-cell-filter-alt")),u.pinned&&this.showpinnedcolumnbackground&&(m+=" "+this.toTP("jqx-grid-cell-pinned-alt"))),d<=o?(l||this.rowdetails||this.pageable&&this.virtualmode)&&(v=se(p),y=this.columns.records[d].width,p.style.width!=parseInt(y)+"px"&&v.width(y)):(l||this.rowdetails)&&this._hiddencolumns&&(v=se(p),y=this.columns.records[d].width,parseInt(p.style.width)!=y&&v.width(y));var y=!0;if(this.rowdetails&&s&&(r&&!l?m+=" "+this.toTP("jqx-grid-details-cell"):l&&(m+=" "+this.toTP("jqx-grid-group-details-cell")),this.showrowdetailscolumn))if(this.rtl){if(null==n.group&&d==a.cells.length-o-1){_=this.toThemeProperty("jqx-icon-arrow-down");return r?(m+=" "+this.toTP("jqx-grid-group-expand-rtl"),m+=" "+_):(m+=" "+this.toTP("jqx-grid-group-collapse-rtl"),m+=" "+(_=this.toThemeProperty("jqx-icon-arrow-left"))),y=!1,p.title="",p.innerHTML="",void(p.className!=m&&(p.className=m))}}else if(null==n.group&&d==o&&!n.bounddata.totalsrow){var _=this.toThemeProperty("jqx-icon-arrow-down");return r?(m+=" "+this.toTP("jqx-grid-group-expand"),m+=" "+_):(m+=" "+this.toTP("jqx-grid-group-collapse"),m+=" "+(_=this.toThemeProperty("jqx-icon-arrow-right"))),y=!1,p.title="",p.innerHTML="",void(p.className!=m&&(p.className=m))}if(i&&y&&o<=d&&(m+=" "+this.toTP("jqx-grid-cell-selected"),m+=" "+this.toTP("jqx-fill-state-pressed")),p.className!=m&&(p.className=m),u._applyCellStyle(p),null!=n.group)return g="",p.title="",void(p.innerHTML="");e(this,u,n,g,p,c)}},_rendercell:function(e,t,i,s,r,l){var o=s+"_"+t.visibleindex;if("number"!=t.columntype&&null==t.cellsrenderer||(o=i.uniqueid+"_"+t.visibleindex),"number"==t.columntype&&(s=i.visibleindex),"adaptive"===t.columntype&&(s="..."),t._applyCellStyle(r),e.showrowlines?r.style.borderBottomColor="":r.style.borderBottomColor="transparent",e.showcolumnheaderlines?(t.element.style.borderRightColor="",t.element.style.boxShadow=""):(t.element.style.borderRightColor="transparent",t.element.style.boxShadow="none"),e.showcolumnlines?r.style.borderRightColor="":r.style.borderRightColor="transparent",e.editcell&&null==e.editrow)if("selectedrow"==e.editmode&&t.editable&&e.editable){if(e.editcell.row==e.getboundindex(i)&&e._showcelleditor)return e.hScrollInstance.isScrolling()||e.vScrollInstance.isScrolling()?e._showcelleditor(e.editcell.row,t,r,!1,!1):e._showcelleditor(e.editcell.row,t,r,e.editcell.init),void(r.className+=" "+e.toTP("jqx-grid-cell-edit"))}else if(e.editcell.row==e.getboundindex(i)&&e.editcell.column==t.datafield&&(e.editcell.element=r,e.editcell.editing&&e._showcelleditor))return e.hScrollInstance.isScrolling()||e.vScrollInstance.isScrolling()?e._showcelleditor(e.editcell.row,t,e.editcell.element,e.editcell.init,!1):e._showcelleditor(e.editcell.row,t,e.editcell.element,e.editcell.init),void(r.className+=" "+e.toTP("jqx-grid-cell-edit"));var a=e._defaultcellsrenderer(s,t),n=e._cellscache[o];if(n){if("checkbox"==t.columntype){if(e.host.jqxCheckBox){""===s&&(s=null);var d=0==r.innerHTML.toString().length;return!r.checkbox||e.groupable||d?e._rendercheckboxcell(e,r,t,i,s):(r.checkboxrow=e.getboundindex(i),""==s&&(s=!1),"1"==s&&(s=!0),"0"==s&&(s=!1),1==s&&(s=!0),0==s&&(s=!1),"true"==s&&(s=!0),"false"==s&&(s=!1),null!=s||t.threestatecheckbox||(s=!1),t.checkboxcolumn&&(s=!1,0<e.dataview.filters.length&&!e.virtualmode&&null!=i.bounddata.dataindex?-1!=e.selectedrowindexes.indexOf(i.bounddata.dataindex)&&(s=!0):-1!=e.selectedrowindexes.indexOf(i.bounddata.boundindex)&&(s=!0)),e.disabled||(r.checkboxinstance?r.checkboxinstance._setState(s):r.checkbox.jqxCheckBox("_setState",s))),void(null==t.cellsrenderer||null!=(h=t.cellsrenderer(e.getboundindex(i),t.datafield,s,a,t.getcolumnproperties(),i.bounddata))&&(r.innerHTML=h))}}else if("button"==t.columntype){if(e.host.jqxButton)return""==s&&(s=!1),null!=t.cellsrenderer&&(s=t.cellsrenderer(e.getboundindex(i),t.datafield,s,a,t.getcolumnproperties(),i.bounddata)),""==r.innerHTML&&(r.buttonrow=e.getboundindex(i),r.button=null,e._renderbuttoncell(e,r,t,i,s)),void(r.button&&!e.groupable?(r.buttonrow=e.getboundindex(i),r.button.val(s)):e._renderbuttoncell(e,r,t,i,s))}else if(("progressbar"==t.columntype||"rating"===t.columntype)&&e.host.jqxButton)return""==s&&(s=!1),null!=t.cellsrenderer&&(s=t.cellsrenderer(e.getboundindex(i),t.datafield,s,a,t.getcolumnproperties(),i.bounddata)),""==r.innerHTML&&(r.progressrow=e.getboundindex(i),r.progress=null,e._renderprogresscell(e,r,t,i,s)),void(r.progress&&!e.groupable?(r.progressrow=e.getboundindex(i),r.progress.val(s)):e._renderprogresscell(e,r,t,i,s));if(t.createwidget){if(""==r.innerHTML&&(r.widgetrow=e.getboundindex(i),r.widget=null,t.widget=null,e._renderwidgetcell(e,r,t,i,s)),r.widget&&!e.groupable){if(r.widgetrow=e.getboundindex(i),!t.initwidget)throw new Error("jqxGrid: 'initwidget' column function is not implemented. Please, implement 'initwidget'");t.initwidget(e.getboundindex(i),t.datafield,s,r.firstChild)}else e._renderwidgetcell(e,r,t,i,s);return}var h=n.element;return null!=t.cellsrenderer||r.childNodes&&0==r.childNodes.length||e.groupable||e.rowdetails?r.innerHTML!=h&&(r.innerHTML=h):0<=r.innerHTML.indexOf("editor")?r.innerHTML=h:l?(c=h.indexOf(">"),u=h.indexOf("</"),g=h.substring(c+1,u),p=r.childNodes[0],0<=g.indexOf(">")?r.innerHTML=h:p.childNodes[0]?g!=p.childNodes[0].nodeValue&&(0<=g.indexOf("&")?r.innerHTML=h:p.childNodes[0].nodeValue=g):(m=document.createTextNode(g),p.appendChild(m))):r.innerHTML!=h&&(r.innerHTML=h),void(e.enabletooltips&&t.enabletooltips&&(r.title=n.title))}if("checkbox"==t.columntype)return e._rendercheckboxcell(e,r,t,i,s),e._cellscache[o]={element:"",title:s},void(e.enabletooltips&&t.enabletooltips&&(r.title=""+s));if("button"==t.columntype)return null!=t.cellsrenderer&&(s=t.cellsrenderer(e.getboundindex(i),t.datafield,s,a,t.getcolumnproperties(),i.bounddata)),e._renderbuttoncell(e,r,t,i,s),e._cellscache[o]={element:"",title:s},void(e.enabletooltips&&t.enabletooltips&&(r.title=""+s));if("progressbar"==t.columntype||"rating"===t.columntype)return null!=t.cellsrenderer&&(s=t.cellsrenderer(e.getboundindex(i),t.datafield,s,a,t.getcolumnproperties(),i.bounddata)),e._renderprogresscell(e,r,t,i,s),e._cellscache[o]={element:"",title:s},void(e.enabletooltips&&t.enabletooltips&&(r.title=""+s));if("number"==t.columntype&&(s=i.visibleindex),t.createwidget)return null!=t.cellsrenderer&&(s=t.cellsrenderer(e.getboundindex(i),t.datafield,s,a,t.getcolumnproperties(),i.bounddata)),e._renderwidgetcell(e,r,t,i,s),e._cellscache[o]={element:"",title:s},void(e.enabletooltips&&t.enabletooltips&&(r.title=s));h=null;if(null!=t.cellsrenderer){e._columnCellsRenderCache||(e._columnCellsRenderCache=[]);n=e.getboundindex(i);if(void 0!==e._columnCellsRenderCache[n+"_"+t.datafield+"_"+s]&&e.enableoptimization?h=e._columnCellsRenderCache[n+"_"+t.datafield+"_"+s]:(h=t.cellsrenderer(e.getboundindex(i),t.datafield,s,a,t.getcolumnproperties(),i.bounddata),e._columnCellsRenderCache[n+"_"+t.datafield+"_"+s]=h),h&&(0<=h.indexOf("<jqx-")||0<=h.indexOf(" ng-")))return void(e.toCompile&&e.toCompile.push({cell:r,value:h,row:e.getboundindex(i)}))}else h=a;null==h&&(h=a);var c,u,g,p,m,a=s;return e.enabletooltips&&t.enabletooltips&&(""!=t.cellsformat&&se.jqx.dataFormat&&(se.jqx.dataFormat.isDate(s)?a=se.jqx.dataFormat.formatdate(a,t.cellsformat,e.gridlocalization):se.jqx.dataFormat.isNumber(s)&&(a=se.jqx.dataFormat.formatnumber(a,t.cellsformat,e.gridlocalization))),r.title=a),e.WinJS?se(r).html(h):0<=(s=r.innerHTML).indexOf("editor")||null!=t.cellsrenderer||e.groupable||e.virtualmode?r.innerHTML=h:0<s.length?(c=h.indexOf(">"),u=h.indexOf("</"),g=h.substring(c+1,u),p=r.childNodes[0],0<=g.indexOf(">")?r.innerHTML=h:p.childNodes[0]?g!=p.childNodes[0].nodeValue&&(0<=g.indexOf("&")||0<=s.indexOf("span")?r.innerHTML=h:p.childNodes[0].nodeValue=g):(m=document.createTextNode(g),p.appendChild(m))):s!=h&&(r.innerHTML=h),e._cellscache[o]={element:r.innerHTML,title:a},!0},_isIE10:function(){var e;return null==this._browser&&("msie"==(e=se.jqx.utilities.getBrowser()).browser&&9<parseInt(e.version)?this._browser=!0:(this._browser=!1,"msie"==e.browser&&(e="Browser CodeName: "+navigator.appCodeName,e+="Browser Name: "+navigator.appName,e+="Browser Version: "+navigator.appVersion,e+="Platform: "+navigator.platform,-1!=(e+="User-agent header: "+navigator.userAgent).indexOf("Zune 4.7")&&(this._browser=!0)))),this._browser},_renderinlinecell:function(e,t,i,s,r){se(t);t.innerHTML='<div style="position: absolute;"></div>'},_rendercheckboxcell:function(n,d,h,e,t){var i,s;n.host.jqxCheckBox&&(i=se(d),""===t&&(t=!!h.threestatecheckbox&&null),null!==t||h.threestatecheckbox||(t=!1),"1"==t&&(t=!0),"0"==t&&(t=!1),1==t&&(t=!0),0==t&&(t=!1),"true"==t&&(t=!0),"false"==t&&(t=!1),h.checkboxcolumn&&(t=!1,s=this.getboundindex(e),-1!=this.selectedrowindexes.indexOf(s)&&(t=!0)),0==i.find(".jqx-checkbox").length?(d.innerHTML='<div style="position: absolute; top: 50%; left: 50%; margin-top: -9px; margin-left: -12px;"></div>',se(d.firstChild).jqxCheckBox({disabled:n.disabled,_canFocus:!1,hasInput:!1,hasThreeStates:h.threestatecheckbox,enableContainerClick:!1,animationShowDelay:0,animationHideDelay:0,locked:!0,theme:n.theme,checked:t}),this.enabletooltips&&h.enabletooltips&&(d.title=""+t),this.editable&&h.editable&&se(d.firstChild).jqxCheckBox({locked:!1}),h.checkboxcolumn&&se(d.firstChild).jqxCheckBox({locked:!1}),d.checkbox=se(d.firstChild),d.checkboxinstance=d.checkbox.data().jqxCheckBox.instance,d.checkboxrow=this.getboundindex(e),se.data(d.firstChild,"jqxCheckBox").instance.updated=function(e,t,i){if(n.disabled){t=i;for(var s=n.table[0].rows.length,r=n._getcolumnindex(h.datafield),l=0;l<s;l++)(a=n.table[0].rows[l].cells[r].firstChild)&&se(a).jqxCheckBox({disabled:n.disabled})}if(h.editable&&!n.disabled){var o,s=n.table[0].rows.length,r=n._getcolumnindex(h.datafield);if(null==n.editrow){if(h.cellbeginedit)if(0==h.cellbeginedit(d.checkboxrow,h.datafield,h.columntype,!t))return void n.setcellvalue(d.checkboxrow,h.datafield,!t,!0);if(!h.cellvaluechanging||null!=(o=h.cellvaluechanging(d.checkboxrow,h.datafield,h.columntype,i,t))&&(t=o),"selectedrow"!==n.editmode)for(var a,l=0;l<s;l++)(a=n.table[0].rows[l].cells[r].firstChild)&&se(a).jqxCheckBox("destroy");n.editcell&&0==n.editcell.validated?n.setcellvalue(d.checkboxrow,h.datafield,!t,!0):"selectedrow"!==n.editmode||null==n.editcell?(o=n.getrowdata(d.checkboxrow),n._raiseEvent(17,{rowindex:d.checkboxrow,row:o,datafield:h.datafield,value:i,columntype:h.columntype}),n.pushToHistory=!0,n.setcellvalue(d.checkboxrow,h.datafield,t,!0),n.pushToHistory=!1,n._raiseEvent(18,{rowindex:d.checkboxrow,row:o,datafield:h.datafield,oldvalue:i,value:t,columntype:h.columntype})):(n.pushToHistory=!0,n.setcellvalue(d.checkboxrow,h.datafield,t,!1,!1),n.pushToHistory=!1),h.cellendedit&&h.cellendedit(d.checkboxrow,h.datafield,h.columntype,t)}}else h.checkboxcolumn&&(n.editcell&&n.endcelledit(n.editcell.row,n.editcell.column,!1,!0),n.disabled||(t?n.selectrow(d.checkboxrow):n.unselectrow(d.checkboxrow),n.autosavestate&&n.savestate&&n.savestate()))}):(d.checkboxrow=this.getboundindex(e),se(d.firstChild).jqxCheckBox("_setState",t,!(this.editable&&h.editable||h.checkboxcolumn))))},_renderwidgetcell:function(e,t,i,s,r){0==se(t).find(".jqx-grid-widget").length?(t.innerHTML='<div class="jqx-grid-widget" style="opacity: 0.99; position: absolute; width: 100%; height:100%; top: 0%; left: 0%; padding: 0px;"></div>',i.createwidget(s,i.datafield,r,t.firstChild),se(t.firstChild).attr("hideFocus","true"),se(t.firstChild).children().addClass("jqx-grid-widget"),t.widget=se(t.firstChild),t.widgetrow=e.getboundindex(s),i.widget=se(t.firstChild)):(i.initwidget(e.getboundindex(s),i.datafield,r,t.firstChild),t.widgetrow=e.getboundindex(s),se(t.firstChild).val(r))},_renderprogresscell:function(e,t,i,s,r){var l=se(t);if("rating"===i.columntype){e._linkadded||((n=document.createElement("link")).rel="stylesheet",n.href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css",document.head.appendChild(n),e._linkadded=!0),i.ratingmax||(i.ratingmax=5);for(var o="",a=0;a<i.ratingmax;a++)o+=a+1<=r?'<span style="color: rgba(255, 165, 0, 1);" class="fa fa-star checked"></span>':'<span style="color: rgba(255, 165, 0, .3);" class="fa fa-star"></span>';var n=i.cellsalign;return"right"===n&&(n="flex-end"),void(t.innerHTML='<div style="display: flex; width: 100%; height: 100%; justify-content: '+n+'; padding: 5px; box-sizing: border-box; font-size: 16px; align-items: center;">'+o+"</div>")}""==r&&(r=!1),0==l.find(".jqx-progress").length?(t.innerHTML='<progress class="jqx-progress" max="100" style="opacity: 0.99; position: absolute; top: 10%; left: 10%; width:80%; height:80%; padding: 0px;"/>',se(t.firstChild).val(r),t.progress=se(t.firstChild),t.progressrow=e.getboundindex(s)):(t.progressrow=e.getboundindex(s),se(t.firstChild).val(r))},_renderbuttoncell:function(e,t,i,s,r){var l;e.host.jqxButton&&(""==r&&(r=!1),0==se(t).find(".jqx-button").length?(t.innerHTML='<input type="button" style="opacity: 0.99; position: absolute; top: 0%; left: 0%; padding: 0px; margin-top: 2px; margin-left: 2px;"/>',se(t.firstChild).val(r),se(t.firstChild).attr("hideFocus","true"),se(t.firstChild).jqxButton({disabled:e.disabled,theme:e.theme,height:e.rowsheight-4,width:i.width-4}),t.button=se(t.firstChild),t.buttonrow=e.getboundindex(s),this.isTouchDevice()?(l=se.jqx.mobile.getTouchEventName("touchend"),e.addHandler(se(t.firstChild),l,function(e){i.buttonclick&&i.buttonclick(t.buttonrow,e)})):e.addHandler(se(t.firstChild),"click",function(e){i.buttonclick&&i.buttonclick(t.buttonrow,e)})):(t.buttonrow=e.getboundindex(s),se(t.firstChild).val(r)))},_clearvisualrow:function(e,t,i,s,r){var l=this.toTP("jqx-grid-cell");t&&(l=" "+this.toTP("jqx-grid-group-cell")),l+=" "+this.toTP("jqx-grid-cleared-cell");for(var o,a,n,d=this.table[0].rows,h=0;h<s+r;h++)d[i]&&((o=d[i].cells[h]).className!=l&&(o.className=l),a=this.columns.records[h],this._horizontalvalue==e||a.pinned||1==this.oldhscroll&&(o.style.marginLeft=-e+"px"),n=a.width,a.adaptivewidth&&(n=a.adaptivewidth),n<a.minwidth&&(n=a.minwidth),n>a.maxwidth&&(n=a.maxwidth),parseInt(o.style.width)!=n&&(se(o)[0].style.width="auto"!=n?n+"px":n),""!=o.title&&(o.title=""),""!=o.innerHTML&&(o.innerHTML=""));d[i]&&(t=this.rowsheight,this.cardview&&(t=this.cardheight),parseInt(d[i].style.height)!=t&&(d[i].style.height=parseInt(t)+"px"))},_findgroupstate:function(e){e=this._findgroup(e);return null!=e&&e.expanded},_findgroup:function(e){return this.expandedgroups[e]||null},_clearcaches:function(){this._columnsbydatafield=new Array,this._pagescache=new Array,this._pageviews=new Array,this._cellscache=new Array,this._columnClassNameCache=new Array,this._columnCellsRenderCache=new Array,this.heights=new Array,this.hiddens=new Array,this.hiddenboundrows=new Array,this.heightboundrows=new Array,this.detailboundrows=new Array,this.details=new Array,this.expandedgroups=new Array,this._rowdetailscache=new Array,this._rowdetailselementscache=new Array,se.jqx.dataFormat&&se.jqx.dataFormat.cleardatescache(),this.tableheight=null},_getColumnText:function(e){if(null==this._columnsbydatafield&&(this._columnsbydatafield=new Array),this._columnsbydatafield[e])return this._columnsbydatafield[e];var t=e,i=null;return se.each(this.columns.records,function(){if(this.datafield==e||this.displayfield==e)return t=this.text,i=this,!1}),this._columnsbydatafield[e]={label:t,column:i},this._columnsbydatafield[e]},_getcolumnbydatafield:function(e){if(null==this.__columnsbydatafield&&(this.__columnsbydatafield=new Array),this.__columnsbydatafield[e])return this.__columnsbydatafield[e];var t=null;return se.each(this.columns.records,function(){if(this.datafield==e||this.displayfield==e)return this.text,t=this,!1}),this.__columnsbydatafield[e]=t,this.__columnsbydatafield[e]},isscrollingvertically:function(){return this.vScrollBar.jqxScrollBar("isScrolling")},_renderrowdetails:function(e,t,i,s,r,l){if(null!=t){var o=se(t),a=this.rowdetails&&this.showrowdetailscolumn?(1+this.groups.length)*this.groupindentwidth:this.groups.length*this.groupindentwidth;if(this.groupable&&0<this.groups.length)for(var n,d=0;d<=r;d++)(n=se(t.cells[d]))[0].innerHTML="",n[0].className="jqx-grid-details-cell";if("none"==(n=se(t.cells[0]))[0].style.display){for(var h=t.cells[0],c=2;null!=h&&"none"==h.style.display&&c<10;)h=t.cells[0+c-1],c++;n=se(h)}if(this.rtl)for(var u=s;u<r;u++)t.cells[u].innerHTML="",t.cells[u].className="jqx-grid-details-cell";n.css("width","100%"),o.height(i.rowdetailsheight),n[0].className=e;var g,p,m,w,v,f,o=this.getboundindex(i),e=o+"_";this._rowdetailscache[e]?(g=this._rowdetailscache[e].html,this.initrowdetails?this._rowdetailscache[e].element&&(p=this._rowdetailscache[e].element,m=n.coord(),w=this.gridcontent.coord(),v=parseInt(m.top)-parseInt(w.top),f=parseInt(m.left)-parseInt(w.left),this.rtl&&(f=0),se(p).css("top",v),se(p).css("left",f),se(p).css("display","block"),se(p).width(this.host.width()-a),this.layoutrowdetails&&this.layoutrowdetails(o,p,this.element,this.getrowdata(o))):n[0].innerHTML=g):(n[0].innerHTML="",this.enablerowdetailsindent||(a=0),g='<div class="jqx-enableselect" role="rowgroup" style="border: none; overflow: hidden; width: 100%; height: 100%; margin-left: '+a+'px;">'+i.rowdetails+"</div>",this.rtl&&(g='<div class="jqx-enableselect" role="rowgroup" style="border: none; overflow: hidden; width: 100%; height: 100%; margin-left: 0px; margin-right: '+a+'px;">'+i.rowdetails+"</div>"),this._rowdetailscache[e]={id:t.id,html:g},this.initrowdetails?(p=se(g)[0],se(this.gridcontent).prepend(se(p)),se(p).css("position","absolute"),se(p).width(this.host.width()-a),se(p).height(n.height()),m=n.coord(),se(p).css("z-index",1799),this.isTouchDevice()&&se(p).css("z-index",1999),se(p).addClass(this.toThemeProperty("jqx-widget-content")),m=n.coord(),w=this.gridcontent.coord(),v=parseInt(m.top)-parseInt(w.top),f=parseInt(m.left)-parseInt(w.left),se(p).css("top",v),se(p).css("left",f),this.content[0].scrollTop=0,this.content[0].scrollLeft=0,""!=(f=se(se(p).children()[0]))[0].id&&(f[0].id=f[0].id+o),this.initrowdetails(o,p,this.element,this.getrowdata(o)),this._rowdetailscache[e].element=p,this._rowdetailselementscache[o]=p):n[0].innerHTML=g)}},_defaultcellsrenderer:function(e,t){""!=t.cellsformat&&se.jqx.dataFormat&&(se.jqx.dataFormat.isDate(e)?e=se.jqx.dataFormat.formatdate(e,t.cellsformat,this.gridlocalization):se.jqx.dataFormat.isNumber(e)&&(e=se.jqx.dataFormat.formatnumber(e,t.cellsformat,this.gridlocalization)));var i="8px";if(31!=this.rowsheight&&((i=this.rowsheight/2-this._cellheight/2)<0&&(i=4),i+="px"),this.enableellipsis){if("center"==t.cellsalign||"middle"==t.cellsalign)return'<div class="jqx-grid-cell-middle-align" style="margin-top: '+i+';">'+e+"</div>";if("left"==t.cellsalign)return'<div class="jqx-grid-cell-left-align" style="margin-top: '+i+';">'+e+"</div>";if("right"==t.cellsalign)return'<div class="jqx-grid-cell-right-align" style="margin-top: '+i+';">'+e+"</div>"}return"center"==t.cellsalign||"middle"==t.cellsalign?'<div style="text-align: center; margin-top: '+i+';">'+e+"</div>":'<span style="margin-left: 4px; margin-right: 2px; margin-top: '+i+"; float: "+t.cellsalign+';">'+e+"</span>"},getcelltext:function(e,t){if(null==e||null==t)return null;e=this.getcellvalue(e,t),t=this.getcolumn(t);return t&&""!=t.cellsformat&&se.jqx.dataFormat&&(se.jqx.dataFormat.isDate(e)?e=se.jqx.dataFormat.formatdate(e,t.cellsformat,this.gridlocalization):se.jqx.dataFormat.isNumber(e)&&(e=se.jqx.dataFormat.formatnumber(e,t.cellsformat,this.gridlocalization))),e},getcelltextbyid:function(e,t){if(null==e||null==t)return null;e=this.getcellvaluebyid(e,t),t=this.getcolumn(t);return t&&""!=t.cellsformat&&se.jqx.dataFormat&&(se.jqx.dataFormat.isDate(e)?e=se.jqx.dataFormat.formatdate(e,t.cellsformat,this.gridlocalization):se.jqx.dataFormat.isNumber(e)&&(e=se.jqx.dataFormat.formatnumber(e,t.cellsformat,this.gridlocalization))),e},_getcellvalue:function(e,t){var i=null,i=t.bounddata[e.datafield];return null!=e.displayfield&&(i=t.bounddata[e.displayfield]),null==i&&(i=""),i},getcell:function(e,t){if(null==e||null==t)return null;var i=parseInt(e),s=e,r="";return isNaN(i)||(s=this.getrowdata(i)),null!=s&&(r=s[t]),this._getcellresult(r,e,t)},getrenderedcell:function(e,t){if(null==e||null==t)return null;var i=parseInt(e),s=e,r="";return isNaN(i)||(s=this.getrenderedrowdata(i)),null!=s&&(r=s[t]),this._getcellresult(r,e,t)},_getcellresult:function(e,t,i){var s=this.getcolumn(i);if(null==s||null==s)return null;var r=s.getcolumnproperties(),l=r.hidden,o=r.width,a=r.pinned,n=r.cellsalign,s=r.cellsformat,r=this.getrowheight(t);return 0==r?null:{value:e,row:t,column:i,datafield:i,width:o,height:r,hidden:l,pinned:a,align:n,format:s}},setcellvaluebyid:function(e,t,i,s,r){e=this.getrowboundindexbyid(e);return this.setcellvalue(e,t,i,s,r)},getcellvaluebyid:function(e,t){e=this.getrowboundindexbyid(e);return this.getcellvalue(e,t)},setcellvalue:function(t,i,e,s,r){if(null==t||null==i)return!1;var l=parseInt(t);this._columnClassNameCache=[];var o=t;isNaN(l)||(o=this.getrowdata(l));var a=!1;this.filterable&&this._initfilterpanel&&this.dataview.filters.length&&(a=!0),this.virtualmode&&(this._pagescache=new Array),this.sortcache&&(this.sortcache={});var n="",d="";if(null==o||o[i]===e)return this._updating||0==s||this._renderrows(this.virtualsizeinfo),!1;if(null!==o[i]||""!==e){var h=this._getcolumnbydatafield(i),c="string";this.source||(this.source=new se.jqx.dataAdapter({}));var u,g=this.source.datafields||(this.source._source?this.source._source.datafields:null);if(g&&(u="",se.each(g,function(){if(this.name==h.displayfield)return this.type&&(u=this.type),!1}),u&&(c=u),d=o[h.displayfield]),n=o[i],this.pushToHistory&&(this._undoRedoIndex=-1,this._undoRedo.push({action:"setcellvalue",data:{oldvalue:n,value:e,datafield:i,row:t}})),h.nullable&&(null==e||""===e||!h.nullable||void 0!==e.label)||(se.jqx.dataFormat.isNumber(n)||"number"==c||"float"==c||"int"==c||"decimal"==c&&"date"!=c?(this.gridlocalization&&","==this.gridlocalization.decimalseparator&&e&&e.indexOf&&0<=e.indexOf(",")&&(e=e.replace(",",".")),e=new Number(e),e=parseFloat(e),isNaN(e)&&(e=0)):!se.jqx.dataFormat.isDate(n)&&"date"!=c||""==e||(p=e,"Invalid Date"!=(p=new Date(p))&&null!=p?e=p:"Invalid Date"==p&&(e=p=se.jqx.dataFormat.parsedate(e,h.cellsformat))),o[i]!==e)){c=this.source&&this.source._source.localdata&&"observableArray"===this.source._source.localdata.name;o[i]=e,c&&((w=this.source._source.localdata)._updating||(w._updating=!0,w[t][i]=e,w._updating=!1));var p=this.getrenderedrowdata(l,!0);if(p){if(null!=(p[i]=e)&&null!=e.label&&(o[(h=this._getcolumnbydatafield(i)).displayfield]=e.label,p[h.displayfield]=e.label,o[i]=e.value,p[i]=e.value,c&&!w._updating&&(w._updating=!0,w[t][i]=e.value,w[t][h.displayfield]=e.label,w._updating=!1)),a&&null!=o.dataindex&&(o.dataindex,null!=(this.dataview.cachedrecords[o.dataindex][i]=e)&&null!=e.label&&(this.dataview.cachedrecords[o.dataindex][i]=e.value,this.dataview.cachedrecords[o.dataindex][h.displayfield]=e.label)),this.source&&this.source._knockoutdatasource&&!this._updateFromAdapter&&this.autokoupdates&&this.source._source._localdata){var m=l;a&&null!=o.dataindex&&(m=o.dataindex);var w=this.source._source._localdata()[m];this.source.suspendKO=!0;m=w;if(m[i]&&m[i].subscribe)null!=e&&null!=e.label?(m[h.displayfield](e.label),m[i](e.value)):m[i](e);else{var g=this.source._source.datafields,v=null;if(g&&se.each(g,function(){if(this.name==i)return v=this.map,!1}),null==v)null!=e&&null!=e.label?(m[i]=e.value,m[h.displayfield]=e.label):m[i]=e;else{var f=v.split(this.source.mapChar);if(0<f.length){for(var b=m,x=0;x<f.length-1;x++)b=b[f[x]];b[f[f.length-1]]=e}}this.source._source._localdata.replace(w,se.extend({},m))}this.source.suspendKO=!1}if(this.sortcolumn&&this.dataview.sortby&&!this._updating){var y=this.getsortinformation();if(this.sortcolumn==i&&"many"!==this.sortmode)this.dataview.clearsortdata(),this.dataview.sortby(y.sortcolumn,y.sortdirection.ascending);else if("many"===this.sortmode){var _=this.getsortcolumns();this.dataview.clearsortdata(),this.sortby(null);for(var q=0;q<_.length;q++)this.sortby(_[q].dataField,_[q].ascending)}}else this._updating||this.dataview.sortby&&this.dataview.sortcache[i]&&(this.dataview.sortcache[i]=null);if(this._cellscache=new Array,this._pagescache=new Array,this.source.updaterow&&(null==r||1==r)){var j=this.that;try{var S=this.getrowid(l);null==this.source.updaterow(S,o,function(e){0==e&&(j.setcellvalue(t,i,n,!0,!1),n!=d&&j.setcellvalue(t,j.getcolumn(i).displayfield,d,!0,!1))})&&0}catch(e){return j.setcellvalue(t,i,n,!0,!1),void(n!=d&&j.setcellvalue(t,j.getcolumn(i).displayfield,d,!0,!1))}}m=this.vScrollInstance.value;return this._updating&&1!=s&&(s=!1),1!=s&&null!=s||(j=this.that,y=function(){j.pageable&&j.updatepagerdetails&&(j.updatepagerdetails(),(j.autoheight||j.autorowheight)&&j._updatepageviews())},r=this.groupable&&0<this.groups.length,a&&!r?((this.autoheight||this.autorowheight)&&(this.prerenderrequired=!0),this.dataview.refresh(),this.rendergridcontent(!0,!1),y(),this._renderrows(this.virtualsizeinfo)):this.sortcolumn&&!r?((this.autoheight||this.autorowheight)&&(this.prerenderrequired=!0),this.dataview.reloaddata(),this.rendergridcontent(!0,!1),y(),this._renderrows(this.virtualsizeinfo)):this.groupable&&0<this.groups.length?((this.autoheight||this.autorowheight)&&(this.prerenderrequired=!0),this.pageable&&-1!=this.groups.indexOf(i)?(this._pagescache=new Array,this._cellscache=new Array,this.dataview.refresh(),this._render(!0,!0,!1,!1)):(this._pagescache=new Array,this._cellscache=new Array,this.dataview.updateview(),this._renderrows(this.virtualsizeinfo))):(this.dataview.updateview(),this._renderrows(this.virtualsizeinfo))),this.vScrollInstance.setPosition(m),this.showaggregates&&this._updatecolumnsaggregates&&this._updatecolumnsaggregates(),this.showfilterrow&&this.filterable&&this.filterrow&&("list"!=(m=this.getcolumn(i).filtertype)&&"checkedlist"!=m||this._updatelistfilters(!0)),this._raiseEvent(19,{rowindex:t,datafield:i,newvalue:e,value:e,oldvalue:n}),!0}}else this._updating||0==s||this._renderrows(this.virtualsizeinfo)}},getcellvalue:function(e,t){if(null==e||null==t)return null;var i=parseInt(e),e=e;return isNaN(i)||(e=this.getrowdata(i)),null==e?null:e[t]},getrows:function(){var e=this.dataview.records.length;if(this.virtualmode){for(var t=new Array,i=0;i<this.dataview.records.length;i++){var s=this.dataview.records[i];s&&t.push(s)}void 0===this.dataview.records.length&&se.each(this.dataview.records,function(){this&&t.push(this)});var r=0;return this.pageable&&(r=this.dataview.pagenum*this.dataview.pagesize),t.length>this.source._source.totalrecords-r?t.slice(0,this.source._source.totalrecords-r):t}if(this.dataview.sortdata){for(t=new Array,i=0;i<e;i++){var l=se.extend({},this.dataview.sortdata[i].value);t[i]=l}return t}return this.dataview.records},getrowboundindexbyid:function(e){var t=this.dataview.recordsbyid["id"+e];if(t&&t.boundindex)return this.getboundindex(t);for(var i=this.getboundrows(),s=0;s<i.length;s++)if(i[s]&&i[s].uid==e)return s;return-1},getrowdatabyid:function(e){var t=this.dataview.recordsbyid["id"+e];if(t)return t;e=this.getrowboundindexbyid(e);return this.getboundrows()[e]},getrowdata:function(e){return null==e&&(e=0),(this.virtualmode?this.dataview.records:this.getboundrows())[e]},getrenderedrowdata:function(e,t){if(null==e&&(e=0),this.virtualmode){var i=this.getrowvisibleindex(e);return s=this.dataview.loadedrecords[i]}var s;return 0<=(i=this.getrowvisibleindex(e))?(this.groupable&&0<this.groups.length?s=this.dataview.loadedrecords[i]:(s=this.dataview.loadedrecords[i],!this.pageable||null!=t&&0!=t||(s=this.dataview.loadedrecords[this.dataview.pagesize*this.dataview.pagenum+e])),s):null},getboundrows:function(){return this.dataview.cachedrecords},getrowdisplayindex:function(e){for(var t=this.getdisplayrows(),i=0;i<t.length;i++)if(t[i])if(void 0!==t[i].dataindex){if(t[i].dataindex==e)return t[i].visibleindex}else if(t[i].boundindex==e)return t[i].visibleindex;return-1},getboundindex:function(e){var t=e.boundindex;return this.groupable&&0<this.groups.length&&this.pageable&&e.bounddata&&(t=this.getrowboundindexbyid(e.bounddata.uid)),0<this.dataview.filters.length&&(e.bounddata?void 0!==e.bounddata.dataindex&&(t=e.bounddata.dataindex):void 0!==e.dataindex&&(t=e.dataindex)),t},getrowboundindex:function(e){e=this.getdisplayrows()[e];return e?void 0!==e.dataindex?e.dataindex:e.boundindex:-1},getdisplayrows:function(){return this.dataview.loadedrecords},getloadedrows:function(){return this.getdisplayrows()},getvisiblerowdata:function(e){var t=this.getvisiblerows();return t?t[e]:null},getloadedrowdata:function(e){var t=this.getloadedrows();return t?t[e]:null},getvisiblerows:function(){if(this.virtualmode)return this.dataview.loadedrecords;if(this.pageable){for(var e=[],t=0;t<this.dataview.pagesize;t++){if(null==(i=this.dataview.loadedrecords[t+this.dataview.pagesize*this.dataview.pagenum]))break;e.push(i)}return e}if(null==this._startboundindex||null==this._endboundindex)return this.dataview.loadedrecords;for(var i,e=[],t=this._startvisibleindex;t<=this._endvisibleindex;t++){if(null==(i=this.dataview.loadedrecords[t]))break;e.push(i)}return e},getrowid:function(e){if(null==e&&(e=0),this.virtualmode){var t=this.getrowvisibleindex(e);if(i=this.dataview.loadedrecords[t])return i.uid}else{var i=null,s=0<this.dataview.filters.length;if(0<=e&&e<this.dataview.bounditems.length&&!s)if(i=(this.groupable&&this.groups.length,t=this.getrowvisibleindex(e),this.dataview.loadedrecords[t]))return i.uid;if(0<this.dataview.filters.length)return(i=this.getboundrows()[e])&&null!=i.uid?i.uid:null}return null},_updateGridData:function(e){var t=!1;this.filterable&&this._initfilterpanel&&this.dataview.filters.length&&(t=!0),t?(this.dataview.refresh(),"updaterow"==e?(this._render(!0,!0,!1,!1,!1),this.invalidate()):this.render()):this.sortcolumn||this.groupable&&0<this.groups.length?(this.dataview.reloaddata(),this.render()):("updaterow"===e&&(this.dataview.refresh(),this.virtualmode||this._render(!0,!0,!1,!1,!1)),this._cellscache=new Array,this._pagescache=new Array,this._renderrows(this.virtualsizeinfo)),this.showfilterrow&&this.filterable&&this.filterrow&&this._updatelistfilters(!0)},updaterow:function(t,i,a){if(null==t||null==i)return!1;var e,s=this.that,r=!1;s._datachanged=!0,this._columnClassNameCache=[],this.pushToHistory&&(e=this.getrowdatabyid(t),this._undoRedoIndex=-1,this._undoRedo.push({action:"updaterow",data:{id:t,rowdata:i,oldrowdata:e}}));function l(i,e,s){if(i._loading)throw new Error("jqxGrid: "+i.loadingerrormessage);var r=!1;se.isArray(e)?(se.each(e,function(e,t){r=i.dataview.updaterow(this,s[e],!1)}),i._cellscache=new Array,i._pagescache=new Array,i.dataview.refresh()):r=i.dataview.updaterow(e,s);var t,l,o=i.vScrollInstance.value;return null!=a&&1!=a||null!=i._updating&&0!=i._updating||i._updateGridData("updaterow"),i.showaggregates&&i._updatecolumnsaggregates&&i._updatecolumnsaggregates(),i.source&&i.source._knockoutdatasource&&!i._updateFromAdapter&&i.autokoupdates&&i.source._source._localdata&&(t=i.dataview.recordsbyid["id"+e],l=i.dataview.records.indexOf(t),l=i.source._source._localdata()[l],i.source.suspendKO=!0,i.source._source._localdata.replace(l,se.extend({},t)),i.source.suspendKO=!1),i.source&&i.source._source.localdata&&"observableArray"===i.source._source.localdata.name&&(i.source._source.localdata._updating||(i.source._source.localdata._updating=!0,e=i.getrowboundindexbyid(e),i.source._source.localdata.set(e,s),i.source._source.localdata._updating=!1)),i.vScrollInstance.setPosition(o),r}if(this.source.updaterow)try{null==(r=this.source.updaterow(t,i,function(e){1==e||null==e?l(s,t,i):r=!1}))&&(r=!0)}catch(e){r=!1}else r=l(s,t,i);return r},deleterow:function(t,n){if(null==t)return!1;var i=!(this._datachanged=!0),s=this.that,d=this.getrowboundindexbyid(t),h=new Array;new Array;if(null!=d&&(0<=this.selectedrowindexes.indexOf(d)&&this.selectedrowindexes.splice(this.selectedrowindexes.indexOf(d),1),this.selectedrowindex==d&&(this.selectedrowindex=-1),!this.virtualmode)){if(0<=s.selectionmode.indexOf("row"))se.each(this.selectedrowindexes,function(){var e=s.getrowid(this);h.push(e)}),this.selectedrowindexes=new Array,this.selectedrowindex=-1;else if(0<=s.selectionmode.indexOf("cell"))for(var e in s.selectedcells){var r=s.selectedcells[e],l=s.getrowid(r.rowindex);r.rowid=l}this._rendervisualrows()}function o(t,e){if(t._loading)throw new Error("jqxGrid: "+t.loadingerrormessage);var i=!1,s=t.vScrollInstance.value;if(se.isArray(e)?(se.each(e,function(){i=t.dataview.deleterow(this,!1)}),t._cellscache=new Array,t._pagescache=new Array,t.dataview.refresh()):i=t.dataview.deleterow(e),!t.virtualmode)if(0<=t.selectionmode.indexOf("row"))se.each(h,function(){var e=t.getrowboundindexbyid(this);-1!=e&&t.selectrow(e,!1)});else{var r,l=new Array;for(r in t.selectedcells){var o=t.selectedcells[r],a=o.rowid,a=t.getrowboundindexbyid(a);-1!=a&&(l[(o.rowindex=a)+"_"+o.datafield]=o)}t.selectedcells=l}return null!=t._updating&&0!=t._updating||null!=n&&1!=n||setTimeout(function(){t._render(!0,!0,!1,!1),"visible"!=t.vScrollBar.css("visibility")&&(t._arrange(),t._updatecolumnwidths(),t._updatecellwidths(),t._renderrows(t.virtualsizeinfo))}),t.source&&t.source._knockoutdatasource&&!t._updateFromAdapter&&t.autokoupdates&&t.source._source._localdata&&(t.source.suspendKO=!0,t.source._source._localdata.pop(),t.source.suspendKO=!1),t.source&&t.source._source.localdata&&"observableArray"===t.source._source.localdata.name&&(t.source._source.localdata._updating||(t.source._source.localdata._updating=!0,t.source._source.localdata.splice(d,1),t.source._source.localdata._updating=!1)),!t.dataview.sortby||"many"===t.sortmode||(e=t.getsortinformation()).sortcolumn&&(t.dataview.clearsortdata(),t.dataview.sortby(e.sortcolumn,e.sortdirection?e.sortdirection.ascending:null)),t.vScrollInstance.setPosition(s),i}if(this.source.deleterow)try{this.source.deleterow(t,function(e){1!=e&&null!=e||o(s,t)}),null==i&&(i=!0)}catch(e){i=!1}else i=o(s,t);return i},addrow:function(i,s,r){if(null==s)return!1;this._datachanged=!0,null==r&&(r="last");var t=!1,l=this.that;if(null==i){var o=this.dataview.filters&&0<this.dataview.filters.length?this.dataview.cachedrecords.length:this.dataview.totalrecords;if(se.isArray(s)){var a=new Array;se.each(s,function(e,t){e=l.dataview.getid(l.dataview.source.id,s[e],o+e);a.push(e)}),i=a}else for(i=this.dataview.getid(this.dataview.source.id,s,o);null!=this.dataview.recordsbyid["id"+i];)i++}function n(s,r,e,l){if(s._loading)throw new Error("jqxGrid: "+s.loadingerrormessage);var t,i=s.vScrollInstance.value,o=!1;return se.isArray(e)?(se.each(e,function(e,t){null!=this.dataindex&&delete this.dataindex;var i=null;null!=r&&null!=r[e]&&(i=r[e]),o=s.dataview.addrow(i,this,l,!1)}),s._cellscache=new Array,s._pagescache=new Array,s.dataview.refresh()):(null!=e&&null!=e.dataindex&&delete e.dataindex,o=s.dataview.addrow(r,e,l)),null!=s._updating&&0!=s._updating||(s._render(!0,!0,!1,!1),s.invalidate()),s.source&&s.source._knockoutdatasource&&!s._updateFromAdapter&&s.autokoupdates&&s.source._source._localdata&&(s.source.suspendKO=!0,s.source._source._localdata.push(e),s.source.suspendKO=!1),s.source&&s.source._source.localdata&&"observableArray"===s.source._source.localdata.name&&(s.source._source.localdata._updating||(s.source._source.localdata._updating=!0,t=s.getrowboundindexbyid(r),s.source._source.localdata.set(t,e),s.source._source.localdata._updating=!1)),"deferred"!=s.scrollmode?s.vScrollInstance.setPosition(i):s.vScrollInstance.setPosition(0),o}if(this.source&&this.source.addrow){try{null==(t=this.source.addrow(i,s,r,function(e,t){1!=e&&null!=e||(null!=t&&(i=t),n(l,i,s,r))}))&&(t=!0)}catch(e){t=!1}if(0==t)return!1}else n(this,i,s,r);return t},_findvisiblerow:function(e,t){null==e&&(e=parseInt(this.vScrollInstance.value));var i=0;null!=t&&null!=t||(t=this.rows.records);for(var s=t.length;i<=s;){var r=parseInt((i+s)/2),l=t[r];if(null==l)break;if(l.top>e&&l.top+l.height>e)s=r-1;else{if(!(l.top<e&&l.top+l.height<e))return r;i=r+1}}return-1},_updatecellwidths:function(){var e=this.virtualsizeinfo;if(e){var t=this.that;if(null!=t.gridcontent){null==t.table&&(t.table=t.gridcontent.find("#contenttable"+t.element.id));var i=t.groupable&&0<t.groups.length,s=0,r=e.visiblerecords;if(t.pageable&&(t.autoheight||t.autorowheight)&&(r=t.dataview.pagesize,t.groupable&&(t.dataview.updateview(),r=t.dataview.rows.length)),t.groupable||t.pageable||!t.autoheight&&!t.autorowheight||(r=t.dataview.totalrecords),t.rowdetails&&(r+=t.dataview.pagesize),t.columns.records){for(var l=t.columns.records.length,o=t.table[0].rows,a=0;a<r;a++){var n=o[a];if(!n)break;for(var d=n.cells,h=0,c=0;c<l;c++){var u=t.columns.records[c],g=u.width;u.adaptivewidth&&(g=u.adaptivewidth);var p=d[c];parseInt(p.style.left)!=h&&(p.style.left=h+"px"),parseInt(p.style.width)!=g&&(p.style.width=g+"px"),u.hidden&&u.hideable||u.adaptivehidden?p.style.display="none":h+=parseFloat(g)}0==s&&(t.table.width(parseFloat(h)+2),s=h)}t.showaggregates&&t._updateaggregates&&t._updateaggregates(),t.showfilterrow&&t.filterable&&t._updatefilterrowui&&t._updatefilterrowui(),t.showeverpresentrow&&t._updateaddnewrowui(),t._updatescrollbarsafterrowsprerender(),i&&t._renderrows(t.virtualsizeinfo)}}}},_updatescrollbarsafterrowsprerender:function(){var e=this.that,t=e.hScrollBar[0].style.visibility,i=0,s=e.vScrollBar[0].style.visibility;"visible"==s&&(i=e.scrollbarsize+3),0==e.scrollbarsize&&(i=0),e.scrollbarautoshow&&(i=0);var r=0<=(r=e.element.style.width).toString().indexOf("%")?e.host.width():parseInt(r);parseInt(e.table[0].style.width)-2>r-i?("visible"!=t&&(e.autowidth||(e.hScrollBar[0].style.visibility="visible"),e._arrange()),"visible"==s?"deferred"==e.scrollmode||e.virtualmode?e._updatevscrollbarmax():e.virtualsizeinfo&&(s=e.virtualsizeinfo.virtualheight-e._gettableheight(),!isNaN(s)&&0<s&&("hidden"!=t?e.vScrollBar.jqxScrollBar("max",s+e.scrollbarsize+4):e.vScrollBar.jqxScrollBar("max",s))):i=-2,e.hScrollBar.jqxScrollBar("max",i+e.table.width()-e.host.width())):"hidden"!=t&&(e.hScrollBar.css("visibility","hidden"),e._arrange()),e._renderhorizontalscroll()},_hascolumnstyle:function(){if(void 0!==this._hascolumnstyles)return this._hascolumnstyles;this._hascolumnstyles=!1;for(var e=0;e<this.columns.records.length;e++){var t=this.columns.records[e];if(t.style.headerBackgroundColor||t.style.headerColor||t.style.headerBackgroundHoveredColor||t.style.headerHoveredColor||t.style.headerBackgroundSelectedColor||t.style.headerSelectedColor||t.style.backgroundColor||t.style.color||t.style.backgroundHoveredColor||t.style.hoveredColor||t.style.backgroundSelectedColor||t.style.selectedColor)return this._hascolumnstyles=!0}return!1},_prerenderrows:function(e){var t=this.that;if(1==t.prerenderrequired&&(t.prerenderrequired=!1,t.editable&&t._destroyeditors&&t._destroyeditors(),null!=t.gridcontent)){t.gridcontent.find("#contenttable"+t.element.id).remove(),null!=t.table&&(t.table.remove(),t.table=null),t.table=se('<div id="contenttable'+t.element.id+'" style="overflow: hidden; position: relative;"></div>'),t.gridcontent.addClass(t.toTP("jqx-grid-content")),t.gridcontent.addClass(t.toTP("jqx-widget-content")),t.gridcontent.append(t.table);var i=t.groupable&&0<t.groups.length,s=0;t.table[0].rows=new Array;var r=t.toTP("jqx-grid-cell");i&&(r=" "+t.toTP("jqx-grid-group-cell"));var l=e.visiblerecords;if(t.pageable&&(t.autoheight||t.autorowheight)&&(l=t.dataview.pagesize,t.groupable&&(t.dataview.updateview(),(l=t.dataview.rows.length)<t.dataview.pagesize&&(l=t.dataview.pagesize))),t.pageable||!t.autoheight&&!t.autorowheight||(l=t.dataview.totalrecords),t.groupable&&0<t.groups.length&&(t.autoheight||t.autorowheight)&&!t.pageable&&(l=t.dataview.rows.length),t.rowdetails&&(t.autoheight||t.autorowheight?l+=t.dataview.pagesize:l+=l),t.columns.records){var o=t.columns.records.length;se.jqx.browser.msie&&8<se.jqx.browser.version&&t.table.css("opacity","0.99"),se.jqx.browser.mozilla,-1!=navigator.userAgent.indexOf("Safari")&&t.table.css("opacity","0.99");var a=se.jqx.browser.msie&&se.jqx.browser.version<8;a&&t.host.attr("hideFocus","true");var n=t.tableZIndex;n<l*o&&(n=l*o);t.dataview.records.length,t.isTouchDevice();var d="";t._hiddencolumns=!1;for(var h=5+t.columns.records.length,c=0;c<l;c++){var u='<div role="row" style="position: relative; height:'+t.rowsheight+'px;" id="row'+c+t.element.id+'">';a&&(u='<div role="row" style="position: relative; z-index: '+n+"; height:"+t.rowsheight+'px;" id="row'+c+t.element.id+'">',n--);for(var g=0,p=0;p<o;p++)(x=(f=t.columns.records[p]).width)<f.minwidth&&(x=f.minwidth),x>f.maxwidth&&(x=f.maxwidth),t.rtl?(b='<div columnindex="'+p+'" role="gridcell" style="left: '+g+"px; z-index: "+(n-o+2*p)+"; width:"+x+"px;",n--):b='<div columnindex="'+p+'" role="gridcell" style="left: '+g+"px; z-index: "+n--+"; width:"+x+"px;",f.hidden&&f.hideable||f.adaptivehidden?(b+="display: none;",t._hiddencolumns=!0,n++):g+=x,0===c&&0===p&&(b+='" tabindex="'+h+'"'),b+='" class="'+r+'">',b+=this._defaultcellsrenderer("",f),u+=b+="</div>";0==s&&(t.table.width(parseInt(g)+2),s=g),d+=u+="</div>"}t.WinJS?MSApp.execUnsafeLocalFunction(function(){t.table.html(d)}):t.table[0].innerHTML=d,t.table[0].rows=new Array;for(var m=t.table.children(),c=0;c<l;c++){var w=m[c];t.table[0].rows.push(w),w.cells=new Array;for(var v=se(w).children(),p=0;p<o;p++)w.cells.push(v[p])}if(0==l){g=0;t.showemptyrow&&(u=se('<div style="position: relative;" id="row0'+t.element.id+'"></div>'),t.table.append(u),u.height(t.rowsheight),t.table[0].rows[0]=u[0],t.table[0].rows[0].cells=new Array);for(p=0;p<o;p++){var f,b,x=(f=t.columns.records[p]).width;t.showemptyrow&&((b=se('<div style="position: absolute; height: 100%; left: '+g+"px; z-index: "+n--+"; width:"+x+'px;" class="'+r+'"></div>')).height(t.rowsheight),u.append(b),t.table[0].rows[0].cells[p]=b[0]),x<f.minwidth&&(x=f.minwidth),x>f.maxwidth&&(x=f.maxwidth),f.hidden&&f.hideable||f.adaptivehidden||(g+=x)}t.table.width(parseInt(g)+2),s=g}t._updatescrollbarsafterrowsprerender(),t.rendered&&t.rendered("rows"),t.toCompile=new Array,t._addoverlayelement()}}},_groupsheader:function(){return this.groupable&&this.showgroupsheader},_arrange:function(){var e=null,t=null;this.tableheight=null;var i=this.that,s=!1,r=!1;if((null==i.width||-1==i.width.toString().indexOf("px"))&&(null==i.width||isNaN(i.width))||(e=i.width),null!=i.width&&-1!=i.width.toString().indexOf("%")&&(e=i.width,s=!0),i.scrollbarautoshow&&(i.vScrollBar[0].style.display="none",i.hScrollBar[0].style.display="none",i.vScrollBar[0].style.zIndex=i.tableZIndex+i.headerZIndex,i.hScrollBar[0].style.zIndex=i.tableZIndex+i.headerZIndex),i.autowidth){for(var l=0,o=0;o<i.columns.records.length;o++){var a=i.columns.records[o].width;l+="auto"==a?a=i._measureElementWidth(i.columns.records[o].text):a}"hidden"!=i.vScrollBar.css("visibility")&&(l+=i.scrollbarsize+4),e=l,i.width=e}(null!=i.height&&-1!=i.height.toString().indexOf("px")||null!=i.height&&!isNaN(i.height))&&(t=i.height),null!=i.height&&-1!=i.height.toString().indexOf("%")&&(t=i.height,r=!0);var n=function(){var e=0;return e+=i.showheader&&null!=i.columnsheader?i.columnsheader.height()+2:0,i.pageable&&(e+=i.pagerheight),i._groupsheader()&&(e+=i.groupsheaderheight),i.showtoolbar&&(e+=i.toolbarheight),i.showfilterbar&&(e+=i.toolbarheight),i.showstatusbar&&(e+=i.statusbarheight),i.showeverpresentrow&&"bottom"===i.everpresentrowposition&&(e+=i.everpresentrowheight),"visible"==i.hScrollBar[0].style.visibility&&(e+=15),e};i.autoheight&&i.virtualsizeinfo?i.pageable&&i.gotopage?(t=(c=0)+(i._pageviews[0]?i._pageviews[0].height:0),t+=n(),i.showemptyrow&&0==i.dataview.totalrecords&&(t+=i.rowsheight)):(c=i.host.height()-i._gettableheight(),0<i._pageviews.length?(t=c+i._pageviews[i._pageviews.length-1].height+i._pageviews[i._pageviews.length-1].top,i.vScrollBar[0].style.visibility="hidden"):(t=n(),i.showemptyrow&&(t+=i.rowsheight))):i.autoheight&&(t=i.dataview.totalrecords*i.rowsheight,i.pageable&&i.gotopage&&(t=i.pagesize*i.rowsheight),i._loading&&(t=250,i.dataloadelement.height(t)),1e4<(t+=n())&&(t=1e4)),null!=e?(e=parseInt(e),s?i.element.style.width=i.width:i.element.style.width!=parseInt(i.width)+"px"&&(i.element.style.width=parseInt(i.width)+"px"),s&&((e=i.host.width())<=2&&(e=600,i.host.width(e)),i._oldWidth||(i._oldWidth=e))):i.host.width(250),null!=t?(this.autoheight&&(t+=2),r||(t=parseInt(t)),r?i.element.style.height=i.height:i.element.style.height!=parseInt(t)+"px"&&(i.element.style.height=parseInt(t)+"px"),r&&!i.autoheight&&(0==(t=i.host.height())&&(t=400,i.host.height(t)),i._oldHeight||(i._oldHeight=t))):i.host.height(250),i.autoheight&&(i.tableheight=null,i._gettableheight());var d=0;i.showtoolbar?(i.toolbar.width(e),i.toolbar.height(i.toolbarheight-1),i.toolbar.css("top",0),d+=i.toolbarheight,t-=parseInt(i.toolbarheight)):i.toolbar[0].style.height="0px",i.showfilterbar?(i.filterbar.width(e),i.filterbar.height(i.toolbarheight-1),i.filterbar.css("top",d),d+=i.toolbarheight,t-=parseInt(i.toolbarheight)):i.filterbar[0].style.height="0px",i.showstatusbar?(i.showaggregates?i.statusbar.width(i.table?Math.max(e,i.table.width()):e):i.statusbar.width(e),i.statusbar.height(i.statusbarheight)):i.statusbar[0].style.height="0px",i.showeverpresentrow&&"bottom"===i.everpresentrowposition?(i.addnewrow.width(e),i.addnewrow.height(i.everpresentrowheight)):i.addnewrow[0].style.height="0px",i._groupsheader()?(i.groupsheader.width(e),i.groupsheader.height(i.groupsheaderheight),i.groupsheader.css("top",d),d+=u=i.groupsheader.height()+1,u<t&&(t-=parseInt(u))):(i.groupsheader[0].style.width!=e+"px"&&(i.groupsheader[0].style.width=parseInt(e)+"px"),i.groupsheader[0].style.height="0px",i.groupsheader[0].style.top!=d+"px"&&i.groupsheader.css("top",d),g=d+(u=i.showgroupsheader&&i.groupable?i.groupsheaderheight:0)+"px",i.content[0].style.top!=g&&i.content.css("top",d+i.groupsheaderheight));var h=i.scrollbarsize;isNaN(h)&&(h=parseInt(h),isNaN(h)?h="17px":h+="px"),h=parseInt(h);var c=2,n=0;"visible"==i.vScrollBar[0].style.visibility&&(n=h+4),"visible"==i.hScrollBar[0].style.visibility&&(c=h+4+2),0==h&&(c=n=0);s=0;i.pageable&&(s=i.pagerheight,c+=i.pagerheight),i.showstatusbar&&(c+=i.statusbarheight,s+=i.statusbarheight),i.showeverpresentrow&&"bottom"===i.everpresentrowposition&&(c+=i.everpresentrowheight,s+=i.everpresentrowheight),i.hScrollBar[0].style.height!=h+"px"&&(i.hScrollBar[0].style.height=parseInt(h)+"px"),i.hScrollBar[0].style.top==d+t-4-h-s+"px"&&"0px"==i.hScrollBar[0].style.left||i.hScrollBar.css({top:d+t-4-h-s+"px",left:"0px"});var r=i.hScrollBar[0].style.width,u=!1,g=!1;0==n?r!=e-2+"px"&&(i.hScrollBar.width(e-2),u=!0):r!=e-h-4+"px"&&(i.hScrollBar.width(e-h-4+"px"),u=!0),i.autoheight||(i.vScrollBar[0].style.width!=h+"px"&&(i.vScrollBar.width(h),g=!0),i.vScrollBar[0].style.height!=parseInt(t)-c+"px"&&(i.vScrollBar.height(parseInt(t)-c+"px"),g=!0),i.vScrollBar[0].style.left==parseInt(e)-parseInt(h)-4+"px"&&i.vScrollBar[0].style.top==d+"px"||i.vScrollBar.css({left:parseInt(e)-parseInt(h)-4+"px",top:d})),i.rtl&&(i.vScrollBar.css({left:"0px",top:d}),"hidden"!=i.vScrollBar.css("visibility")&&i.hScrollBar.css({left:h+2}));r=i.vScrollInstance;r.disabled=i.disabled,i.autoheight||g&&r.refresh();r=i.hScrollInstance;r.disabled=i.disabled,u&&r.refresh(),i.autowidth&&(i.hScrollBar[0].style.visibility="hidden"),i.statusbarheight=parseInt(i.statusbarheight),i.toolbarheight=parseInt(i.toolbarheight);r=function(e){var t;"visible"==e.vScrollBar[0].style.visibility&&"visible"==e.hScrollBar[0].style.visibility?(e.bottomRight[0].style.visibility="visible",e.bottomRight.css({left:1+parseInt(e.vScrollBar.css("left")),top:parseInt(e.hScrollBar.css("top"))}),e.rtl&&e.bottomRight.css("left","0px"),e.bottomRight.width(parseInt(h)+3),e.bottomRight.height(parseInt(h)+4),0<(t=e.showeverpresentrow&&"bottom"==e.everpresentrowposition?e.everpresentrowheight:0)&&!e.showaggregates&&(e.bottomRight.css("z-index",99),e.bottomRight.height(parseInt(h)+4+t),e.bottomRight.css({top:parseInt(e.hScrollBar.css("top"))-t})),e.showaggregates&&(e.bottomRight.css("z-index",99),e.bottomRight.height(parseInt(h)+4+e.statusbarheight+t),e.bottomRight.css({top:parseInt(e.hScrollBar.css("top"))-e.statusbarheight-t}))):e.bottomRight[0].style.visibility="hidden"};r(this),i.content[0].style.width!=e-n+"px"&&i.content.width(e-n),i.content[0].style.height!=t-c+3+"px"&&i.content.height(t-c+3),i.scrollbarautoshow&&(i.content[0].style.width!=e+"px"&&i.content.width(e),i.content[0].style.height!=t+"px"&&i.content.height(t)),i.content[0].style.top!=d+"px"&&i.content.css("top",d),i.rtl&&(i.content.css("left",n),i.scrollbarautoshow&&i.content.css("left","0px"),!i.table||(c=i.table.width())<e-n&&i.content.css("left",e-c)),i.showstatusbar&&(i.statusbar.css("top",d+t-i.statusbarheight-(i.pageable?i.pagerheight:0)),i.showaggregates&&("visible"==i.hScrollBar.css("visibility")&&(i.hScrollBar.css({top:d+t-4-h-s+i.statusbarheight+"px"}),i.statusbar.css("top",1+d+t-h-5-i.statusbarheight-(i.pageable?i.pagerheight:0))),r(this)),i.rtl&&("visible"!=i.hScrollBar.css("visibility")?i.statusbar.css("left",i.content.css("left")):i.statusbar.css("left","0px"))),i.showeverpresentrow&&"bottom"===i.everpresentrowposition&&(i.addnewrow.css("top",d+t-(i.showstatusbar?i.statusbarheight:0)-(i.pageable?i.pagerheight:0)-i.everpresentrowheight),i.rtl&&("visible"!=i.hScrollBar.css("visibility")?i.addnewrow.css("left",i.content.css("left")):i.addnewrow.css("left","0px"))),i.pageable?(i.pager.width(e),i.pager.height(i.pagerheight),i.pager.css("top",d+t-i.pagerheight-1)):i.pager[0].style.height="0px",null!=i.table&&(d=-2,"visible"==i.vScrollBar[0].style.visibility&&(d=i.scrollbarsize+3),"visible"==i.hScrollBar[0].style.visibility&&(0<=(d=d+i.table.width()-i.host.width())&&i.hScrollBar.jqxScrollBar("max",d),"visible"==i.hScrollBar[0].style.visibility&&0==d&&(i.hScrollBar[0].style.visibility="hidden",i._arrange()))),e!=parseInt(i.dataloadelement[0].style.width)&&(i.dataloadelement[0].style.width=i.element.style.width),t!=parseInt(i.dataloadelement[0].style.height)&&(i.dataloadelement[0].style.height=i.element.style.height),this.pagergotoinput&&(this.pagergotoinput.offset().top!==this.pagergoto.offset().top?(this.pagergotoinput.css("visibility","hidden"),this.pagergoto.css("visibility","hidden")):(this.pagergotoinput.css("visibility","inherit"),this.pagergoto.css("visibility","inherit"))),i._hostwidth=e},destroy:function(){if(delete se.jqx.dataFormat.datescache,delete this.gridlocalization,delete this._undoRedo,se.jqx.utilities.resize(this.host,null,!0),""==document.referrer&&!window.frameElement||null==window.top||window.top==window.self||this.removeHandler(se(window.top.document),"mouseup.grid"+this.element.id),this.table&&this.table[0]){for(var e=this.table[0].rows.length,t=0;t<e;t++){for(var i=this.table[0].rows[t],s=i.cells.length,r=0;r<s;r++)se(i.cells[r]).remove(),i.cells[r]=null,delete i.cells[r];i.cells=null,i.cells&&delete i.cells,se(this.table[0].rows[t]).remove(),this.table[0].rows[t]=null}try{delete this.table[0].rows}catch(e){}this.table.remove(),delete this.table}if(this.columns&&this.columns.records){for(t=0;t<this.columns.records.length;t++){var l=this.columns.records[t];l.addnewrowwidget&&l.destroyeverpresentrowwidget&&l.destroyeverpresentrowwidget(l.addnewrowwidget),l.destroywidget&&l.destroywidget&&l.destroywidget(l.widget),this._removecolumnhandlers(this.columns.records[t]),l.element&&(se(l.element).remove(),se(l.sortasc).remove(),se(l.sortdesc).remove(),se(l.filtericon).remove(),se(l.menu).remove(),l.element=null,l.uielement=null,l.sortasc=null,l.sortdesc=null,l.filtericon=null,l.menu=null,delete l.element,delete l.uielement,delete l.sortasc,delete l.sortdesc,delete l.filtericon,delete l.menu,delete this.columnsrow[0].cells[t])}try{delete this.columnsrow[0].cells}catch(e){}delete this.columnsrow}var o,a,n;if(se.removeData(document.body,"contextmenu"+this.element.id),this.host.jqxDropDownList&&this._destroyfilterpanel&&this._destroyfilterpanel(),this.editable&&this._destroyeditors&&this._destroyeditors(),this.filterable&&this._destroyedfilters&&this.showfilterrow&&this._destroyedfilters(),this.host.jqxMenu&&this.gridmenu&&(this.removeHandler(se(document),"click.menu"+this.element.id),this.removeHandler(this.gridmenu,"keydown"),this.removeHandler(this.gridmenu,"closed"),this.removeHandler(this.gridmenu,"itemclick"),this.gridmenu.jqxMenu("destroy"),this.gridmenu=null),this.pagershowrowscombo&&(this.pagershowrowscombo.jqxDropDownList("destroy"),this.pagershowrowscombo=null),this.pagerrightbutton&&(this.removeHandler(this.pagerrightbutton,"mousedown"),this.removeHandler(this.pagerrightbutton,"mouseup"),this.removeHandler(this.pagerrightbutton,"click"),this.pagerrightbutton.jqxButton("destroy"),this.pagerrightbutton=null),this.pagerleftbutton&&(this.removeHandler(this.pagerleftbutton,"mousedown"),this.removeHandler(this.pagerleftbutton,"mouseup"),this.removeHandler(this.pagerleftbutton,"click"),this.pagerleftbutton.jqxButton("destroy"),this.removeHandler(se(document),"mouseup.pagerbuttons"+this.element.id),this.pagerleftbutton=null),this.removeHandler(se(document),"selectstart."+this.element.id),this.removeHandler(se(document),"mousedown.resize"+this.element.id),this.removeHandler(se(document),"mouseup.resize"+this.element.id),this.removeHandler(se(document),"mousemove.resize"+this.element.id),this.isTouchDevice()&&(o=se.jqx.mobile.getTouchEventName("touchmove")+".resize"+this.element.id,a=se.jqx.mobile.getTouchEventName("touchstart")+".resize"+this.element.id,n=se.jqx.mobile.getTouchEventName("touchend")+".resize"+this.element.id,this.removeHandler(se(document),o),this.removeHandler(se(document),a),this.removeHandler(se(document),n)),this.removeHandler(se(document),"mousedown.reorder"+this.element.id),this.removeHandler(se(document),"mouseup.reorder"+this.element.id),this.removeHandler(se(document),"mousemove.reorder"+this.element.id),this.isTouchDevice()&&(o=se.jqx.mobile.getTouchEventName("touchmove")+".reorder"+this.element.id,a=se.jqx.mobile.getTouchEventName("touchstart")+".reorder"+this.element.id,n=se.jqx.mobile.getTouchEventName("touchend")+".reorder"+this.element.id,this.removeHandler(se(document),o),this.removeHandler(se(document),a),this.removeHandler(se(document),n)),this.removeHandler(se(window),"resize."+this.element.id),this.resizeline&&this.resizeline.remove(),this.resizestartline&&this.resizestartline.remove(),this.groupable&&(o="mousemove.grouping"+this.element.id,a="mousedown.grouping"+this.element.id,n="mouseup.grouping"+this.element.id,this.removeHandler(se(document),o),this.removeHandler(se(document),a),this.removeHandler(se(document),n)),this.columnsreorder&&(o="mousemove.reorder"+this.element.id,a="mousedown.reorder"+this.element.id,n="mouseup.reorder"+this.element.id,this.removeHandler(se(document),o),this.removeHandler(se(document),a),this.removeHandler(se(document),n),delete this.columnsbounds),this.content&&(this.removeHandler(this.content,"mousedown"),this.removeHandler(this.content,"scroll")),this._removeHandlers(),this.hScrollInstance.destroy(),this.vScrollInstance.destroy(),this.hScrollBar.remove(),this.vScrollBar.remove(),this._clearcaches(),delete this.hScrollInstance,delete this.vScrollInstance,delete this.visiblerows,delete this.hittestinfo,delete this.rows,delete this.columns,delete this.columnsbydatafield,delete this.pagescache,delete this.pageviews,delete this.cellscache,delete this.heights,delete this.hiddens,delete this.hiddenboundrows,delete this.heightboundrows,delete this.detailboundrows,delete this.details,delete this.expandedgroups,delete this._rowdetailscache,delete this._rowdetailselementscache,delete this.columnsmenu,this.columnsheader&&(this.columnsheader.remove(),delete this.columnsheader),this.selectionarea&&(this.selectionarea.remove(),delete this.selectionarea),this.menuitemsarray&&this.menuitemsarray.length)for(var d=this.menuitemsarray.length,t=0;t<d;t++)se(this.menuitemsarray[t]).remove();delete this.menuitemsarray,this.dataview._clearcaches(),this.content.removeClass(),this.content.remove(),this.content=null,delete this.content,this.vScrollBar=null,this.hScrollBar=null,delete this.hScrollBar,delete this.hScrollBar,this.gridcontent&&(this.gridcontent.remove(),delete this.gridcontent),this.gridmenu&&(this.gridmenu=null,delete this.gridmenu),delete this._mousemovefunc,delete this._mousewheelfunc,this.dataview.destroy(),delete this.dataview,this.bottomRight.remove(),delete this.bottomRight,this.wrapper.remove(),delete this.wrapper,this.pagerdiv&&(this.pagerdiv.remove(),delete this.pagerdiv),this.pagerpageinput&&(this.pagerpageinput.remove(),delete this.pagerpageinput),this.pagergoto&&(this.pagergoto.remove(),delete this.pagergoto),this.pagershowrows&&(this.pagershowrows.remove(),delete this.pagershowrows),this.pagerfirstbutton&&(this.pagerfirstbutton.remove(),delete this.pagerfirstbutton),this.pagerlastbutton&&(this.pagerlastbutton.remove(),delete this.pagerlastbutton),this.pagerbuttons&&(this.pagerbuttons.remove(),delete this.pagerbuttons),this.pagerdetails&&(this.pagerdetails.remove(),delete this.pagerdetails),this.pagergotoinput&&(this.pagergotoinput.remove(),delete this.pagergotoinput),this.pager.remove(),delete this.pager,this.groupsheader.remove(),delete this.groupsheader,this.dataloadelement.remove(),delete this.dataloadelement,this.toolbar.remove(),delete this.toolbar,this.statusbar.remove(),delete this.statusbar,this.host.removeData(),this.host.removeClass(),this.host.remove(),this.host=null,delete this.host,delete this.element,delete this.set,delete this.get,delete this.that,delete this.call},_initializeColumns:function(){var e=this.source?this.source.datafields:null;null==e&&this.source&&this.source._source&&(e=this.source._source.datafields);var i=!!e&&0<e.length;if(this.autogeneratecolumns){var t,s=new Array;if(e)se.each(e,function(){var e={datafield:this.name,text:this.text||this.name,cellsformat:this.format||""};s.push(e)});else if(0<this.source.records.length)for(t in this.source.records[0])"uid"!=t&&(n={width:100,datafield:t,text:t},s.push(n));this.columns=s}if(this.columns&&this.columns.records)for(var r=0;r<this.columns.records.length;r++)this._removecolumnhandlers(this.columns.records[r]);var l=this.that,o=new se.jqx.collection(this.element),a=0;this._haspinned=!1,this._columns?this.columns=this._columns:this._columns=this.columns,this.groupable&&se.each(this.groups,function(e){var t=new h(l,this);t.visibleindex=a++,t.width=l.groupindentwidth,o.add(t),t.grouped=!0,t.filterable=!1,t.sortable=!1,t.editable=!1,t.resizable=!1,t.draggable=!1}),this.rowdetails&&this.showrowdetailscolumn&&((n=new h(l,this)).visibleindex=a++,n.width=l.groupindentwidth,n.pinned=!0,n.editable=!1,n.filterable=!1,n.draggable=!1,n.groupable=!1,n.resizable=!1,o.add(n),l._haspinned=!0),"checkbox"==this.selectionmode&&((n=new h(l,null)).visibleindex=a++,n.width=l.groupindentwidth,n.checkboxcolumn=!0,n.editable=!1,n.columntype="checkbox",n.groupable=!1,n.draggable=!1,n.filterable=!1,n.resizable=!1,n.datafield="_checkboxcolumn",o.add(n));var n,d=new Array;se.each(this.columns,function(e){if(null!=l.columns[e]){var t=new h(l,this);if(t.visibleindex=a++,null!=this.dataField&&(this.datafield=this.dataField),this.pinned&&(l._haspinned=!0),l.showeverpresentrow&&("addButtonColumn"!==this.datafield&&"resetButtonColumn"!==this.datafield&&"updateButtonColumn"!==this.datafield&&"deleteButtonColumn"!==this.datafield||(t.editable=!1,t.groupable=!1,t.draggable=!1,t.filterable=!1,t.resizable=!1,t.menu=!1)),null==this.datafield)l.source&&l.source._source&&"array"==l.source._source.datatype&&(i||(l.source._source.datafields||(l.source._source.datafields=new Array),l.source._source.datafields.push({name:e.toString()})),this.datafield=e.toString(),this.displayfield=e.toString(),t.datafield=this.datafield,t.displayfield=this.displayfield);else{if(d[this.datafield])throw new Error("jqxGrid: Invalid column 'datafield' setting. jqxGrid's columns should be initialized with unique data fields.");d[this.datafield]=!0}o.add(t)}}),this.adaptive&&((n=new h(l,null)).visibleindex=a++,n.width=l.groupindentwidth,n.editable=!1,n.columntype="adaptive",n.cellsalign="center",n.groupable=!1,n.draggable=!1,n.menu=!1,n.sortable=!1,n.filterable=!1,n.resizable=!1,n.datafield="_adaptivecolumn",o.add(n)),this.rtl&&o.records.reverse(),this.columns=o},_initializeRows:function(){var e=new se.jqx.collection(this.element);this.rows&&this.rows.clear(),this.rows=e},_raiseEvent:function(e,t){if(null==t&&(t={owner:null}),!1!==this._trigger){var i,s=this.events[e];this._camelCase||(s=s.toLowerCase()),2!=e&&15!=e||this.showeverpresentrow&&(0<=this.everpresentrowactions.indexOf("delete")||0<=this.everpresentrowactions.indexOf("update"))&&(this.updateeverpresentrow&&(i=this),setTimeout(function(){i.updateeverpresentrow()},50));e=t;e.owner=this;s=new se.Event(s);s.owner=this,s.args=e;e=this.host.trigger(s);return t=s.args,e}},wheel:function(e,t){if(t.autoheight&&"visible"!=t.hScrollBar.css("visibility"))return e.returnValue=!0;var i=0;if((e=e||window.event).originalEvent&&e.originalEvent.wheelDelta&&(e.wheelDelta=e.originalEvent.wheelDelta),e.wheelDelta?i=e.wheelDelta/120:e.detail&&(i=-e.detail/3),i){i=t._handleDelta(i);return i&&(e.preventDefault&&e.preventDefault(),null!=e.originalEvent&&(e.originalEvent.mouseHandled=!0),null!=e.stopPropagation&&e.stopPropagation()),!!i&&(i=!1,e.returnValue=!1)}e.preventDefault&&e.preventDefault(),e.returnValue=!1},_handleDelta:function(e){if("hidden"!=this.vScrollBar.css("visibility")){var t=this.vScrollInstance.value;if(e<0?this.scrollDown():this.scrollUp(),t!=this.vScrollInstance.value)return!0}else if("hidden"!=this.hScrollBar.css("visibility")){t=this.hScrollInstance.value;if(0<e?this.hScrollInstance.value>2*this.horizontalscrollbarstep?this.hScrollInstance.setPosition(this.hScrollInstance.value-2*this.horizontalscrollbarstep):this.hScrollInstance.setPosition(0):this.hScrollInstance.value<this.hScrollInstance.max?this.hScrollInstance.setPosition(this.hScrollInstance.value+2*this.horizontalscrollbarstep):this.hScrollInstance.setPosition(this.hScrollInstance.max),t!=this.hScrollInstance.value)return this._activeFilterElement&&this._activeFilterElement.jqxDropDownList("close"),!0}return!1},scrollDown:function(){var e;"hidden"!=this.vScrollBar.css("visibility")&&((e=this.vScrollInstance).value+this.rowsheight<=e.max?e.setPosition(parseInt(e.value)+this.rowsheight):e.setPosition(e.max))},scrollUp:function(){var e;"hidden"!=this.vScrollBar.css("visibility")&&((e=this.vScrollInstance).value-this.rowsheight>=e.min?e.setPosition(parseInt(e.value)-this.rowsheight):e.setPosition(e.min))},_removeHandlers:function(){var e=this.that;e.removeHandler(se(window),"orientationchange.jqxgrid"+e.element.id),e.removeHandler(se(window),"orientationchanged.jqxgrid"+e.element.id),e.removeHandler(e.vScrollBar,"valueChanged"),e.removeHandler(e.hScrollBar,"valueChanged"),e.vScrollInstance.valueChanged=null,e.hScrollInstance.valueChanged=null;var t="mousedown.jqxgrid";e.isTouchDevice()&&(t=se.jqx.mobile.getTouchEventName("touchend")),e.removeHandler(e.host,"dblclick.jqxgrid"),e.removeHandler(e.host,t),e.removeHandler(e.content,"mousemove",e._mousemovefunc),e.removeHandler(e.host,"mouseleave.jqxgrid"),e.removeHandler(e.content,"mouseenter"),e.removeHandler(e.content,"mouseleave"),e.removeHandler(e.content,"mousedown"),e.removeHandler(e.content,"scroll"),e.removeHandler(e.content,"selectstart."+e.element.id),e.removeHandler(e.host,"dragstart."+e.element.id),e.removeHandler(e.host,"keydown.edit"+e.element.id),e.removeHandler(se(document),"keydown.edit"+e.element.id),e.removeHandler(se(document),"keyup.edit"+e.element.id),e._mousemovedocumentfunc&&e.removeHandler(se(document),"mousemove.selection"+e.element.id,e._mousemovedocumentfunc),e.removeHandler(se(document),"mouseup.selection"+e.element.id),e._mousewheelfunc&&e.removeHandler(e.host,"mousewheel",e._mousewheelfunc),e.editable&&e.removeHandler(se(document),"mousedown.gridedit"+e.element.id),e.host.off&&(e.content.off("mousemove"),e.host.off("mousewheel"))},_addHandlers:function(){var h=this.that,i=h.isTouchDevice();i||h.addHandler(h.host,"dragstart."+h.element.id,function(e){return!1}),h.scrollbarautoshow&&(h.addHandler(h.host,"mouseenter.gridscroll"+h.element.id,function(e){h.vScrollBar.fadeIn("fast"),h.hScrollBar.fadeIn("fast")}),h.addHandler(h.host,"mouseleave.gridscroll"+h.element.id,function(e){h.vScrollInstance.isScrolling()||h.hScrollInstance.isScrolling()||(h.vScrollBar.fadeOut("fast"),h.hScrollBar.fadeOut("fast"))})),h.editable&&h.addHandler(se(document),"mousedown.gridedit"+h.element.id,function(s){if(h.editable&&h.begincelledit&&h.editcell&&!h.vScrollInstance.isScrolling()&&!h.vScrollInstance.isScrolling()){var e=h.host.coord(),t=h.host.width(),i=h.host.height(),r=!1,l=!1;if((s.pageY<e.top||s.pageY>e.top+i)&&(l=r=!0),(s.pageX<e.left||s.pageX>e.left+t)&&(r=!0),r){if(h.editcell&&h.editcell.editor)switch(h.editcell.columntype){case"datetimeinput":if(h.editcell.editor.jqxDateTimeInput&&h.editcell.editor.jqxDateTimeInput("container")&&"block"==h.editcell.editor.jqxDateTimeInput("container")[0].style.display){var o=h.editcell.editor.jqxDateTimeInput("container").coord().top,a=h.editcell.editor.jqxDateTimeInput("container").coord().top+h.editcell.editor.jqxDateTimeInput("container").height();if(!l||!(s.pageY<o||s.pageY>a))return;r=!0,h.editcell.editor.jqxDateTimeInput("close")}break;case"combobox":if(h.editcell.editor.jqxComboBox&&h.editcell.editor.jqxComboBox("container")&&"block"==h.editcell.editor.jqxComboBox("container")[0].style.display){o=h.editcell.editor.jqxComboBox("container").coord().top,a=h.editcell.editor.jqxComboBox("container").coord().top+h.editcell.editor.jqxComboBox("container").height();if(!l||!(s.pageY<o||s.pageY>a))return;r=!0,h.editcell.editor.jqxComboBox("close")}break;case"dropdownlist":if(h.editcell.editor.jqxDropDownList&&h.editcell.editor.jqxDropDownList("container")&&"block"==h.editcell.editor.jqxDropDownList("container")[0].style.display){o=h.editcell.editor.jqxDropDownList("container").coord().top,a=h.editcell.editor.jqxDropDownList("container").coord().top+h.editcell.editor.jqxDropDownList("container").height();if(!l||!(s.pageY<o||s.pageY>a))return;r=!0,h.editcell.editor.jqxDropDownList("close")}break;case"template":case"custom":for(var n=["jqxDropDownList","jqxComboBox","jqxDropDownButton","jqxDateTimeInput"],d=0;d<n.length;d++)if(0==function(e){var t=h.editcell.editor.data();if(t[e]&&t[e].instance.container&&"block"==t[e].instance.container[0].style.display){var i=t[e].instance,t=i.container.coord().top,e=i.container.coord().top+i.container.height();return!(!l||!(s.pageY<t||s.pageY>e))&&(r=!0,i.close(),!0)}}(n[d]))return}h.endcelledit(h.editcell.row,h.editcell.column,!1,!0),h._oldselectedcell=null}}}),h.vScrollInstance.valueChanged=function(e){h.virtualsizeinfo&&(h._closemenu(),"physical"!=h.scrollmode||null!=h.currentScrollValue&&Math.abs(h.currentScrollValue-e.currentValue),h._renderrows(h.virtualsizeinfo),h.currentScrollValue=e.currentValue,h.pageable||h.groupable||!h.dataview.virtualmode||(h.loadondemandupdate&&clearTimeout(h.loadondemandupdate),h.loadondemandupdate=setTimeout(function(){h.loadondemand=!0,h._renderrows(h.virtualsizeinfo)},100)),i&&(h._lastScroll=new Date))},h.hScrollInstance.valueChanged=function(e){var t;h.virtualsizeinfo&&(h._closemenu(),t=function(){h._renderhorizontalscroll(),h._renderrows(h.virtualsizeinfo),h.editcell&&!h.editrow&&h._showcelleditor&&h.editcell.editing&&(h.hScrollInstance.isScrolling()||h._showcelleditor(h.editcell.row,h.getcolumn(h.editcell.column),h.editcell.element,h.editcell.init))},i?t():(null==h._browser?h._isIE10():h._browser,navigator&&-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome")?(h._hScrollTimer&&clearTimeout(h._hScrollTimer),h._hScrollTimer=setTimeout(function(){t()},1)):se.jqx.browser.msie?(h._hScrollTimer&&clearTimeout(h._hScrollTimer),h._hScrollTimer=setTimeout(function(){t()},.01)):t()),i&&(h._lastScroll=new Date))},h._mousewheelfunc=h._mousewheelfunc||function(e){if(!h.editcell&&h.enablemousewheel)return h.wheel(e,h),!1},h.removeHandler(h.host,"mousewheel",h._mousewheelfunc),h.addHandler(h.host,"mousewheel",h._mousewheelfunc);var e,t="mousedown.jqxgrid";i&&(t=se.jqx.mobile.getTouchEventName("touchend")),h.addHandler(h.host,t,function(e){if(h.isTouchDevice()){if(h._newScroll=new Date,h._newScroll-h._lastScroll<500)return!1;if(se(e.target).ischildof(h.vScrollBar))return!1;if(se(e.target).ischildof(h.hScrollBar))return!1}h._mousedown=new Date;var t=h._handlemousedown(e,h);return h.isNestedGrid&&(h.resizablecolumn||h.columnsreorder||e.stopPropagation()),h._lastmousedown=new Date,t}),i||(h.addHandler(h.host,"dblclick.jqxgrid",function(e){return h.editable&&h.begincelledit&&"dblclick"==h.editmode?h._handledblclick(e,h):se.jqx.browser.msie&&se.jqx.browser.version<9&&h._handlemousedown(e,h),h.mousecaptured=!1,h._lastmousedown=new Date,!0}),h._mousemovefunc=function(e){if(h._handlemousemove)return h._handlemousemove(e,h)},h.addHandler(h.content,"mousemove",h._mousemovefunc),h._handlemousemoveselection&&(h._mousemovedocumentfunc=function(e){if(h._handlemousemoveselection)return h._handlemousemoveselection(e,h)},h.addHandler(se(document),"mousemove.selection"+h.element.id,h._mousemovedocumentfunc)),h.addHandler(se(document),"mouseup.selection"+h.element.id,function(e){var t;h._handlemouseupselection&&(e.shiftKey&&se(e.target).ischildof(h.host)&&(t=h.editable,h.editable=!1,h._lastmousedown=new Date(2e3,1,1),h._handlemousedown(e,h),h.mousecaptured=!0,h.editable=t),h._handlemouseupselection(e,h))}));try{""==document.referrer&&!window.frameElement||null==window.top||window.top==window.self||(e=null,window.parent&&document.referrer&&(e=document.referrer),e&&-1!=e.indexOf(document.location.host)&&h.addHandler(se(window.top.document),"mouseup.grid"+h.element.id,function(e){if(h._handlemouseupselection)try{h._handlemouseupselection(e,h)}catch(e){}}))}catch(e){}h.focused=!1,i||(h.addHandler(h.content,"mouseenter",function(e){h.focused=!0,h.wrapper&&(h.wrapper.attr("tabindex",1),h.content.attr("tabindex",2)),h._overlayElement&&(h.vScrollInstance.isScrolling()||h.hScrollInstance.isScrolling()?h._overlayElement[0].style.visibility="visible":h._overlayElement[0].style.visibility="hidden")}),h.addHandler(h.content,"mouseleave",function(e){h._handlemousemove&&h.enablehover&&h._clearhoverstyle(),h._overlayElement&&(h._overlayElement[0].style.visibility="hidden"),h.focused=!1}),(h.groupable||h.columnsreorder)&&h.addHandler(se(document),"selectstart."+h.element.id,function(e){if(!0===h.__drag)return!1}),h.addHandler(h.content,"selectstart."+h.element.id,function(e){if(h.enablebrowserselection)return!0;if(h.showfilterrow&&se(e.target).ischildof(h.filterrow))return!0;if(h.showeverpresentrow){if(se(e.target).ischildof(h.addnewrow))return!0;if(h.addnewrowtop&&se(e.target).ischildof(h.addnewrowtop))return!0}return!!(e.target.className&&0<=e.target.className.indexOf("jqx-grid-widget"))||!!h.editcell&&void(e.stopPropagation&&e.stopPropagation())}),h.addHandler(se(document),"keyup.edit"+h.element.id,function(e){h._keydown=!1}),h.addHandler(se(document),"keydown.edit"+h.element.id,function(e){if(h.adaptiveview)return!0;h._keydown=!h.editcell;var t=e.charCode||e.keyCode||0;if((20===t&&(h._capsLock?h._capsLock=!1:h._capsLock=!0),h.handlekeyboardnavigation)&&((h.focused||e.target===h.element||se(e.target).ischildof(h.host))&&1==h.handlekeyboardnavigation(e)))return!1;if(h.editable&&h.editcell&&(13!=t&&27!=t&&9!=t&&32!=t||h._handleeditkeydown&&(i=h._handleeditkeydown(e,h))),27==t&&(h.mousecaptured=!1,"visible"==h.selectionarea.css("visibility")&&h.selectionarea.css("visibility","hidden")),se.jqx.browser.msie&&se.jqx.browser.version<12&&h.focused&&!h.isNestedGrid){if(13==t&&0==i)return i;var i=!0,t=e.charCode||e.keyCode||0;if(!h.editcell&&h.editable&&"programmatic"!=h.editmode&&h._handleeditkeydown&&(i=h._handleeditkeydown(e,h)),i&&h.keyboardnavigation&&h._handlekeydown)return(i=h._handlekeydown(e,h))||(e.preventDefault&&e.preventDefault(),null!=e.stopPropagation&&e.stopPropagation()),i}return!0}),h.addHandler(h.host,"keyup.edit"+h.element.id,function(e){if(h.adaptiveview)return!0;if(9===e.keyCode&&!se(document.activeElement).ischildof(h.filterrow)&&!se(document.activeElement).ischildof(h.pager))switch(h.selectionmode){case"singlecell":case"multiplecells":case"multiplecellsextended":case"multiplecellsadvanced":h.getselectedcell();break;default:h.getselectedrowindex()}}),h.addHandler(h.host,"keydown.edit"+h.element.id,function(e){var t,i=!0;if(h.adaptiveview)return!0;if(h.handlekeyboardnavigation&&1==h.handlekeyboardnavigation(e))return!1;return h.editable&&"programmatic"!=h.editmode&&h._handleeditkeydown&&(i=h._handleeditkeydown(e,h),h.isNestedGrid&&e.stopPropagation()),!h.editcell&&e.altKey&&(se(document.activeElement).ischildof(h.filterrow)||se(document.activeElement).ischildof(h.pager)||(40===e.keyCode?(t=h.getselectedcell())&&h.openmenu(t.column):38===e.keyCode&&h._closemenu())),se.jqx.browser.msie&&se.jqx.browser.version<8?h.isNestedGrid&&i&&h.keyboardnavigation&&h._handlekeydown&&(i=h._handlekeydown(e,h),e.stopPropagation()):i&&h.keyboardnavigation&&h._handlekeydown&&(i=h._handlekeydown(e,h),h.isNestedGrid&&e.stopPropagation()),i||(e.preventDefault&&e.preventDefault(),null!=e.stopPropagation&&e.stopPropagation()),i&&h.selectedcells&&0<h.selectedcells.length&&9===e.keyCode&&e.shiftKey&&h.table&&h.table[0].rows&&0<h.table[0].rows.length&&(se(document.activeElement).ischildof(h.filterrow)||se(document.activeElement).ischildof(h.pager)||h.table[0].rows[0].cells[0].focus()),i}))},_hittestrow:function(e,t){if(null!=this.vScrollInstance&&null!=this.hScrollInstance){null==e&&(e=0);var i=this.vScrollInstance,s=this.hScrollInstance,r=i.value;"visible"!=this.vScrollBar.css("visibility")&&(r=0);i=s.value;"visible"!=this.hScrollBar.css("visibility")&&(i=0),"deferred"==this.scrollmode&&null!=this._newmax&&r>this._newmax&&(r=this._newmax);s=parseInt(r)+t,parseInt(i);if(null!=this.visiblerows&&0!=this.visiblerows.length){var l,r=!1,i=this._findvisiblerow(s,this.visiblerows);return 0<=i&&(l=this.visiblerows[i],e=this.rowdetails&&l.rowdetails,s=!l.rowdetailshidden,e&&((e=this.visiblerows[i-1])==l&&(l=e,i--),s&&(e=se(this.hittestinfo[i].visualrow).position().top+parseInt(this.table.css("top")),s=se(this.hittestinfo[i].visualrow).height(),e<=t&&t<=e+s||(i++,l=this.visiblerows[i],r=!0)))),{index:i,row:l,details:r}}}},getcellatposition:function(e,t){var i=this.that,s=this.showheader?this.columnsheader.height()+2:0,r=this._groupsheader()?this.groupsheader.height():0;r+=this.showtoolbar?this.toolbarheight:0,r+=this.showfilterbar?this.toolbarheight:0;var l=this.host.coord();this.hasTransform&&(l=se.jqx.utilities.getOffset(this.host));var o=e-l.left,a=t-s-l.top-r,l=this._hittestrow(o,a),r=l.row,l=l.index,n=this.table[0].rows[l];if(this.dataview&&0==this.dataview.records.length){for(var d=this.table[0].rows,h=0,c=0;c<d.length;c++){if(h<=a&&a<h+this.rowsheight){n=d[c];break}h+=this.rowsheight}r={boundindex:c}}if(null==n)return!0;for(var u=this.hScrollInstance.value,g=0,c=(this.groupable&&this.groups.length,0);c<n.cells.length;c++){var p=parseInt(se(this.columnsrow[0].cells[c]).css("left")),e=p-u;if(i.columns.records[c].pinned&&(e=p),!i.columns.records[c].hidden&&!i.columns.records[c].adaptivehidden)if(o<=e+se(this.columnsrow[0].cells[c]).width()&&e<=o){g=c;break}}if(null==r)return null;l=this._getcolumnat(g);return{row:this.getboundindex(r),column:l.datafield,value:this.getcellvalue(this.getboundindex(r),l.datafield)}},_handlecardedit:function(e){var g=e.target.getAttribute("row"),p=document.createElement("div"),t=this.getrowdatabyid(g),i='<div class="jqx-grid-card-cell">';i+="<table>";for(var s=0;s<this.columns.records.length;s++){var r,l=this.columns.records[s];l.hidden&&void 0===l.__hidden||(r=t[l.datafield],""!=l.cellsformat&&se.jqx.dataFormat&&(se.jqx.dataFormat.isDate(r)?r=se.jqx.dataFormat.formatdate(r,l.cellsformat,this.gridlocalization):se.jqx.dataFormat.isNumber(r)&&(r=se.jqx.dataFormat.formatnumber(r,l.cellsformat,this.gridlocalization))),i+='<tr class="jqx-grid-card-table-row">',i+='<td class="jqx-grid-card-cell-label"><div>'+l.text+"</div></td>",i+='<td class="jqx-grid-card-cell-value"><div><input datafield="'+l.datafield+'" class="jqx-widget jqx-input" value="'+r+'"/></div></td>',i+="</tr>")}i+="</table>",i+="</div>",i+='<div class="jqx-card-edit-buttons"><input style="margin-right: 5px;" type="button" dataid="Save" value="Save" /><input dataid="Cancel" type="button" value="Cancel" /></td>',i+="</div>",p.innerHTML="<div>"+this.gridlocalization.udpaterowstring+" "+g+'</div><div style="overflow: hidden;">'+i+"</div></div>";var o=p.querySelector('[dataid="Save"]'),e=p.querySelector('[dataid="Cancel"]');se(o).jqxButton({template:"primary",width:"40%",theme:this.theme}),se(e).jqxButton({width:"40%",theme:this.theme});var m=this;o.onclick=function(){for(var e=se(p).find("[datafield]"),t={},i=0;i<e.length;i++){for(var s=e[i].getAttribute("datafield"),r=e[i].value,l=0;l<m.dataview.source.datafields.length;l++){var o=m.dataview.source.datafields[l];if(o.name===s){"bool"!==o.type&&"boolean"!==o.type||(r=!0);var a=m._getcolumnbydatafield(o.name),n=o.type,d="date"===n||"time"===n;if("number"===n||"float"===n||"int"===n||"integer"===n||"string"===n&&(-1!=a.cellsformat.indexOf("p")||-1!=a.cellsformat.indexOf("c")||-1!=a.cellsformat.indexOf("n")||-1!=a.cellsformat.indexOf("f"))){if(""===r&&a.nullable)return"";r.indexOf&&-1<r.indexOf(m.gridlocalization.currencysymbol)&&(r=r.replace(m.gridlocalization.currencysymbol,""));o=r,o=parseFloat(o);if(isNaN(o)){-1<(r=(r=function(e,t,i){var s=e;if(t==i)return e;for(var r=s.indexOf(t);-1!=r;)r=(s=s.replace(t,i)).indexOf(t);return s}(r,m.gridlocalization.thousandsseparator,"")).replace(m.gridlocalization.decimalseparator,".")).indexOf(m.gridlocalization.percentsymbol)&&(r=r.replace(m.gridlocalization.percentsymbol,""));for(var h="",c=0;c<r.length;c++){var u=r.substring(c,c+1);"-"===u&&(h+="-"),"."===u&&(h+="."),null!=u.match(/^[0-9]+$/)&&(h+=u)}r=(r=h).replace(/ /g,""),r=new Number(r),isNaN(r)&&(r="")}else r=o}if(d||"string"===n&&(-1!=a.cellsformat.indexOf("H")||-1!=a.cellsformat.indexOf("m")||-1!=a.cellsformat.indexOf("M")||-1!=a.cellsformat.indexOf("y")||-1!=a.cellsformat.indexOf("h")||-1!=a.cellsformat.indexOf("d"))){if(""===r&&a.nullable)return"";se.jqx.dataFormat&&(r=se.jqx.dataFormat.tryparsedate(r,m.gridlocalization)),"Invalid Date"!=r&&null!=r||(r="")}}}t[s]=r}m.updaterow(g,t),se(p).jqxWindow("close")},e.onclick=function(){se(p).jqxWindow("close")},document.body.appendChild(p),se(p).jqxWindow({position:{left:this.host.offset().left,top:this.host.offset().top},modalOpacity:.01,width:this.element.offsetWidth,height:this.element.offsetHeight,isModal:!0,autoOpen:!1,resizable:!1,draggable:!1}),se(p).jqxWindow("open"),this.cardwindow&&se(this.cardwindow).remove(),this.cardwindow=p},_handlemousedown:function(e,l){if(null==e.target)return!0;if(l.disabled)return!0;if(se(e.target).ischildof(this.columnsheader)||se(e.target).ischildof(this.hScrollBar)||se(e.target).ischildof(this.vScrollBar))return!0;if(e.target===l.bottomRight[0])return!0;var t;if(l.cardview&&e.target&&0<=e.target.className.indexOf("jqx-icon-edit")&&l._handlecardedit(e),e.which?t=3==e.which:e.button&&(t=2==e.button),e.which?c=2==e.which:e.button&&(c=1==e.button),c)return!0;if(this.adaptiveview){if(se(e.target).ischildof(se(this.adaptiveview)))return!0;if(e.target==this.adaptiveview)return!0}if(this.showstatusbar){if(se(e.target).ischildof(this.statusbar))return!0;if(e.target==this.statusbar[0])return!0}if(this.showtoolbar){if(se(e.target).ischildof(this.toolbar))return!0;if(e.target==this.toolbar[0])return!0}if(this.showfilterbar){if(se(e.target).ischildof(this.filterbar))return!0;if(e.target==this.filterbar[0])return!0}if(this.pageable){if(se(e.target).ischildof(this.pager))return!0;if(e.target==this.pager[0])return!0}if(!this.columnsheader)return!0;if(!this.editcell&&this.pageable&&se(e.target).ischildof(this.pager))return!0;var i=this.showheader?this.columnsheader.height()+2:0,s=this._groupsheader()?this.groupsheader.height():0;s+=this.showtoolbar?this.toolbarheight:0,s+=this.showfilterbar?this.toolbarheight:0;var r=this.host.coord();this.hasTransform&&(r=se.jqx.utilities.getOffset(this.host),g=this._getBodyOffset(),r.left-=g.left,r.top-=g.top);var o=parseInt(e.pageX),a=parseInt(e.pageY);this.isTouchDevice()&&(m=l.getTouches(e)[0],o=parseInt(m.pageX),a=parseInt(m.pageY),1==l.touchmode&&null!=m._pageX&&(o=parseInt(m._pageX),a=parseInt(m._pageY)));var n=o-r.left,d=a-i-r.top-s;if(this.pageable&&!this.autoheight&&this.gotopage&&this.pager.coord().top-r.top-s-i<d)return;var h=this._hittestrow(n,d);if(h&&!h.details){var c=h.row,u=h.index,g=e.target.className,p=this.table[0].rows[u];if(null==p)return l.editable&&l.begincelledit&&l.editcell&&l.endcelledit(l.editcell.row,l.editcell.column,!1,!0),!0;l.mousecaptured=!0,l.mousecaptureposition={left:e.pageX,top:e.pageY-s,clickedrow:p};var m=this.hScrollInstance,w=m.value;this.rtl&&"hidden"!=this.hScrollBar.css("visibility")&&(w=m.max-m.value);var v=-1,a=this.groupable?this.groups.length:0;this.rtl&&("hidden"!=this.vScrollBar[0].style.visibility&&(w-=this.scrollbarsize+4),"hidden"==this.hScrollBar[0].style.visibility&&(w=-parseInt(this.content.css("left"))));for(var f=0;f<p.cells.length;f++){o=(x=parseInt(se(this.columnsrow[0].cells[f]).css("left")))-w;l.columns.records[f].pinned&&!l.rtl&&(o=x);var b=this._getcolumnat(f);if(null==b||!b.hidden)if(null==b||!b.adaptivehidden)if(n<=o+se(this.columnsrow[0].cells[f]).width()&&o<=n){v=f,l.mousecaptureposition.clickedcell=f;break}}if(this.rtl&&this._haspinned)for(f=p.cells.length-1;0<=f&&l.columns.records[f].pinned;f--){var x,o=x=se(this.columnsrow[0].cells[f]).coord().left-this.host.coord().left,b=this._getcolumnat(f);if((null==b||!b.hidden)&&(null==b||!b.adaptivehidden)&&n<=o+se(this.columnsrow[0].cells[f]).width()&&o<=n){v=f,l.mousecaptureposition.clickedcell=f;break}}if(null!=c&&0<=v){this._raiseEvent(1,{rowindex:this.getboundindex(c),visibleindex:c.visibleindex,row:c,group:c.group,rightclick:t,originalEvent:e});b=this._getcolumnat(v),r=this.getcellvalue(this.getboundindex(c),b.datafield);if(this.editable&&this.editcell&&(this._currentEditableColumn=v,b.datafield==this.editcell.column&&this.getboundindex(c)==this.editcell.row&&(this.mousecaptured=!1)),"adaptive"===b.columntype){var y=document.createElement("div"),i=document.createElement("div"),d=document.createElement("a"),s=document.createElement("a"),m=document.createElement("div"),_=this.getrowdata(this.getboundindex(c));d.href="#",s.href="#",y.style.zIndex=99999,y.style.position="absolute",y.style.left="0px",y.style.top="0px",y.style.width="100%",y.style.height="100%",y.className="jqx-adaptive-view jqx-widget-content",m.style.position="relative",m.style.top="100%",m.style.textAlign="center",m.style.marginTop="-40px",i.style.position="absolute",i.style.left="0px",i.style.top="0px",i.style.width="100%",i.style.height="100%",this.theme&&(y.className="jqx-widget-content jqx-widget-content-"+this.theme);var q=document.createElement("span");q.className="jqx-icon-close",this.theme&&(q.className="jqx-icon-close jqx-widget-close-"+this.theme),q.style.zIndex=99,q.style.position="absolute",q.style.right="10px",q.style.top="10px",q.style.width="16px",q.style.height="16px",y.appendChild(i),y.appendChild(q),d.innerHTML=this.gridlocalization.okstring,s.innerHTML=this.gridlocalization.cancelstring,d.addEventListener("mousedown",function(e){for(var t={},i=l.adaptiveview.querySelectorAll("input"),s=0;s<i.length;s++){var r=l.escape_HTML(i[s].value);t[i[s].getAttribute("data-column")]=r}return l.updaterow(_.uid,t),y.parentNode.removeChild(y),l.adaptiveview=null,e.stopPropagation(),!1}),s.addEventListener("mousedown",function(){return y.parentNode.removeChild(y),l.adaptiveview=null,e.stopPropagation(),!1}),this.editable&&(m.appendChild(d),m.appendChild(s),y.appendChild(m));for(var j,S,z="<table class='jqx-adaptive-table'><tr>",u=0,f=0;f<this.columns.records.length;f++)"adaptive"!==(b=this.columns.records[f]).columntype&&(0<f&&u%2==0&&(z+="</tr><tr>"),j=_[b.displayfield],""!=b.cellsformat&&se.jqx.dataFormat&&(se.jqx.dataFormat.isDate(j)?j=se.jqx.dataFormat.formatdate(j,b.cellsformat,this.gridlocalization):se.jqx.dataFormat.isNumber(j)&&(j=se.jqx.dataFormat.formatnumber(j,b.cellsformat,this.gridlocalization))),S=this.filterable?'<div datafield="'+b.datafield+'" class="'+l.toTP("jqx-grid-column-filterbutton")+'" style="position: relative; top: 4px; display: inline-block; width: 16px; height:16px;"></div>':"",this.editable?b.editable?z+="<td>"+S+this.escape_HTML(b.text)+": <input data-column='"+b.displayfield+"' value='"+j+"'/></td>":z+="<td>"+S+this.escape_HTML(b.text)+": <input data-column='"+b.displayfield+"' readonly value='"+j+"'/></td>":z+="<td>"+S+this.escape_HTML(b.text)+": "+j+"</td>",u++);return z+="</tr></table>",i.innerHTML=z,q.addEventListener("mousedown",function(e){y.parentNode.removeChild(y),l.adaptiveview=null}),this.wrapper[0].appendChild(y),this.adaptiveview=y,void se(this.adaptiveview).find(".jqx-grid-column-filterbutton").on("click",function(){var e=this.getAttribute("datafield"),t=this.offsetTop;l.openmenu(e),setTimeout(function(){l.gridmenu.css("top",30+t),l.gridmenu.css("left",25),l.gridmenu.css("z-index",99999),l.gridmenu.parent().css("z-index",99999)},300)})}if(this._raiseEvent(8,{rowindex:this.getboundindex(c),column:b?b.getcolumnproperties():null,row:c,visibleindex:c.visibleindex,datafield:b?b.datafield:null,columnindex:v,value:r,rightclick:t,originalEvent:e}),b.createwidget)return!0;if(this.isTouchDevice())if("checkbox"==b.columntype&&this.editable&&this._overlayElement){if(!this.editcell)return this._overlayElement.css("visibility","hidden"),this.editcell=this.getcell(u,b.datafield),!0}else if("button"==b.columntype&&this._overlayElement)return b.buttonclick&&b.buttonclick(p.cells[v].buttonrow,e),!0;q=!1;if(null!=this._lastmousedown&&this._mousedown-this._lastmousedown<300&&this._clickedrowindex==this.getboundindex(c)&&(this._raiseEvent(22,{rowindex:this.getboundindex(c),row:c,visibleindex:c.visibleindex,group:c.group,rightclick:t,originalEvent:e}),this._clickedcolumn==b.datafield&&this._raiseEvent(23,{rowindex:this.getboundindex(c),row:c,visibleindex:c.visibleindex,column:b?b.getcolumnproperties():null,datafield:b?b.datafield:null,columnindex:v,value:r,rightclick:t,originalEvent:e}),q=!0,this._clickedrowindex=-1,this._clickedcolumn=null,e.isPropagationStopped&&e.isPropagationStopped()))return!1;if(t)return!0;q||(this._clickedrowindex=this.getboundindex(c),this._clickedcolumn=b.datafield);q=se.jqx.utilities.getBrowser();if("msie"==q.browser&&parseInt(q.version)<=7&&(0==v&&this.rowdetails&&(g="jqx-grid-group-collapse"),0<a&&v<=a&&(g="jqx-grid-group-collapse")),-1!=g.indexOf("jqx-grid-group-expand")||-1!=g.indexOf("jqx-grid-group-collapse"))this.rtl?0<a&&v>p.cells.length-a-1&&this._togglegroupstate?this._togglegroupstate(c.bounddata,!0):v==p.cells.length-1-a&&this.rowdetails&&this.showrowdetailscolumn&&(this._togglerowdetails(c.bounddata,!0),this.gridcontent[0].scrollTop=0,this.gridcontent[0].scrollLeft=0):0<a&&v<a&&this._togglegroupstate?this._togglegroupstate(c.bounddata,!0):v==a&&this.rowdetails&&this.showrowdetailscolumn&&(this._togglerowdetails(c.bounddata,!0),this.gridcontent[0].scrollTop=0,this.gridcontent[0].scrollLeft=0);else if(-1!=c.boundindex){var k,C,g=this.selectedrowindexes.slice(0),a=!1;if("none"!=l.selectionmode&&"checkbox"!=l.selectionmode&&this._selectrowwithmouse&&("multiplecellsadvanced"!=l.selectionmode&&"multiplecellsextended"!=l.selectionmode&&"multiplerowsextended"!=l.selectionmode&&"multiplerowsadvanced"!=l.selectionmode||e.ctrlKey||e.shiftKey||e.metaKey||(l.selectedrowindexes=new Array,l.selectedcells=new Array),C=!1,k=this.getboundindex(c),l._oldselectedrow!==k&&"none"!==l.selectionmode||(C=!0),-1==l.selectionmode.indexOf("cell")?("singlerow"!=l.selectionmode||l.selectedrowindex!=k&&"singlerow"==l.selectionmode)&&(this._applyrowselection(k,!0,!1,null,b.datafield),this._selectrowwithmouse(l,h,g,b.datafield,e.ctrlKey||e.metaKey,e.shiftKey)):null!=b.datafield&&(this._selectrowwithmouse(l,h,g,b.datafield,e.ctrlKey||e.metaKey,e.shiftKey),e.shiftKey||this._applycellselection(k,b.datafield,!0,!1)),l._oldselectedcell&&l._oldselectedcell.datafield==l.selectedcell.datafield&&l._oldselectedcell.rowindex==l.selectedcell.rowindex&&(a=!0),l._oldselectedcell=l.selectedcell,l._oldselectedrow=k),l.autosavestate&&l.savestate&&l.savestate(),l.editable&&l.begincelledit&&"programmatic"!=l.editmode)return e.isPropagationStopped&&e.isPropagationStopped()?!1:("selectedrow"==l.editmode?C&&!l.editcell?"checkbox"!==b.columntype&&(this._currentEditableColumn=v,l.beginrowedit(this.getboundindex(c))):l.editcell&&!C&&"none"!=l.selectionmode&&l.endrowedit(l.editcell.row):(k=this.getboundindex(c),C="click"==l.editmode||a&&"selectedcell"==l.editmode,-1==l.selectionmode.indexOf("cell")&&"dblclick"!=l.editmode&&(C=!0),C&&null!=c.boundindex&&b.editable&&(l.begincelledit(this.getboundindex(c),b.datafield,b.defaulteditorvalue,!1),-1!=l.selectionmode.indexOf("cell")&&l._applycellselection(k,b.datafield,!1,!1)),-1!=l.selectionmode.indexOf("cell")&&"selectedcell"==l.editmode&&!a&&l.editcell&&l.endcelledit(l.editcell.row,l.editcell.column,!1,!0),"dblclick"!=l.editmode||a||!l.editcell||l.editcell.row==k&&b.datafield==l.editcell.column||l.endcelledit(l.editcell.row,l.editcell.column,!1,!0)),!0)}}return!0}},_columnPropertyChanged:function(e,t,i,s){},_rowPropertyChanged:function(e,t,i,s){},_serializeObject:function(e){if(null==e)return"";var s="";return se.each(e,function(e){0<e&&(s+=", "),s+="[";var t,i=0;for(t in this)0<i&&(s+=", "),s+="{"+t+":"+this[t]+"}",i++;s+="]"}),s},isbindingcompleted:function(){return!this._loading},propertiesChangedHandler:function(e,t,i){i.width&&i.height&&2==Object.keys(i).length&&(e._updatesize(!0,!0),e._resizeWindow(),e.virtualmode&&!e._loading?e.vScrollInstance.setPosition(0):setTimeout(function(){e._renderrows(e.virtualsizeinfo)},100))},propertyChangedHandler:function(e,t,i,s){if(null!=this.isInitialized&&0!=this.isInitialized&&!(e.batchUpdate&&e.batchUpdate.width&&e.batchUpdate.height&&2==Object.keys(e.batchUpdate).length))switch(t=t.toLowerCase()){case"cardview":case"cardviewsize":case"cardviewcolumns":case"cardheight":e.rowsheight=32,e.__rowsheight=e.rowsheight,e.virtualsizeinfo=null,e.cardview&&(e.__rowsheight=e.rowsheight,e.rowsheight=e.cardheight),e.render();break;case"editable":case"showcolumnheaderlines":case"showcolumnlines":case"showrowlines":e.refresh();break;case"everpresentrowactionsmode":i!=s&&(e._removeaddnewrow(),e.render());break;case"everpresentrowactions":e._updateaddnewrowui();break;case"showeverpresentrow":case"everpresentrowposition":case"everpresentrowheight":i!=s&&(e._removeaddnewrow(),e.render());break;case"rtl":e.content.css("left",""),e.columns=e._columns,e._filterrowcache=[],e.vScrollBar.jqxScrollBar({rtl:s}),e.hScrollBar.jqxScrollBar({rtl:s}),e._initpager&&e._initpager(),e._initgroupsheader&&e._initgroupsheader(),e.render();break;case"enablebrowserselection":e.showfilterrow||(e.showstatusbar||e.showtoolbar||e.host.addClass("jqx-disableselect"),e.content.addClass("jqx-disableselect")),e.enablebrowserselection&&(e.content.removeClass("jqx-disableselect"),e.host.removeClass("jqx-disableselect"));break;case"columnsheight":32==e.columnsheight&&!e.columngroups||e._measureElement("column"),e._render(!0,!0,!0,!1,!1);break;case"rowsheight":s!=i&&(31!=e.rowsheight&&e._measureElement("cell"),e.virtualsizeinfo=null,e.rendergridcontent(!0,!1),e.refresh());break;case"scrollMode":e.vScrollInstance.thumbStep=e.rowsheight;break;case"showdefaultloadelement":e._builddataloadelement();break;case"showfiltermenuitems":case"showsortmenuitems":case"showgroupmenuitems":case"filtermode":e._initmenu();break;case"touchmode":i!=s&&(e._removeHandlers(),e.touchDevice=null,e.vScrollBar.jqxScrollBar({touchMode:s}),e.hScrollBar.jqxScrollBar({touchMode:s}),e._updateTouchScrolling(),e._arrange(),e._updatecolumnwidths(),e._updatecellwidths(),e._addHandlers());break;case"autoshowcolumnsmenubutton":i!=s&&e._rendercolumnheaders();break;case"rendergridrows":i!=s&&e.updatebounddata();break;case"editmode":i!=s&&(e._removeHandlers(),e._addHandlers());break;case"source":e.updatebounddata(),e.virtualmode&&!e._loading&&(e.loadondemand=!0,e._renderrows(e.virtualsizeinfo));break;case"horizontalscrollbarstep":case"verticalscrollbarstep":case"horizontalscrollbarlargestep":case"verticalscrollbarlargestep":this.vScrollBar.jqxScrollBar({step:this.verticalscrollbarstep,largestep:this.verticalscrollbarlargestep}),this.hScrollBar.jqxScrollBar({step:this.horizontalscrollbarstep,largestep:this.horizontalscrollbarlargestep});break;case"closeablegroups":e._initgroupsheader&&e._initgroupsheader();break;case"showgroupsheader":i!=s&&(e._arrange(),e._initgroupsheader&&e._initgroupsheader(),e._renderrows(e.virtualsizeinfo));break;case"theme":s!=i&&(se.jqx.utilities.setTheme(i,s,e.host),e.gridmenu&&e.gridmenu.jqxMenu({theme:s}),e.pageable&&e._updatepagertheme(),e.filterable&&e._updatefilterrowui(!0),e.showeverpresentrow&&e._updateaddnewrowui(!0),e._applyThemeSettings());break;case"showtoolbar":case"showfilterbar":case"toolbarheight":i!=s&&(e._arrange(),e.refresh());break;case"showstatusbar":i!=s&&(e.statusbar&&(s?e.statusbar.show():e.statusbar.hide()),e._arrange(),e.refresh());break;case"statusbarheight":i!=s&&(e._arrange(),e.refresh());break;case"filterable":case"showfilterrow":i!=s&&e.render();break;case"autoshowfiltericon":case"showfiltercolumnbackground":case"showpinnedcolumnbackground":case"showsortcolumnbackground":i!=s&&e.rendergridcontent();break;case"showrowdetailscolumn":i!=s&&e.render();break;case"scrollbarsize":i!=s&&(se.jqx.utilities.scrollBarSize=s,e._arrange());break;case"width":case"height":i!=s&&(e._updatesize(!0,!0),e._resizeWindow(),e.virtualmode&&!e._loading?e.vScrollInstance.setPosition(0):setTimeout(function(){e._renderrows(e.virtualsizeinfo)},100));break;case"altrows":case"altstart":case"altstep":i!=s&&e._renderrows(e.virtualsizeinfo);break;case"groupsheaderheight":i!=s&&(e._arrange(),e._initgroupsheader&&e._initgroupsheader());break;case"pagerheight":i!=s&&e._initpager();break;case"selectedrowindex":e.selectrow(s);break;case"selectionmode":i!=s&&("none"==s&&(e.selectedrowindexes=new Array,e.selectedcells=new Array,e.selectedrowindex=-1),e._renderrows(e.virtualsizeinfo),"checkbox"==s&&e._render(!1,!1,!0,!1,!1));break;case"showheader":s?e.columnsheader.css("display","block"):e.columnsheader.css("display","none");break;case"virtualmode":i!=s&&(e.dataview.virtualmode=e.virtualmode,e.dataview.refresh(!1),e._render(!1,!1,!1));break;case"columnsmenu":i!=s&&e.render();break;case"columngroups":e._render(!0,!0,!0,!1,!1);break;case"columns":var r;e.columns&&e.columns.length>e.headerZIndex&&(e.headerZIndex=e.columns.length+100),e._serializeObject(e._cachedcolumns)!==e._serializeObject(s)?(r=!1,e.filterable&&i&&i.records&&se.each(i.records,function(){this.filter&&(r=!0),e.dataview.removefilter(this.displayfield,this.filter)}),e._columns=null,e._filterrowcache=[],e.render(),r&&e.applyfilters(),e._cachedcolumns=e.columns,e.removesort&&e.removesort()):e[t]=i;break;case"autoheight":i!=s&&e._render(!1,!1,!0);break;case"pagermode":case"pagerbuttonscount":i!=s&&e._initpager&&(e.pagershowrowscombo&&(e.pagershowrowscombo.jqxDropDownList("destroy"),e.pagershowrowscombo=null),e.pagerrightbutton&&(e.removeHandler(e.pagerrightbutton,"mousedown"),e.removeHandler(e.pagerrightbutton,"mouseup"),e.removeHandler(e.pagerrightbutton,"click"),e.pagerrightbutton.jqxButton("destroy"),e.pagerrightbutton=null),e.pagerleftbutton&&(e.removeHandler(e.pagerleftbutton,"mousedown"),e.removeHandler(e.pagerleftbutton,"mouseup"),e.removeHandler(e.pagerleftbutton,"click"),e.pagerleftbutton.jqxButton("destroy"),e.removeHandler(se(document),"mouseup.pagerbuttons"+e.element.id),e.pagerleftbutton=null),e.pagerdiv.remove(),e._initpager());break;case"pagesizeoptions":case"pageable":case"pagesize":if(i!=s){if(e._loading)throw new Error("jqxGrid: "+e.loadingerrormessage);if(!e.host.jqxDropDownList||!e.host.jqxListBox)return void e._testmodules();if(e._initpager){if("pageable"!=t&&"pagermode"!=t)if("string"==typeof s)throw new Error("Invalid Value for: "+t+". "+("pagesize"!=t?"The expected value type is: Array of Int values.":"The expected value type is: Int."));e.dataview.pageable=e.pageable,e.dataview.pagenum=0,e.dataview.pagesize=e._getpagesize(),e.virtualmode&&e.updatebounddata(),e.dataview.refresh(!0),e._initpager(),"pagesizeoptions"==t&&null!=s&&0<s.length&&(e.pagesize=parseInt(s[0]),e.dataview.pagesize=parseInt(s[0]),e.prerenderrequired=!0,e._requiresupdate=!0,e.dataview.pagenum=-1,e.gotopage(0))}e._render(!1,!1,!1)}break;case"groups":e._serializeObject(i)!==e._serializeObject(s)&&(e.dataview.groups=s,e._refreshdataview(),e._render(!0,!0,!0,!1));break;case"groupable":i!=s&&(e.dataview.groupable=e.groupable,e.dataview.pagenum=0,e.dataview.refresh(!1),e._render(!1,!1,!0));break;case"renderstatusbar":null!=s&&e.renderstatusbar(e.statusbar);break;case"rendertoolbar":null!=s&&e.rendertoolbar(e.toolbar);break;case"disabled":s?e.host.addClass(e.toThemeProperty("jqx-fill-state-disabled")):e.host.removeClass(e.toThemeProperty("jqx-fill-state-disabled")),se.jqx.aria(e,"aria-disabled",e.disabled),e.pageable&&(e.pagerrightbutton&&(e.pagerrightbutton.jqxButton({disabled:s}),e.pagerleftbutton.jqxButton({disabled:s}),e.pagershowrowscombo.jqxDropDownList({disabled:s}),e.pagergotoinput.attr("disabled",s)),e.pagerfirstbutton&&(e.pagerfirstbutton.jqxButton({disabled:s}),e.pagerlastbutton.jqxButton({disabled:s}))),e.vScrollBar.jqxScrollBar({disabled:s}),e.hScrollBar.jqxScrollBar({disabled:s}),e.filterable&&e.showfilterrow&&e._updatefilterrowui(!0),e.showeverpresentrow&&e._updateaddnewrowui(!0)}}}),se.jqx.collection=function(e){return this.records=new Array,this.owner=e,this.updating=!1,this.beginupdate=function(){this.updating=!0},this.resumeupdate=function(){this.updating=!1},this._raiseEvent=function(e){},this.clear=function(){this.records=new Array},this.replace=function(e,t){this.records[e]=t,this.updating||this._raiseEvent({type:"replace",element:t})},this.isempty=function(e){return null==this.records[e]},this.initialize=function(e){e<1&&(e=1),this.records[e-1]=-1},this.length=function(){return this.records.length},this.indexOf=function(e){return this.records.indexOf(e)},this.add=function(e){return null!=e&&(this.records[this.records.length]=e,this.updating||this._raiseEvent({type:"add",element:e}),!0)},this.insertAt=function(e,t){return null!=e&&null!=e&&(null!=t&&(0<=e&&(e<this.records.length?(this.records.splice(e,0,t),this.updating||this._raiseEvent({type:"insert",index:e,element:t}),!0):this.add(t))))},this.remove=function(e){if(null==e||null==e)return!1;var t=this.records.indexOf(e);return-1!=t&&(this.records.splice(t,1),this.updating||this._raiseEvent({type:"remove",element:e}),!0)},this.removeAt=function(e){if(null==e||null==e)return!1;if(e<0)return!1;if(e<this.records.length){var t=this.records[e];return this.records.splice(e,1),this.updating||this._raiseEvent({type:"removeAt",index:e,element:t}),!0}return!1},this},se.jqx.dataview=function(){return(this.self=this).aggregates=!1,this.grid=null,this.uniqueId="id",this.records=[],this.rows=[],this.columns=[],this.groups=[],this.filters=new Array,this.updated=null,this.update=null,this.suspend=!1,this.pagesize=0,this.pagenum=0,this.totalrows=0,this.totalrecords=0,this.groupable=!0,this.loadedrecords=[],this.loadedrootgroups=[],this.loadedgroups=[],this.loadedgroupsByKey=[],this.virtualmode=!0,this._cachegrouppages=new Array,this.source=null,this.changedrecords=new Array,this.rowschangecallback=null,(this.that=this).destroy=function(){delete this.self,delete this.grid,delete this.uniqueId,delete this.records,delete this.rows,delete this.columns,delete this.groups,delete this.filters,delete this.updated,delete this.update,delete this.suspend,delete this.pagesize,delete this.pagenum,delete this.totalrows,delete this.totalrecords,delete this.groupable,delete this.loadedrecords,delete this.loadedrootgroups,delete this.loadedgroups,delete this.loadedgroupsByKey,delete this.virtualmode,delete this._cachegrouppages,delete this.source,delete this.changedrecords,delete this.rowschangecallback,delete this.that},this.suspendupdate=function(){this.suspend=!0},this.isupdating=function(){return this.suspend},this.resumeupdate=function(e){this.suspend=!1,null==e&&(e=!0),this.refresh(e)},this.getrecords=function(){return this.records},this.clearrecords=function(){this.recordids=new Array},this.databind=function(d,e){var t=!!d._source,h=null;this.grid&&(this.aggregates=this.grid.showgroupaggregates),t?d=(h=d)._source:h=new se.jqx.dataAdapter(d,{autoBind:!1});function i(e){if(e.totalrecords=h.totalrecords,e.virtualmode){var t={startindex:e.pagenum*e.pagesize,endindex:e.pagenum*e.pagesize+e.pagesize};if(null!=d.recordstartindex&&(t.startindex=parseInt(d.recordstartindex)),null!=d.recordendindex?t.endindex=parseInt(d.recordendindex):e.grid.pageable||(t.endindex=t.startindex+100,e.grid.autoheight&&(t.endindex=t.startindex+e.totalrecords)),d.recordendindex||(e.grid.pageable?t={startindex:e.pagenum*e.pagesize,endindex:e.pagenum*e.pagesize+e.pagesize}:(t.endindex=t.startindex+100,e.grid.autoheight&&(t.endindex=t.startindex+e.totalrecords))),t.data=h.records,e.grid.rendergridrows&&0<e.totalrecords){var i,s,r=0;if(d.records=e.grid.rendergridrows(t),d.records.length&&(r=d.records.length),d.records&&!d.records[t.startindex]&&(i=new Array,s=t.startindex,se.each(d.records,function(){i[s]=this,s++,r++}),d.records=i),0==r&&d.records&&se.each(d.records,function(){r++}),0<r&&r<t.endindex-t.startindex&&!e.grid.groupable)for(var l=d.records[0],o=0;o<t.endindex-t.startindex-r;o++){var a,n={};for(a in l)n[a]="";d.records.push&&d.records.push(n)}}d.records&&0!=e.totalrecords||(d.records=new Array),e.originaldata=d.records,e.records=d.records,e.cachedrecords=d.records}else e.originaldata=h.originaldata,e.records=h.records,e.recordids=h.recordids,e.cachedrecords=h.cachedrecords}var s;s=this,h.recordids=[],h.records=new Array,h.cachedrecords=new Array,h.originaldata=new Array,h._options.virtualmode=s.virtualmode,h._options.totalrecords=s.totalrecords,h._options.originaldata=s.originaldata,h._options.recordids=s.recordids,h._options.cachedrecords=new Array,h._options.pagenum=s.pagenum,h._options.pageable=s.pageable,null!=d.type&&(h._options.type=d.type),null!=d.formatdata&&(h._options.formatData=d.formatdata),null!=d.contenttype&&(h._options.contentType=d.contenttype),null!=d.async&&(h._options.async=d.async),null!=d.updaterow&&(h._options.updaterow=d.updaterow),null!=d.addrow&&(h._options.addrow=d.addrow),null!=d.deleterow&&(h._options.deleterow=d.deleterow),0==s.pagesize&&(s.pagesize=10),h._options.pagesize=s.pagesize,this.source=d;var o=this.that;switch(d.datatype){case"local":case"array":default:null==d.localdata&&(d.localdata=[]),null!=d.localdata&&(h.unbindBindingUpdate(o.grid.element.id),(!o.grid.autobind&&o.grid.isInitialized||o.grid.autobind)&&h.dataBind(),(_=function(r){var l;if(null!=r&&""!=r&&(h._changedrecords[0]&&(l=new Array,se.each(h._changedrecords,function(e){var t=this.index,i=this.record;switch(o.grid._updateFromAdapter=!0,r){case"update":var s=o.grid.getrowid(t);return e==h._changedrecords.length-1?o.grid.updaterow(s,i):o.grid.updaterow(s,i,!1),void(o.grid._updateFromAdapter=!1);case"add":return o.grid.addrow(null,i),void(o.grid._updateFromAdapter=!1);case"remove":s=o.grid.getrowid(t);return void l.push(s)}}),0<l.length&&(o.grid.deleterow(l,!1),o.grid._updateFromAdapter=!1)),"update"==r))return;var e=o.totalrecords;i(o),null===d.localdata.notifier&&"observableArray"==d.localdata.name&&(d.localdata.notifier=function(e){if(!o._updating){o._updating=!0;var t=o.grid.getrowid(e.index);switch(e.type){case"add":var i=se.extend({},e.object[e.index]),s=h.getid(d.id,i,e.index);0===e.index?o.grid.addrow(s,i,"first"):o.grid.addrow(s,i);break;case"delete":o.grid.deleterow(t);break;case"update":e.path&&1<e.path.split(".").length?(s=e.path.split("."),o.grid.setcellvalue(e.index,s[s.length-1],e.newValue)):(i=se.extend({},e.object[e.index]),o.grid.updaterow(t,i))}o._updating=!1}}),"updateData"==r?(o.refresh(),o.grid._updateGridData()):(d.recordstartindex&&o.virtualmode?o.updateview(d.recordstartindex,d.recordstartindex+o.pagesize):o.refresh(),o.update(e!=o.totalrecords))})(),h.bindBindingUpdate(o.grid.element.id,_));break;case"json":case"jsonp":case"xml":case"xhtml":case"script":case"text":case"csv":case"tab":if(null!=d.localdata)return h.unbindBindingUpdate(o.grid.element.id),(!o.grid.autobind&&o.grid.isInitialized||o.grid.autobind)&&h.dataBind(),(_=function(e){var t=o.totalrecords;i(o),"updateData"==e?(o.refresh(),o.grid._updateGridData()):(d.recordstartindex&&o.virtualmode?o.updateview(d.recordstartindex,d.recordstartindex+o.pagesize):o.refresh(),o.update(t!=o.totalrecords))})(),void h.bindBindingUpdate(o.grid.element.id,_);for(var r=[],l=0,a={},n=0;n<o.filters.length;n++){var c=o.filters[n].datafield,u=o.filters[n].filter;if(u.getfilters){var g=u.getfilters();a[c+"operator"]=u.operator;for(var p=0;p<g.length;p++){g[p].datafield=c;var m,w,v=g[p].value;"datefilter"==g[p].type?g[p].value&&g[p].value.toLocaleString&&(m=o.grid.getcolumn(g[p].datafield))&&m.cellsformat?(w=o.grid.source.formatDate(g[p].value,m.cellsformat,o.grid.gridlocalization),a["filtervalue"+l]=w||g[p].value.toLocaleString()):a["filtervalue"+l]=v.toString():(a["filtervalue"+l]=v.toString(),g[p].data&&(a["filterid"+l]=g[p].data.toString()),g[p].id&&(a["filterid"+l]=g[p].id.toString())),a["filtercondition"+l]=g[p].condition,a["filteroperator"+l]=g[p].operator,a["filterdatafield"+l]=c;var f={label:v.toString()};g[p].data&&(f.value=g[p].data.toString()),g[p].id?f.value=g[p].id.toString():f.value=v.toString(),f.condition=g[p].condition,f.operator=0==g[p].operator?"and":"or",f.field=c,f.type=g[p].type;var b=!1;if(0<r.length)for(var x=0;x<r.length;x++){var y=r[x];if(y.field==c){y.filters.push(f),b=!0;break}}b||(r.push({field:c,filters:[]}),r[r.length-1].filters.push(f)),l++}}}a.filterGroups=r,a.filterscount=l,a.groupscount=o.groups.length;for(n=0;n<o.groups.length;n++)a["group"+n]=o.groups[n];null==d.recordstartindex&&(d.recordstartindex=0),null!=d.recordendindex&&0!=d.recordendindex||(o.grid.height&&-1==o.grid.height.toString().indexOf("%")?(d.recordendindex=parseInt(o.grid.height)/o.grid.rowsheight,d.recordendindex+=2):d.recordendindex=se(window).height()/o.grid.rowsheight,d.recordendindex=parseInt(d.recordendindex),o.pageable&&(d.recordendindex=o.pagesize)),o.pageable&&(d.recordstartindex=o.pagenum*o.pagesize,d.recordendindex=(o.pagenum+1)*o.pagesize),se.extend(a,{sortdatafield:o.sortfield,sortorder:o.sortfielddirection,pagenum:o.pagenum,pagesize:o.grid.pagesize,recordstartindex:d.recordstartindex,recordendindex:d.recordendindex});e=h._options.data;h._options.data?se.extend(h._options.data,a):(d.data&&se.extend(a,d.data),h._options.data=a);var _=function(){function e(){var e=o.totalrecords;i(o),d.recordstartindex&&o.virtualmode?o.updateview(d.recordstartindex,d.recordstartindex+o.pagesize):o.refresh(),o.update(e!=o.totalrecords)}if(se.jqx.browser.msie&&se.jqx.browser.version<9)try{e()}catch(e){}else e()};h.unbindDownloadComplete(o.grid.element.id),h.bindDownloadComplete(o.grid.element.id,_),!o.grid.autobind&&o.grid.isInitialized||o.grid.autobind?h.dataBind():o.grid.isInitialized||o.grid.autobind||_(),h._options.data=e}},this.getid=function(e,t,i){if(0<se(e,t).length)return se(e,t).text();if(e&&0<e.toString().length){e=se(t).attr(e);if(null!=e&&0<e.toString().length)return e}return i},this.getvaluebytype=function(e,t){var i,s=e;return"date"==t.type?null==(e=("NaN"==(i=new Date(e)).toString()||"Invalid Date"==i.toString())&&se.jqx.dataFormat?se.jqx.dataFormat.tryparsedate(e):i)&&(e=s):"float"==t.type?(e=parseFloat(e),isNaN(e)&&(e=s)):"int"==t.type?(e=parseInt(e),isNaN(e)&&(e=s)):"bool"==t.type&&(null!=e&&("false"==e.toLowerCase()?e=!1:"true"==e.toLowerCase()&&(e=!0)),e=1==e||0!=e&&""),e},this.setpaging=function(e){null!=e.pageSize&&(this.pagesize=e.pageSize),null!=e.pageNum&&(this.pagenum=Math.min(e.pageNum,Math.ceil(this.totalrows/this.pagesize))),this.refresh()},this.getpagingdetails=function(){return{pageSize:this.pagesize,pageNum:this.pagenum,totalrows:this.totalrows}},this._clearcaches=function(){this.sortcache={},this.sortdata=null,this.changedrecords=new Array,this.records=new Array,this.rows=new Array,this.cacheddata=new Array,this.originaldata=new Array,this.bounditems=new Array,this.loadedrecords=new Array,this.loadedrootgroups=new Array,this.loadedgroups=new Array,this.loadedgroupsByKey=new Array,this._cachegrouppages=new Array,this.recordsbyid=new Array,this.cachedrecords=new Array,this.recordids=new Array},this.addfilter=function(e,t){for(var i=-1,s=0;s<this.filters.length;s++)if(this.filters[s].datafield==e){i=s;break}-1==i?this.filters[this.filters.length]={filter:t,datafield:e}:this.filters[i]={filter:t,datafield:e}},this.removefilter=function(e){for(var t=0;t<this.filters.length;t++)if(this.filters[t].datafield==e){this.filters.splice(t,1);break}},this.getItemFromIndex=function(e){return this.records[e]},this.updaterow=function(e,t,i){if(!(this.filters&&0<this.filters.length&&!this.virtualmode)&&null!=t&&null!=e){t.uid=e,t[this.source.id]||(t[this.source.id]=t.uid);var s=this.recordsbyid["id"+e];return-1==(l=this.records.indexOf(s))?!1:(this.records[l]=t,this.cachedrecords&&(this.cachedrecords[l]=t),1!=i&&null!=i||this.refresh(),this.changedrecords[t.uid]={Type:"Update",OldData:s,Data:t},!0)}if(this.filters&&0<this.filters.length){for(var r=this.cachedrecords,s=null,l=-1,o=0;o<r.length;o++)if(r[o].uid==e){s=r[o],l=o;break}if(s){var a,n=this.that;for(a in t)n.cachedrecords[l][a]=t[a];return 1!=i&&null!=i||this.refresh(),!0}}return!1},this.addrow=function(e,t,i,s){if(null==t)return!1;if(se.isEmptyObject(t)&&this.source&&this.source.datafields&&se.each(this.source.datafields,function(){var e="";"number"==this.type&&(e=null),"date"==this.type&&(e=null),"bool"!=this.type&&"boolean"!=this.type||(e=!1),t[this.name]=e}),!e||this.recordsbyid["id"+e]){t.uid=this.getid(this.source.id,t,this.totalrecords);for(var r=this.recordsbyid["id"+t.uid];null!=r;){var l=Math.floor(1e4*Math.random()).toString();t.uid=l,r=this.recordsbyid["id"+l]}}else t.uid=e;return t[this.source.id]||null!=this.source.id&&(t[this.source.id]=t.uid),t.boundindex=this.records.length,"last"==i?this.records.push(t):"number"==typeof i&&isFinite(i)?this.records.splice(i,0,t):this.records.splice(0,0,t),this.filters&&0<this.filters.length&&("last"==i?this.cachedrecords.push(t):"number"==typeof i&&isFinite(i)?this.cachedrecords.splice(i,0,t):this.cachedrecords.splice(0,0,t)),this.totalrecords++,this.virtualmode&&(this.source.totalrecords=this.totalrecords),1!=s&&null!=s||this.refresh(),this.changedrecords[t.uid]={Type:"New",Data:t},!0},this.deleterow=function(e,t){if(null==e)return!1;var i=this.filters&&0<this.filters.length;if(this.recordsbyid["id"+e]&&!i){var s=this.recordsbyid["id"+e],r=this.records.indexOf(s);if(this.grid&&this.grid.sortable&&"many"==this.grid.sortmode)for(var l=0;l<this.records.length;l++)if(this.records[l].boundindex===s.boundindex){r=l;break}return this.changedrecords[e]={Type:"Delete",Data:this.records[r]},this.records.splice(r,1),this.totalrecords--,this.virtualmode&&(this.source.totalrecords=this.totalrecords),1!=t&&null!=t||this.refresh(),!0}if(this.filters&&0<this.filters.length){for(var o=this.cachedrecords,s=null,r=-1,l=0;l<o.length;l++)if(o[l].uid==e){s=o[l],r=l;break}if(s)return this.cachedrecords.splice(r,1),1!=t&&null!=t||(this.totalrecords=0,this.records=this.cachedrecords,this.refresh()),!0}return!1},this.reload=function(e,t,i,s,r,l,o){var a,n=this.that,d=new Array,h=e,c=t,e=i,t=s,i=c.length,s=0;if(this.columns=[],this.bounditems=new Array,this.loadedrecords=new Array,this.loadedrootgroups=new Array,this.loadedgroups=new Array,this.loadedgroupsByKey=new Array,this._cachegrouppages=new Array,this.recordsbyid={},0==this.totalrecords&&(Object.size=function(e){var t,i=0;for(t in e)e.hasOwnProperty(t)&&i++;return i},h=Object.size(h),this.totalrecords=h,se.each(this.records,function(e){var i=0;return se.each(this,function(e,t){n.columns[i++]=e}),!1})),this.virtualmode){if(this.pageable)return void this.updateview();l=0;if(!this.groupable)return void this.updateview();o=this.totalrecords}else l=0,o=this.totalrecords;return this.groupable&&0<this.groups.length&&this.loadgrouprecords?(a=l,a=this.loadgrouprecords(0,l,o,e,0,t,c,i,d)):s=this.loadflatrecords(l,o,e,0,t,c,i,d),0<i&&c.splice(0,+i),0<this.groups.length&&this.groupable?this.totalrows=a:this.totalrows=s,d},this.loadflatrecords=function(e,t,i,s,r,l,o,a){var n=this.that,d=e,h=e;t=Math.min(t,this.totalrecords);for(var c,u=null!=this.sortdata,g=(this.source.id&&("local"==this.source.datatype||"array"==this.source.datatype||this.source.datatype),u?this.sortdata:this.records),p=e;p<t;p++){var m,w={};u?(m=(w=se.extend({},g[p].value))[n.uniqueId],w.boundindex=g[p].index,null==w.uid&&(w.uid=n.getid(n.source.id,w,w.boundindex)),n.recordsbyid["id"+w.uid]=g[p].value,(n.loadedrecords[d]=w).uniqueid=n.generatekey(),n.bounditems[w.boundindex]=w):(m=(w=new Object(g[p]))[n.uniqueId],w.boundindex=d,null==(n.loadedrecords[d]=w).uid&&(w.uid=n.getid(n.source.id,w,d)),n.recordsbyid["id"+w.uid]=g[p],w.uniqueid=n.generatekey(),n.bounditems[this.bounditems.length]=w),(o<=s||m!=l[s][n.uniqueId]||r&&r[m])&&(a[a.length]=s),l[s]=w,s++,w.visibleindex=h,h++,d++}return n.grid.summaryrows&&(c=d,se.each(n.grid.summaryrows,function(){var e=se.extend({},this);e.boundindex=t++,(n.loadedrecords[c]=e).uniqueid=n.generatekey(),n.bounditems[n.bounditems.length]=e,l[s]=e,s++,e.visibleindex=h,h++,c++})),h},this.updateview=function(e,t){var i=this.that,s=this.pagesize*this.pagenum,r=0,l=new Array,o=this.filters,a=this.updated,n=l.length;if(this.pageable){if(this.virtualmode)if(this.groupable&&0!=this.groups.length){if(this.groupable&&0<this.groups.length&&this.loadgrouprecords){if(null!=this._cachegrouppages[this.pagenum+"_"+this.pagesize])return this.rows=this._cachegrouppages[this.pagenum+"_"+this.pagesize],void(this.totalrows=this.rows.length);var d=this.pagesize*(1+this.pagenum);return d>this.totalrecords&&(d=this.totalrecords),this.loadgrouprecords(0,this.pagesize*this.pagenum,d,o,r,a,l,n,[]),this._cachegrouppages[this.pagenum+"_"+this.pagesize]=this.rows,void(this.totalrows=this.rows.length)}}else this.loadflatrecords(this.pagesize*this.pagenum,this.pagesize*(1+this.pagenum),o,r,a,l,n,[]),this.totalrows=l.length}else if(this.virtualmode&&(!this.groupable||0==this.groups.length)){d=this.pagesize;0==d&&(d=Math.min(100,this.totalrecords));this.pagenum;if(this.loadedrecords.length,null!=e&&null!=t?this.loadflatrecords(e,t,o,r,a,l,n,[]):this.loadflatrecords(this.pagesize*this.pagenum,this.pagesize*(1+this.pagenum),o,r,a,l,n,[]),this.totalrows=this.loadedrecords.length,(this.rows=l).length>=d)return}if(this.groupable&&this.pageable&&0<this.groups.length&&this._updategroupsinpage)l=this._updategroupsinpage(i,o,s,r,n,this.pagesize*this.pagenum,this.pagesize*(1+this.pagenum));else for(var h=this.pagesize*this.pagenum;h<this.pagesize*(1+this.pagenum);h++)null!=(c=h<this.loadedrecords.length?this.loadedrecords[h]:null)&&((!this.pagesize||s>=this.pagesize*this.pagenum&&s<=this.pagesize*(this.pagenum+1))&&(l[r]=c,r++),s++);if((0==l.length||l.length<this.pagesize)&&!this.pageable&&this.virtualmode){r=l.length;for(var c,u=l.length,h=this.pagesize*this.pagenum;h<this.pagesize*(1+this.pagenum)-u;h++)(c={}).boundindex=h+u,c.visibleindex=h+u,c.uniqueid=i.generatekey(),c.empty=!0,i.bounditems[h+u]=c,l[r]=c,r++}this.rows=l},this.generatekey=function(){function e(){return 16*(1+Math.random())|0}return""+e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},this.reloaddata=function(){this.reload(this.records,this.rows,this.filter,this.updated,!0)},this.refresh=function(e){if(!this.suspend){null==e&&(e=!0);var t=this.rows.length,i=this.totalrows;if(0<this.filters.length&&!this.virtualmode){var s="",r=this.cachedrecords.length,l=new Array;this.totalrecords=0;var o=this.cachedrecords;this._dataIndexToBoundIndex=new Array;var a=this.filters.length;if(null!=this.source&&null!=this.source.filter&&null!=this.source.localdata){var n=this.source.filter(this.filters,o,r);null==n&&(n=new Array);for(var d=0;d<r;d++){var h=o[d];(c=0<=n.indexOf(h))?(l[l.length]=se.extend({dataindex:d},h),this._dataIndexToBoundIndex[d]={boundindex:l.length-1}):this._dataIndexToBoundIndex[d]=null}this.records=l}else if(null==this.source.filter||null==this.source.filter){for(d=0;d<r;d++){for(var h=o[d],c=void 0,u=0;u<a;u++){var s=this.filters[u].filter,g=h[this.filters[u].datafield],p=!s||!s.evaluate||s.evaluate(g);!this.grid.filter||void 0!==(g=this.grid.filter(g,h,this.filters[u].datafield,s,p))&&(p=g),c=null==c?p:"or"==s.operator?c||p:c&&p}c?(l[l.length]=se.extend({dataindex:d},h),this._dataIndexToBoundIndex[d]={boundindex:l.length-1}):this._dataIndexToBoundIndex[d]=null}this.records=l}if(this.sortdata){if(!this.grid||"many"===this.grid.sortmode){for(var m=this.grid.getsortcolumns(),w=0;w<m.length;w++){var v=(x=m[w]).dataField;this.grid.sortby(v,x.ascending,null)}return}var f=this.sortfield;if(this.sortcache[f]){this.sortdata=null;var b=this.sortcache[f].direction;return this.sortcache[f]=null,void this.sortby(this.sortfield,b)}}}else if(0==this.filters.length&&!this.virtualmode&&this.cachedrecords){this.totalrecords=0;o=this.cachedrecords;if(this.records=o,this.sortdata){if(!this.grid||"many"===this.grid.sortmode){for(m=this.grid.getsortcolumns(),w=0;w<m.length;w++){var x,v=(x=m[w]).dataField;this.grid.sortby(v,x.ascending,null)}return}f=this.sortfield;if(this.sortcache[f]){this.sortdata=null;b=this.sortcache[f].direction;return this.sortcache[f]=null,void this.sortby(this.sortfield,b)}}}b=this.reload(this.records,this.rows,this.filter,this.updated,e);(this.updated=null)!=this.rowschangecallback&&(e=this.rows,i!=this.totalrows&&this.rowschangecallback({type:"PagingChanged",data:this.getpagingdetails()}),t!=e.length&&this.rowschangecallback({type:"RowsCountChanged",data:{previous:t,current:e.length}}),(0<b.length||t!=e.length)&&this.rowschangecallback({type:"RowsChanged",data:{previous:t,current:e.length,diff:b}}))}},this}}(jqxBaseFramework);