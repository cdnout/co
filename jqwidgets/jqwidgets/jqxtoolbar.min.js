!function(u){u.jqx.jqxWidget("jqxToolBar","",{}),u.extend(u.jqx._jqxToolBar.prototype,{defineInstance:function(){var e={width:"100%",minWidth:null,maxWidth:null,height:35,tools:"",initTools:null,minimizeWidth:200,disabled:!1,rtl:!1,events:["open","close"]};return this===u.jqx._jqxToolBar.prototype||u.extend(!0,this,e),e},createInstance:function(){var e=this;"none"!==e.host.css("display")&&!1!==document.body.contains(e.element)||(e._initiallyHidden=!0),e._toolToWidgetMapping={button:"jqxButton",toggleButton:"jqxToggleButton",dropdownlist:"jqxDropDownList",combobox:"jqxComboBox",input:"jqxInput"},e._toolChanges=[],e.render()},render:function(){var e=this,t=!0;e.element.innerHTML="",0<e.element.className.length&&e._removeClass(e.element,e.toThemeProperty("jqx-widget jqx-fill-state-normal jqx-rc-all jqx-toolbar jqx-fill-state-disabled")),e._setSize(),e._destroyTools(!1),e._toolWidgets&&(t=!1,u(e._minimizeButton).remove(),u(e._minimizePopup).remove()),e._appendMinimizeButton(),e._addClasses(),e._initiallyHidden||e._createTools(),!0===e.disabled&&(e.element.className+=" "+e.toThemeProperty("jqx-fill-state-disabled"),e._disableTools(!0)),e._initiallyHidden||e._minimize(),e._removeHandlers(),e._addHandlers(),!1===t&&0<e._toolChanges.length&&e._restoreChanges()},refresh:function(e){!0!==e&&this.render()},getTools:function(){return this._toolWidgets},destroy:function(){var e=this;e._removeHandlers(),e._destroyTools(),e.host.remove()},_destroyTools:function(e){var t=this;if(!1!==e&&(e=!0),t._toolWidgets)for(var o=t._toolWidgets.length-1;0<=o;o--)t._destroyTool(o,e,!0)},_destroyTool:function(e,t,o){var i=this;e=parseInt(e,10);var l,n,r,s=i._toolWidgets[e];s&&(l=s.type,n=s.tool,r=s.menuTool,"custom"!==l?(n[i._toolToWidgetMapping[l]]("destroy"),r&&r[i._toolToWidgetMapping[l]]("destroy")):(n.remove(),r&&r.remove()),s.menuSeparator&&u(s.menuSeparator).remove(),i._toolWidgets.splice(e,1),i._checkType(l)&&i._refreshButtonGroups(),!0!==o&&i._minimize(),!1!==t&&i._toolChanges.push({action:"destroyTool",index:e}))},destroyTool:function(e){this._destroyTool(e,!0)},addTool:function(e,t,o,i){var l,n,r=this,s="first"===t?0:r._toolWidgets.length;r._toolWidgets[s-1]&&(l=r._toolWidgets[s-1].tool,n=r._toolWidgets[s-1].separatorAfterWidget?"|":r._toolWidgets[s-1].type),!0===o?a="|":r._toolWidgets[s+1]&&(a=r._toolWidgets[s+1].type);var a=r._initializeTool(s,e,l,n,a,i,!1);"first"===t?r._toolWidgets.splice(0,0,a):r._toolWidgets.push(a),r._removeHandlers(),r._addHandlers(),r._checkType(e)&&r._refreshButtonGroups(),"first"!==t&&0<r._minimizedTools?r._minimizeTool(!0):r._minimize(),r._toolChanges.push({action:"addTool",type:e,position:t,separator:o,initCallback:i})},_disableTools:function(e){for(var t=0;t<this._toolWidgets.length;t++)this.disableTool(t,e)},disableTool:function(e,t){var o=this;e=parseInt(e,10);var i,l=o._toolWidgets[e];l&&("custom"!==(i=l.type)&&(l.tool[o._toolToWidgetMapping[i]]({disabled:t}),l.menuTool[o._toolToWidgetMapping[i]]({disabled:t})),o._toolChanges.push({action:"disableTool",index:e,disable:t}))},propertyChangedHandler:function(e,t,o,i){if("initTools"!==t&&i!==o)switch(t){case"theme":""!==o&&(e._removeClass(e.element,e.toThemeProperty("jqx-widget-"+o+" jqx-fill-state-normal-"+o+" jqx-rc-all-"+o+" jqx-toolbar-"+o)),e._removeClass(e._minimizePopup,"jqx-popup-"+o+" jqx-fill-state-normal-"+o+" jqx-rc-b-"+o+" jqx-toolbar-minimized-popup-"+o)),e._addClasses(),e._minimizePopup.className+=" "+e.toThemeProperty("jqx-popup jqx-fill-state-normal jqx-rc-b jqx-toolbar-minimized-popup");for(var l=0;l<e._toolWidgets.length;l++){var n=e._toolWidgets[l];"custom"!==n.type&&(n.menuTool&&(n.menuSeparator&&(""!==o&&e._removeClass(n.menuSeparator,"jqx-fill-state-pressed-"+o+" jqx-toolbar-minimized-popup-separator-"+o),n.menuSeparator.className+=" jqx-fill-state-pressed-"+i+" jqx-toolbar-minimized-popup-separator-"+i),n.menuTool[e._toolToWidgetMapping[e._toolWidgets[l].type]]({theme:i})),n.tool[e._toolToWidgetMapping[e._toolWidgets[l].type]]({theme:i}))}u.jqx.utilities.setTheme(o,i,e.host);break;case"width":e.element.style.width=e._toPx(i),e._minimize();break;case"minWidth":e.element.style.minWidth=e._toPx(i),e._minimize();break;case"maxWidth":e.element.style.maxWidth=e._toPx(i),e._minimize();break;case"height":var r,s=!1;if(e.element.style.height=e._toPx(i),"string"==typeof i&&-1!==i.indexOf("%")){if("string"==typeof o&&-1!==o.indexOf("%"))return void e.host.trigger("resize");s=!0}else r=parseInt(i,10),r-=e._getComputedStyle(e.element,"paddingTop")+e._getComputedStyle(e.element,"paddingBottom")+e._getComputedStyle(e.element,"borderTopWidth")+e._getComputedStyle(e.element,"borderBottomWidth");for(var a=0;a<e._toolWidgets.length;a++){var d=e._toolWidgets[a],m=d.type;"button"===m||"toggleButton"===m||"repeatButton"===m||"linkButton"===m?(d.tool[0].style.height=s?"100%":e._toPx(r),d.menuTool&&(d.menuTool[0].style.height=s?"100%":e._toPx(r))):"dropdownlist"!==m&&"combobox"!==m&&"input"!==m||(d.tool[e._toolToWidgetMapping[m]]({height:s?"100%":r-2}),d.menuTool&&d.menuTool[e._toolToWidgetMapping[m]]({height:s?"100%":r-2}))}break;case"tools":e._removeHandlers(),e._destroyTools(),e._createTools(),e._addHandlers(),e._minimize();break;case"minimizeWidth":!0===e._isOpen?(t=e._getComputedStyle(e._minimizePopup,"left")-(i-o),e._minimizePopup.style.width=e._toPx(i),e._minimizePopup.style.left=e._toPx(t)):e._minimizePopup.style.width=e._toPx(i);break;case"rtl":e.render();break;case"disabled":!0===i?(e.element.className+=" "+e.toThemeProperty("jqx-fill-state-disabled"),e._disableTools(!0)):(e._removeClass(e.element,e.toThemeProperty("jqx-fill-state-disabled")),e._disableTools(!1))}},_raiseEvent:function(e,t){void 0===t&&(t={owner:null});e=this.events[e];t.owner=this;e=new u.Event(e);return e.owner=this,e.args=t,e.preventDefault&&e.preventDefault(),this.host.trigger(e)},_addClasses:function(){var e="jqx-widget jqx-fill-state-normal jqx-rc-all jqx-toolbar";!0===this.rtl&&(e+=" jqx-toolbar-rtl"),this.element.className+=" "+this.toThemeProperty(e)},_checkType:function(e){return"button"===e||"toggleButton"===e||"repeatButton"===e||"linkButton"===e},_refreshButtonGroups:function(){var a=this;function e(e,t,o,i,l,n){var r=e.tool[0],s=e.menuTool[0],e={add:"",remove:""};e[t]+=" jqx-toolbar-tool-inner-button",e[o]+=" jqx-rc-all",e[i]+=" jqx-rc-l",e[l]+=" jqx-rc-r",""!==e.add&&(r.className+=" "+a.toThemeProperty(u.trim(e.add)),s&&(s.className+=" "+a.toThemeProperty(u.trim(e.add)))),""!==e.remove&&(a._removeClass(r,a.toThemeProperty(u.trim(e.remove))),s&&a._removeClass(s,a.toThemeProperty(u.trim(e.remove)))),r.style.borderLeftWidth=n+"px",s&&(s.style.borderLeftWidth=n+"px")}for(var t=0;t<a._toolWidgets.length;t++){var o,i,l,n,r,s,d=a._toolWidgets[t];a._checkType(d.type)&&(l=d.tool,n=d.menuTool,0<t&&(o=a._toolWidgets[t-1].separatorAfterWidget?"|":a._toolWidgets[t-1]),d.separatorAfterWidget?i="|":t<a._toolWidgets.length-1&&(i=a._toolWidgets[t+1]),s=o&&a._checkType(o.type),r=!1===d.separatorAfterWidget&&i&&a._checkType(i.type),s||r?!s&&r?e(d,"remove","remove","add","remove",1):s&&r?e(d,"add","remove","remove","remove",0):s&&!r&&e(d,"remove","remove","remove","add",0):e(d,"remove","add","remove","remove",1),s=a.rtl?"rtl":"ltr",r?(a._removeClass(l[0],a.toThemeProperty("jqx-toolbar-tool-separator-"+s)),a._removeClass(l[0],a.toThemeProperty("jqx-toolbar-tool-no-separator-"+s)),n&&(a._removeClass(n[0],a.toThemeProperty("jqx-toolbar-tool-separator-"+s)),a._removeClass(n[0],a.toThemeProperty("jqx-toolbar-tool-no-separator-"+s)))):d.separatorAfterWidget?(a._removeClass(l[0],a.toThemeProperty("jqx-toolbar-tool-no-separator-"+s)),l[0].className+=" "+a.toThemeProperty("jqx-toolbar-tool-separator-"+s),n&&(a._removeClass(n[0],a.toThemeProperty("jqx-toolbar-tool-no-separator-"+s)),n[0].className+=" "+a.toThemeProperty("jqx-toolbar-tool-separator-"+s))):(a._removeClass(l[0],a.toThemeProperty("jqx-toolbar-tool-separator-"+s)),l[0].className+=" "+a.toThemeProperty("jqx-toolbar-tool-no-separator-"+s),n&&(a._removeClass(n[0],a.toThemeProperty("jqx-toolbar-tool-separator-"+s)),n[0].className+=" "+a.toThemeProperty("jqx-toolbar-tool-no-separator-"+s))))}},_addHandlers:function(){var t=this,e=t.element.id;u.jqx.utilities.resize(t.host,function(){return t._initiallyHidden?(t._createTools(),t._minimize(),void(t._initiallyHidden=!1)):(!0===t._isOpen&&(t._minimizePopup.style.display="none",t._isOpen=!1,t._raiseEvent("1")),void t._minimize())}),t.addHandler(document,"click.jqxToolbar"+e,function(){!0===t._isOpen&&t._openMinimizePopup()}),t.addHandler(t._minimizeButton,"click.jqxToolbar"+e,function(e){e.stopPropagation(),t._openMinimizePopup()}),t.addHandler(u(".jqx-popup"),"click.jqxToolbar"+e,function(e){-1===e.target.className.indexOf("jqx-window-content")&&e.stopPropagation()})},_removeHandlers:function(){var e=this,t=e.element.id;e.removeHandler(document,"click.jqxToolbar"+t),e.removeHandler(e._minimizeButton,"click.jqxToolbar"+t),e.removeHandler(u(".jqx-popup"),"click.jqxToolbar"+t)},_setSize:function(){var e=this,t=e.element.style;t.width=e._toPx(e.width),t.height=e._toPx(e.height),e.minWidth&&(t.minWidth=e._toPx(e.minWidth)),e.maxWidth&&(t.maxWidth=e._toPx(e.maxWidth))},_createTools:function(){var e=this,t=e.tools.split(" "),o=u.trim(e.tools.replace(/\|/g,""));o=(o=o.replace(/\s+/g," ")).split(" "),e._toolWidgets=[];for(var i=0,l=0;l<o.length;l++){o[l]!==t[l+i]&&i++;var n,r=l+i;e._toolWidgets[l-1]&&(n=e._toolWidgets[l-1].tool);var s=t[r],a=t[r-1],d=t[r+1],r=e.initTools;if(""===s)return!0;r=e._initializeTool(l,s,n,a,d,r,!0);e._toolWidgets.push(r)}e._minimizePopup.style.display="none",e._minimizePopup.style.visibility="visible"},_initializeTool:function(e,t,o,i,l,n,r){var s,a=this,d=a._initializeWidget(t,m,p,o),m=d.tool,p=d.menuTool,u=m[0],_="jqx-toolbar-tool",o=p[0],d=!0;!0===a.rtl&&(_+=" jqx-toolbar-tool-rtl"),a.initTools&&(!(c=!0===r?a.initTools(t,e,m,!1):n(t,m,!1))||!1!==c.minimizable&&!1!==c.menuTool?(!0===r?a.initTools(t,e,p,!0):n(t,p,!0),p&&(s="jqx-toolbar-tool-minimized")):("custom"!==t?p[a._toolToWidgetMapping[t]]("destroy"):p.remove(),!1===c.minimizable&&(d=!1),p=!1));var h,r=!1;p&&(o.style.display="none");var e=a.rtl?"rtl":"ltr",n=["button","toggleButton","repeatButton","linkButton"],c={button:"jqxButton",toggleButton:"jqxToggleButton",repeatButton:"jqxRepeatButton",linkButton:"jqxRepeatButton"};return"|"===l?(r=!0,_+=" jqx-toolbar-tool-separator-"+e,p&&(s+=" jqx-toolbar-tool-separator-"+e),p&&((h=document.createElement("div")).className=a.toThemeProperty("jqx-fill-state-pressed jqx-toolbar-minimized-popup-separator"),a._minimizePopup.appendChild(h))):(-1===n.indexOf(t)||-1!==n.indexOf(t)&&-1===n.indexOf(l))&&(_+=" jqx-toolbar-tool-no-separator-"+e,p&&(s+=" jqx-toolbar-tool-no-separator-"+e)),-1===n.indexOf(i)&&-1!==n.indexOf(t)&&-1!==n.indexOf(l)?!1===a.rtl?(m[c[t]]({roundedCorners:"left"}),p&&p[c[t]]({roundedCorners:"left"})):(m[c[t]]({roundedCorners:"left"}),u.style.borderLeftWidth="0px",p&&(p[c[t]]({roundedCorners:"left"}),o.style.borderLeftWidth="0px")):-1!==n.indexOf(i)&&-1!==n.indexOf(t)&&-1!==n.indexOf(l)?(_+=" jqx-toolbar-tool-inner-button",u.style.borderLeftWidth="0px",p&&(s+=" jqx-toolbar-tool-inner-button",o.style.borderLeftWidth="0px")):-1!==n.indexOf(i)&&-1!==n.indexOf(t)&&-1===n.indexOf(l)&&(!1===a.rtl?(m[c[t]]({roundedCorners:"right"}),u.style.borderLeftWidth="0px",p&&(p[c[t]]({roundedCorners:"right"}),o.style.borderLeftWidth="0px")):(m[c[t]]({roundedCorners:"left"}),p&&p[c[t]]({roundedCorners:"left"}))),u.className+=" "+a.toThemeProperty(_),p&&(o.className+=" "+a.toThemeProperty(s)),{type:t,tool:m,separatorAfterWidget:r,minimizable:d,minimized:!1,menuTool:p,menuSeparator:h}},_initializeWidget:function(e,t,o,i){var l,n,r,s,a=this,d=a._toolToWidgetMapping[e],m=!1;if("string"==typeof a.height&&-1!==a.height.indexOf("%")?m=!0:(p=window.getComputedStyle?window.getComputedStyle(a.element):a.element.currentStyle,n=a.element.offsetHeight-(parseInt(p.paddingTop,10)+parseInt(p.paddingBottom,10)+parseInt(p.borderTopWidth,10)+parseInt(p.borderBottomWidth,10))),"custom"!==e&&void 0===a.host[d]){var p=a._toolToWidgetMapping[e].toLowerCase();throw new Error("jqxToolBar: Missing reference to "+p+".js")}switch(e){case"button":case"toggleButton":t=document.createElement("button"),o=document.createElement("button"),l={theme:a.theme,height:m?"100%":n,disabled:a.disabled,rtl:a.rtl};break;case"dropdownlist":case"combobox":t=document.createElement("div"),o=document.createElement("div"),l={theme:a.theme,autoDropDownHeight:!0,height:m?"100%":n-2,disabled:a.disabled,rtl:a.rtl};break;case"input":(t=document.createElement("input")).setAttribute("type","text"),(o=document.createElement("input")).setAttribute("type","text"),l={theme:a.theme,height:m?"100%":n-2,disabled:a.disabled,rtl:a.rtl};break;case"custom":t=document.createElement("div"),o=document.createElement("div")}return r=a.host.children(),s=u(a._minimizePopup).children(),i||1===r.length&&0===s.length?(a.element.appendChild(t),a._minimizePopup.appendChild(o)):(a.element.insertBefore(t,r[1]),a._minimizePopup.insertBefore(o,s[0])),t=u(t),o=u(o),"custom"!==e&&(t[d](l),o[d](l)),{tool:t,menuTool:o}},_appendMinimizeButton:function(){var e=this;e._minimizedTools=0;var t=document.createElement("div"),o="jqx-menu-minimized-button jqx-toolbar-minimized-button",i=document.createElement("div"),l="jqx-popup jqx-fill-state-normal jqx-rc-b jqx-toolbar-minimized-popup";i.setAttribute("id",e.element.id+"Popup"),!0===e.rtl&&(o+=" jqx-toolbar-minimized-button-rtl",l+=" jqx-toolbar-minimized-popup-rtl"),t.className=e.toThemeProperty(o),i.className=e.toThemeProperty(l),e.element.appendChild(t),document.body.appendChild(i),e._isOpen=!1,i.style.width=e._toPx(e.minimizeWidth),e._minimizeButton=t,e._minimizePopup=i},_openMinimizePopup:function(){var e,t,o=this;!1===o._isOpen?(e=(t=o.host.offset()).left,!1===o.rtl&&(e+=o.element.offsetWidth-parseInt(o.minimizeWidth,10)-(o._getComputedStyle(o._minimizePopup,"paddingLeft")+o._getComputedStyle(o._minimizePopup,"paddingRight")+o._getComputedStyle(o._minimizePopup,"borderLeftWidth")+o._getComputedStyle(o._minimizePopup,"borderRightWidth"))),t=t.top+o.element.offsetHeight-1,o._minimizePopup.style.left=e+"px",o._minimizePopup.style.top=t+"px",u(o._minimizePopup).slideDown("fast",function(){o._isOpen=!0,o._raiseEvent("0")})):(u(o._minimizePopup).slideUp("fast"),o._isOpen=!1,o._raiseEvent("1"))},_minimize:function(){var e=this,t=0;0<e._minimizedTools&&(t=e._minimizeButton.offsetWidth+e._getComputedStyle(e._minimizeButton,"marginLeft"));t=e.element.offsetWidth-e._getComputedStyle(e.element,"paddingLeft")-e._getComputedStyle(e.element,"paddingRight")-t-10;if(!(t<0)){for(var o,i,l,n=0,r=0;r<e._toolWidgets.length;r++){var s=e._toolWidgets[r].tool;!1===e._toolWidgets[r].minimized?n+=s[0].offsetWidth+e._getComputedStyle(s[0],"marginLeft")+e._getComputedStyle(s[0],"marginRight"):void 0===o&&(i=s[0],l=void 0,(l=i.cloneNode(!0)).style.visibility="hidden",l.style.display="block",l.style.position="absolute",document.body.appendChild(l),i=l.offsetWidth+e._getComputedStyle(l,"marginLeft")+e._getComputedStyle(l,"marginRight"),u(l).remove(),o=i)}t<n?(e._minimizeTool(!0),e._minimize()):void 0!==o&&n+o<t&&(e._minimizeTool(!1),e._minimize())}},_minimizeTool:function(e){var t,o,i=this;if(!0===e){for(var l=i._toolWidgets.length-1;0<=l;l--)if(t=i._toolWidgets[l],!1!==t.minimizable&&!1===t.minimized){o=i._getToolValue(t.tool,t.type),t.tool[0].style.display="none",t.menuTool&&(t.menuTool[0].style.display="block",i._setToolValue(o,t.menuTool,t.type)),t.menuSeparator&&(t.menuSeparator.style.display="block"),i._toolWidgets[l].minimized=!0,i._minimizedTools++,1===i._minimizedTools&&(i._minimizeButton.style.display="block");break}}else for(var n=0;n<i._toolWidgets.length;n++)if(!0===(t=i._toolWidgets[n]).minimized){t.menuTool&&(o=i._getToolValue(t.menuTool,t.type),t.menuTool[0].style.display="none"),t.menuSeparator&&(t.menuSeparator.style.display="none"),t.tool.show(),t.menuTool&&i._setToolValue(o,t.tool,t.type),i._toolWidgets[n].minimized=!1,i._minimizedTools--,0===i._minimizedTools&&(i._minimizeButton.style.display="none");break}},_getToolValue:function(e,t){switch(t){case"button":case"custom":i=void 0;break;case"toggleButton":var o=-1!==e[0].className.indexOf("jqx-fill-state-pressed"),i={text:e[0].innerHTML,toggled:o};break;case"dropdownlist":case"combobox":t=this._toolToWidgetMapping[t];i=e[t]("checkboxes")?e[t]("val"):e[t]("getSelectedIndex");break;case"input":i=e.val()}return i},escape_HTML:function(e){return e.replace(/[&<>"]/g,function(e){return{"&":"&","<":"<",">":">",'"':'"'}[e]||e})},_setToolValue:function(e,t,o){if(void 0!==e)switch(o){case"button":case"custom":break;case"toggleButton":t[0].innerHTML=this.escape_HTML(e.text),-1!==t[0].className.indexOf("jqx-fill-state-pressed")!==e.toggled&&t.jqxToggleButton("toggle");break;case"dropdownlist":case"combobox":var i=this._toolToWidgetMapping[o];if(t[i]("checkboxes")){if(t[i]("uncheckAll"),""===e)return;for(var l=e.split(","),n=0;n<l.length;n++)t[i]("checkItem",l[n])}else e=t[i]("selectIndex",e);break;case"input":t.val(e)}},_restoreChanges:function(){var o=this;u.each(o._toolChanges,function(e,t){"addTool"===t.action?o.addTool(t.type,t.position,t.separator,t.initCallback):"destroyTool"===t.action?o._destroyTool(t.index):"disableTool"===t.action&&o.disableTool(t.index,t.disable)})},_removeClass:function(e,t){u(e).removeClass(t)},_toPx:function(e){return"number"==typeof e?e+"px":e},_getComputedStyle:function(e,t){var o;return window.getComputedStyle?o=window.getComputedStyle(e):e.currentStyle&&(o=e.currentStyle),"string"==typeof o[t]&&-1===o[t].indexOf("px")?0:parseInt(o[t],10)}})}(jqxBaseFramework);