!function(a){a.jqx.jqxWidget("jqxPasswordInput","",{}),a.extend(a.jqx._jqxPasswordInput.prototype,{defineInstance:function(){var e={width:null,height:null,disabled:!1,rtl:!1,placeHolder:null,showStrength:!1,showStrengthPosition:"right",maxLength:null,minLength:null,showPasswordIcon:!0,strengthTypeRenderer:null,passwordStrength:null,changeType:null,hint:!0,localization:{passwordStrengthString:"Password strength",tooShort:"Too short",weak:"Weak",fair:"Fair",good:"Good",strong:"Strong",showPasswordString:"Show Password"},strengthColors:{tooShort:"rgb(170, 0, 51)",weak:"rgb(170, 0, 51)",fair:"rgb(255, 204, 51)",good:"rgb(45, 152, 243)",strong:"rgb(118, 194, 97)"}};return this===a.jqx._jqxPasswordInput.prototype||a.extend(!0,this,e),e},createInstance:function(){var e=this;e._inDOM=document.body.contains(e.element),e.render()},render:function(){var t=this,e=a.jqx.browser.browser,i=a.jqx.browser.version;this._browserCheck="msie"!=e||"7.0"!=i&&"8.0"!=i,this.widgetID=t.element.id;var s,n;if("password"!=this.element.getAttribute("type"))throw"Invalid input type. Please set the type attribute of the input element to password.";this.input=this.element,t.isMaterialized()&&((s=a("<div></div>")).addClass(t.toThemeProperty("jqx-input-group")),this.host.after(s),n=this.element,e=this.host.data(),s.append(n),i=a("<label></label"),this.hint&&(i[0].innerHTML=this.placeHolder),i.addClass(t.toThemeProperty("jqx-input-label")),s.append(i),n=a("<span></span>"),s.append(n),n.addClass(t.toThemeProperty("jqx-input-bar")),s[0].id=this.element.id,this.element.removeAttribute("id"),s[0].style.cssText=this.element.style.cssText,t.input=t.element,this.element.style.cssText="",this.bar=n,this.label=i,this.host=s,this.element=s[0],this.host.data(e),(t=this).template&&(t.bar.addClass(t.toThemeProperty("jqx-"+t.template)),t.label.addClass(t.toThemeProperty("jqx-"+t.template)))),t._hidden=!0,t._setTheme(),t._setAttributes(),t._showPassword(),t._showStrength(),a.jqx.utilities.resize(this.host,function(){if(!t._inDOM){var e=t.element.parentNode;return t.element.nextSibling?e.insertBefore(t.icon,t.element.nextSibling):e.appendChild(t.icon),void(t._inDOM=!0)}t.element!==document.activeElement&&!t.isMaterialized()||(t._positionIcon(),t.showStrength&&t.host.jqxTooltip("close"))})},refresh:function(e){var t=this;e||(t.removeHandler(t.host,"change.passwordinput"+t.widgetID),t.removeHandler(t.host,"focus.passwordinput"+t.widgetID),t.removeHandler(t.host,"blur.passwordinput"+t.widgetID),t.removeHandler(t.host,"click.passwordinput"+t.widgetID),t.removeHandler(t.host,"keyup.passwordinput"+t.widgetID),t.removeHandler(t.icon,"mousedown.passwordinput"+t.widgetID),t.removeHandler(a(document),"mouseup.passwordinput"+t.widgetID),t.removeHandler(a(document),"mousedown.passwordinput"+t.widgetID),t._setAttributes(),t._setTheme(),t._showPassword(),t._showStrength())},val:function(e){var t=this,i=t.input.value,s="placeholder"in t.input;if(a.isEmptyObject(e)&&""!==e)return s||i!==t.placeHolder||(i=""),i;if(!s||e!==i){if(!s){if(""===e)return void(i!==t.placeHolder&&(t.input.value=t.placeHolder,t.input.setAttribute("type","text")));t.input.setAttribute("type","password")}t.input.value=e,s&&t.isMaterialized()&&t._refreshPlaceHolder(),!0===t.showStrength&&t._evaluateStrength()}},propertyChangedHandler:function(e,t,i,s){"theme"!==t?"disabled"!=t?"placeHolder"==t?this._browserCheck&&("placeholder"in this.element?e.element.setAttribute("placeholder",e.placeHolder):""===e.input.value?(e.input.setAttribute("type","text"),e.input.value=s):e.input.value==i&&(e.input.value=s)):this.refresh():e.disabled?(e.element.setAttribute("disabled","disabled"),e.element.className+=" "+e.toThemeProperty("jqx-fill-state-disabled")):(e.host.removeAttr("disabled"),e.host.removeClass(e.toThemeProperty("jqx-fill-state-disabled"))):a.jqx.utilities.setTheme(i,s,e.host)},resize:function(e,t){this.width=e,this.height=t,null!=this.width&&-1!=this.width.toString().indexOf("px")?this.element.style.width=this.width:null==this.width||isNaN(this.width)||(this.element.style.width=this.width+"px"),null!=this.height&&-1!=this.height.toString().indexOf("px")?this.element.style.height=this.height:null==this.height||isNaN(this.height)||(this.element.style.height=this.height+"px")},_setAttributes:function(){var t=this,e=t.element;null!=this.width&&-1!=this.width.toString().indexOf("px")?this.element.style.width=this.width:null==this.width||isNaN(this.width)||(this.element.style.width=this.width+"px"),null!=this.height&&-1!=this.height.toString().indexOf("px")?this.element.style.height=this.height:null==this.height||isNaN(this.height)||(this.element.style.height=this.height+"px"),null!=this.height&&-1!=this.height.toString().indexOf("%")&&(this.element.style.height=this.height),null!=this.width&&-1!=this.width.toString().indexOf("%")&&(this.element.style.width=this.width),t.maxLength&&e.setAttribute("maxlength",t.maxLength),t.minLength&&e.setAttribute("minLength",t.minLength),t.placeHolder&&t._browserCheck&&("placeholder"in t.element?e.setAttribute("placeholder",t.placeHolder):""===e.value&&(e.setAttribute("type","text"),e.value=t.placeHolder)),t.disabled?(e.setAttribute("disabled","disabled"),e.className+=" "+this.toThemeProperty("jqx-fill-state-disabled")):(e.removeAttribute("disabled"),t.host.removeClass(t.toThemeProperty("jqx-fill-state-disabled")));var i=!1;t.addHandler(e,"change.passwordinput"+t.widgetID,function(e){i||(e.preventDefault(),e.stopPropagation(),i=!0,t._raiseEvent(),i=!1),t._refreshPlaceHolder()}),t.addHandler(e,"click.passwordinput"+t.widgetID,function(){t.showPasswordIcon&&t.icon&&(t.icon.style.display="inline",t._positionIcon())}),t.interval=null,t.addHandler(e,"keydown.passwordinput"+t.widgetID,function(){var e;t.changeType="keyboard",t.showPasswordIcon&&t.icon&&(t.interval&&clearInterval(t.interval),e=0,t.interval=setInterval(function(){"none"!=t.icon.style.display?(t._positionIcon(),5<++e&&clearInterval(t.interval)):clearInterval(t.interval)},100))}),t.addHandler(e,"focus.passwordinput"+t.widgetID,function(){t._focused=!0,e.className+=" "+t.toThemeProperty("jqx-fill-state-focus"),!t.placeHolder||!t._browserCheck||"placeholder"in t.element||e.value!=t.placeHolder||(e.value="",t._hidden&&e.setAttribute("type","password")),0<t.val().length&&t.showStrength&&t.host.jqxTooltip("content")&&t.host.jqxTooltip("open"),t.showPasswordIcon&&t.icon&&(t.icon.style.display="inline",t._positionIcon())}),t.addHandler(e,"blur.passwordinput"+t.widgetID,function(){t._focused=!1,t.host.removeClass(t.toThemeProperty("jqx-fill-state-focus")),!t.placeHolder||!t._browserCheck||"placeholder"in t.input||""!==e.value||(t.input.value=t.placeHolder,t.input.setAttribute("type","text")),t.showPasswordIcon&&t._browserCheck&&(!1===t.rtl?t.host.removeClass(t.toThemeProperty("jqx-passwordinput-password-icon-ltr")):t.host.removeClass(t.toThemeProperty("jqx-passwordinput-password-icon-rtl"))),t.showStrength&&t.host.jqxTooltip("close"),t.showPasswordIcon&&t.icon&&(t.icon.style.display="none")})},_refreshPlaceHolder:function(){var e=this;e.isMaterialized()||("placeholder"in this.input&&!(a.jqx.browser.msie&&a.jqx.browser.version<9)?e.input.setAttribute("placeHolder",e.placeHolder):""===e.input.value&&(e.input.value=e.placeHolder)),""!==e.input.value?e.element.setAttribute("hint",!0):e.element.removeAttribute("hint"),e.label&&(e.label.innerHTML=e.placeHolder)},destroy:function(){this.host.jqxTooltip&&this.host.jqxTooltip("destroy"),this.host.remove()},_setTheme:function(){var e=this,t="jqx-widget jqx-widget-content jqx-input jqx-input-widget jqx-rc-all";e.rtl?(t+=" jqx-rtl",e.element.style.direction="rtl"):(e.host.removeClass(e.toThemeProperty("jqx-rtl")),e.element.style.direction="ltr"),e.element.className+=" "+e.toThemeProperty(t)},_showPassword:function(){var e,t,i,s,n,o;this.showPasswordIcon&&this._browserCheck&&(e=this,t=document.createElement("span"),i=".passwordinput"+e.widgetID,t.setAttribute("tabindex",-1),t.setAttribute("hasfocus",!1),t.setAttribute("title",e.localization.showPasswordString),t.style.position="absolute",t.style.display="none",t.className=e.toThemeProperty("jqx-passwordinput-password-icon"),(s=e.element.parentNode)&&(e.element.nextSibling?s.insertBefore(t,e.element.nextSibling):s.appendChild(t)),e.icon=t,e._positionIcon(),n=function(){e.element.setAttribute("type","password"),e.input&&e.input.setAttribute("type","password"),e._hidden=!0},o=function(){!1===e._hidden?n():e._hidden&&(e.element.setAttribute("type","text"),e.input&&e.input.setAttribute("type","text"),e._hidden=!1)},a.jqx.mobile.isTouchDevice()?e.addHandler(e.icon,"mousedown"+i,function(){return o(),!1}):(e.addHandler(e.icon,"mousedown"+i,function(){return o(),!1}),e.addHandler(a(document),"mouseup"+i,function(){return n(),!1}),e.addHandler(a(document),"mousedown"+i,function(){e._focused&&n()})))},_positionIcon:function(){var e=this.host.offset(),t=this.element.offsetWidth,i=this.element.offsetHeight,s=a(this.icon);this.rtl?s.offset({top:parseInt(e.top+i/2-5,10),left:e.left+2}):s.offset({top:parseInt(e.top+i/2-5,10),left:e.left+t-18})},_showStrength:function(){var e=this;if(e.showStrength){if(!e.host.jqxTooltip)throw new Error("jqxPasswordInput: Missing reference to jqxtooltip.js");var t,i=e.widgetID+"Strength",s=i+"Value",n=i+"Indicator";t=e.strengthTypeRenderer?(i=e.input.value,"placeholder"in e.input||!e._browserCheck||i!=e.placeHolder||(i=""),e._countCharacters(),t=e.localization.tooShort,e.strengthTypeRenderer(i,{letters:e.letters,numbers:e.numbers,specialKeys:e.specials},t)):'<div style="width: 220px;"><div><span style="font-weight: bold;">'+e.localization.passwordStrengthString+': </span><span id="'+s+'"></span></div><div id="'+n+'"></div></div>',e.host.jqxTooltip({theme:e.theme,position:e.showStrengthPosition,content:t,trigger:"none",autoHide:!1,rtl:e.rtl}),e.strengthTypeRenderer||(n=document.getElementById(n),document.getElementById(s).innerHTML=e.localization.tooShort,n.className+=" jqx-passwordinput-password-strength-inicator",n.style.backgroundColor=e.strengthColors.tooShort,!1===e.rtl?n.style.float="left":n.style.float="right"),e._checkStrength()}},_checkStrength:function(){var e=this;e.addHandler(e.host,"keyup.passwordinput"+e.widgetID,function(){e._evaluateStrength()})},_raiseEvent:function(){var e=new a.Event("change");return e.args={type:this.changeType},this.changeType=null,(e.owner=this).host.trigger(e)},_evaluateStrength:function(){var e=this,t=e.input.value,i=t.length;e._countCharacters(),0<i&&e.showStrength&&!e.host.jqxTooltip("opened")&&e.host.jqxTooltip("open");var s,n=e.letters+e.numbers+2*e.specials+e.letters*e.numbers/2+i,o=i<8?e.localization.tooShort:n<20?e.localization.weak:n<30?e.localization.fair:n<40?e.localization.good:e.localization.strong;if(e.strengthTypeRenderer)s=e.strengthTypeRenderer(t,{letters:e.letters,numbers:e.numbers,specialKeys:e.specials},o),e.host.jqxTooltip({content:s});else{e.passwordStrength&&(s=e.passwordStrength(t,{letters:e.letters,numbers:e.numbers,specialKeys:e.specials},o),a.each(e.localization,function(){if(s==this)return o=s,!1})),document.getElementById(e.widgetID+"StrengthValue").innerHTML=o;var r,l,t=document.getElementById(e.widgetID+"StrengthIndicator");switch(o){case e.localization.tooShort:r="20%",l=e.strengthColors.tooShort;break;case e.localization.weak:r="40%",l=e.strengthColors.weak;break;case e.localization.fair:r="60%",l=e.strengthColors.fair;break;case e.localization.good:r="80%",l=e.strengthColors.good;break;case e.localization.strong:r="100%",l=e.strengthColors.strong}t.style.width=r,t.style.backgroundColor=l}},_countCharacters:function(){var e=this;e.letters=0,e.numbers=0,e.specials=0;for(var t=e.input.value,i=t.length,s=0;s<i;s++){var n=t.charAt(s),o=t.charCodeAt(s);64<o&&o<91||96<o&&o<123||127<o&&o<155||159<o&&o<166?e.letters+=1:!1!==isNaN(n)?-1=="<>@!#$%^&*()_+[]{}?:;|'\"\\,./~`-=".indexOf(n)||(e.specials+=1):e.numbers+=1}},_toPx:function(e){return"number"==typeof e?e+"px":e}})}(jqxBaseFramework);