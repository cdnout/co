!function(x){x.extend(x.jqx._jqxGrid.prototype,{autoresizecolumns:function(e,t){"cells"!=e&&"all"!=e&&"column"!=e&&(e="all");var i=this.that,l=this.getrows();this.pageable&&(l=this.dataview.rows,this.groupable&&(l=this.dataview.records)),t=null==t?0:parseInt(t);var s,r=l.length;null==r&&null!=l&&(s=new Array,x.each(l,function(e){s.push(this)}),r=(l=s).length);var o=x("<span></span>");o.addClass(this.toThemeProperty("jqx-widget")),o.addClass(this.toThemeProperty("jqx-grid-cell")),x(document.body).append(o);var n=[],a=[],d=[],u=[],c=i.host.width();"hidden"!=i.vScrollBar[0].style.visibility&&(c-=this.scrollbarsize+5),c<0&&(c=0);for(var h=0;h<r;h++)for(var m,p,w,g,f,z=l[h],b=0;b<this.columns.records.length;b++)(y=this.columns.records[b]).hidden||0<this.groups.length&&b<=this.groups.length-1||(null==a[y.displayfield]&&(a[y.displayfield]=0),null==d[y.displayfield]&&(d[y.displayfield]=""),p=z[y.displayfield],""!=y.cellsformat?x.jqx.dataFormat&&(x.jqx.dataFormat.isDate(p)?p=x.jqx.dataFormat.formatdate(p,y.cellsformat,this.gridlocalization):x.jqx.dataFormat.isNumber(p)&&(p=x.jqx.dataFormat.formatnumber(p,y.cellsformat,this.gridlocalization))):y.cellsrenderer&&(m=i._defaultcellsrenderer(p,y),null!=(m=y.cellsrenderer(h,y.datafield,p,m,y.getcolumnproperties(),z))&&(p=x(m).text())),null!=e&&"cells"!=e&&"all"!=e||null!=p&&(n=p.toString().length,w=p.toString().replace(/[^A-Z]/g,"").length,n>a[y.displayfield]&&(a[y.displayfield]=n,d[y.displayfield]=p,u[y.displayfield]=w),0<n&&w<=n&&(g=20*w+15*(n-w),(f=20*u[y.displayfield]+15*(a[y.displayfield]-u[y.displayfield]))<g&&0<g&&0<f&&(a[y.displayfield]=n,d[y.displayfield]=p,u[y.displayfield]=w))),"column"!=e&&"all"!=e||(y.text.toString().length>a[y.displayfield]&&(d[y.displayfield]=y.text,a[y.displayfield]=y.text.length,w=y.text.toString().replace(/[^A-Z]/g,"").length,u[y.displayfield]=w),n=(p=y.text).toString().length,w=p.toString().replace(/[^A-Z]/g,"").length,0<n&&w<=n&&(g=20*w+15*(n-w),(f=20*u[y.displayfield]+15*(a[y.displayfield]-u[y.displayfield]))<g&&0<g&&0<f&&(a[y.displayfield]=n,d[y.displayfield]=p,u[y.displayfield]=w))));if(this.columns.records){for(var v,_,b=0;b<this.columns.records.length;b++)(y=this.columns.records[b]).displayfield&&(null==d[y.displayfield]&&(d[y.displayfield]=y.text),0<=o[0].className.indexOf("jqx-grid-column-header")&&o.removeClass(this.toThemeProperty("jqx-grid-column-header")),d[y.displayfield]==y.text&&o.addClass(this.toThemeProperty("jqx-grid-column-header")),o[0].innerHTML=this.escape_HTML(d[y.displayfield].toString()),v=o.outerWidth()+10,0<o.children().length&&(v=o.children().outerWidth()+10),x.jqx.browser.msie&&x.jqx.browser.version<8&&(v+=10),this.filterable&&this.showfilterrow&&(v+=5),v+=t,(v+=20)>y.maxwidth&&(v=y.maxwidth),null!=y._width&&(y.__width=y._width),y._width=null,("auto"==y.maxwidth||v<=y.maxwidth)&&(_=y.width,v<y.minwidth&&(v=y.minwidth),y.width=v,null!=y._percentagewidth&&(y._percentagewidth=null),this._raiseEvent(14,{columntext:y.text,column:y.getcolumnproperties(),datafield:y.datafield,displayfield:y.displayfield,oldwidth:_,newwidth:v})));o.remove(),this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo);for(var y,b=0;b<this.columns.records.length;b++)null!=(y=this.columns.records[b]).__width&&(y._width=y.__width)}},autoresizecolumn:function(e,t,i){if("cells"!=t&&"all"!=t&&"column"!=t&&(t="all"),null==e)return!1;var l=this.getrows();this.pageable&&(l=this.dataview.rows,this.groupable&&(l=this.dataview.records));var s=this.getcolumn(e);if(null==s)return!1;i=null==i?0:parseInt(i);var r=l.length,o=x("<span></span>");o.addClass(this.toThemeProperty("jqx-widget")),o.addClass(this.toThemeProperty("jqx-grid-cell")),x(document.body).append(o);var n=0,a="",d=0,u=this.that,c=u.host.width();if("hidden"!=u.vScrollBar[0].style.visibility&&(c-=this.scrollbarsize+5),c<0&&(c=0),null==t||"cells"==t||"all"==t)for(var h=0;h<r;h++){var m,p,w,g,f,z=l[h][s.displayfield];""!=s.cellsformat?x.jqx.dataFormat&&(x.jqx.dataFormat.isDate(z)?z=x.jqx.dataFormat.formatdate(z,s.cellsformat,this.gridlocalization):x.jqx.dataFormat.isNumber(z)&&(z=x.jqx.dataFormat.formatnumber(z,s.cellsformat,this.gridlocalization))):!s.cellsrenderer||null!=(m=s.cellsrenderer(h,s,z))&&(z=x(m).text()),null!=z&&(p=z.toString().length,w=z.toString().replace(/[^A-Z]/g,"").length,n<p&&(n=p,a=z,d=w),0<p&&w<=p&&(f=20*d+15*(n-d))<(g=20*w+15*(p-w))&&0<g&&0<f&&(n=p,a=z,d=w))}"column"!=t&&"all"!=t||(s.text.toString().length>n&&(a=s.text),p=(z=s.text.toString()).toString().length,w=z.toString().replace(/[^A-Z]/g,"").length,0<p&&w<=p&&(f=20*d+15*(n-d))<(g=20*w+15*(p-w))&&0<g&&0<f&&(n=p,a=z,d=w)),null==a&&(a=s.text),o[0].innerHTML=this.escape_HTML(a),a==s.text&&o.addClass(this.toThemeProperty("jqx-grid-column-header"));t=o.outerWidth()+10;x.jqx.browser.msie&&x.jqx.browser.version<8&&(t+=5),this.filterable&&this.showfilterrow&&(t+=5),t+=i,o.remove(),t>s.maxwidth&&(t=s.maxwidth),("auto"==s.maxwidth||t<=s.maxwidth)&&(o=s.width,t<s.minwidth&&(t=s.minwidth),s.width=t,null!=s._width&&(s.__width=s._width),(s._width=null)!=s._percentagewidth&&(s._percentagewidth=null),this._updatecolumnwidths(),this._updatecellwidths(),this._raiseEvent(14,{columntext:s.text,column:s.getcolumnproperties(),datafield:e,displayfield:s.displayfield,oldwidth:o,newwidth:t}),this._renderrows(this.virtualsizeinfo),null!=s._width&&(s._width=s.__width))},_handlecolumnsresize:function(){var n=this.that;if(this.columnsresize){var a=!1;n.isTouchDevice()&&!0!==n.touchmode&&(a=!0);var e="mousemove.resize"+this.element.id,t="mousedown.resize"+this.element.id,i="mouseup.resize"+this.element.id;a&&(e=x.jqx.mobile.getTouchEventName("touchmove")+".resize"+this.element.id,t=x.jqx.mobile.getTouchEventName("touchstart")+".resize"+this.element.id,i=x.jqx.mobile.getTouchEventName("touchend")+".resize"+this.element.id),this.removeHandler(x(document),e),this.addHandler(x(document),e,function(e){if(null!=x.data(document.body,"contextmenu"+n.element.id)&&n.autoshowcolumnsmenubutton)return!0;if(null!=n.resizablecolumn&&!n.disabled&&n.resizing&&null!=n.resizeline){n.resizablecolumn.columnelement;var t=n.host.coord(),i=parseInt(n.resizestartline.coord().left),l=i-n._startcolumnwidth,s="auto"==(s=n.resizablecolumn.column.minwidth)?0:parseInt(s),r="auto"==(r=n.resizablecolumn.column.maxwidth)?0:parseInt(r),o=e.pageX;a&&(o=n.getTouches(e)[0].pageX),l+=s;s=0<r?i+r:0,r=0==r||n._startcolumnwidth+o-i<r;if(n.rtl&&(r=!0),r)if(n.rtl){if(o>=t.left&&o<=t.left+n.host.width()&&(n.resizeline.css("left",o),a))return!1}else if(o>=t.left&&l<=o&&((0!=s&&e.pageX<s||0==s)&&n.resizeline.css("left",o),a))return!1}return!(!a&&null!=n.resizablecolumn)&&void 0}),this.removeHandler(x(document),t),this.addHandler(x(document),t,function(e){if(null!=x.data(document.body,"contextmenu"+n.element.id)&&n.autoshowcolumnsmenubutton)return!0;if(null!=n.resizablecolumn&&!n.disabled){var t=n.resizablecolumn.columnelement;if(t.coord().top+t.height()+5<e.pageY)n.resizablecolumn=null;else if(t.coord().top-5>e.pageY)n.resizablecolumn=null;else{if(n._startcolumnwidth=n.resizablecolumn.column.width,n.resizablecolumn.column._width=null,x(document.body).addClass("jqx-disableselect"),x(document.body).addClass("jqx-position-reset"),n.host.addClass("jqx-disableselect"),n.content.addClass("jqx-disableselect"),n._mouseDownResize=new Date,n.resizing=!0,n._lastmouseDownResize&&n.columnsautoresize&&n._lastmouseDownResize-n._mouseDownResize<300&&-500<n._lastmouseDownResize-n._mouseDownResize){var i=n.resizablecolumn.column;if(i.resizable){n.resizablecolumn.column.width;t=n.hScrollBar[0].style.visibility;return n._resizecolumn=null,n.resizeline.hide(),n.resizestartline.hide(),n.resizebackground.remove(),n.resizablecolumn=null,n.columndragstarted=!1,n.dragmousedown=null,n.__drag=!1,n.autoresizecolumn(i.displayfield,"all"),t!=n.hScrollBar[0].style.visibility&&n.hScrollInstance.setPosition(0),n.rtl&&n._arrange(),n.autosavestate&&n.savestate&&n.savestate(),e.stopPropagation(),n.suspendClick=!0,setTimeout(function(){n.suspendClick=!1},100),!1}}n._lastmouseDownResize=new Date,n._resizecolumn=n.resizablecolumn.column,n.resizeline=n.resizeline||x('<div style="position: absolute;"></div>'),n.resizestartline=n.resizestartline||x('<div style="position: absolute;"></div>'),n.resizebackground=n.resizebackground||x('<div style="position: absolute; left: 0; top: 0; background: #000;"></div>'),n.resizebackground.css("opacity",.01),n.resizebackground.css("cursor","col-resize"),n.resizeline.css("cursor","col-resize"),n.resizestartline.css("cursor","col-resize"),n.resizeline.addClass(n.toThemeProperty("jqx-grid-column-resizeline")),n.resizestartline.addClass(n.toThemeProperty("jqx-grid-column-resizestartline")),x(document.body).append(n.resizeline),x(document.body).append(n.resizestartline),x(document.body).append(n.resizebackground);var s=n.resizablecolumn.columnelement.coord();n.resizebackground.css("left",n.host.coord().left),n.resizebackground.css("top",n.host.coord().top),n.resizebackground.width(n.host.width()),n.resizebackground.height(n.host.height()),n.resizebackground.css("z-index",9999);e=function(e){n.rtl?e.css("left",parseInt(s.left)):e.css("left",parseInt(s.left)+n._startcolumnwidth);var t=n._groupsheader()?n.groupsheader.height():0;t+=n.showtoolbar?n.toolbarheight:0,t+=n.showstatusbar?n.statusbarheight:0;var i=0;n.pageable&&(i=n.pagerheight);var l="visible"==n.hScrollBar.css("visibility")?17:0;e.css("top",parseInt(s.top)),e.css("z-index",99999),n.columngroups?e.height(n.host.height()+n.resizablecolumn.columnelement.height()-i-t-l-n.columngroupslevel*n.columnsheight):e.height(n.host.height()-i-t-l),n.enableanimations?e.show("fast"):e.show()};e(n.resizeline),e(n.resizestartline),n.dragmousedown=null}}});function l(){if(x(document.body).removeClass("jqx-disableselect"),x(document.body).removeClass("jqx-position-reset"),(n.showfilterrow||n.showstatusbar||n.showtoolbar||n.enablebrowserselection)&&(n.host.removeClass("jqx-disableselect"),n.content.removeClass("jqx-disableselect")),n.resizing){if(n._mouseUpResize=new Date,n._mouseUpResize-n._mouseDownResize<200)return n.resizing=!1,void(null!=n._resizecolumn&&null!=n.resizeline&&"block"==n.resizeline.css("display")&&(n._resizecolumn=null,n.resizeline.hide(),n.resizestartline.hide(),n.resizebackground.remove()));if(n.resizing=!1,!n.disabled){var e=n.host.width();if("hidden"!=n.vScrollBar[0].style.visibility&&(e-=20),e<0&&(e=0),null!=n._resizecolumn&&null!=n.resizeline&&"block"==n.resizeline.css("display")){var t=parseInt(n.resizeline.css("left")),i=parseInt(n.resizestartline.css("left")),l=n._startcolumnwidth+t-i;n.rtl&&(l=n._startcolumnwidth-t+i);i=n._resizecolumn.width;n._closemenu(),l<n._resizecolumn.minwidth&&(l=n._resizecolumn.minwidth),n._resizecolumn.width=l,null!=n._resizecolumn._percentagewidth&&(n._resizecolumn._percentagewidth=l/e*100);for(var s=0;s<n._columns.length;s++)if(n._columns[s].datafield===n._resizecolumn.datafield){n._columns[s].width=n._resizecolumn.width,n._columns[s].width<n._resizecolumn.minwidth&&(n._columns[s].width=n._resizecolumn.minwidth);break}e=n.hScrollBar[0].style.visibility;n._updatecolumnwidths(),n._updatecellwidths(),n._raiseEvent(14,{columntext:n._resizecolumn.text,column:n._resizecolumn.getcolumnproperties(),datafield:n._resizecolumn.datafield,oldwidth:i,newwidth:l}),n._renderrows(n.virtualsizeinfo),n.autosavestate&&n.savestate&&n.savestate(),e!=n.hScrollBar[0].style.visibility&&n.hScrollInstance.setPosition(0),n.rtl&&n._arrange(),n._resizecolumn=null,n.resizeline.hide(),n.resizestartline.hide(),n.resizebackground.remove(),n.resizablecolumn=null}else n.resizablecolumn=null}}}var s;try{""==document.referrer&&!window.frameElement||((s=null)!=window.top&&window.top!=window.self&&window.parent&&document.referrer&&(s=document.referrer),s&&-1!=s.indexOf(document.location.host)&&(s=function(e){l()},window.top.document.addEventListener?window.top.document.addEventListener("mouseup",s,!1):window.top.document.attachEvent&&window.top.document.attachEvent("onmouseup",s)))}catch(e){}this.removeHandler(x(document),i),this.addHandler(x(document),i,function(e){return!(null==x.data(document.body,"contextmenu"+n.element.id)||!n.autoshowcolumnsmenubutton)||void l()})}}})}(jqxBaseFramework);