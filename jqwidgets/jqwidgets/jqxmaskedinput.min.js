!function(l){l.jqx.jqxWidget("jqxMaskedInput","",{}),l.extend(l.jqx._jqxMaskedInput.prototype,{defineInstance:function(){var t={value:null,mask:"99999",width:200,height:25,textAlign:"left",readOnly:!1,cookies:!1,promptChar:"_",placeHolder:"",template:"",rtl:!1,disabled:!1,hint:!0,events:["valueChanged","textchanged","mousedown","mouseup","keydown","keyup","keypress","change"],aria:{"aria-valuenow":{name:"value",type:"string"},"aria-disabled":{name:"disabled",type:"boolean"}}};return this===l.jqx._jqxMaskedInput.prototype||l.extend(!0,this,t),t},createInstance:function(){this.render()},render:function(){var a=this;a.element.setAttribute("role","textbox"),a.element.setAttribute("data-role","input"),a.host.addClass(a.toThemeProperty("jqx-maskedinput"));var t=a.element.getAttribute("value");void 0!==t&&""!==t&&null!==t&&(a.value=t),l.jqx.aria(this),l.jqx.aria(this,"aria-multiline",!1),l.jqx.aria(this,"aria-readonly",a.readOnly),a._helpers=[],a._helpers.element=new jqxHelper(a.element),a._helpers.element.addClass(a.toThemeProperty("jqx-input jqx-input-widget jqx-rc-all jqx-widget jqx-widget-content"));var e=a.element.getAttribute("name");"div"===a.element.nodeName.toLowerCase()?(a.element.innerHTML="",(t=document.createElement("input")).setAttribute("type","textarea"),t.setAttribute("autocomplete","off"),t.setAttribute("autocorrect","off"),t.setAttribute("autocapitalize","off"),t.setAttribute("spellcheck",!1),t.setAttribute("name",e),a.element.appendChild(t),a.maskbox=l(t),a.disabled&&(a._helpers.element.addClass(a.toThemeProperty("jqx-input-disabled jqx-fill-state-disabled")),t.setAttribute("disabled",!0))):(a.maskbox=a.host,a.element.setAttribute("autocomplete","off"),a.element.setAttribute("autocorrect","off"),a.element.setAttribute("autocapitalize","off"),a.element.setAttribute("spellcheck",!1),a.element.setAttribute("name",e),a.disabled&&(a._helpers.element.addClass(a.toThemeProperty("jqx-input-disabled jqx-fill-state-disabled")),a.element.setAttribute("disabled",!0))),a._helpers.maskbox=new jqxHelper(a.maskbox[0]),a._helpers.maskbox.addClass(a.toThemeProperty("jqx-reset jqx-input-content jqx-widget-content")),a.rtl&&a._helpers.maskbox.addClass(a.toThemeProperty("jqx-rtl")),a.propertyChangeMap.disabled=function(t,e,i,s){s?t._helpers.maskbox.addClass(a.toThemeProperty("jqx-input-disabled")):t._helpers.maskbox.removeClass(a.toThemeProperty("jqx-input-disabled"))},a.selectedText="",a.self=this,a.oldValue=a._value(),a.items=[],a._initializeLiterals(),a._render(),null!=a.value&&a.inputValue(a.value.toString()),0<a.host.parents("form").length&&a.host.parents("form").on("reset",function(){setTimeout(function(){a.clearValue()},10)}),a.addHandlers(),!a.cookies||(e=l.jqx.cookie.cookie("maskedInput."+a.element.id))&&a.val(e)},addHandlers:function(){var s=this,t="";this.addHandler(this.maskbox,"blur",function(){s.rtl&&s.maskbox.css("direction","ltr"),s._helpers.maskbox.removeClass(s.toThemeProperty("jqx-fill-state-focus")),s.maskbox.val()!==t&&(s._raiseEvent(7,{type:"keyboard"}),s.cookies&&l.jqx.cookie.cookie("maskedInput."+s.element.id,s.maskbox.val()))}),this.addHandler(this.maskbox,"focus",function(){t=s.maskbox[0].value,s.rtl&&(s.maskbox[0].style.direction="rtl"),s._helpers.element.addClass(s.toThemeProperty("jqx-fill-state-focus"))}),this.addHandler(this.host,"keydown",function(t){var e=s.readOnly,i=t.charCode||t.keyCode||0;if(e||s.disabled)return!1;i=s._handleKeyDown(t,i);return i||(t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation()),i}),this.addHandler(this.host,"keyup",function(t){return!(!s.readOnly&&!s.disabled)||(t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation(),!1)}),this.addHandler(this.host,"keypress",function(t){var e=s.readOnly,i=t.charCode||t.keyCode||0;if(e||s.disabled)return!0;i=s._handleKeyPress(t,i);return i||(t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation()),i})},focus:function(){try{var t=this;t.maskbox.focus(),setTimeout(function(){t.maskbox.focus()})}catch(t){}},_getString:function(){for(var t="",e=0;e<this.items.length;e++){var i=this.items[e].character;this.items[e].character===this.promptChar&&this.promptChar!==this.items[e].defaultCharacter?t+=this.items[e].defaultCharacter:t+=i}return t},_initializeLiterals:function(){if(void 0!==this.mask&&null!==this.mask){function t(t,e,i){var s={};return s.character=t,s.regex=e,s.canEdit=i,s.defaultCharacter=a.promptChar,s}var a=this;this.mask=this.mask.toString();for(var e=this.mask.length,i=0;i<e;i++){var s=this.mask.substring(i,i+1),r="",n=!1;if("["===s){for(var h=i;h<e;h++)if("]"===this.mask.substring(h,h+1))break;r="("+this.mask.substring(i,h+1)+")",i=h,n=!0}"#"===s?(r="(\\d|[+]|[-])",n=!0):"9"===s||"0"===s?(r="\\d",n=!0):"$"===s||"/"===s||":"===s?n=!1:"A"===s||"a"===s?(r="\\w",n=!0):"c"===s||"C"===s?(r=".",n=!0):"L"!==s&&"l"!==s||(r="([a-zA-Z])",n=!0);var l={},l=t(n?this.promptChar:s,r,n);this.items.push(l)}}else this.items=[]},setRegex:function(t,e,i,s){null!=t&&null!=e&&t<this.items.length&&(this.items[t].regex=e,null!=i&&(this.items[t].canEdit=i),null!=s&&(this.items[t].defaultCharacter=s))},_match:function(t,e){return new RegExp(e,"i").test(t)},_raiseEvent:function(t,e){var i=this.events[t],s={};s.owner=this;var a=!0,i=new l.Event(i);return i.owner=this,s.value=this.inputValue(),s.text=this.maskedValue(),7===t&&(s.type=e.type,void 0===s.type&&(s.type=null)),i.args=s,(t<2||6<t)&&(a=this.host.trigger(i)),a},_handleKeyPress:function(t,e){return this._isSpecialKey(e,t)},_insertKey:function(t,e){var i,s=this._selection(),a=this;if(0<=s.start&&s.start<this.items.length){var r=String.fromCharCode(t);65<=t&&t<=90&&(e.shiftKey||(r=r.toLowerCase()));for(var n=!1,h=0;h<this.items.length;h++)if(!(h<s.start)){var l=a.items[h];if(l.canEdit){if(a._match(r,l.regex)){if(!n&&0<s.length){for(var o=s.start;o<s.end;o++)a.items[o].canEdit&&(a.items[o].character=a.promptChar);i=a._getString(),a.maskedValue(i),n=!0}l.character=r,i=a._getString(),a.maskedValue(i),s.start<a.items.length&&a._setSelectionStart(h+1);break}break}}}},_deleteSelectedText:function(){var t=this._selection(),e=!1;if(0<t.start||0<t.length){for(var i=t.start;i<t.end;i++)i<this.items.length&&this.items[i].canEdit&&this.items[i].character!==this.promptChar&&(this.items[i].character=this.promptChar,e=!0);var s=this._getString();return this.maskedValue(s),e}},_saveSelectedText:function(){var t,e=this._selection(),i="";if(0<e.start||0<e.length)for(var s=e.start;s<e.end;s++)this.items[s].canEdit&&(i+=this.items[s].character);return window.clipboardData?window.clipboardData.setData("Text",i):((t=l("<textarea style='position: absolute; left: -1000px; top: -1000px;'/>")).val(i),l("body").append(t),t.select(),setTimeout(function(){document.designMode="off",t.select(),t.remove()},100)),i},_pasteSelectedText:function(){function e(t){if(!(t!==h.selectedText&&0<t.length&&(h.selectedText=t,null===h.selectedText||void 0===h.selectedText))){if(0<=a.start||0<a.length)for(var e=a.start;e<h.items.length;e++)h.items[e].canEdit&&r<h.selectedText.length&&(h.items[e].character=h.selectedText[r],r++,n=1+e);i=h._getString(),h.maskedValue(i),n<h.items.length?h._setSelectionStart(n):h._setSelectionStart(h.items.length)}}var i,t,s,a=this._selection(),r=0,n=a.start,h=this;window.clipboardData?(t=window.clipboardData.getData("Text"),e(t)):(s=l("<textarea style='position: absolute; left: -1000px; top: -1000px;'/>"),l("body").append(s),s.select(),setTimeout(function(){var t=s.val();e(t),s.remove()},100))},_handleKeyDown:function(t,e){var i,s=this._selection();96<=e&&e<=105&&(e-=48);var a=t.ctrlKey||t.metaKey;if(a&&97===e||a&&65===e)return!0;if(a&&120===e||a&&88===e)return this.selectedText=this._saveSelectedText(t),this._deleteSelectedText(t),!l.jqx.browser.msie;if(a&&99===e||a&&67===e)return this.selectedText=this._saveSelectedText(t),!l.jqx.browser.msie;if(a&&122===e||a&&90===e)return!1;if(a&&118===e||a&&86===e||t.shiftKey&&45===e)return this._pasteSelectedText(),!l.jqx.browser.msie;if(8===e){if(0===s.length)for(i=this.items.length-1;0<=i;i--)if(this.items[i].canEdit&&i<s.end&&this.items[i].character!==this.promptChar){this._setSelection(i,i+1);break}s=this._selection();a=this._deleteSelectedText();return(0<s.start||0<s.length)&&s.start<=this.items.length&&(a?this._setSelectionStart(s.start):this._setSelectionStart(s.start-1)),!1}if(190===e)for(i=s.start;i<this.items.length;i++)if("."===this.items[i].character){this._setSelectionStart(i+1);break}if(191===e)for(i=s.start;i<this.items.length;i++)if("/"===this.items[i].character){this._setSelectionStart(i+1);break}if(189===e)for(i=s.start;i<this.items.length;i++)if("-"===this.items[i].character){this._setSelectionStart(i+1);break}if(46!==e)return this._insertKey(e,t),this._isSpecialKey(e,t);if(0===s.length)for(i=0;i<this.items.length;i++)if(this.items[i].canEdit&&i>=s.start&&this.items[i].character!==this.promptChar){this._setSelection(i,i+1);break}t=s;return(0<=(s=this._selection()).start||0<=s.length)&&s.start<this.items.length&&(s.length<=1?t.end!==s.end?this._setSelectionStart(s.end):this._setSelectionStart(s.end+1):this._setSelectionStart(s.start)),!1},_isSpecialKey:function(t,e){return 189===t||9===t||13===t||35===t||36===t||37===t||39===t||46===t||!!(16===t&&e.shiftKey||e.ctrlKey||e.metaKey)},_selection:function(){var t,e=this.maskbox[0];if("selectionStart"in this.maskbox[0])return t=e.selectionEnd-e.selectionStart,{start:e.selectionStart,end:e.selectionEnd,length:t,text:e.value};var i=document.selection.createRange();if(null==i)return{start:0,end:e.value.length,length:0};var s=this.maskbox[0].createTextRange(),e=s.duplicate();return s.moveToBookmark(i.getBookmark()),e.setEndPoint("EndToStart",s),t=i.text.length,{start:e.text.length,end:e.text.length+i.text.length,length:t,text:i.text}},_setSelection:function(t,e){var i;"selectionStart"in this.maskbox[0]?(this.maskbox[0].focus(),this.maskbox[0].setSelectionRange(t,e)):((i=this.maskbox[0].createTextRange()).collapse(!0),i.moveEnd("character",e),i.moveStart("character",t),i.select())},_setSelectionStart:function(t){this._setSelection(t,t)},refresh:function(t){t||this._render()},resize:function(t,e){this.width=t,this.height=e,this.refresh()},_render:function(){var t=parseInt(this.host.css("border-left-width"),10),e=parseInt(this.host.css("border-left-width"),10),i=parseInt(this.host.css("border-left-width"),10),s=parseInt(this.host.css("border-left-width"),10),a=parseInt(this.host.css("height"),10)-i-s,t=parseInt(this.host.css("width"),10)-t-e;(null!=this.width&&-1!==this.width.toString().indexOf("px")||void 0!==this.width&&!isNaN(this.width))&&(t=this.width),(null!=this.height&&-1!==this.height.toString().indexOf("px")||void 0!==this.height&&!isNaN(this.height))&&(a=this.height),t=parseInt(t,10),a=parseInt(a,10),this.maskbox[0]!==this.element&&this.maskbox.css({"border-left-width":0,"border-right-width":0,"border-bottom-width":0,"border-top-width":0}),this.maskbox.css("text-align",this.textAlign);e=this.maskbox.css("font-size");isNaN(a)||this.maskbox.css("height",parseInt(e,10)+4+"px"),isNaN(t)||this.maskbox.css("width",t);e=parseInt(a,10)-2*parseInt(i,10)-2*parseInt(s,10)-parseInt(e,10);isNaN(e),null!=this.width&&-1!=this.width.toString().indexOf("px")?this.element.style.width=this.width:null==this.width||isNaN(this.width)||(this.element.style.width=this.width+"px"),null!=this.height&&-1!=this.height.toString().indexOf("px")?this.element.style.height=this.height:null==this.height||isNaN(this.height)||(this.element.style.height=this.height+"px"),this.maskbox[0]!==this.element&&(this.maskbox[0].style.height="100%"),this.maskbox[0].value=this._getString(),this.width&&(0<=this.width.toString().indexOf("%")&&(this.element.style.width=this.width),0<=this.height.toString().indexOf("%")&&(this.element.style.height=this.height)),this._addBarAndLabel(this.maskbox),this._updateHint()},_addBarAndLabel:function(t){var e,i,s,a,r=this;r.label||r.isMaterialized()&&(this.element instanceof HTMLInputElement?((e=l("<div></div>")).addClass(r.toThemeProperty("jqx-input-group jqx-maskedinput")),this.host.after(e),a=this.element,i=this.host.data(),e.append(a),s=l("<label></label"),this.hint&&(s[0].innerHTML=this.placeHolder),s.addClass(r.toThemeProperty("jqx-input-label")),e.append(s),a=l("<span></span>"),e.append(a),a.addClass(r.toThemeProperty("jqx-input-bar")),e[0].id=this.element.id,this.element.removeAttribute("id"),this.element.setAttribute("hint",!0),e[0].style=this.element.style,r.input=r.element,this.input instanceof HTMLInputElement||(this.input=this.host.find("input"),0<this.input.length&&(this.input=this.input[0]),l(this.input).addClass(this.toThemeProperty("jqx-input-widget"))),e[0].style.width=this.input.style.width,e[0].style.height=this.input.style.height,this.label=s,this.bar=a,this.element.style="",this.host=e,this.element=e[0],this.host.data(i),this.input.style.width="100%",this.input.style.height="100%"):(s=l("<label></label"),this.hint&&(s[0].innerHTML=this.placeHolder),s.addClass(r.toThemeProperty("jqx-input-label")),t.after(s),r.label=s,a=l("<span></span>"),t.after(a),a.addClass(r.toThemeProperty("jqx-input-bar")),r.bar=a,r=this),r.template&&(r.bar.addClass(r.toThemeProperty("jqx-"+r.template)),r.label.addClass(r.toThemeProperty("jqx-"+r.template))))},_updateHint:function(){var t=this;t.hint&&t.isMaterialized()&&setTimeout(function(){0===t.maskbox[0].value.length?(t.element.removeAttribute("hint"),t.label[0].innerHTML=t.placeHolder):t.element.setAttribute("hint",!0)})},destroy:function(){l.jqx.utilities.resize(this.host,null,!0),this.host.remove(),this._helpers=[]},maskedValue:function(t){return void 0===t?this._value():(this.value=t,this._refreshValue(),this.oldValue!==t&&(this._raiseEvent(1,t),this.oldValue=t,this._raiseEvent(0,t)),this)},propertyChangedHandler:function(t,e,i,s){if(void 0!==this.isInitialized&&!1!==this.isInitialized){if("rtl"===e&&(t.rtl?t._helpers.maskbox.addClass(t.toThemeProperty("jqx-rtl")):t._helpers.maskbox.removeClass(t.toThemeProperty("jqx-rtl"))),"value"===e&&(null==s&&(s=""),""===s?this.clear():(s=s.toString(),this.inputValue(s)),t._raiseEvent(7,s)),"theme"===e&&l.jqx.utilities.setTheme(i,s,this.host),"disabled"===e&&(s?(t._helpers.maskbox.addClass(t.toThemeProperty("jqx-input-disabled")),t._helpers.element.addClass(t.toThemeProperty("jqx-fill-state-disabled")),t._helpers.maskbox.attr("disabled",!0)):(t._helpers.maskbox.removeClass(this.toThemeProperty("jqx-input-disabled")),t._helpers.element.removeClass(this.toThemeProperty("jqx-fill-state-disabled")),t._helpers.maskbox.attr("disabled",!1)),l.jqx.aria(t,"aria-disabled",s)),"readOnly"===e&&(this.readOnly=s),"promptChar"===e){for(var a=0;a<t.items.length;a++)t.items[a].character===t.promptChar&&(t.items[a].character=s,t.items[a].defaultCharacter=s);t.promptChar=s}"textAlign"===e&&(t.maskbox.css("text-align",s),t.textAlign=s),"mask"===e&&(t.mask=s,t.items=[],t._initializeLiterals(),t.value=t._getString(),t._refreshValue()),"width"===e?(t.width=s,t._render()):"height"===e&&(t.height=s,t._render())}},_value:function(){return this.value},_getEditStringLength:function(){for(var t="",e=0;e<this.items.length;e++)this.items[e].canEdit&&(t+=this.items[e].character);return t.length},_getEditValue:function(){for(var t="",e=0;e<this.items.length;e++)this.items[e].canEdit&&this.items[e].character!==this.promptChar&&(t+=this.items[e].character);return t},parseValue:function(t){if(null==t)return null;for(var e=t.toString(),i="",s=0,a=0;a<e.length;a++)for(var r=e.substring(a,a+1),n=s;n<this.items.length;n++)if(this.items[n].canEdit&&this._match(r,this.items[n].regex)){i+=r,s=n;break}return i},clear:function(){this.clearValue()},clearValue:function(){this.inputValue("",!0)},val:function(t){return void 0!==t&&"object"!=typeof t&&("number"==typeof t&&isFinite(t)&&(t=t.toString()),this.maskedValue(t)),this.maskbox[0].value},inputValue:function(t,e){if(null==t){for(var i="",s=0;s<this.items.length;s++)this.items[s].canEdit&&(i+=this.items[s].character);return i}var a=0;for(t=t.toString(),s=0;s<this.items.length;s++)this.items[s].canEdit&&(this._match(t.substring(a,a+1),this.items[s].regex)?(this.items[s].character=t.substring(a,a+1),a++):e&&(this.items[s].character=this.promptChar,a++));var r=this._getString();return this.maskedValue(r),this.inputValue()},_refreshValue:function(){for(var t=this.maskedValue(),e=0,i=0;i<this.items.length;i++)t.length>e&&(this.items[i].canEdit&&this.items[i].character!==t[e]&&(!this._match(t[e],this.items[i].regex)&&t[e]!==this.promptChar||1!==t[e].length||(this.items[i].character=t[e])),e++);this.value=this._getString(),t=this.value,this.maskbox[0].value=t,l.jqx.aria(this,"aria-valuenow",t)}})}(jqxBaseFramework);