!function(d){d.jqx.jqxWidget("jqxRating","",{}),d.extend(d.jqx._jqxRating.prototype,{defineInstance:function(){var i={count:5,disabled:!1,value:0,height:"auto",width:"auto",precision:1,singleVote:!1,itemHeight:"20",itemWidth:"20",_itemHeight:void 0,_itemWidth:void 0,_images:[],aria:{"aria-valuenow":{name:"value",type:"number"},"aria-disabled":{name:"disabled",type:"boolean"}},_events:["change"],_invalidArgumentExceptions:{invalidPrecision:"The value of the precision property is invalid!",invalidWidth:"Width you've entered is invalid!",invalidHeight:"Height you've entered is invalid!",invalidCount:"You've entered invalid value for the count property!",invalidValue:"You've entered invalid value property!"}};return this===d.jqx._jqxRating.prototype||d.extend(!0,this,i),i},createInstance:function(i){d.jqx.aria(this),this._createRating()},destroy:function(){this.host.remove()},val:function(i){return 0==arguments.length||"object"==typeof i||(this.value="string"==typeof i?parseInt(i):i,this.setValue(this.value)),this.value},_createRating:function(){this.host.css("display","none"),this.host.empty(),this._addInput(),this._validateProperties(),this._render(),this._performLayout(),this._removeEventHandlers(),this._addEventHandlers(),this.host.css("display","block"),this.host.addClass(this.toThemeProperty("jqx-widget")),this.disabled&&this.disable()},_addInput:function(){var i=this.host.attr("name");this.input=d("<input type='hidden'/>"),this.host.append(this.input),i&&this.input.attr("name",i),this.input.val(this.value.toString())},_render:function(){for(var i=1;i<=this.count;i++)this._images[i-1]=d('<div style="float:left;width:auto;height:auto; position: relative;"><div style="position:absolute;width:auto;height:auto;visibility:hidden;" class="jqx-rating-hoverWrapper"><div style="width:auto;height:auto;float:left;" class="'+this.toThemeProperty("jqx-rating-image-hover")+'"></div><div style="visibility:hidden;width:auto;height:auto;" class="'+this.toThemeProperty("jqx-rating-image-backward")+'"></div></div><div style="position:absolute;width:auto;height:auto;" class="jqx-rating-voteWrapper"><div style="width:auto;height:auto;float:left;" class="'+this.toThemeProperty("jqx-rating-image-default")+'"></div><div style="width:0;height:auto;float:left;" class="'+this.toThemeProperty("jqx-rating-image-backward")+'"></div></div></div>'),this.host.append(this._images[i-1])},_performLayout:function(){for(var i=1;i<=this.count;i++){var t=this._images[i-1].find(this.toThemeProperty(".jqx-rating-image-backward",!0)),e=this._images[i-1].find(this.toThemeProperty(".jqx-rating-image-default",!0)),a=this._images[i-1].find(this.toThemeProperty(".jqx-rating-image-hover",!0)),s=this._getImageName(e),n=this._getImageName(a),h=this._getImageName(t);e.css("background-image","none"),a.css("background-image","none"),t.css("background-image","none"),this._appendImage(a,n,i-1),this._appendImage(t,h,i-1),this._appendImage(e,s,i-1)}},resize:function(i,t){this.width=i,this.height=t,this._setControlSize(this.width,this.height)},_setControlSize:function(i,t){this.host.css("height",this.height),this.host.css("width",this.width),this.itemHeight&&"auto"!==this.itemHeight?this._itemHeight=parseInt(this.itemHeight):this._itemHeight=t,this.itemWidth&&"auto"!==this.itemWidth?this._itemWidth=parseInt(this.itemWidth):this._itemWidth=i},_appendImage:function(i,t,e){var a=this,s=d('<img style="-moz-user-select:-moz-none;-khtml-user-select: none;-webkit-user-select:none;user-select:none;" class="'+this.toThemeProperty("jqx-rating-image")+'" src="'+t+'" />');i.append(s);try{s.load(function(){a._initialized||(a._setControlSize(d(this).width(),d(this).height()),a._setValue(a.value,".jqx-rating-voteWrapper",".jqx-rating-image-default",".jqx-rating-image-backward"),a._initialized=!0),a._images[e].height(a._itemHeight),d(this).height(a._itemHeight),a._images[e].width(a._itemWidth),d(this).width(a._itemWidth)})}catch(i){s[0].onload=function(){a._initialized||(a._setControlSize(d(this).width(),d(this).height()),a._setValue(a.value,".jqx-rating-voteWrapper",".jqx-rating-image-default",".jqx-rating-image-backward"),a._initialized=!0),a._images[e].height(a._itemHeight),d(this).height(a._itemHeight),a._images[e].width(a._itemWidth),d(this).width(a._itemWidth)}}return s},_validateProperties:function(){try{if(this.precision<.001||1<this.precision)throw this._invalidArgumentExceptions.invalidPrecision;if("auto"!==this.height&&parseInt(this.height)<0)throw this._invalidArgumentExceptions.invalidHeight;if("auto"!==this.width&&parseInt(this.width)<0)throw this._invalidArgumentExceptions.invalidWidth;if(this.count<=0)throw this._invalidArgumentExceptions.invalidCount;if(this.value>this.count||this.value<0)throw this._invalidArgumentExceptions.invalidValue}catch(i){alert(i)}},_getImageIndex:function(i){for(var t=0;i!==this._images[t][0];)t++;return++t},_getRating:function(i,t){var e=this._getImageIndex(i);if(this.precision<1){for(var a=parseInt(t)-parseInt(d(i).position().left),s=this._itemWidth*this.precision,n=0;n<a;)n+=s;n>parseInt(this._itemWidth)-s&&(n=parseInt(this._itemWidth)),e-=1-n/d(i).width()}return e},_addEventHandlers:function(){for(var a=this,i=0;i<this.count;i++)d.jqx.mobile.isTouchDevice()||(this.addHandler(this._images[i],"mousemove",function(i){i=a._getRating(this,i.pageX);a._setValue(i,".jqx-rating-hoverWrapper",".jqx-rating-image-hover",".jqx-rating-image-backward")}),this.addHandler(this._images[i],"mouseenter",function(i){for(var t=a._getImageIndex(this),e=0;e<t;e++)a._images[e].children(".jqx-rating-hoverWrapper").css("z-index","10"),a._images[e].children(".jqx-rating-voteWrapper").css("z-index","1"),a._images[e].children(".jqx-rating-hoverWrapper").css("visibility","visible")}),this.addHandler(this._images[i],"mouseleave",function(i){for(var t=a._getImageIndex(this),e=0;e<t;e++)a._images[e].children(".jqx-rating-voteWrapper").css("z-index","10"),a._images[e].children(".jqx-rating-hoverWrapper").css("z-index","1"),a._images[e].children(".jqx-rating-hoverWrapper").css("visibility","hidden")})),this.addHandler(this._images[i],"click",function(i){var t=a._getRating(this,i.pageX);a._setValue(t,".jqx-rating-voteWrapper",".jqx-rating-image-default",".jqx-rating-image-backward"),a.singleVote&&a.disable(),i.stopPropagation(),a._raiseEvent(0,t)}),this.addHandler(this._images[i],"dragstart",function(i){return!1})},_removeEventHandlers:function(){for(var i=0;i<this.count;i++)this.removeHandler(this._images[i],"mousemove"),this.removeHandler(this._images[i],"mouseenter"),this.removeHandler(this._images[i],"mouseleave"),this.removeHandler(this._images[i],"click"),this.removeHandler(this._images[i],"dragstart")},_getImageName:function(i){i=i.css("background-image");return i=(i=(i=(i=i.replace('url("',"")).replace('")',"")).replace("url(","")).replace(")","")},_setValue:function(i,t,e,a){for(var s=1;s<=this.count;s++){var n=1,h=this._images[s-1].children(t),r=h.children(e),o=h.children(a);i<s&&(n=Math.abs(s-i)<1?1-Math.abs(s-i):0),r.width(this._itemWidth*n),o.width(this._itemWidth-parseInt(r.width())),h.children(this.toThemeProperty(a)).children(0).css("margin-left",-this._itemWidth*n+"px")}d.jqx.aria(this,"aria-valuenow",i)},_raiseEvent:function(i,t){i=new d.Event(this._events[i]);return i.owner=this,i.value=t,i.oldvalue=this.value,this.value=t,this.input&&this.input.val(this.value.toString()),this.host.trigger(i)},setValue:function(i){this._setValue(i,".jqx-rating-voteWrapper",".jqx-rating-image-default",".jqx-rating-image-backward"),this.value=i,this._raiseEvent(0,this.value)},getValue:function(){return this.value},disable:function(){this._removeEventHandlers(),this.disabled=!0,d.jqx.aria(this,"aria-disabled",!0)},enable:function(){this._removeEventHandlers(),this._addEventHandlers(),this.disabled=!1,d.jqx.aria(this,"aria-disabled",!1)},propertyChangedHandler:function(i,t,e,a){"disabled"===t?a?this.disable():this.enable():"value"===t?i.setValue(a):i._createRating()}})}(jqxBaseFramework);