!function(E){E.jqx.scheduler||(E.jqx.scheduler={}),E.jqx.scheduler.utilities={weekDays:{Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6},guid:function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()},areWeekDaysIncluded:function(e,i){var n=!1;return E.each(e,function(e,t){if(t===i)return!(n=!0)}),n},getStartOfDay:function(e){var t=new E.jqx.date(e.year(),e.month(),e.day(),0,0,0);return t.timeZone=e.timeZone,t},getEndOfDay:function(e){var t=new E.jqx.date(e.year(),e.month(),e.day(),23,59,59);return t.timeZone=e.timeZone,t},getDaysCount:function(e,t){for(var i=1;e<t;)e.day()!=t.day()&&i++,e=e.addDays(1);return i},getStartOfWeek:function(e,t){var i=e.dayOfWeek(),t=t.firstDay;i<t&&(i+=7);t=i-t;return e.addDays(-t).date()},getEndOfWeek:function(e,t,i){return this.getStartOfWeek(e,t,i).addDays(7)},getEndOfMonth:function(e,t){var i=e.daysInMonth(),i=new E.jqx.date(e.year(),e.month(),i,23,59,59);return i.timeZone=e.timeZone,i},rangeIntersection:function(e,t,i,n){e=e.dateData,i=i.dateData,t=t.dateData,n=n.dateData;if(e<=i&&i<t)return!0;if(i<e&&e<n)return!0;if(e==i||t==n)return!0;if(e<i){if(i<t&&t<n)return!0;if(n<t)return!0}else{if(e<n&&n<t)return!0;if(t<n)return!0}return!1},rangeContains:function(e,t,i,n){return e<=i&&n<=t},monthDays:[31,28,31,30,31,30,31,31,30,31,30,31],msPerDay:864e5,maxYear:9999,ORDINAL_BASE:new Date(1970,0,1),getYearDay:function(e){var t=new Date(e.getFullYear(),e.getMonth(),e.getDate());return Math.ceil((t-new Date(e.getFullYear(),0,1))/E.jqx.scheduler.utilities.msPerDay)+1},isLeapYear:function(e){return e instanceof Date&&(e=e.getFullYear()),e%4==0&&e%100!=0||e%400==0},tzOffset:function(e){return 60*e.getTimezoneOffset()*1e3},monthRange:function(e,t){t=new Date(e,t,1);return[E.jqx.scheduler.utilities.getWeekday(t),E.jqx.scheduler.utilities.getMonthDays(t)]},getMonthDays:function(e){var t=e.getMonth();return 1==t&&E.jqx.scheduler.utilities.isLeapYear(e)?29:E.jqx.scheduler.utilities.monthDays[t]},getWeekday:function(e){return[6,0,1,2,3,4,5][e.getDay()]},combine:function(e,t){return t=t||e,new Date(e.getFullYear(),e.getMonth(),e.getDate(),t.getHours(),t.getMinutes(),t.getSeconds())},sort:function(e){e.sort(function(e,t){return e.getTime()-t.getTime()})},timeToUntilString:function(e){for(var t,e=new Date(e),i=[e.getUTCFullYear(),e.getUTCMonth()+1,e.getUTCDate(),"T",e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),"Z"],n=0;n<i.length;n++)t=i[n],!/[TZ]/.test(t)&&t<10&&(i[n]="0"+String(t));return i.join("")},untilStringToDate:function(e){var t=/^(\d{4})(\d{2})(\d{2})(T(\d{2})(\d{2})(\d{2})Z)?$/.exec(e);if(!t)throw new Error("Invalid UNTIL value: "+e);return new Date(Date.UTC(t[1],t[2]-1,t[3],t[5]||0,t[6]||0,t[7]||0))},Time:function(e,t,i){this.hour=e,this.minute=t,this.second=i;var n=this.that=this;this.getHours=function(){return n.hour},this.getMinutes=function(){return n.minute},this.getSeconds=function(){return n.second},this.getTime=function(){return 1e3*(60*n.hour*60+60*n.minute+n.second)}}},E.jqx.scheduler.appointment=function(){var a=this;if(a.from=new E.jqx.date,a.to=(new E.jqx.date).addHours(1),a.subject="",a.description="",a.location="",a.tooltip="",a.hidden=!1,a.resourceId=null,a.id="",a.background=null,a.color=null,a.borderColor=null,a.status="busy",a.style=null,a.exceptions=new Array,a.exceptionDates=new Array,a.recurrencePattern=null,a.recurrenceException=new Array,a.occurrenceEnumerator=null,a.rootAppointment=null,a.hiddenByResourceId=!1,a.draggable=!0,a.resizable=!0,a.recurrentAppointment=!1,a.allDay=!1,a.readOnly=!1,a.showStatus=!0,a.timeZone=null,a.scheduler=null,a.elements=new Array,a.appointmentObject=!0,a.duration=function(){var e=1e4*(a.to-a.from);return new E.jqx.timeSpan(e)},a.toJSON=function(e){function i(e){return(e<10?"0":"")+e}function t(e,t){return e?t?e.getUTCFullYear()+"-"+i(e.getUTCMonth()+1)+"-"+i(e.getUTCDate())+"T"+i(e.getUTCHours())+":"+i(e.getUTCMinutes())+":"+i(e.getUTCSeconds())+"Z":e.getFullYear()+"-"+i(e.getMonth()+1)+"-"+i(e.getDate())+"T"+i(e.getHours())+":"+i(e.getMinutes())+":"+i(e.getSeconds())+"Z":""}var n={};return n.id=a.id,n.from=t(a.from.toDate(),e),n.to=t(a.to.toDate(),e),n.subject=a.subject,n.status=a.status,n.location=a.location,n.description=a.description,n.title=a.title,n.resourceId=a.resourceId,a.recurrencePattern?n.recurrencePattern=a.recurrencePattern.toString():n.recurrencePattern="",a.recurrenceException&&0<a.recurrenceException.length?n.recurrenceException=function(){for(var e="",t=0;t<a.recurrenceException.length;t++)e+=a.recurrenceException[t].toString(),t<a.recurrenceException.length-1&&(e+=",");return e}():n.recurrenceException="",n.dtstamp=t(new Date,e),JSON.stringify(n)},a.toString=function(i){function e(e){for(var t="";75<e.length;)t+=e.substr(0,75)+"\n",e=" "+e.substr(75);return t+=e}function n(e){return(e<10?"0":"")+e}function r(e,t){return e?t?""+e.getFullYear()+n(e.getMonth()+1)+n(e.getDate())+"T"+n(e.getHours())+n(e.getMinutes())+n(e.getSeconds()):""+e.getUTCFullYear()+n(e.getUTCMonth()+1)+n(e.getUTCDate())+"T"+n(e.getUTCHours())+n(e.getUTCMinutes())+n(e.getUTCSeconds())+"Z":""}var t=a.status;return"busy"==(t=t||"CONFIRMED").toLowerCase()&&(t="CONFIRMED"),"tentative"==t.toLowerCase()&&(t="TENTATIVE"),"free"==t.toLowerCase()&&(t="CANCELLED"),"outOfOffice"==t.toLowerCase()&&(t="CANCELLED"),"BEGIN:VEVENT\nUID:"+a.id+"\nDTSTAMP:"+r(new Date,i)+"\n"+e("TITLE:"+a.subject)+"\nDTSTART:"+r(a.from.toDate(),i)+"\nDTEND:"+r(a.to.toDate(),i)+"\n"+(a.recurrencePattern?"RRULE:"+a.recurrencePattern.toString()+"\n":"")+(a.recurrenceException&&0<a.recurrenceException.length?"EXDATE:"+function(){for(var e="",t=0;t<a.recurrenceException.length;t++)e+=r(a.recurrenceException[t].toDate(),i),t<a.recurrenceException.length-1&&(e+=",");return e}()+"\n":"")+(a.subject?e("SUMMARY:"+a.subject)+"\n":"")+"TRANSP:OPAQUE\n"+(a.status?e("STATUS:"+t)+"\n":"")+(a.description?e("DESCRIPTION:"+a.description)+"\n":"")+(a.location?e("LOCATION:"+a.location)+"\n":"")+"END:VEVENT"},a.range=function(){return a.allDay?{from:E.jqx.scheduler.utilities.getStartOfDay(a.from),to:E.jqx.scheduler.utilities.getEndOfDay(a.to)}:{from:a.from,to:a.to}},a.clearRecurrence=function(){a.recurrencePattern&&(a.exceptions=new Array,a.exceptionDates=new Array,a.recurrencePattern=null,a.recurrenceException=new Array,a.hidden=!1)},a.isAllDayAppointment=function(){return 1<=this.duration().days()||this.allDay},a.cloneAppointmentAttributes=function(e){e.subject=a.subject,e.description=a.description,e.location=a.location,e.tooltip=a.tooltip,e.resourceId=a.resourceId,e.category=a.category,e.status=a.status,e.rootAppointment=a,e.color=a.color,e.borderColor=a.borderColor,e.background=a.background,e.hidden=a.hidden,e.timezone=a.timeZone,e.style=a.style,e.hiddenByResourceId=a.hiddenByResourceId},a.createOccurrence=function(e){if(null==e)return null;var t=new E.jqx.scheduler.appointment;t.allDay=a.allDay;var i=a.duration();return a.allDay&&(i=new E.jqx.timeSpan(1e4*(a.to-a.from))),t.from=e,t.to=e.add(i),t.occurrenceFrom=e.clone(),t.subject=a.subject,t.description=a.description,t.location=a.location,t.tooltip=a.tooltip,t.resourceId=a.resourceId,t.category=a.category,t.status=a.status,t.rootAppointment=a,t.color=a.color,t.draggable=a.draggable,t.resizable=a.resizable,t.borderColor=a.borderColor,t.background=a.background,t.recurrentAppointment=!0,t.timeZone=a.timeZone,t.style=a.style,t.hiddenByResourceId=a.hiddenByResourceId,t.boundAppointment=a.boundAppointment,a.hiddenByResourceId&&(t.hidden=!0),t.id=a.id+"."+E.jqx.scheduler.utilities.guid(),a.hidden=!0,a.occurrenceIndex++,t},a.clone=function(){var e=new E.jqx.scheduler.appointment;return e.allDay=a.allDay,e.from=a.from.clone(),e.to=a.to.clone(),e.subject=a.subject,e.description=a.description,e.location=a.location,e.tooltip=a.tooltip,e.resourceId=a.resourceId,e.category=a.category,e.status=a.status,e.color=a.color,e.borderColor=a.borderColor,e.background=a.background,e.style=a.style,e.timeZone=a.timeZone,e.hiddenByResourceId=a.hiddenByResourceId,a.hiddenByResourceId&&(e.hidden=!0),e.id=a.id+"."+E.jqx.scheduler.utilities.guid(),e},a.isRecurrentAppointment=function(){return a.recurrentAppointment||null!=a.recurrencePattern},a.anyExceptions=function(){return null!=a.exceptions&&0<a.exceptions.length},a.anyOccurrences=function(){return null!=a.occurrenceEnumerator&&a.occurrenceEnumerator.getNextAppointment()},a.isException=function(){var e=a.rootAppointment||this;if(!e.recurrenceException)return!1;for(var t=0;t<e.recurrenceException.length;t++){var i=e.recurrenceException[t];if(a.occurrenceFrom&&i.equals(a.occurrenceFrom))return!0}return!1},a.getOccurrences=function(e,t){a.occurrenceIndex=0;e=null!==e?e:a.from,t=new E.jqx.scheduler.recurrentAppointmentsList(a,a.calendar,e,t,a.scheduler);return a.occurrences=t.list,t.list},1===arguments.length)if("object"==E.type(arguments[0]))for(var e in arguments[0]){var t=arguments[0][e];void 0!==this[e]&&(this[e]=t)}else a.from=arguments[0],a.to=new E.jqx.date(a.from).addHours(1);else 2===arguments.length?(a.from=arguments[0],a.to=arguments[1]):3===arguments.length?(a.from=arguments[0],a.to=arguments[1],a.subject=arguments[2]):3===arguments.length&&(a.from=arguments[0],a.to=arguments[1],a.subject=arguments[2],a.description=arguments[3]);null!=a.recurrencePattern&&a.recurrencePattern.setFrom(a.from)},E.jqx.scheduler.recurrentAppointmentsList=function(){var l=this;return l.recurrentAppointment=null,l.currentTime=null,l.calendar=E.jqx.scheduler.calendar,l.from=new E.jqx.date(0),l.to=new E.jqx.date(9999,12,31),l.foundItems=0,l.list=new Array,l.scheduler=null,l.getOccurrences=function(e,t,i){return(null==e?l:new E.jqx.scheduler.recurrentAppointmentsList(e,l.calendar,t,i)).list},l.current=function(){return l.recurrentAppointment.createOccurrence(l.currentTime)},l.fillList=function(){l.currentTime=null,l.foundItems=0,l.list=new Array;var e=l.recurrentAppointment.recurrencePattern;if(e.step=0,e.current=0,e.currentYearDay=0,null==e)return!1;for(;l.getNextAppointment(e);){var t=l.current();t&&l.list.push(t)}},l.getNextAppointment=function(e){if(null==l.recurrentAppointment)return!1;this.scheduler._views[this.scheduler._view].type;var t=this.scheduler._views[this.scheduler._view],i=0;switch(e.freq){case"weekly":i=7;break;case"monthly":i=31;break;case"yearly":i=365}for(var n=0;n<4294967295;n++){var r=e.getNewOccurenceDate();if(r){if(e.currentTime=r,e.to<r&&e.to.addDays(i)>=r||l.to<r&&l.to.addDays(i)>=r)return!(l.currentTime=null);if(E.jqx.scheduler.utilities.getEndOfDay(e.to).addDays(i)<r||E.jqx.scheduler.utilities.getEndOfDay(l.to).addDays(i)<r)return l.currentTime=null,!1;var a,o=l.getCanSetTime(e,r,!0);if(e.canCreateNewOccurence(r,l.calendar)&&(!(a=!0)===t.showWeekends&&(6!=r.dayOfWeek()&&0!=r.dayOfWeek()||(a=!1)),a&&l.foundItems++),o)return l.currentTime=r,!(l.foundItems>e.count)}}return!1},l.getCanSetTime=function(e,t,i){return e.canCreateNewOccurence(t,l.calendar)||(i=!1),t<l.from&&t.add(l.recurrentAppointment.duration())<=l.from&&(i=!1),l.to<=t&&(i=!1),i},l.isException=function(e,t,i){for(var n=l.recurrentAppointment.exceptions,r=0;r<n.length;r++)if(i.isDateInExceptionAppointment(e,t,n[r])&&-1===i.newExceptions.indexOf(n[r]))return!0;return!1},arguments&&0<arguments.length&&(l.recurrentAppointment=arguments[0],arguments[1]&&(l.calendar=arguments[1]),arguments[2]&&(l.from=arguments[2]),arguments[3]&&(l.to=arguments[3]),arguments[4]&&(l.scheduler=arguments[4]),void 0===arguments[2]&&(l.from=new E.jqx.date(0),l.to=new E.jqx.date(9999,12,31)),l.scheduler&&l.scheduler.localization&&(l.calendar.firstDay=l.scheduler.localization.firstDay),l.fillList()),l},E.jqx.scheduler.recurrencePattern=function(){var D=this,e={from:new E.jqx.date(0),to:new E.jqx.date(9999,12,31),count:1e3,interval:1,exceptions:new Array,newExceptions:new Array,month:1,day:1,current:0,currentYearDay:0,step:0,days:[],bynweekday:[],isEveryWeekDay:!0,timeZone:null,weekDays:{Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6},freq:"daily",bymonth:null,bymonthday:null,byyearday:null,byweekno:null,byweekday:null};return E.extend(!0,D,e),D.getNewOccurenceDate=function(){function e(e,t){var i=0,n=[];if(e instanceof Array)for(;i<t;i++)n[i]=[].concat(e);else for(;i<t;i++)n[i]=e;return n}function t(e,t){return(e%=t)*t<0?e+t:e}function i(e){D.yearlen=e%4!=0||e%100==0&&e%400!=0?365:366,D.nextyearlen=(1+e)%4!=0||(1+e)%100==0&&(1+e)%400!=0?365:366,new Date(e,0,1);var t=o[new Date(e,0,1).getDay()],e=function(){for(var e=[],t=0;t<55;t++)e=e.concat(function(e,t){1===arguments.length&&(t=e,e=0);for(var i=[],n=e;n<t;n++)i.push(n);return i}(7));return e}();365==D.yearlen?(D.wdaymask=e.slice(t),D.mrange=[].concat(r)):(D.wdaymask=e.slice(t),D.mrange=[].concat(n))}var n=[0,31,60,91,121,152,182,213,244,274,305,335,366],r=[0,31,59,90,120,151,181,212,243,273,304,334,365],a=D.from.year(),o=[6,0,1,2,3,4,5];switch(i(a),D.freq){case"daily":default:var l=D.from.add(new E.jqx.timeSpan(D.step*D.interval,0,0,0));return D.step++,l;case"weekly":return D.byweekday&&(l=new E.jqx.date(D.from,D.timeZone),a=o[D.from.dayOfWeek()],(l=(l=(l=l.addDays(7*D.step)).addDays(D.byweekday[D.current])).addDays(-a))<D.from&&(l=null),D.current++,null==D.byweekday[D.current]&&(D.current=0,D.step++)),l;case"monthly":if(0<D.bynweekday.length){(l=new E.jqx.date(D.from.year(),D.from.month(),1,D.from.hour(),D.from.minute(),D.from.second())).timeZone=D.timeZone,i((l=l.addMonths(D.step*D.interval)).year());var d=l.month(),s=(y=D.mrange.slice(d-1,d+1))[0],c=y[1];--c,D.nwdaymask=e(0,D.yearlen),D.step++;for(var u=0;u<D.bynweekday.length;u++){var h=D.bynweekday[u][0];(m=D.bynweekday[u][1])<0?(f=c+7*(m+1),f-=t(D.wdaymask[f]-h,7)):(f=s+7*(m-1),f+=t(7-D.wdaymask[f]+h,7)),s<=f&&f<=c&&(D.nwdaymask[f]=1)}var p=f+1-s;(l=new E.jqx.date(D.from.year(),D.from.month(),p,D.from.hour(),D.from.minute(),D.from.second())).timeZone=D.timeZone,l=l.addMonths((D.step-1)*D.interval)}else 0<D.bymonthday.length?((l=new E.jqx.date(D.from.year(),D.from.month(),D.bymonthday[D.current],D.from.hour(),D.from.minute(),D.from.second())).timeZone=D.timeZone,l=l.addMonths(D.step*D.interval),D.current++,D.bymonthday[D.current]||(D.current=0,D.step++)):((l=new E.jqx.date(D.from.year(),D.from.month(),D.day,D.from.hour(),D.from.minute(),D.from.second())).timeZone=D.timeZone,l=l.addMonths(D.step*D.interval),D.step++);return l;case"yearly":if(D.bymonth&&0<D.bymonth.length)if(0<D.bynweekday.length){(l=new E.jqx.date(D.from.year(),D.bymonth[D.current],1,D.from.hour(),D.from.minute(),D.from.second())).timeZone=D.timeZone,i((l=l.addYears(D.step*D.interval)).year());var y,d=l.month(),s=(y=D.mrange.slice(d-1,d+1))[0],c=y[1];--c,D.nwdaymask=e(0,D.yearlen);for(u=0;u<D.bynweekday.length;u++){var m,h=D.bynweekday[u][0];(m=D.bynweekday[u][1])<0?(f=c+7*(m+1),f-=t(D.wdaymask[f]-h,7)):(f=s+7*(m-1),f+=t(7-D.wdaymask[f]+h,7)),s<=f&&f<=c&&(D.nwdaymask[f]=1)}p=f+1-s;(l=new E.jqx.date(l.year(),D.bymonth[D.current],p,D.from.hour(),D.from.minute(),D.from.second())).timeZone=D.timeZone,D.step++}else D.byyearday&&0<D.byyearday.length?((l=new E.jqx.date(D.from.year(),D.bymonth[D.current],D.byyearday[D.currentYearDay],D.from.hour(),D.from.minute(),D.from.second())).timeZone=D.timeZone,l=l.addYears(D.step*D.interval),D.currentYearDay++,D.byyearday[D.currentYearDay]||(D.currentYearDay=0,D.current++,D.bymonth[D.current]||(D.current=0,D.step++))):((l=new E.jqx.date(D.from.year(),D.bymonth[D.current],D.from.day(),D.from.hour(),D.from.minute(),D.from.second())).timeZone=D.timeZone,l=l.addYears(D.step*D.interval),D.current++,D.bymonth[D.current]||(D.current=0,D.step++));else if(D.byyearday&&0<D.byyearday.length)(l=new E.jqx.date(D.from.year(),D.from.month(),D.byyearday[D.current],D.from.hour(),D.from.minute(),D.from.second())).timeZone=D.timeZone,l=l.addYears(D.step*D.interval),D.current++,D.byyearday[D.current]||(D.current=0,D.step++);else if(null!=D.byweekno){var l=D.from.addYears(D.step*D.interval);if(l=function(e,t){var i=1,n=new E.jqx.date(t.year(),1,1,t.hour(),t.minute(),t.second());for(n.timeZone=D.timeZone;i!=e&&(n=n.addDays(7),!(53<++i)););for(;E.jqx.scheduler.utilities.getWeekday(n.toDate())!=D.wkst;)n=n.addDays(1);return n}(D.byweekno[D.current],l),D.byweekday){for(var g=l,f=0;f<7&&o[g.dayOfWeek()]!==D.byweekday[D.currentYearDay];f++)g=g.addDays(1);l=g,D.currentYearDay++,D.byweekday[D.currentYearDay]||(D.currentYearDay=0,D.current++,D.byweekno[D.current]||(D.current=0,D.step++))}else D.current++,D.byweekno[D.current]||(D.current=0,D.step++)}else(l=new E.jqx.date(D.from.year(),D.month,D.day,D.from.hour(),D.from.minute(),D.from.second())).timeZone=D.timeZone,l=l.addYears(D.step*D.interval),D.step++;return l}},D.isDateInExceptionAppointment=function(e,t,i){switch(D.freq){case"daily":case"weekly":default:return e.year()==i.from.year()&&e.dayOfYear()==i.from.dayOfYear()}},D.createNewPattern=function(){var e;return D.ical?e=new E.jqx.scheduler.recurrencePattern(D.ical):((e=new E.jqx.scheduler.recurrencePattern).from=D.from,e.to=D.to,e.count=D.count,e.interval=D.interval,e.exceptions=D.exceptions,e.newExceptions=D.newExceptions,e.weekDays=D.weekDays,e.isEveryWeekDay=D.isEveryWeekDay,e.month=D.month,e.day=D.day,e.current=D.current,e.currentYearDay=D.currentYearDay,e.step=D.step,e.days=D.days,e.bynweekday=D.bynweekday,e.bymonth=D.bymonth,e.bymonthday=D.bymonthday,e.byyearday=D.byyearday,e.byweekno=D.byweekno,e.byweekday=D.byweekday,e.freq=e.freq,e.timeZone=e.timeZone,e)},D.equals=function(e){return D.from==e.from&&D.to==e.to&&D.count===e.count&&D.interval===e.interval&&D.day===e.day&&D.month===e.month},D.isDayOfWeekIncluded=function(e){e=e.dayOfWeek();return E.jqx.scheduler.utilities.areWeekDaysIncluded(D.weekDays,e)},D.getWeekIndexFromDate=function(e,t){var i=t.firstDay,i=E.jqx.scheduler.utilities.getStartOfWeek(D.from,t,i),i=new E.jqx.timeSpan(e.subtract(i));return parseInt(i.days()/7)},D.canCreateNewOccurence=function(e,t){e.toDate();switch(D.freq){case"daily":default:return D.bymonth&&-1==D.bymonth.indexOf(e.month())?!1:!D.isEveryWeekDay||!!D.isDayOfWeekIncluded(e,t);case"weekly":var i=D.getWeekIndexFromDate(e,t);if(D.bymonth&&-1==D.bymonth.indexOf(e.month()))return!1;if(i%D.interval!=0)return!1;if(D.weekDays=={}){i=e;if(D.from.dayOfWeek()!=i.dayOfWeek())return!1}else if(!D.isDayOfWeekIncluded(e,t))return!1;break;case"monthly":case"yearly":if(D.bymonth&&-1==D.bymonth.indexOf(e.month()))return!1;if(e<D.from)return!1}return!0},D.toString=function(){var t={};t.dtstart=this.from.toDate(),t.until=this.to?this.to.toDate():null,t.count=this.count;var e={YEARLY:0,MONTHLY:1,WEEKLY:2,DAILY:3,HOURLY:4,MINUTELY:5,SECONDLY:6};t.freq=e[this.freq.toUpperCase()],"YEARLY"==t.freq&&(t.bymonth=this.bymonth||(new Array).push(this.month)),t.byweekday=new Array;return E.each(this.weekDays,function(){var e=this;--e<0&&(e=6),t.byweekday.push(e)}),null!=this.byyearday&&(t.byyearday=this.byyearday),null!=this.byweekno&&(t.byweekno=this.byweekno),t.bymonthday=this.bymonthday,t.wkst=["MO","TU","WE","TH","FR","SA","SU"][this.wkst],t.interval=this.interval,new E.jqx.ICalRule(t).toString()},D.init=function(e){var e=new E.jqx.ICalRule(D.ical,e),t=e.options;if(D.from=t.dtstart?new E.jqx.date(t.dtstart,D.timeZone):D.from,D.count=(null!=t.count?t:D).count,D.freq=e.FREQUENCIES[t.freq].toLowerCase(),D.interval=(null!=t.interval?t:D).interval,D.to=t.until?new E.jqx.date(t.until,D.timeZone):D.to,D.wkst=t.wkst,D.bymonth=t.bymonth,D.bymonth&&0<D.bymonth.length?D.month=D.bymonth[0]:D.month=D.from.month(),D.day=D.from.day(),null!=t.byweekday){D.weekDays={};for(var i=0;i<t.byweekday.length;i++)switch(t.byweekday[i]){case 0:D.weekDays.Monday=1;break;case 1:D.weekDays.Tuesday=2;break;case 2:D.weekDays.Wednesday=3;break;case 3:D.weekDays.Thursday=4;break;case 4:D.weekDays.Friday=5;break;case 5:D.weekDays.Saturday=6;break;case 6:D.weekDays.Sunday=0}D.byweekday=t.byweekday}return D.byweekno=t.byweekno,t.bynweekday&&(D.bynweekday=t.bynweekday),null!=t.bymonthday&&(D.bymonthday=t.bymonthday.sort(),D.bymonthday[0]&&(D.day=D.bymonthday[0])),null!=t.byyearday&&(D.day=t.byyearday[0],D.byyearday=t.byyearday.sort()),t},D.setFrom=function(e){D.from=e.clone(),D.ical&&D.init(e)},1==arguments.length&&(D.ical=arguments[0],D.init()),D},E.jqx.scheduler.calendar={"/":"/",":":":",firstDay:0,days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",ISO:"yyyy-MM-dd hh:mm:ss",ISO2:"yyyy-MM-dd HH:mm:ss",d1:"dd.MM.yyyy",d2:"dd-MM-yyyy",zone1:"yyyy-MM-ddTHH:mm:ss-HH:mm",zone2:"yyyy-MM-ddTHH:mm:ss+HH:mm",custom:"yyyy-MM-ddTHH:mm:ss.fff",custom2:"yyyy-MM-dd HH:mm:ss.fff"},percentsymbol:"%",currencysymbol:"$",currencysymbolposition:"before",decimalseparator:".",thousandsseparator:","},E.jqx.ICalRule=function(t,e){function i(e,t){1===arguments.length&&(t=e,e=0);for(var i=[],n=e;n<t;n++)i.push(n);return i}function n(e){return!(e instanceof Array&&0==e.length)&&Boolean(e)}function h(e,t){return-1!=e.indexOf(t)}var p=this,r=function(e,t){var i=0,n=[];if(e instanceof Array)for(;i<t;i++)n[i]=[].concat(e);else for(;i<t;i++)n[i]=e;return n},a=([].concat(r(1,31),r(2,28),r(3,31),r(4,30),r(5,31),r(6,30),r(7,31),r(8,31),r(9,30),r(10,31),r(11,30),r(12,31),r(1,7)),[].concat(r(1,31),r(2,29),r(3,31),r(4,30),r(5,31),r(6,30),r(7,31),r(8,31),r(9,30),r(10,31),r(11,30),r(12,31),r(1,7)),i(1,29)),o=i(1,30),l=i(1,31),r=i(1,32),a=([].concat(r,o,r,l,r,l,r,r,l,r,l,r,r.slice(0,7)),[].concat(r,a,r,l,r,l,r,r,l,r,l,r,r.slice(0,7)),i(-28,0)),o=i(-29,0),l=i(-30,0),r=i(-31,0),y=([].concat(r,o,r,l,r,l,r,r,l,r,l,r,r.slice(0,7)),[].concat(r,a,r,l,r,l,r,r,l,r,l,r,r.slice(0,7)),function(){for(var e=[],t=0;t<55;t++)e=e.concat(i(7))}(),function(e,t){var i=this;if(0===t)throw new Error("Can't create weekday with n == 0");this.weekday=e,this.n=t,this.nth=function(e){return i.n==e?i:new y(i.weekday,e)},this.equals=function(e){return i.weekday==e.weekday&&i.n==e.n},this.toString=function(){var e=["MO","TU","WE","TH","FR","SA","SU"][i.weekday];return this.n&&(e=(0<i.n?"+":"")+String(i.n)+e),e},this.getJsWeekday=function(){return 6==i.weekday?0:i.weekday+1}});this.FREQUENCIES=["YEARLY","MONTHLY","WEEKLY","DAILY","HOURLY","MINUTELY","SECONDLY"],this.YEARLY=0,this.MONTHLY=1,this.WEEKLY=2,this.DAILY=3,this.HOURLY=4,this.MINUTELY=5,this.SECONDLY=6,this.MO=new y(0),this.TU=new y(1),this.WE=new y(2),this.TH=new y(3),this.FR=new y(4),this.SA=new y(5),this.SU=new y(6);var m={freq:null,dtstart:null,interval:1,wkst:p.MO,count:null,until:null,bysetpos:null,bymonth:null,bymonthday:null,byyearday:null,byweekno:null,byweekday:null,byhour:null,byminute:null,bysecond:null,byeaster:null};this._string=null,this.toString=function(){for(var e,t,i,n=this.origOptions,r=[],a=Object.keys(n),o=Object.keys(m),l=0;l<a.length;l++)if(h(o,a[l])&&(e=a[l].toUpperCase(),i=[],!(null===(t=n[a[l]])||t instanceof Array&&!t.length))){switch(e){case"FREQ":t=p.FREQUENCIES[n.freq];break;case"WKST":t=(t=t||0).toString();break;case"BYWEEKDAY":e="BYDAY",t instanceof Array||(t=[t]);for(var d,s=0;s<t.length;s++)(d=t[s])instanceof y||(d=d instanceof Array?new y(d[0],d[1]):new y(d)),i[s]=d.toString();t=i;break;case"DTSTART":case"UNTIL":t=E.jqx.scheduler.utilities.timeToUntilString(t);break;default:if(t instanceof Array){for(s=0;s<t.length;s++)i[s]=String(t[s]);t=i}else t=String(t)}r.push([e,t])}for(var c=[],l=0;l<r.length;l++){var u=r[l];c.push(u[0]+"="+u[1].toString())}return c.join(";")},this.parseString=function(e){if(!(e=e.replace(/^\s+|\s+$/,"")).length)return null;for(var t,i,n,r,a=e.split(";"),o={},l=0;l<a.length;l++)if(i=(r=a[l].split("="))[0],n=r[1],""!=i)switch(i){case"COUNT":case"INTERVAL":case"BYSETPOS":case"BYMONTH":case"BYMONTHDAY":case"BYYEARDAY":case"BYWEEKNO":case"BYHOUR":case"BYMINUTE":case"BYSECOND":if(-1!=n.indexOf(","))for(n=n.split(","),t=0;t<n.length;t++)/^[+-]?\d+$/.test(n[t])&&(n[t]=Number(n[t]));else/^[+-]?\d+$/.test(n)&&(n=Number(n));o[i=i.toLowerCase()]=n;break;case"BYDAY":var d,s,c,u=n.split(",");for(o.byweekday=[],t=0;t<u.length;t++)2==(c=u[t]).length?(s=p[c],o.byweekday.push(s)):(c=c.match(/^([+-]?\d)([A-Z]{2})$/),d=Number(c[1]),s=c[2],s=p[s].weekday,o.byweekday.push(new y(s,d)));break;case"FREQ":o.freq=p[n];break;case"WKST":o.wkst=p[n];break;case"DTSTART":o.dtstart=E.jqx.scheduler.utilities.untilStringToDate(n);break;case"UNTIL":o.until=E.jqx.scheduler.utilities.untilStringToDate(n);break;case"BYEASTER":o.byeaster=Number(n);break;default:throw new Error("Unknown ICalRule property '"+i+"'")}return p.options=o},"string"===E.type(t)?this.options=this.parseString(t):this.options=t||{};var d,s,c,u,t=this.options;Array.prototype.forEach||(Array.prototype.forEach=function(e,t){var i,n;if(null==this)throw new TypeError(" this is null or not defined");var r,a=Object(this),o=a.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(1<arguments.length&&(i=t),n=0;n<o;)n in a&&(r=a[n],e.call(i,r,n,a)),n++}),Object.keys||(Object.keys=(d=Object.prototype.hasOwnProperty,s=!{toString:null}.propertyIsEnumerable("toString"),u=(c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"]).length,function(e){if("object"!=typeof e&&("function"!=typeof e||null===e))throw new TypeError("Object.keys called on non-object");var t,i,n=[];for(t in e)d.call(e,t)&&n.push(t);if(s)for(i=0;i<u;i++)d.call(e,c[i])&&n.push(c[i]);return n})),this.origOptions={};var g=[],f=Object.keys(this.options),D=Object.keys(m);if(f.forEach(function(e){this.origOptions[e]=this.options[e],h(D,e)||g.push(e)},this),g.length)throw new Error("Invalid options: "+g.join(", "));if(!p.FREQUENCIES[this.options.freq]&&null===t.byeaster)throw new Error("Invalid Frequency: "+String(t.freq));D.forEach(function(e){h(f,e)||(t[e]=m[e])});var v=this.options;if(null!==v.byeaster&&(v.freq=this.YEARLY),v.dtstart||(v.dtstart=new Date,v.dtstart.setMilliseconds(0)),e&&(v.dtstart=e.toDate()),null===v.wkst?v.wkst=this.MO.weekday:"number"==typeof v.wkst||(null==v.wkst?v.wkst=this.MO.weekday:v.wkst=v.wkst.weekday),null!==v.bysetpos){"number"==typeof v.bysetpos&&(v.bysetpos=[v.bysetpos]);for(var b=0;b<v.bysetpos.length;b++)if(0==(w=v.bysetpos[b])||!(-366<=w&&w<=366))throw new Error("bysetpos must be between 1 and 366, or between -366 and -1")}if(!(n(v.byweekno)||n(v.byyearday)||n(v.bymonthday)||null!==v.byweekday||null!==v.byeaster))switch(v.freq){case this.YEARLY:v.bymonth||(v.bymonth=v.dtstart.getMonth()+1),v.bymonthday=v.dtstart.getDate();break;case this.MONTHLY:v.bymonthday=v.dtstart.getDate();break;case this.WEEKLY:v.byweekday=E.jqx.scheduler.utilities.getWeekday(v.dtstart)}if(null===v.bymonth||v.bymonth instanceof Array||(v.bymonth=[v.bymonth]),null===v.byyearday||v.byyearday instanceof Array||(v.byyearday=[v.byyearday]),null===v.bymonthday)v.bymonthday=[],v.bynmonthday=[];else if(v.bymonthday instanceof Array){for(var w,x=[],q=[],b=0;b<v.bymonthday.length;b++)0<(w=v.bymonthday[b])?x.push(w):w<0&&q.push(w);v.bymonthday=x,v.bynmonthday=q}else v.bymonthday<0?(v.bynmonthday=[v.bymonthday],v.bymonthday=[]):(v.bynmonthday=[],v.bymonthday=[v.bymonthday]);if(null===v.byweekno||v.byweekno instanceof Array||(v.byweekno=[v.byweekno]),null===v.byweekday)v.bynweekday=null;else if("number"==typeof v.byweekday)v.byweekday=[v.byweekday],v.bynweekday=null;else if(v.byweekday instanceof y)!v.byweekday.n||v.freq>this.MONTHLY?(v.byweekday=[v.byweekday.weekday],v.bynweekday=null):(v.bynweekday=[[v.byweekday.weekday,v.byweekday.n]],v.byweekday=null);else{var j=[],k=[];for(b=0;b<v.byweekday.length;b++){var F=v.byweekday[b];"number"==typeof F?j.push(F):!F.n||v.freq>this.MONTHLY?j.push(F.weekday):k.push([F.weekday,F.n])}v.byweekday=n(j)?j:null,v.bynweekday=n(k)?k:null}if(null===v.byhour?v.byhour=v.freq<this.HOURLY?[v.dtstart.getHours()]:null:"number"==typeof v.byhour&&(v.byhour=[v.byhour]),null===v.byminute?v.byminute=v.freq<this.MINUTELY?[v.dtstart.getMinutes()]:null:"number"==typeof v.byminute&&(v.byminute=[v.byminute]),null===v.bysecond?v.bysecond=v.freq<this.SECONDLY?[v.dtstart.getSeconds()]:null:"number"==typeof v.bysecond&&(v.bysecond=[v.bysecond]),v.freq>=this.HOURLY)this.timeset=null;else{if(this.timeset=[],v.byhour)for(b=0;b<v.byhour.length;b++)for(var A=v.byhour[b],T=0;T<v.byminute.length;T++)for(var S=v.byminute[T],_=0;_<v.bysecond.length;_++){var L=v.bysecond[_];this.timeset.push(new E.jqx.scheduler.utilities.Time(A,S,L))}E.jqx.scheduler.utilities.sort(this.timeset)}return this}}(jqxBaseFramework),function(_){_.extend(_.jqx._jqxScheduler.prototype,{_getexportcolor:function(e){e="transparent"==e?"#FFFFFF":e;if(e&&e.toString()||(e="#FFFFFF"),-1==e.toString().indexOf("rgb"))return-1!=e.toString().indexOf("#")&&4==e.toString().length&&(t=e.toString().substring(1,4),e+=t),e;var t=e.split(",");if(-1!=e.toString().indexOf("rgba")){var i=parseInt(t[0].substring(5)),n=parseInt(t[1]),r=parseInt(t[2]),e=parseFloat(t[3].substring(1,4)),a={r:i,g:n,b:r},o=this._rgbToHex(a);return 0==i&&0==n&&0==r&&0==e?"#ffffff":"#"+o}a={r:i=parseInt(t[0].substring(4)),g:n=parseInt(t[1]),b:r=parseInt(t[2].substring(1,4))};return"#"+(o=this._rgbToHex(a))},_rgbToHex:function(e){return this._intToHex(e.r)+this._intToHex(e.g)+this._intToHex(e.b)},_intToHex:function(e){e=parseInt(e).toString(16);return 1==e.length&&(e="0"+e),e.toUpperCase()},exportData:function(c){if(!_.jqx.dataAdapter.ArrayExporter)throw"jqxScheduler: Missing reference to jqxdata.export.js!";var e=this.exportSettings.serverURL,t=this.exportSettings.characterSet,i=this.exportSettings.fileName,n=this.exportSettings.ICSXWRCALNAME,r=this.exportSettings.ICSXWRCALDESC;void 0===i&&(i="jqxScheduler");var u=this;if("ical"!=c&&"ics"!=c){var a=this.getDataAppointments(),o=new Array,h={},p={},l=this.host.find(".jqx-grid-cell:first");l.removeClass(this.toThemeProperty("jqx-grid-cell-selected")),l.removeClass(this.toThemeProperty("jqx-fill-state-pressed")),l.removeClass(this.toThemeProperty("jqx-grid-cell-hover")),l.removeClass(this.toThemeProperty("jqx-fill-state-hover"));var d,y,m=1,g=1,f=_(this.columns.records[0].element),D=0;_.each(this.appointmentDataFields,function(e,s){var t;h[s]={},h[s].text=s,h[s].width=100,h[s].formatString="",h[s].localization=u.schedulerLocalization,"from"==e||"to"==e?(h[s].type="date",h[s].formatString=u.exportSettings.dateTimeFormatString):h[s].type="string",h[s].cellsAlign="left",o.push(h[s]),d="cell"+m,y="column"+g,"html"!=c&&"xls"!=c&&"pdf"!=c||((t=function(e,t,i,n,r,a,o,l,d){p[e]={},null!=t&&(p[e]["font-size"]=t.css("font-size"),p[e]["font-weight"]=t.css("font-weight"),p[e]["font-style"]=t.css("font-style"),p[e]["background-color"]=u._getexportcolor(t.css("background-color")),p[e].color=u._getexportcolor(t.css("color")),p[e]["border-color"]=u._getexportcolor(t.css("border-top-color")),i?p[e]["text-align"]="left":(p[e]["text-align"]="left",p[e].formatString="",p[e].dataType="string","from"!=o&&"to"!=o||(p[e].dataType="date",p[e].formatString=u.exportSettings.dateTimeFormatString)),"html"!=c&&"pdf"!=c||(p[e]["border-top-width"]=t.css("border-top-width"),p[e]["border-left-width"]=t.css("border-left-width"),p[e]["border-right-width"]=t.css("border-right-width"),p[e]["border-bottom-width"]=t.css("border-bottom-width"),p[e]["border-top-style"]=t.css("border-top-style"),p[e]["border-left-style"]=t.css("border-left-style"),p[e]["border-right-style"]=t.css("border-right-style"),p[e]["border-bottom-style"]=t.css("border-bottom-style"),i?(0==D&&(p[e]["border-left-width"]=t.css("border-right-width")),p[e]["border-top-width"]=t.css("border-right-width"),p[e]["border-bottom-width"]=t.css("border-bottom-width")):(0==D&&(p[e]["border-left-width"]="1px"),p[e]["border-right-width"]="1px")),i&&(h[s].style=e),h[s].cellStyle=e)})(y,f,!0,0,0,0,e),g++,t(d,l,!1,0,0,0,e),m++),D++});var s=_.jqx.dataAdapter.ArrayExporter(a,h,p,e);if(null==i){this._renderrows();var v=s.exportTo(c);return setTimeout(function(){u.exporting=!1},50),v}s.exportToFile(c,i,e,t),this._renderrows(),setTimeout(function(){u.exporting=!1},50)}else if(1<u._resources.length&&i&&u.resourcesInMultipleICSFiles)for(var a=this.getAppointments(),b=0;b<u._resources.length;b++){for(var w=u._resources[b],x=new Array,q=0;q<a.length;q++){var j=a[q];j.resourceId==w&&x.push(j)}var k="BEGIN:VCALENDAR\nVERSION:2.0\nPRODID:jqxScheduler\nMETHOD:PUBLISH\n";n&&(k+="X-WR-CALNAME:"+n+"\n"),r&&(k+="X-WR-CALDESC:"+r+"\n");for(var F=0;F<x.length;F++)k+=x[F].jqxAppointment.toString(),F<x.length-1&&(k+="\n");for(var A=(k+="\nEND:VCALENDAR").length,T=new Uint8Array(new ArrayBuffer(A)),F=0;F<A;F++)T[F]=k.charCodeAt(F);var S=new Blob([T],{type:"application/calendar"});window.jqxSaveAs&&window.jqxSaveAs(S,i+"_"+w+".ics")}else{for(a=this.getAppointments(),k="BEGIN:VCALENDAR\nVERSION:2.0\nPRODID:jqxScheduler\nMETHOD:PUBLISH\n",b=0;b<a.length;b++)k+=a[b].jqxAppointment.toString(),b<a.length-1&&(k+="\n");A=(k+="\nEND:VCALENDAR").length,T=new Uint8Array(new ArrayBuffer(A));for(b=0;b<A;b++)T[b]=k.charCodeAt(b);S=new Blob([T],{type:"application/calendar"});if(!i)return k;window.jqxSaveAs&&window.jqxSaveAs(S,i+".ics")}},shadeColor:function(e,t){var i=parseInt(e.slice(1),16),n=t<0?0:255,r=t<0?-1*t:t,e=i>>16,t=i>>8&255,i=255&i;return"#"+(16777216+65536*(Math.round((n-e)*r)+e)+256*(Math.round((n-t)*r)+t)+(Math.round((n-i)*r)+i)).toString(16).slice(1)},hexToRgba:function(e,t){var i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e),e=function(){var e=_.jqx.browser.msie&&_.jqx.browser.version<10;return null==this.alpha||e?"rgb("+this.r+", "+this.g+", "+this.b+")":(1<this.alpha?this.alpha=1:this.alpha<0&&(this.alpha=0),"rgba("+this.r+", "+this.g+", "+this.b+", "+this.alpha+")")};return null==t?i?{r:parseInt(i[1],16),g:parseInt(i[2],16),b:parseInt(i[3],16),toString:e}:null:(1<t?t=1:t<0&&(t=0),i?{r:parseInt(i[1],16),g:parseInt(i[2],16),b:parseInt(i[3],16),alpha:t,toString:e}:null)},getAppointmentColors:function(e){var t,i=e;return{background:this.hexToRgba(e,this.appointmentOpacity).toString(),color:255-(.299*(t=this.hexToRgba(e,.7)).r+.587*t.g+.114*t.b)<105?"Black":"White",border:i}},getColors:function(e){-1==e&&(e=0);for(var t,i,n=(n=this.resources?this.resources.colorScheme:null)||"scheme01",r=new Array,a=0;a<this.colorSchemes.length;a++)if(this.colorSchemes[a].name==n){r=this.colorSchemes[a].colors;break}for(;e>r.length-1;){var o=parseInt(n.substring(6));27<=o&&(o=0),r=r.concat(this.colorSchemes[o].colors),o++}r[e],t=this.hexToRgba(r[e],this.appointmentOpacity).toString(),i=r[e];var l;return{background:t,color:255-(.299*(l=this.hexToRgba(r[e],.7)).r+.587*l.g+.114*l.b)<105?"Black":"White",border:i}},getAppointments:function(){for(var e=this.uiappointments,t=new Array,i=0;i<e.length;i++){var n=e[i].boundAppointment;n.toString=n.jqxAppointment.toString,t.push(n)}return t},getDataAppointments:function(){for(var e=this.uiappointments,t=new Array,i=0;i<e.length;i++){var n=e[i].boundAppointment,r={};_.each(this.appointmentDataFields,function(e,t){if(r[t]=n[e],"from"!=e&&"to"!=e||"date"!=_.type(n[e])&&(r[t]=n[e].toDate()),"recurrencePattern"==e&&n[e]&&(r[t]=n[e].toString()),"recurrenceException"==e&&n[e]){r[t]="";for(var i=0;i<n[e].length;i++)r[t]+=n[e][i].toString(),i<n[e].length-1&&(r[t]+=",")}try{JSON&&(r.toString=function(){return JSON.stringify(r)})}catch(e){}}),t.push(r)}return t},_refreshColumns:function(){this._initializeColumns(),this.columnsheader=this.columnsheader||_('<div style="overflow: hidden;"></div>'),this.columnsheader.children().remove();var e=this.columnsHeight,e=this._preparecolumnGroups();this.columnsheader.height(e),this._rendercolumnheaders()},_refreshColumnTitles:function(){var e=this._views[this._view].type,p=this._views[this._view],y=this,m=new Array;if(y.columns.records[0].timeColumn&&m.push({}),p.timeRuler&&p.timeRuler.timeZones)for(var t=0;t<p.timeRuler.timeZones.length;t++)m.push({});function i(e,t,i){var n="halfHour";p.timeRuler&&p.timeRuler.scale&&(n=p.timeRuler.scale);var r=24,a=0,o=23;if(p.timeRuler&&(null!=p.timeRuler.scaleStartHour&&(a=parseInt(p.timeRuler.scaleStartHour)),null!=p.timeRuler.scaleEndHour&&(o=parseInt(p.timeRuler.scaleEndHour)),a<0&&(a=0),o<0&&(o=23),23<a&&(a=0),23<o&&(o=23),r=o-a+1),n)switch(n){case"sixtyMinutes":case"hour":0;break;case"thirdyMinutes":case"halfHour":0;break;case"fifteenMinutes":case"quarterHour":0;break;case"tenMinutes":0;break;case"fiveMinutes":0}new Array;var l="auto";p.timeRuler&&p.timeRuler.formatString&&(l=p.timeRuler.formatString);var d=r,s=e.addHours(a);y.rtl&&(s=e.addHours(o));for(var c=0;c<d;c++){var u,h=s.toDate();u="auto"===l?0==h.getHours()&&0==h.getMinutes()||12==h.getHours()&&0==h.getMinutes()?"hh tt":"hh:mm":_.isFunction(l)?l(h):l,_.jqx.dataFormat.isDate(h)&&(h=_.jqx.dataFormat.formatdate(h,u,y.schedulerLocalization)),s=y.rtl?s.addMinutes(-60):s.addMinutes(60),m.push({}),y.columns.records[m.length-1].text=h}}this.tableColumns;for(var n=0;n<this.tableColumns;n++)switch(e){case"dayView":var r=this.getViewStart();!1===p.showWeekends&&(0!==r.dayOfWeek()&&6!==r.dayOfWeek()||(r=r.addDays(1)),0!==r.dayOfWeek()&&6!==r.dayOfWeek()||(r=r.addDays(1))),m.push({}),this.columns.records[m.length-1].text=this._getDayName(r.dayOfWeek());break;case"weekView":case"monthView":for(t=0;t<7;t++){var a=this.schedulerLocalization.firstDay+t;(!1!==p.showWeekends||0!==t&&6!==t)&&(m.push({}),y.rtl&&(a=6-a),this.columns.records[m.length-1].text=this._getDayName(a))}break;case"timelineDayView":y._resources[n];i(y.getViewStart());break;case"timelineWeekView":for(t=0;t<7;t++){a=this.schedulerLocalization.firstDay+t;(!1!==p.showWeekends||0!==t&&6!==t)&&(y.rtl&&(a=6-a),i(y.getViewStart().addDays(t),this._getDayName(a)))}break;case"timelineMonthView":var o=y.getViewStart(),l="auto";p.timeRuler&&p.timeRuler.formatString&&(l=p.timeRuler.formatString);for(t=0;t<41;t++){var d,s,a=o.dayOfWeek();(!1!==p.showWeekends||0!==a&&6!==a)&&(y.rtl&&(a=6-a),d=o.toDate(),"auto"===l?(s="dd",1===(d=o.toDate()).getDate()&&(s="MMM dd")):s=_.isFunction(l)?l(d):l,_.jqx.dataFormat.isDate(d)&&(d=_.jqx.dataFormat.formatdate(d,s,y.schedulerLocalization)),o=o.addDays(1),m.push({}),y.columns.records[m.length-1].text=d)}}for(var c,u,h=y.columnsHeight,t=0;t<this.columns.records.length;t++){var g,f=this.columns.records[t];f.timeColumn||(y.columnGroups&&y.columnGroups.length&&(f.datafield,c=f,u=void 0,u=y.columnGroupslevel*y.columnsHeight,h=u-=c.level*y.columnsHeight),null==(g=null!=f.renderer?f.renderer(y.escape_HTML(f.text),f.align,h):y._rendercolumnheader(f.text,f.align,h,f))&&(g=y._rendercolumnheader(y.escape_HTML(f.text),f.align,h,y)),null!=f.renderer&&(g=_(g)),_(f.element).html(g))}},_editDialogLabel:function(){return this.theme?"jqx-scheduler-edit-dialog-label jqx-scheduler-edit-dialog-label-"+this.theme:"jqx-scheduler-edit-dialog-label"},_editDialogField:function(){return this.theme?"jqx-scheduler-edit-dialog-field jqx-scheduler-edit-dialog-field-"+this.theme:"jqx-scheduler-edit-dialog-field"},initRepeatPanels:function(i,n,o){var m=this,e=_("<div></div>");n.append(e);var t=_("<div class='"+m._editDialogLabel()+"'>"+m.schedulerLocalization.editDialogRepeatString+"</div>").appendTo(e),r=_("<div class='"+m._editDialogField()+"'></div>").appendTo(e),a=_("<div></div>").appendTo(r),l=_("<div></div>");n.append(l);var d=_("<div></div>");l.append(d);d.detach(),m.editDialogFields.repeatEndPanel={},function(e,t){var i=_("<div></div>").appendTo(e),n=_("<div class='"+m._editDialogLabel()+"'>"+m.schedulerLocalization.editDialogRepeatEndString+"</div>").appendTo(i),r=_("<div class='"+m._editDialogField()+"'></div>").appendTo(i),a=_("<div style='top: 3px; position:relative; float:left;'><span style='margin-left:2px;'>"+m.schedulerLocalization.editDialogRepeatNeverString+"</span></div>").appendTo(r);a.jqxRadioButton({rtl:m.rtl,groupName:"end"+t,theme:m.theme,width:200,checked:!0}),m.editDialogFields[t].repeatEndNever=a,m.editDialogFields[t].repeatEndNeverLabel=n;e=_("<div class='"+m._editDialogLabel()+"'></div>").appendTo(i),r=_("<div class='"+m._editDialogField()+"'></div>").appendTo(i),a=_("<div style='top: 3px;  position:relative;  float:left;'><span style='margin-left:2px;'>"+m.schedulerLocalization.editDialogRepeatAfterString+"</span></div>").appendTo(r);a.jqxRadioButton({rtl:m.rtl,groupName:"end"+t,theme:m.theme,width:60,checked:!1});n=_("<div style='margin-left: 3px; float:left;'></div>").appendTo(r);n.jqxNumberInput({rtl:m.rtl,decimal:10,min:1,inputMode:"simple",width:50,spinButtons:!0,decimalDigits:0,theme:m.theme});_("<div style='float: left; top: 3px;  margin-left: 5px; line-height:25px;'>"+m.schedulerLocalization.editDialogRepeatOccurrencesString+"</div>").appendTo(r);m.editDialogFields[t].repeatEndAfter=a,m.editDialogFields[t].repeatEndAfterValue=n,m.editDialogFields[t].repeatEndAfterLabel=e;a=_("<div class='"+m._editDialogLabel()+"'></div>").appendTo(i),n=_("<div class='"+m._editDialogField()+"'></div>").appendTo(i),e=_("<div style='top: 3px; position:relative; float:left;'><span style='margin-left:2px;'>"+m.schedulerLocalization.editDialogRepeatOnString+"</span></div>").appendTo(n);e.jqxRadioButton({rtl:m.rtl,groupName:"end"+t,theme:m.theme,width:60,checked:!1});n=_("<div style='margin-left: 3px; float:left;'></div>").appendTo(n);n.jqxDateTimeInput({dropDownWidth:220,dropDownHeight:220,rtl:m.rtl,localization:m._getDateTimeInputLocalization(),firstDayOfWeek:m.schedulerLocalization.firstDay,todayString:m.schedulerLocalization.todayString,clearString:m.schedulerLocalization.clearString,value:o,formatString:m.editDialogDateFormatString,width:150,theme:m.theme});n.jqxDateTimeInput("getInstance");m.editDialogFields[t].repeatEndOn=e,m.editDialogFields[t].repeatEndOnValue=n,m.editDialogFields[t].repeatEndOnLabel=a}(m.editDialogFields.repeatEndPanelContainer=d,"repeatEndPanel");var s=function(){var e=_("<div style='visibility: hidden;'></div>").appendTo(_(document.body)),t=_("<div class='"+m._editDialogLabel()+"'>"+m.schedulerLocalization.editDialogRepeatEveryString+"</div>").appendTo(e),i=_("<div class='"+m._editDialogField()+"'></div>").appendTo(e),n=_("<div style='float:left;'></div>").appendTo(i);n.jqxNumberInput({rtl:m.rtl,decimal:1,min:1,inputMode:"simple",width:50,spinButtons:!0,decimalDigits:0,theme:m.theme});_("<div style='float: left; margin-left: 5px; line-height:25px;'>"+m.schedulerLocalization.editDialogRepeatEveryDayString+"</div>").appendTo(i);m.editDialogFields.daily={},m.editDialogFields.daily.repeatDayInterval=n,m.editDialogFields.daily.repeatDayLabel=t,(m.editDialogFields.daily.panel=e).detach(),m.editDialogFields.weekly={};var r=_("<div style='visibility: hidden;'></div>").appendTo(_(document.body)),a=_("<div class='"+m._editDialogLabel()+"'>"+m.schedulerLocalization.editDialogRepeatEveryString+"</div>").appendTo(r),i=_("<div class='"+m._editDialogField()+"'></div>").appendTo(r),n=_("<div style='float:left;'></div>").appendTo(i);n.jqxNumberInput({rtl:m.rtl,decimal:1,min:1,inputMode:"simple",width:50,spinButtons:!0,decimalDigits:0,theme:m.theme});_("<div style='float: left; margin-left: 5px; line-height:25px;'>"+m.schedulerLocalization.editDialogRepeatEveryWeekString+"</div>").appendTo(i);m.editDialogFields.weekly.repeatWeekInterval=n,m.editDialogFields.weekly.repeatWeekIntervalLabel=a;var t=_("<div class='"+m._editDialogLabel()+"'>"+m.schedulerLocalization.editDialogRepeatOnString+"</div>").appendTo(r),e=_("<div class='"+m._editDialogField()+"'></div>").appendTo(r),o=_("<div style='float:left;'></div>").appendTo(e);m.editDialogFields.weekly.repeatDaysLabel=t,m.editDialogFields.weekly.repeatDays=new Array;for(var l=0;l<7;l++){var d=m._getDayName(l,"firstTwoLetters"),s=_("<div style='position:relative; top: 6px; float:left;'><span style='margin-left:2px;'>"+d+"</span></div>");o.append(s);var c=1==l;s.jqxCheckBox({rtl:m.rtl,checked:c,width:50,theme:m.theme}),m.editDialogFields.weekly.repeatDays.push(s)}(m.editDialogFields.weekly.panel=r).detach(),m.editDialogFields.monthly={};i=_("<div style='visibility: hidden;'></div>").appendTo(_(document.body)),n=_("<div class='"+m._editDialogLabel()+"'>"+m.schedulerLocalization.editDialogRepeatEveryString+"</div>").appendTo(i),a=_("<div class='"+m._editDialogField()+"'></div>").appendTo(i),e=_("<div style='float:left;'></div>").appendTo(a);e.jqxNumberInput({rtl:m.rtl,decimal:1,min:1,inputMode:"simple",width:50,spinButtons:!0,decimalDigits:0,theme:m.theme});_("<div style='float: left; margin-left: 5px; line-height:25px;'>"+m.schedulerLocalization.editDialogRepeatEveryMonthString+"</div>").appendTo(a);m.editDialogFields.monthly.repeatMonth=e,m.editDialogFields.monthly.repeatMonthLabel=n;t=_("<div class='"+m._editDialogLabel()+"'>"+m.schedulerLocalization.editDialogRepeatOnString+"</div>").appendTo(i),r=_("<div class='"+m._editDialogField()+"'></div>").appendTo(i),a=_("<div style='float:left;'></div>").appendTo(r),e=_("<div style='position:relative; top: 6px; float:left;'><span style='margin-left:2px;'>"+m.schedulerLocalization.editDialogRepeatEveryMonthDayString+"</span></div>").appendTo(a);e.jqxRadioButton({rtl:m.rtl,groupName:"month",width:60,checked:!0,theme:m.theme});n=_("<div style='float:left;'></div>").appendTo(a);n.jqxNumberInput({rtl:m.rtl,decimal:1,min:1,inputMode:"simple",width:50,spinButtons:!0,decimalDigits:0,theme:m.theme}),m.editDialogFields.monthly.repeatMonthDay=n,m.editDialogFields.monthly.repeatMonthDayBool=e,m.editDialogFields.monthly.repeatMonthDayLabel=t;r=_("<div class='"+m._editDialogLabel()+"'></div>").appendTo(i),a=_("<div class='"+m._editDialogField()+"'></div>").appendTo(i),n=_("<div style='float:left;'></div>").appendTo(a),e=_("<div style='position:relative; top: 6px; float:left;'><span style='margin-left:2px;'></span></div>").appendTo(n);e.jqxRadioButton({groupName:"month",width:25,checked:!1,theme:m.theme});t=_("<div style='float:left;'></div>").appendTo(n),a=new Array;a.push(m.schedulerLocalization.editDialogRepeatFirstString),a.push(m.schedulerLocalization.editDialogRepeatSecondString),a.push(m.schedulerLocalization.editDialogRepeatThirdString),a.push(m.schedulerLocalization.editDialogRepeatFourthString),a.push(m.schedulerLocalization.editDialogRepeatLastString),t.jqxDropDownList({height:27,dropDownWidth:150,selectedIndex:0,source:a,autoDropDownHeight:!0,width:"auto",theme:m.theme});for(var n=_("<div style='margin-left: 5px; float:left;'></div>").appendTo(n),u=new Array,l=0;l<7;l++){d=m._getDayName(l);u.push(d)}n.jqxDropDownList({height:27,rtl:m.rtl,dropDownWidth:150,autoDropDownHeight:!0,selectedIndex:1,source:u,width:"auto",theme:m.theme}),m.editDialogFields.monthly.repeatDayOfWeekBool=e,m.editDialogFields.monthly.repeatDayOfWeek=n,m.editDialogFields.monthly.repeatDayOfWeekLabel=r,m.editDialogFields.monthly.repeatDayOfWeekType=t,(m.editDialogFields.monthly.panel=i).detach(),m.editDialogFields.yearly={};e=_("<div style='visibility: hidden;'></div>").appendTo(_(document.body)),n=_("<div class='"+m._editDialogLabel()+"'>"+m.schedulerLocalization.editDialogRepeatEveryString+"</div>").appendTo(e),r=_("<div class='"+m._editDialogField()+"'></div>").appendTo(e),t=_("<div style='float:left;'></div>").appendTo(r);t.jqxNumberInput({decimal:1,min:1,inputMode:"simple",width:50,spinButtons:!0,decimalDigits:0,theme:m.theme});_("<div style='float: left; margin-left: 5px; line-height:25px;'>"+m.schedulerLocalization.editDialogRepeatEveryYearString+"</div>").appendTo(r);m.editDialogFields.yearly.repeatYear=t,m.editDialogFields.yearly.repeatYearLabel=n;i=_("<div class='"+m._editDialogLabel()+"'>"+m.schedulerLocalization.editDialogRepeatOnString+"</div>").appendTo(e),r=_("<div class='"+m._editDialogField()+"'></div>").appendTo(e),t=_("<div style='float:left;'></div>").appendTo(r),n=_("<div style='position:relative; top: 6px; float:left;'></span></div>").appendTo(t);n.jqxRadioButton({rtl:m.rtl,groupName:"year",width:25,checked:!0,theme:m.theme}),m.editDialogFields.yearly.repeatYearBool=n,m.editDialogFields.yearly.repeatYearBoolLabel=i;for(var r=_("<div style='float:left;'></div>").appendTo(t),h=new Array,l=0;l<12;l++){var p=m.schedulerLocalization.months.names[l];h.push(p)}r.jqxDropDownList({height:27,selectedIndex:0,dropDownWidth:150,width:"auto",source:h,theme:m.theme}),m.editDialogFields.yearly.repeatYearMonth=r;n=_("<div style='margin-left: 5px; float:left;'></div>").appendTo(t);n.jqxNumberInput({height:25,decimal:1,min:1,inputMode:"simple",width:50,spinButtons:!0,decimalDigits:0,theme:m.theme}),m.editDialogFields.yearly.repeatYearDay=n;i=_("<div class='"+m._editDialogLabel()+"'></div>").appendTo(e),r=_("<div class='"+m._editDialogField()+"'></div>").appendTo(e),t=_("<div style='float:left;'></div>").appendTo(r),n=_("<div style='position:relative; top: 6px; float:left;'><span style='margin-left:2px;'></span></div>").appendTo(t);n.jqxRadioButton({rtl:m.rtl,groupName:"year",width:25,checked:!1,theme:m.theme});r=_("<div style='float:left;'></div>").appendTo(t);m.editDialogFields.yearly.repeatDayOfWeekBool=n,m.editDialogFields.yearly.repeatDayOfWeekType=r,m.editDialogFields.yearly.repeatDayOfWeekLabel=i;i=new Array;i.push(m.schedulerLocalization.editDialogRepeatFirstString),i.push(m.schedulerLocalization.editDialogRepeatSecondString),i.push(m.schedulerLocalization.editDialogRepeatThirdString),i.push(m.schedulerLocalization.editDialogRepeatFourthString),i.push(m.schedulerLocalization.editDialogRepeatLastString),r.jqxDropDownList({height:27,dropDownWidth:150,selectedIndex:0,source:i,autoDropDownHeight:!0,width:"auto",theme:m.theme});i=_("<div style='margin-left: 5px; float:left;'></div>").appendTo(t);m.editDialogFields.yearly.repeatDayOfWeek=i;for(var y=new Array,l=0;l<7;l++){d=m._getDayName(l);y.push(d)}i.jqxDropDownList({height:27,rtl:m.rtl,dropDownWidth:150,selectedIndex:1,autoDropDownHeight:!0,source:y,width:"auto",theme:m.theme});for(h=new Array,t=(_("<div style='line-height:25px; height: 25px; margin-left: 5px; float:left;'>"+m.schedulerLocalization.editDialogRepeatOfString+"</div>").appendTo(t),_("<div style='margin-left: 5px; float:left;'></div>").appendTo(t)),l=0;l<12;l++){p=m.schedulerLocalization.months.names[l];h.push(p)}(m.editDialogFields.yearly.repeatDayOfWeekMonth=t).jqxDropDownList({height:27,rtl:m.rtl,dropDownWidth:150,selectedIndex:0,source:h,width:"auto",theme:m.theme}),(m.editDialogFields.yearly.panel=e).detach()};m.editAppointment&&m.editAppointment.rootAppointment,s();var c=_("<div></div>");n.append(c);r=_("<div class='"+m._editDialogLabel()+"'>"+m.schedulerLocalization.editDialogExceptionsString+"</div>").appendTo(c),s=_("<div class='"+m._editDialogField()+"'></div>").appendTo(c),s=_("<div style='position:relative; top:2px;'>"+m.schedulerLocalization.editDialogResetExceptionsString+"</div>").appendTo(s);s.jqxCheckBox({width:"100%",theme:m.theme}),c.hide(),m.editDialogFields.resetExceptions=s,m.editDialogFields.resetExceptionsLabel=r,m.editDialogFields.resetExceptionsContainer=c;c=new Array;c.push(m.schedulerLocalization.editDialogRepeatNeverString),c.push(m.schedulerLocalization.editDialogRepeatDailyString),c.push(m.schedulerLocalization.editDialogRepeatWeeklyString),c.push(m.schedulerLocalization.editDialogRepeatMonthlyString),c.push(m.schedulerLocalization.editDialogRepeatYearlyString),a.jqxDropDownList({rtl:m.rtl,height:27,width:"100%",autoDropDownHeight:!0,theme:m.theme,source:c,selectedIndex:0}),m.editDialogFields.repeat=a,m.editDialogFields.repeatLabel=t,m.editDialogFields.repeatContainer=e,m.editDialogFields.repeatPanel=l,this.addHandler(a,"change",function(e){var t=e.args.item.index;!function(){switch(l.children().detach(),t){case 0:break;case 1:m.editDialogFields.daily.panel.css("visibility","visible"),l.append(m.editDialogFields.daily.panel);break;case 2:m.editDialogFields.weekly.panel.css("visibility","visible"),l.append(m.editDialogFields.weekly.panel);break;case 3:m.editDialogFields.monthly.panel.css("visibility","visible"),l.append(m.editDialogFields.monthly.panel);break;case 4:m.editDialogFields.yearly.panel.css("visibility","visible"),l.append(m.editDialogFields.yearly.panel)}l.append(d),0==t?m.editDialogFields.repeatEndPanelContainer.hide():m.editDialogFields.repeatEndPanelContainer.show(),m.isTouchDevice()||(i.jqxWindow({height:150}),i.jqxWindow({height:n[0].scrollHeight+40}))}()})},_initMenu:function(){var i=this;if(this.host.jqxMenu){if(this.menu){if(this._hasOpenedMenu)return;this.removeHandler(this.menu,"keydown"),this.removeHandler(this.menu,"closed"),this.removeHandler(this.menu,"itemclick"),this.menu.jqxMenu("destroy"),this.menu.removeData(),this.menu.remove()}this.menuitemsarray=new Array,this.menu=_('<div id="menu.jqxscheduler'+this.element.id+'" style="white-space: nowrap; z-index: 9999999999999;"></div>'),this.host.append(this.menu),this.addHandler(_(window),"orientationchange.jqxscheduler"+this.element.id,function(){i.menu.jqxMenu("close"),i._hasOpenedMenu=!1}),this.addHandler(_(window),"orientationchanged.jqxscheduler"+this.element.id,function(){i.menu.jqxMenu("close"),i._hasOpenedMenu=!1}),this.removeHandler(this.menu,"keydown"),this.addHandler(this.menu,"keydown",function(e){27==e.keyCode&&(i.menu.jqxMenu("close"),i._hasOpenedMenu=!1,i.focus())}),this.addHandler(this.menu,"open",function(e){i.contextMenuOpen&&i.contextMenuOpen(i.menu,i.selectedJQXAppointment?i.selectedJQXAppointment.boundAppointment:null,e),i._raiseEvent("contextMenuOpen",{menu:i.menu,appointment:i.selectedJQXAppointment?i.selectedJQXAppointment.boundAppointment:null}),i._removeFeedbackAndStopResize()}),this.addHandler(this.menu,"close",function(e){i.contextMenuClose&&i.contextMenuClose(i.menu,i.selectedJQXAppointment?i.selectedJQXAppointment.boundAppointment:null,e),i._hasOpenedMenu=!1,document.activeElement&&0<=document.activeElement.className.indexOf("jqx-menu")&&!i.menuOpening&&i.focus(),i._raiseEvent("contextMenuClose",{menu:i.menu,appointment:i.selectedJQXAppointment?i.selectedJQXAppointment.boundAppointment:null})}),this.addHandler(this.host,"contextmenu",function(e){return e.preventDefault(),e.stopPropagation(),!1}),this.addHandler(this.menu,"itemclick",function(e){var t=i.menu.jqxMenu("getItem",e.args.id);if((i._raiseEvent("contextMenuItemClick",{item:t,menu:i.menu,appointment:i.selectedJQXAppointment?i.selectedJQXAppointment.boundAppointment:null}),i.contextMenuItemClick)&&1==i.contextMenuItemClick(i.menu,i.selectedJQXAppointment?i.selectedJQXAppointment.boundAppointment:null,e))return 500<new Date-i.renderedTime&&i._renderrows(),i.menu.jqxMenu("close"),void(i._hasOpenedMenu=!1);if("createAppointment"==t.id)i._initDialog(),i._openDialog(),"keyboard"==e.args.clickType&&(i.menu.jqxMenu("close"),i._hasOpenedMenu=!1);else{if("editAppointment"!=t.id)return"keyboard"==e.args.clickType&&(i.menu.jqxMenu("close"),i._hasOpenedMenu=!1),!0;t=i.getJQXAppointmentByElement(i.selectedAppointment);t.readOnly||!1!==i._initDialog(t)&&i._openDialog(),"keyboard"==e.args.clickType&&(i.menu.jqxMenu("close"),i._hasOpenedMenu=!1)}});var e=new Array;e.push({label:this.schedulerLocalization.contextMenuEditAppointmentString,id:"editAppointment"}),e.push({label:this.schedulerLocalization.contextMenuCreateAppointmentString,id:"createAppointment"});e={rtl:this.rtl,keyboardNavigation:!0,source:e,popupZIndex:999999,autoOpenPopup:!1,mode:"popup",theme:this.theme,animationShowDuration:0,animationHideDuration:0,animationShowDelay:0};i.contextMenuCreate&&i.contextMenuCreate(i.menu,e),i._raiseEvent("contextMenuCreate",{menu:i.menu,settings:e}),this.menu.jqxMenu(e)}},_initDialog:function(g,n){var f,D,v,b,w=this,x=null;if(g&&g.isRecurrentAppointment()&&!w.editRecurrenceDialog.jqxWindow("isOpen")){var e=(i=w.host.coord()).top+w.host.height()/2-w.editRecurrenceDialog.height()/2,t=i.left+w.host.width()/2-w.editRecurrenceDialog.width()/2;w.editRecurrenceDialog.find("button:first").focus(),setTimeout(function(){w.editRecurrenceDialog.find("button:first").focus()},25),w.editRecurrenceDialog.jqxWindow("move",t,e),w.editRecurrenceDialog.jqxWindow("open"),w.editSeries=function(e){e?w._initDialog(g.rootAppointment):w._initDialog(g),w._openDialog()},w.overlay.show(),w.overlay.width(w.host.width()),w.overlay.height(w.host.height());var i=w.host.coord();return w.overlay.offset(i),w._editDialog||w._initDialog(),!1}if((w.editAppointment=g)||(x=w.getSelection())||(w.focus(),w.focusedCell||w._updateFocusedCell(),w.focusedCell&&(w.focusedCell.setAttribute("data-selected","true"),w._lastSelectedCell=w.focusedCell,w._updateCellsSelection(w.focusedCell),x=w.getSelection())),(x||g)&&(f=(x||g).from,D=(x||g).to,0<(o=w.getSelectedCells()).length&&o[o.length-1].getAttribute("data-end-date")&&(D=_.jqx.scheduler.utilities.getEndOfDay(D)),w._editStart=f,w._editEnd=D),w.editDialogFields&&w.editDialogFields.resourceContainer&&0<w._resources.length){for(var r=new Array,a=0;a<w._resources.length;a++)r.push(w._resources[a]);var o=!0;10<r.length&&(o=!1),w.editDialogFields.resource.jqxDropDownList({source:r,selectedIndex:0,autoDropDownHeight:o}),g||w.editDialogFields.resource.val(x.resourceId)}w.editDialogFields&&w.editDialogFields.repeatContainer&&(g&&g.rootAppointment?(w.editDialogFields.repeatContainer.hide(),w.editDialogFields.repeatPanel.hide()):(w.editDialogFields.repeatContainer.show(),w.editDialogFields.repeatPanel.show())),null==w._editDialog&&(v=(w._editDialog=null)==g?w.schedulerLocalization.editDialogCreateTitleString:w.schedulerLocalization.editDialogTitleString,b=_("<div><div>"+v+"</div><div id='dialog"+this.element.id+"'></div></div>"),_(b).jqxWindow({rtl:w.rtl,autoFocus:!1,autoOpen:!1,animationType:"none",theme:w.theme,width:540,maxHeight:800,minHeight:110,resizable:!1,initContent:function(){w.editDialogFields={},null==f&&null==D&&w._editStart&&w._editEnd&&(f=w._editStart,D=w._editEnd),b.jqxWindow("setTitle",v);var e=_(b.children()[1]),t=_("<div></div>");e.append(t);var i=_("<div class='"+w._editDialogLabel()+"'>"+w.schedulerLocalization.editDialogSubjectString+"</div>").appendTo(t),n=_("<div class='"+w._editDialogField()+"'></div>").appendTo(t),r=_("<input type='text'/>").appendTo(n);r.jqxInput({height:25,rtl:w.rtl,width:"100%",theme:w.theme}),r.css("box-sizing","border-box"),w.editDialogFields.subject=r,w.editDialogFields.subjectLabel=i,w.editDialogFields.subjectContainer=t;var a=_("<div></div>");e.append(a);n=_("<div class='"+w._editDialogLabel()+"'>"+w.schedulerLocalization.editDialogLocationString+"</div>").appendTo(a),r=_("<div class='"+w._editDialogField()+"'></div>").appendTo(a),i=_("<input type='text'/>").appendTo(r);i.jqxInput({height:25,rtl:w.rtl,width:"100%",theme:w.theme}),i.css("box-sizing","border-box"),w.editDialogFields.location=i,w.editDialogFields.locationLabel=n,w.editDialogFields.locationContainer=a;t=_("<div></div>");e.append(t);var r=_("<div class='"+w._editDialogLabel()+"'>"+w.schedulerLocalization.editDialogFromString+"</div>").appendTo(t),i=_("<div class='"+w._editDialogField()+"'></div>").appendTo(t),o=_("<div></div>").appendTo(i),n=null;f?n=f.toDate():((d=new Date).setHours(9,0,0),n=d,f=new _.jqx.date(d)),o.jqxDateTimeInput({height:27,dropDownWidth:220,dropDownHeight:220,rtl:w.rtl,localization:w._getDateTimeInputLocalization(),firstDayOfWeek:w.schedulerLocalization.firstDay,todayString:w.schedulerLocalization.todayString,clearString:w.schedulerLocalization.clearString,value:n,formatString:w.editDialogDateTimeFormatString,width:"100%",showTimeButton:!0,theme:w.theme}),w.editDialogFields.from=o,w.editDialogFields.fromLabel=r,w.editDialogFields.fromContainer=t;a=_("<div></div>");e.append(a);var i=_("<div class='"+w._editDialogLabel()+"'>"+w.schedulerLocalization.editDialogToString+"</div>").appendTo(a),n=_("<div class='"+w._editDialogField()+"'></div>").appendTo(a),l=_("<div></div>").appendTo(n),r=null;D?r=D.toDate():((d=new Date).setHours(10,0,0),r=d,D=new _.jqx.date(d)),l.jqxDateTimeInput({height:27,dropDownWidth:220,dropDownHeight:220,rtl:w.rtl,localization:w._getDateTimeInputLocalization(),firstDayOfWeek:w.schedulerLocalization.firstDay,todayString:w.schedulerLocalization.todayString,clearString:w.schedulerLocalization.clearString,value:r,formatString:w.editDialogDateTimeFormatString,width:"100%",showTimeButton:!0,theme:w.theme}),w.editDialogFields.to=l,w.editDialogFields.toLabel=i,w.editDialogFields.toContainer=a,w._changeFromUser=!0,w.addHandler(o,"change",function(e){var t,i;w._changeFromUser&&(e.args,i=e.args.oldValue,t=l.val("date"),0<(i=new _.jqx.date(t)-new _.jqx.date(i))&&(i=1e4*i,i=_.jqx.timeSpan(i),i=new _.jqx.date(e.args.newValue).add(i),l.val(i.toDate())))}),w.addHandler(l,"change",function(e){var t;w._changeFromUser&&(e.args,t=e.args.oldValue,e=l.val("date"),o.val("date")>=e&&l.val(t))});t=_("<div></div>");e.append(t);var n=_("<div class='"+w._editDialogLabel()+"'>"+w.schedulerLocalization.editDialogAllDayString+"</div>").appendTo(t),d=_("<div class='"+w._editDialogField()+"'></div>").appendTo(t),r=_("<div style='top: 8px; position:relative;'></div>").appendTo(d);r.jqxCheckBox({rtl:w.rtl,width:25,theme:w.theme}),w.editDialogFields.allDay=r,w.editDialogFields.allDayLabel=n,w.editDialogFields.allDayContainer=t,w.addHandler(t,"change",function(e){e.args.checked?(l.jqxDateTimeInput({showTimeButton:!1,formatString:w.editDialogDateFormatString}),o.jqxDateTimeInput({showTimeButton:!1,formatString:w.editDialogDateFormatString})):(l.jqxDateTimeInput({showTimeButton:!0,formatString:w.editDialogDateTimeFormatString}),o.jqxDateTimeInput({showTimeButton:!0,formatString:w.editDialogDateTimeFormatString}))}),_.jqx.scheduler.utilities.getStartOfDay(f).equals(f)&&_.jqx.scheduler.utilities.getEndOfDay(D).equals(D)&&w.editDialogFields.allDay.val(!0),(0<=w._views[w._view].type.indexOf("month")||f&&f.equals(D)||D&&D.equals(_.jqx.scheduler.utilities.getEndOfDay(D))&&f&&f.equals(_.jqx.scheduler.utilities.getStartOfDay(f)))&&w.editDialogFields.allDay.val(!0);i=_("<div></div>");e.append(i);var a=_("<div class='"+w._editDialogLabel()+"'>"+w.schedulerLocalization.editDialogTimeZoneString+"</div>").appendTo(i),d=_("<div class='"+w._editDialogField()+"'></div>").appendTo(i),r=_("<div></div>").appendTo(d),s=new Array;s.push({displayName:w.schedulerLocalization.editDialogSelectTimeZoneString,id:null}),s=s.concat(w.timeZones);for(var c=0;c<s.length;c++){var u=s[c],h=u.displayName.indexOf(")");h=0<=h?u.displayName.substring(2+h):u.displayName,u.searchName=h}r.jqxDropDownList({height:27,rtl:w.rtl,placeHolder:w.schedulerLocalization.editDialogSelectTimeZoneString,width:"100%",theme:w.theme,searchMember:"searchName",source:s,displayMember:"displayName",valueMember:"id"}),w.editDialogFields.timeZone=r,w.editDialogFields.timeZoneLabel=a,w.editDialogFields.timeZoneContainer=i,w.initRepeatPanels(b,e,D.toDate()),w.editDialogFields&&w.editDialogFields.repeatContainer&&(w.editAppointment&&w.editAppointment.rootAppointment?(w.editDialogFields.repeatContainer.hide(),w.editDialogFields.repeatPanel.hide()):(w.editDialogFields.repeatContainer.show(),w.editDialogFields.repeatPanel.show()));n=_("<div></div>");e.append(n);t=_("<div class='"+w._editDialogLabel()+"'>"+w.schedulerLocalization.editDialogDescriptionString+"</div>").appendTo(n),d=_("<div class='"+w._editDialogField()+"'></div>").appendTo(n),r=_("<textarea type='text' resizable='off' style='position:relative; top: 3px; padding:3px;'></textarea>").appendTo(d);r.jqxInput({rtl:w.rtl,height:40,width:"100%",theme:w.theme}),r.css("box-sizing","border-box"),w.editDialogFields.description=r,w.editDialogFields.descriptionLabel=t,w.editDialogFields.descriptionContainer=n;a=_("<div></div>");e.append(a);i=_("<div class='"+w._editDialogLabel()+"'>"+w.schedulerLocalization.editDialogColorString+"</div>").appendTo(a),d=_("<div class='"+w._editDialogField()+"'></div>").appendTo(a),r=_("<div></div>").appendTo(d);r.jqxDropDownList({height:27,rtl:w.rtl,selectedIndex:-1,placeHolder:w.schedulerLocalization.editDialogColorPlaceHolderString,selectionRenderer:function(e,t){if(t<0)return e.css("top","4px"),e.css("position","relative"),e[0].outerHTML;e="";return e+="<div style='margin-top: 2px; float: left; border-radius: 3px; width: 96%; height: 20px; border: none; background:"+w.colors[t]+"; margin-left: 2%;'></div>"},renderer:function(e){if(-1==e)return"";var t="";return t+="<div style='margin-top: 1px; float: left; border-radius: 3px; width: 96%; height: 20px; border: none; background:"+w.colors[e]+"; margin-left: 2%;'></div>"},source:w.colors,width:"100%",theme:w.theme}),w.editDialogFields.color=r,w.editDialogFields.colorLabel=i,w.editDialogFields.colorContainer=a;t=_("<div></div>");e.append(t);n=_("<div class='"+w._editDialogLabel()+"'>"+w.schedulerLocalization.editDialogStatusString+"</div>").appendTo(t),d=_("<div class='"+w._editDialogField()+"'></div>").appendTo(t),r=_("<div></div>").appendTo(d);r.jqxDropDownList({height:27,rtl:w.rtl,selectedIndex:2,autoDropDownHeight:!0,source:w.schedulerLocalization.editDialogStatuses,width:"100%",theme:w.theme}),w.editDialogFields.status=r,w.editDialogFields.statusLabel=n,w.editDialogFields.statusContainer=t;i=_("<div></div>");e.append(i);for(var a=_("<div class='"+w._editDialogLabel()+"'>"+w.schedulerLocalization.editDialogResourceIdString+"</div>").appendTo(i),d=_("<div class='"+w._editDialogField()+"'></div>").appendTo(i),r=_("<div></div>").appendTo(d),p=new Array,c=0;c<w._resources.length;c++)p.push(w._resources[c]);n=!0;10<p.length&&(n=!1),r.jqxDropDownList({height:27,rtl:w.rtl,source:p,selectedIndex:0,autoDropDownHeight:n,width:"100%",theme:w.theme}),w.editDialogFields.resource=r,w.editDialogFields.resourceLabel=a,w.editDialogFields.resourceContainer=i,0==p.length&&i.hide(),!g&&x&&w.editDialogFields.resource.val(x.resourceId);t=_("<div></div>");e.append(t);var d=_("<div style='width:100%;' class='"+w._editDialogField()+"'></div>").appendTo(t),n=_("<button style='margin-left: 5px; float:right;'>"+w.schedulerLocalization.editDialogCancelString+"</button>").appendTo(d),r=_("<button style='margin-left: 5px; float:right;'>"+w.schedulerLocalization.editDialogDeleteString+"</button>").appendTo(d),a=_("<button style='display: none; margin-left: 5px; float:right;'>"+w.schedulerLocalization.editDialogRepeatDeleteSeriesString+"</button>").appendTo(d),i=_("<button style='display: none; margin-left: 5px; float:right;'>"+w.schedulerLocalization.editDialogRepeatDeleteString+"</button>").appendTo(d),t=_("<button style='margin-left: 5px; float:right;'>"+w.schedulerLocalization.editDialogSaveString+"</button>").appendTo(d),y=_("<button style='display: none; margin-left: 5px; float:right;'>"+w.schedulerLocalization.editDialogRepeatSaveSeriesString+"</button>").appendTo(d),m=_("<button style='display: none; margin-left: 5px; float:right;'>"+w.schedulerLocalization.editDialogRepeatSaveString+"</button>").appendTo(d);w.isTouchDevice(),r.jqxButton({rtl:w.rtl,theme:w.theme}),a.jqxButton({rtl:w.rtl,theme:w.theme}),i.jqxButton({rtl:w.rtl,theme:w.theme}),t.jqxButton({rtl:w.rtl,theme:w.theme}),n.jqxButton({rtl:w.rtl,theme:w.theme}),y.jqxButton({rtl:w.rtl,theme:w.theme}),m.jqxButton({rtl:w.rtl,theme:w.theme}),y.hide(),m.hide(),t.addClass("primary"),m.addClass("primary"),y.addClass("primary"),r.addClass("jqx-danger"),w.editDialogFields.saveOccurrenceButton=m,w.editDialogFields.saveSeriesButton=y,w.editDialogFields.saveButton=t,w.editDialogFields.cancelButton=n,w.editDialogFields.deleteButton=r,w.editDialogFields.deleteSeriesButton=a,w.editDialogFields.deleteExceptionsButton=i,w.editDialogFields.buttons=d,w.addHandler(r,"click",function(){b.jqxWindow("close"),w.overlay.hide(),w._deleteAppointment(w.editAppointment)}),w.addHandler(n,"click",function(){b.jqxWindow("close"),w.overlay.hide()}),w.addHandler(m,"click",function(){if(w.editAppointment.isException()){for(var e=(w.editAppointment.rootAppointment||w.editAppointment).exceptions,t=0;t<e.length;t++)if(e[t].occurrenceFrom.equals(w.editAppointment.occurrenceFrom)){e[t]=w.editAppointment;break}}else null!=w.editAppointment.rootAppointment?(w.editAppointment.rootAppointment.exceptions.push(w.editAppointment),w.editAppointment.rootAppointment.recurrenceException.push(w.editAppointment.occurrenceFrom)):(w.editAppointment.exceptions.push(w.editAppointment),w.editAppointment.recurrenceException.push(w.editAppointment.occurrenceFrom));w._setAppointmentPropertiesFromDialog(w.editAppointment,"occurrence")&&(w.changedAppointments[w.editAppointment.id]={type:"Update",appointment:w.editAppointment.boundAppointment},w._raiseEvent("appointmentChange",{appointment:w.editAppointment.boundAppointment}),w._renderrows(),b.jqxWindow("close"),w.overlay.hide())}),w.addHandler(y,"click",function(){var e=w.editAppointment;e.rootAppointment&&(e=e.rootAppointment),w._setAppointmentPropertiesFromDialog(e,"series")&&(w.changedAppointments[e.id]={type:"Update",appointment:e.boundAppointment},w._raiseEvent("appointmentChange",{appointment:e.boundAppointment}),w._renderrows(),b.jqxWindow("close"),w.overlay.hide())}),w.addHandler(t,"click",function(){var e,t=!0;null==w.editAppointment?(e=new _.jqx.scheduler.appointment,(t=w._setAppointmentPropertiesFromDialog(e,"none"))&&w.addAppointment(e)):w.editAppointment.rootAppointment?(m.trigger("click"),t=!1):w.editAppointment.isRecurrentAppointment()?(y.trigger("click"),t=!1):(t=w._setAppointmentPropertiesFromDialog(w.editAppointment,"none"))&&(w.changedAppointments[w.editAppointment.id]={type:"Update",appointment:w.editAppointment?w.editAppointment.boundAppointment:null},w._raiseEvent("appointmentChange",{appointment:w.editAppointment.boundAppointment}),w._renderrows()),t&&(b.jqxWindow("close"),w.overlay.hide())}),w.addHandler(b,"close",function(e){w.overlay.hide(),w.focus(),w.editDialogClose&&w.editDialogClose(b,w.editDialogFields,w.editAppointment?w.editAppointment.boundAppointment:null),w._raiseEvent("editDialogClose",{dialog:b,fields:w.editDialogFields,appointment:w.editAppointment?w.editAppointment.boundAppointment:null})}),w.editDialogCreate&&w.editDialogCreate(b,w.editDialogFields,w.editAppointment),w._raiseEvent("editDialogCreate",{dialog:b,fields:w.editDialogFields,appointment:w.editAppointment?w.editAppointment.boundAppointment:null}),b.jqxWindow({height:e[0].scrollHeight+40})}}),w._editDialog=b),w.dialogOpenings||(w.dialogOpenings=0),w.removeHandler(w._editDialog,"open"),w.addHandler(w._editDialog,"open",function(e){if(w.editDialogOpen&&w.editDialogFields&&1==w.editDialogOpen(b,w.editDialogFields,w.editAppointment?w.editAppointment.boundAppointment:null))return;w.rtl&&(w._editDialog.find(".jqx-scheduler-edit-dialog-label").addClass(w.toThemeProperty("jqx-scheduler-edit-dialog-label-rtl")),w._editDialog.find(".jqx-scheduler-edit-dialog-field").addClass(w.toThemeProperty("jqx-scheduler-edit-dialog-field-rtl")),w.editDialogFields.saveOccurrenceButton.css("float","left"),w.editDialogFields.saveSeriesButton.css("float","left"),w.editDialogFields.saveButton.css("float","left"),w.editDialogFields.cancelButton.css("float","left"),w.editDialogFields.deleteButton.css("float","left"),w.editDialogFields.deleteSeriesButton.css("float","left"),w.editDialogFields.deleteExceptionsButton.css("float","left"),w.editDialogFields.buttons.css("width","auto"),w.editDialogFields.allDay.css("float","right")),setTimeout(function(){var e=w.editAppointment?w.editAppointment.boundAppointment:null;w.editAppointment&&w.editAppointment.rootAppointment&&(e=w.editAppointment.rootAppointment.boundAppointment),w._raiseEvent("editDialogOpen",{dialog:w._editDialog,fields:w.editDialogFields,appointment:e})});function t(){setTimeout(function(){n?w.editDialogFields.deleteButton.focus():(w.editDialogFields.subject.focus(),w.editDialogFields.subject.select())},1)}var i=null==w.editAppointment?w.schedulerLocalization.editDialogCreateTitleString:w.schedulerLocalization.editDialogTitleString;if(w._editDialog.jqxWindow({title:i}),0==w.dialogOpenings&&!g)return w.dialogOpenings++,w.isTouchDevice()||(w._editDialog.jqxWindow({height:150}),w._editDialog.jqxWindow({height:_(w._editDialog.children())[1].scrollHeight+40})),w.editDialogFields.deleteButton.hide(),void t();w.editDialogFields&&(w.editDialogFields.subject.val(""),w.editDialogFields.location.val(""),t(),w.editDialogFields.resetExceptions.val(!1),w.editDialogFields.description.val(""),g||w.editDialogFields.deleteButton.hide(),g?(w.dialogOpenings++,w.editDialogFields.deleteButton.show(),w.editDialogFields.subject.val(g.subject),w.editDialogFields.location.val(g.location),w.editDialogFields.description.val(g.description),w.editDialogFields.timeZone.val(g.timeZone),0<=w.colors.indexOf(g.borderColor)?w.editDialogFields.color.val(g.borderColor):w.editDialogFields.color.jqxDropDownList("clearSelection"),w.editDialogFields.allDay.val(g.allDay),w.editDialogFields.resource.val(g.resourceId),w.editDialogFields.status.val(g.status),g.timeZone&&(g.from=g.from.toTimeZone(g.timeZone),g.to=g.to.toTimeZone(g.timeZone)),f=g.from,D=g.to,_.jqx.scheduler.utilities.getStartOfDay(f).equals(f)&&_.jqx.scheduler.utilities.getEndOfDay(D).equals(D)&&w.editDialogFields.allDay.val(!0),w._setAppointmentPropertiesToDialog(g,f,D,x?x.resourceId:null)):(w.editDialogFields.saveButton.show(),w._setAppointmentPropertiesToDialog(null,f,D,x?x.resourceId:null)),f&&D&&(w._changeFromUser=!1,w.editDialogFields.from.val(f.toDate()),w.editDialogFields.to.val(D.toDate()),w._changeFromUser=!0),w.isTouchDevice()||(w._editDialog.jqxWindow({height:150}),w._editDialog.jqxWindow({height:_(w._editDialog.children())[1].scrollHeight+40})))}),w.removeHandler(w._editDialog,"keydown"),w.addHandler(w._editDialog,"keydown",function(e){if(w.editDialogKeyDown){var t=w.editDialogKeyDown(b,w.editDialogFields,w.editAppointment,e);if(null!=t)return t}if(13==e.keyCode){if(_(document.activeElement).ischildof(w._editDialog)){if("button"==document.activeElement.nodeName.toLowerCase())return!0;(g?g.isException()||g.rootAppointment?w.editDialogFields.saveOccurrenceButton:g.isRecurrentAppointment()?w.editDialogFields.saveSeriesButton:w.editDialogFields.saveButton:w.editDialogFields.saveButton).trigger("click")}}else 27==e.keyCode&&w.editDialogFields.cancelButton.trigger("click")})},openMenu:function(e,t){var i=this;i.menu||i._initMenu();var n;i._views[i._view].type;i.contextMenu&&i.menu&&(i.selectedAppointment?i.menu.jqxMenu("showItem","editAppointment"):i.menu.jqxMenu("hideItem","editAppointment"),arguments.length<2&&(i.selectedAppointment?(e=(n=i.selectedAppointment.coord()).left,t=n.top):i.focusedCell&&(n=_(i.focusedCell).coord()),e=n.left,t=n.top),i.menu.jqxMenu("open",e,t),i._hasOpenedMenu=!0)},closeMenu:function(){var e=this;e.contextMenu&&e.menu&&setTimeout(function(){e.menu.jqxMenu("close")})},closeDialog:function(){this._editDialog.jqxWindow("close")},openDialog:function(e,t){var i=this;i._views[i._view].type;i.selectedJQXAppointment?!1!==i._initDialog(i.selectedJQXAppointment)&&i._openDialog(e,t):(null==i.getSelection()&&(i.focus(),i.focusedCell.setAttribute("data-selected","true"),i._lastSelectedCell=i.focusedCell,i._updateCellsSelection(i.focusedCell)),i._initDialog(),i._openDialog(e,t))},_openDialog:function(e,t){var i,n=this;n._views[n._view].type;n.editDialog&&(i=n.host.coord(),n.overlay.show(),n.overlay.css("z-index",9999999),n.overlay.width(n.host.width()),n.overlay.height(n.host.height()),n.overlay.offset(i),n.isTouchDevice()?(n._editDialog.jqxWindow("move",i.left,i.top),n._editDialog.jqxWindow({draggable:!1,maxWidth:n.host.width(),maxHeight:n.host.height()}),n._editDialog.jqxWindow({width:n.host.width(),height:n.host.height()}),n._editDialog.jqxWindow("open"),n._editDialog.jqxWindow("move",i.left,i.top)):(null!=e&&null!=t?n._editDialog.jqxWindow("move",e,t):((t=n._editDialog.height())<400&&(t=400),t=i.top+n.host.height()/2-t/2,i=i.left+n.host.width()/2-n._editDialog.width()/2,n._editDialog.jqxWindow("move",i,t)),n._editDialog.jqxWindow("open")),setTimeout(function(){n.overlay.css("z-index",999)},50))},_setAppointmentPropertiesFromDialog:function(e,b){var w=this;return function(e){var t=w._views[w._view].type,i=(w._views[w._view],w.editDialogFields.from.val("date")),n=w.editDialogFields.to.val("date");if(n<i)return w.editDialogFields.from.jqxDateTimeInput("focus"),!1;if(i==n)return 0<=t.indexOf("month");e.resourceId=w.editDialogFields.resource.val(),"none"==w.editDialogFields.resourceContainer.css("display")&&(e.resourceId=""),e.description=w.editDialogFields.description.val(),e.allDay=w.editDialogFields.allDay.val(),e.status=w.editDialogFields.status.val(),e.location=w.editDialogFields.location.val(),e.timeZone=w.editDialogFields.timeZone.val(),""==e.timeZone&&""!=w.timeZone&&(e.timeZone=w.timeZone),e.from=new _.jqx.date(i,e.timeZone),e.to=new _.jqx.date(n,e.timeZone),w.timeZone?(e.from=e.from.toTimeZone(w.timeZone),e.to=e.to.toTimeZone(w.timeZone)):(e.from=e.from.toTimeZone(null),e.to=e.to.toTimeZone(null)),e.allDay&&(e.from=_.jqx.scheduler.utilities.getStartOfDay(e.from),e.to=_.jqx.scheduler.utilities.getEndOfDay(e.to)),w.editDialogFields.color.val()&&(a=w.getAppointmentColors(w.editDialogFields.color.val()),e.color=a.color,e.background=a.background,e.borderColor=a.border),e.subject=w.editDialogFields.subject.val();var i=w.editDialogFields.repeat.jqxDropDownList("selectedIndex"),r=new _.jqx.scheduler.recurrencePattern,a=w.editDialogFields.repeatEndPanel;switch(r.timeZone=w.timeZone,r.from=e.from.clone(),"occurrence"==b&&e.rootAppointment&&(r.from=e.rootAppointment.from.clone()),w.editDialogFields.resetExceptions.val()&&(e.exceptions=new Array,e.recurrenceException=new Array),a.repeatEndNever.val()?(r.count=1e3,r.to=new _.jqx.date(9999,12,31)):a.repeatEndAfter.val()?(r.count=a.repeatEndAfterValue.val(),r.to=new _.jqx.date(9999,12,31)):a.repeatEndOn.val()&&(r.count=1e3,n=new _.jqx.date(a.repeatEndOnValue.jqxDateTimeInput("getDate"),w.timeZone),r.to=n),i){case 0:default:e.clearRecurrence();break;case 1:var o=w.editDialogFields.daily.repeatDayInterval.val();r.interval=o,r.freq="daily";break;case 2:var n=w.editDialogFields.weekly,o=n.repeatWeekInterval.val(),l=[{Sunday:0},{Monday:1},{Tuesday:2},{Wednesday:3},{Thursday:4},{Friday:5},{Saturday:6}],d=n.repeatDays,s=new Array;r.weekDays={};for(var c=0;c<7;c++)d[c].val()&&(0==c?s.push(6):s.push(c-1),_.extend(r.weekDays,l[c]));r.freq="weekly",r.byweekday=s,r.interval=o;break;case 3:var u=w.editDialogFields.monthly,o=u.repeatMonth.val();if(u.repeatMonthDayBool.val())r.day=u.repeatMonthDay.val(),r.bymonthday=new Array,r.bymonthday.push(r.day);else{var h=u.repeatDayOfWeek.jqxDropDownList("selectedIndex"),p=new Array;0==h?h=6:h--;var y="";switch(u.repeatDayOfWeekType.jqxDropDownList("selectedIndex")){case 0:y=1;break;case 1:y=2;break;case 2:y=3;break;case 3:y=4;break;case 4:y=-1}p.push([h,y]),r.bynweekday=p}r.freq="monthly",r.interval=o;break;case 4:u=w.editDialogFields.yearly,o=u.repeatYear.val();if(u.repeatYearBool.val())r.day=u.repeatYearDay.val(),r.month=u.repeatYearMonth.jqxDropDownList("selectedIndex"),r.bymonth=new Array,r.bymonth.push(1+r.month),r.byyearday=new Array,r.byyearday.push(r.day);else{r.month=u.repeatDayOfWeekMonth.jqxDropDownList("selectedIndex"),r.bymonth=new Array,r.bymonth.push(1+r.month);h=u.repeatDayOfWeek.jqxDropDownList("selectedIndex"),p=new Array;0==h?h=6:h--;y="";switch(u.repeatDayOfWeekType.jqxDropDownList("selectedIndex")){case 0:y=1;break;case 1:y=2;break;case 2:y=3;break;case 3:y=4;break;case 4:y=-1}p.push([h,y]),r.bynweekday=p}r.freq="yearly",r.interval=o}e.rootAppointment?e.rootAppointment.recurrencePattern=r:0<i&&(e.recurrencePattern=r);var m,g={},f={};for(m in w.appointmentDataFields){var D=w.appointmentDataFields[m],v=e[m];g[m]=v,"from"!=m&&"to"!=m||(v=v.toDate()),f[D]=v}return g.originalData=f,(g.jqxAppointment=e).boundAppointment=g,!0}(e)},_setAppointmentPropertiesToDialog:function(e,t,r,i){var h=this;if(!function(){var e=h.editDialogFields.repeatEndPanel;e.repeatEndNever.jqxRadioButton({checked:!0}),e.repeatEndAfter.jqxRadioButton({checked:!1}),e.repeatEndAfterValue.val(1),e.repeatEndOnValue.val(void 0);var t;r.toDate();if(h.editDialogFields.daily&&h.editDialogFields.daily.repeatDayInterval.val(1),h.editDialogFields.weekly){for(var i=h.editDialogFields.weekly,n=0;n<i.repeatDays.length;n++)1==n?i.repeatDays[n].jqxCheckBox({checked:!0}):i.repeatDays[n].jqxCheckBox({checked:!1});i.repeatWeekInterval.val(1)}h.editDialogFields.monthly&&((t=h.editDialogFields.monthly).repeatDayOfWeek.jqxDropDownList("selectIndex",1),t.repeatDayOfWeekBool.jqxRadioButton({checked:!1}),t.repeatDayOfWeekType.jqxDropDownList("selectIndex",0),t.repeatMonthDayBool.jqxRadioButton({checked:!0}),t.repeatMonthDay.val(1),t.repeatMonth.val(1)),h.editDialogFields.yearly&&((t=h.editDialogFields.yearly).repeatDayOfWeekMonth.jqxDropDownList("selectIndex",0),t.repeatDayOfWeekBool.jqxRadioButton({checked:!1}),t.repeatDayOfWeekType.jqxDropDownList("selectIndex",0),t.repeatDayOfWeek.jqxDropDownList("selectIndex",1),t.repeatYear.val(1),t.repeatYearMonth.jqxDropDownList("selectIndex",0),t.repeatYearDay.val(1),t.repeatYearBool.val(!0))}(),e&&e.isRecurrentAppointment()?e.rootAppointment?h.editDialogFields.resetExceptionsContainer.hide():h.editDialogFields.resetExceptionsContainer.show():e&&(h.editDialogFields.resetExceptionsContainer.hide(),h.editDialogFields.repeat.jqxDropDownList("selectIndex",0)),!e)return h.editDialogFields.timeZone.jqxDropDownList("clearSelection"),i?h.editDialogFields.resource.val(i):h.editDialogFields.resource.jqxDropDownList("selectIndex",0),h.editDialogFields.allDay.val(!1),(0<=h._views[h._view].type.indexOf("month")||t&&t.equals(r)||r&&r.equals(_.jqx.scheduler.utilities.getEndOfDay(r))&&t&&t.equals(_.jqx.scheduler.utilities.getStartOfDay(t)))&&h.editDialogFields.allDay.val(!0),h.editDialogFields.color.jqxDropDownList("clearSelection"),h.editDialogFields.description.val(""),h.editDialogFields.subject.val(""),void h.editDialogFields.repeat.jqxDropDownList("selectIndex",0);!function(e){var t=e.recurrencePattern;if(e.rootAppointment&&(t=e.rootAppointment.recurrencePattern),null!=t){var i=t.freq,e="yearly"==i?4:"monthly"==i?3:"weekly"==i?2:"daily"==i?1:0,i=h.editDialogFields.repeatEndPanel;switch(1e3!=t.count?(i.repeatEndNever.jqxRadioButton({checked:!1}),i.repeatEndAfter.jqxRadioButton({checked:!0}),i.repeatEndAfterValue.val(t.count)):9999!=t.to.year()?(i.repeatEndOn.jqxRadioButton({checked:!0}),i.repeatEndOnValue.val(t.to.toDate())):i.repeatEndNever.jqxRadioButton({checked:!0}),h.editDialogFields.repeat.jqxDropDownList("selectIndex",e),e){case 1:var n=t.interval;h.editDialogFields.daily.repeatDayInterval.val(n);break;case 2:var n=t.interval,r=h.editDialogFields.weekly;r.repeatWeekInterval.val(n);for(var a=t.byweekday,o=0;o<7;o++)(l=r.repeatDays[o]).val(!1);for(var l,o=0;o<a.length;o++)(6==(l=a[o])?r.repeatDays[0]:r.repeatDays[l+1]).val(!0);break;case 3:var d=h.editDialogFields.monthly;if(d.repeatMonth.val(t.interval),t.bymonthday&&0<t.bymonthday.length)d.repeatMonthDayBool.jqxRadioButton({checked:!0}),d.repeatMonthDay.val(t.day);else{d.repeatDayOfWeekBool.jqxRadioButton({checked:!0});var s=(u=t.bynweekday)[0][0];7==++s&&(s=0),d.repeatDayOfWeek.jqxDropDownList("selectIndex",s);var c="";switch(u[0][1]){case 1:c=0;break;case 2:c=1;break;case 3:c=2;break;case 4:c=3;break;case-1:c=4}d.repeatDayOfWeekType.jqxDropDownList("selectIndex",c)}break;case 4:d=h.editDialogFields.yearly;if(t.byyearday&&0<t.byyearday.length&&(d.repeatYearDay.val(t.byyearday[0]),d.repeatYearBool.val(!0)),t.bymonth&&0<t.bymonth.length&&(d.repeatYearMonth.jqxDropDownList("selectIndex",t.bymonth[0]-1),d.repeatYearBool.val(!0)),!t.byyearday||t.byyearday&&0==t.byyearday.length){d.repeatDayOfWeekMonth.jqxDropDownList("selectIndex",t.bymonth[0]-1),d.repeatDayOfWeekBool.jqxRadioButton({checked:!0});var u,s=(u=t.bynweekday)[0][0];7==++s&&(s=0),d.repeatDayOfWeek.jqxDropDownList("selectIndex",s);c="";switch(u[0][1]){case 1:c=0;break;case 2:c=1;break;case 3:c=2;break;case 4:c=3;break;case-1:c=4}d.repeatDayOfWeekType.jqxDropDownList("selectIndex",c)}}}}(e)}}),_.jqx.scheduler.column=function(i,e){return this.owner=i,this.datafield=null,this.displayfield=null,this.text="",this.sortable=!0,this.editable=!0,this.hidden=!1,this.hideable=!0,this.groupable=!0,this.renderer=null,this.cellsRenderer=null,this.columntype=null,this.cellsFormat="",this.align="center",this.cellsalign="center",this.width="auto",this.minwidth=60,this.maxwidth="auto",this.pinned=!1,this.visibleindex=-1,this.filterable=!0,this.filter=null,this.resizable=!0,this.draggable=!0,this.initeditor=null,this.createeditor=null,this.destroyeditor=null,this.geteditorvalue=null,this.autoCellHeight=!0,this.validation=null,this.classname="",this.cellclassname="",this.rendered=null,this.exportable=!0,this.nullable=!0,this.columngroup=null,this.columntype="textbox",this.getcolumnproperties=function(){return{nullable:this.nullable,sortable:this.sortable,hidden:this.hidden,groupable:this.groupable,width:this.width,align:this.align,editable:this.editable,minwidth:this.minwidth,maxwidth:this.maxwidth,resizable:this.resizable,datafield:this.datafield,text:this.text,exportable:this.exportable,cellsalign:this.cellsalign,pinned:this.pinned,cellsFormat:this.cellsFormat,columntype:this.columntype,classname:this.classname,cellclassname:this.cellclassname,menu:this.menu}},this.setproperty=function(e,t){var i;this[e]?(i=this[e],this[e]=t,this.owner._columnPropertyChanged(this,e,t,i)):this[e.toLowerCase()]&&(i=this[e.toLowerCase()],this[e.toLowerCase()]=t,this.owner._columnPropertyChanged(this,e.toLowerCase(),t,i))},this._initfields=function(e){if(null!=e)if(_.jqx.hasProperty(e,"dataField")&&(this.datafield=_.jqx.get(e,"dataField")),_.jqx.hasProperty(e,"displayField")?this.displayfield=_.jqx.get(e,"displayField"):this.displayfield=this.datafield,_.jqx.hasProperty(e,"columnType")&&(this.columntype=_.jqx.get(e,"columnType")),_.jqx.hasProperty(e,"validation")&&(this.validation=_.jqx.get(e,"validation")),_.jqx.hasProperty(e,"autoCellHeight")&&(this.autoCellHeight=_.jqx.get(e,"autoCellHeight")),_.jqx.hasProperty(e,"text")?this.text=_.jqx.get(e,"text"):this.text=this.displayfield,_.jqx.hasProperty(e,"sortable")&&(this.sortable=_.jqx.get(e,"sortable")),_.jqx.hasProperty(e,"hidden")&&(this.hidden=_.jqx.get(e,"hidden")),_.jqx.hasProperty(e,"groupable")&&(this.groupable=_.jqx.get(e,"groupable")),_.jqx.hasProperty(e,"renderer")&&(this.renderer=_.jqx.get(e,"renderer")),_.jqx.hasProperty(e,"align")&&(this.align=_.jqx.get(e,"align")),_.jqx.hasProperty(e,"cellsAlign")&&(this.cellsalign=_.jqx.get(e,"cellsAlign")),_.jqx.hasProperty(e,"cellsFormat")&&(this.cellsFormat=_.jqx.get(e,"cellsFormat")),_.jqx.hasProperty(e,"width")&&(this.width=_.jqx.get(e,"width")),_.jqx.hasProperty(e,"minWidth")&&(this.minwidth=_.jqx.get(e,"minWidth")),_.jqx.hasProperty(e,"maxWidth")&&(this.maxwidth=_.jqx.get(e,"maxWidth")),_.jqx.hasProperty(e,"cellsRenderer")&&(this.cellsRenderer=_.jqx.get(e,"cellsRenderer")),_.jqx.hasProperty(e,"columnType")&&(this.columntype=_.jqx.get(e,"columnType")),_.jqx.hasProperty(e,"pinned")&&(this.pinned=_.jqx.get(e,"pinned")),_.jqx.hasProperty(e,"filterable")&&(this.filterable=_.jqx.get(e,"filterable")),_.jqx.hasProperty(e,"filter")&&(this.filter=_.jqx.get(e,"filter")),_.jqx.hasProperty(e,"resizable")&&(this.resizable=_.jqx.get(e,"resizable")),_.jqx.hasProperty(e,"draggable")&&(this.draggable=_.jqx.get(e,"draggable")),_.jqx.hasProperty(e,"editable")&&(this.editable=_.jqx.get(e,"editable")),_.jqx.hasProperty(e,"initEditor")&&(this.initeditor=_.jqx.get(e,"initEditor")),_.jqx.hasProperty(e,"createEditor")&&(this.createeditor=_.jqx.get(e,"createEditor")),_.jqx.hasProperty(e,"destroyEditor")&&(this.destroyeditor=_.jqx.get(e,"destroyEditor")),_.jqx.hasProperty(e,"getEditorValue")&&(this.geteditorvalue=_.jqx.get(e,"getEditorValue")),_.jqx.hasProperty(e,"className")&&(this.classname=_.jqx.get(e,"className")),_.jqx.hasProperty(e,"cellClassName")&&(this.cellclassname=_.jqx.get(e,"cellClassName")),_.jqx.hasProperty(e,"rendered")&&(this.rendered=_.jqx.get(e,"rendered")),_.jqx.hasProperty(e,"exportable")&&(this.exportable=_.jqx.get(e,"exportable")),_.jqx.hasProperty(e,"nullable")&&(this.nullable=_.jqx.get(e,"nullable")),_.jqx.hasProperty(e,"columnGroup")&&(this.columngroup=_.jqx.get(e,"columnGroup")),!e instanceof String&&"string"!=typeof e)for(var t in e)if(!this.hasOwnProperty(t)&&!this.hasOwnProperty(t.toLowerCase()))throw i.host.remove(),new Error("jqxScheduler: Invalid property name - "+t+".")},this._initfields(e),this},_.jqx.schedulerDataCollection=function(e){return this.records=new Array,this.owner=e,this.updating=!1,this.beginUpdate=function(){this.updating=!0},this.resumeupdate=function(){this.updating=!1},this.clear=function(){this.records=new Array},this.replace=function(e,t){this.records[e]=t},this.isempty=function(e){return null==this.records[e]},this.initialize=function(e){e<1&&(e=1),this.records[e-1]=-1},this.length=function(){return this.records.length},this.indexOf=function(e){return this.records.indexOf(e)},this.add=function(e){return null!=e&&(this.records[this.records.length]=e,!0)},this.insertAt=function(e,t){return null!=e&&null!=e&&(null!=t&&(0<=e&&(e<this.records.length?(this.records.splice(e,0,t),!0):this.add(t))))},this.remove=function(e){if(null==e||null==e)return!1;e=this.records.indexOf(e);return-1!=e&&(this.records.splice(e,1),!0)},this.removeAt=function(e){if(null==e||null==e)return!1;if(e<0)return!1;if(e<this.records.length){this.records[e];return this.records.splice(e,1),!0}return!1},this},_.jqx.scheduler.dataView=function(d){return(this.that=this).scheduler=null,this.records=[],this.rows=[],this.columns=[],this.filters=new Array,this.pagesize=0,this.pagenum=0,this.source=null,this.databind=function(e,t){var i=this;if(_.isArray(e))i.update(e);else{var n=!!e._source,r=null;this._sortData=null,this._sortHierarchyData=null,n?e=(r=e)._source:r=new _.jqx.dataAdapter(e,{autoBind:!1});function a(e){e.originaldata=r.originaldata,e.records=r.records,e.hierarchy=r.hierarchy,e.scheduler.serverProcessing||(e._sortData=null,e._sortfield=null,e._filteredData=null,e._sortHierarchyData=null),e.hierarchy||(e.hierarchy=new Array,r.hierarchy=new Array),r._source.totalrecords?e.totalrecords=r._source.totalrecords:r._source.totalRecords?e.totalrecords=r._source.totalRecords:0!==e.hierarchy.length?e.totalrecords=e.hierarchy.length:e.totalrecords=e.records.length,e.cachedrecords=r.cachedrecords}var o;o=this,r.recordids=[],r.records=new Array,r.cachedrecords=new Array,r.originaldata=new Array,r._options.totalrecords=o.totalrecords,r._options.originaldata=o.originaldata,r._options.recordids=o.recordids,r._options.cachedrecords=new Array,r._options.pagenum=o.pagenum,r._options.pageable=o.pageable,null!=e.type&&(r._options.type=e.type),null!=e.formatdata&&(r._options.formatData=e.formatdata),null!=e.contenttype&&(r._options.contentType=e.contenttype),null!=e.async&&(r._options.async=e.async),null!=e.updaterow&&(r._options.updaterow=e.updaterow),null!=e.addrow&&(r._options.addrow=e.addrow),null!=e.deleterow&&(r._options.deleterow=e.deleterow),0==o.pagesize&&(o.pagesize=10),r._options.pagesize=o.pagesize,this.source=e,void 0!==t&&0;i=this;switch(e.datatype){case"local":case"array":default:null==e.localdata&&(e.localdata=[]),null!=e.localdata&&(r.unbindBindingUpdate(d+i.scheduler.element.id),(!i.scheduler.autoBind&&i.scheduler.isInitialized||i.scheduler.autoBind)&&r.dataBind(),(l=function(){a(i),i.update(r.records)})(),r.bindBindingUpdate(d+i.scheduler.element.id,l));break;case"ics":case"json":case"jsonp":case"xml":case"xhtml":case"script":case"text":case"csv":case"tab":if(null!=e.localdata)return r.unbindBindingUpdate(d+i.scheduler.element.id),(!i.scheduler.autoBind&&i.scheduler.isInitialized||i.scheduler.autoBind)&&r.dataBind(),(l=function(e){a(i),i.update(r.records)})(),void r.bindBindingUpdate(d+i.scheduler.element.id,l);n={},t=r._options.data;r._options.data?_.extend(r._options.data,n):(e.data&&_.extend(n,e.data),r._options.data=n);var l=function(){function e(){a(i),i.update(r.records)}if(_.jqx.browser.msie&&_.jqx.browser.version<9)try{e()}catch(e){}else e()};r.unbindDownloadComplete(d+i.scheduler.element.id),r.bindDownloadComplete(d+i.scheduler.element.id,l),r._source.loaderror=function(e,t,i){l()},(!i.scheduler.autoBind&&i.scheduler.isInitialized||i.scheduler.autoBind)&&r.dataBind(),r._options.data=t}}},this.addFilter=function(e,t){this._sortData=null,this._sortHierarchyData=null;for(var i=-1,n=0;n<this.filters.length;n++)if(this.filters[n].datafield==e){i=n;break}-1==i?this.filters[this.filters.length]={filter:t,datafield:e}:this.filters[i]={filter:t,datafield:e}},this.removeFilter=function(e){this._sortData=null,this._sortHierarchyData=null;for(var t=0;t<this.filters.length;t++)if(this.filters[t].datafield==e){this.filters.splice(t,1);break}},this._compare=function(e,t,i){if(void 0===(e=e)&&(e=null),void 0===(t=t)&&(t=null),null===e&&null===t)return 0;if(null===e&&null!==t)return 1;if(null!==e&&null===t)return 1;if(e=e.toString(),t=t.toString(),_.jqx.dataFormat)if(i&&""!=i)switch(i){case"number":case"int":case"float":return e<t?-1:t<e?1:0;case"date":case"time":return e<t?-1:t<e?1:0;case"string":case"text":e=String(e).toLowerCase(),t=String(t).toLowerCase()}else{if(_.jqx.dataFormat.isNumber(e)&&_.jqx.dataFormat.isNumber(t))return e<t?-1:t<e?1:0;if(_.jqx.dataFormat.isDate(e)&&_.jqx.dataFormat.isDate(t))return e<t?-1:t<e?1:0;_.jqx.dataFormat.isNumber(e)||_.jqx.dataFormat.isNumber(t)||(e=String(e).toLowerCase(),t=String(t).toLowerCase())}try{if(e<t)return-1;if(t<e)return 1}catch(e){}return 0},this._equals=function(e,t){return 0===this._compare(e,t)},this.evaluate=function(e){if(this.scheduler.serverProcessing)return e;var t=new Array;if(this.filters.length){function i(e,t){for(var i=0;i<e.length;i++){var n=e[i];n._visible=!0;for(var r=void 0,a=0;a<this.filters.length;a++)var o=this.filters[a].filter,l=n[this.filters[a].datafield],l=o.evaluate(l),r=null==r?l:"or"==o.operator?r||l:r&&l;n._visible=!1,(r||n.aggregate)&&(n._visible=!0,t.push(n),d[n.uid]=n)}}var d=new Array;if(this._filteredData)this.rows=this._filteredData;else{if(this.source.hierarchy||this.scheduler.source.hierarchy&&0<this.scheduler.source.hierarchy.length){var r=new Array,a=function(e,t){for(var i=0;i<t.length;i++){var n=t[i];r.push(n),n.records&&0<n.records.length&&a(n,n.records)}};a(null,e),i.call(this,r,t);for(var n=0;n<t.length;n++)for(var o=t[n];o.parent;){var l=o.parent;d[l.uid]||(l._visible=!0,d[l.uid]=l),o=l}t=e}else i.call(this,e,t);this._filteredData=t,this.rows=t}}else this.rows=e;return this.rows},this.getid=function(e,t,i){if(0<_(e,t).length)return _(e,t).text();if(this.rows&&""!=e&&null!=e&&0<this.rows.length){null==(r=this.rows[this.rows.length-1][e])&&(r=null);for(var n=1;n<=100;n++)if(!(a=this.scheduler.appointmentsByKey[n+r])){if(this.scheduler&&this.scheduler.treeGrid&&this.scheduler.treescheduler.virtualModeCreateRecords){if(a=this.scheduler.appointmentsByKey["jqx"+r+n])continue;return"jqx"+r+n}return r+n}}if(null!=e&&0<e.toString().length){t=_(t).attr(e);if(null!=t&&0<t.toString().length)return this.scheduler&&this.scheduler.treeGrid&&this.scheduler.treescheduler.virtualModeCreateRecords?"jqx"+t:t}var r;if(this.rows&&0<this.rows.length&&(a=this.scheduler.appointmentsByKey[i])){null==(r=this.rows[this.rows.length-1][e])&&(r="");for(n=1;n<=1e3;n++)if(!(a=this.scheduler.appointmentsByKey[n+r])){if(this.scheduler&&this.scheduler.treeGrid&&this.scheduler.treescheduler.virtualModeCreateRecords){if(a=this.scheduler.appointmentsByKey["jqx"+r+n])continue;return"jqx"+r+n}return r+n}}if(this.scheduler&&this.scheduler.treeGrid&&this.scheduler.treescheduler.virtualModeCreateRecords){if(!(a=this.scheduler.appointmentsByKey["jqx"+i]))return"jqx"+i;for(n=i+1;n<=100;n++){var a=this.scheduler.appointmentsByKey["jqx"+n];if(!a)if(!(a=this.scheduler.appointmentsByKey["jqx"+n]))return"jqx"+n}}return i},this.generatekey=function(){function e(){return 16*(1+Math.random())|0}return""+e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()},this}}(jqxBaseFramework);