!function(h){h.extend(h.jqx._jqxGrid.prototype,{_calculateaggregate:function(e,t,a,r){var s=e.aggregates;if(s=s||t){for(var i=new Array,g=0;g<s.length;g++)"count"!=s[g]&&(i[i.length]=e.cellsformat);if(this.source&&this.source.getAggregatedData)return null==r&&(r=this.getrows()),this.virtualmode&&(r=new Array,h.each(this.source._source.records,function(){r.push(this)})),null!=a&&1!=a?this.source.getAggregatedData([{name:e.datafield,aggregates:s}],this.gridlocalization,r):this.source.getAggregatedData([{name:e.datafield,aggregates:s,formatStrings:i}],this.gridlocalization,r)}return null},getcolumnaggregateddata:function(e,t,a,r){var s=this.getcolumn(e),i=null!=a&&0!=a&&a;if(null==t)return"";a=s.aggregates;s.aggregates=null;i=this._calculateaggregate(s,t,i,r),r={};return i&&(r=i[e]),s.aggregates=a,r},refreshaggregates:function(){this._updatecolumnsaggregates()},renderaggregates:function(){this._updateaggregates()},_updatecolumnaggregates:function(e,t,a){var r,s,i=this;if(!t)return a.children().remove(),a.html(""),void(e.aggregatesrenderer&&(r={},e.aggregates&&(r=this.getcolumnaggregateddata(e.datafield,e.aggregates)),s=e.aggregatesrenderer({},e,a,null),a.html(s)));a.children().remove(),a.html(""),e.aggregatesrenderer?t&&(s=e.aggregatesrenderer(t[e.datafield],e,a,this.getcolumnaggregateddata(e.datafield,t[e.datafield])),a.html(s)):h.each(t,function(){for(r in this){var e=h('<div style="position: relative; margin: 4px; overflow: hidden;"></div>'),t=r,t=i._getaggregatename(t);e.html(t+":"+this[r]),i.rtl&&e.addClass(i.toThemeProperty("jqx-rtl")),a.append(e)}})},_getaggregatetype:function(e){switch(e){case"min":case"max":case"count":case"avg":case"product":case"var":case"varp":case"stdev":case"stdevp":case"sum":return e}var t,a=e;for(t in e){a=t;break}return a},_getaggregatename:function(e){var t=e;switch(e){case"min":t="Min";break;case"max":t="Max";break;case"count":t="Count";break;case"avg":t="Avg";break;case"product":t="Product";break;case"var":t="Var";break;case"stdevp":t="StDevP";break;case"stdev":t="StDev";break;case"varp":t="VarP";case"sum":t="Sum"}if(e===t&&"string"!=typeof t)for(var a in e){t=a;break}return t},_updatecolumnsaggregates:function(){var e=this.getrows(),t=this.columns.records.length;if(null!=this.statusbar[0].cells)for(var a=0;a<t;a++){var r=h(this.statusbar[0].cells[a]),s=this.columns.records[a],i=this._calculateaggregate(s,null,!0,e);this._updatecolumnaggregates(s,i,r)}},_updateaggregates:function(){var e=h('<div style="position: relative;" id="statusrow'+this.element.id+'"></div>'),t=0,a=this.columns.records.length,r=this.toThemeProperty("jqx-grid-cell");this.rtl&&(r+=" "+this.toThemeProperty("jqx-grid-cell-rtl"),t=-1),r+=" "+this.toThemeProperty("jqx-grid-cell-pinned");var s=a+10,i=new Array;this.statusbar[0].cells=i;for(var g=this.getrows(),n=0;n<a;n++){var l=this.columns.records[n],o=this._calculateaggregate(l,l.aggregates,!0,g),c=l.width;c<l.minwidth&&(c=l.minwidth),c>l.maxwidth&&(c=l.maxwidth);var d=r;l.cellsalign&&(d+=" "+this.toThemeProperty("jqx-"+l.cellsalign+"-align"));d=h('<div style="overflow: hidden; position: absolute; height: 100%;" class="'+d+'"></div>');e.append(d),d.css("left",t),this.rtl?d.css("z-index",s++):d.css("z-index",s--),d.width(c),d[0].left=t,l.hidden&&l.hideable?d.css("display","none"):t+=c,i[i.length]=d[0],this._updatecolumnaggregates(l,o,d)}h.jqx.browser.msie&&h.jqx.browser.version<8&&e.css("z-index",s--),e.width(parseFloat(t)+2),e.height(this.statusbarheight),this.statusbar.children().remove(),this.statusbar.append(e),this.statusbar.removeClass(this.toThemeProperty("jqx-widget-header")),this.statusbar.addClass(r),this.statusbar.css("border-bottom-color","transparent"),this.statusbar.css("border-top-width","1px"),this.rtl&&"hidden"!=this.hScrollBar.css("visibility")&&this._renderhorizontalscroll(),this._arrange()}})}(jqxBaseFramework);