!function(i){var t=0;i.jqx.jqxWidget("jqxTouch","",{}),i.extend(i.jqx._jqxTouch.prototype,{defineInstance:function(){this.swipeMin=50,this.swipeMax=500,this.swipeDelay=1e3,this.tapHoldDelay=750,this.swipeMaxVerticalDisance=100,this.swipeMaxHorizontalDisance=100,this.orientationChangeEnabled=!0,this._eventsMap={mousedown:i.jqx.mobile.getTouchEventName("touchstart"),mouseup:i.jqx.mobile.getTouchEventName("touchend"),mousemove:i.jqx.mobile.getTouchEventName("touchmove")},this._swipeLocked=!1,this._rotationInterval=200,this._events=["tap","taphold","swipe","swipeleft","swiperight","swipetop","swipebottom","orientationchange"],this._instanceId=-1},createInstance:function(){t+=1,this._instanceId=t,this._isTouchDevice=i.jqx.mobile.isTouchDevice(),this._defineRotateHandler()},refresh:function(){this._removeEventListeners(),this._addEventListeners()},_defineRotateHandler:function(){var t=this;this._rotateHandler||(this._rotateHandler=function(){t._checkOrientation()})},_getEvent:function(t){return this._isTouchDevice&&(t=this._eventsMap[t]),t+this._getEventNamespace()},_getEventNamespace:function(){return".swipe"+this._instanceId},_removeEventListeners:function(){clearInterval(this._rotateInterval),this.removeHandler(i(document),this._getEvent("mouseup")),this.removeHandler(this.host,this._getEvent("mousedown")),this.removeHandler(this.host,this._getEvent("mousemove")),window.removeEventListener&&(window.removeEventListener("resize",this._rotateHandler),window.removeEventListener("orientationchange",this._rotateHandler))},_addEventListeners:function(){var e=this;this.addHandler(this.host,this._getEvent("mouseup"),function(t){e._resetSwipe(),e._resetTap()}),this.addHandler(this.host,this._getEvent("mousedown"),function(t){e._initSwipe(t),e._initTap(t)}),this.addHandler(this.host,this._getEvent("mousemove"),function(t){return e._maxSwipeVerticalDistance=Math.max(e._maxSwipeVerticalDistance,Math.abs(e._startY-e._getCoordinates(t).y)),e._maxSwipeHorizontalDistance=Math.max(e._maxSwipeHorizontalDistance,Math.abs(e._startX-e._getCoordinates(t).x)),e._mouseMoved=!0,e._handleSwipeEvents(t)}),this._rotationListeners()},_handleSwipeEvents:function(t){var e=!0;return this._mouseDown&&!this._tapHoldFired&&(e=this._handleVerticalSwipeEvents(t),e=this._handleHorizontalSwipeEvents(t)),this._lastPosition=this._getCoordinates(t),e},_handleVerticalSwipeEvents:function(t){var e=this._getCoordinates(t).y-this._startY;return!(this._maxSwipeHorizontalDistance<this.swipeMaxHorizontalDisance)||this._swiped(t,e,2)},_handleHorizontalSwipeEvents:function(t){var e=this._getCoordinates(t).x-this._startX;return!(this._maxSwipeVerticalDistance<this.swipeMaxVerticalDisance)||this._swiped(t,e)},_swiped:function(t,e,i){return i=i||0,Math.abs(e)>=this.swipeMin&&!this._swipeEvent&&!this._swipeLocked&&(this._swipeEvent=this._getSwipeEvent(e,i)),!(Math.abs(e)<=this.swipeMax)||(t.stopImmediatePropagation(),!1)},_getSwipeEvent:function(t,e){e=t<0?{eventId:3+e,data:{target:this.host}}:{eventId:4+e,data:{target:this.host}};return e},_resetSwipe:function(){this._swipeEvent&&!this._swipeLocked&&(this._raiseEvent(2,this._swipeEvent.data),this._raiseEvent(this._swipeEvent.eventId,this._swipeEvent.data)),clearTimeout(this._swipeTimeout),this._mouseDown=!1},_resetTap:function(){clearTimeout(this._tapHoldTimeout),this._tapHoldFired||this._mouseMoved||this._raiseEvent(0,{target:this.host})},_initTap:function(t){var e=this;this._mouseMoved=!1,this._tapHoldFired=!1,this._tapHoldTimeout=setTimeout(function(){e._mouseMoved||(e._raiseEvent(1,{target:this.host}),e._tapHoldFired=!0)},this.tapHoldDelay)},_initSwipe:function(t){var e=this;this._mouseDown=!0,this._maxSwipeVerticalDistance=0,this._maxSwipeHorizontalDistance=0,this._startX=this._getCoordinates(t).x,this._startY=this._getCoordinates(t).y,this._swipeLocked=!1,this._swipeEvent=null,this._swipeTimeout=setTimeout(function(){e._swipeLocked=!0},this.swipeDelay)},_rotationListeners:function(){var t=this;this._previousOrientation=window.orientation,this._previousWidth=screen.width,this.orientationChangeEnabled&&(window.addEventListener&&(window.addEventListener("resize",this._rotateHandler,!1),window.addEventListener("orientationchange",this._rotateHandler,!1)),this._rotateInterval=setInterval(function(){t._checkOrientation()},this._rotationInterval))},_checkOrientation:function(){var t="vertical";window.orientation===this._previousOrientation&&this._previousWidth===screen.width||((90===window.orientation||screen.width>screen.height)&&(t="horizontal"),this._raiseEvent(7,{orientation:t})),this._previousOrientation=window.orientation,this._previousWidth=screen.width},_raiseEvent:function(t,e){t=i.Event(this._events[t]);return t.args=e,this.host.trigger(t)},_getCoordinates:function(t){t=i.jqx.position(t);return t.x=t.left,t.y=t.top,t},propertyChangedHandler:function(t,e,i,n){"orientationChangeEnabled"===e&&this.refresh()},isTouchDevice:function(){return this._isTouchDevice}})}(jqxBaseFramework);