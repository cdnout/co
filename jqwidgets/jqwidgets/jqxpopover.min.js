!function(s){s.jqx.jqxWidget("jqxPopover","",{}),s.extend(s.jqx._jqxPopover.prototype,{defineInstance:function(){var e={arrowOffsetValue:null,animationType:"fade",position:"bottom",animationOpenDelay:"fast",animationCloseDelay:"fast",autoClose:!0,isModal:!1,height:null,initContent:null,offset:null,rtl:!1,showArrow:!0,showCloseButton:!1,selector:null,title:"",width:null,_toggleElement:null,_popover:null,_popoverTop:0,_popoverLeft:0,_init:!1,_ie8:s.jqx.browser.msie&&8===s.jqx.browser.version,_ie7:s.jqx.browser.msie&&s.jqx.browser.version<8,_left:0,_top:0,events:["open","close"]};return this===s.jqx._jqxPopover.prototype||s.extend(!0,this,e),e},createInstance:function(){this._content=this.host.children()},render:function(){var e=this,o=e.element.id;if(e._content.detach(),e._toggleElement=s(e.selector),0===e._toggleElement.length)throw new Error('jqxPopover: Invalid Popover toggler: "'+e.selector+'".');if(null===e._toggleElement)throw new Error("jqxPopover: Missing Popover toggler.");var t=s('<div id="'+o+'" class="'+e.toThemeProperty("jqx-popover")+'"><div class="'+e.toThemeProperty("jqx-popover-arrow")+'"></div><div class="'+e.toThemeProperty("jqx-popover-title")+'"></div><div class="'+e.toThemeProperty("jqx-popover-content")+'"></div></div>');s("body").append(t);var r=e.host.data();e.host.detach(),e.host=t,e.host.data(r),e.element=t[0],e.element.id=o,e._popover=s("#"+o);r=e._popover.find(".jqx-popover-title");r.append(e.title);var n,t=e._popover.find(".jqx-popover-content");t.append(e._content),e._popover.hide(),e._removeHandlers(),e._addHandlers(),e._popover.addClass(e.position),r.addClass(e.toThemeProperty("jqx-widget-header")),e._popover.addClass(e.toThemeProperty("jqx-widget jqx-widget-content jqx-rc-all")),e.showArrow?(e._popover.addClass(e.toThemeProperty("jqx-popover-arrow-"+e.position)),e._popover.find(".jqx-popover-arrow").css("display","block")):e._popover.find(".jqx-popover-arrow").css("display","none"),e.rtl&&(r.addClass(e.toThemeProperty("jqx-rtl")),r.css("direction","rtl"),t.css("direction","rtl")),e.showCloseButton&&(o=s('<div class="'+this.toThemeProperty("jqx-window-close-button-background")+'"></div>'),t=s('<div style="width: 100%; height: 100%;" class="'+this.toThemeProperty("jqx-window-close-button")+" "+this.toThemeProperty("jqx-icon-close")+'"></div>'),o.append(t),r.append(o),r.css("min-height","16px"),o.addClass(e.toThemeProperty("jqx-popover-close-button")),e.closeButton=t,e.rtl&&o.addClass(e.toThemeProperty("jqx-popover-close-button-rtl"))),e.arrowOffsetValue&&("bottom"==e.position||"top"==e.position?(n=e._popover.find(".jqx-popover-arrow").css("margin-left"),e._popover.find(".jqx-popover-arrow").css("margin-left",parseInt(n)+e.arrowOffsetValue)):(n=e._popover.find(".jqx-popover-arrow").css("margin-top"),e._popover.find(".jqx-popover-arrow").css("margin-top",parseInt(n)+e.arrowOffsetValue))),(e.width||e.height)&&(e._popover.css("width",e.width),e._popover.css("height",e.height))},refresh:function(e){this.render()},destroy:function(){var e=this;0!==e.length&&(e._removeHandlers(),e._popover.remove(),e._removeModalBackground())},propertyChangedHandler:function(e,o,t,r){this.render()},_stickToToggleElement:function(){var e=this;e._popover.css("left","0px"),e._popover.css("top","0px");var o=e._toggleElement,t=o.offset(),r=o.outerHeight(),n=o.outerWidth(),s=e._popover.height(),o=e._popover.width();switch(e.position){case"left":e._popoverTop=t.top-s/2+r/2,e._popoverLeft=t.left-e._popover.outerWidth();break;case"right":e._popoverTop=t.top-s/2+r/2,e._popoverLeft=t.left+n;break;case"top":e._popoverTop=t.top-e._popover.outerHeight(),e._popoverLeft=t.left-o/2+n/2;break;case"bottom":e._popoverTop=t.top+r,e._popoverLeft=t.left-o/2+n/2}o=e.offset?parseFloat(e.offset.left):0,n=e.offset?parseFloat(e.offset.top):0;e._popover.css("top",n+e._popoverTop),e._popover.css("left",o+e._popoverLeft)},open:function(){var e=this;function o(){e._popover.show(),e._raiseEvent("0"),e._isOpen=!0}function t(){e.initContent&&!1===e._init&&(e.initContent(),e._init=!0,e._stickToToggleElement())}if(e._stickToToggleElement(),!0===e._ie7)return o(),void t();switch(e.animationType){case"fade":e._popover.fadeIn(e.animationOpenDelay,function(){e._raiseEvent("0"),t(),e._isOpen=!0});break;case"none":o(),t()}e._makeModalBackground()},close:function(){var e=this;if(e._isOpen)if(!0!==e._ie7){switch(e.animationType){case"fade":e._popover.fadeOut(e.animationCloseDelay,function(){e._raiseEvent("1"),e._isOpen=!1});break;case"none":o()}e._removeModalBackground()}else o();function o(){e._popover.hide(),e._raiseEvent("1"),e._isOpen=!1}},_raiseEvent:function(e,o){void 0===o&&(o={owner:null});e=this.events[e];o.owner=this;e=new s.Event(e);return e.owner=this,e.args=o,e.preventDefault&&e.preventDefault(),this._popover.trigger(e)},_makeModalBackground:function(){var e=this;!0===e.isModal&&(e.modalBackground=s("<div></div>"),e.modalBackground.addClass(this.toThemeProperty("jqx-popover-modal-background")),s(document.body).prepend(e.modalBackground),s(document.body).addClass(e.toThemeProperty("jqx-unselectable")),e.host.addClass(e.toThemeProperty("jqx-selectable")))},_removeModalBackground:function(){var e=this;!0===e.isModal&&void 0!==e.modalBackground&&(e.modalBackground.remove(),s(document.body).removeClass(e.toThemeProperty("jqx-unselectable")),e.host.removeClass(e.toThemeProperty("jqx-selectable")))},_addHandlers:function(){var o=this,e=o.element.id;o.addHandler(s(document),"keydown.jqxPopover"+e,function(e){27==e.keyCode&&o.close()}),o.addHandler(s(document),"click.jqxPopover"+e,function(e){o.closeButton&&e.target==o.closeButton[0]&&o.close(),e.target.classList&&e.target.classList.contains("jqx-window-close-button")||!0===o.autoClose&&(e.target==o.element||s(e.target).ischildof(o._popover)||o.isModal||o.close())}),o.addHandler(s(window),"resize.jqxPopover"+e,function(e){"none"!=o.element.style.display&&o._stickToToggleElement()}),o.selector&&o.addHandler(o._toggleElement,"click.jqxPopover"+e,function(e){e.stopPropagation(),"none"!=o.host.css("display")?o.close():o.open()})},_removeHandlers:function(){var e=this,o=e.element.id;e.removeHandler(s(document),"click.jqxPopover"+o),e.selector&&e.removeHandler(e._toggleElement,"click.jqxPopover"+o),e.removeHandler(s(document),"keydown.jqxPopover"+o),e.removeHandler(s(window),"resize.jqxPopover"+o)}})}(jqxBaseFramework);