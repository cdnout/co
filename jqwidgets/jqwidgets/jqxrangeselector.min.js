!function(x){x.jqx.jqxWidget("jqxRangeSelector","",{}),x.extend(x.jqx._jqxRangeSelector.prototype,{defineInstance:function(){var e={width:400,height:100,min:0,max:100,range:{from:0,to:1/0,min:0,max:1/0},majorTicksInterval:10,minorTicksInterval:1,showMajorTicks:!0,showMinorTicks:!1,snapToTicks:!0,labelsFormat:null,markersFormat:null,showLabels:!0,labelsOnTicks:!0,markersPosition:"top",labelsFormatFunction:null,groupLabelsFormatFunction:null,markersFormatFunction:null,showGroupLabels:!1,showMarkers:!0,resizable:!0,moveOnClick:!0,disabled:!1,rtl:!1,padding:"auto",events:["change"]};return this===x.jqx._jqxRangeSelector.prototype||x.extend(!0,this,e),e},createInstance:function(e){var i=this;if(this._isTouchDevice=x.jqx.mobile.isTouchDevice(),!x.jqx.dataAdapter)throw new Error("jqxRangeSelector: Missing reference to the following module: 'jqxdata.js'.");var r=x.jqx.isHidden(this.host);this.render();var s=this.host.width(),a=this.host.height();x.jqx.utilities.resize(this.host,function(){var e=i.host.width(),t=i.host.height();i.range=i.getRange(),r?(i.refresh(),r=!1):s==e&&a==t||i.refresh(),s=i.host.width(),a=i.host.height()})},render:function(){(1<this.host.children().length||this.rangeSelector)&&(this._removeHandlers(),this.rangeSelector&&this.rangeSelector.remove()),this.host.addClass(this.toThemeProperty("jqx-widget")),this.host.addClass(this.toThemeProperty("jqx-rangeselector")),this.host.children(":eq(0)").addClass(this.toThemeProperty("jqx-rangeselector-content")),this._id=this.element.id,"string"==typeof this.min||this.min instanceof Date?this._dataType="date":this._dataType="number",this._privateProperties(),this._checkProperties(),this._setSize(),this._scale(),this._initSlider()},refresh:function(e){1!=e&&(this.host.children(".jqx-rangeselector-ticks-container").remove(),this._removeHandlers(),this._privateProperties(),this._checkProperties(),this._setSize(),this._scale(),this._initSlider())},destroy:function(){this._removeHandlers(),this.host.remove()},setRange:function(e,t){if(t<e)throw new Error("jqxRangeSelector: range object initialization error. 'min' should be less than 'max'");var i=this._getValue();if(i.from!=e||i.to!=t){var r="The set values are in the wrong format. Please set "+("number"==this._dataType?"numeric":"date")+" values.";if("string"==typeof e||e instanceof Date){if("number"==this._dataType)throw new Error(r)}else if("date"==this._dataType)throw new Error(r);e=this._validateInput(e),t=this._validateInput(t),e>this._max&&(e=this._max),e<this._min&&(e=this._min),t>this._max&&(t=this._max),t<this._min&&(t=this._min);var s=t-e;s>this._range._max?t=e+this._range._max:s<this._range._min&&(t=e+this._range._min);i=this._valuesArray.indexOf(e),r=this._valuesArray.indexOf(t),s=this._ticksArray[i],i=this._ticksArray[r],r=Math.abs(i-s);this.slider[0].style.width=r+"px";s=this.rtl?i:s;this.slider[0].style.left=s,this._moveSlider(s),"date"==this._dataType&&(e=new Date(e),t=new Date(t)),this._raiseEvent("0",{type:null,from:e,to:t})}},val:function(e){if(0==arguments.length)return this.getRange();null!=e.from&&this.setRange(e.from,e.to)},getRange:function(){return this._getValue()},propertyChangedHandler:function(e,t,i,r){switch(t){case"showMinorTicks":1==r?x("#"+this._id+" .jqx-rangeselector-ticks-minor").css("visibility","visible"):x("#"+this._id+" .jqx-rangeselector-ticks-minor").css("visibility","hidden");break;case"showMarkers":t=x("#"+this._id+"LeftMarker, #"+this._id+"RightMarker, #"+this._id+"LeftMarkerArrow, #"+this._id+"RightMarkerArrow");1==r?t.css("visibility","visible"):t.css("visibility","hidden");break;default:this.refresh()}},_raiseEvent:function(e,t){var e=this.events[e],i=new x.Event(e);i.owner=this,i.args=t;try{var r=this.host.trigger(i)}catch(e){}return r},_setSize:function(){this.host.width(this.width),this.host.height(this.height)},resize:function(e,t){this.width=e,this.height=t,this.refresh()},_scale:function(){var e=this.host.width(),t=this._max-this._min;this._unitPerPixel=parseFloat((t/e).toFixed(4)),this._pixelPerUnit=e/t,this._minWidth=this._roundNumber(this._range._min/this._unitPerPixel),this._maxWidth=this._roundNumber(this._range._max/this._unitPerPixel),this._minWidth=parseInt(this._minWidth),this._maxWidth=parseInt(this._maxWidth),"number"==this._dataType&&(this._majorTicksCount=t/this.majorTicksInterval,this._majorTicksCount=Math.floor(this._majorTicksCount)+1,this._majorTicksDistance=parseInt(this._roundNumber(e/(t/this.majorTicksInterval))),this._unitsCount=t/this.minorTicksInterval,this._unitsCount=Math.floor(this._unitsCount)+1,this._unitsDistance=parseInt(this._roundNumber(e/(t/this.minorTicksInterval)))),this._addTicks()},_addTicks:function(){this.host.append("<div id='"+this._id+"TicksContainer' class='jqx-rangeselector-ticks-container'></div>"),this.rangeSelector=x("#"+this._id+"TicksContainer"),this._majorTicksArray=new Array,this._ticksArray=new Array,this._valuesArray=new Array;var e=new String;x("#"+this._id+"TicksContainer").append("<div id='labelPlaceholder' style='visibility: hidden; position: absolute;'></div>");var t=this.rangeSelector.height(),e="number"==this._dataType?this._addNumericTicks(t):this._addDateTicks(t),t=0;this.showLabels&&(t+=x("#labelPlaceholder").outerHeight()+6),"number"!=this._dataType&&this.showGroupLabels&&(t+=x("#labelPlaceholder").outerHeight()+6),"auto"==this.padding&&this.host.css("padding-bottom",t),x("#labelPlaceholder").remove(),x("#"+this._id+"TicksContainer").append(e),this._ticksArray.sort(function(e,t){return e-t});for(var i=1;i<this._ticksArray.length;i++)this._ticksArray[i]=this._roundNumber(this._ticksArray[i]);if(this._valuesArray.sort(function(e,t){return e-t}),"number"==this._dataType)for(i=1;i<this._valuesArray.length;i++)this._valuesArray[i]=this._roundNumber(this._valuesArray[i],"marker",!0);for(i=1;i<this._ticksArray.length;i++)this._ticksArray[i-1]==this._ticksArray[i]&&(this._ticksArray.splice(i,1),this._valuesArray.splice(i,1));this.rtl&&(this._valuesArray=this._valuesArray.reverse())},_addNumericTicks:function(e){for(var t=this,i=new String,r=0,s=this._min,a=this._max,h=0;h<this._majorTicksCount;h++){var o=this._id+"LabelTick"+(h+1);h==this._majorTicksCount-1&&(r=this.host.width());var n=t.showMajorTicks?"visible":"hidden";i+="<div id='"+o+"' class='"+this.toThemeProperty("jqx-rangeselector-ticks")+" "+this.toThemeProperty("jqx-slider-tick-horizontal")+"' style='visibility: "+n+"; left: "+r+"px;'></div>",this._ticksArray.push(r),this._majorTicksArray.push(r);var l=this._id+"Label"+(h+1),d=s;this._valuesArray.push(parseFloat(d.toFixed(4))),t.rtl&&(d=a),d=this._formatOutput(d,this.labelsFormat,1<=this.minorTicksInterval?0:2,"label"),x("#labelPlaceholder").html(d);var u=x("#labelPlaceholder").width(),m=t.showLabels?"visible":"hidden";t.labelsOnTicks&&(i+="<div id='"+l+"' class='"+this.toThemeProperty("jqx-rangeselector-labels")+"' style='visibility: "+m+"; left: "+(r-u/2)+"px; top: "+e+"px;'>"+d+"</div>");var _=r;s+=this.majorTicksInterval,a-=this.majorTicksInterval;r=(s-t._min)/t._unitPerPixel;r=parseInt(r),!this.labelsOnTicks&&h<this._majorTicksCount-1&&(n=Math.abs(_-r),i+="<div id='"+l+"' class='"+this.toThemeProperty("jqx-rangeselector-labels")+"' style='visibility: "+m+"; left: "+(_+n/2-u/2)+"px; top: "+e+"px;'>"+d+"</div>")}for(var r=0,c=this.showMinorTicks?"visible":"hidden",s=this._min,h=0;h<this._unitsCount;h++){o=this._id+"MinorTick"+(h+1);h==this._unitsCount-1&&(r=this.host.width()),i+="<div id='"+o+"' class='"+this.toThemeProperty("jqx-rangeselector-ticks")+" "+this.toThemeProperty("jqx-rangeselector-ticks-minor")+" "+this.toThemeProperty("jqx-slider-tick-horizontal")+"' style='visibility: "+c+"; left: "+r+"px;'></div>";var f=s;-1===this._valuesArray.indexOf(parseFloat(f.toFixed(4)))&&(this._valuesArray.push(parseFloat(f.toFixed(4))),this._ticksArray.push(r));r=((s+=this.minorTicksInterval)-t._min)/t._unitPerPixel;r=parseInt(r)}return i},_getMillisecondsByInterval:function(e){var t={};return"year"==e||e.years?(t.divisor=e.years||1,31536e6*t.divisor):"month"==e||e.months?(t.divisor=e.months||1,2592e6*t.divisor):"week"==e||e.weeks?(t.divisor=e.weeks||1,6048e5*t.divisor):"day"==e||e.days?(t.divisor=e.days||1,864e5*t.divisor):"hour"==e||e.hours?(t.divisor=e.hours||1,36e5*t.divisor):"minute"==e||e.minutes?(t.divisor=e.minutes||1,60*t.divisor*1e3):"second"==e||e.seconds?(t.divisor=e.seconds||1,1e3*t.divisor):"millisecond"==e||e.milliseconds?(t.divisor=e.milliseconds||1,+t.divisor):t},_addDateTicks:function(v){function e(e){var t="majorTicksInterval"==e?k.majorTicksInterval:k.minorTicksInterval,e=new Object;return"year"==t||t.years?(e.period="year",e.interval=864e5,e.divisor=t.years||1,e.value=31536e6*e.divisor):"month"==t||t.months?(e.period="month",e.interval=864e5,e.divisor=t.months||1,e.value=2592e6*e.divisor):"week"==t||t.weeks?(e.period="week",e.interval=864e5,e.divisor=t.weeks||1,e.value=6048e5*e.divisor):"day"==t||t.days?(e.period="day",e.interval=36e5,e.divisor=t.days||1,e.value=864e5*e.divisor):"hour"==t||t.hours?(e.period="hour",e.interval=6e4,e.divisor=t.hours||1,e.value=36e5*e.divisor):"minute"==t||t.minutes?(e.period="minute",e.interval=6e4,e.divisor=t.minutes||1,e.value=60*e.divisor*1e3):"second"==t||t.seconds?(e.period="second",e.interval=1e3,e.divisor=t.seconds||1,e.value=1e3*e.divisor):"millisecond"!=t&&!t.milliseconds||(e.period="millisecond",e.interval=1,e.divisor=t.milliseconds||1,e.value=+e.divisor),e}function t(e,t,i){for(var r,s,a,h,o,n,l,d,u,m=0,_=1,c=new Date(k._min).getHours(),f=864e5==t.interval,g=new Array,p=k._min;p<=k._max;p+=t.interval)1!=f||c!=(u=new Date(p).getHours())&&(1==u?r=1:23==u&&(r=-1),p-=36e5*r,c=new Date(p).getHours()),1==(s=p,a=t.period,h=o=u=d=l=n=o=h=void 0,h=new Date(s),o=h.getDate(),n="year"==a&&0==h.getMonth()&&1==o,l="month"==a&&1==o,d="week"==a&&0==h.getDay(),u="day"==a&&0==h.getHours(),s="hour"==a&&0==h.getMinutes(),o="minute"==a&&0==h.getSeconds(),h="minute"==a&&0==h.getMilliseconds(),n||l||d||u||s||o||h||"millisecond"==a)&&(m%t.divisor==0&&(i?g.push(p):function(e,t,i){var r=(e-k._min)/k._unitPerPixel;k.rtl&&(e="majorTicksInterval"==t?k._dateMajorTicks[k._dateMajorTicks.length-i]:k._dateMinorTicks[k._dateMinorTicks.length-i]),r=parseInt(r);var s,a,h,o=e;-1===k._valuesArray.indexOf(o)&&(k._ticksArray.push(r),k._valuesArray.push(o),"majorTicksInterval"==t&&k._majorTicksArray.push(r)),"majorTicksInterval"==t?(a=k._id+"LabelTick"+i,h=k.showMajorTicks?"visible":"hidden",y+="<div id='"+a+"' class='"+k.toThemeProperty("jqx-rangeselector-ticks")+" "+k.toThemeProperty("jqx-slider-tick-horizontal")+"' style='visibility: "+h+"; left: "+r+"px;'></div>",s=o,s=k._formatOutput(s,k.labelsFormat,k.labelPrecision,"label"),x("#labelPlaceholder").html(s),e=x("#labelPlaceholder").width(),t=k._id+"Label"+i,a=k.showLabels?"visible":"hidden",k.labelsOnTicks?k.labelsOnTicks&&(y+="<div id='"+t+"' class='"+k.toThemeProperty("jqx-rangeselector-labels")+"' style='visibility: "+a+"; left: "+(r-e/2)+"px; top: "+v+"px;'>"+s+"</div>"):(o=k._getMillisecondsByInterval(k.majorTicksInterval)/k._unitPerPixel/2,y+="<div id='"+t+"' class='"+k.toThemeProperty("jqx-rangeselector-labels")+"' style='visibility: "+a+"; left: "+(o+r-e/2)+"px; top: "+v+"px;'>"+s+"</div>")):(h=k.showMinorTicks?"visible":"hidden",i=k._id+"MinorTick"+i,y+="<div id='"+i+"' class='"+k.toThemeProperty("jqx-rangeselector-ticks")+" "+k.toThemeProperty("jqx-rangeselector-ticks-minor")+" "+k.toThemeProperty("jqx-slider-tick-horizontal")+"' style='visibility: "+h+"; left: "+r+"px;'></div>")}(p,e,_,t.interval),_++),m++);return g}var k=this,y=new String;return k._dateMajorTicks=t("majorTicksInterval",e("majorTicksInterval"),!0),k._dateMinorTicks=t("minorTicksInterval",e("minorTicksInterval"),!0),t("majorTicksInterval",e("majorTicksInterval")),t("minorTicksInterval",e("minorTicksInterval")),1==this.showGroupLabels&&this.showLabels&&this._addGroupLabels(x("#labelPlaceholder").height()+v),y},_addGroupLabels:function(e){var t=this,i=new Date(this._min),r=new Date(this._max);if(0<r.getFullYear()-i.getFullYear())var s="year",a=864e5;else if(0<r.getMonth()-i.getMonth())s="month",a=864e5;else{if(!(0<r.getDate()-i.getDate()))return;s="day",a=36e5}for(var h,o,n,l,d,u,m=new String,_=this.toThemeProperty("jqx-rangeselector-group-labels-ticks")+" "+this.toThemeProperty("jqx-slider-tick-horizontal"),c=1,f=this._min;f<this._max;f+=a){var g,p=(h=f,u=d=l=n=o=void 0,n=new Date(h),l=n.getFullYear(),d=n.getMonth(),u=n.getDate(),h=!0,"year"==s&&0==d&&1==u?o=l:"month"==s&&1==u?(o=x.jqx.dataFormat.formatdate(n,"MMMM"),0==d&&(o=l+" "+o)):"day"==s&&0==n.getHours()?o=x.jqx.dataFormat.formatdate(n,"dddd"):h=!1,{check:h,value:1==h&&t.groupLabelsFormatFunction?t.groupLabelsFormatFunction(o,n):o});1==p.check&&(g=(f-this._min)/this._unitPerPixel,m+="<div class='"+this.toThemeProperty("jqx-rangeselector-labels")+"' style='left: "+g+"px; top: "+e+"px;'><div class='"+_+"'></div><div id='"+this._id+"GroupLabel"+c+"' class='"+this.toThemeProperty("jqx-rangeselector-group-labels")+"' style='margin-left: 5px;'>"+p.value+"</div></div>",c++)}x("#"+this._id+"TicksContainer").append(m)},_updateCursor:function(e,t){var i=this.element.style.cursor,r=this.slider.offset().left,s=r+parseInt(this.slider[0].style.width);r-5<e&&e<r+5||s-5<e&&e<s+5?""!=i&&"auto"!=i||(this.element.style.cursor="e-resize"):"e-resize"==i&&(this.element.style.cursor="auto")},_handleMouseMove:function(e){var t=this,i=t.slider,r=e.pageX,s=e.pageY;t._isTouchDevice&&(r=(d=x.jqx.position(e)).left,s=d.top);var a=t._hostOffset.left,h=t._hostWidth;if(t.resizable&&!t.dragging&&"none"==t.resizeDirection&&a<=r&&r<=a+h&&s>=t._hostOffset.top&&s<=t._hostOffset.top+t._hostHeight&&this._updateCursor(r,s),!t.isMouseDown)return!0;if(t._isTouchDevice&&(s<t._hostOffset.top||s>t._hostOffset.top+t._hostHeight))return!0;var o=t._findNearestTick(t._sliderLeftOffset+r-t._mouseDownX);if((e=parseInt(o))<0)return!0;e<0&&(e=0);var n,l,d=parseInt(i[0].style.width);if(1==t.resizable&&!t.dragging){s=e*t._unitPerPixel+t._min;if("left"==t.resizeDirection||t.isLeftMarkerCaptured){r<a-(c=t.isLeftMarkerCaptured?t.leftMarker.outerWidth():0)&&(r=a-c),a+h+c<r&&(r=a+h+c+1);var u=i[0].style.left,m=e-parseInt(u),_=parseInt(d-m);if(n=_,l=parseInt(t._maxWidth),n<parseInt(t._minWidth)||l<n||parseInt(t.rightMarker[0].style.left)<parseInt(t.leftMarker[0].style.left))if(r>t._mouseDownX){if(r=t.sliderRight-t._minWidth-a,d==(_=t._minWidth))return!0;if((e=o=t._findNearestTick(r))<0)return!0;parseInt(u),t._unitPerPixel,t._min;s=e*t._unitPerPixel+t._min}else{if(!(0!=t._maxWidth&&r<t._mouseDownX&&_>t._maxWidth))return!0;if(r=t.sliderRight-t._maxWidth-a,d==(_=t._maxWidth))return!0;if((e=o=t._findNearestTick(r))<0)return!0;parseInt(u),t._unitPerPixel,t._min;s=e*t._unitPerPixel+t._min}t.slider[0].style.left=e+"px",u!=i[0].style.left&&(t.slider[0].style.width=_+"px");u=t._findNearestTick(e),i=t._valuesArray[t._ticksArray.indexOf(u)];null!=i?(t.leftMarkerValue[0].innerHTML=t._formatOutput(i,t.markersFormat,0,"left"),e!=u&&(t.slider[0].style.left=u+"px")):t.leftMarkerValue[0].innerHTML=t._formatOutput(s,t.markersFormat,0,"left"),t.oldX=r,t.moved=!0}else if("right"==t.resizeDirection||t.isRightMarkerCaptured){u=!1;r<a-(c=t.isRightMarkerCaptured?t.rightMarker.outerWidth():0)&&(r=a-c),a+h+c<r&&(r=a+h+c,u=!0);var a=t._sliderInitialWidth,h=t._findNearestTick(a+t._sliderLeftOffset),c=t._findNearestTick(a+r-t._mouseDownX+t._sliderLeftOffset);if(c<0)return!0;(_=a-(m=h-c))<=0&&(m=a,_=0);m=parseInt(t.element.style.width);0<=t.element.style.width.indexOf("%")&&(m=t.host.width()),(u||t._sliderLeftOffset+_>=m)&&(_=m-t._sliderLeftOffset,0),_>parseInt(this._maxWidth)&&(_=parseInt(this._maxWidth)),_<parseInt(this._minWidth)&&(_=parseInt(this._minWidth)),t.slider[0].style.width=_+"px";s=(t._sliderLeftOffset+_)*t._unitPerPixel+t._min,u=t._findNearestTick(t._sliderLeftOffset+_),m=t._valuesArray[t._ticksArray.indexOf(u)];null!=m?(t._sliderLeftOffset+_!=u&&(t.slider[0].style.width=u-t._sliderLeftOffset+"px"),t.rightMarkerValue[0].innerHTML=t._formatOutput(m,t.markersFormat,0,"right")):t.rightMarkerValue[0].innerHTML=t._formatOutput(s,t.markersFormat,0,"right"),t.oldX=r}t._layoutShutter(),t._layoutMarkers(),t.moved=!0}1==t.dragging&&(t._moveSlider(e,!0),t.oldX=r)},_moveSlider:function(e,t){this.moved=!0;var i,r,s,a=parseInt(this.slider[0].style.width),h=parseInt(e+a),o=this._hostWidth,n=e;n<0&&(e=n=0),o<n+a&&(e=n=o-a),0<=n&&n+a<=o&&(this.slider[0].style.left=n+"px",s=this._findNearestTick(n),i=-1!=this._majorTicksArray.indexOf(s),null!=(r=this._valuesArray[this._ticksArray.indexOf(s)])?(this.leftMarkerValue[0].innerHTML=this._formatOutput(r,this.markersFormat,0,"left"),e!=s&&i&&t&&(this.slider[0].style.left=s+"px",h=parseInt(s+a))):this.leftMarkerValue[0].innerHTML=this._formatOutput(n*this._unitPerPixel+this._min,this.markersFormat,0,"left"),o=this._findNearestTick(h),null!=(r=this._valuesArray[this._ticksArray.indexOf(o)])?(e=-1!=this._majorTicksArray.indexOf(o),this.rightMarkerValue[0].innerHTML=this._formatOutput(r,this.markersFormat,0,"right"),h!=o&&e&&i&&t&&(s=o-s,this.slider[0].style.width=s+"px")):this.rightMarkerValue[0].innerHTML=this._formatOutput((n+a)*this._unitPerPixel+this._min,this.markersFormat,0,"right")),this._layoutShutter(),this._layoutMarkers()},_initSlider:function(){var a=this,e=this.toThemeProperty("jqx-rangeselector-shutter")+" "+this.toThemeProperty("jqx-scrollbar-state-normal");x("#"+this._id+"TicksContainer").append("<div id='"+this._id+"ShutterLeft' class='"+e+"'></div><div id='"+this._id+"Slider' class='"+this.toThemeProperty("jqx-rangeselector-slider")+" "+this.toThemeProperty("jqx-scrollbar-thumb-state-normal")+"'><div class='"+this.toThemeProperty("jqx-rangeselector-inner-slider")+"'></div></div><div id='"+this._id+"ShutterRight' class='"+e+"'></div>"),this.slider=x("#"+this._id+"Slider"),this.shutterLeft=x("#"+this._id+"ShutterLeft"),this.shutterRight=x("#"+this._id+"ShutterRight"),this._hostOffset=this.rangeSelector.offset(),this._hostWidth=this.rangeSelector.width(),this._hostHeight=this.rangeSelector.height();var t=this._hostOffset,i=this._initRange(),e=i.left,i=(i.right-e)/this._unitPerPixel;this.slider[0].style.width=Math.round(i)+"px";var h,o,e=t.left+parseInt((e-this._min)/this._unitPerPixel);if(this.slider.offset({left:e}),this._layoutShutter(),this._initMarkers(),0==this.disabled){this.host.removeClass(this.toThemeProperty("jqx-fill-state-disabled")),this.addHandler(this.host,"dragstart.rangeselector"+this._id,function(){return!1}),this.addHandler(x(window),"jqxReady.rangeselector",function(){return a._layoutMarkers(),!1}),this.isSliderCaptured=!1,this.resizeDirection="none",this.isLeftMarkerCaptured=!1,this.isRightMarkerCaptured=!1,this.dragging=!1,this._mouseDownX;e="mousedown.rangeselector"+this.element.id;this._isTouchDevice&&(e=x.jqx.mobile.getTouchEventName("touchstart")+".rangeselector"+this.element.id),this.addHandler(this.host,e,function(e){a.isMouseDown=!0,a._hostOffset=a.rangeSelector.offset(),a._hostWidth=a.rangeSelector.width(),a._hostHeight=a.rangeSelector.height(),a._sliderLeftOffset=parseInt(a.slider[0].style.left);var t=e.pageX,i=e.pageY;a._isTouchDevice&&(t=(s=x.jqx.position(e)).left,i=s.top),a._initialSliderOffset=t-a.slider.offset().left;var r=a.slider.width();a._sliderInitialWidth=r,h=a.slider.offset().left,o=a._sliderInitialWidth,a.initialOffset=h;e=parseInt(h+o);if(a.oldX=t,a._mouseDownX=t,a.resizeDirection="none",a.sliderRight=e,h-5<t&&t<h+5&&a._heightCheck(i))a.isSliderCaptured=!1,a.dragging=!1,a.resizeDirection="left";else if(e-5<t&&t<e+5&&a._heightCheck(i))a.isSliderCaptured=!1,a.dragging=!1,a.resizeDirection="right";else if(h+5<=t&&t<=e+5&&a._heightCheck(i))a.isSliderCaptured=!0,a.dragging=!0;else if(a.isSliderCaptured=!1,a.dragging=!1,a.moveOnClick){if(a.isLeftMarkerCaptured||a.isRightMarkerCaptured)return!1;var s=a._sliderLeftOffset+a._initialSliderOffset;(s=a._findNearestTick(s))<0&&(s=0);r=parseInt(a.slider[0].style.width);i>=a.slider.offset().top&&(e<t?a._moveSlider(s-r,!0):a._moveSlider(s,!0))}}),this.addHandler(a.leftMarker,e,function(e){a.leftMarkerAndArrow.addClass(a.toThemeProperty("jqx-fill-state-pressed")),a.oldLeftX=e.pageX,a._isTouchDevice&&(e=x.jqx.position(e),a.oldLeftX=e.left),a._mouseDownX=a.oldLeftX,a.isLeftMarkerCaptured=!0}),this.addHandler(a.rightMarker,e,function(e){a.rightMarkerAndArrow.addClass(a.toThemeProperty("jqx-fill-state-pressed")),a.oldRightX=e.pageX,a._isTouchDevice&&(e=x.jqx.position(e),a.oldRightX=e.left),a._mouseDownX=a.oldRightX,a.isRightMarkerCaptured=!0}),this.addHandler(x(document),"selectstart.rangeselector"+this._id,function(e){if(1==a.isSliderCaptured||1==a.isLeftMarkerCaptured||1==a.isRightMarkerCaptured||1==a.dragging)return e.preventDefault(),!1});e="mousemove.rangeselector"+this.element.id;this._isTouchDevice&&(e=x.jqx.mobile.getTouchEventName("touchmove")+".rangeselector"+this.element.id),this.addHandler(x(document),e,function(e){a._handleMouseMove(e)});function r(e){try{var t=a.moved;a.moved=!1,a.isMouseDown=!1,a.dragging=!1,a.resizeDirection="none",1==a.isLeftMarkerCaptured&&(a.leftMarkerAndArrow.removeClass(a.toThemeProperty("jqx-fill-state-pressed")),a.isLeftMarkerCaptured=!1),1==a.isRightMarkerCaptured&&(a.rightMarkerAndArrow.removeClass(a.toThemeProperty("jqx-fill-state-pressed")),a.isRightMarkerCaptured=!1),t&&(t=a._getValue(),a._raiseEvent("0",{type:"mouse",from:t.from,to:t.to}))}catch(e){}}var s,n;this.addHandler(x(document),"mouseup.rangeselector"+this._id,function(e){r()});try{""==document.referrer&&!window.frameElement||null==window.top||window.top==window.self||(s=function(e){r()},n=null,window.parent&&document.referrer&&(n=document.referrer),n&&-1!=n.indexOf(document.location.host)&&window.top.document&&(window.top.document.addEventListener?window.top.document.addEventListener("mouseup",s,!1):window.top.document.attachEvent&&window.top.document.attachEvent("onmouseup",s)))}catch(e){}}else this.host.addClass(this.toThemeProperty("jqx-fill-state-disabled"));this._moveSlider(parseInt(a.slider[0].style.left)),this.moved=!1},_initMarkers:function(){var e=x("#"+this._id+"TicksContainer"),t=this.toThemeProperty("jqx-rangeselector-markers")+" "+this.toThemeProperty("jqx-disableselect")+" "+this.toThemeProperty("jqx-fill-state-normal");e.append("<div id='"+this._id+"LeftMarker' class='"+t+"'></div><div id='"+this._id+"RightMarker' class='"+t+"'></div>");t=this.toThemeProperty("jqx-rangeselector-marker-arrow")+" "+this.toThemeProperty("jqx-fill-state-normal");"bottom"==this.markersPosition?t+=" "+this.toThemeProperty("jqx-rangeselector-marker-arrow-bottom"):t+=" "+this.toThemeProperty("jqx-rangeselector-marker-arrow-top"),e.append("<div id='"+this._id+"LeftMarkerArrow' class='"+t+" "+this.toThemeProperty("jqx-rangeselector-marker-left-arrow")+"'></div>"),e.append("<div id='"+this._id+"RightMarkerArrow' class='"+t+" "+this.toThemeProperty("jqx-rangeselector-marker-right-arrow")+"'></div>"),x("#"+this._id+"LeftMarker").append("<div id='"+this._id+"LeftMarkerValue' class='"+this.toThemeProperty("jqx-disableselect")+" "+this.toThemeProperty("jqx-rangeselector-markers-value")+"'></div>"),x("#"+this._id+"RightMarker").append("<div id='"+this._id+"RightMarkerValue' class='"+this.toThemeProperty("jqx-disableselect")+" "+this.toThemeProperty("jqx-rangeselector-markers-value")+"'></div>");var i,t=x("#"+this._id+"LeftMarker, #"+this._id+"RightMarker, #"+this._id+"LeftMarkerArrow, #"+this._id+"RightMarkerArrow"),r=x("#"+this._id+"LeftMarker, #"+this._id+"LeftMarkerArrow"),s=x("#"+this._id+"RightMarker, #"+this._id+"RightMarkerArrow");1==this.showMarkers?t.css("visibility","visible"):t.css("visibility","hidden"),0==this.disabled&&1==this.resizable&&((i=this).addHandler(r,"mouseenter.rangeselector"+this._id,function(e){i.element.style.cursor="pointer",r.addClass(i.toThemeProperty("jqx-fill-state-hover"))}),this.addHandler(r,"mouseleave.rangeselector"+this._id,function(e){i.element.style.cursor="auto",r.removeClass(i.toThemeProperty("jqx-fill-state-hover"))}),this.addHandler(s,"mouseenter.rangeselector"+this._id,function(e){i.element.style.cursor="pointer",s.addClass(i.toThemeProperty("jqx-fill-state-hover"))}),this.addHandler(s,"mouseleave.rangeselector"+this._id,function(e){i.element.style.cursor="auto",s.removeClass(i.toThemeProperty("jqx-fill-state-hover"))})),this.leftMarkerAndArrow=r,this.rightMarkerAndArrow=s,this.leftMarkerArrow=x("#"+this._id+"LeftMarkerArrow"),this.rightMarkerArrow=x("#"+this._id+"RightMarkerArrow"),this.leftMarker=x("#"+this._id+"LeftMarker"),this.rightMarker=x("#"+this._id+"RightMarker"),this.leftMarkerValue=x("#"+this._id+"LeftMarkerValue"),this.rightMarkerValue=x("#"+this._id+"RightMarkerValue");t=this._initRange();this._updateMarkersValues(t.left,t.right),this._layoutMarkers(),"auto"==this.padding?(this.host.css("padding-left",this.leftMarker[0].offsetWidth),this.host.css("padding-right",this.rightMarker[0].offsetWidth),this.host.css("padding-top",this._leftMarkerHeight+7)):this.host.css("padding",this.padding)},_layoutMarkers:function(){var e,t,i,r,s,a;1==this.showMarkers&&(this._hostOffset||(this._hostOffset=this.rangeSelector.offset()),this._leftMarkerHeight||(this._leftMarkerHeight=this.leftMarker.outerHeight(),this._rightMarkerHeight=this.rightMarker.outerHeight()),this._hostOffset.top,a=parseInt(this.slider[0].style.left)+this._hostOffset.left,e=-5,"bottom"==this.markersPosition&&(e=parseInt(this.element.style.height)+4+this._rightMarkerHeight),t=e-this._leftMarkerHeight,i=e-this._rightMarkerHeight,"bottom"==this.markersPosition&&(e=parseInt(this.element.style.height)-6),s=1+a-(r=this.leftMarker[0].offsetWidth)-this._hostOffset.left,this.leftMarker[0].style.left=s+"px",this.leftMarker[0].style.top=t+"px",this.leftMarkerArrow[0].style.left=2+s+r+"px",this.leftMarkerArrow[0].style.top=6+e+"px",a=a+parseInt(this.slider[0].style.width)-this._hostOffset.left,this.rightMarker[0].style.left=a+"px",this.rightMarker[0].style.top=i+"px",this.rightMarkerArrow[0].style.left=7+a+"px",this.rightMarkerArrow[0].style.top=6+e+"px")},_updateMarkersValues:function(e,t){this.leftMarkerValue[0].innerHTML=this._formatOutput(e,this.markersFormat,0,"left",!0),this.rightMarkerValue[0].innerHTML=this._formatOutput(t,this.markersFormat,0,"right",!0)},_removeHandlers:function(){var e=this.element.id,t=x("#"+e+"LeftMarker, #"+e+"LeftMarkerArrow"),i=x("#"+e+"RightMarker, #"+e+"RightMarkerArrow"),r="mousemove.rangeselector"+e,s="mousedown.rangeselector"+e;this._isTouchDevice&&(r=x.jqx.mobile.getTouchEventName("touchmove")+".rangeselector"+e,s=x.jqx.mobile.getTouchEventName("touchstart")+".rangeselector"+e),this.removeHandler(x(document),r),this.removeHandler(x(document),"mouseup.rangeselector"+e),this.removeHandler(this.host,s),this.removeHandler(this.host,"click.rangeselector"+e),this.removeHandler(this.host,"dragstart.rangeselector"+e),this.removeHandler(t,"mouseenter.rangeselector"+e),this.removeHandler(t,"mouseleave.rangeselector"+e),this.removeHandler(i,"mouseenter.rangeselector"+e),this.removeHandler(i,"mouseleave.rangeselector"+e),this.removeHandler(x("#"+e+"LeftMarker"),s),this.removeHandler(x("#"+e+"RightMarker"),s),this.removeHandler(x("#"+e+"LeftMarkerValue, #"+e+"RightMarkerValue"),"selectstart.rangeselector"+e)},_heightCheck:function(e){var t=this.slider,i=t.offset().top;return i<=e&&e<=i+t.height()},_checkProperties:function(){(this._range._from<this._min||this._range._from>this._min&&this._range._from>this._max)&&(this._range._from=this._min),(this._range._to>this._max||this._range._to<this._min&&this._range._to<this._max)&&(this._range._to=this._max);var e=this._max-this._min;this._range._min>e&&(this._range._min=e),this._range._max>e&&(this._range._max=e);e=this._range._to-this._range._from;e<this._range._min?this._range._to=this._range._from+this._range._min:e>this._range._max&&(this._range._to=this._range._from+this._range._max)},_findNearestTick:function(e){for(var t=0,i=Math.abs(e-this._ticksArray[0]),r=1;r<this._ticksArray.length;r++){var s=Math.abs(e-this._ticksArray[r]);s<i&&(i=s,t=r)}return this._ticksArray[t]},_privateProperties:function(){this._min=this._validateInput(this.min),this._max=this._validateInput(this.max),this._range=new Object,this._range._from=this._validateInput(null!=this.range.from?this.range.from:0),this._range._to=this._validateInput(null!=this.range.to?this.range.to:1/0),this._range._min=this._minMaxDate(null!=this.range.min?this.range.min:0),this._range._max=this._minMaxDate(null!=this.range.max?this.range.max:1/0)},_validateInput:function(e){var t;return"number"==typeof e?t=e:"string"==typeof e?t=Date.parse(e):e instanceof Date&&(t=e.getTime()),t},_minMaxDate:function(e){if("number"==typeof e)return e;var t;switch(e){case"millisecond":t=1;break;case"second":t=1e3;break;case"minute":t=6e4;break;case"hour":t=36e5;break;case"day":t=864e5;break;case"week":t=6048e5;break;default:t=e.milliseconds||(0+e.seconds?1e3*e.seconds:0+e.minutes?6e4*e.minutes:0+e.hours?36e5*e.hours:0+e.days?864e5*e.days:0+e.weeks?6048e5*e.weeks:0)}return t},_formatOutput:function(e,t,i,r,s){var a,h;if(this.values||(this.values=new Array),this.values[r]=e,"label"==r&&this.labelsFormatFunction)a="date"==this._dataType?this._roundDate(e):this._roundNumber(e,"label"),a=this.labelsFormatFunction(a);else if("label"!=r&&this.markersFormatFunction)"date"==this._dataType&&(a=this._roundDate(e)),a=this.markersFormatFunction(e,r);else if(t)a="number"==this._dataType?x.jqx.dataFormat.formatnumber(e,t):(a=this._roundDate(e),x.jqx.dataFormat.formatdate(a,t));else{if("date"==this._dataType)throw null==this.labelsFormat&&null==this.markersFormat?h="both labelsFormat and markersFormat":null==this.labelsFormat?h="labelsFormat":null==this.markersFormat&&(h="markersFormat"),new Error("When the data format is date, "+h+" should be set.");a=e.toFixed(i)}return a},_getValue:function(e){var t=this,i=t.minorTicksInterval;function r(e){return"number"===t._dataType?Math.round(e/i)*i:t._roundNumber(e,"marker")}var s=this.slider,a=s.width(),h=new Object,s=(s.offset().left-this.rangeSelector.offset().left)*this._unitPerPixel+this._min;return h.from=r(s),h.to=r(s+a*this._unitPerPixel),e||1!=this.snapToTicks||(e=this._findNearestTick((h.from-this._min)/this._unitPerPixel),h.from=this._valuesArray[this._ticksArray.indexOf(e)],e=this._findNearestTick((h.to-this._min)/this._unitPerPixel),h.to=this._valuesArray[this._ticksArray.indexOf(e)]),"date"==this._dataType&&(h.from=new Date(h.from),h.to=new Date(h.to)),h},_roundNumber:function(e,t,i){"marker"==t&&1==i&&(e=parseFloat(e)),e=parseFloat(e);return e},_roundDate:function(e){"number"==typeof e&&(e=new Date(e));var t,i=this._max-this._min;return 12096e5<i?(t=e.getDate(),12<e.getHours()&&(e.setDate(t+1),e.setHours(0),e.setMinutes(0),e.setSeconds(0))):1728e5<i&&(e.setHours(e.getHours()+Math.round(e.getMinutes()/60)),e.setMinutes(0),e.setSeconds(0)),e},_layoutShutter:function(){var e=parseInt(this.slider[0].style.left);this.shutterLeft[0].style.width=e+"px",this.shutterLeft[0].style.left="0px",x.jqx.browser.msie&&x.jqx.browser.version<9&&(this.shutterLeft[0].style.filter="progid:DXImageTransform.Microsoft.Alpha(Opacity=75)",this.shutterRight[0].style.filter="progid:DXImageTransform.Microsoft.Alpha(Opacity=75)");var t=1+e+parseInt(this.slider[0].style.width);this.shutterRight[0].style.left=t+"px";var i=parseInt(this.element.style.width);0<=this.element.style.width.indexOf("%")&&(i=parseInt(this.host.width()));e=i-1-e-parseInt(this.slider[0].style.width);e<0&&(e=0),this.shutterRight[0].style.width=1+e+"px",t+1+e<2+i&&(this.shutterRight[0].style.width=2+e+"px"),0==e&&(this.shutterRight[0].style.width="0px")},_initRange:function(){if(this._range._from>this._range._to)throw new Error("jqxRangeSelector: range object initialization error. 'min' should be less than 'max'");return{left:this._range._from,right:this._range._to}}})}(jqxBaseFramework);