!function(I){I.jqx.jqxWidget("jqxTree","",{}),I.extend(I.jqx._jqxTree.prototype,{defineInstance:function(){var e={items:new Array,width:null,height:null,easing:"easeInOutCirc",animationShowDuration:"fast",animationHideDuration:"fast",treeElements:new Array,disabled:!1,itemsMember:"",displayMember:"",valueMember:"",enableHover:!0,keyboardNavigation:!0,enableKeyboardNavigation:!0,toggleMode:"dblclick",source:null,checkboxes:!1,checkSize:16,toggleIndicatorSize:18,hasThreeStates:!1,selectedItem:null,touchMode:"auto",allowDrag:!0,allowDrop:!0,searchMode:"startswithignorecase",incrementalSearch:!0,incrementalSearchDelay:700,animationHideDelay:0,submitCheckedItems:!1,dragStart:null,dragEnd:null,rtl:!1,dropAction:"default",events:["expand","collapse","select","initialized","added","removed","checkChange","dragEnd","dragStart","itemClick"],aria:{"aria-activedescendant":{name:"getActiveDescendant",type:"string"},"aria-disabled":{name:"disabled",type:"boolean"}}};return this===I.jqx._jqxTree.prototype||I.extend(!0,this,e),e},createInstance:function(e){var t,i,n=this;this.host.attr("role","tree"),this.host.attr("data-role","treeview"),this.enableKeyboardNavigation=this.keyboardNavigation,this.propertyChangeMap.disabled=function(e,t,i,s){n.disabled?n.host.addClass(n.toThemeProperty("jqx-tree-disabled")):n.host.removeClass(n.toThemeProperty("jqx-tree-disabled")),I.jqx.aria(n,"aria-disabled",s)},(null!=this.width&&-1!=this.width.toString().indexOf("px")||null!=this.width&&!isNaN(this.width))&&this.host.width(this.width),(null!=this.height&&-1!=this.height.toString().indexOf("px")||null!=this.height&&!isNaN(this.height))&&this.host.height(this.height),null!=this.width&&-1!=this.width.toString().indexOf("%")&&this.host.width(this.width),null!=this.height&&-1!=this.height.toString().indexOf("%")&&this.host.height(this.height),this.host.attr("tabindex")||this.host.attr("tabIndex",1),this.disabled&&(this.host.addClass(this.toThemeProperty("jqx-tree-disabled")),I.jqx.aria(this,"aria-disabled",!0)),this.host.jqxDragDrop&&window.jqxTreeDragDrop(),this.originalInnerHTML=this.element.innerHTML,this.createdTree=!1,this.element.innerHTML.indexOf("UL")&&0<(i=this.host.find("ul:first")).length&&(this.createTree(i[0]),this.createdTree=!0),null!=this.source&&(t=this.loadItems(this.source),this.element.innerHTML=t,0<(i=this.host.find("ul:first")).length&&(this.createTree(i[0]),this.createdTree=!0)),this._itemslength=this.items.length,this.createdTree||0==this.host.find("ul").length&&(this.host.append(I("<ul></ul>")),0<(i=this.host.find("ul:first")).length&&(this.createTree(i[0]),this.createdTree=!0),this.createdTree=!0),1==this.createdTree&&(this._render(),this._handleKeys()),this._updateCheckLayout()},checkItems:function(e,t){var i,s,n,l,r=this;null!=e?(s=i=0,s=(l=I(e.element).find("li")).length,I.each(l,function(e){var t=r.itemMapping["id"+this.id].item;0!=t.checked&&(t.checked,i++)}),e!=t?i==s?this.checkItem(e.element,!0,"tree"):0<i?this.checkItem(e.element,null,"tree"):this.checkItem(e.element,!1,"tree"):(n=t.checked,l=I(t.element).find("li"),I.each(l,function(){r.itemMapping["id"+this.id].item;r.checkItem(this,n,"tree")})),this.checkItems(this._parentItem(e),t)):(n=t.checked,l=I(t.element).find("li"),I.each(l,function(){r.itemMapping["id"+this.id].item;r.checkItem(this,n,"tree")}))},_getMatches:function(i,e){if(null==i||0==i.length)return-1;for(var t=this.items,s=new Array,n=0;n<t.length;n++)this._isVisible(t[n])&&!t[n].disabled&&s.push(t[n]);t=s,null!=e&&(t=t.slice(e));var l=new Array;return I.each(t,function(e){var t=(t=this.label)||"";I.jqx.string.startsWithIgnoreCase(t.toString(),i)&&l.push({id:this.id,element:this.element})}),l},_handleKeys:function(){var u=this;this.addHandler(this.host,"keydown",function(e){var t=e.keyCode;if((u.keyboardNavigation||u.enableKeyboardNavigation)&&null!=u.selectedItem){var i=u.selectedItem.element;if(u.incrementalSearch&&!(33<=t&&t<=40)){u._searchString||(u._searchString=""),(8==t||46==t)&&1<=u._searchString.length&&(u._searchString=u._searchString.substr(0,u._searchString.length-1));var s=String.fromCharCode(t),n=!isNaN(parseInt(s));if(65<=t&&t<=97||n||8==t||32==t||46==t){e.shiftKey||(s=s.toLocaleLowerCase()),8!=t&&32!=t&&46!=t&&(0<u._searchString.length&&u._searchString.substr(0,1)==s||(u._searchString+=s)),32==t&&(u._searchString+=" "),u._searchTime=new Date;s=u.selectedItem;if(s){for(var l=s.id,r=-1,a=0;a<u.items.length;a++)if(u.items[a].id==l){r=a+1;break}(0==(h=u._getMatches(u._searchString,r)).length||0<h.length&&h[0].id==l)&&(h=u._getMatches(u._searchString))}else var h=u._getMatches(u._searchString);0<h.length&&(s=u.selectedItem,u.selectedItem&&u.selectedItem.id!=h[0].id&&(u.clearSelection(),u.selectItem(h[0].element,"keyboard")),u._lastSearchString=u._searchString)}null!=u._searchTimer&&clearTimeout(u._searchTimer),27!=t&&13!=t||(u._searchString="",u._lastSearchString=""),u._searchTimer=setTimeout(function(){u._searchString="",u._lastSearchString=""},500)}switch(t){case 32:if(u.checkboxes){u.fromKey=!0;var o=I(u.selectedItem.checkBoxElement).jqxCheckBox("checked");return u.checkItem(u.selectedItem.element,!o,"tree"),u.hasThreeStates&&u.checkItems(u.selectedItem,u.selectedItem),!1}return!0;case 33:for(var d=u._getItemsOnPage(),m=u.selectedItem,a=0;a<d;a++)m=u._prevVisibleItem(m);return null!=m?(u.selectItem(m.element,"keyboard"),u.ensureVisible(m.element)):(u.selectItem(u._firstItem().element,"keyboard"),u.ensureVisible(u._firstItem().element)),!1;case 34:for(var d=u._getItemsOnPage(),c=u.selectedItem,a=0;a<d;a++)c=u._nextVisibleItem(c);return null!=c?(u.selectItem(c.element,"keyboard"),u.ensureVisible(c.element)):(u.selectItem(u._lastItem().element,"keyboard"),u.ensureVisible(u._lastItem().element)),!1;case 37:case 39:return(37==t&&!u.rtl||39==t&&u.rtl)&&(u.selectedItem.hasItems&&u.selectedItem.isExpanded?u.collapseItem(i):null!=(o=u._parentItem(u.selectedItem))&&(u.selectItem(o.element,"keyboard"),u.ensureVisible(o.element))),(39==t&&!u.rtl||37==t&&u.rtl)&&u.selectedItem.hasItems&&(u.selectedItem.isExpanded?null!=(c=u._nextVisibleItem(u.selectedItem))&&(u.selectItem(c.element,"keyboard"),u.ensureVisible(c.element)):u.expandItem(i)),!1;case 13:return u.selectedItem.hasItems&&(u.selectedItem.isExpanded?u.collapseItem(i):u.expandItem(i)),!1;case 36:return u.selectItem(u._firstItem().element,"keyboard"),u.ensureVisible(u._firstItem().element),!1;case 35:return u.selectItem(u._lastItem().element,"keyboard"),u.ensureVisible(u._lastItem().element),!1;case 38:return null!=(m=u._prevVisibleItem(u.selectedItem))&&(u.selectItem(m.element,"keyboard"),u.ensureVisible(m.element)),!1;case 40:return null!=(c=u._nextVisibleItem(u.selectedItem))&&(u.selectItem(c.element,"keyboard"),u.ensureVisible(c.element)),!1}}})},_firstItem:function(){for(var e=this.host.find("ul:first"),t=I(e).find("li"),i=0;i<=t.length-1;i++){var s=t[i],n=this.itemMapping["id"+s.id].item;if(this._isVisible(n))return n}return null},_lastItem:function(){for(var e=this.host.find("ul:first"),t=I(e).find("li"),i=t.length-1;0<=i;i--){var s=t[i],n=this.itemMapping["id"+s.id].item;if(this._isVisible(n))return n}return null},_parentItem:function(e){if(null==e||null==e)return null;var t=e.parentElement;if(!t)return null;var i=null;return I.each(this.items,function(){if(this.element==t)return i=this,!1}),i},_nextVisibleItem:function(e){if(null==e||null==e)return null;for(var t=e;null!=t;)if(t=t.nextItem,this._isVisible(t)&&!t.disabled)return t;return null},_prevVisibleItem:function(e){if(null==e||null==e)return null;for(var t=e;null!=t;)if(t=t.prevItem,this._isVisible(t)&&!t.disabled)return t;return null},_isVisible:function(e){if(null==e||null==e)return!1;if(!this._isElementVisible(e.element))return!1;var t=this._parentItem(e);if(null==t)return!0;if(null!=t){if(!this._isElementVisible(t.element))return!1;if(!t.isExpanded)return!1;for(;null!=t;){if(null!=(t=this._parentItem(t))&&!this._isElementVisible(t.element))return!1;if(null!=t&&!t.isExpanded)return!1}}return!0},_getItemsOnPage:function(){var e=0,t=(this.panel.jqxPanel("getVScrollPosition"),parseInt(this.host.height())),i=0,s=this._firstItem();if(0<parseInt(I(s.element).height()))for(;i<=t;)i+=parseInt(I(s.element).outerHeight()),e++;return e},_isElementVisible:function(e){return null!=e&&("none"!=I(e).css("display")&&"hidden"!=I(e).css("visibility"))},refresh:function(e){var t;(null!=this.width&&-1!=this.width.toString().indexOf("px")||null!=this.width&&!isNaN(this.width))&&this.host.width(this.width),(null!=this.height&&-1!=this.height.toString().indexOf("px")||null!=this.height&&!isNaN(this.height))&&this.host.height(this.height),this.panel&&(null!=this.width&&-1!=this.width.toString().indexOf("%")?((t=this).panel.jqxPanel("width","100%"),t.removeHandler(I(window),"resize.jqxtree"+t.element.id),t.addHandler(I(window),"resize.jqxtree"+t.element.id,function(){t._calculateWidth()})):this.panel.jqxPanel("width",this.host.width()),this.panel.jqxPanel("_arrange")),this._calculateWidth(),I.jqx.isHidden(this.host)&&((t=this)._hiddenTimer&&clearInterval(this._hiddenTimer),this._hiddenTimer=setInterval(function(){I.jqx.isHidden(t.host)||(clearInterval(t._hiddenTimer),t._calculateWidth())},100)),1!=e&&this.checkboxes&&this._updateCheckLayout(null)},resize:function(e,t){this.width=e,this.height=t,this.refresh()},loadItems:function(e){if(null!=e){var t=this;this.items=new Array;var i="<ul>";return I.map(e,function(e){return null==e?null:void(i+=t._parseItem(e))}),i+="</ul>"}},_parseItem:function(e){var t="";if(null==e)return null;var i=e.label,s=e.value;!e.label&&e.html&&(i=e.html),null!=this.displayMember&&""!=this.displayMember&&(i=e[this.displayMember]),null!=this.valueMember&&""!=this.valueMember&&(s=e[this.valueMember]),i="string"==typeof e?e:i||"Item";var n=!1;null!=e.expanded&&e.expanded&&(n=!0);var l=!1;null!=e.locked&&e.locked&&(l=!0);var r=!1;null!=e.selected&&e.selected&&(r=!0);var a=!1;null!=e.disabled&&e.disabled&&(a=!0);var h=!1;null!=e.checked&&e.checked&&(h=!0);var o=e.icon;t+="<li",n&&(t+=' item-expanded="true" '),l&&(t+=' item-locked="true" '),a&&(t+=' item-disabled="true" '),r&&(t+=' item-selected="true" '),e.iconsize&&(t+=' item-iconsize="'+e.iconsize+'" '),null!=o&&null!=o&&(t+=' item-icon="'+o+'" '),e.label&&!e.html&&(t+=' item-label="'+i+'" '),null!=s&&(t+=' item-value="'+s+'" '),null!=e.checked&&(t+=' item-checked="'+h+'" ');h="";return null!=e.id?t+=' id="'+(h=e.id)+'" ':t+=' id="'+(h=this.createID())+'" ',t+=">"+i,e.items?t+=this.loadItems(e.items):null!=this.itemsMember&&""!=this.itemsMember&&e[this.itemsMember]&&(t+=this.loadItems(e[this.itemsMember])),this._valueList||(this._valueList=new Array),this._valueList[h]=e.value,t+="</li>"},ensureVisible:function(e){var t,i,s,n,l;null!=e&&null!=e&&this.panel&&(t=this.panel.jqxPanel("getVScrollPosition"),i=this.panel.jqxPanel("getHScrollPosition"),s=parseInt(this.host.height()),n=I(e).find(".jqx-tree-item:first"),l=I(n).position().top,0===t&&0===l||(e=this.panel.jqxPanel("hScrollBar").outerHeight(),(l<=t||s+t<=l)&&this.panel.jqxPanel("scrollTo",i,l-s+I(n).outerHeight()+e)))},_syncItems:function(e){this._visibleItems=new Array;var i=this;I.each(e,function(){var e,t=I(this);"none"!=t.css("display")&&(e=t.outerHeight(),0<t.height()&&(t=parseInt(t.offset().top),i._visibleItems[i._visibleItems.length]={element:this,top:t,height:e,bottom:t+e}))})},hitTest:function(i,s){var n,l,r=this,a=null,e=this.host.find(".jqx-item");return this._syncItems(e),r._visibleItems&&(n=parseInt(r.host.offset().left),l=r.host.outerWidth(),I.each(r._visibleItems,function(e){if(n<=i&&i<n+l&&this.top+5<s&&s<this.top+this.height){var t=I(this.element).parents("li:first");if(0<t.length&&null!=(a=r.getItem(t[0])))return a.height=this.height,a.top=this.top,!1}})),a},addBefore:function(e,t,i){return this.addBeforeAfter(e,t,!0,i)},addAfter:function(e,t,i){return this.addBeforeAfter(e,t,!1,i)},addBeforeAfter:function(e,t,i,s){var n=new Array;t&&null!=t.treeInstance&&(t=t.element),I.isArray(e)?n=e:n[0]=e;var l="",r=this;I.each(n,function(){l+=r._parseItem(this)});var a,n=I(l);this.element.innerHTML.indexOf("UL")&&(a=this.host.find("ul:first")),null==t&&null==t?a.append(n):i?I(t).before(n):I(t).after(n);for(var h=n,o=0;o<h.length;o++){this._createItem(h[o]);var d=I(h[o]).find("li");if(0<d.length)for(var m=0;m<d.length;m++)this._createItem(d[m])}n=function(e){r._refreshMapping(!1),r._updateItemsNavigation(),e&&r.allowDrag&&r._enableDragDrop&&r._enableDragDrop(),null!=r.selectedItem&&(I(r.selectedItem.titleElement).addClass(r.toThemeProperty("jqx-fill-state-pressed")),I(r.selectedItem.titleElement).addClass(r.toThemeProperty("jqx-tree-item-selected")))};if(0==s)return n(!0),void this._raiseEvent("4",{items:this.getItems()});n(!1),r._render(),this._raiseEvent("4",{items:this.getItems()}),r.checkboxes&&r._updateCheckLayout(null)},addTo:function(e,t,i){var s=this,n=new Array;t&&null!=t.treeInstance&&(t=t.element),I.isArray(e)?n=e:n[0]=e;var l="",r=this;I.each(n,function(){l+=r._parseItem(this)});var a,e=I(l);s.element.innerHTML.indexOf("UL")&&(a=s.host.find("ul:first")),null==t&&null==t?a.append(e):0==(n=(t=I(t)).find("ul:first")).length?(a=I("<ul></ul>"),I(t).append(a),n=t.find("ul:first"),(t=s.itemMapping["id"+t[0].id].item).subtreeElement=n[0],t.hasItems=!0,n.addClass(s.toThemeProperty("jqx-tree-dropdown")),r.rtl&&n.addClass(s.toThemeProperty("jqx-tree-dropdown-rtl")),n.append(e),s=n.find("li:first"),t.parentElement=s):n.append(e);for(var h=e,o=0;o<h.length;o++){this._createItem(h[o]);var d=I(h[o]).find("li");if(0<d.length)for(var m=0;m<d.length;m++)this._createItem(d[m])}e=function(e){r._refreshMapping(!1),r._updateItemsNavigation(),e&&r.allowDrag&&r._enableDragDrop&&r._enableDragDrop(),null!=r.selectedItem&&(I(r.selectedItem.titleElement).addClass(r.toThemeProperty("jqx-fill-state-pressed")),I(r.selectedItem.titleElement).addClass(r.toThemeProperty("jqx-tree-item-selected")))};if(0==i)return e(!0),void this._raiseEvent("4",{items:this.getItems()});e(!1),r._render(),r.checkboxes&&r._updateCheckLayout(null),this._raiseEvent("4",{items:this.getItems()})},updateItem:function(e,t){var i,s,n=null!=e.treeInstance?e:this.getItem(e);return n||(i=e,e=t,t=i,n=null!=e.treeInstance?e:this.getItem(e)),!!n&&("string"==typeof t&&(t={label:t}),t.value&&(n.value=t.value),t.label&&(n.label=t.label,I.jqx.utilities.html(I(n.titleElement),t.label),I.jqx.browser.msie&&I.jqx.browser.version<8&&(I(document.body).append(this._measureItem),this._measureItem.html(I(n.titleElement).text()),s=this._measureItem.width(),n.icon&&(s+=20),0<I(I(n.titleElement).find("img")).length&&(s+=20),I(n.titleElement).css("max-width",s+"px"),this._measureItem.remove())),t.icon&&(0<I(n.element).children(".itemicon").length?I(n.element).find(".itemicon")[0].src=t.icon:(s=t.iconsize,s=I('<img width="'+(s=s||16)+'" height="'+s+'" style="float: left;" class="itemicon" src="'+t.icon+'"/>'),I(n.titleElement).prepend(s),s.css("margin-right","6px"),this.rtl&&(s.css("margin-right","0px"),s.css("margin-left","6px"),s.css("float","right")))),t.expanded&&this.expandItem(n),t.disabled&&this.disableItem(n),t.selected&&this.selectItem(n),!0)},removeItem:function(e,t){var i,s;null!=e&&null!=e&&(null!=e.treeInstance&&(e=e.element),i=this,e.id,(s=this.getItem(e))&&-1!=this.items.indexOf(s)&&function e(t){var i=-1;-1!=(i=this.items.indexOf(t))&&this.items.splice(i,1);var i=I(t.element).find("li"),t=i.length,s=this,n=new Array;if(0<t){I.each(i,function(e){var t=s.itemMapping["id"+this.id].item;n.push(t)});for(var l=0;l<n.length;l++)e.apply(this,[n[l]])}}.apply(this,[s]),0<this.host.find("#"+e.id).length&&I(e).remove(),0!=t?(i._updateItemsNavigation(),i.allowDrag&&i._enableDragDrop?i._render(!0,!1):i._render(),null!=i.selectedItem&&i.selectedItem.element==e&&(I(i.selectedItem.titleElement).removeClass(i.toThemeProperty("jqx-fill-state-pressed")),I(i.selectedItem.titleElement).removeClass(i.toThemeProperty("jqx-tree-item-selected")),i.selectedItem=null),this._raiseEvent("5"),i.checkboxes&&i._updateCheckLayout(null)):this._raiseEvent("5"))},clear:function(){this.items=new Array,this.itemMapping=new Array;var e=this.host.find("ul:first");0<e.length&&(e[0].innerHTML=""),this.selectedItem=null},disableItem:function(t){if(null==t)return!1;null!=t.treeInstance&&(t=t.element);var i=this;I.each(i.items,function(){var e=this;if(e.element==t)return e.disabled=!0,I(e.titleElement).addClass(i.toThemeProperty("jqx-fill-state-disabled")),I(e.titleElement).addClass(i.toThemeProperty("jqx-tree-item-disabled")),i.checkboxes&&e.checkBoxElement&&I(e.checkBoxElement).jqxCheckBox({disabled:!0}),!1})},_updateInputSelection:function(){var e;if(this.input&&(null==this.selectedItem?this.input.val(""):(null==(e=this.selectItem.value)&&(e=this.selectedItem.label),this.input.val(e)),this.checkboxes)){var t=this.getCheckedItems();if(this.submitCheckedItems){for(var i="",s=0;s<t.length;s++){var n=t[s].value;null==n&&(n=t[s].label),s==t.length-1?i+=n:i+=n+","}this.input.val(i)}}},getCheckedItems:function(){var e=new Array;return I.each(this.items,function(){this.checked&&e.push(this)}),e},getUncheckedItems:function(){var e=new Array;return I.each(this.items,function(){this.checked||e.push(this)}),e},checkAll:function(){I.each(this.items,function(){this.disabled||(this.checked=!0,I(this.checkBoxElement).jqxCheckBox("_setState",!0))}),this._raiseEvent("6",{element:this,checked:!0})},uncheckAll:function(){I.each(this.items,function(){this.disabled||(this.checked=!1,I(this.checkBoxElement).jqxCheckBox("_setState",!1))}),this._raiseEvent("6",{element:this,checked:!1})},checkItem:function(t,i,e){if(null==t)return!1;void 0===i&&(i=!0),null!=t.treeInstance&&(t=t.element);var s=!1,n=null;I.each(this.items,function(){var e=this;if(e.element==t&&!e.disabled)return s=!0,e.checked=i,I((n=e).checkBoxElement).jqxCheckBox({checked:i}),!1}),s&&(this._raiseEvent("6",{element:t,checked:i}),this._updateInputSelection()),null==e&&n&&this.hasThreeStates&&this.checkItems(n,n)},uncheckItem:function(e){this.checkItem(e,!1)},enableItem:function(t){if(null==t)return!1;null!=t.treeInstance&&(t=t.element);var i=this;I.each(i.items,function(){var e=this;if(e.element==t)return e.disabled=!1,I(e.titleElement).removeClass(i.toThemeProperty("jqx-fill-state-disabled")),I(e.titleElement).removeClass(i.toThemeProperty("jqx-tree-item-disabled")),i.checkboxes&&e.checkBoxElement&&I(e.checkBoxElement).jqxCheckBox({disabled:!1}),!1})},enableAll:function(){var t=this;I.each(t.items,function(){var e=this;e.disabled=!1,I(e.titleElement).removeClass(t.toThemeProperty("jqx-tree-item-disabled")),I(e.titleElement).removeClass(t.toThemeProperty("jqx-fill-state-disabled")),t.checkboxes&&e.checkBoxElement&&I(e.checkBoxElement).jqxCheckBox({disabled:!1})})},lockItem:function(e){if(null==e)return!1;I.each(this.items,function(){if(this.element==e)return!(this.locked=!0)})},unlockItem:function(e){if(null==e)return!1;I.each(this.items,function(){if(this.element==e)return this.locked=!1})},getItems:function(){return this.items},getItem:function(e){return null!=e&&null!=e&&this.itemMapping["id"+e.id]?this.itemMapping["id"+e.id].item:null},isExpanded:function(e){if(null==e||null==e)return!1;e=this.itemMapping["id"+e.id].item;return null!=e&&e.isExpanded},isSelected:function(e){if(null==e||null==e)return!1;e=this.itemMapping["id"+e.id].item;return null!=e&&e==this.selectedItem},getPrevItem:function(e){var t=this.getItem(e);return null!=e.treeInstance&&(t=e),this._prevVisibleItem(t)},getNextItem:function(e){var t=this.getItem(e);return null!=e.treeInstance&&(t=e),this._nextVisibleItem(t)},getSelectedItem:function(e){return this.selectedItem},val:function(e){if(0==arguments.length||"object"==typeof e)return this.selectedItem;var t,i;"string"==typeof e?0<(t=this.host.find("#"+e)).length&&(i=this.getItem(t[0]),this.selectItem(i)):(i=this.getItem(e),this.selectItem(i))},getActiveDescendant:function(){return this.selectedItem?this.selectedItem.element.id:""},clearSelection:function(){this.selectItem(null)},selectItem:function(t,e){var i,s;this.disabled||(i=this,t&&null!=t.treeInstance&&(t=t.element),null!=t&&null!=t?null!=this.selectedItem&&this.selectedItem.element==t||((s=null!=this.selectedItem?this.selectedItem.element:null)&&I(s).removeAttr("aria-selected"),I.each(i.items,function(){var e=this;this.selected=!1,e.disabled||e.element==t&&(null==i.selectedItem||null!=i.selectedItem&&i.selectedItem.titleElement!=e.titleElement)&&(null!=i.selectedItem&&(I(i.selectedItem.titleElement).removeClass(i.toThemeProperty("jqx-fill-state-pressed")),I(i.selectedItem.titleElement).removeClass(i.toThemeProperty("jqx-tree-item-selected"))),I(e.titleElement).addClass(i.toThemeProperty("jqx-fill-state-pressed")),I(e.titleElement).addClass(i.toThemeProperty("jqx-tree-item-selected")),i.selectedItem=e,this.selected=!0,I(e.element).attr("aria-selected","true"),I.jqx.aria(i,"aria-activedescendant",e.element.id))}),this._updateInputSelection(),e=e||null,this._raiseEvent("2",{element:t,prevElement:s,type:e})):null!=i.selectedItem&&(I(i.selectedItem.titleElement).removeClass(i.toThemeProperty("jqx-fill-state-pressed")),I(i.selectedItem.titleElement).removeClass(i.toThemeProperty("jqx-tree-item-selected")),i.selectedItem=null))},collapseAll:function(){this.isUpdating=!0;var e=this,t=e.items,i=this.animationHideDuration;this.animationHideDuration=0,I.each(t,function(){1==this.isExpanded&&e._collapseItem(e,this)}),setTimeout(function(){e.isUpdating=!1,e._calculateWidth()},this.animationHideDuration),this.animationHideDuration=i},expandAll:function(){var e=this;this.isUpdating=!0;var t=this.animationShowDuration;this.animationShowDuration=0,I.each(this.items,function(){this.hasItems&&e._expandItem(e,this)}),setTimeout(function(){e.isUpdating=!1,e._calculateWidth()},this.animationShowDuration),this.animationShowDuration=t},collapseItem:function(e){if(null==e)return!1;null!=e.treeInstance&&(e=e.element);var t=this;return I.each(this.items,function(){if(1==this.isExpanded&&this.element==e)return t._collapseItem(t,this),!1}),!0},expandItem:function(t){if(null==t)return!1;null!=t.treeInstance&&(t=t.element);var i=this;return I.each(i.items,function(){var e=this;0!=e.isExpanded||e.element!=t||e.disabled||e.locked||(i._expandItem(i,e),e.parentElement&&i.expandItem(e.parentElement))}),!0},_getClosedSubtreeOffset:function(e){var t=I(e.subtreeElement),e=-t.outerHeight();t.outerWidth();return{left:0,top:e}},_collapseItem:function(t,i,e,s){if(null==t||null==i)return!1;if(i.disabled)return!1;if(t.disabled)return!1;if(t.locked)return!1;var n=I(i.subtreeElement),l=this._getClosedSubtreeOffset(i);l.top,l.left,I(i.element),t.animationHideDelay;null!=n.data("timer").show&&(clearTimeout(n.data("timer").show),n.data("timer").show=null);l=function(){i.isExpanded=!1,t.checkboxes&&((e=n.find(".chkbox")).stop(),e.css("opacity",1),n.find(".chkbox").animate({opacity:0},50));var e=I(i.arrow);t._arrowStyle(e,"",i.isExpanded),n.slideUp(t.animationHideDuration,function(){i.isCollapsing=!1,t._calculateWidth();var e=I(i.arrow);t._arrowStyle(e,"",i.isExpanded),n.hide(),t._raiseEvent("1",{element:i.element})})};l()},_expandItem:function(t,i){if(null==t||null==i)return!1;if(i.isExpanded)return!1;if(i.locked)return!1;if(i.disabled)return!1;if(t.disabled)return!1;var e=I(i.subtreeElement);null!=e.data("timer")&&null!=e.data("timer").hide&&clearTimeout(e.data("timer").hide);var s,n;I(i.element);0!=parseInt(e.css("top"))?(n=I(i.arrow),t._arrowStyle(n,"",i.isExpanded),t.checkboxes&&((s=e.find(".chkbox")).stop(),s.css("opacity",0),s.animate({opacity:1},t.animationShowDuration)),n=I(i.arrow),t._arrowStyle(n,"",!0),e.slideDown(t.animationShowDuration,t.easing,function(){var e=I(i.arrow);i.isExpanded=!0,t._arrowStyle(e,"",i.isExpanded),i.isExpanding=!1,t._raiseEvent("0",{element:i.element}),t._calculateWidth()}),t.checkboxes&&(t._updateCheckItemLayout(i),i.subtreeElement&&(e=I(i.subtreeElement).find("li"),I.each(e,function(){var e=t.getItem(this);null!=e&&t._updateCheckItemLayout(e)})))):i.isExpanded=!0},_calculateWidth:function(){var e,t=this,i=this.checkboxes?20:0,s=0;this.isUpdating||(I.each(this.items,function(){var e;0!=I(this.element).height()&&(e=I(this.titleElement).outerWidth()+10+i+20*(1+this.level),s=Math.max(s,e),this.hasItems&&(e=parseInt(I(this.titleElement).css("padding-top")),isNaN(e)&&(e=0),e*=2,e=((e+=2)+I(this.titleElement).height())/2-8.5,I.jqx.browser.msie&&I.jqx.browser.version<9?I(this.arrow).css("margin-top","3px"):0<=parseInt(e)&&I(this.arrow).css("margin-top",parseInt(e)+"px")))}),16<this.toggleIndicatorSize&&(s=s+this.toggleIndicatorSize-16),t.panel&&(s>this.host.width()?(e=s-this.host.width(),e+="hidden"!==t.panel.jqxPanel("vScrollBar").css("visibility")?10:0,t.panel.jqxPanel({horizontalScrollBarMax:e})):t.panel.jqxPanel({horizontalScrollBarMax:0})),this.host.find("ul:first").width(s),0<(e=this.host.width()-30)&&this.host.find("ul:first").css("min-width",e),t.panel&&t.panel.jqxPanel("_arrange"))},_arrowStyle:function(e,t,i){var s;0<e.length&&(e.removeClass(),t="jqx-tree-item-arrow"+(s=i?"-expand":"-collapse")+("hover"==t?"-"+t:""),e.addClass(this.toThemeProperty(t)),this.rtl||(s=i?"-down":"-right",e.addClass(this.toThemeProperty("jqx-icon-arrow"+s))),this.rtl&&(e.addClass(this.toThemeProperty(t+"-rtl")),s=i?"-down":"-left",e.addClass(this.toThemeProperty("jqx-icon-arrow"+s))))},_initialize:function(e,t){var l=this;this.host.addClass(l.toThemeProperty("jqx-widget")),this.host.addClass(l.toThemeProperty("jqx-widget-content")),this.host.addClass(l.toThemeProperty("jqx-tree")),this._updateDisabledState();var r=I.jqx.browser.msie&&I.jqx.browser.version<8;I.each(this.items,function(){var e=this,t=I(e.element),i=null;if(l.checkboxes&&!e.hasItems&&e.checkBoxElement&&I(e.checkBoxElement).css("margin-left","0px"),r)!e.hasItems&&0<I(e.element).find("ul").length&&I(e.element).find("ul").remove();else{if(!e.hasItems)return l.rtl?e.element.style.marginRight=parseInt(l.toggleIndicatorSize)+"px":e.element.style.marginLeft=parseInt(l.toggleIndicatorSize)+"px",0<(s=I(e.arrow)).length&&(s.remove(),e.arrow=null),!0;l.rtl?e.element.style.marginRight="0px":e.element.style.marginLeft="0px"}0<(s=I(e.arrow)).length&&s.remove(),(i=I('<span style="height: 17px; border: none; background-color: transparent;" id="arrow'+t[0].id+'"></span>')).prependTo(t),l.rtl?i.css("float","right"):i.css("float","left"),i.css("clear","both"),i.width(l.toggleIndicatorSize),l._arrowStyle(i,"",e.isExpanded);var s=parseInt(I(this.titleElement).css("padding-top"));isNaN(s)&&(s=0),s*=2;s=((s+=2)+I(this.titleElement).height())/2-8.5;I.jqx.browser.msie&&I.jqx.browser.version<9?i.css("margin-top","3px"):0<=parseInt(s)&&i.css("margin-top",parseInt(s)+"px"),t.addClass(l.toThemeProperty("jqx-disableselect")),i.addClass(l.toThemeProperty("jqx-disableselect"));var s="click",n=l.isTouchDevice();n&&(s=I.jqx.mobile.getTouchEventName("touchend")),l.addHandler(i,s,function(){return e.isExpanded?l._collapseItem(l,e):l._expandItem(l,e),!1}),l.addHandler(i,"selectstart",function(){return!1}),l.addHandler(i,"mouseup",function(){if(!n)return!1}),e.hasItems=0<I(e.element).find("li").length,e.arrow=i[0],e.hasItems||i.css("visibility","hidden"),t.css("float","none")})},_getOffset:function(e){var t=I(window).scrollTop(),i=I(window).scrollLeft(),s=I.jqx.mobile.isSafariMobileBrowser(),n=I(e).offset(),l=n.top,n=n.left;return null!=s&&s?{left:n-i,top:l-t}:I(e).offset()},_renderHover:function(e,t,i){var s,n=this;i||(s=I(t.titleElement),n.addHandler(s,"mouseenter",function(){t.disabled||!n.enableHover||n.disabled||(s.addClass(n.toThemeProperty("jqx-fill-state-hover")),s.addClass(n.toThemeProperty("jqx-tree-item-hover")))}),n.addHandler(s,"mouseleave",function(){t.disabled||!n.enableHover||n.disabled||(s.removeClass(n.toThemeProperty("jqx-fill-state-hover")),s.removeClass(n.toThemeProperty("jqx-tree-item-hover")))}))},_updateDisabledState:function(){this.disabled?this.host.addClass(this.toThemeProperty("jqx-fill-state-disabled")):this.host.removeClass(this.toThemeProperty("jqx-fill-state-disabled"))},_addInput:function(){var e;null==this.input&&((e=this.host.attr("name"))&&this.host.attr("name",""),this.input=I("<input type='hidden'/>"),this.host.append(this.input),this.input.attr("name",e),this._updateInputSelection())},render:function(){this._updateItemsNavigation(),this._render()},_render:function(e,t){I.jqx.browser.msie&&I.jqx.browser.version<8&&(i=this,I.each(this.items,function(){var e=I(this.element),t=e.parent(),i=parseInt(this.titleElement.css("margin-left"))+this.titleElement[0].scrollWidth+13;e.css("min-width",i);var s=parseInt(t.css("min-width"));isNaN(s)&&(s=0);i=e.css("min-width");s<parseInt(e.css("min-width"))&&t.css("min-width",i),this.titleElement[0].style.width=null}));var i=this;if(I.data(i.element,"animationHideDelay",i.animationHideDelay),I.data(document.body,"treeel",this),this._initialize(),this.isTouchDevice()&&"dblclick"==this.toggleMode&&(this.toggleMode="click"),null!=e&&1!=e||I.each(this.items,function(){i._updateItemEvents(i,this)}),this.allowDrag&&this._enableDragDrop&&(null==t||1==t)&&this._enableDragDrop(),this._addInput(),this.host.jqxPanel){if(0<this.host.find("#panel"+this.element.id).length)return this.panel.jqxPanel({touchMode:this.touchMode}),void this.panel.jqxPanel("refresh");this.host.find("ul:first").wrap('<div style="background-color: transparent; overflow: hidden; width: 100%; height: 100%;" id="panel'+this.element.id+'"></div>');e=this.host.find("div:first"),t="fixed";null!=this.height&&"auto"!=this.height||(t="verticalwrap"),null!=this.width&&"auto"!=this.width||(t="fixed"==t?"horizontalwrap":"wrap"),e.jqxPanel({rtl:this.rtl,theme:this.theme,width:"100%",height:"100%",touchMode:this.touchMode,sizeMode:t}),I.jqx.browser.msie&&I.jqx.browser.version<8&&e.jqxPanel("content").css("left","0px"),e.data({nestedWidget:!0}),(null==this.height||null!=this.height&&-1!=this.height.toString().indexOf("%"))&&this.isTouchDevice()&&(this.removeHandler(e,I.jqx.mobile.getTouchEventName("touchend")+".touchScroll touchcancel.touchScroll"),this.removeHandler(e,I.jqx.mobile.getTouchEventName("touchmove")+".touchScroll"),this.removeHandler(e,I.jqx.mobile.getTouchEventName("touchstart")+".touchScroll"));t=I.data(e[0],"jqxPanel").instance;null!=t&&(this.vScrollInstance=t.vScrollInstance,this.hScrollInstance=t.hScrollInstance),this.panelInstance=t,I.jqx.browser.msie&&I.jqx.browser.version<8&&(this.host.attr("hideFocus",!0),this.host.find("div").attr("hideFocus",!0),this.host.find("ul").attr("hideFocus",!0)),e[0].className="",this.panel=e}this._raiseEvent("3",this)},focus:function(){try{this.host.focus()}catch(e){}},_updateItemEvents:function(t,i){var e=this.isTouchDevice();e&&(this.toggleMode=I.jqx.mobile.getTouchEventName("touchend"));var s=I(i.element);t.enableRoundedCorners&&s.addClass(t.toThemeProperty("jqx-rc-all"));var n=e?I.jqx.mobile.getTouchEventName("touchend"):"mousedown";!0===t.touchMode&&t.removeHandler(I(i.checkBoxElement),"mousedown"),t.removeHandler(I(i.checkBoxElement),n),t.addHandler(I(i.checkBoxElement),n,function(e){return t.disabled||this.treeItem.disabled||(this.treeItem.checked=!this.treeItem.checked,t.checkItem(this.treeItem.element,this.treeItem.checked,"tree"),t.hasThreeStates&&t.checkItems(this.treeItem,this.treeItem)),!1});var l=I(i.titleElement);t.removeHandler(s),this.allowDrag&&this._enableDragDrop?(t.removeHandler(l,"mousedown.item"),t.removeHandler(l,"click"),t.removeHandler(l,"dblclick"),t.removeHandler(l,"mouseenter"),t.removeHandler(l,"mouseleave")):t.removeHandler(l),t._renderHover(s,i,e);var r=I(i.subtreeElement);0<r.length&&(e=i.isExpanded?"block":"none",r.css({overflow:"hidden",display:e}),r.data("timer",{})),t.addHandler(l,"selectstart",function(e){return!1}),I.jqx.browser.opera&&t.addHandler(l,"mousedown.item",function(e){return!1}),"click"!=t.toggleMode&&t.addHandler(l,"click",function(e){t.selectItem(i.element,"mouse"),null!=t.panel&&t.panel.jqxPanel({focused:!0}),l.focus(),t._raiseEvent("9",{element:i.element})}),t.addHandler(l,t.toggleMode,function(e){if(0<r.length&&clearTimeout(r.data("timer").hide),null!=t.panel&&t.panel.jqxPanel({focused:!0}),t.selectItem(i.element,"mouse"),null==i.isExpanding&&(i.isExpanding=!1),null==i.isCollapsing&&(i.isCollapsing=!1),0<r.length)return i.isExpanded?0==i.isCollapsing&&(i.isCollapsing=!0,t._collapseItem(t,i,!0)):0==i.isExpanding&&(i.isExpanding=!0,t._expandItem(t,i)),!1})},isTouchDevice:function(){if(null!=this._isTouchDevice)return this._isTouchDevice;var e=I.jqx.mobile.isTouchDevice();return 1==this.touchMode?e=!0:0==this.touchMode&&(e=!1),this._isTouchDevice=e},createID:function(){return I.jqx.utilities.createId()},createTree:function(e){if(null!=e){var t=I(e).find("li");this.items=new Array,this.itemMapping=new Array,I(e).addClass(this.toThemeProperty("jqx-tree-dropdown-root")),this.rtl&&I(e).addClass(this.toThemeProperty("jqx-tree-dropdown-root-rtl")),(this.rtl||I.jqx.browser.msie&&I.jqx.browser.version<8)&&(this._measureItem=I("<span style='position: relative; visibility: hidden;'></span>"),this._measureItem.addClass(this.toThemeProperty("jqx-widget")),this._measureItem.addClass(this.toThemeProperty("jqx-fill-state-normal")),this._measureItem.addClass(this.toThemeProperty("jqx-tree-item")),this._measureItem.addClass(this.toThemeProperty("jqx-item")),I(document.body).append(this._measureItem)),I.jqx.browser.msie&&I.jqx.browser.version;for(var i=0;i<t.length;i++)this._createItem(t[i]);(this.rtl||I.jqx.browser.msie&&I.jqx.browser.version<8)&&this._measureItem.remove(),this._updateItemsNavigation(),this._updateCheckStates()}},_updateCheckLayout:function(e){var t=this;this.checkboxes&&I.each(this.items,function(){this.level!=e&&null!=e||t._updateCheckItemLayout(this)})},_updateCheckItemLayout:function(e){var t,i;this.checkboxes&&"none"!=I(e.titleElement).css("display")&&(t=I(e.checkBoxElement),i=I(e.titleElement).outerHeight()/2-1-parseInt(this.checkSize)/2,t.css("margin-top",i),this.rtl||(I.jqx.browser.msie&&I.jqx.browser.version<8?e.titleElement.css("margin-left",parseInt(this.checkSize)+25):e.hasItems&&t.css("margin-left",this.toggleIndicatorSize)))},_updateCheckStates:function(){var e=this;e.hasThreeStates?I.each(this.items,function(){e._updateCheckState(this)}):I.each(this.items,function(){null==this.checked&&e.checkItem(this.element,!1,"tree")})},_updateCheckState:function(e){var s,i,t,n;null!=e&&null!=e&&(s=this,n=i=0,n=(t=I(e.element).find("li")).length,e.checked&&0<n&&I.each(t,function(e){var t=s.itemMapping["id"+this.id].item,i=t.element.getAttribute("item-checked");null!=i&&null!=i&&"true"!=i&&1!=i||s.checkItem(t.element,!0,"tree")}),I.each(t,function(e){var t=s.itemMapping["id"+this.id].item;0!=t.checked&&(t.checked,i++)}),0<n&&(i==n?this.checkItem(e.element,!0,"tree"):0<i?this.checkItem(e.element,null,"tree"):this.checkItem(e.element,!1,"tree")))},_updateItemsNavigation:function(){for(var e=this.host.find("ul:first"),t=I(e).find("li"),i=0;i<t.length;i++){var s=t[i];!this.itemMapping["id"+s.id]||(s=this.itemMapping["id"+s.id].item)&&(s.prevItem=null,s.nextItem=null,0<i&&this.itemMapping["id"+t[i-1].id]&&(s.prevItem=this.itemMapping["id"+t[i-1].id].item),i<t.length-1&&this.itemMapping["id"+t[i+1].id]&&(s.nextItem=this.itemMapping["id"+t[i+1].id].item))}},_applyTheme:function(s,n){var l=this;this.host.removeClass("jqx-tree-"+s),this.host.removeClass("jqx-widget-"+s),this.host.removeClass("jqx-widget-content-"+s),this.host.addClass(l.toThemeProperty("jqx-tree")),this.host.addClass(l.toThemeProperty("jqx-widget"));var e=this.host.find("ul:first");I(e).removeClass(l.toThemeProperty("jqx-tree-dropdown-root-"+s)),I(e).addClass(l.toThemeProperty("jqx-tree-dropdown-root")),this.rtl&&(I(e).removeClass(l.toThemeProperty("jqx-tree-dropdown-root-rtl-"+s)),I(e).addClass(l.toThemeProperty("jqx-tree-dropdown-root-rtl")));for(var t=I(e).find("li"),i=0;i<t.length;i++){var r=t[i];I(r).children().each(function(){if("ul"==this.tagName||"UL"==this.tagName)return I(this).removeClass(l.toThemeProperty("jqx-tree-dropdown-"+s)),I(this).addClass(l.toThemeProperty("jqx-tree-dropdown")),l.rtl&&(I(this).removeClass(l.toThemeProperty("jqx-tree-dropdown-rtl-"+s)),I(this).addClass(l.toThemeProperty("jqx-tree-dropdown-rtl"))),!1})}I.each(this.items,function(){var e=this,t=I(e.element);t.removeClass(l.toThemeProperty("jqx-tree-item-li-"+s)),t.addClass(l.toThemeProperty("jqx-tree-item-li")),this.rtl&&(t.removeClass(l.toThemeProperty("jqx-tree-item-li-"+s)),t.addClass(l.toThemeProperty("jqx-tree-item-li"))),I(e.titleElement).removeClass(l.toThemeProperty("jqx-tree-item-"+s)),I(e.titleElement).addClass(l.toThemeProperty("jqx-tree-item")),I(e.titleElement).removeClass("jqx-item-"+s),I(e.titleElement).addClass(l.toThemeProperty("jqx-item"));var i=I(e.arrow);0<i.length&&l._arrowStyle(i,"",e.isExpanded),e.checkBoxElement&&I(e.checkBoxElement).jqxCheckBox({theme:n}),l.enableRoundedCorners&&(t.removeClass("jqx-rc-all-"+s),t.addClass(l.toThemeProperty("jqx-rc-all")))}),this.host.jqxPanel&&this.panel.jqxPanel({theme:n})},_refreshMapping:function(e,t){for(var i=this.host.find("li"),s=new Array,n=new Array,l=I.data(document.body,"treeItemsStorage"),r=this,a=0;a<i.length;a++){var h,o,d=i[a],m=I(d),c=l[d.id];null!=c&&(n[n.length]=c,null!=e&&1!=e||this._updateItemEvents(this,c),c.level=m.parents("li").length,c.treeInstance=this,o=h=null,-1!=c.titleElement[0].className.indexOf("jqx-fill-state-pressed")&&(I(c.titleElement).removeClass(r.toThemeProperty("jqx-fill-state-pressed")),I(c.titleElement).removeClass(r.toThemeProperty("jqx-tree-item-selected"))),m.children().each(function(){if("ul"==this.tagName||"UL"==this.tagName)return c.subtreeElement=this,I(this).addClass(r.toThemeProperty("jqx-tree-dropdown")),r.rtl&&I(this).addClass(r.toThemeProperty("jqx-tree-dropdown-rtl")),!1}),m.parents().each(function(){if("li"==this.tagName||"LI"==this.tagName)return o=this.id,h=this,!1}),c.parentElement=h,c.parentId=o,c.hasItems=0<I(c.element).find("li").length,null!=c&&(s[a]={element:d,item:c},s["id"+d.id]=s[a]))}this.itemMapping=s,this.items=n},_createItem:function(e){if(null!=e&&null!=e){var t=(t=e.id)||this.createID(),i=e,s=I(e);i.id=t;var n=I.data(document.body,"treeItemsStorage");null==n&&(n=new Array);var l=this.items.length;this.items[l]=new I.jqx._jqxTree.jqxTreeItem,this.treeElements[t]=this.items[l],n[i.id]=this.items[l],I.data(document.body,"treeItemsStorage",n),l=this.items.length;var r=0,a=this,h=null;s.attr("role","treeitem"),s.children().each(function(){if("ul"==this.tagName||"UL"==this.tagName)return a.items[l-1].subtreeElement=this,I(this).addClass(a.toThemeProperty("jqx-tree-dropdown")),a.rtl&&(I(this).addClass(a.toThemeProperty("jqx-tree-dropdown-rtl")),I(this).css("clear","both")),!1}),s.parents().each(function(){if("li"==this.tagName||"LI"==this.tagName)return r=this.id,h=this,!1});var o=null!=(o=e.getAttribute("item-expanded"))&&null!=o&&("true"==o||1==o);i.removeAttribute("item-expanded");var d=null!=(d=e.getAttribute("item-locked"))&&null!=d&&("true"==d||1==d);i.removeAttribute("item-locked");var m=null!=(m=e.getAttribute("item-selected"))&&null!=m&&("true"==m||1==m);i.removeAttribute("item-selected");var c=null!=(c=e.getAttribute("item-disabled"))&&null!=c&&("true"==c||1==c);i.removeAttribute("item-disabled");var u=null!=(u=e.getAttribute("item-checked"))&&null!=u&&("true"==u||1==u),p=e.getAttribute("item-title");(null==p||null==p||"true"!=p&&1!=p)&&(p=!1),i.removeAttribute("item-title");var f=e.getAttribute("item-icon"),g=e.getAttribute("item-iconsize"),n=e.getAttribute("item-label"),s=e.getAttribute("item-value");i.removeAttribute("item-icon"),i.removeAttribute("item-iconsize"),i.removeAttribute("item-label"),i.removeAttribute("item-value");p=this.items[l-1];p.id=t,null==p.value&&(this._valueList&&this._valueList[t]?p.value=this._valueList[t]:p.value=s),p.icon=f,p.iconsize=g,p.parentId=r,p.disabled=c,p.parentElement=h,p.element=e,p.locked=d,p.selected=m,p.checked=u,p.isExpanded=o,(p.treeInstance=this).itemMapping[l-1]={element:i,item:p},this.itemMapping["id"+i.id]=this.itemMapping[l-1];this.rtl&&(I(p.element).css("float","right"),I(p.element).css("clear","both")),0<I(i.firstChild).length?(g=16,p.icon&&(g=p.iconsize,f=I('<img width="'+(g=g||16)+'" height="'+g+'" style="float: left;" class="itemicon" src="'+p.icon+'"/>'),I(i).prepend(f),f.css("margin-right","6px"),this.rtl&&(f.css("margin-right","0px"),f.css("margin-left","6px"),f.css("float","right"))),-1==(o=i.innerHTML.indexOf("<ul"))&&(o=i.innerHTML.indexOf("<UL")),-1==o?(p.originalTitle=i.innerHTML,i.innerHTML='<div style="display: inline-block;">'+i.innerHTML+"</div>",p.titleElement=I(I(i)[0].firstChild)):(f=i.innerHTML.substring(0,o),f=I.trim(f),p.originalTitle=f,f=I('<div style="display: inline-block;">'+f+"</div>"),(o=I(i).find("ul:first")).remove(),i.innerHTML="",I(i).prepend(f),I(i).append(o),p.titleElement=f,this.rtl&&(f.css("float","right"),o.css("padding-right","10px"))),16!==g&&I(p.titleElement).css("line-height",g+"px"),I.jqx.browser.msie&&I.jqx.browser.version<8&&(I(I(i)[0].firstChild).css("display","inline-block"),x=!1,0==this._measureItem.parents().length&&(I(document.body).append(this._measureItem),x=!0),this._measureItem.css("min-width","20px"),this._measureItem[0].innerHTML=I(p.titleElement).text(),v=this._measureItem.width(),p.icon&&(v+=20),0<I(I(p.titleElement).find("img")).length&&(v+=20),I(I(i)[0].firstChild).css("max-width",v+"px"),x&&this._measureItem.remove())):(p.originalTitle="Item",I(i).append(I("<span>Item</span>")),I(i.firstChild).wrap("<span/>"),p.titleElement=I(i)[0].firstChild,I.jqx.browser.msie&&I.jqx.browser.version<8&&I(i.firstChild).css("display","inline-block"));var v=I(p.titleElement),x=this.toThemeProperty("jqx-rc-all");if(this.allowDrag&&v.addClass("draggable"),null==n||null==n?(n=p.titleElement,p.label=I.trim(v.text())):p.label=n,I(i).addClass(this.toThemeProperty("jqx-tree-item-li")),this.rtl&&I(i).addClass(this.toThemeProperty("jqx-tree-item-li-rtl")),x+=" "+this.toThemeProperty("jqx-tree-item")+" "+this.toThemeProperty("jqx-item"),this.rtl&&(x+=" "+this.toThemeProperty("jqx-tree-item-rtl")),v[0].className=v[0].className+" "+x,p.level=I(e).parents("li").length,p.hasItems=0<I(e).find("li").length,this.rtl&&p.parentElement&&this.checkboxes,this.checkboxes){if(!this.host.jqxCheckBox)throw new Error("jqxTree: Missing reference to jqxcheckbox.js.");x=I('<div style="overflow: visible; position: absolute; width: 18px; height: 18px;" tabIndex=0 class="chkbox"/>');x.width(parseInt(this.checkSize)),x.height(parseInt(this.checkSize)),I(i).prepend(x),this.rtl&&(x.css("float","right"),x.css("position","static")),x.jqxCheckBox({hasInput:!1,checked:p.checked,boxSize:this.checkSize,animationShowDelay:0,animationHideDelay:0,disabled:c,theme:this.theme}),this.rtl?p.parentElement?x.css("margin-right","10px"):x.css("margin-right","5px"):v.css("margin-left",parseInt(this.checkSize)+8),p.checkBoxElement=x[0],x[0].treeItem=p;e=v.outerHeight()/2-1-parseInt(this.checkSize)/2;x.css("margin-top",e),I.jqx.browser.msie&&I.jqx.browser.version<8?(v.css("width","1%"),v.css("margin-left",parseInt(this.checkSize)+25)):p.hasItems&&(this.rtl||x.css("margin-left",this.toggleIndicatorSize))}else I.jqx.browser.msie&&I.jqx.browser.version<8&&v.css("width","1%");c&&this.disableItem(p.element),m&&this.selectItem(p.element),I.jqx.browser.msie&&I.jqx.browser.version<8&&(I(i).css("margin","0px"),I(i).css("padding","0px"))}},destroy:function(){this.removeHandler(I(window),"resize.jqxtree"+this.element.id),this.host.removeClass(),this.isTouchDevice()&&(this.removeHandler(this.panel,I.jqx.mobile.getTouchEventName("touchend")+".touchScroll touchcancel.touchScroll"),this.removeHandler(this.panel,I.jqx.mobile.getTouchEventName("touchmove")+".touchScroll"),this.removeHandler(this.panel,I.jqx.mobile.getTouchEventName("touchstart")+".touchScroll"));var s=this,n=this.isTouchDevice();I.each(this.items,function(){var e=I(this.element),t=n?I.jqx.mobile.getTouchEventName("touchend"):"click";s.removeHandler(I(this.checkBoxElement),t);var i=I(this.titleElement);s.removeHandler(e),s.allowDrag&&s._enableDragDrop?(s.removeHandler(i,"mousedown.item"),s.removeHandler(i,"click"),s.removeHandler(i,"dblclick"),s.removeHandler(i,"mouseenter"),s.removeHandler(i,"mouseleave")):s.removeHandler(i);e=I(this.arrow);0<e.length&&(s.removeHandler(e,t),s.removeHandler(e,"selectstart"),s.removeHandler(e,"mouseup"),n||(s.removeHandler(e,"mouseenter"),s.removeHandler(e,"mouseleave")),s.removeHandler(i,"selectstart")),I.jqx.browser.opera&&s.removeHandler(i,"mousedown.item"),"click"!=s.toggleMode&&s.removeHandler(i,"click"),s.removeHandler(i,s.toggleMode)}),this.panel&&(this.panel.jqxPanel("destroy"),this.panel=null),this.host.remove()},_raiseEvent:function(e,t){null==t&&(t={owner:null});e=this.events[e];t.owner=this;e=new I.Event(e);return e.owner=this,e.args=t,this.host.trigger(e)},propertyChangedHandler:function(e,t,i,s){var n,l,r;null!=this.isInitialized&&0!=this.isInitialized&&("submitCheckedItems"==t&&e._updateInputSelection(),"disabled"==t&&e._updateDisabledState(),"theme"==t&&e._applyTheme(i,s),"keyboardNavigation"==t&&(e.enableKeyboardNavigation=s),"width"!=t&&"height"!=t||(e.refresh(),e._initialize(),e._calculateWidth(),e.host.jqxPanel&&(r="fixed",null!=this.height&&"auto"!=this.height||(r="verticalwrap"),null!=this.width&&"auto"!=this.width||(r="fixed"==r?"horizontalwrap":"wrap"),e.panel.jqxPanel({sizeMode:r}))),"touchMode"==t&&(e._isTouchDevice=null,s&&(e.enableHover=!1),e._render()),"source"!=t&&"checkboxes"!=t||null!=this.source&&(n=[],I.each(e.items,function(){this.isExpanded&&(n[n.length]={label:this.label,level:this.level})}),r=e.loadItems(e.source),e.host.jqxPanel?e.panel.jqxPanel("setcontent",r):e.element.innerHTML=r,s=e.disabled,0<(r=e.host.find("ul:first")).length&&(e.createTree(r[0]),e._render()),r=(l=e).animationShowDuration,l.animationShowDuration=0,e.disabled=!1,0<n.length&&I.each(e.items,function(){for(var e,t=0;t<n.length;t++)n[t].label==this.label&&n[t].level==this.level&&(e=l.getItem(this.element),l._expandItem(l,e))}),e.disabled=s,l.animationShowDuration=r),"hasThreeStates"==t&&(e._render(),e._updateCheckStates()),"toggleIndicatorSize"==t&&(e._updateCheckLayout(),e._render()))}})}(jqxBaseFramework),jqxBaseFramework.jqx._jqxTree.jqxTreeItem=function(e,t,i){return{label:null,id:e,parentId:t,parentElement:null,parentItem:null,disabled:!1,selected:!1,locked:!1,checked:!1,level:0,isExpanded:!1,hasItems:!1,element:null,subtreeElement:null,checkBoxElement:null,titleElement:null,arrow:null,prevItem:null,nextItem:null}};