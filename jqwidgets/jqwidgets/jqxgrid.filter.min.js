!function(k){k.extend(k.jqx._jqxGrid.prototype,{_updatefilterrowui:function(e){var t=this.columns.records.length,i=0,r=this;if(this.filterrow){for(var l=0;l<t;l++){var s=this.columns.records[l],a=parseInt(s.width);a<s.minwidth&&(a=s.minwidth),a>s.maxwidth&&(a=s.maxwidth);var o=k(this.filterrow[0].cells[l]);o.css("left",i);var n=!0;if(o.width()==a&&(n=!1),e&&(n=!0),o.width(a),o[0].left=i,s.element&&(o[0].style.width=s.element.style.width,o[0].style.left=s.element.style.left),s.hidden&&s.hideable?o.css("display","none"):i+=a,n)if(s.createfilterwidget&&"custom"==s.filtertype)s.createfilterwidget(s,o);else if(s.filterable){n=function(e,t){t=k(t.children()[0]);t[0]&&(t[0].style.width=a-8+"px",k.jqx.browser.msie&&(t[0].style.width=a-16+"px")),t.attr("disabled",e.disabled)};switch(s.filtertype){case"number":case"input":k(o.children()[0]).width(a),o.find("input")[0].style.width=a-30+"px",k.jqx.browser.msie&&(o.find("input")[0].style.width=a-36+"px"),o.find("input").attr("disabled",r.disabled),k(o.find(".jqx-dropdownlist-state-normal")).jqxDropDownList({theme:r.theme,disabled:r.disabled});break;case"date":case"range":this.host.jqxDateTimeInput?k(o.children()[0]).jqxDateTimeInput({theme:r.theme,disabled:r.disabled,width:a-10}):n(this,o);break;case"textbox":case"default":n(this,o);break;case"list":case"checkedlist":this.host.jqxDropDownList?k(o.children()[0]).jqxDropDownList({theme:r.theme,disabled:r.disabled,width:a-10}):n(this,o);break;case"bool":case"boolean":this.host.jqxCheckBox?k(o.children()[0]).jqxCheckBox({theme:r.theme,disabled:r.disabled}):n(this,o)}}}var d=k(this.filterrow.children()[0]);d.width(parseInt(i)+2),d.height(this.filterrowheight)}},clearfilterrow:function(e){if(this._disablefilterrow=!0,this.columns.records){for(var t=this.columns.records.length,i=0;i<t;i++){var r=this.columns.records[i],l=k(this.filterrow[0].cells[i]);if(("string"!=typeof e||r.displayfield==e)&&r.filterable){function s(e,t){t=k(t.children()[0]);t.val(""),t[0]&&(e["_oldWriteText"+t[0].id]="")}var a,o,n;switch(r.filtertype){case"number":case"input":l.find("input").val(""),this.host.jqxDropDownList&&((a=k(k(k(l).children()[0]).children()[1])).jqxDropDownList("clearSelection"),(o=0)==o&&(this._getfiltersbytype("number"==r.filtertype?"number":"string"),n=(new k.jqx.filter).getoperatorsbyfiltertype("number"==r.filtertype?"numberfilter":"stringfilter"),null!=r.filtercondition&&-1!=(o=n.indexOf(r.filtercondition.toUpperCase()))||(o="number"==r.filtertype?0:2)),a.jqxDropDownList({selectedIndex:o}),a.jqxDropDownList("ensureVisible",o));break;case"date":case"range":this.host.jqxDateTimeInput?k(l.children()[0]).jqxDateTimeInput("setDate",null):s(this,l);break;case"textbox":case"default":s(this,l);break;case"list":this.host.jqxDropDownList?k(l.children()[0]).jqxDropDownList("clearSelection"):s(this,l);break;case"checkedlist":this.host.jqxDropDownList?k(l.children()[0]).jqxDropDownList("checkAll",!1):s(this,l);break;case"bool":case"boolean":this.host.jqxCheckBox?k(l.children()[0]).jqxCheckBox({checked:null}):s(this,l)}}}this._disablefilterrow=!1}},_applyfilterfromfilterrow:function(){if(1!=this._disablefilterrow&&!this.disabled){for(var e=this.columns.records.length,o=this.that,t=0;t<e;t++){var i=new k.jqx.filter,r=this.columns.records[t];if(r.filterable&&null!==r.datafield){var l,s,a,n,d,f,c,h,p=o._getcolumntypebydatafield(r),u=o._getfiltertype(p),g=!0,p=(r.filtertype,function(e,t,i){var r=!0;if(e._filterwidget){var l=e._filterwidget.val();if(""!=l){var s="stringfilter"==t?"contains":"equal";if("numericfilter"==t&&","==o.gridlocalization.decimalseparator&&0<=l.indexOf(o.gridlocalization.decimalseparator)&&(l=l.replace(o.gridlocalization.decimalseparator,".")),"stringfilter"!=t){var a=0;if(-1!=l.indexOf(">")&&(s="greater_than",a=1),-1!=l.indexOf("<")&&(s="less_than",a=1),-1!=l.indexOf("=")&&(a="greater_than"==s?(s="greater_than_or_equal",2):"less_than"==s?(s="less_than_or_equal",2):(s="equal",1)),0!=a&&(l=l.substring(a)).length<1)return!1}null!=e.filtercondition&&(s=e.filtercondition),s="datefilter"==t?i.createfilter(t,l,s,null,e.cellsformat,o.gridlocalization):i.createfilter(t,l,s),i.addfilter(1,s)}else r=!1}return r});switch(r.filtertype){case"range":case"date":r._filterwidget.jqxDateTimeInput?"range"==r.filtertype?null!=(y=r._filterwidget.jqxDateTimeInput("getRange"))&&null!=y.from&&null!=y.to?(b="GREATER_THAN_OR_EQUAL",(l=new Date(0)).setHours(0),l.setMinutes(0),l.setFullYear(y.from.getFullYear(),y.from.getMonth(),y.from.getDate()),(h=new Date(0)).setHours(0),h.setMinutes(0),h.setFullYear(y.to.getFullYear(),y.to.getMonth(),y.to.getDate()),h.setHours(y.to.getHours()),h.setMinutes(y.to.getMinutes()),h.setSeconds(y.to.getSeconds()),s=i.createfilter(u,l,b),i.addfilter(0,s),h=i.createfilter(u,h,"LESS_THAN_OR_EQUAL"),i.addfilter(0,h)):g=!1:null!=(y=r._filterwidget.jqxDateTimeInput("getDate"))?((l=new Date(0)).setHours(0),l.setMinutes(0),l.setFullYear(y.getFullYear(),y.getMonth(),y.getDate()),r._filterwidget.jqxDateTimeInput("showTimeButton")&&(l.setHours(y.getHours()),l.setMinutes(y.getMinutes())),b="EQUAL",null!=r.filtercondition&&(b=r.filtercondition),s=i.createfilter(u,l,b),r._filterwidget.jqxDateTimeInput("showTimeButton")&&(s=i.createfilter(u,l,b,null,r.cellsformat)),i.addfilter(0,s)):g=!1:g=p(r,u,i);break;case"input":r._filterwidget?(y=r._filterwidget.find("input").val(),a=r._filterwidget.find(".filter").jqxDropDownList("selectedIndex"),d=i.getoperatorsbyfiltertype(u)[a],o.updatefilterconditions&&(null!=(n=o.updatefilterconditions(u,i.getoperatorsbyfiltertype(u)))&&i.setoperatorsbyfiltertype(u,n),d=i.getoperatorsbyfiltertype(u)[a]),f="NULL"==d||"NOT_NULL"==d,c="EMPTY"==d||"NOT_EMPTY"==d,null!=y&&0<y.length||f||c?(s=i.createfilter(u,y,d,null,r.cellsformat,o.gridlocalization),i.addfilter(0,s)):g=!1):g=!1;break;case"number":r._filterwidget?(y=r._filterwidget.find("input").val(),","==o.gridlocalization.decimalseparator&&0<=y.indexOf(o.gridlocalization.decimalseparator)&&(y=y.replace(o.gridlocalization.decimalseparator,".")),a=r._filterwidget.find(".filter").jqxDropDownList("selectedIndex"),d=i.getoperatorsbyfiltertype(u)[a],o.updatefilterconditions&&(null!=(n=o.updatefilterconditions(u,i.getoperatorsbyfiltertype(u)))&&i.setoperatorsbyfiltertype(u,n),d=i.getoperatorsbyfiltertype(u)[a]),f="NULL"==d||"NOT_NULL"==d,c="EMPTY"==d||"NOT_EMPTY"==d,null!=y&&0<y.length||f||c?(s=i.createfilter(u,new Number(y),d,null,r.cellsformat,o.gridlocalization),i.addfilter(0,s)):g=!1):g=!1;break;case"textbox":case"default":g=p(r,u,i);break;case"bool":case"boolean":r._filterwidget.jqxCheckBox?null!=(y=r._filterwidget.jqxCheckBox("checked"))?(b="equal",D=i.createfilter(u,y,b),i.addfilter(1,D)):g=!1:g=p(r,u,i);break;case"list":0<(m=r._filterwidget.jqxDropDownList("listBox")).selectedIndex?(y=(h=m.getItem(m.selectedIndex)).label,v=h.value,b=""===y?"NULL":"equal",D=i.createfilter(u,y,b),i.addfilter(1,D),v!==y&&(D.data=v)):g=!1;break;case"checkedlist":if(r._filterwidget.jqxDropDownList){var m,x=(m=r._filterwidget.jqxDropDownList("listBox")).getCheckedItems();if(0==x.length){for(var w=1;w<m.items.length;w++){var y=m.items[w].label,v=m.items[w].value,b="not_equal";""===y&&(b="NOT_NULL");var D=i.createfilter(u,y,b);v!==y&&(D.data=v),i.addfilter(0,D)}g=!0}else if(x.length!=m.items.length)for(w=0;w<x.length;w++){y=x[w].label,v=x[w].value,b="equal";""===y&&(b="NULL");D=i.createfilter(u,y,b);v!==y&&(D.data=v),i.addfilter(1,D)}else g=!1}else g=p(r,u,i)}this._loading||(g?this.addfilter(r.displayfield,i,!1):this.removefilter(r.displayfield,!1))}}this._loading||this.applyfilters("filterrow")}},_updatefilterrow:function(){var e=k('<div style="position: relative;" id="row00'+this.element.id+'"></div>'),t=0,i=this.columns.records.length,r=this.toThemeProperty("jqx-grid-cell");r+=" "+this.toThemeProperty("jqx-grid-cell-pinned"),r+=" "+this.toThemeProperty("jqx-grid-cell-filter-row");var l=i+10,s=new Array,a=this.that;this.filterrow[0].cells=s,e.height(this.filterrowheight),this.filterrow.children().detach(),this.filterrow.append(e),this._filterrowcache||(this._filterrowcache=new Array),this._initcolumntypes();for(var o=!1,n=new Array,d=document.createDocumentFragment(),f=0;f<i;f++){var c=this.columns.records[f],h=c.width;h<c.minwidth&&(h=c.minwidth),h>c.maxwidth&&(h=c.maxwidth);var p=document.createElement("div");p.style.overflow="hidden",p.style.position="absolute",p.style.height="100%",p.className=r,p=k(p),d.appendChild(p[0]),p[0].style.left=t+"px",this.rtl?(p.css("z-index",l++),p.css("border-left-width","1px")):p.css("z-index",l--),"auto"==h&&(h=0),p[0].style.width=parseFloat(h)+"px",p[0].left=t,c.hidden&&c.hideable?p.css("display","none"):t+=h,s[s.length]=p[0];var u,g=!0;this.rtl?(this.groupable&&(u=this.showrowdetailscolumn&&this.rowdetails?1:0,this.groups.length+u+f>i-1&&(g=!1)),this.showrowdetailscolumn&&this.rowdetails&&f==i-1&&(g=!1)):(this.groupable&&(u=this.showrowdetailscolumn&&this.rowdetails?1:0,this.groups.length+u>f&&(g=!1)),this.showrowdetailscolumn&&this.rowdetails&&0==f&&(g=!1)),g&&("custom"==c.filtertype&&c.createfilterwidget?c.createfilterwidget(c,p,function(){a._applyfilterfromfilterrow()}):c.filterable&&(this._filterrowcache[c.datafield]?(o=!0,p.append(this._filterrowcache[c.datafield]),c._filterwidget=this._filterrowcache[c.datafield]):(this._addfilterwidget(c,p,h),n[c.datafield]=c._filterwidget)))}e[0].appendChild(d),this._filterrowcache=n,k.jqx.browser.msie&&k.jqx.browser.version<8&&e.css("z-index",l--),e.width(parseFloat(t)+2),this.filterrow.addClass(r),this.filterrow.css("border-top-width","1px"),this.filterrow.css("border-right-width","0px"),o&&this._updatefilterrowui(!0)},_getfilterdataadapter:function(s){var a,e=!!this.source._source;if(o=e?(t={localdata:k.extend(!0,{},this.source.records),datatype:this.source.datatype,async:!1},a=this,new k.jqx.dataAdapter(t,{autoBind:!1,autoSort:!0,autoSortField:s.displayfield,async:!1,uniqueDataFields:[s.displayfield],beforeLoadComplete:function(e){var t=new Array;if(s.cellsformat){for(var i=a._getcolumntypebydatafield(s),r=0;r<e.length;r++){t.push(e[r]);var l=e[r][s.displayfield];e[r][s.displayfield+"JQValue"]=l,"date"===i?e[r][s.displayfield]=null!=l?o.formatDate(l,s.cellsformat,a.gridlocalization):"":"number"!==i&&"float"!==i&&"int"!==i||(e[r][s.displayfield]=null!=l?o.formatNumber(l,s.cellsformat,a.gridlocalization):"")}return t}return e}})):new k.jqx.dataAdapter(this.source,{autoBind:!1,uniqueDataFields:[s.displayfield],autoSort:!0,autoSortField:s.displayfield,async:!1}),s.filteritems&&0<s.filteritems.length)var t={localdata:s.filteritems,datatype:this.source.datatype,async:!1},o=new k.jqx.dataAdapter(t,{autoBind:!1,async:!1});else if(s.filteritems){if(s.filteritems._source)return s.filteritems._options.autoBind=!1,s.filteritems._options.async=!1,s.filteritems;if(k.isFunction(s.filteritems))return s.filteritems()}return o},refreshfilterrow:function(){if(this.showfilterrow){this.refreshingfilter=!0,this._updatefilterrowui(),this._updatelistfilters(!0,!0);for(var e=this.that,t=this.columns.records.length,i=0;i<t;i++){var r=this.columns.records[i];if(r.filterable&&r.filter){var l=r.filter.getfilters();if(0<l.length){var s,a=l[0].value,o=r._filterwidget,n=r._filterwidget.parent();if(null!=o)switch(r.filtertype){case"number":n.find("input").val(a),this.host.jqxDropDownList&&(s=r.filter.getoperatorsbyfiltertype("numericfilter"),o.find(".filter").jqxDropDownList("selectIndex",s.indexOf(l[0].condition)));break;case"input":n.find("input").val(a),this.host.jqxDropDownList&&(s=r.filter.getoperatorsbyfiltertype("stringfilter"),o.find(".filter").jqxDropDownList("selectIndex",s.indexOf(l[0].condition)));break;case"date":case"range":this.host.jqxDateTimeInput?null!=(a=r.filter.getfilterat(0).filtervalue)&&(l=r.filter.getfilterat(1)?r.filter.getfilterat(1).filtervalue:a,"range"==r.filtertype?k(n.children()[0]).jqxDateTimeInput("setRange",new Date(a),new Date(l)):k(n.children()[0]).jqxDateTimeInput("setDate",new Date(a))):o.val(a);break;case"textbox":case"default":o.val(a),e["_oldWriteText"+o[0].id]=a;break;case"bool":case"boolean":this.host.jqxCheckBox?k(n.children()[0]).jqxCheckBox({checked:a}):o.val(a)}}}}this.refreshingfilter=!1}},_destroyedfilters:function(){this.that;for(var e=this.columns.records.length,t=0;t<e;t++){var i,r=this.columns.records[t];r.filterable&&(i=r._filterwidget,"list"==r.filtertype||"checkedlist"==r.filtertype?(this.removeHandler(i,"select"),this.removeHandler(i,"close"),i.jqxDropDownList("destroy")):"date"==r.filtertype||"range"==r.filtertype?(this.removeHandler(i,"valueChanged"),i.jqxDateTimeInput("destroy")):"bool"==r.filtertype?(this.removeHandler(i,"change"),i.jqxCheckBox("destroy")):"number"==r.filtertype||"input"===r.filtertype?(r=i.find(".jqx-input"),this.removeHandler(r,"keydown"),k(i.children()[1]).jqxDropDownList("destroy")):this.removeHandler(i,"keydown"),i.remove())}},_updatelistfilters:function(e,t){for(var i=this.that,r=this.columns.records.length,l=0;l<r;l++){var s=this.columns.records[l];if(s.filterable&&("list"==s.filtertype||"checkedlist"==s.filtertype)){var a=s._filterwidget;if(e){var o=this._getfilterdataadapter(s);a.jqxDropDownList({source:o});var n=!0;if((c=a.jqxDropDownList("getItems")).length!=o.records.length+1&&(n=!1),n)for(var d=1;d<c.length;d++)if(c[d].label!=o.records[d-1][s.displayfield]){n=!1;break}if(n&&!t)continue}else if(null==s.filter){a.jqxDropDownList("renderSelection");continue}var f="checkedlist"==s.filtertype,c=a.jqxDropDownList("getItems"),h=a.jqxDropDownList("listBox");if(a.jqxDropDownList("dataBind"),f){a.jqxDropDownList({selectionRenderer:function(){return i.gridlocalization.filterselectstring}}),null==h.getItem(this.gridlocalization.filterselectallstring)&&h.insertAt({label:this.gridlocalization.filterselectallstring},0);f=k('<span style="top: 2px; position: relative; color: inherit; border: none; background-color: transparent;">'+this.gridlocalization.filterselectstring+"</span>");if(f.addClass(this.toThemeProperty("jqx-item")),a.jqxDropDownList("setContent",f),h.checkAll(!1),s.filter){for(var p=s.filter.getfilters(),d=0;d<h.items.length;d++){var u=h.items[d].label,g=void 0;k.each(p,function(){var e;"NOT_EQUAL"==this.condition?e=u!=this.value:"EQUAL"==this.condition&&(e=u==this.value),g=null==g&&void 0!==e?e:"EQUAL"==this.condition?g||e:g&&e}),g?h.checkIndex(d,!1,!1):h.uncheckIndex(d,!1,!1)}h._updateCheckedItems();f=h.getCheckedItems().length;h.items.length!=f&&0<f&&h.host.jqxListBox("indeterminateIndex",0,!0,!1)}}else if(null==h.getItem(this.gridlocalization.filterchoosestring)&&h.insertAt({label:this.gridlocalization.filterchoosestring,value:""},0),a.jqxDropDownList({selectedIndex:0}),s.filter){for(var p=s.filter.getfilters(),m=-1,d=0;d<h.items.length;d++){u=h.items[d].label;k.each(p,function(){return"NOT_EQUAL"==this.condition||(u==this.value?(m=d,!1):void 0)})}-1!=m&&h.selectIndex(m)}c.length<8?a.jqxDropDownList("autoDropDownHeight",!0):a.jqxDropDownList("autoDropDownHeight",!1)}}},_renderfilter:function(){var a=this,e=k("<div style='display: flex; height: calc(100% - 10px); margin-top: 5px; align-items: center; position: relative; margin-left: 4px;'><input style='width: 200px; height: 100%; direction: ltr;' role='textbox' type='text'/><div style='cursor: pointer; height: 100%;'><div></div></div></div>"),o=e.find("input"),n=e.find("div:first");e.addClass(this.toThemeProperty("jqx-rc-all")),e.addClass(this.toThemeProperty("jqx-widget")),e.addClass(this.toThemeProperty("jqx-input-group")),o.addClass(this.toThemeProperty("jqx-input")),o.addClass(this.toThemeProperty("jqx-rc-l")),o.addClass(this.toThemeProperty("jqx-input-group-addon")),o.addClass(this.toThemeProperty("jqx-widget")),o.addClass(this.toThemeProperty("jqx-widget-content")),n.addClass(this.toThemeProperty("jqx-fill-state-normal")),n.addClass(this.toThemeProperty("jqx-rc-r")),n.addClass(this.toThemeProperty("jqx-input-group-addon")),n.find("div").addClass(this.toThemeProperty("jqx-icon-search")),this.rtl&&(o.addClass(this.toThemeProperty("jqx-rtl")),o.css("direction","rtl")),this.filterbar.children().remove(),this.filterbutton=n;for(var t=new Array,i=0;i<a.columns.records.length;i++)a.columns.records[i].datafield&&a.columns.records[i].filterable&&t.push({label:a.columns.records[i].text,value:a.columns.records[i].displayfield});var r=t.length<10,l=k("<div style='position: relative;  display: none; margin-right: 4px; margin-left: 4px; float: left;'>"+this.gridlocalization.filtersearchstring+"</div>");this.filterbar.append(l);var d=k("<div class='filtercolumns' style='position: relative; margin-top:5px; margin-left:4px; margin-right: 4px; float: left;'></div>");this.filterbar.append(d),d.jqxDropDownList&&d.jqxDropDownList({theme:this.theme,enableBrowserBoundsDetection:!0,autoDropDownHeight:r,rtl:a.rtl,dropDownWidth:220,selectedIndex:0,width:"auto",height:25,source:t,displayMember:"label",valueMember:"value"}),this.filtercolumnsList=d,o[0].parentElement.insertBefore(l[0],o[0]);function s(e){a.filterinput.val("");for(var t=0;t<a.dataview.filters.length;t++){var i=a.dataview.filters[t];i.datafield===e&&a.filterinput.val(i.filter.getfilterat(0).filtervalue)}}a.filterHeight,a._updateSimpleFilter=s,this.addHandler(d,"select",function(e){e=e.args.item.value;s(e)}),"simple"===this.filterbarmode?(this.filtercolumnsList.hide(),l.show()):(this.filtercolumnsList.show(),l.hide());function f(){if(!n.hasClass("jqx-fill-state-disabled")){var e=o.val();d.jqxDropDownList&&(i=d.jqxDropDownList("getSelectedItem"));function t(e,t,i){var r=new k.jqx.filter,l=a._getcolumnbydatafield(e),l=a._getfiltertype(l);return t="datefilter"==l?r.createfilter(l,t,"EQUAL",null,e.cellsFormat,a.gridlocalization):"numericfilter"==l||"booleanfilter"==l?("numericfilter"==l&&(","==a.gridlocalization.decimalseparator&&0<=t.indexOf(a.gridlocalization.decimalseparator)&&(t=t.replace(a.gridlocalization.decimalseparator,".")),0<=t.indexOf(a.gridlocalization.currencysymbol)&&(t=t.replace(a.gridlocalization.currencysymbol,"")),0<=t.indexOf(a.gridlocalization.percentagesymbol)&&(t=t.replace(a.gridlocalization.percentagesymbol,""))),r.createfilter(l,t,"EQUAL",null,e.cellsFormat,a.gridlocalization)):r.createfilter(l,t,"CONTAINS"),r.operator=i,r.addfilter(0,t),r}var i;if("simple"!==a.filterbarmode)i&&(s=t(i=i.value,e,"and"),0<e.length?(a.removefilter(i),a.addfilter(i,s)):a.removefilter(i),a.applyfilters());else{if(a.clearfilters(!1,!1),0<e.length)for(var r=0;r<a.columns.records.length;r++){var l=a.columns.records[r],s=t(l,e,"or");a.addfilter(l.datafield,s)}a.applyfilters()}0==a.dataview.filters.length?a.filtericon.fadeOut(200):a.filtericon.fadeIn(200)}}o.keydown(function(e){if(13===e.keyCode)return f(),e.preventDefault&&e.preventDefault(),!1}),n.click(function(){f()}),this.filterinput=o,this.filterbar.append(e);l=k("<div style='float: left; width: 16px; height: 16px; position: relative; margin: 3px;'></div>");l.attr("title",a.gridlocalization.filterclearstring),l.addClass(a.toThemeProperty("jqx-icon-close")),e.append(l),l.hide(),(a.filtericon=l).click(function(){a.clearfilters(),a.filtericon.fadeOut(200)}),0<a.dataview.filters.length&&s(a.dataview.filters[0].datafield)},_renderfiltercolumn:function(){var r=this.that;this.filterable&&this.columns.records&&k.each(this.columns.records,function(e,t){var i=!1;r.autoshowfiltericon?this.filter?(k(this.filtericon).show(),i=!0):k(this.filtericon).hide():this.filterable&&(k(this.filtericon).show(),i=!0),this.element.removeAttribute("filter"),i&&this.element.setAttribute("filter",!0),"right"!=this.align||this.renderer||this.element&&(this.element.firstChild.firstChild.style.marginRight=i?"18px":"2px")})},_initcolumntypes:function(){if(this.columns&&this.columns.records){var e=this.source._source.datafields;if(e)for(var t=0;t<this.columns.records.length;t++){var i,r=this.columns.records[t];r.datatype||(i="",k.each(e,function(){if(this.name==r.displayfield)return this.type&&(i=this.type),!1}),r.datatype=""!=i?i:"")}}},_getcolumntypebydatafield:function(e){var t=this.that,i="string",t=t.source.datafields||(t.source._source?t.source._source.datafields:null);if(t){var r="";if(k.each(t,function(){if(this.name==e.displayfield)return this.type&&(r=this.type),!1}),r)return r}if(null!=e){if(null==this.dataview.cachedrecords)return i;var l=null;if(this.virtualmode)k.each(this.dataview.cachedrecords,function(){return l=this[e.displayfield],!1});else{if(0==this.dataview.cachedrecords.length)return i;if(null!=(l=this.dataview.cachedrecords[0][e.displayfield])&&""==l.toString())return"string"}if(null!=l)if("boolean"==typeof l)i="boolean";else if(k.jqx.dataFormat.isNumber(l))i="number";else{t=new Date(l);if("NaN"==t.toString()||"Invalid Date"==t.toString())if(k.jqx.dataFormat){if(null!=(t=k.jqx.dataFormat.tryparsedate(l))){if(t&&t.getFullYear()&&1970==t.getFullYear()&&0==t.getMonth()&&1==t.getDate()){t=new Number(l);return isNaN(t)?"string":"number"}return"date"}i="string"}else i="string";else i="date"}}return i},_getfiltersbytype:function(e){var t=this.that,i="";switch(e){case"number":case"float":case"int":i=t.gridlocalization.filternumericcomparisonoperators;break;case"date":i=t.gridlocalization.filterdatecomparisonoperators;break;case"boolean":case"bool":i=t.gridlocalization.filterbooleancomparisonoperators;break;case"string":default:i=t.gridlocalization.filterstringcomparisonoperators}return i},_getfiltertype:function(e){var t="stringfilter";switch(e){case"number":case"int":case"float":case"decimal":t="numericfilter";break;case"boolean":case"bool":t="booleanfilter";break;case"date":case"time":case"range":t="datefilter";break;case"string":case"input":t="stringfilter"}return t},_buildfilter:function(e,t,i){var r=k(t).find(".filter1"),l=k(t).find(".filter2"),s=k(t).find(".filter3"),a=k(t).find(".filtertext1"+e.element.id),o=k(t).find(".filtertext2"+e.element.id),n=a.val(),d=o.val(),f=e._getcolumntypebydatafield(i),c=(e._getfiltersbytype(f),new k.jqx.filter),h=e._getfiltertype(f);if("default"===e.filtermode&&"list"!==i.filtertype&&"checkedlist"!==i.filtertype){var p=r.jqxDropDownList("selectedIndex"),u=l.jqxDropDownList("selectedIndex"),a=s.jqxDropDownList("selectedIndex"),o=null;!e.updatefilterconditions||null!=(g=e.updatefilterconditions(h,c.getoperatorsbyfiltertype(h)))&&c.setoperatorsbyfiltertype(h,g);var l=!1,g=c.getoperatorsbyfiltertype(h)[p],s=c.getoperatorsbyfiltertype(h)[a],p="NULL"==g||"NOT_NULL"==g,a="EMPTY"==g||"NOT_EMPTY"==g;null==g&&(g=c.getoperatorsbyfiltertype(h)[0]),null==s&&(s=c.getoperatorsbyfiltertype(h)[0]),(0<n.length||p||a)&&(o=c.createfilter(h,n,g,null,i.cellsformat,e.gridlocalization),c.addfilter(u,o),l=!0);g="NULL"==s||"NOT_NULL"==s,o="EMPTY"==s||"NOT_EMPTY"==s;(0<d.length||g||o)&&(f=c.createfilter(h,d,s,null,i.cellsformat,e.gridlocalization),c.addfilter(u,f),l=!0),l?(m=i.displayfield,this.addfilter(m,c,!0)):this._clearfilter(e,t,i)}else if("excel"===e.filtermode||"list"===i.filtertype||"checkedlist"===i.filtertype){var m,t=!1,x=r.data().jqxListBox.instance,r="excel"===this.filtermode||"checkedlist"===i.filtertype,w=x.getCheckedItems();if(r||(w=x.getSelectedItems()),0==w.length){for(var y=1;y<x.items.length;y++){void 0===(b=x.items[y].value)&&(b="");var v="not_equal";b&&b.indexOf&&(0<=b.indexOf("|")||0<=b.indexOf(" AND ")||0<=b.indexOf(" OR ")||0<=b.indexOf(" and ")||0<=b.indexOf(" or "))&&(b=(b=(b=(b=(b=b.replace("|","")).replace("AND","")).replace("OR","")).replace("and","")).replace("or",""),v="equal"),D="datefilter"==h?c.createfilter(h,b,v,null,i.cellsformat,e.gridlocalization):c.createfilter(h,b,v,null),c.addfilter(0,D)}t=!0}else if(w.length!=x.items.length){t=!0;for(var b,D,y=0;y<w.length;y++)e.gridlocalization.filterselectallstring!==w[y].value&&(void 0===(b=w[y].value)&&(b=""),v="equal",D="datefilter"==h?c.createfilter(h,b,v,null,i.cellsformat,e.gridlocalization):c.createfilter(h,b,v,null),c.addfilter(1,D))}else t=!1;t?(m=i.displayfield,this.addfilter(m,c,!0)):(m=i.displayfield,this.removefilter(m,!0))}},_clearfilter:function(e,t,i){i=i.displayfield;this.removefilter(i,!0)},addfilter:function(e,t,i){if(this._loading)throw new Error("jqxGrid: "+this.loadingerrormessage);var r=this.getcolumn(e),l=this._getcolumn(e);null!=r&&null!=r&&(r.filter=t,l.filter=t,this.dataview.addfilter(e,t),1==i&&null!=i&&this.applyfilters("add"))},removefilter:function(e,t){if(this._loading)throw new Error("jqxGrid: "+this.loadingerrormessage);var i=this.getcolumn(e),r=this._getcolumn(e);null!=i&&null!=i&&null!=i.filter&&(this.dataview.removefilter(e,i.filter),i.filter=null,r.filter=null,this.showfilterrow&&this.clearfilterrow(e),1!=t&&!1===t||this.applyfilters("remove"))},applyfilters:function(e){if(0<=this.dataview.filters.length&&(this.virtualmode||!this.source.localdata)&&null!=this.source&&this.source.filter&&(t=-1,this.pageable?(t=this.dataview.pagenum,this.dataview.pagenum=0):(this.vScrollInstance.setPosition(0),this.loadondemand=!0,this._renderrows(this.virtualsizeinfo)),this.pageable&&this.virtualmode&&(this.dataview.pagenum=0),this.source.filter(this.dataview.filters,this.dataview.records,this.dataview.records.length),this.pageable&&!this.virtualmode&&(this.dataview.pagenum=t)),this._cellscache=new Array,this.dataview.clearsortdata&&this.dataview.clearsortdata(),this.virtualmode)return this.pageable&&(this.dataview.updateview(),this.gotopage&&this.gotopage(0)),this.rendergridcontent(!1,!1),this.showfilterrow&&"string"!=typeof e&&k.isEmptyObject(e)&&this.refreshfilterrow(),this._postrender("filter"),void this._raiseEvent(13,{filters:this.dataview.filters});var t;this.selectedrowindexes,this.that;this.dataview.refresh(),this.dataview.clearsortdata&&this.sortcolumn&&this.sortdirection&&(t=this.sortdirection.ascending?"asc":"desc",this._loading?this.sortby(this.sortcolumn,t,null,!1,!1):this.sortby(this.sortcolumn,t,null,!1)),this.pageable&&(this.dataview.updateview(),this.gotopage&&(this.gotopage(0),this.updatepagerdetails())),this._updaterowsproperties(),!this.groupable||this.groupable&&0==this.groups.length?(this._rowdetailscache=new Array,this.virtualsizeinfo=null,this._pagescache=new Array,this.columns&&this.columns.records&&0<this.columns.records.length&&!this.columns.records[0].filtericon&&(this.prerenderrequired=!0),this.rendergridcontent(!0,!1),this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo),this.showaggregates&&this._updatecolumnsaggregates&&this._updatecolumnsaggregates()):(this.collapseallgroups(),this._rowdetailscache=new Array,this._render(!0,!0,!1,!1,!1),this.showfilterrow&&this._updatefocusedfilter(),this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo)),this._postrender("filter"),this.showfilterrow&&"string"!=typeof e&&k.isEmptyObject(e)&&this.refreshfilterrow(),this._raiseEvent(13,{filters:this.dataview.filters})},getfilterinformation:function(){for(var e=new Array,t=0;t<this.dataview.filters.length;t++){var i=this.getcolumn(this.dataview.filters[t].datafield);e[t]={filter:this.dataview.filters[t].filter,datafield:i.datafield,displayfield:i.displayfield,filtercolumn:i.datafield,filtercolumntext:i.text}}return e},clearfilters:function(e){var t,i=this.that;this.showfilterrow&&this.clearfilterrow(),this.columns.records&&(t=1==e||!1!==e,k.each(this.columns.records,function(){i.removefilter(this.displayfield,!t)})),!1!==e&&(1!=e&&!1===e||this.applyfilters("clear"))},_destroyfilterpanel:function(){var e=k(k.find("#filterclearbutton"+this.element.id)),t=k(k.find("#filterbutton"+this.element.id)),i=k(k.find("#filter1"+this.element.id)),r=k(k.find("#filter2"+this.element.id)),l=k(k.find("#filter3"+this.element.id)),s=k(k.find(".filtertext1"+this.element.id)),a=k(k.find(".filtertext2"+this.element.id));0<s.length&&0<a.length&&(s.removeClass(),a.removeClass(),s.remove(),a.remove()),0<e.length&&(e.jqxButton("destroy"),t.jqxButton("destroy"),this.removeHandler(e,"click"),this.removeHandler(t,"click")),0<i.length&&i.jqxDropDownList("destroy"),0<r.length&&r.jqxDropDownList("destroy"),0<l.length&&l.jqxDropDownList("destroy");i=k(k.find("#filter1"+this.element.id+"ex")),r=k(k.find("#filter2"+this.element.id+"ex")),l=k(k.find("#filter3"+this.element.id+"ex"));0<i.length&&i.jqxDropDownList("destroy"),0<r.length&&r.jqxDropDownList("destroy"),0<l.length&&l.jqxDropDownList("destroy")},_updatefilterpanel:function(i,t,r){null!=i&&null!=i||(i=this);var e=i._getcolumntypebydatafield(r),l=i._getfiltersbytype(e);if(!i.host.jqxDropDownList)throw new Error("jqxGrid: Missing reference to jqxdropdownlist.js.");i.filterpanel.detach(),i.excelfilterpanel.detach(),r.filterpanel&&r.filterpanel.detach(),k(t).children().detach();var s=k(i.menuitemsarray[6]);k(s).css("height","190px"),r.createfilterpanel&&!r.filterpanel&&(u=k("<div class='filter' style='margin-left: 7px;'></div>"),k(t).append(u),r.createfilterpanel(r.displayfield,u),r.filterpanel=u),"list"===r.filtertype||"checkedlist"===r.filtertype?k(t).append(i.excelfilterpanel):"custom"!==r.filtertype?k(t).append(i.filterpanel):r.filterpanel&&k(t).append(r.filterpanel);var a,o,n=k(t),d=n.find("#filterclearbutton"+i.element.id),f=n.find("#filterbutton"+i.element.id),c=n.find(".filter1"),h=n.find(".filter2"),s=n.find(".filter3"),p=n.find(".filtertext1"+i.element.id),u=n.find(".filtertext2"+i.element.id);if(this._hasdatefilter&&"list"!==r.filtertype&&"checkedlist"!==r.filtertype&&"custom"!==r.filtertype&&(m=p.parent(),x=u.parent(),m.children().remove(),x.children().remove(),o="date"==r.filtertype?(i._showwhere.text(i.gridlocalization.filtershowrowdatestring),o=k("<div class='filtertext1"+i.element.id+"' style=''></div>"),m.append(o),(a=function(e){var t={calendar:i.gridlocalization,todayString:i.gridlocalization.todaystring,clearString:i.gridlocalization.clearstring};e.jqxDateTimeInput({disabled:i.disabled,firstDayOfWeek:i.gridlocalization.firstDay,localization:t,rtl:i.rtl,width:i._filterpanelwidth-10,height:this.filterMenuItemsHeight,value:null,formatString:r.cellsformat,theme:i.theme})})(o),k("<div class='filtertext2"+i.element.id+"' style=''></div>")):(i._showwhere.text(i.gridlocalization.filtershowrowstring),o=k("<input autocomplete='off' class='filtertext1"+i.element.id+"' style='box-sizing: content-box; height: 16px; padding: 3px;' type='text'></input>"),m.append(o),(a=function(e){e.addClass(i.toThemeProperty("jqx-input")),e.addClass(i.toThemeProperty("jqx-filter-input jqx-widget-content")),e.addClass(i.toThemeProperty("jqx-rc-all")),e.width(i._filterpanelwidth-18),e[0].style.height=this.filterMenuItemsHeight+"px"})(o),k("<input autocomplete='off' class='filtertext2"+i.element.id+"' style='box-sizing: content-box; height: 16px; padding: 3px;' type='text'></input>")),x.append(o),a(o),p=n.find(".filtertext1"+i.element.id),u=n.find(".filtertext2"+i.element.id)),"date"!=r.filtertype?(p.val(""),u.val("")):(p.val(null),u.val(null)),this.removeHandler(f,"click"),this.addHandler(f,"click",function(){i._buildfilter(i,t,r),i._closemenu()}),this.removeHandler(d,"click"),this.addHandler(d,"click",function(){i._clearfilter(i,t,r),i._closemenu()}),this.removeHandler(f,"keydown"),this.addHandler(f,"keydown",function(e){13===e.keyCode&&(i._buildfilter(i,t,r),i._closemenu())}),this.removeHandler(d,"keydown"),this.addHandler(d,"keydown",function(e){13===e.keyCode&&(i._clearfilter(i,t,r),i._closemenu())}),this.removeHandler(p,"keydown"),this.addHandler(p,"keydown",function(e){13===e.keyCode&&f.trigger("click"),27===e.keyCode&&i._closemenu()}),this.removeHandler(u,"keydown"),this.addHandler(u,"keydown",function(e){13===e.keyCode&&f.trigger("click"),27===e.keyCode&&i._closemenu()}),"default"===this.filtermode&&"list"!==r.filtertype&&"checkedlist"!==r.filtertype&&"custom"!==r.filtertype){c.jqxDropDownList("source")!=l&&(c.jqxDropDownList({enableBrowserBoundsDetection:!1,source:l}),s.jqxDropDownList({enableBrowserBoundsDetection:!1,source:l})),"boolean"==e||"bool"==e?(c.jqxDropDownList({autoDropDownHeight:!0,selectedIndex:0}),s.jqxDropDownList({autoDropDownHeight:!0,selectedIndex:0})):(g=!1,l&&l.length&&l.length<5&&(g=!0),c.jqxDropDownList({autoDropDownHeight:g,selectedIndex:2}),s.jqxDropDownList({autoDropDownHeight:g,selectedIndex:2})),h.jqxDropDownList({selectedIndex:0});var n=r.filter,l=new k.jqx.filter,g="";switch(e){case"number":case"int":case"float":case"decimal":g="numericfilter",w=l.getoperatorsbyfiltertype("numericfilter");break;case"boolean":case"bool":g="booleanfilter",w=l.getoperatorsbyfiltertype("booleanfilter");break;case"date":case"time":g="datefilter",w=l.getoperatorsbyfiltertype("datefilter");break;case"string":g="stringfilter",w=l.getoperatorsbyfiltertype("stringfilter")}if(null!=n){var m=n.getfilterat(0),x=n.getfilterat(1);n.getoperatorat(0);if(i.updatefilterconditions){var w=[],y=i.updatefilterconditions(g,w);if(null!=y){for(var v=0;v<y.length;v++)y[v]=y[v].toUpperCase();n.setoperatorsbyfiltertype(g,y),w=y}}var b,l="default";null!=m&&(b=w.indexOf(m.comparisonoperator),m=m.filtervalue,p.val(m),c.jqxDropDownList({selectedIndex:b,animationType:l})),null!=x&&(b=w.indexOf(x.comparisonoperator),x=x.filtervalue,u.val(x),s.jqxDropDownList({selectedIndex:b,animationType:l})),null==n.getoperatorat(0)?h.jqxDropDownList({selectedIndex:0,animationType:l}):"and"==n.getoperatorat(0)||0==n.getoperatorat(0)?h.jqxDropDownList({selectedIndex:0}):h.jqxDropDownList({selectedIndex:1})}i.updatefilterpanel&&i.updatefilterpanel(c,s,h,p,u,f,d,n,g,w),(!this._hasdatefilter||this._hasdatefilter&&"date"!=r.filtertype)&&(this.touchdevice||(p.focus(),setTimeout(function(){p.focus()},10)))}else if("excel"===this.filtermode||"list"===r.filtertype||"checkedlist"===r.filtertype){var D,w=i._getfilterdataadapter(r),g=i._getfiltertype(e),g="excel"===this.filtermode||"checkedlist"===r.filtertype;if("date"==r.filtertype&&i._showwhere.text(i.gridlocalization.filtershowrowstring),c.jqxListBox("focus"),this.removeHandler(c,"keyup"),this.addHandler(c,"keyup",function(e){13===e.keyCode&&f.trigger("click"),27===e.keyCode&&i._closemenu()}),r.cellsformat?c.jqxListBox({checkboxes:g,displayMember:r.displayfield,valueMember:r.displayfield+"JQValue",source:w}):c.jqxListBox({checkboxes:g,displayMember:r.displayfield,valueMember:r.displayfield,source:w}),g){c.jqxListBox("insertAt",{label:i.gridlocalization.filterselectallstring},0),(D=c.data().jqxListBox.instance).checkAll(!1);if(r.filter){D.uncheckAll(!1);for(var q=r.filter.getfilters(),_=0;_<D.items.length;_++){var j=D.items[_].value;k.each(q,function(){return"NOT_EQUAL"==this.condition?j!=this.value||null!=j&&null!=this.value&&j.toString()!=this.value.toString()?(D.uncheckIndex(_,!1,!1),!1):void 0:"EQUAL"==this.condition&&(j==this.value||null!=j&&null!=this.value&&j.toString()==this.value.toString())?(D.checkIndex(_,!1,!1),!1):void 0})}D._updateCheckedItems();g=D.getCheckedItems().length;D.items.length!=g&&0<g&&D.host.jqxListBox("indeterminateIndex",0,!0,!1),g===D.items.length-1&&D.host.jqxListBox("checkIndex",0,!0,!1)}}else if(r.filter){(D=c.data().jqxListBox.instance).clearSelection();for(q=r.filter.getfilters(),_=0;_<D.items.length;_++){j=D.items[_].value;k.each(q,function(){if("NOT_EQUAL"==this.condition){if(j!=this.value)return D.unselectIndex(_,!1,!1),!1}else if("EQUAL"==this.condition&&j==this.value)return D.selectIndex(_,!0,!1),!1})}D._renderItems()}}},_initfilterpanel:function(r,e,t,i,l){null!=r&&null!=r||(r=this),e[0].innerHTML="";var s=k("<div class='filter' style='position: absolute; bottom: 3px; margin-left: 3px;'></div>");e.append(s);var a=k("<div class='filter showwhere' style='height: 18px; margin-top: 3px; margin-bottom: 3px;'></div>");a.text(r.gridlocalization.filtershowrowstring),this._showwhere=a;var o=l?"ex":"",n=k("<div class='filter filter1' id='filter1"+r.element.id+o+"'></div>"),d=k("<div class='filter filter2' id='filter2"+r.element.id+o+"' style='margin-top: 3px; margin-bottom: 3px;'></div>"),f=k("<div class='filter filter3' id='filter3"+r.element.id+o+"'></div>"),c=r._getcolumntypebydatafield(t);if(!n.jqxDropDownList)throw new Error("jqxGrid: jqxdropdownlist.js is not loaded.");var h=r._getfiltersbytype(c);if(this._hasdatefilter=!1,this._filterpanelwidth=i,this.columns&&this.columns.records){for(var p=0;p<this.columns.records.length;p++)if("date"==this.columns.records[p].filtertype){this._hasdatefilter=!0;break}}else if(this.columns&&!this.columns.records)for(p=0;p<this.columns.length;p++)if("date"==this.columns[p].filtertype){this._hasdatefilter=!0;break}var u=k("<div style='margin-top:3px;' class='filter'><input autocomplete='off' class='filtertext1"+r.element.id+"' style='padding: 3px; height: 17px; margin-top: 3px; margin-bottom: 3px;' type='text'></input></div>"),g=u.find("input");g.addClass(this.toThemeProperty("jqx-input")),g.addClass(this.toThemeProperty("jqx-filter-input jqx-widget-content")),g.addClass(this.toThemeProperty("jqx-rc-all")),g.width(i-18);e=k("<div style='margin-top:3px;' class='filter'><input autocomplete='off' class='filtertext2"+r.element.id+"' style='padding: 3px; height: 17px; margin-top: 3px;' type='text'></input></div>"),o=e.find("input");o.addClass(this.toThemeProperty("jqx-input")),o.addClass(this.toThemeProperty("jqx-filter-input jqx-widget-content")),o.addClass(this.toThemeProperty("jqx-rc-all")),o.width(i-18),r.rtl&&(g.css("direction","rtl"),o.css("direction","rtl"));t=k("<div class='filter' style='height: 35px; text-align:center; margin-top: 15px; margin-left:-2px;'></div>"),c=k('<span tabIndex=0 id="filterbutton'+r.element.id+'" class="primary filterbutton" style="padding: 6px 15px;">'+r.gridlocalization.filterstring+"</span>");t.append(c);g=k('<span tabIndex=0 id="filterclearbutton'+r.element.id+'" class="secondary filterclearbutton" style="position: relative; left: 1px; padding: 6px 15px; margin-left: 7px;">'+r.gridlocalization.filterclearstring+"</span>");t.append(g),c.jqxButton({height:this.filterMenuItemsHeight,theme:r.theme}),g.jqxButton({height:this.filterMenuItemsHeight,theme:r.theme});var m,o=function(e){var t;return e?(-1!=e.text().indexOf("case sensitive")&&(t=(t=e.text()).replace("case sensitive","match case"),e.text(t)),e.css("font-family",r.host.css("font-family")),e.css("font-size",r.host.css("font-size")),e.css("top","2px"),e.css("position","relative"),e):""};"default"!==this.filtermode||l?"excel"!==this.filtermode&&!l||(s.append(a),s.append(n),n.attr("tabindex",0),n.jqxListBox({rtl:r.rtl,_checkForHiddenParent:!1,checkboxes:!0,selectedIndex:2,width:i-10,height:130,theme:r.theme}),m=!0,r.addHandler(n,"checkChange",function(e){var t,i;m=m&&(e.args.label!=r.gridlocalization.filterselectallstring?(m=!1,n.jqxListBox("checkIndex",0,!0,!1),t=n.jqxListBox("getCheckedItems"),i=n.jqxListBox("getItems"),1==t.length?n.jqxListBox("uncheckIndex",0,!0,!1):i.length!=t.length&&n.jqxListBox("indeterminateIndex",0,!0,!1)):(m=!1,e.args.checked?n.jqxListBox("checkAll",!1):n.jqxListBox("uncheckAll",!1)),!0)})):(s.append(a),s.append(n),n.jqxDropDownList({_checkForHiddenParent:!1,autoItemsHeight:!0,rtl:r.rtl,enableBrowserBoundsDetection:!1,selectedIndex:2,width:i-10,height:24,dropDownHeight:150,dropDownWidth:i-10,selectionRenderer:o,source:h,theme:r.theme}),s.append(u),(a=new Array)[0]=r.gridlocalization.filterandconditionstring,a[1]=r.gridlocalization.filterorconditionstring,d.jqxDropDownList({_checkForHiddenParent:!1,rtl:r.rtl,enableBrowserBoundsDetection:!1,autoDropDownHeight:!0,selectedIndex:0,width:60,height:24,source:a,selectionRenderer:o,theme:r.theme}),s.append(d),f.jqxDropDownList({_checkForHiddenParent:!1,autoItemsHeight:!0,rtl:r.rtl,enableBrowserBoundsDetection:!1,selectedIndex:2,width:i-10,height:24,dropDownHeight:150,dropDownWidth:i-10,selectionRenderer:o,source:h,theme:r.theme}),s.append(f),s.append(e)),s.append(t),r.updatefilterpanel&&r.updatefilterpanel(n,f,d,u,e,c,g,null,null,h)}})}(jqxBaseFramework),function(k){k.extend(k.jqx._jqxGrid.prototype,{_updatefilterrowui:function(e){var t=this.columns.records.length,i=0,r=this;if(this.filterrow){for(var l=0;l<t;l++){var s=this.columns.records[l],a=parseInt(s.width);a<s.minwidth&&(a=s.minwidth),a>s.maxwidth&&(a=s.maxwidth);var o=k(this.filterrow[0].cells[l]);o.css("left",i);var n=!0;if(o.width()==a&&(n=!1),e&&(n=!0),o.width(a),o[0].left=i,s.element&&(o[0].style.width=s.element.style.width,o[0].style.left=s.element.style.left),s.hidden&&s.hideable?o.css("display","none"):i+=a,n)if(s.createfilterwidget&&"custom"==s.filtertype)s.createfilterwidget(s,o);else if(s.filterable){n=function(e,t){t=k(t.children()[0]);t[0]&&(t[0].style.width=a-8+"px",k.jqx.browser.msie&&(t[0].style.width=a-16+"px")),t.attr("disabled",e.disabled)};switch(s.filtertype){case"number":case"input":k(o.children()[0]).width(a),o.find("input")[0].style.width=a-30+"px",k.jqx.browser.msie&&(o.find("input")[0].style.width=a-36+"px"),o.find("input").attr("disabled",r.disabled),k(o.find(".jqx-dropdownlist-state-normal")).jqxDropDownList({theme:r.theme,disabled:r.disabled});break;case"date":case"range":this.host.jqxDateTimeInput?k(o.children()[0]).jqxDateTimeInput({theme:r.theme,disabled:r.disabled,width:a-10}):n(this,o);break;case"textbox":case"default":n(this,o);break;case"list":case"checkedlist":this.host.jqxDropDownList?k(o.children()[0]).jqxDropDownList({theme:r.theme,disabled:r.disabled,width:a-10}):n(this,o);break;case"bool":case"boolean":this.host.jqxCheckBox?k(o.children()[0]).jqxCheckBox({theme:r.theme,disabled:r.disabled}):n(this,o)}}}var d=k(this.filterrow.children()[0]);d.width(parseInt(i)+2),d.height(this.filterrowheight)}},clearfilterrow:function(e){if(this._disablefilterrow=!0,this.columns.records){for(var t=this.columns.records.length,i=0;i<t;i++){var r=this.columns.records[i],l=k(this.filterrow[0].cells[i]);if(("string"!=typeof e||r.displayfield==e)&&r.filterable){function s(e,t){t=k(t.children()[0]);t.val(""),t[0]&&(e["_oldWriteText"+t[0].id]="")}var a,o,n;switch(r.filtertype){case"number":case"input":l.find("input").val(""),this.host.jqxDropDownList&&((a=k(k(k(l).children()[0]).children()[1])).jqxDropDownList("clearSelection"),(o=0)==o&&(this._getfiltersbytype("number"==r.filtertype?"number":"string"),n=(new k.jqx.filter).getoperatorsbyfiltertype("number"==r.filtertype?"numberfilter":"stringfilter"),null!=r.filtercondition&&-1!=(o=n.indexOf(r.filtercondition.toUpperCase()))||(o="number"==r.filtertype?0:2)),a.jqxDropDownList({selectedIndex:o}),a.jqxDropDownList("ensureVisible",o));break;case"date":case"range":this.host.jqxDateTimeInput?k(l.children()[0]).jqxDateTimeInput("setDate",null):s(this,l);break;case"textbox":case"default":s(this,l);break;case"list":this.host.jqxDropDownList?k(l.children()[0]).jqxDropDownList("clearSelection"):s(this,l);break;case"checkedlist":this.host.jqxDropDownList?k(l.children()[0]).jqxDropDownList("checkAll",!1):s(this,l);break;case"bool":case"boolean":this.host.jqxCheckBox?k(l.children()[0]).jqxCheckBox({checked:null}):s(this,l)}}}this._disablefilterrow=!1}},_applyfilterfromfilterrow:function(){if(1!=this._disablefilterrow&&!this.disabled){for(var e=this.columns.records.length,o=this.that,t=0;t<e;t++){var i=new k.jqx.filter,r=this.columns.records[t];if(r.filterable&&null!==r.datafield){function l(e,t,i){var r=!0;if(e._filterwidget){var l=e._filterwidget.val();if(""!=l){var s="stringfilter"==t?"contains":"equal";if("numericfilter"==t&&","==o.gridlocalization.decimalseparator&&0<=l.indexOf(o.gridlocalization.decimalseparator)&&(l=l.replace(o.gridlocalization.decimalseparator,".")),"stringfilter"!=t){var a=0;if(-1!=l.indexOf(">")&&(s="greater_than",a=1),-1!=l.indexOf("<")&&(s="less_than",a=1),-1!=l.indexOf("=")&&(a="greater_than"==s?(s="greater_than_or_equal",2):"less_than"==s?(s="less_than_or_equal",2):(s="equal",1)),0!=a&&(l=l.substring(a)).length<1)return!1}null!=e.filtercondition&&(s=e.filtercondition),s="datefilter"==t?i.createfilter(t,l,s,null,e.cellsformat,o.gridlocalization):i.createfilter(t,l,s),i.addfilter(1,s)}else r=!1}return r}var s,a,n,d,f,c,h,p,u=o._getcolumntypebydatafield(r),g=o._getfiltertype(u),m=!0;r.filtertype;switch(r.filtertype){case"range":case"date":r._filterwidget.jqxDateTimeInput?"range"==r.filtertype?null!=(v=r._filterwidget.jqxDateTimeInput("getRange"))&&null!=v.from&&null!=v.to?(D="GREATER_THAN_OR_EQUAL",(s=new Date(0)).setHours(0),s.setMinutes(0),s.setFullYear(v.from.getFullYear(),v.from.getMonth(),v.from.getDate()),(u=new Date(0)).setHours(0),u.setMinutes(0),u.setFullYear(v.to.getFullYear(),v.to.getMonth(),v.to.getDate()),u.setHours(v.to.getHours()),u.setMinutes(v.to.getMinutes()),u.setSeconds(v.to.getSeconds()),a=i.createfilter(g,s,D),i.addfilter(0,a),u=i.createfilter(g,u,"LESS_THAN_OR_EQUAL"),i.addfilter(0,u)):m=!1:null!=(v=r._filterwidget.jqxDateTimeInput("getDate"))?((s=new Date(0)).setHours(0),s.setMinutes(0),s.setFullYear(v.getFullYear(),v.getMonth(),v.getDate()),(p=r._filterwidget.jqxDateTimeInput("showTimeButton"))&&(s.setHours(v.getHours()),s.setMinutes(v.getMinutes())),D="EQUAL",null!=r.filtercondition&&(D=r.filtercondition),a=i.createfilter(g,s,D),p&&(a=i.createfilter(g,s,D,null,r.cellsformat)),i.addfilter(0,a)):m=!1:m=l(r,g,i);break;case"input":r._filterwidget?(v=r._filterwidget.find("input").val(),n=r._filterwidget.find(".filter").jqxDropDownList("selectedIndex"),f=i.getoperatorsbyfiltertype(g)[n],o.updatefilterconditions&&(null!=(d=o.updatefilterconditions(g,i.getoperatorsbyfiltertype(g)))&&i.setoperatorsbyfiltertype(g,d),f=i.getoperatorsbyfiltertype(g)[n]),c="NULL"==f||"NOT_NULL"==f,h="EMPTY"==f||"NOT_EMPTY"==f,null!=v&&0<v.length||c||h?(a=i.createfilter(g,v,f,null,r.cellsformat,o.gridlocalization),i.addfilter(0,a)):m=!1):m=!1;break;case"number":r._filterwidget?(v=r._filterwidget.find("input").val(),","==o.gridlocalization.decimalseparator&&0<=v.indexOf(o.gridlocalization.decimalseparator)&&(v=v.replace(o.gridlocalization.decimalseparator,".")),n=r._filterwidget.find(".filter").jqxDropDownList("selectedIndex"),f=i.getoperatorsbyfiltertype(g)[n],o.updatefilterconditions&&(null!=(d=o.updatefilterconditions(g,i.getoperatorsbyfiltertype(g)))&&i.setoperatorsbyfiltertype(g,d),f=i.getoperatorsbyfiltertype(g)[n]),c="NULL"==f||"NOT_NULL"==f,h="EMPTY"==f||"NOT_EMPTY"==f,null!=v&&0<v.length||c||h?(a=i.createfilter(g,new Number(v),f,null,r.cellsformat,o.gridlocalization),i.addfilter(0,a)):m=!1):m=!1;break;case"textbox":case"default":m=l(r,g,i);break;case"bool":case"boolean":r._filterwidget.jqxCheckBox?null!=(v=r._filterwidget.jqxCheckBox("checked"))?(D="equal",q=i.createfilter(g,v,D),i.addfilter(1,q)):m=!1:m=l(r,g,i);break;case"list":0<(x=r._filterwidget.jqxDropDownList("listBox")).selectedIndex?(v=(p=x.getItem(x.selectedIndex)).label,b=p.value,D=""===v?"NULL":"equal",q=i.createfilter(g,v,D),i.addfilter(1,q),b!==v&&(q.data=b)):m=!1;break;case"checkedlist":if(r._filterwidget.jqxDropDownList){var x,w=(x=r._filterwidget.jqxDropDownList("listBox")).getCheckedItems();if(0==w.length){for(var y=1;y<x.items.length;y++){var v=x.items[y].label,b=x.items[y].value,D="not_equal";""===v&&(D="NOT_NULL");var q=i.createfilter(g,v,D);b!==v&&(q.data=b),i.addfilter(0,q)}m=!0}else if(w.length!=x.items.length)for(y=0;y<w.length;y++){v=w[y].label,b=w[y].value,D="equal";""===v&&(D="NULL");q=i.createfilter(g,v,D);b!==v&&(q.data=b),i.addfilter(1,q)}else m=!1}else m=l(r,g,i)}this._loading||(m?this.addfilter(r.displayfield,i,!1):this.removefilter(r.displayfield,!1))}}this._loading||this.applyfilters("filterrow")}},_updatefilterrow:function(){var e=k('<div style="position: relative;" id="row00'+this.element.id+'"></div>'),t=0,i=this.columns.records.length,r=this.toThemeProperty("jqx-grid-cell");r+=" "+this.toThemeProperty("jqx-grid-cell-pinned"),r+=" "+this.toThemeProperty("jqx-grid-cell-filter-row");var l=i+10,s=new Array,a=this.that;this.filterrow[0].cells=s,e.height(this.filterrowheight),this.filterrow.children().detach(),this.filterrow.append(e),this._filterrowcache||(this._filterrowcache=new Array),this._initcolumntypes();for(var o=!1,n=new Array,d=document.createDocumentFragment(),f=0;f<i;f++){var c=this.columns.records[f],h=c.width;h<c.minwidth&&(h=c.minwidth),h>c.maxwidth&&(h=c.maxwidth);var p=document.createElement("div");p.style.overflow="hidden",p.style.position="absolute",p.style.height="100%",p.className=r,p=k(p),d.appendChild(p[0]),p[0].style.left=t+"px",this.rtl?(p.css("z-index",l++),p.css("border-left-width","1px")):p.css("z-index",l--),"auto"==h&&(h=0),p[0].style.width=parseFloat(h)+"px",p[0].left=t,c.hidden&&c.hideable?p.css("display","none"):t+=h,s[s.length]=p[0];var u,g=!0;this.rtl?(this.groupable&&(u=this.showrowdetailscolumn&&this.rowdetails?1:0,this.groups.length+u+f>i-1&&(g=!1)),this.showrowdetailscolumn&&this.rowdetails&&f==i-1&&(g=!1)):(this.groupable&&(u=this.showrowdetailscolumn&&this.rowdetails?1:0,this.groups.length+u>f&&(g=!1)),this.showrowdetailscolumn&&this.rowdetails&&0==f&&(g=!1)),g&&("custom"==c.filtertype&&c.createfilterwidget?c.createfilterwidget(c,p,function(){a._applyfilterfromfilterrow()}):c.filterable&&(this._filterrowcache[c.datafield]?(o=!0,p.append(this._filterrowcache[c.datafield]),c._filterwidget=this._filterrowcache[c.datafield]):(this._addfilterwidget(c,p,h),n[c.datafield]=c._filterwidget)))}e[0].appendChild(d),this._filterrowcache=n,k.jqx.browser.msie&&k.jqx.browser.version<8&&e.css("z-index",l--),e.width(parseFloat(t)+2),this.filterrow.addClass(r),this.filterrow.css("border-top-width","1px"),this.filterrow.css("border-right-width","0px"),o&&this._updatefilterrowui(!0)},_addfilterwidget:function(r,e,l){for(var t,s=this.that,i=this,a="",o=0;o<s.dataview.filters.length;o++){var n=s.dataview.filters[o];if(n.datafield&&n.datafield==r.datafield){a=(o=n.filter.getfilters()[0]).value;"range"===r.filtertype&&(a={from:a,to:n.filter.getfilters()[1].value}),t=o.condition,r.filtercondition=t;break}}function d(t,e){var i=k('<input autocomplete="off" type="textarea"/>');i.attr("tabindex",5+r.visibleindex),i[0].id=k.jqx.utilities.createId(),i.addClass(t.toThemeProperty("jqx-widget")),i.addClass(t.toThemeProperty("jqx-filter-input jqx-input jqx-input-widget")),i.addClass(t.toThemeProperty("jqx-rc-all")),i.addClass(t.toThemeProperty("jqx-widget-content")),t.rtl&&i.css("direction","rtl"),t.disabled&&i.attr("disabled",!0),i.attr("disabled",!1),i.appendTo(e),i.css("margin","4px"),i.width(l-8),i.height(t.filterrowheight-9),r.createfilterwidget&&r.createfilterwidget(r,e,i),(r._filterwidget=i).focus(function(){return t.content[0].scrollLeft=0,setTimeout(function(){t.content[0].scrollLeft=0},10),(t.focusedfilter=i).addClass(t.toThemeProperty("jqx-fill-state-focus")),!1}),i.blur(function(){i.removeClass(t.toThemeProperty("jqx-fill-state-focus"))}),i.keydown(function(e){"13"==e.keyCode&&t._applyfilterfromfilterrow(),i[0]._writeTimer&&clearTimeout(i[0]._writeTimer),i[0]._writeTimer=setTimeout(function(){t._loading||(t["_oldWriteText"+i[0].id]||(t["_oldWriteText"+i[0].id]=""),(0<t["_oldWriteText"+i[0].id].length&&t["_oldWriteText"+i[0].id]!=i.val()||0==t["_oldWriteText"+i[0].id].length)&&(t._applyfilterfromfilterrow(),t["_oldWriteText"+i[0].id]=i.val()))},r.filterdelay),t.focusedfilter=i}),t.host.removeClass("jqx-disableselect"),t.content.removeClass("jqx-disableselect"),i.val(a)}var f,c,h,p,u,g,m,x;switch(null!=r.datatype&&("number"==r.filtertype&&("string"!=r.datatype&&"date"!=r.datatype&&"bool"!=r.datatype||(r.filtertype="textbox")),"date"==r.filtertype&&("string"!=r.datatype&&"number"!=r.datatype&&"bool"!=r.datatype||(r.filtertype="textbox")),"bool"==r.filtertype&&("string"!=r.datatype&&"number"!=r.datatype&&"date"!=r.datatype||(r.filtertype="textbox"))),r.filtertype){case"number":case"input":var w=k("<div></div>");w.width(e.width()),w.height(this.filterrowheight),e.append(w);l=e.width()-21;g=w,m=l,x=k('<input style="float: left;" autocomplete="off" type="textarea"/>'),s.rtl&&(x.css("float","right"),x.css("direction","rtl")),x.attr("tabindex",5+r.visibleindex),x[0].id=k.jqx.utilities.createId(),x.addClass(s.toThemeProperty("jqx-widget jqx-input jqx-rc-all jqx-input-widget jqx-filter-input jqx-widget-content")),x.appendTo(g),x.width(m-10),s.disabled&&x.attr("disabled",!0),x.attr("disabled",!1),x[0].style.height=s.filterrowheight-9+"px",x.css("margin","4px"),x.css("margin-right","3px"),x.focus(function(){(s.focusedfilter=x).addClass(s.toThemeProperty("jqx-fill-state-focus"))}),x.blur(function(){x.removeClass(s.toThemeProperty("jqx-fill-state-focus"))}),x.keydown(function(e){"13"==e.keyCode&&s._applyfilterfromfilterrow(),"9"!=e.keyCode&&(x[0]._writeTimer&&clearTimeout(x[0]._writeTimer),x[0]._writeTimer=setTimeout(function(){s._loading||s["_oldWriteText"+x[0].id]!=x.val()&&(s._applyfilterfromfilterrow(),s["_oldWriteText"+x[0].id]=x.val())},r.filterdelay),s.focusedfilter=x)}),x.val(a);var y,v=s._getfiltersbytype("number"==r.filtertype?"number":"string");(y=k("<div class='filter' style='float: left;'></div>")).css("margin-top","4px"),y.appendTo(w),s.rtl&&y.css("float","right");var b=0;null!=r.filtercondition&&-1!=(D=(o=new k.jqx.filter).getoperatorsbyfiltertype("number"==r.filtertype?"numericfilter":"stringfilter").indexOf(r.filtercondition.toUpperCase()))&&(b=D);var D,q=180;"input"==r.filtertype&&(q=240,0==b&&-1!=(D=v.indexOf("contains")||2)&&null==r.filtercondition&&(b=D)),y.jqxDropDownList({disabled:s.disabled,touchMode:s.touchmode,rtl:s.rtl,dropDownHorizontalAlignment:"right",enableBrowserBoundsDetection:!0,selectedIndex:b,width:20,height:27,dropDownHeight:150,dropDownWidth:q,source:v,theme:s.theme}),y.jqxDropDownList({selectionRenderer:function(e){return""}}),y.attr("tabindex",5+r.visibleindex),y.jqxDropDownList("setContent",""),y.find(".jqx-dropdownlist-content").hide(),r.createfilterwidget&&r.createfilterwidget(r,e,w),r._filterwidget=w;var _=null;this.addHandler(y,"open",function(){i._activeFilterElement=y}),this.addHandler(y,"select",function(){var e=y.jqxDropDownList("getSelectedItem").label;0<r._filterwidget.find("input").val().length&&!s.refreshingfilter&&s._applyfilterfromfilterrow(),("input"!=r.filtertype||s.refreshingfilter)&&(0!=r._filterwidget.find("input").val().length||s.refreshingfilter||"null"!=_&&"not null"!=_&&"null"!=e&&"not null"!=e)||s._applyfilterfromfilterrow(),_=e});break;case"textbox":case"default":default:d(this,e);break;case"none":break;case"date":case"range":this.host.jqxDateTimeInput?((c=k("<div></div>")).css("margin","4px"),c.css("margin-left","5px"),c.appendTo(e),f={calendar:this.gridlocalization,todayString:this.gridlocalization.todaystring,clearString:this.gridlocalization.clearstring},c.jqxDateTimeInput({firstDayOfWeek:this.gridlocalization.firstDay,readonly:!0,disabled:s.disabled,localization:f,rtl:s.rtl,showFooter:!0,formatString:r.cellsformat,selectionMode:r.filtertype,value:null,theme:this.theme,width:l-9,height:this.filterrowheight-9}),r.createfilterwidget&&r.createfilterwidget(r,e,c),a&&a.from?c.jqxDateTimeInput("setRange",a.from,a.to):a&&1<a.toString().length&&c.val(a),c.find("input").attr("tabindex",5+r.visibleindex),r._filterwidget=c,this.addHandler(c,"valueChanged",function(e){s.refreshingfilter||(s._applyfilterfromfilterrow(),s.focusedfilter=null)})):d(this,e);break;case"list":case"checkedlist":this.host.jqxDropDownList?(b=this._getfilterdataadapter(r),v=!1,(y=k("<div></div>")).css("margin","4px"),y.css("margin-left","5px"),w=r.datafield,f="checkedlist"==r.filtertype,q=l<150?220:"auto",b.dataBind(),v=c=b.records.length<8,y.appendTo(e),y.jqxDropDownList({hint:!1,placeHolder:s.gridlocalization.filterchoosestring,disabled:s.disabled,touchMode:s.touchmode,rtl:s.rtl,checkboxes:f,dropDownWidth:q,source:b.records,autoDropDownHeight:c,theme:this.theme,width:l-9,height:this.filterrowheight-9,displayMember:r.displayfield,valueMember:w}),y.attr("tabindex",5+r.visibleindex),y.attr("default-placeholder",!0),r.createfilterwidget&&r.createfilterwidget(r,e,y),this.addHandler(y,"open",function(){i._activeFilterElement=y}),h=y.jqxDropDownList("listBox"),f?(y.jqxDropDownList({selectionRenderer:function(){return'<span class="'+s.toThemeProperty("jqx-item")+'" style="top: 4px; position: relative; color: inherit; border: none; background-color: transparent;">'+s.gridlocalization.filterselectstring+"</span>"}}),(u=k('<span style="top: 2px; position: relative; color: inherit; border: none; background-color: transparent;">'+s.gridlocalization.filterselectstring+"</span>")).addClass(this.toThemeProperty("jqx-item")),null!=h&&(v||h.host.height(200),h.insertAt({label:s.gridlocalization.filterselectallstring},0),y.jqxDropDownList("setContent",u),p=!0,new Array,h.checkAll(!1),s.addHandler(h.host,"checkChange",function(e){var t,i;y[0]._selectionChanged=!0,p=p&&(e.args.label!=s.gridlocalization.filterselectallstring?(p=!1,h.host.jqxListBox("checkIndex",0,!0,!1),t=h.host.jqxListBox("getCheckedItems"),i=h.host.jqxListBox("getItems"),1==t.length?h.host.jqxListBox("uncheckIndex",0,!0,!1):i.length!=t.length&&h.host.jqxListBox("indeterminateIndex",0,!0,!1)):(p=!1,e.args.checked?h.host.jqxListBox("checkAll",!1):h.host.jqxListBox("uncheckAll",!1)),!0)}))):(h.insertAt({label:this.gridlocalization.filterchoosestring,value:""},0),y.jqxDropDownList({selectedIndex:0})),(r._filterwidget=y).jqxDropDownList("dropdownlistWrapper"),"list"==r.filtertype?this.addHandler(y,"select",function(e){s.refreshingfilter||e.args&&"none"!=e.args.type&&(s._applyfilterfromfilterrow(),s.focusedfilter=null)}):this.addHandler(y,"close",function(e){y[0]._selectionChanged&&(s._applyfilterfromfilterrow(),s.focusedfilter=null,y[0]._selectionChanged=!1)})):d(this,e);break;case"bool":case"boolean":this.host.jqxCheckBox?((u=k('<div tabIndex=0 style="opacity: 0.99; position: absolute; top: 50%; left: 50%; margin-top: -9px; margin-left: -12px;"></div>')).appendTo(e),u.jqxCheckBox({disabled:s.disabled,enableContainerClick:!1,animationShowDelay:0,animationHideDelay:0,hasThreeStates:!0,theme:this.theme,checked:null}),u.attr("tabindex",5+r.visibleindex),r.createfilterwidget&&r.createfilterwidget(r,e,u),!0===a||"true"==a?u.jqxCheckBox({checked:!0}):!1!==a&&"false"!=a||u.jqxCheckBox({checked:!1}),r._filterwidget=u,this.addHandler(u,"change",function(e){s.refreshingfilter||e.args&&(s.focusedfilter=null,s._applyfilterfromfilterrow())})):d(this,e)}},_getfilterdataadapter:function(s){var a,e=!!this.source._source;if(o=e?(t={localdata:k.extend(!0,{},this.source.records),datatype:this.source.datatype,async:!1},a=this,new k.jqx.dataAdapter(t,{autoBind:!1,autoSort:!0,autoSortField:s.displayfield,async:!1,uniqueDataFields:[s.displayfield],beforeLoadComplete:function(e){var t=new Array;if(s.cellsformat){for(var i=a._getcolumntypebydatafield(s),r=0;r<e.length;r++){t.push(e[r]);var l=e[r][s.displayfield];e[r][s.displayfield+"JQValue"]=l,"date"===i?e[r][s.displayfield]=null!=l?o.formatDate(l,s.cellsformat,a.gridlocalization):"":"number"!==i&&"float"!==i&&"int"!==i||(e[r][s.displayfield]=null!=l?o.formatNumber(l,s.cellsformat,a.gridlocalization):"")}return t}return e}})):new k.jqx.dataAdapter(this.source,{autoBind:!1,uniqueDataFields:[s.displayfield],autoSort:!0,autoSortField:s.displayfield,async:!1}),s.filteritems&&0<s.filteritems.length)var t={localdata:s.filteritems,datatype:this.source.datatype,async:!1},o=new k.jqx.dataAdapter(t,{autoBind:!1,async:!1});else if(s.filteritems){if(s.filteritems._source)return s.filteritems._options.autoBind=!1,s.filteritems._options.async=!1,s.filteritems;if(k.isFunction(s.filteritems))return s.filteritems()}return o},refreshfilterrow:function(){if(this.showfilterrow){this.refreshingfilter=!0,this._updatefilterrowui(),this._updatelistfilters(!0,!0);for(var e=this.that,t=this.columns.records.length,i=0;i<t;i++){var r=this.columns.records[i];if(r.filterable&&r.filter){var l=r.filter.getfilters();if(0<l.length){var s,a=l[0].value,o=r._filterwidget,n=r._filterwidget.parent();if(null!=o)switch(r.filtertype){case"number":n.find("input").val(a),this.host.jqxDropDownList&&(s=r.filter.getoperatorsbyfiltertype("numericfilter"),o.find(".filter").jqxDropDownList("selectIndex",s.indexOf(l[0].condition)));break;case"input":n.find("input").val(a),this.host.jqxDropDownList&&(s=r.filter.getoperatorsbyfiltertype("stringfilter"),o.find(".filter").jqxDropDownList("selectIndex",s.indexOf(l[0].condition)));break;case"date":case"range":this.host.jqxDateTimeInput?null!=(a=r.filter.getfilterat(0).filtervalue)&&(l=r.filter.getfilterat(1)?r.filter.getfilterat(1).filtervalue:a,"range"==r.filtertype?k(n.children()[0]).jqxDateTimeInput("setRange",new Date(a),new Date(l)):k(n.children()[0]).jqxDateTimeInput("setDate",new Date(a))):o.val(a);break;case"textbox":case"default":o.val(a),e["_oldWriteText"+o[0].id]=a;break;case"bool":case"boolean":this.host.jqxCheckBox?k(n.children()[0]).jqxCheckBox({checked:a}):o.val(a)}}}}this.refreshingfilter=!1}},_destroyedfilters:function(){this.that;for(var e=this.columns.records.length,t=0;t<e;t++){var i,r=this.columns.records[t];r.filterable&&(i=r._filterwidget,"list"==r.filtertype||"checkedlist"==r.filtertype?(this.removeHandler(i,"select"),this.removeHandler(i,"close"),i.jqxDropDownList("destroy")):"date"==r.filtertype||"range"==r.filtertype?(this.removeHandler(i,"valueChanged"),i.jqxDateTimeInput("destroy")):"bool"==r.filtertype?(this.removeHandler(i,"change"),i.jqxCheckBox("destroy")):"number"==r.filtertype||"input"===r.filtertype?(r=i.find(".jqx-input"),this.removeHandler(r,"keydown"),k(i.children()[1]).jqxDropDownList("destroy")):this.removeHandler(i,"keydown"),i.remove())}},_updatelistfilters:function(e,t){for(var i=this.that,r=this.columns.records.length,l=0;l<r;l++){var s=this.columns.records[l];if(s.filterable&&("list"==s.filtertype||"checkedlist"==s.filtertype)){var a=s._filterwidget;if(e){var o=this._getfilterdataadapter(s);a.jqxDropDownList({source:o});var n=!0;if((c=a.jqxDropDownList("getItems")).length!=o.records.length+1&&(n=!1),n)for(var d=1;d<c.length;d++)if(c[d].label!=o.records[d-1][s.displayfield]){n=!1;break}if(n&&!t)continue}else if(null==s.filter){a.jqxDropDownList("renderSelection");continue}var f="checkedlist"==s.filtertype,c=a.jqxDropDownList("getItems"),h=a.jqxDropDownList("listBox");if(a.jqxDropDownList("dataBind"),f){a.jqxDropDownList({selectionRenderer:function(){return i.gridlocalization.filterselectstring}}),null==h.getItem(this.gridlocalization.filterselectallstring)&&h.insertAt({label:this.gridlocalization.filterselectallstring},0);f=k('<span style="top: 2px; position: relative; color: inherit; border: none; background-color: transparent;">'+this.gridlocalization.filterselectstring+"</span>");if(f.addClass(this.toThemeProperty("jqx-item")),a.jqxDropDownList("setContent",f),h.checkAll(!1),s.filter){for(var p=s.filter.getfilters(),d=0;d<h.items.length;d++){var u=h.items[d].label,g=void 0;k.each(p,function(){var e;"NOT_EQUAL"==this.condition?e=u!=this.value:"EQUAL"==this.condition&&(e=u==this.value),g=null==g&&void 0!==e?e:"EQUAL"==this.condition?g||e:g&&e}),g?h.checkIndex(d,!1,!1):h.uncheckIndex(d,!1,!1)}h._updateCheckedItems();f=h.getCheckedItems().length;h.items.length!=f&&0<f&&h.host.jqxListBox("indeterminateIndex",0,!0,!1)}}else if(null==h.getItem(this.gridlocalization.filterchoosestring)&&h.items[0].label!==this.gridlocalization.filterchoosestring&&h.insertAt({label:this.gridlocalization.filterchoosestring,value:""},0),a.jqxDropDownList({selectedIndex:0}),s.filter){for(var p=s.filter.getfilters(),m=-1,d=0;d<h.items.length;d++){u=h.items[d].label;k.each(p,function(){return"NOT_EQUAL"==this.condition||(u==this.value?(m=d,!1):void 0)})}-1!=m&&h.selectIndex(m)}c.length<8?a.jqxDropDownList("autoDropDownHeight",!0):a.jqxDropDownList("autoDropDownHeight",!1)}}},_renderfiltercolumn:function(){var r=this.that;this.filterable&&this.columns.records&&k.each(this.columns.records,function(e,t){var i=!1;r.autoshowfiltericon?this.filter?(k(this.filtericon).show(),i=!0):k(this.filtericon).hide():this.filterable&&(k(this.filtericon).show(),i=!0),this.element.removeAttribute("filter"),i&&this.element.setAttribute("filter",!0),"right"!=this.align||this.renderer||this.element&&(this.element.firstChild.firstChild.style.marginRight=i?"18px":"2px")})},_initcolumntypes:function(){if(this.columns&&this.columns.records){var e=this.source._source.datafields;if(e)for(var t=0;t<this.columns.records.length;t++){var i,r=this.columns.records[t];r.datatype||(i="",k.each(e,function(){if(this.name==r.displayfield)return this.type&&(i=this.type),!1}),r.datatype=""!=i?i:"")}}},_getcolumntypebydatafield:function(e){var t=this.that,i="string",t=t.source.datafields||(t.source._source?t.source._source.datafields:null);if(t){var r="";if(k.each(t,function(){if(this.name==e.displayfield)return this.type&&(r=this.type),!1}),r)return r}if(null!=e){if(null==this.dataview.cachedrecords)return i;var l=null;if(this.virtualmode)k.each(this.dataview.cachedrecords,function(){return l=this[e.displayfield],!1});else{if(0==this.dataview.cachedrecords.length)return i;if(null!=(l=this.dataview.cachedrecords[0][e.displayfield])&&""==l.toString())return"string"}if(null!=l)if("boolean"==typeof l)i="boolean";else if(k.jqx.dataFormat.isNumber(l))i="number";else{t=new Date(l);if("NaN"==t.toString()||"Invalid Date"==t.toString())if(k.jqx.dataFormat){if(null!=(t=k.jqx.dataFormat.tryparsedate(l))){if(t&&t.getFullYear()&&1970==t.getFullYear()&&0==t.getMonth()&&1==t.getDate()){t=new Number(l);return isNaN(t)?"string":"number"}return"date"}i="string"}else i="string";else i="date"}}return i},_getfiltersbytype:function(e){var t=this.that,i="";switch(e){case"number":case"float":case"int":i=t.gridlocalization.filternumericcomparisonoperators;break;case"date":i=t.gridlocalization.filterdatecomparisonoperators;break;case"boolean":case"bool":i=t.gridlocalization.filterbooleancomparisonoperators;break;case"string":default:i=t.gridlocalization.filterstringcomparisonoperators}return i},_getfiltertype:function(e){var t="stringfilter";switch(e){case"number":case"int":case"float":case"decimal":t="numericfilter";break;case"boolean":case"bool":t="booleanfilter";break;case"date":case"time":case"range":t="datefilter";break;case"string":case"input":t="stringfilter"}return t},_buildfilter:function(e,t,i){var r=k(t).find(".filter1"),l=k(t).find(".filter2"),s=k(t).find(".filter3"),a=k(t).find(".filtertext1"+e.element.id),o=k(t).find(".filtertext2"+e.element.id),n=a.val(),d=o.val(),f=e._getcolumntypebydatafield(i),c=(e._getfiltersbytype(f),new k.jqx.filter),h=e._getfiltertype(f);if("default"===e.filtermode&&"list"!==i.filtertype&&"checkedlist"!==i.filtertype){var p=r.jqxDropDownList("selectedIndex"),u=l.jqxDropDownList("selectedIndex"),a=s.jqxDropDownList("selectedIndex"),o=null;!e.updatefilterconditions||null!=(g=e.updatefilterconditions(h,c.getoperatorsbyfiltertype(h)))&&c.setoperatorsbyfiltertype(h,g);var l=!1,g=c.getoperatorsbyfiltertype(h)[p],s=c.getoperatorsbyfiltertype(h)[a],p="NULL"==g||"NOT_NULL"==g,a="EMPTY"==g||"NOT_EMPTY"==g;null==g&&(g=c.getoperatorsbyfiltertype(h)[0]),null==s&&(s=c.getoperatorsbyfiltertype(h)[0]),(0<n.length||p||a)&&(o=c.createfilter(h,n,g,null,i.cellsformat,e.gridlocalization),c.addfilter(u,o),l=!0);g="NULL"==s||"NOT_NULL"==s,o="EMPTY"==s||"NOT_EMPTY"==s;(0<d.length||g||o)&&(f=c.createfilter(h,d,s,null,i.cellsformat,e.gridlocalization),c.addfilter(u,f),l=!0),l?(m=i.displayfield,this.addfilter(m,c,!0)):this._clearfilter(e,t,i)}else if("excel"===e.filtermode||"list"===i.filtertype||"checkedlist"===i.filtertype){var m,t=!1,x=r.data().jqxListBox.instance,r="excel"===this.filtermode||"checkedlist"===i.filtertype,w=x.getCheckedItems();if(r||(w=x.getSelectedItems()),0==w.length){for(var y=1;y<x.items.length;y++){void 0===(b=x.items[y].value)&&(b="");var v="not_equal";b&&b.indexOf&&(0<=b.indexOf("|")||0<=b.indexOf(" AND ")||0<=b.indexOf(" OR ")||0<=b.indexOf(" and ")||0<=b.indexOf(" or "))&&(b=(b=(b=(b=(b=b.replace("|","")).replace("AND","")).replace("OR","")).replace("and","")).replace("or",""),v="equal"),D="datefilter"==h?c.createfilter(h,b,v,null,i.cellsformat,e.gridlocalization):c.createfilter(h,b,v,null),c.addfilter(0,D)}t=!0}else if(w.length!=x.items.length){t=!0;for(var b,D,y=0;y<w.length;y++)e.gridlocalization.filterselectallstring!==w[y].value&&(void 0===(b=w[y].value)&&(b=""),v="equal",D="datefilter"==h?c.createfilter(h,b,v,null,i.cellsformat,e.gridlocalization):c.createfilter(h,b,v,null),c.addfilter(1,D))}else t=!1;t?(m=i.displayfield,this.addfilter(m,c,!0)):(m=i.displayfield,this.removefilter(m,!0))}},_clearfilter:function(e,t,i){i=i.displayfield;this.removefilter(i,!0)},addfilter:function(e,t,i){if(this._loading)throw new Error("jqxGrid: "+this.loadingerrormessage);var r=this.getcolumn(e),l=this._getcolumn(e);null!=r&&null!=r&&(r.filter=t,l.filter=t,this.dataview.addfilter(e,t),1==i&&null!=i&&this.applyfilters("add"))},removefilter:function(e,t){if(this._loading)throw new Error("jqxGrid: "+this.loadingerrormessage);var i=this.getcolumn(e),r=this._getcolumn(e);null!=i&&null!=i&&null!=i.filter&&(this.dataview.removefilter(e,i.filter),i.filter=null,r.filter=null,this.showfilterrow&&this.clearfilterrow(e),1!=t&&!1===t||this.applyfilters("remove"))},applyfilters:function(e){if(0<=this.dataview.filters.length&&(this.virtualmode||!this.source.localdata)&&null!=this.source&&this.source.filter&&(t=-1,this.pageable?(t=this.dataview.pagenum,this.dataview.pagenum=0):(this.vScrollInstance.setPosition(0),this.loadondemand=!0,this._renderrows(this.virtualsizeinfo)),this.pageable&&this.virtualmode&&(this.dataview.pagenum=0),this.source.filter(this.dataview.filters,this.dataview.records,this.dataview.records.length),this.pageable&&!this.virtualmode&&(this.dataview.pagenum=t)),this._cellscache=new Array,this.dataview.clearsortdata&&this.dataview.clearsortdata(),this.virtualmode)return this.pageable&&(this.dataview.updateview(),this.gotopage&&this.gotopage(0)),this.rendergridcontent(!1,!1),this.showfilterrow&&"string"!=typeof e&&k.isEmptyObject(e)&&this.refreshfilterrow(),this._postrender("filter"),void this._raiseEvent(13,{filters:this.dataview.filters});var t;this.selectedrowindexes,this.that;this.dataview.refresh(),this.dataview.clearsortdata&&this.sortcolumn&&this.sortdirection&&(t=this.sortdirection.ascending?"asc":"desc",this._loading?this.sortby(this.sortcolumn,t,null,!1,!1):this.sortby(this.sortcolumn,t,null,!1)),this.pageable&&(this.dataview.updateview(),this.gotopage&&(this.gotopage(0),this.updatepagerdetails())),this._updaterowsproperties(),!this.groupable||this.groupable&&0==this.groups.length?(this._rowdetailscache=new Array,this.virtualsizeinfo=null,this._pagescache=new Array,this.columns&&this.columns.records&&0<this.columns.records.length&&!this.columns.records[0].filtericon&&(this.prerenderrequired=!0),this.rendergridcontent(!0,!1),this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo),this.showaggregates&&this._updatecolumnsaggregates&&this._updatecolumnsaggregates(),this._postrender("filter")):(this.collapseallgroups(),this._rowdetailscache=new Array,this._render(!0,!0,!1,!1,!1),this.showfilterrow&&this._updatefocusedfilter(),this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo),this._postrender("group")),this.showfilterrow&&"string"!=typeof e&&k.isEmptyObject(e)&&this.refreshfilterrow(),this._raiseEvent(13,{filters:this.dataview.filters})},getfilterinformation:function(){for(var e=new Array,t=0;t<this.dataview.filters.length;t++){var i=this.getcolumn(this.dataview.filters[t].datafield);e[t]={filter:this.dataview.filters[t].filter,datafield:i.datafield,displayfield:i.displayfield,filtercolumn:i.datafield,filtercolumntext:i.text}}return e},clearfilters:function(e){var t,i=this.that;this.showfilterrow&&this.clearfilterrow(),this.columns.records&&(t=1==e||!1!==e,k.each(this.columns.records,function(){i.removefilter(this.displayfield,!t)})),!1!==e&&(1!=e&&!1===e||this.applyfilters("clear"))},_destroyfilterpanel:function(){var e=k(k.find("#filterclearbutton"+this.element.id)),t=k(k.find("#filterbutton"+this.element.id)),i=k(k.find("#filter1"+this.element.id)),r=k(k.find("#filter2"+this.element.id)),l=k(k.find("#filter3"+this.element.id)),s=k(k.find(".filtertext1"+this.element.id)),a=k(k.find(".filtertext2"+this.element.id));0<s.length&&0<a.length&&(s.removeClass(),a.removeClass(),s.remove(),a.remove()),0<e.length&&(e.jqxButton("destroy"),t.jqxButton("destroy"),this.removeHandler(e,"click"),this.removeHandler(t,"click")),0<i.length&&i.jqxDropDownList("destroy"),0<r.length&&r.jqxDropDownList("destroy"),0<l.length&&l.jqxDropDownList("destroy");i=k(k.find("#filter1"+this.element.id+"ex")),r=k(k.find("#filter2"+this.element.id+"ex")),l=k(k.find("#filter3"+this.element.id+"ex"));0<i.length&&i.jqxDropDownList("destroy"),0<r.length&&r.jqxDropDownList("destroy"),0<l.length&&l.jqxDropDownList("destroy")},_updatefilterpanel:function(i,t,r){null!=i&&null!=i||(i=this);var e=i._getcolumntypebydatafield(r),l=i._getfiltersbytype(e);if(!i.host.jqxDropDownList)throw new Error("jqxGrid: Missing reference to jqxdropdownlist.js.");i.filterpanel.detach(),i.excelfilterpanel.detach(),r.filterpanel&&r.filterpanel.detach(),k(t).children().detach();var s=k(i.menuitemsarray[6]);k(s).css("height","220px"),r.createfilterpanel&&!r.filterpanel&&(u=k("<div class='filter' style='margin-left: 7px;'></div>"),k(t).append(u),r.createfilterpanel(r.displayfield,u),r.filterpanel=u),"list"===r.filtertype||"checkedlist"===r.filtertype?k(t).append(i.excelfilterpanel):"custom"!==r.filtertype?k(t).append(i.filterpanel):r.filterpanel&&k(t).append(r.filterpanel),this._showwhere=k(t).find(".filter.showwhere");var a,o,n=k(t),d=n.find("#filterclearbutton"+i.element.id),f=n.find("#filterbutton"+i.element.id),c=n.find(".filter1"),h=n.find(".filter2"),s=n.find(".filter3"),p=n.find(".filtertext1"+i.element.id),u=n.find(".filtertext2"+i.element.id);if(this._hasdatefilter&&"list"!==r.filtertype&&"checkedlist"!==r.filtertype&&"custom"!==r.filtertype&&(m=p.parent(),x=u.parent(),o="date"==r.filtertype?(p.jqxDateTimeInput("destroy"),u.jqxDateTimeInput("destroy"),m.children().remove(),x.children().remove(),i._showwhere.text(i.gridlocalization.filtershowrowdatestring),o=k("<div class='filtertext1"+i.element.id+"' style=''></div>"),m.append(o),(a=function(e){var t={calendar:i.gridlocalization,todayString:i.gridlocalization.todaystring,clearString:i.gridlocalization.clearstring};e.jqxDateTimeInput({disabled:i.disabled,firstDayOfWeek:i.gridlocalization.firstDay,localization:t,rtl:i.rtl,width:i._filterpanelwidth-10,height:24,value:null,formatString:r.cellsformat,theme:i.theme})})(o),k("<div class='filtertext2"+i.element.id+"' style=''></div>")):(m.children().remove(),x.children().remove(),i._showwhere.text(i.gridlocalization.filtershowrowstring),o=k("<input autocomplete='off' class='filtertext1"+i.element.id+"' style='box-sizing: content-box; height: 16px; padding: 3px;' type='text'></input>"),m.append(o),(a=function(e){e.addClass(i.toThemeProperty("jqx-input")),e.addClass(i.toThemeProperty("jqx-filter-input jqx-widget-content")),e.addClass(i.toThemeProperty("jqx-rc-all")),e.width(i._filterpanelwidth-18)})(o),k("<input autocomplete='off' class='filtertext2"+i.element.id+"' style='box-sizing: content-box; height: 16px; padding: 3px;' type='text'></input>")),x.append(o),a(o),p=n.find(".filtertext1"+i.element.id),u=n.find(".filtertext2"+i.element.id)),"date"!=r.filtertype?(p.val(""),u.val("")):(p.val(null),u.val(null)),0<f.length&&(f.jqxButton({height:this.filterMenuItemsHeight}),d.jqxButton({height:this.filterMenuItemsHeight}),this.removeHandler(f,"click"),this.addHandler(f,"click",function(){i._buildfilter(i,t,r),i._closemenu()}),this.removeHandler(d,"click"),this.addHandler(d,"click",function(){i._clearfilter(i,t,r),i._closemenu()}),this.removeHandler(f,"keydown"),this.addHandler(f,"keydown",function(e){13===e.keyCode&&(i._buildfilter(i,t,r),i._closemenu())}),this.removeHandler(d,"keydown"),this.addHandler(d,"keydown",function(e){13===e.keyCode&&(i._clearfilter(i,t,r),i._closemenu())})),0<p.length&&(this.removeHandler(p,"keydown"),this.addHandler(p,"keydown",function(e){13===e.keyCode&&f.trigger("click"),27===e.keyCode&&i._closemenu()}),this.removeHandler(u,"keydown"),this.addHandler(u,"keydown",function(e){13===e.keyCode&&f.trigger("click"),27===e.keyCode&&i._closemenu()})),"default"===this.filtermode&&"list"!==r.filtertype&&"checkedlist"!==r.filtertype&&"custom"!==r.filtertype){c.jqxDropDownList("source")!=l&&(c.jqxDropDownList({enableBrowserBoundsDetection:!1,source:l}),s.jqxDropDownList({enableBrowserBoundsDetection:!1,source:l})),"boolean"==e||"bool"==e?(c.jqxDropDownList({autoDropDownHeight:!0,selectedIndex:0}),s.jqxDropDownList({autoDropDownHeight:!0,selectedIndex:0})):(g=!1,l&&l.length&&l.length<5&&(g=!0),c.jqxDropDownList({autoDropDownHeight:g,selectedIndex:2}),s.jqxDropDownList({autoDropDownHeight:g,selectedIndex:2})),h.jqxDropDownList({selectedIndex:0});var n=r.filter,l=new k.jqx.filter,g="";switch(e){case"number":case"int":case"float":case"decimal":g="numericfilter",w=l.getoperatorsbyfiltertype("numericfilter");break;case"boolean":case"bool":g="booleanfilter",w=l.getoperatorsbyfiltertype("booleanfilter");break;case"date":case"time":g="datefilter",w=l.getoperatorsbyfiltertype("datefilter");break;case"string":g="stringfilter",w=l.getoperatorsbyfiltertype("stringfilter")}if(null!=n){var m=n.getfilterat(0),x=n.getfilterat(1);n.getoperatorat(0);if(i.updatefilterconditions){var w=[],y=i.updatefilterconditions(g,w);if(null!=y){for(var v=0;v<y.length;v++)y[v]=y[v].toUpperCase();n.setoperatorsbyfiltertype(g,y),w=y}}var b,l="default";null!=m&&(b=w.indexOf(m.comparisonoperator),m=m.filtervalue,p.val(m),c.jqxDropDownList({selectedIndex:b,animationType:l})),null!=x&&(b=w.indexOf(x.comparisonoperator),x=x.filtervalue,u.val(x),s.jqxDropDownList({selectedIndex:b,animationType:l})),null==n.getoperatorat(0)?h.jqxDropDownList({selectedIndex:0,animationType:l}):"and"==n.getoperatorat(0)||0==n.getoperatorat(0)?h.jqxDropDownList({selectedIndex:0}):h.jqxDropDownList({selectedIndex:1})}i.updatefilterpanel&&i.updatefilterpanel(c,s,h,p,u,f,d,n,g,w),(!this._hasdatefilter||this._hasdatefilter&&"date"!=r.filtertype)&&(this.touchdevice||(p.focus(),setTimeout(function(){p.focus()},10)))}else if("excel"===this.filtermode||"list"===r.filtertype||"checkedlist"===r.filtertype){w=i._getfilterdataadapter(r),g=i._getfiltertype(e),g="excel"===this.filtermode||"checkedlist"===r.filtertype;if(c.jqxListBox("focus"),this.removeHandler(c,"keyup"),this.addHandler(c,"keyup",function(e){13===e.keyCode&&f.trigger("click"),27===e.keyCode&&i._closemenu()}),r.cellsformat?c.jqxListBox({checkboxes:g,displayMember:r.displayfield,valueMember:r.displayfield+"JQValue",source:w}):c.jqxListBox({checkboxes:g,displayMember:r.displayfield,valueMember:r.displayfield,source:w}),g){var D,g=c.jqxListBox("getItem",0);g&&g.label===i.gridlocalization.filterselectallstring||c.jqxListBox("insertAt",{label:i.gridlocalization.filterselectallstring},0),(D=c.data().jqxListBox.instance).checkAll(!1);if(r.filter){D.uncheckAll(!1);for(var q=r.filter.getfilters(),_=0;_<D.items.length;_++){var j=D.items[_].value;k.each(q,function(){return"NOT_EQUAL"==this.condition?j!=this.value||null!=j&&null!=this.value&&j.toString()!=this.value.toString()?(D.uncheckIndex(_,!1,!1),!1):void 0:"EQUAL"==this.condition&&(j==this.value||null!=j&&null!=this.value&&j.toString()==this.value.toString())?(D.checkIndex(_,!1,!1),!1):void 0})}D._updateCheckedItems();g=D.getCheckedItems().length;D.items.length!=g&&0<g&&D.host.jqxListBox("indeterminateIndex",0,!0,!1),g===D.items.length-1&&D.host.jqxListBox("checkIndex",0,!0,!1)}}else if(r.filter){(D=c.data().jqxListBox.instance).clearSelection();for(q=r.filter.getfilters(),_=0;_<D.items.length;_++){j=D.items[_].value;k.each(q,function(){if("NOT_EQUAL"==this.condition){if(j!=this.value)return D.unselectIndex(_,!1,!1),!1}else if("EQUAL"==this.condition&&j==this.value)return D.selectIndex(_,!0,!1),!1})}D._renderItems()}}},_initfilterpanel:function(r,e,t,i,l){null!=r&&null!=r||(r=this),e[0].innerHTML="";var s=k("<div class='filter' style='position: absolute; bottom: 3px; margin-left: 3px;'></div>");e.append(s);var a=k("<div class='filter showwhere' style='height: 18px; margin-top: 3px; margin-bottom: 3px;'></div>");a.text(r.gridlocalization.filtershowrowstring),this._showwhere=a;var o=l?"ex":"",n=k("<div class='filter filter1' id='filter1"+r.element.id+o+"'></div>"),d=k("<div class='filter filter2' id='filter2"+r.element.id+o+"' style='margin-top: 3px; margin-bottom: 3px;'></div>"),f=k("<div class='filter filter3' id='filter3"+r.element.id+o+"'></div>"),c=r._getcolumntypebydatafield(t);if(!n.jqxDropDownList)throw new Error("jqxGrid: jqxdropdownlist.js is not loaded.");var h=r._getfiltersbytype(c);if(this._hasdatefilter=!1,this._filterpanelwidth=i,this.columns&&this.columns.records){for(var p=0;p<this.columns.records.length;p++)if("date"==this.columns.records[p].filtertype){this._hasdatefilter=!0;break}}else if(this.columns&&!this.columns.records)for(p=0;p<this.columns.length;p++)if("date"==this.columns[p].filtertype){this._hasdatefilter=!0;break}this._hasdatefilter=!0;var u=k("<div style='margin-top:3px;' class='filter'><input autocomplete='off' class='filtertext1"+r.element.id+"' style='padding: 3px; height: 16px; margin-top: 3px; margin-bottom: 3px;' type='text'></input></div>"),g=u.find("input");g.addClass(this.toThemeProperty("jqx-input")),g.addClass(this.toThemeProperty("jqx-filter-input jqx-widget-content")),g.addClass(this.toThemeProperty("jqx-rc-all")),g.width(i-18);e=k("<div style='margin-top:3px;' class='filter'><input autocomplete='off' class='filtertext2"+r.element.id+"' style='padding: 3px; height: 16px; margin-top: 3px;' type='text'></input></div>"),o=e.find("input");o.addClass(this.toThemeProperty("jqx-input")),o.addClass(this.toThemeProperty("jqx-filter-input jqx-widget-content")),o.addClass(this.toThemeProperty("jqx-rc-all")),o.width(i-18),r.rtl&&(g.css("direction","rtl"),o.css("direction","rtl"));t=k("<div class='filter' style='height: 35px; text-align:center; margin-top: 15px; margin-left:-2px;'></div>"),c=k('<span tabIndex=0 id="filterbutton'+r.element.id+'" class="primary filterbutton" style="padding: 6px 15px;">'+r.gridlocalization.filterstring+"</span>");t.append(c);g=k('<span tabIndex=0 id="filterclearbutton'+r.element.id+'" class="filterclearbutton secondary" style="position: relative; left: 2px; padding: 6px 15px; margin-left: 7px;">'+r.gridlocalization.filterclearstring+"</span>");t.append(g),c.jqxButton({height:this.filterMenuItemsHeight,theme:r.theme}),g.jqxButton({height:this.filterMenuItemsHeight,theme:r.theme});var m,o=function(e){var t;return e?(-1!=e.text().indexOf("case sensitive")&&(t=(t=e.text()).replace("case sensitive","match case"),e.text(t)),e.css("font-family",r.host.css("font-family")),e.css("font-size",r.host.css("font-size")),e.css("top","2px"),e.css("position","relative"),e):""};"default"!==this.filtermode||l?"excel"!==this.filtermode&&!l||(s.append(a),s.append(n),n.attr("tabindex",0),n.jqxListBox({rtl:r.rtl,_checkForHiddenParent:!1,checkboxes:!0,selectedIndex:2,width:i-10,height:160,theme:r.theme}),m=!0,r.addHandler(n,"checkChange",function(e){var t,i;m=m&&(e.args.label!=r.gridlocalization.filterselectallstring?(m=!1,n.jqxListBox("checkIndex",0,!0,!1),t=n.jqxListBox("getCheckedItems"),i=n.jqxListBox("getItems"),1==t.length?n.jqxListBox("uncheckIndex",0,!0,!1):i.length!=t.length&&n.jqxListBox("indeterminateIndex",0,!0,!1)):(m=!1,e.args.checked?n.jqxListBox("checkAll",!1):n.jqxListBox("uncheckAll",!1)),!0)})):(s.append(a),s.append(n),n.jqxDropDownList({_checkForHiddenParent:!1,autoItemsHeight:!0,rtl:r.rtl,enableBrowserBoundsDetection:!1,selectedIndex:2,width:i-10,height:this.filterMenuItemsHeight,dropDownHeight:200,dropDownWidth:i-10,selectionRenderer:o,source:h,theme:r.theme}),s.append(u),(a=new Array)[0]=r.gridlocalization.filterandconditionstring,a[1]=r.gridlocalization.filterorconditionstring,d.jqxDropDownList({_checkForHiddenParent:!1,rtl:r.rtl,enableBrowserBoundsDetection:!1,autoDropDownHeight:!0,selectedIndex:0,width:60,height:this.filterMenuItemsHeight,source:a,selectionRenderer:o,theme:r.theme}),s.append(d),f.jqxDropDownList({_checkForHiddenParent:!1,autoItemsHeight:!0,rtl:r.rtl,enableBrowserBoundsDetection:!1,selectedIndex:2,width:i-10,height:this.filterMenuItemsHeight,dropDownHeight:200,dropDownWidth:i-10,selectionRenderer:o,source:h,theme:r.theme}),s.append(f),s.append(e)),s.append(t),r.updatefilterpanel&&r.updatefilterpanel(n,f,d,u,e,c,g,null,null,h)}})}(jqxBaseFramework);