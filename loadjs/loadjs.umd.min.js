!function(e,n){"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?module.exports=n():e.loadjs=n()}(this,function(){var d=function(){},o={},f={},u={};function c(e,n){if(e){var t=u[e];if(f[e]=n,t)for(;t.length;)t[0](e,n),t.splice(0,1)}}function l(e,n){e.call&&(e={success:e}),n.length?(e.error||d)(n):(e.success||d)(e)}function h(t,r,i,s){var o,c,e=document,n=i.async,f=(i.numRetries||0)+1,u=i.before||d,l=t.replace(/[\?|#].*$/,""),a=t.replace(/^(css|img)!/,"");s=s||0,/(^css!|\.css$)/.test(l)?((c=e.createElement("link")).rel="stylesheet",c.href=a,(o="hideFocus"in c)&&c.relList&&(o=0,c.rel="preload",c.as="style")):/(^img!|\.(png|gif|jpg|svg|webp)$)/.test(l)?(c=e.createElement("img")).src=a:((c=e.createElement("script")).src=t,c.async=void 0===n||n),!(c.onload=c.onerror=c.onbeforeload=function(e){var n=e.type[0];if(o)try{c.sheet.cssText.length||(n="e")}catch(e){18!=e.code&&(n="e")}if("e"==n){if((s+=1)<f)return h(t,r,i,s)}else if("preload"==c.rel&&"style"==c.as)return c.rel="stylesheet";r(t,n,e.defaultPrevented)})!==u(t,c)&&e.head.appendChild(c)}function t(e,n,t){var r,i;if(n&&n.trim&&(r=n),i=(r?t:n)||{},r){if(r in o)throw"LoadJS";o[r]=!0}function s(n,t){!function(e,r,n){var t,i,s=(e=e.push?e:[e]).length,o=s,c=[];for(t=function(e,n,t){if("e"==n&&c.push(e),"b"==n){if(!t)return;c.push(e)}--s||r(c)},i=0;i<o;i++)h(e[i],t,n)}(e,function(e){l(i,e),n&&l({success:n,error:t},e),c(r,e)},i)}if(i.returnPromise)return new Promise(s);s()}return t.ready=function(e,n){return function(e,t){e=e.push?e:[e];var n,r,i,s=[],o=e.length,c=o;for(n=function(e,n){n.length&&s.push(e),--c||t(s)};o--;)r=e[o],(i=f[r])?n(r,i):(u[r]=u[r]||[]).push(n)}(e,function(e){l(n,e)}),t},t.done=function(e){c(e,[])},t.reset=function(){o={},f={},u={}},t.isDefined=function(e){return e in o},t});