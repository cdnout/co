!function(){"use strict";var t="angular-inview";function a(t){return angular.isArray(t)?2==t.length?t.concat(t):3==t.length?t.concat([t[1]]):t:[t,t,t,t]}function p(t,e){if(!e)return t;var n=u(e[0])?parseFloat(e[0])*t.height/100:e[0],i=u(e[1])?parseFloat(e[1])*t.width/100:e[1],o=u(e[2])?parseFloat(e[2])*t.height/100:e[2],r=u(e[3])?parseFloat(e[3])*t.width/100:e[3];return{top:t.top-n,left:t.left-r,bottom:t.bottom+o,right:t.right+i,height:t.height+n+o,width:t.width+r+i}}function u(t){return angular.isString(t)&&0<t.indexOf("%")}function h(t){this.didSubscribeFunc=t}function d(t,o){return new h(function(e){var n=function(t){e(t)},i=angular.element(t);o.split(" ").map(function(t){i[0].addEventListener(t,n,!0)}),e.$dispose=function(){o.split(" ").map(function(t){i[0].removeEventListener(t,n,!0)})}})}angular.module(t,[]).directive("inView",["$parse",function(f){return{restrict:"A",require:"?^^inViewContainer",link:function(e,c,t,s){var l={};t.inViewOptions&&(l=e.$eval(t.inViewOptions)),l.offset&&(l.offset=a(l.offset)),l.viewportOffset&&(l.viewportOffset=a(l.viewportOffset));var n,i=(n={type:"initial"},new h(function(t){setTimeout(function(){t(n)})})).merge(d(window,"checkInView click ready wheel mousewheel DomMouseScroll MozMousePixelScroll resize scroll touchmove mouseup keydown"));s&&(i=i.merge(s.eventsSignal)),l.throttle&&(i=i.throttle(l.throttle));var o=i.map(function(t){var e;e=p(e=s?s.getViewportRect():function(){var t={top:0,left:0,width:window.innerWidth,right:window.innerWidth,height:window.innerHeight,bottom:window.innerHeight};if(t.height)return t;"CSS1Compat"===document.compatMode?(t.width=t.right=document.documentElement.clientWidth,t.height=t.bottom=document.documentElement.clientHeight):(t.width=t.right=document.body.clientWidth,t.height=t.bottom=document.body.clientHeight);return t}(),l.viewportOffset);var n,i,o=p(c[0].getBoundingClientRect(),l.offset),r=!!(c[0].offsetWidth||c[0].offsetHeight||c[0].getClientRects().length),u={inView:r&&(n=o,i=e,!(i.left>n.right||i.right<n.left||i.top>n.bottom||i.bottom<n.top)),event:t,element:c,elementRect:o,viewportRect:e};return l.generateParts&&u.inView&&(u.parts={},u.parts.top=o.top>=e.top,u.parts.left=o.left>=e.left,u.parts.bottom=o.bottom<=e.bottom,u.parts.right=o.right<=e.right),u}).scan({},function(t,e){return l.generateDirection&&e.inView&&t.elementRect&&(e.direction={horizontal:e.elementRect.left-t.elementRect.left,vertical:e.elementRect.top-t.elementRect.top}),e.changed=e.inView!==t.inView||!angular.equals(e.parts,t.parts)||!angular.equals(e.direction,t.direction),e}).filter(function(t){return!!t.changed&&!("initial"===t.event.type&&!t.inView)}),r=f(t.inView),u=o.subscribe(function(t){e.$applyAsync(function(){r(e,{$inview:t.inView,$inviewInfo:t})})});e.$on("$destroy",u)}}}]).directive("inViewContainer",function(){return{restrict:"A",controller:["$element",function(t){this.element=t,this.eventsSignal=d(t,"scroll"),this.getViewportRect=function(){return t[0].getBoundingClientRect()}}]}}),h.prototype.subscribe=function(t){this.didSubscribeFunc(t);return function(){t.$dispose&&(t.$dispose(),t.$dispose=null)}},h.prototype.map=function(n){var t=this;return new h(function(e){e.$dispose=t.subscribe(function(t){e(n(t))})})},h.prototype.filter=function(n){var t=this;return new h(function(e){e.$dispose=t.subscribe(function(t){n(t)&&e(t)})})},h.prototype.scan=function(t,i){var o=this;return new h(function(e){var n=t;e.$dispose=o.subscribe(function(t){n=i(n,t),e(n)})})},h.prototype.merge=function(t){return function(){var i=arguments;return new h(function(t){for(var e=[],n=i.length-1;0<=n;n--)e.push(i[n].subscribe(function(){t.apply(null,arguments)}));t.$dispose=function(){for(var t=e.length-1;0<=t;t--)e[t]&&e[t]()}})}(this,t)},h.prototype.throttle=function(i){var o,r,e=this;return new h(function(n){var t=e.subscribe(function(){var t=+new Date,e=arguments;o&&t<o+i?(clearTimeout(r),r=setTimeout(function(){o=t,n.apply(null,e)},i)):(o=t,n.apply(null,e))});n.$dispose=function(){clearTimeout(r),t&&t()}})},"function"==typeof define&&define.amd?define(["angular"],t):"undefined"!=typeof module&&module&&module.exports&&(module.exports=t)}();