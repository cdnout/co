/*!
 * jquery.businessHours v1.0.1 - jQuery plugin allows you to easy show & manage business hours
 * Copyright (c) 2015 Alex Padalka - http://gendelf.github.io/jquery.businessHours/
 * License: APACHE
 */

(function(e){e.fn.businessHours=function(t){function i(e,t,n){e.val(t);if(n){e.prop("readonly",true)}}var n={preInit:function(){},postInit:function(){},inputDisabled:false,checkedColorClass:"WorkingDayState",uncheckedColorClass:"RestDayState",colorBoxValContainerClass:"colorBoxContainer",weekdays:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],operationTime:[{},{},{},{},{},{isActive:false},{isActive:false}],defaultOperationTimeFrom:"9:00",defaultOperationTimeTill:"18:00",defaultActive:true,containerTmpl:'<div class="clean"/>',dayTmpl:'<div class="dayContainer">'+'<div data-original-title="" class="colorBox"><input type="checkbox" class="invisible operationState"/></div>'+'<div class="weekday"></div>'+'<div class="operationDayTimeContainer">'+'<div class="operationTime"><input type="text" name="startTime" class="mini-time operationTimeFrom" value=""/></div>'+'<div class="operationTime"><input type="text" name="endTime" class="mini-time operationTimeTill" value=""/></div>'+"</div></div>"};var r=e(this);var s={getValueOrDefault:function(e,t){return jQuery.type(e)==="undefined"||e==null?t:e},init:function(t){this.options=e.extend(n,t);r.html("");if(typeof this.options.preInit==="function"){this.options.preInit()}this.initView(this.options);if(typeof this.options.postInit==="function"){this.options.postInit()}return{serialize:function(){var t=[];r.find(".operationState").each(function(n,r){var i=e(r).prop("checked");var s=e(r).parents(".dayContainer");t.push({isActive:i,timeFrom:i?s.find("[name='startTime']").val():null,timeTill:i?s.find("[name='endTime']").val():null})});return t}}},initView:function(t){var n=[t.checkedColorClass,t.uncheckedColorClass];var s=r.append(e(t.containerTmpl));var o=this;for(var u=0;u<t.weekdays.length;u++){s.append(t.dayTmpl)}e.each(t.weekdays,function(e,n){var s=t.operationTime[e];var u=r.find(".dayContainer").eq(e);u.find(".weekday").html(n);var a=o.getValueOrDefault(s.isActive,t.defaultActive);u.find(".operationState").prop("checked",a);var f=o.getValueOrDefault(s.timeFrom,t.defaultOperationTimeFrom);i(u.find('[name="startTime"]'),f,t.inputDisabled);var l=o.getValueOrDefault(s.timeTill,t.defaultOperationTimeTill);i(u.find('[name="endTime"]'),l,t.inputDisabled)});r.find(".operationState").change(function(){var r=e(this);var i=t.checkedColorClass;var s=false;if(!r.prop("checked")){i=t.uncheckedColorClass;s=true}r.parents(".colorBox").removeClass(n.join(" ")).addClass(i);r.parents(".dayContainer").find(".operationTime").toggle(!s)}).trigger("change");if(!t.inputDisabled){r.find(".colorBox").on("click",function(){var t=e(this).find(".operationState");t.prop("checked",!t.prop("checked")).trigger("change")})}}};return s.init(t)}})(jQuery)