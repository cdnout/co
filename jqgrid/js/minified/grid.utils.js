!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function($){"use strict";$.extend($.jgrid,{stringify:function(e){return JSON.stringify(e,function(e,t){return"function"==typeof t?t.toString():t})},parseFunc:function(str){return JSON.parse(str,function(key,value){if("string"!=typeof value||-1===value.indexOf("function"))return value;var sv=value.split(" ");return sv[0]=$.jgrid.trim(sv[0].toLowerCase()),0===sv[0].indexOf("function")&&"}"===value.trim().slice(-1)?eval("("+value+")"):value})},encode:function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},jsonToXML:function(e,t){function c(e,t){return"#text"===e?s.encode?d.encode(t):t:"function"==typeof t?"<"+e+"><![CDATA["+t+"]]></"+e+">\n":""===t?"<"+e+">__EMPTY_STRING_</"+e+">\n":"<"+e+">"+(s.encode?d.encode(t):t)+"</"+e+">\n"}var s=$.extend({xmlDecl:'<?xml version="1.0" encoding="UTF-8" ?>\n',attr_prefix:"-",encode:!0},t||{}),d=this,u=function(e,t){for(var n=[],o=0;o<t.length;o++){var r=t[o];void 0===r||null==r?n[n.length]="<"+e+" />":"object"==typeof r&&r.constructor==Array?n[n.length]=u(e,r):n[n.length]=("object"==typeof r?f:c)(e,r)}return n.length||(n[0]="<"+e+">__EMPTY_ARRAY_</"+e+">\n"),n.join("")},f=function(e,t){var n,o,r=[],a=[];for(n in t)t.hasOwnProperty(n)&&(o=t[n],n.charAt(0)!==s.attr_prefix?null==o?r[r.length]="<"+n+" />":"object"==typeof o&&o.constructor===Array?r[r.length]=u(n,o):r[r.length]=("object"==typeof o?f:c)(n,o):a[a.length]=" "+n.substring(1)+'="'+(s.encode?d.encode(o):o)+'"');var i=a.join(""),l=r.join("");return null==e||(l=0<r.length?l.match(/\n/)?"<"+e+i+">\n"+l+"</"+e+">\n":"<"+e+i+">"+l+"</"+e+">\n":"<"+e+i+" />\n"),l},e=f(null,e);return s.xmlDecl+e},xmlToJSON:function(root,options){var o=$.extend({force_array:[],attr_prefix:"-"},options||{});if(root){var __force_array={};if(o.force_array)for(var i=0;i<o.force_array.length;i++)__force_array[o.force_array[i]]=1;"string"==typeof root&&(root=$.parseXML(root)),root.documentElement&&(root=root.documentElement);var addNode=function(hash,key,cnts,val){if("string"==typeof val)if(-1!==val.indexOf("function"))val=eval("("+val+")");else switch(val){case"__EMPTY_ARRAY_":val=[];break;case"__EMPTY_STRING_":val="";break;case"false":val=!1;break;case"true":val=!0}__force_array[key]?(1===cnts&&(hash[key]=[]),hash[key][hash[key].length]=val):1===cnts?hash[key]=val:2===cnts?hash[key]=[hash[key],val]:hash[key][hash[key].length]=val},parseElement=function(e){if(7!==e.nodeType){if(3===e.nodeType||4===e.nodeType)return null==e.nodeValue.match(/[^\x00-\x20]/)?void 0:e.nodeValue;var t,n,r,a={};if(e.attributes&&e.attributes.length)for(t={},l=0;l<e.attributes.length;l++)"string"==typeof(n=e.attributes[l].nodeName)&&(r=e.attributes[l].nodeValue)&&(void 0===a[n=o.attr_prefix+n]&&(a[n]=0),a[n]++,addNode(t,n,a[n],r));if(e.childNodes&&e.childNodes.length){for(var i=t?!1:!0,l=0;l<e.childNodes.length&&i;l++){var c=e.childNodes[l].nodeType;3!==c&&4!==c&&(i=!1)}if(i)for(t=t||"",l=0;l<e.childNodes.length;l++)t+=e.childNodes[l].nodeValue;else for(t=t||{},l=0;l<e.childNodes.length;l++)"string"==typeof(n=e.childNodes[l].nodeName)&&(r=parseElement(e.childNodes[l]))&&(void 0===a[n]&&(a[n]=0),a[n]++,addNode(t,n,a[n],r))}return t}},json=parseElement(root),tmp;return __force_array[root.nodeName]&&(json=[json]),11!==root.nodeType&&(tmp={},tmp[root.nodeName]=json,json=tmp),json}},saveAs:function(e,t,n){n=$.extend(!0,{type:"plain/text;charset=utf-8"},n||{});var o,r,a,i=[];t=null==t||""===t?"jqGridFile.txt":t,Array.isArray(e)?i=e:i[0]=e;try{o=new File(i,t,n)}catch(e){o=new Blob(i,n)}window.navigator&&window.navigator.msSaveOrOpenBlob?window.navigator.msSaveOrOpenBlob(o,t):(r=URL.createObjectURL(o),(a=document.createElement("a")).href=r,a.download=t,document.body.appendChild(a),a.click(),setTimeout(function(){document.body.removeChild(a),window.URL.revokeObjectURL(r)},0))}})});