!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","./grid.base","./grid.common"],e):e(jQuery)}(function(R){"use strict";var U={};R.jgrid.extend({editGridRow:function(E,M){var e=R.jgrid.getRegional(this[0],"edit"),t=this[0].p.styleUI,A=R.jgrid.styleUI[t].formedit,B=R.jgrid.styleUI[t].common;return M=R.extend(!0,{top:0,left:0,width:"500",datawidth:"auto",height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,url:null,mtype:"POST",clearAfterAdd:!0,closeAfterEdit:!1,reloadAfterSubmit:!0,onInitializeForm:null,beforeInitData:null,beforeShowForm:null,afterShowForm:null,beforeSubmit:null,afterSubmit:null,onclickSubmit:null,afterComplete:null,onclickPgButtons:null,afterclickPgButtons:null,editData:{},recreateForm:!1,jqModal:!0,closeOnEscape:!1,addedrow:"first",topinfo:"",bottominfo:"",saveicon:[],closeicon:[],savekey:[!1,13],navkeys:[!1,38,40],checkOnSubmit:!1,checkOnUpdate:!1,processing:!1,onClose:null,ajaxEditOptions:{},serializeEditData:null,viewPagerButtons:!0,overlayClass:B.overlay,removemodal:!0,form:"edit",template:null,focusField:!0,editselected:!1,html5Check:!1,buttons:[]},e,M||{}),U[R(this)[0].p.id]=M,this.each(function(){function t(){var e,t,a={};for(e in R(g).find(".FormElement").each(function(){var e=R(".customelement",this);if(e.length){var t=e[0],i=R(t).attr("name");R.each(P.p.colModel,function(){if(this.name===i&&this.editoptions&&R.isFunction(this.editoptions.custom_value)){try{if(h[i]=this.editoptions.custom_value.call(P,R("#"+R.jgrid.jqID(i),g),"get"),void 0===h[i])throw"e1"}catch(e){"e1"===e?R.jgrid.info_dialog(b.errcap,"function 'custom_value' "+U[R(this)[0]].p.msg.novalue,U[R(this)[0]].p.bClose,{styleUI:U[R(this)[0]].p.styleUI}):R.jgrid.info_dialog(b.errcap,e.message,U[R(this)[0]].p.bClose,{styleUI:U[R(this)[0]].p.styleUI})}return!0}})}else{switch(R(this).get(0).type){case"checkbox":R(this).is(":checked")?h[this.name]=R(this).val():(t=R(this).attr("offval"),h[this.name]=t);break;case"select-one":h[this.name]=R(this).val();break;case"select-multiple":h[this.name]=R(this).val(),h[this.name]=h[this.name]?h[this.name].join(","):"";break;case"radio":if(a.hasOwnProperty(this.name))return!0;a[this.name]=void 0===R(this).attr("offval")?"off":R(this).attr("offval");break;default:h[this.name]=R(this).val()}P.p.autoencode&&(h[this.name]=R.jgrid.htmlEncode(h[this.name]))}}),a)a.hasOwnProperty(e)&&(t=R('input[name="'+e+'"]:checked',g).val(),h[e]=void 0!==t?t:a[e],P.p.autoencode&&(h[e]=R.jgrid.htmlEncode(h[e])));return 1}function u(i,a,d){var r,o,e,t,n,l=0;(U[P.p.id].checkOnSubmit||U[P.p.id].checkOnUpdate)&&(P.p.savedData={},P.p.savedData[a.p.id+"_id"]=i);var s=a.p.colModel;if("_empty"===i)return R(s).each(function(){r=this.name,n=R.extend({},this.editoptions||{}),(e=R("#"+R.jgrid.jqID(r),d))&&e.length&&null!==e[0]&&(t="","custom"===this.edittype&&R.isFunction(n.custom_value)?n.custom_value.call(P,R("#"+r,d),"set",t):n.defaultValue?(t=R.isFunction(n.defaultValue)?n.defaultValue.call(P):n.defaultValue,"checkbox"===e[0].type?(n=t.toLowerCase()).search(/(false|f|0|no|n|off|undefined)/i)<0&&""!==n?(e[0].checked=!0,e[0].defaultChecked=!0,e[0].value=t):(e[0].checked=!1,e[0].defaultChecked=!1):e.val(t)):"checkbox"===e[0].type?(e[0].checked=!1,e[0].defaultChecked=!1,t=R(e).attr("offval")):e[0].type&&"select"===e[0].type.substr(0,6)?e[0].selectedIndex=0:e.val(t),!0!==U[P.p.id].checkOnSubmit&&!U[P.p.id].checkOnUpdate||(P.p.savedData[r]=t))}),R("#id_g",d).val(i),0;var c=R(a).jqGrid("getInd",i,!0);c&&(R('td[role="gridcell"]',c).each(function(t){if("cb"!==(r=s[t].name)&&"subgrid"!==r&&"rn"!==r&&!0===s[t].editable){if(r===a.p.ExpandColumn&&!0===a.p.treeGrid)o=R(this).text();else try{o=R.unformat.call(a,R(this),{rowId:i,colModel:s[t]},t)}catch(e){o="textarea"===s[t].edittype?R(this).text():R(this).html()}switch(P.p.autoencode&&(o=R.jgrid.htmlDecode(o)),!0!==U[P.p.id].checkOnSubmit&&!U[P.p.id].checkOnUpdate||(P.p.savedData[r]=o),r=R.jgrid.jqID(r),s[t].edittype){case"select":var e=o.split(","),e=R.map(e,function(e){return R.trim(e)});R("#"+r+" option",d).each(function(){!(s[t].editoptions.multiple||R.trim(o)!==R.trim(R(this).text())&&e[0]!==R.trim(R(this).text())&&e[0]!==R.trim(R(this).val()))||s[t].editoptions.multiple&&(-1<R.inArray(R.trim(R(this).text()),e)||-1<R.inArray(R.trim(R(this).val()),e))?this.selected=!0:this.selected=!1}),!0!==U[P.p.id].checkOnSubmit&&!U[P.p.id].checkOnUpdate||(o=R("#"+r,d).val(),s[t].editoptions.multiple&&(o=o.join(",")),P.p.savedData[r]=o);break;case"checkbox":o=String(o),s[t].editoptions&&s[t].editoptions.value?s[t].editoptions.value.split(":")[0]===o?R("#"+r,d)[P.p.useProp?"prop":"attr"]({checked:!0,defaultChecked:!0}):R("#"+r,d)[P.p.useProp?"prop":"attr"]({checked:!1,defaultChecked:!1}):(o=o.toLowerCase()).search(/(false|f|0|no|n|off|undefined)/i)<0&&""!==o?(R("#"+r,d)[P.p.useProp?"prop":"attr"]("checked",!0),R("#"+r,d)[P.p.useProp?"prop":"attr"]("defaultChecked",!0)):(R("#"+r,d)[P.p.useProp?"prop":"attr"]("checked",!1),R("#"+r,d)[P.p.useProp?"prop":"attr"]("defaultChecked",!1)),!0!==U[P.p.id].checkOnSubmit&&!U[P.p.id].checkOnUpdate||(o=R("#"+r,d).is(":checked")?R("#"+r,d).val():R("#"+r,d).attr("offval"),P.p.savedData[r]=o);break;case"custom":try{if(!s[t].editoptions||!R.isFunction(s[t].editoptions.custom_value))throw"e1";s[t].editoptions.custom_value.call(P,R("#"+r,d),"set",o)}catch(e){"e1"===e?R.jgrid.info_dialog(b.errcap,"function 'custom_value' "+U[R(this)[0]].p.msg.nodefined,R.rp_ge[R(this)[0]].p.bClose,{styleUI:U[R(this)[0]].p.styleUI}):R.jgrid.info_dialog(b.errcap,e.message,R.rp_ge[R(this)[0]].p.bClose,{styleUI:U[R(this)[0]].p.styleUI})}break;default:("&nbsp;"===o||"&#160;"===o||1===o.length&&160===o.charCodeAt(0))&&(o=""),R("#"+r,d).val(o)}l++}}),0<l&&(R("#id_g",g).val(i),!0!==U[P.p.id].checkOnSubmit&&!U[P.p.id].checkOnUpdate||(P.p.savedData[a.p.id+"_id"]=i)))}function e(){var a,d,r,e,o,t,n=[!0,"",""],i={},l=P.p.prmNames,s=R(P).triggerHandler("jqGridAddEditBeforeCheckValues",[h,R(G),m]);if(s&&"object"==typeof s&&(h=s),R.isFunction(U[P.p.id].beforeCheckValues)&&(s=U[P.p.id].beforeCheckValues.call(P,h,R(G),m))&&"object"==typeof s&&(h=s),!U[P.p.id].html5Check||R.jgrid.validateForm(y[0])){for(e in h)if(h.hasOwnProperty(e)&&(n=R.jgrid.checkValues.call(P,h[e],e),!1===n[0]))break;if(R.each(P.p.colModel,function(e,t){t.editoptions&&!0===t.editoptions.NullIfEmpty&&h.hasOwnProperty(t.name)&&""===h[t.name]&&(h[t.name]="null")}),n[0]&&(void 0===(i=R(P).triggerHandler("jqGridAddEditClickSubmit",[U[P.p.id],h,m]))&&R.isFunction(U[P.p.id].onclickSubmit)&&(i=U[P.p.id].onclickSubmit.call(P,U[P.p.id],h,m)||{}),void 0===(n=R(P).triggerHandler("jqGridAddEditBeforeSubmit",[h,R(G),m]))&&(n=[!0,"",""]),n[0]&&R.isFunction(U[P.p.id].beforeSubmit)&&(n=U[P.p.id].beforeSubmit.call(P,h,R(G),m))),n[0]&&!U[P.p.id].processing){if(U[P.p.id].processing=!0,R("#sData",g+"_2").addClass(B.active),s=U[P.p.id].url||R(P).jqGrid("getGridParam","editurl"),r=l.oper,d="clientArray"===s?P.p.keyName:l.id,h[r]="_empty"===R.trim(h[P.p.id+"_id"])?l.addoper:l.editoper,h[r]===l.addoper&&void 0!==h[d]||(h[d]=h[P.p.id+"_id"]),delete h[P.p.id+"_id"],h=R.extend(h,U[P.p.id].editData,i),!0===P.p.treeGrid)for(t in h[r]===l.addoper&&(o=R(P).jqGrid("getGridParam","selrow"),p="adjacency"===P.p.treeGridModel?P.p.treeReader.parent_id_field:"parent_id",h[p]=o),P.p.treeReader)if(P.p.treeReader.hasOwnProperty(t)){var c=P.p.treeReader[t];if(h.hasOwnProperty(c)){if(h[r]===l.addoper&&"parent_id_field"===t)continue;delete h[c]}}h[d]=R.jgrid.stripPref(P.p.idPrefix,h[d]);var p=R.extend({url:s,type:U[P.p.id].mtype,data:R.isFunction(U[P.p.id].serializeEditData)?U[P.p.id].serializeEditData.call(P,h):h,complete:function(e,t){if(R("#sData",g+"_2").removeClass(B.active),h[d]=P.p.idPrefix+h[d],300<=e.status&&304!==e.status?(n[0]=!1,n[1]=R(P).triggerHandler("jqGridAddEditErrorTextFormat",[e,m]),R.isFunction(U[P.p.id].errorTextFormat)?n[1]=U[P.p.id].errorTextFormat.call(P,e,m):n[1]=t+" Status: '"+e.statusText+"'. Error code: "+e.status):(void 0===(n=R(P).triggerHandler("jqGridAddEditAfterSubmit",[e,h,m]))&&(n=[!0,"",""]),n[0]&&R.isFunction(U[P.p.id].afterSubmit)&&(n=U[P.p.id].afterSubmit.call(P,e,h,m))),!1===n[0])R(".FormError",G).html(n[1]),R(".FormError",G).show();else if(P.p.autoencode&&R.each(h,function(e,t){h[e]=R.jgrid.htmlDecode(t)}),h[r]===l.addoper?(n[2]||(n[2]=R.jgrid.randId()),null==h[d]||h[d]===P.p.idPrefix+"_empty"||""===h[d]?h[d]=n[2]:n[2]=h[d],U[P.p.id].reloadAfterSubmit?R(P).trigger("reloadGrid"):!0===P.p.treeGrid?R(P).jqGrid("addChildNode",n[2],o,h):R(P).jqGrid("addRowData",n[2],h,M.addedrow),U[P.p.id].closeAfterAdd?(!0!==P.p.treeGrid&&R(P).jqGrid("setSelection",n[2]),R.jgrid.hideModal("#"+R.jgrid.jqID(v.themodal),{gb:"#gbox_"+R.jgrid.jqID(f),jqm:M.jqModal,onClose:U[P.p.id].onClose,removemodal:U[P.p.id].removemodal,formprop:!U[P.p.id].recreateForm,form:U[P.p.id].form})):U[P.p.id].clearAfterAdd&&u("_empty",P,G)):(U[P.p.id].reloadAfterSubmit?(R(P).trigger("reloadGrid"),U[P.p.id].closeAfterEdit||setTimeout(function(){R(P).jqGrid("setSelection",h[d])},1e3)):!0===P.p.treeGrid?R(P).jqGrid("setTreeRow",h[d],h):R(P).jqGrid("setRowData",h[d],h),U[P.p.id].closeAfterEdit&&R.jgrid.hideModal("#"+R.jgrid.jqID(v.themodal),{gb:"#gbox_"+R.jgrid.jqID(f),jqm:M.jqModal,onClose:U[P.p.id].onClose,removemodal:U[P.p.id].removemodal,formprop:!U[P.p.id].recreateForm,form:U[P.p.id].form})),(R.isFunction(U[P.p.id].afterComplete)||Object.prototype.hasOwnProperty.call(R._data(R(P)[0],"events"),"jqGridAddEditAfterComplete"))&&(a=e,setTimeout(function(){R(P).triggerHandler("jqGridAddEditAfterComplete",[a,h,R(G),m]);try{U[P.p.id].afterComplete.call(P,a,h,R(G),m)}catch(e){}a=null},500)),(U[P.p.id].checkOnSubmit||U[P.p.id].checkOnUpdate)&&(R(G).data("disabled",!1),"_empty"!==P.p.savedData[P.p.id+"_id"]))for(var i in P.p.savedData)P.p.savedData.hasOwnProperty(i)&&h[i]&&(P.p.savedData[i]=h[i]);U[P.p.id].processing=!1;try{R(":input:visible",G)[0].focus()}catch(e){}}},R.jgrid.ajaxOptions,U[P.p.id].ajaxEditOptions);p.url||U[P.p.id].useDataProxy||(R.isFunction(P.p.dataProxy)?U[P.p.id].useDataProxy=!0:(n[0]=!1,n[1]+=" "+b.nourl)),n[0]&&(U[P.p.id].useDataProxy?(void 0===(s=P.p.dataProxy.call(P,p,"set_"+P.p.id))&&(s=[!0,""]),!1===s[0]?(n[0]=!1,n[1]=s[1]||"Error deleting the selected row!"):(p.data.oper===l.addoper&&U[P.p.id].closeAfterAdd&&R.jgrid.hideModal("#"+R.jgrid.jqID(v.themodal),{gb:"#gbox_"+R.jgrid.jqID(f),jqm:M.jqModal,onClose:U[P.p.id].onClose,removemodal:U[P.p.id].removemodal,formprop:!U[P.p.id].recreateForm,form:U[P.p.id].form}),p.data.oper===l.editoper&&U[P.p.id].closeAfterEdit&&R.jgrid.hideModal("#"+R.jgrid.jqID(v.themodal),{gb:"#gbox_"+R.jgrid.jqID(f),jqm:M.jqModal,onClose:U[P.p.id].onClose,removemodal:U[P.p.id].removemodal,formprop:!U[P.p.id].recreateForm,form:U[P.p.id].form}))):"clientArray"===p.url?(U[P.p.id].reloadAfterSubmit=!1,h=p.data,p.complete({status:200,statusText:""},"")):R.ajax(p))}!1===n[0]&&(R(".FormError",G).html(n[1]),R(".FormError",G).show())}}function i(e,t){var i,a=!1;if(!(a=!(R.isPlainObject(e)&&R.isPlainObject(t)&&Object.getOwnPropertyNames(e).length===Object.getOwnPropertyNames(t).length)))for(i in t)if(t.hasOwnProperty(i)){if(!e.hasOwnProperty(i)){a=!0;break}if(e[i]!==t[i]){a=!0;break}}return a}function a(){var e=!0;return R(".FormError",G).hide(),U[P.p.id].checkOnUpdate&&(h={},t(),i(h,P.p.savedData)&&(R(G).data("disabled",!0),R(".confirm","#"+v.themodal).show(),e=!1)),e}function d(e,t){var i=t[1].length-1;0===e||void 0!==t[1][e-1]&&R("#"+R.jgrid.jqID(t[1][e-1])).hasClass(B.disabled)?R("#pData",F).addClass(B.disabled):R("#pData",F).removeClass(B.disabled),e===i||void 0!==t[1][e+1]&&R("#"+R.jgrid.jqID(t[1][e+1])).hasClass(B.disabled)?R("#nData",F).addClass(B.disabled):R("#nData",F).removeClass(B.disabled)}function r(){var e=R(P).jqGrid("getDataIDs"),t=R("#id_g",g).val();if(P.p.multiselect&&U[P.p.id].editselected){for(var i=[],a=0,d=e.length;a<d;a++)-1!==R.inArray(e[a],P.p.selarrrow)&&i.push(e[a]);return[R.inArray(t,i),i]}return[R.inArray(t,e),e]}function o(){if(U[P.p.id].checkOnSubmit||U[P.p.id].checkOnUpdate){var e,t,i=[],a={},i=R.map(P.p.savedData,function(e,t){return t});for(e in R(".FormElement",y).each(function(){if(""!==R.trim(this.name)&&-1===i.indexOf(this.name)){var e=R(this).val(),t=R(this).get(0).type;if("checkbox"===t)R(this).is(":checked")||(e=R(this).attr("offval"));else if("select-multiple"===t)e=e.join(",");else if("radio"===t){if(a.hasOwnProperty(this.name))return!0;a[this.name]=void 0===R(this).attr("offval")?"off":R(this).attr("offval")}P.p.savedData[this.name]=e}}),a)a.hasOwnProperty(e)&&(t=R('input[name="'+e+'"]:checked',y).val(),P.p.savedData[e]=void 0!==t?t:a[e])}}var h,m,f,g,v,n,l,D,b,s,y,c,p,j,w,q,x,_,I,k,C,F,G,O,S,P=this;P.grid&&E&&(P.p.savedData={},f=P.p.id,G="FrmGrid_"+f,I="TblGrid_"+f,g="#"+R.jgrid.jqID(I),v={themodal:"editmod"+f,modalhead:"edithd"+f,modalcontent:"editcnt"+f,scrollelm:G},w=!0,n=1,l=0,D="string"==typeof U[P.p.id].template&&0<U[P.p.id].template.length,b=R.jgrid.getRegional(this,"errors"),U[P.p.id].styleUI=P.p.styleUI||"jQueryUI",R.jgrid.isMobile()&&(U[P.p.id].resize=!1),"new"===E?(E="_empty",m="add",M.caption=U[P.p.id].addCaption):(M.caption=U[P.p.id].editCaption,m="edit"),M.recreateForm||R(P).data("formProp")&&R.extend(U[R(this)[0].p.id],R(P).data("formProp")),C=!0,M.checkOnUpdate&&M.jqModal&&!M.modal&&(C=!1),j=isNaN(U[R(this)[0].p.id].dataheight)?U[R(this)[0].p.id].dataheight:U[R(this)[0].p.id].dataheight+"px",p=isNaN(U[R(this)[0].p.id].datawidth)?U[R(this)[0].p.id].datawidth:U[R(this)[0].p.id].datawidth+"px",y=R("<form name='FormPost' id='"+G+"' class='FormGrid' onSubmit='return false;' style='width:"+p+";height:"+j+";'></form>").data("disabled",!1),F=D?(O=U[R(this)[0].p.id].template,S="","string"==typeof O&&(S=O.replace(/\{([\w\-]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?\}/g,function(e,t){return'<span id="'+t+'" ></span>'})),s=S,g):(s=R("<table id='"+I+"' class='EditTable ui-common-table'><tbody></tbody></table>"),g+"_2"),G="#"+R.jgrid.jqID(G),R(y).append("<div class='FormError "+B.error+"' style='display:none;'></div>"),R(y).append("<div class='tinfo topinfo'>"+U[P.p.id].topinfo+"</div>"),R(P.p.colModel).each(function(){var e=this.formoptions;n=Math.max(n,e&&e.colpos||0),l=Math.max(l,e&&e.rowpos||0)}),R(y).append(s),void 0===(w=R(P).triggerHandler("jqGridAddEditBeforeInitData",[y,m]))&&(w=!0),w&&R.isFunction(U[P.p.id].beforeInitData)&&(w=U[P.p.id].beforeInitData.call(P,y,m)),!1!==w&&(function(){var e;if("_empty"!==E&&void 0!==P.p.savedRow&&0<P.p.savedRow.length&&R.isFunction(R.fn.jqGrid.restoreRow))for(e=0;e<P.p.savedRow.length;e++)if(P.p.savedRow[e].id===E){R(P).jqGrid("restoreRow",E);break}}(),function(o,n,l,s){for(var c,p,u,h,m,f,g,e,v=0,b=[],j=!1,w="",t=1;t<=s;t++)w+="<td class='CaptionTD'></td><td class='DataTD'></td>";"_empty"!==o&&(j=R(n).jqGrid("getInd",o)),R(n.p.colModel).each(function(t){if(c=this.name,p=(!this.editrules||!0!==this.editrules.edithidden)&&!0===this.hidden,m=p?"style='display:none'":"","cb"!==c&&"subgrid"!==c&&!0===this.editable&&"rn"!==c){if(!1===j)h="";else if(c===n.p.ExpandColumn&&!0===n.p.treeGrid)h=R("td[role='gridcell']:eq("+t+")",n.rows[j]).text();else{try{h=R.unformat.call(n,R("td[role='gridcell']:eq("+t+")",n.rows[j]),{rowId:o,colModel:this},t)}catch(e){h=this.edittype&&"textarea"===this.edittype?R("td[role='gridcell']:eq("+t+")",n.rows[j]).text():R("td[role='gridcell']:eq("+t+")",n.rows[j]).html()}h&&"&nbsp;"!==h&&"&#160;"!==h&&(1!==h.length||160!==h.charCodeAt(0))||(h="")}var e,i=R.extend({},this.editoptions||{},{id:c,name:c,rowId:o,oper:"edit",module:"form",checkUpdate:U[P.p.id].checkOnSubmit||U[P.p.id].checkOnUpdate}),a=R.extend({},{elmprefix:"",elmsuffix:"",rowabove:!1,rowcontent:""},this.formoptions||{}),d=parseInt(a.rowpos,10)||v+1,r=parseInt(2*(parseInt(a.colpos,10)||1),10);"_empty"===o&&i.defaultValue&&(h=R.isFunction(i.defaultValue)?i.defaultValue.call(P):i.defaultValue),this.edittype||(this.edittype="text"),P.p.autoencode&&(h=R.jgrid.htmlDecode(h)),f=R.jgrid.createEl.call(P,this.edittype,i,h,!1,R.extend({},R.jgrid.ajaxOptions,n.p.ajaxSelectOptions||{})),"select"===this.edittype&&(h=R(f).val(),"select-multiple"===R(f).get(0).type&&h&&(h=h.join(","))),"checkbox"===this.edittype&&(h=R(f).is(":checked")?R(f).val():R(f).attr("offval")),R(f).addClass("FormElement"),-1<R.inArray(this.edittype,["text","textarea","password","select","color","date","datetime","datetime-local","email","month","number","range","search","tel","time","url","week"])&&R(f).addClass(A.inputClass),g=!0,D?(e=R(y).find("#"+c)).length?e.replaceWith(f):g=!1:(u=R(l).find("tr[rowpos="+d+"]"),a.rowabove&&(e=R("<tr><td class='contentinfo' colspan='"+2*s+"'>"+a.rowcontent+"</td></tr>"),R(l).append(e),e[0].rp=d),0===u.length&&(u=R(1<s?"<tr rowpos='"+d+"'></tr>":"<tr "+m+" rowpos='"+d+"'></tr>").addClass("FormData").attr("id","tr_"+c),R(u).append(w),R(l).append(u),u[0].rp=d),R("td:eq("+(r-2)+")",u[0]).html("<label for='"+c+"'>"+(void 0===a.label?n.p.colNames[t]:a.label)+"</label>"),R("td:eq("+(r-1)+")",u[0]).append(a.elmprefix).append(f).append(a.elmsuffix),1<s&&p&&(R("td:eq("+(r-2)+")",u[0]).hide(),R("td:eq("+(r-1)+")",u[0]).hide())),(U[P.p.id].checkOnSubmit||U[P.p.id].checkOnUpdate)&&g&&(P.p.savedData[c]=h),"custom"===this.edittype&&R.isFunction(i.custom_value)&&i.custom_value.call(P,R("#"+c,G),"set",h),R.jgrid.bindEv.call(P,f,i),b[v]=t,v++}}),0<v&&(D?(e="<div class='FormData' style='display:none'><input class='FormElement' id='id_g' type='text' name='"+n.p.id+"_id' value='"+o+"'/>",R(y).append(e)):((e=R("<tr class='FormData' style='display:none'><td class='CaptionTD'></td><td colspan='"+(2*s-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='"+n.p.id+"_id' value='"+o+"'/></td></tr>"))[0].rp=v+999,R(l).append(e)),(U[P.p.id].checkOnSubmit||U[P.p.id].checkOnUpdate)&&(P.p.savedData[n.p.id+"_id"]=o))}(E,P,s,n),k=(c="rtl"===P.p.direction)?"pData":"nData",_="<a id='"+(c?"nData":"pData")+"' class='fm-button "+B.button+"'><span class='"+B.icon_base+" "+A.icon_prev+"'></span></a>",p="<a id='"+k+"' class='fm-button "+B.button+"'><span class='"+B.icon_base+" "+A.icon_next+"'></span></a>",j="<a id='sData' class='fm-button "+B.button+"'>"+M.bSubmit+"</a>",w="<a id='cData' class='fm-button "+B.button+"'>"+M.bCancel+"</a>",k=R.isArray(U[P.p.id].buttons)?R.jgrid.buildButtons(U[P.p.id].buttons,j+w,B):j+w,k="<table style='height:auto' class='EditTable ui-common-table' id='"+I+"_2'><tbody><tr><td colspan='2'><hr class='"+B.content+"' style='margin:1px'/></td></tr><tr id='Act_Buttons'><td class='navButton'>"+(c?p+_:_+p)+"</td><td class='EditButton'>"+k+"</td></tr>",k+="</tbody></table>",0<l&&(q=[],R.each(R(s)[0].rows,function(e,t){q[e]=t}),q.sort(function(e,t){return e.rp>t.rp?1:e.rp<t.rp?-1:0}),R.each(q,function(e,t){R("tbody",s).append(t)})),M.gbox="#gbox_"+R.jgrid.jqID(f),!(x=!1)===M.closeOnEscape&&(M.closeOnEscape=!1,x=!0),_=D?(R(y).find("#pData").replaceWith(_),R(y).find("#nData").replaceWith(p),R(y).find("#sData").replaceWith(j),R(y).find("#cData").replaceWith(w),R("<div id="+I+"></div>").append(y)):R("<div></div>").append(y).append(k),R(y).append("<div class='binfo topinfo bottominfo'>"+U[P.p.id].bottominfo+"</div>"),I=R(".ui-jqgrid").css("font-size")||"11px",R.jgrid.createModal(v,_,U[R(this)[0].p.id],"#gview_"+R.jgrid.jqID(P.p.id),R("#gbox_"+R.jgrid.jqID(P.p.id))[0],null,{"font-size":I}),c&&(R("#pData, #nData",g+"_2").css("float","right"),R(".EditButton",g+"_2").css("text-align","left")),U[P.p.id].topinfo&&R(".tinfo",G).show(),U[P.p.id].bottominfo&&R(".binfo",G).show(),k=_=null,R("#"+R.jgrid.jqID(v.themodal)).keydown(function(e){var t=e.target;return!0!==R(G).data("disabled")&&(!0===U[P.p.id].savekey[0]&&e.which===U[P.p.id].savekey[1]&&"TEXTAREA"!==t.tagName?(R("#sData",g+"_2").trigger("click"),!1):27===e.which?!!a()&&(x&&R.jgrid.hideModal("#"+R.jgrid.jqID(v.themodal),{gb:M.gbox,jqm:M.jqModal,onClose:U[P.p.id].onClose,removemodal:U[P.p.id].removemodal,formprop:!U[P.p.id].recreateForm,form:U[P.p.id].form}),!1):!0===U[P.p.id].navkeys[0]?"_empty"===R("#id_g",g).val()||(e.which===U[P.p.id].navkeys[1]?(R("#pData",F).trigger("click"),!1):e.which===U[P.p.id].navkeys[2]?(R("#nData",F).trigger("click"),!1):void 0):void 0)}),M.checkOnUpdate&&(R("a.ui-jqdialog-titlebar-close span","#"+R.jgrid.jqID(v.themodal)).removeClass("jqmClose"),R("a.ui-jqdialog-titlebar-close","#"+R.jgrid.jqID(v.themodal)).off("click").click(function(){return!!a()&&(R.jgrid.hideModal("#"+R.jgrid.jqID(v.themodal),{gb:"#gbox_"+R.jgrid.jqID(f),jqm:M.jqModal,onClose:U[P.p.id].onClose,removemodal:U[P.p.id].removemodal,formprop:!U[P.p.id].recreateForm,form:U[P.p.id].form}),!1)})),M.saveicon=R.extend([!0,"left",A.icon_save],M.saveicon),M.closeicon=R.extend([!0,"left",A.icon_close],M.closeicon),!0===M.saveicon[0]&&R("#sData",F).addClass("right"===M.saveicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+B.icon_base+" "+M.saveicon[2]+"'></span>"),!0===M.closeicon[0]&&R("#cData",F).addClass("right"===M.closeicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+B.icon_base+" "+M.closeicon[2]+"'></span>"),(U[P.p.id].checkOnSubmit||U[P.p.id].checkOnUpdate)&&(j="<a id='sNew' class='fm-button "+B.button+"' style='z-index:1002'>"+M.bYes+"</a>",p="<a id='nNew' class='fm-button "+B.button+"' style='z-index:1002;margin-left:5px'>"+M.bNo+"</a>",w="<a id='cNew' class='fm-button "+B.button+"' style='z-index:1002;margin-left:5px;'>"+M.bExit+"</a>",k=M.zIndex||999,k++,R("#"+v.themodal).append("<div class='"+M.overlayClass+" jqgrid-overlay confirm' style='z-index:"+k+";display:none;position:absolute;'>&#160;</div><div class='confirm ui-jqconfirm "+B.content+"' style='z-index:"+(1+k)+"'>"+M.saveData+"<br/><br/>"+j+p+w+"</div>"),R("#sNew","#"+R.jgrid.jqID(v.themodal)).click(function(){return e(),R(G).data("disabled",!1),R(".confirm","#"+R.jgrid.jqID(v.themodal)).hide(),!1}),R("#nNew","#"+R.jgrid.jqID(v.themodal)).click(function(){return R(".confirm","#"+R.jgrid.jqID(v.themodal)).hide(),R(G).data("disabled",!1),setTimeout(function(){R(":input:visible",G)[0].focus()},0),!1}),R("#cNew","#"+R.jgrid.jqID(v.themodal)).click(function(){return R(".confirm","#"+R.jgrid.jqID(v.themodal)).hide(),R(G).data("disabled",!1),R.jgrid.hideModal("#"+R.jgrid.jqID(v.themodal),{gb:"#gbox_"+R.jgrid.jqID(f),jqm:M.jqModal,onClose:U[P.p.id].onClose,removemodal:U[P.p.id].removemodal,formprop:!U[P.p.id].recreateForm,form:U[P.p.id].form}),!1})),R(P).triggerHandler("jqGridAddEditInitializeForm",[R(G),m]),R.isFunction(U[P.p.id].onInitializeForm)&&U[P.p.id].onInitializeForm.call(P,R(G),m),"_empty"!==E&&U[P.p.id].viewPagerButtons?R("#pData,#nData",F).show():R("#pData,#nData",F).hide(),R(P).triggerHandler("jqGridAddEditBeforeShowForm",[R(G),m]),R.isFunction(U[P.p.id].beforeShowForm)&&U[P.p.id].beforeShowForm.call(P,R(G),m),o(),R("#"+R.jgrid.jqID(v.themodal)).data("onClose",U[P.p.id].onClose),R.jgrid.viewModal("#"+R.jgrid.jqID(v.themodal),{gbox:"#gbox_"+R.jgrid.jqID(f),jqm:M.jqModal,overlay:M.overlay,modal:M.modal,overlayClass:M.overlayClass,focusField:M.focusField,onHide:function(e){var t=R("#editmod"+f)[0].style.height,i=R("#editmod"+f)[0].style.width;-1<t.indexOf("px")&&(t=parseFloat(t)),-1<i.indexOf("px")&&(i=parseFloat(i)),R(P).data("formProp",{top:parseFloat(R(e.w).css("top")),left:parseFloat(R(e.w).css("left")),width:i,height:t,dataheight:R(G).height(),datawidth:R(G).width()}),e.w.remove(),e.o&&e.o.remove()}}),C||R("."+R.jgrid.jqID(M.overlayClass)).click(function(){return!!a()&&(R.jgrid.hideModal("#"+R.jgrid.jqID(v.themodal),{gb:"#gbox_"+R.jgrid.jqID(f),jqm:M.jqModal,onClose:U[P.p.id].onClose,removemodal:U[P.p.id].removemodal,formprop:!U[P.p.id].recreateForm,form:U[P.p.id].form}),!1)}),R(".fm-button","#"+R.jgrid.jqID(v.themodal)).hover(function(){R(this).addClass(B.hover)},function(){R(this).removeClass(B.hover)}),R("#sData",F).click(function(){return h={},R(".FormError",G).hide(),t(),"_empty"!==h[P.p.id+"_id"]&&!0===M.checkOnSubmit?i(h,P.p.savedData)?(R(G).data("disabled",!0),R(".confirm","#"+R.jgrid.jqID(v.themodal)).show()):e():e(),!1}),R("#cData",F).click(function(){return!!a()&&(R.jgrid.hideModal("#"+R.jgrid.jqID(v.themodal),{gb:"#gbox_"+R.jgrid.jqID(f),jqm:M.jqModal,onClose:U[P.p.id].onClose,removemodal:U[P.p.id].removemodal,formprop:!U[P.p.id].recreateForm,form:U[P.p.id].form}),!1)}),R(F).find("[data-index]").each(function(){var t=parseInt(R(this).attr("data-index"),10);0<=t&&M.buttons[t].hasOwnProperty("click")&&R(this).on("click",function(e){M.buttons[t].click.call(P,R(G)[0],U[P.p.id],e)})}),R("#nData",F).click(function(){if(!a())return!1;R(".FormError",G).hide();var e,t=r();if(t[0]=parseInt(t[0],10),-1!==t[0]&&t[1][t[0]+1]){if(R(P).triggerHandler("jqGridAddEditClickPgButtons",["next",R(G),t[1][t[0]]]),R.isFunction(M.onclickPgButtons)&&void 0!==(e=M.onclickPgButtons.call(P,"next",R(G),t[1][t[0]]))&&!1===e)return!1;if(R("#"+R.jgrid.jqID(t[1][t[0]+1])).hasClass(B.disabled))return!1;u(t[1][t[0]+1],P,G),P.p.multiselect&&U[P.p.id].editselected||R(P).jqGrid("setSelection",t[1][t[0]+1]),R(P).triggerHandler("jqGridAddEditAfterClickPgButtons",["next",R(G),t[1][t[0]]]),R.isFunction(M.afterclickPgButtons)&&M.afterclickPgButtons.call(P,"next",R(G),t[1][t[0]+1]),o(),d(t[0]+1,t)}return!1}),R("#pData",F).click(function(){if(!a())return!1;R(".FormError",G).hide();var e,t=r();if(-1!==t[0]&&t[1][t[0]-1]){if(R(P).triggerHandler("jqGridAddEditClickPgButtons",["prev",R(G),t[1][t[0]]]),R.isFunction(M.onclickPgButtons)&&void 0!==(e=M.onclickPgButtons.call(P,"prev",R(G),t[1][t[0]]))&&!1===e)return!1;if(R("#"+R.jgrid.jqID(t[1][t[0]-1])).hasClass(B.disabled))return!1;u(t[1][t[0]-1],P,G),P.p.multiselect&&U[P.p.id].editselected||R(P).jqGrid("setSelection",t[1][t[0]-1]),R(P).triggerHandler("jqGridAddEditAfterClickPgButtons",["prev",R(G),t[1][t[0]]]),R.isFunction(M.afterclickPgButtons)&&M.afterclickPgButtons.call(P,"prev",R(G),t[1][t[0]-1]),o(),d(t[0]-1,t)}return!1}),R(P).triggerHandler("jqGridAddEditAfterShowForm",[R(G),m]),R.isFunction(U[P.p.id].afterShowForm)&&U[P.p.id].afterShowForm.call(P,R(G),m),d((C=r())[0],C)))})},viewGridRow:function(j,D){var e=R.jgrid.getRegional(this[0],"view"),t=this[0].p.styleUI,w=R.jgrid.styleUI[t].formedit,y=R.jgrid.styleUI[t].common;return D=R.extend(!0,{top:0,left:0,width:500,datawidth:"auto",height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,jqModal:!0,closeOnEscape:!1,labelswidth:"auto",closeicon:[],navkeys:[!1,38,40],onClose:null,beforeShowForm:null,beforeInitData:null,viewPagerButtons:!0,recreateForm:!1,removemodal:!0,form:"view",buttons:[]},e,D||{}),U[R(this)[0].p.id]=D,this.each(function(){function t(){!0!==U[b.p.id].closeOnEscape&&!0!==U[b.p.id].navkeys[0]||setTimeout(function(){R(".ui-jqdialog-titlebar-close","#"+R.jgrid.jqID(l.modalhead)).attr("tabindex","-1").focus()},0)}function i(e,t){var i,a,d,r,o=0;(r=R(t).jqGrid("getInd",e,!0))&&(R("td",r).each(function(e){i=t.p.colModel[e].name,a=(!t.p.colModel[e].editrules||!0!==t.p.colModel[e].editrules.edithidden)&&!0===t.p.colModel[e].hidden,"cb"!==i&&"subgrid"!==i&&"rn"!==i&&(d=i===t.p.ExpandColumn&&!0===t.p.treeGrid?R(this).text():R(this).html(),i=R.jgrid.jqID("v_"+i),R("#"+i+" span","#"+n).html(d),a&&R("#"+i,"#"+n).parents("tr:first").hide(),o++)}),0<o&&R("#id_g","#"+n).val(e))}function a(e,t){var i=t[1].length-1;0===e?R("#pData","#"+n+"_2").addClass(y.disabled):void 0!==t[1][e-1]&&R("#"+R.jgrid.jqID(t[1][e-1])).hasClass(y.disabled)?R("#pData",n+"_2").addClass(y.disabled):R("#pData","#"+n+"_2").removeClass(y.disabled),e===i?R("#nData","#"+n+"_2").addClass(y.disabled):void 0!==t[1][e+1]&&R("#"+R.jgrid.jqID(t[1][e+1])).hasClass(y.disabled)?R("#nData",n+"_2").addClass(y.disabled):R("#nData","#"+n+"_2").removeClass(y.disabled)}function d(){var e=R(b).jqGrid("getDataIDs"),t=R("#id_g","#"+n).val();if(b.p.multiselect&&U[b.p.id].viewselected){for(var i=[],a=0,d=e.length;a<d;a++)-1!==R.inArray(e[a],b.p.selarrrow)&&i.push(e[a]);return[R.inArray(t,i),i]}return[R.inArray(t,e),e]}var e,r,n,o,l,s,c,p,u,h,m,f,g,v,b=this;b.grid&&j&&(e=b.p.id,r="ViewGrid_"+R.jgrid.jqID(e),n="ViewTbl_"+R.jgrid.jqID(e),o="ViewGrid_"+e,m="ViewTbl_"+e,l={themodal:"viewmod"+e,modalhead:"viewhd"+e,modalcontent:"viewcnt"+e,scrollelm:r},v=!0,s=1,c=0,U[b.p.id].styleUI=b.p.styleUI||"jQueryUI",D.recreateForm||R(b).data("viewProp")&&R.extend(U[R(this)[0].p.id],R(b).data("viewProp")),g=isNaN(U[R(this)[0].p.id].dataheight)?U[R(this)[0].p.id].dataheight:U[R(this)[0].p.id].dataheight+"px",h=isNaN(U[R(this)[0].p.id].datawidth)?U[R(this)[0].p.id].datawidth:U[R(this)[0].p.id].datawidth+"px",p=R("<form name='FormPost' id='"+o+"' class='FormGrid' style='width:"+h+";height:"+g+";'></form>"),u=R("<table id='"+m+"' class='EditTable ViewTable'><tbody></tbody></table>"),R(b.p.colModel).each(function(){var e=this.formoptions;s=Math.max(s,e&&e.colpos||0),c=Math.max(c,e&&e.rowpos||0)}),R(p).append(u),void 0===(v=R(b).triggerHandler("jqGridViewRowBeforeInitData",[p]))&&(v=!0),v&&R.isFunction(U[b.p.id].beforeInitData)&&(v=U[b.p.id].beforeInitData.call(b,p)),!1!==v&&(function(e,r,o,n){for(var l,s,c,p,u,h,m,f,g=0,v=[],t="<td class='CaptionTD form-view-label "+y.content+"' width='"+D.labelswidth+"'></td><td class='DataTD form-view-data ui-helper-reset "+y.content+"'></td>",b="",i="<td class='CaptionTD form-view-label "+y.content+"'></td><td class='DataTD form-view-data "+y.content+"'></td>",a=["integer","number","currency"],d=0,j=0,w=1;w<=n;w++)b+=1===w?t:i;R(r.p.colModel).each(function(){(s=(!this.editrules||!0!==this.editrules.edithidden)&&!0===this.hidden)||"right"!==this.align||(this.formatter&&-1!==R.inArray(this.formatter,a)?d=Math.max(d,parseInt(this.width,10)):j=Math.max(j,parseInt(this.width,10)))}),u=0!==d?d:0!==j?j:0,f=R(r).jqGrid("getInd",e),R(r.p.colModel).each(function(e){var t,i,a,d;l=this.name,s=(!this.editrules||!0!==this.editrules.edithidden)&&!0===this.hidden,p=s?"style='display:none'":"",m="boolean"!=typeof this.viewable||this.viewable,"cb"!==l&&"subgrid"!==l&&"rn"!==l&&m&&(c=!1===f?"":l===r.p.ExpandColumn&&!0===r.p.treeGrid?R("td:eq("+e+")",r.rows[f]).text():R("td:eq("+e+")",r.rows[f]).html(),h="right"===this.align&&0!==u,t=R.extend({},{rowabove:!1,rowcontent:""},this.formoptions||{}),i=parseInt(t.rowpos,10)||g+1,a=parseInt(2*(parseInt(t.colpos,10)||1),10),t.rowabove&&(d=R("<tr><td class='contentinfo' colspan='"+2*n+"'>"+t.rowcontent+"</td></tr>"),R(o).append(d),d[0].rp=i),0===(m=R(o).find("tr[rowpos="+i+"]")).length&&(m=R("<tr "+p+" rowpos='"+i+"'></tr>").addClass("FormData").attr("id","trv_"+l),R(m).append(b),R(o).append(m),m[0].rp=i),R("td:eq("+(a-2)+")",m[0]).html("<b>"+(void 0===t.label?r.p.colNames[e]:t.label)+"</b>"),R("td:eq("+(a-1)+")",m[0]).append("<span>"+c+"</span>").attr("id","v_"+l),h&&R("td:eq("+(a-1)+") span",m[0]).css({"text-align":"right",width:u+"px"}),v[g]=e,g++)}),0<g&&((e=R("<tr class='FormData' style='display:none'><td class='CaptionTD'></td><td colspan='"+(2*n-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='id' value='"+e+"'/></td></tr>"))[0].rp=g+99,R(o).append(e))}(j,b,u,s),g=(h="rtl"===b.p.direction)?"pData":"nData",m="<a id='"+(h?"nData":"pData")+"' class='fm-button "+y.button+"'><span class='"+y.icon_base+" "+w.icon_prev+"'></span></a>",v="<a id='"+g+"' class='fm-button "+y.button+"'><span class='"+y.icon_base+" "+w.icon_next+"'></span></a>",g="<a id='cData' class='fm-button "+y.button+"'>"+D.bClose+"</a>",g=R.isArray(U[b.p.id].buttons)?R.jgrid.buildButtons(U[b.p.id].buttons,g,y):g,0<c&&(f=[],R.each(R(u)[0].rows,function(e,t){f[e]=t}),f.sort(function(e,t){return e.rp>t.rp?1:e.rp<t.rp?-1:0}),R.each(f,function(e,t){R("tbody",u).append(t)})),D.gbox="#gbox_"+R.jgrid.jqID(e),v=R("<div></div>").append(p).append("<table border='0' class='EditTable' id='"+n+"_2'><tbody><tr id='Act_Buttons'><td class='navButton' width='"+D.labelswidth+"'>"+(h?v+m:m+v)+"</td><td class='EditButton'>"+g+"</td></tr></tbody></table>"),g=R(".ui-jqgrid").css("font-size")||"11px",R.jgrid.createModal(l,v,U[R(this)[0].p.id],"#gview_"+R.jgrid.jqID(b.p.id),R("#gview_"+R.jgrid.jqID(b.p.id))[0],null,{"font-size":g}),h&&(R("#pData, #nData","#"+n+"_2").css("float","right"),R(".EditButton","#"+n+"_2").css("text-align","left")),D.viewPagerButtons||R("#pData, #nData","#"+n+"_2").hide(),v=null,R("#"+l.themodal).keydown(function(e){return 27===e.which?(U[b.p.id].closeOnEscape&&R.jgrid.hideModal("#"+R.jgrid.jqID(l.themodal),{gb:D.gbox,jqm:D.jqModal,onClose:D.onClose,removemodal:U[b.p.id].removemodal,formprop:!U[b.p.id].recreateForm,form:U[b.p.id].form}),!1):!0===D.navkeys[0]?e.which===D.navkeys[1]?(R("#pData","#"+n+"_2").trigger("click"),!1):e.which===D.navkeys[2]?(R("#nData","#"+n+"_2").trigger("click"),!1):void 0:void 0}),D.closeicon=R.extend([!0,"left",w.icon_close],D.closeicon),!0===D.closeicon[0]&&R("#cData","#"+n+"_2").addClass("right"===D.closeicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+y.icon_base+" "+D.closeicon[2]+"'></span>"),R(b).triggerHandler("jqGridViewRowBeforeShowForm",[R("#"+r)]),R.isFunction(D.beforeShowForm)&&D.beforeShowForm.call(b,R("#"+r)),R.jgrid.viewModal("#"+R.jgrid.jqID(l.themodal),{gbox:"#gbox_"+R.jgrid.jqID(e),jqm:D.jqModal,overlay:D.overlay,modal:D.modal,onHide:function(e){R(b).data("viewProp",{top:parseFloat(R(e.w).css("top")),left:parseFloat(R(e.w).css("left")),width:R(e.w).width(),height:R(e.w).height(),dataheight:R("#"+r).height(),datawidth:R("#"+r).width()}),e.w.remove(),e.o&&e.o.remove()}}),R(".fm-button:not(."+y.disabled+")","#"+n+"_2").hover(function(){R(this).addClass(y.hover)},function(){R(this).removeClass(y.hover)}),t(),R("#cData","#"+n+"_2").click(function(){return R.jgrid.hideModal("#"+R.jgrid.jqID(l.themodal),{gb:"#gbox_"+R.jgrid.jqID(e),jqm:D.jqModal,onClose:D.onClose,removemodal:U[b.p.id].removemodal,formprop:!U[b.p.id].recreateForm,form:U[b.p.id].form}),!1}),R("#"+n+"_2").find("[data-index]").each(function(){var t=parseInt(R(this).attr("data-index"),10);0<=t&&D.buttons[t].hasOwnProperty("click")&&R(this).on("click",function(e){D.buttons[t].click.call(b,R("#"+o)[0],U[b.p.id],e)})}),R("#nData","#"+n+"_2").click(function(){R("#FormError","#"+n).hide();var e=d();return e[0]=parseInt(e[0],10),-1!==e[0]&&e[1][e[0]+1]&&(R(b).triggerHandler("jqGridViewRowClickPgButtons",["next",R("#"+r),e[1][e[0]]]),R.isFunction(D.onclickPgButtons)&&D.onclickPgButtons.call(b,"next",R("#"+r),e[1][e[0]]),i(e[1][e[0]+1],b),b.p.multiselect&&U[b.p.id].viewselected||R(b).jqGrid("setSelection",e[1][e[0]+1]),R(b).triggerHandler("jqGridViewRowAfterClickPgButtons",["next",R("#"+r),e[1][e[0]+1]]),R.isFunction(D.afterclickPgButtons)&&D.afterclickPgButtons.call(b,"next",R("#"+r),e[1][e[0]+1]),a(e[0]+1,e)),t(),!1}),R("#pData","#"+n+"_2").click(function(){R("#FormError","#"+n).hide();var e=d();return-1!==e[0]&&e[1][e[0]-1]&&(R(b).triggerHandler("jqGridViewRowClickPgButtons",["prev",R("#"+r),e[1][e[0]]]),R.isFunction(D.onclickPgButtons)&&D.onclickPgButtons.call(b,"prev",R("#"+r),e[1][e[0]]),i(e[1][e[0]-1],b),b.p.multiselect&&U[b.p.id].viewselected||R(b).jqGrid("setSelection",e[1][e[0]-1]),R(b).triggerHandler("jqGridViewRowAfterClickPgButtons",["prev",R("#"+r),e[1][e[0]-1]]),R.isFunction(D.afterclickPgButtons)&&D.afterclickPgButtons.call(b,"prev",R("#"+r),e[1][e[0]-1]),a(e[0]-1,e)),t(),!1}),a((v=d())[0],v)))})},delGridRow:function(h,m){var e=R.jgrid.getRegional(this[0],"del"),t=this[0].p.styleUI,f=R.jgrid.styleUI[t].formedit,g=R.jgrid.styleUI[t].common;return m=R.extend(!0,{top:0,left:0,width:240,height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,url:"",mtype:"POST",reloadAfterSubmit:!0,beforeShowForm:null,beforeInitData:null,afterShowForm:null,beforeSubmit:null,onclickSubmit:null,afterSubmit:null,jqModal:!0,closeOnEscape:!1,delData:{},delicon:[],cancelicon:[],onClose:null,ajaxDelOptions:{},processing:!1,serializeDelData:null,useDataProxy:!1},e,m||{}),U[R(this)[0].p.id]=m,this.each(function(){var o=this;if(o.grid&&h){var n,a,l,s=o.p.id,c={},e=!0,p="DelTbl_"+R.jgrid.jqID(s),i="DelTbl_"+s,u={themodal:"delmod"+s,modalhead:"delhd"+s,modalcontent:"delcnt"+s,scrollelm:p};if(U[o.p.id].styleUI=o.p.styleUI||"jQueryUI",R.isArray(h)&&(h=h.join()),void 0!==R("#"+R.jgrid.jqID(u.themodal))[0]){if(void 0===(e=R(o).triggerHandler("jqGridDelRowBeforeInitData",[R("#"+p)]))&&(e=!0),e&&R.isFunction(U[o.p.id].beforeInitData)&&(e=U[o.p.id].beforeInitData.call(o,R("#"+p))),!1===e)return;R("#DelData>td","#"+p).text(h),R("#DelError","#"+p).hide(),!0===U[o.p.id].processing&&(U[o.p.id].processing=!1,R("#dData","#"+p).removeClass(g.active)),R(o).triggerHandler("jqGridDelRowBeforeShowForm",[R("#"+p)]),R.isFunction(U[o.p.id].beforeShowForm)&&U[o.p.id].beforeShowForm.call(o,R("#"+p)),R.jgrid.viewModal("#"+R.jgrid.jqID(u.themodal),{gbox:"#gbox_"+R.jgrid.jqID(s),jqm:U[o.p.id].jqModal,overlay:U[o.p.id].overlay,modal:U[o.p.id].modal}),R(o).triggerHandler("jqGridDelRowAfterShowForm",[R("#"+p)]),R.isFunction(U[o.p.id].afterShowForm)&&U[o.p.id].afterShowForm.call(o,R("#"+p))}else{var t=isNaN(U[o.p.id].dataheight)?U[o.p.id].dataheight:U[o.p.id].dataheight+"px",d=isNaN(m.datawidth)?m.datawidth:m.datawidth+"px",r="<div id='"+i+"' class='formdata' style='width:"+d+";overflow:auto;position:relative;height:"+t+";'>";r+="<table class='DelTable'><tbody>",r+="<tr id='DelError' style='display:none'><td class='"+g.error+"'></td></tr>",r+="<tr id='DelData' style='display:none'><td >"+h+"</td></tr>",r+='<tr><td class="delmsg" style="white-space:pre;">'+U[o.p.id].msg+"</td></tr><tr><td >&#160;</td></tr>",r+="</tbody></table></div>";d="<a id='dData' class='fm-button "+g.button+"'>"+m.bSubmit+"</a>",t="<a id='eData' class='fm-button "+g.button+"'>"+m.bCancel+"</a>",d=R.isArray(U[o.p.id].buttons)?R.jgrid.buildButtons(U[o.p.id].buttons,d+t,g):d+t,t=R(".ui-jqgrid").css("font-size")||"11px";if(r+="<table class='EditTable ui-common-table' id='"+p+"_2'><tbody><tr><td><hr class='"+g.content+"' style='margin:1px'/></td></tr><tr><td class='DelButton EditButton'>"+d+"</td></tr></tbody></table>",m.gbox="#gbox_"+R.jgrid.jqID(s),R.jgrid.createModal(u,r,U[o.p.id],"#gview_"+R.jgrid.jqID(o.p.id),R("#gview_"+R.jgrid.jqID(o.p.id))[0],null,{"font-size":t}),R(".fm-button","#"+p+"_2").hover(function(){R(this).addClass(g.hover)},function(){R(this).removeClass(g.hover)}),m.delicon=R.extend([!0,"left",f.icon_del],U[o.p.id].delicon),m.cancelicon=R.extend([!0,"left",f.icon_cancel],U[o.p.id].cancelicon),!0===m.delicon[0]&&R("#dData","#"+p+"_2").addClass("right"===m.delicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+g.icon_base+" "+m.delicon[2]+"'></span>"),!0===m.cancelicon[0]&&R("#eData","#"+p+"_2").addClass("right"===m.cancelicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+g.icon_base+" "+m.cancelicon[2]+"'></span>"),R("#dData","#"+p+"_2").click(function(){var e,d=[!0,""],r=R("#DelData>td","#"+p).text();if(c={},void 0===(c=R(o).triggerHandler("jqGridDelRowClickSubmit",[U[o.p.id],r]))&&R.isFunction(U[o.p.id].onclickSubmit)&&(c=U[o.p.id].onclickSubmit.call(o,U[o.p.id],r)||{}),void 0===(d=R(o).triggerHandler("jqGridDelRowBeforeSubmit",[r]))&&(d=[!0,"",""]),d[0]&&R.isFunction(U[o.p.id].beforeSubmit)&&(d=U[o.p.id].beforeSubmit.call(o,r)),d[0]&&!U[o.p.id].processing){if(U[o.p.id].processing=!0,a=o.p.prmNames,n=R.extend({},U[o.p.id].delData,c),l=a.oper,n[l]=a.deloper,a=a.id,!(r=String(r).split(",")).length)return!1;for(e in r)r.hasOwnProperty(e)&&(r[e]=R.jgrid.stripPref(o.p.idPrefix,r[e]));n[a]=r.join(),R(this).addClass(g.active);var t,i=R.extend({url:U[o.p.id].url||R(o).jqGrid("getGridParam","editurl"),type:U[o.p.id].mtype,data:R.isFunction(U[o.p.id].serializeDelData)?U[o.p.id].serializeDelData.call(o,n):n,complete:function(e,t){var i,a;if(R("#dData","#"+p+"_2").removeClass(g.active),300<=e.status&&304!==e.status?(d[0]=!1,d[1]=R(o).triggerHandler("jqGridDelRowErrorTextFormat",[e]),R.isFunction(U[o.p.id].errorTextFormat)&&(d[1]=U[o.p.id].errorTextFormat.call(o,e)),void 0===d[1]&&(d[1]=t+" Status: '"+e.statusText+"'. Error code: "+e.status)):(void 0===(d=R(o).triggerHandler("jqGridDelRowAfterSubmit",[e,n]))&&(d=[!0,"",""]),d[0]&&R.isFunction(U[o.p.id].afterSubmit)&&(d=U[o.p.id].afterSubmit.call(o,e,n))),!1===d[0])R("#DelError>td","#"+p).html(d[1]),R("#DelError","#"+p).show();else{if(U[o.p.id].reloadAfterSubmit&&"local"!==o.p.datatype)R(o).trigger("reloadGrid");else{if(!0===o.p.treeGrid)try{R(o).jqGrid("delTreeNode",o.p.idPrefix+r[0])}catch(e){}else for(i=0;i<r.length;i++)R(o).jqGrid("delRowData",o.p.idPrefix+r[i]);o.p.selrow=null,o.p.selarrrow=[]}(R.isFunction(U[o.p.id].afterComplete)||Object.prototype.hasOwnProperty.call(R._data(R(o)[0],"events"),"jqGridDelRowAfterComplete"))&&(a=e,setTimeout(function(){R(o).triggerHandler("jqGridDelRowAfterComplete",[a,n]);try{U[o.p.id].afterComplete.call(o,a,n)}catch(e){}},500))}U[o.p.id].processing=!1,d[0]&&R.jgrid.hideModal("#"+R.jgrid.jqID(u.themodal),{gb:"#gbox_"+R.jgrid.jqID(s),jqm:m.jqModal,onClose:U[o.p.id].onClose})}},R.jgrid.ajaxOptions,U[o.p.id].ajaxDelOptions);i.url||U[o.p.id].useDataProxy||(R.isFunction(o.p.dataProxy)?U[o.p.id].useDataProxy=!0:(d[0]=!1,d[1]+=" "+R.jgrid.getRegional(o,"errors.nourl"))),d[0]&&(U[o.p.id].useDataProxy?(void 0===(t=o.p.dataProxy.call(o,i,"del_"+o.p.id))&&(t=[!0,""]),!1===t[0]?(d[0]=!1,d[1]=t[1]||"Error deleting the selected row!"):R.jgrid.hideModal("#"+R.jgrid.jqID(u.themodal),{gb:"#gbox_"+R.jgrid.jqID(s),jqm:m.jqModal,onClose:U[o.p.id].onClose})):"clientArray"===i.url?(n=i.data,i.complete({status:200,statusText:""},"")):R.ajax(i))}return!1===d[0]&&(R("#DelError>td","#"+p).html(d[1]),R("#DelError","#"+p).show()),!1}),R("#eData","#"+p+"_2").click(function(){return R.jgrid.hideModal("#"+R.jgrid.jqID(u.themodal),{gb:"#gbox_"+R.jgrid.jqID(s),jqm:U[o.p.id].jqModal,onClose:U[o.p.id].onClose}),!1}),R("#"+p+"_2").find("[data-index]").each(function(){var t=parseInt(R(this).attr("data-index"),10);0<=t&&m.buttons[t].hasOwnProperty("click")&&R(this).on("click",function(e){m.buttons[t].click.call(o,R("#"+i)[0],U[o.p.id],e)})}),void 0===(e=R(o).triggerHandler("jqGridDelRowBeforeInitData",[R("#"+p)]))&&(e=!0),e&&R.isFunction(U[o.p.id].beforeInitData)&&(e=U[o.p.id].beforeInitData.call(o,R("#"+p))),!1===e)return;R(o).triggerHandler("jqGridDelRowBeforeShowForm",[R("#"+p)]),R.isFunction(U[o.p.id].beforeShowForm)&&U[o.p.id].beforeShowForm.call(o,R("#"+p)),R.jgrid.viewModal("#"+R.jgrid.jqID(u.themodal),{gbox:"#gbox_"+R.jgrid.jqID(s),jqm:U[o.p.id].jqModal,overlay:U[o.p.id].overlay,modal:U[o.p.id].modal}),R(o).triggerHandler("jqGridDelRowAfterShowForm",[R("#"+p)]),R.isFunction(U[o.p.id].afterShowForm)&&U[o.p.id].afterShowForm.call(o,R("#"+p))}!0===U[o.p.id].closeOnEscape&&setTimeout(function(){R(".ui-jqdialog-titlebar-close","#"+R.jgrid.jqID(u.modalhead)).attr("tabindex","-1").focus()},0)}})},navGrid:function(h,m,f,g,v,b,j){var w=R.jgrid.getRegional(this[0],"nav"),D=this[0].p.styleUI,e=R.jgrid.styleUI[D].navigator,y=R.jgrid.styleUI[D].common;return m=R.extend({edit:!0,editicon:e.icon_edit_nav,add:!0,addicon:e.icon_add_nav,del:!0,delicon:e.icon_del_nav,search:!0,searchicon:e.icon_search_nav,refresh:!0,refreshicon:e.icon_refresh_nav,refreshstate:"firstpage",view:!1,viewicon:e.icon_view_nav,position:"left",closeOnEscape:!0,beforeRefresh:null,afterRefresh:null,cloneToTop:!1,alertwidth:200,alertheight:"auto",alerttop:null,alertleft:null,alertzIndex:null,dropmenu:!1,navButtonText:""},w,m||{}),this.each(function(){if(!this.p.navGrid){var t,e,i={themodal:"alertmod_"+this.p.id,modalhead:"alerthd_"+this.p.id,modalcontent:"alertcnt_"+this.p.id},a=this;if(a.grid&&"string"==typeof h){R(a).data("navGrid")||R(a).data("navGrid",m),t=R(a).data("navGrid"),a.p.force_regional&&(t=R.extend(t,w)),void 0===R("#"+i.themodal)[0]&&(t.alerttop||t.alertleft||((e=R.jgrid.findPos(this))[0]=Math.round(e[0]),e[1]=Math.round(e[1]),t.alertleft=e[0]+this.p.width/2-parseInt(t.alertwidth,10)/2,t.alerttop=e[1]+this.p.height/2-25),e=R(".ui-jqgrid").css("font-size")||"11px",R.jgrid.createModal(i,"<div>"+t.alerttext+"</div><span tabindex='0'><span tabindex='-1' id='jqg_alrt'></span></span>",{gbox:"#gbox_"+R.jgrid.jqID(a.p.id),jqModal:!0,drag:!0,resize:!0,caption:t.alertcap,top:t.alerttop,left:t.alertleft,width:t.alertwidth,height:t.alertheight,closeOnEscape:t.closeOnEscape,zIndex:t.alertzIndex,styleUI:a.p.styleUI},"#gview_"+R.jgrid.jqID(a.p.id),R("#gbox_"+R.jgrid.jqID(a.p.id))[0],!0,{"font-size":e}));var d,r=1,o=function(){R(this).hasClass(y.disabled)||R(this).addClass(y.hover)},n=function(){R(this).removeClass(y.hover)};for(t.cloneToTop&&a.p.toppager&&(r=2),d=0;d<r;d++){var l,s,c,p=R("<table class='ui-pg-table navtable ui-common-table'><tbody><tr></tr></tbody></table>"),u="<td class='ui-pg-button "+y.disabled+"' style='width:4px;'><span class='ui-separator'></span></td>";0===d?(0===(s=h).indexOf("#")&&(s=s.substring(1),s="#"+R.jgrid.jqID(s)),c=a.p.id,s===a.p.toppager&&(c+="_top",r=1)):(s=a.p.toppager,c=a.p.id+"_top"),"rtl"===a.p.direction&&R(p).attr("dir","rtl").css("float","right"),g=g||{},t.add&&(l=R("<td class='ui-pg-button "+y.cornerall+"'></td>"),R(l).append("<div class='ui-pg-div'><span class='"+y.icon_base+" "+t.addicon+"'></span>"+t.addtext+"</div>"),R("tr",p).append(l),R(l,p).attr({title:t.addtitle||"",id:g.id||"add_"+c}).click(function(){return R(this).hasClass(y.disabled)||(R.jgrid.setSelNavIndex(a,this),R.isFunction(t.addfunc)?t.addfunc.call(a):R(a).jqGrid("editGridRow","new",g)),!1}).hover(o,n),l=null),f=f||{},t.edit&&(l=R("<td class='ui-pg-button "+y.cornerall+"'></td>"),R(l).append("<div class='ui-pg-div'><span class='"+y.icon_base+" "+t.editicon+"'></span>"+t.edittext+"</div>"),R("tr",p).append(l),R(l,p).attr({title:t.edittitle||"",id:f.id||"edit_"+c}).click(function(){var e;return R(this).hasClass(y.disabled)||((e=a.p.selrow)?(R.jgrid.setSelNavIndex(a,this),R.isFunction(t.editfunc)?t.editfunc.call(a,e):R(a).jqGrid("editGridRow",e,f)):(R.jgrid.viewModal("#"+i.themodal,{gbox:"#gbox_"+R.jgrid.jqID(a.p.id),jqm:!0}),R("#jqg_alrt").focus())),!1}).hover(o,n),l=null),j=j||{},t.view&&(l=R("<td class='ui-pg-button "+y.cornerall+"'></td>"),R(l).append("<div class='ui-pg-div'><span class='"+y.icon_base+" "+t.viewicon+"'></span>"+t.viewtext+"</div>"),R("tr",p).append(l),R(l,p).attr({title:t.viewtitle||"",id:j.id||"view_"+c}).click(function(){var e;return R(this).hasClass(y.disabled)||((e=a.p.selrow)?(R.jgrid.setSelNavIndex(a,this),R.isFunction(t.viewfunc)?t.viewfunc.call(a,e):R(a).jqGrid("viewGridRow",e,j)):(R.jgrid.viewModal("#"+i.themodal,{gbox:"#gbox_"+R.jgrid.jqID(a.p.id),jqm:!0}),R("#jqg_alrt").focus())),!1}).hover(o,n),l=null),v=v||{},t.del&&(l=R("<td class='ui-pg-button "+y.cornerall+"'></td>"),R(l).append("<div class='ui-pg-div'><span class='"+y.icon_base+" "+t.delicon+"'></span>"+t.deltext+"</div>"),R("tr",p).append(l),R(l,p).attr({title:t.deltitle||"",id:v.id||"del_"+c}).click(function(){var e;return R(this).hasClass(y.disabled)||(a.p.multiselect?0===(e=a.p.selarrrow).length&&(e=null):e=a.p.selrow,e?(R.jgrid.setSelNavIndex(a,this),R.isFunction(t.delfunc)?t.delfunc.call(a,e):R(a).jqGrid("delGridRow",e,v)):(R.jgrid.viewModal("#"+i.themodal,{gbox:"#gbox_"+R.jgrid.jqID(a.p.id),jqm:!0}),R("#jqg_alrt").focus())),!1}).hover(o,n),l=null),(t.add||t.edit||t.del||t.view)&&R("tr",p).append(u),b=b||{},t.search&&(l=R("<td class='ui-pg-button "+y.cornerall+"'></td>"),R(l).append("<div class='ui-pg-div'><span class='"+y.icon_base+" "+t.searchicon+"'></span>"+t.searchtext+"</div>"),R("tr",p).append(l),R(l,p).attr({title:t.searchtitle||"",id:b.id||"search_"+c}).click(function(){return R(this).hasClass(y.disabled)||(R.jgrid.setSelNavIndex(a,this),R.isFunction(t.searchfunc)?t.searchfunc.call(a,b):R(a).jqGrid("searchGrid",b)),!1}).hover(o,n),b.showOnLoad&&!0===b.showOnLoad&&R(l,p).click(),l=null),t.refresh&&(l=R("<td class='ui-pg-button "+y.cornerall+"'></td>"),R(l).append("<div class='ui-pg-div'><span class='"+y.icon_base+" "+t.refreshicon+"'></span>"+t.refreshtext+"</div>"),R("tr",p).append(l),R(l,p).attr({title:t.refreshtitle||"",id:"refresh_"+c}).click(function(){if(!R(this).hasClass(y.disabled)){R.isFunction(t.beforeRefresh)&&t.beforeRefresh.call(a),a.p.search=!1,a.p.resetsearch=!0;try{if("currentfilter"!==t.refreshstate){var e=a.p.id;a.p.postData.filters="";try{R("#fbox_"+R.jgrid.jqID(e)).jqFilter("resetFilter")}catch(e){}R.isFunction(a.clearToolbar)&&a.clearToolbar.call(a,!1)}}catch(e){}switch(t.refreshstate){case"firstpage":R(a).trigger("reloadGrid",[{page:1}]);break;case"current":case"currentfilter":R(a).trigger("reloadGrid",[{current:!0}])}R.isFunction(t.afterRefresh)&&t.afterRefresh.call(a),R.jgrid.setSelNavIndex(a,this)}return!1}).hover(o,n),l=null),u=R(".ui-jqgrid").css("font-size")||"11px",R("body").append("<div id='testpg2' class='ui-jqgrid "+R.jgrid.styleUI[D].base.entrieBox+"' style='font-size:"+u+";visibility:hidden;' ></div>"),u=R(p).clone().appendTo("#testpg2").width(),R("#testpg2").remove(),a.p._nvtd&&(t.dropmenu?(p=null,R(a).jqGrid("_buildNavMenu",s,c,m,f,g,v,b,j)):u>a.p._nvtd[0]?(a.p.responsive?(p=null,R(a).jqGrid("_buildNavMenu",s,c,m,f,g,v,b,j)):R(s+"_"+t.position,s).append(p).width(u),a.p._nvtd[0]=u):R(s+"_"+t.position,s).append(p),a.p._nvtd[1]=u),a.p.navGrid=!0}a.p.storeNavOptions&&(a.p.navOptions=t,a.p.editOptions=f,a.p.addOptions=g,a.p.delOptions=v,a.p.searchOptions=b,a.p.viewOptions=j,a.p.navButtons=[])}}})},navButtonAdd:function(l,s){var c=this[0].p.styleUI,e=R.jgrid.styleUI[c].navigator;return s=R.extend({caption:"newButton",title:"",buttonicon:e.icon_newbutton_nav,onClickButton:null,position:"last",cursor:"pointer",internal:!1},s||{}),this.each(function(){var t,i,e,a,d,r,o,n;this.grid&&"string"==typeof l&&(0===l.indexOf("#")&&(l=l.substring(1)),l="#"+R.jgrid.jqID(l),n=R(".navtable",l)[0],t=this,i=R.jgrid.styleUI[c].common.disabled,e=R.jgrid.styleUI[c].common.hover,a=R.jgrid.styleUI[c].common.cornerall,d=R.jgrid.styleUI[c].common.icon_base,t.p.storeNavOptions&&!s.internal&&t.p.navButtons.push([l,s]),n?s.id&&void 0!==R("#"+R.jgrid.jqID(s.id),n)[0]||(r=R("<td></td>"),"NONE"===s.buttonicon.toString().toUpperCase()?R(r).addClass("ui-pg-button "+a).append("<div class='ui-pg-div'>"+s.caption+"</div>"):R(r).addClass("ui-pg-button "+a).append("<div class='ui-pg-div'><span class='"+d+" "+s.buttonicon+"'></span>"+s.caption+"</div>"),s.id&&R(r).attr("id",s.id),"first"!==s.position||0===n.rows[0].cells.length?R("tr",n).append(r):R("tr td:eq(0)",n).before(r),R(r,n).attr("title",s.title||"").click(function(e){return R(this).hasClass(i)||(R.jgrid.setSelNavIndex(t,this),R.isFunction(s.onClickButton)&&s.onClickButton.call(t,e)),!1}).hover(function(){R(this).hasClass(i)||R(this).addClass(e)},function(){R(this).removeClass(e)})):(n=R(".dropdownmenu",l)[0])&&(o=R(n).val(),n=s.id||R.jgrid.randId(),n=R('<li class="ui-menu-item" role="presentation"><a class="'+a+' g-menu-item" tabindex="0" role="menuitem" id="'+n+'">'+(s.caption||s.title)+"</a></li>"),o&&("first"===s.position?R("#"+o).prepend(n):R("#"+o).append(n),R(n).on("click",function(e){return R(this).hasClass(i)||(R("#"+o).hide(),R.isFunction(s.onClickButton)&&s.onClickButton.call(t,e)),!1}).find("a").hover(function(){R(this).hasClass(i)||R(this).addClass(e)},function(){R(this).removeClass(e)}))))})},navSeparatorAdd:function(a,d){var e=this[0].p.styleUI,r=R.jgrid.styleUI[e].common;return d=R.extend({sepclass:"ui-separator",sepcontent:"",position:"last"},d||{}),this.each(function(){var e,t,i;this.grid&&("string"==typeof a&&0!==a.indexOf("#")&&(a="#"+R.jgrid.jqID(a)),i=R(".navtable",a)[0],this.p.storeNavOptions&&this.p.navButtons.push([a,d]),i?(e="<td class='ui-pg-button "+r.disabled+"' style='width:4px;'><span class='"+d.sepclass+"'></span>"+d.sepcontent+"</td>","first"!==d.position||0===i.rows[0].cells.length?R("tr",i).append(e):R("tr td:eq(0)",i).before(e)):(i=R(".dropdownmenu",a)[0],e="<li class='ui-menu-item "+r.disabled+"' style='width:100%' role='presentation'><hr class='ui-separator-li'></li>",i&&(t=R(i).val())&&("first"===d.position?R("#"+t).prepend(e):R("#"+t).append(e))))})},_buildNavMenu:function(c,p,u,h,m,f,g,v){return this.each(function(){var t=this,e=R.jgrid.getRegional(t,"nav"),i=t.p.styleUI,a=(R.jgrid.styleUI[i].navigator,R.jgrid.styleUI[i].filter),d=R.jgrid.styleUI[i].common,r="form_menu_"+R.jgrid.randId(),e=u.navButtonText||e.selectcaption||"Actions",e="<button class='dropdownmenu "+d.button+"' value='"+r+"'>"+e+"</button>";R(c+"_"+u.position,c).append(e);var o,n,l,s="alertmod_"+this.p.id;this.p.id,this.p.id;e=R(".ui-jqgrid").css("font-size")||"11px",l=R('<ul id="'+r+'" class="ui-nav-menu modal-content" role="menu" tabindex="0" style="display:none;font-size:'+e+'"></ul>'),u.add&&(o=(m=m||{}).id||"add_"+p,n=R('<li class="ui-menu-item" role="presentation"><a class="'+d.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+o+'">'+(u.addtext||u.addtitle)+"</a></li>").click(function(){return R(this).hasClass(d.disabled)||(R.isFunction(u.addfunc)?u.addfunc.call(t):R(t).jqGrid("editGridRow","new",m),R(l).hide()),!1}),R(l).append(n)),u.edit&&(o=(h=h||{}).id||"edit_"+p,n=R('<li class="ui-menu-item" role="presentation"><a class="'+d.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+o+'">'+(u.edittext||u.edittitle)+"</a></li>").click(function(){var e;return R(this).hasClass(d.disabled)||((e=t.p.selrow)?R.isFunction(u.editfunc)?u.editfunc.call(t,e):R(t).jqGrid("editGridRow",e,h):(R.jgrid.viewModal("#"+s,{gbox:"#gbox_"+R.jgrid.jqID(t.p.id),jqm:!0}),R("#jqg_alrt").focus()),R(l).hide()),!1}),R(l).append(n)),u.view&&(o=(v=v||{}).id||"view_"+p,n=R('<li class="ui-menu-item" role="presentation"><a class="'+d.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+o+'">'+(u.viewtext||u.viewtitle)+"</a></li>").click(function(){var e;return R(this).hasClass(d.disabled)||((e=t.p.selrow)?R.isFunction(u.editfunc)?u.viewfunc.call(t,e):R(t).jqGrid("viewGridRow",e,v):(R.jgrid.viewModal("#"+s,{gbox:"#gbox_"+R.jgrid.jqID(t.p.id),jqm:!0}),R("#jqg_alrt").focus()),R(l).hide()),!1}),R(l).append(n)),u.del&&(o=(f=f||{}).id||"del_"+p,n=R('<li class="ui-menu-item" role="presentation"><a class="'+d.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+o+'">'+(u.deltext||u.deltitle)+"</a></li>").click(function(){var e;return R(this).hasClass(d.disabled)||(t.p.multiselect?0===(e=t.p.selarrrow).length&&(e=null):e=t.p.selrow,e?R.isFunction(u.delfunc)?u.delfunc.call(t,e):R(t).jqGrid("delGridRow",e,f):(R.jgrid.viewModal("#"+s,{gbox:"#gbox_"+R.jgrid.jqID(t.p.id),jqm:!0}),R("#jqg_alrt").focus()),R(l).hide()),!1}),R(l).append(n)),(u.add||u.edit||u.del||u.view)&&R(l).append("<li class='ui-menu-item "+d.disabled+"' style='width:100%' role='presentation'><hr class='ui-separator-li'></li>"),u.search&&(o=(g=g||{}).id||"search_"+p,n=R('<li class="ui-menu-item" role="presentation"><a class="'+d.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+o+'">'+(u.searchtext||u.searchtitle)+"</a></li>").click(function(){return R(this).hasClass(d.disabled)||(R.isFunction(u.searchfunc)?u.searchfunc.call(t,g):R(t).jqGrid("searchGrid",g),R(l).hide()),!1}),R(l).append(n),g.showOnLoad&&!0===g.showOnLoad&&R(n).click()),u.refresh&&(o=g.id||"search_"+p,n=R('<li class="ui-menu-item" role="presentation"><a class="'+d.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+o+'">'+(u.refreshtext||u.refreshtitle)+"</a></li>").click(function(){if(!R(this).hasClass(d.disabled)){R.isFunction(u.beforeRefresh)&&u.beforeRefresh.call(t),t.p.search=!1,t.p.resetsearch=!0;try{if("currentfilter"!==u.refreshstate){var e=t.p.id;t.p.postData.filters="";try{R("#fbox_"+R.jgrid.jqID(e)).jqFilter("resetFilter")}catch(e){}R.isFunction(t.clearToolbar)&&t.clearToolbar.call(t,!1)}}catch(e){}switch(u.refreshstate){case"firstpage":R(t).trigger("reloadGrid",[{page:1}]);break;case"current":case"currentfilter":R(t).trigger("reloadGrid",[{current:!0}])}R.isFunction(u.afterRefresh)&&u.afterRefresh.call(t),R(l).hide()}return!1}),R(l).append(n)),R(l).hide(),R("body").append(l),R("#"+r).addClass("ui-menu "+a.menu_widget),R("#"+r+" > li > a").hover(function(){R(this).addClass(d.hover)},function(){R(this).removeClass(d.hover)}),R(".dropdownmenu",c+"_"+u.position).on("click",function(e){var t=R(this).offset(),i=t.left,a=parseInt(t.top),t=R(this).val();R("#"+t).show().css({top:a-(R("#"+t).height()+10)+"px",left:i+"px"}),e.stopPropagation()}),R("body").on("click",function(e){R(e.target).hasClass("dropdownmenu")||R("#"+r).hide()})})},GridToForm:function(a,d){return this.each(function(){var e,t=this;if(t.grid){var i=R(t).jqGrid("getRowData",a);if(i)for(e in i)i.hasOwnProperty(e)&&(R("[name="+R.jgrid.jqID(e)+"]",d).is("input:radio")||R("[name="+R.jgrid.jqID(e)+"]",d).is("input:checkbox")?R("[name="+R.jgrid.jqID(e)+"]",d).each(function(){R(this).val()==i[e]?R(this)[t.p.useProp?"prop":"attr"]("checked",!0):R(this)[t.p.useProp?"prop":"attr"]("checked",!1)}):R("[name="+R.jgrid.jqID(e)+"]",d).val(i[e]))}})},FormToGrid:function(t,a,d,r){return this.each(function(){var e,i;this.grid&&(d=d||"set",r=r||"first",e=R(a).serializeArray(),i={},R.each(e,function(e,t){i[t.name]=t.value}),"add"===d?R(this).jqGrid("addRowData",t,i,r):"set"===d&&R(this).jqGrid("setRowData",t,i))})}})});