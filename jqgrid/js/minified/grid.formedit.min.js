!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","./grid.base","./grid.common"],e):e(jQuery)}(function(A){"use strict";var B={};A.jgrid.extend({editGridRow:function(S,P){var e=A.jgrid.getRegional(this[0],"edit"),t=this[0].p.styleUI,E=A.jgrid.styleUI[t].formedit,M=A.jgrid.styleUI[t].common;return P=A.extend(!0,{top:0,left:0,width:"500",datawidth:"auto",height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,url:null,mtype:"POST",clearAfterAdd:!0,closeAfterEdit:!1,reloadAfterSubmit:!0,onInitializeForm:null,beforeInitData:null,beforeShowForm:null,afterShowForm:null,beforeSubmit:null,afterSubmit:null,onclickSubmit:null,afterComplete:null,onclickPgButtons:null,afterclickPgButtons:null,editData:{},recreateForm:!1,jqModal:!0,closeOnEscape:!1,addedrow:"first",topinfo:"",bottominfo:"",saveicon:[],closeicon:[],savekey:[!1,13],navkeys:[!1,38,40],checkOnSubmit:!1,checkOnUpdate:!1,processing:!1,onClose:null,ajaxEditOptions:{},serializeEditData:null,viewPagerButtons:!0,overlayClass:M.overlay,removemodal:!0,form:"edit",template:null,focusField:!0,editselected:!1,html5Check:!1,buttons:[]},e,P||{}),B[A(this)[0].p.id]=P,this.each(function(){var u,h,g,t,i,m,f,D,j,y,a,e,d,r,o,n,l,s,c,p,v,b,q,x=this;function w(){var e,t,i={};for(e in A(h).find(".FormElement").each(function(){if((e=A(".customelement",this)).length){var e=e[0],t=A(e).attr("name");A.each(x.p.colModel,function(){if(this.name===t&&this.editoptions&&A.jgrid.isFunction(this.editoptions.custom_value)){try{if(m[t]=this.editoptions.custom_value.call(x,A("#"+A.jgrid.jqID(t),h),"get"),void 0===m[t])throw"e1"}catch(e){"e1"===e?A.jgrid.info_dialog(j.errcap,"function 'custom_value' "+B[A(this)[0]].p.msg.novalue,B[A(this)[0]].p.bClose,{styleUI:B[A(this)[0]].p.styleUI}):A.jgrid.info_dialog(j.errcap,e.message,B[A(this)[0]].p.bClose,{styleUI:B[A(this)[0]].p.styleUI})}return!0}})}else{switch(A(this).get(0).type){case"checkbox":A(this).is(":checked")?m[this.name]=A(this).val():(e=A(this).attr("offval"),m[this.name]=e);break;case"select-one":m[this.name]=A(this).val();break;case"select-multiple":m[this.name]=A(this).val(),m[this.name]=m[this.name]?m[this.name].join(","):"";break;case"radio":if(i.hasOwnProperty(this.name))return!0;i[this.name]=void 0===A(this).attr("offval")?"off":A(this).attr("offval");break;default:m[this.name]=A(this).val()}x.p.autoencode&&(m[this.name]=A.jgrid.htmlEncode(m[this.name]))}}),i)i.hasOwnProperty(e)&&(t=A('input[name="'+e+'"]:checked',h).val(),m[e]=void 0!==t?t:i[e],x.p.autoencode&&(m[e]=A.jgrid.htmlEncode(m[e])));return 1}function _(i,a,d){var r,o,e,t,n,l=0;(B[x.p.id].checkOnSubmit||B[x.p.id].checkOnUpdate)&&(x.p.savedData={},x.p.savedData[a.p.id+"_id"]=i);var s=a.p.colModel;if("_empty"===i)return A(s).each(function(){r=this.name,n=A.extend({},this.editoptions||{}),(e=A("#"+A.jgrid.jqID(r),d))&&e.length&&null!==e[0]&&(t="","custom"===this.edittype&&A.jgrid.isFunction(n.custom_value)?n.custom_value.call(x,A("#"+r,d),"set",t):n.defaultValue?(t=A.jgrid.isFunction(n.defaultValue)?n.defaultValue.call(x):n.defaultValue,"checkbox"===e[0].type?(n=t.toLowerCase()).search(/(false|f|0|no|n|off|undefined)/i)<0&&""!==n?(e[0].checked=!0,e[0].defaultChecked=!0,e[0].value=t):(e[0].checked=!1,e[0].defaultChecked=!1):e.val(t)):"checkbox"===e[0].type?(e[0].checked=!1,e[0].defaultChecked=!1,t=A(e).attr("offval")):e[0].type&&"select"===e[0].type.substr(0,6)?e[0].selectedIndex=0:e.val(t),!0!==B[x.p.id].checkOnSubmit&&!B[x.p.id].checkOnUpdate||(x.p.savedData[r]=t))}),A("#id_g",d).val(i),0;var c=A(a).jqGrid("getInd",i,!0);c&&(A('td[role="gridcell"]',c).each(function(e){if("cb"!==(r=s[e].name)&&"subgrid"!==r&&"rn"!==r&&!0===s[e].editable){if(r===a.p.ExpandColumn&&!0===a.p.treeGrid)o=A(this).text();else try{o=A.unformat.call(a,A(this),{rowId:i,colModel:s[e]},e)}catch(t){o="textarea"===s[e].edittype?A(this).text():A(this).html()}switch(x.p.autoencode&&(o=A.jgrid.htmlDecode(o)),!0!==B[x.p.id].checkOnSubmit&&!B[x.p.id].checkOnUpdate||(x.p.savedData[r]=o),r=A.jgrid.jqID(r),s[e].edittype){case"select":var t=o.split(","),t=A.map(t,function(e){return A.jgrid.trim(e)});A("#"+r+" option",d).each(function(){!(s[e].editoptions.multiple||A.jgrid.trim(o)!==A.jgrid.trim(A(this).text())&&t[0]!==A.jgrid.trim(A(this).text())&&t[0]!==A.jgrid.trim(A(this).val()))||s[e].editoptions.multiple&&(-1<A.inArray(A.jgrid.trim(A(this).text()),t)||-1<A.inArray(A.jgrid.trim(A(this).val()),t))?this.selected=!0:this.selected=!1}),!0!==B[x.p.id].checkOnSubmit&&!B[x.p.id].checkOnUpdate||(o=A("#"+r,d).val(),s[e].editoptions.multiple&&(o=o.join(",")),x.p.savedData[r]=o);break;case"checkbox":o=String(o),s[e].editoptions&&s[e].editoptions.value?s[e].editoptions.value.split(":")[0]===o?A("#"+r,d)[x.p.useProp?"prop":"attr"]({checked:!0,defaultChecked:!0}):A("#"+r,d)[x.p.useProp?"prop":"attr"]({checked:!1,defaultChecked:!1}):(o=o.toLowerCase()).search(/(false|f|0|no|n|off|undefined)/i)<0&&""!==o?(A("#"+r,d)[x.p.useProp?"prop":"attr"]("checked",!0),A("#"+r,d)[x.p.useProp?"prop":"attr"]("defaultChecked",!0)):(A("#"+r,d)[x.p.useProp?"prop":"attr"]("checked",!1),A("#"+r,d)[x.p.useProp?"prop":"attr"]("defaultChecked",!1)),!0!==B[x.p.id].checkOnSubmit&&!B[x.p.id].checkOnUpdate||(o=A("#"+r,d).is(":checked")?A("#"+r,d).val():A("#"+r,d).attr("offval"),x.p.savedData[r]=o);break;case"custom":try{if(!s[e].editoptions||!A.jgrid.isFunction(s[e].editoptions.custom_value))throw"e1";s[e].editoptions.custom_value.call(x,A("#"+r,d),"set",o)}catch(t){"e1"===t?A.jgrid.info_dialog(j.errcap,"function 'custom_value' "+B[A(this)[0]].p.msg.nodefined,A.rp_ge[A(this)[0]].p.bClose,{styleUI:B[A(this)[0]].p.styleUI}):A.jgrid.info_dialog(j.errcap,t.message,A.rp_ge[A(this)[0]].p.bClose,{styleUI:B[A(this)[0]].p.styleUI})}break;default:("&nbsp;"===o||"&#160;"===o||1===o.length&&160===o.charCodeAt(0))&&(o=""),A("#"+r,d).val(o)}l++}}),0<l&&(A("#id_g",h).val(i),!0!==B[x.p.id].checkOnSubmit&&!B[x.p.id].checkOnUpdate||(x.p.savedData[a.p.id+"_id"]=i)))}function I(){var a,d,r,e,o,t,i,n=[!0,"",""],l={},s=x.p.prmNames,c=A(x).triggerHandler("jqGridAddEditBeforeCheckValues",[m,A(q),f]);if(c&&"object"==typeof c&&(m=c),A.jgrid.isFunction(B[x.p.id].beforeCheckValues)&&(c=B[x.p.id].beforeCheckValues.call(x,m,A(q),f))&&"object"==typeof c&&(m=c),!B[x.p.id].html5Check||A.jgrid.validateForm(y[0])){for(e in m)if(m.hasOwnProperty(e)&&!1===(n=A.jgrid.checkValues.call(x,m[e],e))[0])break;if(A.each(x.p.colModel,function(e,t){t.editoptions&&!0===t.editoptions.NullIfEmpty&&m.hasOwnProperty(t.name)&&""===m[t.name]&&(m[t.name]="null")}),n[0]&&(void 0===(l=A(x).triggerHandler("jqGridAddEditClickSubmit",[B[x.p.id],m,f]))&&A.jgrid.isFunction(B[x.p.id].onclickSubmit)&&(l=B[x.p.id].onclickSubmit.call(x,B[x.p.id],m,f)||{}),void 0===(n=A(x).triggerHandler("jqGridAddEditBeforeSubmit",[m,A(q),f]))&&(n=[!0,"",""]),n[0]&&A.jgrid.isFunction(B[x.p.id].beforeSubmit)&&(n=B[x.p.id].beforeSubmit.call(x,m,A(q),f))),n[0]&&!B[x.p.id].processing){if(B[x.p.id].processing=!0,A("#sData",h+"_2").addClass(M.active),c=B[x.p.id].url||A(x).jqGrid("getGridParam","editurl"),r=s.oper,d="clientArray"===c?x.p.keyName:s.id,m[r]="_empty"===A.jgrid.trim(m[x.p.id+"_id"])?s.addoper:s.editoper,m[r]===s.addoper&&void 0!==m[d]||(m[d]=m[x.p.id+"_id"]),delete m[x.p.id+"_id"],m=A.extend(m,B[x.p.id].editData,l),!0===x.p.treeGrid)for(t in m[r]===s.addoper&&(o=A(x).jqGrid("getGridParam","selrow"),p="adjacency"===x.p.treeGridModel?x.p.treeReader.parent_id_field:"parent_id",m[p]=o),x.p.treeReader)x.p.treeReader.hasOwnProperty(t)&&(i=x.p.treeReader[t],m.hasOwnProperty(i)&&(m[r]===s.addoper&&"parent_id_field"===t||delete m[i]));m[d]=A.jgrid.stripPref(x.p.idPrefix,m[d]);var p=A.extend({url:c,type:B[x.p.id].mtype,data:A.jgrid.isFunction(B[x.p.id].serializeEditData)?B[x.p.id].serializeEditData.call(x,m):m,complete:function(e,t){if(A("#sData",h+"_2").removeClass(M.active),m[d]=x.p.idPrefix+m[d],300<=e.status&&304!==e.status?(n[0]=!1,n[1]=A(x).triggerHandler("jqGridAddEditErrorTextFormat",[e,f]),A.jgrid.isFunction(B[x.p.id].errorTextFormat)?n[1]=B[x.p.id].errorTextFormat.call(x,e,f):n[1]=t+" Status: '"+e.statusText+"'. Error code: "+e.status):(void 0===(n=A(x).triggerHandler("jqGridAddEditAfterSubmit",[e,m,f]))&&(n=[!0,"",""]),n[0]&&A.jgrid.isFunction(B[x.p.id].afterSubmit)&&(n=B[x.p.id].afterSubmit.call(x,e,m,f))),!1===n[0])A(".FormError",q).html(n[1]),A(".FormError",q).show();else if(x.p.autoencode&&A.each(m,function(e,t){m[e]=A.jgrid.htmlDecode(t)}),m[r]===s.addoper?(n[2]||(n[2]=A.jgrid.randId()),null==m[d]||m[d]===x.p.idPrefix+"_empty"||""===m[d]?m[d]=n[2]:n[2]=m[d],B[x.p.id].reloadAfterSubmit?A(x).trigger("reloadGrid"):!0===x.p.treeGrid?A(x).jqGrid("addChildNode",n[2],o,m):A(x).jqGrid("addRowData",n[2],m,P.addedrow),B[x.p.id].closeAfterAdd?(!0!==x.p.treeGrid&&A(x).jqGrid("setSelection",n[2]),A.jgrid.hideModal("#"+A.jgrid.jqID(g.themodal),{gb:"#gbox_"+A.jgrid.jqID(u),jqm:P.jqModal,onClose:B[x.p.id].onClose,removemodal:B[x.p.id].removemodal,formprop:!B[x.p.id].recreateForm,form:B[x.p.id].form})):B[x.p.id].clearAfterAdd&&_("_empty",x,q)):(B[x.p.id].reloadAfterSubmit?(A(x).trigger("reloadGrid"),B[x.p.id].closeAfterEdit||setTimeout(function(){A(x).jqGrid("setSelection",m[d])},1e3)):!0===x.p.treeGrid?A(x).jqGrid("setTreeRow",m[d],m):A(x).jqGrid("setRowData",m[d],m),B[x.p.id].closeAfterEdit&&A.jgrid.hideModal("#"+A.jgrid.jqID(g.themodal),{gb:"#gbox_"+A.jgrid.jqID(u),jqm:P.jqModal,onClose:B[x.p.id].onClose,removemodal:B[x.p.id].removemodal,formprop:!B[x.p.id].recreateForm,form:B[x.p.id].form})),(A.jgrid.isFunction(B[x.p.id].afterComplete)||Object.prototype.hasOwnProperty.call(A._data(A(x)[0],"events"),"jqGridAddEditAfterComplete"))&&(a=e,setTimeout(function(){A(x).triggerHandler("jqGridAddEditAfterComplete",[a,m,A(q),f]);try{B[x.p.id].afterComplete.call(x,a,m,A(q),f)}catch(e){}a=null},500)),(B[x.p.id].checkOnSubmit||B[x.p.id].checkOnUpdate)&&(A(q).data("disabled",!1),"_empty"!==x.p.savedData[x.p.id+"_id"]))for(var i in x.p.savedData)x.p.savedData.hasOwnProperty(i)&&m[i]&&(x.p.savedData[i]=m[i]);B[x.p.id].processing=!1;try{A(":input:visible",q)[0].focus()}catch(e){}}},A.jgrid.ajaxOptions,B[x.p.id].ajaxEditOptions);p.url||B[x.p.id].useDataProxy||(A.jgrid.isFunction(x.p.dataProxy)?B[x.p.id].useDataProxy=!0:(n[0]=!1,n[1]+=" "+j.nourl)),n[0]&&(B[x.p.id].useDataProxy?(void 0===(c=x.p.dataProxy.call(x,p,"set_"+x.p.id))&&(c=[!0,""]),!1===c[0]?(n[0]=!1,n[1]=c[1]||"Error deleting the selected row!"):(p.data.oper===s.addoper&&B[x.p.id].closeAfterAdd&&A.jgrid.hideModal("#"+A.jgrid.jqID(g.themodal),{gb:"#gbox_"+A.jgrid.jqID(u),jqm:P.jqModal,onClose:B[x.p.id].onClose,removemodal:B[x.p.id].removemodal,formprop:!B[x.p.id].recreateForm,form:B[x.p.id].form}),p.data.oper===s.editoper&&B[x.p.id].closeAfterEdit&&A.jgrid.hideModal("#"+A.jgrid.jqID(g.themodal),{gb:"#gbox_"+A.jgrid.jqID(u),jqm:P.jqModal,onClose:B[x.p.id].onClose,removemodal:B[x.p.id].removemodal,formprop:!B[x.p.id].recreateForm,form:B[x.p.id].form}))):"clientArray"===p.url?(B[x.p.id].reloadAfterSubmit=!1,m=p.data,p.complete({status:200,statusText:""},"")):A.ajax(p))}!1===n[0]&&(A(".FormError",q).html(n[1]),A(".FormError",q).show())}}function k(e,t){var i,a=!1;if(!(a=!(A.isPlainObject(e)&&A.isPlainObject(t)&&Object.getOwnPropertyNames(e).length===Object.getOwnPropertyNames(t).length)))for(i in t)if(t.hasOwnProperty(i)){if(!e.hasOwnProperty(i)){a=!0;break}if(e[i]!==t[i]){a=!0;break}}return a}function C(){var e=!0;return A(".FormError",q).hide(),B[x.p.id].checkOnUpdate&&(m={},w(),k(m,x.p.savedData)&&(A(q).data("disabled",!0),A(".confirm","#"+g.themodal).show(),e=!1)),e}function F(e,t){var i=t[1].length-1;0===e||void 0!==t[1][e-1]&&A("#"+A.jgrid.jqID(t[1][e-1])).hasClass(M.disabled)?A("#pData",b).addClass(M.disabled):A("#pData",b).removeClass(M.disabled),e===i||void 0!==t[1][e+1]&&A("#"+A.jgrid.jqID(t[1][e+1])).hasClass(M.disabled)?A("#nData",b).addClass(M.disabled):A("#nData",b).removeClass(M.disabled)}function G(){var e=A(x).jqGrid("getDataIDs"),t=A("#id_g",h).val();if(x.p.multiselect&&B[x.p.id].editselected){for(var i=[],a=0,d=e.length;a<d;a++)-1!==A.inArray(e[a],x.p.selarrrow)&&i.push(e[a]);return[A.inArray(t,i),i]}return[A.inArray(t,e),e]}function O(){if(B[x.p.id].checkOnSubmit||B[x.p.id].checkOnUpdate){var e,t,i=[],a={},i=A.map(x.p.savedData,function(e,t){return t});for(e in A(".FormElement",y).each(function(){if(""!==A.jgrid.trim(this.name)&&-1===i.indexOf(this.name)){var e=A(this).val(),t=A(this).get(0).type;if("checkbox"===t)A(this).is(":checked")||(e=A(this).attr("offval"));else if("select-multiple"===t)e=e.join(",");else if("radio"===t){if(a.hasOwnProperty(this.name))return!0;a[this.name]=void 0===A(this).attr("offval")?"off":A(this).attr("offval")}x.p.savedData[this.name]=e}}),a)a.hasOwnProperty(e)&&(t=A('input[name="'+e+'"]:checked',y).val(),x.p.savedData[e]=void 0!==t?t:a[e])}}x.grid&&S&&(x.p.savedData={},u=x.p.id,q="FrmGrid_"+u,c="TblGrid_"+u,h="#"+A.jgrid.jqID(c),g={themodal:"editmod"+u,modalhead:"edithd"+u,modalcontent:"editcnt"+u,scrollelm:q},o=!0,t=1,i=0,D="string"==typeof B[x.p.id].template&&0<B[x.p.id].template.length,j=A.jgrid.getRegional(this,"errors"),B[x.p.id].styleUI=x.p.styleUI||"jQueryUI",A.jgrid.isMobile()&&(B[x.p.id].resize=!1),"new"===S?(S="_empty",f="add",P.caption=B[x.p.id].addCaption):(P.caption=B[x.p.id].editCaption,f="edit"),P.recreateForm||A(x).data("formProp")&&A.extend(B[A(this)[0].p.id],A(x).data("formProp")),v=!0,P.checkOnUpdate&&P.jqModal&&!P.modal&&(v=!1),r=isNaN(B[A(this)[0].p.id].dataheight)?B[A(this)[0].p.id].dataheight:B[A(this)[0].p.id].dataheight+"px",d=isNaN(B[A(this)[0].p.id].datawidth)?B[A(this)[0].p.id].datawidth:B[A(this)[0].p.id].datawidth+"px",y=A("<form name='FormPost' id='"+q+"' class='FormGrid' onSubmit='return false;' style='width:"+d+";height:"+r+";'></form>").data("disabled",!1),b=D?(s="","string"==typeof(p=B[A(this)[0].p.id].template)&&(s=p.replace(/\{([\w\-]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?\}/g,function(e,t){return'<span id="'+t+'" ></span>'})),a=s,h):(a=A("<table id='"+c+"' class='EditTable ui-common-table'><tbody></tbody></table>"),h+"_2"),q="#"+A.jgrid.jqID(q),A(y).append("<div class='FormError "+M.error+"' style='display:none;'></div>"),A(y).append("<div class='tinfo topinfo'>"+B[x.p.id].topinfo+"</div>"),A(x.p.colModel).each(function(){var e=this.formoptions;t=Math.max(t,e&&e.colpos||0),i=Math.max(i,e&&e.rowpos||0)}),A(y).append(a),void 0===(o=A(x).triggerHandler("jqGridAddEditBeforeInitData",[y,f]))&&(o=!0),o&&A.jgrid.isFunction(B[x.p.id].beforeInitData)&&(o=B[x.p.id].beforeInitData.call(x,y,f)),!1!==o&&(function(){var e;if("_empty"!==S&&void 0!==x.p.savedRow&&0<x.p.savedRow.length&&A.jgrid.isFunction(A.fn.jqGrid.restoreRow))for(e=0;e<x.p.savedRow.length;e++)if(x.p.savedRow[e].id===S){A(x).jqGrid("restoreRow",S);break}}(),function(o,n,l,s){for(var c,p,u,h,g,m,f,e,j=0,v=[],b=!1,w="",t=1;t<=s;t++)w+="<td class='CaptionTD'></td><td class='DataTD'></td>";"_empty"!==o&&(b=A(n).jqGrid("getInd",o)),A(n.p.colModel).each(function(e){if(c=this.name,p=(!this.editrules||!0!==this.editrules.edithidden)&&!0===this.hidden,g=p?"style='display:none'":"","cb"!==c&&"subgrid"!==c&&!0===this.editable&&"rn"!==c){if(!1===b)h="";else if(c===n.p.ExpandColumn&&!0===n.p.treeGrid)h=A("td[role='gridcell']",n.rows[b]).eq(e).text();else{try{h=A.unformat.call(n,A("td[role='gridcell']",n.rows[b]).eq(e),{rowId:o,colModel:this},e)}catch(t){h=this.edittype&&"textarea"===this.edittype?A("td[role='gridcell']",n.rows[b]).eq(e).text():A("td[role='gridcell']",n.rows[b]).eq(e).html()}h&&"&nbsp;"!==h&&"&#160;"!==h&&(1!==h.length||160!==h.charCodeAt(0))||(h="")}var t,i=A.extend({},this.editoptions||{},{id:c,name:c,rowId:o,oper:"edit",module:"form",checkUpdate:B[x.p.id].checkOnSubmit||B[x.p.id].checkOnUpdate}),a=A.extend({},{elmprefix:"",elmsuffix:"",rowabove:!1,rowcontent:""},this.formoptions||{}),d=parseInt(a.rowpos,10)||j+1,r=parseInt(2*(parseInt(a.colpos,10)||1),10);"_empty"===o&&i.defaultValue&&(h=A.jgrid.isFunction(i.defaultValue)?i.defaultValue.call(x):i.defaultValue),this.edittype||(this.edittype="text"),x.p.autoencode&&(h=A.jgrid.htmlDecode(h)),m=A.jgrid.createEl.call(x,this.edittype,i,h,!1,A.extend({},A.jgrid.ajaxOptions,n.p.ajaxSelectOptions||{})),"select"===this.edittype&&(h=A(m).val(),"select-multiple"===A(m).get(0).type&&h&&(h=h.join(","))),"checkbox"===this.edittype&&(h=A(m).is(":checked")?A(m).val():A(m).attr("offval")),A(m).addClass("FormElement"),-1<A.inArray(this.edittype,["text","textarea","password","select","color","date","datetime","datetime-local","email","month","number","range","search","tel","time","url","week"])&&A(m).addClass(E.inputClass),f=!0,D?(t=A(y).find("#"+c)).length?t.replaceWith(m):f=!1:(u=A(l).find("tr[rowpos="+d+"]"),a.rowabove&&(t=A("<tr><td class='contentinfo' colspan='"+2*s+"'>"+a.rowcontent+"</td></tr>"),A(l).append(t),t[0].rp=d),0===u.length&&(u=A(1<s?"<tr rowpos='"+d+"'></tr>":"<tr "+g+" rowpos='"+d+"'></tr>").addClass("FormData").attr("id","tr_"+c),A(u).append(w),A(l).append(u),u[0].rp=d),A("td",u[0]).eq(r-2).html("<label for='"+c+"'>"+(void 0===a.label?n.p.colNames[e]:a.label)+"</label>"),A("td",u[0]).eq(r-1).append(a.elmprefix).append(m).append(a.elmsuffix),1<s&&p&&(A("td",u[0]).eq(r-2).hide(),A("td",u[0]).eq(r-1).hide())),(B[x.p.id].checkOnSubmit||B[x.p.id].checkOnUpdate)&&f&&(x.p.savedData[c]=h),"custom"===this.edittype&&A.jgrid.isFunction(i.custom_value)&&i.custom_value.call(x,A("#"+c,q),"set",h),A.jgrid.bindEv.call(x,m,i),v[j]=e,j++}}),0<j&&(D?(e="<div class='FormData' style='display:none'><input class='FormElement' id='id_g' type='text' name='"+n.p.id+"_id' value='"+o+"'/>",A(y).append(e)):((e=A("<tr class='FormData' style='display:none'><td class='CaptionTD'></td><td colspan='"+(2*s-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='"+n.p.id+"_id' value='"+o+"'/></td></tr>"))[0].rp=j+999,A(l).append(e)),(B[x.p.id].checkOnSubmit||B[x.p.id].checkOnUpdate)&&(x.p.savedData[n.p.id+"_id"]=o))}(S,x,a,t),p=(e="rtl"===x.p.direction)?"pData":"nData",s="<a id='"+(e?"nData":"pData")+"' class='fm-button "+M.button+"'><span class='"+M.icon_base+" "+E.icon_prev+"'></span></a>",d="<a id='"+p+"' class='fm-button "+M.button+"'><span class='"+M.icon_base+" "+E.icon_next+"'></span></a>",r="<a id='sData' class='fm-button "+M.button+"'>"+P.bSubmit+"</a>",o="<a id='cData' class='fm-button "+M.button+"'>"+P.bCancel+"</a>",p=Array.isArray(B[x.p.id].buttons)?A.jgrid.buildButtons(B[x.p.id].buttons,r+o,M):r+o,p="<table style='height:auto' class='EditTable ui-common-table' id='"+c+"_2'><tbody><tr><td colspan='2'><hr class='"+M.content+"' style='margin:1px'/></td></tr><tr id='Act_Buttons'><td class='navButton'>"+(e?d+s:s+d)+"</td><td class='EditButton'>"+p+"</td></tr>",p+="</tbody></table>",0<i&&(n=[],A.each(A(a)[0].rows,function(e,t){n[e]=t}),n.sort(function(e,t){return e.rp>t.rp?1:e.rp<t.rp?-1:0}),A.each(n,function(e,t){A("tbody",a).append(t)})),P.gbox="#gbox_"+A.jgrid.jqID(u),!(l=!1)===P.closeOnEscape&&(P.closeOnEscape=!1,l=!0),s=D?(A(y).find("#pData").replaceWith(s),A(y).find("#nData").replaceWith(d),A(y).find("#sData").replaceWith(r),A(y).find("#cData").replaceWith(o),A("<div id="+c+"></div>").append(y)):A("<div></div>").append(y).append(p),A(y).append("<div class='binfo topinfo bottominfo'>"+B[x.p.id].bottominfo+"</div>"),c=A(".ui-jqgrid").css("font-size")||"11px",A.jgrid.createModal(g,s,B[A(this)[0].p.id],"#gview_"+A.jgrid.jqID(x.p.id),A("#gbox_"+A.jgrid.jqID(x.p.id))[0],null,{"font-size":c}),e&&(A("#pData, #nData",h+"_2").css("float","right"),A(".EditButton",h+"_2").css("text-align","left")),B[x.p.id].topinfo&&A(".tinfo",q).show(),B[x.p.id].bottominfo&&A(".binfo",q).show(),p=s=null,A("#"+A.jgrid.jqID(g.themodal)).keydown(function(e){var t=e.target;return!0!==A(q).data("disabled")&&(!0===B[x.p.id].savekey[0]&&e.which===B[x.p.id].savekey[1]&&"TEXTAREA"!==t.tagName?(A("#sData",h+"_2").trigger("click"),!1):27===e.which?(C()&&l&&A.jgrid.hideModal("#"+A.jgrid.jqID(g.themodal),{gb:P.gbox,jqm:P.jqModal,onClose:B[x.p.id].onClose,removemodal:B[x.p.id].removemodal,formprop:!B[x.p.id].recreateForm,form:B[x.p.id].form}),!1):!0===B[x.p.id].navkeys[0]?"_empty"===A("#id_g",h).val()||(e.which===B[x.p.id].navkeys[1]?(A("#pData",b).trigger("click"),!1):e.which===B[x.p.id].navkeys[2]?(A("#nData",b).trigger("click"),!1):void 0):void 0)}),P.checkOnUpdate&&(A("a.ui-jqdialog-titlebar-close span","#"+A.jgrid.jqID(g.themodal)).removeClass("jqmClose"),A("a.ui-jqdialog-titlebar-close","#"+A.jgrid.jqID(g.themodal)).off("click").click(function(){return C()&&A.jgrid.hideModal("#"+A.jgrid.jqID(g.themodal),{gb:"#gbox_"+A.jgrid.jqID(u),jqm:P.jqModal,onClose:B[x.p.id].onClose,removemodal:B[x.p.id].removemodal,formprop:!B[x.p.id].recreateForm,form:B[x.p.id].form}),!1})),P.saveicon=A.extend([!0,"left",E.icon_save],P.saveicon),P.closeicon=A.extend([!0,"left",E.icon_close],P.closeicon),!0===P.saveicon[0]&&A("#sData",b).addClass("right"===P.saveicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+M.icon_base+" "+P.saveicon[2]+"'></span>"),!0===P.closeicon[0]&&A("#cData",b).addClass("right"===P.closeicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+M.icon_base+" "+P.closeicon[2]+"'></span>"),(B[x.p.id].checkOnSubmit||B[x.p.id].checkOnUpdate)&&(r="<a id='sNew' class='fm-button "+M.button+"' style='z-index:1002'>"+P.bYes+"</a>",d="<a id='nNew' class='fm-button "+M.button+"' style='z-index:1002;margin-left:5px'>"+P.bNo+"</a>",o="<a id='cNew' class='fm-button "+M.button+"' style='z-index:1002;margin-left:5px;'>"+P.bExit+"</a>",p=P.zIndex||999,p++,A("#"+g.themodal).append("<div class='"+P.overlayClass+" jqgrid-overlay confirm' style='z-index:"+p+";display:none;position:absolute;'>&#160;</div><div class='confirm ui-jqconfirm "+M.content+"' style='z-index:"+(1+p)+"'>"+P.saveData+"<br/><br/>"+r+d+o+"</div>"),A("#sNew","#"+A.jgrid.jqID(g.themodal)).click(function(){return I(),A(q).data("disabled",!1),A(".confirm","#"+A.jgrid.jqID(g.themodal)).hide(),!1}),A("#nNew","#"+A.jgrid.jqID(g.themodal)).click(function(){return A(".confirm","#"+A.jgrid.jqID(g.themodal)).hide(),A(q).data("disabled",!1),setTimeout(function(){A(":input:visible",q)[0].focus()},0),!1}),A("#cNew","#"+A.jgrid.jqID(g.themodal)).click(function(){return A(".confirm","#"+A.jgrid.jqID(g.themodal)).hide(),A(q).data("disabled",!1),A.jgrid.hideModal("#"+A.jgrid.jqID(g.themodal),{gb:"#gbox_"+A.jgrid.jqID(u),jqm:P.jqModal,onClose:B[x.p.id].onClose,removemodal:B[x.p.id].removemodal,formprop:!B[x.p.id].recreateForm,form:B[x.p.id].form}),!1})),A(x).triggerHandler("jqGridAddEditInitializeForm",[A(q),f]),A.jgrid.isFunction(B[x.p.id].onInitializeForm)&&B[x.p.id].onInitializeForm.call(x,A(q),f),"_empty"!==S&&B[x.p.id].viewPagerButtons?A("#pData,#nData",b).show():A("#pData,#nData",b).hide(),A(x).triggerHandler("jqGridAddEditBeforeShowForm",[A(q),f]),A.jgrid.isFunction(B[x.p.id].beforeShowForm)&&B[x.p.id].beforeShowForm.call(x,A(q),f),O(),A("#"+A.jgrid.jqID(g.themodal)).data("onClose",B[x.p.id].onClose),A.jgrid.viewModal("#"+A.jgrid.jqID(g.themodal),{gbox:"#gbox_"+A.jgrid.jqID(u),jqm:P.jqModal,overlay:P.overlay,modal:P.modal,overlayClass:P.overlayClass,focusField:P.focusField,onHide:function(e){var t=A("#editmod"+u)[0].style.height,i=A("#editmod"+u)[0].style.width,a="rtl"===A("#gbox_"+A.jgrid.jqID(u)).attr("dir");-1<t.indexOf("px")&&(t=parseFloat(t)),-1<i.indexOf("px")&&(i=parseFloat(i)),A(x).data("formProp",{top:parseFloat(A(e.w).css("top")),left:a?A("#gbox_"+A.jgrid.jqID(u)).outerWidth()-i-parseFloat(A(e.w).css("left"))+12:parseFloat(A(e.w).css("left")),width:i,height:t,dataheight:A(q).height(),datawidth:A(q).width()}),e.w.remove(),e.o&&e.o.remove()}}),v||A("."+A.jgrid.jqID(P.overlayClass)).click(function(){return C()&&A.jgrid.hideModal("#"+A.jgrid.jqID(g.themodal),{gb:"#gbox_"+A.jgrid.jqID(u),jqm:P.jqModal,onClose:B[x.p.id].onClose,removemodal:B[x.p.id].removemodal,formprop:!B[x.p.id].recreateForm,form:B[x.p.id].form}),!1}),A(".fm-button","#"+A.jgrid.jqID(g.themodal)).hover(function(){A(this).addClass(M.hover)},function(){A(this).removeClass(M.hover)}),A("#sData",b).click(function(){return m={},A(".FormError",q).hide(),w(),"_empty"!==m[x.p.id+"_id"]&&!0===P.checkOnSubmit&&k(m,x.p.savedData)?(A(q).data("disabled",!0),A(".confirm","#"+A.jgrid.jqID(g.themodal)).show()):I(),!1}),A("#cData",b).click(function(){return C()&&A.jgrid.hideModal("#"+A.jgrid.jqID(g.themodal),{gb:"#gbox_"+A.jgrid.jqID(u),jqm:P.jqModal,onClose:B[x.p.id].onClose,removemodal:B[x.p.id].removemodal,formprop:!B[x.p.id].recreateForm,form:B[x.p.id].form}),!1}),A(b).find("[data-index]").each(function(){var t=parseInt(A(this).attr("data-index"),10);0<=t&&P.buttons[t].hasOwnProperty("click")&&A(this).on("click",function(e){P.buttons[t].click.call(x,A(q)[0],B[x.p.id],e)})}),A("#nData",b).click(function(){if(!C())return!1;A(".FormError",q).hide();var e,t=G();if(t[0]=parseInt(t[0],10),-1!==t[0]&&t[1][t[0]+1]){if(A(x).triggerHandler("jqGridAddEditClickPgButtons",["next",A(q),t[1][t[0]]]),A.jgrid.isFunction(P.onclickPgButtons)&&void 0!==(e=P.onclickPgButtons.call(x,"next",A(q),t[1][t[0]]))&&!1===e)return!1;if(A("#"+A.jgrid.jqID(t[1][t[0]+1])).hasClass(M.disabled))return!1;_(t[1][t[0]+1],x,q),x.p.multiselect&&B[x.p.id].editselected||A(x).jqGrid("setSelection",t[1][t[0]+1]),A(x).triggerHandler("jqGridAddEditAfterClickPgButtons",["next",A(q),t[1][t[0]]]),A.jgrid.isFunction(P.afterclickPgButtons)&&P.afterclickPgButtons.call(x,"next",A(q),t[1][t[0]+1]),O(),F(t[0]+1,t)}return!1}),A("#pData",b).click(function(){if(!C())return!1;A(".FormError",q).hide();var e,t=G();if(-1!==t[0]&&t[1][t[0]-1]){if(A(x).triggerHandler("jqGridAddEditClickPgButtons",["prev",A(q),t[1][t[0]]]),A.jgrid.isFunction(P.onclickPgButtons)&&void 0!==(e=P.onclickPgButtons.call(x,"prev",A(q),t[1][t[0]]))&&!1===e)return!1;if(A("#"+A.jgrid.jqID(t[1][t[0]-1])).hasClass(M.disabled))return!1;_(t[1][t[0]-1],x,q),x.p.multiselect&&B[x.p.id].editselected||A(x).jqGrid("setSelection",t[1][t[0]-1]),A(x).triggerHandler("jqGridAddEditAfterClickPgButtons",["prev",A(q),t[1][t[0]]]),A.jgrid.isFunction(P.afterclickPgButtons)&&P.afterclickPgButtons.call(x,"prev",A(q),t[1][t[0]-1]),O(),F(t[0]-1,t)}return!1}),A(x).triggerHandler("jqGridAddEditAfterShowForm",[A(q),f]),A.jgrid.isFunction(B[x.p.id].afterShowForm)&&B[x.p.id].afterShowForm.call(x,A(q),f),F((v=G())[0],v)))})},viewGridRow:function(b,D){var e=A.jgrid.getRegional(this[0],"view"),t=this[0].p.styleUI,w=A.jgrid.styleUI[t].formedit,y=A.jgrid.styleUI[t].common;return D=A.extend(!0,{top:0,left:0,width:500,datawidth:"auto",height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,jqModal:!0,closeOnEscape:!1,labelswidth:"auto",closeicon:[],navkeys:[!1,38,40],onClose:null,beforeShowForm:null,beforeInitData:null,viewPagerButtons:!0,recreateForm:!1,removemodal:!0,form:"view",buttons:[]},e,D||{}),B[A(this)[0].p.id]=D,this.each(function(){var a,d,n,i,t,r,o,e,l,s,c,p,u,h,g=this;function m(){!0!==B[g.p.id].closeOnEscape&&!0!==B[g.p.id].navkeys[0]||setTimeout(function(){A(".ui-jqdialog-titlebar-close","#"+A.jgrid.jqID(t.modalhead)).attr("tabindex","-1").focus()},0)}function f(e,t){var i,a,d,r=0,o=A(t).jqGrid("getInd",e,!0);o&&(A("td",o).each(function(e){i=t.p.colModel[e].name,a=(!t.p.colModel[e].editrules||!0!==t.p.colModel[e].editrules.edithidden)&&!0===t.p.colModel[e].hidden,"cb"!==i&&"subgrid"!==i&&"rn"!==i&&(d=i===t.p.ExpandColumn&&!0===t.p.treeGrid?A(this).text():A(this).html(),i=A.jgrid.jqID("v_"+i),A("#"+i+" span","#"+n).html(d),a&&A("#"+i,"#"+n).parents("tr").first().hide(),r++)}),0<r&&A("#id_g","#"+n).val(e))}function j(e,t){var i=t[1].length-1;0===e?A("#pData","#"+n+"_2").addClass(y.disabled):void 0!==t[1][e-1]&&A("#"+A.jgrid.jqID(t[1][e-1])).hasClass(y.disabled)?A("#pData",n+"_2").addClass(y.disabled):A("#pData","#"+n+"_2").removeClass(y.disabled),e===i?A("#nData","#"+n+"_2").addClass(y.disabled):void 0!==t[1][e+1]&&A("#"+A.jgrid.jqID(t[1][e+1])).hasClass(y.disabled)?A("#nData",n+"_2").addClass(y.disabled):A("#nData","#"+n+"_2").removeClass(y.disabled)}function v(){var e=A(g).jqGrid("getDataIDs"),t=A("#id_g","#"+n).val();if(g.p.multiselect&&B[g.p.id].viewselected){for(var i=[],a=0,d=e.length;a<d;a++)-1!==A.inArray(e[a],g.p.selarrrow)&&i.push(e[a]);return[A.inArray(t,i),i]}return[A.inArray(t,e),e]}g.grid&&b&&(a=g.p.id,d="ViewGrid_"+A.jgrid.jqID(a),n="ViewTbl_"+A.jgrid.jqID(a),i="ViewGrid_"+a,c="ViewTbl_"+a,t={themodal:"viewmod"+a,modalhead:"viewhd"+a,modalcontent:"viewcnt"+a,scrollelm:d},h=!0,r=1,o=0,B[g.p.id].styleUI=g.p.styleUI||"jQueryUI",D.recreateForm||A(g).data("viewProp")&&A.extend(B[A(this)[0].p.id],A(g).data("viewProp")),u=isNaN(B[A(this)[0].p.id].dataheight)?B[A(this)[0].p.id].dataheight:B[A(this)[0].p.id].dataheight+"px",s=isNaN(B[A(this)[0].p.id].datawidth)?B[A(this)[0].p.id].datawidth:B[A(this)[0].p.id].datawidth+"px",e=A("<form name='FormPost' id='"+i+"' class='FormGrid' style='width:"+s+";height:"+u+";'></form>"),l=A("<table id='"+c+"' class='EditTable ViewTable'><tbody></tbody></table>"),A(g.p.colModel).each(function(){var e=this.formoptions;r=Math.max(r,e&&e.colpos||0),o=Math.max(o,e&&e.rowpos||0)}),A(e).append(l),void 0===(h=A(g).triggerHandler("jqGridViewRowBeforeInitData",[e]))&&(h=!0),h&&A.jgrid.isFunction(B[g.p.id].beforeInitData)&&(h=B[g.p.id].beforeInitData.call(g,e)),!1!==h&&(function(e,r,o,n){for(var l,s,c,p,u,h,g,m,f=0,j=[],t="<td class='CaptionTD form-view-label "+y.content+"' width='"+D.labelswidth+"'></td><td class='DataTD form-view-data ui-helper-reset "+y.content+"'></td>",v="",i="<td class='CaptionTD form-view-label "+y.content+"'></td><td class='DataTD form-view-data "+y.content+"'></td>",a=["integer","number","currency"],d=0,b=0,w=1;w<=n;w++)v+=1===w?t:i;A(r.p.colModel).each(function(){(s=(!this.editrules||!0!==this.editrules.edithidden)&&!0===this.hidden)||"right"!==this.align||(this.formatter&&-1!==A.inArray(this.formatter,a)?d=Math.max(d,parseInt(this.width,10)):b=Math.max(b,parseInt(this.width,10)))}),h=0!==d?d:0!==b?b:0,u=A(r).jqGrid("getInd",e),A(r.p.colModel).each(function(e){var t,i,a,d;l=this.name,s=(!this.editrules||!0!==this.editrules.edithidden)&&!0===this.hidden,p=s?"style='display:none'":"",m="boolean"!=typeof this.viewable||this.viewable,"cb"!==l&&"subgrid"!==l&&"rn"!==l&&m&&(c=!1===u?"":l===r.p.ExpandColumn&&!0===r.p.treeGrid?A("td",r.rows[u]).eq(e).text():A("td",r.rows[u]).eq(e).html(),g="right"===this.align&&0!==h,t=A.extend({},{rowabove:!1,rowcontent:""},this.formoptions||{}),i=parseInt(t.rowpos,10)||f+1,a=parseInt(2*(parseInt(t.colpos,10)||1),10),t.rowabove&&(d=A("<tr><td class='contentinfo' colspan='"+2*n+"'>"+t.rowcontent+"</td></tr>"),A(o).append(d),d[0].rp=i),0===(m=A(o).find("tr[rowpos="+i+"]")).length&&(m=A("<tr "+p+" rowpos='"+i+"'></tr>").addClass("FormData").attr("id","trv_"+l),A(m).append(v),A(o).append(m),m[0].rp=i),A("td",m[0]).eq(a-2).html("<b>"+(void 0===t.label?r.p.colNames[e]:t.label)+"</b>"),A("td",m[0]).eq(a-1).append("<span>"+c+"</span>").attr("id","v_"+l),g&&A("td",m[0]).eq(a-1).find("span").css({"text-align":"right",width:h+"px"}),j[f]=e,f++)}),0<f&&((e=A("<tr class='FormData' style='display:none'><td class='CaptionTD'></td><td colspan='"+(2*n-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='id' value='"+e+"'/></td></tr>"))[0].rp=f+99,A(o).append(e))}(b,g,l,r),u=(s="rtl"===g.p.direction)?"pData":"nData",c="<a id='"+(s?"nData":"pData")+"' class='fm-button "+y.button+"'><span class='"+y.icon_base+" "+w.icon_prev+"'></span></a>",h="<a id='"+u+"' class='fm-button "+y.button+"'><span class='"+y.icon_base+" "+w.icon_next+"'></span></a>",u="<a id='cData' class='fm-button "+y.button+"'>"+D.bClose+"</a>",u=Array.isArray(B[g.p.id].buttons)?A.jgrid.buildButtons(B[g.p.id].buttons,u,y):u,0<o&&(p=[],A.each(A(l)[0].rows,function(e,t){p[e]=t}),p.sort(function(e,t){return e.rp>t.rp?1:e.rp<t.rp?-1:0}),A.each(p,function(e,t){A("tbody",l).append(t)})),D.gbox="#gbox_"+A.jgrid.jqID(a),h=A("<div></div>").append(e).append("<table border='0' class='EditTable' id='"+n+"_2'><tbody><tr id='Act_Buttons'><td class='navButton' width='"+D.labelswidth+"'>"+(s?h+c:c+h)+"</td><td class='EditButton'>"+u+"</td></tr></tbody></table>"),u=A(".ui-jqgrid").css("font-size")||"11px",A.jgrid.createModal(t,h,B[A(this)[0].p.id],"#gview_"+A.jgrid.jqID(g.p.id),A("#gview_"+A.jgrid.jqID(g.p.id))[0],null,{"font-size":u}),s&&(A("#pData, #nData","#"+n+"_2").css("float","right"),A(".EditButton","#"+n+"_2").css("text-align","left")),D.viewPagerButtons||A("#pData, #nData","#"+n+"_2").hide(),h=null,A("#"+t.themodal).keydown(function(e){return 27===e.which?(B[g.p.id].closeOnEscape&&A.jgrid.hideModal("#"+A.jgrid.jqID(t.themodal),{gb:D.gbox,jqm:D.jqModal,onClose:D.onClose,removemodal:B[g.p.id].removemodal,formprop:!B[g.p.id].recreateForm,form:B[g.p.id].form}),!1):!0===D.navkeys[0]?e.which===D.navkeys[1]?(A("#pData","#"+n+"_2").trigger("click"),!1):e.which===D.navkeys[2]?(A("#nData","#"+n+"_2").trigger("click"),!1):void 0:void 0}),D.closeicon=A.extend([!0,"left",w.icon_close],D.closeicon),!0===D.closeicon[0]&&A("#cData","#"+n+"_2").addClass("right"===D.closeicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+y.icon_base+" "+D.closeicon[2]+"'></span>"),A(g).triggerHandler("jqGridViewRowBeforeShowForm",[A("#"+d)]),A.jgrid.isFunction(D.beforeShowForm)&&D.beforeShowForm.call(g,A("#"+d)),A.jgrid.viewModal("#"+A.jgrid.jqID(t.themodal),{gbox:"#gbox_"+A.jgrid.jqID(a),jqm:D.jqModal,overlay:D.overlay,modal:D.modal,onHide:function(e){var t="rtl"===A("#gbox_"+A.jgrid.jqID(a)).attr("dir"),i=parseFloat(A("#viewmod"+a)[0].style.width);A(g).data("viewProp",{top:parseFloat(A(e.w).css("top")),left:t?A("#gbox_"+A.jgrid.jqID(a)).outerWidth()-i-parseFloat(A(e.w).css("left"))+12:parseFloat(A(e.w).css("left")),width:A(e.w).width(),height:A(e.w).height(),dataheight:A("#"+d).height(),datawidth:A("#"+d).width()}),e.w.remove(),e.o&&e.o.remove()}}),A(".fm-button:not(."+y.disabled+")","#"+n+"_2").hover(function(){A(this).addClass(y.hover)},function(){A(this).removeClass(y.hover)}),m(),A("#cData","#"+n+"_2").click(function(){return A.jgrid.hideModal("#"+A.jgrid.jqID(t.themodal),{gb:"#gbox_"+A.jgrid.jqID(a),jqm:D.jqModal,onClose:D.onClose,removemodal:B[g.p.id].removemodal,formprop:!B[g.p.id].recreateForm,form:B[g.p.id].form}),!1}),A("#"+n+"_2").find("[data-index]").each(function(){var t=parseInt(A(this).attr("data-index"),10);0<=t&&D.buttons[t].hasOwnProperty("click")&&A(this).on("click",function(e){D.buttons[t].click.call(g,A("#"+i)[0],B[g.p.id],e)})}),A("#nData","#"+n+"_2").click(function(){A("#FormError","#"+n).hide();var e=v();return e[0]=parseInt(e[0],10),-1!==e[0]&&e[1][e[0]+1]&&(A(g).triggerHandler("jqGridViewRowClickPgButtons",["next",A("#"+d),e[1][e[0]]]),A.jgrid.isFunction(D.onclickPgButtons)&&D.onclickPgButtons.call(g,"next",A("#"+d),e[1][e[0]]),f(e[1][e[0]+1],g),g.p.multiselect&&B[g.p.id].viewselected||A(g).jqGrid("setSelection",e[1][e[0]+1]),A(g).triggerHandler("jqGridViewRowAfterClickPgButtons",["next",A("#"+d),e[1][e[0]+1]]),A.jgrid.isFunction(D.afterclickPgButtons)&&D.afterclickPgButtons.call(g,"next",A("#"+d),e[1][e[0]+1]),j(e[0]+1,e)),m(),!1}),A("#pData","#"+n+"_2").click(function(){A("#FormError","#"+n).hide();var e=v();return-1!==e[0]&&e[1][e[0]-1]&&(A(g).triggerHandler("jqGridViewRowClickPgButtons",["prev",A("#"+d),e[1][e[0]]]),A.jgrid.isFunction(D.onclickPgButtons)&&D.onclickPgButtons.call(g,"prev",A("#"+d),e[1][e[0]]),f(e[1][e[0]-1],g),g.p.multiselect&&B[g.p.id].viewselected||A(g).jqGrid("setSelection",e[1][e[0]-1]),A(g).triggerHandler("jqGridViewRowAfterClickPgButtons",["prev",A("#"+d),e[1][e[0]-1]]),A.jgrid.isFunction(D.afterclickPgButtons)&&D.afterclickPgButtons.call(g,"prev",A("#"+d),e[1][e[0]-1]),j(e[0]-1,e)),m(),!1}),j((h=v())[0],h)))})},delGridRow:function(h,g){var e=A.jgrid.getRegional(this[0],"del"),t=this[0].p.styleUI,m=A.jgrid.styleUI[t].formedit,f=A.jgrid.styleUI[t].common;return g=A.extend(!0,{top:0,left:0,width:240,height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,url:"",mtype:"POST",reloadAfterSubmit:!0,beforeShowForm:null,beforeInitData:null,afterShowForm:null,beforeSubmit:null,onclickSubmit:null,afterSubmit:null,jqModal:!0,closeOnEscape:!1,delData:{},delicon:[],cancelicon:[],onClose:null,ajaxDelOptions:{},processing:!1,serializeDelData:null,useDataProxy:!1},e,g||{}),B[A(this)[0].p.id]=g,this.each(function(){var o=this;if(o.grid&&h){var n,a,l,s=o.p.id,c={},e=!0,p="DelTbl_"+A.jgrid.jqID(s),i="DelTbl_"+s,u={themodal:"delmod"+s,modalhead:"delhd"+s,modalcontent:"delcnt"+s,scrollelm:p};if(B[o.p.id].styleUI=o.p.styleUI||"jQueryUI",Array.isArray(h)&&(h=h.join()),void 0!==A("#"+A.jgrid.jqID(u.themodal))[0]){if(void 0===(e=A(o).triggerHandler("jqGridDelRowBeforeInitData",[A("#"+p)]))&&(e=!0),e&&A.jgrid.isFunction(B[o.p.id].beforeInitData)&&(e=B[o.p.id].beforeInitData.call(o,A("#"+p))),!1===e)return;A("#DelData>td","#"+p).text(h),A("#DelError","#"+p).hide(),!0===B[o.p.id].processing&&(B[o.p.id].processing=!1,A("#dData","#"+p).removeClass(f.active)),A(o).triggerHandler("jqGridDelRowBeforeShowForm",[A("#"+p)]),A.jgrid.isFunction(B[o.p.id].beforeShowForm)&&B[o.p.id].beforeShowForm.call(o,A("#"+p)),A.jgrid.viewModal("#"+A.jgrid.jqID(u.themodal),{gbox:"#gbox_"+A.jgrid.jqID(s),jqm:B[o.p.id].jqModal,overlay:B[o.p.id].overlay,modal:B[o.p.id].modal}),A(o).triggerHandler("jqGridDelRowAfterShowForm",[A("#"+p)]),A.jgrid.isFunction(B[o.p.id].afterShowForm)&&B[o.p.id].afterShowForm.call(o,A("#"+p))}else{var t=isNaN(B[o.p.id].dataheight)?B[o.p.id].dataheight:B[o.p.id].dataheight+"px",d=isNaN(g.datawidth)?g.datawidth:g.datawidth+"px",r="<div id='"+i+"' class='formdata' style='width:"+d+";overflow:auto;position:relative;height:"+t+";'>";if(r+="<table class='DelTable'><tbody>",r+="<tr id='DelError' style='display:none'><td class='"+f.error+"'></td></tr>",r+="<tr id='DelData' style='display:none'><td >"+h+"</td></tr>",r+='<tr><td class="delmsg" style="white-space:pre;">'+B[o.p.id].msg+"</td></tr><tr><td >&#160;</td></tr>",r+="</tbody></table></div>",d="<a id='dData' class='fm-button "+f.button+"'>"+g.bSubmit+"</a>",t="<a id='eData' class='fm-button "+f.button+"'>"+g.bCancel+"</a>",d=Array.isArray(B[o.p.id].buttons)?A.jgrid.buildButtons(B[o.p.id].buttons,d+t,f):d+t,t=A(".ui-jqgrid").css("font-size")||"11px",r+="<table class='EditTable ui-common-table' id='"+p+"_2'><tbody><tr><td><hr class='"+f.content+"' style='margin:1px'/></td></tr><tr><td class='DelButton EditButton'>"+d+"</td></tr></tbody></table>",g.gbox="#gbox_"+A.jgrid.jqID(s),A.jgrid.createModal(u,r,B[o.p.id],"#gview_"+A.jgrid.jqID(o.p.id),A("#gview_"+A.jgrid.jqID(o.p.id))[0],null,{"font-size":t}),A(".fm-button","#"+p+"_2").hover(function(){A(this).addClass(f.hover)},function(){A(this).removeClass(f.hover)}),g.delicon=A.extend([!0,"left",m.icon_del],B[o.p.id].delicon),g.cancelicon=A.extend([!0,"left",m.icon_cancel],B[o.p.id].cancelicon),!0===g.delicon[0]&&A("#dData","#"+p+"_2").addClass("right"===g.delicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+f.icon_base+" "+g.delicon[2]+"'></span>"),!0===g.cancelicon[0]&&A("#eData","#"+p+"_2").addClass("right"===g.cancelicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+f.icon_base+" "+g.cancelicon[2]+"'></span>"),A("#dData","#"+p+"_2").click(function(){var e,d=[!0,""],r=A("#DelData>td","#"+p).text();if(c={},void 0===(c=A(o).triggerHandler("jqGridDelRowClickSubmit",[B[o.p.id],r]))&&A.jgrid.isFunction(B[o.p.id].onclickSubmit)&&(c=B[o.p.id].onclickSubmit.call(o,B[o.p.id],r)||{}),void 0===(d=A(o).triggerHandler("jqGridDelRowBeforeSubmit",[r]))&&(d=[!0,"",""]),d[0]&&A.jgrid.isFunction(B[o.p.id].beforeSubmit)&&(d=B[o.p.id].beforeSubmit.call(o,r)),d[0]&&!B[o.p.id].processing){if(B[o.p.id].processing=!0,a=o.p.prmNames,n=A.extend({},B[o.p.id].delData,c),l=a.oper,n[l]=a.deloper,a=a.id,!(r=String(r).split(",")).length)return!1;for(e in r)r.hasOwnProperty(e)&&(r[e]=A.jgrid.stripPref(o.p.idPrefix,r[e]));n[a]=r.join(),A(this).addClass(f.active);var t,i=A.extend({url:B[o.p.id].url||A(o).jqGrid("getGridParam","editurl"),type:B[o.p.id].mtype,data:A.jgrid.isFunction(B[o.p.id].serializeDelData)?B[o.p.id].serializeDelData.call(o,n):n,complete:function(e,t){var i,a;if(A("#dData","#"+p+"_2").removeClass(f.active),300<=e.status&&304!==e.status?(d[0]=!1,d[1]=A(o).triggerHandler("jqGridDelRowErrorTextFormat",[e]),A.jgrid.isFunction(B[o.p.id].errorTextFormat)&&(d[1]=B[o.p.id].errorTextFormat.call(o,e)),void 0===d[1]&&(d[1]=t+" Status: '"+e.statusText+"'. Error code: "+e.status)):(void 0===(d=A(o).triggerHandler("jqGridDelRowAfterSubmit",[e,n]))&&(d=[!0,"",""]),d[0]&&A.jgrid.isFunction(B[o.p.id].afterSubmit)&&(d=B[o.p.id].afterSubmit.call(o,e,n))),!1===d[0])A("#DelError>td","#"+p).html(d[1]),A("#DelError","#"+p).show();else{if(B[o.p.id].reloadAfterSubmit&&"local"!==o.p.datatype)A(o).trigger("reloadGrid");else{if(!0===o.p.treeGrid)try{A(o).jqGrid("delTreeNode",o.p.idPrefix+r[0])}catch(e){}else for(i=0;i<r.length;i++)A(o).jqGrid("delRowData",o.p.idPrefix+r[i]);o.p.selrow=null,o.p.selarrrow=[]}(A.jgrid.isFunction(B[o.p.id].afterComplete)||Object.prototype.hasOwnProperty.call(A._data(A(o)[0],"events"),"jqGridDelRowAfterComplete"))&&(a=e,setTimeout(function(){A(o).triggerHandler("jqGridDelRowAfterComplete",[a,n]);try{B[o.p.id].afterComplete.call(o,a,n)}catch(e){}},500))}B[o.p.id].processing=!1,d[0]&&A.jgrid.hideModal("#"+A.jgrid.jqID(u.themodal),{gb:"#gbox_"+A.jgrid.jqID(s),jqm:g.jqModal,onClose:B[o.p.id].onClose})}},A.jgrid.ajaxOptions,B[o.p.id].ajaxDelOptions);i.url||B[o.p.id].useDataProxy||(A.jgrid.isFunction(o.p.dataProxy)?B[o.p.id].useDataProxy=!0:(d[0]=!1,d[1]+=" "+A.jgrid.getRegional(o,"errors.nourl"))),d[0]&&(B[o.p.id].useDataProxy?(void 0===(t=o.p.dataProxy.call(o,i,"del_"+o.p.id))&&(t=[!0,""]),!1===t[0]?(d[0]=!1,d[1]=t[1]||"Error deleting the selected row!"):A.jgrid.hideModal("#"+A.jgrid.jqID(u.themodal),{gb:"#gbox_"+A.jgrid.jqID(s),jqm:g.jqModal,onClose:B[o.p.id].onClose})):"clientArray"===i.url?(n=i.data,i.complete({status:200,statusText:""},"")):A.ajax(i))}return!1===d[0]&&(A("#DelError>td","#"+p).html(d[1]),A("#DelError","#"+p).show()),!1}),A("#eData","#"+p+"_2").click(function(){return A.jgrid.hideModal("#"+A.jgrid.jqID(u.themodal),{gb:"#gbox_"+A.jgrid.jqID(s),jqm:B[o.p.id].jqModal,onClose:B[o.p.id].onClose}),!1}),A("#"+p+"_2").find("[data-index]").each(function(){var t=parseInt(A(this).attr("data-index"),10);0<=t&&g.buttons[t].hasOwnProperty("click")&&A(this).on("click",function(e){g.buttons[t].click.call(o,A("#"+i)[0],B[o.p.id],e)})}),void 0===(e=A(o).triggerHandler("jqGridDelRowBeforeInitData",[A("#"+p)]))&&(e=!0),e&&A.jgrid.isFunction(B[o.p.id].beforeInitData)&&(e=B[o.p.id].beforeInitData.call(o,A("#"+p))),!1===e)return;A(o).triggerHandler("jqGridDelRowBeforeShowForm",[A("#"+p)]),A.jgrid.isFunction(B[o.p.id].beforeShowForm)&&B[o.p.id].beforeShowForm.call(o,A("#"+p)),A.jgrid.viewModal("#"+A.jgrid.jqID(u.themodal),{gbox:"#gbox_"+A.jgrid.jqID(s),jqm:B[o.p.id].jqModal,overlay:B[o.p.id].overlay,modal:B[o.p.id].modal}),A(o).triggerHandler("jqGridDelRowAfterShowForm",[A("#"+p)]),A.jgrid.isFunction(B[o.p.id].afterShowForm)&&B[o.p.id].afterShowForm.call(o,A("#"+p))}!0===B[o.p.id].closeOnEscape&&setTimeout(function(){A(".ui-jqdialog-titlebar-close","#"+A.jgrid.jqID(u.modalhead)).attr("tabindex","-1").focus()},0)}})},navGrid:function(h,g,m,f,j,v,b){var w=A.jgrid.getRegional(this[0],"nav"),D=this[0].p.styleUI,e=A.jgrid.styleUI[D].navigator,y=A.jgrid.styleUI[D].common;return g=A.extend({edit:!0,editicon:e.icon_edit_nav,add:!0,addicon:e.icon_add_nav,del:!0,delicon:e.icon_del_nav,search:!0,searchicon:e.icon_search_nav,refresh:!0,refreshicon:e.icon_refresh_nav,refreshstate:"firstpage",view:!1,viewicon:e.icon_view_nav,position:"left",closeOnEscape:!0,beforeRefresh:null,afterRefresh:null,cloneToTop:!1,alertwidth:200,alertheight:"auto",alerttop:null,alertleft:null,alertzIndex:null,dropmenu:!1,navButtonText:""},w,g||{}),this.each(function(){if(!this.p.navGrid){var t,e,i={themodal:"alertmod_"+this.p.id,modalhead:"alerthd_"+this.p.id,modalcontent:"alertcnt_"+this.p.id},a=this;if(a.grid&&"string"==typeof h){A(a).data("navGrid")||A(a).data("navGrid",g),t=A(a).data("navGrid"),a.p.force_regional&&(t=A.extend(t,w)),void 0===A("#"+i.themodal)[0]&&(t.alerttop||t.alertleft||((e=A.jgrid.findPos(this))[0]=Math.round(e[0]),e[1]=Math.round(e[1]),t.alertleft=e[0]+this.p.width/2-parseInt(t.alertwidth,10)/2,t.alerttop=e[1]+this.p.height/2-25),e=A(".ui-jqgrid").css("font-size")||"11px",A.jgrid.createModal(i,"<div>"+t.alerttext+"</div><span tabindex='0'><span tabindex='-1' id='jqg_alrt'></span></span>",{gbox:"#gbox_"+A.jgrid.jqID(a.p.id),jqModal:!0,drag:!0,resize:!0,caption:t.alertcap,top:t.alerttop,left:t.alertleft,width:t.alertwidth,height:t.alertheight,closeOnEscape:t.closeOnEscape,zIndex:t.alertzIndex,styleUI:a.p.styleUI},"#gview_"+A.jgrid.jqID(a.p.id),A("#gbox_"+A.jgrid.jqID(a.p.id))[0],!0,{"font-size":e}));var d,r=1,o=function(){A(this).hasClass(y.disabled)||A(this).addClass(y.hover)},n=function(){A(this).removeClass(y.hover)};for(t.cloneToTop&&a.p.toppager&&(r=2),d=0;d<r;d++){var l,s,c,p=A("<table class='ui-pg-table navtable ui-common-table'><tbody><tr></tr></tbody></table>"),u="<td class='ui-pg-button "+y.disabled+"' style='width:4px;'><span class='ui-separator'></span></td>";0===d?(0===(s=h).indexOf("#")&&(s=s.substring(1),s="#"+A.jgrid.jqID(s)),c=a.p.id,s===a.p.toppager&&(c+="_top",r=1)):(s=a.p.toppager,c=a.p.id+"_top"),"rtl"===a.p.direction&&A(p).attr("dir","rtl").css("float","right"),f=f||{},t.add&&(l=A("<td class='ui-pg-button "+y.cornerall+"'></td>"),A(l).append("<div class='ui-pg-div'><span class='"+y.icon_base+" "+t.addicon+"'></span>"+t.addtext+"</div>"),A("tr",p).append(l),A(l,p).attr({title:t.addtitle||"",id:f.id||"add_"+c}).click(function(){return A(this).hasClass(y.disabled)||(A.jgrid.setSelNavIndex(a,this),A.jgrid.isFunction(t.addfunc)?t.addfunc.call(a):A(a).jqGrid("editGridRow","new",f)),!1}).hover(o,n),l=null),m=m||{},t.edit&&(l=A("<td class='ui-pg-button "+y.cornerall+"'></td>"),A(l).append("<div class='ui-pg-div'><span class='"+y.icon_base+" "+t.editicon+"'></span>"+t.edittext+"</div>"),A("tr",p).append(l),A(l,p).attr({title:t.edittitle||"",id:m.id||"edit_"+c}).click(function(){var e;return A(this).hasClass(y.disabled)||((e=a.p.selrow)?(A.jgrid.setSelNavIndex(a,this),A.jgrid.isFunction(t.editfunc)?t.editfunc.call(a,e):A(a).jqGrid("editGridRow",e,m)):(A.jgrid.viewModal("#"+i.themodal,{gbox:"#gbox_"+A.jgrid.jqID(a.p.id),jqm:!0}),A("#jqg_alrt").focus())),!1}).hover(o,n),l=null),b=b||{},t.view&&(l=A("<td class='ui-pg-button "+y.cornerall+"'></td>"),A(l).append("<div class='ui-pg-div'><span class='"+y.icon_base+" "+t.viewicon+"'></span>"+t.viewtext+"</div>"),A("tr",p).append(l),A(l,p).attr({title:t.viewtitle||"",id:b.id||"view_"+c}).click(function(){var e;return A(this).hasClass(y.disabled)||((e=a.p.selrow)?(A.jgrid.setSelNavIndex(a,this),A.jgrid.isFunction(t.viewfunc)?t.viewfunc.call(a,e):A(a).jqGrid("viewGridRow",e,b)):(A.jgrid.viewModal("#"+i.themodal,{gbox:"#gbox_"+A.jgrid.jqID(a.p.id),jqm:!0}),A("#jqg_alrt").focus())),!1}).hover(o,n),l=null),j=j||{},t.del&&(l=A("<td class='ui-pg-button "+y.cornerall+"'></td>"),A(l).append("<div class='ui-pg-div'><span class='"+y.icon_base+" "+t.delicon+"'></span>"+t.deltext+"</div>"),A("tr",p).append(l),A(l,p).attr({title:t.deltitle||"",id:j.id||"del_"+c}).click(function(){var e;return A(this).hasClass(y.disabled)||(a.p.multiselect?0===(e=a.p.selarrrow).length&&(e=null):e=a.p.selrow,e?(A.jgrid.setSelNavIndex(a,this),A.jgrid.isFunction(t.delfunc)?t.delfunc.call(a,e):A(a).jqGrid("delGridRow",e,j)):(A.jgrid.viewModal("#"+i.themodal,{gbox:"#gbox_"+A.jgrid.jqID(a.p.id),jqm:!0}),A("#jqg_alrt").focus())),!1}).hover(o,n),l=null),(t.add||t.edit||t.del||t.view)&&A("tr",p).append(u),v=v||{},t.search&&(l=A("<td class='ui-pg-button "+y.cornerall+"'></td>"),A(l).append("<div class='ui-pg-div'><span class='"+y.icon_base+" "+t.searchicon+"'></span>"+t.searchtext+"</div>"),A("tr",p).append(l),A(l,p).attr({title:t.searchtitle||"",id:v.id||"search_"+c}).click(function(){return A(this).hasClass(y.disabled)||(A.jgrid.setSelNavIndex(a,this),A.jgrid.isFunction(t.searchfunc)?t.searchfunc.call(a,v):A(a).jqGrid("searchGrid",v)),!1}).hover(o,n),v.showOnLoad&&!0===v.showOnLoad&&A(l,p).click(),l=null),t.refresh&&(l=A("<td class='ui-pg-button "+y.cornerall+"'></td>"),A(l).append("<div class='ui-pg-div'><span class='"+y.icon_base+" "+t.refreshicon+"'></span>"+t.refreshtext+"</div>"),A("tr",p).append(l),A(l,p).attr({title:t.refreshtitle||"",id:"refresh_"+c}).click(function(){if(!A(this).hasClass(y.disabled)){A.jgrid.isFunction(t.beforeRefresh)&&t.beforeRefresh.call(a),a.p.search=!1,a.p.resetsearch=!0;try{if("currentfilter"!==t.refreshstate){var e=a.p.id;a.p.postData.filters="";try{A("#fbox_"+A.jgrid.jqID(e)).jqFilter("resetFilter")}catch(e){}A.jgrid.isFunction(a.clearToolbar)&&a.clearToolbar.call(a,!1)}}catch(e){}switch(t.refreshstate){case"firstpage":A(a).trigger("reloadGrid",[{page:1}]);break;case"current":case"currentfilter":A(a).trigger("reloadGrid",[{current:!0}])}A.jgrid.isFunction(t.afterRefresh)&&t.afterRefresh.call(a),A.jgrid.setSelNavIndex(a,this)}return!1}).hover(o,n),l=null),u=A(".ui-jqgrid").css("font-size")||"11px",A("body").append("<div id='testpg2' class='ui-jqgrid "+A.jgrid.styleUI[D].base.entrieBox+"' style='font-size:"+u+";visibility:hidden;' ></div>"),u=A(p).clone().appendTo("#testpg2").width(),A("#testpg2").remove(),a.p._nvtd&&(t.dropmenu?(p=null,A(a).jqGrid("_buildNavMenu",s,c,g,m,f,j,v,b)):u>a.p._nvtd[0]?(a.p.responsive?(p=null,A(a).jqGrid("_buildNavMenu",s,c,g,m,f,j,v,b)):A(s+"_"+t.position,s).append(p).width(u),a.p._nvtd[0]=u):A(s+"_"+t.position,s).append(p),a.p._nvtd[1]=u),a.p.navGrid=!0}a.p.storeNavOptions&&(a.p.navOptions=t,a.p.editOptions=m,a.p.addOptions=f,a.p.delOptions=j,a.p.searchOptions=v,a.p.viewOptions=b,a.p.navButtons=[])}}})},navButtonAdd:function(l,s){var c=this[0].p.styleUI,e=A.jgrid.styleUI[c].navigator;return s=A.extend({caption:"newButton",title:"",buttonicon:e.icon_newbutton_nav,onClickButton:null,position:"last",cursor:"pointer",internal:!1},s||{}),this.each(function(){var t,i,e,a,d,r,o,n;this.grid&&"string"==typeof l&&(0===l.indexOf("#")&&(l=l.substring(1)),l="#"+A.jgrid.jqID(l),n=A(".navtable",l)[0],t=this,i=A.jgrid.styleUI[c].common.disabled,e=A.jgrid.styleUI[c].common.hover,a=A.jgrid.styleUI[c].common.cornerall,d=A.jgrid.styleUI[c].common.icon_base,t.p.storeNavOptions&&!s.internal&&t.p.navButtons.push([l,s]),n?s.id&&void 0!==A("#"+A.jgrid.jqID(s.id),n)[0]||(r=A("<td></td>"),"NONE"===s.buttonicon.toString().toUpperCase()?A(r).addClass("ui-pg-button "+a).append("<div class='ui-pg-div'>"+s.caption+"</div>"):A(r).addClass("ui-pg-button "+a).append("<div class='ui-pg-div'><span class='"+d+" "+s.buttonicon+"'></span>"+s.caption+"</div>"),s.id&&A(r).attr("id",s.id),"first"!==s.position||0===n.rows[0].cells.length?A("tr",n).append(r):A("tr td",n).eq(0).before(r),A(r,n).attr("title",s.title||"").click(function(e){return A(this).hasClass(i)||(A.jgrid.setSelNavIndex(t,this),A.jgrid.isFunction(s.onClickButton)&&s.onClickButton.call(t,e)),!1}).hover(function(){A(this).hasClass(i)||A(this).addClass(e)},function(){A(this).removeClass(e)})):(n=A(".dropdownmenu",l)[0])&&(o=A(n).val(),n=s.id||A.jgrid.randId(),n=A('<li class="ui-menu-item" role="presentation"><a class="'+a+' g-menu-item" tabindex="0" role="menuitem" id="'+n+'">'+(s.caption||s.title)+"</a></li>"),o&&("first"===s.position?A("#"+o).prepend(n):A("#"+o).append(n),A(n).on("click",function(e){return A(this).hasClass(i)||(A("#"+o).hide(),A.jgrid.isFunction(s.onClickButton)&&s.onClickButton.call(t,e)),!1}).find("a").hover(function(){A(this).hasClass(i)||A(this).addClass(e)},function(){A(this).removeClass(e)}))))})},navSeparatorAdd:function(a,d){var e=this[0].p.styleUI,r=A.jgrid.styleUI[e].common;return d=A.extend({sepclass:"ui-separator",sepcontent:"",position:"last"},d||{}),this.each(function(){var e,t,i;this.grid&&("string"==typeof a&&0!==a.indexOf("#")&&(a="#"+A.jgrid.jqID(a)),e=A(".navtable",a)[0],this.p.storeNavOptions&&this.p.navButtons.push([a,d]),e?(t="<td class='ui-pg-button "+r.disabled+"' style='width:4px;'><span class='"+d.sepclass+"'></span>"+d.sepcontent+"</td>","first"!==d.position||0===e.rows[0].cells.length?A("tr",e).append(t):A("tr td",e).eq(0).before(t)):(e=A(".dropdownmenu",a)[0],t="<li class='ui-menu-item "+r.disabled+"' style='width:100%' role='presentation'><hr class='ui-separator-li'></li>",e&&(i=A(e).val())&&("first"===d.position?A("#"+i).prepend(t):A("#"+i).append(t))))})},_buildNavMenu:function(c,p,u,h,g,m,f,j){return this.each(function(){var t=this,e=A.jgrid.getRegional(t,"nav"),i=t.p.styleUI,a=(A.jgrid.styleUI[i].navigator,A.jgrid.styleUI[i].filter),d=A.jgrid.styleUI[i].common,r="form_menu_"+A.jgrid.randId(),e=u.navButtonText||e.selectcaption||"Actions",e="<button class='dropdownmenu "+d.button+"' value='"+r+"'>"+e+"</button>";A(c+"_"+u.position,c).append(e);var o,n,l,s="alertmod_"+this.p.id;this.p.id,this.p.id,e=A(".ui-jqgrid").css("font-size")||"11px",l=A('<ul id="'+r+'" class="ui-nav-menu modal-content" role="menu" tabindex="0" style="display:none;font-size:'+e+'"></ul>'),u.add&&(o=(g=g||{}).id||"add_"+p,n=A('<li class="ui-menu-item" role="presentation"><a class="'+d.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+o+'">'+(u.addtext||u.addtitle)+"</a></li>").click(function(){return A(this).hasClass(d.disabled)||(A.jgrid.isFunction(u.addfunc)?u.addfunc.call(t):A(t).jqGrid("editGridRow","new",g),A(l).hide()),!1}),A(l).append(n)),u.edit&&(o=(h=h||{}).id||"edit_"+p,n=A('<li class="ui-menu-item" role="presentation"><a class="'+d.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+o+'">'+(u.edittext||u.edittitle)+"</a></li>").click(function(){var e;return A(this).hasClass(d.disabled)||((e=t.p.selrow)?A.jgrid.isFunction(u.editfunc)?u.editfunc.call(t,e):A(t).jqGrid("editGridRow",e,h):(A.jgrid.viewModal("#"+s,{gbox:"#gbox_"+A.jgrid.jqID(t.p.id),jqm:!0}),A("#jqg_alrt").focus()),A(l).hide()),!1}),A(l).append(n)),u.view&&(o=(j=j||{}).id||"view_"+p,n=A('<li class="ui-menu-item" role="presentation"><a class="'+d.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+o+'">'+(u.viewtext||u.viewtitle)+"</a></li>").click(function(){var e;return A(this).hasClass(d.disabled)||((e=t.p.selrow)?A.jgrid.isFunction(u.editfunc)?u.viewfunc.call(t,e):A(t).jqGrid("viewGridRow",e,j):(A.jgrid.viewModal("#"+s,{gbox:"#gbox_"+A.jgrid.jqID(t.p.id),jqm:!0}),A("#jqg_alrt").focus()),A(l).hide()),!1}),A(l).append(n)),u.del&&(o=(m=m||{}).id||"del_"+p,n=A('<li class="ui-menu-item" role="presentation"><a class="'+d.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+o+'">'+(u.deltext||u.deltitle)+"</a></li>").click(function(){var e;return A(this).hasClass(d.disabled)||(t.p.multiselect?0===(e=t.p.selarrrow).length&&(e=null):e=t.p.selrow,e?A.jgrid.isFunction(u.delfunc)?u.delfunc.call(t,e):A(t).jqGrid("delGridRow",e,m):(A.jgrid.viewModal("#"+s,{gbox:"#gbox_"+A.jgrid.jqID(t.p.id),jqm:!0}),A("#jqg_alrt").focus()),A(l).hide()),!1}),A(l).append(n)),(u.add||u.edit||u.del||u.view)&&A(l).append("<li class='ui-menu-item "+d.disabled+"' style='width:100%' role='presentation'><hr class='ui-separator-li'></li>"),u.search&&(o=(f=f||{}).id||"search_"+p,n=A('<li class="ui-menu-item" role="presentation"><a class="'+d.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+o+'">'+(u.searchtext||u.searchtitle)+"</a></li>").click(function(){return A(this).hasClass(d.disabled)||(A.jgrid.isFunction(u.searchfunc)?u.searchfunc.call(t,f):A(t).jqGrid("searchGrid",f),A(l).hide()),!1}),A(l).append(n),f.showOnLoad&&!0===f.showOnLoad&&A(n).click()),u.refresh&&(o=f.id||"search_"+p,n=A('<li class="ui-menu-item" role="presentation"><a class="'+d.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+o+'">'+(u.refreshtext||u.refreshtitle)+"</a></li>").click(function(){if(!A(this).hasClass(d.disabled)){A.jgrid.isFunction(u.beforeRefresh)&&u.beforeRefresh.call(t),t.p.search=!1,t.p.resetsearch=!0;try{if("currentfilter"!==u.refreshstate){var e=t.p.id;t.p.postData.filters="";try{A("#fbox_"+A.jgrid.jqID(e)).jqFilter("resetFilter")}catch(e){}A.jgrid.isFunction(t.clearToolbar)&&t.clearToolbar.call(t,!1)}}catch(e){}switch(u.refreshstate){case"firstpage":A(t).trigger("reloadGrid",[{page:1}]);break;case"current":case"currentfilter":A(t).trigger("reloadGrid",[{current:!0}])}A.jgrid.isFunction(u.afterRefresh)&&u.afterRefresh.call(t),A(l).hide()}return!1}),A(l).append(n)),A(l).hide(),A("body").append(l),A("#"+r).addClass("ui-menu "+a.menu_widget),A("#"+r+" > li > a").hover(function(){A(this).addClass(d.hover)},function(){A(this).removeClass(d.hover)}),A(".dropdownmenu",c+"_"+u.position).on("click",function(e){var t=(a=A(this).offset()).left,i=parseInt(a.top),a=A(this).val();A("#"+a).show().css({top:i-(A("#"+a).height()+10)+"px",left:t+"px"}),e.stopPropagation()}),A("body").on("click",function(e){A(e.target).hasClass("dropdownmenu")||A("#"+r).hide()})})},GridToForm:function(a,d){return this.each(function(){var e,t=this;if(t.grid){var i=A(t).jqGrid("getRowData",a);if(i)for(e in i)i.hasOwnProperty(e)&&(A("[name="+A.jgrid.jqID(e)+"]",d).is("input:radio")||A("[name="+A.jgrid.jqID(e)+"]",d).is("input:checkbox")?A("[name="+A.jgrid.jqID(e)+"]",d).each(function(){A(this).val()==i[e]?A(this)[t.p.useProp?"prop":"attr"]("checked",!0):A(this)[t.p.useProp?"prop":"attr"]("checked",!1)}):A("[name="+A.jgrid.jqID(e)+"]",d).val(i[e]))}})},FormToGrid:function(t,a,d,r){return this.each(function(){var e,i;this.grid&&(d=d||"set",r=r||"first",e=A(a).serializeArray(),i={},A.each(e,function(e,t){i[t.name]=t.value}),"add"===d?A(this).jqGrid("addRowData",t,i,r):"set"===d&&A(this).jqGrid("setRowData",t,i))})}})});