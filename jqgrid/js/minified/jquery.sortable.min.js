!function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(s){"use strict";var d,o=s();s.fn.html5sortable=function(a){var t=String(a);return a=s.extend({connectWith:!1},a),this.each(function(){var e,n,i;if(/^enable|disable|destroy$/.test(t))return e=s(this).children(s(this).data("items")).attr("draggable","enable"===t),void("destroy"===t&&e.add(this).removeData("connectWith items").off("dragstart.h5s dragend.h5s selectstart.h5s dragover.h5s dragenter.h5s drop.h5s"));e=s(this).children(a.items);var r=s("<"+(/^ul|ol$/i.test(this.tagName)?"li":/^tbody$/i.test(this.tagName)?"tr":"div")+' class="sortable-placeholder '+a.placeholderClass+'">').html("&nbsp;");e.find(a.handle).mousedown(function(){n=!0}).mouseup(function(){n=!1}),s(this).data("items",a.items),o=o.add(r),a.connectWith&&s(a.connectWith).add(this).data("connectWith",a.connectWith),e.attr("draggable","true").on("dragstart.h5s",function(t){if(a.handle&&!n)return!1;n=!1;t=t.originalEvent.dataTransfer;t.effectAllowed="move",t.setData("Text","dummy"),i=(d=s(this)).addClass("sortable-dragging").index()}).on("dragend.h5s",function(){d&&(d.removeClass("sortable-dragging").show(),o.detach(),i!==d.index()&&d.parent().trigger("sortupdate",{item:d,startindex:i,endindex:d.index()}),d=null)}).not("a[href], img").on("selectstart.h5s",function(){return this.dragDrop&&this.dragDrop(),!1}).end().add([this,r]).on("dragover.h5s dragenter.h5s drop.h5s",function(t){return!e.is(d)&&a.connectWith!==s(d).parent().data("connectWith")||("drop"===t.type?(t.stopPropagation(),o.filter(":visible").after(d),d.trigger("dragend.h5s")):(t.preventDefault(),t.originalEvent.dataTransfer.dropEffect="move",e.is(this)?(a.forcePlaceholderSize&&r.height(d.outerHeight()),d.hide(),s(this)[r.index()<s(this).index()?"after":"before"](r),o.not(r).detach()):o.is(this)||s(this).children(a.items).length||(o.detach(),s(this).append(r))),!1)})})}});