/*! Qoopido.js library 3.7.4, 2015-08-14 | https://github.com/dlueth/qoopido.js | (c) 2015 Dirk Lueth */
!function(e,t){t.qoopido.register("dom/element/lazyimage",e,["./emerge","../../function/merge"])}(function(e,t,r,n){"use strict";function o(){var e=this,t=e._settings.attribute;u+=1,e.emit(c).one(g,function(t){e.emit(t.type===l?m:s),u-=1},!1).setAttribute("src",e.getAttribute(t)).removeAttribute(t)}var i,a={interval:50,threshold:"auto",attribute:"data-lazyimage"},u=0,c="requested",m="loaded",s="failed",d="emerged",l="load",f="error",g="".concat(l," ",f);return i=e["dom/element/emerge"].extend({_constructor:function(t,r){var n=i._parent._constructor.call(this,t,e["function/merge"]({},a,r||{}));return n.on(d,function c(e){(0===u||1===e.data)&&(n.remove(),n.off(d,c),o.call(n))}),n}})},this);