/*! Qoopido.js library 3.7.4, 2015-08-14 | https://github.com/dlueth/qoopido.js | (c) 2015 Dirk Lueth */
!function(e,t){t.qoopido.register("widget/image/adapt",e,["../../dom/element","../../dom/element/emerge","../../component/sense"])}(function(e,t,i,n){"use strict";function a(e){var t=this;return t._container.setStyle("paddingBottom",100*e+"%"),t}function o(e,t){var i=this;e.mql=p.create(t).on("matched dematched",function(){r.call(i)})}function r(){for(var e,t,o,r,l,c,d=this,s=0;(e=d._candidates[s])!==n;s++)if(!e.mql||e.mql.matches&&e.mql.matches()===!0){a.call(d,e.ratio),d._visible===!0&&(t=d._image||(d._image=u.create("<img />",{src:"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",alt:d._caption},{position:"absolute",display:"block",width:"100%",height:"100%",top:"0",left:"0",margin:"0",padding:"0"}).appendTo(d._container)),o=t.element.getBoundingClientRect(),r=Math.round(o.width),l=Math.round(o.width*e.ratio),c=e.url.replace(m,"$1."+r+"x"+l+"@"+(i.devicePixelRatio||1)+".$2"),t.setAttribute("src",c));break}}function l(){for(var e,t=0;(e=g[t])!==n;t++)r.call(e)}function c(){i.clearTimeout(s),s=i.setTimeout(l,200)}var d,s,m=new RegExp("(.+?).(jpg|jpeg|png|gif|webp)$"),u=e["dom/element"],p=e["component/sense"],g=[];return d=e["dom/element/emerge"].extend({_visible:!1,_candidates:null,_container:null,_image:null,_caption:null,_constructor:function(e,t){var i,l,c,s,m=d._parent._constructor.call(this,e,t),p=0;for(i=parseFloat(m.getAttribute("data-ratio")||1),l=m.find('[itemprop="source"],[itemprop="contentUrl"]'),m._candidates=[],m._container=u.create("<div />").setStyles({position:"relative",display:"block",width:"100%",height:0,padding:0}).appendTo(m),m._caption=(s=m.find('[itemprop="caption"]')[0])?s.getAttribute("content"):null,a.call(m,i);(c=l[p])!==n;p++){var A=parseFloat(c.getAttribute("data-ratio")||i),h=c.getAttribute("data-media")||null;m._candidates.push({ratio:A,url:c.getAttribute("content"),mql:h}),h&&o.call(m,m._candidates[m._candidates.length-1],h)}return m.on("emerged demerged",function(e){m._visible="emerged"===e.type?!0:!1,r.call(m)}),g.push(m),m}}),u.create(i).on("resize orientationchange",c),d},this);