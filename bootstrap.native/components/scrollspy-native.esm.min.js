var supportPassive=function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});document.addEventListener("DOMContentLoaded",function e(){document.removeEventListener("DOMContentLoaded",e,t)},t)}catch(e){}return e}(),passiveHandler=!!supportPassive&&{passive:!0};function queryElement(e,t){var s=t&&t instanceof Element?t:document;return e instanceof Element?e:s.querySelector(e)}function bootstrapCustomEvent(e,t,s){var n=new CustomEvent(e+".bs."+t,{cancelable:!0});return void 0!==s&&Object.keys(s).forEach(function(e){Object.defineProperty(n,e,{value:s[e]})}),n}function dispatchCustomEvent(e){this&&this.dispatchEvent(e)}function getScroll(){return{y:window.pageYOffset||document.documentElement.scrollTop,x:window.pageXOffset||document.documentElement.scrollLeft}}function ScrollSpy(e,t){t=t||{};var s,n,o,r,i,a=this,l={};function c(){var t;t=r.getElementsByTagName("A"),s.length!==t.length&&(s.items=[],s.targets=[],Array.from(t).map(function(e){var t=e.getAttribute("href"),n=t&&"#"===t.charAt(0)&&"#"!==t.slice(-1)&&queryElement(t);n&&(s.items.push(e),s.targets.push(n))}),s.length=t.length),s.scrollOffset=s.isWindow?getScroll().y:e.scrollTop,s.items.map(function(t,n){return function(t){var n=s.items[t],o=s.targets[t],r=n.classList.contains("dropdown-item")&&n.closest(".dropdown-menu"),i=r&&r.previousElementSibling,a=n.nextElementSibling,c=a&&a.getElementsByClassName("active").length,f=s.isWindow&&o.getBoundingClientRect(),d=n.classList.contains("active")||!1,u=(s.isWindow?f.top+s.scrollOffset:o.offsetTop)-l.offset,m=s.isWindow?f.bottom+s.scrollOffset-l.offset:s.targets[t+1]?s.targets[t+1].offsetTop-l.offset:e.scrollHeight,p=c||s.scrollOffset>=u&&m>s.scrollOffset;if(!d&&p)n.classList.add("active"),i&&!i.classList.contains("active")&&i.classList.add("active"),dispatchCustomEvent.call(e,bootstrapCustomEvent("activate","scrollspy",{relatedTarget:s.items[t]}));else if(d&&!p)n.classList.remove("active"),i&&i.classList.contains("active")&&!n.parentNode.getElementsByClassName("active").length&&i.classList.remove("active");else if(d&&p||!p&&!d)return}(n)})}function f(e){i[e=e?"addEventListener":"removeEventListener"]("scroll",a.refresh,passiveHandler),window[e]("resize",a.refresh,passiveHandler)}a.refresh=function(){c()},a.dispose=function(){f(),delete e.ScrollSpy},(e=queryElement(e)).ScrollSpy&&e.ScrollSpy.dispose(),n=e.getAttribute("data-target"),o=e.getAttribute("data-offset"),r=queryElement(t.target||n),i=e.offsetHeight<e.scrollHeight?e:window,r&&(l.target=r,l.offset=parseInt(t.offset||o)||10,(s={}).length=0,s.items=[],s.targets=[],s.isWindow=i===window,e.ScrollSpy||f(1),a.refresh(),e.ScrollSpy=a)}export default ScrollSpy;