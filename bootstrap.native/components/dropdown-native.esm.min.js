function queryElement(e,t){var n=t&&t instanceof Element?t:document;return e instanceof Element?e:n.querySelector(e)}function bootstrapCustomEvent(e,t,n){var o=new CustomEvent(e+".bs."+t,{cancelable:!0});return void 0!==n&&Object.keys(n).forEach(function(e){Object.defineProperty(o,e,{value:n[e]})}),o}function dispatchCustomEvent(e){this&&this.dispatchEvent(e)}function setFocus(e){e.focus?e.focus():e.setActive()}function Dropdown(e,t){var n,o,s,a,r,i,d,c=this,u=null,l=[];function p(e){(e.href&&"#"===e.href.slice(-1)||e.parentNode&&e.parentNode.href&&"#"===e.parentNode.href.slice(-1))&&this.preventDefault()}function h(){var t=e.open?"addEventListener":"removeEventListener";document[t]("click",f,!1),document[t]("keydown",m,!1),document[t]("keyup",w,!1),document[t]("focus",f,!1)}function f(t){var n=t.target,o=n&&(n.getAttribute("data-toggle")||n.parentNode&&n.parentNode.getAttribute&&n.parentNode.getAttribute("data-toggle"));("focus"!==t.type||n!==e&&n!==i&&!i.contains(n))&&(n!==i&&!i.contains(n)||!d&&!o)&&(u=n===e||e.contains(n)?e:null,c.hide(),p.call(t,n))}function v(t){u=e,c.show(),p.call(t,t.target)}function m(e){var t=e.which||e.keyCode;38!==t&&40!==t||e.preventDefault()}function w(t){var n=t.which||t.keyCode,o=document.activeElement,s=o===e,a=i.contains(o),r=o.parentNode===i||o.parentNode.parentNode===i,d=l.indexOf(o);r&&(d=s?0:38===n?d>1?d-1:0:40===n&&d<l.length-1?d+1:d,l[d]&&setFocus(l[d])),(l.length&&r||!l.length&&(a||s)||!a)&&e.open&&27===n&&(c.toggle(),u=null)}c.show=function(){n=bootstrapCustomEvent("show","dropdown",{relatedTarget:u}),dispatchCustomEvent.call(r,n),n.defaultPrevented||(i.classList.add("show"),r.classList.add("show"),e.setAttribute("aria-expanded",!0),e.open=!0,e.removeEventListener("click",v,!1),setTimeout(function(){setFocus(i.getElementsByTagName("INPUT")[0]||e),h(),o=bootstrapCustomEvent("shown","dropdown",{relatedTarget:u}),dispatchCustomEvent.call(r,o)},1))},c.hide=function(){s=bootstrapCustomEvent("hide","dropdown",{relatedTarget:u}),dispatchCustomEvent.call(r,s),s.defaultPrevented||(i.classList.remove("show"),r.classList.remove("show"),e.setAttribute("aria-expanded",!1),e.open=!1,h(),setFocus(e),setTimeout(function(){e.Dropdown&&e.addEventListener("click",v,!1)},1),a=bootstrapCustomEvent("hidden","dropdown",{relatedTarget:u}),dispatchCustomEvent.call(r,a))},c.toggle=function(){r.classList.contains("show")&&e.open?c.hide():c.show()},c.dispose=function(){r.classList.contains("show")&&e.open&&c.hide(),e.removeEventListener("click",v,!1),delete e.Dropdown},(e=queryElement(e)).Dropdown&&e.Dropdown.dispose(),r=e.parentNode,i=queryElement(".dropdown-menu",r),Array.from(i.children).map(function(e){e.children.length&&"A"===e.children[0].tagName&&l.push(e.children[0]),"A"===e.tagName&&l.push(e)}),e.Dropdown||(!("tabindex"in i)&&i.setAttribute("tabindex","0"),e.addEventListener("click",v,!1)),d=!0===t||"true"===e.getAttribute("data-persist")||!1,e.open=!1,e.Dropdown=c}export default Dropdown;