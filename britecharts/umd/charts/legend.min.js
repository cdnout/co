!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("d3-selection"),require("d3-format"),require("d3-scale"),require("d3-transition")):"function"==typeof define&&define.amd?define(["d3-selection","d3-format","d3-scale","d3-transition"],t):"object"==typeof exports?exports.legend=t(require("d3-selection"),require("d3-format"),require("d3-scale"),require("d3-transition")):(e.britecharts=e.britecharts||{},e.britecharts.legend=t(e["d3-selection"],e["d3-format"],e["d3-scale"],e["d3-transition"]))}(window,(function(e,t,n,r){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=54)}({12:function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},e.exports.__esModule=!0,e.exports.default=e.exports},15:function(e,t,n){var r=n(12);e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},2:function(t,n){t.exports=e},22:function(e,t){e.exports=r},25:function(e,t,n){var r=n(12);e.exports=function(e){if(Array.isArray(e))return r(e)},e.exports.__esModule=!0,e.exports.default=e.exports},26:function(e,t){e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},27:function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},3:function(e,n){e.exports=t},38:function(e,t,n){"use strict";n.d(t,"c",(function(){return d})),n.d(t,"d",(function(){return p})),n.d(t,"b",(function(){return g})),n.d(t,"a",(function(){return y}));var r=n(2);function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){i=!0,a=e},f:function(){try{c||null==n.return||n.return()}finally{if(i)throw a}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var a=1.2,c=10,i=.9,u=.6,s="value",f="label",d=function(e,t,n,o){var l,d=Object(r.select)(o),p=d.text().split(/\s+/).reverse(),g=[],y=0,h=a*i,b=d.attr("y"),m=parseFloat(d.attr("dy")),x=t*u,v=d.text(null).append("tspan").attr("x",e).attr("y",b-5).attr("dy",m+"em").classed(s,!0).style("font-size",t+"px");for(v.text(p.pop()),v=d.append("tspan").classed(f,!0).attr("x",e).attr("y",b+c).attr("dy",++y*h+m+"em").style("font-size",x+"px");l=p.pop();)g.push(l),v.text(g.join(" ")),v.node()&&v.node().getComputedTextLength()>n-50&&(g.pop(),v.text(g.join(" ")),g=[l],v=d.append("tspan").classed(f,!0).attr("x",e).attr("y",b+c).attr("dy",++y*h+m+"em").text(l).style("font-size",x+"px"))},p=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2;e.each((function(){var l,a,c,i,u,s,f;for(l=(e=Object(r.select)(this)).text().split(/\s+/).reverse(),c=[],i=0,1.2,u=e.attr("y"),s=parseFloat(e.attr("dy")),f=e.text(null).append("tspan").attr("x",n).attr("y",u).attr("dy",s+"em");a=l.pop();)if(c.push(a),f.text(c.join(" ")),f.node()&&f.node().getComputedTextLength()>t){if(c.pop(),f.text(c.join(" ")),!(i<o-1)){c.push("..."),f.text(c.join(" "));break}c=[a],f=e.append("tspan").attr("x",n).attr("y",u).attr("dy",1.2*++i+s+"em").text(a),e.classed("adjust-upwards",!0)}}))},g=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Arial",r=document.createElement("canvas"),o=r.getContext("2d");return o.font=t+"px "+n,o.measureText(e).width},y=function(e,t,n){var r,l=[],a=1,c=o(e.split(/\s+/).reverse());try{for(c.s();!(r=c.n()).done;){var i=r.value;l.push(i),g(l.join(" "),t,"Karla, sans-serif")>n&&(l.pop(),l=[i],++a)}}catch(e){c.e(e)}finally{c.f()}return a}},54:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return e}));var r=n(8),o=n.n(r),l=n(9),a=n.n(l),c=n(3),i=n(6),u=n(2),s=(n(22),n(38)),f=n(7);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function e(){var e,t,n,r,o,l,d={top:5,right:5,bottom:5,left:5},g=320,y=180,h=16,b=1.5,m="s",x="",v=!1,j=null,O=!0,w=null,C=f.default.colorSchemas.britecharts,A=function(e){return e.id},S=function(e){return e.name},P=function(e){var t=e.quantity;return Object(c.format)(m)(t)+x},_=function(t){var n=t.name;return null!==w&&w[n]?w[n]:e(n)},B=function(e){var t=e.quantity;return"number"==typeof t||"string"==typeof t};function k(c){c.each((function(c){var f,p,b,m,x,w,k,F,D,z;n=g-d.left-d.right,r=y-d.top-d.bottom,o=function(e){return O=e.filter(B).length===e.length,e.reduce((function(e,t){return void 0!==t.quantity&&null!==t.quantity&&(t.quantity=+t.quantity),t.name=String(t.name),t.id=+t.id,[].concat(a()(e),[t])}),[])}(c),e=Object(i.scaleOrdinal)().range(C),function(e){l||(l=Object(u.select)(e).append("svg").classed("britechart britechart-legend",!0)).append("g").classed("legend-container-group",!0).attr("transform","translate(".concat(d.left,",").concat(d.top,")")).append("g").classed("legend-group",!0);l.attr("viewBox",[0,0,g,y]).attr("style","max-width: 100%; height: auto; height: intrinsic;").attr("width",g).attr("height",y)}(this),v?(z=h,l.select(".legend-group").selectAll("g").remove(),l.select(".legend-group").append("g").classed("legend-line",!0),(t=l.select(".legend-line").selectAll("g.legend-entry").data(o)).enter().append("g").classed("legend-entry",!0).attr("data-item",A).attr("transform",(function(e){var t=e.name,n=z,o=r/2,l=s.b(t,12);return z+=h+2*M()+l,"translate(".concat(n,",").concat(o,")")})).merge(t).append("circle").classed("legend-circle",!0).attr("cx",h/2).attr("cy",-5).attr("r",h/2).style("fill",_).style("stroke-width",1),l.select(".legend-group").selectAll("g.legend-entry").append("text").classed("legend-entry-name",!0).text(S).attr("x",M()).style("font-size","".concat(12,"px")).style("letter-spacing","".concat(.5,"px")),l.select(".legend-group").selectAll("g.legend-entry").exit().transition().style("opacity",0).remove(),D=l.select(".legend-line").node().getBoundingClientRect().width+h,n-D<=0&&(f=l.selectAll(".legend-entry"),p=f.size(),b=r/2*1.7,m=l.select(".legend-group").append("g").classed("legend-line",!0).attr("transform","translate(0, ".concat(b,")")),(x=f.filter(":nth-child(".concat(p,")"))).attr("transform","translate(".concat(h,",0)")),m.append((function(){return x.node()}))),w=l.select("g.legend-container-group").node().getBoundingClientRect().width+M(),F=(k=g-w)/2,k>0&&l.select("g.legend-container-group").attr("transform","translate(".concat(F,",0)"))):function(){l.select(".legend-group").selectAll("g").remove(),(t=l.select(".legend-group").selectAll("g.legend-line").data(o)).enter().append("g").classed("legend-line",!0).append("g").classed("legend-entry",!0).attr("data-item",A).attr("transform",(function(e,t){var n=h+M(),l=(t+1)*(r/(o.length+1));return"translate(".concat(n,",").concat(l,")")})).merge(t).append("circle").classed("legend-circle",!0).attr("cx",h/2).attr("cy",-5).attr("r",h/2).style("fill",_).style("stroke-width",1),l.select(".legend-group").selectAll("g.legend-line").selectAll("g.legend-entry").append("text").classed("legend-entry-name",!0).text(S).attr("x",M()).style("font-size","".concat(12,"px")).style("letter-spacing","".concat(.5,"px")),O?l.select(".legend-group").selectAll("g.legend-line").selectAll("g.legend-entry").append("text").classed("legend-entry-value",!0).text(P).attr("x",n-40).style("font-size","".concat(12,"px")).style("letter-spacing","".concat(.8,"px")).style("text-anchor","end").style("startOffset","100%"):function(){var e=l.select("g.legend-container-group").node().getBoundingClientRect().width,t=g-e,n=t/2-e/2;t>0&&l.select("g.legend-container-group").attr("transform","translate(".concat(n,",0)"))}();l.select(".legend-group").selectAll("g.legend-line").exit().transition().style("opacity",0).remove()}(),j&&(G(),q(j))}))}function G(){l.select(".legend-group").selectAll("g.legend-entry").classed("is-faded",!1)}function q(e){var t=l.select('[data-item="'.concat(e,'"]'));t.nodes().length&&(l.select(".legend-group").selectAll("g.legend-entry").classed("is-faded",!0),t.classed("is-faded",!1))}function M(){return b*h}return k.clearHighlight=function(){G()},k.colorMap=function(e){return arguments.length?(w=e,this):w},k.colorSchema=function(e){return arguments.length?(C=e,this):C},k.height=function(e){return arguments.length?(y=e,this):y},k.highlight=function(e){G(),q(e)},k.highlightEntryById=function(e){return arguments.length?(j=e,this):j},k.isHorizontal=function(e){return arguments.length?(v=e,this):v},k.margin=function(e){return arguments.length?(d=p(p({},d),e),this):d},k.marginRatio=function(e){return arguments.length?(b=e,this):b},k.markerSize=function(e){return arguments.length?(h=e,this):h},k.numberFormat=function(e){return arguments.length?(m=e,this):m},k.unit=function(e){return arguments.length?(x=e,this):x},k.width=function(e){return arguments.length?(g=e,this):g},k}},6:function(e,t){e.exports=n},7:function(e,t,n){"use strict";n.r(t),n.d(t,"colorGradients",(function(){return r})),n.d(t,"colorGradientsHuman",(function(){return o})),n.d(t,"britecharts",(function(){return l})),n.d(t,"grey",(function(){return a})),n.d(t,"orange",(function(){return c})),n.d(t,"blueGreen",(function(){return i})),n.d(t,"teal",(function(){return u})),n.d(t,"green",(function(){return s})),n.d(t,"yellow",(function(){return f})),n.d(t,"pink",(function(){return d})),n.d(t,"purple",(function(){return p})),n.d(t,"red",(function(){return g})),n.d(t,"colorSchemas",(function(){return y})),n.d(t,"colorSchemasHuman",(function(){return h})),n.d(t,"aloeGreen",(function(){return b})),n.d(t,"greenColor",(function(){return m})),n.d(t,"blueColor",(function(){return x})),n.d(t,"yellowColor",(function(){return v})),n.d(t,"orangeColor",(function(){return j}));var r={greenBlue:["#39C7EA","#4CDCBA"],orangePink:["#FBC670","#F766B8"],bluePurple:["#3DC3C9","#824a9e"]},o={greenBlue:"Green to Blue",orangePink:"Orange to Pink",bluePurple:"Blue to Purple"},l=["#6aedc7","#39c2c9","#ffce00","#ffa71a","#f866b9","#998ce3"],a=["#F8F8FA","#EFF2F5","#D2D6DF","#C3C6CF","#ADB0B6","#666A73","#45494E","#363A43","#282C35"],c=["#fcc870","#ffa71a","#fb8825","#f6682f","#db5a2c","#bf4c28","#a43b1c","#892a10","#f9e9c5"],i=["#ccf7f6","#70e4e0","#00d8d2","#00acaf","#007f8c","#005e66","#003c3f","#002d2f","#0d2223"],u=["#ccfffe","#94f7f4","#00fff8","#1de1e1","#39c2c9","#2e9a9d","#227270","#1a5957","#133f3e"],s=["#edfff7","#d7ffef","#c0ffe7","#95f5d7","#6aedc7","#59c3a3","#479980","#34816a","#206953"],f=["#f9f2b3","#fbe986","#fce05a","#fed72d","#ffce00","#fcc11c","#f9b438","#eda629","#e09819"],d=["#fdd1ea","#fb9cd2","#f866b9","#fc40b6","#ff1ab3","#e3239d","#c62c86","#a62073","#85135f"],p=["#ddd6fc","#bbb1f0","#998ce3","#8e6bc1","#824a9e","#77337f","#6b1c60","#591650","#470f3f"],g=["#ffd8d4","#ffb5b0","#ff938c","#ff766c","#ff584c","#f04b42","#e03d38","#be2e29","#9c1e19"],y={britecharts:l,grey:a,orange:c,blueGreen:i,teal:u,green:s,yellow:f,pink:d,purple:p,red:g},h={britecharts:"Britecharts Default",grey:"Britecharts Grey",orange:"Orange",blueGreen:"Blue",teal:"Light Blue",green:"Green",yellow:"Yellow",pink:"Pink",purple:"Purple",red:"Red"},b=["#7bdcc0"],m=["#6aedc7"],x=["#39c2c9"],v=["#ffce00"],j=["#ffa71a"],O={aloeGreen:b,greenColor:m,blueColor:x,yellowColor:v,orangeColor:j,pinkColor:["#f866b9"],purpleColor:["#998ce3"]};t.default={colorSchemas:y,colorSchemasHuman:h,colorGradients:r,colorGradientsHuman:o,singleColors:O,singleColorsHuman:{aloeGreen:"Aloe Green",greenColor:"Green",blueColor:"Blue",yellowColor:"Yellow",orangeColor:"Orange",pinkColor:"Pink",purpleColor:"Purple"}}},8:function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},9:function(e,t,n){var r=n(25),o=n(26),l=n(15),a=n(27);e.exports=function(e){return r(e)||o(e)||l(e)||a()},e.exports.__esModule=!0,e.exports.default=e.exports}}).default}));
//# sourceMappingURL=legend.min.js.map