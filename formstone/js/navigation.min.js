!function(a){"function"==typeof define&&define.amd?define(["jquery","./core","./mediaquery","./swap"],a):a(jQuery,Formstone)}(function(d,a){"use strict";function t(a){a.$handle.fsSwap("deactivate")}function o(a){a.data.$handle.addClass(f.focus)}function s(a){a.data.$handle.removeClass(f.focus)}function i(a){var e=a.data;13!==a.keyCode&&32!==a.keyCode||(g.killEvent(a),e.$handle.trigger(m.raw.click))}function r(a){var e;a.originalEvent||((e=a.data).open||(e.$el.trigger(m.open).attr("aria-hidden",!1),e.$content.addClass(e.contentClassesOpen).one(m.click,function(){t(e)}),e.$handle.attr("aria-expanded",!0),e.label&&e.$handle.html(e.labels.open),e.isToggle||$.addClass(f.lock),e.open=!0,e.$nav.focus()))}function c(a){a.originalEvent||(a=a.data).open&&(a.$el.trigger(m.close).attr("aria-hidden",!0),a.$content.removeClass(a.contentClassesOpen).off(m.namespace),a.$handle.attr("aria-expanded",!1),a.label&&a.$handle.html(a.labels.closed),e(a),a.open=!1,a.$el.focus())}function h(a){var e=a.data;e.$el.attr("aria-hidden",!0),e.$handle.attr("aria-controls",e.ariaId).attr("aria-expanded",!1),e.$content.addClass(f.enabled),setTimeout(function(){e.$animate.addClass(f.animated)},0),e.label&&e.$handle.html(e.labels.closed)}function u(a){a=a.data;a.$el.removeAttr("aria-hidden"),a.$handle.removeAttr("aria-controls").removeAttr("aria-expanded"),a.$content.removeClass(f.enabled,f.animated),a.$animate.removeClass(f.animated),n(a),e(a)}function e(a){a.isToggle||$.removeClass(f.lock)}function n(a){if(a.label)if(1<a.$handle.length)for(var e=0,t=a.$handle.length;e<t;e++)a.$handle.eq(e).html(a.originalLabel[e]);else a.$handle.html(a.originalLabel)}var l=a.Plugin("navigation",{widget:!0,defaults:{customClass:"",gravity:"left",label:!0,labels:{closed:"Menu",open:"Close"},maxWidth:"980px",theme:"fs-light",type:"toggle"},classes:["handle","nav","content","animated","enabled","focus","open","toggle","push","reveal","overlay","left","right","lock"],events:{open:"open",close:"close"},methods:{_construct:function(a){a.handleGuid=f.handle+a.guid,a.isToggle="toggle"===a.type,a.open=!1,a.isToggle&&(a.gravity="");var e=f.base,t=[e,a.type].join("-"),n=a.gravity?[t,a.gravity].join("-"):"",l=[a.rawGuid,a.theme,a.customClass].join(" ");a.handle=this.data(p+"-handle"),a.content=this.data(p+"-content"),a.handleClasses=[f.handle,f.handle.replace(e,t),n?f.handle.replace(e,n):"",a.handleGuid,l].join(" "),a.thisClasses=[f.nav.replace(e,t),n?f.nav.replace(e,n):"",l],a.contentClasses=[f.content.replace(e,t),l].join(" "),a.contentClassesOpen=[n?f.content.replace(e,n):"",f.open].join(" "),a.$nav=this.addClass(a.thisClasses.join(" ")).attr("role","navigation"),a.$handle=d(a.handle).addClass(a.handleClasses),a.$content=d(a.content).addClass(a.contentClasses),a.$animate=d().add(a.$nav).add(a.$content),function(a){if(a.label)if(1<a.$handle.length){a.originalLabel=[];for(var e=0,t=a.$handle.length;e<t;e++)a.originalLabel[e]=a.$handle.eq(e).html()}else a.originalLabel=a.$handle.html()}(a),a.navTabIndex=a.$nav.attr("tabindex"),a.$nav.attr("tabindex",-1),a.id=this.attr("id"),a.id?a.ariaId=a.id:(a.ariaId=a.rawGuid,this.attr("id",a.ariaId)),a.$handle.attr("data-swap-target",a.dotGuid).attr("data-swap-linked",a.handleGuid).attr("data-swap-group",f.base).attr("tabindex",0).on("activate.swap"+a.dotGuid,a,r).on("deactivate.swap"+a.dotGuid,a,c).on("enable.swap"+a.dotGuid,a,h).on("disable.swap"+a.dotGuid,a,u).on(m.focus+a.dotGuid,a,o).on(m.blur+a.dotGuid,a,s).fsSwap({maxWidth:a.maxWidth,classes:{target:a.dotGuid,enabled:v.enabled,active:v.open,raw:{target:a.rawGuid,enabled:f.enabled,active:f.open}}}),a.$handle.is("a, button")||a.$handle.on(m.keyPress+a.dotGuid,a,i)},_destruct:function(a){a.$content.removeClass([a.contentClasses,a.contentClassesOpen].join(" ")).off(m.namespace),a.$handle.removeAttr("aria-controls").removeAttr("aria-expanded").removeAttr("data-swap-target").removeData("swap-target").removeAttr("data-swap-linked").removeAttr("data-swap-group").removeData("swap-linked").removeData("tabindex").removeClass(a.handleClasses).off(a.dotGuid).html(a.originalLabel).fsSwap("destroy"),a.$nav.attr("tabindex",a.navTabIndex),n(a),e(a),this.removeAttr("aria-hidden").removeClass(a.thisClasses.join(" ")).off(m.namespace),this.attr("id")===a.rawGuid&&this.removeAttr("id")},open:function(a){a.$handle.fsSwap("activate")},close:t,enable:function(a){a.$handle.fsSwap("enable")},disable:function(a){a.$handle.fsSwap("disable")}}}),p=l.namespace,v=l.classes,f=v.raw,m=l.events,g=l.functions,$=null;a.Ready(function(){$=d("html, body")})});