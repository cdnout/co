!function(t){"function"==typeof define&&define.amd?define(["jquery","./core"],t):t(jQuery,Formstone)}(function(n,t){"use strict";function i(t){t.data.$container.addClass(m.focus)}function s(t){l(t.data,0),t.data.$container.removeClass(m.focus)}function o(t){var e=t.data;38!==t.keyCode&&40!==t.keyCode||(t.preventDefault(),l(e,38===t.keyCode?e.step:-e.step))}function r(t){p.killEvent(t),d(t);var e,a=t.data;!a.disabled&&t.which<=1&&(e=n(t.target).hasClass(m.up)?a.step:-a.step,a.timer=p.startTimer(a.timer,300,function(){a.timer=p.startTimer(a.timer,100,function(){l(a,e)},!0)}),l(a,e),b.on([f.touchEnd,f.mouseUp].join(" "),a,d))}function d(t){p.killEvent(t);t=t.data;p.clearTimer(t.timer,!0),b.off(f.namespace)}function l(t,e){var a=parseFloat(t.$el.val()),n=e;0!=e&&(void 0===a||isNaN(a)?n=!1!==t.min?t.min:0:!1!==t.min&&a<t.min?n=t.min:n+=a,""!==n&&(!1!==t.min&&n<t.min&&(n=t.min),!1!==t.max&&n>t.max&&(n=t.max)),n===a&&0!=e||(""!==n&&(n=function(t,e){e=Math.pow(10,e);return Math.round(t*e)/e}(n,t.digits)),t.$el.val(n).trigger(f.raw.change,[!0])))}function u(t){t=String(t);return-1<t.indexOf(".")?t.length-t.indexOf(".")-1:0}var e=t.Plugin("number",{widget:!0,defaults:{customClass:"",labels:{up:"Up",down:"Down"},theme:"fs-light"},classes:["arrow","up","down","disabled","focus"],methods:{_construct:function(t){var e=parseFloat(this.attr("min")),a=parseFloat(this.attr("max"));t.min=!(!e&&0!==e)&&e,t.max=!(!a&&0!==a)&&a,t.step=parseFloat(this.attr("step"))||1,t.timer=null,t.digits=u(t.step),t.disabled=this.is(":disabled")||this.is("[readonly]"),a="",a+='<button type="button" class="'+[m.arrow,m.up].join(" ")+'" aria-hidden="true" tabindex="-1">'+t.labels.up+"</button>",a+='<button type="button" class="'+[m.arrow,m.down].join(" ")+'" aria-hidden="true" tabindex="-1">'+t.labels.down+"</button>",this.wrap('<div class="'+[m.base,t.theme,t.customClass,t.disabled?m.disabled:""].join(" ")+'"></div>').after(a),t.$container=this.parent(c.base),t.$arrows=t.$container.find(c.arrow),this.on(f.focus,t,i).on(f.blur,t,s).on(f.keyPress,t,o),t.$container.on([f.touchStart,f.mouseDown].join(" "),c.arrow,t,r),l(t,0)},_destruct:function(t){t.$arrows.remove(),this.unwrap().off(f.namespace)},enable:function(t){t.disabled&&(this.prop("disabled",!1),t.$container.removeClass(m.disabled),t.disabled=!1)},disable:function(t){t.disabled||(this.prop("disabled",!0),t.$container.addClass(m.disabled),t.disabled=!0)},update:function(t){var e=parseFloat(t.$el.attr("min")),a=parseFloat(t.$el.attr("max"));t.min=!(!e&&0!==e)&&e,t.max=!(!a&&0!==a)&&a,t.step=parseFloat(t.$el.attr("step"))||1,t.timer=null,t.digits=u(t.step),t.disabled=t.$el.is(":disabled")||t.$el.is("[readonly]"),l(t,0)}}}),c=e.classes,m=c.raw,f=e.events,p=e.functions,b=null;t.Ready(function(){b=t.$body})});