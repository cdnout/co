!function(t){"function"==typeof define&&define.amd?define(["jquery","./core","./touch","./transition","./viewer"],t):t(jQuery,Formstone)}(function(v,H){"use strict";function e(t){if(!K){var i=t.data;!0===i.overlay&&(i.mobile=!0),(K=v.extend({},{visible:!1,gallery:{active:!1},isMobile:H.isMobile||i.mobile,isTouch:H.support.touch,isAnimating:!0,isZooming:!1,oldContentHeight:0,oldContentWidth:0,metaHeight:0,thumbnailHeight:0,captionOpen:!1,thumbnailsOpen:!1,tapTimer:null},i)).isViewer=K.isMobile&&i.viewer&&void 0!==v.fn.fsViewer;var e=i.$el,o=i.$object,n=e&&e[0].href&&e[0].href||"",a=e&&e[0].hash&&e[0].hash||"",l=(n.toLowerCase().split(".").pop().split(/\#|\?/),e?e.data(L+"-type"):""),r="image"===l||n.match(i.fileTypes)||"data:image"===n.substr(0,10),g=k(n),s="url"===l||!r&&!g&&"http"===n.substr(0,4)&&!a,d="element"===l||!r&&!g&&!s&&"#"===a.substr(0,1),h=void 0!==o;if(d&&(n=a),r||g||s||d||h){E.killEvent(t),K.margin*=2,K.type=r?"image":g?"video":"element";t=e.data(L+"-gallery");t&&(K.gallery.active=!0,K.gallery.id=t,K.gallery.$items=v("a[data-lightbox-gallery= "+K.gallery.id+"], a[rel= "+K.gallery.id+"]"),K.gallery.index=K.gallery.$items.index(K.$el),K.gallery.total=K.gallery.$items.length-1),K.thumbnails&&(r||g)&&K.gallery.active||(K.thumbnails=!1);var c="";K.isMobile||(c+='<div class="'+[P.overlay,K.theme,K.customClass].join(" ")+'"></div>');var m,p,t=[P.base,P.loading,P.animating,K.theme,K.customClass];if(K.fixed&&t.push(P.fixed),K.isMobile&&t.push(P.mobile),K.isTouch&&t.push(P.touch),s&&t.push(P.iframed),(d||h)&&t.push(P.inline),K.thumbnails&&t.push(P.thumbnailed),K.labels.lightbox=K.labels.lightbox.replace("{guid}",i.numGuid),c+='<div class="'+t.join(" ")+'" role="dialog" aria-label="'+K.labels.lightbox+'" tabindex="-1">',c+='<button type="button" class="'+P.close+'">'+K.labels.close+"</button>",c+='<span class="'+P.loading_icon+'"></span>',c+='<div class="'+P.container+'">',K.gallery.active&&K.thumbnails){c+='<div class="'+[P.thumbnails]+'">',c+='<div class="'+[P.thumbnail_container]+'">';for(var u=0,b=K.gallery.$items.length;u<b;u++)p=(p=(m=K.gallery.$items.eq(u)).data("lightbox-thumbnail"))||m.find("img").attr("src"),c+='<button class="'+[P.thumbnail_item]+'">',c+='<img src="'+p+'" alt="">',c+="</button>";c+="</div></div>"}c+='<div class="'+P.content+'"></div>',r||g?(c+='<div class="'+P.tools+'">',c+='<div class="'+P.controls+'">',K.gallery.active&&(c+='<button type="button" class="'+[P.control,P.control_previous].join(" ")+'">'+K.labels.previous+"</button>",c+='<button type="button" class="'+[P.control,P.control_next].join(" ")+'">'+K.labels.next+"</button>"),K.isMobile&&K.isTouch&&(c+='<button type="button" class="'+[P.toggle,P.caption_toggle].join(" ")+'">'+K.labels.captionClosed+"</button>",K.gallery.active&&K.thumbnails&&(c+='<button type="button" class="'+[P.toggle,P.thumbnail_toggle].join(" ")+'">'+K.labels.thumbnailsClosed+"</button>")),c+="</div>",c+='<div class="'+P.meta+'">',c+='<div class="'+P.meta_content+'">',K.gallery.active&&(c+='<p class="'+P.position+'"',K.gallery.total<1&&(c+=' style="display: none;"'),c+=">",c+='<span class="'+P.position_current+'">'+(K.gallery.index+1)+"</span> ",c+=K.labels.count,c+=' <span class="'+P.position_total+'">'+(K.gallery.total+1)+"</span>",c+="</p>"),c+='<div class="'+P.caption+'">',c+=K.formatter.call(e,i),c+="</div></div></div>",c+="</div>"):K.gallery.active&&(c+='<div class="'+P.tools+'">',c+='<div class="'+P.controls+'">',c+='<button type="button" class="'+[P.control,P.control_previous].join(" ")+'">'+K.labels.previous+"</button>",c+='<button type="button" class="'+[P.control,P.control_next].join(" ")+'">'+K.labels.next+"</button>",c+="</div>",c+="</div>"),c+="</div></div>",A.append(c),K.$overlay=v(O.overlay),K.$lightbox=v(O.base),K.$close=v(O.close),K.$container=v(O.container),K.$content=v(O.content),K.$tools=v(O.tools),K.$meta=v(O.meta),K.$metaContent=v(O.meta_content),K.$position=v(O.position),K.$caption=v(O.caption),K.$controlBox=v(O.controls),K.$controls=v(O.control),K.$thumbnails=v(O.thumbnails),K.$thumbnailContainer=v(O.thumbnail_container),K.$thumbnailItems=v(O.thumbnail_item),K.isMobile?(K.paddingVertical=K.$close.outerHeight(),K.paddingHorizontal=0,K.mobilePaddingVertical=parseInt(K.$content.css("paddingTop"),10)+parseInt(K.$content.css("paddingBottom"),10),K.mobilePaddingHorizontal=parseInt(K.$content.css("paddingLeft"),10)+parseInt(K.$content.css("paddingRight"),10)):(K.paddingVertical=parseInt(K.$lightbox.css("paddingTop"),10)+parseInt(K.$lightbox.css("paddingBottom"),10),K.paddingHorizontal=parseInt(K.$lightbox.css("paddingLeft"),10)+parseInt(K.$lightbox.css("paddingRight"),10),K.mobilePaddingVertical=0,K.mobilePaddingHorizontal=0),K.contentHeight=K.$lightbox.outerHeight()-K.paddingVertical,K.contentWidth=K.$lightbox.outerWidth()-K.paddingHorizontal,K.controlHeight=K.$controls.outerHeight(),i=f(),K.$lightbox.css({top:K.fixed?0:i.top}),K.gallery.active&&(K.$lightbox.addClass(P.has_controls),I()),R.on(q.keyDown,V),A.on(q.click,[O.overlay,O.close].join(", "),$).on([q.focus,q.focusIn].join(" "),z),K.gallery.active&&K.$lightbox.on(q.click,O.control,C),K.thumbnails&&K.$lightbox.on(q.click,O.thumbnail_item,_),K.isMobile&&K.isTouch&&K.$lightbox.on(q.click,O.caption_toggle,w).on(q.click,O.thumbnail_toggle,y),K.$lightbox.fsTransition({property:"opacity"},function(){r?W(n):g?x(n):s?M(n):d?T(n):h&&j(K.$object)}).addClass(P.open),K.$overlay.addClass(P.open)}else K=null}}function t(t){"object"!=typeof t&&(K.targetHeight=t,K.targetWidth=arguments[1]),"element"===K.type?h(K.$content.find("> :first-child")):"image"===K.type?a():"video"===K.type&&r(),function(){{var t;K.visible&&!K.isMobile&&(t=f(),K.$controls.css({marginTop:(K.contentHeight-K.controlHeight-K.metaHeight+K.thumbnailHeight)/2}),K.$lightbox.css({height:K.contentHeight+K.paddingVertical,width:K.contentWidth+K.paddingHorizontal,top:K.fixed?0:t.top}),K.oldContentHeight=K.contentHeight,K.oldContentWidth=K.contentWidth)}}()}function $(t){E.killEvent(t),K&&(K.$lightbox.fsTransition("destroy"),K.$content.fsTransition("destroy"),K.$lightbox.addClass(P.animating).fsTransition({property:"opacity"},function(t){void 0!==K.$inlineTarget&&K.$inlineTarget.length&&d(),K.isViewer&&K.$imageContainer&&K.$imageContainer.length&&K.$imageContainer.fsViewer("destroy"),K.$lightbox.off(q.namespace),K.$container.off(q.namespace),R.off(q.keyDown),A.off(q.namespace),A.off(q.namespace),K.$overlay.remove(),K.$lightbox.remove(),void 0!==K.$el&&K.$el&&K.$el.length&&K.$el.focus(),K=null,R.trigger(q.close)}),K.$lightbox.removeClass(P.open),K.$overlay.removeClass(P.open),K.isMobile&&(b.removeClass(P.lock),E.unlockViewport(L)))}function o(){var t=f();K.isMobile||K.duration;K.isMobile?E.lockViewport(L):K.$controls.css({marginTop:(K.contentHeight-K.controlHeight-K.metaHeight+K.thumbnailHeight)/2}),""===K.$caption.html()?(K.$caption.hide(),K.$lightbox.removeClass(P.has_caption),K.gallery.active||K.$tools.hide()):(K.$caption.show(),K.$lightbox.addClass(P.has_caption)),K.$lightbox.fsTransition({property:K.contentHeight!==K.oldContentHeight?"height":"width"},function(){K.$content.fsTransition({property:"opacity"},function(){K.$lightbox.removeClass(P.animating),K.isAnimating=!1}),K.$lightbox.removeClass(P.loading).addClass(P.ready),K.visible=!0,R.trigger(q.open,[{instance:K}]),K.gallery.active&&("element"==K.type||(function(){var t="";0<K.gallery.index&&(k(t=K.gallery.$items.eq(K.gallery.index-1).attr("href"))||v('<img src="'+t+'">'));K.gallery.index<K.gallery.total&&(k(t=K.gallery.$items.eq(K.gallery.index+1).attr("href"))||v('<img src="'+t+'">'))}(),g(),function(){{var t;K.thumbnails&&(t=K.$thumbnailItems.eq(K.gallery.index),t=t.position().left+t.outerWidth(!1)/2-K.$thumbnailContainer.outerWidth(!0)/2,K.$thumbnailContainer.stop().animate({scrollLeft:t},200,"linear"))}}())),K.$lightbox.focus()}),K.isMobile||K.$lightbox.css({height:K.contentHeight+K.paddingVertical,width:K.contentWidth+K.paddingHorizontal,top:K.fixed?0:t.top});t=K.oldContentHeight!==K.contentHeight||K.oldContentWidth!==K.contentWidth;!K.isMobile&&t||K.$lightbox.fsTransition("resolve"),K.oldContentHeight=K.contentHeight,K.oldContentWidth=K.contentWidth,K.isMobile&&b.addClass(P.lock)}function f(){if(K.isMobile)return{left:0,top:0};var t={left:(H.windowWidth-K.contentWidth-K.paddingHorizontal)/2,top:K.top<=0?(H.windowHeight-K.contentHeight-K.paddingVertical)/2:K.top};return!0!==K.fixed&&(t.top+=R.scrollTop()),t}function w(t){E.killEvent(t),K.captionOpen?i():(n(),t=parseInt(K.$metaContent.outerHeight(!0)),t+=parseInt(K.$meta.css("padding-top")),t+=parseInt(K.$meta.css("padding-bottom")),K.$meta.css({height:t}),K.$lightbox.addClass(P.caption_open).find(O.caption_toggle).text(K.labels.captionOpen),K.captionOpen=!0)}function i(){K.$lightbox.removeClass(P.caption_open).find(O.caption_toggle).text(K.labels.captionClosed),K.captionOpen=!1}function y(t){E.killEvent(t),K.thumbnailsOpen?n():(i(),K.$lightbox.addClass(P.thumbnails_open).find(O.thumbnail_toggle).text(K.labels.thumbnailsOpen),K.thumbnailsOpen=!0)}function n(){K.$lightbox.removeClass(P.thumbnails_open).find(O.thumbnail_toggle).text(K.labels.thumbnailsClosed),K.thumbnailsOpen=!1}function W(t){K.isViewer?(K.$imageContainer=v('<div class="'+P.image_container+'"><img></div>'),K.$image=K.$imageContainer.find("img"),K.$image.attr("src",t).addClass(P.image),K.$content.prepend(K.$imageContainer),a(),K.$imageContainer.one("loaded.viewer",function(){o()}).fsViewer({theme:K.theme})):(K.$imageContainer=v('<div class="'+P.image_container+'"><img></div>'),K.$image=K.$imageContainer.find("img"),K.$image.one(q.load,function(){var t=function(t){var i=t[0],t=new Image;{if(void 0!==i.naturalHeight)return{naturalHeight:i.naturalHeight,naturalWidth:i.naturalWidth};if("img"===i.tagName.toLowerCase())return t.src=i.src,{naturalHeight:t.height,naturalWidth:t.width}}return!1}(K.$image);K.naturalHeight=t.naturalHeight,K.naturalWidth=t.naturalWidth,K.retina&&(K.naturalHeight/=2,K.naturalWidth/=2),K.$content.prepend(K.$imageContainer),a(),o()}).on(q.error,c).attr("src",t).addClass(P.image),!K.$image[0].complete&&4!==K.$image[0].readyState||K.$image.trigger(q.load))}function a(){if(K.$image){var t=0;for(K.windowHeight=K.viewportHeight=H.windowHeight-K.mobilePaddingVertical-K.paddingVertical,K.windowWidth=K.viewportWidth=H.windowWidth-K.mobilePaddingHorizontal-K.paddingHorizontal,K.contentHeight=1/0,K.contentWidth=1/0,K.imageMarginTop=0,K.imageMarginLeft=0;K.contentHeight>K.viewportHeight&&t<2;)K.imageHeight=0===t?K.naturalHeight:K.$image.outerHeight(),K.imageWidth=0===t?K.naturalWidth:K.$image.outerWidth(),K.metaHeight=0===t?0:K.metaHeight,K.spacerHeight=0===t?0:K.spacerHeight,K.thumbnailHeight=0===t?0:K.thumbnailHeight,0===t&&(K.ratioHorizontal=K.imageHeight/K.imageWidth,K.ratioVertical=K.imageWidth/K.imageHeight,K.isWide=K.imageWidth>K.imageHeight),K.imageHeight<K.minHeight&&(K.minHeight=K.imageHeight),K.imageWidth<K.minWidth&&(K.minWidth=K.imageWidth),K.isMobile?(K.isTouch?(K.$controlBox.css({width:H.windowWidth}),K.spacerHeight=K.$controls.outerHeight(!0)):(K.$tools.css({width:H.windowWidth}),K.spacerHeight=K.$tools.outerHeight(!0)),K.contentHeight=K.viewportHeight,K.contentWidth=K.viewportWidth,K.isTouch||K.$content.css({height:K.contentHeight-K.spacerHeight}),K.$thumbnails.length&&(K.spacerHeight+=K.$thumbnails.outerHeight(!0)),K.spacerHeight+=10,l(),K.imageMarginTop=(K.contentHeight-K.targetImageHeight-K.spacerHeight)/2,K.imageMarginLeft=(K.contentWidth-K.targetImageWidth)/2):(0===t&&(K.viewportHeight-=K.margin+K.paddingVertical,K.viewportWidth-=K.margin+K.paddingHorizontal),K.viewportHeight-=K.metaHeight,K.thumbnails&&(K.viewportHeight-=K.thumbnailHeight),l(),K.contentHeight=K.targetImageHeight,K.contentWidth=K.targetImageWidth),K.isMobile||K.isTouch||K.$meta.css({width:K.contentWidth}),K.$image.css({height:K.targetImageHeight,width:K.targetImageWidth,marginTop:K.imageMarginTop,marginLeft:K.imageMarginLeft}),K.isMobile||(K.metaHeight=K.$meta.outerHeight(!0),K.contentHeight+=K.metaHeight),K.thumbnails&&(K.thumbnailHeight=K.$thumbnails.outerHeight(!0),K.contentHeight+=K.thumbnailHeight),t++}}function l(){var t=K.isMobile?K.contentHeight-K.spacerHeight:K.viewportHeight,i=K.isMobile?K.contentWidth:K.viewportWidth;K.isWide?(K.targetImageWidth=i,K.targetImageHeight=K.targetImageWidth*K.ratioHorizontal,K.targetImageHeight>t&&(K.targetImageHeight=t,K.targetImageWidth=K.targetImageHeight*K.ratioVertical)):(K.targetImageHeight=t,K.targetImageWidth=K.targetImageHeight*K.ratioVertical,K.targetImageWidth>i&&(K.targetImageWidth=i,K.targetImageHeight=K.targetImageWidth*K.ratioHorizontal)),(K.targetImageWidth>K.imageWidth||K.targetImageHeight>K.imageHeight)&&(K.targetImageHeight=K.imageHeight,K.targetImageWidth=K.imageWidth),(K.targetImageWidth<K.minWidth||K.targetImageHeight<K.minHeight)&&(K.targetImageWidth<K.minWidth?(K.targetImageWidth=K.minWidth,K.targetImageHeight=K.targetImageWidth*K.ratioHorizontal):(K.targetImageHeight=K.minHeight,K.targetImageWidth=K.targetImageHeight*K.ratioVertical))}function x(t){var i=k(t),e=t.split("?"),t="&origin="+encodeURIComponent(window.location.protocol+"//"+window.location.hostname);i?(2<=e.length&&(i+="?"+e.slice(1)[0].trim()),K.$videoWrapper=v('<div class="'+P.video_wrapper+'"></div>'),K.$video=v('<iframe class="'+P.video+'" frameborder="0" seamless="seamless" allowfullscreen></iframe>'),K.$video.attr("src",i+"&enablejsapi=1"+t).addClass(P.video).prependTo(K.$videoWrapper),K.$content.prepend(K.$videoWrapper),r(),o()):c()}function r(){K.windowHeight=K.viewportHeight=H.windowHeight-K.mobilePaddingVertical-K.paddingVertical,K.windowWidth=K.viewportWidth=H.windowWidth-K.mobilePaddingHorizontal-K.paddingHorizontal,K.videoMarginTop=0,K.videoMarginLeft=0,K.isMobile?(K.isTouch?(K.$controlBox.css({width:H.windowWidth}),K.spacerHeight=K.$controls.outerHeight(!0)+10):(K.$tools.css({width:H.windowWidth}),K.spacerHeight=K.$tools.outerHeight(!0),K.spacerHeight+=K.$thumbnails.outerHeight(!0)+10),K.viewportHeight-=K.spacerHeight,K.targetVideoWidth=K.viewportWidth,K.targetVideoHeight=K.targetVideoWidth*K.videoRatio,K.targetVideoHeight>K.viewportHeight&&(K.targetVideoHeight=K.viewportHeight,K.targetVideoWidth=K.targetVideoHeight/K.videoRatio),K.videoMarginTop=(K.viewportHeight-K.targetVideoHeight)/2,K.videoMarginLeft=(K.viewportWidth-K.targetVideoWidth)/2):(K.viewportHeight=K.windowHeight-K.margin,K.viewportWidth=K.windowWidth-K.margin,K.targetVideoWidth=K.videoWidth>K.viewportWidth?K.viewportWidth:K.videoWidth,K.targetVideoWidth<K.minWidth&&(K.targetVideoWidth=K.minWidth),K.targetVideoHeight=K.targetVideoWidth*K.videoRatio,K.contentHeight=K.targetVideoHeight,K.contentWidth=K.targetVideoWidth),K.isMobile||K.isTouch||K.$meta.css({width:K.contentWidth}),K.$videoWrapper.css({height:K.targetVideoHeight,width:K.targetVideoWidth,marginTop:K.videoMarginTop,marginLeft:K.videoMarginLeft}),K.isMobile||(K.metaHeight=K.$meta.outerHeight(!0),K.contentHeight+=K.metaHeight),K.thumbnails&&(K.thumbnailHeight=K.$thumbnails.outerHeight(!0),K.contentHeight+=K.thumbnailHeight)}function C(t){E.killEvent(t);t=v(t.currentTarget);K.isAnimating||t.hasClass(P.control_disabled)||(K.isAnimating=!0,i(),K.gallery.index+=t.hasClass(P.control_next)?1:-1,K.gallery.index>K.gallery.total&&(K.gallery.index=K.infinite?0:K.gallery.total),K.gallery.index<0&&(K.gallery.index=K.infinite?K.gallery.total:0),g(),K.$lightbox.addClass(P.animating),K.$content.fsTransition({property:"opacity"},s),K.$lightbox.addClass(P.loading))}function _(t){E.killEvent(t);t=v(t.currentTarget);K.isAnimating||t.hasClass(P.active)||(K.isAnimating=!0,i(),K.gallery.index=K.$thumbnailItems.index(t),g(),K.$lightbox.addClass(P.animating),K.$content.fsTransition({property:"opacity"},s),K.$lightbox.addClass(P.loading))}function g(){var t;K.thumbnails&&(t=K.$thumbnailItems.eq(K.gallery.index),K.$thumbnailItems.removeClass(P.active),t.addClass(P.active))}function s(){var t;"element"==K.type?void 0!==K.$inlineTarget&&K.$inlineTarget.length&&d():(void 0!==K.$imageContainer&&(K.isViewer&&K.$imageContainer.fsViewer("destroy"),K.$imageContainer.remove()),void 0!==K.$videoWrapper&&K.$videoWrapper.remove()),K.$el=K.gallery.$items.eq(K.gallery.index),"element"==K.type?("http"===(t=K.$el[0].href).substr(0,4)?M:T)(t):(K.$caption.html(K.formatter.call(K.$el,K)),K.$position.find(O.position_current).html(K.gallery.index+1),k(t=K.$el[0].href)?(K.type="video",x(t)):(K.type="image",W(t))),I()}function I(){K.$controls.removeClass(P.control_disabled),K.infinite||(0===K.gallery.index&&K.$controls.filter(O.control_previous).addClass(P.control_disabled),K.gallery.index===K.gallery.total&&K.$controls.filter(O.control_next).addClass(P.control_disabled))}function V(t){!K.gallery.active||37!==t.keyCode&&39!==t.keyCode?27===t.keyCode&&K.$close.trigger(q.click):(E.killEvent(t),K.$controls.filter(37===t.keyCode?O.control_previous:O.control_next).trigger(q.click))}function T(t){K.$inlineTarget=v(t),K.$inlineContents=K.$inlineTarget.children().detach(),j(K.$inlineContents)}function d(){K.$inlineTarget.append(K.$inlineContents.detach())}function M(t){t+=-1<t.indexOf("?")?"&"+K.requestKey+"=true":"?"+K.requestKey+"=true",j(v('<iframe class="'+P.iframe+'" src="'+t+'"></iframe>'))}function j(t){K.$content.append(t),h(t),o()}function h(t){K.windowHeight=H.windowHeight-K.mobilePaddingVertical-K.paddingVertical,K.windowWidth=H.windowWidth-K.mobilePaddingHorizontal-K.paddingHorizontal,K.objectHeight=t.outerHeight(!0),K.objectWidth=t.outerWidth(!0),K.targetHeight=K.targetHeight||(K.$el?K.$el.data(L+"-height"):null),K.targetWidth=K.targetWidth||(K.$el?K.$el.data(L+"-width"):null),K.maxHeight=K.windowHeight<0?K.minHeight:K.windowHeight,K.isIframe=t.is("iframe"),K.objectMarginTop=0,K.objectMarginLeft=0,K.isMobile||(K.windowHeight-=K.margin,K.windowWidth-=K.margin),K.contentHeight=K.targetHeight||(K.isIframe||K.isMobile?K.windowHeight:K.objectHeight),K.contentWidth=K.targetWidth||(K.isIframe||K.isMobile?K.windowWidth:K.objectWidth),(K.isIframe||K.isObject)&&K.isMobile?(K.contentHeight=K.windowHeight,K.contentWidth=K.windowWidth):K.isObject&&(K.contentHeight=K.contentHeight>K.windowHeight?K.windowHeight:K.contentHeight,K.contentWidth=K.contentWidth>K.windowWidth?K.windowWidth:K.contentWidth),K.isMobile||(K.contentHeight>K.maxHeight&&(K.contentHeight=K.maxHeight),K.contentWidth>K.maxWidth&&(K.contentWidth=K.maxWidth))}function c(){var t=v('<div class="'+P.error+'"><p>Error Loading Resource</p></div>');K.type="element",K.$tools.remove(),K.$image.off(q.namespace),j(t),R.trigger(q.error)}function k(t){var i,e,o=K.videoFormatter;for(e in o)if(o.hasOwnProperty(e)&&null!==(i=t.match(o[e].pattern)))return o[e].format.call(K,i);return!1}function z(t){var i=t.target;v.contains(K.$lightbox[0],i)||i===K.$lightbox[0]||i===K.$overlay[0]||(E.killEvent(t),K.$lightbox.focus())}var m=H.Plugin("lightbox",{widget:!0,defaults:{customClass:"",fileTypes:/\.(jpg|sjpg|jpeg|png|gif)/i,fixed:!1,formatter:function(){var t=this.attr("title");return(t=!(void 0===t||!t)&&t.replace(/^\s+|\s+$/g,""))?'<p class="caption">'+t+"</p>":""},infinite:!1,labels:{close:"Close",count:"of",next:"Next",previous:"Previous",captionClosed:"View Caption",captionOpen:"Close Caption",thumbnailsClosed:"View Thumbnails",thumbnailsOpen:"Close Thumbnails",lightbox:"Lightbox {guid}"},margin:50,maxHeight:1e4,maxWidth:1e4,minHeight:100,minWidth:100,mobile:!1,overlay:!1,retina:!1,requestKey:"fs-lightbox",theme:"fs-light",thumbnails:!1,top:0,videoFormatter:{youtube:{pattern:/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/ ]{11})/,format:function(t){return"//www.youtube.com/embed/"+t[1]}},vimeo:{pattern:/(?:www\.|player\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/([^\/]*)\/videos\/|album\/(\d+)\/video\/|video\/|)(\d+)(?:$|\/|\?)/,format:function(t){return"//player.vimeo.com/video/"+t[3]}}},videoRatio:.5625,videoWidth:800,viewer:!0},classes:["loading","animating","fixed","mobile","touch","inline","iframed","open","ready","overlay","close","loading_icon","container","content","image","image_container","video","video_wrapper","tools","meta","meta_content","controls","control","control_previous","control_next","control_disabled","position","position_current","position_total","toggle","caption_toggle","caption","caption_open","thumbnailed","thumbnails_open","thumbnail_toggle","thumbnails","thumbnail_container","thumbnail_item","active","has_controls","has_caption","iframe","error","active","lock"],events:{open:"open",close:"close"},methods:{_construct:function(t){this.on(q.click,t,e),t=this.data(L+"-gallery"),!F&&B&&t===B&&(F=!0,this.trigger(q.click))},_destruct:function(t){$(),this.off(q.namespace)},_resize:function(){K&&t()},resize:t},utilities:{_initialize:function(t,i){t instanceof v&&e.apply(u,[{data:v.extend(!0,{},{$object:t},p,i||{})}])},close:$}}),L=m.namespace,p=m.defaults,O=m.classes,P=O.raw,q=m.events,E=m.functions,u=H.window,R=H.$window,A=null,b=null,B=!1,F=!1,K=null;H.Ready(function(){A=H.$body,b=v("html, body"),B=H.window.location.hash.replace("#","")})});