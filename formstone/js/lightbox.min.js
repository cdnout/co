!function(t){"function"==typeof define&&define.amd?define(["jquery","./core","./touch","./transition","./viewer"],t):t(jQuery,Formstone)}(function($,H){"use strict";function e(t){if(!K){var i=t.data;!0===i.overlay&&(i.mobile=!0),(K=$.extend({},{visible:!1,gallery:{active:!1},isMobile:H.isMobile&&i.mobile||i.mobile,isTouch:H.support.touch,isAnimating:!0,isZooming:!1,oldContentHeight:0,oldContentWidth:0,metaHeight:0,thumbnailHeight:0,captionOpen:!1,thumbnailsOpen:!1,tapTimer:null},i)).isViewer=K.isMobile&&i.viewer&&void 0!==$.fn.fsViewer;var e=i.$el,o=i.$object,n=e&&e[0].href&&e[0].href||"",a=e&&e[0].hash&&e[0].hash||"",l=(n.toLowerCase().split(".").pop().split(/\#|\?/),e?e.data(O+"-type"):""),r="image"===l||n.match(i.fileTypes)||"data:image"===n.substr(0,10),g=z(n),s="url"===l||!r&&!g&&"http"===n.substr(0,4)&&!a,d="element"===l||!r&&!g&&!s&&"#"===a.substr(0,1),h=void 0!==o;if(d&&(n=a),r||g||s||d||h){R.killEvent(t),K.margin*=2,K.type=r?"image":g?"video":"element",e&&e.length&&((u=e.data(O+"-gallery"))&&(K.gallery.active=!0,K.gallery.id=u,K.gallery.$items=$("a[data-lightbox-gallery= "+K.gallery.id+"], a[rel= "+K.gallery.id+"]"),K.gallery.index=K.gallery.$items.index(K.$el),K.gallery.total=K.gallery.$items.length-1)),K.thumbnails&&(r||g)&&K.gallery.active||(K.thumbnails=!1);var c="";K.isMobile||(c+='<div class="'+[q.overlay,K.theme,K.customClass].join(" ")+'"></div>');var m,p,u=[q.base,q.loading,q.animating,K.theme,K.customClass];if(K.fixed&&u.push(q.fixed),K.isMobile&&u.push(q.mobile),K.isTouch&&u.push(q.touch),s&&u.push(q.iframed),(d||h)&&u.push(q.inline),K.thumbnails&&u.push(q.thumbnailed),K.labels.lightbox=K.labels.lightbox.replace("{guid}",i.numGuid),c+='<div class="'+u.join(" ")+'" role="dialog" aria-label="'+K.labels.lightbox+'" tabindex="-1">',c+='<button type="button" class="'+q.close+'">'+K.labels.close+"</button>",c+='<span class="'+q.loading_icon+'"></span>',c+='<div class="'+q.container+'">',K.gallery.active&&K.thumbnails){c+='<div class="'+[q.thumbnails]+'">',c+='<div class="'+[q.thumbnail_container]+'">';for(var b=0,v=K.gallery.$items.length;b<v;b++)p=(p=(m=K.gallery.$items.eq(b)).data("lightbox-thumbnail"))||m.find("img").attr("src"),c+='<button class="'+[q.thumbnail_item]+'">',c+='<img src="'+p+'" alt="">',c+="</button>";c+="</div></div>"}c+='<div class="'+q.content+'"></div>',r||g?(c+='<div class="'+q.tools+'">',c+='<div class="'+q.controls+'">',K.gallery.active&&(c+='<button type="button" class="'+[q.control,q.control_previous].join(" ")+'">'+K.labels.previous+"</button>",c+='<button type="button" class="'+[q.control,q.control_next].join(" ")+'">'+K.labels.next+"</button>"),K.isMobile&&K.isTouch&&(c+='<button type="button" class="'+[q.toggle,q.caption_toggle].join(" ")+'">'+K.labels.captionClosed+"</button>",K.gallery.active&&K.thumbnails&&(c+='<button type="button" class="'+[q.toggle,q.thumbnail_toggle].join(" ")+'">'+K.labels.thumbnailsClosed+"</button>")),c+="</div>",c+='<div class="'+q.meta+'">',c+='<div class="'+q.meta_content+'">',K.gallery.active&&(c+='<p class="'+q.position+'"',K.gallery.total<1&&(c+=' style="display: none;"'),c+=">",c+='<span class="'+q.position_current+'">'+(K.gallery.index+1)+"</span> ",c+=K.labels.count,c+=' <span class="'+q.position_total+'">'+(K.gallery.total+1)+"</span>",c+="</p>"),c+='<div class="'+q.caption+'">',c+=K.formatter.call(e,i),c+="</div></div></div>",c+="</div>"):K.gallery.active&&(c+='<div class="'+q.tools+'">',c+='<div class="'+q.controls+'">',c+='<button type="button" class="'+[q.control,q.control_previous].join(" ")+'">'+K.labels.previous+"</button>",c+='<button type="button" class="'+[q.control,q.control_next].join(" ")+'">'+K.labels.next+"</button>",c+="</div>",c+="</div>"),c+="</div></div>",B.append(c),K.$overlay=$(P.overlay),K.$lightbox=$(P.base),K.$close=$(P.close),K.$container=$(P.container),K.$content=$(P.content),K.$tools=$(P.tools),K.$meta=$(P.meta),K.$metaContent=$(P.meta_content),K.$position=$(P.position),K.$caption=$(P.caption),K.$controlBox=$(P.controls),K.$controls=$(P.control),K.$thumbnails=$(P.thumbnails),K.$thumbnailContainer=$(P.thumbnail_container),K.$thumbnailItems=$(P.thumbnail_item),K.isMobile?(K.paddingVertical=K.$close.outerHeight(),K.paddingHorizontal=0,K.mobilePaddingVertical=parseInt(K.$content.css("paddingTop"),10)+parseInt(K.$content.css("paddingBottom"),10),K.mobilePaddingHorizontal=parseInt(K.$content.css("paddingLeft"),10)+parseInt(K.$content.css("paddingRight"),10)):(K.paddingVertical=parseInt(K.$lightbox.css("paddingTop"),10)+parseInt(K.$lightbox.css("paddingBottom"),10),K.paddingHorizontal=parseInt(K.$lightbox.css("paddingLeft"),10)+parseInt(K.$lightbox.css("paddingRight"),10),K.mobilePaddingVertical=0,K.mobilePaddingHorizontal=0),K.contentHeight=K.$lightbox.outerHeight()-K.paddingVertical,K.contentWidth=K.$lightbox.outerWidth()-K.paddingHorizontal,K.controlHeight=K.$controls.outerHeight(),i=w(),K.$lightbox.css({top:K.fixed?0:i.top}),K.gallery.active&&(K.$lightbox.addClass(q.has_controls),V()),A.on(E.keyDown,T),B.on(E.click,[P.overlay,P.close].join(", "),f).on([E.focus,E.focusIn].join(" "),L),K.gallery.active&&K.$lightbox.on(E.click,P.control,_),K.thumbnails&&K.$lightbox.on(E.click,P.thumbnail_item,I),K.isMobile&&K.isTouch&&K.$lightbox.on(E.click,P.caption_toggle,y).on(E.click,P.thumbnail_toggle,W),K.$lightbox.fsTransition({property:"opacity"},function(){r?x(n):g?C(n):s?j(n):d?M(n):h&&k(K.$object)}).addClass(q.open),K.$overlay.addClass(q.open)}else K=null}}function t(t){"object"!=typeof t&&(K.targetHeight=t,K.targetWidth=arguments[1]),"element"===K.type?h(K.$content.find("> :first-child")):"image"===K.type?a():"video"===K.type&&r(),function(){{var t;K.visible&&!K.isMobile&&(t=w(),K.$controls.css({marginTop:(K.contentHeight-K.controlHeight-K.metaHeight+K.thumbnailHeight)/2}),K.$lightbox.css({height:K.contentHeight+K.paddingVertical,width:K.contentWidth+K.paddingHorizontal,top:K.fixed?0:t.top}),K.oldContentHeight=K.contentHeight,K.oldContentWidth=K.contentWidth)}}()}function f(t){R.killEvent(t),K&&(K.$lightbox.fsTransition("destroy"),K.$content.fsTransition("destroy"),K.$lightbox.addClass(q.animating).fsTransition({property:"opacity"},function(t){void 0!==K.$inlineTarget&&K.$inlineTarget.length&&d(),K.isViewer&&K.$imageContainer&&K.$imageContainer.length&&K.$imageContainer.fsViewer("destroy"),K.$lightbox.off(E.namespace),K.$container.off(E.namespace),A.off(E.keyDown),B.off(E.namespace),B.off(E.namespace),K.$overlay.remove(),K.$lightbox.remove(),void 0!==K.$el&&K.$el&&K.$el.length&&K.$el.focus(),K=null,A.trigger(E.close)}),K.$lightbox.removeClass(q.open),K.$overlay.removeClass(q.open),K.isMobile&&(b.removeClass(q.lock),R.unlockViewport(O)))}function o(){var t=w();K.isMobile||K.duration;K.isMobile?R.lockViewport(O):K.$controls.css({marginTop:(K.contentHeight-K.controlHeight-K.metaHeight+K.thumbnailHeight)/2}),""===K.$caption.html()?(K.$caption.hide(),K.$lightbox.removeClass(q.has_caption),K.gallery.active||K.$tools.hide()):(K.$caption.show(),K.$lightbox.addClass(q.has_caption)),K.$lightbox.fsTransition({property:K.contentHeight!==K.oldContentHeight?"height":"width"},function(){K.$content.fsTransition({property:"opacity"},function(){K.$lightbox.removeClass(q.animating),K.isAnimating=!1}),K.$lightbox.removeClass(q.loading).addClass(q.ready),K.visible=!0,A.trigger(E.open,[{instance:K}]),K.gallery.active&&("element"==K.type||(function(){var t="";0<K.gallery.index&&(z(t=K.gallery.$items.eq(K.gallery.index-1).attr("href"))||$('<img src="'+t+'">'));K.gallery.index<K.gallery.total&&(z(t=K.gallery.$items.eq(K.gallery.index+1).attr("href"))||$('<img src="'+t+'">'))}(),g(),function(){{var t;K.thumbnails&&(t=K.$thumbnailItems.eq(K.gallery.index),t=t.position().left+t.outerWidth(!1)/2-K.$thumbnailContainer.outerWidth(!0)/2,K.$thumbnailContainer.stop().animate({scrollLeft:t},200,"linear"))}}())),K.$lightbox.focus()}),K.isMobile||K.$lightbox.css({height:K.contentHeight+K.paddingVertical,width:K.contentWidth+K.paddingHorizontal,top:K.fixed?0:t.top});t=K.oldContentHeight!==K.contentHeight||K.oldContentWidth!==K.contentWidth;!K.isMobile&&t||K.$lightbox.fsTransition("resolve"),K.oldContentHeight=K.contentHeight,K.oldContentWidth=K.contentWidth,K.isMobile&&b.addClass(q.lock)}function w(){if(K.isMobile)return{left:0,top:0};var t={left:(H.windowWidth-K.contentWidth-K.paddingHorizontal)/2,top:K.top<=0?(H.windowHeight-K.contentHeight-K.paddingVertical)/2:K.top};return!0!==K.fixed&&(t.top+=A.scrollTop()),t}function y(t){R.killEvent(t),K.captionOpen?i():(n(),t=parseInt(K.$metaContent.outerHeight(!0)),t+=parseInt(K.$meta.css("padding-top")),t+=parseInt(K.$meta.css("padding-bottom")),K.$meta.css({height:t}),K.$lightbox.addClass(q.caption_open).find(P.caption_toggle).text(K.labels.captionOpen),K.captionOpen=!0)}function i(){K.$lightbox.removeClass(q.caption_open).find(P.caption_toggle).text(K.labels.captionClosed),K.captionOpen=!1}function W(t){R.killEvent(t),K.thumbnailsOpen?n():(i(),K.$lightbox.addClass(q.thumbnails_open).find(P.thumbnail_toggle).text(K.labels.thumbnailsOpen),K.thumbnailsOpen=!0)}function n(){K.$lightbox.removeClass(q.thumbnails_open).find(P.thumbnail_toggle).text(K.labels.thumbnailsClosed),K.thumbnailsOpen=!1}function x(t){K.isViewer?(K.$imageContainer=$('<div class="'+q.image_container+'"><img></div>'),K.$image=K.$imageContainer.find("img"),K.$image.attr("src",t).addClass(q.image),K.$content.prepend(K.$imageContainer),a(),K.$imageContainer.one("loaded.viewer",function(){o()}).fsViewer({theme:K.theme})):(K.$imageContainer=$('<div class="'+q.image_container+'"><img></div>'),K.$image=K.$imageContainer.find("img"),K.$image.one(E.load,function(){var t=function(t){var i=t[0],t=new Image;{if(void 0!==i.naturalHeight)return{naturalHeight:i.naturalHeight,naturalWidth:i.naturalWidth};if("img"===i.tagName.toLowerCase())return t.src=i.src,{naturalHeight:t.height,naturalWidth:t.width}}return!1}(K.$image);K.naturalHeight=t.naturalHeight,K.naturalWidth=t.naturalWidth,K.retina&&(K.naturalHeight/=2,K.naturalWidth/=2),K.$content.prepend(K.$imageContainer),a(),o()}).on(E.error,c).attr("src",t).addClass(q.image),!K.$image[0].complete&&4!==K.$image[0].readyState||K.$image.trigger(E.load))}function a(){if(K.$image){var t=0;for(K.windowHeight=K.viewportHeight=H.windowHeight-K.mobilePaddingVertical-K.paddingVertical,K.windowWidth=K.viewportWidth=H.windowWidth-K.mobilePaddingHorizontal-K.paddingHorizontal,K.contentHeight=1/0,K.contentWidth=1/0,K.imageMarginTop=0,K.imageMarginLeft=0;K.contentHeight>K.viewportHeight&&t<2;)K.imageHeight=0===t?K.naturalHeight:K.$image.outerHeight(),K.imageWidth=0===t?K.naturalWidth:K.$image.outerWidth(),K.metaHeight=0===t?0:K.metaHeight,K.spacerHeight=0===t?0:K.spacerHeight,K.thumbnailHeight=0===t?0:K.thumbnailHeight,0===t&&(K.ratioHorizontal=K.imageHeight/K.imageWidth,K.ratioVertical=K.imageWidth/K.imageHeight,K.isWide=K.imageWidth>K.imageHeight),K.imageHeight<K.minHeight&&(K.minHeight=K.imageHeight),K.imageWidth<K.minWidth&&(K.minWidth=K.imageWidth),K.isMobile?(K.isTouch?(K.$controlBox.css({width:H.windowWidth}),K.spacerHeight=K.$controls.outerHeight(!0)):(K.$tools.css({width:H.windowWidth}),K.spacerHeight=K.$tools.outerHeight(!0)),K.contentHeight=K.viewportHeight,K.contentWidth=K.viewportWidth,K.isTouch||K.$content.css({height:K.contentHeight-K.spacerHeight}),K.$thumbnails.length&&(K.spacerHeight+=K.$thumbnails.outerHeight(!0)),K.spacerHeight+=10,l(),K.imageMarginTop=(K.contentHeight-K.targetImageHeight-K.spacerHeight)/2,K.imageMarginLeft=(K.contentWidth-K.targetImageWidth)/2):(0===t&&(K.viewportHeight-=K.margin+K.paddingVertical,K.viewportWidth-=K.margin+K.paddingHorizontal),K.viewportHeight-=K.metaHeight,K.thumbnails&&(K.viewportHeight-=K.thumbnailHeight),l(),K.contentHeight=K.targetImageHeight,K.contentWidth=K.targetImageWidth),K.isMobile||K.isTouch||K.$meta.css({width:K.contentWidth}),K.$image.css({height:K.targetImageHeight,width:K.targetImageWidth,marginTop:K.imageMarginTop,marginLeft:K.imageMarginLeft}),K.isMobile||(K.metaHeight=K.$meta.outerHeight(!0),K.contentHeight+=K.metaHeight),K.thumbnails&&(K.thumbnailHeight=K.$thumbnails.outerHeight(!0),K.contentHeight+=K.thumbnailHeight),t++}}function l(){var t=K.isMobile?K.contentHeight-K.spacerHeight:K.viewportHeight,i=K.isMobile?K.contentWidth:K.viewportWidth;K.isWide?(K.targetImageWidth=i,K.targetImageHeight=K.targetImageWidth*K.ratioHorizontal,K.targetImageHeight>t&&(K.targetImageHeight=t,K.targetImageWidth=K.targetImageHeight*K.ratioVertical)):(K.targetImageHeight=t,K.targetImageWidth=K.targetImageHeight*K.ratioVertical,K.targetImageWidth>i&&(K.targetImageWidth=i,K.targetImageHeight=K.targetImageWidth*K.ratioHorizontal)),(K.targetImageWidth>K.imageWidth||K.targetImageHeight>K.imageHeight)&&(K.targetImageHeight=K.imageHeight,K.targetImageWidth=K.imageWidth),(K.targetImageWidth<K.minWidth||K.targetImageHeight<K.minHeight)&&(K.targetImageWidth<K.minWidth?(K.targetImageWidth=K.minWidth,K.targetImageHeight=K.targetImageWidth*K.ratioHorizontal):(K.targetImageHeight=K.minHeight,K.targetImageWidth=K.targetImageHeight*K.ratioVertical))}function C(t){var i=z(t),e=t.split("?"),t="&origin="+encodeURIComponent(window.location.protocol+"//"+window.location.hostname);i?(2<=e.length&&(i+="?"+e.slice(1)[0].trim()),K.$videoWrapper=$('<div class="'+q.video_wrapper+'"></div>'),K.$video=$('<iframe class="'+q.video+'" frameborder="0" seamless="seamless" allowfullscreen></iframe>'),K.$video.attr("src",i+"&enablejsapi=1"+t).addClass(q.video).prependTo(K.$videoWrapper),K.$content.prepend(K.$videoWrapper),r(),o()):c()}function r(){K.windowHeight=K.viewportHeight=H.windowHeight-K.mobilePaddingVertical-K.paddingVertical,K.windowWidth=K.viewportWidth=H.windowWidth-K.mobilePaddingHorizontal-K.paddingHorizontal,K.videoMarginTop=0,K.videoMarginLeft=0,K.isMobile?(K.isTouch?(K.$controlBox.css({width:H.windowWidth}),K.spacerHeight=K.$controls.outerHeight(!0)+10):(K.$tools.css({width:H.windowWidth}),K.spacerHeight=K.$tools.outerHeight(!0),K.spacerHeight+=K.$thumbnails.outerHeight(!0)+10),K.viewportHeight-=K.spacerHeight,K.targetVideoWidth=K.viewportWidth,K.targetVideoHeight=K.targetVideoWidth*K.videoRatio,K.targetVideoHeight>K.viewportHeight&&(K.targetVideoHeight=K.viewportHeight,K.targetVideoWidth=K.targetVideoHeight/K.videoRatio),K.videoMarginTop=(K.viewportHeight-K.targetVideoHeight)/2,K.videoMarginLeft=(K.viewportWidth-K.targetVideoWidth)/2):(K.viewportHeight=K.windowHeight-K.margin,K.viewportWidth=K.windowWidth-K.margin,K.targetVideoWidth=K.videoWidth>K.viewportWidth?K.viewportWidth:K.videoWidth,K.targetVideoWidth<K.minWidth&&(K.targetVideoWidth=K.minWidth),K.targetVideoHeight=K.targetVideoWidth*K.videoRatio,K.contentHeight=K.targetVideoHeight,K.contentWidth=K.targetVideoWidth),K.isMobile||K.isTouch||K.$meta.css({width:K.contentWidth}),K.$videoWrapper.css({height:K.targetVideoHeight,width:K.targetVideoWidth,marginTop:K.videoMarginTop,marginLeft:K.videoMarginLeft}),K.isMobile||(K.metaHeight=K.$meta.outerHeight(!0),K.contentHeight+=K.metaHeight),K.thumbnails&&(K.thumbnailHeight=K.$thumbnails.outerHeight(!0),K.contentHeight+=K.thumbnailHeight)}function _(t){R.killEvent(t);t=$(t.currentTarget);K.isAnimating||t.hasClass(q.control_disabled)||(K.isAnimating=!0,i(),K.gallery.index+=t.hasClass(q.control_next)?1:-1,K.gallery.index>K.gallery.total&&(K.gallery.index=K.infinite?0:K.gallery.total),K.gallery.index<0&&(K.gallery.index=K.infinite?K.gallery.total:0),g(),K.$lightbox.addClass(q.animating),K.$content.fsTransition({property:"opacity"},s),K.$lightbox.addClass(q.loading))}function I(t){R.killEvent(t);t=$(t.currentTarget);K.isAnimating||t.hasClass(q.active)||(K.isAnimating=!0,i(),K.gallery.index=K.$thumbnailItems.index(t),g(),K.$lightbox.addClass(q.animating),K.$content.fsTransition({property:"opacity"},s),K.$lightbox.addClass(q.loading))}function g(){var t;K.thumbnails&&(t=K.$thumbnailItems.eq(K.gallery.index),K.$thumbnailItems.removeClass(q.active),t.addClass(q.active))}function s(){var t,i;"element"==K.type?void 0!==K.$inlineTarget&&K.$inlineTarget.length&&d():(void 0!==K.$imageContainer&&(K.isViewer&&K.$imageContainer.fsViewer("destroy"),K.$imageContainer.remove()),void 0!==K.$videoWrapper&&K.$videoWrapper.remove()),K.$el=K.gallery.$items.eq(K.gallery.index),"element"==K.type?(i=K.$el[0].href,t=K.$el&&K.$el[0].hash&&K.$el[0].hash||"","http"===i.substr(0,4)&&!t?j(i):M(t)):(K.$caption.html(K.formatter.call(K.$el,K)),K.$position.find(P.position_current).html(K.gallery.index+1),z(i=K.$el[0].href)?(K.type="video",C(i)):(K.type="image",x(i))),V()}function V(){K.$controls.removeClass(q.control_disabled),K.infinite||(0===K.gallery.index&&K.$controls.filter(P.control_previous).addClass(q.control_disabled),K.gallery.index===K.gallery.total&&K.$controls.filter(P.control_next).addClass(q.control_disabled))}function T(t){!K.gallery.active||37!==t.keyCode&&39!==t.keyCode?27===t.keyCode&&K.$close.trigger(E.click):(R.killEvent(t),K.$controls.filter(37===t.keyCode?P.control_previous:P.control_next).trigger(E.click))}function M(t){K.$inlineTarget=$(t),K.$inlineContents=K.$inlineTarget.children().detach(),k(K.$inlineContents)}function d(){K.$inlineTarget.append(K.$inlineContents.detach())}function j(t){t+=-1<t.indexOf("?")?"&"+K.requestKey+"=true":"?"+K.requestKey+"=true",k($('<iframe class="'+q.iframe+'" src="'+t+'"></iframe>'))}function k(t){K.$content.append(t),h(t),o()}function h(t){K.windowHeight=H.windowHeight-K.mobilePaddingVertical-K.paddingVertical,K.windowWidth=H.windowWidth-K.mobilePaddingHorizontal-K.paddingHorizontal,K.objectHeight=t.outerHeight(!0),K.objectWidth=t.outerWidth(!0),K.targetHeight=K.targetHeight||(K.$el?K.$el.data(O+"-height"):null),K.targetWidth=K.targetWidth||(K.$el?K.$el.data(O+"-width"):null),K.maxHeight=K.windowHeight<0?K.minHeight:K.windowHeight,K.isIframe=t.is("iframe"),K.objectMarginTop=0,K.objectMarginLeft=0,K.isMobile||(K.windowHeight-=K.margin,K.windowWidth-=K.margin),K.contentHeight=K.targetHeight||(K.isIframe||K.isMobile?K.windowHeight:K.objectHeight),K.contentWidth=K.targetWidth||(K.isIframe||K.isMobile?K.windowWidth:K.objectWidth),(K.isIframe||K.isObject)&&K.isMobile?(K.contentHeight=K.windowHeight,K.contentWidth=K.windowWidth):K.isObject&&(K.contentHeight=K.contentHeight>K.windowHeight?K.windowHeight:K.contentHeight,K.contentWidth=K.contentWidth>K.windowWidth?K.windowWidth:K.contentWidth),K.isMobile||(K.contentHeight>K.maxHeight&&(K.contentHeight=K.maxHeight),K.contentWidth>K.maxWidth&&(K.contentWidth=K.maxWidth))}function c(){var t=$('<div class="'+q.error+'"><p>Error Loading Resource</p></div>');K.type="element",K.$tools.remove(),K.$image.off(E.namespace),k(t),A.trigger(E.error)}function z(t){var i,e,o=K.videoFormatter;for(e in o)if(o.hasOwnProperty(e)&&null!==(i=t.match(o[e].pattern)))return o[e].format.call(K,i);return!1}function L(t){var i=t.target;$.contains(K.$lightbox[0],i)||i===K.$lightbox[0]||i===K.$overlay[0]||(R.killEvent(t),K.$lightbox.focus())}var m=H.Plugin("lightbox",{widget:!0,defaults:{customClass:"",fileTypes:/\.(jpg|sjpg|jpeg|png|gif)/i,fixed:!1,formatter:function(){var t=this.attr("title");return(t=!(void 0===t||!t)&&t.replace(/^\s+|\s+$/g,""))?'<p class="caption">'+t+"</p>":""},infinite:!1,labels:{close:"Close",count:"of",next:"Next",previous:"Previous",captionClosed:"View Caption",captionOpen:"Close Caption",thumbnailsClosed:"View Thumbnails",thumbnailsOpen:"Close Thumbnails",lightbox:"Lightbox {guid}"},margin:50,maxHeight:1e4,maxWidth:1e4,minHeight:100,minWidth:100,mobile:!1,overlay:!1,retina:!1,requestKey:"fs-lightbox",theme:"fs-light",thumbnails:!1,top:0,videoFormatter:{youtube:{pattern:/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/ ]{11})/,format:function(t){return"//www.youtube.com/embed/"+t[1]}},vimeo:{pattern:/(?:www\.|player\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/([^\/]*)\/videos\/|album\/(\d+)\/video\/|video\/|)(\d+)(?:$|\/|\?)/,format:function(t){return"//player.vimeo.com/video/"+t[3]}}},videoRatio:.5625,videoWidth:800,viewer:!0},classes:["loading","animating","fixed","mobile","touch","inline","iframed","open","ready","overlay","close","loading_icon","container","content","image","image_container","video","video_wrapper","tools","meta","meta_content","controls","control","control_previous","control_next","control_disabled","position","position_current","position_total","toggle","caption_toggle","caption","caption_open","thumbnailed","thumbnails_open","thumbnail_toggle","thumbnails","thumbnail_container","thumbnail_item","active","has_controls","has_caption","iframe","error","active","lock"],events:{open:"open",close:"close"},methods:{_construct:function(t){this.on(E.click,t,e),t=this.data(O+"-gallery"),!F&&v&&t===v&&(F=!0,this.trigger(E.click))},_destruct:function(t){f(),this.off(E.namespace)},_resize:function(){K&&t()},resize:t},utilities:{_initialize:function(t,i){t instanceof $&&e.apply(u,[{data:$.extend(!0,{},{$object:t},p,i||{})}])},close:f}}),O=m.namespace,p=m.defaults,P=m.classes,q=P.raw,E=m.events,R=m.functions,u=H.window,A=H.$window,B=null,b=null,v=!1,F=!1,K=null;H.Ready(function(){B=H.$body,b=$("html, body"),v=H.window.location.hash.replace("#","")})});