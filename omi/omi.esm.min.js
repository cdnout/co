function getGlobal(){return"object"==typeof global&&global&&global.Math===Math&&global.Array===Array?global:self||window||global||function(){return this}()}var options={store:null,root:getGlobal(),mapping:{},isMultiStore:!1,ignoreAttrs:!1};function cssToDom(e){var t=document.createElement("style");return t.textContent=e,t}function camelCase(e){return e.replace(/-(\w)/g,function(e,t){return t.toUpperCase()})}function Fragment(e){return e.children}function extend(e,t){for(var r in t)e[r]=t[r];return e}function applyRef(e,t){null!=e&&("function"==typeof e?e(t):e.current=t)}!function(){if(void 0!==window.Reflect&&void 0!==window.customElements&&!window.customElements.hasOwnProperty("polyfillWrapFlushCallback")){var e=HTMLElement;window.HTMLElement=function(){return Reflect.construct(e,[],this.constructor)},HTMLElement.prototype=e.prototype,HTMLElement.prototype.constructor=HTMLElement,Object.setPrototypeOf(HTMLElement,e)}}();var defer="function"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout;function isArray(e){return"[object Array]"===Object.prototype.toString.call(e)}function getUse(e,t,r,o){var n=[];return t.forEach(function(t,r){if("string"==typeof t)n[r]=getTargetByPath(e,t);else{var o=Object.keys(t)[0],s=t[o];if("string"==typeof s)n[r]=getTargetByPath(e,s);else{var i=s[0];if("string"==typeof i){var a=getTargetByPath(e,i);n[r]=s[1]?s[1](a):a}else{var p=[];i.forEach(function(t){p.push(getTargetByPath(e,t))}),n[r]=s[1].apply(null,p)}}n[o]=n[r]}}),r&&(r[o]=n),n}function pathToArr(e){return"string"==typeof e&&e?e.replace(/]/g,"").replace(/\[/g,".").split("."):[]}function getTargetByPath(e,t){for(var r=pathToArr(t),o=e,n=0,s=r.length;n<s;n++)o=o[r[n]];return o}var hyphenateRE=/\B([A-Z])/g;function hyphenate(e){return e.replace(hyphenateRE,"-$1").toLowerCase()}function getValByPath(e,t){return pathToArr(e).forEach(function(e){t=t[e]}),t}function getPath(e,t,r){var o={};return e.forEach(function(e){if("string"==typeof e)o[e]=!0;else{var t=e[Object.keys(e)[0]];"string"==typeof t?o[t]=!0:"string"==typeof t[0]?o[t[0]]=!0:t[0].forEach(function(e){return o[e]=!0})}}),t&&(t[r]=o),o}function removeItem(e,t){if(t)for(var r=0,o=t.length;r<o;r++)if(t[r]===e){t.splice(r,1);break}}var stack=[];function h(e,t){var r,o,n,s,i=[];for(s=arguments.length;s-- >2;)stack.push(arguments[s]);for(t&&null!=t.children&&(stack.length||stack.push(t.children),delete t.children);stack.length;)if((o=stack.pop())&&void 0!==o.pop)for(s=o.length;s--;)stack.push(o[s]);else"boolean"==typeof o&&(o=null),(n="function"!=typeof e)&&(null==o?o="":"number"==typeof o?o=String(o):"string"!=typeof o&&(n=!1)),n&&r?i[i.length-1]+=o:0===i.length?i=[o]:i.push(o),r=n;if(e===Fragment)return i;var a={nodeName:e,children:i,attributes:null==t?void 0:t,key:null==t?void 0:t.key};return void 0!==options.vnode&&options.vnode(a),a}var IS_NON_DIMENSIONAL=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i;function isSameNodeType(e,t,r){return"string"==typeof t||"number"==typeof t?void 0!==e.splitText:"string"==typeof t.nodeName?!e._componentConstructor&&isNamedNode(e,t.nodeName):"function"==typeof t.nodeName?options.mapping[e.nodeName.toLowerCase()]===t.nodeName:r||e._componentConstructor===t.nodeName}function isNamedNode(e,t){return e.normalizedNodeName===t||e.nodeName.toLowerCase()===t.toLowerCase()}var extension={};function extend$1(e,t){extension["o-"+e]=t}function set(e,t,r){for(var o=pathToArr(t),n=e,s=0,i=o.length;s<i;s++)s===i-1?n[o[s]]=r:n=n[o[s]]}function get(e,t){for(var r=pathToArr(t),o=e,n=0,s=r.length;n<s;n++)o=o[r[n]];return o}function eventProxy(e){return this._listeners[e.type](e)}function bind(e,t,r){e._listeners=e._listeners||{},e._listeners[t]=r,e.addEventListener(t,eventProxy)}function unbind(e,t){e.removeEventListener(t,eventProxy)}function createNode(e,t){var r=t?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e);return r.normalizedNodeName=e,r}function removeNode(e){var t=e.parentNode;t&&t.removeChild(e)}function setAccessor(e,t,r,o,n,s){if("className"===t&&(t="class"),"o"==t[0]&&"-"==t[1])extension[t]&&extension[t](e,o,s);else if("key"===t);else if("ref"===t)applyRef(r,null),applyRef(o,e);else if("class"!==t||n)if("style"===t){if(o&&"string"!=typeof o&&"string"!=typeof r||(e.style.cssText=o||""),o&&"object"==typeof o){if("string"!=typeof r)for(var i in r)i in o||(e.style[i]="");for(var i in o)e.style[i]="number"==typeof o[i]&&!1===IS_NON_DIMENSIONAL.test(i)?o[i]+"px":o[i]}}else if("dangerouslySetInnerHTML"===t)o&&(e.innerHTML=o.__html||"");else if("o"==t[0]&&"n"==t[1]){var a=t!==(t=t.replace(/Capture$/,"")),p=t.toLowerCase();t=(p in e?p:t).slice(2),o?r||(e.addEventListener(t,eventProxy$1,a),"tap"==t&&(e.addEventListener("touchstart",touchStart,a),e.addEventListener("touchend",touchEnd,a))):(e.removeEventListener(t,eventProxy$1,a),"tap"==t&&(e.removeEventListener("touchstart",touchStart,a),e.removeEventListener("touchend",touchEnd,a))),(e._listeners||(e._listeners={}))[t]=o}else if("INPUT"===e.nodeName&&"value"===t)e[t]=null==o?"":o;else if("list"!==t&&"type"!==t&&"css"!==t&&!n&&t in e&&""!==o){try{e[t]=null==o?"":o}catch(e){}null!=o&&!1!==o||"spellcheck"==t||(e.pureRemoveAttribute?e.pureRemoveAttribute(t):e.removeAttribute(t))}else{var l=n&&t!==(t=t.replace(/^xlink:?/,""));null==o||!1===o?l?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.pureRemoveAttribute?e.pureRemoveAttribute(t):e.removeAttribute(t):"function"!=typeof o&&(l?e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),o):e.pureSetAttribute?e.pureSetAttribute(t,o):e.setAttribute(t,o))}else e.className=o||""}function eventProxy$1(e){return this._listeners[e.type](options.event&&options.event(e)||e)}function touchStart(e){this.___touchX=e.touches[0].pageX,this.___touchY=e.touches[0].pageY,this.___scrollTop=document.body.scrollTop}function touchEnd(e){Math.abs(e.changedTouches[0].pageX-this.___touchX)<30&&Math.abs(e.changedTouches[0].pageY-this.___touchY)<30&&Math.abs(document.body.scrollTop-this.___scrollTop)<30&&this.dispatchEvent(new CustomEvent("tap",{detail:e}))}var diffLevel=0,isSvgMode=!1,hydrating=!1;function diff(e,t,r,o,n){if(e||t){var s;if(diffLevel++||(isSvgMode=null!=r&&void 0!==r.ownerSVGElement,hydrating=null!=e&&!("prevProps"in e)),t&&t.nodeName===Fragment&&(t=t.children),isArray(t))if(r){var i=r.querySelectorAll("style");i.forEach(function(e){r.removeChild(e)}),innerDiffNode(r,t,hydrating,o,n);for(var a=i.length-1;a>=0;a--)r.firstChild?r.insertBefore(i[a],r.firstChild):r.appendChild(style[a])}else s=[],t.forEach(function(t,r){var i=idiff(0===r?e:null,t,o,n);s.push(i)});else isArray(e)?e.forEach(function(e,r){0===r?s=idiff(e,t,o,n):recollectNodeTree(e,!1)}):s=idiff(e,t,o,n),r&&s.parentNode!==r&&r.appendChild(s);return--diffLevel||(hydrating=!1),s}}function idiff(e,t,r,o){e&&t&&e.props&&(e.props.children=t.children);var n=e,s=isSvgMode;if(null!=t&&"boolean"!=typeof t||(t=""),"string"==typeof t||"number"==typeof t)return e&&void 0!==e.splitText&&e.parentNode&&(!e._component||r)?e.nodeValue!=t&&(e.nodeValue=t):(n=document.createTextNode(t),e&&(e.parentNode&&e.parentNode.replaceChild(n,e),recollectNodeTree(e,!0))),n.prevProps=!0,n;var i=t.nodeName;if("function"==typeof i)for(var a in options.mapping)if(options.mapping[a]===i){i=a,t.nodeName=a;break}if(isSvgMode="svg"===i||"foreignObject"!==i&&isSvgMode,i=String(i),(!e||!isNamedNode(e,i))&&(n=createNode(i,isSvgMode),e)){for(;e.firstChild;)n.appendChild(e.firstChild);e.parentNode&&e.parentNode.replaceChild(n,e),recollectNodeTree(e,!0)}var p=n.firstChild,l=n.prevProps,c=t.children;if(null==l){l=n.prevProps={};for(var u=n.attributes,f=u.length;f--;)l[u[f].name]=u[f].value}return!hydrating&&c&&1===c.length&&"string"==typeof c[0]&&null!=p&&void 0!==p.splitText&&null==p.nextSibling?p.nodeValue!=c[0]&&(p.nodeValue=c[0]):(c&&c.length||null!=p)&&("WeElement"==n.constructor.is&&n.constructor.noSlot||innerDiffNode(n,c,hydrating||null!=l.dangerouslySetInnerHTML,r,o)),diffAttributes(n,t.attributes,l,r,o),n.props&&(n.props.children=t.children),isSvgMode=s,n}function innerDiffNode(e,t,r,o,n){var s,i,a,p,l,c=e.childNodes,u=[],f={},h=0,d=0,y=c.length,v=0,m=t?t.length:0;if(0!==y)for(var g=0;g<y;g++){var b=c[g],P=b.prevProps;null!=(N=m&&P?b._component?b._component.__key:P.key:null)?(h++,f[N]=b):(P||(void 0!==b.splitText?!r||b.nodeValue.trim():r))&&(u[v++]=b)}if(0!==m)for(g=0;g<m;g++){var N;if(l=null,null!=(N=(p=t[g]).key))h&&void 0!==f[N]&&(l=f[N],f[N]=void 0,h--);else if(!l&&d<v)for(s=d;s<v;s++)if(void 0!==u[s]&&isSameNodeType(i=u[s],p,r)){l=i,u[s]=void 0,s===v-1&&v--,s===d&&d++;break}l=idiff(l,p,o,n),a=c[g],l&&l!==e&&l!==a&&(null==a?e.appendChild(l):l===a.nextSibling?removeNode(a):e.insertBefore(l,a))}if(h)for(var g in f)void 0!==f[g]&&recollectNodeTree(f[g],!1);for(;d<=v;)void 0!==(l=u[v--])&&recollectNodeTree(l,!1)}function recollectNodeTree(e,t){null!=e.prevProps&&e.prevProps.ref&&("function"==typeof e.prevProps.ref?e.prevProps.ref(null):e.prevProps.ref.current&&(e.prevProps.ref.current=null)),!1!==t&&null!=e.prevProps||removeNode(e),removeChildren(e)}function removeChildren(e){for(e=e.lastChild;e;){var t=e.previousSibling;recollectNodeTree(e,!0),e=t}}function diffAttributes(e,t,r,o,n){var s,i,a=e.update;for(s in e.receiveProps&&(i=Object.assign({},r)),r)t&&null!=t[s]||null==r[s]||(setAccessor(e,s,r[s],r[s]=void 0,isSvgMode,o),a&&delete e.props[s]);for(s in t)if(a&&"object"==typeof t[s]&&"ref"!==s){"style"===s&&setAccessor(e,s,r[s],r[s]=t[s],isSvgMode,o);var p=camelCase(s);e.props[p]=r[p]=t[s]}else if(!("children"===s||s in r&&t[s]===("value"===s||"checked"===s?e[s]:r[s])))if(setAccessor(e,s,r[s],t[s],isSvgMode,o),a){var l=camelCase(s);e.props[l]=r[l]=t[s]}else r[s]=t[s];a&&!n&&e.parentNode&&!1!==e.receiveProps(e.props,i)&&e.update()}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var id=0,WeElement=function(e){function t(){_classCallCheck(this,t);var r=_possibleConstructorReturn(this,e.call(this));return r.props=Object.assign({},r.constructor.defaultProps),r.elementId=id++,r.computed={},r}return _inherits(t,e),t.prototype.connectedCallback=function(){for(var e,t,r=this.parentNode;r&&!this.store;)this.store=r.store,r=r.parentNode||r.host;if(this.attrsToProps(),this.props.use&&(this.use=this.props.use),this.props.useSelf&&(this.use=this.props.useSelf),this.use){var o="function"==typeof this.use?this.use():this.use;if(options.isMultiStore){var n={},s={};for(var i in o)n[i]={},s[i]={},getPath(o[i],n,i),getUse(this.store[i].data,o[i],s,i),this.store[i].instances.push(this);this.using=s,this._updatePath=n}else this._updatePath=getPath(o),this.using=getUse(this.store.data,o),this.store.instances.push(this)}if(this.useSelf){var a="function"==typeof this.useSelf?this.useSelf():this.useSelf;if(options.isMultiStore){var p={},l={};for(var c in a)getPath(a[c],p,c),getUse(this.store[c].data,a[c],l,c),this.store[c].updateSelfInstances.push(this);this.usingSelf=l,this._updateSelfPath=p}else this._updateSelfPath=getPath(a),this.usingSelf=getUse(this.store.data,a),this.store.updateSelfInstances.push(this)}if(this.compute)for(var u in this.compute)this.computed[u]=this.compute[u].call(options.isMultiStore?this.store:this.store.data);if(this.beforeInstall(),this.install(),this.afterInstall(),this.constructor.isLightDom)e=this;else if(this.shadowRoot)for(e=this.shadowRoot;t=e.firstChild;)e.removeChild(t);else e=this.attachShadow({mode:"open"});this.constructor.css?e.appendChild(cssToDom(this.constructor.css)):this.css&&e.appendChild(cssToDom("function"==typeof this.css?this.css():this.css)),this.beforeRender(),options.afterInstall&&options.afterInstall(this);var f=this.render(this.props,this.store);this.rootNode=diff(null,f,null,this),this.rendered(),this.props.css&&(this._customStyleElement=cssToDom(this.props.css),this._customStyleContent=this.props.css,e.appendChild(this._customStyleElement)),isArray(this.rootNode)?this.rootNode.forEach(function(t){e.appendChild(t)}):this.rootNode&&e.appendChild(this.rootNode),this.installed(),this._isInstalled=!0},t.prototype.disconnectedCallback=function(){if(this.uninstall(),this._isInstalled=!1,this.store)if(options.isMultiStore)for(var e in this.store){var t=this.store[e];removeItem(this,t.instances),removeItem(this,t.updateSelfInstances)}else removeItem(this,this.store.instances),removeItem(this,this.store.updateSelfInstances)},t.prototype.update=function(e,t){this._willUpdate=!0,this.beforeUpdate(),this.beforeRender(),this._customStyleContent!=this.props.css&&(this._customStyleContent=this.props.css,this._customStyleElement.textContent=this._customStyleContent),this.attrsToProps(e);var r=this.render(this.props,this.store);this.rendered(),this.rootNode=diff(this.rootNode,r,this.constructor.isLightDom?this:this.shadowRoot,this,t),this._willUpdate=!1,this.updated()},t.prototype.forceUpdate=function(){this.update(!0)},t.prototype.updateProps=function(e){var t=this;Object.keys(e).forEach(function(r){t.props[r]=e[r],t.prevProps&&(t.prevProps[r]=e[r])}),this.forceUpdate()},t.prototype.updateSelf=function(e){this.update(e,!0)},t.prototype.removeAttribute=function(t){e.prototype.removeAttribute.call(this,t),this._isInstalled&&this.update()},t.prototype.setAttribute=function(t,r){r&&"object"==typeof r?e.prototype.setAttribute.call(this,t,JSON.stringify(r)):e.prototype.setAttribute.call(this,t,r),this._isInstalled&&this.update()},t.prototype.pureRemoveAttribute=function(t){e.prototype.removeAttribute.call(this,t)},t.prototype.pureSetAttribute=function(t,r){e.prototype.setAttribute.call(this,t,r)},t.prototype.attrsToProps=function(e){if(!options.ignoreAttrs&&!e){var t=this;t.props.css=t.getAttribute("css");var r=this.constructor.propTypes;r&&Object.keys(r).forEach(function(e){var o=r[e],n=t.getAttribute(hyphenate(e));if(null!==n)switch(o){case String:t.props[e]=n;break;case Number:t.props[e]=Number(n);break;case Boolean:t.props[e]="false"!==n&&"0"!==n;break;case Array:case Object:":"===n[0]?t.props[e]=getValByPath(n.substr(1),Omi.$):t.props[e]=JSON.parse(n.replace(/(['"])?([a-zA-Z0-9_-]+)(['"])?:([^\/])/g,'"$2":$4').replace(/'([\s\S]*?)'/g,'"$1"').replace(/,(\s*})/g,"$1"))}else t.constructor.defaultProps&&t.constructor.defaultProps.hasOwnProperty(e)?t.props[e]=t.constructor.defaultProps[e]:t.props[e]=null})}},t.prototype.fire=function(e,t){this.dispatchEvent(new CustomEvent(e,{detail:t}))},t.prototype.beforeInstall=function(){},t.prototype.install=function(){},t.prototype.afterInstall=function(){},t.prototype.installed=function(){},t.prototype.uninstall=function(){},t.prototype.beforeUpdate=function(){},t.prototype.updated=function(){},t.prototype.beforeRender=function(){},t.prototype.rendered=function(){},t.prototype.receiveProps=function(){},t}(HTMLElement);WeElement.is="WeElement";var JSONPatcherProxy=function(){function e(e){return-1==e.indexOf("/")&&-1==e.indexOf("~")?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function t(e,t){for(var r=[],o=e.parenthoodMap.get(t);o&&o.path;)r.unshift(o.path),o=e.parenthoodMap.get(o.parent);return r.length?"/"+r.join("/"):""}function r(e,t){this.isProxifyingTreeNow=!1,this.isObserving=!1,this.proxifiedObjectsMap=new Map,this.parenthoodMap=new Map,"boolean"!=typeof t&&(t=!0),this.showDetachedWarning=t,this.originalObject=e,this.cachedProxy=null,this.isRecording=!1,this.userCallback,this.resume=function(){var e=this;this.defaultCallback=function(t){e.isRecording&&e.patches.push(t),e.userCallback&&e.userCallback(t)},this.isObserving=!0}.bind(this),this.pause=function(){this.defaultCallback=function(){},this.isObserving=!1}.bind(this)}return r.deepClone=function(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}},r.escapePathComponent=e,r.prototype.generateProxyAtPath=function(r,o,n){var s=this;if(!o)return o;var i={set:function(r,o,n,i){return function(r,o,n,s){var i=t(r,o)+"/"+e(n);if(r.proxifiedObjectsMap.has(s)){var a=r.proxifiedObjectsMap.get(s);r.parenthoodMap.set(a.originalObject,{parent:o,path:n})}var p=r.proxifiedObjectsMap.get(s);p&&!r.isProxifyingTreeNow&&(p.inherited=!0),s&&"object"==typeof s&&!r.proxifiedObjectsMap.has(s)&&(r.parenthoodMap.set(s,{parent:o,path:n}),s=r._proxifyObjectTreeRecursively(o,s,n));var l={op:"remove",path:i};if(void 0===s){if(!Array.isArray(o)&&!o.hasOwnProperty(n))return Reflect.set(o,n,s);Array.isArray(o)&&(l.op="replace",l.value=null);var c=r.proxifiedObjectsMap.get(o[n]);c&&(r.parenthoodMap.delete(o[n]),r.disableTrapsForProxy(c),r.proxifiedObjectsMap.delete(c))}else{if(Array.isArray(o)&&!Number.isInteger(+n.toString()))return"length"!=n&&console.warn("JSONPatcherProxy noticed a non-integer prop was set for an array. This will not emit a patch"),Reflect.set(o,n,s);l.op="add",o.hasOwnProperty(n)&&(void 0!==o[n]||Array.isArray(o))&&(l.op="replace"),l.value=s}l.oldValue=o[n];var u=Reflect.set(o,n,s);return r.defaultCallback(l),u}(s,r,o,n)},deleteProperty:function(r,o){return function(r,o,n){if(void 0!==o[n]){var s=t(r,o)+"/"+e(n),i=r.proxifiedObjectsMap.get(o[n]);i&&(i.inherited?i.inherited=!1:(r.parenthoodMap.delete(i.originalObject),r.disableTrapsForProxy(i),r.proxifiedObjectsMap.delete(o[n])));var a=Reflect.deleteProperty(o,n);return r.defaultCallback({op:"remove",path:s}),a}}(s,r,o)}},a=Proxy.revocable(o,i);return a.trapsInstance=i,a.originalObject=o,this.parenthoodMap.set(o,{parent:r,path:n}),this.proxifiedObjectsMap.set(a.proxy,a),a.proxy},r.prototype._proxifyObjectTreeRecursively=function(t,r,o){for(var n in r)r.hasOwnProperty(n)&&r[n]instanceof Object&&(r[n]=this._proxifyObjectTreeRecursively(r,r[n],e(n)));return this.generateProxyAtPath(t,r,o)},r.prototype.proxifyObjectTree=function(e){this.pause(),this.isProxifyingTreeNow=!0;var t=this._proxifyObjectTreeRecursively(void 0,e,"");return this.isProxifyingTreeNow=!1,this.resume(),t},r.prototype.disableTrapsForProxy=function(e){if(this.showDetachedWarning){var t="You're accessing an object that is detached from the observedObject tree, see https://github.com/Palindrom/JSONPatcherProxy#detached-objects";e.trapsInstance.set=function(e,r,o){return console.warn(t),Reflect.set(e,r,o)},e.trapsInstance.set=function(e,r,o){return console.warn(t),Reflect.set(e,r,o)},e.trapsInstance.deleteProperty=function(e,t){return Reflect.deleteProperty(e,t)}}else delete e.trapsInstance.set,delete e.trapsInstance.get,delete e.trapsInstance.deleteProperty},r.prototype.observe=function(e,t){if(!e&&!t)throw new Error("You need to either record changes or pass a callback");return this.isRecording=e,this.userCallback=t,e&&(this.patches=[]),this.cachedProxy=this.proxifyObjectTree(this.originalObject),this.cachedProxy},r.prototype.generate=function(){if(!this.isRecording)throw new Error("You should set record to true to get patches later");return this.patches.splice(0,this.patches.length)},r.prototype.revoke=function(){this.proxifiedObjectsMap.forEach(function(e){e.revoke()})},r.prototype.disableTraps=function(){this.proxifiedObjectsMap.forEach(this.disableTrapsForProxy,this)},r}();function render(e,t,r){if(t="string"==typeof t?document.querySelector(t):t,r){if(r.data)observeStore(r);else for(var o in options.isMultiStore=!0,r)observeStore(r[o],o);t.store=r}return diff(null,e,t,!1)}function observeStore(e,t){e.instances=[],e.updateSelfInstances=[],extendStoreUpdate(e,t),e.data=new JSONPatcherProxy(e.data).observe(!1,function(t){var r={};if("remove"===t.op){var o=getArrayPatch(t.path,e);r[o.k]=o.v,update(r,e)}else{r[fixPath(t.path)]=t.value,update(r,e)}})}function update(e,t){t.update(e)}function extendStoreUpdate(e,t){e.update=function(r){Object.keys(r).length>0&&(this.instances.forEach(function(o){compute(o,t),t?o._updatePath&&o._updatePath[t]&&needUpdate(r,o._updatePath[t])&&(o.use&&getUse(e.data,("function"==typeof o.use?o.use():o.use)[t],o.using,t),o.update()):o._updatePath&&needUpdate(r,o._updatePath)&&(o.use&&(o.using=getUse(e.data,"function"==typeof o.use?o.use():o.use)),o.update())}),this.updateSelfInstances.forEach(function(o){compute(o,t),t?o._updateSelfPath&&o._updateSelfPath[t]&&needUpdate(r,o._updateSelfPath[t])&&(o.useSelf&&getUse(e.data,("function"==typeof o.useSelf?o.useSelf():o.useSelf)[t],o.usingSelf,t),o.updateSelf()):o._updateSelfPath&&needUpdate(r,o._updateSelfPath)&&(o.usingSelf=getUse(e.data,"function"==typeof o.useSelf?o.useSelf():o.useSelf),o.updateSelf())}),this.onChange&&this.onChange(r))}}function compute(e,t){if(e.compute)for(var r in e.compute)e.computed[r]=e.compute[r].call(t?e.store:e.store.data)}function needUpdate(e,t){for(var r in e){if(t[r])return!0;for(var o in t)if(includePath(r,o))return!0}return!1}function includePath(e,t){if(0===e.indexOf(t)){var r=e.substr(t.length,1);if("["===r||"."===r)return!0}return!1}function fixPath(e){var t="";return e.replace("/","").split("/").forEach(function(e,r){r?isNaN(Number(e))?t+="."+e:t+="["+e+"]":t+=e}),t}function getArrayPatch(e,t){for(var r=e.replace("/","").split("/"),o=t.data[r[0]],n=1,s=r.length;n<s-1;n++)o=o[r[n]];return{k:fixArrPath(e),v:o}}function fixArrPath(e){var t="",r=e.replace("/","").split("/"),o=r.length;return r.forEach(function(e,r){r<o-1&&(r?isNaN(Number(e))?t+="."+e:t+="["+e+"]":t+=e)}),t}function _classCallCheck$1(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$1(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits$1(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var storeHelpers=["use","useSelf"];function define(e,t,r){if(!options.mapping[e])if("WeElement"===t.is)customElements.define(e,t),options.mapping[e]=t;else{r="string"==typeof r?{css:r}:r||{};var o=function(e){function o(){var t,n;_classCallCheck$1(this,o);for(var s=arguments.length,i=Array(s),a=0;a<s;a++)i[a]=arguments[a];return t=n=_possibleConstructorReturn$1(this,e.call.apply(e,[this].concat(i))),n.compute=r.compute,_possibleConstructorReturn$1(n,t)}return _inherits$1(o,e),o.prototype.render=function(){return t.call(this,this)},o}(WeElement);o.css=r.css,o.propTypes=r.propTypes,o.defaultProps=r.defaultProps,o.isLightDom=r.isLightDom;var n=function(e){"function"==typeof r[e]&&(o.prototype[e]=function(){return r[e].apply(this,arguments)})};for(var s in r)n(s);storeHelpers.forEach(function(e){r[e]&&"function"!==r[e]&&(o.prototype[e]=function(){return r[e]})}),customElements.define(e,o),options.mapping[e]=o}}function tag(e,t){return function(r){r.pure=t,define(e,r)}}function cloneElement(e,t){return h(e.nodeName,extend(extend({},e.attributes),t),arguments.length>2?[].slice.call(arguments,2):e.children)}function getHost(e){for(var t=e.parentNode;t;){if(t.host)return t.host;if(t.shadowRoot&&t.shadowRoot.host)return t.shadowRoot.host;t=t.parentNode}}function rpx(e){return e.replace(/([1-9]\d*|0)(\.\d*)*rpx/g,function(e,t){return window.innerWidth*Number(t)/750+"px"})}var hasOwn={}.hasOwnProperty;function classNames(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var o=typeof r;if("string"===o||"number"===o)e.push(r);else if(Array.isArray(r)&&r.length){var n=classNames.apply(null,r);n&&e.push(n)}else if("object"===o)for(var s in r)hasOwn.call(r,s)&&r[s]&&e.push(s)}}return e.join(" ")}function extractClass(){var e=Array.prototype.slice.call(arguments,0),t=e[0],r=e.slice(1);if(t.class?(r.unshift(t.class),delete t.class):t.className&&(r.unshift(t.className),delete t.className),r.length>0)return{class:classNames.apply(null,r)}}function o(e){return JSON.stringify(e)}var n=function(e,t,r,o){for(var s=1;s<t.length;s++){var i=t[s++],a="number"==typeof i?r[i]:i;1===t[s]?o[0]=a:2===t[s]?(o[1]=o[1]||{})[t[++s]]=a:3===t[s]?o[1]=Object.assign(o[1]||{},a):o.push(t[s]?e.apply(null,n(e,a,r,["",null])):a)}return o},t=function(e){for(var t,r,o=1,n="",s="",i=[0],a=function(e){1===o&&(e||(n=n.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?i.push(e||n,0):3===o&&(e||n)?(i.push(e||n,1),o=2):2===o&&"..."===n&&e?i.push(e,3):2===o&&n&&!e?i.push(!0,2,n):4===o&&r&&(i.push(e||n,2,r),r=""),n=""},p=0;p<e.length;p++){p&&(1===o&&a(),a(p));for(var l=0;l<e[p].length;l++)t=e[p][l],1===o?"<"===t?(a(),i=[i],o=3):n+=t:s?t===s?s="":n+=t:'"'===t||"'"===t?s=t:">"===t?(a(),o=1):o&&("="===t?(o=4,r=n,n=""):"/"===t?(a(),3===o&&(i=i[0]),o=i,(i=i[0]).push(o,4),o=0):" "===t||"\t"===t||"\n"===t||"\r"===t?(a(),o=2):n+=t)}return a(),i},r="function"==typeof Map,u=r?new Map:{},e=r?function(e){var r=u.get(e);return r||u.set(e,r=t(e)),r}:function(e){for(var r="",o=0;o<e.length;o++)r+=e[o].length+"-"+e[o];return u[r]||(u[r]=t(e))};function htm(t){var r=n(this,e(t),arguments,[]);return r.length>1?r:r[0]}h.f=Fragment;var html=htm.bind(h);function createRef(){return{}}var $={},Component=WeElement,defineElement=define,elements=options.mapping,omi={tag:tag,WeElement:WeElement,Component:Component,render:render,h:h,createElement:h,options:options,define:define,cloneElement:cloneElement,getHost:getHost,rpx:rpx,defineElement:defineElement,classNames:classNames,extractClass:extractClass,createRef:createRef,html:html,htm:htm,o:o,elements:elements,$:$,extend:extend$1,get:get,set:set,bind:bind,unbind:unbind,JSONProxy:JSONPatcherProxy};options.root.Omi=omi,options.root.omi=omi,options.root.Omi.version="6.19.3";export default omi;export{tag,WeElement,Component,render,h,h as createElement,options,define,cloneElement,getHost,rpx,defineElement,classNames,extractClass,createRef,html,htm,o,elements,$,extend$1 as extend,get,set,bind,unbind,JSONPatcherProxy as JSONProxy};