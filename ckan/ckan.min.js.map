{"version":3,"sources":["ckan.js"],"names":["CKAN","isNodeModule","module","require","_","request","exports","my","Client","endpoint","apiKey","this","_getEndpoint","prototype","action","name","data","cb","indexOf","replace","options","url","type","_ajax","headers","meth","_nodeRequest","_browserRequest","datastoreQuery","queryObj","actualQuery","_normalizeQuery","err","results","fields","map","result","field","ckan2JsonTableSchemaTypes","out","total","hits","records","datastoreSqlQuery","sql","parsed","JSON","parse","message","errOut","original","code","error","info","orig","length","text","int","int4","int8","float8","timestamp","bool","jsonTableSchema2CkanTypes","string","number","integer","datetime","boolean","binary","object","array","any","datastoreResources","resource_id","match","conf","method","json","res","body","statusCode","stringify","encodeURIComponent","success","obj","obj2","obj3","status","responseText","beforeSend","req","key","setRequestHeader","jQuery","ajax","q","filters","limit","size","offset","from","sort","_tmp","sortObj","order","join","each","filter","term","parseCkanResourceUrl","parts","split","len","slice","recline","Backend","Ckan","__type__","Deferred","isUndefined","fetch","dataset","dfd","query","done","resolve","fail","reject","promise","wrapper","id"],"mappings":"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","file":"ckan.min.js"}