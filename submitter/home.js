/*!
 * Submitter v0.3.1
 * https://github.com/fengyuanchen/submitter
 *
 * Copyright (c) 2014-2016 Fengyuan Chen
 * Released under the MIT license
 *
 * Date: 2016-05-31T10:13:36.204Z
 */
!function(t){"function"==typeof define&&define.amd?define("submitter",["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){"use strict";function e(i,n){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,t.isPlainObject(n)&&n),this.disabled=!1,this.sync=!1,this.init()}var i=window.FormData,n="submitter",s="submit."+n,o="start."+n,r="done."+n,u="fail."+n,a="end."+n;e.prototype={constructor:e,init:function(){var t=this.options,e=this.$element;t.url||(t.url=e.prop("action")),t.method||(t.method=t.type||e.attr("method")||e.prop("method")),!i&&e.find(":file").length&&(this.sync=!0,this.initIframe()),this.bind()},bind:function(){var e=this.options,i=this.$element;t.isFunction(e.start)&&i.on(o,e.start),t.isFunction(e.done)&&i.on(r,e.done),t.isFunction(e.fail)&&i.on(u,e.fail),t.isFunction(e.end)&&i.on(a,e.end),i.on(s,t.proxy(this.submit,this))},unbind:function(){var e=this.options,i=this.$element;t.isFunction(e.start)&&i.off(o,e.start),t.isFunction(e.done)&&i.off(r,e.done),t.isFunction(e.fail)&&i.off(u,e.fail),t.isFunction(e.end)&&i.off(a,e.end),i.off(s,this.submit)},submit:function(e){var n,s=this.options,r=this.$element,u=t.Event(o);return this.disabled?void e.preventDefault():(r.trigger(u),u.isDefaultPrevented()?void e.preventDefault():(this.disabled=!0,r.find(":submit").prop("disabled",!0),void(this.sync||(e.preventDefault(),n=t.extend({},s,{success:t.proxy(this.success,this),error:t.proxy(this.error,this),complete:t.proxy(this.complete,this)}),i?(n.data=new i(r[0]),n.processData=!1,n.contentType=!1):n.data=r.serialize(),t.ajax(n.url,n)))))},success:function(e,i,n){var s=this.options;t.isFunction(s.success)&&s.success(e,i,n),this.$element.trigger(r,e,i)},error:function(e,i,n){var s=this.options;t.isFunction(s.error)&&s.error(e,i,n),this.$element.trigger(u,i,n)},complete:function(e,i){var n=this.options,s=this.$element;this.disabled=!1,s.find(":submit").prop("disabled",!1),t.isFunction(n.complete)&&n.complete(e,i),s.trigger(a,i)},destroy:function(){this.unbind(),this.sync&&this.$iframe.off("load").remove(),this.$element.removeData(n)},initIframe:function(){var e=n+(new Date).getTime(),i=t('<iframe name="'+e+'"></iframe>').hide(),s=this;i.one("load",function(){i.on("load",function(){var e,i;try{i=t(this).contents().find("body").text(),"json"===s.options.dataType&&(i=t.parseJSON(i))}catch(n){e=n.message}e?s.error(null,"error",e):s.success(i,"success",null),s.complete(null,"complete")})}),this.$element.attr("target",e).after(i),this.$iframe=i}},e.DEFAULTS={url:"",method:"",start:null,done:null,fail:null,end:null},e.setDefaults=function(i){t.extend(e.DEFAULTS,i)},e.other=t.fn.submitter,t.fn.submitter=function(i){var s=[].slice.call(arguments,1);return this.each(function(){var o,r=t(this),u=r.data(n);if(!u){if(/destroy/.test(i))return;r.data(n,u=new e(this,i))}"string"==typeof i&&t.isFunction(o=u[i])&&o.apply(u,s)})},t.fn.submitter.Constructor=e,t.fn.submitter.setDefaults=e.setDefaults,t.fn.submitter.noConflict=function(){return t.fn.submitter=e.other,this}});