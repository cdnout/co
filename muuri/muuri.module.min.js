var GRID_INSTANCES={},ITEM_ELEMENT_MAP="function"==typeof Map?new Map:null,ACTION_SWAP="swap",ACTION_MOVE="move",EVENT_SYNCHRONIZE="synchronize",EVENT_LAYOUT_START="layoutStart",EVENT_LAYOUT_END="layoutEnd",EVENT_LAYOUT_ABORT="layoutAbort",EVENT_ADD="add",EVENT_REMOVE="remove",EVENT_SHOW_START="showStart",EVENT_SHOW_END="showEnd",EVENT_HIDE_START="hideStart",EVENT_HIDE_END="hideEnd",EVENT_FILTER="filter",EVENT_SORT="sort",EVENT_MOVE="move",EVENT_SEND="send",EVENT_BEFORE_SEND="beforeSend",EVENT_RECEIVE="receive",EVENT_BEFORE_RECEIVE="beforeReceive",EVENT_DRAG_INIT="dragInit",EVENT_DRAG_START="dragStart",EVENT_DRAG_MOVE="dragMove",EVENT_DRAG_SCROLL="dragScroll",EVENT_DRAG_END="dragEnd",EVENT_DRAG_RELEASE_START="dragReleaseStart",EVENT_DRAG_RELEASE_END="dragReleaseEnd",EVENT_DESTROY="destroy",HAS_TOUCH_EVENTS="ontouchstart"in window,HAS_POINTER_EVENTS=!!window.PointerEvent,HAS_MS_POINTER_EVENTS=!!window.navigator.msPointerEnabled,MAX_SAFE_FLOAT32_INTEGER=16777216;function Emitter(){this._events={},this._queue=[],this._counter=0,this._clearOnEmit=!1}Emitter.prototype.on=function(t,e){if(!this._events||!t||!e)return this;var i=this._events[t];return i||(i=this._events[t]=[]),i.push(e),this},Emitter.prototype.off=function(t,e){if(!this._events||!t||!e)return this;var i,s=this._events[t];if(!s||!s.length)return this;for(;-1!==(i=s.indexOf(e));)s.splice(i,1);return this},Emitter.prototype.clear=function(t){if(!this._events||!t)return this;var e=this._events[t];return e&&(e.length=0,delete this._events[t]),this},Emitter.prototype.emit=function(t){if(!this._events||!t)return this._clearOnEmit=!1,this;var e=this._events[t];if(!e||!e.length)return this._clearOnEmit=!1,this;var i,s=this._queue,r=s.length,o=arguments.length-1;o>3&&((i=[]).push.apply(i,arguments),i.shift()),s.push.apply(s,e),this._clearOnEmit&&(e.length=0,this._clearOnEmit=!1),++this._counter;for(var n=r,a=s.length;n<a;n++)if(0===o?s[n]():1===o?s[n](arguments[1]):2===o?s[n](arguments[1],arguments[2]):3===o?s[n](arguments[1],arguments[2],arguments[3]):s[n].apply(null,i),!this._events)return this;return--this._counter,this._counter||(s.length=0),this},Emitter.prototype.burst=function(){return this._events?(this._clearOnEmit=!0,this.emit.apply(this,arguments),this):this},Emitter.prototype.countListeners=function(t){if(!this._events)return 0;var e=this._events[t];return e?e.length:0},Emitter.prototype.destroy=function(){return this._events?(this._queue.length=this._counter=0,this._events=null,this):this};var pointerout=HAS_POINTER_EVENTS?"pointerout":HAS_MS_POINTER_EVENTS?"MSPointerOut":"",waitDuration=100;function EdgeHack(t){pointerout&&(this._dragger=t,this._timeout=null,this._outEvent=null,this._isActive=!1,this._addBehaviour=this._addBehaviour.bind(this),this._removeBehaviour=this._removeBehaviour.bind(this),this._onTimeout=this._onTimeout.bind(this),this._resetData=this._resetData.bind(this),this._onStart=this._onStart.bind(this),this._onOut=this._onOut.bind(this),this._dragger.on("start",this._onStart))}EdgeHack.prototype._addBehaviour=function(){this._isActive||(this._isActive=!0,this._dragger.on("move",this._resetData),this._dragger.on("cancel",this._removeBehaviour),this._dragger.on("end",this._removeBehaviour),window.addEventListener(pointerout,this._onOut))},EdgeHack.prototype._removeBehaviour=function(){this._isActive&&(this._dragger.off("move",this._resetData),this._dragger.off("cancel",this._removeBehaviour),this._dragger.off("end",this._removeBehaviour),window.removeEventListener(pointerout,this._onOut),this._resetData(),this._isActive=!1)},EdgeHack.prototype._resetData=function(){window.clearTimeout(this._timeout),this._timeout=null,this._outEvent=null},EdgeHack.prototype._onStart=function(t){"mouse"!==t.pointerType&&this._addBehaviour()},EdgeHack.prototype._onOut=function(t){this._dragger._getTrackedTouch(t)&&(this._resetData(),this._outEvent=t,this._timeout=window.setTimeout(this._onTimeout,waitDuration))},EdgeHack.prototype._onTimeout=function(){var t=this._outEvent;this._resetData(),this._dragger.isActive()&&this._dragger._onCancel(t)},EdgeHack.prototype.destroy=function(){pointerout&&(this._dragger.off("start",this._onStart),this._removeBehaviour())};var vendorPrefixes=["","webkit","moz","ms","o","Webkit","Moz","MS","O"],cache={};function getPrefixedPropName(t,e){var i=cache[e]||"";if(i)return i;for(var s=e[0].toUpperCase()+e.slice(1),r=0;r<vendorPrefixes.length;){if((i=vendorPrefixes[r]?vendorPrefixes[r]+s:e)in t)return cache[e]=i,i;++r}return""}function hasPassiveEvents(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassive",null,e),window.removeEventListener("testPassive",null,e)}catch(t){}return t}var ua=window.navigator.userAgent.toLowerCase(),isEdge=ua.indexOf("edge")>-1,isIE=ua.indexOf("trident")>-1,isFirefox=ua.indexOf("firefox")>-1,isAndroid=ua.indexOf("android")>-1,listenerOptions=!!hasPassiveEvents()&&{passive:!0},taProp="touchAction",taPropPrefixed=getPrefixedPropName(document.documentElement.style,taProp),taDefaultValue="auto";function Dragger(t,e){this._element=t,this._emitter=new Emitter,this._isDestroyed=!1,this._cssProps={},this._touchAction="",this._isActive=!1,this._pointerId=null,this._startTime=0,this._startX=0,this._startY=0,this._currentX=0,this._currentY=0,this._onStart=this._onStart.bind(this),this._onMove=this._onMove.bind(this),this._onCancel=this._onCancel.bind(this),this._onEnd=this._onEnd.bind(this),this._edgeHack=null,(isEdge||isIE)&&(HAS_POINTER_EVENTS||HAS_MS_POINTER_EVENTS)&&(this._edgeHack=new EdgeHack(this)),this.setCssProps(e),this._touchAction||this.setTouchAction(taDefaultValue),t.addEventListener("dragstart",Dragger._preventDefault,!1),t.addEventListener(Dragger._inputEvents.start,this._onStart,listenerOptions)}Dragger._pointerEvents={start:"pointerdown",move:"pointermove",cancel:"pointercancel",end:"pointerup"},Dragger._msPointerEvents={start:"MSPointerDown",move:"MSPointerMove",cancel:"MSPointerCancel",end:"MSPointerUp"},Dragger._touchEvents={start:"touchstart",move:"touchmove",cancel:"touchcancel",end:"touchend"},Dragger._mouseEvents={start:"mousedown",move:"mousemove",cancel:"",end:"mouseup"},Dragger._inputEvents=HAS_TOUCH_EVENTS?Dragger._touchEvents:HAS_POINTER_EVENTS?Dragger._pointerEvents:HAS_MS_POINTER_EVENTS?Dragger._msPointerEvents:Dragger._mouseEvents,Dragger._emitter=new Emitter,Dragger._emitterEvents={start:"start",move:"move",end:"end",cancel:"cancel"},Dragger._activeInstances=[],Dragger._preventDefault=function(t){t.preventDefault&&!1!==t.cancelable&&t.preventDefault()},Dragger._activateInstance=function(t){Dragger._activeInstances.indexOf(t)>-1||(Dragger._activeInstances.push(t),Dragger._emitter.on(Dragger._emitterEvents.move,t._onMove),Dragger._emitter.on(Dragger._emitterEvents.cancel,t._onCancel),Dragger._emitter.on(Dragger._emitterEvents.end,t._onEnd),1===Dragger._activeInstances.length&&Dragger._bindListeners())},Dragger._deactivateInstance=function(t){var e=Dragger._activeInstances.indexOf(t);-1!==e&&(Dragger._activeInstances.splice(e,1),Dragger._emitter.off(Dragger._emitterEvents.move,t._onMove),Dragger._emitter.off(Dragger._emitterEvents.cancel,t._onCancel),Dragger._emitter.off(Dragger._emitterEvents.end,t._onEnd),Dragger._activeInstances.length||Dragger._unbindListeners())},Dragger._bindListeners=function(){window.addEventListener(Dragger._inputEvents.move,Dragger._onMove,listenerOptions),window.addEventListener(Dragger._inputEvents.end,Dragger._onEnd,listenerOptions),Dragger._inputEvents.cancel&&window.addEventListener(Dragger._inputEvents.cancel,Dragger._onCancel,listenerOptions)},Dragger._unbindListeners=function(){window.removeEventListener(Dragger._inputEvents.move,Dragger._onMove,listenerOptions),window.removeEventListener(Dragger._inputEvents.end,Dragger._onEnd,listenerOptions),Dragger._inputEvents.cancel&&window.removeEventListener(Dragger._inputEvents.cancel,Dragger._onCancel,listenerOptions)},Dragger._getEventPointerId=function(t){return"number"==typeof t.pointerId?t.pointerId:t.changedTouches?t.changedTouches[0]?t.changedTouches[0].identifier:null:1},Dragger._getTouchById=function(t,e){if("number"==typeof t.pointerId)return t.pointerId===e?t:null;if(t.changedTouches){for(var i=0;i<t.changedTouches.length;i++)if(t.changedTouches[i].identifier===e)return t.changedTouches[i];return null}return t},Dragger._onMove=function(t){Dragger._emitter.emit(Dragger._emitterEvents.move,t)},Dragger._onCancel=function(t){Dragger._emitter.emit(Dragger._emitterEvents.cancel,t)},Dragger._onEnd=function(t){Dragger._emitter.emit(Dragger._emitterEvents.end,t)},Dragger.prototype._reset=function(){this._pointerId=null,this._startTime=0,this._startX=0,this._startY=0,this._currentX=0,this._currentY=0,this._isActive=!1,Dragger._deactivateInstance(this)},Dragger.prototype._createEvent=function(t,e){var i=this._getTrackedTouch(e);return{type:t,srcEvent:e,distance:this.getDistance(),deltaX:this.getDeltaX(),deltaY:this.getDeltaY(),deltaTime:t===Dragger._emitterEvents.start?0:this.getDeltaTime(),isFirst:t===Dragger._emitterEvents.start,isFinal:t===Dragger._emitterEvents.end||t===Dragger._emitterEvents.cancel,pointerType:e.pointerType||(e.touches?"touch":"mouse"),identifier:this._pointerId,screenX:i.screenX,screenY:i.screenY,clientX:i.clientX,clientY:i.clientY,pageX:i.pageX,pageY:i.pageY,target:i.target}},Dragger.prototype._emit=function(t,e){this._emitter.emit(t,this._createEvent(t,e))},Dragger.prototype._getTrackedTouch=function(t){return null===this._pointerId?null:Dragger._getTouchById(t,this._pointerId)},Dragger.prototype._onStart=function(t){if(!this._isDestroyed&&null===this._pointerId&&(this._pointerId=Dragger._getEventPointerId(t),null!==this._pointerId)){var e=this._getTrackedTouch(t);this._startX=this._currentX=e.clientX,this._startY=this._currentY=e.clientY,this._startTime=Date.now(),this._isActive=!0,this._emit(Dragger._emitterEvents.start,t),this._isActive&&Dragger._activateInstance(this)}},Dragger.prototype._onMove=function(t){var e=this._getTrackedTouch(t);e&&(this._currentX=e.clientX,this._currentY=e.clientY,this._emit(Dragger._emitterEvents.move,t))},Dragger.prototype._onCancel=function(t){this._getTrackedTouch(t)&&(this._emit(Dragger._emitterEvents.cancel,t),this._reset())},Dragger.prototype._onEnd=function(t){this._getTrackedTouch(t)&&(this._emit(Dragger._emitterEvents.end,t),this._reset())},Dragger.prototype.isActive=function(){return this._isActive},Dragger.prototype.setTouchAction=function(t){this._touchAction=t,taPropPrefixed&&(this._cssProps[taPropPrefixed]="",this._element.style[taPropPrefixed]=t),HAS_TOUCH_EVENTS&&(this._element.removeEventListener(Dragger._touchEvents.start,Dragger._preventDefault,!0),(this._element.style[taPropPrefixed]!==t||isFirefox&&isAndroid)&&this._element.addEventListener(Dragger._touchEvents.start,Dragger._preventDefault,!0))},Dragger.prototype.setCssProps=function(t){if(t){var e,i,s=this._cssProps,r=this._element;for(e in s)r.style[e]=s[e],delete s[e];for(e in t)t[e]&&(e!==taProp?(i=getPrefixedPropName(r.style,e))&&(s[i]="",r.style[i]=t[e]):this.setTouchAction(t[e]))}},Dragger.prototype.getDeltaX=function(){return this._currentX-this._startX},Dragger.prototype.getDeltaY=function(){return this._currentY-this._startY},Dragger.prototype.getDistance=function(){var t=this.getDeltaX(),e=this.getDeltaY();return Math.sqrt(t*t+e*e)},Dragger.prototype.getDeltaTime=function(){return this._startTime?Date.now()-this._startTime:0},Dragger.prototype.on=function(t,e){this._emitter.on(t,e)},Dragger.prototype.off=function(t,e){this._emitter.off(t,e)},Dragger.prototype.destroy=function(){if(!this._isDestroyed){var t=this._element;for(var e in this._edgeHack&&this._edgeHack.destroy(),this._reset(),this._emitter.destroy(),t.removeEventListener(Dragger._inputEvents.start,this._onStart,listenerOptions),t.removeEventListener("dragstart",Dragger._preventDefault,!1),t.removeEventListener(Dragger._touchEvents.start,Dragger._preventDefault,!0),this._cssProps)t.style[e]=this._cssProps[e],delete this._cssProps[e];this._element=null,this._isDestroyed=!0}};var dt=1e3/60,raf=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return this.setTimeout(function(){t(Date.now())},dt)}).bind(window);function Ticker(t){this._nextStep=null,this._lanes=[],this._stepQueue=[],this._stepCallbacks={},this._step=this._step.bind(this);for(var e=0;e<t;e++)this._lanes.push(new TickerLane)}function TickerLane(){this.queue=[],this.indices={},this.callbacks={}}Ticker.prototype._step=function(t){var e,i,s,r,o,n,a=this._lanes,h=this._stepQueue,l=this._stepCallbacks;for(this._nextStep=null,e=0;e<a.length;e++){for(r=a[e].queue,o=a[e].callbacks,n=a[e].indices,i=0;i<r.length;i++)(s=r[i])&&(h.push(s),l[s]=o[s],delete o[s],delete n[s]);r.length=0}for(e=0;e<h.length;e++)l[s=h[e]]&&l[s](t),delete l[s];h.length=0},Ticker.prototype.add=function(t,e,i){this._lanes[t].add(e,i),this._nextStep||(this._nextStep=raf(this._step))},Ticker.prototype.remove=function(t,e){this._lanes[t].remove(e)},TickerLane.prototype.add=function(t,e){var i=this.indices[t];void 0!==i&&(this.queue[i]=void 0),this.queue.push(t),this.callbacks[t]=e,this.indices[t]=this.queue.length-1},TickerLane.prototype.remove=function(t){var e=this.indices[t];void 0!==e&&(this.queue[e]=void 0,delete this.callbacks[t],delete this.indices[t])};var LAYOUT_READ="layoutRead",LAYOUT_WRITE="layoutWrite",VISIBILITY_READ="visibilityRead",VISIBILITY_WRITE="visibilityWrite",DRAG_START_READ="dragStartRead",DRAG_START_WRITE="dragStartWrite",DRAG_MOVE_READ="dragMoveRead",DRAG_MOVE_WRITE="dragMoveWrite",DRAG_SCROLL_READ="dragScrollRead",DRAG_SCROLL_WRITE="dragScrollWrite",DRAG_SORT_READ="dragSortRead",PLACEHOLDER_LAYOUT_READ="placeholderLayoutRead",PLACEHOLDER_LAYOUT_WRITE="placeholderLayoutWrite",PLACEHOLDER_RESIZE_WRITE="placeholderResizeWrite",AUTO_SCROLL_READ="autoScrollRead",AUTO_SCROLL_WRITE="autoScrollWrite",DEBOUNCE_READ="debounceRead",LANE_READ=0,LANE_READ_TAIL=1,LANE_WRITE=2,ticker=new Ticker(3);function addLayoutTick(t,e,i){ticker.add(LANE_READ,LAYOUT_READ+t,e),ticker.add(LANE_WRITE,LAYOUT_WRITE+t,i)}function cancelLayoutTick(t){ticker.remove(LANE_READ,LAYOUT_READ+t),ticker.remove(LANE_WRITE,LAYOUT_WRITE+t)}function addVisibilityTick(t,e,i){ticker.add(LANE_READ,VISIBILITY_READ+t,e),ticker.add(LANE_WRITE,VISIBILITY_WRITE+t,i)}function cancelVisibilityTick(t){ticker.remove(LANE_READ,VISIBILITY_READ+t),ticker.remove(LANE_WRITE,VISIBILITY_WRITE+t)}function addDragStartTick(t,e,i){ticker.add(LANE_READ,DRAG_START_READ+t,e),ticker.add(LANE_WRITE,DRAG_START_WRITE+t,i)}function cancelDragStartTick(t){ticker.remove(LANE_READ,DRAG_START_READ+t),ticker.remove(LANE_WRITE,DRAG_START_WRITE+t)}function addDragMoveTick(t,e,i){ticker.add(LANE_READ,DRAG_MOVE_READ+t,e),ticker.add(LANE_WRITE,DRAG_MOVE_WRITE+t,i)}function cancelDragMoveTick(t){ticker.remove(LANE_READ,DRAG_MOVE_READ+t),ticker.remove(LANE_WRITE,DRAG_MOVE_WRITE+t)}function addDragScrollTick(t,e,i){ticker.add(LANE_READ,DRAG_SCROLL_READ+t,e),ticker.add(LANE_WRITE,DRAG_SCROLL_WRITE+t,i)}function cancelDragScrollTick(t){ticker.remove(LANE_READ,DRAG_SCROLL_READ+t),ticker.remove(LANE_WRITE,DRAG_SCROLL_WRITE+t)}function addDragSortTick(t,e){ticker.add(LANE_READ_TAIL,DRAG_SORT_READ+t,e)}function cancelDragSortTick(t){ticker.remove(LANE_READ_TAIL,DRAG_SORT_READ+t)}function addPlaceholderLayoutTick(t,e,i){ticker.add(LANE_READ,PLACEHOLDER_LAYOUT_READ+t,e),ticker.add(LANE_WRITE,PLACEHOLDER_LAYOUT_WRITE+t,i)}function cancelPlaceholderLayoutTick(t){ticker.remove(LANE_READ,PLACEHOLDER_LAYOUT_READ+t),ticker.remove(LANE_WRITE,PLACEHOLDER_LAYOUT_WRITE+t)}function addPlaceholderResizeTick(t,e){ticker.add(LANE_WRITE,PLACEHOLDER_RESIZE_WRITE+t,e)}function cancelPlaceholderResizeTick(t){ticker.remove(LANE_WRITE,PLACEHOLDER_RESIZE_WRITE+t)}function addAutoScrollTick(t,e){ticker.add(LANE_READ,AUTO_SCROLL_READ,t),ticker.add(LANE_WRITE,AUTO_SCROLL_WRITE,e)}function cancelAutoScrollTick(){ticker.remove(LANE_READ,AUTO_SCROLL_READ),ticker.remove(LANE_WRITE,AUTO_SCROLL_WRITE)}function addDebounceTick(t,e){ticker.add(LANE_READ,DEBOUNCE_READ+t,e)}function cancelDebounceTick(t){ticker.remove(LANE_READ,DEBOUNCE_READ+t)}var AXIS_X=1,AXIS_Y=2,FORWARD=4,BACKWARD=8,LEFT=AXIS_X|BACKWARD,RIGHT=AXIS_X|FORWARD,UP=AXIS_Y|BACKWARD,DOWN=AXIS_Y|FORWARD,functionType="function";function isFunction(t){return typeof t===functionType}var cacheTimer,isWeakMapSupported="function"==typeof WeakMap,cache$1=isWeakMapSupported?new WeakMap:null,cacheInterval=3e3,canClearCache=!0,clearCache=function(){canClearCache?(cacheTimer=window.clearInterval(cacheTimer),cache$1=isWeakMapSupported?new WeakMap:null):canClearCache=!0};function getStyle(t,e){var i=cache$1&&cache$1.get(t);return i||(i=window.getComputedStyle(t,null),cache$1&&cache$1.set(t,i)),cache$1&&(cacheTimer?canClearCache=!1:cacheTimer=window.setInterval(clearCache,cacheInterval)),i.getPropertyValue(e)}function getStyleAsFloat(t,e){return parseFloat(getStyle(t,e))||0}var DOC_ELEM=document.documentElement,BODY=document.body,THRESHOLD_DATA={value:0,offset:0};function getScrollElement(t){return t===window||t===DOC_ELEM||t===BODY?window:t}function getScrollLeft(t){return t===window?t.pageXOffset:t.scrollLeft}function getScrollTop(t){return t===window?t.pageYOffset:t.scrollTop}function getScrollLeftMax(t){return t===window?DOC_ELEM.scrollWidth-DOC_ELEM.clientWidth:t.scrollWidth-t.clientWidth}function getScrollTopMax(t){return t===window?DOC_ELEM.scrollHeight-DOC_ELEM.clientHeight:t.scrollHeight-t.clientHeight}function getContentRect(t,e){if(e=e||{},t===window)e.width=DOC_ELEM.clientWidth,e.height=DOC_ELEM.clientHeight,e.left=0,e.right=e.width,e.top=0,e.bottom=e.height;else{var i=t.getBoundingClientRect(),s=t.clientLeft||getStyleAsFloat(t,"border-left-width"),r=t.clientTop||getStyleAsFloat(t,"border-top-width");e.width=t.clientWidth,e.height=t.clientHeight,e.left=i.left+s,e.right=e.left+e.width,e.top=i.top+r,e.bottom=e.top+e.height}return e}function getItemAutoScrollSettings(t){return t._drag._getGrid()._settings.dragAutoScroll}function prepareItemScrollSync(t){t._drag&&t._drag._prepareScroll()}function applyItemScrollSync(t){if(t._drag&&t._isActive){var e=t._drag;e._scrollDiffX=e._scrollDiffY=0,t._setTranslate(e._left,e._top)}}function computeThreshold(t,e,i,s){return THRESHOLD_DATA.value=Math.min(s/2,t),THRESHOLD_DATA.offset=Math.max(0,i+2*THRESHOLD_DATA.value+s*e-s)/2,THRESHOLD_DATA}function ScrollRequest(){this.reset()}function ScrollAction(){this.element=null,this.requestX=null,this.requestY=null,this.scrollLeft=0,this.scrollTop=0}function Pool(t,e){this.pool=[],this.createItem=t,this.releaseItem=e}function isOverlapping(t,e){return!(t.left+t.width<=e.left||e.left+e.width<=t.left||t.top+t.height<=e.top||e.top+e.height<=t.top)}function getIntersectionArea(t,e){return isOverlapping(t,e)?(Math.min(t.left+t.width,e.left+e.width)-Math.max(t.left,e.left))*(Math.min(t.top+t.height,e.top+e.height)-Math.max(t.top,e.top)):0}function getIntersectionScore(t,e){var i=getIntersectionArea(t,e);return i?i/(Math.min(t.width,e.width)*Math.min(t.height,e.height))*100:0}ScrollRequest.prototype.reset=function(){this.isActive&&this.onStop(),this.item=null,this.element=null,this.isActive=!1,this.isEnding=!1,this.direction=null,this.value=null,this.maxValue=0,this.threshold=0,this.distance=0,this.speed=0,this.duration=0,this.action=null},ScrollRequest.prototype.hasReachedEnd=function(){return FORWARD&this.direction?this.value>=this.maxValue:this.value<=0},ScrollRequest.prototype.computeCurrentScrollValue=function(){return null===this.value?AXIS_X&this.direction?getScrollLeft(this.element):getScrollTop(this.element):Math.max(0,Math.min(this.value,this.maxValue))},ScrollRequest.prototype.computeNextScrollValue=function(t){var e=this.speed*(t/1e3),i=FORWARD&this.direction?this.value+e:this.value-e;return Math.max(0,Math.min(i,this.maxValue))},ScrollRequest.prototype.computeSpeed=function(){var t={direction:null,threshold:0,distance:0,value:0,maxValue:0,deltaTime:0,duration:0,isEnding:!1};return function(e){var i=this.item,s=getItemAutoScrollSettings(i).speed;return isFunction(s)?(t.direction=this.direction,t.threshold=this.threshold,t.distance=this.distance,t.value=this.value,t.maxValue=this.maxValue,t.duration=this.duration,t.speed=this.speed,t.deltaTime=e,t.isEnding=this.isEnding,s(i,this.element,t)):s}}(),ScrollRequest.prototype.tick=function(t){return this.isActive||(this.isActive=!0,this.onStart()),this.value=this.computeCurrentScrollValue(),this.speed=this.computeSpeed(t),this.value=this.computeNextScrollValue(t),this.duration+=t,this.value},ScrollRequest.prototype.onStart=function(){var t=this.item,e=getItemAutoScrollSettings(t).onStart;isFunction(e)&&e(t,this.element,this.direction)},ScrollRequest.prototype.onStop=function(){var t=this.item,e=getItemAutoScrollSettings(t).onStop;isFunction(e)&&e(t,this.element,this.direction),t._drag&&t._drag.sort()},ScrollAction.prototype.reset=function(){this.requestX&&(this.requestX.action=null),this.requestY&&(this.requestY.action=null),this.element=null,this.requestX=null,this.requestY=null,this.scrollLeft=0,this.scrollTop=0},ScrollAction.prototype.addRequest=function(t){AXIS_X&t.direction?(this.removeRequest(this.requestX),this.requestX=t):(this.removeRequest(this.requestY),this.requestY=t),t.action=this},ScrollAction.prototype.removeRequest=function(t){t&&(this.requestX===t?(this.requestX=null,t.action=null):this.requestY===t&&(this.requestY=null,t.action=null))},ScrollAction.prototype.computeScrollValues=function(){this.scrollLeft=this.requestX?this.requestX.value:getScrollLeft(this.element),this.scrollTop=this.requestY?this.requestY.value:getScrollTop(this.element)},ScrollAction.prototype.scroll=function(){var t=this.element;t&&(t.scrollTo?t.scrollTo(this.scrollLeft,this.scrollTop):(t.scrollLeft=this.scrollLeft,t.scrollTop=this.scrollTop))},Pool.prototype.pick=function(){return this.pool.pop()||this.createItem()},Pool.prototype.release=function(t){this.releaseItem(t),-1===this.pool.indexOf(t)&&this.pool.push(t)},Pool.prototype.reset=function(){this.pool.length=0};var RECT_1={width:0,height:0,left:0,right:0,top:0,bottom:0},RECT_2={width:0,height:0,left:0,right:0,top:0,bottom:0};function AutoScroller(){this._isDestroyed=!1,this._isTicking=!1,this._tickTime=0,this._tickDeltaTime=0,this._items=[],this._actions=[],this._requests={},this._requests[AXIS_X]={},this._requests[AXIS_Y]={},this._requestOverlapCheck={},this._dragPositions={},this._dragDirections={},this._overlapCheckInterval=150,this._requestPool=new Pool(function(){return new ScrollRequest},function(t){t.reset()}),this._actionPool=new Pool(function(){return new ScrollAction},function(t){t.reset()}),this._readTick=this._readTick.bind(this),this._writeTick=this._writeTick.bind(this)}AutoScroller.AXIS_X=AXIS_X,AutoScroller.AXIS_Y=AXIS_Y,AutoScroller.FORWARD=FORWARD,AutoScroller.BACKWARD=BACKWARD,AutoScroller.LEFT=LEFT,AutoScroller.RIGHT=RIGHT,AutoScroller.UP=UP,AutoScroller.DOWN=DOWN,AutoScroller.smoothSpeed=function(t,e,i){return function(s,r,o){var n=0;if(!o.isEnding)if(o.threshold>0){var a=o.threshold-Math.max(0,o.distance);n=t/o.threshold*a}else n=t;var h=o.speed,l=n;return h===n?l:h<n?(l=h+e*(o.deltaTime/1e3),Math.min(n,l)):(l=h-i*(o.deltaTime/1e3),Math.max(n,l))}},AutoScroller.pointerHandle=function(t){var e={left:0,top:0,width:0,height:0},i=t||1;return function(t,s,r,o,n,a,h){return e.left=a-.5*i,e.top=h-.5*i,e.width=i,e.height=i,e}},AutoScroller.prototype._readTick=function(t){this._isDestroyed||(t&&this._tickTime?(this._tickDeltaTime=t-this._tickTime,this._tickTime=t,this._updateRequests(),this._updateActions()):(this._tickTime=t,this._tickDeltaTime=0))},AutoScroller.prototype._writeTick=function(){this._isDestroyed||(this._applyActions(),addAutoScrollTick(this._readTick,this._writeTick))},AutoScroller.prototype._startTicking=function(){this._isTicking=!0,addAutoScrollTick(this._readTick,this._writeTick)},AutoScroller.prototype._stopTicking=function(){this._isTicking=!1,this._tickTime=0,this._tickDeltaTime=0,cancelAutoScrollTick()},AutoScroller.prototype._getItemHandleRect=function(t,e,i){var s=t._drag;if(e){var r=s._dragMoveEvent||s._dragStartEvent,o=e(t,s._clientX,s._clientY,t._width,t._height,r.clientX,r.clientY);i.left=o.left,i.top=o.top,i.width=o.width,i.height=o.height}else i.left=s._clientX,i.top=s._clientY,i.width=t._width,i.height=t._height;return i.right=i.left+i.width,i.bottom=i.top+i.height,i},AutoScroller.prototype._requestItemScroll=function(t,e,i,s,r,o,n){var a=this._requests[e],h=a[t._id];h?h.element===i&&h.direction===s||h.reset():h=this._requestPool.pick(),h.item=t,h.element=i,h.direction=s,h.threshold=r,h.distance=o,h.maxValue=n,a[t._id]=h},AutoScroller.prototype._cancelItemScroll=function(t,e){var i=this._requests[e],s=i[t._id];s&&(s.action&&s.action.removeRequest(s),this._requestPool.release(s),delete i[t._id])},AutoScroller.prototype._checkItemOverlap=function(t,e,i){var s=getItemAutoScrollSettings(t),r=isFunction(s.targets)?s.targets(t):s.targets,o=s.threshold,n=s.safeZone;if(!r||!r.length)return e&&this._cancelItemScroll(t,AXIS_X),void(i&&this._cancelItemScroll(t,AXIS_Y));var a=this._dragDirections[t._id],h=a[0],l=a[1];if(!h&&!l)return e&&this._cancelItemScroll(t,AXIS_X),void(i&&this._cancelItemScroll(t,AXIS_Y));for(var _=this._getItemHandleRect(t,s.handle,RECT_1),c=RECT_2,d=null,u=null,g=!0,f=!0,p=0,m=0,E=null,y=null,v=0,S=0,T=0,A=null,D=-1/0,I=0,R=0,L=null,N=0,O=0,b=null,P=-1/0,w=0,C=0,k=null,x=0,M=0,V=0;V<r.length;V++)d=r[V],g=e&&h&&d.axis!==AXIS_Y,f=i&&l&&d.axis!==AXIS_X,m=d.priority||0,(!g||m<D)&&(!f||m<P)||(u=getScrollElement(d.element||d),S=g?getScrollLeftMax(u):-1,T=f?getScrollTopMax(u):-1,(S||T)&&((p=getIntersectionScore(_,c=getContentRect(u,c)))<=0||(g&&m>=D&&S>0&&(m>D||p>R)&&(y=null,E=computeThreshold("number"==typeof d.threshold?d.threshold:o,n,_.width,c.width),h===RIGHT?(v=c.right+E.offset-_.right)<=E.value&&getScrollLeft(u)<S&&(y=RIGHT):h===LEFT&&(v=_.left-(c.left-E.offset))<=E.value&&getScrollLeft(u)>0&&(y=LEFT),null!==y&&(A=u,D=m,I=E.value,R=p,L=y,N=v,O=S)),f&&m>=P&&T>0&&(m>P||p>C)&&(y=null,E=computeThreshold("number"==typeof d.threshold?d.threshold:o,n,_.height,c.height),l===DOWN?(v=c.bottom+E.offset-_.bottom)<=E.value&&getScrollTop(u)<T&&(y=DOWN):l===UP&&(v=_.top-(c.top-E.offset))<=E.value&&getScrollTop(u)>0&&(y=UP),null!==y&&(b=u,P=m,w=E.value,C=p,k=y,x=v,M=T)))));e&&(A?this._requestItemScroll(t,AXIS_X,A,L,I,N,O):this._cancelItemScroll(t,AXIS_X)),i&&(b?this._requestItemScroll(t,AXIS_Y,b,k,w,x,M):this._cancelItemScroll(t,AXIS_Y))},AutoScroller.prototype._updateScrollRequest=function(t){for(var e=t.item,i=getItemAutoScrollSettings(e),s=isFunction(i.targets)?i.targets(e):i.targets,r=s&&s.length||0,o=i.threshold,n=i.safeZone,a=this._getItemHandleRect(e,i.handle,RECT_1),h=RECT_2,l=null,_=null,c=!1,d=null,u=null,g=null,f=null,p=null,m=0;m<r;m++)if((_=getScrollElement((l=s[m]).element||l))===t.element){if(c=!!(AXIS_X&t.direction)){if(l.axis===AXIS_Y)continue}else if(l.axis===AXIS_X)continue;if((f=c?getScrollLeftMax(_):getScrollTopMax(_))<=0)break;if(getIntersectionScore(a,h=getContentRect(_,h))<=0)break;if(d=computeThreshold("number"==typeof l.threshold?l.threshold:o,n,c?a.width:a.height,c?h.width:h.height),(u=t.direction===LEFT?a.left-(h.left-d.offset):t.direction===RIGHT?h.right+d.offset-a.right:t.direction===UP?a.top-(h.top-d.offset):h.bottom+d.offset-a.bottom)>d.value)break;if(g=c?getScrollLeft(_):getScrollTop(_),p=FORWARD&t.direction?g>=f:g<=0)break;return t.maxValue=f,t.threshold=d.value,t.distance=u,t.isEnding=!1,!0}return!0===i.smoothStop&&t.speed>0?(null===p&&(p=t.hasReachedEnd()),t.isEnding=!p):t.isEnding=!1,t.isEnding},AutoScroller.prototype._updateRequests=function(){for(var t,e,i,s,r,o,n,a=this._items,h=this._requests[AXIS_X],l=this._requests[AXIS_Y],_=0;_<a.length;_++)t=a[_],r=(s=this._requestOverlapCheck[t._id])>0&&this._tickTime-s>this._overlapCheckInterval,o=!0,(e=h[t._id])&&e.isActive&&(o=!this._updateScrollRequest(e))&&(r=!0,this._cancelItemScroll(t,AXIS_X)),n=!0,(i=l[t._id])&&i.isActive&&(n=!this._updateScrollRequest(i))&&(r=!0,this._cancelItemScroll(t,AXIS_Y)),r&&(this._requestOverlapCheck[t._id]=0,this._checkItemOverlap(t,o,n))},AutoScroller.prototype._requestAction=function(t,e){for(var i=this._actions,s=e===AXIS_X,r=null,o=0;o<i.length;o++){if(r=i[o],t.element===r.element){if(s?r.requestX:r.requestY)return void this._cancelItemScroll(t.item,e);break}r=null}r||(r=this._actionPool.pick()),r.element=t.element,r.addRequest(t),t.tick(this._tickDeltaTime),i.push(r)},AutoScroller.prototype._updateActions=function(){var t,e,i,s,r=this._items,o=this._requests,n=this._actions;for(s=0;s<r.length;s++)t=r[s]._id,e=o[AXIS_X][t],i=o[AXIS_Y][t],e&&this._requestAction(e,AXIS_X),i&&this._requestAction(i,AXIS_Y);for(s=0;s<n.length;s++)n[s].computeScrollValues()},AutoScroller.prototype._applyActions=function(){var t,e=this._actions,i=this._items;if(e.length){for(t=0;t<e.length;t++)e[t].scroll(),this._actionPool.release(e[t]);for(e.length=0,t=0;t<i.length;t++)prepareItemScrollSync(i[t]);for(t=0;t<i.length;t++)applyItemScrollSync(i[t])}},AutoScroller.prototype._updateDragDirection=function(t){var e=this._dragPositions[t._id],i=this._dragDirections[t._id],s=t._drag._left,r=t._drag._top;if(e.length){var o=e[0],n=e[1];i[0]=s>o?RIGHT:s<o?LEFT:i[0]||0,i[1]=r>n?DOWN:r<n?UP:i[1]||0}e[0]=s,e[1]=r},AutoScroller.prototype.addItem=function(t){this._isDestroyed||-1===this._items.indexOf(t)&&(this._items.push(t),this._requestOverlapCheck[t._id]=this._tickTime,this._dragDirections[t._id]=[0,0],this._dragPositions[t._id]=[],this._isTicking||this._startTicking())},AutoScroller.prototype.updateItem=function(t){this._isDestroyed||this._dragDirections[t._id]&&(this._updateDragDirection(t),this._requestOverlapCheck[t._id]||(this._requestOverlapCheck[t._id]=this._tickTime))},AutoScroller.prototype.removeItem=function(t){if(!this._isDestroyed){var e=this._items.indexOf(t);if(-1!==e){var i=t._id;this._requests[AXIS_X][i]&&(this._cancelItemScroll(t,AXIS_X),delete this._requests[AXIS_X][i]),this._requests[AXIS_Y][i]&&(this._cancelItemScroll(t,AXIS_Y),delete this._requests[AXIS_Y][i]),delete this._requestOverlapCheck[i],delete this._dragPositions[i],delete this._dragDirections[i],this._items.splice(e,1),this._isTicking&&!this._items.length&&this._stopTicking()}}},AutoScroller.prototype.isItemScrollingX=function(t){var e=this._requests[AXIS_X][t._id];return!(!e||!e.isActive)},AutoScroller.prototype.isItemScrollingY=function(t){var e=this._requests[AXIS_Y][t._id];return!(!e||!e.isActive)},AutoScroller.prototype.isItemScrolling=function(t){return this.isItemScrollingX(t)||this.isItemScrollingY(t)},AutoScroller.prototype.destroy=function(){if(!this._isDestroyed){for(var t=this._items.slice(0),e=0;e<t.length;e++)this.removeItem(t[e]);this._actions.length=0,this._requestPool.reset(),this._actionPool.reset(),this._isDestroyed=!0}};var ElProto=window.Element.prototype,matchesFn=ElProto.matches||ElProto.matchesSelector||ElProto.webkitMatchesSelector||ElProto.mozMatchesSelector||ElProto.msMatchesSelector||ElProto.oMatchesSelector||function(){return!1};function elementMatches(t,e){return matchesFn.call(t,e)}function addClass(t,e){e&&(t.classList?t.classList.add(e):elementMatches(t,"."+e)||(t.className+=" "+e))}var tempArray=[],numberType="number";function arrayInsert(t,e,i){var s=typeof i===numberType?i:-1;s<0&&(s=t.length-s+1),t.splice.apply(t,tempArray.concat(s,0,e)),tempArray.length=0}function normalizeArrayIndex(t,e,i){var s=Math.max(0,t.length-1+(i||0));return e>s?s:e<0?Math.max(s+e+1,0):e}function arrayMove(t,e,i){if(!(t.length<2)){var s=normalizeArrayIndex(t,e),r=normalizeArrayIndex(t,i);s!==r&&t.splice(r,0,t.splice(s,1)[0])}}function arraySwap(t,e,i){if(!(t.length<2)){var s,r=normalizeArrayIndex(t,e),o=normalizeArrayIndex(t,i);r!==o&&(s=t[r],t[r]=t[o],t[o]=s)}}var transformProp=getPrefixedPropName(document.documentElement.style,"transform")||"transform",styleNameRegEx=/([A-Z])/g,prefixRegex=/^(webkit-|moz-|ms-|o-)/,msPrefixRegex=/^(-m-s-)/;function getStyleName(t){var e=t.replace(styleNameRegEx,"-$1").toLowerCase();return e=(e=e.replace(prefixRegex,"-$1")).replace(msPrefixRegex,"-ms-")}var transformStyle=getStyleName(transformProp),transformNone="none",displayInline="inline",displayNone="none",displayStyle="display";function isTransformed(t){var e=getStyle(t,transformStyle);if(!e||e===transformNone)return!1;var i=getStyle(t,displayStyle);return i!==displayInline&&i!==displayNone}function getContainingBlock(t){for(var e=document,i=t||e;i&&i!==e&&"static"===getStyle(i,"position")&&!isTransformed(i);)i=i.parentElement||e;return i}var offsetA={},offsetB={},offsetDiff={};function getOffset(t,e){var i,s=e||{};return s.left=0,s.top=0,t===document?s:(s.left=window.pageXOffset||0,s.top=window.pageYOffset||0,t.self===window.self?s:(i=t.getBoundingClientRect(),s.left+=i.left,s.top+=i.top,s.left+=getStyleAsFloat(t,"border-left-width"),s.top+=getStyleAsFloat(t,"border-top-width"),s))}function getOffsetDiff(t,e,i){return offsetDiff.left=0,offsetDiff.top=0,t===e?offsetDiff:i&&(t=getContainingBlock(t))===(e=getContainingBlock(e))?offsetDiff:(getOffset(t,offsetA),getOffset(e,offsetB),offsetDiff.left=offsetB.left-offsetA.left,offsetDiff.top=offsetB.top-offsetA.top,offsetDiff)}function isScrollableOverflow(t){return"auto"===t||"scroll"===t||"overlay"===t}function isScrollable(t){return isScrollableOverflow(getStyle(t,"overflow"))||isScrollableOverflow(getStyle(t,"overflow-x"))||isScrollableOverflow(getStyle(t,"overflow-y"))}function getScrollableAncestors(t,e){for(e=e||[];t&&t!==document;)t.getRootNode&&t instanceof DocumentFragment?t=t.getRootNode().host:(isScrollable(t)&&e.push(t),t=t.parentNode);return e.push(window),e}var translateValue={},transformNone$1="none",rxMat3d=/^matrix3d/,rxMatTx=/([^,]*,){4}/,rxMat3dTx=/([^,]*,){12}/,rxNextItem=/[^,]*,/;function getTranslate(t){translateValue.x=0,translateValue.y=0;var e=getStyle(t,transformStyle);if(!e||e===transformNone$1)return translateValue;var i=rxMat3d.test(e),s=e.replace(i?rxMat3dTx:rxMatTx,""),r=s.replace(rxNextItem,"");return translateValue.x=parseFloat(s)||0,translateValue.y=parseFloat(r)||0,translateValue}function removeClass(t,e){e&&(t.classList?t.classList.remove(e):elementMatches(t,"."+e)&&(t.className=(" "+t.className+" ").replace(" "+e+" "," ").trim()))}var IS_IOS=/^(iPad|iPhone|iPod)/.test(window.navigator.platform)||/^Mac/.test(window.navigator.platform)&&window.navigator.maxTouchPoints>1,START_PREDICATE_INACTIVE=0,START_PREDICATE_PENDING=1,START_PREDICATE_RESOLVED=2,SCROLL_LISTENER_OPTIONS=!!hasPassiveEvents()&&{passive:!0};function ItemDrag(t){var e=t._element,i=t.getGrid(),s=i._settings;this._item=t,this._gridId=i._id,this._isDestroyed=!1,this._isMigrating=!1,this._startPredicate=isFunction(s.dragStartPredicate)?s.dragStartPredicate:ItemDrag.defaultStartPredicate,this._startPredicateState=START_PREDICATE_INACTIVE,this._startPredicateResult=void 0,this._isSortNeeded=!1,this._sortTimer=void 0,this._blockedSortIndex=null,this._sortX1=0,this._sortX2=0,this._sortY1=0,this._sortY2=0,this._reset(),this._preStartCheck=this._preStartCheck.bind(this),this._preEndCheck=this._preEndCheck.bind(this),this._onScroll=this._onScroll.bind(this),this._prepareStart=this._prepareStart.bind(this),this._applyStart=this._applyStart.bind(this),this._prepareMove=this._prepareMove.bind(this),this._applyMove=this._applyMove.bind(this),this._prepareScroll=this._prepareScroll.bind(this),this._applyScroll=this._applyScroll.bind(this),this._handleSort=this._handleSort.bind(this),this._handleSortDelayed=this._handleSortDelayed.bind(this),this._handle=s.dragHandle&&e.querySelector(s.dragHandle)||e,this._dragger=new Dragger(this._handle,s.dragCssProps),this._dragger.on("start",this._preStartCheck),this._dragger.on("move",this._preStartCheck),this._dragger.on("cancel",this._preEndCheck),this._dragger.on("end",this._preEndCheck)}function openAnchorHref(t){if("a"===t.tagName.toLowerCase()){var e=t.getAttribute("href");if(e){var i=t.getAttribute("target");i&&"_self"!==i?window.open(e,i):window.location.href=e}}}function getCurrentStyles(t,e){var i,s,r={};if(Array.isArray(e))for(s=0;s<e.length;s++)r[i=e[s]]=getStyle(t,getStyleName(i));else for(i in e)r[i]=getStyle(t,getStyleName(i));return r}ItemDrag.autoScroller=new AutoScroller,ItemDrag.defaultStartPredicate=function(t,e,i){var s=t._drag;if(e.isFirst&&e.srcEvent.button)return!1;if(!IS_IOS&&e.isFirst&&!0===e.srcEvent.isTrusted&&!1===e.srcEvent.defaultPrevented&&!1===e.srcEvent.cancelable)return!1;if(!e.isFinal){var r=s._startPredicateData;if(!r){var o=i||s._getGrid()._settings.dragStartPredicate||{};s._startPredicateData=r={distance:Math.max(o.distance,0)||0,delay:Math.max(o.delay,0)||0}}return r.delay&&(r.event=e,r.delayTimer||(r.delayTimer=window.setTimeout(function(){r.delay=0,s._resolveStartPredicate(r.event)&&(s._forceResolveStartPredicate(r.event),s._resetStartPredicate())},r.delay))),s._resolveStartPredicate(e)}s._finishStartPredicate(e)},ItemDrag.defaultSortPredicate=function(){var t={},e={},i={},s=[];return function(r,o){var n=r._drag,a=n._getGrid(),h=o&&"number"==typeof o.threshold?o.threshold:50,l=o&&o.action===ACTION_SWAP?ACTION_SWAP:ACTION_MOVE,_=o&&o.migrateAction===ACTION_SWAP?ACTION_SWAP:ACTION_MOVE;h=Math.min(Math.max(h,1),100),t.width=r._width,t.height=r._height,t.left=n._clientX,t.top=n._clientY;var c=function(i,r,o){var n,a,h,l,_,c,d,u,g,f,p=null,m=r._settings.dragSort,E=-1;if(!0===m?(s[0]=r,a=s):isFunction(m)&&(a=m.call(r,i)),!a||!Array.isArray(a)||!a.length)return p;for(f=0;f<a.length;f++)if(!(h=a[f])._isDestroyed){for(h._updateBoundingRect(),c=Math.max(0,h._left),d=Math.max(0,h._top),u=Math.min(window.innerWidth,h._right),g=Math.min(window.innerHeight,h._bottom),l=h._element.parentNode;l&&l!==document&&l!==document.documentElement&&l!==document.body;)if(l.getRootNode&&l instanceof DocumentFragment)l=l.getRootNode().host;else{if("visible"!==getStyle(l,"overflow")&&(_=l.getBoundingClientRect(),c=Math.max(c,_.left),d=Math.max(d,_.top),u=Math.min(u,_.right),g=Math.min(g,_.bottom)),"fixed"===getStyle(l,"position"))break;l=l.parentNode}c>=u||d>=g||(e.left=c,e.top=d,e.width=u-c,e.height=g-d,(n=getIntersectionScore(t,e))>o&&n>E&&(E=n,p=h))}return s.length=0,p}(r,a,h);if(!c)return null;var d,u,g,f=r.getGrid()!==c,p=0,m=0,E=0,y=-1,v=!1;for(c===a?(t.left=n._gridX+r._marginLeft,t.top=n._gridY+r._marginTop):(c._updateBorders(1,0,1,0),p=c._left+c._borderLeft,m=c._top+c._borderTop),g=0;g<c._items.length;g++)(d=c._items[g])._isActive&&d!==r&&(v=!0,e.width=d._width,e.height=d._height,e.left=d._left+d._marginLeft+p,e.top=d._top+d._marginTop+m,(u=getIntersectionScore(t,e))>E&&(y=g,E=u));return f&&E<h&&(y=v?y:0,E=h),E>=h?(i.grid=c,i.index=y,i.action=f?_:l,i):null}}(),ItemDrag.prototype.stop=function(){if(this._isActive)if(this._isMigrating)this._finishMigration();else{ItemDrag.autoScroller.removeItem(this._item);var t=this._item._id;if(cancelDragStartTick(t),cancelDragMoveTick(t),cancelDragScrollTick(t),this._cancelSort(),this._isStarted){this._unbindScrollListeners();var e=item._element,i=this._getGrid(),s=i._settings.itemDraggingClass;e.parentNode!==i._element&&(i._element.appendChild(e),item._setTranslate(this._gridX,this._gridY),s&&e.clientWidth),removeClass(e,s)}this._reset()}},ItemDrag.prototype.sort=function(t){var e=this._item;this._isActive&&e._isActive&&this._dragMoveEvent&&(!0===t?this._handleSort():addDragSortTick(e._id,this._handleSort))},ItemDrag.prototype.destroy=function(){this._isDestroyed||(this.stop(),this._dragger.destroy(),ItemDrag.autoScroller.removeItem(this._item),this._isDestroyed=!0)},ItemDrag.prototype._getGrid=function(){return GRID_INSTANCES[this._gridId]||null},ItemDrag.prototype._reset=function(){this._isActive=!1,this._isStarted=!1,this._container=null,this._containingBlock=null,this._dragStartEvent=null,this._dragMoveEvent=null,this._dragPrevMoveEvent=null,this._scrollEvent=null,this._scrollers=[],this._left=0,this._top=0,this._gridX=0,this._gridY=0,this._clientX=0,this._clientY=0,this._scrollDiffX=0,this._scrollDiffY=0,this._moveDiffX=0,this._moveDiffY=0,this._containerDiffX=0,this._containerDiffY=0},ItemDrag.prototype._bindScrollListeners=function(){var t,e,i=this._getGrid()._element,s=this._container,r=this._scrollers;if(r.length=0,getScrollableAncestors(this._item._element.parentNode,r),s!==i)for(getScrollableAncestors(i,t=[]),e=0;e<t.length;e++)r.indexOf(t[e])<0&&r.push(t[e]);for(e=0;e<r.length;e++)r[e].addEventListener("scroll",this._onScroll,SCROLL_LISTENER_OPTIONS)},ItemDrag.prototype._unbindScrollListeners=function(){var t,e=this._scrollers;for(t=0;t<e.length;t++)e[t].removeEventListener("scroll",this._onScroll,SCROLL_LISTENER_OPTIONS);e.length=0},ItemDrag.prototype._resolveStartPredicate=function(t){var e=this._startPredicateData;if(!(t.distance<e.distance||e.delay))return this._resetStartPredicate(),!0},ItemDrag.prototype._forceResolveStartPredicate=function(t){this._isDestroyed||this._startPredicateState!==START_PREDICATE_PENDING||(this._startPredicateState=START_PREDICATE_RESOLVED,this._onStart(t))},ItemDrag.prototype._finishStartPredicate=function(t){var e=this._item._element,i=Math.abs(t.deltaX)<2&&Math.abs(t.deltaY)<2&&t.deltaTime<200;this._resetStartPredicate(),i&&openAnchorHref(e)},ItemDrag.prototype._resetHeuristics=function(t,e){this._blockedSortIndex=null,this._sortX1=this._sortX2=t,this._sortY1=this._sortY2=e},ItemDrag.prototype._checkHeuristics=function(t,e){var i=this._getGrid()._settings.dragSortHeuristics,s=i.minDragDistance;if(s<=0)return this._blockedSortIndex=null,!0;var r=t-this._sortX2,o=e-this._sortY2,n=s>3&&i.minBounceBackAngle>0;if(n||(this._blockedSortIndex=null),Math.abs(r)>s||Math.abs(o)>s){if(n){var a=Math.atan2(r,o),h=Math.atan2(this._sortX2-this._sortX1,this._sortY2-this._sortY1),l=Math.atan2(Math.sin(a-h),Math.cos(a-h));Math.abs(l)>i.minBounceBackAngle&&(this._blockedSortIndex=null)}return this._sortX1=this._sortX2,this._sortY1=this._sortY2,this._sortX2=t,this._sortY2=e,!0}return!1},ItemDrag.prototype._resetStartPredicate=function(){var t=this._startPredicateData;t&&(t.delayTimer&&(t.delayTimer=window.clearTimeout(t.delayTimer)),this._startPredicateData=null)},ItemDrag.prototype._handleSort=function(){if(this._isActive){var t=this._getGrid()._settings;if(!t.dragSort||!t.dragAutoScroll.sortDuringScroll&&ItemDrag.autoScroller.isItemScrolling(this._item))return this._sortX1=this._sortX2=this._gridX,this._sortY1=this._sortY2=this._gridY,this._isSortNeeded=!0,void(void 0!==this._sortTimer&&(this._sortTimer=window.clearTimeout(this._sortTimer)));var e=this._checkHeuristics(this._gridX,this._gridY);if(this._isSortNeeded||e){var i=t.dragSortHeuristics.sortInterval;i<=0||this._isSortNeeded?(this._isSortNeeded=!1,void 0!==this._sortTimer&&(this._sortTimer=window.clearTimeout(this._sortTimer)),this._checkOverlap()):void 0===this._sortTimer&&(this._sortTimer=window.setTimeout(this._handleSortDelayed,i))}}},ItemDrag.prototype._handleSortDelayed=function(){this._isSortNeeded=!0,this._sortTimer=void 0,addDragSortTick(this._item._id,this._handleSort)},ItemDrag.prototype._cancelSort=function(){this._isSortNeeded=!1,void 0!==this._sortTimer&&(this._sortTimer=window.clearTimeout(this._sortTimer)),cancelDragSortTick(this._item._id)},ItemDrag.prototype._finishSort=function(){var t=this._getGrid()._settings.dragSort&&(this._isSortNeeded||void 0!==this._sortTimer);this._cancelSort(),t&&this._checkOverlap()},ItemDrag.prototype._checkOverlap=function(){if(this._isActive){var t,e,i,s,r,o,n,a,h=this._item,l=this._getGrid()._settings;(t=isFunction(l.dragSortPredicate)?l.dragSortPredicate(h,this._dragMoveEvent):ItemDrag.defaultSortPredicate(h,l.dragSortPredicate))&&"number"==typeof t.index&&(n=t.action===ACTION_SWAP?ACTION_SWAP:ACTION_MOVE,a=(e=h.getGrid())!==(s=t.grid||e),i=e._items.indexOf(h),r=normalizeArrayIndex(s._items,t.index,a&&n===ACTION_MOVE?1:0),(a||r!==this._blockedSortIndex)&&(a?(this._blockedSortIndex=null,o=s._items[r],e._hasListeners(EVENT_BEFORE_SEND)&&e._emit(EVENT_BEFORE_SEND,{item:h,fromGrid:e,fromIndex:i,toGrid:s,toIndex:r}),s._hasListeners(EVENT_BEFORE_RECEIVE)&&s._emit(EVENT_BEFORE_RECEIVE,{item:h,fromGrid:e,fromIndex:i,toGrid:s,toIndex:r}),h._gridId=s._id,this._isMigrating=h._gridId!==this._gridId,e._items.splice(i,1),arrayInsert(s._items,h,r),h._sortData=null,e._hasListeners(EVENT_SEND)&&e._emit(EVENT_SEND,{item:h,fromGrid:e,fromIndex:i,toGrid:s,toIndex:r}),s._hasListeners(EVENT_RECEIVE)&&s._emit(EVENT_RECEIVE,{item:h,fromGrid:e,fromIndex:i,toGrid:s,toIndex:r}),n===ACTION_SWAP&&o&&o.isActive()&&s._items.indexOf(o)>-1&&s.send(o,e,i,{appendTo:this._container||document.body,layoutSender:!1,layoutReceiver:!1}),e.layout(),s.layout()):i!==r&&(this._blockedSortIndex=i,(n===ACTION_SWAP?arraySwap:arrayMove)(e._items,i,r),e._hasListeners(EVENT_MOVE)&&e._emit(EVENT_MOVE,{item:h,fromIndex:i,toIndex:r,action:n}),e.layout())))}},ItemDrag.prototype._finishMigration=function(){var t,e,i=this._item,s=i._dragRelease,r=i._element,o=i._isActive,n=i.getGrid(),a=n._element,h=n._settings,l=h.dragContainer||a,_=this._getGrid()._settings,c=r.parentNode,d=o?_.itemVisibleClass:_.itemHiddenClass,u=o?h.itemVisibleClass:h.itemHiddenClass;this._isMigrating=!1,this.destroy(),_.itemClass!==h.itemClass&&(removeClass(r,_.itemClass),addClass(r,h.itemClass)),d!==u&&(removeClass(r,d),addClass(r,u)),l!==c&&(l.appendChild(r),e=getOffsetDiff(c,l,!0),(t=getTranslate(r)).x-=e.left,t.y-=e.top),i._refreshDimensions(),e=getOffsetDiff(l,a,!0),s._containerDiffX=e.left,s._containerDiffY=e.top,i._drag=h.dragEnabled?new ItemDrag(i):null,l!==c&&i._setTranslate(t.x,t.y),i._visibility.setStyles(o?h.visibleStyles:h.hiddenStyles),s.start()},ItemDrag.prototype._preStartCheck=function(t){this._startPredicateState===START_PREDICATE_INACTIVE&&(this._startPredicateState=START_PREDICATE_PENDING),this._startPredicateState===START_PREDICATE_PENDING?(this._startPredicateResult=this._startPredicate(this._item,t),!0===this._startPredicateResult?(this._startPredicateState=START_PREDICATE_RESOLVED,this._onStart(t)):!1===this._startPredicateResult&&(this._resetStartPredicate(t),this._dragger._reset(),this._startPredicateState=START_PREDICATE_INACTIVE)):this._startPredicateState===START_PREDICATE_RESOLVED&&this._isActive&&this._onMove(t)},ItemDrag.prototype._preEndCheck=function(t){var e=this._startPredicateState===START_PREDICATE_RESOLVED;this._startPredicate(this._item,t),this._startPredicateState=START_PREDICATE_INACTIVE,e&&this._isActive&&(this._isStarted?this._onEnd(t):this.stop())},ItemDrag.prototype._onStart=function(t){var e=this._item;e._isActive&&(this._isActive=!0,this._dragStartEvent=t,ItemDrag.autoScroller.addItem(e),addDragStartTick(e._id,this._prepareStart,this._applyStart))},ItemDrag.prototype._prepareStart=function(){if(this._isActive){var t=this._item;if(t._isActive){var e=t._element,i=this._getGrid(),s=i._settings,r=i._element,o=s.dragContainer||r,n=getContainingBlock(o),a=getTranslate(e),h=e.getBoundingClientRect(),l=o!==r;if(this._container=o,this._containingBlock=n,this._clientX=h.left,this._clientY=h.top,this._left=this._gridX=a.x,this._top=this._gridY=a.y,this._scrollDiffX=this._scrollDiffY=0,this._moveDiffX=this._moveDiffY=0,this._resetHeuristics(this._gridX,this._gridY),l){var _=getOffsetDiff(n,r);this._containerDiffX=_.left,this._containerDiffY=_.top}}}},ItemDrag.prototype._applyStart=function(){if(this._isActive){var t=this._item;if(t._isActive){var e=this._getGrid(),i=t._element,s=t._dragRelease,r=t._migrate,o=this._container!==e._element;t.isPositioning()&&t._layout.stop(!0,this._left,this._top),r._isActive&&(this._left-=r._containerDiffX,this._top-=r._containerDiffY,this._gridX-=r._containerDiffX,this._gridY-=r._containerDiffY,r.stop(!0,this._left,this._top)),t.isReleasing()&&s._reset(),e._settings.dragPlaceholder.enabled&&t._dragPlaceholder.create(),this._isStarted=!0,e._emit(EVENT_DRAG_INIT,t,this._dragStartEvent),o&&(i.parentNode===this._container?(this._gridX-=this._containerDiffX,this._gridY-=this._containerDiffY):(this._left+=this._containerDiffX,this._top+=this._containerDiffY,this._container.appendChild(i),t._setTranslate(this._left,this._top))),addClass(i,e._settings.itemDraggingClass),this._bindScrollListeners(),e._emit(EVENT_DRAG_START,t,this._dragStartEvent)}}},ItemDrag.prototype._onMove=function(t){var e=this._item;e._isActive?(this._dragMoveEvent=t,addDragMoveTick(e._id,this._prepareMove,this._applyMove),addDragSortTick(e._id,this._handleSort)):this.stop()},ItemDrag.prototype._prepareMove=function(){if(this._isActive&&this._item._isActive){var t=this._getGrid()._settings.dragAxis,e=this._dragMoveEvent,i=this._dragPrevMoveEvent||this._dragStartEvent||e;if("y"!==t){var s=e.clientX-i.clientX;this._left=this._left-this._moveDiffX+s,this._gridX=this._gridX-this._moveDiffX+s,this._clientX=this._clientX-this._moveDiffX+s,this._moveDiffX=s}if("x"!==t){var r=e.clientY-i.clientY;this._top=this._top-this._moveDiffY+r,this._gridY=this._gridY-this._moveDiffY+r,this._clientY=this._clientY-this._moveDiffY+r,this._moveDiffY=r}this._dragPrevMoveEvent=e}},ItemDrag.prototype._applyMove=function(){if(this._isActive){var t=this._item;t._isActive&&(this._moveDiffX=this._moveDiffY=0,t._setTranslate(this._left,this._top),this._getGrid()._emit(EVENT_DRAG_MOVE,t,this._dragMoveEvent),ItemDrag.autoScroller.updateItem(t))}},ItemDrag.prototype._onScroll=function(t){var e=this._item;e._isActive?(this._scrollEvent=t,addDragScrollTick(e._id,this._prepareScroll,this._applyScroll),addDragSortTick(e._id,this._handleSort)):this.stop()},ItemDrag.prototype._prepareScroll=function(){if(this._isActive){var t=this._item;if(t._isActive){var e=t._element,i=this._getGrid(),s=i._element,r=i._settings.dragAxis,o="y"!==r,n="x"!==r,a=e.getBoundingClientRect();if(this._container!==s){var h=getOffsetDiff(this._containingBlock,s);this._containerDiffX=h.left,this._containerDiffY=h.top}if(o){var l=this._clientX-this._moveDiffX-this._scrollDiffX-a.left;this._left=this._left-this._scrollDiffX+l,this._scrollDiffX=l}if(n){var _=this._clientY-this._moveDiffY-this._scrollDiffY-a.top;this._top=this._top-this._scrollDiffY+_,this._scrollDiffY=_}this._gridX=this._left-this._containerDiffX,this._gridY=this._top-this._containerDiffY}}},ItemDrag.prototype._applyScroll=function(){if(this._isActive){var t=this._item;t._isActive&&(this._scrollDiffX=this._scrollDiffY=0,t._setTranslate(this._left,this._top),this._getGrid()._emit(EVENT_DRAG_SCROLL,t,this._scrollEvent))}},ItemDrag.prototype._onEnd=function(t){var e=this._item,i=e._element,s=this._getGrid(),r=s._settings,o=e._dragRelease;e._isActive?(cancelDragStartTick(e._id),cancelDragMoveTick(e._id),cancelDragScrollTick(e._id),this._finishSort(),this._unbindScrollListeners(),o._containerDiffX=this._containerDiffX,o._containerDiffY=this._containerDiffY,this._reset(),removeClass(i,r.itemDraggingClass),ItemDrag.autoScroller.removeItem(e),s._emit(EVENT_DRAG_END,e,t),this._isMigrating?this._finishMigration():o.start()):this.stop()};var unprefixRegEx=/^(webkit|moz|ms|o|Webkit|Moz|MS|O)(?=[A-Z])/,cache$2={};function getUnprefixedPropName(t){var e=cache$2[t];return e||((e=t.replace(unprefixRegEx,""))!==t&&(e=e[0].toLowerCase()+e.slice(1)),cache$2[t]=e,e)}var nativeCode="[native code]";function isNative(t){var e=window.Symbol;return!!(t&&isFunction(e)&&isFunction(e.toString)&&e(t).toString().indexOf(nativeCode)>-1)}function setStyles(t,e){for(var i in e)t.style[i]=e[i]}var HAS_WEB_ANIMATIONS=!(!Element||!isFunction(Element.prototype.animate)),HAS_NATIVE_WEB_ANIMATIONS=!(!Element||!isNative(Element.prototype.animate));function Animator(t){this._element=t,this._animation=null,this._duration=0,this._easing="",this._callback=null,this._props=[],this._values=[],this._isDestroyed=!1,this._onFinish=this._onFinish.bind(this)}function createFrame(t,e){var i={};for(var s in t)i[e?s:getUnprefixedPropName(s)]=t[s];return i}function getTranslateString(t,e){return"translateX("+t+"px) translateY("+e+"px)"}function ItemDragPlaceholder(t){this._item=t,this._animation=new Animator,this._element=null,this._className="",this._didMigrate=!1,this._resetAfterLayout=!1,this._left=0,this._top=0,this._transX=0,this._transY=0,this._nextTransX=0,this._nextTransY=0,this._setupAnimation=this._setupAnimation.bind(this),this._startAnimation=this._startAnimation.bind(this),this._updateDimensions=this._updateDimensions.bind(this),this._onLayoutStart=this._onLayoutStart.bind(this),this._onLayoutEnd=this._onLayoutEnd.bind(this),this._onReleaseEnd=this._onReleaseEnd.bind(this),this._onMigrate=this._onMigrate.bind(this),this._onHide=this._onHide.bind(this)}function ItemDragRelease(t){this._item=t,this._isActive=!1,this._isDestroyed=!1,this._isPositioningStarted=!1,this._containerDiffX=0,this._containerDiffY=0}Animator.prototype.start=function(t,e,i){if(!this._isDestroyed){var s=this._element,r=i||{};if(!HAS_WEB_ANIMATIONS)return setStyles(s,e),this._callback=isFunction(r.onFinish)?r.onFinish:null,void this._onFinish();var o,n,a,h=this._animation,l=this._props,_=this._values,c=r.duration||300,d=r.easing||"ease",u=!1;if(h&&(n=0,c===this._duration&&d===this._easing||(u=!0),!u)){for(o in e)if(++n,-1===(a=l.indexOf(o))||e[o]!==_[a]){u=!0;break}n!==l.length&&(u=!0)}if(u&&h.cancel(),this._callback=isFunction(r.onFinish)?r.onFinish:null,!h||u){for(o in l.length=_.length=0,e)l.push(o),_.push(e[o]);this._duration=c,this._easing=d,this._animation=s.animate([createFrame(t,HAS_NATIVE_WEB_ANIMATIONS),createFrame(e,HAS_NATIVE_WEB_ANIMATIONS)],{duration:c,easing:d}),this._animation.onfinish=this._onFinish,setStyles(s,e)}}},Animator.prototype.stop=function(){!this._isDestroyed&&this._animation&&(this._animation.cancel(),this._animation=this._callback=null,this._props.length=this._values.length=0)},Animator.prototype.getCurrentStyles=function(){return getCurrentStyles(element,currentProps)},Animator.prototype.isAnimating=function(){return!!this._animation},Animator.prototype.destroy=function(){this._isDestroyed||(this.stop(),this._element=null,this._isDestroyed=!0)},Animator.prototype._onFinish=function(){var t=this._callback;this._animation=this._callback=null,this._props.length=this._values.length=0,t&&t()},ItemDragPlaceholder.prototype._updateDimensions=function(){this.isActive()&&setStyles(this._element,{width:this._item._width+"px",height:this._item._height+"px"})},ItemDragPlaceholder.prototype._onLayoutStart=function(t,e){var i=this._item;if(-1!==t.indexOf(i)){var s=i._left,r=i._top,o=this._left,n=this._top;if(this._left=s,this._top=r,e||this._didMigrate||o!==s||n!==r){var a=s+i._marginLeft,h=r+i._marginTop,l=i.getGrid();if(!(!e&&l._settings.layoutDuration>0)||this._didMigrate)return cancelPlaceholderLayoutTick(i._id),this._element.style[transformProp]=getTranslateString(a,h),this._animation.stop(),void(this._didMigrate&&(l.getElement().appendChild(this._element),this._didMigrate=!1));this._nextTransX=a,this._nextTransY=h,addPlaceholderLayoutTick(i._id,this._setupAnimation,this._startAnimation)}}else this.reset()},ItemDragPlaceholder.prototype._setupAnimation=function(){if(this.isActive()){var t=getTranslate(this._element);this._transX=t.x,this._transY=t.y}},ItemDragPlaceholder.prototype._startAnimation=function(){if(this.isActive()){var t=this._animation,e=this._transX,i=this._transY,s=this._nextTransX,r=this._nextTransY;if(e!==s||i!==r){var o=this._item.getGrid()._settings,n={},a={};n[transformProp]=getTranslateString(e,i),a[transformProp]=getTranslateString(s,r),t.start(n,a,{duration:o.layoutDuration,easing:o.layoutEasing,onFinish:this._onLayoutEnd})}else t.isAnimating()&&(this._element.style[transformProp]=getTranslateString(s,r),t.stop())}},ItemDragPlaceholder.prototype._onLayoutEnd=function(){this._resetAfterLayout&&this.reset()},ItemDragPlaceholder.prototype._onReleaseEnd=function(t){if(t._id===this._item._id){if(!this._animation.isAnimating())return void this.reset();this._resetAfterLayout=!0}},ItemDragPlaceholder.prototype._onMigrate=function(t){if(t.item===this._item){var e=this._item.getGrid(),i=t.toGrid;e.off(EVENT_DRAG_RELEASE_END,this._onReleaseEnd),e.off(EVENT_LAYOUT_START,this._onLayoutStart),e.off(EVENT_BEFORE_SEND,this._onMigrate),e.off(EVENT_HIDE_START,this._onHide),i.on(EVENT_DRAG_RELEASE_END,this._onReleaseEnd),i.on(EVENT_LAYOUT_START,this._onLayoutStart),i.on(EVENT_BEFORE_SEND,this._onMigrate),i.on(EVENT_HIDE_START,this._onHide),this._didMigrate=!0}},ItemDragPlaceholder.prototype._onHide=function(t){t.indexOf(this._item)>-1&&this.reset()},ItemDragPlaceholder.prototype.create=function(){if(this.isActive())this._resetAfterLayout=!1;else{var t,e=this._item,i=e.getGrid(),s=i._settings,r=this._animation;this._left=e._left,this._top=e._top,t=isFunction(s.dragPlaceholder.createElement)?s.dragPlaceholder.createElement(e):document.createElement("div"),this._element=t,r._element=t,this._className=s.itemPlaceholderClass||"",this._className&&addClass(t,this._className),setStyles(t,{position:"absolute",left:"0px",top:"0px",width:e._width+"px",height:e._height+"px"}),t.style[transformProp]=getTranslateString(e._left+e._marginLeft,e._top+e._marginTop),i.on(EVENT_LAYOUT_START,this._onLayoutStart),i.on(EVENT_DRAG_RELEASE_END,this._onReleaseEnd),i.on(EVENT_BEFORE_SEND,this._onMigrate),i.on(EVENT_HIDE_START,this._onHide),isFunction(s.dragPlaceholder.onCreate)&&s.dragPlaceholder.onCreate(e,t),i.getElement().appendChild(t)}},ItemDragPlaceholder.prototype.reset=function(){if(this.isActive()){var t=this._element,e=this._item,i=e.getGrid(),s=i._settings,r=this._animation;this._resetAfterLayout=!1,cancelPlaceholderLayoutTick(e._id),cancelPlaceholderResizeTick(e._id),r.stop(),r._element=null,i.off(EVENT_DRAG_RELEASE_END,this._onReleaseEnd),i.off(EVENT_LAYOUT_START,this._onLayoutStart),i.off(EVENT_BEFORE_SEND,this._onMigrate),i.off(EVENT_HIDE_START,this._onHide),this._className&&(removeClass(t,this._className),this._className=""),t.parentNode.removeChild(t),this._element=null,isFunction(s.dragPlaceholder.onRemove)&&s.dragPlaceholder.onRemove(e,t)}},ItemDragPlaceholder.prototype.isActive=function(){return!!this._element},ItemDragPlaceholder.prototype.getElement=function(){return this._element},ItemDragPlaceholder.prototype.updateDimensions=function(){this.isActive()&&addPlaceholderResizeTick(this._item._id,this._updateDimensions)},ItemDragPlaceholder.prototype.destroy=function(){this.reset(),this._animation.destroy(),this._item=this._animation=null},ItemDragRelease.prototype.start=function(){if(!this._isDestroyed&&!this._isActive){var t=this._item,e=t.getGrid(),i=e._settings;this._isActive=!0,addClass(t._element,i.itemReleasingClass),i.dragRelease.useDragContainer||this._placeToGrid(),e._emit(EVENT_DRAG_RELEASE_START,t),e._nextLayoutData||t._layout.start(!1)}},ItemDragRelease.prototype.stop=function(t,e,i){if(!this._isDestroyed&&this._isActive){var s=this._item,r=s.getGrid();t||void 0!==e&&void 0!==i||(e=s._left,i=s._top);var o=this._placeToGrid(e,i);this._reset(o),t||r._emit(EVENT_DRAG_RELEASE_END,s)}},ItemDragRelease.prototype.isJustReleased=function(){return this._isActive&&!1===this._isPositioningStarted},ItemDragRelease.prototype.destroy=function(){this._isDestroyed||(this.stop(!0),this._item=null,this._isDestroyed=!0)},ItemDragRelease.prototype._placeToGrid=function(t,e){if(!this._isDestroyed){var i=this._item,s=i._element,r=i.getGrid()._element,o=!1;if(s.parentNode!==r){if(void 0===t||void 0===e){var n=getTranslate(s);t=n.x-this._containerDiffX,e=n.y-this._containerDiffY}r.appendChild(s),i._setTranslate(t,e),o=!0}return this._containerDiffX=0,this._containerDiffY=0,o}},ItemDragRelease.prototype._reset=function(t){if(!this._isDestroyed){var e=this._item,i=e.getGrid()._settings.itemReleasingClass;this._isActive=!1,this._isPositioningStarted=!1,this._containerDiffX=0,this._containerDiffY=0,i&&(t&&e._element.clientWidth,removeClass(e._element,i))}};var MIN_ANIMATION_DISTANCE=2;function ItemLayout(t){var e=t._element,i=e.style;this._item=t,this._isActive=!1,this._isDestroyed=!1,this._isInterrupted=!1,this._currentStyles={},this._targetStyles={},this._nextLeft=0,this._nextTop=0,this._offsetLeft=0,this._offsetTop=0,this._skipNextAnimation=!1,this._animOptions={onFinish:this._finish.bind(this),duration:0,easing:0},i.left="0px",i.top="0px",t._setTranslate(0,0),this._animation=new Animator(e),this._queue="layout-"+t._id,this._setupAnimation=this._setupAnimation.bind(this),this._startAnimation=this._startAnimation.bind(this)}function ItemMigrate(t){this._item=t,this._isActive=!1,this._isDestroyed=!1,this._container=!1,this._containerDiffX=0,this._containerDiffY=0}function ItemVisibility(t){var e=t._isActive,i=t._element,s=i.children[0],r=t.getGrid()._settings;if(!s)throw new Error("No valid child element found within item element.");this._item=t,this._isDestroyed=!1,this._isHidden=!e,this._isHiding=!1,this._isShowing=!1,this._childElement=s,this._currentStyleProps=[],this._animation=new Animator(s),this._queue="visibility-"+t._id,this._finishShow=this._finishShow.bind(this),this._finishHide=this._finishHide.bind(this),i.style.display=e?"":"none",addClass(i,e?r.itemVisibleClass:r.itemHiddenClass),this.setStyles(e?r.visibleStyles:r.hiddenStyles)}ItemLayout.prototype.start=function(t,e){if(!this._isDestroyed){var i=this._item,s=i._dragRelease,r=i.getGrid()._settings,o=this._isActive,n=s.isJustReleased(),a=n?r.dragRelease.duration:r.layoutDuration,h=n?r.dragRelease.easing:r.layoutEasing,l=!t&&!this._skipNextAnimation&&a>0;if(o&&(cancelLayoutTick(i._id),i._emitter.burst(this._queue,!0,i)),n&&(s._isPositioningStarted=!0),isFunction(e)&&i._emitter.on(this._queue,e),this._skipNextAnimation=!1,!l)return this._updateOffsets(),i._setTranslate(this._nextLeft,this._nextTop),this._animation.stop(),void this._finish();this._animation.isAnimating()&&(this._animation._animation.onfinish=null),this._isActive=!0,this._animOptions.easing=h,this._animOptions.duration=a,this._isInterrupted=o,addLayoutTick(i._id,this._setupAnimation,this._startAnimation)}},ItemLayout.prototype.stop=function(t,e,i){if(!this._isDestroyed&&this._isActive){var s=this._item;if(cancelLayoutTick(s._id),this._animation.isAnimating()){if(void 0===e||void 0===i){var r=getTranslate(s._element);e=r.x,i=r.y}s._setTranslate(e,i),this._animation.stop()}removeClass(s._element,s.getGrid()._settings.itemPositioningClass),this._isActive=!1,t&&s._emitter.burst(this._queue,!0,s)}},ItemLayout.prototype.destroy=function(){if(!this._isDestroyed){var t=this._item._element.style;this.stop(!0,0,0),this._item._emitter.clear(this._queue),this._animation.destroy(),t[transformProp]="",t.left="",t.top="",this._item=null,this._currentStyles=null,this._targetStyles=null,this._animOptions=null,this._isDestroyed=!0}},ItemLayout.prototype._updateOffsets=function(){if(!this._isDestroyed){var t=this._item,e=t._migrate,i=t._dragRelease;this._offsetLeft=i._isActive?i._containerDiffX:e._isActive?e._containerDiffX:0,this._offsetTop=i._isActive?i._containerDiffY:e._isActive?e._containerDiffY:0,this._nextLeft=this._item._left+this._offsetLeft,this._nextTop=this._item._top+this._offsetTop}},ItemLayout.prototype._finish=function(){if(!this._isDestroyed){var t=this._item,e=t._migrate,i=t._dragRelease;t._tX=this._nextLeft,t._tY=this._nextTop,this._isActive&&(this._isActive=!1,removeClass(t._element,t.getGrid()._settings.itemPositioningClass)),i._isActive&&i.stop(),e._isActive&&e.stop(),t._emitter.burst(this._queue,!1,t)}},ItemLayout.prototype._setupAnimation=function(){var t=this._item;if(void 0===t._tX||void 0===t._tY){var e=getTranslate(t._element);t._tX=e.x,t._tY=e.y}},ItemLayout.prototype._startAnimation=function(){var t=this._item,e=t.getGrid()._settings,i=this._animOptions.duration<=0;this._updateOffsets();var s=Math.abs(t._left-(t._tX-this._offsetLeft)),r=Math.abs(t._top-(t._tY-this._offsetTop));if(i||s<MIN_ANIMATION_DISTANCE&&r<MIN_ANIMATION_DISTANCE)return(s||r||this._isInterrupted)&&t._setTranslate(this._nextLeft,this._nextTop),this._animation.stop(),void this._finish();this._isInterrupted||addClass(t._element,e.itemPositioningClass),this._currentStyles[transformProp]=getTranslateString(t._tX,t._tY),this._targetStyles[transformProp]=getTranslateString(this._nextLeft,this._nextTop),t._tX=t._tY=void 0,this._animation.start(this._currentStyles,this._targetStyles,this._animOptions)},ItemMigrate.prototype.start=function(t,e,i){if(!this._isDestroyed){var s,r,o,n,a,h,l,_,c,d,u=this._item,g=u._element,f=u.isActive(),p=u.isVisible(),m=u.getGrid(),E=m._settings,y=t._settings,v=t._element,S=t._items,T=m._items.indexOf(u),A=i||document.body;if("number"==typeof e)s=normalizeArrayIndex(S,e,1);else{if(!(r=t.getItem(e)))return;s=S.indexOf(r)}(u.isPositioning()||this._isActive||u.isReleasing())&&(l=(h=getTranslate(g)).x,_=h.y),u.isPositioning()&&u._layout.stop(!0,l,_),this._isActive&&(l-=this._containerDiffX,_-=this._containerDiffY,this.stop(!0,l,_)),u.isReleasing()&&(l-=u._dragRelease._containerDiffX,_-=u._dragRelease._containerDiffY,u._dragRelease.stop(!0,l,_)),u._visibility.stop(!0),u._drag&&u._drag.destroy(),m._hasListeners(EVENT_BEFORE_SEND)&&m._emit(EVENT_BEFORE_SEND,{item:u,fromGrid:m,fromIndex:T,toGrid:t,toIndex:s}),t._hasListeners(EVENT_BEFORE_RECEIVE)&&t._emit(EVENT_BEFORE_RECEIVE,{item:u,fromGrid:m,fromIndex:T,toGrid:t,toIndex:s}),E.itemClass!==y.itemClass&&(removeClass(g,E.itemClass),addClass(g,y.itemClass)),(c=p?E.itemVisibleClass:E.itemHiddenClass)!==(d=p?y.itemVisibleClass:y.itemHiddenClass)&&(removeClass(g,c),addClass(g,d)),m._items.splice(T,1),arrayInsert(S,u,s),u._gridId=t._id,f?A!==(o=g.parentNode)&&(A.appendChild(g),n=getOffsetDiff(A,o,!0),h||(l=(h=getTranslate(g)).x,_=h.y),u._setTranslate(l+n.left,_+n.top)):v.appendChild(g),u._visibility.setStyles(p?y.visibleStyles:y.hiddenStyles),f&&(a=getOffsetDiff(A,v,!0)),u._refreshDimensions(),u._sortData=null,u._drag=y.dragEnabled?new ItemDrag(u):null,f?(this._isActive=!0,this._container=A,this._containerDiffX=a.left,this._containerDiffY=a.top):(this._isActive=!1,this._container=null,this._containerDiffX=0,this._containerDiffY=0),m._hasListeners(EVENT_SEND)&&m._emit(EVENT_SEND,{item:u,fromGrid:m,fromIndex:T,toGrid:t,toIndex:s}),t._hasListeners(EVENT_RECEIVE)&&t._emit(EVENT_RECEIVE,{item:u,fromGrid:m,fromIndex:T,toGrid:t,toIndex:s})}},ItemMigrate.prototype.stop=function(t,e,i){if(!this._isDestroyed&&this._isActive){var s,r=this._item,o=r._element,n=r.getGrid()._element;this._container!==n&&(void 0!==e&&void 0!==i||(t?(e=(s=getTranslate(o)).x-this._containerDiffX,i=s.y-this._containerDiffY):(e=r._left,i=r._top)),n.appendChild(o),r._setTranslate(e,i)),this._isActive=!1,this._container=null,this._containerDiffX=0,this._containerDiffY=0}},ItemMigrate.prototype.destroy=function(){this._isDestroyed||(this.stop(!0),this._item=null,this._isDestroyed=!0)},ItemVisibility.prototype.show=function(t,e){if(!this._isDestroyed){var i=this._item,s=i._element,r=isFunction(e)?e:null,o=i.getGrid()._settings;this._isShowing||this._isHidden?!this._isShowing||t?(this._isShowing||(i._emitter.burst(this._queue,!0,i),removeClass(s,o.itemHiddenClass),addClass(s,o.itemVisibleClass),this._isHiding||(s.style.display="")),r&&i._emitter.on(this._queue,r),this._isShowing=!0,this._isHiding=this._isHidden=!1,this._startAnimation(!0,t,this._finishShow)):r&&i._emitter.on(this._queue,r):r&&r(!1,i)}},ItemVisibility.prototype.hide=function(t,e){if(!this._isDestroyed){var i=this._item,s=i._element,r=isFunction(e)?e:null,o=i.getGrid()._settings;this._isHiding||!this._isHidden?!this._isHiding||t?(this._isHiding||(i._emitter.burst(this._queue,!0,i),addClass(s,o.itemHiddenClass),removeClass(s,o.itemVisibleClass)),r&&i._emitter.on(this._queue,r),this._isHidden=this._isHiding=!0,this._isShowing=!1,this._startAnimation(!1,t,this._finishHide)):r&&i._emitter.on(this._queue,r):r&&r(!1,i)}},ItemVisibility.prototype.stop=function(t){if(!this._isDestroyed&&(this._isHiding||this._isShowing)){var e=this._item;cancelVisibilityTick(e._id),this._animation.stop(),t&&e._emitter.burst(this._queue,!0,e)}},ItemVisibility.prototype.setStyles=function(t){var e=this._childElement,i=this._currentStyleProps;for(var s in this._removeCurrentStyles(),t)i.push(s),e.style[s]=t[s]},ItemVisibility.prototype.destroy=function(){if(!this._isDestroyed){var t=this._item,e=t._element,i=t.getGrid()._settings;this.stop(!0),t._emitter.clear(this._queue),this._animation.destroy(),this._removeCurrentStyles(),removeClass(e,i.itemVisibleClass),removeClass(e,i.itemHiddenClass),e.style.display="",this._isHiding=this._isShowing=!1,this._isDestroyed=this._isHidden=!0}},ItemVisibility.prototype._startAnimation=function(t,e,i){if(!this._isDestroyed){var s,r=this._item,o=this._animation,n=this._childElement,a=r.getGrid()._settings,h=t?a.visibleStyles:a.hiddenStyles,l=t?a.showDuration:a.hideDuration,_=t?a.showEasing:a.hideEasing,c=e||l<=0;if(h){if(cancelVisibilityTick(r._id),c)return setStyles(n,h),o.stop(),void(i&&i());o.isAnimating()&&(o._animation.onfinish=null),addVisibilityTick(r._id,function(){s=getCurrentStyles(n,h)},function(){o.start(s,h,{duration:l,easing:_,onFinish:i})})}else i&&i()}},ItemVisibility.prototype._finishShow=function(){this._isHidden||(this._isShowing=!1,this._item._emitter.burst(this._queue,!1,this._item))},ItemVisibility.prototype._finishHide=function(){if(this._isHidden){var t=this._item;this._isHiding=!1,t._layout.stop(!0,0,0),t._element.style.display="none",t._emitter.burst(this._queue,!1,t)}},ItemVisibility.prototype._removeCurrentStyles=function(){for(var t=this._childElement,e=this._currentStyleProps,i=0;i<e.length;i++)t.style[e[i]]="";e.length=0};var id=0;function createUid(){return++id}function Item(t,e,i){var s=t._settings;if(ITEM_ELEMENT_MAP){if(ITEM_ELEMENT_MAP.has(e))throw new Error("You can only create one Muuri Item per element!");ITEM_ELEMENT_MAP.set(e,this)}this._id=createUid(),this._gridId=t._id,this._element=e,this._isDestroyed=!1,this._left=0,this._top=0,this._width=0,this._height=0,this._marginLeft=0,this._marginRight=0,this._marginTop=0,this._marginBottom=0,this._tX=void 0,this._tY=void 0,this._sortData=null,this._emitter=new Emitter,e.parentNode!==t._element&&t._element.appendChild(e),addClass(e,s.itemClass),"boolean"!=typeof i&&(i="none"!==getStyle(e,"display")),this._isActive=i,this._visibility=new ItemVisibility(this),this._layout=new ItemLayout(this),this._migrate=new ItemMigrate(this),this._drag=s.dragEnabled?new ItemDrag(this):null,this._dragRelease=new ItemDragRelease(this),this._dragPlaceholder=new ItemDragPlaceholder(this)}function createPackerProcessor(t){var e,i,s,r,o,n=.001;function a(t){return((1e3*t+.5<<0)/10<<0)/100}function h(){this.currentRects=[],this.nextRects=[],this.rectTarget={},this.rectStore=[],this.slotSizes=[],this.rectId=0,this.slotIndex=-1,this.slotData={left:0,top:0,width:0,height:0},this.sortRectsLeftTop=this.sortRectsLeftTop.bind(this),this.sortRectsTopLeft=this.sortRectsTopLeft.bind(this)}if(h.prototype.computeLayout=function(t,e){var i,s,r,o,n,h,l=t.items,_=t.slots,c=!!(1&e),d=!!(2&e),u=!!(4&e),g=!!(8&e),f=!!(16&e),p="number"==typeof l[0];if(!l.length)return t;for(s=p?2:1,i=0;i<l.length;i+=s)p?(o=l[i],n=l[i+1]):(o=(r=l[i])._width+r._marginLeft+r._marginRight,n=r._height+r._marginTop+r._marginBottom),f&&(o=a(o),n=a(n)),h=this.computeNextSlot(t,o,n,c,d),d?h.left+h.width>t.width&&(t.width=h.left+h.width):h.top+h.height>t.height&&(t.height=h.top+h.height),_[++this.slotIndex]=h.left,_[++this.slotIndex]=h.top,(u||g)&&this.slotSizes.push(h.width,h.height);if(u)for(i=0;i<_.length;i+=2)_[i]=t.width-(_[i]+this.slotSizes[i]);if(g)for(i=1;i<_.length;i+=2)_[i]=t.height-(_[i]+this.slotSizes[i]);return this.slotSizes.length=0,this.currentRects.length=0,this.nextRects.length=0,this.rectId=0,this.slotIndex=-1,t},h.prototype.computeNextSlot=function(t,e,i,s,r){var o,a,h,l,_,c=this.slotData,d=this.currentRects,u=this.nextRects,g=!1;for(u.length=0,c.left=null,c.top=null,c.width=e,c.height=i,l=0;l<d.length;l++)if((a=d[l])&&(o=this.getRect(a),c.width<=o.width+n&&c.height<=o.height+n)){c.left=o.left,c.top=o.top;break}if(null===c.left&&(r?(c.left=t.width,c.top=0):(c.left=0,c.top=t.height),s||(g=!0)),!r&&c.top+c.height>t.height+n&&(c.left>.5&&u.push(this.addRect(0,t.height,c.left,1/0)),c.left+c.width<t.width-.5&&u.push(this.addRect(c.left+c.width,t.height,t.width-c.left-c.width,1/0)),t.height=c.top+c.height),r&&c.left+c.width>t.width+n&&(c.top>.5&&u.push(this.addRect(t.width,0,1/0,c.top)),c.top+c.height<t.height-.5&&u.push(this.addRect(t.width,c.top+c.height,1/0,t.height-c.top-c.height)),t.width=c.left+c.width),!g)for(s&&(l=0);l<d.length;l++)if(a=d[l])for(o=this.getRect(a),h=this.splitRect(o,c),_=0;_<h.length;_++)a=h[_],o=this.getRect(a),(r?o.left+n<t.width-n:o.top+n<t.height-n)&&u.push(a);return u.length>1&&this.purgeRects(u).sort(r?this.sortRectsLeftTop:this.sortRectsTopLeft),this.currentRects=u,this.nextRects=d,c},h.prototype.addRect=function(t,e,i,s){var r=++this.rectId;return this.rectStore[r]=t||0,this.rectStore[++this.rectId]=e||0,this.rectStore[++this.rectId]=i||0,this.rectStore[++this.rectId]=s||0,r},h.prototype.getRect=function(t,e){return e||(e=this.rectTarget),e.left=this.rectStore[t]||0,e.top=this.rectStore[++t]||0,e.width=this.rectStore[++t]||0,e.height=this.rectStore[++t]||0,e},h.prototype.splitRect=(e=[],i=0,s=0,function(t,r){return e.length=0,t.left+t.width<=r.left+n||r.left+r.width<=t.left+n||t.top+t.height<=r.top+n||r.top+r.height<=t.top+n?(e.push(this.addRect(t.left,t.top,t.width,t.height)),e):((i=r.left-t.left)>=.5&&e.push(this.addRect(t.left,t.top,i,t.height)),(i=t.left+t.width-(r.left+r.width))>=.5&&e.push(this.addRect(r.left+r.width,t.top,i,t.height)),(s=r.top-t.top)>=.5&&e.push(this.addRect(t.left,t.top,t.width,s)),(s=t.top+t.height-(r.top+r.height))>=.5&&e.push(this.addRect(t.left,r.top+r.height,t.width,s)),e)}),h.prototype.isRectAWithinRectB=function(t,e){return t.left+n>=e.left&&t.top+n>=e.top&&t.left+t.width-n<=e.left+e.width&&t.top+t.height-n<=e.top+e.height},h.prototype.purgeRects=(r={},o={},function(t){for(var e,i=t.length;i--;)if(e=t.length,t[i])for(this.getRect(t[i],r);e--;)if(t[e]&&i!==e&&(this.getRect(t[e],o),this.isRectAWithinRectB(r,o))){t[i]=0;break}return t}),h.prototype.sortRectsTopLeft=function(){var t={},e={};return function(i,s){return this.getRect(i,t),this.getRect(s,e),t.top<e.top&&t.top+n<e.top?-1:t.top>e.top&&t.top-n>e.top?1:t.left<e.left&&t.left+n<e.left?-1:t.left>e.left&&t.left-n>e.left?1:0}}(),h.prototype.sortRectsLeftTop=function(){var t={},e={};return function(i,s){return this.getRect(i,t),this.getRect(s,e),t.left<e.left&&t.left+n<e.left?-1:t.left>e.left&&t.left-n<e.left?1:t.top<e.top&&t.top+n<e.top?-1:t.top>e.top&&t.top-n>e.top?1:0}}(),t){var l=new h;self.onmessage=function(t){var e=new Float32Array(t.data),i=e.subarray(4,e.length),s=new Float32Array(i.length),r=e[3],o={items:i,slots:s,width:e[1],height:e[2]};l.computeLayout(o,r),e[1]=o.width,e[2]=o.height,e.set(o.slots,4),postMessage(e.buffer,[e.buffer])}}return h}Item.prototype.getGrid=function(){return GRID_INSTANCES[this._gridId]},Item.prototype.getElement=function(){return this._element},Item.prototype.getWidth=function(){return this._width},Item.prototype.getHeight=function(){return this._height},Item.prototype.getMargin=function(){return{left:this._marginLeft,right:this._marginRight,top:this._marginTop,bottom:this._marginBottom}},Item.prototype.getPosition=function(){return{left:this._left,top:this._top}},Item.prototype.isActive=function(){return this._isActive},Item.prototype.isVisible=function(){return!!this._visibility&&!this._visibility._isHidden},Item.prototype.isShowing=function(){return!(!this._visibility||!this._visibility._isShowing)},Item.prototype.isHiding=function(){return!(!this._visibility||!this._visibility._isHiding)},Item.prototype.isPositioning=function(){return!(!this._layout||!this._layout._isActive)},Item.prototype.isDragging=function(){return!(!this._drag||!this._drag._isActive)},Item.prototype.isReleasing=function(){return!(!this._dragRelease||!this._dragRelease._isActive)},Item.prototype.isDestroyed=function(){return this._isDestroyed},Item.prototype._refreshDimensions=function(t){if(!(this._isDestroyed||!0!==t&&this._visibility._isHidden)){var e=this._element,i=this._dragPlaceholder,s=e.getBoundingClientRect();this._width=s.width,this._height=s.height,this._marginLeft=Math.max(0,getStyleAsFloat(e,"margin-left")),this._marginRight=Math.max(0,getStyleAsFloat(e,"margin-right")),this._marginTop=Math.max(0,getStyleAsFloat(e,"margin-top")),this._marginBottom=Math.max(0,getStyleAsFloat(e,"margin-bottom")),i&&i.updateDimensions()}},Item.prototype._refreshSortData=function(){if(!this._isDestroyed){var t,e=this._sortData={},i=this.getGrid()._settings.sortData;for(t in i)e[t]=i[t](this,this._element)}},Item.prototype._addToLayout=function(t,e){!0!==this._isActive&&(this._isActive=!0,this._left=t||0,this._top=e||0)},Item.prototype._removeFromLayout=function(){!1!==this._isActive&&(this._isActive=!1,this._left=0,this._top=0)},Item.prototype._canSkipLayout=function(t,e){return this._left===t&&this._top===e&&!this._migrate._isActive&&!this._layout._skipNextAnimation&&!this._dragRelease.isJustReleased()},Item.prototype._setTranslate=function(t,e){return(this._tX!==t||this._tY!==e)&&(this._tX=t,this._tY=e,this._element.style[transformProp]=getTranslateString(t,e),!0)},Item.prototype._destroy=function(t){if(!this._isDestroyed){var e=this._element,i=this.getGrid()._settings;this._dragPlaceholder.destroy(),this._dragRelease.destroy(),this._migrate.destroy(),this._layout.destroy(),this._visibility.destroy(),this._drag&&this._drag.destroy(),this._emitter.destroy(),removeClass(e,i.itemClass),t&&e.parentNode.removeChild(e),ITEM_ELEMENT_MAP&&ITEM_ELEMENT_MAP.delete(e),this._isActive=!1,this._isDestroyed=!0}};var PackerProcessor=createPackerProcessor(),blobUrl=null,activeWorkers=[];function createWorkerProcessors(t,e){var i=[];if(t>0){blobUrl||(blobUrl=URL.createObjectURL(new Blob(["("+createPackerProcessor.toString()+")(true)"],{type:"application/javascript"})));for(var s,r=0;r<t;r++)s=new Worker(blobUrl),e&&(s.onmessage=e),i.push(s),activeWorkers.push(s)}return i}function destroyWorkerProcessors(t){for(var e,i,s=0;s<t.length;s++)(e=t[s]).onmessage=null,e.onerror=null,e.onmessageerror=null,e.terminate(),(i=activeWorkers.indexOf(e))>-1&&activeWorkers.splice(i,1);blobUrl&&!activeWorkers.length&&(URL.revokeObjectURL(blobUrl),blobUrl=null)}function isWorkerProcessorsSupported(){return!!(window.Worker&&window.URL&&window.Blob)}var FILL_GAPS=1,HORIZONTAL=2,ALIGN_RIGHT=4,ALIGN_BOTTOM=8,ROUNDING=16,PACKET_INDEX_ID=0,PACKET_INDEX_WIDTH=1,PACKET_INDEX_HEIGHT=2,PACKET_INDEX_OPTIONS=3,PACKET_HEADER_SLOTS=4;function Packer(t,e){if(this._options=0,this._processor=null,this._layoutQueue=[],this._layouts={},this._layoutCallbacks={},this._layoutWorkers={},this._layoutWorkerData={},this._workers=[],this._onWorkerMessage=this._onWorkerMessage.bind(this),this.setOptions(e),(t="number"==typeof t?Math.max(0,t):0)&&isWorkerProcessorsSupported())try{this._workers=createWorkerProcessors(t,this._onWorkerMessage)}catch(t){this._processor=new PackerProcessor}else this._processor=new PackerProcessor}Packer.prototype._sendToWorker=function(){if(this._layoutQueue.length&&this._workers.length){var t=this._layoutQueue.shift(),e=this._workers.pop(),i=this._layoutWorkerData[t];delete this._layoutWorkerData[t],this._layoutWorkers[t]=e,e.postMessage(i.buffer,[i.buffer])}},Packer.prototype._onWorkerMessage=function(t){var e=new Float32Array(t.data),i=e[PACKET_INDEX_ID],s=this._layouts[i],r=this._layoutCallbacks[i],o=this._layoutWorkers[i];s&&delete this._layoutCallbacks[i],r&&delete this._layoutCallbacks[i],o&&delete this._layoutWorkers[i],s&&r&&(s.width=e[PACKET_INDEX_WIDTH],s.height=e[PACKET_INDEX_HEIGHT],s.slots=e.subarray(PACKET_HEADER_SLOTS,e.length),this._finalizeLayout(s),r(s)),o&&(this._workers.push(o),this._sendToWorker())},Packer.prototype._finalizeLayout=function(t){var e=t._grid,i=t._settings&HORIZONTAL,s="border-box"===e._boxSizing;return delete t._grid,delete t._settings,t.styles={},i?t.styles.width=(s?t.width+e._borderLeft+e._borderRight:t.width)+"px":t.styles.height=(s?t.height+e._borderTop+e._borderBottom:t.height)+"px",t},Packer.prototype.setOptions=function(t){var e,i,s,r,o;t&&(e="boolean"==typeof t.fillGaps?t.fillGaps?FILL_GAPS:0:this._options&FILL_GAPS,i="boolean"==typeof t.horizontal?t.horizontal?HORIZONTAL:0:this._options&HORIZONTAL,s="boolean"==typeof t.alignRight?t.alignRight?ALIGN_RIGHT:0:this._options&ALIGN_RIGHT,r="boolean"==typeof t.alignBottom?t.alignBottom?ALIGN_BOTTOM:0:this._options&ALIGN_BOTTOM,o="boolean"==typeof t.rounding?t.rounding?ROUNDING:0:this._options&ROUNDING,this._options=e|i|s|r|o)},Packer.prototype.createLayout=function(t,e,i,s,r,o){if(this._layouts[e])throw new Error("A layout with the provided id is currently being processed.");var n=this._options&HORIZONTAL,a={id:e,items:i,slots:null,width:n?0:s,height:n?r:0,_grid:t,_settings:this._options};if(!i.length)return a.slots=[],this._finalizeLayout(a),void o(a);if(this._processor)return a.slots=window.Float32Array?new Float32Array(2*i.length):new Array(2*i.length),this._processor.computeLayout(a,a._settings),this._finalizeLayout(a),void o(a);var h,l,_,c=new Float32Array(PACKET_HEADER_SLOTS+2*i.length);for(c[PACKET_INDEX_ID]=e,c[PACKET_INDEX_WIDTH]=a.width,c[PACKET_INDEX_HEIGHT]=a.height,c[PACKET_INDEX_OPTIONS]=a._settings,h=0,l=PACKET_HEADER_SLOTS-1;h<i.length;h++)_=i[h],c[++l]=_._width+_._marginLeft+_._marginRight,c[++l]=_._height+_._marginTop+_._marginBottom;return this._layoutQueue.push(e),this._layouts[e]=a,this._layoutCallbacks[e]=o,this._layoutWorkerData[e]=c,this._sendToWorker(),this.cancelLayout.bind(this,e)},Packer.prototype.cancelLayout=function(t){if(this._layouts[t]&&(delete this._layouts[t],delete this._layoutCallbacks[t],this._layoutWorkerData[t])){delete this._layoutWorkerData[t];var e=this._layoutQueue.indexOf(t);e>-1&&this._layoutQueue.splice(e,1)}},Packer.prototype.destroy=function(){for(var t in this._layoutWorkers)this._workers.push(this._layoutWorkers[t]);destroyWorkerProcessors(this._workers),this._workers.length=0,this._layoutQueue.length=0,this._layouts={},this._layoutCallbacks={},this._layoutWorkers={},this._layoutWorkerData={}};var debounceId=0;function debounce(t,e){var i=++debounceId,s=0,r=0,o=!1,n=function(e){o||(r&&(s-=e-r),r=e,s>0?addDebounceTick(i,n):(s=r=0,t()))};return function(a){if(!o){if(!(e<=0))return!0===a?(o=!0,s=r=0,n=void 0,void cancelDebounceTick(i)):void(s<=0?(s=e,n(0)):s=e);!0!==a&&t()}}}var htmlCollectionType="[object HTMLCollection]",nodeListType="[object NodeList]";function isNodeList(t){var e=Object.prototype.toString.call(t);return e===htmlCollectionType||e===nodeListType}var objectType="object",objectToStringType="[object Object]",toString=Object.prototype.toString;function isPlainObject(t){return typeof t===objectType&&toString.call(t)===objectToStringType}function noop(){}function toArray(t){return isNodeList(t)?Array.prototype.slice.call(t):Array.prototype.concat(t)}var NUMBER_TYPE="number",STRING_TYPE="string",INSTANT_LAYOUT="instant",layoutId=0;function Grid(t,e){if(typeof t===STRING_TYPE&&(t=document.querySelector(t)),!(t.getRootNode?t.getRootNode({composed:!0})===document:document.body.contains(t))||t===document.documentElement)throw new Error("Container element must be an existing DOM element.");var i=mergeSettings(Grid.defaultOptions,e);i.visibleStyles=normalizeStyles(i.visibleStyles),i.hiddenStyles=normalizeStyles(i.hiddenStyles),isFunction(i.dragSort)||(i.dragSort=!!i.dragSort),this._id=createUid(),this._element=t,this._settings=i,this._isDestroyed=!1,this._items=[],this._layout={id:0,items:[],slots:[]},this._isLayoutFinished=!0,this._nextLayoutData=null,this._emitter=new Emitter,this._onLayoutDataReceived=this._onLayoutDataReceived.bind(this),GRID_INSTANCES[this._id]=this,addClass(t,i.containerClass),bindLayoutOnResize(this,i.layoutOnResize),this.add(getInitialGridElements(t,i.items),{layout:!1}),i.layoutOnInit&&this.layout(!0)}function mergeSettings(t,e){var i=mergeObjects({},t);return e&&(i=mergeObjects(i,e)),e&&e.visibleStyles?i.visibleStyles=e.visibleStyles:t&&t.visibleStyles&&(i.visibleStyles=t.visibleStyles),e&&e.hiddenStyles?i.hiddenStyles=e.hiddenStyles:t&&t.hiddenStyles&&(i.hiddenStyles=t.hiddenStyles),i}function mergeObjects(t,e){var i,s,r,o=Object.keys(e),n=o.length;for(r=0;r<n;r++)i=isPlainObject(e[s=o[r]]),isPlainObject(t[s])&&i?t[s]=mergeObjects(mergeObjects({},t[s]),e[s]):i?t[s]=mergeObjects({},e[s]):Array.isArray(e[s])?t[s]=e[s].slice(0):t[s]=e[s];return t}function getInitialGridElements(t,e){if("*"===e)return t.children;if(typeof e===STRING_TYPE){for(var i=[],s=t.children,r=0;r<s.length;r++)elementMatches(s[r],e)&&i.push(s[r]);return i}return Array.isArray(e)||isNodeList(e)?e:[]}function bindLayoutOnResize(t,e){typeof e!==NUMBER_TYPE&&(e=!0===e?0:-1),e>=0&&(t._resizeHandler=debounce(function(){t.refreshItems().layout()},e),window.addEventListener("resize",t._resizeHandler))}function unbindLayoutOnResize(t){t._resizeHandler&&(t._resizeHandler(!0),window.removeEventListener("resize",t._resizeHandler),t._resizeHandler=null)}function normalizeStyles(t){var e,i,s={},r=document.documentElement.style;for(e in t)t[e]&&(i=getPrefixedPropName(r,e))&&(s[i]=t[e]);return s}function createIndexMap(t){for(var e={},i=0;i<t.length;i++)e[t[i]._id]=i;return e}function compareIndexMap(t,e,i){return t[e._id]-t[i._id]}Grid.Item=Item,Grid.ItemLayout=ItemLayout,Grid.ItemVisibility=ItemVisibility,Grid.ItemMigrate=ItemMigrate,Grid.ItemDrag=ItemDrag,Grid.ItemDragRelease=ItemDragRelease,Grid.ItemDragPlaceholder=ItemDragPlaceholder,Grid.Emitter=Emitter,Grid.Animator=Animator,Grid.Dragger=Dragger,Grid.Packer=Packer,Grid.AutoScroller=AutoScroller,Grid.defaultPacker=new Packer(2),Grid.defaultOptions={items:"*",showDuration:300,showEasing:"ease",hideDuration:300,hideEasing:"ease",visibleStyles:{opacity:"1",transform:"scale(1)"},hiddenStyles:{opacity:"0",transform:"scale(0.5)"},layout:{fillGaps:!1,horizontal:!1,alignRight:!1,alignBottom:!1,rounding:!1},layoutOnResize:150,layoutOnInit:!0,layoutDuration:300,layoutEasing:"ease",sortData:null,dragEnabled:!1,dragContainer:null,dragHandle:null,dragStartPredicate:{distance:0,delay:0},dragAxis:"xy",dragSort:!0,dragSortHeuristics:{sortInterval:100,minDragDistance:10,minBounceBackAngle:1},dragSortPredicate:{threshold:50,action:ACTION_MOVE,migrateAction:ACTION_MOVE},dragRelease:{duration:300,easing:"ease",useDragContainer:!0},dragCssProps:{touchAction:"none",userSelect:"none",userDrag:"none",tapHighlightColor:"rgba(0, 0, 0, 0)",touchCallout:"none",contentZooming:"none"},dragPlaceholder:{enabled:!1,createElement:null,onCreate:null,onRemove:null},dragAutoScroll:{targets:[],handle:null,threshold:50,safeZone:.2,speed:AutoScroller.smoothSpeed(1e3,2e3,2500),sortDuringScroll:!0,smoothStop:!1,onStart:null,onStop:null},containerClass:"muuri",itemClass:"muuri-item",itemVisibleClass:"muuri-item-shown",itemHiddenClass:"muuri-item-hidden",itemPositioningClass:"muuri-item-positioning",itemDraggingClass:"muuri-item-dragging",itemReleasingClass:"muuri-item-releasing",itemPlaceholderClass:"muuri-item-placeholder"},Grid.prototype.on=function(t,e){return this._emitter.on(t,e),this},Grid.prototype.off=function(t,e){return this._emitter.off(t,e),this},Grid.prototype.getElement=function(){return this._element},Grid.prototype.getItem=function(t){if(this._isDestroyed||!t&&0!==t)return null;if(typeof t===NUMBER_TYPE)return this._items[t>-1?t:this._items.length+t]||null;if(t instanceof Item)return t._gridId===this._id?t:null;if(ITEM_ELEMENT_MAP){var e=ITEM_ELEMENT_MAP.get(t);return e&&e._gridId===this._id?e:null}for(var i=0;i<this._items.length;i++)if(this._items[i]._element===t)return this._items[i];return null},Grid.prototype.getItems=function(t){if(this._isDestroyed||void 0===t)return this._items.slice(0);var e,i,s=[];if(Array.isArray(t)||isNodeList(t))for(e=0;e<t.length;e++)(i=this.getItem(t[e]))&&s.push(i);else(i=this.getItem(t))&&s.push(i);return s},Grid.prototype.refreshItems=function(t,e){if(this._isDestroyed)return this;var i,s,r,o,n=t||this._items;if(!0===e)for(o=[],i=0;i<n.length;i++)(s=n[i]).isVisible()||s.isHiding()||((r=s.getElement().style).visibility="hidden",r.display="",o.push(r));for(i=0;i<n.length;i++)n[i]._refreshDimensions(e);if(!0===e){for(i=0;i<o.length;i++)(r=o[i]).visibility="",r.display="none";o.length=0}return this},Grid.prototype.refreshSortData=function(t){if(this._isDestroyed)return this;for(var e=t||this._items,i=0;i<e.length;i++)e[i]._refreshSortData();return this},Grid.prototype.synchronize=function(){if(this._isDestroyed)return this;var t,e,i=this._items;if(!i.length)return this;for(var s=0;s<i.length;s++)(e=i[s]._element).parentNode===this._element&&(t=t||document.createDocumentFragment()).appendChild(e);return t?(this._element.appendChild(t),this._emit(EVENT_SYNCHRONIZE),this):this},Grid.prototype.layout=function(t,e){if(this._isDestroyed)return this;var i=this._nextLayoutData;i&&isFunction(i.cancel)&&i.cancel();var s=layoutId=layoutId%MAX_SAFE_FLOAT32_INTEGER+1;this._nextLayoutData={id:s,instant:t,onFinish:e,cancel:null};for(var r=this._items,o=[],n=0;n<r.length;n++)r[n]._isActive&&o.push(r[n]);this._refreshDimensions();var a,h=this._width-this._borderLeft-this._borderRight,l=this._height-this._borderTop-this._borderBottom,_=this._settings.layout;return isFunction(_)?a=_(this,s,o,h,l,this._onLayoutDataReceived):(Grid.defaultPacker.setOptions(_),a=Grid.defaultPacker.createLayout(this,s,o,h,l,this._onLayoutDataReceived)),isFunction(a)&&this._nextLayoutData&&this._nextLayoutData.id===s&&(this._nextLayoutData.cancel=a),this},Grid.prototype.add=function(t,e){if(this._isDestroyed||!t)return[];var i=toArray(t);if(!i.length)return i;var s,r,o,n,a=e||{},h=a.layout?a.layout:void 0===a.layout,l=this._items,_=!1;for(n=0;n<i.length;n++)(r=i[n]).parentNode!==this._element&&(s=s||document.createDocumentFragment()).appendChild(r);for(s&&this._element.appendChild(s),n=0;n<i.length;n++)r=i[n],(o=i[n]=new Item(this,r,a.active))._isActive&&(_=!0,o._layout._skipNextAnimation=!0);for(n=0;n<i.length;n++)(o=i[n])._refreshDimensions(),o._refreshSortData();return arrayInsert(l,i,a.index),this._hasListeners(EVENT_ADD)&&this._emit(EVENT_ADD,i.slice(0)),_&&h&&this.layout(h===INSTANT_LAYOUT,isFunction(h)?h:void 0),i},Grid.prototype.remove=function(t,e){if(this._isDestroyed||!t.length)return[];var i,s,r,o=e||{},n=o.layout?o.layout:void 0===o.layout,a=!1,h=this.getItems(),l=[],_=[];for(r=0;r<t.length;r++)(s=t[r])._isDestroyed||-1!==(i=this._items.indexOf(s))&&(s._isActive&&(a=!0),l.push(s),_.push(h.indexOf(s)),s._destroy(o.removeElements),this._items.splice(i,1));return this._hasListeners(EVENT_REMOVE)&&this._emit(EVENT_REMOVE,l.slice(0),_),a&&n&&this.layout(n===INSTANT_LAYOUT,isFunction(n)?n:void 0),l},Grid.prototype.show=function(t,e){return!this._isDestroyed&&t.length&&this._setItemsVisibility(t,!0,e),this},Grid.prototype.hide=function(t,e){return!this._isDestroyed&&t.length&&this._setItemsVisibility(t,!1,e),this},Grid.prototype.filter=function(t,e){if(this._isDestroyed||!this._items.length)return this;var i,s,r=[],o=[],n=typeof t===STRING_TYPE,a=isFunction(t),h=e||{},l=!0===h.instant,_=h.syncWithLayout,c=h.layout?h.layout:void 0===h.layout,d=isFunction(h.onFinish)?h.onFinish:null,u=-1,g=noop;if(d&&(g=function(){++u&&d(r.slice(0),o.slice(0))}),a||n)for(s=0;s<this._items.length;s++)i=this._items[s],(a?t(i):elementMatches(i._element,t))?r.push(i):o.push(i);return r.length?this.show(r,{instant:l,syncWithLayout:_,onFinish:g,layout:!1}):g(),o.length?this.hide(o,{instant:l,syncWithLayout:_,onFinish:g,layout:!1}):g(),(r.length||o.length)&&(this._hasListeners(EVENT_FILTER)&&this._emit(EVENT_FILTER,r.slice(0),o.slice(0)),c&&this.layout(c===INSTANT_LAYOUT,isFunction(c)?c:void 0)),this},Grid.prototype.sort=function(){var t,e,i,s;function r(r,o){for(var n,a,h,l,_=0,c=0;c<t.length;c++)if(n=t[c][0],a=t[c][1],h=(r._sortData?r:r._refreshSortData())._sortData[n],l=(o._sortData?o:o._refreshSortData())._sortData[n],_="desc"===a||!a&&e?l<h?-1:l>h?1:0:h<l?-1:h>l?1:0)return _;return _||(s||(s=createIndexMap(i)),_=e?compareIndexMap(s,o,r):compareIndexMap(s,r,o)),_}function o(r,o){var n=e?-t(r,o):t(r,o);return n||(s||(s=createIndexMap(i)),n=e?compareIndexMap(s,o,r):compareIndexMap(s,r,o)),n}return function(n,a){if(this._isDestroyed||this._items.length<2)return this;var h=this._items,l=a||{},_=l.layout?l.layout:void 0===l.layout;if(e=!!l.descending,i=h.slice(0),s=null,isFunction(n))t=n,h.sort(o);else if(typeof n===STRING_TYPE)t=n.trim().split(" ").filter(function(t){return t}).map(function(t){return t.split(":")}),h.sort(r);else{if(!Array.isArray(n))throw t=e=i=s=null,new Error("Invalid comparer argument provided.");h.length=0,h.push.apply(h,n)}return this._hasListeners(EVENT_SORT)&&this._emit(EVENT_SORT,h.slice(0),i),_&&this.layout(_===INSTANT_LAYOUT,isFunction(_)?_:void 0),t=e=i=s=null,this}}(),Grid.prototype.move=function(t,e,i){if(this._isDestroyed||this._items.length<2)return this;var s,r,o=this._items,n=i||{},a=n.layout?n.layout:void 0===n.layout,h=n.action===ACTION_SWAP,l=h?ACTION_SWAP:ACTION_MOVE,_=this.getItem(t),c=this.getItem(e);return _&&c&&_!==c&&(s=o.indexOf(_),r=o.indexOf(c),h?arraySwap(o,s,r):arrayMove(o,s,r),this._hasListeners(EVENT_MOVE)&&this._emit(EVENT_MOVE,{item:_,fromIndex:s,toIndex:r,action:l}),a&&this.layout(a===INSTANT_LAYOUT,isFunction(a)?a:void 0)),this},Grid.prototype.send=function(t,e,i,s){if(this._isDestroyed||e._isDestroyed||this===e)return this;if(!(t=this.getItem(t)))return this;var r=s||{},o=r.appendTo||document.body,n=r.layoutSender?r.layoutSender:void 0===r.layoutSender,a=r.layoutReceiver?r.layoutReceiver:void 0===r.layoutReceiver;return t._migrate.start(e,i,o),t._migrate._isActive&&t._isActive&&(n&&this.layout(n===INSTANT_LAYOUT,isFunction(n)?n:void 0),a&&e.layout(a===INSTANT_LAYOUT,isFunction(a)?a:void 0)),this},Grid.prototype.destroy=function(t){if(this._isDestroyed)return this;var e,i,s=this._element,r=this._items.slice(0),o=this._layout&&this._layout.styles||{};for(unbindLayoutOnResize(this),e=0;e<r.length;e++)r[e]._destroy(t);for(i in this._items.length=0,removeClass(s,this._settings.containerClass),o)s.style[i]="";return this._emit(EVENT_DESTROY),this._emitter.destroy(),delete GRID_INSTANCES[this._id],this._isDestroyed=!0,this},Grid.prototype._emit=function(){this._isDestroyed||this._emitter.emit.apply(this._emitter,arguments)},Grid.prototype._hasListeners=function(t){return!this._isDestroyed&&this._emitter.countListeners(t)>0},Grid.prototype._updateBoundingRect=function(){var t=this._element.getBoundingClientRect();this._width=t.width,this._height=t.height,this._left=t.left,this._top=t.top,this._right=t.right,this._bottom=t.bottom},Grid.prototype._updateBorders=function(t,e,i,s){var r=this._element;t&&(this._borderLeft=getStyleAsFloat(r,"border-left-width")),e&&(this._borderRight=getStyleAsFloat(r,"border-right-width")),i&&(this._borderTop=getStyleAsFloat(r,"border-top-width")),s&&(this._borderBottom=getStyleAsFloat(r,"border-bottom-width"))},Grid.prototype._refreshDimensions=function(){this._updateBoundingRect(),this._updateBorders(1,1,1,1),this._boxSizing=getStyle(this._element,"box-sizing")},Grid.prototype._onLayoutDataReceived=function(){var t=[];return function(e){if(!this._isDestroyed&&this._nextLayoutData&&this._nextLayoutData.id===e.id){var i,s,r,o,n=this,a=this._nextLayoutData.instant,h=this._nextLayoutData.onFinish,l=e.items.length,_=l;for(this._nextLayoutData=null,!this._isLayoutFinished&&this._hasListeners(EVENT_LAYOUT_ABORT)&&this._emit(EVENT_LAYOUT_ABORT,this._layout.items.slice(0)),this._layout=e,t.length=0,o=0;o<l;o++)(i=e.items[o])?(s=e.slots[2*o],r=e.slots[2*o+1],i._canSkipLayout(s,r)?--_:(i._left=s,i._top=r,i.isActive()&&!i.isDragging()?t.push(i):--_)):--_;if(e.styles&&setStyles(this._element,e.styles),!this._hasListeners(EVENT_LAYOUT_START)||(this._emit(EVENT_LAYOUT_START,e.items.slice(0),!0===a),this._layout.id===e.id)){var c=function(){if(!(--_>0)){var t=n._layout.id!==e.id,i=isFunction(a)?a:h;t||(n._isLayoutFinished=!0),isFunction(i)&&i(e.items.slice(0),t),!t&&n._hasListeners(EVENT_LAYOUT_END)&&n._emit(EVENT_LAYOUT_END,e.items.slice(0))}};if(!t.length)return c(),this;for(this._isLayoutFinished=!1,o=0;o<t.length&&this._layout.id===e.id;o++)t[o]._layout.start(!0===a,c);return this._layout.id===e.id&&(t.length=0),this}}}}(),Grid.prototype._setItemsVisibility=function(t,e,i){var s,r,o=this,n=t.slice(0),a=i||{},h=!0===a.instant,l=a.onFinish,_=a.layout?a.layout:void 0===a.layout,c=n.length,d=e?EVENT_SHOW_START:EVENT_HIDE_START,u=e?EVENT_SHOW_END:EVENT_HIDE_END,g=e?"show":"hide",f=!1,p=[],m=[];if(c){for(r=0;r<n.length;r++)s=n[r],(e&&!s._isActive||!e&&s._isActive)&&(f=!0),s._layout._skipNextAnimation=!(!e||s._isActive),e&&s._visibility._isHidden&&m.push(s),e?s._addToLayout():s._removeFromLayout();m.length&&(this.refreshItems(m,!0),m.length=0),f&&!1!==a.syncWithLayout?this.on(EVENT_LAYOUT_START,E):E(),f&&_&&this.layout(_===INSTANT_LAYOUT,isFunction(_)?_:void 0)}else isFunction(l)&&l(n);function E(){for(f&&!1!==a.syncWithLayout&&o.off(EVENT_LAYOUT_START,E),o._hasListeners(d)&&o._emit(d,n.slice(0)),r=0;r<n.length;r++)n[r]._gridId===o._id?n[r]._visibility[g](h,function(t,e){t||p.push(e),--c<1&&(isFunction(l)&&l(p.slice(0)),o._hasListeners(u)&&o._emit(u,p.slice(0)))}):--c<1&&(isFunction(l)&&l(p.slice(0)),o._hasListeners(u)&&o._emit(u,p.slice(0)))}};export default Grid;