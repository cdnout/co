"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class MapboxStyleSwitcherControl{constructor(t,e){this.styles=t||MapboxStyleSwitcherControl.DEFAULT_STYLES;t="string"==typeof e?e:e?e.defaultStyle:void 0;this.defaultStyle=t||MapboxStyleSwitcherControl.DEFAULT_STYLE,this.onDocumentClick=this.onDocumentClick.bind(this),this.events="string"!=typeof e&&e?e.eventListeners:void 0}getDefaultPosition(){return"top-right"}onAdd(t){this.map=t,this.controlContainer=document.createElement("div"),this.controlContainer.classList.add("mapboxgl-ctrl"),this.controlContainer.classList.add("mapboxgl-ctrl-group"),this.mapStyleContainer=document.createElement("div"),this.styleButton=document.createElement("button"),this.styleButton.type="button",this.mapStyleContainer.classList.add("mapboxgl-style-list");for(const e of this.styles){const s=document.createElement("button");s.type="button",s.innerText=e.title,s.classList.add(e.title.replace(/[^a-z0-9-]/gi,"_")),s.dataset.uri=JSON.stringify(e.uri),s.addEventListener("click",t=>{const e=t.srcElement;if(this.closeModal(),!(e.classList.contains("active")||this.events&&this.events.onOpen&&this.events.onOpen(t))){var s=JSON.parse(e.dataset.uri);this.map.setStyle(s);const o=this.mapStyleContainer.getElementsByClassName("active");for(;o[0];)o[0].classList.remove("active");e.classList.add("active"),this.events&&this.events.onChange&&this.events.onChange(t,s)}}),e.title===this.defaultStyle&&s.classList.add("active"),this.mapStyleContainer.appendChild(s)}return this.styleButton.classList.add("mapboxgl-ctrl-icon"),this.styleButton.classList.add("mapboxgl-style-switcher"),this.styleButton.addEventListener("click",t=>{this.events&&this.events.onSelect&&this.events.onSelect(t)||this.openModal()}),document.addEventListener("click",this.onDocumentClick),this.controlContainer.appendChild(this.styleButton),this.controlContainer.appendChild(this.mapStyleContainer),this.controlContainer}onRemove(){this.controlContainer&&this.controlContainer.parentNode&&this.map&&this.styleButton&&(this.styleButton.removeEventListener("click",this.onDocumentClick),this.controlContainer.parentNode.removeChild(this.controlContainer),document.removeEventListener("click",this.onDocumentClick),this.map=void 0)}closeModal(){this.mapStyleContainer&&this.styleButton&&(this.mapStyleContainer.style.display="none",this.styleButton.style.display="block")}openModal(){this.mapStyleContainer&&this.styleButton&&(this.mapStyleContainer.style.display="block",this.styleButton.style.display="none")}onDocumentClick(t){this.controlContainer&&!this.controlContainer.contains(t.target)&&this.closeModal()}}MapboxStyleSwitcherControl.DEFAULT_STYLE="Streets",MapboxStyleSwitcherControl.DEFAULT_STYLES=[{title:"Dark",uri:"mapbox://styles/mapbox/dark-v10"},{title:"Light",uri:"mapbox://styles/mapbox/light-v10"},{title:"Outdoors",uri:"mapbox://styles/mapbox/outdoors-v11"},{title:"Satellite",uri:"mapbox://styles/mapbox/satellite-streets-v11"},{title:"Streets",uri:"mapbox://styles/mapbox/streets-v11"}],exports.MapboxStyleSwitcherControl=MapboxStyleSwitcherControl;