!function(){"use strict";if("undefined"!=typeof exports){var t=require("lodash");t.extend(exports,r(t))}else window.ring=r(_);function r(u){var p={};p.Object=function(){},u.extend(p.Object,{__mro__:[p.Object],__properties__:{__ringConstructor__:function(){}},__classId__:1,__parents__:[],__classIndex__:{1:p.Object},$extend:function(t){return p.create([this],t)}}),u.extend(p.Object.prototype,{__ringConstructor__:p.Object.__properties__.__ringConstructor__});var f=function(t){function r(){}r.prototype=t;var n=new r;return n.__proto__=t,n};p.__objectCreate=f;var l=3,d=/xyz/.test(function(){xyz()})?/\$super\b/:/.*/;return p.create=function(){var t=u.toArray(arguments);t.reverse();var r=t[0],n=2<=t.length?t[1]:[];n instanceof Array||(n=[n]),u.each(n,function(t){!function(r){if(r.__classId__)return;var t=Object.getOwnPropertyNames?(n={},function t(r){r!==Object.prototype&&(u.extend(n,u.chain(Object.getOwnPropertyNames(r)).map(function(t){return[t,!0]}).fromPairs().value()),t(Object.getPrototypeOf(r)))}(r.prototype),u.fromPairs(u.map(u.keys(n),function(t){return[t,r.prototype[t]]}))):r.prototype;var n;t=u.chain(t).map(function(t,r){return[r,t]}).filter(function(t){return"constructor"!==t[0]&&"__proto__"!==t[0]}).fromPairs().value();var e=l++;u.extend(r,{__mro__:[r,p.Object],__properties__:u.extend({},t,{__ringConstructor__:function(){this.$super.apply(this,arguments);var t=this.$super;this.$super=null;try{r.apply(this,arguments)}finally{this.$super=t}}}),__classId__:e,__parents__:[p.Object],__classIndex__:{1:p.Object},__ringConvertedObject__:!0}),r.__classIndex__[e]=r}(t)}),0===n.length&&(n=[p.Object]);var e=r.constructor!==Object?r.constructor:void 0;delete(r=u.clone(r)).constructor,e?r.__ringConstructor__=e:(e=r.init,delete r.init,e&&(r.__ringConstructor__=e));var _=r.classInit;delete r.classInit;var o=function(){this.$super=null,this.__ringConstructor__.apply(this,arguments)};o.__properties__=r;var c=u.map(n,"__mro__");c=c.concat([n]);var s=[o].concat(function(t){var r=[],n=u.clone(t);for(;;){for(var e=!1,_=0;_<n.length;_++)if(0!==n[_].length){var o=n[_][0],c=u.find(n,function(t){return u.includes(u.drop(t),o)});if(!c){e=!0,r.push(o),n=u.map(n,function(t){return u.head(t)===o?u.drop(t):t});break}}if(!e){if(u.every(n,function(t){return 0===t.length}))return r;throw new p.ValueError("Cannot create a consistent method resolution order (MRO)")}}}(c)),i=Object.prototype;u.forEachRight(s,function(o){var c=f(i);u.extend(c,o.__properties__),u.each(u.keys(c),function(t){var r,n,e,_=c[t];"function"!=typeof _||!d.test(_)||_.__classId__||"__ringConstructor__"!==t&&o.__ringConvertedObject__||(c[t]=(r=t,n=_,e=i,function(){var t=this.$super;this.$super=e[r];try{return n.apply(this,arguments)}finally{this.$super=t}}))}),c.constructor=o,i=c});var a=l++;return o.__mro__=s,o.__parents__=n,o.prototype=i,o.__classId__=a,o.__classIndex__={},u.each(o.__mro__,function(t){o.__classIndex__[t.__classId__]=t}),o.__classInit__=_,u.forEachRight(o.__mro__,function(t){if(t.__classInit__){var r=t.__classInit__(o.prototype);void 0!==r&&(o.prototype=r)}}),o.$extend=p.Object.$extend,o},p.instance=function(t,r){return null!==t&&"object"==typeof t&&t.constructor&&t.constructor.__classIndex__&&"function"==typeof r&&"number"==typeof r.__classId__?void 0!==t.constructor.__classIndex__[r.__classId__]:"string"==typeof r?typeof t===r:t instanceof r},p.Error=p.create({name:"ring.Error",defaultMessage:"",constructor:function(t){this.message=t||this.defaultMessage},classInit:function(t){var r=[],n=function(t){t&&(r.push(t),n(t.__proto__))};n(t);var e=new Error;return u.forEachRight(r,function(t){var n=f(e);u.forOwn(t,function(t,r){"__proto__"!==r&&(n[r]=t)}),n.constructor=t.constructor,e=n}),e}}),p.ValueError=p.create([p.Error],{name:"ring.ValueError"}),p.getSuper=function(t,r,n){for(var e,_=r.constructor.__mro__,o=0;o<_.length;o++)if(_[o]===t){e=o;break}if(void 0===e)throw new p.ValueError("Class not found in instance's method resolution order.");var c,s=function(t,r){return 0===r?t:s(t.__proto__,r-1)},i=s(r.constructor.prototype,e+1);return c="constructor"!==n&&"init"!==n?i[n]:i.__ringConstructor__,p.instance(c,"function")?u.bind(c,r):c},p}}();