!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("cssobj",t):e.cssobj=t()}(this,function(){"use strict";function e(e){return!isNaN(parseFloat(e))&&isFinite(e)}function t(e){return null==e||"function"!=typeof e&&"object"!=typeof e}function r(e,t){return{}.hasOwnProperty.call(e,t)}function n(e,t){e=e||{};for(var n in t)!r(t,n)||n in e||(e[n]=t[n]);return e}function o(e){var t,n,o,a=Object(e);for(t=1;t<arguments.length;t++){n=Object(arguments[t]);for(o in n)r(n,o)&&(a[o]=n[o])}return a}function a(e){return e.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()})}function i(e){return e.charAt(0).toUpperCase()+e.substr(1)}function u(e){return"string"==typeof e}function c(e,r){var n,o,a=Array.isArray(r)?r:String(r).split("."),i=1,u={ok:i,path:a,obj:e};for(n=0;n<a.length;n++){if(o=a[n],!e.hasOwnProperty(o)||t(e[o])){i=0;break}e=e[o]}return u.ok=i,u.path=a.slice(0,n),u.obj=e,u}function f(e,t,n){e[t]=e[t]||{};for(var o=arguments,a=2;a<o.length;a++){n=o[a];for(var i in n)r(n,i)&&(e[t][i]=n[i])}return e[t]}function s(e,t,r,n,o){var a=e[t];a=e[t]=t in e?Array.isArray(a)?a:[a]:[],o&&a.indexOf(r)>-1||(n?a.unshift(r):a.push(r))}function l(e,t,r,n,o){for(var a,i,u=e,c=[];u;){if(t(u)){if(n)for(a=0;a<c.length;a++)s(u,n,c[a],!1,!0);c[0]&&o&&(c[0][o]=u),c.unshift(u)}u=u.parent}for(a=0;a<c.length;a++)i=c[a],c[a]=r?i[r]:i;return c}function d(e,t,r){if(e.indexOf(t)<0)return[e];for(var n,o=0,a=0,i="",u=0,c=[];n=e.charAt(o);o++)i?n==i&&"\\"!=e.charAt(o-1)&&(i=""):(('"'==n||"'"==n)&&(i=n),r||(("("==n||"["==n)&&a++,(")"==n||"]"==n)&&a--),a||n!=t||(c.push(e.substring(u,o)),u=o+1));return c.concat(e.substring(u))}function p(e){return"string"==typeof e&&e||"number"==typeof e&&isFinite(e)}function h(e){return L.call(e)==U||L.call(e)==M}function m(e){return"function"==typeof e}function v(e,t,n,o){if(o&&(t.nodes=[],t.ref={},n&&(t.diff={})),n=n||{},n.obj=e,L.call(e)==M){var a=[];n.at=B.exec(n.key);for(var i=0;i<e.length;i++){var u=n[i],c=v(e[i],t,n[i]||{parent:n,src:e,parentNode:a,index:i});t.diff&&u!=c&&s(t.diff,c?"added":"removed",c||u),a.push(c)}return a}e[V]&&(t.ref[e[V]]=n);var l=n.prevVal=n.lastVal;if(S in e){var p=m(e[S])?e[S](!n.disabled,n,t):e[S];if(!p)return;n.test=p}var b=n.children=n.children||{};n.lastRaw=n.rawVal||{},n.lastVal={},n.rawVal={},n.prop={},n.diff={};var x=0|e[G],E=[],R=function(e,r,n){var o=r in b,a=f(b,r,n);a.selPart=a.selPart||d(r,",");var i=v(e,t,a);i&&(b[r]=i),l&&(o?!i&&s(t.diff,"removed",b[r]):i&&s(t.diff,"added",i)),i||delete n.parent.children[r]};"selText"in n||g(n,t);for(var j in e)if(r(e,j))if(!h(e[j])||L.call(e[j])==M&&!h(e[j][0])){if("@"==j[0]){R([].concat(e[j]).reduce(function(e,t){return e[t]=";",e},{}),j,{parent:n,src:e,key:j,inline:!0});continue}var T=function(r){r!=S&&y(n,e,r,t)};x?E.push([T,j]):T(j)}else R(e[j],j,{parent:n,src:e,key:j});if(l){for(j in b)j in e||(s(t.diff,"removed",b[j]),delete b[j]);var w=function(){var e=F(n.lastVal),r=F(l).filter(function(t){return e.indexOf(t)<0});r.length&&(n.diff.removed=r),F(n.diff).length&&s(t.diff,"changed",n)};x?E.push([w,null]):w()}return x&&s(t,"_order",{order:x,func:E}),t.nodes.push(n),n}function g(e,t){var r=t.config,n=l(e,function(e){return e.key}).pop();if(e.parentRule=l(e.parent,function(e){return e.type==_}).pop()||null,n){var o,a=n.key,i=a.match(z);i?(e.type=_,e.at=i.pop(),o="media"==e.at,o&&(e.selPart=d(a.replace(z,""),",")),e.groupText=o?"@"+e.at+b(l(e,function(e){return e.type==_},"selPart","selChild","selParent"),""," and"):a,e.selText=l(e,function(e){return e.selText&&!e.at},"selText").pop()||""):B.test(a)?(e.type="at",e.selText=a):(e.selText=""+b(l(n,function(e){return e.selPart&&!e.at},"selPart","selChild","selParent"),""," ",!0),r),e.selText=x(r,"selector",e.selText,e,t),e.selText&&(e.selTextPart=d(e.selText,",")),e!==n&&(e.ruleNode=n)}}function y(t,n,o,a,i){var u=t.prevVal,c=t.lastVal,f=e(o)?i:o,l=t.lastRaw[f],d=u&&u[f],v={node:t,result:a};l&&(v.raw=l[0]),![].concat(n[o]).forEach(function(e){v.cooked=d,v.raw=l=m(e)?e(v):e;var n=x(a.config,"value",l,f,t,a,i);if(h(n))for(var o in n)r(n,o)&&y(t,n,o,a,f);else s(t.rawVal,f,l,!0),p(n)&&(s(t.prop,f,n,!0),d=c[f]=n)}),u&&(f in u?u[f]!=c[f]&&s(t.diff,"changed",f):s(t.diff,"added",f))}function b(e,t,r,n){return e.length?e[0].reduce(function(o,a){var i,u=t?t+r:t;return n?(i=d(a,"&"),u=i.length>1?i.join(t):u+a):u+=a,o.concat(b(e.slice(1),u,r,n))},[]):t}function x(e,t){var r=[].slice.call(arguments,2),n=e.plugins;return[].concat(n).reduce(function(e,n){return n[t]?n[t].apply(null,[e].concat(r)):e},r.shift())}function E(e){null!=e._order&&(e._order.sort(function(e,t){return e.order-t.order}).forEach(function(e){e.func.forEach(function(e){e[0](e[1])})}),e._order=[])}function R(e){return e=n(e,{plugins:[],intros:[]}),function(t,r){var n=function(t,r){return arguments.length>1&&(o.state=r||{}),t&&(o.obj=m(t)?t():t),o.root=v(f({},"",o.intro,o.obj),o,o.root,!0),E(o),o=x(e,"post",o),m(e.onUpdate)&&e.onUpdate(o),o},o={intro:{},update:n,config:e};return![].concat(e.intros).forEach(function(e){f(o,"intro",m(e)?e(o):e)}),n(t,r||e.state),o}}function j(e,t,r){var n=e.getElementById(t),o=e.getElementsByTagName("head")[0];if(n){if(r.append)return n;n.parentNode&&n.parentNode.removeChild(n)}if(n=e.createElement("style"),o.appendChild(n),n.setAttribute("id",t),r.attrs)for(var a in r.attrs)n.setAttribute(a,r.attrs[a]);return n}function T(e){var t=e.prop;return Object.keys(t).map(function(r){if("$"==r[0])return"";for(var n,o="",a=t[r].length;a--;)n=t[r][a],o+=e.inline?r:A(r,!0)+":"+n+";";return o})}function w(e){if(!(e in D||"-"==e[0]))for(var t,r=i(e),n=W.length;n--;)if(t=W[n]+r,t in D)return t}function A(e,t){if("$"==e[0])return"";var r=H[e]||(H[e]=w(e)||e);return t?a(Z.test(r)?i(r):"float"==e&&e||r):r}function P(e,t,r){var n,o=/^(.*)!(important)\s*$/i.exec(r),a=A(t),i=A(t,!0);o?(n=o[1],o=o[2],e.setProperty?e.setProperty(i,n,o):(e[i.toUpperCase()]=r,e.cssText=e.cssText)):e[a]=r}function k(e){function t(e){var t=g.indexOf(e);t>-1&&(e.mediaEnabled=!1,b(e),g.splice(t,1)),[e.omGroup].concat(e.omRule).forEach(m)}e=e||{},e.vendors&&(W=e.vendors);var r=e.id||"cssobj"+N(),n=e.frame,o=n?n.contentDocument||n.contentWindow.document:document,a=j(o,r,e),i=a.sheet||a.styleSheet,f=/page/i,s=function(e){return e?f.test(e.at)||e.parentRule&&f.test(e.parentRule.at):!1},l=function(e){var t="omGroup"in e?e:e.parentRule;return t&&t.omGroup||i},d=function(e){return!e.parentRule||null!==e.parentRule.omGroup},p=function(e,t,r){return e.deleteRule?e.deleteRule(t.keyText||r):e.removeRule(r)},h=function(e){for(var t=e.cssRules||e.rules,r=t.length;r--;)p(e,t[r],r)},m=function(e){if(e){var t=e.parentRule||i,r=t.cssRules||t.rules,n=function(r,n){return r===e?(p(t,e,n),!0):void 0};[].some.call(r,n)}},v=function(e,t,r){if(r){var n=l(e),o=e.parentRule;if(d(e))return e.omRule=I(n,t,r,e);if(o){if(o.mediaEnabled)return[].concat(e.omRule).forEach(m),e.omRule=I(n,t,r,e);e.omRule&&(e.omRule.forEach(m),delete e.omRule)}}},g=[],y=function(){g.forEach(function(e){e.mediaEnabled=e.mediaTest(o),b(e)})};window.attachEvent?window.attachEvent("onresize",y):window.addEventListener&&window.addEventListener("resize",y,!0);var b=function(t,r){if(t){if(t.constructor===Array)return t.map(function(e){b(e,r)});if((!t.key||"$"!=t.key[0])&&t.prop){if("media"==t.at&&t.selParent&&t.selParent.postArr)return t.selParent.postArr.push(t);t.postArr=[];var n=t.children,a="group"==t.type;if(s(t)&&(r=r||[]),a&&!s(t)){var u=t.obj.$groupTest,c="media"==t.at&&e.media;if(u||c){t.omGroup=null;var f=u||c&&function(){var r=e.media;return r?t.selPart.some(function(e){return new RegExp(r,"i").test(e.trim())}):!0}||function(){return!0};try{var l=f(o);t.mediaTest=f,t.mediaEnabled=l,g.push(t)}catch(p){}}else[""].concat(W).some(function(e){return t.omGroup=I(i,"@"+(e?"-"+e.toLowerCase()+"-":e)+t.groupText.slice(1),[],t).pop()||null})}var h=t.selTextPart,m=T(t);m.join("")&&(s(t)||v(t,h,m),r&&r.push(h?h+" {"+m.join("")+"}":m));for(var y in n)""===y?t.postArr.push(n[y]):b(n[y],r);a&&s(t)&&d(t)&&(v(t,t.groupText,r),r=null);var x=t.postArr;delete t.postArr,x.map(function(e){b(e,r)})}}},x=e.media;return{post:function(r){var n=x!=e.media;if(x=e.media,y(),r.set=function(e,t){var n=Array.isArray(e)?e:[e],o=r.obj;u(n[0])&&"$"===n[0][0]&&(o=r.ref[n.shift().slice(1)].obj);var a=c(o,n);a.ok&&$(a.obj,t),r.update()},r.cssdom=a,!r.diff||n)n&&(g=[],h(i)),b(r.root);else{var o=r.diff;o.added&&o.added.forEach(function(e){b(e)}),o.removed&&o.removed.forEach(function(e){e.selChild&&e.selChild.forEach(t),t(e)}),o.changed&&o.changed.forEach(function(e){var t=e.omRule,r=e.diff;t||(t=v(e,e.selTextPart,T(e))),[].concat(r.added,r.changed).forEach(function(r){r&&t&&t.forEach(function(t){try{P(t.style,r,e.prop[r][0])}catch(n){}})}),r.removed&&r.removed.forEach(function(e){var r=A(e,!0);r&&t&&t.forEach(function(e){try{e.style.removeProperty?e.style.removeProperty(r):e.style.removeAttribute(r)}catch(t){}})})})}return r}}}function O(e){e=e||{};var t=e.space="string"!=typeof e.space?"function"==typeof e.random?e.random():N():e.space,r=e.localNames=e.localNames||{},n=function(e){return"!"==e[0]?e.substr(1):e in r?r[e]:e+t},o=function(e){if(!u(e))return e;for(var t,r,o=d(e,".",!0),a=o[0],i=1,c=o.length;c>i;i++)t=o[i],t?(r=t.search(J),a+="."+(0>r?n(t):n(t.substr(0,r))+t.substr(r))):a+=".";return a},a=function(e){return u(e)?o(e.replace(/\s+\.?/g,".").replace(/^([^:\s.])/i,".$1")).replace(/\./g," ").trim():e},i=function(e){return e.space=t,e.localNames=r,e.mapSel=o,e.mapClass=a,e};return{selector:function(e,t,r){return t.at?e:(r.mapSel||i(r),o(e))},post:i}}function C(e,t,r){t=t||{};var n=t.local;return t.local=n?n&&"object"==typeof n?n:{}:{space:""},t.plugins=[].concat(t.plugins||[],O(t.local),k(t.cssom)),R(t)(e,r)}var $=Object.assign||o,N=function(){var e=0;return function(t){return e++,"_"+(t||"")+Math.floor(Math.random()*Math.pow(2,32)).toString(36)+e+"_"}}(),V="$id",G="$order",S="$test",_="group",F=Object.keys,L={}.toString,M=L.call([]),U=L.call({}),z=/^@(media|document|supports|page|[\w-]*keyframes)/i,B=/^\s*@/i,I=function(e,t,r,n){var o=/@import/i.test(n.selText),a=e.cssRules||e.rules,i=0,u=[],c=n.inline?r.map(function(e){return[n.selText," ",e]}):[[t,"{",r.join(""),"}"]];return c.forEach(function(r){if(e.cssRules)try{i=o?0:a.length,e.appendRule?e.appendRule(r.join("")):e.insertRule(r.join(""),i),u.push(a[i])}catch(n){}else e.addRule&&[].concat(t).forEach(function(t){try{o?(i=e.addImport(r[2]),u.push(e.imports[i])):/^\s*@/.test(t)||(e.addRule(t,r[2],a.length),u.push(a[a.length-1]))}catch(n){}})}),u},W=["Webkit","Moz","ms","O"],Z=new RegExp("^(?:"+W.join("|")+")[A-Z]"),D=document.createElement("div").style,q=function(e){for(var t=e.length;t--;)if(e[t]in D)return e[t]},H={"float":q(["styleFloat","cssFloat","float"])},J=/[ \~\\@$%^&\*\(\)\+\=,\/';\:"?><[\]\\{}|`]/;return C.version="1.3.6",C});