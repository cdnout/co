!function(e,t){"object"==typeof exports&&typeof module<"u"?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=typeof globalThis<"u"?globalThis:e||self).TypeIt=t()}(this,function(){"use strict";var t=e=>Array.isArray(e),x=e=>t(e)?e:[e];function $(e){function t(e){return x(e).forEach(e=>r.set(Symbol(e.char?.innerText),{...e})),this}let n=()=>Array.from(r.values()),r=new Map;return t(e),{add:t,set:function(e,t){var n=r.keys();r.set(n[e],t)},wipe:function(){r=new Map,t(e)},reset:function(){r.forEach(e=>delete e.done)},destroy:e=>r.delete(e),done:(e,t=!1)=>t?r.delete(e):r.get(e).done=!0,getItems:(e=!1)=>e?n():n().filter(e=>!e.done),getQueue:()=>r,getTypeable:()=>n().filter(e=>e.typeable)}}var C=e=>Array.from(e),r=e=>document.createTextNode(e);let I=e=>([...e.childNodes].forEach(t=>{if(t.nodeValue)return[...t.nodeValue].forEach(e=>{t.parentNode.insertBefore(r(e),t)}),void t.remove();I(t)}),e);var k=e=>{let t=document.implementation.createHTMLDocument();return t.body.innerHTML=e,I(t.body)};const H="data-typeit-id",z="ti-cursor",P={started:!1,completed:!1,frozen:!1,destroyed:!1},A={breakLines:!0,cursor:!0,cursorChar:"|",cursorSpeed:1e3,deleteSpeed:null,html:!0,lifeLike:!0,loop:!1,loopDelay:750,nextStringDelay:750,speed:100,startDelay:250,startDelete:!1,strings:[],waitUntilVisible:!1,beforeString:()=>{},afterString:()=>{},beforeStep:()=>{},afterStep:()=>{},afterComplete:()=>{}},O=`[${H}]:before {content: '.'; display: inline-block; width: 0; visibility: hidden;}`;function B(e,t=!1){let n=document.createTreeWalker(e,NodeFilter.SHOW_ALL,{acceptNode:e=>e.classList?.contains(z)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}),r,i=[];for(;r=n.nextNode();)r.originalParent=r.parentNode,i.push(r);return t?i.reverse():i}function R(e,t=!0){return t?B(k(e)):C(e).map(r)}var F=e=>document.createElement(e),q=(e,t="")=>{let n=F("style");n.id=t,n.appendChild(r(e)),document.head.appendChild(n)},V=e=>e=t(e)?e:[e/2,e/2],_=(e,t)=>Math.abs(Math.random()*(e+t-(e-t))+(e-t));let j=e=>e/2;var Q=e=>"value"in e;let U=e=>"function"==typeof e?e():e;var W=e=>Number.isInteger(e);let J=(e,t=document,n=!1)=>t["querySelector"+(n?"All":"")](e),X=e=>"BODY"===e?.tagName;var Y=(e,t)=>Object.assign({},e,t),G=t=>{if(t){let e=t.parentNode;(1<e.childNodes.length?t:e).remove()}};let K={"font-family":"","font-weight":"","font-size":"","font-style":"","line-height":"",color:"","margin-left":"-.125em","margin-right":".125em"};var Z=(e,t)=>new Array(t).fill(e);const ee=({queueItems:e,selector:r,cursorPosition:t,to:n})=>{if(W(r))return-1*r;let i=new RegExp("END","i").test(n),a=r?[...e].reverse().findIndex(({char:e})=>{let t=e.parentElement,n=t.matches(r);return!(!i||!n)||n&&t.firstChild.isSameNode(e)}):-1;a<0&&(a=i?0:e.length-1);n=i?0:1;return a-t+n};return function(e,t={}){let i=async(e,t,n=!1)=>{var r,i,a;S.frozen&&await new Promise(e=>{this.unfreeze=()=>{S.frozen=!1,e()}}),n||await L.beforeStep(this),r=e,i=t,a=v,await new Promise(e=>{a.push(setTimeout(async()=>{await r(),e()},i||0))}),n||await L.afterStep(this)},r=()=>Q(b),s=(e=0)=>function(e){let{speed:t,deleteSpeed:n,lifeLike:r}=e;return n=null!==n?n:t/3,r?[_(t,j(t)),_(n,j(n))]:[t,n]}(L)[e],a=()=>(e=>Q(e)?C(e.value):B(e,!0).filter(e=>!(0<e.childNodes.length)))(b),u=(e,t)=>{N.add(e);var[e={}]=[t];return(e=e.delay)&&N.add({delay:e}),this},c=()=>w??T,d=(e={})=>[{func:()=>n(e)},{func:()=>n(L)}],l=e=>{var t=L.nextStringDelay;N.add([{delay:t[0]},...e,{delay:t[1]}])},o=async()=>{if(!r()&&D&&b.appendChild(D),M){var n=E,i=L,a=b;let e=`[${H}='${n}']`+" ."+z,r=getComputedStyle(a),t=Object.entries(K).reduce((e,[t,n])=>`${e} ${t}: var(--ti-cursor-${t}, ${n||r[t]});`,"");q(`@keyframes blink-${n} { 0% {opacity: 0} 49% {opacity: 0} 50% {opacity: 1} } ${e} { display: inline; letter-spacing: -1em; ${t} animation: blink-${n} ${i.cursorSpeed/1e3}s infinite; } ${e}.with-delay { animation-delay: 500ms; } ${e}.disabled { animation: none; }`,n)}},f=e=>{M&&D&&(D.classList.toggle("disabled",e),D.classList.toggle("with-delay",!e))},h=async(e=!0)=>{S.started=!0;try{for(var[t,n]of N.getQueue())n.done||(n.typeable&&!S.frozen&&f(!0),await(async(e,t)=>{let n=async()=>e.func?.call(globalThis);e.delay?await t(async()=>{await n()},e.delay):await n()})(n,i),f(!1),N.done(t,!e));if(!e)return this;if(S.completed=!0,await L.afterComplete(this),!L.loop)throw"";let r=L.loopDelay;i(async()=>{var e,t=r[0],n=c();n&&await y({value:n});for(e of N.getTypeable())await i(g,s(1));N.reset(),N.set(0,{delay:t}),await 0,h()},r[1])}catch{}return this},y=async e=>{T=(e=e,t=T,n=a(),Math.min(Math.max(t+e,0),n.length));var t=b,e=a(),n=T;e=e[n-1],n=J("."+z,t),(t=e?.parentNode||t).insertBefore(n,e||null)},p=t=>{var n=b;if(Q(n))n.value=""+n.value+t.textContent;else{t.innerHTML="";let e=!X(t.originalParent)&&t.originalParent||n;e.insertBefore(t,J("."+z,e)||null)}},n=async e=>L=Y(L,e),m=async()=>{r()?b.value="":a().forEach(G)},g=()=>{var e=a();e.length&&(r()?b.value=b.value.slice(0,-1):G(e[T]))},b=(this.break=function(e){return u({func:()=>p(F("BR")),typeable:!0},e)},this.delete=function(e=null,t={}){e=U(e);let n=d(t),r=e,{instant:i,to:a}=t,l=N.getTypeable(),o=null===r?l.length:W(r)?r:ee({queueItems:l,selector:r,cursorPosition:c(),to:a});return u([n[0],...Z({func:g,delay:i?0:s(1)},o),n[1]],t)},this.empty=function(e={}){return u({func:m},e)},this.exec=function(e,t={}){var n=d(t);return u([n[0],{func:()=>e(this)},n[1]],t)},this.move=function(e,t={}){e=U(e);let n=d(t),{instant:r,to:i}=t,a=ee({queueItems:N.getTypeable(),selector:null===e?"":e,to:i,cursorPosition:c()}),l=a<0?-1:1;return w=c()+a,u([n[0],...Z({func:()=>y(l),delay:r?0:s()},Math.abs(a)),n[1]],t)},this.options=function(e,t={}){return e=U(e),n(e),u({},t)},this.pause=function(e,t={}){return u({delay:U(e)},t)},this.type=function(e,t={}){e=U(e);let n=t["instant"],r=d(t),i=R(e,L.html).map(e=>({func:()=>p(e),char:e,delay:n||/<(.+)>(.*?)<\/(.+)>/.test(e.outerHTML)?0:s(),typeable:e.nodeType===Node.TEXT_NODE})),a=[r[0],{func:async()=>L.beforeString(e,this)},...i,{func:async()=>L.afterString(e,this)},r[1]];return u(a,t)},this.is=function(e){return S[e]},this.destroy=function(e=!0){v=(v.forEach(clearTimeout),[]),U(e)&&D&&G(D),S.destroyed=!0},this.freeze=function(){S.frozen=!0},this.unfreeze=()=>{},this.reset=function(e){for(var t in this.is("destroyed")||this.destroy(),e?(N.wipe(),e(this)):N.reset(),T=0,S)S[t]=!1;return b[r()?"value":"innerHTML"]="",this},this.go=function(){return S.started||(o(),L.waitUntilVisible?(n=b,r=h.bind(this),new IntersectionObserver((e,t)=>{e.forEach(e=>{e.isIntersecting&&(r(),t.unobserve(n))})},{threshold:1}).observe(n)):h()),this;var n,r},this.flush=function(e=()=>{}){return o(),h(!1).then(e),this},this.getQueue=()=>N,this.getOptions=()=>L,this.updateOptions=e=>n(e),this.getElement=()=>b,"string"==typeof(e=e)?J(e):e),v=[],T=0,w=null,S=Y({},P),L=Y(A,t);L=Y(L,{html:!r()&&L.html,nextStringDelay:V(L.nextStringDelay),loopDelay:V(L.loopDelay)});let E=Math.random().toString().substring(2,9),N=$([{func:()=>{},delay:L.startDelay}]),M=(b.dataset.typeitId=E,q(O),L.cursor&&!r()),D=(()=>{if(!r()){let e=F("span");return e.className=z,M?e.innerHTML=k(L.cursorChar).innerHTML:e.style.visibility="hidden",e}})();if(L.strings=(e=>{let t=b.innerHTML;return t?(b.innerHTML="",L.startDelete?(b.innerHTML=t,I(b),l([{func:g}]),e):t.replace(/<!--(.+?)-->/g,"").trim().split(/<br(?:\s*?)(?:\/)?>/).concat(e)):e})(x(L.strings)),L.strings.length){let n=L.strings.filter(e=>!!e);n.forEach((e,t)=>{this.type(e),t+1!==n.length&&(e=L.breakLines?[{func:()=>p(F("BR")),typeable:!0}]:Z({func:g,delay:s(1)},N.getTypeable().length),l(e))})}}});