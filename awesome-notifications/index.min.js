!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.AWN=e():t.AWN=e()}(self,function(){return(()=>{"use strict";var o={d:(t,e)=>{for(var n in e)o.o(e,n)&&!o.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},t={};function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}o.r(t),o.d(t,{default:()=>E});var e,n={maxNotifications:10,animationDuration:300,position:"bottom-right",labels:{tip:"Tip",info:"Info",success:"Success",warning:"Attention",alert:"Error",async:"Loading",confirm:"Confirmation required",confirmOk:"OK",confirmCancel:"Cancel"},icons:{tip:"question-circle",info:"info-circle",success:"check-circle",warning:"exclamation-circle",alert:"exclamation-triangle",async:"cog fa-spin",confirm:"exclamation-triangle",prefix:"<i class='fa fas fa-fw fa-",suffix:"'></i>",enabled:!0},replacements:{tip:null,info:null,success:null,warning:null,alert:null,async:null,"async-block":null,modal:null,confirm:null,general:{"<script>":"","<\/script>":""}},messages:{tip:"",info:"",success:"Action has been succeeded",warning:"",alert:"Action has been failed",confirm:"This action can't be undone. Continue?",async:"Please, wait...","async-block":"Loading"},formatError:function(t){if(t.response){if(!t.response.data)return"500 API Server Error";if(t.response.data.errors)return t.response.data.errors.map(function(t){return t.detail}).join("<br>");if(t.response.statusText)return"".concat(t.response.status," ").concat(t.response.statusText,": ").concat(t.response.data)}return t.message||t},durations:{global:5e3,success:null,info:null,tip:null,warning:null,alert:null},minDurations:{async:1e3,"async-block":1e3}},r=(e=[{key:"icon",value:function(t){return this.icons.enabled?"".concat(this.icons.prefix).concat(this.icons[t]).concat(this.icons.suffix):""}},{key:"label",value:function(t){return this.labels[t]}},{key:"duration",value:function(t){t=this.durations[t];return null===t?this.durations.global:t}},{key:"toSecs",value:function(t){return"".concat(t/1e3,"s")}},{key:"applyReplacements",value:function(t,e){if(!t)return this.messages[e]||"";for(var n=0,o=["general",e];n<o.length;n++){var i=o[n];if(this.replacements[i])for(var r in this.replacements[i])t=t.replace(r,this.replacements[i][r])}return t}},{key:"override",value:function(t){return t?new l(t,this):this}},{key:"defaultsDeep",value:function(t,e){var n,o={};for(n in t)e.hasOwnProperty(n)?o[n]="object"===i(t[n])&&null!==t[n]?this.defaultsDeep(t[n],e[n]):e[n]:o[n]=t[n];return o}}],function(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}(l.prototype,e),l),a="awn",e={popup:"".concat(a,"-popup"),toast:"".concat(a,"-toast"),btn:"".concat(a,"-btn"),confirm:"".concat(a,"-confirm")},c={prefix:e.toast,klass:{label:"".concat(e.toast,"-label"),content:"".concat(e.toast,"-content"),icon:"".concat(e.toast,"-icon"),progressBar:"".concat(e.toast,"-progress-bar"),progressBarPause:"".concat(e.toast,"-progress-bar-paused")},ids:{container:"".concat(e.toast,"-container")}},s={prefix:e.popup,klass:{buttons:"".concat(a,"-buttons"),button:e.btn,successBtn:"".concat(e.btn,"-success"),cancelBtn:"".concat(e.btn,"-cancel"),title:"".concat(e.popup,"-title"),body:"".concat(e.popup,"-body"),content:"".concat(e.popup,"-content"),dotAnimation:"".concat(e.popup,"-loading-dots")},ids:{wrapper:"".concat(e.popup,"-wrapper"),confirmOk:"".concat(e.confirm,"-ok"),confirmCancel:"".concat(e.confirm,"-cancel")}},u={klass:{hiding:"".concat(a,"-hiding")},lib:a};function l(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:n;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,l),Object.assign(this,this.defaultsDeep(e,t))}var f=(a=[{key:"beforeInsert",value:function(){}},{key:"afterInsert",value:function(){}},{key:"insert",value:function(){return this.beforeInsert(),this.el=this.parent.appendChild(this.newNode),this.afterInsert(),this}},{key:"replace",value:function(t){var e=this;if(this.getElement())return this.beforeDelete().then(function(){return e.updateType(t.type),e.parent.replaceChild(t.newNode,e.el),e.el=e.getElement(t.newNode),e.afterInsert(),e})}},{key:"beforeDelete",value:function(){var e=this,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.el,o=0;return this.start&&(o=this.options.minDurations[this.type]+this.start-Date.now())<0&&(o=0),new Promise(function(t){setTimeout(function(){n.classList.add(u.klass.hiding),setTimeout(t,e.options.animationDuration)},o)})}},{key:"delete",value:function(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.el;return this.getElement(e)?this.beforeDelete(e).then(function(){e.remove(),t.afterDelete()}):null}},{key:"afterDelete",value:function(){}},{key:"getElement",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.el;return t?document.getElementById(t.id):null}},{key:"addEvent",value:function(t,e){this.el.addEventListener(t,e)}},{key:"toggleClass",value:function(t){this.el.classList.toggle(t)}},{key:"updateType",value:function(t){this.type=t,this.duration=this.options.duration(this.type)}}],function(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}(p.prototype,a),p);function p(t,e,n,o,i){!function(t){if(!(t instanceof p))throw new TypeError("Cannot call a class as a function")}(this),this.newNode=document.createElement("div"),e&&(this.newNode.id=e),n&&(this.newNode.className=n),o&&(this.newNode.style.cssText=o),this.parent=t,this.options=i}var d=(function(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}(y.prototype,[{key:"pause",value:function(){this.paused=!0,window.clearTimeout(this.timerId),this.remaining-=new Date-this.start}},{key:"resume",value:function(){var t=this;this.paused=!1,this.start=new Date,window.clearTimeout(this.timerId),this.timerId=window.setTimeout(function(){window.clearTimeout(t.timerId),t.callback()},this.remaining)}},{key:"toggle",value:function(){this.paused?this.resume():this.pause()}}]),y);function y(t,e){!function(t){if(!(t instanceof y))throw new TypeError("Cannot call a class as a function")}(this),this.callback=t,this.remaining=e,this.resume()}function h(t){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function m(t,e){return(m=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var v=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&m(t,e)}(r,f);var t,n,o,i=(n=r,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,e=b(n);return function(t,e){if(e&&("object"===h(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,o?(t=b(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments))});function r(t,e,n,o){return function(t){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this),(n=i.call(this,o,"".concat(c.prefix,"-").concat(Math.floor(Date.now()-100*Math.random())),"".concat(c.prefix," ").concat(c.prefix,"-").concat(e),"animation-duration: ".concat(n.toSecs(n.animationDuration),";"),n)).updateType(e),n.setInnerHtml(t),n}return t=[{key:"setInnerHtml",value:function(t){"alert"===this.type&&t&&(t=this.options.formatError(t)),t=this.options.applyReplacements(t,this.type),this.newNode.innerHTML='<div class="awn-toast-wrapper">'.concat(this.progressBar).concat(this.label,'<div class="').concat(c.klass.content,'">').concat(t,'</div><span class="').concat(c.klass.icon,'">').concat(this.options.icon(this.type),"</span></div>")}},{key:"beforeInsert",value:function(){var t,e=this;this.parent.childElementCount>=this.options.maxNotifications&&(t=Array.from(this.parent.getElementsByClassName(c.prefix)),this.delete(t.find(function(t){return!e.isDeleted(t)})))}},{key:"afterInsert",value:function(){var t=this;if("async"==this.type)return this.start=Date.now();if(this.addEvent("click",function(){return t.delete()}),!(this.duration<=0)){this.timer=new d(function(){return t.delete()},this.duration);for(var e=0,n=["mouseenter","mouseleave"];e<n.length;e++)this.addEvent(n[e],function(){t.isDeleted()||(t.toggleClass(c.klass.progressBarPause),t.timer.toggle())})}}},{key:"isDeleted",value:function(){return(0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.el).classList.contains(u.klass.hiding)}},{key:"progressBar",get:function(){return this.duration<=0||"async"===this.type?"":"<div class='".concat(c.klass.progressBar,"' style=\"animation-duration:").concat(this.options.toSecs(this.duration),';"></div>')}},{key:"label",get:function(){return'<b class="'.concat(c.klass.label,'">').concat(this.options.label(this.type),"</b>")}}],function(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}(r.prototype,t),r}();function k(t){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function g(t,e){return(g=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function w(t){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var O=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&g(t,e)}(c,f);var t,n,o,a=(n=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,e=w(n);return function(t,e){if(e&&("object"===k(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,o?(t=w(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments))});function c(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"modal",n=2<arguments.length?arguments[2]:void 0,o=3<arguments.length?arguments[3]:void 0,i=4<arguments.length?arguments[4]:void 0;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c);var r="animation-duration: ".concat(n.toSecs(n.animationDuration),";");return(n=a.call(this,document.body,s.ids.wrapper,null,r,n))[s.ids.confirmOk]=o,n[s.ids.confirmCancel]=i,n.className="".concat(s.prefix,"-").concat(e),["confirm","async-block","modal"].includes(e)||(e="modal"),n.updateType(e),n.setInnerHtml(t),n.insert(),n}return t=[{key:"setInnerHtml",value:function(t){var e=this.options.applyReplacements(t,this.type);switch(this.type){case"confirm":var n=["<button class='".concat(s.klass.button," ").concat(s.klass.successBtn,"'id='").concat(s.ids.confirmOk,"'>").concat(this.options.labels.confirmOk,"</button>")];!1!==this[s.ids.confirmCancel]&&n.push("<button class='".concat(s.klass.button," ").concat(s.klass.cancelBtn,"'id='").concat(s.ids.confirmCancel,"'>").concat(this.options.labels.confirmCancel,"</button>")),e="".concat(this.options.icon(this.type),"<div class='").concat(s.klass.title,"'>").concat(this.options.label(this.type),'</div><div class="').concat(s.klass.content,'">').concat(e,"</div><div class='").concat(s.klass.buttons," ").concat(s.klass.buttons,"-").concat(n.length,"'>").concat(n.join(""),"</div>");break;case"async-block":e="".concat(e,'<div class="').concat(s.klass.dotAnimation,'"></div>')}this.newNode.innerHTML='<div class="'.concat(s.klass.body," ").concat(this.className,'">').concat(e,"</div>")}},{key:"keyupListener",value:function(t){if("async-block"===this.type)return t.preventDefault();switch(t.code){case"Escape":t.preventDefault(),this.delete();case"Tab":if(t.preventDefault(),"confirm"!==this.type||!1===this[s.ids.confirmCancel])return!0;var e=this.okBtn;t.shiftKey?document.activeElement.id==s.ids.confirmOk&&(e=this.cancelBtn):document.activeElement.id!==s.ids.confirmCancel&&(e=this.cancelBtn),e.focus()}}},{key:"afterInsert",value:function(){var e=this;switch(this.listener=function(t){return e.keyupListener(t)},window.addEventListener("keydown",this.listener),this.type){case"async-block":this.start=Date.now();break;case"confirm":this.okBtn.focus(),this.addEvent("click",function(t){return"BUTTON"===t.target.nodeName&&(e.delete(),void(e[t.target.id]&&e[t.target.id]()))});break;default:document.activeElement.blur(),this.addEvent("click",function(t){t.target.id===e.newNode.id&&e.delete()})}}},{key:"afterDelete",value:function(){window.removeEventListener("keydown",this.listener)}},{key:"okBtn",get:function(){return document.getElementById(s.ids.confirmOk)}},{key:"cancelBtn",get:function(){return document.getElementById(s.ids.confirmCancel)}}],function(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}(c.prototype,t),c}();function T(t){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var E=(a=[{key:"tip",value:function(t,e){return this._addToast(t,"tip",e).el}},{key:"info",value:function(t,e){return this._addToast(t,"info",e).el}},{key:"success",value:function(t,e){return this._addToast(t,"success",e).el}},{key:"warning",value:function(t,e){return this._addToast(t,"warning",e).el}},{key:"alert",value:function(t,e){return this._addToast(t,"alert",e).el}},{key:"async",value:function(t,e,n,o,i){o=this._addToast(o,"async",i);return this._afterAsync(t,e,n,i,o)}},{key:"confirm",value:function(t,e,n,o){return this._addPopup(t,"confirm",o,e,n)}},{key:"asyncBlock",value:function(t,e,n,o,i){o=this._addPopup(o,"async-block",i);return this._afterAsync(t,e,n,i,o)}},{key:"modal",value:function(t,e,n){return this._addPopup(t,e,n)}},{key:"closeToasts",value:function(){for(var t=this.container;t.firstChild;)t.removeChild(t.firstChild)}},{key:"_addPopup",value:function(t,e,n,o,i){return new O(t,e,this.options.override(n),o,i)}},{key:"_addToast",value:function(t,e,n,o){n=this.options.override(n);var i=new v(t,e,n,this.container);return o?o instanceof O?o.delete().then(function(){return i.insert()}):o.replace(i):i.insert()}},{key:"_afterAsync",value:function(t,e,n,o,i){return t.then(this._responseHandler(e,"success",o,i),this._responseHandler(n,"alert",o,i))}},{key:"_responseHandler",value:function(e,n,o,i){var r=this;return function(t){switch(T(e)){case"undefined":case"string":r._addToast("alert"===n?e||t:e,n,o,i);break;default:i.delete().then(function(){e&&e(t)})}}}},{key:"_createContainer",value:function(){return new f(document.body,c.ids.container,"awn-".concat(this.options.position)).insert().el}},{key:"container",get:function(){return document.getElementById(c.ids.container)||this._createContainer()}}],function(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}(_.prototype,a),_);function _(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,_),this.options=new r(t)}return t})()});