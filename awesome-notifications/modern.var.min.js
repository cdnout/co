var AWN;(()=>{var s={628:(t,e,s)=>{"use strict";s.d(e,{default:()=>m});const i={maxNotifications:10,animationDuration:300,position:"bottom-right",labels:{tip:"Tip",info:"Info",success:"Success",warning:"Attention",alert:"Error",async:"Loading",confirm:"Confirmation required",confirmOk:"OK",confirmCancel:"Cancel"},icons:{tip:"question-circle",info:"info-circle",success:"check-circle",warning:"exclamation-circle",alert:"exclamation-triangle",async:"cog fa-spin",confirm:"exclamation-triangle",prefix:"<i class='fa fas fa-fw fa-",suffix:"'></i>",enabled:!0},replacements:{tip:null,info:null,success:null,warning:null,alert:null,async:null,"async-block":null,modal:null,confirm:null,general:{"<script>":"","<\/script>":""}},messages:{tip:"",info:"",success:"Action has been succeeded",warning:"",alert:"Action has been failed",confirm:"This action can't be undone. Continue?",async:"Please, wait...","async-block":"Loading"},formatError(t){if(t.response){if(!t.response.data)return"500 API Server Error";if(t.response.data.errors)return t.response.data.errors.map(t=>t.detail).join("<br>");if(t.response.statusText)return`${t.response.status} ${t.response.statusText}: ${t.response.data}`}return t.message||t},durations:{global:5e3,success:null,info:null,tip:null,warning:null,alert:null},minDurations:{async:1e3,"async-block":1e3}};class n{constructor(t={},e=i){Object.assign(this,this.defaultsDeep(e,t))}icon(t){return this.icons.enabled?`${this.icons.prefix}${this.icons[t]}${this.icons.suffix}`:""}label(t){return this.labels[t]}duration(t){t=this.durations[t];return null===t?this.durations.global:t}toSecs(t){return t/1e3+"s"}applyReplacements(t,e){if(!t)return this.messages[e]||"";for(const s of["general",e])if(this.replacements[s])for(const e in this.replacements[s])t=t.replace(e,this.replacements[s][e]);return t}override(t){return t?new n(t,this):this}defaultsDeep(t,e){let s={};for(const i in t)e.hasOwnProperty(i)?s[i]="object"==typeof t[i]&&null!==t[i]?this.defaultsDeep(t[i],e[i]):e[i]:s[i]=t[i];return s}}const r="awn-popup",a="awn-toast",o="awn-btn",l="awn-confirm",c={prefix:a,klass:{label:`${a}-label`,content:`${a}-content`,icon:`${a}-icon`,progressBar:`${a}-progress-bar`,progressBarPause:`${a}-progress-bar-paused`},ids:{container:`${a}-container`}},d={prefix:r,klass:{buttons:"awn-buttons",button:o,successBtn:`${o}-success`,cancelBtn:`${o}-cancel`,title:`${r}-title`,body:`${r}-body`,content:`${r}-content`,dotAnimation:`${r}-loading-dots`},ids:{wrapper:`${r}-wrapper`,confirmOk:`${l}-ok`,confirmCancel:`${l}-cancel`}},h={hiding:"awn-hiding"},u=class{constructor(t,e,s,i,n){this.newNode=document.createElement("div"),e&&(this.newNode.id=e),s&&(this.newNode.className=s),i&&(this.newNode.style.cssText=i),this.parent=t,this.options=n}beforeInsert(){}afterInsert(){}insert(){return this.beforeInsert(),this.el=this.parent.appendChild(this.newNode),this.afterInsert(),this}replace(t){if(this.getElement())return this.beforeDelete().then(()=>(this.updateType(t.type),this.parent.replaceChild(t.newNode,this.el),this.el=this.getElement(t.newNode),this.afterInsert(),this))}beforeDelete(e=this.el){let s=0;return this.start&&(s=this.options.minDurations[this.type]+this.start-Date.now(),s<0&&(s=0)),new Promise(t=>{setTimeout(()=>{e.classList.add(h.hiding),setTimeout(t,this.options.animationDuration)},s)})}delete(t=this.el){return this.getElement(t)?this.beforeDelete(t).then(()=>{t.remove(),this.afterDelete()}):null}afterDelete(){}getElement(t=this.el){return t?document.getElementById(t.id):null}addEvent(t,e){this.el.addEventListener(t,e)}toggleClass(t){this.el.classList.toggle(t)}updateType(t){this.type=t,this.duration=this.options.duration(this.type)}},p=class extends u{constructor(t,e,s,i){super(i,`${c.prefix}-${Math.floor(Date.now()-100*Math.random())}`,`${c.prefix} ${c.prefix}-${e}`,`animation-duration: ${s.toSecs(s.animationDuration)};`,s),this.updateType(e),this.setInnerHtml(t)}setInnerHtml(t){"alert"===this.type&&t&&(t=this.options.formatError(t)),t=this.options.applyReplacements(t,this.type),this.newNode.innerHTML=`<div class="awn-toast-wrapper">${this.progressBar}${this.label}<div class="${c.klass.content}">${t}</div><span class="${c.klass.icon}">${this.options.icon(this.type)}</span></div>`}beforeInsert(){if(this.parent.childElementCount>=this.options.maxNotifications){let t=Array.from(this.parent.getElementsByClassName(c.prefix));this.delete(t.find(t=>!this.isDeleted(t)))}}afterInsert(){if("async"==this.type)return this.start=Date.now();if(this.addEvent("click",()=>this.delete()),!(this.duration<=0)){this.timer=new class{constructor(t,e){this.callback=t,this.remaining=e,this.resume()}pause(){this.paused=!0,window.clearTimeout(this.timerId),this.remaining-=new Date-this.start}resume(){this.paused=!1,this.start=new Date,window.clearTimeout(this.timerId),this.timerId=window.setTimeout(()=>{window.clearTimeout(this.timerId),this.callback()},this.remaining)}toggle(){this.paused?this.resume():this.pause()}}(()=>this.delete(),this.duration);for(const t of["mouseenter","mouseleave"])this.addEvent(t,()=>{this.isDeleted()||(this.toggleClass(c.klass.progressBarPause),this.timer.toggle())})}}isDeleted(t=this.el){return t.classList.contains(h.hiding)}get progressBar(){return this.duration<=0||"async"===this.type?"":`<div class='${c.klass.progressBar}' style="animation-duration:${this.options.toSecs(this.duration)};"></div>`}get label(){return`<b class="${c.klass.label}">${this.options.label(this.type)}</b>`}},f=class extends u{constructor(t,e="modal",s,i,n){var r=`animation-duration: ${s.toSecs(s.animationDuration)};`;super(document.body,d.ids.wrapper,null,r,s),this[d.ids.confirmOk]=i,this[d.ids.confirmCancel]=n,this.className=`${d.prefix}-${e}`,["confirm","async-block","modal"].includes(e)||(e="modal"),this.updateType(e),this.setInnerHtml(t),this.insert()}setInnerHtml(t){let e=this.options.applyReplacements(t,this.type);switch(this.type){case"confirm":let t=[`<button class='${d.klass.button} ${d.klass.successBtn}'id='${d.ids.confirmOk}'>${this.options.labels.confirmOk}</button>`];!1!==this[d.ids.confirmCancel]&&t.push(`<button class='${d.klass.button} ${d.klass.cancelBtn}'id='${d.ids.confirmCancel}'>${this.options.labels.confirmCancel}</button>`),e=`${this.options.icon(this.type)}<div class='${d.klass.title}'>${this.options.label(this.type)}</div><div class="${d.klass.content}">${e}</div><div class='${d.klass.buttons} ${d.klass.buttons}-${t.length}'>${t.join("")}</div>`;break;case"async-block":e=`${e}<div class="${d.klass.dotAnimation}"></div>`}this.newNode.innerHTML=`<div class="${d.klass.body} ${this.className}">${e}</div>`}keyupListener(e){if("async-block"===this.type)return e.preventDefault();switch(e.code){case"Escape":e.preventDefault(),this.delete();case"Tab":if(e.preventDefault(),"confirm"!==this.type||!1===this[d.ids.confirmCancel])return!0;let t=this.okBtn;e.shiftKey?document.activeElement.id==d.ids.confirmOk&&(t=this.cancelBtn):document.activeElement.id!==d.ids.confirmCancel&&(t=this.cancelBtn),t.focus()}}afterInsert(){switch(this.listener=t=>this.keyupListener(t),window.addEventListener("keydown",this.listener),this.type){case"async-block":this.start=Date.now();break;case"confirm":this.okBtn.focus(),this.addEvent("click",t=>"BUTTON"===t.target.nodeName&&(this.delete(),void(this[t.target.id]&&this[t.target.id]())));break;default:document.activeElement.blur(),this.addEvent("click",t=>{t.target.id===this.newNode.id&&this.delete()})}}afterDelete(){window.removeEventListener("keydown",this.listener)}get okBtn(){return document.getElementById(d.ids.confirmOk)}get cancelBtn(){return document.getElementById(d.ids.confirmCancel)}};class m{constructor(t={}){this.options=new n(t)}tip(t,e){return this._addToast(t,"tip",e).el}info(t,e){return this._addToast(t,"info",e).el}success(t,e){return this._addToast(t,"success",e).el}warning(t,e){return this._addToast(t,"warning",e).el}alert(t,e){return this._addToast(t,"alert",e).el}async(t,e,s,i,n){i=this._addToast(i,"async",n);return this._afterAsync(t,e,s,n,i)}confirm(t,e,s,i){return this._addPopup(t,"confirm",i,e,s)}asyncBlock(t,e,s,i,n){i=this._addPopup(i,"async-block",n);return this._afterAsync(t,e,s,n,i)}modal(t,e,s){return this._addPopup(t,e,s)}closeToasts(){let t=this.container;for(;t.firstChild;)t.removeChild(t.firstChild)}_addPopup(t,e,s,i,n){return new f(t,e,this.options.override(s),i,n)}_addToast(t,e,s,i){s=this.options.override(s);let n=new p(t,e,s,this.container);return i?i instanceof f?i.delete().then(()=>n.insert()):i.replace(n):n.insert()}_afterAsync(t,e,s,i,n){return t.then(this._responseHandler(e,"success",i,n),this._responseHandler(s,"alert",i,n))}_responseHandler(e,s,i,n){return t=>{switch(typeof e){case"undefined":case"string":this._addToast("alert"===s?e||t:e,s,i,n);break;default:n.delete().then(()=>{e&&e(t)})}}}_createContainer(){return new u(document.body,c.ids.container,`awn-${this.options.position}`).insert().el}get container(){return document.getElementById(c.ids.container)||this._createContainer()}}},612:(t,e,s)=>{t.exports=s(628).default}},i={};function n(t){var e=i[t];if(void 0!==e)return e.exports;e=i[t]={exports:{}};return s[t](e,e.exports,n),e.exports}n.d=(t,e)=>{for(var s in e)n.o(e,s)&&!n.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var t=n(612);AWN=t})();