import _slicedToArray from"@babel/runtime/helpers/slicedToArray";import*as React from"react";import{useDOM}from"../lib/dom";import{useGlobalEventListener}from"./useGlobalEventListener";function getPreciseKeyboardState(e){var t=e.innerHeight,e=e.screen.availHeight;return 24<Math.round(100*(1-t/e))}var eventOptions={passive:!0,capture:!1};function useKeyboard(){var e=useDOM(),r=e.window,n=e.document,e=React.useState(!1),e=_slicedToArray(e,2),t=e[0],a=e[1],e=React.useState(!1),e=_slicedToArray(e,2),i=e[0],o=e[1],u=React.useRef(null),s=React.useCallback(function(e){u.current&&clearTimeout(u.current);var t=!(!0!==e&&"focusin"!==e.type||"INPUT"!==(null==n||null==(e=n.activeElement)?void 0:e.tagName)&&"TEXTAREA"!==(null==n||null==(e=n.activeElement)?void 0:e.tagName));a(t),o(!1),u.current=setTimeout(function(){a(t),o(getPreciseKeyboardState(r))},300)},[null==n||null==(e=n.activeElement)?void 0:e.tagName,r]);return React.useEffect(function(){s(!0)},[s]),useGlobalEventListener(n,"focusout",s,eventOptions),useGlobalEventListener(n,"focusin",s,eventOptions),{isOpened:t,isPrecise:i}}export{getPreciseKeyboardState,useKeyboard};