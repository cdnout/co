import _extends from"@babel/runtime/helpers/extends";import _objectWithoutProperties from"@babel/runtime/helpers/objectWithoutProperties";var _excluded=["value","onChange","disablePast","disableFuture","shouldDisableDate","onClose","enableTime","doneButtonText","weekStartsOn","getRootRef","disablePickers","changeHoursAriaLabel","changeMinutesAriaLabel","prevMonthAriaLabel","nextMonthAriaLabel","changeMonthAriaLabel","changeYearAriaLabel","showNeighboringMonth","changeDayAriaLabel","size"];import{createScopedElement}from"../../lib/jsxRuntime";import*as React from"react";import{isSameMonth,isSameDay}from"../../lib/date";import{CalendarHeader}from"../CalendarHeader/CalendarHeader";import{CalendarDays}from"../CalendarDays/CalendarDays";import{CalendarTime}from"../CalendarTime/CalendarTime";import{useIsomorphicLayoutEffect}from"../../lib/useIsomorphicLayoutEffect";import{navigateDate,setTimeEqual,isFirstDay,isLastDay}from"../../lib/calendar";import{useCalendar}from"../../hooks/useCalendar";import{classNames}from"../../lib/classNames";import{warnOnce}from"../../lib/warnOnce";import"./Calendar.css";var warn=warnOnce("Calendar"),Calendar=function(e){var a=e.value,r=e.onChange,t=e.disablePast,n=e.disableFuture,o=e.shouldDisableDate,i=e.onClose,s=e.enableTime,s=void 0!==s&&s,l=e.doneButtonText,d=e.weekStartsOn,d=void 0===d?1:d,c=e.getRootRef,u=e.disablePickers,m=e.changeHoursAriaLabel,b=e.changeMinutesAriaLabel,h=e.prevMonthAriaLabel,D=e.nextMonthAriaLabel,p=e.changeMonthAriaLabel,C=e.changeYearAriaLabel,v=e.showNeighboringMonth,f=e.changeDayAriaLabel,f=void 0===f?"Изменить день":f,g=e.size,g=void 0===g?"m":g,e=_objectWithoutProperties(e,_excluded),n=useCalendar({value:a,disableFuture:n,disablePast:t,shouldDisableDate:o}),y=n.viewDate,L=n.setViewDate,t=n.setPrevMonth,o=n.setNextMonth,A=n.focusedDay,w=n.setFocusedDay,M=n.isDayFocused,S=n.isDayDisabled,n=n.resetSelectedDay,x=(useIsomorphicLayoutEffect(function(){a&&L(a)},[a]),"development"!==process.env.NODE_ENV||u||"s"!==g||warn("Нельзя включить селекты выбора месяца/года, если размер календаря 's'","error"),"development"===process.env.NODE_ENV&&s&&"s"===g&&warn("Нельзя включить выбор времени, если размер календаря 's'","error"),React.useCallback(function(e){["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(e.key)&&e.preventDefault();e=navigateDate(null!=A?A:a,e.key);e&&!isSameMonth(e,y)&&L(e),w(e)},[A,w,L,a,y])),E=React.useCallback(function(e){null!=r&&r(setTimeEqual(e,a))},[a,r]),k=React.useCallback(function(e){return Boolean(a&&isSameDay(e,a))},[a]);return createScopedElement("div",_extends({},e,{ref:c,vkuiClass:classNames("Calendar","Calendar--size-".concat(g))}),createScopedElement(CalendarHeader,{viewDate:y,onChange:L,onNextMonth:o,onPrevMonth:t,disablePickers:u||"s"===g,vkuiClass:"Calendar__header",prevMonthAriaLabel:h,nextMonthAriaLabel:D,changeMonthAriaLabel:p,changeYearAriaLabel:C}),createScopedElement(CalendarDays,{viewDate:y,value:a,weekStartsOn:d,isDayFocused:M,tabIndex:0,"aria-label":f,onKeyDown:x,onDayChange:E,isDayActive:k,isDaySelectionStart:isFirstDay,isDaySelectionEnd:isLastDay,isDayDisabled:S,onBlur:n,showNeighboringMonth:v,size:g}),s&&a&&"s"!==g&&createScopedElement("div",{vkuiClass:"Calendar__time"},createScopedElement(CalendarTime,{value:a,onChange:r,onClose:i,doneButtonText:l,changeHoursAriaLabel:m,changeMinutesAriaLabel:b})))};export{Calendar};