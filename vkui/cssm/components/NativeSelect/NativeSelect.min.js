import _extends from"@babel/runtime/helpers/extends";import _defineProperty from"@babel/runtime/helpers/defineProperty";import _slicedToArray from"@babel/runtime/helpers/slicedToArray";import _objectWithoutProperties from"@babel/runtime/helpers/objectWithoutProperties";var _excluded=["style","defaultValue","align","placeholder","children","className","getRef","getRootRef","disabled","sizeX","sizeY","multiline"];import{createScopedElement}from"../../lib/jsxRuntime";import*as React from"react";import{classNames}from"../../lib/classNames";import{DropdownIcon}from"../DropdownIcon/DropdownIcon";import{FormField}from"../FormField/FormField";import{withAdaptivity,SizeType}from"../../hoc/withAdaptivity";import{getClassName}from"../../helpers/getClassName";import Headline from"../Typography/Headline/Headline";import Text from"../Typography/Text/Text";import{VKCOM}from"../../lib/platform";import{useIsomorphicLayoutEffect}from"../../lib/useIsomorphicLayoutEffect";import{useEnsuredControl}from"../../hooks/useEnsuredControl";import{useExternRef}from"../../hooks/useExternRef";import{usePlatform}from"../../hooks/usePlatform";import"../Select/Select.css";var NativeSelect=function(e){var t=e.style,o=e.defaultValue,o=void 0===o?"":o,r=e.align,l=e.placeholder,i=e.children,a=e.className,s=e.getRef,c=e.getRootRef,n=e.disabled,m=e.sizeX,d=e.sizeY,p=e.multiline,e=_objectWithoutProperties(e,_excluded),u=usePlatform(),f=React.useState(""),f=_slicedToArray(f,2),y=f[0],h=f[1],f=React.useState(!1),f=_slicedToArray(f,2),S=f[0],_=f[1],f=useEnsuredControl(e,{defaultValue:o}),o=_slicedToArray(f,2),f=o[0],o=o[1],b=useExternRef(s),s=(useIsomorphicLayoutEffect(function(){var e=null==(e=b.current)?void 0:e.options[b.current.selectedIndex];e&&(h(e.text),_(""===e.value&&null!=l))},[f,i]),u===VKCOM||d===SizeType.COMPACT?Text:Headline);return createScopedElement(FormField,{Component:"label",vkuiClass:classNames(getClassName("Select",u),(_defineProperty(u={},"Select--not-selected",S),_defineProperty(u,"Select--align-".concat(r),!!r),_defineProperty(u,"Select--sizeX--".concat(m),!!m),_defineProperty(u,"Select--sizeY--".concat(d),!!d),_defineProperty(u,"Select--multiline",p),u)),className:a,style:t,getRootRef:c,disabled:n,after:createScopedElement(DropdownIcon,null)},createScopedElement("select",_extends({},e,{disabled:n,vkuiClass:"Select__el",onChange:o,value:f,ref:b}),l&&createScopedElement("option",{value:""},l),i),createScopedElement(s,{Component:"div",weight:"regular",vkuiClass:"Select__container"},createScopedElement("span",{vkuiClass:"Select__title"},y)))};export default withAdaptivity(NativeSelect,{sizeX:!0,sizeY:!0});