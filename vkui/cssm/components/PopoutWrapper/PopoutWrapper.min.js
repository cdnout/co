import _extends from"@babel/runtime/helpers/extends";import _slicedToArray from"@babel/runtime/helpers/slicedToArray";import _objectWithoutProperties from"@babel/runtime/helpers/objectWithoutProperties";var _excluded=["alignY","alignX","closing","hasMask","fixed","children","onClick"];import{createScopedElement}from"../../lib/jsxRuntime";import*as React from"react";import{getClassName}from"../../helpers/getClassName";import{classNames}from"../../lib/classNames";import{IOS}from"../../lib/platform";import{useTimeout}from"../../hooks/useTimeout";import{usePlatform}from"../../hooks/usePlatform";import{useGlobalEventListener}from"../../hooks/useGlobalEventListener";import{useDOM}from"../../lib/dom";import"./PopoutWrapper.css";var PopoutWrapper=function(e){function o(e){e&&"vkui-animation-full-fade-in"!==e.animationName||c(!0)}var r=e.alignY,r=void 0===r?"center":r,t=e.alignX,t=void 0===t?"center":t,a=e.closing,a=void 0!==a&&a,i=e.hasMask,i=void 0===i||i,s=e.fixed,s=void 0===s||s,p=e.children,n=e.onClick,e=_objectWithoutProperties(e,_excluded),l=usePlatform(),m=React.useState(!i),m=_slicedToArray(m,2),u=m[0],c=m[1],m=React.useRef(null),d=useTimeout(o,l===IOS?300:200);React.useEffect(function(){u||d.set()},[d,u]);var f=useDOM().window,f=(useGlobalEventListener(f,"touchmove",function(e){return e.preventDefault()},{passive:!1}),getClassName("PopoutWrapper",l));return createScopedElement("div",_extends({},e,{vkuiClass:classNames(f,"PopoutWrapper--v-".concat(r),"PopoutWrapper--h-".concat(t),{"PopoutWrapper--closing":a,"PopoutWrapper--opened":u,"PopoutWrapper--fixed":s,"PopoutWrapper--masked":i}),onAnimationEnd:u?void 0:o,ref:m}),createScopedElement("div",{vkuiClass:"PopoutWrapper__container"},createScopedElement("div",{vkuiClass:"PopoutWrapper__overlay",onClick:n}),createScopedElement("div",{vkuiClass:"PopoutWrapper__content"},p)))};export{PopoutWrapper};