import _extends from"@babel/runtime/helpers/extends";import _slicedToArray from"@babel/runtime/helpers/slicedToArray";import _objectWithoutProperties from"@babel/runtime/helpers/objectWithoutProperties";var _excluded=["getRef","content","children","onShownChange","shown"];import{createScopedElement}from"../../lib/jsxRuntime";import*as React from"react";import{useDOM}from"../../lib/dom";import{Popper}from"../Popper/Popper";import{useExternRef}from"../../hooks/useExternRef";import{useEventListener}from"../../hooks/useEventListener";import{useGlobalEventListener}from"../../hooks/useGlobalEventListener";import{usePatchChildrenRef}from"../../hooks/usePatchChildrenRef";var ClickPopper=function(e){function r(e){"boolean"!=typeof c&&a(e),"function"==typeof i&&i(e)}var t=e.getRef,o=e.content,n=e.children,i=e.onShownChange,c=e.shown,e=_objectWithoutProperties(e,_excluded),s=React.useState(c||!1),s=_slicedToArray(s,2),l=s[0],a=s[1],s=React.useState(null),s=_slicedToArray(s,2),u=s[0],s=s[1],p="boolean"==typeof c?c:l,l=useDOM().document,s=useExternRef(s,t),t=usePatchChildrenRef(n),n=_slicedToArray(t,2),f=n[0],t=n[1],m=(useGlobalEventListener(l,"click",function(e){var t;!u||null!=(t=f.current)&&t.contains(e.target)||u.contains(e.target)||r(!1)}),useEventListener("click",function(){r(!p)}));return React.useEffect(function(){null!==f.current&&m.add(f.current)},[f,m]),createScopedElement(React.Fragment,null,t,p&&createScopedElement(Popper,_extends({},e,{targetRef:f,getRef:s}),o))};export{ClickPopper};