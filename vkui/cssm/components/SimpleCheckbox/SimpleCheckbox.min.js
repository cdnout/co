import _extends from"@babel/runtime/helpers/extends";import _objectWithoutProperties from"@babel/runtime/helpers/objectWithoutProperties";var _excluded=["className","style","getRootRef","getRef","indeterminate","defaultIndeterminate","onChange"];import{createScopedElement}from"../../lib/jsxRuntime";import*as React from"react";import Tappable,{ACTIVE_EFFECT_DELAY}from"../Tappable/Tappable";import{getClassName}from"../../helpers/getClassName";import{classNames}from"../../lib/classNames";import{IOS,VKCOM}from"../../lib/platform";import{Icon20CheckBoxOn,Icon20CheckBoxOff,Icon24CheckBoxOn,Icon24CheckBoxOff,Icon20CheckBoxIndetermanate}from"@vkontakte/icons";import{usePlatform}from"../../hooks/usePlatform";import{useAdaptivity}from"../../hooks/useAdaptivity";import{useExternRef}from"../../hooks/useExternRef";import{SizeType}from"../../hoc/withAdaptivity";import{warnOnce}from"../../lib/warnOnce";import"./SimpleCheckbox.css";var warn=warnOnce("SimpleCheckbox"),IS_DEV="development"===process.env.NODE_ENV,SimpleCheckbox=function(e){var t=e.className,o=e.style,c=e.getRootRef,i=e.getRef,r=e.indeterminate,a=e.defaultIndeterminate,n=e.onChange,l=_objectWithoutProperties(e,_excluded),e=useAdaptivity().sizeY,m=usePlatform(),d=useExternRef(i),i=(React.useEffect(function(){d.current&&(d.current.indeterminate=Boolean(void 0===r?a:r))},[a,r,d]),React.useCallback(function(e){void 0!==a&&void 0===r&&void 0===l.checked&&d.current&&(d.current.indeterminate=!1),void 0!==r&&d.current&&(d.current.indeterminate=r),n&&n(e)},[a,r,l.checked,n,d]));return IS_DEV&&(a&&l.defaultChecked&&warn("defaultIndeterminate и defaultChecked не могут быть true одновременно","error"),r&&l.checked&&warn("indeterminate и checked не могут быть true одновременно","error"),l.defaultChecked&&l.checked&&warn("defaultChecked и checked не могут быть true одновременно","error")),createScopedElement(Tappable,{Component:"label",vkuiClass:classNames(getClassName("SimpleCheckbox",m),"SimpleCheckbox--sizeY-".concat(e)),className:t,style:o,disabled:l.disabled,activeMode:m===VKCOM?"SimpleCheckbox--active":"background",hoverMode:m===VKCOM?"SimpleCheckbox--hover":"background",activeEffectDelay:m===IOS?100:ACTIVE_EFFECT_DELAY,getRootRef:c},createScopedElement("input",_extends({},l,{onChange:i,type:"checkbox",vkuiClass:"SimpleCheckbox__input",ref:d})),createScopedElement("div",{vkuiClass:"SimpleCheckbox__container"},createScopedElement("div",{vkuiClass:"SimpleCheckbox__icon SimpleCheckbox__icon--on"},e===SizeType.COMPACT||m===VKCOM?createScopedElement(Icon20CheckBoxOn,null):createScopedElement(Icon24CheckBoxOn,null)),createScopedElement("div",{vkuiClass:"SimpleCheckbox__icon SimpleCheckbox__icon--off"},e===SizeType.COMPACT||m===VKCOM?createScopedElement(Icon20CheckBoxOff,null):createScopedElement(Icon24CheckBoxOff,null)),createScopedElement("div",{vkuiClass:"SimpleCheckbox__icon SimpleCheckbox__icon--indeterminate"},createScopedElement(Icon20CheckBoxIndetermanate,{width:e===SizeType.COMPACT||m===VKCOM?20:24,height:e===SizeType.COMPACT||m===VKCOM?20:24}))),m===VKCOM&&createScopedElement("div",{"aria-hidden":!0,vkuiClass:"SimpleCheckbox__activeShadow"}),m===VKCOM&&createScopedElement("div",{"aria-hidden":!0,vkuiClass:"SimpleCheckbox__hoverShadow"}))};export{SimpleCheckbox};