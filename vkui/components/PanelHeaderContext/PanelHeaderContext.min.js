import _extends from"@babel/runtime/helpers/extends";import _slicedToArray from"@babel/runtime/helpers/slicedToArray";import _objectWithoutProperties from"@babel/runtime/helpers/objectWithoutProperties";var _excluded=["children","onClose","opened"];import{createScopedElement}from"../../lib/jsxRuntime";import*as React from"react";import FixedLayout from"../FixedLayout/FixedLayout";import{classNames}from"../../lib/classNames";import{getClassName}from"../../helpers/getClassName";import{ViewWidth}from"../AdaptivityProvider/AdaptivityContext";import{useAdaptivity}from"../../hooks/useAdaptivity";import{useDOM}from"../../lib/dom";import{useIsomorphicLayoutEffect}from"../../lib/useIsomorphicLayoutEffect";import{useGlobalEventListener}from"../../hooks/useGlobalEventListener";import{useTimeout}from"../../hooks/useTimeout";import{usePlatform}from"../../hooks/usePlatform";var PanelHeaderContext=function(e){function t(){return m(!1)}var o=e.children,r=e.onClose,i=e.opened,a=void 0!==i&&i,i=_objectWithoutProperties(e,_excluded),e=useDOM().document,s=usePlatform(),n=React.useState(a),n=_slicedToArray(n,2),l=n[0],m=n[1],u=l&&!a,n=useAdaptivity().viewWidth>=ViewWidth.SMALL_TABLET,d=React.useRef(null),c=(useIsomorphicLayoutEffect(function(){a&&m(!0)},[a]),useGlobalEventListener(e,"click",n&&a&&!u&&function(e){d.current&&!d.current.contains(e.target)&&r()}),useTimeout(t,200));return React.useEffect(function(){return u?c.set():c.clear()},[c,u]),createScopedElement(FixedLayout,_extends({},i,{vkuiClass:classNames(getClassName("PanelHeaderContext",s),{"PanelHeaderContext--opened":a,"PanelHeaderContext--closing":u,"PanelHeaderContext--desktop":n}),vertical:"top"}),createScopedElement("div",{vkuiClass:"PanelHeaderContext__in",ref:d,onAnimationEnd:u?t:void 0},createScopedElement("div",{vkuiClass:"PanelHeaderContext__content"},l&&o)),!n&&l&&createScopedElement("div",{onClick:r,vkuiClass:"PanelHeaderContext__fade"}))};export{PanelHeaderContext};