import _extends from"@babel/runtime/helpers/extends";import _objectWithoutProperties from"@babel/runtime/helpers/objectWithoutProperties";var _excluded=["children","header","viewWidth","viewHeight","sizeX","hasMouse","onOpen","onOpened","onClose","onClosed","settlingHeight","dynamicContentHeight","getModalContentRef","nav"];import{createScopedElement}from"../../lib/jsxRuntime";import*as React from"react";import{getClassName}from"../../helpers/getClassName";import{classNames}from"../../lib/classNames";import{ModalRootContext,useModalRegistry}from"../ModalRoot/ModalRootContext";import{usePlatform}from"../../hooks/usePlatform";import{useOrientationChange}from"../../hooks/useOrientationChange";import{withAdaptivity,ViewHeight,ViewWidth}from"../../hoc/withAdaptivity";import ModalDismissButton from"../ModalDismissButton/ModalDismissButton";import{multiRef}from"../../lib/utils";import{ModalType}from"../ModalRoot/types";import{getNavId}from"../../lib/getNavId";import{warnOnce}from"../../lib/warnOnce";var warn=warnOnce("ModalPage"),ModalPage=function(e){var t=React.useContext(ModalRootContext).updateModalHeight,o=e.children,a=e.header,i=e.viewWidth,n=e.viewHeight,s=e.sizeX,l=e.hasMouse,r=(e.onOpen,e.onOpened,e.onClose),d=(e.onClosed,e.settlingHeight,e.dynamicContentHeight,e.getModalContentRef),m=(e.nav,_objectWithoutProperties(e,_excluded)),c=usePlatform(),p=useOrientationChange(),p=(React.useEffect(t,[o,p,t]),i>=ViewWidth.SMALL_TABLET&&(l||n>=ViewHeight.MEDIUM)),t=i>=ViewWidth.SMALL_TABLET,l=React.useContext(ModalRootContext),n=useModalRegistry(getNavId(e,warn),ModalType.PAGE).refs;return createScopedElement("div",_extends({},m,{vkuiClass:classNames(getClassName("ModalPage",c),"ModalPage--sizeX-".concat(s),{"ModalPage--desktop":p})}),createScopedElement("div",{vkuiClass:"ModalPage__in-wrap",ref:n.innerElement},createScopedElement("div",{vkuiClass:"ModalPage__in"},createScopedElement("div",{vkuiClass:"ModalPage__header",ref:n.headerElement},a),createScopedElement("div",{vkuiClass:"ModalPage__content-wrap"},createScopedElement("div",{vkuiClass:"ModalPage__content",ref:multiRef(n.contentElement,d)},createScopedElement("div",{vkuiClass:"ModalPage__content-in"},o))),t&&createScopedElement(ModalDismissButton,{onClick:r||l.onClose}))))};ModalPage.defaultProps={settlingHeight:75};export default withAdaptivity(ModalPage,{viewWidth:!0,viewHeight:!0,sizeX:!0,hasMouse:!0});