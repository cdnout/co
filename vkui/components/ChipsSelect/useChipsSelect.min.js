import _objectSpread from"@babel/runtime/helpers/objectSpread2";import _toConsumableArray from"@babel/runtime/helpers/toConsumableArray";import _createForOfIteratorHelper from"@babel/runtime/helpers/createForOfIteratorHelper";import _objectWithoutProperties from"@babel/runtime/helpers/objectWithoutProperties";import _slicedToArray from"@babel/runtime/helpers/slicedToArray";var _excluded=["fieldValue","selectedOptions"];import*as React from"react";import{useChipsInput}from"../ChipsInput/useChipsInput";var useChipsSelect=function(e){var t=e.options,r=e.filterFn,o=e.getOptionLabel,a=e.getOptionValue,n=React.useState(!1),n=_slicedToArray(n,2),i=n[0],u=n[1],n=React.useState(0),n=_slicedToArray(n,2),s=n[0],l=n[1],n=React.useState(null),n=_slicedToArray(n,2),p=n[0],n=n[1],e=useChipsInput(e),c=e.fieldValue,d=e.selectedOptions,f=_objectWithoutProperties(e,_excluded),m=React.useMemo(function(){return r?t.filter(function(e){return r(c,e,o)}):t},[t,r,c,o]),m=React.useMemo(function(){if(!m.length)return m;var e,t=new Set(m),r=d.map(function(e){return a(e)}),o=_createForOfIteratorHelper(t);try{for(o.s();!(e=o.n()).done;){var n=e.value;r.includes(a(n))&&t.delete(n)}}catch(e){o.e(e)}finally{o.f()}return _toConsumableArray(t)},[m,d,a]);return _objectSpread(_objectSpread({},f),{},{fieldValue:c,handleInputChange:function(e){e&&(f.handleInputChange(e),i||(u(!0),l(0)))},opened:i,setOpened:u,filteredOptions:m,focusedOptionIndex:s,setFocusedOptionIndex:l,focusedOption:p,setFocusedOption:n,selectedOptions:d})};export{useChipsSelect};