import _extends from"@babel/runtime/helpers/extends";import _slicedToArray from"@babel/runtime/helpers/slicedToArray";import _objectWithoutProperties from"@babel/runtime/helpers/objectWithoutProperties";var _excluded=["defaultValue","grow","style","onResize","className","getRootRef","getRef","sizeY","rows"];import{createScopedElement}from"../../lib/jsxRuntime";import*as React from"react";import{classNames}from"../../lib/classNames";import{FormField}from"../FormField/FormField";import{withAdaptivity}from"../../hoc/withAdaptivity";import{getClassName}from"../../helpers/getClassName";import{useEnsuredControl}from"../../hooks/useEnsuredControl";import{useExternRef}from"../../hooks/useExternRef";import{usePlatform}from"../../hooks/usePlatform";var Textarea=React.memo(function(e){var t=e.defaultValue,t=void 0===t?"":t,r=e.grow,o=void 0===r||r,r=e.style,s=e.onResize,a=e.className,l=e.getRootRef,i=e.getRef,m=e.sizeY,u=e.rows,u=void 0===u?2:u,e=_objectWithoutProperties(e,_excluded),t=useEnsuredControl(e,{defaultValue:t}),t=_slicedToArray(t,2),c=t[0],t=t[1],f=React.useRef(),n=useExternRef(i),i=usePlatform();return React.useEffect(function(){var e=n.current;o&&null!=e&&e.offsetParent&&(e.style.height="",e.style.height="".concat(e.scrollHeight,"px"),e.scrollHeight!==f.current&&s&&(s(e),f.current=e.scrollHeight))},[o,c,m,n,s]),createScopedElement(FormField,{vkuiClass:classNames(getClassName("Textarea",i),"Textarea--sizeY-".concat(m)),className:a,style:r,getRootRef:l,disabled:e.disabled},createScopedElement("textarea",_extends({},e,{rows:u,vkuiClass:"Textarea__el",value:c,onChange:t,ref:n})))});export default withAdaptivity(Textarea,{sizeY:!0});