import _extends from"@babel/runtime/helpers/extends";import _objectWithoutProperties from"@babel/runtime/helpers/objectWithoutProperties";var _excluded=["mode","onRemove","removePlaceholder","onDragFinish","before","after","disabled","removable","draggable","selectable","Component","onChange","name","value","checked","defaultChecked","getRootRef","draggerLabel","className","style"],_excluded2=["dragging","rootElRef"];import{createScopedElement}from"../../lib/jsxRuntime";import*as React from"react";import{classNames}from"../../lib/classNames";import{noop}from"../../lib/utils";import{warnOnce}from"../../lib/warnOnce";import{getClassName}from"../../helpers/getClassName";import{ANDROID,IOS,VKCOM}from"../../lib/platform";import SimpleCell from"../SimpleCell/SimpleCell";import{Removable}from"../Removable/Removable";import{usePlatform}from"../../hooks/usePlatform";import{useDraggable}from"./useDraggable";import{ListContext}from"../List/ListContext";import{CellDragger}from"./CellDragger/CellDragger";import{CellCheckbox}from"./CellCheckbox/CellCheckbox";var warn=warnOnce("Cell"),Cell=function(e){var l,o,r=e.mode,a=e.onRemove,t=void 0===a?noop:a,a=e.removePlaceholder,a=void 0===a?"Удалить":a,m=e.onDragFinish,s=e.before,n=e.after,c=e.disabled,i=e.removable,d=e.draggable,b=e.selectable,g=e.Component,C=e.onChange,p=e.name,u=e.value,f=e.checked,v=e.defaultChecked,h=(e.getRootRef,e.draggerLabel),h=void 0===h?"Перенести ячейку":h,R=e.className,x=e.style,e=_objectWithoutProperties(e,_excluded),_=r,r=(r||!b&&!i||(_=b?"selectable":"removable","development"===process.env.NODE_ENV&&(b&&warn('Свойство selectable устарело и будет удалено в 5.0.0. Используйте mode="selectable".'),i&&warn('Свойство removable устарело и будет удалено в 5.0.0. Используйте mode="removable".'))),"selectable"===_),b="removable"===_,i=usePlatform(),_=useDraggable({onDragFinish:m}),k=_.dragging,D=_.rootElRef,m=_objectWithoutProperties(_,_excluded2),N=React.useContext(ListContext).toggleDrag,_=(React.useEffect(function(){if(k)return N(!0),function(){return N(!1)}},[k,N]),d&&(l=createScopedElement(CellDragger,_extends({vkuiClass:"Cell__dragger","aria-label":h},m))),r&&(o=createScopedElement(CellCheckbox,_extends({vkuiClass:"Cell__checkbox"},{name:p,value:u,onChange:C,defaultChecked:v,checked:f,disabled:c}))),d&&!r||b||c),h=!_&&!k,m=classNames(getClassName("Cell",i),{"Cell--dragging":k,"Cell--removable":b,"Cell--selectable":r,"Cell--disabled":c}),p=createScopedElement(SimpleCell,_extends({hasActive:h,hasHover:h},e,{vkuiClass:"Cell__content",disabled:_,Component:r?"label":g,before:createScopedElement(React.Fragment,null,d&&(i===ANDROID||i===VKCOM)&&l,r&&o,s),after:createScopedElement(React.Fragment,null,d&&i===IOS&&l,n)}));return b?createScopedElement(Removable,{vkuiClass:m,className:R,style:x,getRootRef:D,removePlaceholder:a,onRemove:function(e){return t(e,null==D?void 0:D.current)}},p):createScopedElement("div",{vkuiClass:m,className:R,style:x,ref:D},p)};export{Cell};