import _objectWithoutProperties from"@babel/runtime/helpers/objectWithoutProperties";var _excluded=["option","children"];import{createScopedElement}from"../../lib/jsxRuntime";import*as React from"react";import{setMonth,setYear,subMonths,addMonths}from"../../lib/date";import{Icon20ChevronLeftOutline,Icon20ChevronRightOutline,Icon12Dropdown}from"@vkontakte/icons";import Tappable from"../Tappable/Tappable";import{classNames}from"../../lib/classNames";import{CustomSelect,SelectType}from"../CustomSelect/CustomSelect";import{CustomSelectOption}from"../CustomSelectOption/CustomSelectOption";import{SizeType}from"../../hoc/withAdaptivity";import{getMonths,getYears}from"../../lib/calendar";import{LocaleProviderContext}from"../LocaleProviderContext/LocaleProviderContext";import{Paragraph}from"../Typography/Paragraph/Paragraph";var renderOption=function(e){e.option;var t=e.children,e=_objectWithoutProperties(e,_excluded);return createScopedElement(CustomSelectOption,e,createScopedElement("span",{vkuiClass:"CalendarHeader__month_name"},t))},CalendarHeader=function(e){var t=e.viewDate,a=e.onChange,o=e.prevMonth,o=void 0===o||o,r=e.nextMonth,r=void 0===r||r,n=e.disablePickers,n=void 0!==n&&n,l=e.onNextMonth,c=e.onPrevMonth,i=e.className,p=e.prevMonthAriaLabel,p=void 0===p?"Предыдущий месяц":p,d=e.nextMonthAriaLabel,d=void 0===d?"Следующий месяц":d,m=e.changeMonthAriaLabel,m=void 0===m?"Изменить месяц":m,e=e.changeYearAriaLabel,e=void 0===e?"Изменить год":e,s=React.useContext(LocaleProviderContext),u=React.useCallback(function(e){return a(setMonth(t,Number(e.target.value)))},[a,t]),h=React.useCallback(function(e){return a(setYear(t,Number(e.target.value)))},[a,t]),C=React.useMemo(function(){return getMonths(s)},[s]),v=t.getFullYear(),f=React.useMemo(function(){return getYears(v,100)},[v]),S=new Intl.DateTimeFormat(s,{year:"numeric",month:"long"});return createScopedElement("div",{vkuiClass:"CalendarHeader",className:i},o&&createScopedElement(Tappable,{vkuiClass:classNames("CalendarHeader__nav-icon","CalendarHeader__nav-icon-prev"),onClick:c,"aria-label":"".concat(p,", ").concat(S.format(subMonths(t,1)))},createScopedElement(Icon20ChevronLeftOutline,{width:30,height:30})),createScopedElement("div",{vkuiClass:"CalendarHeader__pickers"},n?createScopedElement(React.Fragment,null,createScopedElement(Paragraph,{weight:"2",vkuiClass:"CalendarHeader__pickers-placeholder"},new Intl.DateTimeFormat(s,{month:"long"}).format(t)),createScopedElement(Paragraph,{weight:"2",vkuiClass:"CalendarHeader__pickers-placeholder"},new Intl.DateTimeFormat(s,{year:"numeric"}).format(t))):createScopedElement(React.Fragment,null,createScopedElement(CustomSelect,{value:t.getMonth(),options:C,renderOption:renderOption,dropdownOffsetDistance:4,fixDropdownWidth:!1,sizeY:SizeType.COMPACT,icon:createScopedElement(Icon12Dropdown,null),onChange:u,forceDropdownPortal:!1,selectType:SelectType.Plain,"aria-label":m}),createScopedElement(CustomSelect,{value:t.getFullYear(),options:f,dropdownOffsetDistance:4,fixDropdownWidth:!1,sizeY:SizeType.COMPACT,icon:createScopedElement(Icon12Dropdown,null),onChange:h,forceDropdownPortal:!1,selectType:SelectType.Plain,"aria-label":e}))),r&&createScopedElement(Tappable,{vkuiClass:classNames("CalendarHeader__nav-icon","CalendarHeader__nav-icon-next"),onClick:l,"aria-label":"".concat(d,", ").concat(S.format(addMonths(t,1)))},createScopedElement(Icon20ChevronRightOutline,{width:30,height:30})))};export{CalendarHeader};