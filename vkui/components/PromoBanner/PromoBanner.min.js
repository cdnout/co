import _extends from"@babel/runtime/helpers/extends";import _defineProperty from"@babel/runtime/helpers/defineProperty";import _objectSpread from"@babel/runtime/helpers/objectSpread2";import _slicedToArray from"@babel/runtime/helpers/slicedToArray";import _objectWithoutProperties from"@babel/runtime/helpers/objectWithoutProperties";var _excluded=["bannerData","onClose"];import{createScopedElement}from"../../lib/jsxRuntime";import*as React from"react";import{Icon24Dismiss}from"@vkontakte/icons";import{Button}from"../Button/Button";import SimpleCell from"../SimpleCell/SimpleCell";import Avatar from"../Avatar/Avatar";import{Caption}from"../Typography/Caption/Caption";import{usePlatform}from"../../hooks/usePlatform";import{getClassName}from"../../helpers/getClassName";import{warnOnce}from"../../lib/warnOnce";var warn=warnOnce("PromoBanner"),PromoBanner=function(e){var t=usePlatform(),r=e.bannerData,o=void 0===r?{}:r,r=(e.onClose,_objectWithoutProperties(e,_excluded)),a=null!=o.ageRestrictions?parseInt(o.ageRestrictions):o.ageRestriction,n=(o.ageRestriction&&"development"===process.env.NODE_ENV&&warn("Свойство bannerData.ageRestriction устарело и будет удалено в 5.0.0. Используйте bannerData.ageRestrictions"),React.useState("")),n=_slicedToArray(n,2),i=n[0],l=n[1],s=React.useMemo(function(){return o.statistics?o.statistics.reduce(function(e,t){return _objectSpread(_objectSpread({},e),{},_defineProperty({},t.type,t.url))},{}):{}},[o.statistics]),n=React.useCallback(function(){return l(s.click||"")},[s.click]);return React.useEffect(function(){s.playbackStarted&&l(s.playbackStarted)},[s.playbackStarted]),createScopedElement("div",_extends({vkuiClass:getClassName("PromoBanner",t)},r),createScopedElement("div",{vkuiClass:"PromoBanner__head"},createScopedElement(Caption,{vkuiClass:"PromoBanner__label"},o.advertisingLabel||"Advertisement"),null!=a&&createScopedElement(Caption,{vkuiClass:"PromoBanner__age"},a,"+"),!e.isCloseButtonHidden&&createScopedElement("div",{vkuiClass:"PromoBanner__close",onClick:e.onClose},createScopedElement(Icon24Dismiss,null))),createScopedElement(SimpleCell,{href:o.trackingLink,onClick:n,rel:"nofollow noopener noreferrer",target:"_blank",before:createScopedElement(Avatar,{mode:"image",size:48,src:o.iconLink,alt:o.title}),after:createScopedElement(Button,{mode:"outline"},o.ctaText),description:o.domain},o.title),0<i.length&&createScopedElement("div",{vkuiClass:"PromoBanner__pixels"},createScopedElement("img",{src:i,alt:""})))};export default PromoBanner;