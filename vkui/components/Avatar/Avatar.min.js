import _extends from"@babel/runtime/helpers/extends";import _objectSpread from"@babel/runtime/helpers/objectSpread2";import _slicedToArray from"@babel/runtime/helpers/slicedToArray";import _objectWithoutProperties from"@babel/runtime/helpers/objectWithoutProperties";var _excluded=["alt","crossOrigin","decoding","height","loading","referrerPolicy","sizes","src","srcSet","useMap","width","getRef","size","shadow","mode","className","children","getRootRef","style","aria-label","badge","overlayIcon","overlayMode","overlayAction","onClick"];import{createScopedElement}from"../../lib/jsxRuntime";import*as React from"react";import{Icon12Circle,Icon12OnlineMobile}from"@vkontakte/icons";import{getClassName}from"../../helpers/getClassName";import{classNames}from"../../lib/classNames";import{usePlatform}from"../../hooks/usePlatform";import{useAdaptivity}from"../../hooks/useAdaptivity";import Tappable from"../Tappable/Tappable";var AVATAR_DEFAULT_SIZE=48,AVATAR_DEFAULT_SHADOW=!0,Avatar=function(e){var a=e.alt,r=e.crossOrigin,o=e.decoding,t=e.height,i=e.loading,l=e.referrerPolicy,s=e.sizes,c=e.src,d=e.srcSet,n=e.useMap,m=e.width,v=e.getRef,A=e.size,p=void 0===A?AVATAR_DEFAULT_SIZE:A,A=e.shadow,A=void 0===A?AVATAR_DEFAULT_SHADOW:A,_=e.mode,_=void 0===_?"default":_,b=e.className,h=e.children,u=e.getRootRef,g=e.style,f=e["aria-label"],y=e.badge,S=e.overlayIcon,E=e.overlayMode,E=void 0===E?"light":E,T=e.overlayAction,k=e.onClick,e=_objectWithoutProperties(e,_excluded),C=usePlatform(),R=useAdaptivity().hasMouse,w=React.useState(!1),w=_slicedToArray(w,2),N=w[0],M=w[1],w=null!=T?T:R?"hover":"always",D="50%";switch(_){case"image":p<64&&(D=4),64<=p&&p<96&&(D=6),96<=p&&(D=8);break;case"app":p<=40&&(D=8),40<p&&p<56&&(D=10),56<=p&&p<64&&(D=12),64<=p&&p<84&&(D=16),84<=p&&(D=18)}T=c||d;return createScopedElement("div",_extends({},e,{vkuiClass:classNames(getClassName("Avatar",C),"Avatar--type-".concat(_),"Avatar--sz-".concat(p),{"Avatar--shadow":A,"Avatar--failed":N}),className:b,ref:u,role:T?"img":"presentation","aria-label":a||f,onClick:S?void 0:k,style:_objectSpread(_objectSpread({},g),{},{width:p,height:p,borderRadius:D})}),T&&createScopedElement("img",{crossOrigin:r,decoding:o,height:t,loading:i,referrerPolicy:l,sizes:s,src:c,srcSet:d,useMap:n,width:m,ref:v,onError:function(){M(!0)},onLoad:function(){M(!1)},vkuiClass:"Avatar__img",alt:""}),h&&createScopedElement("div",{vkuiClass:"Avatar__children"},h),S&&createScopedElement(Tappable,{Component:"button",vkuiClass:classNames("Avatar__overlay",{"Avatar__overlay--visible":"always"===w,"Avatar__overlay--light":"light"===E,"Avatar__overlay--dark":"dark"===E}),hoverMode:"Avatar__overlay--visible",focusVisibleMode:"Avatar__overlay--focus-visible",hasActive:!1,onClick:k},S),y&&createScopedElement("div",{vkuiClass:classNames("Avatar__badge",{"Avatar__badge--large":96<=p,"Avatar__badge--shadow":"online"!==y&&"online-mobile"!==y})},"online"===y?createScopedElement("div",{vkuiClass:"Avatar__badge-online"},createScopedElement(Icon12Circle,{width:72<=p?15:12,height:72<=p?15:12})):"online-mobile"===y?createScopedElement("div",{vkuiClass:"Avatar__badge-online-mobile"},createScopedElement(Icon12OnlineMobile,{width:72<=p?9:8,height:72<=p?15:12})):y))};export default Avatar;export{AVATAR_DEFAULT_SIZE,AVATAR_DEFAULT_SHADOW};