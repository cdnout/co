import _extends from"@babel/runtime/helpers/extends";import _slicedToArray from"@babel/runtime/helpers/slicedToArray";import _objectWithoutProperties from"@babel/runtime/helpers/objectWithoutProperties";var _excluded=["size","name","options","getRootRef","onChange","value","defaultValue","children"],_excluded2=["label"];import{createScopedElement}from"../../lib/jsxRuntime";import*as React from"react";import{classNames}from"../../lib/classNames";import{useIsomorphicLayoutEffect}from"../../lib/useIsomorphicLayoutEffect";import{generateRandomId,noop}from"../../lib/utils";import{warnOnce}from"../../lib/warnOnce";import{SegmentedControlOption}from"./SegmentedControlOption/SegmentedControlOption";var warn=warnOnce("SegmentedControl"),SegmentedControl=function(e){var t=e.size,t=void 0===t?"l":t,o=e.name,r=e.options,n=e.getRootRef,a=e.onChange,l=void 0===a?noop:a,i=e.value,a=e.defaultValue,e=(e.children,_objectWithoutProperties(e,_excluded)),d=null!=a?a:null==(d=r[0])?void 0:d.value,a=("development"===process.env.NODE_ENV&&void 0!==i&&void 0!==a&&warn("SegmentedControl должен быть либо управляемым, либо неуправляемым(укажите либо свойство value, либо свойство defaultValue, но не оба).","error"),React.useState(0)),a=_slicedToArray(a,2),c=a[0],m=a[1],a=React.useState(d),d=_slicedToArray(a,2),a=d[0],u=d[1],s=null!=i?i:a,p=React.useRef(null!=o?o:generateRandomId()),d=(useIsomorphicLayoutEffect(function(){var e=r.findIndex(function(e){return e.value===s});-1===e&&"development"===process.env.NODE_ENV&&warn("defaultValue: такого значения нет среди опций!","error"),m(e)},[s,r]),"translateX(".concat(100*c,"%)"));return createScopedElement("div",_extends({},e,{vkuiClass:classNames("SegmentedControl","SegmentedControl--".concat(t)),ref:n}),createScopedElement("div",{role:"radiogroup",vkuiClass:"SegmentedControl__in"},-1<c&&createScopedElement("div",{"aria-hidden":"true",vkuiClass:"SegmentedControl__slider",style:{width:"".concat(100/r.length,"%"),transform:d,WebkitTransform:d}}),r.map(function(e){var t=e.label,o=_objectWithoutProperties(e,_excluded2);return createScopedElement(SegmentedControlOption,_extends({key:"".concat(o.value)},o,{vkuiClass:"SegmentedControl__option",name:p.current,checked:s===o.value,onChange:function(){return e=o.value,void 0===i&&u(e),void l(e);var e}}),t)})))};export{SegmentedControl};