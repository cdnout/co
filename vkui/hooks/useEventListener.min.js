import _objectSpread from"@babel/runtime/helpers/objectSpread2";import*as React from"react";import{noop}from"../lib/utils";import{canUseDOM}from"../lib/dom";import{useIsomorphicLayoutEffect}from"../lib/useIsomorphicLayoutEffect";function useEventListener(r,e,o){var t=React.useRef(e),n=(useIsomorphicLayoutEffect(function(){t.current=e},[e]),React.useCallback(function(e){return t.current&&t.current(e)},[])),c=React.useRef(noop),u=React.useCallback(function(){c.current(),c.current=noop},[]),a=React.useCallback(function(e){var t;canUseDOM&&(u(),e&&(t=_objectSpread({},o),e.addEventListener(r,n,t),c.current=function(){return e.removeEventListener(r,n,t)}))},[o,n,r,u]);return React.useEffect(function(){return u},[u]),{add:a,remove:u}}export{useEventListener};