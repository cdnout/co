import _slicedToArray from"@babel/runtime/helpers/slicedToArray";import*as React from"react";import vkBridge from"@vkontakte/vk-bridge";import{useIsomorphicLayoutEffect}from"../lib/useIsomorphicLayoutEffect";var initialState={type:"",viewportWidth:0,viewportHeight:0};function resolveAdaptivity(i){var i=i.detail,t=i.type,i=i.data;if("VKWebAppUpdateConfig"!==t||!i)return null;var e=i.adaptivity,t=i.viewport_width,i=i.viewport_height,r={type:"",viewportWidth:isFinite(t)?+t:0,viewportHeight:isFinite(i)?+i:0};switch(e){case"force_mobile":case"force_mobile_compact":case"adaptive":r.type=e}return r}function useBridgeAdaptivity(){var i=React.useState(initialState),i=_slicedToArray(i,2),t=i[0],e=i[1];return useIsomorphicLayoutEffect(function(){function i(i){i=resolveAdaptivity(i);i&&e(i)}return vkBridge.subscribe(i),function(){vkBridge.unsubscribe(i)}},[]),t}vkBridge.subscribe(function(i){i=resolveAdaptivity(i);i&&(initialState=i)});export{useBridgeAdaptivity};