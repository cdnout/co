"use strict";var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard").default,_interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault").default,_slicedToArray2=(Object.defineProperty(exports,"__esModule",{value:!0}),exports.useInsets=useInsets,_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"))),_objectSpread2=_interopRequireDefault(require("@babel/runtime/helpers/objectSpread2")),React=_interopRequireWildcard(require("react")),_vkBridge=_interopRequireDefault(require("@vkontakte/vk-bridge")),_useIsomorphicLayoutEffect=require("../lib/useIsomorphicLayoutEffect"),initialState={bottom:null,top:null,left:null,right:null};function resolveInsets(e){var e=e.detail,t=e.type,r=e.data;switch(t){case"VKWebAppUpdateConfig":case"VKWebAppUpdateInsets":var i=r.insets;if(i)return(0,_objectSpread2.default)((0,_objectSpread2.default)({},i),{},{bottom:150<i.bottom?0:i.bottom})}return null}function useInsets(){var e=React.useState(initialState),e=(0,_slicedToArray2.default)(e,2),t=e[0],r=e[1];return(0,_useIsomorphicLayoutEffect.useIsomorphicLayoutEffect)(function(){function e(e){e=resolveInsets(e);e&&r(e)}return _vkBridge.default.subscribe(e),function(){_vkBridge.default.unsubscribe(e)}},[]),t}_vkBridge.default.subscribe(function(e){e=resolveInsets(e);e&&(initialState=e)});