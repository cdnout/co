"use strict";var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard").default,_interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault").default,_slicedToArray2=(Object.defineProperty(exports,"__esModule",{value:!0}),exports.getPreciseKeyboardState=getPreciseKeyboardState,exports.useKeyboard=useKeyboard,_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"))),React=_interopRequireWildcard(require("react")),_dom=require("../lib/dom"),_useGlobalEventListener=require("./useGlobalEventListener");function getPreciseKeyboardState(e){var t=e.innerHeight,e=e.screen.availHeight;return 24<Math.round(100*(1-t/e))}var eventOptions={passive:!0,capture:!1};function useKeyboard(){var e=(0,_dom.useDOM)(),r=e.window,i=e.document,e=React.useState(!1),e=(0,_slicedToArray2.default)(e,2),t=e[0],a=e[1],e=React.useState(!1),e=(0,_slicedToArray2.default)(e,2),u=e[0],n=e[1],l=React.useRef(null),o=React.useCallback(function(e){l.current&&clearTimeout(l.current);var t=!(!0!==e&&"focusin"!==e.type||"INPUT"!==(null==i||null==(e=i.activeElement)?void 0:e.tagName)&&"TEXTAREA"!==(null==i||null==(e=i.activeElement)?void 0:e.tagName));a(t),n(!1),l.current=setTimeout(function(){a(t),n(getPreciseKeyboardState(r))},300)},[null==i||null==(e=i.activeElement)?void 0:e.tagName,r]);return React.useEffect(function(){o(!0)},[o]),(0,_useGlobalEventListener.useGlobalEventListener)(i,"focusout",o,eventOptions),(0,_useGlobalEventListener.useGlobalEventListener)(i,"focusin",o,eventOptions),{isOpened:t,isPrecise:u}}