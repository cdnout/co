"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault").default,_interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard").default,_jsxRuntime=(Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.AVATAR_DEFAULT_SIZE=exports.AVATAR_DEFAULT_SHADOW=void 0,require("../../lib/jsxRuntime")),_extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends")),_objectSpread2=_interopRequireDefault(require("@babel/runtime/helpers/objectSpread2")),_slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray")),_objectWithoutProperties2=_interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties")),React=_interopRequireWildcard(require("react")),_icons=require("@vkontakte/icons"),_getClassName=require("../../helpers/getClassName"),_classNames=require("../../lib/classNames"),_usePlatform=require("../../hooks/usePlatform"),_useAdaptivity2=require("../../hooks/useAdaptivity"),_Tappable=_interopRequireDefault(require("../Tappable/Tappable")),_excluded=["alt","crossOrigin","decoding","height","loading","referrerPolicy","sizes","src","srcSet","useMap","width","getRef","size","shadow","mode","className","children","getRootRef","style","aria-label","badge","overlayIcon","overlayMode","overlayAction","onClick"],AVATAR_DEFAULT_SIZE=48,AVATAR_DEFAULT_SHADOW=(exports.AVATAR_DEFAULT_SIZE=AVATAR_DEFAULT_SIZE,!0),Avatar=(exports.AVATAR_DEFAULT_SHADOW=AVATAR_DEFAULT_SHADOW,function(e){var a=e.alt,r=e.crossOrigin,t=e.decoding,i=e.height,s=e.loading,l=e.referrerPolicy,o=e.sizes,d=e.src,n=e.srcSet,u=e.useMap,c=e.width,_=e.getRef,A=e.size,v=void 0===A?AVATAR_DEFAULT_SIZE:A,A=e.shadow,A=void 0===A?AVATAR_DEFAULT_SHADOW:A,p=e.mode,p=void 0===p?"default":p,m=e.className,b=e.children,h=e.getRootRef,f=e.style,R=e["aria-label"],g=e.badge,y=e.overlayIcon,S=e.overlayMode,S=void 0===S?"light":S,T=e.overlayAction,E=e.onClick,e=(0,_objectWithoutProperties2.default)(e,_excluded),q=(0,_usePlatform.usePlatform)(),x=(0,_useAdaptivity2.useAdaptivity)().hasMouse,D=React.useState(!1),D=(0,_slicedToArray2.default)(D,2),j=D[0],k=D[1],D=null!=T?T:x?"hover":"always",C="50%";switch(p){case"image":v<64&&(C=4),64<=v&&v<96&&(C=6),96<=v&&(C=8);break;case"app":v<=40&&(C=8),40<v&&v<56&&(C=10),56<=v&&v<64&&(C=12),64<=v&&v<84&&(C=16),84<=v&&(C=18)}T=d||n;return(0,_jsxRuntime.createScopedElement)("div",(0,_extends2.default)({},e,{vkuiClass:(0,_classNames.classNames)((0,_getClassName.getClassName)("Avatar",q),"Avatar--type-".concat(p),"Avatar--sz-".concat(v),{"Avatar--shadow":A,"Avatar--failed":j}),className:m,ref:h,role:T?"img":"presentation","aria-label":a||R,onClick:y?void 0:E,style:(0,_objectSpread2.default)((0,_objectSpread2.default)({},f),{},{width:v,height:v,borderRadius:C})}),T&&(0,_jsxRuntime.createScopedElement)("img",{crossOrigin:r,decoding:t,height:i,loading:s,referrerPolicy:l,sizes:o,src:d,srcSet:n,useMap:u,width:c,ref:_,onError:function(){k(!0)},onLoad:function(){k(!1)},vkuiClass:"Avatar__img",alt:""}),b&&(0,_jsxRuntime.createScopedElement)("div",{vkuiClass:"Avatar__children"},b),y&&(0,_jsxRuntime.createScopedElement)(_Tappable.default,{Component:"button",vkuiClass:(0,_classNames.classNames)("Avatar__overlay",{"Avatar__overlay--visible":"always"===D,"Avatar__overlay--light":"light"===S,"Avatar__overlay--dark":"dark"===S}),hoverMode:"Avatar__overlay--visible",focusVisibleMode:"Avatar__overlay--focus-visible",hasActive:!1,onClick:E},y),g&&(0,_jsxRuntime.createScopedElement)("div",{vkuiClass:(0,_classNames.classNames)("Avatar__badge",{"Avatar__badge--large":96<=v,"Avatar__badge--shadow":"online"!==g&&"online-mobile"!==g})},"online"===g?(0,_jsxRuntime.createScopedElement)("div",{vkuiClass:"Avatar__badge-online"},(0,_jsxRuntime.createScopedElement)(_icons.Icon12Circle,{width:72<=v?15:12,height:72<=v?15:12})):"online-mobile"===g?(0,_jsxRuntime.createScopedElement)("div",{vkuiClass:"Avatar__badge-online-mobile"},(0,_jsxRuntime.createScopedElement)(_icons.Icon12OnlineMobile,{width:72<=v?9:8,height:72<=v?15:12})):g))}),_default=Avatar;exports.default=_default;