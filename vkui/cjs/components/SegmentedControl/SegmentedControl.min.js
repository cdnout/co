"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault").default,_interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard").default,_jsxRuntime=(Object.defineProperty(exports,"__esModule",{value:!0}),exports.SegmentedControl=void 0,require("../../lib/jsxRuntime")),_extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends")),_slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray")),_objectWithoutProperties2=_interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties")),React=_interopRequireWildcard(require("react")),_classNames=require("../../lib/classNames"),_useIsomorphicLayoutEffect=require("../../lib/useIsomorphicLayoutEffect"),_utils=require("../../lib/utils"),_warnOnce=require("../../lib/warnOnce"),_SegmentedControlOption=require("./SegmentedControlOption/SegmentedControlOption"),_excluded=["size","name","options","getRootRef","onChange","value","defaultValue","children"],_excluded2=["label"],warn=(0,_warnOnce.warnOnce)("SegmentedControl"),SegmentedControl=function(e){var t=e.size,t=void 0===t?"l":t,r=e.name,n=e.options,o=e.getRootRef,l=e.onChange,i=void 0===l?_utils.noop:l,u=e.value,l=e.defaultValue,e=(e.children,(0,_objectWithoutProperties2.default)(e,_excluded)),a=null!=l?l:null==(a=n[0])?void 0:a.value,l=("development"===process.env.NODE_ENV&&void 0!==u&&void 0!==l&&warn("SegmentedControl должен быть либо управляемым, либо неуправляемым(укажите либо свойство value, либо свойство defaultValue, но не оба).","error"),React.useState(0)),l=(0,_slicedToArray2.default)(l,2),d=l[0],s=l[1],l=React.useState(a),a=(0,_slicedToArray2.default)(l,2),l=a[0],c=a[1],m=null!=u?u:l,_=React.useRef(null!=r?r:(0,_utils.generateRandomId)()),a=((0,_useIsomorphicLayoutEffect.useIsomorphicLayoutEffect)(function(){var e=n.findIndex(function(e){return e.value===m});-1===e&&"development"===process.env.NODE_ENV&&warn("defaultValue: такого значения нет среди опций!","error"),s(e)},[m,n]),"translateX(".concat(100*d,"%)"));return(0,_jsxRuntime.createScopedElement)("div",(0,_extends2.default)({},e,{vkuiClass:(0,_classNames.classNames)("SegmentedControl","SegmentedControl--".concat(t)),ref:o}),(0,_jsxRuntime.createScopedElement)("div",{role:"radiogroup",vkuiClass:"SegmentedControl__in"},-1<d&&(0,_jsxRuntime.createScopedElement)("div",{"aria-hidden":"true",vkuiClass:"SegmentedControl__slider",style:{width:"".concat(100/n.length,"%"),transform:a,WebkitTransform:a}}),n.map(function(e){var t=e.label,r=(0,_objectWithoutProperties2.default)(e,_excluded2);return(0,_jsxRuntime.createScopedElement)(_SegmentedControlOption.SegmentedControlOption,(0,_extends2.default)({key:"".concat(r.value)},r,{vkuiClass:"SegmentedControl__option",name:_.current,checked:m===r.value,onChange:function(){return e=r.value,void 0===u&&c(e),void i(e);var e}}),t)})))};exports.SegmentedControl=SegmentedControl;