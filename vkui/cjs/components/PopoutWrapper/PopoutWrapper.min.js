"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault").default,_interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard").default,_jsxRuntime=(Object.defineProperty(exports,"__esModule",{value:!0}),exports.PopoutWrapper=void 0,require("../../lib/jsxRuntime")),_extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends")),_slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray")),_objectWithoutProperties2=_interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties")),React=_interopRequireWildcard(require("react")),_getClassName=require("../../helpers/getClassName"),_classNames=require("../../lib/classNames"),_platform=require("../../lib/platform"),_useTimeout=require("../../hooks/useTimeout"),_usePlatform=require("../../hooks/usePlatform"),_useGlobalEventListener=require("../../hooks/useGlobalEventListener"),_dom=require("../../lib/dom"),_excluded=["alignY","alignX","closing","hasMask","fixed","children","onClick"],PopoutWrapper=function(e){function r(e){e&&"vkui-animation-full-fade-in"!==e.animationName||d(!0)}var t=e.alignY,t=void 0===t?"center":t,i=e.alignX,i=void 0===i?"center":i,o=e.closing,o=void 0!==o&&o,a=e.hasMask,a=void 0===a||a,u=e.fixed,u=void 0===u||u,s=e.children,l=e.onClick,e=(0,_objectWithoutProperties2.default)(e,_excluded),n=(0,_usePlatform.usePlatform)(),p=React.useState(!a),p=(0,_slicedToArray2.default)(p,2),c=p[0],d=p[1],p=React.useRef(null),m=(0,_useTimeout.useTimeout)(r,n===_platform.IOS?300:200);React.useEffect(function(){c||m.set()},[m,c]);var _=(0,_dom.useDOM)().window,_=((0,_useGlobalEventListener.useGlobalEventListener)(_,"touchmove",function(e){return e.preventDefault()},{passive:!1}),(0,_getClassName.getClassName)("PopoutWrapper",n));return(0,_jsxRuntime.createScopedElement)("div",(0,_extends2.default)({},e,{vkuiClass:(0,_classNames.classNames)(_,"PopoutWrapper--v-".concat(t),"PopoutWrapper--h-".concat(i),{"PopoutWrapper--closing":o,"PopoutWrapper--opened":c,"PopoutWrapper--fixed":u,"PopoutWrapper--masked":a}),onAnimationEnd:c?void 0:r,ref:p}),(0,_jsxRuntime.createScopedElement)("div",{vkuiClass:"PopoutWrapper__container"},(0,_jsxRuntime.createScopedElement)("div",{vkuiClass:"PopoutWrapper__overlay",onClick:l}),(0,_jsxRuntime.createScopedElement)("div",{vkuiClass:"PopoutWrapper__content"},s)))};exports.PopoutWrapper=PopoutWrapper;