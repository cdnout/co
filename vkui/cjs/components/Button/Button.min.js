"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault").default,_interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard").default,_jsxRuntime=(Object.defineProperty(exports,"__esModule",{value:!0}),exports.Button=void 0,require("../../lib/jsxRuntime")),_extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends")),_objectWithoutProperties2=_interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties")),React=_interopRequireWildcard(require("react")),_classNames=require("../../lib/classNames"),_ConfigProviderContext=require("../ConfigProvider/ConfigProviderContext"),_Tappable=_interopRequireDefault(require("../Tappable/Tappable")),_Title=require("../Typography/Title/Title"),_Text=_interopRequireDefault(require("../Typography/Text/Text")),_Subhead=require("../Typography/Subhead/Subhead"),_Caption=require("../Typography/Caption/Caption"),_usePlatform=require("../../hooks/usePlatform"),_withAdaptivity=require("../../hoc/withAdaptivity"),_platform=require("../../lib/platform"),_Spinner=_interopRequireDefault(require("../Spinner/Spinner")),_Headline=_interopRequireDefault(require("../Typography/Headline/Headline")),_excluded=["size","sizeY","platform"],_excluded2=["size","mode","appearance","stretched","align","children","before","after","getRootRef","sizeY","Component","loading","onClick","stopPropagation"],ButtonTypography=function(e){var t=e.size,r=e.sizeY,o=e.platform,a=(0,_objectWithoutProperties2.default)(e,_excluded),i=r===_withAdaptivity.SizeType.COMPACT;switch(t){case"l":return i?(0,_jsxRuntime.createScopedElement)(_Text.default,(0,_extends2.default)({weight:"medium"},a)):o===_platform.ANDROID?(0,_jsxRuntime.createScopedElement)(_Headline.default,(0,_extends2.default)({weight:"medium"},a)):(0,_jsxRuntime.createScopedElement)(_Title.Title,(0,_extends2.default)({level:"3",weight:"2"},a));case"m":return i?(0,_jsxRuntime.createScopedElement)(_Subhead.Subhead,(0,_extends2.default)({weight:o===_platform.VKCOM?"3":"2"},a)):(0,_jsxRuntime.createScopedElement)(_Text.default,(0,_extends2.default)({weight:"medium"},a));default:return o===_platform.IOS?(0,_jsxRuntime.createScopedElement)(_Subhead.Subhead,(0,_extends2.default)({weight:"2"},a)):o===_platform.VKCOM?(0,_jsxRuntime.createScopedElement)(_Caption.Caption,a):i?(0,_jsxRuntime.createScopedElement)(_Caption.Caption,(0,_extends2.default)({weight:"2"},a)):(0,_jsxRuntime.createScopedElement)(_Subhead.Subhead,(0,_extends2.default)({weight:"2"},a))}};function resolveButtonAppearance(e,t){var r=e,o=t;if(void 0===e)switch(t){case"tertiary":case"secondary":case"primary":case"outline":r="accent";break;case"commerce":o="primary",r="positive";break;case"destructive":o="primary",r="negative";break;case"overlay_primary":o="primary",r="overlay";break;case"overlay_secondary":o="secondary",r="overlay";break;case"overlay_outline":o="outline",r="overlay"}return{resolvedAppearance:r,resolvedMode:o}}var ButtonComponent=function(e){var t=e.size,t=void 0===t?"s":t,r=e.mode,r=void 0===r?"primary":r,o=e.appearance,a=e.stretched,a=void 0!==a&&a,i=e.align,i=void 0===i?"center":i,n=e.children,u=e.before,l=e.after,s=e.getRootRef,p=e.sizeY,d=e.Component,d=void 0===d?"button":d,c=e.loading,_=e.onClick,m=e.stopPropagation,m=void 0===m||m,e=(0,_objectWithoutProperties2.default)(e,_excluded2),f=(0,_usePlatform.usePlatform)(),v=Boolean(u||l),h=!n&&Boolean(l)!==Boolean(u),o=resolveButtonAppearance(o,r),r=o.resolvedMode,o=o.resolvedAppearance,x=React.useContext(_ConfigProviderContext.ConfigProviderContext).hasNewTokens;return(0,_jsxRuntime.createScopedElement)(_Tappable.default,(0,_extends2.default)({},e,{Component:e.href?"a":d,onClick:c?void 0:_,focusVisibleMode:"outside",stopPropagation:m,vkuiClass:(0,_classNames.classNames)("Button","Button--sz-".concat(t),"Button--lvl-".concat(r),"Button--clr-".concat(o),"Button--aln-".concat(i),"Button--sizeY-".concat(p),a&&"Button--stretched",v&&"Button--with-icon",h&&"Button--singleIcon"),getRootRef:s,hoverMode:x?"Button--hover":"background",activeMode:x?"Button--active":"opacity"}),c&&(0,_jsxRuntime.createScopedElement)(_Spinner.default,{size:"small",vkuiClass:"Button__spinner"}),(0,_jsxRuntime.createScopedElement)("span",{vkuiClass:"Button__in"},u&&(0,_jsxRuntime.createScopedElement)("span",{vkuiClass:"Button__before"},u),n&&(0,_jsxRuntime.createScopedElement)(ButtonTypography,{size:t,sizeY:p,platform:f,vkuiClass:"Button__content",Component:"span"},n),l&&(0,_jsxRuntime.createScopedElement)("span",{vkuiClass:"Button__after"},l)))},Button=(0,_withAdaptivity.withAdaptivity)(ButtonComponent,{sizeY:!0});exports.Button=Button;