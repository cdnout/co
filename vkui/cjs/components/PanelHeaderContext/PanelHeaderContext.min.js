"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault").default,_interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard").default,_jsxRuntime=(Object.defineProperty(exports,"__esModule",{value:!0}),exports.PanelHeaderContext=void 0,require("../../lib/jsxRuntime")),_extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends")),_slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray")),_objectWithoutProperties2=_interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties")),React=_interopRequireWildcard(require("react")),_FixedLayout=_interopRequireDefault(require("../FixedLayout/FixedLayout")),_classNames=require("../../lib/classNames"),_getClassName=require("../../helpers/getClassName"),_AdaptivityContext=require("../AdaptivityProvider/AdaptivityContext"),_useAdaptivity2=require("../../hooks/useAdaptivity"),_dom=require("../../lib/dom"),_useIsomorphicLayoutEffect=require("../../lib/useIsomorphicLayoutEffect"),_useGlobalEventListener=require("../../hooks/useGlobalEventListener"),_useTimeout=require("../../hooks/useTimeout"),_usePlatform=require("../../hooks/usePlatform"),_excluded=["children","onClose","opened"],PanelHeaderContext=function(e){function t(){return l(!1)}var r=e.children,i=e.onClose,u=e.opened,a=void 0!==u&&u,u=(0,_objectWithoutProperties2.default)(e,_excluded),e=(0,_dom.useDOM)().document,o=(0,_usePlatform.usePlatform)(),s=React.useState(a),s=(0,_slicedToArray2.default)(s,2),n=s[0],l=s[1],d=n&&!a,s=(0,_useAdaptivity2.useAdaptivity)().viewWidth>=_AdaptivityContext.ViewWidth.SMALL_TABLET,c=React.useRef(null),_=((0,_useIsomorphicLayoutEffect.useIsomorphicLayoutEffect)(function(){a&&l(!0)},[a]),(0,_useGlobalEventListener.useGlobalEventListener)(e,"click",s&&a&&!d&&function(e){c.current&&!c.current.contains(e.target)&&i()}),(0,_useTimeout.useTimeout)(t,200));return React.useEffect(function(){return d?_.set():_.clear()},[_,d]),(0,_jsxRuntime.createScopedElement)(_FixedLayout.default,(0,_extends2.default)({},u,{vkuiClass:(0,_classNames.classNames)((0,_getClassName.getClassName)("PanelHeaderContext",o),{"PanelHeaderContext--opened":a,"PanelHeaderContext--closing":d,"PanelHeaderContext--desktop":s}),vertical:"top"}),(0,_jsxRuntime.createScopedElement)("div",{vkuiClass:"PanelHeaderContext__in",ref:c,onAnimationEnd:d?t:void 0},(0,_jsxRuntime.createScopedElement)("div",{vkuiClass:"PanelHeaderContext__content"},n&&r)),!s&&n&&(0,_jsxRuntime.createScopedElement)("div",{onClick:i,vkuiClass:"PanelHeaderContext__fade"}))};exports.PanelHeaderContext=PanelHeaderContext;