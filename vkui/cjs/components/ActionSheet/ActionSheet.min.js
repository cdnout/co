"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault").default,_interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard").default,_jsxRuntime=(Object.defineProperty(exports,"__esModule",{value:!0}),exports.ActionSheet=void 0,require("../../lib/jsxRuntime")),_extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends")),_slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray")),_objectWithoutProperties2=_interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties")),React=_interopRequireWildcard(require("react")),_PopoutWrapper=require("../PopoutWrapper/PopoutWrapper"),_withAdaptivity=require("../../hoc/withAdaptivity"),_platform=require("../../lib/platform"),_ActionSheetDropdownDesktop=require("./ActionSheetDropdownDesktop"),_ActionSheetDropdown=require("./ActionSheetDropdown"),_utils=require("../../lib/utils"),_ActionSheetContext=require("./ActionSheetContext"),_Caption=require("../Typography/Caption/Caption"),_usePlatform=require("../../hooks/usePlatform"),_useTimeout=require("../../hooks/useTimeout"),_useAdaptivity2=require("../../hooks/useAdaptivity"),_useObjectMemo=require("../../hooks/useObjectMemo"),_warnOnce=require("../../lib/warnOnce"),_excluded=["children","className","header","text","style","iosCloseItem"],warn=(0,_warnOnce.warnOnce)("ActionSheet"),ActionSheet=function(e){function t(){return p(!0)}var o=e.children,i=e.className,r=e.header,u=e.text,n=e.style,s=e.iosCloseItem,a=(0,_objectWithoutProperties2.default)(e,_excluded),e=(0,_usePlatform.usePlatform)(),c=React.useState(!1),c=(0,_slicedToArray2.default)(c,2),l=c[0],p=c[1],_=React.useRef(_utils.noop),c=("development"!==process.env.NODE_ENV||a.onClose||warn("can't close on outer click without onClose","error"),(0,_useAdaptivity2.useAdaptivity)()),d=c.viewWidth,h=c.viewHeight,c=c.hasMouse,d=d>=_withAdaptivity.ViewWidth.SMALL_TABLET&&(c||h>=_withAdaptivity.ViewHeight.MEDIUM),c=e===_platform.IOS?300:200,m=(0,_useTimeout.useTimeout)(function(){var e;null!=(e=a.onClose)&&e.call(a),_.current(),_.current=_utils.noop},c=d?0:c),h=(React.useEffect(function(){l?m.set():m.clear()},[l,m]),React.useCallback(function(t,o,i){return function(e){e.persist(),o&&o(e),i?(_.current=function(){return t&&t(e)},p(!0)):t&&t(e)}},[])),h=(0,_useObjectMemo.useObjectMemo)({onItemClick:h,isDesktop:d}),A=d?_ActionSheetDropdownDesktop.ActionSheetDropdownDesktop:_ActionSheetDropdown.ActionSheetDropdown,h=(0,_jsxRuntime.createScopedElement)(_ActionSheetContext.ActionSheetContext.Provider,{value:h},(0,_jsxRuntime.createScopedElement)(A,(0,_extends2.default)({closing:l,timeout:c},a,{onClose:t,className:d?i:void 0,style:d?n:void 0}),((0,_utils.hasReactNode)(r)||(0,_utils.hasReactNode)(u))&&(0,_jsxRuntime.createScopedElement)("header",{vkuiClass:"ActionSheet__header"},(0,_utils.hasReactNode)(r)&&(0,_jsxRuntime.createScopedElement)(_Caption.Caption,{weight:e===_platform.IOS?"1":"2",vkuiClass:"ActionSheet__title"},r),(0,_utils.hasReactNode)(u)&&(0,_jsxRuntime.createScopedElement)(_Caption.Caption,{vkuiClass:"ActionSheet__text"},u)),o,e===_platform.IOS&&!d&&s));return d?h:(0,_jsxRuntime.createScopedElement)(_PopoutWrapper.PopoutWrapper,{closing:l,alignY:"bottom",className:i,style:n,onClick:t,hasMask:!0,fixed:!0},h)};(exports.ActionSheet=ActionSheet).defaultProps={popupDirection:"bottom"};