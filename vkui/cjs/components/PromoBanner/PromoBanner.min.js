"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault").default,_interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard").default,_jsxRuntime=(Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,require("../../lib/jsxRuntime")),_extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends")),_defineProperty2=_interopRequireDefault(require("@babel/runtime/helpers/defineProperty")),_objectSpread3=_interopRequireDefault(require("@babel/runtime/helpers/objectSpread2")),_slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray")),_objectWithoutProperties2=_interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties")),React=_interopRequireWildcard(require("react")),_icons=require("@vkontakte/icons"),_Button=require("../Button/Button"),_SimpleCell=_interopRequireDefault(require("../SimpleCell/SimpleCell")),_Avatar=_interopRequireDefault(require("../Avatar/Avatar")),_Caption=require("../Typography/Caption/Caption"),_usePlatform=require("../../hooks/usePlatform"),_getClassName=require("../../helpers/getClassName"),_warnOnce=require("../../lib/warnOnce"),_excluded=["bannerData","onClose"],warn=(0,_warnOnce.warnOnce)("PromoBanner"),PromoBanner=function(e){var t=(0,_usePlatform.usePlatform)(),r=e.bannerData,a=void 0===r?{}:r,r=(e.onClose,(0,_objectWithoutProperties2.default)(e,_excluded)),i=null!=a.ageRestrictions?parseInt(a.ageRestrictions):a.ageRestriction,n=(a.ageRestriction&&"development"===process.env.NODE_ENV&&warn("Свойство bannerData.ageRestriction устарело и будет удалено в 5.0.0. Используйте bannerData.ageRestrictions"),React.useState("")),n=(0,_slicedToArray2.default)(n,2),o=n[0],l=n[1],u=React.useMemo(function(){return a.statistics?a.statistics.reduce(function(e,t){return(0,_objectSpread3.default)((0,_objectSpread3.default)({},e),{},(0,_defineProperty2.default)({},t.type,t.url))},{}):{}},[a.statistics]),n=React.useCallback(function(){return l(u.click||"")},[u.click]);return React.useEffect(function(){u.playbackStarted&&l(u.playbackStarted)},[u.playbackStarted]),(0,_jsxRuntime.createScopedElement)("div",(0,_extends2.default)({vkuiClass:(0,_getClassName.getClassName)("PromoBanner",t)},r),(0,_jsxRuntime.createScopedElement)("div",{vkuiClass:"PromoBanner__head"},(0,_jsxRuntime.createScopedElement)(_Caption.Caption,{vkuiClass:"PromoBanner__label"},a.advertisingLabel||"Advertisement"),null!=i&&(0,_jsxRuntime.createScopedElement)(_Caption.Caption,{vkuiClass:"PromoBanner__age"},i,"+"),!e.isCloseButtonHidden&&(0,_jsxRuntime.createScopedElement)("div",{vkuiClass:"PromoBanner__close",onClick:e.onClose},(0,_jsxRuntime.createScopedElement)(_icons.Icon24Dismiss,null))),(0,_jsxRuntime.createScopedElement)(_SimpleCell.default,{href:a.trackingLink,onClick:n,rel:"nofollow noopener noreferrer",target:"_blank",before:(0,_jsxRuntime.createScopedElement)(_Avatar.default,{mode:"image",size:48,src:a.iconLink,alt:a.title}),after:(0,_jsxRuntime.createScopedElement)(_Button.Button,{mode:"outline"},a.ctaText),description:a.domain},a.title),0<o.length&&(0,_jsxRuntime.createScopedElement)("div",{vkuiClass:"PromoBanner__pixels"},(0,_jsxRuntime.createScopedElement)("img",{src:o,alt:""})))},_default=PromoBanner;exports.default=_default;