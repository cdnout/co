"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault").default,_interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard").default,_jsxRuntime=(Object.defineProperty(exports,"__esModule",{value:!0}),exports.ClickPopper=void 0,require("../../lib/jsxRuntime")),_extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends")),_slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray")),_objectWithoutProperties2=_interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties")),React=_interopRequireWildcard(require("react")),_dom=require("../../lib/dom"),_Popper=require("../Popper/Popper"),_useExternRef=require("../../hooks/useExternRef"),_useEventListener=require("../../hooks/useEventListener"),_useGlobalEventListener=require("../../hooks/useGlobalEventListener"),_usePatchChildrenRef3=require("../../hooks/usePatchChildrenRef"),_excluded=["getRef","content","children","onShownChange","shown"],ClickPopper=function(e){function t(e){"boolean"!=typeof o&&a(e),"function"==typeof u&&u(e)}var r=e.getRef,n=e.content,i=e.children,u=e.onShownChange,o=e.shown,e=(0,_objectWithoutProperties2.default)(e,_excluded),l=React.useState(o||!1),l=(0,_slicedToArray2.default)(l,2),s=l[0],a=l[1],l=React.useState(null),l=(0,_slicedToArray2.default)(l,2),c=l[0],l=l[1],p="boolean"==typeof o?o:s,s=(0,_dom.useDOM)().document,l=(0,_useExternRef.useExternRef)(l,r),r=(0,_usePatchChildrenRef3.usePatchChildrenRef)(i),i=(0,_slicedToArray2.default)(r,2),d=i[0],r=i[1],f=((0,_useGlobalEventListener.useGlobalEventListener)(s,"click",function(e){var r;!c||null!=(r=d.current)&&r.contains(e.target)||c.contains(e.target)||t(!1)}),(0,_useEventListener.useEventListener)("click",function(){t(!p)}));return React.useEffect(function(){null!==d.current&&f.add(d.current)},[d,f]),(0,_jsxRuntime.createScopedElement)(React.Fragment,null,r,p&&(0,_jsxRuntime.createScopedElement)(_Popper.Popper,(0,_extends2.default)({},e,{targetRef:d,getRef:l}),n))};exports.ClickPopper=ClickPopper;