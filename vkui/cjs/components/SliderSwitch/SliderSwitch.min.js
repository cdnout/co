"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault").default,_interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard").default,_jsxRuntime=(Object.defineProperty(exports,"__esModule",{value:!0}),exports.SliderSwitch=void 0,require("../../lib/jsxRuntime")),_extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends")),_slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray")),_objectWithoutProperties2=_interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties")),_classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck")),_createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass")),_assertThisInitialized2=_interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized")),_inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits")),_createSuper2=_interopRequireDefault(require("@babel/runtime/helpers/createSuper")),_defineProperty2=_interopRequireDefault(require("@babel/runtime/helpers/defineProperty")),React=_interopRequireWildcard(require("react")),_SliderSwitchButton=require("./SliderSwitchButton"),_classNames2=require("../../lib/classNames"),_warnOnce=require("../../lib/warnOnce"),_excluded=["name","options","activeValue","onSwitch"],warn=(0,_warnOnce.warnOnce)("SliderSwitch"),SliderSwitch=function(e){(0,_inherits2.default)(i,e);var t=(0,_createSuper2.default)(i);function i(e){var r;return(0,_classCallCheck2.default)(this,i),r=t.call(this,e),(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(r),"firstButton",void 0),(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(r),"secondButton",void 0),(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(r),"onSwitch",function(e){var t=r.props.onSwitch;r.setState(function(){return{activeValue:e}},function(){t&&t(e)})}),(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(r),"handleFirstClick",function(){var e=r.props.options[0].value;r.onSwitch(e)}),(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(r),"handleSecondClick",function(){var e=r.props.options[1].value;r.onSwitch(e)}),(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(r),"handleFirstHover",function(){r.setState(function(){return{hoveredOptionId:0}})}),(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(r),"handleSecondHover",function(){r.setState(function(){return{hoveredOptionId:1}})}),(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(r),"resetFocusedOption",function(){r.setState(function(){return{hoveredOptionId:-1}})}),(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(r),"switchByKey",function(e){var t,i;"Enter"!==e.key&&"Spacebar"!==e.key&&" "!==e.key||(e.preventDefault(),e=r.props.options,t=r.state.activeValue,void 0!==(i=null==(i=e.find(function(e){return e.value!==t}))?void 0:i.value)&&r.onSwitch(i),e[0].value===i?null!=(e=r.firstButton.current)&&e.focus():null!=(i=r.secondButton.current)&&i.focus())}),r.state={activeValue:null!=(e=e.activeValue)?e:"",hoveredOptionId:-1},r.firstButton=React.createRef(),r.secondButton=React.createRef(),r}return(0,_createClass2.default)(i,[{key:"componentDidMount",value:function(){"development"===process.env.NODE_ENV&&warn("Этот компонент устарел и будет удален в 5.0.0. Используйте SegmentedControl.")}},{key:"render",value:function(){var e=this.props,t=e.name,i=e.options,e=(e.activeValue,e.onSwitch,(0,_objectWithoutProperties2.default)(e,_excluded)),r=this.state,n=r.activeValue,r=r.hoveredOptionId,i=(0,_slicedToArray2.default)(i,2),a=i[0],i=i[1],u=a.value===n,l=i.value===n;return(0,_jsxRuntime.createScopedElement)("div",(0,_extends2.default)({},e,{vkuiClass:"SliderSwitch",onKeyDown:this.switchByKey,onMouseLeave:this.resetFocusedOption}),!u&&!l&&(0,_jsxRuntime.createScopedElement)("div",{vkuiClass:"SliderSwitch__border"}),(0,_jsxRuntime.createScopedElement)("div",{vkuiClass:(0,_classNames2.classNames)("SliderSwitch__slider",((0,_defineProperty2.default)(e={},"SliderSwitch--firstActive",u),(0,_defineProperty2.default)(e,"SliderSwitch--secondActive",l),e))}),(0,_jsxRuntime.createScopedElement)("input",{type:"hidden",name:t,value:n}),(0,_jsxRuntime.createScopedElement)(_SliderSwitchButton.SliderSwitchButton,{active:u,hovered:0===r,"aria-pressed":u,onClick:this.handleFirstClick,onMouseEnter:this.handleFirstHover,getRootRef:this.firstButton},a.name),(0,_jsxRuntime.createScopedElement)(_SliderSwitchButton.SliderSwitchButton,{active:l,hovered:1===r,onClick:this.handleSecondClick,onMouseEnter:this.handleSecondHover,getRootRef:this.secondButton},i.name))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.activeValue&&e.activeValue!==t.activeValue?{activeValue:e.activeValue}:null}}]),i}(React.Component);exports.SliderSwitch=SliderSwitch,(0,_defineProperty2.default)(SliderSwitch,"defaultProps",{options:[{name:"",value:""},{name:"",value:""}]});