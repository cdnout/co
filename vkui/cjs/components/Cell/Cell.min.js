"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault").default,_interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard").default,_jsxRuntime=(Object.defineProperty(exports,"__esModule",{value:!0}),exports.Cell=void 0,require("../../lib/jsxRuntime")),_extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends")),_objectWithoutProperties2=_interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties")),React=_interopRequireWildcard(require("react")),_classNames=require("../../lib/classNames"),_utils=require("../../lib/utils"),_warnOnce=require("../../lib/warnOnce"),_getClassName=require("../../helpers/getClassName"),_platform=require("../../lib/platform"),_SimpleCell=_interopRequireDefault(require("../SimpleCell/SimpleCell")),_Removable=require("../Removable/Removable"),_usePlatform=require("../../hooks/usePlatform"),_useDraggable2=require("./useDraggable"),_ListContext=require("../List/ListContext"),_CellDragger=require("./CellDragger/CellDragger"),_CellCheckbox=require("./CellCheckbox/CellCheckbox"),_excluded=["mode","onRemove","removePlaceholder","onDragFinish","before","after","disabled","removable","draggable","selectable","Component","onChange","name","value","checked","defaultChecked","getRootRef","draggerLabel","className","style"],_excluded2=["dragging","rootElRef"],warn=(0,_warnOnce.warnOnce)("Cell"),Cell=function(e){var l,r,a=e.mode,t=e.onRemove,o=void 0===t?_utils.noop:t,t=e.removePlaceholder,t=void 0===t?"Удалить":t,i=e.onDragFinish,s=e.before,n=e.after,u=e.disabled,c=e.removable,d=e.draggable,m=e.selectable,b=e.Component,_=e.onChange,C=e.name,g=e.value,f=e.checked,p=e.defaultChecked,v=(e.getRootRef,e.draggerLabel),v=void 0===v?"Перенести ячейку":v,R=e.className,h=e.style,e=(0,_objectWithoutProperties2.default)(e,_excluded),x=a,a=(a||!m&&!c||(x=m?"selectable":"removable","development"===process.env.NODE_ENV&&(m&&warn('Свойство selectable устарело и будет удалено в 5.0.0. Используйте mode="selectable".'),c&&warn('Свойство removable устарело и будет удалено в 5.0.0. Используйте mode="removable".'))),"selectable"===x),m="removable"===x,c=(0,_usePlatform.usePlatform)(),x=(0,_useDraggable2.useDraggable)({onDragFinish:i}),q=x.dragging,D=x.rootElRef,i=(0,_objectWithoutProperties2.default)(x,_excluded2),k=React.useContext(_ListContext.ListContext).toggleDrag,x=(React.useEffect(function(){if(q)return k(!0),function(){return k(!1)}},[q,k]),d&&(l=(0,_jsxRuntime.createScopedElement)(_CellDragger.CellDragger,(0,_extends2.default)({vkuiClass:"Cell__dragger","aria-label":v},i))),a&&(r=(0,_jsxRuntime.createScopedElement)(_CellCheckbox.CellCheckbox,(0,_extends2.default)({vkuiClass:"Cell__checkbox"},{name:C,value:g,onChange:_,defaultChecked:p,checked:f,disabled:u}))),d&&!a||m||u),v=!x&&!q,i=(0,_classNames.classNames)((0,_getClassName.getClassName)("Cell",c),{"Cell--dragging":q,"Cell--removable":m,"Cell--selectable":a,"Cell--disabled":u}),C=(0,_jsxRuntime.createScopedElement)(_SimpleCell.default,(0,_extends2.default)({hasActive:v,hasHover:v},e,{vkuiClass:"Cell__content",disabled:x,Component:a?"label":b,before:(0,_jsxRuntime.createScopedElement)(React.Fragment,null,d&&(c===_platform.ANDROID||c===_platform.VKCOM)&&l,a&&r,s),after:(0,_jsxRuntime.createScopedElement)(React.Fragment,null,d&&c===_platform.IOS&&l,n)}));return m?(0,_jsxRuntime.createScopedElement)(_Removable.Removable,{vkuiClass:i,className:R,style:h,getRootRef:D,removePlaceholder:t,onRemove:function(e){return o(e,null==D?void 0:D.current)}},C):(0,_jsxRuntime.createScopedElement)("div",{vkuiClass:i,className:R,style:h,ref:D},C)};exports.Cell=Cell;