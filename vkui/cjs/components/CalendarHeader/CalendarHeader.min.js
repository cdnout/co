"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault").default,_interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard").default,_jsxRuntime=(Object.defineProperty(exports,"__esModule",{value:!0}),exports.CalendarHeader=void 0,require("../../lib/jsxRuntime")),_objectWithoutProperties2=_interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties")),React=_interopRequireWildcard(require("react")),_date=require("../../lib/date"),_icons=require("@vkontakte/icons"),_Tappable=_interopRequireDefault(require("../Tappable/Tappable")),_classNames=require("../../lib/classNames"),_CustomSelect=require("../CustomSelect/CustomSelect"),_CustomSelectOption=require("../CustomSelectOption/CustomSelectOption"),_withAdaptivity=require("../../hoc/withAdaptivity"),_calendar=require("../../lib/calendar"),_LocaleProviderContext=require("../LocaleProviderContext/LocaleProviderContext"),_Paragraph=require("../Typography/Paragraph/Paragraph"),_excluded=["option","children"],renderOption=function(e){e.option;var t=e.children,e=(0,_objectWithoutProperties2.default)(e,_excluded);return(0,_jsxRuntime.createScopedElement)(_CustomSelectOption.CustomSelectOption,e,(0,_jsxRuntime.createScopedElement)("span",{vkuiClass:"CalendarHeader__month_name"},t))},CalendarHeader=function(e){var t=e.viewDate,a=e.onChange,r=e.prevMonth,r=void 0===r||r,n=e.nextMonth,n=void 0===n||n,o=e.disablePickers,o=void 0!==o&&o,i=e.onNextMonth,l=e.onPrevMonth,c=e.className,u=e.prevMonthAriaLabel,u=void 0===u?"Предыдущий месяц":u,s=e.nextMonthAriaLabel,s=void 0===s?"Следующий месяц":s,d=e.changeMonthAriaLabel,d=void 0===d?"Изменить месяц":d,e=e.changeYearAriaLabel,e=void 0===e?"Изменить год":e,p=React.useContext(_LocaleProviderContext.LocaleProviderContext),m=React.useCallback(function(e){return a((0,_date.setMonth)(t,Number(e.target.value)))},[a,t]),_=React.useCallback(function(e){return a((0,_date.setYear)(t,Number(e.target.value)))},[a,t]),h=React.useMemo(function(){return(0,_calendar.getMonths)(p)},[p]),C=t.getFullYear(),v=React.useMemo(function(){return(0,_calendar.getYears)(C,100)},[C]),x=new Intl.DateTimeFormat(p,{year:"numeric",month:"long"});return(0,_jsxRuntime.createScopedElement)("div",{vkuiClass:"CalendarHeader",className:c},r&&(0,_jsxRuntime.createScopedElement)(_Tappable.default,{vkuiClass:(0,_classNames.classNames)("CalendarHeader__nav-icon","CalendarHeader__nav-icon-prev"),onClick:l,"aria-label":"".concat(u,", ").concat(x.format((0,_date.subMonths)(t,1)))},(0,_jsxRuntime.createScopedElement)(_icons.Icon20ChevronLeftOutline,{width:30,height:30})),(0,_jsxRuntime.createScopedElement)("div",{vkuiClass:"CalendarHeader__pickers"},o?(0,_jsxRuntime.createScopedElement)(React.Fragment,null,(0,_jsxRuntime.createScopedElement)(_Paragraph.Paragraph,{weight:"2",vkuiClass:"CalendarHeader__pickers-placeholder"},new Intl.DateTimeFormat(p,{month:"long"}).format(t)),(0,_jsxRuntime.createScopedElement)(_Paragraph.Paragraph,{weight:"2",vkuiClass:"CalendarHeader__pickers-placeholder"},new Intl.DateTimeFormat(p,{year:"numeric"}).format(t))):(0,_jsxRuntime.createScopedElement)(React.Fragment,null,(0,_jsxRuntime.createScopedElement)(_CustomSelect.CustomSelect,{value:t.getMonth(),options:h,renderOption:renderOption,dropdownOffsetDistance:4,fixDropdownWidth:!1,sizeY:_withAdaptivity.SizeType.COMPACT,icon:(0,_jsxRuntime.createScopedElement)(_icons.Icon12Dropdown,null),onChange:m,forceDropdownPortal:!1,selectType:_CustomSelect.SelectType.Plain,"aria-label":d}),(0,_jsxRuntime.createScopedElement)(_CustomSelect.CustomSelect,{value:t.getFullYear(),options:v,dropdownOffsetDistance:4,fixDropdownWidth:!1,sizeY:_withAdaptivity.SizeType.COMPACT,icon:(0,_jsxRuntime.createScopedElement)(_icons.Icon12Dropdown,null),onChange:_,forceDropdownPortal:!1,selectType:_CustomSelect.SelectType.Plain,"aria-label":e}))),n&&(0,_jsxRuntime.createScopedElement)(_Tappable.default,{vkuiClass:(0,_classNames.classNames)("CalendarHeader__nav-icon","CalendarHeader__nav-icon-next"),onClick:i,"aria-label":"".concat(s,", ").concat(x.format((0,_date.addMonths)(t,1)))},(0,_jsxRuntime.createScopedElement)(_icons.Icon20ChevronRightOutline,{width:30,height:30})))};exports.CalendarHeader=CalendarHeader;