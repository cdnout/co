"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault").default,_interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard").default,_jsxRuntime=(Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,require("../../lib/jsxRuntime")),_extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends")),_defineProperty2=_interopRequireDefault(require("@babel/runtime/helpers/defineProperty")),_slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray")),_objectWithoutProperties2=_interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties")),React=_interopRequireWildcard(require("react")),_classNames2=require("../../lib/classNames"),_DropdownIcon=require("../DropdownIcon/DropdownIcon"),_FormField=require("../FormField/FormField"),_withAdaptivity=require("../../hoc/withAdaptivity"),_getClassName=require("../../helpers/getClassName"),_Headline=_interopRequireDefault(require("../Typography/Headline/Headline")),_Text=_interopRequireDefault(require("../Typography/Text/Text")),_platform=require("../../lib/platform"),_useIsomorphicLayoutEffect=require("../../lib/useIsomorphicLayoutEffect"),_useEnsuredControl3=require("../../hooks/useEnsuredControl"),_useExternRef=require("../../hooks/useExternRef"),_usePlatform=require("../../hooks/usePlatform"),_excluded=["style","defaultValue","align","placeholder","children","className","getRef","getRootRef","disabled","sizeX","sizeY","multiline"],NativeSelect=function(e){var t=e.style,r=e.defaultValue,r=void 0===r?"":r,i=e.align,l=e.placeholder,a=e.children,u=e.className,o=e.getRef,s=e.getRootRef,n=e.disabled,d=e.sizeX,c=e.sizeY,p=e.multiline,e=(0,_objectWithoutProperties2.default)(e,_excluded),_=(0,_usePlatform.usePlatform)(),f=React.useState(""),f=(0,_slicedToArray2.default)(f,2),m=f[0],R=f[1],f=React.useState(!1),f=(0,_slicedToArray2.default)(f,2),h=f[0],q=f[1],f=(0,_useEnsuredControl3.useEnsuredControl)(e,{defaultValue:r}),r=(0,_slicedToArray2.default)(f,2),f=r[0],r=r[1],y=(0,_useExternRef.useExternRef)(o),o=((0,_useIsomorphicLayoutEffect.useIsomorphicLayoutEffect)(function(){var e=null==(e=y.current)?void 0:e.options[y.current.selectedIndex];e&&(R(e.text),q(""===e.value&&null!=l))},[f,a]),(_===_platform.VKCOM||c===_withAdaptivity.SizeType.COMPACT?_Text:_Headline).default);return(0,_jsxRuntime.createScopedElement)(_FormField.FormField,{Component:"label",vkuiClass:(0,_classNames2.classNames)((0,_getClassName.getClassName)("Select",_),((0,_defineProperty2.default)(_={},"Select--not-selected",h),(0,_defineProperty2.default)(_,"Select--align-".concat(i),!!i),(0,_defineProperty2.default)(_,"Select--sizeX--".concat(d),!!d),(0,_defineProperty2.default)(_,"Select--sizeY--".concat(c),!!c),(0,_defineProperty2.default)(_,"Select--multiline",p),_)),className:u,style:t,getRootRef:s,disabled:n,after:(0,_jsxRuntime.createScopedElement)(_DropdownIcon.DropdownIcon,null)},(0,_jsxRuntime.createScopedElement)("select",(0,_extends2.default)({},e,{disabled:n,vkuiClass:"Select__el",onChange:r,value:f,ref:y}),l&&(0,_jsxRuntime.createScopedElement)("option",{value:""},l),a),(0,_jsxRuntime.createScopedElement)(o,{Component:"div",weight:"regular",vkuiClass:"Select__container"},(0,_jsxRuntime.createScopedElement)("span",{vkuiClass:"Select__title"},m)))},_default=(0,_withAdaptivity.withAdaptivity)(NativeSelect,{sizeX:!0,sizeY:!0});exports.default=_default;