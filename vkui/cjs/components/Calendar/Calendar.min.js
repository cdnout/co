"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault").default,_interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard").default,_jsxRuntime=(Object.defineProperty(exports,"__esModule",{value:!0}),exports.Calendar=void 0,require("../../lib/jsxRuntime")),_extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends")),_objectWithoutProperties2=_interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties")),React=_interopRequireWildcard(require("react")),_date=require("../../lib/date"),_CalendarHeader=require("../CalendarHeader/CalendarHeader"),_CalendarDays=require("../CalendarDays/CalendarDays"),_CalendarTime=require("../CalendarTime/CalendarTime"),_useIsomorphicLayoutEffect=require("../../lib/useIsomorphicLayoutEffect"),_calendar=require("../../lib/calendar"),_useCalendar2=require("../../hooks/useCalendar"),_classNames=require("../../lib/classNames"),_warnOnce=require("../../lib/warnOnce"),_excluded=["value","onChange","disablePast","disableFuture","shouldDisableDate","onClose","enableTime","doneButtonText","weekStartsOn","getRootRef","disablePickers","changeHoursAriaLabel","changeMinutesAriaLabel","prevMonthAriaLabel","nextMonthAriaLabel","changeMonthAriaLabel","changeYearAriaLabel","showNeighboringMonth","changeDayAriaLabel","size"],warn=(0,_warnOnce.warnOnce)("Calendar"),Calendar=function(e){var a=e.value,r=e.onChange,n=e.disablePast,t=e.disableFuture,i=e.shouldDisableDate,l=e.onClose,s=e.enableTime,s=void 0!==s&&s,o=e.doneButtonText,u=e.weekStartsOn,u=void 0===u?1:u,d=e.getRootRef,c=e.disablePickers,b=e.changeHoursAriaLabel,h=e.changeMinutesAriaLabel,_=e.prevMonthAriaLabel,D=e.nextMonthAriaLabel,C=e.changeMonthAriaLabel,m=e.changeYearAriaLabel,p=e.showNeighboringMonth,v=e.changeDayAriaLabel,v=void 0===v?"Изменить день":v,g=e.size,g=void 0===g?"m":g,e=(0,_objectWithoutProperties2.default)(e,_excluded),t=(0,_useCalendar2.useCalendar)({value:a,disableFuture:t,disablePast:n,shouldDisableDate:i}),y=t.viewDate,f=t.setViewDate,n=t.setPrevMonth,i=t.setNextMonth,L=t.focusedDay,A=t.setFocusedDay,x=t.isDayFocused,q=t.isDayDisabled,t=t.resetSelectedDay,w=((0,_useIsomorphicLayoutEffect.useIsomorphicLayoutEffect)(function(){a&&f(a)},[a]),"development"!==process.env.NODE_ENV||c||"s"!==g||warn("Нельзя включить селекты выбора месяца/года, если размер календаря 's'","error"),"development"===process.env.NODE_ENV&&s&&"s"===g&&warn("Нельзя включить выбор времени, если размер календаря 's'","error"),React.useCallback(function(e){["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(e.key)&&e.preventDefault();e=(0,_calendar.navigateDate)(null!=L?L:a,e.key);e&&!(0,_date.isSameMonth)(e,y)&&f(e),A(e)},[L,A,f,a,y])),R=React.useCallback(function(e){null!=r&&r((0,_calendar.setTimeEqual)(e,a))},[a,r]),M=React.useCallback(function(e){return Boolean(a&&(0,_date.isSameDay)(e,a))},[a]);return(0,_jsxRuntime.createScopedElement)("div",(0,_extends2.default)({},e,{ref:d,vkuiClass:(0,_classNames.classNames)("Calendar","Calendar--size-".concat(g))}),(0,_jsxRuntime.createScopedElement)(_CalendarHeader.CalendarHeader,{viewDate:y,onChange:f,onNextMonth:i,onPrevMonth:n,disablePickers:c||"s"===g,vkuiClass:"Calendar__header",prevMonthAriaLabel:_,nextMonthAriaLabel:D,changeMonthAriaLabel:C,changeYearAriaLabel:m}),(0,_jsxRuntime.createScopedElement)(_CalendarDays.CalendarDays,{viewDate:y,value:a,weekStartsOn:u,isDayFocused:x,tabIndex:0,"aria-label":v,onKeyDown:w,onDayChange:R,isDayActive:M,isDaySelectionStart:_calendar.isFirstDay,isDaySelectionEnd:_calendar.isLastDay,isDayDisabled:q,onBlur:t,showNeighboringMonth:p,size:g}),s&&a&&"s"!==g&&(0,_jsxRuntime.createScopedElement)("div",{vkuiClass:"Calendar__time"},(0,_jsxRuntime.createScopedElement)(_CalendarTime.CalendarTime,{value:a,onChange:r,onClose:l,doneButtonText:o,changeHoursAriaLabel:b,changeMinutesAriaLabel:h})))};exports.Calendar=Calendar;