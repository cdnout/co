TF.prototype.SetPopupFilterIcons=function(){if(!this.popUpFilters){return}this.isExternalFlt=true;var b=this.fObj;this.popUpImgFlt=b.popup_filters_image!=undefined?b.popup_filters_image:this.themesPath+"icn_filter.gif";this.popUpImgFltActive=b.popup_filters_image_active!=undefined?b.popup_filters_image_active:this.themesPath+"icn_filterActive.gif";this.popUpImgFltHtml=b.popup_filters_image_html!=undefined?b.popup_filters_image_html:'<img src="'+this.popUpImgFlt+'" alt="Column filter" />';this.popUpDivCssClass=b.popup_div_css_class!=undefined?b.popup_div_css_class:"popUpFilter";this.onBeforePopUpOpen=tf_IsFn(b.on_before_popup_filter_open)?b.on_before_popup_filter_open:null;this.onAfterPopUpOpen=tf_IsFn(b.on_after_popup_filter_open)?b.on_after_popup_filter_open:null;this.onBeforePopUpClose=tf_IsFn(b.on_before_popup_filter_close)?b.on_before_popup_filter_close:null;this.onAfterPopUpClose=tf_IsFn(b.on_after_popup_filter_close)?b.on_after_popup_filter_close:null;this.externalFltTgtIds=[];this.popUpFltSpans=[];this.popUpFltImgs=[];this.popUpFltElms=!this.popUpFltElmCache?[]:this.popUpFltElmCache;this.popUpFltAdjustToContainer=true;var d=this;for(var a=0;a<this.nbCells;a++){if(this["col"+a]==this.fltTypeNone){continue}var c=tf_CreateElm("span",["id",this.prfxPopUpSpan+this.id+"_"+a],["ci",a]);c.innerHTML=this.popUpImgFltHtml;var e=this.GetHeaderElement(a);e.appendChild(c);c.onclick=function(k){var g=k||window.event;var i=parseInt(this.getAttribute("ci"));d.CloseAllPopupFilters(i);d.TogglePopupFilter(i);if(d.popUpFltAdjustToContainer){var f=d.popUpFltElms[i];var l=d.GetHeaderElement(i);var h=l.clientWidth*0.95;if(!tf_isNotIE){var j=tf_ObjPosition(l,[l.nodeName])[0];f.style.left=(j)+"px"}f.style.width=parseInt(h)+"px"}tf_CancelEvent(g);tf_StopEvent(g)};this.popUpFltSpans[a]=c;this.popUpFltImgs[a]=c.firstChild}};TF.prototype.SetPopupFilters=function(){for(var a=0;a<this.popUpFltElmCache.length;a++){this.SetPopupFilter(a,this.popUpFltElmCache[a])}};TF.prototype.SetPopupFilter=function(b,d){var a=!d?tf_CreateElm("div",["id",this.prfxPopUpDiv+this.id+"_"+b]):d;a.className=this.popUpDivCssClass;this.externalFltTgtIds.push(this.prfxPopUpDiv+this.id+"_"+b);var c=this.GetHeaderElement(b);c.insertBefore(a,c.firstChild);a.onclick=function(f){tf_StopEvent(f||window.event)};this.popUpFltElms[b]=a};TF.prototype.TogglePopupFilter=function(a){var b=this.popUpFltElms[a];if(b.style.display=="none"||b.style.display==""){if(this.onBeforePopUpOpen!=null){this.onBeforePopUpOpen.call(null,this,this.popUpFltElms[a],a)}b.style.display="block";if(this["col"+a]==this.fltTypeInp){this.GetFilterElement(a).focus()}if(this.onAfterPopUpOpen!=null){this.onAfterPopUpOpen.call(null,this,this.popUpFltElms[a],a)}}else{if(this.onBeforePopUpClose!=null){this.onBeforePopUpClose.call(null,this,this.popUpFltElms[a],a)}b.style.display="none";if(this.onAfterPopUpClose!=null){this.onAfterPopUpClose.call(null,this,this.popUpFltElms[a],a)}}};TF.prototype.CloseAllPopupFilters=function(a){for(var b=0;b<this.popUpFltElms.length;b++){if(b==a){continue}var c=this.popUpFltElms[b];if(c){c.style.display="none"}}};TF.prototype.RemovePopupFilters=function(){this.popUpFltElmCache=[];for(var a=0;a<this.popUpFltElms.length;a++){var c=this.popUpFltElms[a];var b=this.popUpFltSpans[a];if(c){c.parentNode.removeChild(c);this.popUpFltElmCache[a]=c}c=null;if(b){b.parentNode.removeChild(b)}b=null}};TF.prototype.SetPopupFilterIcon=function(a,c){var b=c==undefined?true:c;if(this.popUpFltImgs[a]){this.popUpFltImgs[a].src=(c)?this.popUpImgFltActive:this.popUpImgFlt}};TF.prototype.SetAllPopupFiltersIcon=function(c){var b=c==undefined?false:c;for(var a=0;a<this.popUpFltImgs.length;a++){this.SetPopupFilterIcon(a,false)}};