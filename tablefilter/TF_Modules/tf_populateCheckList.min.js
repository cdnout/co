TF.prototype.PopulateCheckList=function(a,b,c){this.EvtManager(this.Evt.name.populatechecklist,{slcIndex:a,slcExternal:b,slcId:c})};TF.prototype._PopulateCheckList=function(p,r,q){r=(r==undefined)?false:r;var d=this.prfxCheckListDiv+p+"_"+this.id;if(tf_Id(d)==null&&!r){return}if(tf_Id(q)==null&&r){return}var y=(!r)?this.checkListDiv[p]:tf_Id(q);var i=tf_CreateElm("ul",["id",this.fltIds[p]],["colIndex",p]);i.className=this.checkListCssClass;i.onchange=this.Evt._OnCheckListChange;var s=this,c=this.tbl.rows;var m=[];var h=(this.hasCustomSlcOptions&&this.customSlcOptions.cols.tf_Has(p));var E=[];var C;if(this.refreshFilters&&this.activeFilterId){C=this.activeFilterId.split("_")[0];C=C.split(this.prfxFlt)[1]}var l=null,F=null;if(this.refreshFilters&&this.disableExcludedOptions){l=[];F=[]}for(var z=this.refRow;z<this.nbRows;z++){if(this.hasVisibleRows&&this.visibleRows.tf_Has(z)&&!this.paging){continue}var a=c[z].cells;var w=a.length;if(w==this.nbCells&&!h){for(var B=0;B<w;B++){if((p==B&&(!this.refreshFilters||(this.refreshFilters&&this.disableExcludedOptions)))||(p==B&&this.refreshFilters&&((c[z].style.display==""&&!this.paging)||(this.paging&&((C==undefined||C==p)||(C!=p&&this.validRowsIndex.tf_Has(z))))))){var f=this.GetCellData(B,a[B]);var v=f.tf_MatchCase(this.matchCase);if(!m.tf_Has(v,this.matchCase)){m.push(f)}if(this.refreshFilters&&this.disableExcludedOptions){if(!F[B]){F[B]=this.GetFilteredDataCol(B)}if(!F[B].tf_Has(v,this.matchCase)&&!l.tf_Has(v,this.matchCase)&&!this.isFirstLoad){l.push(f)}}}}}}if(h){var u=this.__getCustomValues(p);m=u[0];E=u[1]}if(this.sortSlc&&!h){if(!this.matchCase){m.sort(tf_IgnoreCaseSort);if(l){l.sort(tf_IgnoreCaseSort)}}else{m.sort();if(l){l.sort()}}}if(this.sortNumAsc&&this.sortNumAsc.tf_Has(p)){try{m.sort(tf_NumSortAsc);if(l){l.sort(tf_NumSortAsc)}if(h){E.sort(tf_NumSortAsc)}}catch(D){m.sort();if(l){l.sort()}if(h){E.sort()}}}if(this.sortNumDesc&&this.sortNumDesc.tf_Has(p)){try{m.sort(tf_NumSortDesc);if(l){l.sort(tf_NumSortDesc)}if(h){E.sort(tf_NumSortDesc)}}catch(D){m.sort();if(l){l.sort()}if(h){E.sort()}}}A(this.separator);function x(){var k=1;var n=tf_CreateCheckItem(s.fltIds[p]+"_0","",s.displayAllText);n.className=s.checkListItemCssClass;i.appendChild(n);n.check.onclick=function(o){s.__setCheckListValues(this);i.onchange.call(null,o)};if(!s.enableCheckListResetFilter){n.style.display="none"}if(tf_isIE){n.label.onclick=function(){n.check.click()}}if(s.enableEmptyOption){var j=tf_CreateCheckItem(s.fltIds[p]+"_1",s.emOperator,s.emptyText);j.className=s.checkListItemCssClass;i.appendChild(j);j.check.onclick=function(o){s.__setCheckListValues(this);i.onchange.call(null,o)};if(tf_isIE){j.label.onclick=function(){j.check.click()}}k++}if(s.enableNonEmptyOption){var e=tf_CreateCheckItem(s.fltIds[p]+"_2",s.nmOperator,s.nonEmptyText);e.className=s.checkListItemCssClass;i.appendChild(e);e.check.onclick=function(o){s.__setCheckListValues(this);i.onchange.call(null,o)};if(tf_isIE){e.label.onclick=function(){e.check.click()}}k++}return k}function A(o){var k=x();var I=[],j=[];var e=tf_CookieValueByIndex(s.fltsValuesCookie,p,o);if(e!=undefined&&e.tf_Trim().length>0){if(s.hasCustomSlcOptions&&s.customSlcOptions.cols.tf_Has(p)){j.push(e)}else{j=e.split(" "+s.orOperator+" ")}}for(var J=0;J<m.length;J++){var n=m[J];var H=(h)?E[J]:n;var K=tf_CreateCheckItem(s.fltIds[p]+"_"+(J+k),n,H);K.className=s.checkListItemCssClass;if(s.refreshFilters&&s.disableExcludedOptions&&l.tf_Has(n.tf_MatchCase(s.matchCase),s.matchCase)){tf_AddClass(K,s.checkListItemDisabledCssClass);K.check.disabled=true;K.disabled=true}else{K.check.onclick=function(L){s.__setCheckListValues(this);i.onchange.call(null,L)}}i.appendChild(K);if(n==""){K.style.display="none"}if(s.rememberGridValues){if((s.hasCustomSlcOptions&&s.customSlcOptions.cols.tf_Has(p)&&j.toString().indexOf(n)!=-1)||j.tf_Has(n.tf_MatchCase(s.matchCase),s.matchCase)){K.check.checked=true;s.__setCheckListValues(K.check)}}if(tf_isIE){K.label.onclick=function(){this.firstChild.click()}}}}if(this.fillSlcOnDemand){y.innerHTML=""}y.appendChild(i);y.setAttribute("filled","1");if(s.rememberGridValues&&tf_isIE){var b=i.getAttribute("indexes");if(b!=null){var g=b.split(",");for(var t=0;t<g.length;t++){var G=tf_Id(this.fltIds[p]+"_"+g[t]);if(G){G.checked=true}}}}};TF.prototype.__setCheckListValues=function(d){if(d==null){return}var q=d.value;var h=parseInt(d.id.split("_")[2]);var p="ul",f="li";var e=d;while(e.nodeName.tf_LCase()!=p){e=e.parentNode}if(e.nodeName.tf_LCase()!=p){return}var j=e.childNodes[h];var i=e.getAttribute("colIndex");var g=e.getAttribute("value");var a=e.getAttribute("indexes");if(d.checked){if(q==""){if((a!=null&&a!="")){var b=a.split(this.separator);for(var m=0;m<b.length;m++){var l=tf_Id(this.fltIds[i]+"_"+b[m]);if(l){l.checked=false;tf_RemoveClass(e.childNodes[b[m]],this.checkListSlcItemCssClass)}}}e.setAttribute("value","");e.setAttribute("indexes","")}else{g=(g)?g:"";q=(g+" "+q+" "+this.orOperator).tf_Trim();h=a+h+this.separator;e.setAttribute("value",q);e.setAttribute("indexes",h);if(tf_Id(this.fltIds[i]+"_0")){tf_Id(this.fltIds[i]+"_0").checked=false}}if(j.nodeName.tf_LCase()==f){tf_RemoveClass(e.childNodes[0],this.checkListSlcItemCssClass);tf_AddClass(j,this.checkListSlcItemCssClass)}}else{if(q!=""){var c=new RegExp(tf_RegexpEscape(q+" "+this.orOperator));g=g.replace(c,"");e.setAttribute("value",g.tf_Trim());var k=new RegExp(tf_RegexpEscape(h+this.separator));a=a.replace(k,"");e.setAttribute("indexes",a)}if(j.nodeName.tf_LCase()==f){tf_RemoveClass(j,this.checkListSlcItemCssClass)}}};function tf_CreateCheckItem(e,f,d){if(e==undefined||f==undefined||d==undefined){return}var a=tf_CreateElm("li");var c=tf_CreateElm("label",["for",e]);var b=tf_CreateElm("input",["id",e],["name",e],["type","checkbox"],["value",f]);c.appendChild(b);c.appendChild(tf_CreateText(d));a.appendChild(c);a.label=c;a.check=b;return a};