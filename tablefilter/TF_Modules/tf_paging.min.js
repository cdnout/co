TF.prototype.SetPaging=function(){if(!this.hasGrid&&!this.isFirstLoad){return}if(!this.paging||(!this.isPagingRemoved&&!this.isFirstLoad)){return}var p=this.fObj;this.pagingTgtId=p.paging_target_id!=undefined?p.paging_target_id:null;this.pagingLength=p.paging_length!=undefined?p.paging_length:10;this.resultsPerPageTgtId=p.results_per_page_target_id!=undefined?p.results_per_page_target_id:null;this.pgSlcCssClass=p.paging_slc_css_class!=undefined?p.paging_slc_css_class:"pgSlc";this.pgInpCssClass=p.paging_inp_css_class!=undefined?p.paging_inp_css_class:"pgNbInp";this.resultsSlcCssClass=p.results_slc_css_class!=undefined?p.results_slc_css_class:"rspg";this.resultsSpanCssClass=p.results_span_css_class!=undefined?p.results_span_css_class:"rspgSpan";this.btnNextPageText=p.btn_next_page_text!=undefined?p.btn_next_page_text:">";this.btnPrevPageText=p.btn_prev_page_text!=undefined?p.btn_prev_page_text:"<";this.btnLastPageText=p.btn_last_page_text!=undefined?p.btn_last_page_text:">|";this.btnFirstPageText=p.btn_first_page_text!=undefined?p.btn_first_page_text:"|<";this.btnNextPageHtml=p.btn_next_page_html!=undefined?p.btn_next_page_html:(!this.enableIcons?null:'<input type="button" value="" class="'+this.btnPageCssClass+' nextPage" title="Next page" />');this.btnPrevPageHtml=p.btn_prev_page_html!=undefined?p.btn_prev_page_html:(!this.enableIcons?null:'<input type="button" value="" class="'+this.btnPageCssClass+' previousPage" title="Previous page" />');this.btnFirstPageHtml=p.btn_first_page_html!=undefined?p.btn_first_page_html:(!this.enableIcons?null:'<input type="button" value="" class="'+this.btnPageCssClass+' firstPage" title="First page" />');this.btnLastPageHtml=p.btn_last_page_html!=undefined?p.btn_last_page_html:(!this.enableIcons?null:'<input type="button" value="" class="'+this.btnPageCssClass+' lastPage" title="Last page" />');this.pageText=p.page_text!=undefined?p.page_text:" Page ";this.ofText=p.of_text!=undefined?p.of_text:" of ";this.nbPgSpanCssClass=p.nb_pages_css_class!=undefined?p.nb_pages_css_class:"nbpg";this.hasPagingBtns=p.paging_btns==false?false:true;this.pagingBtnEvents=null;this.pageSelectorType=p.page_selector_type!=undefined?p.page_selector_type:this.fltTypeSlc;this.onBeforeChangePage=tf_IsFn(p.on_before_change_page)?p.on_before_change_page:null;this.onAfterChangePage=tf_IsFn(p.on_after_change_page)?p.on_after_change_page:null;var q=this.refRow;var m=this.nbRows;this.nbPages=Math.ceil((m-q)/this.pagingLength);if(!this.Evt._Paging.next){var g=this;this.Evt._Paging={slcIndex:function(){return(g.pageSelectorType==g.fltTypeSlc)?g.pagingSlc.options.selectedIndex:parseInt(g.pagingSlc.value)-1},nbOpts:function(){return(g.pageSelectorType==g.fltTypeSlc)?parseInt(g.pagingSlc.options.length)-1:(g.nbPages-1)},next:function(){if(g.Evt._Paging.nextEvt){g.Evt._Paging.nextEvt()}var f=(g.Evt._Paging.slcIndex()<g.Evt._Paging.nbOpts())?g.Evt._Paging.slcIndex()+1:0;g.ChangePage(f)},prev:function(){if(g.Evt._Paging.prevEvt){g.Evt._Paging.prevEvt()}var f=g.Evt._Paging.slcIndex()>0?g.Evt._Paging.slcIndex()-1:g.Evt._Paging.nbOpts();g.ChangePage(f)},last:function(){if(g.Evt._Paging.lastEvt){g.Evt._Paging.lastEvt()}g.ChangePage(g.Evt._Paging.nbOpts())},first:function(){if(g.Evt._Paging.firstEvt){g.Evt._Paging.firstEvt()}g.ChangePage(0)},_detectKey:function(u){var f=(u)?u:(window.event)?window.event:null;if(f){var o=(f.charCode)?f.charCode:((f.keyCode)?f.keyCode:((f.which)?f.which:0));if(o=="13"){if(g.sorted){g.Filter();g.ChangePage(g.Evt._Paging.slcIndex())}else{g.ChangePage()}this.blur()}}},nextEvt:null,prevEvt:null,lastEvt:null,firstEvt:null}}if(!this.Evt._OnSlcPagesChange){this.Evt._OnSlcPagesChange=function(){if(g.Evt._Paging._OnSlcPagesChangeEvt){g.Evt._Paging._OnSlcPagesChangeEvt()}g.ChangePage();this.blur();if(this.parentNode&&tf_isIE){this.parentNode.focus()}}}if(this.pageSelectorType==this.fltTypeSlc){var l=tf_CreateElm(this.fltTypeSlc,["id",this.prfxSlcPages+this.id]);l.className=this.pgSlcCssClass;l.onchange=this.Evt._OnSlcPagesChange}if(this.pageSelectorType==this.fltTypeInp){var l=tf_CreateElm(this.fltTypeInp,["id",this.prfxSlcPages+this.id],["value",this.currentPageNb]);l.className=this.pgInpCssClass;l.onkeypress=this.Evt._Paging._detectKey}var k,b,c,e;k=tf_CreateElm("span",["id",this.prfxBtnNextSpan+this.id]);b=tf_CreateElm("span",["id",this.prfxBtnPrevSpan+this.id]);c=tf_CreateElm("span",["id",this.prfxBtnLastSpan+this.id]);e=tf_CreateElm("span",["id",this.prfxBtnFirstSpan+this.id]);if(this.hasPagingBtns){if(this.btnNextPageHtml==null){var d=tf_CreateElm(this.fltTypeInp,["id",this.prfxBtnNext+this.id],["type","button"],["value",this.btnNextPageText],["title","Next"]);d.className=this.btnPageCssClass;d.onclick=this.Evt._Paging.next;k.appendChild(d)}else{k.innerHTML=this.btnNextPageHtml;k.onclick=this.Evt._Paging.next}if(this.btnPrevPageHtml==null){var t=tf_CreateElm(this.fltTypeInp,["id",this.prfxBtnPrev+this.id],["type","button"],["value",this.btnPrevPageText],["title","Previous"]);t.className=this.btnPageCssClass;t.onclick=this.Evt._Paging.prev;b.appendChild(t)}else{b.innerHTML=this.btnPrevPageHtml;b.onclick=this.Evt._Paging.prev}if(this.btnLastPageHtml==null){var n=tf_CreateElm(this.fltTypeInp,["id",this.prfxBtnLast+this.id],["type","button"],["value",this.btnLastPageText],["title","Last"]);n.className=this.btnPageCssClass;n.onclick=this.Evt._Paging.last;c.appendChild(n)}else{c.innerHTML=this.btnLastPageHtml;c.onclick=this.Evt._Paging.last}if(this.btnFirstPageHtml==null){var r=tf_CreateElm(this.fltTypeInp,["id",this.prfxBtnFirst+this.id],["type","button"],["value",this.btnFirstPageText],["title","First"]);r.className=this.btnPageCssClass;r.onclick=this.Evt._Paging.first;e.appendChild(r)}else{e.innerHTML=this.btnFirstPageHtml;e.onclick=this.Evt._Paging.first}}if(this.pagingTgtId==null){this.SetTopDiv()}var s=(this.pagingTgtId==null)?this.mDiv:tf_Id(this.pagingTgtId);if(s.innerHTML!=""){s.innerHTML=""}s.appendChild(e);s.appendChild(b);var j=tf_CreateElm("span",["id",this.prfxPgBeforeSpan+this.id]);j.appendChild(tf_CreateText(this.pageText));j.className=this.nbPgSpanCssClass;s.appendChild(j);s.appendChild(l);var a=tf_CreateElm("span",["id",this.prfxPgAfterSpan+this.id]);a.appendChild(tf_CreateText(this.ofText));a.className=this.nbPgSpanCssClass;s.appendChild(a);var i=tf_CreateElm("span",["id",this.prfxPgSpan+this.id]);i.className=this.nbPgSpanCssClass;i.appendChild(tf_CreateText(" "+this.nbPages+" "));s.appendChild(i);s.appendChild(k);s.appendChild(c);this.pagingSlc=tf_Id(this.prfxSlcPages+this.id);if(!this.rememberGridValues||this.isPagingRemoved){this.SetPagingInfo()}if(!this.fltGrid){this.ValidateAllRows();this.SetPagingInfo(this.validRowsIndex)}this.pagingBtnEvents=this.Evt._Paging;this.isPagingRemoved=false};TF.prototype.RemovePaging=function(){if(!this.hasGrid){return}if(this.pagingSlc==null){return}var d,e,a,c;var g,b,f;d=tf_Id(this.prfxBtnNextSpan+this.id);e=tf_Id(this.prfxBtnPrevSpan+this.id);a=tf_Id(this.prfxBtnLastSpan+this.id);c=tf_Id(this.prfxBtnFirstSpan+this.id);g=tf_Id(this.prfxPgBeforeSpan+this.id);b=tf_Id(this.prfxPgAfterSpan+this.id);f=tf_Id(this.prfxPgSpan+this.id);this.pagingSlc.parentNode.removeChild(this.pagingSlc);if(d!=null){d.parentNode.removeChild(d)}if(e!=null){e.parentNode.removeChild(e)}if(a!=null){a.parentNode.removeChild(a)}if(c!=null){c.parentNode.removeChild(c)}if(g!=null){g.parentNode.removeChild(g)}if(b!=null){b.parentNode.removeChild(b)}if(f!=null){f.parentNode.removeChild(f)}this.pagingBtnEvents=null;this.pagingSlc=null;this.isPagingRemoved=true};TF.prototype.SetPagingInfo=function(e){var i=this.tbl.rows;var b=(this.pagingTgtId==null)?this.mDiv:tf_Id(this.pagingTgtId);var d=tf_Id(this.prfxPgSpan+this.id);if(e!=undefined){this.validRowsIndex=e}else{this.validRowsIndex=[];for(var c=this.refRow;c<this.nbRows;c++){if(!i[c]){continue}var g=i[c].getAttribute("validRow");if(g=="true"||g==null){this.validRowsIndex.push(c)}}}this.nbPages=Math.ceil(this.validRowsIndex.length/this.pagingLength);d.innerHTML=this.nbPages;if(this.pageSelectorType==this.fltTypeSlc){this.pagingSlc.innerHTML=""}if(this.nbPages>0){b.style.visibility="visible";if(this.pageSelectorType==this.fltTypeSlc){for(var f=0;f<this.nbPages;f++){var a=new Option((f+1),f*this.pagingLength,false,false);this.pagingSlc.options[f]=a}}else{this.pagingSlc.value=this.currentPageNb}}else{b.style.visibility="hidden"}this.GroupByPage(this.validRowsIndex)};TF.prototype.GroupByPage=function(c){var d=this.tbl.rows;var a=parseInt(this.startPagingRow)+parseInt(this.pagingLength);if(c!=undefined){this.validRowsIndex=c}for(h=0;h<this.validRowsIndex.length;h++){if(h>=this.startPagingRow&&h<a){var b=d[this.validRowsIndex[h]];if(b.getAttribute("validRow")=="true"||b.getAttribute("validRow")==undefined){b.style.display=""}if(this.alternateBgs){this.SetRowBg(this.validRowsIndex[h],h)}}else{d[this.validRowsIndex[h]].style.display="none";if(this.alternateBgs){this.RemoveRowBg(this.validRowsIndex[h])}}}this.nbVisibleRows=this.validRowsIndex.length;this.isStartBgAlternate=false;this.ApplyGridProps()};TF.prototype.SetPage=function(b){if(this.hasGrid&&this.paging){var a=this.pagingBtnEvents,c=typeof b;if(c=="string"){switch(b.tf_LCase()){case"next":a.next();break;case"previous":a.prev();break;case"last":a.last();break;case"first":a.first();break;default:a.next();break}}if(c=="number"){this.ChangePage((b-1))}}};TF.prototype.SetResultsPerPage=function(){if(!this.hasGrid&&!this.isFirstLoad){return}if(this.resultsPerPageSlc!=null||this.resultsPerPage==null){return}if(!this.Evt._OnSlcResultsChange){var g=this;this.Evt._OnSlcResultsChange=function(){g.ChangeResultsPerPage();this.blur();if(this.parentNode&&tf_isIE){this.parentNode.focus()}}}var f=tf_CreateElm(this.fltTypeSlc,["id",this.prfxSlcResults+this.id]);f.className=this.resultsSlcCssClass;var c=this.resultsPerPage[0],a=this.resultsPerPage[1];var i=tf_CreateElm("span",["id",this.prfxSlcResultsTxt+this.id]);i.className=this.resultsSpanCssClass;if(this.resultsPerPageTgtId==null){this.SetTopDiv()}var e=(this.resultsPerPageTgtId==null)?this.rDiv:tf_Id(this.resultsPerPageTgtId);i.appendChild(tf_CreateText(c));e.appendChild(i);e.appendChild(f);this.resultsPerPageSlc=tf_Id(this.prfxSlcResults+this.id);for(var d=0;d<a.length;d++){var b=new Option(a[d],a[d],false,false);this.resultsPerPageSlc.options[d]=b}f.onchange=this.Evt._OnSlcResultsChange};TF.prototype.RemoveResultsPerPage=function(){if(!this.hasGrid){return}if(this.resultsPerPageSlc==null||this.resultsPerPage==null){return}var a,b;a=this.resultsPerPageSlc;b=tf_Id(this.prfxSlcResultsTxt+this.id);if(a!=null){a.parentNode.removeChild(a)}if(b!=null){b.parentNode.removeChild(b)}this.resultsPerPageSlc=null};TF.prototype.ChangePage=function(a){this.EvtManager(this.Evt.name.changepage,{pgIndex:a})};TF.prototype._ChangePage=function(a){if(!this.paging){return}if(a==undefined){a=(this.pageSelectorType==this.fltTypeSlc)?this.pagingSlc.options.selectedIndex:(this.pagingSlc.value-1)}if(a>=0&&a<=(this.nbPages-1)){if(this.onBeforeChangePage){this.onBeforeChangePage.call(null,this,a)}this.currentPageNb=parseInt(a)+1;if(this.pageSelectorType==this.fltTypeSlc){this.pagingSlc.options[a].selected=true}else{this.pagingSlc.value=this.currentPageNb}if(this.rememberPageNb){this.RememberPageNb(this.pgNbCookie)}this.startPagingRow=(this.pageSelectorType==this.fltTypeSlc)?this.pagingSlc.value:(a*this.pagingLength);this.GroupByPage();if(this.onAfterChangePage){this.onAfterChangePage.call(null,this,a)}}};TF.prototype.ChangeResultsPerPage=function(){this.EvtManager(this.Evt.name.changeresultsperpage)};TF.prototype._ChangeResultsPerPage=function(){if(!this.paging){return}var c=this.resultsPerPageSlc;var a=(this.pageSelectorType==this.fltTypeSlc)?this.pagingSlc.selectedIndex:parseInt(this.pagingSlc.value-1);this.pagingLength=parseInt(c.options[c.selectedIndex].value);this.startPagingRow=this.pagingLength*a;if(!isNaN(this.pagingLength)){if(this.startPagingRow>=this.nbFilterableRows){this.startPagingRow=(this.nbFilterableRows-this.pagingLength)}this.SetPagingInfo();if(this.pageSelectorType==this.fltTypeSlc){var b=(this.pagingSlc.options.length-1<=a)?(this.pagingSlc.options.length-1):a;this.pagingSlc.options[b].selected=true}if(this.rememberPageLen){this.RememberPageLength(this.pgLenCookie)}}};TF.prototype.ResetPage=function(a){this.EvtManager(this.Evt.name.resetpage)};TF.prototype._ResetPage=function(b){var a=tf_ReadCookie(b);if(a!=""){this.ChangePage((a-1))}};TF.prototype.ResetPageLength=function(a){this.EvtManager(this.Evt.name.resetpagelength)};TF.prototype._ResetPageLength=function(b){if(!this.paging){return}var a=tf_ReadCookie(b);if(a!=""){this.resultsPerPageSlc.options[a].selected=true;this.ChangeResultsPerPage()}};TF.prototype.AddPaging=function(a){if(!this.hasGrid||this.paging){return}this.paging=true;this.isPagingRemoved=true;this.SetPaging();this.ResetValues();if(a){this.Filter()}};