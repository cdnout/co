TF.prototype.SetGridLayout=function(){if(!this.gridLayout){return}var H=this.fObj;this.gridWidth=H.grid_width!=undefined?H.grid_width:null;this.gridHeight=H.grid_height!=undefined?H.grid_height:null;this.gridMainContCssClass=H.grid_cont_css_class!=undefined?H.grid_cont_css_class:"grd_Cont";this.gridContCssClass=H.grid_tbl_cont_css_class!=undefined?H.grid_tbl_cont_css_class:"grd_tblCont";this.gridHeadContCssClass=H.grid_tblHead_cont_css_class!=undefined?H.grid_tblHead_cont_css_class:"grd_headTblCont";this.gridInfDivCssClass=H.grid_inf_grid_css_class!=undefined?H.grid_inf_grid_css_class:"grd_inf";this.gridHeadRowIndex=H.grid_headers_row_index!=undefined?H.grid_headers_row_index:0;this.gridHeadRows=H.grid_headers_rows!=undefined?H.grid_headers_rows:[0];this.gridEnableFilters=H.grid_enable_default_filters!=undefined?H.grid_enable_default_filters:true;this.gridDefaultColWidth=H.grid_default_col_width!=undefined?H.grid_default_col_width:"100px";this.gridEnableColResizer=H.grid_enable_cols_resizer!=undefined?H.grid_enable_cols_resizer:true;this.gridColResizerPath=H.grid_cont_col_resizer_path!=undefined?H.grid_cont_col_resizer_path:this.basePath+"TFExt_ColsResizer/TFExt_ColsResizer.js";if(!this.hasColWidth){this.colWidth=[];for(var C=0;C<this.nbCells;C++){var e,g=this.tbl.rows[this.gridHeadRowIndex].cells[C];if(g.width!=""){e=g.width}else{if(g.style.width!=""){e=parseInt(g.style.width)}else{e=this.gridDefaultColWidth}}this.colWidth[C]=e}this.hasColWidth=true}this.SetColWidths(this.gridHeadRowIndex);var m;if(this.tbl.width!=""){m=this.tbl.width}else{if(this.tbl.style.width!=""){m=parseInt(this.tbl.style.width)}else{m=this.tbl.clientWidth}}this.tblMainCont=tf_CreateElm("div",["id",this.prfxMainTblCont+this.id]);this.tblMainCont.className=this.gridMainContCssClass;if(this.gridWidth){this.tblMainCont.style.width=this.gridWidth}this.tbl.parentNode.insertBefore(this.tblMainCont,this.tbl);this.tblCont=tf_CreateElm("div",["id",this.prfxTblCont+this.id]);this.tblCont.className=this.gridContCssClass;if(this.gridWidth){this.tblCont.style.width=this.gridWidth}if(this.gridHeight){this.tblCont.style.height=this.gridHeight}this.tbl.parentNode.insertBefore(this.tblCont,this.tbl);var u=this.tbl.parentNode.removeChild(this.tbl);this.tblCont.appendChild(u);if(this.tbl.style.width==""){this.tbl.style.width=(this.__containsStr("%",m)?this.tbl.clientWidth:m)+"px"}var I=this.tblCont.parentNode.removeChild(this.tblCont);this.tblMainCont.appendChild(I);this.headTblCont=tf_CreateElm("div",["id",this.prfxHeadTblCont+this.id]);this.headTblCont.className=this.gridHeadContCssClass;if(this.gridWidth){this.headTblCont.style.width=this.gridWidth}this.headTbl=tf_CreateElm("table",["id",this.prfxHeadTbl+this.id]);var K=tf_CreateElm("tHead");var h=this.tbl.rows[this.gridHeadRowIndex];var s=[];for(var z=0;z<this.nbCells;z++){var g=h.cells[z];var v=g.getAttribute("id");if(!v||v==""){v=this.prfxGridTh+z+"_"+this.id;g.setAttribute("id",v)}s.push(v)}var x=tf_CreateElm("tr");if(this.gridEnableFilters&&this.fltGrid){this.externalFltTgtIds=[];for(var D=0;D<this.nbCells;D++){var F=this.prfxFlt+D+this.prfxGridFltTd+this.id;var J=tf_CreateElm(this.fltCellTag,["id",F]);x.appendChild(J);this.externalFltTgtIds[D]=F}}for(var E=0;E<this.gridHeadRows.length;E++){var q=this.tbl.rows[this.gridHeadRows[0]];K.appendChild(q)}this.headTbl.appendChild(K);if(this.filtersRowIndex==0){K.insertBefore(x,h)}else{K.appendChild(x)}this.headTblCont.appendChild(this.headTbl);this.tblCont.parentNode.insertBefore(this.headTblCont,this.tblCont);var G=tf_Tag(this.tbl,"thead");if(G.length>0){this.tbl.removeChild(G[0])}this.headTbl.style.width=this.tbl.style.width;this.headTbl.style.tableLayout="fixed";this.tbl.style.tableLayout="fixed";this.headTbl.cellPadding=this.tbl.cellPadding;this.headTbl.cellSpacing=this.tbl.cellSpacing;this.headTblCont.style.width=this.tblCont.clientWidth+"px";this.SetColWidths();this.tbl.style.width="";if(tf_isIE||tf_isIE7){this.headTbl.style.width=""}var y=this;this.tblCont.onscroll=function(){y.headTblCont.scrollLeft=this.scrollLeft;var d=this;if(!y.isPointerXOverwritten){try{TF.Evt.pointerX=function(f){f=f||window.event;var i=tf_StandardBody().scrollLeft+d.scrollLeft;return(f.pageX+d.scrollLeft)||(f.clientX+i)};y.isPointerXOverwritten=true}catch(c){y.isPointerXOverwritten=false}}};var H=this.fObj==undefined?{}:this.fObj;if(H.sort!=false){this.sort=true;this.sortConfig.asyncSort=true;this.sortConfig.triggerIds=s}if(this.gridEnableColResizer){if(!this.hasExtensions){this.extensions={name:["ColumnsResizer_"+this.id],src:[this.gridColResizerPath],description:["Columns Resizing"],initialize:[function(c){c.SetColsResizer("ColumnsResizer_"+c.id)}]};this.hasExtensions=true}else{if(!this.__containsStr("colsresizer",this.extensions.src.toString().tf_LCase())){this.extensions.name.push("ColumnsResizer_"+this.id);this.extensions.src.push(this.gridColResizerPath);this.extensions.description.push("Columns Resizing");this.extensions.initialize.push(function(c){c.SetColsResizer("ColumnsResizer_"+c.id)})}}}H.col_resizer_cols_headers_table=this.headTbl.getAttribute("id");H.col_resizer_cols_headers_index=this.gridHeadRowIndex;H.col_resizer_width_adjustment=0;H.col_enable_text_ellipsis=false;y.tblHasColTag=(tf_Tag(y.tbl,"col").length>0)?true:false;if(!tf_isIE&&!tf_isIE7){function B(f){if(!f){return}for(var c=(f.nbCells-1);c>=0;c--){var d=tf_CreateElm("col",["id",f.id+"_col_"+c]);f.tbl.firstChild.parentNode.insertBefore(d,f.tbl.firstChild);d.style.width=f.colWidth[c];f.gridColElms[c]=d}f.tblHasColTag=true}if(!y.tblHasColTag){B(y)}else{var p=tf_Tag(y.tbl,"col");for(var E=0;E<y.nbCells;E++){p[E].setAttribute("id",y.id+"_col_"+E);p[E].style.width=y.colWidth[E];y.gridColElms.push(p[E])}}}if(tf_isIE||tf_isIE7){var b=tf_Tag(y.tbl,"tbody"),w;if(b.length>0){w=b[0].insertRow(0)}else{w=y.tbl.insertRow(0)}w.style.height="0px";for(var E=0;E<y.nbCells;E++){var l=tf_CreateElm("td",["id",y.id+"_col_"+E]);l.style.width=y.colWidth[E];y.tbl.rows[1].cells[E].style.width="";w.appendChild(l);y.gridColElms.push(l)}this.hasGridWidthsRow=true;y.leadColWidthsRow=y.tbl.rows[0];y.leadColWidthsRow.setAttribute("validRow","false");var a=tf_IsFn(H.on_before_sort)?H.on_before_sort:null;H.on_before_sort=function(d,c){d.leadColWidthsRow.setAttribute("validRow","false");if(a!=null){a.call(null,d,c)}};var L=tf_IsFn(H.on_after_sort)?H.on_after_sort:null;H.on_after_sort=function(f,c){if(f.leadColWidthsRow.rowIndex!=0){var d=f.leadColWidthsRow;if(b.length>0){b[0].moveRow(f.leadColWidthsRow.rowIndex,0)}else{f.tbl.moveRow(f.leadColWidthsRow.rowIndex,0)}}if(L!=null){L.call(null,f,c)}}}var A=tf_IsFn(H.on_after_col_resized)?H.on_after_col_resized:null;H.on_after_col_resized=function(k,i){if(i==undefined){return}var c=k.crWColsRow.cells[i].style.width;var f=k.gridColElms[i];f.style.width=c;var j=k.crWColsRow.cells[i].clientWidth;var d=k.crWRowDataTbl.cells[i].clientWidth;if(tf_isIE||tf_isIE7){k.tbl.style.width=k.headTbl.clientWidth+"px"}if(j!=d&&!tf_isIE&&!tf_isIE7){k.headTbl.style.width=k.tbl.clientWidth+"px"}if(A!=null){A.call(null,k,i)}};if(this.tbl.clientWidth!=this.headTbl.clientWidth){this.tbl.style.width=this.headTbl.clientWidth+"px"}};TF.prototype.RemoveGridLayout=function(){if(!this.gridLayout){return}var a=this.tbl.parentNode.removeChild(this.tbl);this.tblMainCont.parentNode.insertBefore(a,this.tblMainCont);this.tblMainCont.parentNode.removeChild(this.tblMainCont);this.tblMainCont=null;this.headTblCont=null;this.headTbl=null;this.tblCont=null;this.tbl.outerHTML=this.sourceTblHtml;this.tbl=tf_Id(this.id)};