TF.prototype.SetEditable=function(){if(!this.selectable&&!this.editable){return}var a=this.fObj;this.ezEditTableConfig=a.ezEditTable_config!=undefined?a.ezEditTable_config:{};this.ezEditTableConfig.name=this.ezEditTableConfig.name!=undefined?a.ezEditTable_config.name:"ezedittable";this.ezEditTableConfig.src=this.ezEditTableConfig.src!=undefined?a.ezEditTable_config.src:this.basePath+"ezEditTable/ezEditTable.js";this.ezEditTableConfig.loadStylesheet=this.ezEditTableConfig.loadStylesheet!=undefined?a.ezEditTable_config.loadStylesheet:false;this.ezEditTableConfig.stylesheet=this.ezEditTableConfig.stylesheet!=undefined?a.ezEditTable_config.stylesheet:this.basePath+"ezEditTable/ezEditTable.css";this.ezEditTableConfig.stylesheetName=this.ezEditTableConfig.stylesheetName!=undefined?a.ezEditTable_config.stylesheetName:"ezEditTableCss";this.ezEditTableConfig.err='Failed to instantiate EditTable object.\n"ezEditTable" module may not be available.';if(tf_IsImported(this.ezEditTableConfig.src)){this._EnableEditable()}else{this.IncludeFile(this.ezEditTableConfig.name,this.ezEditTableConfig.src,this._EnableEditable)}if(this.ezEditTableConfig.loadStylesheet&&!tf_IsImported(this.ezEditTableConfig.stylesheet,"link")){this.IncludeFile(this.ezEditTableConfig.stylesheetName,this.ezEditTableConfig.stylesheet,null,"link")}};TF.prototype.RemoveEditable=function(){if(this.ezEditTable){if(this.selectable){this.ezEditTable.Selection.ClearSelections();this.ezEditTable.Selection.Remove()}if(this.editable){this.ezEditTable.Editable.Remove()}}};TF.prototype.ResetEditable=function(){if(this.ezEditTable){if(this.selectable){this.ezEditTable.Selection.Set()}if(this.editable){this.ezEditTable.Editable.Set()}}};TF.prototype._EnableEditable=function(c){if(!c){c=this}var i;var g=tf_Tag(c.tbl,"thead");if(g.length>0&&!c.ezEditTableConfig.startRow){i=undefined}else{i=c.ezEditTableConfig.startRow||c.refRow}c.ezEditTableConfig.scroll_into_view=c.ezEditTableConfig.scroll_into_view!=undefined?c.ezEditTableConfig.scroll_into_view:true;c.ezEditTableConfig.base_path=c.ezEditTableConfig.base_path!=undefined?c.ezEditTableConfig.base_path:c.basePath+"ezEditTable/";c.ezEditTableConfig.editable=c.editable;c.ezEditTableConfig.selection=c.selectable;if(c.selectable){c.ezEditTableConfig.default_selection=c.ezEditTableConfig.default_selection!=undefined?c.ezEditTableConfig.default_selection:"row"}c.ezEditTableConfig.active_cell_css=c.ezEditTableConfig.active_cell_css!=undefined?c.ezEditTableConfig.active_cell_css:"ezETSelectedCell";c._lastValidRowIndex=0;c._lastRowIndex=0;if(c.selectable){function h(s,l,m){if(!c.validRowsIndex){return}var x=s.defaultSelection!="row"?l.parentNode:l;var u=l.nodeName=="TD"?l:null;var w=m!=undefined?s.Event.GetKey(m):0;var o=c.validRowsIndex.tf_Has(x.rowIndex);var q;var n=(w==34||w==33?(c.pagingLength||s.nbRowsPerPage):1);if(!o){if(x.rowIndex>c._lastRowIndex){if(x.rowIndex>=c.validRowsIndex[c.validRowsIndex.length-1]){q=c.validRowsIndex[c.validRowsIndex.length-1]}else{var p=(c._lastValidRowIndex+n);if(p>(c.validRowsIndex.length-1)){q=c.validRowsIndex[c.validRowsIndex.length-1]}else{q=c.validRowsIndex[p]}}}else{if(x.rowIndex<c.validRowsIndex[0]){q=c.validRowsIndex[0]}else{var t=c.validRowsIndex[c._lastValidRowIndex-n];q=t?t:c.validRowsIndex[0]}}c._lastRowIndex=x.rowIndex;r(q)}else{if(w!=34&&w!=33){c._lastValidRowIndex=c.validRowsIndex.tf_IndexByValue(x.rowIndex);c._lastRowIndex=x.rowIndex}else{if(w==34){if((c._lastValidRowIndex+n)<=(c.validRowsIndex.length-1)){q=c.validRowsIndex[c._lastValidRowIndex+n]}else{q=c.validRowsIndex[c.validRowsIndex.length-1]}}else{if((c._lastValidRowIndex-n)<(c.validRowsIndex[0])){q=c.validRowsIndex[0]}else{q=c.validRowsIndex[c._lastValidRowIndex-n]}}c._lastRowIndex=q;c._lastValidRowIndex=c.validRowsIndex.tf_IndexByValue(q);r(q)}}function r(v){if(s.defaultSelection=="row"){s.Selection.SelectRowByIndex(v)}else{s.ClearSelections();var e=l.cellIndex;var y=c.tbl.rows[v];if(s.defaultSelection=="both"){s.Selection.SelectRowByIndex(v)}if(y){s.Selection.SelectCell(y.cells[e])}}if(c.validRowsIndex.length!=c.GetRowsNb()){var y=c.tbl.rows[v];if(y){y.scrollIntoView(false)}if(u){if(u.cellIndex==(c.GetCellsNb()-1)&&c.gridLayout){c.tblCont.scrollLeft=100000000}else{if(u.cellIndex==0&&c.gridLayout){c.tblCont.scrollLeft=0}else{u.scrollIntoView(false)}}}}}}function d(o,l,n){var p=o.defaultSelection!="row"?l.parentNode:l;if(c.paging){if(c.nbPages>1){o.nbRowsPerPage=c.pagingLength;var m=parseInt(c.startPagingRow)+parseInt(c.pagingLength);var q=p.rowIndex;if((q==c.validRowsIndex[c.validRowsIndex.length-1])&&c.currentPageNb!=c.nbPages){c.SetPage("last")}else{if((q==c.validRowsIndex[0])&&c.currentPageNb!=1){c.SetPage("first")}else{if(q>c.validRowsIndex[m-1]&&q<c.validRowsIndex[c.validRowsIndex.length-1]){c.SetPage("next")}else{if(q<c.validRowsIndex[c.startPagingRow]&&q>c.validRowsIndex[0]){c.SetPage("previous")}}}}}}}if(c.paging){c.onAfterChangePage=function(m,l){var n=m.ezEditTable.Selection.GetActiveRow();if(n){n.scrollIntoView(false)}var e=m.ezEditTable.Selection.GetActiveCell();if(e){e.scrollIntoView(false)}}}if(c.ezEditTableConfig.default_selection=="row"){var a=c.ezEditTableConfig.on_before_selected_row;c.ezEditTableConfig.on_before_selected_row=function(){d(arguments[0],arguments[1],arguments[2]);if(a){a.call(null,arguments[0],arguments[1],arguments[2])}};var b=c.ezEditTableConfig.on_after_selected_row;c.ezEditTableConfig.on_after_selected_row=function(){h(arguments[0],arguments[1],arguments[2]);if(b){b.call(null,arguments[0],arguments[1],arguments[2])}}}else{var a=c.ezEditTableConfig.on_before_selected_cell;c.ezEditTableConfig.on_before_selected_cell=function(){d(arguments[0],arguments[1],arguments[2]);if(a){a.call(null,arguments[0],arguments[1],arguments[2])}};var b=c.ezEditTableConfig.on_after_selected_cell;c.ezEditTableConfig.on_after_selected_cell=function(){h(arguments[0],arguments[1],arguments[2]);if(b){b.call(null,arguments[0],arguments[1],arguments[2])}}}}if(c.editable){var k=c.ezEditTableConfig.on_added_dom_row;c.ezEditTableConfig.on_added_dom_row=function(){c.nbFilterableRows++;if(!c.paging){c.RefreshNbRows()}else{c.nbRows++;c.nbVisibleRows++;c.nbFilterableRows++;c.paging=false;c.RemovePaging();c.AddPaging(false)}if(c.alternateBgs){c.SetAlternateRows()}if(k){k.call(null,arguments[0],arguments[1],arguments[2])}};if(c.ezEditTableConfig.actions&&c.ezEditTableConfig.actions["delete"]){var j=c.ezEditTableConfig.actions["delete"].on_after_submit;c.ezEditTableConfig.actions["delete"].on_after_submit=function(){c.nbFilterableRows--;if(!c.paging){c.RefreshNbRows()}else{c.nbRows--;c.nbVisibleRows--;c.nbFilterableRows--;c.paging=false;c.RemovePaging();c.AddPaging(false)}if(c.alternateBgs){c.SetAlternateRows()}if(j){j.call(null,arguments[0],arguments[1])}}}}try{c.ezEditTable=new EditTable(c.id,c.ezEditTableConfig,i);c.ezEditTable.Init()}catch(f){alert(c.ezEditTableConfig.err)}};