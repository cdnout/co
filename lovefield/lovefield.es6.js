if(!self.window){window=self;}
(function(){'use strict';function aa(){return function(){}}function ca(a){return function(b){this[a]=b}}function g(a){return function(){return this[a]}}function k(a){return function(){return a}}var m,da=this;function n(a){return void 0!==a}function ea(){}
function fa(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function ga(a){return null!=a}function ha(a){var b=fa(a);return"array"==b||"object"==b&&"number"==typeof a.length}function ia(a){return"string"==typeof a}function ja(a){return"function"==fa(a)}function ka(a){return a[la]||(a[la]=++ma)}var la="closure_uid_"+(1E9*Math.random()>>>0),ma=0;function na(a,b,c){return a.call.apply(a.bind,arguments)}
function oa(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function pa(a,b,c){pa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?na:oa;return pa.apply(null,arguments)}
function ra(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}function q(a,b){a=a.split(".");var c=da;a[0]in c||!c.execScript||c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)!a.length&&n(b)?c[d]=b:c=c[d]&&Object.prototype.hasOwnProperty.call(c,d)?c[d]:c[d]={}}
function r(a,b){function c(){}c.prototype=b.prototype;a.eb=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.Rg=function(a,c,f){for(var d=Array(arguments.length-2),e=2;e<arguments.length;e++)d[e-2]=arguments[e];return b.prototype[c].apply(a,d)}};function sa(a){if(Error.captureStackTrace)Error.captureStackTrace(this,sa);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}r(sa,Error);sa.prototype.name="CustomError";var ta=String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};
function ua(a,b){var c=0;a=ta(String(a)).split(".");b=ta(String(b)).split(".");for(var d=Math.max(a.length,b.length),e=0;0==c&&e<d;e++){var f=a[e]||"",h=b[e]||"";do{f=/(\d*)(\D*)(.*)/.exec(f)||["","","",""];h=/(\d*)(\D*)(.*)/.exec(h)||["","","",""];if(0==f[0].length&&0==h[0].length)break;c=va(0==f[1].length?0:parseInt(f[1],10),0==h[1].length?0:parseInt(h[1],10))||va(0==f[2].length,0==h[2].length)||va(f[2],h[2]);f=f[3];h=h[3]}while(0==c)}return c}function va(a,b){return a<b?-1:a>b?1:0};function wa(a,b,c){this.ng=c;this.Kf=a;this.Gg=b;this.ld=0;this.bd=null}wa.prototype.get=function(){var a;0<this.ld?(this.ld--,a=this.bd,this.bd=a.next,a.next=null):a=this.Kf();return a};wa.prototype.put=function(a){this.Gg(a);this.ld<this.ng&&(this.ld++,a.next=this.bd,this.bd=a)};var xa=Array.prototype.indexOf?function(a,b,c){return Array.prototype.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(ia(a))return ia(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},ya=Array.prototype.forEach?function(a,b,c){Array.prototype.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ia(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},za=Array.prototype.map?function(a,b,c){return Array.prototype.map.call(a,
b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=ia(a)?a.split(""):a,h=0;h<d;h++)h in f&&(e[h]=b.call(c,f[h],h,a));return e},Aa=Array.prototype.reduce?function(a,b,c,d){d&&(b=pa(b,d));return Array.prototype.reduce.call(a,b,c)}:function(a,b,c,d){var e=c;ya(a,function(c,h){e=b.call(d,e,c,h,a)});return e},Ba=Array.prototype.some?function(a,b,c){return Array.prototype.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ia(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return!0;return!1};
function Ca(a,b,c){return 2>=arguments.length?Array.prototype.slice.call(a,b):Array.prototype.slice.call(a,b,c)}function Da(a){for(var b=[],c=0;c<a;c++)b[c]=0;return b}function Ea(a){for(var b=[],c=0;c<arguments.length;c++){var d=arguments[c];if("array"==fa(d))for(var e=0;e<d.length;e+=8192)for(var f=Ea.apply(null,Ca(d,e,e+8192)),h=0;h<f.length;h++)b.push(f[h]);else b.push(d)}return b};var Fa;a:{var Ga=da.navigator;if(Ga){var Ha=Ga.userAgent;if(Ha){Fa=Ha;break a}}Fa=""}function t(a){return-1!=Fa.indexOf(a)};function Ia(){return t("Safari")&&!(Ja()||t("Coast")||t("Opera")||t("Edge")||t("Silk")||t("Android"))}function Ja(){return(t("Chrome")||t("CriOS"))&&!t("Edge")};function La(a){da.setTimeout(function(){throw a;},0)}var Ma;
function Na(){var a=da.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!t("Presto")&&(a=function(){var a=document.createElement("IFRAME");a.style.display="none";a.src="";document.documentElement.appendChild(a);var b=a.contentWindow,a=b.document;a.open();a.write("");a.close();var c="callImmediate"+Math.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host,a=pa(function(a){if(("*"==d||a.origin==d)&&a.data==
c)this.port1.onmessage()},this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&!t("Trident")&&!t("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(n(c.next)){c=c.next;var a=c.Ae;c.Ae=null;a()}};return function(a){d.next={Ae:a};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(a){var b=document.createElement("SCRIPT");
b.onreadystatechange=function(){b.onreadystatechange=null;b.parentNode.removeChild(b);b=null;a();a=null};document.documentElement.appendChild(b)}:function(a){da.setTimeout(a,0)}};function Oa(){this.wd=this.mc=null}var Qa=new wa(function(){return new Pa},function(a){a.reset()},100);Oa.prototype.add=function(a,b){var c=Qa.get();c.set(a,b);this.wd?this.wd.next=c:this.mc=c;this.wd=c};Oa.prototype.remove=function(){var a=null;this.mc&&(a=this.mc,this.mc=this.mc.next,this.mc||(this.wd=null),a.next=null);return a};function Pa(){this.next=this.scope=this.Od=null}Pa.prototype.set=function(a,b){this.Od=a;this.scope=b;this.next=null};
Pa.prototype.reset=function(){this.next=this.scope=this.Od=null};function Ra(a,b){Sa||Ta();Ua||(Sa(),Ua=!0);Va.add(a,b)}var Sa;function Ta(){if(-1!=String(da.Promise).indexOf("[native code]")){var a=da.Promise.resolve(void 0);Sa=function(){a.then(Wa)}}else Sa=function(){var a=Wa;!ja(da.setImmediate)||da.Window&&da.Window.prototype&&!t("Edge")&&da.Window.prototype.setImmediate==da.setImmediate?(Ma||(Ma=Na()),Ma(a)):da.setImmediate(a)}}var Ua=!1,Va=new Oa;function Wa(){for(var a;a=Va.remove();){try{a.Od.call(a.scope)}catch(b){La(b)}Qa.put(a)}Ua=!1};function u(a,b){this.Ra=0;this.hf=void 0;this.Rc=this.bc=this.C=null;this.ad=this.Md=!1;if(a!=ea)try{var c=this;a.call(b,function(a){Xa(c,2,a)},function(a){Xa(c,3,a)})}catch(d){Xa(this,3,d)}}function Ya(){this.next=this.context=this.gc=this.Ec=this.child=null;this.zd=!1}Ya.prototype.reset=function(){this.context=this.gc=this.Ec=this.child=null;this.zd=!1};var Za=new wa(function(){return new Ya},function(a){a.reset()},100);function $a(a,b,c){var d=Za.get();d.Ec=a;d.gc=b;d.context=c;return d}
function v(a){if(a instanceof u)return a;var b=new u(ea);Xa(b,2,a);return b}function ab(a){return new u(function(b,c){c(a)})}function bb(a,b,c){cb(a,b,c,null)||Ra(ra(b,a))}function db(a){return new u(function(b,c){var d=a.length,e=[];if(d)for(var f=function(a,c){d--;e[a]=c;0==d&&b(e)},h=function(a){c(a)},l=0,p;l<a.length;l++)p=a[l],bb(p,ra(f,l),h);else b(e)})}function w(){var a,b,c=new u(function(c,e){a=c;b=e});return new eb(c,a,b)}
u.prototype.then=function(a,b,c){return fb(this,ja(a)?a:null,ja(b)?b:null,c)};u.prototype.then=u.prototype.then;u.prototype.$goog_Thenable=!0;u.prototype.pe=function(a,b){return fb(this,null,a,b)};function gb(a,b){a.bc||2!=a.Ra&&3!=a.Ra||hb(a);a.Rc?a.Rc.next=b:a.bc=b;a.Rc=b}
function fb(a,b,c,d){var e=$a(null,null,null);e.child=new u(function(a,h){e.Ec=b?function(c){try{var e=b.call(d,c);a(e)}catch(L){h(L)}}:a;e.gc=c?function(b){try{var e=c.call(d,b);!n(e)&&b instanceof ib?h(b):a(e)}catch(L){h(L)}}:h});e.child.C=a;gb(a,e);return e.child}u.prototype.Mg=function(a){this.Ra=0;Xa(this,2,a)};u.prototype.Ng=function(a){this.Ra=0;Xa(this,3,a)};
function Xa(a,b,c){0==a.Ra&&(a===c&&(b=3,c=new TypeError("Promise cannot resolve to itself")),a.Ra=1,cb(c,a.Mg,a.Ng,a)||(a.hf=c,a.Ra=b,a.C=null,hb(a),3!=b||c instanceof ib||jb(a,c)))}function cb(a,b,c,d){if(a instanceof u)return gb(a,$a(b||ea,c||null,d)),!0;var e;if(a)try{e=!!a.$goog_Thenable}catch(h){e=!1}else e=!1;if(e)return a.then(b,c,d),!0;e=typeof a;if("object"==e&&null!=a||"function"==e)try{var f=a.then;if(ja(f))return kb(a,f,b,c,d),!0}catch(h){return c.call(d,h),!0}return!1}
function kb(a,b,c,d,e){function f(a){l||(l=!0,d.call(e,a))}function h(a){l||(l=!0,c.call(e,a))}var l=!1;try{b.call(a,h,f)}catch(p){f(p)}}function hb(a){a.Md||(a.Md=!0,Ra(a.Rf,a))}function lb(a){var b=null;a.bc&&(b=a.bc,a.bc=b.next,b.next=null);a.bc||(a.Rc=null);return b}
u.prototype.Rf=function(){for(var a;a=lb(this);){var b=this.Ra,c=this.hf;if(3==b&&a.gc&&!a.zd){var d;for(d=this;d&&d.ad;d=d.C)d.ad=!1}if(a.child)a.child.C=null,mb(a,b,c);else try{a.zd?a.Ec.call(a.context):mb(a,b,c)}catch(e){nb.call(null,e)}Za.put(a)}this.Md=!1};function mb(a,b,c){2==b?a.Ec.call(a.context,c):a.gc&&a.gc.call(a.context,c)}function jb(a,b){a.ad=!0;Ra(function(){a.ad&&nb.call(null,b)})}var nb=La;function ib(a){sa.call(this,a)}r(ib,sa);ib.prototype.name="cancel";
function eb(a,b,c){this.ha=a;this.resolve=b;this.reject=c};function ob(a,b,c,d){c=c||function(a,b){return a==b};d=d||function(b){return a[b]};for(var e=a.length,f=b.length,h=[],l=0;l<e+1;l++)h[l]=[],h[l][0]=0;for(var p=0;p<f+1;p++)h[0][p]=0;for(l=1;l<=e;l++)for(p=1;p<=f;p++)c(a[l-1],b[p-1])?h[l][p]=h[l-1][p-1]+1:h[l][p]=Math.max(h[l-1][p],h[l][p-1]);for(var L=[],l=e,p=f;0<l&&0<p;)c(a[l-1],b[p-1])?(L.unshift(d(l-1,p-1)),l--,p--):h[l-1][p]>h[l][p-1]?l--:p--;return L}function pb(a){return Aa(arguments,function(a,c){return a+c},0)}
function qb(a){return pb.apply(null,arguments)/arguments.length}function rb(a){var b=arguments.length;if(2>b)return 0;var c=qb.apply(null,arguments);return pb.apply(null,za(arguments,function(a){return Math.pow(a-c,2)}))/(b-1)}function sb(a){return Math.sqrt(rb.apply(null,arguments))};var tb="StopIteration"in da?da.StopIteration:{message:"StopIteration",stack:""};function ub(){}ub.prototype.next=function(){throw tb;};ub.prototype.te=function(){return this};function vb(a){if(a instanceof ub)return a;if("function"==typeof a.te)return a.te(!1);if(ha(a)){var b=0,c=new ub;c.next=function(){for(;;){if(b>=a.length)throw tb;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");}
function wb(a,b){if(ha(a))try{ya(a,b,void 0)}catch(c){if(c!==tb)throw c;}else{a=vb(a);try{for(;;)b.call(void 0,a.next(),void 0,a)}catch(c){if(c!==tb)throw c;}}}function zb(a){if(Ba(arguments,function(a){return!a.length})||!arguments.length)return new ub;var b=new ub,c=arguments,d=Da(c.length);b.next=function(){if(d){for(var a=za(d,function(a,b){return c[b][a]}),b=d.length-1;0<=b;b--){if(d[b]<c[b].length-1){d[b]++;break}if(0==b){d=null;break}d[b]=0}return a}throw tb;};return b};function Ab(a){Bb(a);return a.a.concat()}function Bb(a){if(a.Gf!=a.a.length){for(var b=0,c=0;b<a.a.length;){var d=a.a[b];Cb(a.$,d)&&(a.a[c++]=d);b++}a.a.length=c}if(a.Gf!=a.a.length){for(var e={},c=b=0;b<a.a.length;)d=a.a[b],Cb(e,d)||(a.a[c++]=d,e[d]=1),b++;a.a.length=c}}function Cb(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function Db(){return t("iPhone")&&!t("iPod")&&!t("iPad")};function Eb(a,b){var c=Fb;return Object.prototype.hasOwnProperty.call(c,a)?c[a]:c[a]=b(a)};var Gb=t("Opera"),Hb=t("Trident")||t("MSIE"),Ib=t("Edge"),Jb=t("Gecko")&&!(-1!=Fa.toLowerCase().indexOf("webkit")&&!t("Edge"))&&!(t("Trident")||t("MSIE"))&&!t("Edge"),Kb=-1!=Fa.toLowerCase().indexOf("webkit")&&!t("Edge"),Lb=t("Macintosh"),Mb=t("Windows"),Nb=t("Android"),Ob=Db(),Pb=t("iPad"),Qb=t("iPod"),Rb;
a:{var Sb="",Tb=function(){var a=Fa;if(Jb)return/rv\:([^\);]+)(\)|;)/.exec(a);if(Ib)return/Edge\/([\d\.]+)/.exec(a);if(Hb)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(Kb)return/WebKit\/(\S+)/.exec(a);if(Gb)return/(?:Version)[ \/]?(\S+)/.exec(a)}();Tb&&(Sb=Tb?Tb[1]:"");if(Hb){var Ub,Vb=da.document;Ub=Vb?Vb.documentMode:void 0;if(null!=Ub&&Ub>parseFloat(Sb)){Rb=String(Ub);break a}}Rb=Sb}var Wb=Rb,Fb={};function Xb(a){return Eb(a,function(){return 0<=ua(Wb,a)})};var Yb=function(){var a;return Mb?(a=/Windows NT ([0-9.]+)/,(a=a.exec(Fa))?a[1]:"0"):Lb?(a=/10[_.][0-9_.]+/,(a=a.exec(Fa))?a[0].replace(/_/g,"."):"10"):Nb?(a=/Android\s+([^\);]+)(\)|;)/,(a=a.exec(Fa))?a[1]:""):Ob||Pb||Qb?(a=/(?:iPhone|CPU)\s+OS\s+(\S+)/,(a=a.exec(Fa))?a[1].replace(/_/g,"."):""):""}();var Zb=Db()||t("iPod"),$b=t("iPad");/*

 Copyright 2015 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function ac(){var a;!(a=Ia()&&!Xb(10))&&(a=$b||Zb)&&(a=!(0<=ua(Yb,10)));this.mg=a;this.bg=!(this.mg||Hb&&!Xb(10));!Hb||Xb(11);this.Qg=Ja()||Ia()}var bc;function x(){return new window.Map}function cc(a){var b=0,c=Array(a.size);a.forEach(function(a,e){c[b++]=e});return c}function y(a){var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c};/*

 Copyright 2014 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function dc(a,b){this.ra=a;this.l=b||this.Fe()}var ec=0;m=dc.prototype;m.id=g("ra");m.Fe=function(){return{}};m.rf=g("l");m.Ia=function(){return{id:this.ra,value:this.rf()}};m.lb=function(a){return"#"==a.substr(-1)?this.ra:null};function fc(a){return new dc(a.id,a.value)}function gc(a){return new dc(ec++,a||{})}function hc(a){if(null==a)return null;a=new Uint8Array(a);for(var b="",c=0;c<a.length;++c)var d=a[c].toString(16),b=b+(2>d.length?"0"+d:d);return b};var ic={};q("lf.TransactionType",ic);ic.READ_ONLY=0;ic.READ_WRITE=1;function z(a,b,c,d,e){this.rd=a;this.fg=b;this.Pg=c;this.Mf=d;this.Ef=e}q("lf.TransactionStats",z);z.prototype.Kg=g("rd");z.prototype.success=z.prototype.Kg;z.prototype.eg=g("fg");z.prototype.insertedRowCount=z.prototype.eg;z.prototype.Og=g("Pg");z.prototype.updatedRowCount=z.prototype.Og;z.prototype.Lf=g("Mf");z.prototype.deletedRowCount=z.prototype.Lf;z.prototype.Df=g("Ef");z.prototype.changedTableCount=z.prototype.Df;function jc(a,b){this.td=a;this.Pa=b||null;this.O=w();this.rd=!1;this.ya=null}jc.prototype.ka=function(){return(0==this.td?this.pc():kc(this)).then(function(a){this.rd=!0;return a}.bind(this))};function kc(a){try{lc(a.Pa)}catch(b){return ab(b)}return mc(a).then(function(a){this.Pa.ka();return a}.bind(a))}function mc(a){nc(a);oc(a);return a.pc()}
function nc(a){a.Pa.fb.forEach(function(a,c){c=this.Pa.da().get(c);c=this.H(c.getName(),c.ib.bind(c),0);var b=y(a.wa).map(function(a){return a.id()});0<b.length&&c.remove(b).pe(this.Oe,this);a=y(a.la).map(function(a){return a[1]}).concat(y(a.va));c.put(a).pe(this.Oe,this)},a)}function oc(a){pc(a.Pa).forEach(function(a){var b=this.H(a.getName(),fc,1);b.remove([]);b.put(a.Ia())},a)}jc.prototype.Oe=function(a){this.O.reject(a)};
jc.prototype.X=function(){if(null===this.ya)if(this.rd)if(0==this.td)this.ya=new z(!0,0,0,0,0);else{var a=0,b=0,c=0,d=0;this.Pa.fb.forEach(function(e){d++;a+=e.va.size;c+=e.la.size;b+=e.wa.size});this.ya=new z(!0,a,c,b,d)}else this.ya=new z(!1,0,0,0,0);return this.ya};function qc(a){this.Hg=a}qc.prototype.toString=g("Hg");var rc=new qc("backstore"),sc=new qc("cache"),tc=new qc("indexstore"),uc=new qc("engine"),vc=new qc("runner"),wc=new qc("observerregistry"),A=new qc("schema");function B(a){return n(a)?new window.Set(a):new window.Set}function C(a){var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c}function xc(a,b){if(b.size>a.size)return!1;var c=!0;b.forEach(function(b){c=c&&a.has(b)});return c};function yc(a,b){this.ra=a;this.l=b||{}}function zc(a){var b=B();a.forEach(function(a){b.add(a>>9)});return C(b)}yc.prototype.V=g("ra");function Ac(a,b){b.forEach(function(a){this.l[a.id()]=a.Ia()},a)}function Bc(a,b){b.forEach(function(a){delete this.l[a]},a)}yc.prototype.Ia=function(){return{id:this.ra,value:JSON.stringify(this.l)}};function Cc(a){return new yc(a.id,JSON.parse(a.value))};function Dc(a,b,c){this.Y=a;this.Eb=b;this.jf=c}m=Dc.prototype;m.get=function(a){if(0==a.length)return this.Qd();var b=this.Eb;return Ec(this,a).then(function(c){return a.map(function(a){var d=c.get(a>>9);return b(d.l[a])})})};function Ec(a,b){var c=x(),d=w();a=zc(b).map(function(a){return new u(function(b,d){var e;try{e=this.Y.get(a)}catch(p){d(p);return}e.onerror=d;e.onsuccess=function(a){a=Cc(a.target.result);c.set(a.V(),a);b()}},this)},a);db(a).then(function(){d.resolve(c)});return d.ha}
m.Qd=function(){return new u(function(a,b){var c=[],d;try{d=this.Y.openCursor()}catch(e){b(e);return}d.onerror=b;d.onsuccess=function(){var b=d.result;if(b){var f=Cc(b.value).l,h;for(h in f)c.push(this.Eb(f[h]));b.continue()}else a(c)}.bind(this)},this)};m.Rb=function(a){return new u(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};
m.put=function(a){if(0==a.length)return v();var b=x();a.forEach(function(a){var c=a.id()>>9,e=b.get(c)||null;null===e&&(e=this.jf(this.Y.name,c));Ac(e,[a]);b.set(c,e)},this);a=y(b).map(function(a){return this.Rb(function(){return this.Y.put(a.Ia())}.bind(this))},this);return db(a)};
m.remove=function(a){if(0==a.length)return this.Rb(function(){return this.Y.clear()}.bind(this));var b=x();a.forEach(function(a){var c=a>>9,e=b.get(c)||null;null===e&&(e=this.jf(this.Y.name,c));Bc(e,[a]);b.set(c,e)},this);a=y(b).map(function(a){return this.Rb(function(){return 0==Object.keys(a.l).length?this.Y.delete(a.V()):this.Y.put(a.Ia())}.bind(this))},this);return db(a)};function Fc(a,b,c){a=a.b(sc);var d=[c<<9,(c+1<<9)-1];b=a.Sa(b,d[0],d[1]);c=new yc(c);Ac(c,b);return c}
function Gc(a,b){return new yc(b)};function Hc(a){this.U=a.b(sc);this.B=a.b(tc);this.g=a.b(A)}Hc.prototype.update=function(a){a.forEach(function(a){Ic(this,a);Jc(this,a)},this)};function Jc(a,b){var c=b.getName();b.wa.forEach(function(a,b){this.U.remove(c,b)},a);b.va.forEach(function(a){this.U.set(c,a)},a);b.la.forEach(function(a){this.U.set(c,a[1])},a)}function Ic(a,b){var c=a.g.table(b.getName());Kc(b).forEach(function(a){Lc(this,c,a)},a)}
function Lc(a,b,c){var d=a.B.jc.get(b.getName())||[],e=0;d.forEach(function(a){try{Mc(a,c),e++}catch(h){throw d.slice(0,e).forEach(function(a){Mc(a,[c[1],c[0]])},this),h;}},a)}function Mc(a,b){var c=null===b[1]?void 0:b[1].lb(a.getName()),d=null===b[0]?void 0:b[0].lb(a.getName());if(!n(d)&&n(c))a.add(c,b[1].id());else if(n(d)&&n(c)){if(null===c||null===d){if(c==d)return}else if(0==a.gb().compare(d,c))return;a.add(c,b[1].id());a.remove(d,b[0].id())}else n(d)&&!n(c)&&a.remove(d,b[0].id())};var Nc={};q("lf.ConstraintAction",Nc);Nc.RESTRICT=0;Nc.CASCADE=1;var Pc={};q("lf.ConstraintTiming",Pc);Pc.IMMEDIATE=0;Pc.DEFERRABLE=1;var Qc={};q("lf.Order",Qc);Qc.DESC=0;Qc.ASC=1;var Rc={};q("lf.Type",Rc);Rc.ARRAY_BUFFER=0;Rc.BOOLEAN=1;Rc.DATE_TIME=2;Rc.INTEGER=3;Rc.NUMBER=4;Rc.STRING=5;Rc.OBJECT=6;var Sc={0:null,1:!1,2:Object.freeze(new Date(0)),3:0,4:0,5:"",6:null};q("lf.type.DEFAULT_VALUES",Sc);function D(a,b){this.code=a;this.message="http://google.github.io/lovefield/error_lookup/src/error_lookup.html?c="+a;if(1<arguments.length)for(var c=1;c<=Math.min(4,arguments.length-1);++c)this.message+="&p"+(c-1)+"="+encodeURIComponent(String(arguments[c]).slice(0,64))}r(D,Error);function Tc(){this.$=x();this.size=0}m=Tc.prototype;m.has=function(a){return this.$.has(a)};m.set=function(a,b){var c=this.$.get(a)||null;null===c&&(c=B(),this.$.set(a,c));c.has(b)||(c.add(b),this.size++);return this};m.Ub=function(a,b){var c=this.$.get(a)||null;null===c&&(c=B(),this.$.set(a,c));b.forEach(function(a){c.has(a)||(c.add(a),this.size++)},this);return this};m.Wd=function(a){a.keys().forEach(function(b){var c=a.get(b);this.Ub(b,c)},this);return this};
m.delete=function(a,b){var c=this.$.get(a)||null;if(null===c)return!1;if(b=c.delete(b))--this.size,0==c.size&&this.$.delete(a);return b};m.get=function(a){a=this.$.get(a)||null;return null===a?null:C(a)};m.clear=function(){this.$.clear();this.size=0};m.keys=function(){return cc(this.$)};m.values=function(){var a=[];this.$.forEach(function(b){a.push.apply(a,C(b))});return a};function Uc(a){this.B=a.b(tc);this.g=a.b(A);this.U=a.b(sc);this.Wc=null}function Vc(a,b,c){var d=b.Kb.tg;c.forEach(function(a){d.forEach(function(b){if(null==a.l[b.getName()])throw new D(202,b.j());},this)},a)}function Wc(a,b,c,d){b.Kb.Pd.forEach(function(a){a.timing==d&&Xc(this,a,c)},a)}function Xc(a,b,c){var d=Yc(a,b);c.forEach(function(a){if(Zc(a[0],a[1],b.name)&&(a=a[1].lb(b.name),null!==a&&!d.hb(a)))throw new D(203,b.name);},a)}
function Yc(a,b){null===a.Wc&&(a.Wc=x());var c=a.Wc.get(b.name)||null;null===c&&(c=a.g.table(b.Ua)[b.Fc].Ba(),c=a.B.get(c.j()),a.Wc.set(b.name,c));return c}function Zc(a,b,c){return(null===a?null!==b:null===b)||a.lb(c)!=b.lb(c)}function $c(a,b,c,d){b=ad(a.g.info(),b.getName(),0);null!==b&&(b=b.filter(function(a){return a.timing==d}),0!=b.length&&bd(a,b,c,function(a,b,c){if(b.hb(c))throw new D(203,a.name);}))}
function cd(a,b,c){b=ad(a.g.info(),b.getName(),1);if(null===b)return null;var d=new Tc;bd(a,b,c,function(a,b,c){b=b.get(c);0<b.length&&d.Ub(a.Be,b)});return d}function dd(a,b,c){var d=new Tc;bd(a,c,b,function(a,b,c,l){b.get(c).forEach(function(b){d.set(b,{Nd:a,yg:l[1]})})});return d}function bd(a,b,c,d){b.forEach(function(a){var b=this.B.get(a.name),e=Yc(this,a);c.forEach(function(c){if(Zc(c[0],c[1],e.getName())){var f=c[0].lb(e.getName());d(a,b,f,c)}},this)},a)}
function ed(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[null,a]}),Wc(a,b,c,d))}function fd(a,b,c,d){0!=c.length&&(Wc(a,b,c,d),$c(a,b,c,d))}function gd(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[a,null]}),$c(a,b,c,d))}
function hd(a,b,c){var d={oe:[],lf:new Tc},e=new Tc;e.Ub(b.getName(),c.map(function(a){return a.id()}));do{var f=new Tc;e.keys().forEach(function(a){var b=this.g.table(a);a=e.get(a).map(function(a){return[this.U.get(a),null]},this);b=cd(this,b,a);null!==b&&(d.oe.unshift.apply(d.oe,b.keys()),f.Wd(b))},a);e=f;d.lf.Wd(e)}while(0<e.size);return d};function id(a){this.va=x();this.la=x();this.wa=x();this.w=a}m=id.prototype;m.getName=g("w");m.add=function(a){if(this.wa.has(a.id())){var b=[this.wa.get(a.id()),a];this.la.set(a.id(),b);this.wa.delete(a.id())}else this.va.set(a.id(),a)};m.modify=function(a){var b=a[1],c=a[0].id();this.va.has(c)?this.va.set(c,b):(this.la.has(c)&&(a=[this.la.get(a[0].id())[0],b]),this.la.set(c,a))};
m.delete=function(a){if(this.va.has(a.id()))this.va.delete(a.id());else if(this.la.has(a.id())){var b=this.la.get(a.id())[0];this.la.delete(a.id());this.wa.set(a.id(),b)}else this.wa.set(a.id(),a)};m.Wd=function(a){a.va.forEach(function(a){this.add(a)},this);a.la.forEach(function(a){this.modify(a)},this);a.wa.forEach(function(a){this.delete(a)},this)};
function Kc(a){var b=[];a.va.forEach(function(a){b.push([null,a])});a.la.forEach(function(a){b.push(a)});a.wa.forEach(function(a){b.push([a,null])});return b}m.toString=function(){return"["+cc(this.va).toString()+"], ["+cc(this.la).toString()+"], ["+cc(this.wa).toString()+"]"};function jd(a){var b=new id(a.w);a.va.forEach(function(a){b.delete(a)});a.wa.forEach(function(a){b.add(a)});a.la.forEach(function(a){b.modify([a[1],a[0]])});return b}
m.hg=function(){return 0==this.va.size&&0==this.wa.size&&0==this.la.size};function kd(a,b){this.aa=x();b.forEach(function(a){this.aa.set(a.getName(),a)},this);this.g=a.b(A);this.U=a.b(sc);this.B=a.b(tc);this.za=new Uc(a);this.cd=new Hc(a);this.fb=x()}function pc(a){var b=[];cc(a.fb).map(function(a){return this.aa.get(a)},a).forEach(function(a){a.Bb()&&(a.Ca().forEach(function(a){b.push(this.B.get(a.j()))},this),b.push(this.B.get(a.getName()+".#")))},a);return b}m=kd.prototype;m.da=g("aa");
m.zb=function(a,b){ld(this,a);Vc(this.za,a,b);ed(this.za,a,b,0);for(var c=0;c<b.length;c++)md(this,a,[null,b[c]])};function md(a,b,c){var d=b.getName(),e=a.fb.get(d)||new id(d);a.fb.set(d,e);try{Lc(a.cd,b,c)}catch(h){throw h;}b=c[0];var f=c[1];null===b&&null!==f?(a.U.set(d,f),e.add(f)):null!==b&&null!==f?(a.U.set(d,f),e.modify(c)):null!==b&&null===f&&(a.U.remove(d,b.id()),e.delete(b))}
m.update=function(a,b){ld(this,a);Vc(this.za,a,b);b=b.map(function(a){return[this.U.get(a.id()),a]},this);nd(this,a,b);fd(this.za,a,b,0);b.forEach(function(b){md(this,a,b)},this)};m.Rd=function(a,b){ld(this,a);Vc(this.za,a,b);for(var c=0;c<b.length;c++){var d=b[c],e=null,f,h=a.Kb.nd;if(null===h)f=null;else{f=this.za;var h=h.j(),l=d.lb(h);f=f.B.get(h).get(l);f=0==f.length?null:f[0]}null!=f?(e=this.U.get(f),d.ra=f,fd(this.za,a,[[e,d]],0)):ed(this.za,a,[d],0);md(this,a,[e,d])}};
m.remove=function(a,b){ld(this,a);od(this,a,b);gd(this.za,a,b,0);for(var c=0;c<b.length;c++)md(this,a,[b[c],null])};function nd(a,b,c){b=ad(a.g.info(),b.getName(),1);if(null!==b){var d=dd(a.za,c,b);d.keys().forEach(function(a){d.get(a).forEach(function(b){var c=this.g.table(b.Nd.Be),d=this.U.get(a),e=c.ib(d.Ia());e.l[b.Nd.tb]=b.yg.l[b.Nd.Fc];md(this,c,[d,e])},this)},a)}}
function od(a,b,c){if(null!==ad(a.g.info(),b.getName(),1)){b=hd(a.za,b,c);var d=b.lf;b.oe.forEach(function(a){var b=this.g.table(a);a=d.get(a).map(function(a){return this.U.get(a)},this);gd(this.za,b,a,0);a.forEach(function(a){md(this,b,[a,null])},this)},a)}}function lc(a){a.fb.forEach(function(a){var b=this.aa.get(a.getName());ed(this.za,b,y(a.va),1);gd(this.za,b,y(a.wa),1);fd(this.za,b,y(a.la),1)},a)}m.ka=aa();m.Hb=function(){var a=y(this.fb).map(function(a){return jd(a)});this.cd.update(a)};
function ld(a,b){if(!a.aa.has(b.getName()))throw new D(106,b.getName());};function E(a,b,c,d){this.from=a;this.m=b;this.ea=this.from==F?!1:c;this.na=this.m==F?!1:d}var F=new (aa());E.prototype.toString=function(){return(this.ea?"(":"[")+(this.from==F?"unbound":this.from)+", "+(this.m==F?"unbound":this.m)+(this.na?")":"]")};function pd(a){if(qd(a))return[];var b=null,c=null;a.from==F||(b=new E(F,a.from,!1,!a.ea));a.m==F||(c=new E(a.m,F,!a.na,!1));return[b,c].filter(function(a){return null!==a})}E.prototype.reverse=function(){return new E(this.m,this.from,this.na,this.ea)};
function rd(a,b){var c=sd(a.from,b.from,!0,a.ea,b.ea);if(0==c)return!0;var d=-1==c?a:b;a=1==c?a:b;return d.m==F||d.m>a.from||d.m==a.from&&!d.na&&!a.ea}function td(){return new E(F,F,!1,!1)}function qd(a){return a.from==F&&a.m==F}function ud(a){return a.from==a.m&&a.from!=F&&!a.ea&&!a.na}E.prototype.contains=function(a){var b=this.m==F||a<this.m||a==this.m&&!this.na;return(this.from==F||a>this.from||a==this.from&&!this.ea)&&b};
function sd(a,b,c,d,e){function f(a){return c?a:1==a?-1:1}d=d||!1;e=e||!1;return a==F?b==F?(d?!e:e)?d?f(1):f(-1):0:f(-1):b==F?f(1):a<b?-1:a==b?(d?!e:e)?d?f(1):f(-1):0:1}function vd(a,b){var c=sd(a.from,b.from,!0,a.ea,b.ea);0==c&&(c=sd(a.m,b.m,!1,a.na,b.na));return c}function wd(a){if(0==a.length)return[];a.sort(vd);for(var b=Array(a.length+1),c=0;c<b.length;c++)b[c]=0==c?new E(F,a[c].from,!1,!0):c==b.length-1?new E(a[c-1].m,F,!0,!1):new E(a[c-1].m,a[c].from,!0,!0);return b};function xd(a){this.ic=[];n(a)&&this.add(a)}xd.prototype.toString=function(){return this.ic.map(function(a){return a.toString()}).join(",")};xd.prototype.hb=function(a){return this.ic.some(function(b){return b.contains(a)})};xd.prototype.yb=g("ic");
xd.prototype.add=function(a){if(0!=a.length)if(a=this.ic.concat(a),1==a.length)this.ic=a;else{a.sort(vd);for(var b=[],c=a[0],d=1;d<a.length;++d)if(rd(c,a[d])){var e=a[d],f=td();if(c.from!=F&&e.from!=F){var h=sd(c.from,e.from,!0);1!=h?(f.from=c.from,f.ea=0!=h?c.ea:c.ea&&e.ea):(f.from=e.from,f.ea=e.ea)}c.m!=F&&e.m!=F&&(h=sd(c.m,e.m,!1),-1!=h?(f.m=c.m,f.na=0!=h?c.na:c.na&&e.na):(f.m=e.m,f.na=e.na));c=f}else b.push(c),c=a[d];b.push(c);this.ic=b}};
function yd(a,b){var c=[];a.yb().map(function(a){return b.yb().map(function(b){var c;if(rd(a,b)){c=td();var d=sd(a.from,b.from,!0),d=0==d?a.ea?a:b:-1!=d?a:b;c.from=d.from;c.ea=d.ea;a.m==F||b.m==F?b=a.m==F?b:a:(d=sd(a.m,b.m,!1),b=0==d?a.na?a:b:-1==d?a:b);c.m=b.m;c.na=b.na}else c=null;return c})}).forEach(function(a){c=c.concat(a)});return new xd(c.filter(function(a){return null!==a}))};function G(a,b){this.entries=a;this.L=B(b);this.Xa=null}G.prototype.s=function(){return C(this.L)};function zd(a){return a.entries.map(function(a){return a.ua.l})}function Ad(a){return a.entries.map(function(a){return a.ua.id()})}function Bd(a,b){return a.Xa.get(b.j())}var Cd=null;function Dd(){null===Cd&&(Cd=new G([],[]));return Cd}
function Ed(a){if(0==a.length)return Dd();for(var b=a.reduce(function(a,b){return a+b.entries.length},0),c=Array(b),d=0,b=a.map(function(a){var b=x();a.entries.forEach(function(a){c[d++]=a;b.set(a.id,a)});return b}),e=x(),f=0;f<c.length;f++)b.every(function(a){return a.has(c[f].id)})&&e.set(c[f].id,c[f]);return new G(y(e),C(a[0].L))}function Fd(a){if(0==a.length)return Dd();var b=x();a.forEach(function(a){a.entries.forEach(function(a){b.set(a.id,a)})});return new G(y(b),C(a[0].L))}
function Gd(a,b){var c=1<b.length;a=a.map(function(a){return new Hd(a,c)});return new G(a,b)}function Hd(a,b){this.ua=a;this.id=Id++;this.Td=b}var Id=0;function H(a,b){var c=b.Ja;return null!==c&&a.ua.l.hasOwnProperty(c)?a.ua.l[c]:a.Td?a.ua.l[Jd(b.H())][b.getName()]:a.ua.l[b.getName()]}function Kd(a,b,c){var d=b.Ja;if(null!=d)a.ua.l[d]=c;else if(a.Td){var d=Jd(b.H()),e=a.ua.l[d];null==e&&(e={},a.ua.l[d]=e);e[b.getName()]=c}else a.ua.l[b.getName()]=c}
function Ld(a,b,c,d){function e(a,b){if(a.Td){a=a.ua.l;for(var c in a)f[c]=a[c]}else f[b[0]]=a.ua.l}var f={};e(a,b);e(c,d);a=new dc(-1,f);return new Hd(a,!0)};q("lf.bind",function(a){return new Md(a)});function Md(a){this.fa=a}q("lf.Binder",Md);Md.prototype.Ba=g("fa");function Nd(){this.Ue=Od();var a=Pd();this.Mb=x();this.Mb.set(1,Qd());this.Mb.set(2,Rd());this.Mb.set(4,a);this.Mb.set(3,a);this.Mb.set(5,Sd());this.Mb.set(6,Td())}var Ud;function Vd(){null!=Ud||(Ud=new Nd);return Ud}function Wd(a,b,c){a=a.Mb.get(b)||null;if(null===a)throw new D(550);c=a.get(c)||null;if(null===c)throw new D(550);return c}
function Od(){function a(a){return a}var b=x();b.set(1,function(a){return null===a?null:a?1:0});b.set(2,function(a){return null===a?null:a.getTime()});b.set(3,a);b.set(4,a);b.set(5,a);return b}function Qd(){var a=x();a.set("eq",function(a,c){return a==c});a.set("neq",function(a,c){return a!=c});return a}
function Pd(){var a=Qd();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a>=c[0]&&a<=c[1]});a.set("gte",function(a,c){return null===a||null===c?!1:a>=c});a.set("gt",function(a,c){return null===a||null===c?!1:a>c});a.set("in",function(a,c){return-1!=c.indexOf(a)});a.set("lte",function(a,c){return null===a||null===c?!1:a<=c});a.set("lt",function(a,c){return null===a||null===c?!1:a<c});return a}
function Sd(){var a=Pd();a.set("match",function(a,c){return null===a||null===c?!1:(new RegExp(c)).test(a)});return a}function Td(){var a=x();a.set("eq",function(a,c){if(null!==c)throw new D(550);return null===a});a.set("neq",function(a,c){if(null!==c)throw new D(550);return null!==a});return a}
function Rd(){var a=x();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a.getTime()>=c[0].getTime()&&a.getTime()<=c[1].getTime()});a.set("eq",function(a,c){return(null===a?-1:a.getTime())==(null===c?-1:c.getTime())});a.set("gte",function(a,c){return null===a||null===c?!1:a.getTime()>=c.getTime()});a.set("gt",function(a,c){return null===a||null===c?!1:a.getTime()>c.getTime()});a.set("in",function(a,c){return c.some(function(b){return b.getTime()==a.getTime()})});a.set("lte",
function(a,c){return null===a||null===c?!1:a.getTime()<=c.getTime()});a.set("lt",function(a,c){return null===a||null===c?!1:a.getTime()<c.getTime()});a.set("neq",function(a,c){return(null===a?-1:a.getTime())!=(null===c?-1:c.getTime())});return a};function I(){this.h=this.C=null}var Xd=[];I.prototype.getParent=g("C");I.prototype.Za=function(){for(var a=this;null!==a.getParent();)a=a.getParent();return a};function Yd(a){for(var b=0;null!==a.getParent();)b++,a=a.getParent();return b}function J(a){return a.h||Xd}function Zd(a,b){return J(a)[b]||null}function $d(a,b,c){b.C=a;null===a.h?a.h=[b]:a.h.splice(c,0,b)}function K(a,b){b.C=a;null===a.h?a.h=[b]:a.h.push(b)}
function ae(a,b){var c=a.h&&a.h[b];return c?(c.C=null,a.h.splice(b,1),0==a.h.length&&(a.h=null),c):null}I.prototype.removeChild=function(a){return ae(this,J(this).indexOf(a))};function be(a,b,c){Zd(a,c).C=null;b.C=a;a.h[c]=b}function ce(a,b,c){!1!==b.call(c,a)&&J(a).forEach(function(a){ce(a,b,c)})};function de(){I.call(this);this.ra=fe++}r(de,I);var fe=0;de.prototype.V=g("ra");function ge(a,b,c){de.call(this);this.I=a;this.value=b;this.D=c;this.sc=Wd(Vd(),this.I.F(),this.D);this.Ta=!1;this.ac=b}r(ge,de);m=ge.prototype;m.Lb=function(){var a=new ge(this.I,this.value,this.D);a.ac=this.ac;a.qd(this.Ta);var b=this.V();a.ra=b;return a};m.jb=function(a){return null!=a?(a.push(this.I),a):[this.I]};m.s=function(a){a=null!=a?a:B();a.add(this.I.H());return a};m.qd=ca("Ta");
function he(a){var b=!1;a.value instanceof Md||(b="array"==fa(a.value)?!a.value.some(function(a){return a instanceof Md}):!0);if(!b)throw new D(501);}m.eval=function(a){he(this);if("in"==this.D)return ie(this,a);var b=a.entries.filter(function(a){return this.sc(H(a,this.I),this.value)!=this.Ta},this);return new G(b,a.s())};
m.bind=function(a){if(this.ac instanceof Md){var b=this.ac.Ba();if(a.length<=b)throw new D(510);this.value=a[b]}else"array"==fa(this.ac)&&(this.value=this.ac.map(function(b){if(b instanceof Md){var c=b.Ba();if(a.length<=c)throw new D(510);return a[b.Ba()]}return b}))};function ie(a,b){var c=B(a.value),d=function(a){return null===a?!1:c.has(a)!=this.Ta}.bind(a);a=b.entries.filter(function(a){return d(H(a,this.I))},a);return new G(a,b.s())}
m.toString=function(){return"value_pred("+this.I.j()+" "+this.D+(this.Ta?"(complement)":"")+" "+this.value+")"};m.fd=function(){he(this);return null!==this.value&&("between"==this.D||"in"==this.D||"eq"==this.D||"gt"==this.D||"gte"==this.D||"lt"==this.D||"lte"==this.D)};
m.qe=function(){var a=null;if("between"==this.D)a=new E(je(this,this.value[0]),je(this,this.value[1]),!1,!1);else{if("in"==this.D)return a=this.value.map(function(a){return new E(a,a,!1,!1)}),new xd(this.Ta?wd(a):a);a=je(this,this.value);a="eq"==this.D?new E(a,a,!1,!1):"gte"==this.D?new E(a,F,!1,!1):"gt"==this.D?new E(a,F,!0,!1):"lte"==this.D?new E(F,a,!1,!1):new E(F,a,!1,!0)}return new xd(this.Ta?pd(a):[a])};function je(a,b){return 2==a.I.F()?b.getTime():b};function ke(a){this.ba=a;this.Sc=this.Fa=null}function le(a,b){null===a.Fa&&null!=a.u&&(a.Fa=me(a.u));return a.Fa.get(b)||null}function me(a){var b=x();ce(a,function(a){b.set(a.V(),a)});return b}function ne(a,b){b.u&&(a.u=b.u.Lb());a.Sc=b}ke.prototype.bind=function(){return this};function oe(a,b){a=a.u;null!=a&&ce(a,function(a){a instanceof ge&&a.bind(b)})};function pe(a){ke.call(this,a)}r(pe,ke);function qe(a){var b="";a.forEach(function(c,d){b+=c.I.j()+" ";b+=1==c.order?"ASC":"DESC";d<a.length-1&&(b+=", ")});return b}pe.prototype.da=function(){return B(this.from)};pe.prototype.clone=function(){var a=new pe(this.ba);ne(a,this);this.f&&(a.f=this.f.slice());this.from&&(a.from=this.from.slice());a.W=this.W;a.K=this.K;this.M&&(a.M=this.M.slice());this.qa&&(a.qa=this.qa.slice());this.Qb&&(a.Qb=this.Qb);this.Wb&&(a.Wb=this.Wb);a.ab=this.ab;return a};
pe.prototype.bind=function(a){pe.eb.bind.call(this,a);null!=this.Qb&&(this.W=a[this.Qb.Ba()]);null!=this.Wb&&(this.K=a[this.Wb.Ba()]);oe(this,a);return this};function re(a,b){this.Ga=a;this.aa=b}re.prototype.Za=g("Ga");re.prototype.da=g("aa");function se(a){var b=B();a.forEach(function(a){a.da().forEach(b.add.bind(b))});return b};function te(a,b){this.global=a;this.Na=a.b(rc);this.od=b.map(function(a){return a.context});this.df=b.map(function(a){return a.de});this.Hd=se(this.df);this.re=ue(this);this.Cb=w()}function ue(a){return a.od.some(function(a){return!(a instanceof pe)})?1:0}m=te.prototype;
m.exec=function(){function a(){var f=d.shift();if(f){var h=e[c.length];return f.Za().exec(b,h).then(function(b){c.push(b[0]);return a()})}return v()}var b=0==this.re?void 0:new kd(this.global,this.Hd),c=[],d=this.df.slice(),e=this.od;return a().then(function(){this.ja=this.Na.Db(this.re,C(this.Hd),b);return this.ja.ka()}.bind(this)).then(function(){this.ae(c);return c}.bind(this),function(a){null!=b&&b.Hb();throw a;})};m.F=g("re");m.da=g("Hd");m.V=function(){return ka(this)};m.ae=aa();
m.X=function(){var a=null;null!=this.ja&&(a=this.ja.X());return null===a?new z(!1,0,0,0,0):a};function ve(a,b){te.call(this,a,b);this.Gb=a.b(wc)}r(ve,te);ve.prototype.getPriority=k(0);ve.prototype.ae=function(a){this.od.forEach(function(b,c){we(this.Gb,b,a[c])},this)};function xe(a,b){this.c=a;this.Gb=a.b(wc);this.Ha=a.b(vc);this.cd=new Hc(a);this.fb=b;var c=a.b(A);a=this.fb.map(function(a){return c.table(a.getName())});this.aa=B(a);this.Cb=w()}m=xe.prototype;m.exec=function(){this.cd.update(this.fb);this.Ic();return v()};m.F=k(1);m.da=g("aa");m.V=function(){return ka(this)};m.getPriority=k(1);m.Ic=function(){var a=ye(this.Gb,this.aa);0!=a.length&&(a=new ve(this.c,a),ze(this.Ha,a))};function Ae(a){this.c=a;this.Na=a.b(rc);this.Ha=a.b(vc)}Ae.prototype.Zd=function(a){a=new xe(this.c,a);ze(this.Ha,a)};function M(a,b){this.Yb=a;this.i=b;this.Wa=x()}q("lf.backstore.FirebaseRawBackStore",M);M.prototype.Zc=g("i");M.prototype.$c=function(){throw new D(351);};function Be(a,b){var c=w(),d=a;b.length&&(d=a.child(b));d.once("value",function(a){c.resolve(a.val())},function(a){c.reject(a)});return c.ha}function Ce(a,b,c){function d(a){a?e.reject(a):e.resolve()}c=c||!1;var e=w();c?a.set(b,d):a.update(b,d);return e.ha}
M.prototype.Da=function(a){return Be(this.i,"@rev/R").then(function(a){this.Qa=a;return Be(this.i,"@table")}.bind(this)).then(function(b){var c=0,d;for(d in b)this.Wa.set(d,b[d]),b[d]>c&&(c=b[d]);a.oa().forEach(function(a){this.Wa.has(a.getName())||(b[a.getName()]=++c)},this);d=this.i.child("@table");return Ce(d,b)}.bind(this))};
function De(a,b,c){var d=a.Wa.get(b);return null!=d?function(){var a={},b=w();this.i.orderByChild("T").equalTo(d).once("value",function(d){d.forEach(function(b){var d=c(b.val());a[parseInt(b.key(),10)]=d});b.resolve(a)});return b.ha}.call(a).then(function(a){a["@rev"]={R:++this.Qa};return Ce(this.i,a)}.bind(a)):v()}M.prototype.qc=function(a){return De(this,a,k(null)).then(function(){this.Wa.delete(a);return Ce(this.i.child("@table/"+a),null,!0)}.bind(this))};M.prototype.dropTable=M.prototype.qc;
M.prototype.nc=function(a,b,c){return De(this,a,function(a){var d=a.P;d[b]=c;return{R:this.Qa+1,T:a.T,P:d}}.bind(this))};M.prototype.addTableColumn=M.prototype.nc;M.prototype.rc=function(a,b){return De(this,a,function(a){var c=a.P;delete c[b];return{R:this.Qa+1,T:a.T,P:c}}.bind(this))};M.prototype.dropTableColumn=M.prototype.rc;M.prototype.Hc=function(a,b,c){return De(this,a,function(a){var d=a.P;d[c]=d[b];delete d[b];return{R:this.Qa+1,T:a.T,P:d}}.bind(this))};M.prototype.renameTableColumn=M.prototype.Hc;
M.prototype.vb=function(){throw new D(351);};M.prototype.createRow=M.prototype.vb;M.prototype.yc=g("Yb");M.prototype.getVersion=M.prototype.yc;M.prototype.cc=function(a){var b=w();a=this.Wa.get(a);this.i.orderByChild("T").equalTo(a).once("value",function(a){var c=[];a.forEach(function(a){c.push(a.val().P)});b.resolve(c)});return b.ha};M.prototype.dump=function(){var a={},b=cc(this.Wa).map(function(b){return this.cc(b).then(function(c){a[b]=c})}.bind(this));return db(b).then(function(){return a})};
M.prototype.dump=M.prototype.dump;function Ee(a,b,c){jc.call(this,b,c);this.i=a}r(Ee,jc);Ee.prototype.H=function(a){return this.i.wc(a)};
Ee.prototype.pc=function(){if(0==this.td)return this.O.resolve(),this.O.ha;var a=this.Pa.fb;if(0==a.size)this.O.resolve();else{var b=this.i.Qa+1;this.i.Qa=b;var c={"@rev":{R:b}};a.forEach(function(a,e){var d=this.i.Wa.get(e);a.va.forEach(function(a,e){c[e]={R:b,T:d,P:a.l}});a.la.forEach(function(a,e){c[e]={R:b,T:d,P:a[1].l}});a.wa.forEach(function(a,b){c[b]=null})},this);this.i.i.update(c,function(c){null===c?this.O.resolve():(this.i.Qa=b-1,c=y(a).map(function(a){return Fe(this.i,a.getName())},this),
db(c).then(this.O.reject.bind(this.O),this.O.reject.bind(this.O)))}.bind(this))}return this.O.ha};function Ge(){this.Aa=x()}function He(a,b){if(0==b.length)return y(a.Aa);var c=[];b.forEach(function(a){a=this.Aa.get(a)||null;null===a||c.push(a)},a);return c}Ge.prototype.getData=g("Aa");Ge.prototype.get=function(a){return v(He(this,a))};function Ie(a,b){b.forEach(function(a){this.Aa.set(a.id(),a)},a)}Ge.prototype.put=function(a){Ie(this,a);return v()};function Je(a,b){0==b.length||b.length==a.Aa.size?a.Aa.clear():b.forEach(function(a){this.Aa.delete(a)},a)}
Ge.prototype.remove=function(a){Je(this,a);return v()};function Ke(a){return 0==a.Aa.size?0:cc(a.Aa).reduce(function(a,c){return a>c?a:c},0)};function Le(a,b){this.g=a;this.yf=b;this.Gc=x();this.Qa=-1;this.L=x();this.Wa=x();this.Ed=null}m=Le.prototype;
m.Da=function(a){this.i=this.yf.child(this.g.name());var b=a||function(){return v()};return Be(this.i,"@db/version").then(function(a){return null===a?Ce(this.i,Me(this),!0).then(function(){var a=new M(0,this.i);return b(a)}.bind(this)).then(function(){return this.Da()}.bind(this)):a==this.g.version()?Be(this.i,"@rev/R").then(function(a){this.Qa=a;return Be(this.i,"@table")}.bind(this)).then(function(a){for(var b in a)this.Wa.set(b,a[b]);a=this.g.oa().map(function(a){return Fe(this,a.getName())},this);
return db(a)}.bind(this)).then(function(){Ne(this);Oe(this);return v()}.bind(this)):this.be(a,b).then(function(){return this.Da()}.bind(this))}.bind(this))};m.be=function(a,b){var c=new M(a,this.i);return c.Da(this.g).then(function(){return v()}.bind(this)).then(function(){return b(c)}).then(function(){var a=this.i.child("@db");return Ce(a,{version:this.g.version()},!0)}.bind(this))};
function Oe(a){a.i.off();a.i.on("child_removed",a.vg.bind(a));a.Fd&&(a.Fd.off(),a.Gc.clear());a.Fd=a.i.orderByChild("R").startAt(a.Qa+1);a.Fd.on("value",a.Zd.bind(a))}function Ne(a){ec=y(a.L).map(function(a){return Ke(a)}).reduce(function(a,c){return a>c?a:c},0)+1}m.vg=function(a){var b=a.val(),c=this.Gc.get(b.T)||null;null===c&&(c=B(),this.Gc.set(b.T,c));c.add(parseInt(a.key(),10))};
m.Zd=function(a){var b=a.child("@rev/R").val();null!=b&&b!=this.Qa&&(this.Qa=b,a=Pe(this,a),a.forEach(function(a){var b=this.L.get(a.getName()),c=cc(a.wa);0<c.length&&Je(b,c);var f=y(a.va);a.la.forEach(function(a){f.push(a[1])});Ie(b,f)},this),0<a.length&&this.Cc(a),Oe(this))};
function Pe(a,b){var c=B(),d=x();a.Wa.forEach(function(a,b){var e=this.L.get(b),f=new id(b);this.Gc.has(a)&&(b=C(this.Gc.get(a)),b.forEach(function(a){c.add(a)}),He(e,b).forEach(function(a){f.delete(a)}));d.set(a,f)}.bind(a));b.forEach(function(a){if("@rev"!=a.key()){var b=parseInt(a.key(),10);if(!c.has(b)){var e=a.val();a=d.get(e.T);var l=this.L.get(a.getName()),e=this.g.table(a.getName()).ib({id:b,value:e.P});l.getData().has(b)?a.modify([He(l,[b])[0],e]):a.add(e)}}}.bind(a));return y(d).filter(function(a){return!a.hg()})}
function Fe(a,b){var c=w(),d=a.Wa.get(b),e=a.g.table(b);a.i.orderByChild("T").equalTo(d).once("value",function(a){var d=new Ge,f=[];a.forEach(function(a){f.push(e.ib({id:parseInt(a.key(),10),value:a.val().P}))});Ie(d,f);this.L.set(b,d);c.resolve()}.bind(a));return c.ha}function Me(a){var b={};b["@db"]={version:a.g.version()};b["@rev"]={R:1};a.Qa=1;b["@table"]={};a.g.oa().forEach(function(a,d){a=a.getName();b["@table"][a]=d;this.L.set(a,new Ge);this.Wa.set(a,d)},a);return b}
m.Db=function(a,b,c){return new Ee(this,a,c)};m.wc=function(a){var b=this.L.get(a)||null;if(null!==b)return b;throw new D(101,a);};m.close=aa();m.subscribe=ca("Ed");m.Cc=function(a){null!=this.Ed&&this.Ed(a)};function N(a,b,c,d){this.i=b;this.ja=c;this.Yb=a;this.Qc=d}q("lf.backstore.IndexedDBRawBackStore",N);N.prototype.Zc=g("i");N.prototype.getRawDBInstance=N.prototype.Zc;N.prototype.$c=g("ja");N.prototype.getRawTransaction=N.prototype.$c;N.prototype.qc=function(a){return new u(function(b,c){try{this.i.deleteObjectStore(a)}catch(d){c(d);return}b()},this)};N.prototype.dropTable=N.prototype.qc;
function Qe(a,b,c,d){return new u(function(a,f){var e;try{var l=this.ja.objectStore(b);e=l.openCursor()}catch(p){f(p);return}e.onsuccess=function(){var b=e.result;b?(c(b),b.continue()):(d(l),a())};e.onerror=f},a)}function Re(a){return a instanceof ArrayBuffer?hc(a):a instanceof Date?a.getTime():a}
function Se(a,b,c){function d(a){var b=Cc(a.value),d=b.l,e;for(e in d){var f=fc(d[e]);c(f);d[e]=f.Ia()}a.update(b.Ia())}function e(a){var b=fc(a.value);c(b);a.update(b.Ia())}return Qe(a,b,a.Qc?d:e,aa())}N.prototype.nc=function(a,b,c){var d=Re(c);return Se(this,a,function(a){a.l[b]=d})};N.prototype.addTableColumn=N.prototype.nc;N.prototype.rc=function(a,b){return Se(this,a,function(a){delete a.l[b]})};N.prototype.dropTableColumn=N.prototype.rc;
N.prototype.Hc=function(a,b,c){return Se(this,a,function(a){a.l[c]=a.l[b];delete a.l[b]})};N.prototype.renameTableColumn=N.prototype.Hc;function Te(a,b){var c=[];return new u(function(a,e){var d;try{d=this.ja.objectStore(b).openCursor()}catch(h){e(h);return}d.onsuccess=function(){var b=d.result;if(b){if(this.Qc){var e=Cc(b.value).l,f;for(f in e)c.push(e[f])}else c.push(b.value);b.continue()}else a(c)}.bind(this);d.onerror=e},a)}N.prototype.vb=function(a){var b={},c;for(c in a)b[c]=Re(a[c]);return gc(b)};
N.prototype.createRow=N.prototype.vb;N.prototype.yc=g("Yb");N.prototype.getVersion=N.prototype.yc;N.prototype.dump=function(){for(var a=this.i.objectStoreNames,b=[],c=0;c<a.length;++c){var d=a.item(c);b.push(this.cc(d))}return db(b).then(function(b){var c={};b.forEach(function(b,d){c[a.item(d)]=b});return c})};N.prototype.dump=N.prototype.dump;N.prototype.cc=function(a){return Te(this,a).then(function(a){return a.map(function(a){return a.value})})};function Ue(a,b){this.Y=a;this.Eb=b}Ue.prototype.get=function(a){if(0==a.length)return null!=this.Y.getAll?Ve(this):We(this);a=a.map(function(a){return new u(function(b,d){var c;try{c=this.Y.get(a)}catch(f){d(f);return}c.onerror=d;c.onsuccess=function(a){b(this.Eb(a.target.result))}.bind(this)},this)},this);return db(a)};
function We(a){return new u(function(a,c){var b=[],e;try{e=this.Y.openCursor()}catch(f){c(f);return}e.onerror=c;e.onsuccess=function(){var c=e.result;c?(b.push(this.Eb(c.value)),c.continue()):a(b)}.bind(this)},a)}function Ve(a){return new u(function(a,c){var b;try{b=this.Y.getAll()}catch(e){c(e);return}b.onerror=c;b.onsuccess=function(){var c=b.result.map(function(a){return this.Eb(a)},this);a(c)}.bind(this)},a)}
Ue.prototype.Rb=function(a){return new u(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};Ue.prototype.put=function(a){if(0==a.length)return v();a=a.map(function(a){return this.Rb(function(){return this.Y.put(a.Ia())}.bind(this))},this);return db(a)};
Ue.prototype.remove=function(a){return new u(function(b,c){var d=this.Y.count();d.onsuccess=function(d){if(0==a.length||d.target.result==a.length)return this.Rb(function(){return this.Y.clear()}.bind(this)).then(b,c);d=a.map(function(a){return this.Rb(function(){return this.Y.delete(a)}.bind(this))},this);db(d).then(b,c)}.bind(this);d.onerror=c},this)};function Xe(a,b,c,d,e){jc.call(this,c,e);this.c=a;this.ja=b;this.Qc=d;this.ja.oncomplete=this.O.resolve.bind(this.O);this.ja.onabort=this.O.reject.bind(this.O)}r(Xe,jc);Xe.prototype.H=function(a,b,c){return this.Qc?(c=null!=c?c:0,a=this.ja.objectStore(a),new Dc(a,b,0==c?ra(Fc,this.c):Gc)):new Ue(this.ja.objectStore(a),b)};Xe.prototype.pc=function(){return this.O.ha};function Ye(a,b){this.c=a;this.g=b;this.Bd=b.ee.Of||!1}m=Ye.prototype;
m.Da=function(a){var b=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;if(null==b)throw new D(352);var c=a||function(){return v()};return new u(function(a,e){var d;try{d=b.open(this.g.name(),this.g.version())}catch(h){e(h);return}d.onerror=function(a){a=a.target.error;e(new D(361,a.name,a.message))};d.onupgradeneeded=function(a){Ze(this,c,a).then(aa(),e)}.bind(this);d.onsuccess=function(b){this.i=b.target.result;this.ke().then(function(b){ec=Math.max(ec,b+1);a(this.i)}.bind(this))}.bind(this)},
this)};function Ze(a,b,c){var d=c.target.result;c=new N(c.oldVersion,d,c.target.transaction,a.Bd);$e(d);a.g.oa().forEach(ra(a.Hf,d),a);return b(c)}function $e(a){for(var b=[],c=0;c<a.objectStoreNames.length;++c){var d=a.objectStoreNames.item(c);-1!=d.indexOf(".")&&b.push(d)}b.forEach(function(b){try{a.deleteObjectStore(b)}catch(f){}})}
m.Hf=function(a,b){a.objectStoreNames.contains(b.getName())||a.createObjectStore(b.getName(),{keyPath:"id"});b.Bb()&&(b.Ca().forEach(function(b){af(a,b.j())},this),af(a,bf(b)))};function af(a,b){a.objectStoreNames.contains(b)||a.createObjectStore(b,{keyPath:"id"})}m.Db=function(a,b,c){b=this.i.transaction(cf(b),0==a?"readonly":"readwrite");return new Xe(this.c,b,a,this.Bd,c)};
function cf(a){var b=B();a.forEach(function(a){b.add(a.getName());a.Bb()&&(a.Ca().forEach(function(a){b.add(a.j())}),b.add(bf(a)))});return C(b)}
m.ke=function(a){function b(){if(0==d.length)return v();var a=d.shift();return c(a).then(b)}function c(b){return new u(function(c,d){var l;try{l=(a||e.transaction([b])).objectStore(b).openCursor(null,"prev")}catch(ba){d(ba);return}l.onsuccess=function(a){(a=a.target.result)&&(f=Math.max(f,h(a)));c(f)};l.onerror=function(){c(f)}})}var d=this.g.oa().map(function(a){return a.getName()}),e=this.i,f=0,h=function(a){return this.Bd?(a=Cc(a.value),Object.keys(a.l).reduce(function(a,b){return Math.max(a,b)},
0)):a.key}.bind(this);return new u(function(a){b().then(function(){a(f)})})};m.close=function(){this.i.close()};m.wc=function(){throw new D(511);};m.subscribe=aa();m.Cc=aa();function df(a,b,c){jc.call(this,b,c);this.Y=a;0==b&&this.O.resolve()}r(df,jc);df.prototype.H=function(a){return this.Y.wc(a)};df.prototype.pc=function(){this.O.resolve();return this.O.ha};function ef(a){this.g=a;this.L=x()}m=ef.prototype;m.Da=function(){this.g.oa().forEach(this.cg,this);return v()};m.wc=function(a){var b=this.L.get(a)||null;if(null===b)throw new D(101,a);return b};m.Db=function(a,b,c){return new df(this,a,c)};function ff(a,b){if(!a.L.has(b)){var c=new Ge;a.L.set(b,c)}}m.cg=function(a){ff(this,a.getName());a.Bb()&&(a.Ca().forEach(function(a){ff(this,a.j())},this),ff(this,bf(a)))};m.close=aa();m.subscribe=aa();m.Cc=aa();function gf(a){ef.call(this,a);this.kd=null}r(gf,ef);gf.prototype.subscribe=function(a){null===this.kd&&(this.kd=a)};gf.prototype.Cc=function(a){null===this.kd||this.kd(a)};function hf(a,b,c){this.ja=a;this.w='"'+b+'"';this.Eb=c}hf.prototype.get=function(a){var b=this.Eb;return jf(this.ja,"SELECT id, value FROM "+this.w+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[],function(a){for(var c=a.rows.length,e=Array(c),f=0;f<c;++f)e[f]=b({id:a.rows.item(f).id,value:JSON.parse(a.rows.item(f).value)});return e})};
hf.prototype.put=function(a){if(0==a.length)return v();var b="INSERT OR REPLACE INTO "+this.w+"(id, value) VALUES (?, ?)";a.forEach(function(a){jf(this.ja,b,[a.id(),JSON.stringify(a.l)])},this);return v()};hf.prototype.remove=function(a){jf(this.ja,"DELETE FROM "+this.w+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[]);return v()};function kf(a,b,c){jc.call(this,b,c);this.i=a;this.L=x();this.Id=[]}r(kf,jc);function mf(a){return a.replace(".","__d__").replace("#","__s__")}kf.prototype.H=function(a,b){var c=this.L.get(a)||null;null===c&&(c=new hf(this,mf(a),b),this.L.set(a,c));return c};function jf(a,b,c,d){var e=w();a.Id.push({Jg:b,zg:c,transform:d,O:e});return e.ha}
kf.prototype.pc=function(){var a=null,b=this.O.reject.bind(this.O),c=function(a,b){this.O.reject(b)}.bind(this),d=[],e=function(b,h){if(null!==a){var f=h;null!=a.transform&&null!=h&&(f=a.transform(h));d.push(f);a.O.resolve(f)}0<this.Id.length?(a=h=this.Id.shift(),b.executeSql(h.Jg,h.zg,e,c)):this.O.resolve(d)}.bind(this);0==this.td?this.i.readTransaction(e,b):this.i.transaction(e,b);return this.O.ha};function O(a,b,c){this.i=c;this.c=a;this.Yb=b}q("lf.backstore.WebSqlRawBackStore",O);O.prototype.Zc=g("i");O.prototype.getRawDBInstance=O.prototype.Zc;O.prototype.$c=function(){throw new D(356);};O.prototype.getRawTransaction=O.prototype.$c;function nf(a){return new kf(a.i,1,new kd(a.c,B()))}O.prototype.qc=function(a){var b=nf(this);jf(b,"DROP TABLE "+a,[]);return b.ka()};O.prototype.dropTable=O.prototype.qc;
O.prototype.cc=function(a){var b=nf(this);jf(b,"SELECT id, value FROM "+a,[]);return b.ka().then(function(a){for(var b=a[0].rows.length,c=Array(b),f=0;f<b;++f)c[f]={id:a[0].rows.item(f).id,value:JSON.parse(a[0].rows.item(f).value)};return v(c)})};function of(a,b,c){var d=nf(a),e="UPDATE "+b+" SET value=? WHERE id=?";return a.cc(b).then(function(a){a.forEach(function(a){a=c(a);jf(d,e,[JSON.stringify(a.value),a.id])});return d.ka()})}
O.prototype.nc=function(a,b,c){var d=Re(c);return of(this,a,function(a){a.value[b]=d;return a})};O.prototype.addTableColumn=O.prototype.nc;O.prototype.rc=function(a,b){return of(this,a,function(a){delete a.value[b];return a})};O.prototype.dropTableColumn=O.prototype.rc;O.prototype.Hc=function(a,b,c){return of(this,a,function(a){a.value[c]=a.value[b];delete a.value[b];return a})};O.prototype.renameTableColumn=O.prototype.Hc;O.prototype.vb=function(a){var b={},c;for(c in a)b[c]=Re(a[c]);return gc(b)};
O.prototype.createRow=O.prototype.vb;O.prototype.yc=g("Yb");O.prototype.getVersion=O.prototype.yc;function pf(a){jf(a,'SELECT tbl_name FROM sqlite_master WHERE type="table"',[],function(a){for(var b=Array(a.rows.length),d=0;d<b.length;++d)b[d]=a.rows.item(d).tbl_name;return b})}
O.prototype.dump=function(){var a=w(),b=nf(this);pf(b);var c={};b.ka().then(function(b){b=b[0].filter(function(a){return"__lf_ver"!=a&&"__WebKitDatabaseInfoTable__"!=a}).map(function(a){return this.cc(a).then(function(b){c[a]=b})},this);db(b).then(function(){a.resolve(c)})}.bind(this));return a.ha};O.prototype.dump=O.prototype.dump;function qf(a,b,c){this.c=a;this.g=b;this.Ig=c||1}m=qf.prototype;m.Da=function(a){if(null==window.openDatabase)throw new D(353);var b=a||function(){return v()};return new u(function(a,d){var c=window.openDatabase(this.g.name(),"",this.g.name(),this.Ig);if(null!=c)this.i=c,rf(this,b).then(function(){this.ke().then(a,d)}.bind(this),function(a){if(a instanceof D)throw a;throw new D(354,a.message);});else throw new D(354);},this)};
function rf(a,b){var c=w(),d=new kf(a.i,1,new kd(a.c,B()));jf(d,"CREATE TABLE IF NOT EXISTS __lf_ver(id INTEGER PRIMARY KEY, v INTEGER)",[]);jf(d,"SELECT v FROM __lf_ver WHERE id = 0",[]);d.ka().then(function(a){var d=0;a[1].rows.length&&(d=a[1].rows.item(0).v);d<this.g.version()?this.be(b,d).then(c.resolve.bind(c)):d>this.g.version()?c.reject(new D(108)):c.resolve()}.bind(a),c.reject.bind(c));return c.ha}m.Db=function(a,b,c){if(null!=this.i)return new kf(this.i,a,c);throw new D(2);};m.close=aa();
m.wc=function(){throw new D(512);};m.subscribe=function(){throw new D(355);};m.Cc=function(){throw new D(355);};m.be=function(a,b){return sf(this).then(function(){return a(new O(this.c,b,this.i))}.bind(this))};
function sf(a){var b=a.g.oa(),c=new kf(a.i,1,new kd(a.c,B())),d=new kf(a.i,1,new kd(a.c,B()));jf(c,"INSERT OR REPLACE INTO __lf_ver VALUES (0, ?)",[a.g.version()]);pf(c);return c.ka().then(function(a){var c=a[1];c.filter(function(a){return-1!=a.indexOf("__d__")}).forEach(function(a){jf(d,"DROP TABLE "+('"'+a+'"'),[])});var e=[],l=[],p=[];b.map(function(a){-1==c.indexOf(a.getName())&&e.push(a.getName());a.Bb&&(a.Ca().forEach(function(a){a=mf(a.j());e.push(a);l.push(a)}),a=mf(bf(a)),e.push(a),p.push(a))});
e.forEach(function(a){jf(d,"CREATE TABLE "+('"'+a+'"')+"(id INTEGER PRIMARY KEY, value TEXT)",[])});return d.ka()})}m.ke=function(){var a=0,b=w(),c=function(b){var c=new kf(this.i,0);jf(c,"SELECT MAX(id) FROM "+('"'+b+'"'),[]);return c.ka().then(function(b){b=b[0].rows.item(0)["MAX(id)"];a=Math.max(b,a)})}.bind(this),d=this.g.oa().map(function(a){return c(a.getName())});db(d).then(function(){ec=Math.max(ec,a+1);b.resolve()},function(a){b.reject(a)});return b.ha};function tf(a){this.$=x();this.Xb=x();a.oa().forEach(function(a){this.Xb.set(a.getName(),B())},this)}m=tf.prototype;m.set=function(a,b){this.$.set(b.id(),b);this.Xb.get(a).add(b.id())};m.Ub=function(a,b){var c=this.Xb.get(a);b.forEach(function(a){this.$.set(a.id(),a);c.add(a.id())},this)};m.get=function(a){return this.$.get(a)||null};function uf(a,b){return b.map(function(a){return this.get(a)},a)}
m.Sa=function(a,b,c){var d=[],e=Math.min(b,c),f=Math.max(b,c);a=this.Xb.get(a);if(a.size<f-e)a.forEach(function(a){a>=e&&a<=f&&(a=this.$.get(a),d.push(a))},this);else for(b=e;b<=f;++b)a.has(b)&&(c=this.$.get(b),d.push(c));return d};m.remove=function(a,b){this.$.delete(b);this.Xb.get(a).delete(b)};m.Sg=function(a){return null!=a?this.Xb.get(a).size:this.$.size};m.clear=function(){this.$.clear();this.Xb.clear()};function vf(a,b,c){var d=0,e=a.length;for(c=c||wf;d<e;){var f=d+e>>1;0>c(a[f],b)?d=f+1:e=f}return d==e&&a[d]==b?d:~d}function wf(a,b){return a-b}function xf(a,b,c){c=vf(a,b,c);return 0>c?(a.splice(-(c+1),0,b),!0):!1};function yf(a,b,c,d){a=b?a.reverse():a;if(null==c&&null==d)return a;c=Math.min(n(c)?c:a.length,a.length);if(0==c)return[];d=Math.min(d||0,a.length);return a.slice(d,d+c)};function zf(){this.ia=0;this.Bc=null}zf.prototype.add=function(a,b){this.ia+=b;this.Bc=null===this.Bc?a:a>this.Bc?a:this.Bc};zf.prototype.remove=function(a,b){this.ia-=b};zf.prototype.clear=function(){this.ia=0};function Af(a,b){a.clear();b.forEach(function(a){this.ia+=a.ia},a)};function Bf(a,b,c,d){this.w=a;this.Z=b;this.tf=c;this.ya=new zf;if(d){a=511;a*=a*a;if(d.length>=a)throw new D(6,a);d=Cf(this,d);this.ta=d=Df(d)}else this.clear()}var Ef=[];m=Bf.prototype;m.getName=g("w");m.toString=function(){return this.ta.toString()};m.add=function(a,b){this.ta=this.ta.zb(a,b)};m.set=function(a,b){this.ta=this.ta.zb(a,b,!0)};m.remove=function(a,b){this.ta=this.ta.remove(a,b)};m.get=function(a){return this.ta.get(a)};
m.Vc=function(a){if(null==a)return this.X().ia;if(a instanceof E){if(qd(a))return this.X().ia;if(ud(a))return this.get(a.from).length}return this.Sa([a]).length};m.X=g("ya");m.Qd=function(a,b,c,d){c=Array(a);this.ta.fill({offset:b?this.ya.ia-a-d:d,count:a,ne:0},c);return b?c.reverse():c};
m.Sa=function(a,b,c,d){var e=Ff(this.ta).a[0];if(!n(e)||0==c)return Ef;b=b||!1;c=null!=c?Math.min(c,this.ya.ia):this.ya.ia;d=d||0;var f=Math.min(Math.max(this.ya.ia-d,0),c);if(0==f)return Ef;if(!n(a)||1==a.length&&a[0]instanceof E&&qd(a[0]))return this.Qd(f,b,c,d);a=this.Z.pf(a);var h=Array(b?this.ya.ia:f),l={count:0,W:h.length,reverse:b,K:d},p=1<this.gb().Ud();a.forEach(function(a){for(var b=this.Z.pd(a),b=this.Z.Sd(a)?e:b[0],b=this.ta.Uf(b),c=0;null!=b&&l.count<l.W;){if(p){for(var d=b,f=a,L=l,yb=
h,Oc=d.o.gb(),ee=-1,Ka=0;Ka<d.a.length;++Ka)if(Oc.Ab(d.a[Ka],f)){ee=Ka;break}if(-1!=ee)for(Ka=ee;Ka<d.a.length&&L.count<L.W;++Ka)Oc.Ab(d.a[Ka],f)&&Gf(d,L,yb,Ka)}else b.Sa(a,l,h);0!=l.K||b.ed(a)?c=0:c++;b=2==c?null:b.next()}},this);h.length>l.count&&h.splice(l.count,h.length-l.count);return b?yf(h,b,c,d):h};m.clear=function(){this.ta=Hf(this);this.ya.clear()};m.hb=function(a){return this.ta.hb(a)};m.min=function(){return this.Fb(this.Z.min.bind(this.Z))};m.max=function(){return this.Fb(this.Z.max.bind(this.Z))};
function If(a,b,c){if(!a.Z.Jd(b.a[c]))if(1<b.a[c].length){if(null===b.a[c][0])return null}else return null;return[b.a[c],a.tf?[b.A[c]]:b.A[c]]}m.Fb=function(a){var b;a:{b=Ff(this.ta);var c=0;do if(c>=b.a.length)b=b.xa,c=0;else{var d=If(this,b,c);if(null!==d){b=d;break a}c++}while(null!==b);b=null}a:{c=Jf(this.ta);d=c.a.length-1;do if(0>d)c=c.ob,d=0;else{var e=If(this,c,d);if(null!==e){c=e;break a}d--}while(null!==c);c=null}return null===b||null===c?null:1==a(b[0],c[0])?b:c};m.La=g("tf");m.gb=g("Z");
m.Oa=function(a,b){return null!=a?0==this.Z.compare(a,b):!1};m.Ia=function(){for(var a=[],b=Ff(this.ta);b;)a.push(new dc(b.ra,[b.a,b.A])),b=b.xa;return a};function Kf(a,b,c,d){a=new Bf(b,a,c);d=Lf(d,a);a.ta=d;return a}function Mf(a,b){this.ra=a;this.o=b;this.kb=0;this.xa=this.ob=this.C=null;this.a=[];this.A=[];this.h=[];this.Uf=1==b.gb().Ud()?this.Ke:this.Je}function Hf(a){return new Mf(ec++,a)}function P(a){return 0==a.kb}m=Mf.prototype;m.next=g("xa");
function Nf(a){function b(a){return null!=a?a.ra.toString():"_"}var c=a.ra+"["+a.a.join("|")+"]",d=a.h.map(function(a){return a.ra}).join("|"),e=a.A.join("/"),f=b(a.ob)+"{",f=P(a)?f+e:f+d,f=f+"}"+b(a.C);a.xa&&(a=Nf(a.xa),c=c+"  "+a[0],f=f+"  "+a[1]);return[c,f]}m.toString=function(){var a="",b=Nf(this),a=a+(b[0]+"\n"+b[1]+"\n");this.h.length&&(a+=this.h[0].toString());return a};function Ff(a){return P(a)?a:Ff(a.h[0])}function Jf(a){return P(a)?a:Jf(a.h[a.h.length-1])}
function Of(a,b){b&&(b.ob=a);a&&(a.xa=b)}function Cf(a,b){for(var c=b.length,d=0,e=a=Hf(a);0<c;){var f=768<=c?511:257<=c&&511>=c?c:257,h=b.slice(d,d+f);a.a=h.map(function(a){return a.key});a.A=h.map(function(a){return a.value});d+=f;c-=f;0<c&&(f=Hf(a.o),Of(a,f),a=f)}return e}function Pf(a){var b=a[0],c=Hf(b.o);c.kb=b.kb+1;c.h=a;for(b=0;b<a.length;++b)a[b].C=c,0<b&&c.a.push(a[b].a[0]);return c}
function Df(a){var b=a,c=[];do c.push(b),b=b.xa;while(b);if(512>=c.length)b=Pf(c);else{var d=c.length,e=0,b=Hf(a.o);for(b.kb=a.kb+2;0<d;){a=768<=d?511:257<=d&&511>=d?d:257;var f=c.slice(e,e+a),h=Pf(f);h.C=b;b.h.length&&(b.a.push(f[0].a[0]),Of(b.h[b.h.length-1],h));b.h.push(h);e+=a;d-=a}}return b}m.get=function(a){var b=Qf(this,a);if(P(this)){var c=Ef;this.o.Oa(this.a[b],a)&&(c=c.concat(this.A[b]));return c}b=this.o.Oa(this.a[b],a)?b+1:b;return this.h[b].get(a)};
m.hb=function(a){var b=Qf(this,a);return this.o.Oa(this.a[b],a)?!0:P(this)?!1:this.h[b].hb(a)};m.remove=function(a,b){Rf(this,a,-1,b);return null===this.C?(a=this,1==this.h.length&&(a=this.h[0],a.C=null),a):this};function Sf(a){return P(a)?a.a[0]:Sf(a.h[0])}function Tf(a){a.a=[];for(var b=1;b<a.h.length;++b)a.a.push(Sf(a.h[b]))}
function Rf(a,b,c,d){var e=Qf(a,b),f=P(a);if(!f){var h=a.o.Oa(a.a[e],b)?e+1:e;if(Rf(a.h[h],b,h,d))Tf(a);else return!1}else if(!a.o.Oa(a.a[e],b))return!1;if(a.a.length>e&&a.o.Oa(a.a[e],b)){if(n(d)&&!a.o.La()&&f&&(h=a.A[e],d=vf(h,d,void 0),0>d?d=!1:(h.splice(d,1),d=!0),d&&a.o.X().remove(b,1),a.A[e].length))return!1;a.a.splice(e,1);f&&(f=a.o.La()?1:a.A[e].length,a.A.splice(e,1),a.o.X().remove(b,f))}if(256>a.a.length&&null!==a.C){a:{if(a.xa&&256<a.xa.a.length)b=a.xa,e=d=0,f=a.a.length+1;else if(a.ob&&
256<a.ob.a.length)b=a.ob,d=a.ob.a.length-1,e=P(a)?d:d+1,f=0;else{b=!1;break a}a.a.splice(f,0,b.a[d]);b.a.splice(d,1);d=P(a)?a.A:a.h;P(a)?h=b.A:(h=b.h,h[e].C=a);d.splice(f,0,h[e]);h.splice(e,1);P(b)||(Tf(b),Tf(a));b=!0}b||Uf(a,c)}return!0}
function Uf(a,b){var c,d,e;a.xa&&511>a.xa.a.length?(c=a.xa,e=d=0):a.ob&&(c=a.ob,d=c.a.length,e=P(c)?c.A.length:c.h.length);d=[d,0].concat(a.a);Array.prototype.splice.apply(c.a,d);d=null;P(a)?d=a.A:(d=a.h,d.forEach(function(a){a.C=c}));d=[e,0].concat(d);Array.prototype.splice.apply(P(c)?c.A:c.h,d);Of(a.ob,a.xa);P(c)||Tf(c);-1!=b&&(a.C.a.splice(b,1),a.C.h.splice(b,1))}
m.zb=function(a,b,c){var d=Qf(this,a);if(P(this)){if(this.o.Oa(this.a[d],a)){if(c)this.o.X().remove(a,this.o.La()?1:this.A[d].length),this.A[d]=this.o.La()?b:[b];else{if(this.o.La())throw new D(201,this.o.getName(),JSON.stringify(a));if(!xf(this.A[d],b))throw new D(109);}this.o.X().add(a,1);return this}this.a.splice(d,0,a);this.A.splice(d,0,this.o.La()?b:[b]);this.o.X().add(a,1);512==this.a.length?(d=Hf(this.o),a=Hf(this.o),a.kb=1,a.a=[this.a[256]],a.h=[this,d],a.C=this.C,this.C=a,d.a=this.a.splice(256),
d.A=this.A.splice(256),d.C=a,Of(d,this.xa),Of(this,d),d=a):d=this;return d}d=this.o.Oa(this.a[d],a)?d+1:d;a=this.h[d].zb(a,b,c);P(a)||1!=a.a.length||(this.a.splice(d,0,a.a[0]),a.h[1].C=this,a.h[0].C=this,this.h.splice(d,1,a.h[1]),this.h.splice(d,0,a.h[0]));return 512==this.a.length?Wf(this):this};
function Wf(a){var b=Hf(a.o),c=Hf(a.o);b.C=a.C;b.kb=a.kb+1;b.a=[a.a[256]];b.h=[a,c];a.a.splice(256,1);c.C=b;c.kb=a.kb;c.a=a.a.splice(256);c.h=a.h.splice(257);c.h.forEach(function(a){a.C=c});a.C=b;Of(c,a.xa);Of(a,c);return b}function Qf(a,b){for(var c=0,d=a.a.length,e=a.o.gb();c<d;){var f=c+d>>1;-1==e.compare(a.a[f],b)?c=f+1:d=f}return c}m.Ke=function(a){if(!P(this)){var b=Qf(this,a);this.o.Oa(this.a[b],a)&&b++;return this.h[b].Ke(a)}return this};
m.Je=function(a){if(!P(this)){var b=Qf(this,a);this.o.Oa(this.a[b],a)&&(a.some(function(a){return a==F})||b++);return this.h[b].Je(a)}return this};
m.Sa=function(a,b,c){function d(a){return a[0]?a[1]?0:1:-1}var e=this.o.gb(),f=0,h=this.a.length-1,l=this.a,p=d(e.ub(l[f],a)),L=d(e.ub(l[h],a));if(1!=p&&(-1!=p||-1!=L)){var qa=function(a,b){b=a+b>>1;return b==a?b+1:b},ba=function(b,c,f){if(b>=c)return 0==f?c:-1;var h=d(e.ub(l[b],a));if(0==h)return b;if(1==h)return-1;h=qa(b,c);if(h==c)return 0==f?c:-1;var p=d(e.ub(l[h],a));return 0==p?ba(b,h,p):-1==p?ba(h+1,c,f):ba(b+1,h,p)},xb=function(b,c){if(b>=c)return b;var f=d(e.ub(l[c],a));if(0==f)return c;
if(-1==f)return b;f=qa(b,c);if(f==c)return b;var h=d(e.ub(l[f],a));return 0==h?xb(f,c):1==h?xb(b,f-1):-1};0!=p&&(f=ba(f+1,h,L));-1!=f&&(h=xb(f,h),-1!=h&&h>=f&&Xf(this,b,c,f,h+1))}};function Gf(a,b,c,d){if(a.o.La())!b.reverse&&b.K?b.K--:c[b.count++]=a.A[d];else for(var e=0;e<a.A[d].length&&b.count<c.length;++e)!b.reverse&&b.K?b.K--:c[b.count++]=a.A[d][e]}function Xf(a,b,c,d,e){for(;d<e&&(b.reverse||!(b.count>=b.W));++d)Gf(a,b,c,d)}
m.fill=function(a,b){if(P(this))for(var c=0;c<this.A.length&&0<a.count;++c)if(0<a.offset){if(a.offset-=this.o.La()?1:this.A[c].length,0>a.offset)for(var d=this.A[c].length+a.offset;d<this.A[c].length&&0<a.count;++d)b[a.ne++]=this.A[c][d],a.count--}else if(this.o.La())b[a.ne++]=this.A[c],a.count--;else for(d=0;d<this.A[c].length&&0<a.count;++d)b[a.ne++]=this.A[c][d],a.count--;else for(c=0;c<this.h.length&&0<a.count;++c)this.h[c].fill(a,b)};
function Lf(a,b){var c=b.X();a=a.map(function(a){var d=new Mf(a.id(),b);d.a=a.l[0];d.A=a.l[1];d.a.forEach(function(a,e){c.add(a,b.La()?1:d.A[e].length)});return d});for(var d=0;d<a.length-1;++d)Of(a[d],a[d+1]);return 1<a.length?Df(a[0]):a[0]}m.ed=function(a){return this.o.gb().ed(this.a[0],a)};function Yf(a){this.Tc=0==a?Zf:$f;this.Xd=0==a?function(a){return null!=a?a.reverse():null}:function(a){return a||null};this.ce=0==a?ag:bg}function $f(a,b){return a>b?1:a<b?-1:0}function Zf(a,b){return $f(b,a)}function bg(a,b){return vd(a,b)}function ag(a,b){return vd(b,a)}m=Yf.prototype;m.ub=function(a,b){b=this.Xd(b);var c=[b.from==F,b.m==F];if(!c[0]){var d=this.Tc(a,b.from);c[0]=b.ea?1==d:-1!=d}c[1]||(d=this.Tc(a,b.m),c[1]=b.na?-1==d:1!=d);return c};m.compare=function(a,b){return this.Tc(a,b)};
m.min=function(a,b){return a<b?1:a==b?0:-1};m.max=function(a,b){return a>b?1:a==b?0:-1};m.Ab=function(a,b){a=this.ub(a,b);return a[0]&&a[1]};m.ed=function(a,b){return this.Ab(a,b)};m.pf=function(a){return a.filter(function(a){return null!==a}).sort(function(a,c){return this.ce(a,c)}.bind(this))};m.Sd=function(a){return this.Xd(a).from==F};m.pd=function(a){a=this.Xd(a);return[a.from,a.m]};m.Jd=function(a){return null!==a};m.Ud=k(1);
m.toString=function(){return this.compare==Zf?"SimpleComparator_DESC":"SimpleComparator_ASC"};function cg(a){Yf.call(this,a);this.Tc=0==a?dg:eg}r(cg,Yf);function eg(a,b){return null===a?null===b?0:-1:null===b?1:$f(a,b)}function dg(a,b){return eg(b,a)}cg.prototype.Ab=function(a,b){return null===a?qd(b):cg.eb.Ab.call(this,a,b)};cg.prototype.Fb=function(a,b){return null===a?null===b?0:-1:null===b?1:null};cg.prototype.min=function(a,b){var c=this.Fb(a,b);null===c&&(c=cg.eb.min.call(this,a,b));return c};
cg.prototype.max=function(a,b){var c=this.Fb(a,b);null===c&&(c=cg.eb.max.call(this,a,b));return c};function fg(a){this.pa=a.map(function(a){return new Yf(a)})}function gg(a,b,c,d){for(var e=0,f=0;f<a.pa.length&&0==e;++f)e=d(a.pa[f],b[f],c[f]);return e}m=fg.prototype;m.compare=function(a,b){return gg(this,a,b,function(a,b,e){return b==F||e==F?0:a.compare(b,e)})};m.min=function(a,b){return gg(this,a,b,function(a,b,e){return a.min(b,e)})};m.max=function(a,b){return gg(this,a,b,function(a,b,e){return a.max(b,e)})};
m.ub=function(a,b){for(var c=[!0,!0],d=0;d<this.pa.length&&(c[0]||c[1]);++d){var e=this.pa[d].ub(a[d],b[d]);c[0]=c[0]&&e[0];c[1]=c[1]&&e[1]}return c};m.Ab=function(a,b){for(var c=!0,d=0;d<this.pa.length&&c;++d)c=this.pa[d].Ab(a[d],b[d]);return c};m.ed=function(a,b){return this.pa[0].Ab(a[0],b[0])};
m.pf=function(a){var b=a.filter(function(a){return a.every(ga)});a=Array(this.pa.length);for(var c=0;c<a.length;c++)a[c]=b.map(function(a){return a[c]});a.forEach(function(a,b){a.sort(function(a,c){return this.pa[b].ce(a,c)}.bind(this))},this);b=Array(b.length);for(c=0;c<b.length;c++)b[c]=a.map(function(a){return a[c]});return b.sort(function(a,b){for(var c=0,d=0;d<this.pa.length&&0==c;++d)c=this.pa[d].ce(a[d],b[d]);return c}.bind(this))};m.Sd=function(a){return this.pa[0].Sd(a[0])};
m.pd=function(a){var b=a.map(function(a,b){return this.pa[b].pd(a)[0]},this);a=a.map(function(a,b){return this.pa[b].pd(a)[1]},this);return[b,a]};m.Jd=function(a){return a.every(function(a,c){return this.pa[c].Jd(a)},this)};m.Ud=function(){return this.pa.length};function hg(a){fg.call(this,a);this.pa=a.map(function(a){return new cg(a)})}r(hg,fg);function ig(a){if(1==a.f.length)return new Yf(a.f[0].order);var b=a.f.map(function(a){return a.order});return a.f.some(function(a){return a.ba.fc()})?new hg(b):new fg(b)};function jg(a){this.fa=a;this.mb=B();this.Kc=new zf;this.ya=new zf}m=jg.prototype;m.getName=function(){return this.fa.getName()};m.add=function(a,b){null===a?(this.mb.add(b),this.Kc.add(a,1)):this.fa.add(a,b)};m.set=function(a,b){null===a?(this.mb.clear(),this.Kc.clear(),this.add(a,b)):this.fa.set(a,b)};m.remove=function(a,b){null===a?b?(this.mb.delete(b),this.Kc.remove(a,1)):(this.mb.clear(),this.Kc.clear()):this.fa.remove(a,b)};m.get=function(a){return null===a?C(this.mb):this.fa.get(a)};m.Vc=function(a){return this.fa.Vc(a)};
m.X=function(){Af(this.ya,[this.fa.X(),this.Kc]);return this.ya};m.Sa=function(a,b,c,d){b=this.fa.Sa(a,b,c,d);return null!=a?b:b.concat(C(this.mb))};m.clear=function(){this.mb.clear();this.fa.clear()};m.hb=function(a){return null===a?0!=this.mb.size:this.fa.hb(a)};m.min=function(){return this.fa.min()};m.max=function(){return this.fa.max()};m.Ia=function(){return[new dc(-2,C(this.mb))].concat(this.fa.Ia())};m.gb=function(){return this.fa.gb()};
function kg(a,b){for(var c=-1,d=0;d<b.length;++d)if(-2==b[d].id()){c=d;break}if(-1==c)throw new D(102);d=b[c].l;b=b.slice(0);b.splice(c,1);a=a(b);var e=new jg(a);d.forEach(function(a){e.mb.add(a)});return e}m.La=function(){return this.fa.La()};function lg(a){this.w=a;this.qb=B();this.Z=new Yf(1)}m=lg.prototype;m.getName=g("w");m.add=function(a){if("number"!=typeof a)throw new D(103);this.qb.add(a)};m.set=function(a,b){this.add(a,b)};m.remove=function(a){this.qb.delete(a)};m.get=function(a){return this.hb(a)?[a]:[]};m.min=function(){return this.Fb(this.Z.min.bind(this.Z))};m.max=function(){return this.Fb(this.Z.max.bind(this.Z))};
m.Fb=function(a){if(0==this.qb.size)return null;var b=C(this.qb).reduce(function(b,d){return null===b||1==a(d,b)?d:b},null);return[b,[b]]};m.Vc=function(){return this.qb.size};m.Sa=function(a,b,c,d){var e=a||[td()];a=C(this.qb).filter(function(a){return e.some(function(b){return this.Z.Ab(a,b)},this)},this);return yf(a,b,c,d)};m.clear=function(){this.qb.clear()};m.hb=function(a){return this.qb.has(a)};m.Ia=function(){return[new dc(0,C(this.qb))]};m.gb=g("Z");
function mg(a,b){var c=new lg(a);b[0].l.forEach(function(a){c.add(a,a)});return c}m.La=k(!0);m.X=function(){var a=new zf;a.ia=this.qb.size;return a};function ng(a){this.Na=a.b(rc);this.B=a.b(tc);this.U=a.b(sc)}ng.prototype.Da=function(a){var b=a.oa(),c=function(){if(0==b.length)return v();var a=b.shift();return(a.Bb()?og(this,a):pg(this,a)).then(c)}.bind(this);return c()};function pg(a,b){var c=a.Na.Db(0,[b]);a=c.H(b.getName(),b.ib.bind(b),0).get([]).then(function(a){this.U.Ub(b.getName(),a);qg(this,b,a)}.bind(a));c.ka();return a}
function qg(a,b,c){var d=a.B.jc.get(b.getName())||[];c.forEach(function(a){d.forEach(function(b){var c=a.lb(b.getName());b.add(c,a.id())})})}function og(a,b){var c=a.Na.Db(0,[b]),d=c.H(b.getName(),b.ib,0).get([]).then(function(a){this.U.Ub(b.getName(),a)}.bind(a));a=b.Ca().map(function(a){return rg(this,a,c)},a).concat(sg(a,b,c));c.ka();return db(a.concat(d))}
function rg(a,b,c){c=c.H(b.j(),fc,1);var d=ig(b);return c.get([]).then(function(a){if(0<a.length){if(tg(b)){var c=Kf.bind(void 0,d,b.j(),b.zc);a=kg(c,a)}else a=Kf(d,b.j(),b.zc,a);this.B.set(b.kc,a)}}.bind(a))}function sg(a,b,c){return c.H(bf(b),fc,1).get([]).then(function(a){0<a.length&&(a=mg(bf(b),a),this.B.set(b.getName(),a))}.bind(a))};function ug(){this.Y=x();this.jc=x()}ug.prototype.Da=function(a){a.oa().forEach(function(a){var b=[];this.jc.set(a.getName(),b);var d=bf(a);if(null===this.get(d)){var e=new lg(d);b.push(e);this.Y.set(d,e)}a.Ca().forEach(function(a){var c;c=ig(a);c=new Bf(a.j(),c,a.zc);c=tg(a)&&1==a.f.length?new jg(c):c;b.push(c);this.Y.set(a.j(),c)},this)},this);return v()};ug.prototype.get=function(a){return this.Y.get(a)||null};
ug.prototype.set=function(a,b){var c=this.jc.get(a)||null;null===c&&(c=[],this.jc.set(a,c));a=null;for(var d=0;d<c.length;d++)if(c[d].getName()==b.getName()){a=d;break}null!==a&&0<c.length?c.splice(a,1,b):c.push(b);this.Y.set(b.getName(),b)};function vg(a,b){var c=[],d=null,e=null;ce(a,function(a){var f=b(a);null==a.getParent()?e=f:K(d,f);var l=a.getParent();null!==l&&J(l).length==J(d).length&&(l=c.indexOf(d),-1!=l&&c.splice(l,1));1<J(a).length&&c.push(f);d=null===a.h?c[c.length-1]:f});return e}function wg(a){return xg(a,function(a){return null===a.h})}
function yg(a){var b=a.getParent(),c=0;null!==b&&(c=J(b).indexOf(a),b.removeChild(a));var d=J(a).slice();d.forEach(function(d,f){a.removeChild(d);null===b||$d(b,d,c+f)});return{parent:b,children:d}}function zg(a,b){J(a).slice().forEach(function(c){a.removeChild(c);K(b,c)});K(a,b)}function Ag(a){var b=Zd(a,0);yg(a);zg(b,a);return b}
function Bg(a,b,c){var d=Zd(a,0),e=J(d).slice();if(!e.some(function(a){return b(a)}))return a;yg(a);e.forEach(function(e,h){if(b(e)){var f=c(a);ae(d,h);K(f,e);$d(d,f,h)}});return d}function Cg(a,b,c,d){var e=a.getParent();null!==e&&(a=J(e).indexOf(a),ae(e,a),$d(e,c,a));J(b).slice().forEach(function(a){b.removeChild(a);K(d,a)});return c}function xg(a,b,c){function d(a){b(a)&&e.push(a);null!=c&&c(a)||J(a).forEach(d)}var e=[];d(a);return e}
function Dg(a,b){var c=b||function(a){return a.toString()+"\n"},d="";ce(a,function(a){for(var b=0;b<Yd(a);b++)d+="-";d+=c(a)});return d};function Eg(a){de.call(this);this.nb=a;this.Ta=!1}r(Eg,de);m=Eg.prototype;m.Lb=function(){return vg(this,function(a){if(a instanceof Eg){var b=new Eg(a.nb);b.Ta=a.Ta;a=a.V();b.ra=a;return b}return a.Lb()})};m.jb=function(a){var b=a||[];ce(this,function(a){a!=this&&a.jb(b)}.bind(this));a=B(b);return C(a)};m.s=function(a){var b=null!=a?a:B();ce(this,function(a){a!=this&&a.s(b)}.bind(this));return b};m.qd=function(a){this.Ta!=a&&(this.Ta=a,this.nb="and"==this.nb?"or":"and",J(this).forEach(function(b){return b.qd(a)}))};
m.eval=function(a){var b=J(this).map(function(b){return b.eval(a)});return Fg(this,b)};function Fg(a,b){return"and"==a.nb?Ed(b):Fd(b)}m.toString=function(){return"combined_pred_"+this.nb.toString()};m.qe=function(){if("or"==this.nb){var a=new xd;J(this).forEach(function(b){b=b.qe().yb();a.add(b)});return a}return new xd};m.fd=function(){return"or"==this.nb?Gg(this):!1};
function Gg(a){var b=null;return J(a).every(function(a){if(!(a instanceof ge&&a.fd()))return!1;null===b&&(b=a.I);return b.j()==a.I.j()})};function Hg(a,b,c){de.call(this);this.ga=a;this.ma=b;this.D=c;this.Yd=null;a=Vd();this.sc=Wd(a,this.ga.F(),this.D);this.kg=a.Ue.get(this.ga.F())||null}r(Hg,de);m=Hg.prototype;m.Lb=function(){var a=new Hg(this.ga,this.ma,this.D),b=this.V();a.ra=b;return a};m.jb=function(a){return null!=a?(a.push(this.ga),a.push(this.ma),a):[this.ga,this.ma]};m.s=function(a){a=null!=a?a:B();a.add(this.ga.H());a.add(this.ma.H());return a};
m.reverse=function(){var a=this.D;switch(this.D){case "gt":a="lt";break;case "lt":a="gt";break;case "gte":a="lte";break;case "lte":a="gte"}return new Hg(this.ma,this.ga,a)};m.eval=function(a){var b=a.entries.filter(function(a){var b=H(a,this.ga);a=H(a,this.ma);return this.sc(b,a)},this);return new G(b,a.s())};m.toString=function(){return"join_pred("+this.ga.j()+" "+this.D+" "+this.ma.j()+")"};
function Ig(a,b,c){var d;-1!=b.s().indexOf(Jd(a.ga.H()))?(d=b,b=c):d=c;if(d.entries.length>b.entries.length){a:{c=a.ga;a.ga=a.ma;a.ma=c;switch(a.D){case "gt":c="lt";break;case "lt":c="gt";break;case "gte":c="lte";break;case "lte":c="gte";break;default:break a}a.D=c;a.sc=Wd(Vd(),a.ga.F(),a.D)}return[b,d]}return[d,b]}function Jg(a){var b={};a.jb().forEach(function(a){b[a.getName()]=null});return b}
function Kg(a,b,c){null===a.Yd&&(a.Yd=Jg(a.ma.H()));var d=new Hd(new dc(-1,a.Yd),!1);return Ld(b,c,d,[Jd(a.ma.H())])}
function Lg(a,b,c,d){var e=[b,c];d||(e=Ig(a,b,c));b=e[0];c=e[1];var e=b,f=c,h=a.ga,l=a.ma;d&&(e=c,f=b,h=a.ma,l=a.ga);var p=new Tc,L=[];e.entries.forEach(function(a){var b=String(H(a,h));p.set(b,a)});var qa=e.s(),ba=f.s();f.entries.forEach(function(a){var b=H(a,l),c=String(b);null!==b&&p.has(c)?p.get(c).forEach(function(b){b=Ld(a,ba,b,qa);L.push(b)}):d&&L.push(Kg(this,a,ba))}.bind(a));a=b.s().concat(c.s());return new G(L,a)}
function Mg(a,b,c,d,e){function f(a,b){b=new Hd(b,1<qa.length);a=Ld(a,ba,b,qa);L.push(a)}var h=d.$f.H(),l=b,p=c;-1!=b.s().indexOf(Jd(h))&&(l=c,p=b);var L=[],qa=p.s(),ba=l.s();l.entries.forEach(function(a){var b=this.kg(H(a,d.sg)),b=d.index.get(b);0!=b.length&&(d.index.La()?f(a,e.get(b[0])):uf(e,b).forEach(f.bind(null,a)))},a);a=l.s().concat(p.s());return new G(L,a)};function Ng(a,b,c){return null===b?new ge(a,b,c):n(b.j)?new Hg(a,b,c):new ge(a,b,c)};var Og={};q("lf.schema.DataStoreType",Og);Og.INDEXED_DB=0;Og.MEMORY=1;Og.LOCAL_STORAGE=2;Og.FIREBASE=3;Og.WEB_SQL=4;Og.OBSERVABLE_STORE=5;function Pg(a,b,c,d){this.kc=a;this.name=b;this.zc=c;this.f=d}Pg.prototype.j=function(){return this.kc+"."+this.name};function tg(a){return a.f.some(function(a){return a.ba.fc()})}function Q(a,b,c,d){this.w=a;this.sa=c;this.J=b;this.md=d;this.Ja=null}q("lf.schema.Table",Q);Q.prototype.getName=g("w");Q.prototype.getName=Q.prototype.getName;
function Jd(a){return a.Ja||a.w}Q.prototype.oc=function(a){var b=new this.constructor(this.w);b.Ja=a;b.Eg=this.Eg;return b};Q.prototype.as=Q.prototype.oc;Q.prototype.createRow=Q.prototype.vb;Q.prototype.deserializeRow=Q.prototype.ib;Q.prototype.Ca=g("sa");Q.prototype.getIndices=Q.prototype.Ca;Q.prototype.jb=g("J");Q.prototype.getColumns=Q.prototype.jb;Q.prototype.getConstraint=Q.prototype.Ie;Q.prototype.Bb=g("md");Q.prototype.persistentIndex=Q.prototype.Bb;function bf(a){return a.w+".#"};function R(a,b){this.child=a;this.Jb=b;this.Ja=null}m=R.prototype;m.getName=function(){return this.Jb+"("+this.child.getName()+")"};m.j=function(){return this.Jb+"("+this.child.j()+")"};m.H=function(){return this.child.H()};m.toString=function(){return this.j()};m.F=function(){return this.child.F()};m.Ca=function(){return[]};m.Ba=k(null);m.fc=k(!1);m.oc=function(a){this.Ja=a;return this};R.prototype.as=R.prototype.oc;
function Qg(a){for(var b=[a];a instanceof R;)b.push(a.child),a=a.child;return b}function Rg(a){this.Ja=a||null;this.S=new Q("#UnknownTable",[],[],!1)}m=Rg.prototype;m.getName=k("*");m.j=function(){return this.getName()};m.toString=function(){return this.j()};m.H=g("S");m.F=k(4);m.Ca=function(){return[]};m.Ba=k(null);m.fc=k(!1);q("lf.fn.avg",function(a){return new R(a,"AVG")});function Sg(a){return new R(a||new Rg,"COUNT")}q("lf.fn.count",Sg);function Tg(a){return new R(a,"DISTINCT")}q("lf.fn.distinct",Tg);q("lf.fn.max",function(a){return new R(a,"MAX")});q("lf.fn.min",function(a){return new R(a,"MIN")});q("lf.fn.stddev",function(a){return new R(a,"STDDEV")});q("lf.fn.sum",function(a){return new R(a,"SUM")});q("lf.fn.geomean",function(a){return new R(a,"GEOMEAN")});function S(a,b){I.call(this);this.Qf=b}r(S,I);S.prototype.exec=function(a,b){switch(this.Qf){case 1:return Ug(this,a,b);case 0:return Vg(this,a,b);default:return Wg(this,a,b)}};S.prototype.toString=k("dummy_node");S.prototype.Lc=function(){return this.toString()};function Wg(a,b,c){return new u(function(a){a(this.ca([],b,c))}.bind(a))}function Ug(a,b,c){return Zd(a,0).exec(b,c).then(function(a){return this.ca(a,b,c)}.bind(a))}
function Vg(a,b,c){var d=J(a).map(function(a){return a.exec(b,c)});return db(d).then(function(a){var d=[];a.forEach(function(a){for(var b=0;b<a.length;++b)d.push(a[b])});return this.ca(d,b,c)}.bind(a))};function Xg(a){S.call(this,0,1);this.xe=a}r(Xg,S);Xg.prototype.toString=function(){return"aggregation("+this.xe.map(function(a){return a.j()}).toString()+")"};Xg.prototype.ca=function(a){a.forEach(function(a){Yg(new Zg(a,this.xe))},this);return a};function Zg(a,b){this.Ma=a;this.J=b}
function Yg(a){a.J.forEach(function(a){a=Qg(a).reverse();for(var b=1;b<a.length;b++){var d=a[b],e=Qg(d).slice(-1)[0],f=d.child instanceof R?Bd(this.Ma,d.child):this.Ma;if(null!==f.Xa&&f.Xa.has(d.j()))break;f=$g(d.Jb,f,e);e=this.Ma;null===e.Xa&&(e.Xa=x());e.Xa.set(d.j(),f)}},a)}
function $g(a,b,c){var d=null;switch(a){case "MIN":d=ah(b,c,function(a,b){return b<a?b:a});break;case "MAX":d=ah(b,c,function(a,b){return b>a?b:a});break;case "DISTINCT":d=bh(b,c);break;case "COUNT":d=ch(b,c);break;case "SUM":d=dh(b,c);break;case "AVG":a=ch(b,c);0<a&&(d=dh(b,c)/a);break;case "GEOMEAN":d=eh(b,c);break;default:d=fh(b,c)}return d}function ah(a,b,c){return a.entries.reduce(function(a,e){e=H(e,b);return null===e?a:null===a?e:c(a,e)},null)}
function ch(a,b){return b instanceof Rg?a.entries.length:a.entries.reduce(function(a,d){return a+(null===H(d,b)?0:1)},0)}function dh(a,b){return ah(a,b,function(a,b){return b+a})}function fh(a,b){var c=[];a.entries.forEach(function(a){a=H(a,b);null===a||c.push(a)});return 0==c.length?null:sb.apply(null,c)}function eh(a,b){var c=0;a=a.entries.reduce(function(a,e){e=H(e,b);if(0==e||null===e)return a;c++;return a+Math.log(e)},0);return 0==c?null:Math.pow(Math.E,a/c)}
function bh(a,b){var c=x();a.entries.forEach(function(a){var d=H(a,b);c.set(d,a)});return new G(y(c),a.s())};function gh(a,b){this.Ga=a;this.aa=b}gh.prototype.Za=g("Ga");gh.prototype.da=g("aa");function hh(){I.call(this)}r(hh,I);function ih(a,b){I.call(this);this.table=a;this.values=b}r(ih,hh);function jh(a,b){ih.call(this,a,b)}r(jh,ih);function kh(a){I.call(this);this.table=a}r(kh,hh);kh.prototype.toString=function(){return"delete("+this.table.getName()+")"};function lh(a){I.call(this);this.table=a}r(lh,hh);lh.prototype.toString=function(){return"update("+this.table.getName()+")"};
function mh(a){I.call(this);this.N=a}r(mh,hh);mh.prototype.toString=function(){return"select("+this.N.toString()+")"};function nh(a){I.call(this);this.table=a}r(nh,hh);nh.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Ja||(a+=" as "+this.table.Ja);return a+")"};function oh(){I.call(this)}r(oh,hh);oh.prototype.toString=k("cross_product");function ph(a,b){I.call(this);this.f=a;this.Nb=b}r(ph,hh);
ph.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Nb)var b=this.Nb.map(function(a){return a.j()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};function qh(a){I.call(this);this.M=a}r(qh,hh);qh.prototype.toString=function(){return"order_by("+qe(this.M)+")"};function rh(a){I.call(this);this.f=a}r(rh,hh);rh.prototype.toString=function(){return"aggregation("+this.f.toString()+")"};function sh(a){I.call(this);this.f=a}r(sh,hh);
sh.prototype.toString=function(){return"group_by("+this.f.toString()+")"};function th(a){I.call(this);this.W=a}r(th,hh);th.prototype.toString=function(){return"limit("+this.W+")"};function uh(a){I.call(this);this.K=a}r(uh,hh);uh.prototype.toString=function(){return"skip("+this.K+")"};function vh(a,b){I.call(this);this.N=a;this.Pb=b}r(vh,hh);vh.prototype.toString=function(){return"join(type: "+(this.Pb?"outer":"inner")+", "+this.N.toString()+")"};function wh(){};function xh(){}r(xh,wh);xh.prototype.cb=function(a){this.G=a;this.sb(this.G);return this.G};xh.prototype.sb=function(a){if(a instanceof mh){var b=yh(this,a.N),b=zh(this,b);Cg(a,a,b[0],b[1]);a==this.G&&(this.G=b[0]);a=b[0]}J(a).forEach(function(a){this.sb(a)},this)};function yh(a,b){if(0==J(b).length||"and"!=b.nb)return[b];a=J(b).slice().map(function(a){b.removeChild(a);return yh(this,a)},a);return Ea(a)}
function zh(a,b){var c=null,d=null;b.map(function(a,b){a=new mh(a);0==b?c=a:K(d,a);d=a},a);return[c,d]};function Ah(){}r(Ah,wh);Ah.prototype.cb=function(a,b){if(3>b.from.length)return a;this.G=a;this.sb(this.G);return this.G};Ah.prototype.sb=function(a){if(a instanceof oh)for(;2<J(a).length;){for(var b=new oh,c=0;2>c;c++){var d=ae(a,0);K(b,d)}$d(a,b,0)}J(a).forEach(function(a){this.sb(a)},this)};function Bh(){S.call(this,0,0)}r(Bh,S);Bh.prototype.toString=k("cross_product");Bh.prototype.ca=function(a){var b=a[0],c=a[1];a=[];for(var d=b.s(),e=c.s(),f=0;f<b.entries.length;f++)for(var h=0;h<c.entries.length;h++){var l=Ld(b.entries[f],d,c.entries[h],e);a.push(l)}b=b.s().concat(c.s());return[new G(a,b)]};function Ch(a,b){te.call(this,a,b);this.Ha=a.b(vc);this.Gb=a.b(wc)}r(Ch,te);Ch.prototype.getPriority=k(2);Ch.prototype.ae=function(a){0==this.F()?Dh(this,a):this.Ic()};function Dh(a,b){a.od.forEach(function(a,d){a instanceof pe&&we(this.Gb,a,b[d])},a)}Ch.prototype.Ic=function(){var a=ye(this.Gb,this.da());0!=a.length&&(a=new ve(this.global,a),ze(this.Ha,a))};function Eh(a){ke.call(this,a)}r(Eh,ke);Eh.prototype.da=function(){var a=B();a.add(this.from);Fh(this,this.from.getName(),a);return a};function Fh(a,b,c){var d=Gh(a.ba.info(),b,1);Gh(a.ba.info(),b).forEach(c.add.bind(c));d.forEach(function(a){Fh(this,a.getName(),c)},a)}Eh.prototype.clone=function(){var a=new Eh(this.ba);ne(a,this);a.from=this.from;return a};Eh.prototype.bind=function(a){Eh.eb.bind.call(this,a);oe(this,a);return this};function Hh(a){ke.call(this,a)}r(Hh,ke);Hh.prototype.da=function(){var a=B();a.add(this.Ka);var b=this.ba.info();Ih(this.Ka.getName(),b.bf).forEach(a.add.bind(a));this.Zb&&Gh(b,this.Ka.getName()).forEach(a.add.bind(a));return a};Hh.prototype.clone=function(){var a=new Hh(this.ba);ne(a,this);a.Ka=this.Ka;this.values&&(a.values=this.values instanceof Md?this.values:this.values.slice());a.Zb=this.Zb;a.$b=this.$b;return a};
Hh.prototype.bind=function(a){Hh.eb.bind.call(this,a);this.$b&&(this.values=this.$b instanceof Md?a[this.$b.Ba()]:this.$b.map(function(b){return b instanceof Md?a[b.Ba()]:b}));return this};function Jh(a){ke.call(this,a)}r(Jh,ke);Jh.prototype.da=function(){var a=B();a.add(this.table);var b=this.set.map(function(a){return a.I.j()}),c=this.ba.info();Kh(c,b).forEach(a.add.bind(a));Lh(c,b).forEach(a.add.bind(a));return a};Jh.prototype.clone=function(){var a=new Jh(this.ba);ne(a,this);a.table=this.table;a.set=this.set?Mh(this.set):this.set;return a};Jh.prototype.bind=function(a){Jh.eb.bind.call(this,a);this.set.forEach(function(b){-1!=b.Pc&&(b.value=a[b.Pc])});oe(this,a);return this};
function Mh(a){return a.map(function(a){var b={},d;for(d in a)b[d]=a[d];return b})};function Nh(a,b){if(null==b)return"NULL";switch(a){case 1:return b?1:0;case 3:case 4:return b;case 0:return"'"+hc(b)+"'";default:return"'"+b.toString()+"'"}}function Oh(a,b){var c=a.Zb?"INSERT OR REPLACE":"INSERT",d=a.Ka.jb(),c=c+(" INTO "+a.Ka.getName()+"("),c=c+d.map(function(a){return a.getName()}).join(", "),c=c+") VALUES (";return a.values.map(function(a){var e=d.map(function(c){var d=a.l[c.getName()];return b?null!=d?"#":"NULL":Nh(c.F(),d)});return c+e.join(", ")+");"}).join("\n")}
function Ph(a){switch(a){case "between":return"BETWEEN";case "eq":return"=";case "gte":return">=";case "gt":return">";case "in":return"IN";case "lte":return"<=";case "lt":return"<";case "match":return"LIKE";case "neq":return"<>";default:return"UNKNOWN"}}function Qh(a,b,c,d){return a instanceof Md?"?"+a.Ba().toString():d?null!=a?"#":"NULL":"match"==b?"'"+a.toString()+"'":"in"==b?"("+a.map(function(a){return Nh(c,a)}).join(", ")+")":"between"==b?Nh(c,a[0])+" AND "+Nh(c,a[1]):Nh(c,a).toString()}
function Rh(a,b){return J(a).map(function(a){return"("+Sh(a,b)+")"}).join("and"==a.nb?" AND ":" OR ")}function Th(a){return[a.ga.j(),Ph(a.D),a.ma.j()].join(" ")}function Sh(a,b){if(a instanceof ge){var c=a.I.j(),d=Ph(a.D);a=Qh(a.value,a.D,a.I.F(),b);return"="==d&&"NULL"==a?[c,"IS NULL"].join(" "):"<>"==d&&"NULL"==a?[c,"IS NOT NULL"].join(" "):[c,d,a].join(" ")}if(a instanceof Eg)return Rh(a,b);if(a instanceof Hg)return Th(a);throw new D(357,typeof a);}
function Uh(a,b){return(a=Sh(a,b))?" WHERE "+a:""}function Vh(a,b){var c="UPDATE "+a.table.getName()+" SET ",c=c+a.set.map(function(a){var b=a.I.j()+" = ";return-1!=a.Pc?b+"?"+a.Pc.toString():b+Nh(a.I.F(),a.value).toString()}).join(", ");a.u&&(c+=Uh(a.u,b));return c+";"}
function Wh(a,b){var c="*";a.f.length&&(c=a.f.map(function(a){return a.Ja?a.j()+" AS "+a.Ja:a.j()}).join(", "));c="SELECT "+c+" FROM ";null!=a.ab&&0!=a.ab.size?c+=Xh(a,b):(c+=a.from.map(Yh).join(", "),a.u&&(c+=Uh(a.u,b)));a.M&&(b=a.M.map(function(a){return a.I.j()+(0==a.order?" DESC":" ASC")}).join(", "),c+=" ORDER BY "+b);a.qa&&(b=a.qa.map(function(a){return a.j()}).join(", "),c+=" GROUP BY "+b);a.W&&(c+=" LIMIT "+a.W.toString());a.K&&(c+=" SKIP "+a.K.toString());return c+";"}
function Yh(a){return Jd(a)!=a.getName()?a.getName()+" AS "+Jd(a):a.getName()}function Xh(a,b){for(var c=xg(a.u,function(a){return a instanceof Hg}),d=c.map(Th),e=Yh(a.from[0]),f=1;f<a.from.length;f++)var h=Yh(a.from[f]),e=a.ab.has(c[d.length-f].V())?e+(" LEFT OUTER JOIN "+h):e+(" INNER JOIN "+h),e=e+(" ON ("+d[d.length-f]+")");a=a.u;a=0<J(a).length?Zd(a,0):a;a instanceof Hg||(e+=" WHERE "+Sh(a,b));return e}
function Zh(a,b){b=b||!1;a=a.query.clone();if(a instanceof Hh)return Oh(a,b);if(a instanceof Eh){var c="DELETE FROM "+a.from.getName();a.u&&(c+=Uh(a.u,b));return c+";"}if(a instanceof Jh)return Vh(a,b);if(a instanceof pe)return Wh(a,b);throw new D(358,typeof a);};function T(a,b){this.global=a;this.Dg=a.b(uc);this.Ha=a.b(vc);this.query=b}q("lf.query.BaseBuilder",T);T.prototype.exec=function(){try{this.Ya()}catch(a){return ab(a)}return new u(function(a,b){var c=new Ch(this.global,[this.xc()]);ze(this.Ha,c).then(function(b){a(zd(b[0]))},b)},this)};T.prototype.exec=T.prototype.exec;T.prototype.Sf=function(){var a=function(a){return a.Lc(this.query)+"\n"}.bind(this);return Dg($h(this).Za(),a)};T.prototype.explain=T.prototype.Sf;
T.prototype.bind=function(a){this.query.bind(a);return this};T.prototype.bind=T.prototype.bind;T.prototype.Lg=function(a){return Zh(this,a)};T.prototype.toSql=T.prototype.Lg;T.prototype.Ya=aa();function $h(a){if(null==a.cf){var b;b=a.Dg;var c=a.query,d=b.og.create(c);b=b.Ag.create(d,c);a.cf=b}return a.cf}T.prototype.xc=function(){return{context:this.query.clone(),de:$h(this)}};function ai(a){T.call(this,a,new Eh(a.b(A)))}r(ai,T);q("lf.query.DeleteBuilder",ai);ai.prototype.from=function(a){if(null!=this.query.from)throw new D(515);this.query.from=a;return this};ai.prototype.from=ai.prototype.from;ai.prototype.u=function(a){this.Ad();this.query.u=a;return this};ai.prototype.where=ai.prototype.u;ai.prototype.Ad=function(){if(null==this.query.from)throw new D(548);if(null!=this.query.u)throw new D(516);};
ai.prototype.Ya=function(){ai.eb.Ya.call(this);if(null==this.query.from)throw new D(517);};function bi(a,b){T.call(this,a,new Hh(a.b(A)));this.query.Zb=b||!1}r(bi,T);q("lf.query.InsertBuilder",bi);bi.prototype.Ya=function(){bi.eb.Ya.call(this);var a=this.query;if(null==a.Ka||null==a.values)throw new D(518);if(a.Zb&&null===a.Ka.Kb.nd)throw new D(519);};bi.prototype.Ka=function(a){if(null!=this.query.Ka)throw new D(520);this.query.Ka=a;return this};bi.prototype.into=bi.prototype.Ka;
bi.prototype.values=function(a){if(null!=this.query.values)throw new D(521);a instanceof Md||a.some(function(a){return a instanceof Md})?this.query.$b=a:this.query.values=a;return this};bi.prototype.values=bi.prototype.values;function ci(a){return di("and",Array.prototype.slice.call(arguments))}q("lf.op.and",ci);q("lf.op.or",function(a){return di("or",Array.prototype.slice.call(arguments))});function di(a,b){var c=new Eg(a);b.forEach(function(a){K(c,a)});return c}q("lf.op.not",function(a){a.qd(!0);return a});function U(a,b){T.call(this,a,new pe(a.b(A)));this.He=this.vd=!1;this.query.f=b;ei(this);fi(this)}r(U,T);q("lf.query.SelectBuilder",U);U.prototype.Ya=function(){U.eb.Ya.call(this);var a=this.query;if(null==a.from)throw new D(522);if(n(a.Qb)&&!n(a.W)||n(a.Wb)&&!n(a.K))throw new D(523);null!=this.query.qa?gi(this):hi(this)};function ei(a){var b=a.query.f.filter(function(a){return a instanceof R&&"DISTINCT"==a.Jb},a);if(0!=b.length&&(1!=b.length||1!=a.query.f.length))throw new D(524);}
function gi(a){if(a.query.qa.some(function(a){a=a.F();return 6==a||0==a}))throw new D(525);}function hi(a){var b=a.query.f.some(function(a){return a instanceof R},a);a=a.query.f.some(function(a){return!(a instanceof R)},a)||0==a.query.f.length;if(b&&a)throw new D(526);}function fi(a){a.query.f.forEach(function(a){if(a instanceof R&&!ii(a.Jb,a.F()))throw new D(527,a.j());},a)}function ji(a,b){if(null==a.query.from)throw new D(b);}
U.prototype.from=function(a){if(this.He)throw new D(515);this.He=!0;null==this.query.from&&(this.query.from=[]);this.query.from.push.apply(this.query.from,Array.prototype.slice.call(arguments));return this};U.prototype.from=U.prototype.from;U.prototype.u=function(a){ji(this,548);if(this.vd)throw new D(516);this.vd=!0;ki(this,a);return this};U.prototype.where=U.prototype.u;function ki(a,b){null!=a.query.u&&(b=ci(b,a.query.u));a.query.u=b}
U.prototype.dg=function(a,b){ji(this,542);if(this.vd)throw new D(547);this.query.from.push(a);ki(this,b);return this};U.prototype.innerJoin=U.prototype.dg;U.prototype.lg=function(a,b){ji(this,542);if(!(b instanceof Hg))throw new D(541);if(this.vd)throw new D(547);this.query.from.push(a);null==this.query.ab&&(this.query.ab=B());var c=b;Jd(a)!=Jd(b.ma.H())&&(c=b.reverse());this.query.ab.add(c.V());ki(this,c);return this};U.prototype.leftOuterJoin=U.prototype.lg;
U.prototype.W=function(a){if(null!=(this.query.W||this.query.Qb))throw new D(528);if(a instanceof Md)this.query.Qb=a;else{if(0>a)throw new D(531);this.query.W=a}return this};U.prototype.limit=U.prototype.W;U.prototype.K=function(a){if(null!=(this.query.K||this.query.Wb))throw new D(529);if(a instanceof Md)this.query.Wb=a;else{if(0>a)throw new D(531);this.query.K=a}return this};U.prototype.skip=U.prototype.K;
U.prototype.M=function(a,b){ji(this,549);null==this.query.M&&(this.query.M=[]);this.query.M.push({I:a,order:null!=b?b:1});return this};U.prototype.orderBy=U.prototype.M;U.prototype.qa=function(a){ji(this,549);if(null!=this.query.qa)throw new D(530);null==this.query.qa&&(this.query.qa=[]);this.query.qa.push.apply(this.query.qa,Array.prototype.slice.call(arguments));return this};U.prototype.groupBy=U.prototype.qa;
function ii(a,b){switch(a){case "COUNT":case "DISTINCT":return!0;case "AVG":case "GEOMEAN":case "STDDEV":case "SUM":return 4==b||3==b;case "MAX":case "MIN":return 4==b||3==b||5==b||2==b}return!1}U.prototype.clone=function(){var a=new U(this.global,this.query.f);a.query=this.query.clone();a.query.Sc=null;return a};U.prototype.clone=U.prototype.clone;function li(a,b){T.call(this,a,new Jh(a.b(A)));this.query.table=b}r(li,T);q("lf.query.UpdateBuilder",li);li.prototype.set=function(a,b){a={Pc:b instanceof Md?b.Ba():-1,I:a,value:b};null!=this.query.set?this.query.set.push(a):this.query.set=[a];return this};li.prototype.set=li.prototype.set;li.prototype.u=function(a){this.Ad();this.query.u=a;return this};li.prototype.where=li.prototype.u;li.prototype.Ad=function(){if(null!=this.query.u)throw new D(516);};
li.prototype.Ya=function(){li.eb.Ya.call(this);if(null==this.query.set)throw new D(532);if(this.query.set.some(function(a){return a.value instanceof Md}))throw new D(501);};function mi(a){this.query=a;this.Ga=null}mi.prototype.ec=function(){null===this.Ga&&(this.Ga=this.Xc());return this.Ga};function ni(a){mi.call(this,a)}r(ni,mi);ni.prototype.Xc=function(){return this.query.Zb?new jh(this.query.Ka,this.query.values):new ih(this.query.Ka,this.query.values)};function oi(a){mi.call(this,a)}r(oi,mi);oi.prototype.Xc=function(){var a=new lh(this.query.table),b=null!=this.query.u?new mh(this.query.u.Lb()):null,c=new nh(this.query.table);null===b?K(a,c):(K(b,c),K(a,b));return a};function pi(a,b,c){this.Ga=a;this.fe=b;this.Tb=c}pi.prototype.ec=function(){this.Tb.forEach(function(a){this.Ga=a.cb(this.Ga,this.fe)},this);return this.Ga};function qi(a,b){mi.call(this,a);this.Tb=b}r(qi,mi);qi.prototype.Xc=function(){var a=new kh(this.query.from),b=null!=this.query.u?new mh(this.query.u.Lb()):null,c=new nh(this.query.from);null===b?K(a,c):(K(b,c),K(a,b));return(new pi(a,this.query,this.Tb)).ec()};function ri(){}r(ri,wh);ri.prototype.cb=function(a,b){if(2>b.from.length)return a;this.G=a;this.sb(this.G,b);return this.G};ri.prototype.sb=function(a,b){if(a instanceof mh&&a.N instanceof Hg){var c=a.N.V(),d=Zd(a,0);d instanceof oh&&(c=null!=b.ab&&b.ab.has(c),c=new vh(a.N,c),Cg(a,d,c,c),a==this.G&&(this.G=c),a=c)}J(a).forEach(function(a){this.sb(a,b)},this)};function si(){this.Oc=B()}r(si,wh);si.prototype.cb=function(a,b){if(!n(b.u))return a;this.Oc.clear();this.G=a;this.sb(this.G,b);this.Oc.clear();return this.G};si.prototype.sb=function(a,b){var c=function(a){J(a).forEach(d)}.bind(this),d=function(a){if(!this.Oc.has(a)){if(a instanceof mh){var e=a.N.s(),h=function(a){return ti(this,a,e)}.bind(this),h=ui(this,b,a,h);this.Oc.add(a);h!=a&&(null===h.getParent()&&(this.G=h),d(h))}c(a)}}.bind(this);d(a)};
function ui(a,b,c,d){var e=c;if(vi(b,c))e=Ag(c),ui(a,b,c,d);else if(wi(c)){var f=[],e=Bg(c,d,function(a){a=new mh(a.N);f.push(a);return a});f.forEach(function(a){ui(this,b,a,d)},a)}return e}function ti(a,b,c){var d=B();wg(b).forEach(function(a){d.add(a.table)},a);b instanceof nh&&d.add(b.table);return xc(d,c)}function wi(a){a=Zd(a,0);return a instanceof oh||a instanceof vh}
function vi(a,b){var c=Zd(b,0);if(!(c instanceof mh))return!1;if(null==a.ab)return!0;b=b.N instanceof Hg;a=a.ab.has(c.N.V());return b||!a};function xi(a,b){mi.call(this,a);this.Tb=b;this.ef=this.Ye=this.nf=this.af=this.ye=this.Ne=this.mf=this.Ee=this.qf=null}r(xi,mi);
xi.prototype.Xc=function(){yi(this);2<=this.query.from.length&&(this.Ee=new oh);this.mf=null!=this.query.u?new mh(this.query.u.Lb()):null;this.query.M&&(this.af=new qh(this.query.M));null!=this.query.K&&0<this.query.K&&(this.nf=new uh(this.query.K));null!=this.query.W&&(this.Ye=new th(this.query.W));null!=this.query.qa&&(this.Ne=new sh(this.query.qa));zi(this);this.ef=new ph(this.query.f||[],this.query.qa||null);var a=Ai(this);return(new pi(a,this.query,this.Tb)).ec()};
function Ai(a){for(var b=[a.Ye,a.nf,a.ef,a.af,a.ye,a.Ne,a.mf,a.Ee],c=-1,d=null,e=0;e<b.length;e++){var f=b[e];null!==f&&(null===d?d=f:K(b[c],f),c=e)}a.qf.forEach(function(a){K(b[c],a)});return d}function yi(a){a.qf=a.query.from.map(function(a){return new nh(a)},a)}function zi(a){var b=a.query.f.filter(function(a){return a instanceof R});null!=a.query.M&&a.query.M.forEach(function(a){a.I instanceof R&&b.push(a.I)});0<b.length&&(a.ye=new rh(b))};function Bi(){this.le=[new xh,new Ah,new si,new ri];this.Kd=[new xh]}Bi.prototype.create=function(a){var b;if(a instanceof Hh)b=new ni(a);else if(a instanceof Eh)b=new qi(a,this.Kd);else if(a instanceof pe)b=new xi(a,this.le);else if(a instanceof Jh)b=new oi(a);else throw new D(513);b=b.ec();return new gh(b,a.da())};function Ci(a){S.call(this,0,1);this.S=a}r(Ci,S);Ci.prototype.toString=function(){return"delete("+this.S.getName()+")"};Ci.prototype.ca=function(a,b){a=a[0].entries.map(function(a){return a.ua});b.remove(this.S,a);return[Dd()]};function Di(a,b){S.call(this,0,-1);this.table=b;this.B=a.b(tc)}r(Di,S);Di.prototype.toString=function(){return"get_row_count("+this.table.getName()+")"};Di.prototype.ca=function(){var a=this.B.get(bf(this.table)),b=new G([],[this.table.getName()]),c=Sg(),a=a.X().ia;null===b.Xa&&(b.Xa=x());b.Xa.set(c.j(),a);return[b]};function Ei(a,b){S.call(this,0,-1);this.U=a.b(sc);this.B=a.b(tc);this.table=b}r(Ei,S);Ei.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Ja||(a+=" as "+this.table.Ja);return a+")"};Ei.prototype.ca=function(){var a=this.B.get(bf(this.table)).Sa();return[Gd(uf(this.U,a),[Jd(this.table)])]};function Fi(a){this.c=a}r(Fi,wh);Fi.prototype.cb=function(a,b){this.G=a;if(!this.Cd(b))return a;a=xg(a,function(a){return a instanceof Ei})[0];b=new Di(this.c,a.table);Cg(a,a,b,b);return this.G};Fi.prototype.Cd=function(a){return 1==a.f.length&&1==a.from.length&&null==a.u&&null==a.W&&null==a.K&&null==a.qa?(a=a.f[0],a instanceof R&&"COUNT"==a.Jb&&a.child instanceof Rg):!1};function Gi(a){S.call(this,0,1);this.Me=a}r(Gi,S);Gi.prototype.toString=function(){return"groupBy("+this.Me.map(function(a){return a.j()}).toString()+")"};Gi.prototype.ca=function(a){return Hi(this,a[0])};function Hi(a,b){var c=new Tc,d=function(a){return this.Me.map(function(b){return H(a,b)},this).join(",")}.bind(a);b.entries.forEach(function(a){c.set(d(a),a)},a);return c.keys().map(function(a){return new G(c.get(a),b.s())},a)};function Ii(a,b,c){S.call(this,0,0);this.B=a.b(tc);this.U=a.b(sc);this.N=b;this.Pb=c;this.yd="eq"==this.N.D?0:2;this.Pe=null}r(Ii,S);var Ji=["hash","index_nested_loop","nested_loop"];Ii.prototype.toString=function(){return"join(type: "+(this.Pb?"outer":"inner")+", impl: "+Ji[this.yd]+", "+this.N.toString()+")"};
Ii.prototype.ca=function(a){switch(this.yd){case 0:return[Lg(this.N,a[0],a[1],this.Pb)];case 1:return[Mg(this.N,a[0],a[1],this.Pe,this.U)];default:var b=this.N,c=a[0];a=a[1];var d=this.Pb,e=[c,a];d||(e=Ig(b,c,a));c=e[0];a=e[1];for(var e=[],f=c.s(),h=a.s(),l=c.entries.length,p=a.entries.length,L=p+256-1>>8,qa=0;qa<L;){for(var ba=0;ba<l;ba++){var xb=!1,Vf=H(c.entries[ba],b.ga);if(null!==Vf)for(var Li=Math.min(qa+1<<8,p),yb=qa<<8;yb<Li;yb++)if(b.sc(Vf,H(a.entries[yb],b.ma))){var xb=!0,Oc=Ld(c.entries[ba],
f,a.entries[yb],h);e.push(Oc)}d&&!xb&&e.push(Kg(b,c.entries[ba],f))}qa++}b=c.s().concat(a.s());return[new G(e,b)]}};function Ki(a,b){a.yd=1;var c=a.B.get(b.Ba().j());a.Pe={$f:b,sg:b==a.N.ga?a.N.ma:a.N.ga,index:c}};function Mi(a){S.call(this,0,-1);this.ff=a}r(Mi,S);Mi.prototype.toString=function(){return"no_op_step("+this.ff[0].s().join(",")+")"};Mi.prototype.ca=g("ff");function Ni(){}r(Ni,wh);Ni.prototype.cb=function(a,b){this.G=a;if(!this.Cd(b))return a;xg(a,function(a){return a instanceof Ii}).forEach(this.Cg,this);return this.G};Ni.prototype.Cd=function(a){return 1<a.from.length};
Ni.prototype.Cg=function(a){if("eq"==a.N.D&&!a.Pb){var b=function(b){if(!(b instanceof Ei))return null;b=Jd(b.table)==Jd(a.N.ma.H())?a.N.ma:a.N.ga;return null===b.Ba()?null:b},c=b(Zd(a,0)),b=b(Zd(a,1));if(null!==c||null!==b){b=null===b?c:b;Ki(a,b);var d=new G([],[Jd(b.H())]);be(a,new Mi([d]),b==c?0:1)}}};function Oi(a){a=a.map(function(a){return a.yb()});a=zb.apply(null,a);var b=[];wb(a,function(a){b.push(a)});return b}function Pi(a){this.Ob=a}Pi.prototype.Yc=function(){return 1==this.Ob.f.length?[td()]:[this.Ob.f.map(function(){return td()})]};function Qi(a,b){this.Ob=a;this.Fa=b;this.Gd=this.We=null}
function Ri(a,b){var c=x();a.Fa.keys().forEach(function(a){var d=this.Fa.get(a).map(function(a){return le(b,a)},this),f=new xd([td()]);d.forEach(function(a){f=yd(f,a.qe())});c.set(a,f)},a);return c}Qi.prototype.Yc=function(a){if(this.We==a)return this.Gd;for(var b=Ri(this,a),c=this.Ob.f.length-1;0<=c;c--){var d=this.Ob.f[c];if(null!==(b.get(d.ba.getName())||null))break;b.set(d.ba.getName(),new xd([td()]))}this.Gd=1==this.Ob.f.length?y(b)[0].yb():Oi(Si(this,b));this.We=a;return this.Gd};
function Si(a,b){var c=x(),d=0;a.Ob.f.forEach(function(a){c.set(a.ba.getName(),d);d++});return cc(b).sort(function(a,b){return c.get(a)-c.get(b)}).map(function(a){return b.get(a)})};function Ti(a,b){this.sd=b;this.B=a.b(tc)}function Ui(a){a=a.B.get(bf(a.sd));return Math.floor(.02*a.X().ia)}function Vi(a,b,c){c=c.filter(a.gg,a);if(0==c.length)return null;a=Wi(a,c);if(0==a.length)return null;if(1==a.length)return a[0];var d=Number.MAX_VALUE;return a.reduce(function(a,c){var e=Xi(c,b);return e<d?(d=e,c):a},null)}
function Wi(a,b){return a.sd.Ca().map(function(a){a=new Yi(this.B,a);Zi(a,b);return a},a).filter(function(a){if(null===a.Fa)a=!1;else{for(var b=!1,c=!0,f=0;f<a.$a.f.length;f++){var h=a.Fa.has(a.$a.f[f].ba.getName());if(b&&h){c=!1;break}h||(b=!0)}a=c}return a})}Ti.prototype.gg=function(a){return a instanceof ge?!a.fd()||a.I.H()!=this.sd||"in"==a.D&&a.value.length>Ui(this)?!1:!0:a instanceof Eg?a.fd()&&Zd(a,0).I.H()==this.sd?J(a).length<=Ui(this):!1:!1};
function Yi(a,b){this.B=a;this.$a=b;this.ag=B(this.$a.f.map(function(a){return a.ba.getName()}));this.Vd=this.Fa=null}function $i(a){null===a.Vd&&(a.Vd=new Qi(a.$a,a.Fa));return a.Vd}function Zi(a,b){b.forEach(function(a){var b=a.jb()[0].getName();this.ag.has(b)&&(null===this.Fa&&(this.Fa=new Tc),this.Fa.set(b,a.V()))},a)}function Xi(a,b){b=$i(a).Yc(b);var c=a.B.get(a.$a.j());return b.reduce(function(a,b){return a+c.Vc(b)},0)};function aj(a,b,c,d){S.call(this,0,-1);this.B=a.b(tc);this.index=b;this.Ve=c;this.je=d;this.Nc=this.Mc=!1}r(aj,S);aj.prototype.toString=function(){return"index_range_scan("+this.index.j()+", ?, "+(this.je?"reverse":"natural")+(this.Mc?", limit:?":"")+(this.Nc?", skip:?":"")+")"};aj.prototype.Lc=function(a){var b=this.toString(),c=this.Ve.Yc(a),b=b.replace("?",c.toString());this.Mc&&(b=b.replace("?",a.W.toString()));this.Nc&&(b=b.replace("?",a.K.toString()));return b};
aj.prototype.ca=function(a,b,c){a=this.Ve.Yc(c);b=this.B.get(this.index.j());c=(1==a.length&&a[0]instanceof E&&ud(a[0])?yf(b.get(a[0].from),!1,this.Mc?c.W:void 0,this.Nc?c.K:void 0):b.Sa(a,this.je,this.Mc?c.W:void 0,this.Nc?c.K:void 0)).map(function(a){return new dc(a,{})},this);return[Gd(c,[this.index.kc])]};function bj(){S.call(this,0,0)}r(bj,S);bj.prototype.toString=k("multi_index_range_scan()");
bj.prototype.ca=function(a){var b=x();a.forEach(function(a){a.entries.forEach(function(a){b.set(a.ua.id(),a)})});var c=y(b);return[new G(c,a[0].s())]};function cj(a){S.call(this,0,1);this.hc=a}r(cj,S);cj.prototype.toString=k("select(?)");cj.prototype.Lc=function(a){a=le(a,this.hc);return this.toString().replace("?",a.toString())};cj.prototype.ca=function(a,b,c){return[le(c,this.hc).eval(a[0])]};function dj(a,b){S.call(this,0,1);this.U=a.b(sc);this.S=b}r(dj,S);dj.prototype.toString=function(){return"table_access_by_row_id("+this.S.getName()+")"};dj.prototype.ca=function(a){return[Gd(uf(this.U,Ad(a[0])),[Jd(this.S)])]};function ej(a){this.c=a}r(ej,wh);ej.prototype.cb=function(a,b){this.G=a;xg(a,function(a){return a instanceof Ei}).forEach(function(a){var c=fj(a);if(0!=c.length){var e=Vi(new Ti(this.c,a.table),b,c.map(function(a){return le(b,a.hc)}));if(null!==e){var f=x();c.forEach(function(a){f.set(a.hc,a)},this);this.G=gj(this,e,f,a)}}},this);return this.G};function fj(a){var b=[];for(a=a.getParent();a;){if(a instanceof cj)b.push(a);else if(a instanceof Ii)break;a=a.getParent()}return b}
function gj(a,b,c,d){(null===b.Fa?[]:b.Fa.values()).map(function(a){return c.get(a)}).forEach(yg);b=new aj(a.c,b.$a,$i(b),!1);a=new dj(a.c,d.table);K(a,b);Cg(d,d,a,b);return b.Za()};function hj(a,b){S.call(this,0,-1);this.B=a.b(tc);this.S=b}r(hj,S);hj.prototype.toString=function(){return"insert("+this.S.getName()+")"};hj.prototype.ca=function(a,b,c){ij(this.S,c.values,this.B);b.zb(this.S,c.values);return[Gd(c.values,[this.S.getName()])]};function ij(a,b,c){a=a.Kb.nd;if(null===a?0:a.f[0].autoIncrement){var d=a.f[0].ba.getName();c=c.get(a.j()).X().Bc;var e=null===c?0:c;b.forEach(function(a){if(0==a.l[d]||null==a.l[d])e++,a.l[d]=e})}}
function jj(a,b){S.call(this,0,-1);this.B=a.b(tc);this.S=b}r(jj,S);jj.prototype.toString=function(){return"insert_replace("+this.S.getName()+")"};jj.prototype.ca=function(a,b,c){ij(this.S,c.values,this.B);b.Rd(this.S,c.values);return[Gd(c.values,[this.S.getName()])]};function kj(){S.call(this,0,1)}r(kj,S);kj.prototype.toString=k("limit(?)");kj.prototype.Lc=function(a){return this.toString().replace("?",a.W.toString())};kj.prototype.ca=function(a,b,c){a[0].entries.splice(c.W);return a};function lj(a){S.call(this,0,1);this.M=a}r(lj,S);m=lj.prototype;m.toString=function(){return"order_by("+qe(this.M)+")"};m.ca=function(a){if(1==a.length){var b;b=a[0];for(var c=null,d=0;d<this.M.length;d++){var e=Tg(this.M[d].I);if(null!==b.Xa&&b.Xa.has(e.j())){c=e;break}}b=c;(null===b?a[0]:Bd(a[0],b)).entries.sort(this.Pf.bind(this))}else a.sort(this.Fg.bind(this));return a};
m.Z=function(a,b){var c,d,e,f=-1;do f++,e=this.M[f].I,c=this.M[f].order,d=a(e),e=b(e);while(d==e&&f+1<this.M.length);a=d<e?-1:d>e?1:0;return 1==c?a:-a};m.Fg=function(a,b){return this.Z(function(b){return b instanceof R?Bd(a,b):H(a.entries[a.entries.length-1],b)},function(a){return a instanceof R?Bd(b,a):H(b.entries[b.entries.length-1],a)})};m.Pf=function(a,b){return this.Z(function(b){return H(a,b)},function(a){return H(b,a)})};function mj(a,b){this.Ma=a;this.J=b}function nj(a){return a.J.some(function(a){return a instanceof R},a)?oj(a):pj(a)}function oj(a){if(1==a.J.length&&"DISTINCT"==a.J[0].Jb)return a=Bd(a.Ma,a.J[0]).entries.map(function(a){var b=new Hd(new dc(-1,{}),1<this.Ma.L.size);Kd(b,this.J[0],H(a,this.J[0].child));return b},a),new G(a,[]);var b=new Hd(new dc(-1,{}),1<a.Ma.L.size);a.J.forEach(function(a){var c=a instanceof R?Bd(this.Ma,a):H(this.Ma.entries[0],a);Kd(b,a,c)},a);return new G([b],a.Ma.s())}
function pj(a){var b=Array(a.Ma.entries.length),c=1<a.Ma.L.size;a.Ma.entries.forEach(function(a,e){b[e]=new Hd(new dc(a.ua.id(),{}),c);this.J.forEach(function(c){Kd(b[e],c,H(a,c))},this)},a);return new G(b,a.Ma.s())}function qj(a,b){var c=a.map(function(a){return nj(new mj(a,b)).entries[0]});return new G(c,a[0].s())};function rj(a,b){S.call(this,0,1);this.f=a;this.Nb=b}r(rj,S);rj.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Nb)var b=this.Nb.map(function(a){return a.j()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};rj.prototype.ca=function(a){0==a.length?a=[Dd()]:1==a.length?(a=a[0],a=[0==this.f.length?a:nj(new mj(a,this.f))]):a=[qj(a,this.f)];return a};function sj(a){return a.f.some(function(a){return a instanceof R})||null!==a.Nb};function tj(){S.call(this,0,1)}r(tj,S);tj.prototype.toString=k("skip(?)");tj.prototype.Lc=function(a){return this.toString().replace("?",a.K.toString())};tj.prototype.ca=function(a,b,c){return[new G(a[0].entries.slice(c.K),a[0].s())]};function uj(){}r(uj,wh);uj.prototype.cb=function(a,b){if(!n(b.W)&&!n(b.K))return a;var c=vj(a);if(null===c)return a;xg(a,function(a){return a instanceof kj||a instanceof tj}).forEach(function(a){a instanceof kj?c.Mc=!0:c.Nc=!0;yg(a)},this);return c.Za()};function vj(a){a=xg(a,function(a){return a instanceof aj},function(a){return a instanceof rj&&sj(a)||a instanceof lj||1!=J(a).length||a instanceof cj});return 0<a.length?a[0]:null};function wj(a){this.c=a}r(wj,wh);wj.prototype.cb=function(a,b){this.G=a;var c=xj(this,b);if(0==c.length)return this.G;var d,e=0;do d=c[e++],a=yj(this,d,b);while(null===a&&e<c.length);if(null===a)return this.G;b=zj(this,a[0].$a.kc);return null===b?this.G:this.G=Aj(this,d,b,a)};function xj(a,b){return xg(a.G,function(a){if(!(a instanceof cj))return!1;a=le(b,a.hc);return a instanceof Eg&&"or"==a.nb})}function zj(a,b){return xg(a.G,function(a){return a instanceof Ei&&a.table.getName()==b})[0]||null}
function yj(a,b,c){b=le(c,b.hc);var d=b.s();if(1!=d.size)return null;var d=C(d)[0],e=new Ti(a.c,d),f=null;return J(b).every(function(a){a=Vi(e,c,[a]);null===a||(null===f?f=[a]:f.push(a));return null!==a})?f:null}function Aj(a,b,c,d){var e=new dj(a.c,c.table),f=new bj;K(e,f);d.forEach(function(a){a=new aj(this.c,a.$a,$i(a),!1);K(f,a)},a);yg(b);Cg(c,c,e,f);return f.Za()};function Bj(a){this.c=a}r(Bj,wh);Bj.prototype.cb=function(a,b){b=Cj(a,b);if(null===b)return a;a:{var c=b;a=Dj(Zd(b,0));if(null!==a){var d;d=b.M;for(var e=null,f=a.table.Ca(),h=0;h<f.length&&null===e;h++)e=Ej(f[h],d);d=e;if(null===d){a=c;break a}c=new aj(this.c,d.$a,new Pi(d.$a),d.Se);d=new dj(this.c,a.table);K(d,c);yg(b);c=Cg(a,a,d,c)}a=c}a==b&&(a=b,c=Fj(Zd(b,0)),null!==c&&(d=Ej(c.index,b.M),null!==d&&(c.je=d.Se,a=yg(b).parent)));return a.Za()};
function Fj(a){a=xg(a,function(a){return a instanceof aj},function(a){return 1!=J(a).length});return 0<a.length?a[0]:null}function Dj(a){a=xg(a,function(a){return a instanceof Ei},function(a){return 1!=J(a).length});return 0<a.length?a[0]:null}function Cj(a,b){return n(b.M)?xg(a,function(a){return a instanceof lj})[0]:null}function Ej(a,b){if(a.f.length!=b.length||!b.every(function(b,d){return b.I.getName()==a.f[d].ba.getName()}))return null;b=Gj(b,a);return b[0]||b[1]?{$a:a,Se:b[1]}:null}
function Gj(a,b){var c=a.reduce(function(a,b){return a<<1|(0==b.order?0:1)},0),d=b.f.reduce(function(a,b){return a<<1|(0==b.order?0:1)},0),c=c^d;return[0==c,c==Math.pow(2,Math.max(a.length,b.f.length))-1]};function Hj(a,b,c){this.Ga=a;this.fe=b;this.Tb=c}Hj.prototype.ec=function(){this.Tb.forEach(function(a){this.Ga=a.cb(this.Ga,this.fe)},this);return this.Ga};function Ij(a){S.call(this,0,1);this.S=a}r(Ij,S);Ij.prototype.toString=function(){return"update("+this.S.getName()+")"};Ij.prototype.ca=function(a,b,c){a=a[0].entries.map(function(a){var b=this.S.ib(a.ua.Ia());c.set.forEach(function(a){b.l[a.I.getName()]=a.value},this);return b},this);b.update(this.S,a);return[Dd()]};function Jj(a){this.c=a;this.le=[new Ni,new ej(this.c),new wj(this.c),new Bj(this.c),new uj,new Fi(this.c)];this.Kd=[new ej(this.c)]}Jj.prototype.create=function(a,b){var c=a.Za();if(c instanceof jh||c instanceof ih)return Kj(this,a,b);if(c instanceof ph||c instanceof th||c instanceof uh)return Kj(this,a,b,this.le);if(c instanceof kh||c instanceof lh)return Kj(this,a,b,this.Kd);throw new D(8);};
function Kj(a,b,c,d){a=vg(b.Za(),a.rg.bind(a));null!=d&&(a=(new Hj(a,c,d)).ec());return new re(a,b.da())}
Jj.prototype.rg=function(a){if(a instanceof ph)return new rj(a.f,a.Nb);if(a instanceof sh)return new Gi(a.f);if(a instanceof rh)return new Xg(a.f);if(a instanceof qh)return new lj(a.M);if(a instanceof uh)return new tj;if(a instanceof th)return new kj;if(a instanceof mh)return new cj(a.N.V());if(a instanceof oh)return new Bh;if(a instanceof vh)return new Ii(this.c,a.N,a.Pb);if(a instanceof nh)return new Ei(this.c,a.table);if(a instanceof kh)return new Ci(a.table);if(a instanceof lh)return new Ij(a.table);
if(a instanceof jh)return new jj(this.c,a.table);if(a instanceof ih)return new hj(this.c,a.table);throw new D(514);};function Lj(a){this.og=new Bi;this.Ag=new Jj(a)};function Mj(){this.Ze=x()}function Nj(a,b){var c=a.Ze.get(b.getName())||null;null===c&&(c=new Oj,a.Ze.set(b.getName(),c));return c}function Pj(a,b,c,d){c.forEach(function(a){a=Nj(this,a);0==d?(a.bb=null,a.tc=b):3==d?(null===a.Vb&&(a.Vb=B()),a.Vb.add(b),null===a.Va&&(a.Va=B()),a.Va.delete(b)):1==d?(null===a.Va&&(a.Va=B()),a.Va.add(b)):2==d&&(a.bb=b)},a)}
function Qj(a,b,c,d){var e=!0;c.forEach(function(a){if(e){a=Nj(this,a);var c=null===a.Va||0==a.Va.size;e=0==d?(null===a.Vb||0==a.Vb.size)&&c&&null===a.tc&&null!==a.bb&&a.bb==b:3==d?null===a.tc&&null===a.bb&&null!==a.Va&&a.Va.has(b):1==d?null===a.bb:c&&(null===a.bb||a.bb==b)}},a);return e}function Rj(a,b,c,d){var e=Qj(a,b,c,d);e&&Pj(a,b,c,d);return e}Mj.prototype.releaseLock=function(a,b){b.forEach(function(b){Nj(this,b).releaseLock(a)},this)};
function Sj(a,b){b.forEach(function(a){Nj(this,a).bb=null},a)}function Oj(){this.Vb=this.Va=this.bb=this.tc=null}Oj.prototype.releaseLock=function(a){this.tc==a&&(this.tc=null);this.bb==a&&(this.bb=null);null===this.Va||this.Va.delete(a);null===this.Vb||this.Vb.delete(a)};function Tj(){this.Sb=new Uj;this.Ac=new Mj}function ze(a,b){(2>b.getPriority()||2>b.getPriority())&&Sj(a.Ac,b.da());a.Sb.zb(b);Vj(a);return b.Cb.ha}function Vj(a){for(var b=a.Sb.yb(),c=0;c<b.length;c++){var d=b[c];if(0==d.F()?Wj(a,d,1,3):Wj(a,d,2,0)){a.Sb.remove(d);var e=a;d.exec().then(e.xg.bind(e,d),e.wg.bind(e,d))}}}function Wj(a,b,c,d){var e=!1;Rj(a.Ac,b.V(),b.da(),c)&&(e=Rj(a.Ac,b.V(),b.da(),d));return e}Tj.prototype.xg=function(a,b){this.Ac.releaseLock(a.V(),a.da());a.Cb.resolve(b);Vj(this)};
Tj.prototype.wg=function(a,b){this.Ac.releaseLock(a.V(),a.da());a.Cb.reject(b);Vj(this)};function Uj(){this.Sb=[]}Uj.prototype.zb=function(a){xf(this.Sb,a,function(a,c){var b=a.getPriority()-c.getPriority();return 0==b?a.V()-c.V():b})};Uj.prototype.yb=function(){return this.Sb.slice()};Uj.prototype.remove=function(a){var b=this.Sb;a=xa(b,a);var c;(c=0<=a)&&Array.prototype.splice.call(b,a,1);return c};function Xj(){this.Jc=x()}var Yj;function Zj(){Yj||(Yj=new Xj);return Yj}Xj.prototype.clear=function(){this.Jc.clear()};Xj.prototype.clear=Xj.prototype.clear;Xj.prototype.pb=function(a,b){this.Jc.set(a.toString(),b);return b};Xj.prototype.registerService=Xj.prototype.pb;Xj.prototype.b=function(a){var b=this.Jc.get(a.toString())||null;if(null===b)throw new D(7,a.toString());return b};Xj.prototype.getService=Xj.prototype.b;Xj.prototype.gd=function(a){return this.Jc.has(a.toString())};
Xj.prototype.isRegistered=Xj.prototype.gd;function ak(){var a=Zj();return cc(a.Jc)};function bk(a,b,c,d){return null!=a?null!=b?ck(a,b,c,d):dk(a):ek()}function fk(a){var b="";try{b=JSON.stringify(a)}catch(c){}return b}function gk(a){var b=Zj();a=new qc("ns_"+a);return b.gd(a)?b.b(a):null}function ek(){var a={};ak().forEach(function(b){"ns_"==b.substring(0,3)&&(b=b.substring(3),a[b]=gk(b).b(A).version())});return fk(a)}function dk(a){a=gk(a);var b={};if(null!=a){var c=a.b(tc);a.b(A).oa().forEach(function(a){b[a.getName()]=c.get(bf(a)).X().ia})}return fk(b)}
function ck(a,b,c,d){var e=gk(a);a=[];if(null!=e){var f=null;try{f=e.b(A).table(b)}catch(h){}null!=f&&(b=e.b(tc),e=e.b(sc),c=b.get(bf(f)).Sa(void 0,!1,c,d),c.length&&(a=uf(e,c).map(function(a){return a.l})))}return fk(a)};function hk(a,b){this.Ld=Vd();this.ge=a;this.jd=b;this.J=ik(this)}function ik(a){if(0<a.ge.f.length)return a.ge.f;var b=[];a.ge.from.forEach(function(a){a.jb().forEach(function(a){b.push(a)})});return b}hk.prototype.Z=function(a,b){return this.J.every(function(c){return 6==c.F()||0==c.F()?H(a,c)===H(b,c):Wd(this.Ld,c.F(),"eq")(H(a,c),H(b,c))},this)};
function jk(a,b,c){var d=null===b?[]:b.entries,e=ob(d,c.entries,a.Z.bind(a),function(a){return d[a]});b=[];for(var f=0,h=0;h<d.length;h++){var l=d[h];e[f]==l?f++:(l=a.jd.splice(f,1),l=kk(h,l,0,a.jd),b.push(l))}e=ob(d,c.entries,a.Z.bind(a),function(a,b){return c.entries[b]});for(h=f=0;h<c.entries.length;h++)l=c.entries[h],e[f]==l?f++:(a.jd.splice(h,0,l.ua.l),l=kk(h,[],1,a.jd),b.push(l));return b}function kk(a,b,c,d){return{addedCount:c,index:a,object:d,removed:b,type:"splice"}};function lk(){this.dc=x()}lk.prototype.xd=function(a,b){var c=ka(a.query).toString(),d=this.dc.get(c)||null;null===d&&(d=new mk(a),this.dc.set(c,d));d.xd(b)};lk.prototype.he=function(a,b){a=ka(a.query).toString();var c=this.dc.get(a)||null;c.he(b);0<c.Dc.size||this.dc.delete(a)};function ye(a,b){var c=B();b.forEach(function(a){c.add(a.getName())});var d=[];a.dc.forEach(function(a){a=a.xc();a.context.from.some(function(a){return c.has(a.getName())})&&d.push(a)});return d}
function we(a,b,c){b=ka(null!=b.Sc?b.Sc:b).toString();a=a.dc.get(b)||null;null!==a&&nk(a,c)}function mk(a){this.Cf=a;this.Dc=B();this.ug=[];this.Xe=null;this.Nf=new hk(a.query,this.ug)}mk.prototype.xd=function(a){this.Dc.has(a)||this.Dc.add(a)};mk.prototype.he=function(a){return this.Dc.delete(a)};mk.prototype.xc=function(){var a=this.Cf;return{context:a.query,de:$h(a)}};function nk(a,b){var c=jk(a.Nf,a.Xe,b);a.Xe=b;0<c.length&&a.Dc.forEach(function(a){a(c)})};function ok(a,b){var c=a.b(A),d=b||{};b=new tf(c);a.pb(sc,b);b=null;var e=!1;null!=d.storeType?b=d.storeType:(n(bc)||(bc=new ac),b=bc,b=b.bg?0:b.Qg?4:1);switch(b){case 0:b=new Ye(a,c);break;case 1:b=new ef(c);break;case 5:b=new gf(c);break;case 4:b=new qf(a,c,d.webSqlDbSize);break;case 3:b=new Le(c,d.firebase);e=!0;break;default:throw new D(300);}a.pb(rc,b);var f=new ug;a.pb(tc,f);return b.Da(d.onUpgrade).then(function(){var b=new Lj(a);a.pb(uc,b);b=new Tj;a.pb(vc,b);b=new lk;a.pb(wc,b);return f.Da(c)}).then(function(){if(e){var b=
new Ae(a);b.Na.subscribe(b.Zd.bind(b))}d.enableInspector&&(window.top["#lfInspect"]=bk);return(new ng(a)).Da(c)})};function pk(a){this.c=a;this.g=a.b(A);this.aa=B(this.g.oa());this.Cb=w()}function qk(a){var b=a.c.b(tc),c=a.c.b(sc),d={};a.g.oa().forEach(function(a){var e=b.get(bf(a)).Sa(),e=uf(c,e).map(function(a){return a.l});d[a.getName()]=e});return{name:a.g.name(),version:a.g.version(),tables:d}}m=pk.prototype;m.exec=function(){var a=qk(this),a=new Hd(new dc(-1,a),!0);return v([new G([a],[])])};m.F=k(0);m.da=g("aa");m.V=function(){return ka(this)};m.getPriority=k(0);function rk(a,b){this.c=a;this.g=a.b(A);this.aa=B(this.g.oa());this.Cb=w();this.Aa=b;this.Na=a.b(rc);this.U=a.b(sc);this.B=a.b(tc)}m=rk.prototype;
m.exec=function(){if(!(this.Na instanceof Ye||this.Na instanceof ef||this.Na instanceof qf))throw new D(300);var a;a:{a=this.g.oa();for(var b=0;b<a.length;++b)if(0<this.B.get(bf(a[b])).X().ia){a=!1;break a}a=!0}if(!a)throw new D(110);if(this.g.name()!=this.Aa.name||this.g.version()!=this.Aa.version)throw new D(111);if(null==this.Aa.tables)throw new D(112);return sk(this)};m.F=k(1);m.da=g("aa");m.V=function(){return ka(this)};m.getPriority=k(0);
function sk(a){var b=new kd(a.c,a.aa),b=a.Na.Db(a.F(),C(a.aa),b),c;for(c in a.Aa.tables){var d=a.g.table(c),e=a.Aa.tables[c].map(function(a){return d.vb(a)}),f=b.H(c,d.ib,0);a.U.Ub(c,e);var h=a.B.jc.get(c)||[];e.forEach(function(a){h.forEach(function(b){var c=a.lb(b.getName());b.add(c,a.id())})});f.put(e)}return b.ka()};function tk(a,b){this.c=a;this.Na=a.b(rc);this.Ha=a.b(vc);this.Gb=a.b(wc);this.aa=B(b);this.Pa=new kd(this.c,this.aa);this.Cb=w();this.uc=w();this.ue=w()}m=tk.prototype;m.exec=function(){this.ue.resolve();return this.uc.ha};m.F=k(1);m.da=g("aa");m.V=function(){return ka(this)};m.getPriority=k(2);function uk(a){ze(a.Ha,a);return a.ue.ha}
function vk(a,b){b=b.xc();return b.de.Za().exec(a.Pa,b.context).then(function(a){return zd(a[0])},function(a){this.Pa.Hb();var b=new ib(a.name);this.uc.reject(b);throw a;}.bind(a))}m.ka=function(){this.ja=this.Na.Db(this.F(),C(this.aa),this.Pa);this.ja.ka().then(function(){this.Ic();this.uc.resolve()}.bind(this),function(a){this.Pa.Hb();this.uc.reject(a)}.bind(this));return this.Cb.ha};m.Hb=function(){this.Pa.Hb();this.uc.resolve();return this.Cb.ha};
m.Ic=function(){var a=ye(this.Gb,this.aa);0!=a.length&&(a=new ve(this.c,a),ze(this.Ha,a))};m.X=function(){var a=null;null!=this.ja&&(a=this.ja.X());return null===a?new z(!1,0,0,0,0):a};function V(a){this.c=a;this.Ha=a.b(vc);this.Ib=null;this.Ra=0;0==wk.size&&(wk.set(0,B([1,4])),wk.set(1,B([2])),wk.set(2,B([3,5,6])),wk.set(3,B([2,7])),wk.set(4,B([7])),wk.set(5,B([7])),wk.set(6,B([7])))}q("lf.proc.Transaction",V);var wk=x();function xk(a,b){var c=wk.get(a.Ra)||null;if(null===c||!c.has(b))throw new D(107,a.Ra,b);a.Ra=b}
V.prototype.exec=function(a){xk(this,4);var b=[];try{a.forEach(function(a){a.Ya();b.push(a.xc())},this)}catch(c){return xk(this,7),ab(c)}this.Ib=new Ch(this.c,b);return ze(this.Ha,this.Ib).then(function(a){xk(this,7);return a.map(function(a){return zd(a)})}.bind(this),function(a){xk(this,7);throw a;}.bind(this))};V.prototype.exec=V.prototype.exec;V.prototype.Af=function(a){xk(this,1);this.Ib=new tk(this.c,a);return uk(this.Ib).then(function(){xk(this,2)}.bind(this))};V.prototype.begin=V.prototype.Af;
V.prototype.zf=function(a){xk(this,3);try{a.Ya()}catch(b){return xk(this,7),ab(b)}return vk(this.Ib,a).then(function(a){xk(this,2);return a}.bind(this),function(a){xk(this,7);throw a;}.bind(this))};V.prototype.attach=V.prototype.zf;V.prototype.ka=function(){xk(this,5);return this.Ib.ka().then(function(){xk(this,7)}.bind(this))};V.prototype.commit=V.prototype.ka;V.prototype.Hb=function(){xk(this,6);return this.Ib.Hb().then(function(){xk(this,7)}.bind(this))};V.prototype.rollback=V.prototype.Hb;
V.prototype.X=function(){if(7!=this.Ra)throw new D(105);return this.Ib.X()};V.prototype.stats=V.prototype.X;function W(a){this.c=a;this.g=a.b(A);this.dd=!1}q("lf.proc.Database",W);W.prototype.Da=function(a){this.c.pb(A,this.g);return ok(this.c,a).then(function(){this.dd=!0;this.Ha=this.c.b(vc);return this}.bind(this))};W.prototype.init=W.prototype.Da;W.prototype.xb=g("g");W.prototype.getSchema=W.prototype.xb;function yk(a){if(!a.dd)throw new D(2);}W.prototype.select=function(a){yk(this);return new U(this.c,1!=arguments.length||null!=arguments[0]?Array.prototype.slice.call(arguments):[])};
W.prototype.select=W.prototype.select;W.prototype.zb=function(){yk(this);return new bi(this.c)};W.prototype.insert=W.prototype.zb;W.prototype.Rd=function(){yk(this);return new bi(this.c,!0)};W.prototype.insertOrReplace=W.prototype.Rd;W.prototype.update=function(a){yk(this);return new li(this.c,a)};W.prototype.update=W.prototype.update;W.prototype.delete=function(){yk(this);return new ai(this.c)};W.prototype["delete"]=W.prototype.delete;
W.prototype.observe=function(a,b){yk(this);this.c.b(wc).xd(a,b)};W.prototype.observe=W.prototype.observe;W.prototype.unobserve=function(a,b){yk(this);this.c.b(wc).he(a,b)};W.prototype.unobserve=W.prototype.unobserve;W.prototype.Jf=function(){yk(this);return new V(this.c)};W.prototype.createTransaction=W.prototype.Jf;W.prototype.close=function(){try{this.c.b(rc).close()}catch(a){}this.c.clear();this.dd=!1};W.prototype.close=W.prototype.close;
W.prototype.Tf=function(){yk(this);var a=new pk(this.c);return ze(this.Ha,a).then(function(a){return zd(a[0])[0]})};W.prototype["export"]=W.prototype.Tf;W.prototype.import=function(a){yk(this);a=new rk(this.c,a);return ze(this.Ha,a).then(k(null))};W.prototype["import"]=W.prototype.import;function X(a,b,c,d,e,f){this.S=a;this.w=b;this.Te=c;this.Re=d;this.sf=e;this.Ja=f||null}q("lf.schema.BaseColumn",X);m=X.prototype;m.getName=g("w");m.j=function(){return Jd(this.S)+"."+this.w};m.toString=function(){return this.j()};m.H=g("S");m.F=g("sf");X.prototype.getType=X.prototype.F;X.prototype.Ca=function(){null==this.sa&&(this.sa=[],this.H().Ca().forEach(function(a){-1!=a.f.map(function(a){return a.ba.getName()}).indexOf(this.w)&&this.sa.push(a)},this));return this.sa};
X.prototype.Ba=function(){if(!n(this.fa)){var a=this.Ca().filter(function(a){return 1!=a.f.length?!1:a.f[0].ba.getName()==this.getName()},this);this.fa=0<a.length?a[0]:null}return this.fa};X.prototype.fc=g("Re");X.prototype.isNullable=X.prototype.fc;X.prototype.zc=g("Te");X.prototype.Oa=function(a){return Ng(this,a,"eq")};X.prototype.eq=X.prototype.Oa;X.prototype.$e=function(a){return Ng(this,a,"neq")};X.prototype.neq=X.prototype.$e;X.prototype.pg=function(a){return Ng(this,a,"lt")};
X.prototype.lt=X.prototype.pg;X.prototype.qg=function(a){return Ng(this,a,"lte")};X.prototype.lte=X.prototype.qg;X.prototype.Xf=function(a){return Ng(this,a,"gt")};X.prototype.gt=X.prototype.Xf;X.prototype.Yf=function(a){return Ng(this,a,"gte")};X.prototype.gte=X.prototype.Yf;X.prototype.match=function(a){return Ng(this,a,"match")};X.prototype.match=X.prototype.match;X.prototype.Bf=function(a,b){return Ng(this,[a,b],"between")};X.prototype.between=X.prototype.Bf;
X.prototype.Zf=function(a){return Ng(this,a,"in")};X.prototype["in"]=X.prototype.Zf;X.prototype.jg=function(){return this.Oa(null)};X.prototype.isNull=X.prototype.jg;X.prototype.ig=function(){return this.$e(null)};X.prototype.isNotNull=X.prototype.ig;X.prototype.oc=function(a){return new X(this.S,this.w,this.Te,this.Re,this.sf,a)};X.prototype.as=X.prototype.oc;function zk(a){this.g=a;this.Dd=new Tc;this.ie=new Tc;this.bf=new Tc;this.De=x();this.h=new Tc;this.ze=new Tc;this.gf=new Tc;this.Ce=new Tc;Ak(this)}function Ak(a){a.g.oa().forEach(function(a){var b=a.getName();a.Kb.Pd.forEach(function(c){this.bf.set(b,this.g.table(c.Ua));this.h.set(c.Ua,a);0==c.action?(this.ie.set(c.Ua,c),this.gf.set(c.Ua,a)):(this.Dd.set(c.Ua,c),this.ze.set(c.Ua,a));this.De.set(a.getName()+"."+c.tb,c.Ua);this.Ce.set(c.Ua+"."+c.Fc,a.getName())},this)},a)}
function ad(a,b,c){if(null!=c)return 1==c?a.Dd.get(b):a.ie.get(b);c=a.Dd.get(b);a=a.ie.get(b);return null===c&&null===a?null:(c||[]).concat(a||[])}function Ih(a,b){a=b.get(a);return null===a?[]:a}function Kh(a,b){var c=B();b.forEach(function(a){(a=this.De.get(a))&&c.add(a)},a);return C(c).map(function(a){return this.g.table(a)},a)}function Gh(a,b,c){return null!=c?0==c?Ih(b,a.gf):Ih(b,a.ze):Ih(b,a.h)}
function Lh(a,b){var c=B();b.forEach(function(a){(a=this.Ce.get(a))&&a.forEach(function(a){c.add(a)})},a);return C(c).map(function(a){return this.g.table(a)},a)};function Bk(a,b,c){this.nd=a;this.tg=b;this.Pd=c}q("lf.schema.Constraint",Bk);Bk.prototype.Wf=g("nd");Bk.prototype.getPrimaryKey=Bk.prototype.Wf;Bk.prototype.Vf=g("Pd");Bk.prototype.getForeignKeys=Bk.prototype.Vf;function Ck(a,b,c){var d=a.ref.split(".");if(2!=d.length)throw new D(540,c);this.Be=b;this.tb=a.local;this.Ua=d[0];this.Fc=d[1];this.name=b+"."+c;this.action=a.action;this.timing=a.timing};function Y(a){Dk(a);this.Ld=Vd();this.w=a;this.J=x();this.ud=B();this.lc=B();this.hd=B();this.Ea=null;this.sa=x();this.md=!1;this.wb=[]}q("lf.schema.TableBuilder",Y);function Ek(a){this.name=a.name;this.order=a.order;this.autoIncrement=a.autoIncrement}var Fk=B([0,6]);function Dk(a){if(!/^[A-Za-z_][A-Za-z0-9_]*$/.test(a))throw new D(502,a);}function Gk(a,b){if(b==a.w)throw new D(546,b);if(a.J.has(b)||a.sa.has(b)||a.lc.has(b))throw new D(503,a.w+"."+b);}
function Hk(a,b){var c=!1;b.forEach(function(a){var b=this.J.get(a.name);c=c||a.autoIncrement;if(a.autoIncrement&&3!=b)throw new D(504);},a);if(c&&1<b.length)throw new D(505);}function Ik(a){if(null!==a.Ea){var b=a.sa.get(a.Ea).map(function(a){return a.name}),c=0;if(a.wb.some(function(a,e){c=e;return-1!=b.indexOf(a.tb)},a))throw new D(543,a.wb[c].name);}}
function Jk(a){if(null!==a.Ea){var b=function(a){return a.name},c=JSON.stringify(a.sa.get(a.Ea).map(b));a.sa.forEach(function(a,e){if(e!=this.Ea&&(a=a.map(b),JSON.stringify(a)==c))throw new D(544,this.w+"."+e);},a)}}function Kk(a){null===a.Ea||a.sa.get(a.Ea).forEach(function(a){if(this.hd.has(a.name))throw new D(545,this.w+"."+a.name);},a)}Y.prototype.uf=function(a,b){Dk(a);Gk(this,a);this.J.set(a,b);Fk.has(b)&&this.we([a]);return this};Y.prototype.addColumn=Y.prototype.uf;
Y.prototype.wf=function(a,b){var c=this.w;this.Ea="pk"+(c[0].toUpperCase()+c.substring(1));Dk(this.Ea);Gk(this,this.Ea);a=Lk(this,a,!0,void 0,b);Hk(this,a);1==a.length&&this.ud.add(a[0].name);this.lc.add(this.Ea);this.sa.set(this.Ea,a);return this};Y.prototype.addPrimaryKey=Y.prototype.wf;
Y.prototype.vf=function(a,b){Dk(a);Gk(this,a);b=new Ck(b,this.w,a);n(b.action)||(b.action=0);n(b.timing)||(b.timing=0);if(1==b.action&&1==b.timing)throw new D(506);if(!this.J.has(b.tb))throw new D(540,a);this.wb.push(b);this.ve(a,[b.tb],this.ud.has(b.tb));return this};Y.prototype.addForeignKey=Y.prototype.vf;Y.prototype.xf=function(a,b){Dk(a);Gk(this,a);b=Lk(this,b,!0);1==b.length&&(this.ud.add(b[0].name),Mk(this,b[0].name));this.sa.set(a,b);this.lc.add(a);return this};Y.prototype.addUnique=Y.prototype.xf;
function Mk(a,b){a.wb.forEach(function(a){a.tb==b&&this.lc.add(a.name.split(".")[1])},a)}Y.prototype.we=function(a){Lk(this,a,!1).forEach(function(a){this.hd.add(a.name)},this);return this};Y.prototype.addNullable=Y.prototype.we;Y.prototype.ve=function(a,b,c,d){Dk(a);Gk(this,a);b=Lk(this,b,!0,d);c&&this.lc.add(a);this.sa.set(a,b);return this};Y.prototype.addIndex=Y.prototype.ve;Y.prototype.Bb=ca("md");Y.prototype.persistentIndex=Y.prototype.Bb;
Y.prototype.xb=function(){Ik(this);Jk(this);Kk(this);return new (Nk(this))};Y.prototype.getSchema=Y.prototype.xb;function Lk(a,b,c,d,e){var f=b,f="string"==typeof b[0]?b.map(function(a){return new Ek({name:a,order:null!=d?d:1,autoIncrement:e||!1})}):b.map(function(a){return new Ek(a)});f.forEach(function(a){if(!this.J.has(a.name))throw new D(508,this.w,a.name);if(c){var b=this.J.get(a.name);if(0==b||6==b)throw new D(509,this.w,a.name);}},a);return f}
function Nk(a){function b(){function b(b){return a.sa.get(b).map(function(a){return{ba:this[a.name],order:a.order,autoIncrement:a.autoIncrement}},this)}var d=cc(a.J).map(function(b){this[b]=new X(this,b,a.ud.has(b),a.hd.has(b),a.J.get(b));return this[b]},this),e=cc(a.sa).map(function(c){return new Pg(a.w,c,a.lc.has(c),b.call(this,c))},this);Q.call(this,a.w,d,e,a.md);var f=null===a.Ea?null:new Pg(a.w,a.Ea,!0,b.call(this,a.Ea)),h=d.filter(function(b){return!a.hd.has(b.getName())});this.Kb=new Bk(f,
h,a.wb);this.kf=Ok(a,d,e)}r(b,Q);b.prototype.vb=function(a){return new this.kf(ec++,a)};b.prototype.createRow=b.prototype.vb;b.prototype.ib=function(a){var b={};this.jb().forEach(function(c){var d=c.getName();c=c.F();var e=a.value[d];if(0==c)if(c=e,null!=c&&""!=c){0!=c.length%2&&(c="0"+c);for(var e=new ArrayBuffer(c.length/2),l=new Uint8Array(e),p=0,L=0;p<c.length;p+=2)l[L++]=parseInt(c.substr(p,2),16);c=e}else c=null;else c=2==c?null!=e?new Date(e):null:e;b[d]=c},this);return new this.kf(a.id,b)};
b.prototype.deserializeRow=b.prototype.ib;b.prototype.Ie=g("Kb");b.prototype.getConstraint=b.prototype.Ie;return b}
function Ok(a,b,c){function d(a,d){this.J=b;this.sa=c;dc.call(this,a,d)}r(d,dc);d.prototype.Fe=function(){var a={};this.J.forEach(function(b){a[b.getName()]=b.fc()?null:Sc[b.F()]});return a};d.prototype.rf=function(){var a={};this.J.forEach(function(b){var c=b.getName();b=b.F();var d=this.l[c];a[c]=0==b?null!=d?hc(d):null:2==b?null!=d?d.getTime():null:6==b?null!=d?d:null:d},this);return a};var e=function(a){var b=this.J.get(a.getName()),c=this.Ld.Ue.get(b)||null;return function(b){return c(b[a.getName()])}}.bind(a),
f=function(a){var b=a.map(function(a){return e(a.ba)});return function(a){return b.map(function(b){return b(a)})}}.bind(a),h={};c.forEach(function(a){var b=a.j();a=1==a.f.length?e(a.f[0].ba):f(a.f);h[b]=a});d.prototype.lb=function(a){return-1!=a.indexOf("#")?this.id():h.hasOwnProperty(a)?h[a](this.l):null};return d};function Pk(a,b){this.g=new Z(a,b);this.rb=x();this.vc=!1;this.i=null;this.Uc=!1}q("lf.schema.Builder",Pk);function Qk(a,b){b.wb.forEach(function(a){var c=a.Ua;if(!this.rb.has(c))throw new D(536,a.name);var c=this.rb.get(c).xb(),e=a.Fc;if(!c.hasOwnProperty(e))throw new D(537,a.name);if(b.xb()[a.tb].F()!=c[e].F())throw new D(538,a.name);if(!c[e].zc())throw new D(539,a.name);},a)}
Pk.prototype.Ff=function(a){a.wb.forEach(function(a){this.rb.get(a.Ua).wb.forEach(function(b){if(b.tb==a.Fc)throw new D(534,a.name);},this)},this)};function Rk(a){a.vc||(a.rb.forEach(function(a){Qk(this,a);a=a.xb();this.g.L.set(a.getName(),a)},a),y(a.rb).forEach(a.Ff,a),Sk(a),a.rb.clear(),a.vc=!0)}function Tk(a,b,c){b.se||(b.se=!0,b.$d=!0,b.Ge.forEach(function(a){a=c.get(a);if(!a.se)Tk(this,a,c);else if(a.$d&&b!=a)throw new D(533);},a));b.$d=!1}
function Sk(a){var b=x();a.g.L.forEach(function(a,d){b.set(d,new Uk(d))},a);a.rb.forEach(function(a,d){a.wb.forEach(function(a){b.get(a.Ua).Ge.add(d)})});y(b).forEach(function(a){Tk(this,a,b)},a)}function Uk(a){this.$d=this.se=!1;this.Ge=B();this.kc=a}Pk.prototype.xb=function(){this.vc||Rk(this);return this.g};Pk.prototype.getSchema=Pk.prototype.xb;Pk.prototype.Le=function(){var a=new qc("ns_"+this.g.name()),b=Zj(),c;b.gd(a)?c=b.b(a):(c=new Xj,b.pb(a,c));return c};Pk.prototype.getGlobal=Pk.prototype.Le;
Pk.prototype.connect=function(a){if(this.Uc||null!==this.i&&this.i.dd)throw new D(113);this.Uc=!0;if(null===this.i){var b=this.Le();b.gd(A)||b.pb(A,this.xb());this.i=new W(b)}return this.i.Da(a).then(function(a){this.Uc=!1;return a}.bind(this),function(a){this.Uc=!1;throw a;}.bind(this))};Pk.prototype.connect=Pk.prototype.connect;Pk.prototype.If=function(a){if(this.rb.has(a))throw new D(503,a);if(this.vc)throw new D(535);this.rb.set(a,new Y(a));return this.rb.get(a)};Pk.prototype.createTable=Pk.prototype.If;
Pk.prototype.me=function(a){if(this.vc)throw new D(535);this.g.me(a);return this};Pk.prototype.setPragma=Pk.prototype.me;function Z(a,b){this.w=a;this.Yb=b;this.L=x();this.ee={Of:!1}}q("lf.schema.DatabaseSchema",Z);Z.prototype.name=g("w");Z.prototype.name=Z.prototype.name;Z.prototype.version=g("Yb");Z.prototype.version=Z.prototype.version;Z.prototype.oa=function(){return y(this.L)};Z.prototype.tables=Z.prototype.oa;Z.prototype.table=function(a){if(!this.L.has(a))throw new D(101,a);return this.L.get(a)};
Z.prototype.table=Z.prototype.table;Z.prototype.info=function(){this.Qe||(this.Qe=new zk(this));return this.Qe};Z.prototype.Bg=g("ee");Z.prototype.pragma=Z.prototype.Bg;Z.prototype.me=ca("ee");q("lf.schema.create",function(a,b){return new Pk(a,b)});u.prototype.catch=u.prototype.pe;u.prototype["catch"]=u.prototype.catch;
try{if(module){module.exports=lf;}}catch(e){}}.bind(window))();
//# sourceMappingURL=lovefield.es6.js.map
