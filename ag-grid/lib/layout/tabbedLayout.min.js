"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var utils_1=require("../utils"),TabbedLayout=function(){function i(t){var e=this;this.items=[],this.params=t,this.eGui=document.createElement("div"),this.eGui.innerHTML=i.TEMPLATE,this.eHeader=this.eGui.querySelector('[ref="tabHeader"]'),this.eBody=this.eGui.querySelector('[ref="tabBody"]'),utils_1._.addCssClass(this.eGui,t.cssClass),t.items&&t.items.forEach(function(t){return e.addItem(t)})}return i.prototype.setAfterAttachedParams=function(t){this.afterAttachedParams=t},i.prototype.getMinDimensions=function(){var e=this.eGui.cloneNode(!0),i=e.querySelector('[ref="tabBody"]');e.style.position="fixed",this.eGui.appendChild(e);var s=0,a=0;return this.items.forEach(function(t){utils_1._.clearElement(i);t=t.tabbedItem.bodyPromise.resolveNow(null,function(t){return t.cloneNode(!0)});null!=t&&(i.appendChild(t),s<e.offsetWidth&&(s=e.offsetWidth),a<e.offsetHeight&&(a=e.offsetHeight))}),this.eGui.removeChild(e),{height:a,width:s}},i.prototype.showFirstItem=function(){0<this.items.length&&this.showItemWrapper(this.items[0])},i.prototype.addItem=function(t){var e=document.createElement("span");e.appendChild(t.title),utils_1._.addCssClass(e,"ag-tab"),this.eHeader.appendChild(e);t={tabbedItem:t,eHeaderButton:e};this.items.push(t),e.addEventListener("click",this.showItemWrapper.bind(this,t))},i.prototype.showItem=function(e){var t=utils_1._.find(this.items,function(t){return t.tabbedItem===e});t&&this.showItemWrapper(t)},i.prototype.showItemWrapper=function(t){var e=this;this.params.onItemClicked&&this.params.onItemClicked({item:t.tabbedItem}),this.activeItem!==t?(utils_1._.clearElement(this.eBody),t.tabbedItem.bodyPromise.then(function(t){e.eBody.appendChild(t)}),this.activeItem&&utils_1._.removeCssClass(this.activeItem.eHeaderButton,"ag-tab-selected"),utils_1._.addCssClass(t.eHeaderButton,"ag-tab-selected"),(this.activeItem=t).tabbedItem.afterAttachedCallback&&t.tabbedItem.afterAttachedCallback(this.afterAttachedParams)):utils_1._.callIfPresent(this.params.onActiveItemClicked)},i.prototype.getGui=function(){return this.eGui},i.TEMPLATE='<div><div ref="tabHeader" class="ag-tab-header"></div><div ref="tabBody" class="ag-tab-body"></div></div>',i}();exports.TabbedLayout=TabbedLayout;