"use strict";var __extends=this&&this.__extends||function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)};return function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}}(),__decorate=this&&this.__decorate||function(t,e,o,r){var n,a=arguments.length,i=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,r);else for(var s=t.length-1;0<=s;s--)(n=t[s])&&(i=(a<3?n(i):3<a?n(e,o,i):n(e,o))||i);return 3<a&&i&&Object.defineProperty(e,o,i),i},__metadata=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(exports,"__esModule",{value:!0});var component_1=require("../widgets/component"),context_1=require("../context/context"),utils_1=require("../utils"),DndSourceComp=function(i){function t(t,e,o,r,n){var a=i.call(this,'<div class="ag-row-drag" draggable="true"></div>')||this;return a.rowNode=t,a.column=e,a.cellValue=o,a.beans=r,a.eCell=n,a}return __extends(t,i),t.prototype.postConstruct=function(){this.getGui().appendChild(utils_1._.createIconNoSpan("rowDrag",this.beans.gridOptionsWrapper,null)),this.addDragSource(),this.checkVisibility()},t.prototype.addDragSource=function(){this.addGuiEventListener("dragstart",this.onDragStart.bind(this))},t.prototype.onDragStart=function(e){var o=this,t=this.column.getColDef().dndSourceOnRowDrag,r=utils_1._.isBrowserIE();r||e.dataTransfer.setDragImage(this.eCell,0,0);t?t({rowNode:this.rowNode,dragEvent:e}):function(){try{var t=JSON.stringify(o.rowNode.data);r?e.dataTransfer.setData("text",t):(e.dataTransfer.setData("application/json",t),e.dataTransfer.setData("text/plain",t))}catch(t){}}()},t.prototype.checkVisibility=function(){var t=this.column.isDndSource(this.rowNode);this.setDisplayed(t)},__decorate([context_1.PostConstruct,__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",void 0)],t.prototype,"postConstruct",null),t}(component_1.Component);exports.DndSourceComp=DndSourceComp;