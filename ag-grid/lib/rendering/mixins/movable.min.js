"use strict";var __extends=this&&this.__extends||function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)};return function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}}(),__decorate=this&&this.__decorate||function(t,e,o,r){var i,n=arguments.length,a=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,r);else for(var s=t.length-1;0<=s;s--)(i=t[s])&&(a=(n<3?i(a):3<n?i(e,o,a):i(e,o))||a);return 3<n&&a&&Object.defineProperty(e,o,a),a},__metadata=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(exports,"__esModule",{value:!0});var dragService_1=require("../../dragAndDrop/dragService"),context_1=require("../../context/context");function Movable(t){var e;function o(){var t=null!==e&&e.apply(this,arguments)||this;return t.movable=!1,t.isMoving=!1,t}return __extends(o,e=t),o.prototype.postConstruct=function(){e.prototype.postConstruct.call(this);var t=this.config.movable;t&&this.setMovable(t)},o.prototype.onMoveStart=function(t){this.isMoving=!0,this.updateDragStartPosition(t.clientX,t.clientY)},o.prototype.onMove=function(t){var e,o,r,i;this.isMoving&&(e=(r=this.position).x,o=r.y,r=(i=this.calculateMouseMovement({e:t,isTop:!0,anywhereWithin:!0,topBuffer:this.getHeight()-this.getBodyHeight()})).movementX,i=i.movementY,this.offsetElement(e+r,o+i),this.updateDragStartPosition(t.clientX,t.clientY))},o.prototype.onMoveEnd=function(){this.isMoving=!1},o.prototype.destroy=function(){e.prototype.destroy.call(this),this.setMovable(!1)},o.prototype.setMovable=function(t){var e;t!==this.movable&&(this.movable=t,e=this.moveElementDragListener||{eElement:this.moveElement,onDragStart:this.onMoveStart.bind(this),onDragging:this.onMove.bind(this),onDragStop:this.onMoveEnd.bind(this)},t?(this.dragService.addDragSource(e),this.moveElementDragListener=e):(this.dragService.removeDragSource(e),this.moveElementDragListener=void 0))},__decorate([context_1.Autowired("dragService"),__metadata("design:type",dragService_1.DragService)],o.prototype,"dragService",void 0),o}exports.Movable=Movable;