"use strict";var __extends=this&&this.__extends||function(){var s=function(i,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,t){i.__proto__=t}||function(i,t){for(var e in t)t.hasOwnProperty(e)&&(i[e]=t[e])})(i,t)};return function(i,t){function e(){this.constructor=i}s(i,t),i.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}();Object.defineProperty(exports,"__esModule",{value:!0});var component_1=require("../../widgets/component"),utils_1=require("../../utils");function Maximizable(i){var t;function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.MAXIMIZE_BTN_TEMPLATE='<div class="ag-dialog-button"></span>',i.isMaximizable=!1,i.isMaximized=!1,i.maximizeListeners=[],i.resizeListenerDestroy=null,i.lastPosition={x:0,y:0,width:0,height:0},i}return __extends(e,t=i),e.prototype.postConstruct=function(){t.prototype.postConstruct.call(this);var i=this.config.maximizable;i&&this.setMaximizable(i)},e.prototype.setMaximizable=function(i){var t=this;if(!1===i)return this.clearMaximizebleListeners(),void(this.maximizeButtonComp&&(this.maximizeButtonComp.destroy(),this.maximizeButtonComp=this.maximizeIcon=this.minimizeIcon=void 0));var e,s=this.eTitleBar;s&&i!==this.isMaximizable&&(e=this.maximizeButtonComp=new component_1.Component(this.MAXIMIZE_BTN_TEMPLATE),this.getContext().wireBean(e),(i=e.getGui()).appendChild(this.maximizeIcon=utils_1._.createIconNoSpan("maximize",this.gridOptionsWrapper)),i.appendChild(this.minimizeIcon=utils_1._.createIconNoSpan("minimize",this.gridOptionsWrapper)),utils_1._.addCssClass(this.minimizeIcon,"ag-hidden"),e.addDestroyableEventListener(i,"click",this.toggleMaximize.bind(this)),this.addTitleBarButton(e,0),this.maximizeListeners.push(this.addDestroyableEventListener(s,"dblclick",this.toggleMaximize.bind(this))),this.resizeListenerDestroy=this.addDestroyableEventListener(this,"resize",function(){t.isMaximized=!1,t.refreshMaximizeIcon()}))},e.prototype.toggleMaximize=function(){var i,t,e,s;this.isMaximized?(i=(s=this.lastPosition).x,t=s.y,e=s.width,s=s.height,this.setWidth(e),this.setHeight(s),this.offsetElement(i,t)):(this.lastPosition.width=this.getWidth(),this.lastPosition.height=this.getHeight(),this.lastPosition.x=this.position.x,this.lastPosition.y=this.position.y,this.offsetElement(0,0),this.setHeight(1/0),this.setWidth(1/0)),this.isMaximized=!this.isMaximized,this.refreshMaximizeIcon()},e.prototype.refreshMaximizeIcon=function(){utils_1._.addOrRemoveCssClass(this.maximizeIcon,"ag-hidden",this.isMaximized),utils_1._.addOrRemoveCssClass(this.minimizeIcon,"ag-hidden",!this.isMaximized)},e.prototype.clearMaximizebleListeners=function(){this.maximizeListeners.length&&(this.maximizeListeners.forEach(function(i){return i()}),this.maximizeListeners.length=0),this.resizeListenerDestroy&&(this.resizeListenerDestroy(),this.resizeListenerDestroy=null)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.maximizeButtonComp&&(this.maximizeButtonComp.destroy(),this.maximizeButtonComp=void 0),this.clearMaximizebleListeners()},e}exports.Maximizable=Maximizable;