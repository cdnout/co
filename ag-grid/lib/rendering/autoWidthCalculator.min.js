"use strict";var __decorate=this&&this.__decorate||function(e,t,r,o){var n,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,o);else for(var p=e.length-1;0<=p;p--)(n=e[p])&&(a=(i<3?n(a):3<i?n(t,r,a):n(t,r))||a);return 3<i&&a&&Object.defineProperty(t,r,a),a},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(exports,"__esModule",{value:!0});var rowRenderer_1=require("./rowRenderer"),context_1=require("../context/context"),gridOptionsWrapper_1=require("../gridOptionsWrapper"),headerWrapperComp_1=require("../headerRendering/header/headerWrapperComp"),AutoWidthCalculator=function(){function e(){}return e.prototype.registerGridComp=function(e){this.gridPanel=e},e.prototype.registerHeaderRootComp=function(e){this.headerRootComp=e},e.prototype.getPreferredWidthForColumn=function(e){var t=this.getHeaderCellForColumn(e);if(!t)return-1;var r=document.createElement("span");r.style.position="fixed";var o=this.gridPanel.getCenterContainer();o.appendChild(r),this.putRowCellsIntoDummyContainer(e,r),this.cloneItemIntoDummy(t,r);t=r.offsetWidth;return o.removeChild(r),t+this.gridOptionsWrapper.getAutoSizePadding()},e.prototype.getHeaderCellForColumn=function(t){var r=null;return this.headerRootComp.forEachHeaderElement(function(e){e instanceof headerWrapperComp_1.HeaderWrapperComp&&((e=e).getColumn()===t&&(r=e))}),r?r.getGui():null},e.prototype.putRowCellsIntoDummyContainer=function(e,t){var r=this;this.rowRenderer.getAllCellsForColumn(e).forEach(function(e){return r.cloneItemIntoDummy(e,t)})},e.prototype.cloneItemIntoDummy=function(e,t){var r=e.cloneNode(!0);r.style.width="",r.style.position="static",r.style.left="";e=document.createElement("div");e.style.display="table-row",e.appendChild(r),t.appendChild(e)},__decorate([context_1.Autowired("rowRenderer"),__metadata("design:type",rowRenderer_1.RowRenderer)],e.prototype,"rowRenderer",void 0),__decorate([context_1.Autowired("gridOptionsWrapper"),__metadata("design:type",gridOptionsWrapper_1.GridOptionsWrapper)],e.prototype,"gridOptionsWrapper",void 0),__decorate([context_1.Bean("autoWidthCalculator")],e)}();exports.AutoWidthCalculator=AutoWidthCalculator;