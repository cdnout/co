"use strict";var __decorate=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var l=e.length-1;0<=l;l--)(n=e[l])&&(a=(i<3?n(a):3<i?n(t,o,a):n(t,o))||a);return 3<i&&a&&Object.defineProperty(t,o,a),a},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(exports,"__esModule",{value:!0});var context_1=require("../context/context"),beans_1=require("./beans"),cellComp_1=require("./cellComp"),columnController_1=require("../columnController/columnController"),utils_1=require("../utils"),AutoHeightCalculator=function(){function e(){}return e.prototype.registerGridComp=function(e){this.gridPanel=e},e.prototype.getPreferredHeightForRow=function(t){var o=this;this.eDummyContainer||(this.eDummyContainer=document.createElement("div"),utils_1._.addCssClass(this.eDummyContainer,"ag-row ag-row-no-focus"));var e=this.gridPanel.getCenterContainer();e.appendChild(this.eDummyContainer);var r=[];this.columnController.getAllAutoRowHeightCols().filter(function(e){return e.isVisible()}).forEach(function(e){e=new cellComp_1.CellComp(o.$scope,o.beans,e,t,null,!0,!1);e.setParentRow(o.eDummyContainer),r.push(e)});var n=r.map(function(e){return e.getCreateTemplate()}).join(" ");this.eDummyContainer.innerHTML=n,r.forEach(function(e){return e.afterAttached()});for(var i=0,a=0;a<this.eDummyContainer.children.length;a++){var l=this.eDummyContainer.children[a];l.offsetHeight>i&&(i=l.offsetHeight)}return e.removeChild(this.eDummyContainer),r.forEach(function(e){e.detach(),e.destroy()}),utils_1._.clearElement(this.eDummyContainer),i},__decorate([context_1.Autowired("beans"),__metadata("design:type",beans_1.Beans)],e.prototype,"beans",void 0),__decorate([context_1.Autowired("$scope"),__metadata("design:type",Object)],e.prototype,"$scope",void 0),__decorate([context_1.Autowired("columnController"),__metadata("design:type",columnController_1.ColumnController)],e.prototype,"columnController",void 0),__decorate([context_1.Bean("autoHeightCalculator")],e)}();exports.AutoHeightCalculator=AutoHeightCalculator;