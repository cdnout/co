"use strict";var __extends=this&&this.__extends||function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)};return function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}();Object.defineProperty(exports,"__esModule",{value:!0});var agColorPanel_1=require("./agColorPanel"),agDialog_1=require("./agDialog"),agPickerField_1=require("./agPickerField"),agAbstractField_1=require("./agAbstractField"),utils_1=require("../utils"),AgColorPicker=function(i){function e(e){var t=i.call(this)||this;return t.displayTag="div",t.className="ag-color-picker",t.pickerIcon="colorPicker",t.setTemplate(t.TEMPLATE.replace(/%displayField%/g,t.displayTag)),e&&e.color&&(t.value=e.color),t}return __extends(e,i),e.prototype.postConstruct=function(){var e=this;i.prototype.postConstruct.call(this),utils_1._.addCssClass(this.getGui(),this.className),this.addDestroyableEventListener(this.eDisplayField,"click",function(){return e.showPicker()}),this.value&&this.setValue(this.value)},e.prototype.showPicker=function(){var e,t,i,r=this;this.displayedPicker?this.displayedPicker=!1:(e=this.getGui().getBoundingClientRect(),t=new agDialog_1.AgDialog({closable:!1,modal:!0,hideTitleBar:!0,minWidth:190,width:190,height:250,x:e.right-190,y:e.top-250}),this.getContext().wireBean(t),utils_1._.addCssClass(t.getGui(),"ag-color-dialog"),i=new agColorPanel_1.AgColorPanel({picker:this}),this.getContext().wireBean(i),i.addDestroyFunc(function(){t.isAlive()&&t.destroy()}),t.setParentComponent(this),t.setBodyComponent(i),i.setValue(this.getValue()),t.addDestroyFunc(function(){var e=r.isDestroyingPicker;r.displayedPicker=!1,e?r.isDestroyingPicker=!1:(r.isDestroyingPicker=!0,i.isAlive()&&i.destroy())}))},e.prototype.setValue=function(e){return this.value===e||(this.value=e,this.eDisplayField.style.backgroundColor=e,this.dispatchEvent({type:agAbstractField_1.AgAbstractField.EVENT_CHANGED})),this},e.prototype.getValue=function(){return this.value},e}(agPickerField_1.AgPickerField);exports.AgColorPicker=AgColorPicker;