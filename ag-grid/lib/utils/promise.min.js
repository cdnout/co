"use strict";var PromiseStatus;Object.defineProperty(exports,"__esModule",{value:!0}),function(t){t[t.IN_PROGRESS=0]="IN_PROGRESS",t[t.RESOLVED=1]="RESOLVED"}(PromiseStatus=exports.PromiseStatus||(exports.PromiseStatus={}));var Promise=function(){function o(t){this.status=PromiseStatus.IN_PROGRESS,this.resolution=null,this.listOfWaiters=[],t(this.onDone.bind(this),this.onReject.bind(this))}return o.all=function(t){return new o(function(n){var o=[],e=t.length;t.forEach(function(t,s){t.then(function(t){e--,o[s]=t,0==e&&n(o)}),o.push(null)})})},o.resolve=function(s){return new o(function(t){return t(s)})},o.external=function(){var s;return{promise:new o(function(t){s=t}),resolve:function(t){s(t)}}},o.prototype.then=function(t){this.status===PromiseStatus.IN_PROGRESS?this.listOfWaiters.push(t):t(this.resolution)},o.prototype.firstOneOnly=function(t){this.status===PromiseStatus.IN_PROGRESS?0===this.listOfWaiters.length&&this.listOfWaiters.push(t):t(this.resolution)},o.prototype.map=function(n){var t=this;return new o(function(s){t.then(function(t){s(n(t))})})},o.prototype.resolveNow=function(t,s){return this.status==PromiseStatus.IN_PROGRESS?t:s(this.resolution)},o.prototype.onDone=function(s){this.status=PromiseStatus.RESOLVED,this.resolution=s,this.listOfWaiters.forEach(function(t){return t(s)})},o.prototype.onReject=function(t){console.warn("TBI")},o}();exports.Promise=Promise;