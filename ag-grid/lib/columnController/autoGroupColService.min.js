"use strict";var __decorate=this&&this.__decorate||function(e,t,r,o){var n,a=arguments.length,i=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,o);else for(var u=e.length-1;0<=u;u--)(n=e[u])&&(i=(a<3?n(i):3<a?n(t,r,i):n(t,r))||i);return 3<a&&i&&Object.defineProperty(t,r,i),i},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(exports,"__esModule",{value:!0});var context_1=require("../context/context"),column_1=require("../entities/column"),gridOptionsWrapper_1=require("../gridOptionsWrapper"),columnController_1=require("./columnController"),columnFactory_1=require("./columnFactory"),constants_1=require("../constants"),utils_1=require("../utils"),AutoGroupColService=function(){function e(){}var n=e;return e.prototype.createAutoGroupColumns=function(e){var r=this,o=[],t=this.gridOptionsWrapper.isTreeData(),n=this.gridOptionsWrapper.isGroupMultiAutoColumn();return t&&n&&(console.warn("ag-Grid: you cannot mix groupMultiAutoColumn with treeData, only one column can be used to display groups when doing tree data"),n=!1),n?e.forEach(function(e,t){o.push(r.createOneAutoGroupColumn(e,t))}):o.push(this.createOneAutoGroupColumn()),o},e.prototype.createOneAutoGroupColumn=function(e,t){var r=this.generateDefaultColDef(e),o=e?constants_1.Constants.GROUP_AUTO_COLUMN_ID+"-"+e.getId():n.GROUP_AUTO_COLUMN_BUNDLE_ID,e=this.gridOptionsWrapper.getAutoGroupColumnDef();utils_1._.mergeDeep(r,e),(r=this.columnFactory.mergeColDefs(r)).colId=o,this.gridOptionsWrapper.isTreeData()||utils_1._.missing(r.field)&&utils_1._.missing(r.valueGetter)&&utils_1._.missing(r.filterValueGetter)&&(r.filter=!1),t&&0<t&&(r.headerCheckboxSelection=!1);o=new column_1.Column(r,null,o,!0);return this.context.wireBean(o),o},e.prototype.generateDefaultColDef=function(e){var t=this.gridOptionsWrapper.getAutoGroupColumnDef(),r={headerName:this.gridOptionsWrapper.getLocaleTextFunc()("group","Group")};return t&&(t.cellRenderer||t.cellRendererFramework)||(r.cellRenderer="agGroupCellRenderer"),e?(t=e.getColDef(),utils_1._.assign(r,{headerName:this.columnController.getDisplayNameForColumn(e,"header"),headerValueGetter:t.headerValueGetter}),t.cellRenderer&&utils_1._.assign(r,{cellRendererParams:{innerRenderer:t.cellRenderer,innerRendererParams:t.cellRendererParams}}),r.showRowGroup=e.getColId()):r.showRowGroup=!0,r},e.GROUP_AUTO_COLUMN_BUNDLE_ID=constants_1.Constants.GROUP_AUTO_COLUMN_ID,__decorate([context_1.Autowired("gridOptionsWrapper"),__metadata("design:type",gridOptionsWrapper_1.GridOptionsWrapper)],e.prototype,"gridOptionsWrapper",void 0),__decorate([context_1.Autowired("context"),__metadata("design:type",context_1.Context)],e.prototype,"context",void 0),__decorate([context_1.Autowired("columnController"),__metadata("design:type",columnController_1.ColumnController)],e.prototype,"columnController",void 0),__decorate([context_1.Autowired("columnFactory"),__metadata("design:type",columnFactory_1.ColumnFactory)],e.prototype,"columnFactory",void 0),n=__decorate([context_1.Bean("autoGroupColService")],e)}();exports.AutoGroupColService=AutoGroupColService;