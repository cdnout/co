"use strict";var __decorate=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var c=e.length-1;0<=c;c--)(o=e[c])&&(s=(i<3?o(s):3<i?o(t,r,s):o(t,r))||s);return 3<i&&s&&Object.defineProperty(t,r,s),s},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(exports,"__esModule",{value:!0});var eventService_1=require("../eventService"),gridOptionsWrapper_1=require("../gridOptionsWrapper"),context_1=require("./context"),utils_1=require("../utils"),BeanStub=function(){function e(){this.destroyFunctions=[],this.destroyed=!1}return e.prototype.getFrameworkOverrides=function(){return this.frameworkOverrides},e.prototype.getContext=function(){return this.context},e.prototype.destroy=function(){this.destroyFunctions.forEach(function(e){return e()}),this.destroyFunctions.length=0,this.destroyed=!0,this.dispatchEvent({type:e.EVENT_DESTROYED})},e.prototype.addEventListener=function(e,t){this.localEventService||(this.localEventService=new eventService_1.EventService),this.localEventService.addEventListener(e,t)},e.prototype.removeEventListener=function(e,t){this.localEventService&&this.localEventService.removeEventListener(e,t)},e.prototype.dispatchEventAsync=function(e){var t=this;window.setTimeout(function(){return t.dispatchEvent(e)},0)},e.prototype.dispatchEvent=function(e){this.localEventService&&this.localEventService.dispatchEvent(e)},e.prototype.addDestroyableEventListener=function(e,t,r){var n=this;if(!this.destroyed){e instanceof HTMLElement?utils_1._.addSafePassiveEventListener(this.getFrameworkOverrides(),e,t,r):(e instanceof Window||gridOptionsWrapper_1.GridOptionsWrapper,e.addEventListener(t,r));var o=function(){e instanceof HTMLElement||e instanceof Window||gridOptionsWrapper_1.GridOptionsWrapper,e.removeEventListener(t,r),n.destroyFunctions=n.destroyFunctions.filter(function(e){return e!==o})};return this.destroyFunctions.push(o),o}},e.prototype.isAlive=function(){return!this.destroyed},e.prototype.addDestroyFunc=function(e){this.isAlive()?this.destroyFunctions.push(e):e()},e.EVENT_DESTROYED="destroyed",__decorate([context_1.Autowired("context"),__metadata("design:type",context_1.Context)],e.prototype,"context",void 0),__decorate([context_1.Autowired("frameworkOverrides"),__metadata("design:type",Object)],e.prototype,"frameworkOverrides",void 0),__decorate([context_1.PreDestroy,__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",void 0)],e.prototype,"destroy",null),e}();exports.BeanStub=BeanStub;