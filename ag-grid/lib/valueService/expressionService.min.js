"use strict";var __decorate=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,c=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;0<=a;a--)(r=e[a])&&(c=(i<3?r(c):3<i?r(t,o,c):r(t,o))||c);return 3<i&&c&&Object.defineProperty(t,o,c),c},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__param=this&&this.__param||function(o,n){return function(e,t){n(e,t,o)}};Object.defineProperty(exports,"__esModule",{value:!0});var logger_1=require("../logger"),context_1=require("../context/context"),context_2=require("../context/context"),ExpressionService=function(){function e(){this.expressionToFunctionCache={}}return e.prototype.setBeans=function(e){this.logger=e.create("ExpressionService")},e.prototype.evaluate=function(e,t){return"function"==typeof e?e(t):"string"==typeof e?this.evaluateExpression(e,t):void console.error("ag-Grid: value should be either a string or a function",e)},e.prototype.evaluateExpression=function(t,e){try{return this.createExpressionFunction(t)(e.value,e.context,e.oldValue,e.newValue,e.value,e.node,e.data,e.colDef,e.rowIndex,e.api,e.columnApi,e.getValue,e.column,e.columnGroup)}catch(e){return console.log("Processing of the expression failed"),console.log("Expression = "+t),console.log("Exception = "+e),null}},e.prototype.createExpressionFunction=function(e){if(this.expressionToFunctionCache[e])return this.expressionToFunctionCache[e];var t=this.createFunctionBody(e),t=new Function("x, ctx, oldValue, newValue, value, node, data, colDef, rowIndex, api, columnApi, getValue, column, columnGroup",t);return this.expressionToFunctionCache[e]=t},e.prototype.createFunctionBody=function(e){return 0<=e.indexOf("return")?e:"return "+e+";"},__decorate([__param(0,context_2.Qualifier("loggerFactory")),__metadata("design:type",Function),__metadata("design:paramtypes",[logger_1.LoggerFactory]),__metadata("design:returntype",void 0)],e.prototype,"setBeans",null),__decorate([context_1.Bean("expressionService")],e)}();exports.ExpressionService=ExpressionService;