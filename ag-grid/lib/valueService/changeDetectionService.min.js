"use strict";var __extends=this&&this.__extends||function(){var o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};return function(e,t){function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),__decorate=this&&this.__decorate||function(e,t,r,o){var n,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,o);else for(var c=e.length-1;0<=c;c--)(n=e[c])&&(a=(i<3?n(a):3<i?n(t,r,a):n(t,r))||a);return 3<i&&a&&Object.defineProperty(t,r,a),a},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(exports,"__esModule",{value:!0});var context_1=require("../context/context"),gridOptionsWrapper_1=require("../gridOptionsWrapper"),changedPath_1=require("../rowModels/clientSide/changedPath"),rowRenderer_1=require("../rendering/rowRenderer"),eventService_1=require("../eventService"),constants_1=require("../constants"),beanStub_1=require("../context/beanStub"),events_1=require("../events"),ChangeDetectionService=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.init=function(){this.rowModel.getType()===constants_1.Constants.ROW_MODEL_TYPE_CLIENT_SIDE&&(this.clientSideRowModel=this.rowModel),this.addDestroyableEventListener(this.eventService,events_1.Events.EVENT_CELL_VALUE_CHANGED,this.onCellValueChanged.bind(this))},t.prototype.onCellValueChanged=function(e){this.doChangeDetection(e.node,e.column)},t.prototype.doChangeDetection=function(e,t){var r;this.gridOptionsWrapper.isSuppressChangeDetection()||this.clipboardService&&this.clipboardService.isPasteOperationActive()||(this.clientSideRowModel&&!e.isRowPinned()&&(r=this.gridOptionsWrapper.isAggregateOnlyChangedColumns(),(r=new changedPath_1.ChangedPath(r,this.clientSideRowModel.getRootNode())).addParentNode(e.parent,[t]),this.clientSideRowModel.doAggregate(r)),this.rowRenderer.refreshCells())},__decorate([context_1.Autowired("gridOptionsWrapper"),__metadata("design:type",gridOptionsWrapper_1.GridOptionsWrapper)],t.prototype,"gridOptionsWrapper",void 0),__decorate([context_1.Autowired("rowModel"),__metadata("design:type",Object)],t.prototype,"rowModel",void 0),__decorate([context_1.Autowired("rowRenderer"),__metadata("design:type",rowRenderer_1.RowRenderer)],t.prototype,"rowRenderer",void 0),__decorate([context_1.Autowired("eventService"),__metadata("design:type",eventService_1.EventService)],t.prototype,"eventService",void 0),__decorate([context_1.Optional("clipboardService"),__metadata("design:type",Object)],t.prototype,"clipboardService",void 0),__decorate([context_1.PostConstruct,__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",void 0)],t.prototype,"init",null),__decorate([context_1.Bean("changeDetectionService")],t)}(beanStub_1.BeanStub);exports.ChangeDetectionService=ChangeDetectionService;