"use strict";var __extends=this&&this.__extends||function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)};return function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}}(),__decorate=this&&this.__decorate||function(t,e,o,r){var n,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,r);else for(var s=t.length-1;0<=s;s--)(n=t[s])&&(a=(i<3?n(a):3<i?n(e,o,a):n(e,o))||a);return 3<i&&a&&Object.defineProperty(e,o,a),a},__metadata=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(exports,"__esModule",{value:!0});var gridOptionsWrapper_1=require("../../gridOptionsWrapper"),context_1=require("../../context/context"),rowNodeBlock_1=require("../cache/rowNodeBlock"),rowRenderer_1=require("../../rendering/rowRenderer"),utils_1=require("../../utils"),InfiniteBlock=function(o){function t(t,e){t=o.call(this,t,e)||this;return t.cacheParams=e,t}return __extends(t,o),t.prototype.createBlankRowNode=function(t){var e=o.prototype.createBlankRowNode.call(this,t);return e.uiLevel=0,this.setIndexAndTopOnRowNode(e,t),e},t.prototype.setDataAndId=function(t,e,o){utils_1._.exists(e)?t.setDataAndId(e,o.toString()):t.setDataAndId(void 0,void 0)},t.prototype.setRowNode=function(t,e){o.prototype.setRowNode.call(this,t,e),this.setIndexAndTopOnRowNode(e,t)},t.prototype.init=function(){o.prototype.init.call(this,{context:this.getContext(),rowRenderer:this.rowRenderer})},t.prototype.getNodeIdPrefix=function(){return null},t.prototype.getRow=function(t){return this.getRowUsingLocalIndex(t)},t.prototype.setIndexAndTopOnRowNode=function(t,e){t.setRowIndex(e),t.rowTop=this.cacheParams.rowHeight*e},t.prototype.loadFromDatasource=function(){var t=this,e={startRow:this.getStartRow(),endRow:this.getEndRow(),successCallback:this.pageLoaded.bind(this,this.getVersion()),failCallback:this.pageLoadFailed.bind(this),sortModel:this.cacheParams.sortModel,filterModel:this.cacheParams.filterModel,context:this.gridOptionsWrapper.getContext()};utils_1._.missing(this.cacheParams.datasource.getRows)?console.warn("ag-Grid: datasource is missing getRows method"):(1<utils_1._.getFunctionParameters(this.cacheParams.datasource.getRows).length&&(console.warn("ag-grid: It looks like your paging datasource is of the old type, taking more than one parameter."),console.warn("ag-grid: From ag-grid 1.9.0, now the getRows takes one parameter. See the documentation for details.")),window.setTimeout(function(){t.cacheParams.datasource.getRows(e)},0))},__decorate([context_1.Autowired("gridOptionsWrapper"),__metadata("design:type",gridOptionsWrapper_1.GridOptionsWrapper)],t.prototype,"gridOptionsWrapper",void 0),__decorate([context_1.Autowired("rowRenderer"),__metadata("design:type",rowRenderer_1.RowRenderer)],t.prototype,"rowRenderer",void 0),__decorate([context_1.PostConstruct,__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",void 0)],t.prototype,"init",null),t}(rowNodeBlock_1.RowNodeBlock);exports.InfiniteBlock=InfiniteBlock;