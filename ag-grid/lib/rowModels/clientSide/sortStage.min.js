"use strict";var __decorate=this&&this.__decorate||function(t,e,r,o){var n,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,o);else for(var l=t.length-1;0<=l;l--)(n=t[l])&&(a=(i<3?n(a):3<i?n(e,r,a):n(e,r))||a);return 3<i&&a&&Object.defineProperty(e,r,a),a},__metadata=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(exports,"__esModule",{value:!0});var context_1=require("../../context/context"),gridOptionsWrapper_1=require("../../gridOptionsWrapper"),sortService_1=require("../../rowNodes/sortService"),sortController_1=require("../../sortController"),columnController_1=require("../../columnController/columnController"),utils_1=require("../../utils"),SortStage=function(){function t(){}return t.prototype.execute=function(t){var e=this.sortController.getSortForRowController(),r=utils_1._.exists(e)&&0<e.length,o=r&&utils_1._.exists(t.rowNodeTransactions)&&this.gridOptionsWrapper.isDeltaSort(),n=o?this.calculateDirtyNodes(t.rowNodeTransactions):null,i=this.columnController.getValueColumns(),i=utils_1._.missingOrEmpty(i);this.sortService.sort(e,r,o,n,t.changedPath,i)},t.prototype.calculateDirtyNodes=function(t){function e(t){t&&t.forEach(function(t){return r[t.id]=!0})}var r={};return t.forEach(function(t){e(t.add),e(t.update),e(t.remove)}),r},__decorate([context_1.Autowired("gridOptionsWrapper"),__metadata("design:type",gridOptionsWrapper_1.GridOptionsWrapper)],t.prototype,"gridOptionsWrapper",void 0),__decorate([context_1.Autowired("sortService"),__metadata("design:type",sortService_1.SortService)],t.prototype,"sortService",void 0),__decorate([context_1.Autowired("sortController"),__metadata("design:type",sortController_1.SortController)],t.prototype,"sortController",void 0),__decorate([context_1.Autowired("columnController"),__metadata("design:type",columnController_1.ColumnController)],t.prototype,"columnController",void 0),__decorate([context_1.Bean("sortStage")],t)}();exports.SortStage=SortStage;