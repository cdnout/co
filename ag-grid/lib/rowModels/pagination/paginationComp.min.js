"use strict";var __extends=this&&this.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)};return function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}}(),__decorate=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;0<=s;s--)(i=t[s])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r},__metadata=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(exports,"__esModule",{value:!0});var component_1=require("../../widgets/component"),context_1=require("../../context/context"),gridOptionsWrapper_1=require("../../gridOptionsWrapper"),componentAnnotations_1=require("../../widgets/componentAnnotations"),eventService_1=require("../../eventService"),events_1=require("../../events"),rowRenderer_1=require("../../rendering/rowRenderer"),paginationProxy_1=require("../paginationProxy"),utils_1=require("../../utils"),constants_1=require("../../constants"),PaginationComp=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.postConstruct=function(){var t=this.gridOptionsWrapper.isEnableRtl();this.setTemplate(this.getTemplate()),this.btFirst.insertAdjacentElement("afterbegin",utils_1._.createIconNoSpan(t?"last":"first",this.gridOptionsWrapper)),this.btPrevious.insertAdjacentElement("afterbegin",utils_1._.createIconNoSpan(t?"next":"previous",this.gridOptionsWrapper)),this.btNext.insertAdjacentElement("afterbegin",utils_1._.createIconNoSpan(t?"previous":"next",this.gridOptionsWrapper)),this.btLast.insertAdjacentElement("afterbegin",utils_1._.createIconNoSpan(t?"first":"last",this.gridOptionsWrapper)),this.rowModel.getType()===constants_1.Constants.ROW_MODEL_TYPE_SERVER_SIDE&&(this.serverSideRowModel=this.rowModel),this.gridOptionsWrapper.isPagination()&&!this.gridOptionsWrapper.isSuppressPaginationPanel()?(this.addDestroyableEventListener(this.eventService,events_1.Events.EVENT_PAGINATION_CHANGED,this.onPaginationChanged.bind(this)),this.addDestroyableEventListener(this.btFirst,"click",this.onBtFirst.bind(this)),this.addDestroyableEventListener(this.btLast,"click",this.onBtLast.bind(this)),this.addDestroyableEventListener(this.btNext,"click",this.onBtNext.bind(this)),this.addDestroyableEventListener(this.btPrevious,"click",this.onBtPrevious.bind(this)),this.onPaginationChanged()):this.setDisplayed(!1)},e.prototype.onPaginationChanged=function(){this.enableOrDisableButtons(),this.updateRowLabels(),this.setCurrentPageLabel(),this.setTotalLabels()},e.prototype.setCurrentPageLabel=function(){var t=0<this.paginationProxy.getTotalPages(),e=this.paginationProxy.getCurrentPage(),e=t?e+1:0;this.lbCurrent.innerHTML=this.formatNumber(e)},e.prototype.formatNumber=function(t){var e=this.gridOptionsWrapper.getPaginationNumberFormatterFunc();return e?e({value:t}):utils_1._.formatNumberCommas(t)},e.prototype.getTemplate=function(){var t=this.gridOptionsWrapper.getLocaleTextFunc(),e=t("page","Page"),o=t("to","to"),n=t("of","of");return'<div class="ag-paging-panel ag-unselectable">\n                <span ref="eSummaryPanel" class="ag-paging-row-summary-panel">\n                    <span ref="lbFirstRowOnPage"></span> '+o+' <span ref="lbLastRowOnPage"></span> '+n+' <span ref="lbRecordCount"></span>\n                </span>\n                <span class="ag-paging-page-summary-panel">\n                    <div ref="btFirst" class="ag-paging-button">\n                        <button type="button">'+t("first","First")+'</button>\n                    </div>\n                    <div ref="btPrevious" class="ag-paging-button">\n                        <button type="button">'+t("previous","Previous")+"</button>\n                    </div>\n                    "+e+' <span ref="lbCurrent"></span> '+n+' <span ref="lbTotal"></span>\n                    <div ref="btNext" class="ag-paging-button">\n                        <button type="button">'+t("next","Next")+'</button>\n                    </div>\n                    <div ref="btLast" class="ag-paging-button">\n                        <button type="button">'+t("last","Last")+"</button>\n                    </div>\n                </span>\n            </div>"},e.prototype.onBtNext=function(){this.paginationProxy.goToNextPage()},e.prototype.onBtPrevious=function(){this.paginationProxy.goToPreviousPage()},e.prototype.onBtFirst=function(){this.paginationProxy.goToFirstPage()},e.prototype.onBtLast=function(){this.paginationProxy.goToLastPage()},e.prototype.enableOrDisableButtons=function(){var t=this.paginationProxy.getCurrentPage(),e=this.paginationProxy.isLastPageFound(),o=this.paginationProxy.getTotalPages(),n=0===t;utils_1._.addOrRemoveCssClass(this.btPrevious,"ag-disabled",n),utils_1._.addOrRemoveCssClass(this.btFirst,"ag-disabled",n);var i=this.isZeroPagesToDisplay(),n=e&&t===o-1||i;utils_1._.addOrRemoveCssClass(this.btNext,"ag-disabled",n);o=!e||i||t===o-1;utils_1._.addOrRemoveCssClass(this.btLast,"ag-disabled",o)},e.prototype.updateRowLabels=function(){var t,e,o=this.paginationProxy.getCurrentPage(),n=this.paginationProxy.getPageSize(),i=this.paginationProxy.isLastPageFound(),a=this.paginationProxy.isLastPageFound()?this.paginationProxy.getMasterRowCount():null;this.isZeroPagesToDisplay()?e=t=0:(e=(t=n*o+1)+n-1,i&&a<e&&(e=a)),this.lbFirstRowOnPage.innerHTML=this.formatNumber(t),this.serverSideRowModel&&this.serverSideRowModel.isLoading()?this.lbLastRowOnPage.innerHTML="?":this.lbLastRowOnPage.innerHTML=this.formatNumber(e)},e.prototype.isZeroPagesToDisplay=function(){var t=this.paginationProxy.isLastPageFound(),e=this.paginationProxy.getTotalPages();return t&&0===e},e.prototype.setTotalLabels=function(){var t=this.paginationProxy.isLastPageFound(),e=this.paginationProxy.getTotalPages(),o=this.paginationProxy.isLastPageFound()?this.paginationProxy.getMasterRowCount():null;t?(this.lbTotal.innerHTML=this.formatNumber(e),this.lbRecordCount.innerHTML=this.formatNumber(o)):(o=this.gridOptionsWrapper.getLocaleTextFunc()("more","more"),this.lbTotal.innerHTML=o,this.lbRecordCount.innerHTML=o)},__decorate([context_1.Autowired("gridOptionsWrapper"),__metadata("design:type",gridOptionsWrapper_1.GridOptionsWrapper)],e.prototype,"gridOptionsWrapper",void 0),__decorate([context_1.Autowired("eventService"),__metadata("design:type",eventService_1.EventService)],e.prototype,"eventService",void 0),__decorate([context_1.Autowired("paginationProxy"),__metadata("design:type",paginationProxy_1.PaginationProxy)],e.prototype,"paginationProxy",void 0),__decorate([context_1.Autowired("rowRenderer"),__metadata("design:type",rowRenderer_1.RowRenderer)],e.prototype,"rowRenderer",void 0),__decorate([context_1.Autowired("rowModel"),__metadata("design:type",Object)],e.prototype,"rowModel",void 0),__decorate([componentAnnotations_1.RefSelector("btFirst"),__metadata("design:type",HTMLElement)],e.prototype,"btFirst",void 0),__decorate([componentAnnotations_1.RefSelector("btPrevious"),__metadata("design:type",HTMLElement)],e.prototype,"btPrevious",void 0),__decorate([componentAnnotations_1.RefSelector("btNext"),__metadata("design:type",HTMLElement)],e.prototype,"btNext",void 0),__decorate([componentAnnotations_1.RefSelector("btLast"),__metadata("design:type",HTMLElement)],e.prototype,"btLast",void 0),__decorate([componentAnnotations_1.RefSelector("lbRecordCount"),__metadata("design:type",Object)],e.prototype,"lbRecordCount",void 0),__decorate([componentAnnotations_1.RefSelector("lbFirstRowOnPage"),__metadata("design:type",Object)],e.prototype,"lbFirstRowOnPage",void 0),__decorate([componentAnnotations_1.RefSelector("lbLastRowOnPage"),__metadata("design:type",Object)],e.prototype,"lbLastRowOnPage",void 0),__decorate([componentAnnotations_1.RefSelector("eSummaryPanel"),__metadata("design:type",Object)],e.prototype,"eSummaryPanel",void 0),__decorate([componentAnnotations_1.RefSelector("lbCurrent"),__metadata("design:type",Object)],e.prototype,"lbCurrent",void 0),__decorate([componentAnnotations_1.RefSelector("lbTotal"),__metadata("design:type",Object)],e.prototype,"lbTotal",void 0),__decorate([context_1.PostConstruct,__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",void 0)],e.prototype,"postConstruct",null),e}(component_1.Component);exports.PaginationComp=PaginationComp;