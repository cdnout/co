"use strict";var __extends=this&&this.__extends||function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)};return function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),__decorate=this&&this.__decorate||function(e,t,i,r){var o,n=arguments.length,a=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var c=e.length-1;0<=c;c--)(o=e[c])&&(a=(n<3?o(a):3<n?o(t,i,a):o(t,i))||a);return 3<n&&a&&Object.defineProperty(t,i,a),a},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(exports,"__esModule",{value:!0});var beanStub_1=require("../context/beanStub"),eventService_1=require("../eventService"),events_1=require("../events"),context_1=require("../context/context"),gridOptionsWrapper_1=require("../gridOptionsWrapper"),scrollVisibleService_1=require("../gridPanel/scrollVisibleService"),PaginationAutoPageSizeService=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.registerGridComp=function(e){this.gridPanel=e,this.addDestroyableEventListener(this.eventService,events_1.Events.EVENT_BODY_HEIGHT_CHANGED,this.onBodyHeightChanged.bind(this)),this.addDestroyableEventListener(this.eventService,events_1.Events.EVENT_SCROLL_VISIBILITY_CHANGED,this.onScrollVisibilityChanged.bind(this)),this.checkPageSize()},t.prototype.notActive=function(){return!this.gridOptionsWrapper.isPaginationAutoPageSize()},t.prototype.onScrollVisibilityChanged=function(){this.checkPageSize()},t.prototype.onBodyHeightChanged=function(){this.checkPageSize()},t.prototype.checkPageSize=function(){var e,t;this.notActive()||(t=this.gridOptionsWrapper.getRowHeightAsNumber(),0<(e=this.gridPanel.getBodyHeight())&&(t=Math.floor(e/t),this.gridOptionsWrapper.setProperty("paginationPageSize",t)))},__decorate([context_1.Autowired("eventService"),__metadata("design:type",eventService_1.EventService)],t.prototype,"eventService",void 0),__decorate([context_1.Autowired("gridOptionsWrapper"),__metadata("design:type",gridOptionsWrapper_1.GridOptionsWrapper)],t.prototype,"gridOptionsWrapper",void 0),__decorate([context_1.Autowired("scrollVisibleService"),__metadata("design:type",scrollVisibleService_1.ScrollVisibleService)],t.prototype,"scrollVisibleService",void 0),__decorate([context_1.Bean("paginationAutoPageSizeService")],t)}(beanStub_1.BeanStub);exports.PaginationAutoPageSizeService=PaginationAutoPageSizeService;