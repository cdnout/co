"use strict";var __decorate=this&&this.__decorate||function(t,e,n,i){var r,o=arguments.length,p=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)p=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;0<=s;s--)(r=t[s])&&(p=(o<3?r(p):3<o?r(e,n,p):r(e,n))||p);return 3<o&&p&&Object.defineProperty(e,n,p),p},__metadata=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(exports,"__esModule",{value:!0});var column_1=require("./column"),eventService_1=require("../eventService"),context_1=require("../context/context"),gridOptionsWrapper_1=require("../gridOptionsWrapper"),utils_1=require("../utils"),ColumnGroup=function(){function i(t,e,n,i){this.displayedChildren=[],this.localEventService=new eventService_1.EventService,this.groupId=e,this.instanceId=n,this.originalColumnGroup=t,this.pinned=i}return i.createUniqueId=function(t,e){return t+"_"+e},i.prototype.reset=function(){this.parent=null,this.children=null,this.displayedChildren=null},i.prototype.getParent=function(){return this.parent},i.prototype.setParent=function(t){this.parent=t},i.prototype.getUniqueId=function(){return i.createUniqueId(this.groupId,this.instanceId)},i.prototype.isEmptyGroup=function(){return 0===this.displayedChildren.length},i.prototype.isMoving=function(){var t=this.getOriginalColumnGroup().getLeafColumns();if(!t||0===t.length)return!1;var e=!0;return t.forEach(function(t){t.isMoving()||(e=!1)}),e},i.prototype.checkLeft=function(){var t;this.displayedChildren.forEach(function(t){t instanceof i&&t.checkLeft()}),0<this.displayedChildren.length?this.gridOptionsWrapper.isEnableRtl()?(t=utils_1._.last(this.displayedChildren).getLeft(),this.setLeft(t)):(t=this.displayedChildren[0].getLeft(),this.setLeft(t)):this.setLeft(null)},i.prototype.getLeft=function(){return this.left},i.prototype.getOldLeft=function(){return this.oldLeft},i.prototype.setLeft=function(t){this.oldLeft=t,this.left!==t&&(this.left=t,this.localEventService.dispatchEvent(this.createAgEvent(i.EVENT_LEFT_CHANGED)))},i.prototype.getPinned=function(){return this.pinned},i.prototype.createAgEvent=function(t){return{type:t}},i.prototype.addEventListener=function(t,e){this.localEventService.addEventListener(t,e)},i.prototype.removeEventListener=function(t,e){this.localEventService.removeEventListener(t,e)},i.prototype.getGroupId=function(){return this.groupId},i.prototype.getInstanceId=function(){return this.instanceId},i.prototype.isChildInThisGroupDeepSearch=function(e){var n=!1;return this.children.forEach(function(t){e===t&&(n=!0),t instanceof i&&t.isChildInThisGroupDeepSearch(e)&&(n=!0)}),n},i.prototype.getActualWidth=function(){var e=0;return this.displayedChildren&&this.displayedChildren.forEach(function(t){e+=t.getActualWidth()}),e},i.prototype.isResizable=function(){if(!this.displayedChildren)return!1;var e=!1;return this.displayedChildren.forEach(function(t){t.isResizable()&&(e=!0)}),e},i.prototype.getMinWidth=function(){var e=0;return this.displayedChildren.forEach(function(t){e+=t.getMinWidth()}),e},i.prototype.addChild=function(t){this.children||(this.children=[]),this.children.push(t)},i.prototype.getDisplayedChildren=function(){return this.displayedChildren},i.prototype.getLeafColumns=function(){var t=[];return this.addLeafColumns(t),t},i.prototype.getDisplayedLeafColumns=function(){var t=[];return this.addDisplayedLeafColumns(t),t},i.prototype.getDefinition=function(){return this.originalColumnGroup.getColGroupDef()},i.prototype.getColGroupDef=function(){return this.originalColumnGroup.getColGroupDef()},i.prototype.isPadding=function(){return this.originalColumnGroup.isPadding()},i.prototype.isExpandable=function(){return this.originalColumnGroup.isExpandable()},i.prototype.isExpanded=function(){return this.originalColumnGroup.isExpanded()},i.prototype.setExpanded=function(t){this.originalColumnGroup.setExpanded(t)},i.prototype.addDisplayedLeafColumns=function(e){this.displayedChildren.forEach(function(t){t instanceof column_1.Column?e.push(t):t instanceof i&&t.addDisplayedLeafColumns(e)})},i.prototype.addLeafColumns=function(e){this.children.forEach(function(t){t instanceof column_1.Column?e.push(t):t instanceof i&&t.addLeafColumns(e)})},i.prototype.getChildren=function(){return this.children},i.prototype.getColumnGroupShow=function(){return this.originalColumnGroup.getColumnGroupShow()},i.prototype.getOriginalColumnGroup=function(){return this.originalColumnGroup},i.prototype.calculateDisplayedColumns=function(){var e=this;this.displayedChildren=[];var n=this;if(this.isPadding())for(;n.getParent()&&n.isPadding();)n=n.getParent();n.originalColumnGroup.isExpandable()?this.children.forEach(function(t){switch(t.getColumnGroupShow()){case i.HEADER_GROUP_SHOW_OPEN:n.originalColumnGroup.isExpanded()&&e.displayedChildren.push(t);break;case i.HEADER_GROUP_SHOW_CLOSED:n.originalColumnGroup.isExpanded()||e.displayedChildren.push(t);break;default:e.displayedChildren.push(t)}}):this.displayedChildren=this.children,this.localEventService.dispatchEvent(this.createAgEvent(i.EVENT_DISPLAYED_CHILDREN_CHANGED))},i.HEADER_GROUP_SHOW_OPEN="open",i.HEADER_GROUP_SHOW_CLOSED="closed",i.HEADER_GROUP_PADDING="padding",i.EVENT_LEFT_CHANGED="leftChanged",i.EVENT_DISPLAYED_CHILDREN_CHANGED="displayedChildrenChanged",__decorate([context_1.Autowired("gridOptionsWrapper"),__metadata("design:type",gridOptionsWrapper_1.GridOptionsWrapper)],i.prototype,"gridOptionsWrapper",void 0),i}();exports.ColumnGroup=ColumnGroup;