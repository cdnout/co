"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var columnGroup_1=require("./columnGroup"),column_1=require("./column"),eventService_1=require("../eventService"),OriginalColumnGroup=function(){function s(e,n,t,o){this.localEventService=new eventService_1.EventService,this.expandable=!1,this.colGroupDef=e,this.groupId=n,this.expanded=e&&!!e.openByDefault,this.padding=t,this.level=o}return s.prototype.setOriginalParent=function(e){this.originalParent=this.originalParent},s.prototype.getOriginalParent=function(){return this.originalParent},s.prototype.getLevel=function(){return this.level},s.prototype.isVisible=function(){return!!this.children&&this.children.some(function(e){return e.isVisible()})},s.prototype.isPadding=function(){return this.padding},s.prototype.setExpanded=function(e){this.expanded=void 0!==e&&e;e={type:s.EVENT_EXPANDED_CHANGED};this.localEventService.dispatchEvent(e)},s.prototype.isExpandable=function(){return this.expandable},s.prototype.isExpanded=function(){return this.expanded},s.prototype.getGroupId=function(){return this.groupId},s.prototype.getId=function(){return this.getGroupId()},s.prototype.setChildren=function(e){this.children=e},s.prototype.getChildren=function(){return this.children},s.prototype.getColGroupDef=function(){return this.colGroupDef},s.prototype.getLeafColumns=function(){var e=[];return this.addLeafColumns(e),e},s.prototype.addLeafColumns=function(n){this.children&&this.children.forEach(function(e){e instanceof column_1.Column?n.push(e):e instanceof s&&e.addLeafColumns(n)})},s.prototype.getColumnGroupShow=function(){return this.padding?columnGroup_1.ColumnGroup.HEADER_GROUP_PADDING:this.colGroupDef.columnGroupShow},s.prototype.setupExpandable=function(){var n=this;this.setExpandable(),this.getLeafColumns().forEach(function(e){return e.addEventListener(column_1.Column.EVENT_VISIBLE_CHANGED,n.onColumnVisibilityChanged.bind(n))})},s.prototype.setExpandable=function(){if(!this.isPadding()){for(var e=!1,n=!1,t=!1,o=this.findChildren(),i=0,r=o.length;i<r;i++){var u,p=o[i];p.isVisible()&&((u=p.getColumnGroupShow())===columnGroup_1.ColumnGroup.HEADER_GROUP_SHOW_OPEN?t=e=!0:u===columnGroup_1.ColumnGroup.HEADER_GROUP_SHOW_CLOSED?t=n=!0:(n=e=!0,u===columnGroup_1.ColumnGroup.HEADER_GROUP_PADDING&&(t=p.children.some(function(e){return void 0!==e.getColumnGroupShow()}))))}var l=e&&n&&t;this.expandable!==l&&(this.expandable=l,l={type:s.EVENT_EXPANDABLE_CHANGED},this.localEventService.dispatchEvent(l))}},s.prototype.findChildren=function(){var e=this.children,n=e[0];if(n&&(!n.isPadding||!n.isPadding()))return e;for(;1===e.length&&e[0]instanceof s;)e=e[0].children;return e},s.prototype.onColumnVisibilityChanged=function(){this.setExpandable()},s.prototype.addEventListener=function(e,n){this.localEventService.addEventListener(e,n)},s.prototype.removeEventListener=function(e,n){this.localEventService.removeEventListener(e,n)},s.EVENT_EXPANDED_CHANGED="expandedChanged",s.EVENT_EXPANDABLE_CHANGED="expandableChanged",s}();exports.OriginalColumnGroup=OriginalColumnGroup;