"use strict";var __decorate=this&&this.__decorate||function(e,t,o,a){var n,r=arguments.length,c=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,a);else for(var i=e.length-1;0<=i;i--)(n=e[i])&&(c=(r<3?n(c):3<r?n(t,o,c):n(t,o))||c);return 3<r&&c&&Object.defineProperty(t,o,c),c},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(exports,"__esModule",{value:!0});var context_1=require("./context/context"),context_2=require("./context/context"),TemplateService=function(){function e(){this.templateCache={},this.waitingCallbacks={}}return e.prototype.getTemplate=function(e,t){var o=this.templateCache[e];if(o)return o;var a=this.waitingCallbacks[e],n=this;return a||(a=[],this.waitingCallbacks[e]=a,(o=new XMLHttpRequest).onload=function(){n.handleHttpResult(this,e)},o.open("GET",e),o.send()),t&&a.push(t),null},e.prototype.handleHttpResult=function(e,t){if(200===e.status&&null!==e.response){this.templateCache[t]=e.response||e.responseText;for(var o,a=this.waitingCallbacks[t],n=0;n<a.length;n++)(0,a[n])();this.$scope&&(o=this,window.setTimeout(function(){o.$scope.$apply()},0))}else console.warn("Unable to get template error "+e.status+" - "+t)},__decorate([context_2.Autowired("$scope"),__metadata("design:type",Object)],e.prototype,"$scope",void 0),__decorate([context_1.Bean("templateService")],e)}();exports.TemplateService=TemplateService;