"use strict";var __decorate=this&&this.__decorate||function(e,t,r,o){var i,n=arguments.length,p=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)p=Reflect.decorate(e,t,r,o);else for(var a=e.length-1;0<=a;a--)(i=e[a])&&(p=(n<3?i(p):3<n?i(t,r,p):i(t,r))||p);return 3<n&&p&&Object.defineProperty(t,r,p),p},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(exports,"__esModule",{value:!0});var context_1=require("../context/context"),filterManager_1=require("../filter/filterManager"),popupService_1=require("../widgets/popupService"),gridOptionsWrapper_1=require("../gridOptionsWrapper"),eventService_1=require("../eventService"),utils_1=require("../utils"),StandardMenuFactory=function(){function e(){}return e.prototype.hideActiveMenu=function(){this.hidePopup&&this.hidePopup()},e.prototype.showMenuAfterMouseEvent=function(t,r){var o=this;this.showPopup(t,function(e){o.popupService.positionPopupUnderMouseEvent({column:t,type:"columnMenu",mouseEvent:r,ePopup:e})})},e.prototype.showMenuAfterButtonClick=function(t,r){var o=this;this.showPopup(t,function(e){o.popupService.positionPopupUnderComponent({type:"columnMenu",eventSource:r,ePopup:e,keepWithinBounds:!0,column:t})})},e.prototype.showPopup=function(e,t){var r=this,o=this.filterManager.getOrCreateFilterWrapper(e,"COLUMN_MENU"),i=document.createElement("div");utils_1._.addCssClass(i,"ag-menu"),o.guiPromise.promise.then(function(e){i.appendChild(e)});function n(e){"horizontal"===e.direction&&p()}this.eventService.addEventListener("bodyScroll",n);var p=this.popupService.addAsModalPopup(i,!0,function(){r.eventService.removeEventListener("bodyScroll",n),e.setMenuVisible(!1,"contextMenu")});t(i),o.filterPromise.then(function(e){var t;e.afterGuiAttached&&(t={hidePopup:p},e.afterGuiAttached(t))}),this.hidePopup=p,e.setMenuVisible(!0,"contextMenu")},e.prototype.isMenuEnabled=function(e){return e.isFilterAllowed()},__decorate([context_1.Autowired("eventService"),__metadata("design:type",eventService_1.EventService)],e.prototype,"eventService",void 0),__decorate([context_1.Autowired("filterManager"),__metadata("design:type",filterManager_1.FilterManager)],e.prototype,"filterManager",void 0),__decorate([context_1.Autowired("popupService"),__metadata("design:type",popupService_1.PopupService)],e.prototype,"popupService",void 0),__decorate([context_1.Autowired("gridOptionsWrapper"),__metadata("design:type",gridOptionsWrapper_1.GridOptionsWrapper)],e.prototype,"gridOptionsWrapper",void 0),__decorate([context_1.Bean("menuFactory")],e)}();exports.StandardMenuFactory=StandardMenuFactory;