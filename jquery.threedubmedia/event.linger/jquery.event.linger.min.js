!function(e){e.fn.linger=function(t,a,i){var n="string"==typeof t?t:"",r=e.isFunction(t)?t:e.isFunction(a)?a:null;return 0!==n.indexOf("linger")&&(n="linger"+n),i=(t==r?a:i)||{},r?this.bind(n,i,r):this.trigger(n)};var t=e.event,a=t.special,i=a.linger={defaults:{speed:100,delay:100,persist:400},datakey:"lingerdata",add:function(t){var a=e.data(this,i.datakey),n=t.data||{};a.related+=1,e.each(i.defaults,function(e,t){void 0!==n[e]&&(a[e]=n[e])})},remove:function(){e.data(this,i.datakey).related-=1},setup:function(){if(!e.data(this,i.datakey)){var a=e.extend({related:0},i.defaults);e.data(this,i.datakey,a),t.add(this,"mouseenter mouseleave",i.handler,a)}},teardown:function(){e.data(this,i.datakey).related||(e.removeData(this,i.datakey),t.remove(this,"mouseenter mousemove mouseleave",i.handler))},handler:function(e){var a=e.data||{};if("mouseenter"!=e.type||a.lingered||(a.dist2=0,a.limit=Math.pow(a.speed*(a.delay/1e3),2),a.elem=this,i.hijack(e,"lingerstart",this)&&(a.event=e,t.add(this,"mousemove",i.handler,a),a.timer=setTimeout(function(){a.dist2<=a.limit&&(a.lingered=i.hijack(a.event,"linger",a.elem)),a.lingered?t.remove(a.elem,"mousemove",i.handler):a.timer=setTimeout(arguments.callee,a.delay),a.dist2=0},a.delay))),a.event)switch(e.type){case a.lingered&&"mouseenter":clearTimeout(a.timer);break;case"mousemove":a.dist2+=Math.pow(e.pageX-a.event.pageX,2)+Math.pow(e.pageY-a.event.pageY,2),a.event=e;break;case a.lingered&&"mouseleave":a.timer=setTimeout(function(){a.lingered=!i.hijack(e,"lingerend",a.elem),a.lingered&&setTimeout(arguments.callee,a.persist)},a.persist);break;case!a.lingered&&"mouseleave":clearTimeout(a.timer),t.remove(a.elem,"mousemove",i.handler),a.event=null}},hijack:function(e,a,i){var n,r={event:e.originalEvent,type:e.type};return e.type=a,e.originalEvent=null,e.result=null,n=t.handle.call(i,e),e.type=r.type,e.originalEvent=r.event,!1!==n}};a.lingerstart=a.lingerend=i}(jQuery);