function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e,t){"function"==typeof define&&define.amd?define(["exports","./components"],t):"undefined"!=typeof exports?t(exports,require("./components")):(t(t={},e.components),e.watch=t)}("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:this,function(e,c){"use strict";function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:document,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(t.nodeType!==Node.ELEMENT_NODE&&t.nodeType!==Node.DOCUMENT_NODE)throw new TypeError("DOM document or DOM element should be given to watch for DOM node to create/release components.");var n=Object.keys(c).map(function(e){return c[e]}).filter(function(e){return"function"==typeof e.init}),r=n.map(function(e){return e.init(t,o)}).filter(Boolean),f=n.filter(function(e){return!e.forLazyInit}),i=new MutationObserver(function(e){u(e,n,f,o)});return i.observe(t,{childList:!0,subtree:!0}),{release:function(){for(var e=r.pop();e;e=r.pop())e.release();i&&(i.disconnect(),i=null)}}},c=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==_typeof(e)&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var o,n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(o in e){var f;Object.prototype.hasOwnProperty.call(e,o)&&((f=r?Object.getOwnPropertyDescriptor(e,o):null)&&(f.get||f.set)?Object.defineProperty(n,o,f):n[o]=e[o])}n.default=e,t&&t.set(e,n);return n}(c);var r=Array.prototype.forEach,u=function(e,t,o,n){e.forEach(function(e){r.call(e.addedNodes,function(t){t.nodeType===Node.ELEMENT_NODE&&o.forEach(function(e){e.init(t,n)})}),r.call(e.removedNodes,function(o){o.nodeType===Node.ELEMENT_NODE&&t.forEach(function(t){var e;o.matches(t.options.selectorInit)?(e=t.components.get(o))&&e.release():r.call(o.querySelectorAll(t.options.selectorInit),function(e){e=t.components.get(e);e&&e.release()})})})})}});