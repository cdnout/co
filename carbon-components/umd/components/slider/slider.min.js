!function(e,t){"function"==typeof define&&define.amd?define(["exports","../../globals/js/settings","../../globals/js/misc/mixin","../../globals/js/mixins/create-component","../../globals/js/mixins/init-component-by-search","../../globals/js/mixins/evented-state","../../globals/js/mixins/handles","../../globals/js/misc/on"],t):"undefined"!=typeof exports?t(exports,require("../../globals/js/settings"),require("../../globals/js/misc/mixin"),require("../../globals/js/mixins/create-component"),require("../../globals/js/mixins/init-component-by-search"),require("../../globals/js/mixins/evented-state"),require("../../globals/js/mixins/handles"),require("../../globals/js/misc/on")):(t(t={},e.settings,e.mixin,e.createComponent,e.initComponentBySearch,e.eventedState,e.handles,e.on),e.slider=t)}("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:this,function(e,s,u,l,r,a,c,f){"use strict";function t(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(n){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=h(n);return e=i?(e=h(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==o(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,s=t(s),u=t(u),l=t(l),r=t(r),a=t(a),c=t(c),f=t(f);var n=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(o,(0,u.default)(l.default,r.default,a.default,c.default));var e,t,n,i=m(o);function o(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(n=i.call(this,e,t))._changeState=function(e,t,n){n()},n.sliderActive=!1,n.dragging=!1,n.track=n.element.querySelector(n.options.selectorTrack),n.filledTrack=n.element.querySelector(n.options.selectorFilledTrack),n.thumb=n.element.querySelector(n.options.selectorThumb),n.input=n.element.querySelector(n.options.selectorInput),n.element.dataset.sliderInputBox&&(n.boundInput=n.element.ownerDocument.querySelector(n.element.dataset.sliderInputBox),n._updateInput(),n.manage((0,f.default)(n.boundInput,"change",function(e){n.setValue(e.target.value)})),n.manage((0,f.default)(n.boundInput,"focus",function(e){e.target.select()})),n.manage((0,f.default)(n.boundInput,"mouseup",function(e){e.preventDefault()}))),n._updatePosition(),n.manage((0,f.default)(n.thumb,"mousedown",function(){n.sliderActive=!0})),n.manage((0,f.default)(n.element.ownerDocument,"mouseup",function(){n.sliderActive=!1})),n.manage((0,f.default)(n.element.ownerDocument,"mousemove",function(e){var t=n.element.classList.contains(n.options.classDisabled);!0!==n.sliderActive||t||n._updatePosition(e)})),n.manage((0,f.default)(n.thumb,"keydown",function(e){n.element.classList.contains(n.options.classDisabled)||n._updatePosition(e)})),n.manage((0,f.default)(n.track,"click",function(e){n.element.classList.contains(n.options.classDisabled)||n._updatePosition(e)})),n}return e=o,n=[{key:"options",get:function(){var e=s.default.prefix;return{selectorInit:"[data-slider]",selectorTrack:".".concat(e,"--slider__track"),selectorFilledTrack:".".concat(e,"--slider__filled-track"),selectorThumb:".".concat(e,"--slider__thumb"),selectorInput:".".concat(e,"--slider__input"),classDisabled:"".concat(e,"--slider--disabled"),classThumbClicked:"".concat(e,"--slider__thumb--clicked"),eventBeforeSliderValueChange:"slider-before-value-change",eventAfterSliderValueChange:"slider-after-value-change",stepMultiplier:4}}}],(t=[{key:"_updatePosition",value:function(e){var t=this,e=this._calcValue(e),n=e.left,i=e.newValue;this.dragging||(this.dragging=!0,requestAnimationFrame(function(){t.dragging=!1,t.thumb.style.left="".concat(n,"%"),t.filledTrack.style.transform="translate(0%, -50%) scaleX(".concat(n/100,")"),t.input.value=i,t._updateInput(),t.changeState("slider-value-change",{value:i})}))}},{key:"_calcValue",value:function(e){var t,n,i,o=this.getInputProps(),s=o.value,u=o.min,l=o.max,r=o.step,a=l-u,c=(s-u)/a*100;return t=c,n=s,e&&("keydown"!==(i=e.type)||void 0!==(o={40:-1,37:-1,38:1,39:1}[e.which])&&(t=c+(c=r*(!0===e.shiftKey?a/r/this.options.stepMultiplier:1))/a*100*o,n=Number(s)+c*o),"mousemove"!==i&&"click"!==i||("click"===i?this.element.querySelector(this.options.selectorThumb).classList.add(this.options.classThumbClicked):this.element.querySelector(this.options.selectorThumb).classList.remove(this.options.classThumbClicked),i=this.track.getBoundingClientRect(),i=(e.clientX-i.left)/i.width,t=(r=Math.round(a*i/r)*r)/a*100,n=r+u)),n<=Number(u)&&(t=0,n=u),n>=Number(l)&&(t=100,n=l),{left:t,newValue:n}}},{key:"_updateInput",value:function(){this.boundInput&&(this.boundInput.value=this.input.value)}},{key:"getInputProps",value:function(){return{value:Number(this.input.value),min:Number(this.input.min),max:Number(this.input.max),step:this.input.step?Number(this.input.step):1}}},{key:"setValue",value:function(e){this.input.value=e,this._updatePosition()}},{key:"stepUp",value:function(){this.input.stepUp(),this._updatePosition()}},{key:"stepDown",value:function(){this.input.stepDown(),this._updatePosition()}}])&&p(e.prototype,t),n&&p(e,n),o.components=new WeakMap,o}();e.default=n});