!function(t,e){"function"==typeof define&&define.amd?define(["exports","./navigation-menu-panel","../../globals/js/misc/on","../../globals/js/settings","../../globals/js/misc/on-focus-by-keyboard"],e):"undefined"!=typeof exports?e(exports,require("./navigation-menu-panel"),require("../../globals/js/misc/on"),require("../../globals/js/settings"),require("../../globals/js/misc/on-focus-by-keyboard")):(e(e={},t.navigationMenuPanel,t.on,t.settings,t.onFocusByKeyboard),t.productSwitcher=e)}("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:this,function(t,o,a,i,u){"use strict";function e(t){return t&&t.__esModule?t:{default:t}}function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=p(t)););return t}(t,e);if(t){e=Object.getOwnPropertyDescriptor(t,e);return e.get?e.get.call(n):e.value}})(t,e,n||t)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function d(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=p(n);return t=r?(t=p(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==c(t)&&"function"!=typeof t?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o=e(o),a=e(a),i=e(i),u=e(u);var b=0,n=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(c,o.default);var t,e,n,r=d(c);function c(t,e){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),(o=r.call(this,t,e)).current="",o.triggerButtonIds=new Set,o._handleFocusOut=function(t){var e;o.element.contains(t.relatedTarget)||(e=o.element.ownerDocument.getElementById(o.current))&&t.relatedTarget&&!t.relatedTarget.matches(o.options.selectorFloatingMenus)&&e.focus()},o._handleKeyDown=function(t){var e=!o.element.hasAttribute("hidden");27===t.which&&e&&(e=o.current,o.changeState(o.constructor.SELECT_NONE),o.element.ownerDocument.getElementById(e).focus())},o.createdByLauncher=function(t){var e=o.element.classList.contains(o.options.classProductSwitcherExpanded),t=t.delegateTarget;t.id||(t.id="__carbon-product-switcher-launcher-".concat(b++));t=t.id;o.changeState(e&&o.current===t?o.constructor.SELECT_NONE:t)},o.shouldStateBeChanged=function(t){return o.current!==t},o._changeState=function(t,e){o.element.classList.toggle(o.options.classProductSwitcherExpanded,t!==o.constructor.SELECT_NONE),o.current=t,o.current!==o.constructor.SELECT_NONE&&o.triggerButtonIds.add(o.current),o.triggerButtonIds.forEach(function(t){var e=o.element.ownerDocument.getElementById(t),t=e.getAttribute(o.options.attribLabelExpand);e.classList.remove(o.options.classNavigationMenuPanelHeaderActionActive),e.setAttribute("aria-label",t),e.setAttribute("title",t)});var n,r=o.element.ownerDocument.getElementById(o.current);r&&(n=r.getAttribute(o.options.attribLabelCollapse),r.classList.toggle(o.options.classNavigationMenuPanelHeaderActionActive),r.setAttribute("aria-label",n),r.setAttribute("title",n)),t!==o.constructor.SELECT_NONE?(o.element.setAttribute("tabindex","0"),o.element.focus()):o.element.setAttribute("tabindex","-1"),e()},o.manage((0,a.default)(t,"keydown",o._handleKeyDown)),o.manage((0,u.default)(t,"blur",o._handleFocusOut)),o}return t=c,n=[{key:"options",get:function(){var t=i.default.prefix;return Object.assign(Object.create(o.default.options),{selectorInit:"[data-product-switcher]",selectorFloatingMenus:"\n        .".concat(t,"--overflow-menu-options,\n        .").concat(t,"--overflow-menu-options *,\n        .").concat(t,"--tooltip,\n        .").concat(t,"--tooltip *,\n        .flatpicker-calendar,\n        .flatpicker-calendar *\n        "),attribInitTarget:"data-product-switcher-target",classProductSwitcherExpanded:"".concat(t,"--panel--expanded")})}}],(e=[{key:"release",value:function(){return this.triggerButtonIds.clear(),s(p(c.prototype),"release",this).call(this)}}])&&l(t.prototype,e),n&&l(t,n),c.SELECT_NONE="__carbon-product-switcher-launcher-NONE",c.components=new WeakMap,c}();t.default=n});