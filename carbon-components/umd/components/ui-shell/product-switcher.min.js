function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(t,e){"function"==typeof define&&define.amd?define(["exports","./navigation-menu-panel","../../globals/js/misc/on","../../globals/js/settings","../../globals/js/misc/on-focus-by-keyboard"],e):"undefined"!=typeof exports?e(exports,require("./navigation-menu-panel"),require("../../globals/js/misc/on"),require("../../globals/js/settings"),require("../../globals/js/misc/on-focus-by-keyboard")):(e(e={},t.navigationMenuPanel,t.on,t.settings,t.onFocusByKeyboard),t.productSwitcher=e)}("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:this,function(t,r,a,i,u){"use strict";function e(t){return t&&t.__esModule?t:{default:t}}function l(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function s(t,e,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=p(t)););return t}(t,e);if(t){e=Object.getOwnPropertyDescriptor(t,e);return e.get?e.get.call(n):e.value}})(t,e,n||t)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function d(n){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=p(n);return t=o?(t=p(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==_typeof(t)&&"function"!=typeof t?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r=e(r),a=e(a),i=e(i),u=e(u);var b=0,n=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(c,r.default);var t,e,n,o=d(c);function c(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),(r=o.call(this,t,e)).current="",r.triggerButtonIds=new Set,r._handleFocusOut=function(t){var e;r.element.contains(t.relatedTarget)||(e=r.element.ownerDocument.getElementById(r.current))&&t.relatedTarget&&!t.relatedTarget.matches(r.options.selectorFloatingMenus)&&e.focus()},r._handleKeyDown=function(t){var e=!r.element.hasAttribute("hidden");27===t.which&&e&&(e=r.current,r.changeState(r.constructor.SELECT_NONE),r.element.ownerDocument.getElementById(e).focus())},r.createdByLauncher=function(t){var e=r.element.classList.contains(r.options.classProductSwitcherExpanded),t=t.delegateTarget;t.id||(t.id="__carbon-product-switcher-launcher-".concat(b++));t=t.id;r.changeState(e&&r.current===t?r.constructor.SELECT_NONE:t)},r.shouldStateBeChanged=function(t){return r.current!==t},r._changeState=function(t,e){r.element.classList.toggle(r.options.classProductSwitcherExpanded,t!==r.constructor.SELECT_NONE),r.current=t,r.current!==r.constructor.SELECT_NONE&&r.triggerButtonIds.add(r.current),r.triggerButtonIds.forEach(function(t){var e=r.element.ownerDocument.getElementById(t),t=e.getAttribute(r.options.attribLabelExpand);e.classList.remove(r.options.classNavigationMenuPanelHeaderActionActive),e.setAttribute("aria-label",t),e.setAttribute("title",t)});var n,o=r.element.ownerDocument.getElementById(r.current);o&&(n=o.getAttribute(r.options.attribLabelCollapse),o.classList.toggle(r.options.classNavigationMenuPanelHeaderActionActive),o.setAttribute("aria-label",n),o.setAttribute("title",n)),t!==r.constructor.SELECT_NONE?(r.element.setAttribute("tabindex","0"),r.element.focus()):r.element.setAttribute("tabindex","-1"),e()},r.manage((0,a.default)(t,"keydown",r._handleKeyDown)),r.manage((0,u.default)(t,"blur",r._handleFocusOut)),r}return t=c,n=[{key:"options",get:function(){var t=i.default.prefix;return Object.assign(Object.create(r.default.options),{selectorInit:"[data-product-switcher]",selectorFloatingMenus:"\n        .".concat(t,"--overflow-menu-options,\n        .").concat(t,"--overflow-menu-options *,\n        .").concat(t,"--tooltip,\n        .").concat(t,"--tooltip *,\n        .flatpicker-calendar,\n        .flatpicker-calendar *\n        "),attribInitTarget:"data-product-switcher-target",classProductSwitcherExpanded:"".concat(t,"--panel--expanded")})}}],(e=[{key:"release",value:function(){return this.triggerButtonIds.clear(),s(p(c.prototype),"release",this).call(this)}}])&&l(t.prototype,e),n&&l(t,n),c.SELECT_NONE="__carbon-product-switcher-launcher-NONE",c.components=new WeakMap,c}();t.default=n});