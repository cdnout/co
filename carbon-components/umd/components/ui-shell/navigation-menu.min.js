function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e,t){"function"==typeof define&&define.amd?define(["exports","./navigation-menu-panel","../../globals/js/misc/on","../../globals/js/misc/event-matches","../../globals/js/settings"],t):"undefined"!=typeof exports?t(exports,require("./navigation-menu-panel"),require("../../globals/js/misc/on"),require("../../globals/js/misc/event-matches"),require("../../globals/js/settings")):(t(t={},e.navigationMenuPanel,e.on,e.eventMatches,e.settings),e.navigationMenu=t)}("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:this,function(e,r,i,l,c){"use strict";function t(e){return e&&e.__esModule?e:{default:e}}function s(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function u(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(n){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=a(n);return e=o?(e=a(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==_typeof(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,r=t(r),i=t(i),l=t(l),c=t(c);var n=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(a,r.default);var e,t,n,o=g(a);function a(e,t){var c;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(c=o.call(this,e,t)).getCurrentNavigation=function(){return c.element.ownerDocument.activeElement},c.navigate=function(e){var t,n,o,a,r,i=s(c.element.querySelectorAll(c.options.selectorFocusableNavItems)),l=c.getCurrentNavigation();t=l,t=Math.max(i.indexOf(t)+e,-1),i[a=t,r=i.length,n=a-(a<r?0:r),o=i.length,n+(0<=n?0:o)].focus()},c._handleKeyDown=function(e){var t=!c.element.hasAttribute("hidden");if(27===e.which&&t)return c.changeState("collapsed"),void(c.triggerButton&&c.triggerButton.focus());var n=(0,l.default)(e,c.options.selectorShellNavSubmenu),t=(0,l.default)(e,c.options.selectorShellNavLink);!n&&!t||(t={38:c.constructor.NAVIGATE.BACKWARD,40:c.constructor.NAVIGATE.FORWARD}[e.which])&&(e.preventDefault(),c.navigate(t))},c._handleFocusOut=function(e){var t=c.element.contains(e.relatedTarget)||e.relatedTarget===c.triggerButton||!e.relatedTarget;c.element.contains(e.target)&&!t&&(c.changeState("collapsed"),c.triggerButton.focus())},c.changeNavSubmenuState=function(e){var t=e.matchesNavSubmenu,n=e.shouldBeCollapsed,e=t.closest(c.options.selectorShellNavCategory);e&&(t.setAttribute("aria-expanded",!n),e.classList.toggle(c.options.classShellNavCategoryExpanded),Array.prototype.forEach.call(e.querySelectorAll(c.options.selectorShellNavLink),function(e){e.tabIndex=n?-1:0}))},c._handleClick=function(e){var t=(0,l.default)(e,c.options.selectorShellNavSubmenu),n=(0,l.default)(e,c.options.selectorShellNavLink),e=(0,l.default)(e,c.options.selectorShellNestedNavLink);if(t||n){if(e)return s(c.element.querySelectorAll(c.options.selectorShellNavLinkCurrent)).forEach(function(e){e.classList.remove(c.options.classShellNavItemActive,c.options.classShellNavLinkCurrent)}),void e.closest(c.options.selectorShellNavNestedCategory).classList.add(c.options.classShellNavItemActive);t?(e="true"===t.getAttribute("aria-expanded"),c.changeNavSubmenuState({matchesNavSubmenu:t,isExpanded:e})):n&&(s(c.element.querySelectorAll(c.options.selectorShellNavLinkCurrent)).forEach(function(e){e.classList.remove(c.options.classShellNavItemActive,c.options.classShellNavLinkCurrent)}),n.closest(c.options.selectorShellNavItem).classList.add(c.options.classShellNavItemActive))}},c.manage((0,i.default)(e,"click",c._handleClick)),c.manage((0,i.default)(e,"keydown",c._handleKeyDown)),c.manage((0,i.default)(c.element.ownerDocument,"click",function(e){c.element.hasAttribute("hidden")||c.triggerButton.contains(e.target)||c.element.contains(e.target)||c.changeState("collapsed")}));e="onfocusout"in window;return c.manage((0,i.default)(c.element,e?"focusout":"blur",c._handleFocusOut,!e)),c}return e=a,n=[{key:"options",get:function(){var e=c.default.prefix;return Object.assign(Object.create(r.default.options),{selectorInit:"[data-navigation-menu]",attribInitTarget:"data-navigation-menu-target",selectorShellNavSubmenu:".".concat(e,"--navigation__category-toggle"),selectorShellNavLink:".".concat(e,"--navigation-link"),selectorShellNestedNavLink:".".concat(e,"--navigation__category-item > a.").concat(e,"--navigation-link"),selectorShellNavLinkCurrent:".".concat(e,"--navigation-item--active,.").concat(e,"--navigation__category-item--active"),selectorFocusableNavItems:"\n        .".concat(e,"--navigation__category-toggle,\n        .").concat(e,"--navigation-item > .").concat(e,"--navigation-link,\n        .").concat(e,'--navigation-link[tabindex="0"]\n      '),selectorShellNavItem:".".concat(e,"--navigation-item"),selectorShellNavCategory:".".concat(e,"--navigation__category"),selectorShellNavNestedCategory:".".concat(e,"--navigation__category-item"),classShellNavItemActive:"".concat(e,"--navigation-item--active"),classShellNavLinkCurrent:"".concat(e,"--navigation__category-item--active"),classShellNavCategoryExpanded:"".concat(e,"--navigation__category--expanded")})}}],(t=null)&&u(e.prototype,t),n&&u(e,n),a.components=new WeakMap,a.NAVIGATE={BACKWARD:-1,FORWARD:1},a}();e.default=n});