!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.HttpRequestMock=t():e.HttpRequestMock=t()}(self,function(){return(()=>{var __webpack_modules__={176:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){this.flag="yes"}},571:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isNodejs=t.currentDatetime=t.currentTime=t.currentDate=t.isArrayBuffer=t.str2arrayBuffer=t.sleep=t.tryToParseObject=t.isObject=t.queryObject2String=t.getQuery=void 0,t.getQuery=function(e){return/\?/.test(e)?e.replace(/.*?\?/g,"").replace(/#.*$/g,"").split("&").reduce(function(e,t){var t=t.split("="),r=t[0],t=t[1];return e[r]=(t||"").trim(),e},{}):{}},t.queryObject2String=function(e){var t,r=[];for(t in e)r.push(t+"="+e[t]);return r.join("&")},t.isObject=function(e){return"[object Object]"===Object.prototype.toString.call(e)},t.tryToParseObject=function(t){if("string"!=typeof t||"{"!==t[0]||"}"!==t[t.length-1])return t;try{return JSON.parse(t)}catch(e){return t}},t.sleep=function(t){return new Promise(function(e){return setTimeout(e,t)})},t.str2arrayBuffer=function(e){if("function"==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(2*e.length),r=new Uint16Array(t),n=0,o=e.length;n<o;n++)r[n]=e.charCodeAt(n);return t},t.isArrayBuffer=function(e){return"function"==typeof ArrayBuffer&&e instanceof ArrayBuffer||("function"==typeof Int32Array&&e instanceof Int32Array||("function"==typeof Int16Array&&e instanceof Int16Array||"function"==typeof Int8Array&&e instanceof Int8Array))},t.currentDate=function(){function e(e){return(e<10?"0":"").concat(e)}var t=(n=new Date).getFullYear(),r=n.getMonth()+1,n=n.getDate();return"".concat(e(t),"-").concat(e(r),"-").concat(e(n))},t.currentTime=function(){function e(e){return(e<10?"0":"").concat(e)}var t=(n=new Date).getHours(),r=n.getMinutes(),n=n.getSeconds();return"".concat(e(t),":").concat(e(r),":").concat(e(n))},t.currentDatetime=function(){function e(e){return(e<10?"0":"").concat(e)}var t=(i=new Date).getFullYear(),r=i.getMonth()+1,n=i.getDate(),o=i.getHours(),s=i.getMinutes(),i=i.getSeconds();return"".concat(e(t),"-").concat(e(r),"-").concat(e(n)," ").concat(e(o),":").concat(e(s),":").concat(e(i))},t.isNodejs=function(){return"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process)&&!(!process.versions||!process.versions.node)}},913:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HTTPStatusCodes=void 0,t.HTTPStatusCodes={100:"Continue",101:"Switching Protocols",102:"Processing",103:"Early Hints",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a Teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Too Early",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},607:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},o=(Object.defineProperty(t,"__esModule",{value:!0}),r(571)),s=n(r(843)),i=n(r(556)),u=n(r(507)),a=n(r(755)),n=(c.setup=function(e){var t=new a.default(e=void 0===e?"":e);return this.isEnabled&&"undefined"!=typeof wx&&"function"==typeof wx.request&&i.default.setup(t,e),this.isEnabled&&"undefined"!=typeof window&&"function"==typeof window.XMLHttpRequest&&u.default.setup(t,e),this.isEnabled&&"undefined"!=typeof window&&"function"==typeof window.fetch&&s.default.setup(t,e),this.isEnabled&&(0,o.isNodejs)()&&Object(function(){var e=new Error("Cannot find module './interceptor/node/http-and-https'");throw e.code="MODULE_NOT_FOUND",e}())(t,e),t},c.setupForWx=function(e){var t=new a.default(e=void 0===e?"":e);return this.isEnabled&&i.default.setup(t,e),t},c.setupForXhr=function(e){var t=new a.default(e=void 0===e?"":e);return this.isEnabled&&u.default.setup(t,e),t},c.setupForFetch=function(e){var t=new a.default(e=void 0===e?"":e);return this.isEnabled&&s.default.setup(t,e),t},c.setupForNode=function(e){var t=new a.default(e=void 0===e?"":e);return this.isEnabled&&Object(function(){var e=new Error("Cannot find module './interceptor/node/http-and-https'");throw e.code="MODULE_NOT_FOUND",e}())(t,e),t},c.enable=function(){return this.isEnabled=!0,a.default.getInstance().enable()},c.disable=function(){return this.isEnabled=!1,a.default.getInstance().disable()},c.enableLog=function(){return a.default.getInstance().enableLog()},c.disableLog=function(){return a.default.getInstance().disableLog()},c.setupForUnitTest=function(e){if(!(0,o.isNodejs)())throw new Error('"setupForUnitTest" is only for nodejs envrioment.');if(!["wx","xhr","fetch","node","all"].includes(e))throw new Error('Invalid type, valid types are "wx", "xhr", "fetch", "node" and "all".');var t=new a.default;return"wx"!==e&&"all"!==e||i.default.initDummyWxRequestForUnitTest(t),"xhr"!==e&&"all"!==e||u.default.initDummyXHRForUnitTest(t),"fetch"!==e&&"all"!==e||s.default.initDummyFetchForUnitTest(t),"node"!==e&&"all"!==e||Object(function(){var e=new Error("Cannot find module './interceptor/node/http-and-https'");throw e.code="MODULE_NOT_FOUND",e}())(t),t},c.isEnabled=!0,c.default=c);function c(){}t.default=n,e.exports=n},985:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(571);function o(e,t){void 0===t&&(t=""),this.proxyServer="",this.proxyMode="",this.mocker=e,/^(matched|marked)@localhost:\d+$/.test(t)&&(e=t.split("@"),this.proxyMode=e[0],this.proxyServer=e[1]),this.global=o.getGlobal()}o.setup=function(e,t){return new this(e,t=void 0===t?"":t)},o.getGlobal=function(){if("undefined"!=typeof window)return window;if(void 0!==r.g)return r.g;throw new Error("Detect global variable error")},o.prototype.matchMockRequest=function(e,t){if(this.proxyServer&&0===e.indexOf("http://".concat(this.proxyServer)))return null;e=this.mocker.matchMockItem(e,t);return e&&void 0!==e.times&&--e.times,e},o.prototype.getRequestInfo=function(e){var t={url:e.url,method:e.method||"GET",query:(0,n.getQuery)(e.url)};return(e.headers||e.header)&&(t.headers=e.headers||e.header),void 0!==e.body&&(t.body=(0,n.tryToParseObject)(e.body)),t},o.prototype.getFullRequestUrl=function(e,t){return/^https?:\/\//i.test(e)?this.checkProxyUrl(e,t):"function"==typeof URL&&"object"==typeof window&&window?this.checkProxyUrl(new URL(e,window.location.href).href,t):"object"==typeof document&&document&&"function"==typeof document.createElement?((r=document.createElement("a")).href=e,this.checkProxyUrl(r.href,t)):this.checkProxyUrl(e,t);var r},o.prototype.checkProxyUrl=function(e,t){if(!["matched","marked"].includes(this.proxyMode)||!this.proxyServer)return e;t=this.mocker.matchMockItem(e,t);if(!t)return e;var r=null==t?void 0:t.getRemoteInfo(e),r=r?r.url:e,r="http://".concat(this.proxyServer)+r.replace(/^(https?):\/\//,"/$1/");return"marked"!==this.proxyMode||t.proxy?r:e},t.default=o},843:function(e,t,r){"use strict";var n,o,s=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__assign||function(){return(a=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},i=this&&this.__awaiter||function(e,i,u,a){return new(u=u||Promise)(function(r,t){function n(e){try{s(a.next(e))}catch(e){t(e)}}function o(e){try{s(a.throw(e))}catch(e){t(e)}}function s(e){var t;e.done?r(e.value):((t=e.value)instanceof u?t:new u(function(e){e(t)})).then(n,o)}s((a=a.apply(e,i||[])).next())})},u=this&&this.__generator||function(n,o){var s,i,u,a={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(r){return function(e){var t=[r,e];if(s)throw new TypeError("Generator is already executing.");for(;a;)try{if(s=1,i&&(u=2&t[0]?i.return:t[0]?i.throw||((u=i.return)&&u.call(i),0):i.next)&&!(u=u.call(i,t[1])).done)return u;switch(i=0,(t=u?[2&t[0],u.value]:t)[0]){case 0:case 1:u=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(u=0<(u=a.trys).length&&u[u.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!u||t[1]>u[0]&&t[1]<u[3])){a.label=t[1];break}if(6===t[0]&&a.label<u[1]){a.label=u[1],u=t;break}if(u&&a.label<u[2]){a.label=u[2],a.ops.push(t);break}u[2]&&a.ops.pop(),a.trys.pop();continue}t=o.call(n,a)}catch(e){t=[6,e],i=0}finally{s=u=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},l=(Object.defineProperty(t,"__esModule",{value:!0}),c(r(176))),p=r(571),d=r(913),f=c(r(985)),c=(o=f.default,s(h,o),h.initDummyFetchForUnitTest=function(e){var t=f.default.getGlobal();return t.fetch||(t.fetch=Object(function(){var e=new Error("Cannot find module '../dummy/fetch'");throw e.code="MODULE_NOT_FOUND",e}())),new h(e)},h.prototype.intercept=function(){var u=this;return this.global.fetch=function(e,t){var r,o="object"==typeof e?(r=e.url,e):(r=e,t||{}),s=o&&o.method?o.method:"GET",i=u.getFullRequestUrl(r,s);return new Promise(function(t,r){var e=u.matchMockRequest(i,s),n=null==e?void 0:e.getRemoteInfo(i);n?(o.method=n.method||s,u.fetch(n.url,o).then(t).catch(r)):e?(n=u.getRequestInfo(a({url:i,method:s},o)),u.doMockRequest(e,n,t).then(function(e){e&&u.fetch(i,o).then(t).catch(r)})):u.fetch(i,o).then(t).catch(r)})},this},h.prototype.doMockRequest=function(r,n,o){return i(this,void 0,void 0,function(){var t;return u(this,function(e){switch(e.label){case 0:return(t=!1,r.delay&&0<r.delay)?[4,(0,p.sleep)(+r.delay)]:[3,3];case 1:return e.sent(),[4,this.doMockResponse(r,n,o)];case 2:return t=e.sent(),[3,5];case 3:return[4,this.doMockResponse(r,n,o)];case 4:t=e.sent(),e.label=5;case 5:return[2,t]}})})},h.prototype.doMockResponse=function(n,o,s){return i(this,void 0,void 0,function(){var t,r;return u(this,function(e){switch(e.label){case 0:return[4,n.sendBody(o)];case 1:return(t=e.sent(),r=Date.now(),t instanceof l.default)?[2,!0]:(r=Date.now()-r+(n.delay||0),this.mocker.sendResponseLog(r,t,o,n),s(this.getFetchResponse(t,n,o)),[2,!1])}})})},h.prototype.getFetchResponse=function(e,t,r){var n,o=e,e=t.status,s=d.HTTPStatusCodes[e]||"",t="function"==typeof Headers?new Headers(a(a({},t.header),{"x-powered-by":"http-request-mock"})):a(a({},t.header),{"x-powered-by":"http-request-mock"}),i="function"==typeof Blob?new Blob(["string"==typeof o?o:JSON.stringify(o)]):o;if("function"==typeof Response)return n=new Response(i,{status:e,statusText:s,headers:t}),Object.defineProperty(n,"url",{value:r.url}),n;var u={body:i,bodyUsed:!1,headers:t,ok:!0,redirected:!1,status:e,statusText:s,url:r.url,type:"basic",json:function(){return Promise.resolve(o)},arrayBuffer:function(){return Promise.resolve(o)},blob:function(){return Promise.resolve(i)},formData:function(){return Promise.resolve(o)},text:function(){return Promise.resolve("string"==typeof o?o:JSON.stringify(o))},clone:function(){return u},error:function(){return u},redirect:function(){return u}};return u},h);function h(e,t){e=o.call(this,e,t=void 0===t?"":t)||this;return h.instance||((h.instance=e).fetch=e.global.fetch.bind(e.global),e.intercept(),e)}t.default=c},556:function(e,t,r){"use strict";var n,o,s=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},a=this&&this.__awaiter||function(e,i,u,a){return new(u=u||Promise)(function(r,t){function n(e){try{s(a.next(e))}catch(e){t(e)}}function o(e){try{s(a.throw(e))}catch(e){t(e)}}function s(e){var t;e.done?r(e.value):((t=e.value)instanceof u?t:new u(function(e){e(t)})).then(n,o)}s((a=a.apply(e,i||[])).next())})},c=this&&this.__generator||function(n,o){var s,i,u,a={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(r){return function(e){var t=[r,e];if(s)throw new TypeError("Generator is already executing.");for(;a;)try{if(s=1,i&&(u=2&t[0]?i.return:t[0]?i.throw||((u=i.return)&&u.call(i),0):i.next)&&!(u=u.call(i,t[1])).done)return u;switch(i=0,(t=u?[2&t[0],u.value]:t)[0]){case 0:case 1:u=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(u=0<(u=a.trys).length&&u[u.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!u||t[1]>u[0]&&t[1]<u[3])){a.label=t[1];break}if(6===t[0]&&a.label<u[1]){a.label=u[1],u=t;break}if(u&&a.label<u[2]){a.label=u[2],a.ops.push(t);break}u[2]&&a.ops.pop(),a.trys.pop();continue}t=o.call(n,a)}catch(e){t=[6,e],i=0}finally{s=u=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},l=(Object.defineProperty(t,"__esModule",{value:!0}),u(r(176))),p=r(571),d=u(r(985)),u=(o=d.default,s(f,o),f.initDummyWxRequestForUnitTest=function(e){var t=d.default.getGlobal();return t.wx=t.wx||{},t.wx.request||(t.wx.request=Object(function(){var e=new Error("Cannot find module '../dummy/wx-request'");throw e.code="MODULE_NOT_FOUND",e}())(t.wx)),new f(e)},f.prototype.intercept=function(){var n=this;return Object.defineProperty(wx,"request",{configurable:!0,enumerable:!0,writable:!0,value:function(t){if(t&&t.url){t.url=n.getFullRequestUrl(t.url,t.method);var e=n.matchMockRequest(t.url,t.method),r=null==e?void 0:e.getRemoteInfo(t.url);if(r)return t.url=r.url,t.method=r.method||t.method,n.wxRequest(t);r=n.getRequestInfo(t);return/^get$/i.test(t.method)&&(0,p.isObject)(t.data)?r.query=i(i({},r.query),t.data):r.body=t.data,e?(n.doMockRequest(e,r,t).then(function(e){e&&n.wxRequest(t)}),n.getRequstTask()):(t.url=t.url,n.wxRequest(t))}}}),this},f.prototype.getRequstTask=function(){return{abort:function(){},onHeadersReceived:function(){},offHeadersReceived:function(){}}},f.prototype.doMockRequest=function(r,n,o){return a(this,void 0,void 0,function(){var t;return c(this,function(e){switch(e.label){case 0:return(t=!1,r.delay&&0<r.delay)?[4,(0,p.sleep)(+r.delay)]:[3,3];case 1:return e.sent(),[4,this.doMockResponse(r,n,o)];case 2:return t=e.sent(),[3,5];case 3:return[4,this.doMockResponse(r,n,o)];case 4:t=e.sent(),e.label=5;case 5:return[2,t]}})})},f.prototype.doMockResponse=function(s,i,u){return a(this,void 0,void 0,function(){var t,r,n,o;return c(this,function(e){switch(e.label){case 0:return t=Date.now(),[4,s.sendBody(i)];case 1:return(r=e.sent())instanceof l.default?[2,!0]:(n=Date.now()-t+(s.delay||0),o=this.getWxResponse(r,s),this.mocker.sendResponseLog(n,r,i,s),this.sendResult(u,o),[2,!1])}})})},f.prototype.getWxResponse=function(e,t){var r=[].concat((null==(r=t.header)?void 0:r["set-cookie"])||[]);return{data:e,statusCode:t.status||200,header:i(i({},t.header),{"x-powered-by":"http-request-mock"}),cookies:r,profile:{}}},f.prototype.sendResult=function(e,t){"function"==typeof e.success&&e.success(t),"function"==typeof e.complete&&e.complete(t)},f);function f(e,t){e=o.call(this,e,t=void 0===t?"":t)||this;return f.instance||((f.instance=e).wxRequest=wx.request.bind(wx),e.intercept(),e)}t.default=u},507:function(e,t,r){"use strict";var n,o,s=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},u=this&&this.__awaiter||function(e,i,u,a){return new(u=u||Promise)(function(r,t){function n(e){try{s(a.next(e))}catch(e){t(e)}}function o(e){try{s(a.throw(e))}catch(e){t(e)}}function s(e){var t;e.done?r(e.value):((t=e.value)instanceof u?t:new u(function(e){e(t)})).then(n,o)}s((a=a.apply(e,i||[])).next())})},a=this&&this.__generator||function(n,o){var s,i,u,a={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(r){return function(e){var t=[r,e];if(s)throw new TypeError("Generator is already executing.");for(;a;)try{if(s=1,i&&(u=2&t[0]?i.return:t[0]?i.throw||((u=i.return)&&u.call(i),0):i.next)&&!(u=u.call(i,t[1])).done)return u;switch(i=0,(t=u?[2&t[0],u.value]:t)[0]){case 0:case 1:u=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(u=0<(u=a.trys).length&&u[u.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!u||t[1]>u[0]&&t[1]<u[3])){a.label=t[1];break}if(6===t[0]&&a.label<u[1]){a.label=u[1],u=t;break}if(u&&a.label<u[2]){a.label=u[2],a.ops.push(t);break}u[2]&&a.ops.pop(),a.trys.pop();continue}t=o.call(n,a)}catch(e){t=[6,e],i=0}finally{s=u=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},l=(Object.defineProperty(t,"__esModule",{value:!0}),c(r(176))),p=r(571),d=r(913),c=c(r(985)),c=(o=c.default,s(f,o),f.initDummyXHRForUnitTest=function(e){return r.g.XMLHttpRequest=r.g.XMLHttpRequest||Object(function(){var e=new Error("Cannot find module '../dummy/xhr'");throw e.code="MODULE_NOT_FOUND",e}()),new f(e)},f.prototype.intercept=function(){return this.interceptOpen(),this.interceptSend(),this.interceptSetRequestHeader(),this.interceptGetAllResponseHeaders(),this.interceptGetResponseHeader(),this.interceptReadyState(),this.interceptStatus(),this.interceptStatusText(),this.interceptResponseText(),this.interceptResponse(),this.interceptResponseURL(),this.interceptResponseXML(),this},f.prototype.interceptOpen=function(){var a=this,c=this.xhr.open;return Object.defineProperty(this.xhr,"open",{get:function(){var u=this;return function(e,t,r,n,o){void 0===r&&(r=!0),void 0===n&&(n=null),void 0===o&&(o=null);var t=a.getFullRequestUrl(t,e),s=a.matchMockRequest(t,e),i=null==s?void 0:s.getRemoteInfo(t);return i?c.call(u,i.method||e,i.url,r,n,o):!u.bypassMock&&s?(u.isMockRequest=!0,u.mockItem=s,u.mockResponse=new h,u.requestInfo=a.getRequestInfo({url:t,method:e}),void(u.requestArgs=[e,t,r,n,o])):c.call(u,e,t,r,n,o)}}}),this},f.prototype.interceptSend=function(){var e=this,n=this.xhr.send;return Object.defineProperty(this.xhr,"send",{get:function(){var r=this;return function(t){return r.isMockRequest?(null!=t&&(r.requestInfo.body=(0,p.tryToParseObject)(t)),e.doMockRequest(r).then(function(e){if(e)return r.isMockRequest=!1,r.bypassMock=!0,r.open.apply(r,r.requestArgs),n.call(r,t)})):n.call(r,t)}}}),this},f.prototype.doMockRequest=function(n){return u(this,void 0,void 0,function(){var t,r;return a(this,function(e){switch(e.label){case 0:return(t=!1,(r=n.mockItem).delay&&0<r.delay)?[4,(0,p.sleep)(+r.delay)]:[3,3];case 1:return e.sent(),[4,this.doMockResponse(n)];case 2:return t=e.sent(),[3,5];case 3:return[4,this.doMockResponse(n)];case 4:t=e.sent(),e.label=5;case 5:return[2,t]}})})},f.prototype.doMockResponse=function(s){return u(this,void 0,void 0,function(){var t,r,n,o;return a(this,function(e){switch(e.label){case 0:return t=s.mockItem,n=s.requestInfo,r=Date.now(),[4,t.sendBody(n)];case 1:return(n=e.sent())instanceof l.default?[2,!0]:(o=Date.now()-r+(t.delay||0),s.mockResponse=n,this.mocker.sendResponseLog(o,n,s.requestInfo,t),this.sendResult(s),[2,!1])}})})},f.prototype.sendResult=function(e){var t="undefined"!=typeof Event&&"function"==typeof e.dispatchEvent;"function"==typeof e.onreadystatechange?e.onreadystatechange(this.event("readystatechange")):t&&e.dispatchEvent(new Event("readystatechange")),"function"==typeof e.onload?e.onload(this.event("load")):t&&e.dispatchEvent(new Event("load")),"function"==typeof e.onloadend?e.onloadend(this.event("loadend")):t&&e.dispatchEvent(new Event("loadend"))},f.prototype.event=function(e){return{type:e,target:null,currentTarget:null,eventPhase:0,bubbles:!1,cancelable:!1,defaultPrevented:!1,composed:!1,timeStamp:294973.8000000119,srcElement:null,returnValue:!0,cancelBubble:!1,path:[],NONE:0,CAPTURING_PHASE:0,AT_TARGET:0,BUBBLING_PHASE:0,composedPath:function(){return[]},initEvent:function(){},preventDefault:function(){},stopImmediatePropagation:function(){},stopPropagation:function(){},isTrusted:!1,lengthComputable:!1,loaded:1,total:1}},f.prototype.interceptGetAllResponseHeaders=function(){var t=this.xhr.getAllResponseHeaders;return Object.defineProperty(this.xhr,"getAllResponseHeaders",{get:function(){var e=this;return function(){return e.isMockRequest?Object.entries(i(i({},e.mockItem.header),{"x-powered-by":"http-request-mock"})).map(function(e){var t=e[0],e=e[1];return t.toLowerCase()+": "+e}).join("\r\n"):t.call(e)}}}),this},f.prototype.interceptGetResponseHeader=function(){var n=this.xhr.getResponseHeader;return Object.defineProperty(this.xhr,"getResponseHeader",{get:function(){var r=this;return function(t){if(r.isMockRequest){if(/^x-powered-by$/i.test(t))return"http-request-mock";var e=Object.entries(r.mockItem.header).find(function(e){return e[0].toLowerCase()===t});return e?e[1]:null}return n.call(r,t)}}}),this},f.prototype.interceptSetRequestHeader=function(){var n=this.xhr.setRequestHeader;return Object.defineProperty(this.xhr,"setRequestHeader",{get:function(){var r=this;return function(e,t){return r.isMockRequest?(r.requestInfo.headers=r.requestInfo.headers||{},void(r.requestInfo.headers[e]=t)):n.call(r,e,t)}}}),this},f.prototype.getGetter=function(e){var t=Object.getOwnPropertyDescriptor(this.xhr,e);return t?t.get:this.xhr[e]},f.prototype.interceptReadyState=function(){var e=this.getGetter("readyState");return Object.defineProperty(this.xhr,"readyState",{get:function(){return this.isMockRequest?this.mockResponse instanceof h?1:4:"function"==typeof e?e.call(this):e}}),this},f.prototype.interceptStatus=function(){var e=this.getGetter("status");return Object.defineProperty(this.xhr,"status",{get:function(){return this.isMockRequest?this.mockResponse instanceof h?0:this.mockItem.status:"function"==typeof e?e.call(this):e}}),this},f.prototype.interceptStatusText=function(){var e=this.getGetter("statusText");return Object.defineProperty(this.xhr,"statusText",{get:function(){return this.isMockRequest?!(this.mockResponse instanceof h)&&d.HTTPStatusCodes[this.mockItem.status]||"":"function"==typeof e?e.call(this):e}}),this},f.prototype.interceptResponseText=function(){var t=this.getGetter("responseText");return Object.defineProperty(this.xhr,"responseText",{get:function(){if(this.isMockRequest){if(this.mockResponse instanceof h)return"";var e=this.mockResponse;return"string"==typeof e?e:JSON.stringify(e)}return"function"==typeof t?t.call(this):t}}),this},f.prototype.interceptResponse=function(){var t=this.getGetter("response");return Object.defineProperty(this.xhr,"response",{get:function(){if(this.isMockRequest){if(this.mockResponse instanceof h)return null;var e=this.responseType;if("text"===e||""===e)return this.responseText;if("arraybuffer"===e&&"function"==typeof ArrayBuffer)return this.mockResponse instanceof ArrayBuffer?this.mockResponse:null;if("blob"===e&&"function"==typeof Blob)return this.mockResponse instanceof Blob?this.mockResponse:null;if("document"===e&&("function"==typeof Document||"function"==typeof XMLDocument))return this.mockResponse instanceof Document||this.mockResponse instanceof XMLDocument?this.mockResponse:null;if("json"!==e)return this.mockResponse;if("object"==typeof this.mockResponse)return this.mockResponse;if("string"==typeof this.mockResponse)try{return JSON.parse(this.mockResponse)}catch(e){return null}return null}return"function"==typeof t?t.call(this):t}}),this},f.prototype.interceptResponseURL=function(){var e=this.getGetter("responseURL");return Object.defineProperty(this.xhr,"responseURL",{get:function(){return this.isMockRequest?this.requestInfo.url:"function"==typeof e?e.call(this):e}}),this},f.prototype.interceptResponseXML=function(){var e=this.getGetter("responseXML");return Object.defineProperty(this.xhr,"responseXML",{get:function(){return this.isMockRequest?"document"===this.responseType?this.response:null:"function"==typeof e?e.call(this):e}}),this},f);function f(e,t){e=o.call(this,e,t=void 0===t?"":t)||this;return f.instance||((f.instance=e).xhr=e.global.XMLHttpRequest.prototype,e.intercept(),e)}t.default=c;var h=function(){}},832:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,i,u,a){return new(u=u||Promise)(function(r,t){function n(e){try{s(a.next(e))}catch(e){t(e)}}function o(e){try{s(a.throw(e))}catch(e){t(e)}}function s(e){var t;e.done?r(e.value):((t=e.value)instanceof u?t:new u(function(e){e(t)})).then(n,o)}s((a=a.apply(e,i||[])).next())})},o=this&&this.__generator||function(n,o){var s,i,u,a={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(r){return function(e){var t=[r,e];if(s)throw new TypeError("Generator is already executing.");for(;a;)try{if(s=1,i&&(u=2&t[0]?i.return:t[0]?i.throw||((u=i.return)&&u.call(i),0):i.next)&&!(u=u.call(i,t[1])).done)return u;switch(i=0,(t=u?[2&t[0],u.value]:t)[0]){case 0:case 1:u=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(u=0<(u=a.trys).length&&u[u.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!u||t[1]>u[0]&&t[1]<u[3])){a.label=t[1];break}if(6===t[0]&&a.label<u[1]){a.label=u[1],u=t;break}if(u&&a.label<u[2]){a.label=u[2],a.ops.push(t);break}u[2]&&a.ops.pop(),a.trys.pop();continue}t=o.call(n,a)}catch(e){t=[6,e],i=0}finally{s=u=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},i=(Object.defineProperty(t,"__esModule",{value:!0}),s(r(176))),u=r(571);function a(e){var t;e.url&&("string"==typeof e.url||e.url instanceof RegExp)&&(this.url=e.url,this.method=/^(get|post|put|patch|delete|head|any)$/i.test(e.method||"")?null==(t=e.method)?void 0:t.toUpperCase():"ANY",this.header="object"==typeof e.header?e.header:{},this.delay=void 0!==e.delay&&/^\d{0,15}$/.test(e.delay+"")?+e.delay:0,this.times=void 0!==e.times&&/^-?\d{0,15}$/.test(e.times+"")?+e.times:1/0,this.status=e.status&&/^[1-5][0-9][0-9]$/.test(e.status+"")?+e.status:200,this.disable=e.disable&&/^(yes|true|1)$/.test(e.disable)?"YES":"NO","body"in e?this.body=e.body:"response"in e?this.body=e.response:this.body="",e.remote&&/^((get|post|put|patch|delete|head)\s+)?https?:\/\//i.test(e.remote)&&(this.remote=e.remote),this.proxy=!!e.proxy,this.key="".concat(this.url,"-").concat(this.method))}a.prototype.bypass=function(){return new i.default},a.prototype.sendBody=function(r){return n(this,void 0,void 0,function(){var t;return o(this,function(e){switch(e.label){case 0:return"function"!=typeof this.body?[3,2]:[4,this.body.bind(this)(r,this)];case 1:return t=e.sent(),[3,3];case 2:t=this.body,e.label=3;case 3:return[2,t]}})})},a.prototype.getRemoteInfo=function(e){if(!this.remote)return!1;var t,r=this.remote.split(/(\s)/),n="",o=this.remote,s=(/^(get|post|put|patch|delete|head)$/i.test(r[0])&&(n=r[0],o=r.slice(2).join("")),(0,u.getQuery)(e));for(t in s)o=o.replace(new RegExp("\\$query."+t,"g"),s[t]);return{method:n,url:o=o.replace(/\$query/g,(0,u.queryObject2String)(s))}},t.default=a},755:function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __filename="/index.js",__assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},__importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},fs_1=(Object.defineProperty(exports,"__esModule",{value:!0}),__importDefault(__webpack_require__(328))),path_1=__importDefault(__webpack_require__(304)),comment_1=__importDefault(__webpack_require__(141)),utils_1=__webpack_require__(571),config_1=__webpack_require__(913),types_1=__webpack_require__(699),mock_item_1=__importDefault(__webpack_require__(832)),Mocker=function(){function Mocker(e){if(void 0===e&&(e=""),this.disabled=!1,this.log=!1,this.proxyServer="",this.proxyMode="none",Mocker.instance)return Mocker.instance;/^(matched|marked)@localhost:\d+$/.test(e)&&(e=e.split("@"),this.proxyMode=e[0],this.proxyServer=e[1]),(Mocker.instance=this).log=!(0,utils_1.isNodejs)(),this.mockConfigData={},this.groupLog([["[http-request-mock] is %cloaded.","color:inherit;font-weight:bold;"]])}return Mocker.getInstance=function(){return new Mocker},Mocker.prototype.setMockData=function(e){for(var t in e)this.mock(e[t]);return this},Mocker.prototype.addMockItem=function(e,t){return this.mockConfigData[e]=t,this},Mocker.prototype.reset=function(){return this.mockConfigData={},this.sendMsgToProxyServer("reset"),this},Mocker.prototype.enable=function(){return this.disabled=!1,this.sendMsgToProxyServer("enable"),this.groupLog([["[http-request-mock] is %cenabled.","color:green;font-weight:bold;"]]),this},Mocker.prototype.disable=function(){return this.disabled=!0,this.sendMsgToProxyServer("disable"),this.groupLog([["[http-request-mock] is %cdisabled.","color:red;font-weight:bold;"]]),this},Mocker.prototype.sendMsgToProxyServer=function(e){void 0===e&&(e=""),!this.proxyServer||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process)||"undefined"!=typeof window&&"[object Window]"===Object.prototype.toString.call(window)&&"function"==typeof window.fetch&&window.fetch("http://".concat(this.proxyServer,"/__hrm_msg__/")+encodeURIComponent(e))},Mocker.prototype.disableLog=function(){return this.log=!1,this.sendMsgToProxyServer("disableLog"),this},Mocker.prototype.enableLog=function(){return this.log=!0,this.sendMsgToProxyServer("enableLog"),this},Mocker.prototype.use=function(file){var absoluteFile=file;if(!path_1.default.isAbsolute(file)){var callerFile=this.getCallerFile();if(!callerFile)throw new Error('Expected "file" to be a absolute path.');absoluteFile=path_1.default.resolve(callerFile,"..",file)}if(!fs_1.default.existsSync(absoluteFile))throw new Error("".concat(absoluteFile," does not exist."));var tags=comment_1.default.parseCommentTags(absoluteFile);return tags.body=eval("require")(absoluteFile),this.mock(tags)},Mocker.prototype.getCallerFile=function(){var e=Error.prepareStackTrace,t=(Error.prepareStackTrace=function(e,t){return t},(new Error).stack);if(Error.prepareStackTrace=e,null!==t&&"object"==typeof t)for(var r=0;r<50;r++){var n=t[r]?t[r].getFileName():void 0,o=t[r+1]?t[r+1].getFileName():void 0;if(n!==o&&n===__filename)return o}},Mocker.prototype.mock=function(e){if(!(0,utils_1.isObject)(e))throw new Error("Invalid mock item, a valid mock item must be an object.");e=new mock_item_1.default(e);return!!e.key&&(this.addMockItem(e.key,e),e)},Mocker.prototype.get=function(e,t,r){var n=(r=void 0===r?{delay:0,status:200,times:1/0,header:{}}:r).delay,o=r.status,s=r.times,r=r.header;return this.mock({url:e,method:types_1.Method.GET,body:t,delay:n,status:o,header:r,times:s}),this},Mocker.prototype.post=function(e,t,r){var n=(r=void 0===r?{delay:0,status:200,times:1/0,header:{}}:r).delay,o=r.status,s=r.times,r=r.header;return this.mock({url:e,method:types_1.Method.POST,body:t,delay:n,status:o,header:r,times:s}),this},Mocker.prototype.put=function(e,t,r){var n=(r=void 0===r?{delay:0,status:200,times:1/0,header:{}}:r).delay,o=r.status,s=r.times,r=r.header;return this.mock({url:e,method:types_1.Method.PUT,body:t,delay:n,status:o,header:r,times:s}),this},Mocker.prototype.patch=function(e,t,r){var n=(r=void 0===r?{delay:0,status:200,times:1/0,header:{}}:r).delay,o=r.status,s=r.times,r=r.header;return this.mock({url:e,method:types_1.Method.PATCH,body:t,delay:n,status:o,header:r,times:s}),this},Mocker.prototype.delete=function(e,t,r){var n=(r=void 0===r?{delay:0,status:200,times:1/0,header:{}}:r).delay,o=r.status,s=r.times,r=r.header;return this.mock({url:e,method:types_1.Method.DELETE,body:t,delay:n,status:o,header:r,times:s}),this},Mocker.prototype.head=function(e,t){var r=(t=void 0===t?{delay:0,status:200,times:1/0,header:{}}:t).delay,n=t.status,o=t.times,t=t.header;return this.mock({url:e,method:types_1.Method.HEAD,body:"",delay:r,status:n,header:t,times:o}),this},Mocker.prototype.any=function(e,t,r){var n=(r=void 0===r?{delay:0,status:200,times:1/0,header:{}}:r).delay,o=r.status,s=r.times,r=r.header;return this.mock({url:e,method:types_1.Method.ANY,body:t,delay:n,status:o,header:r,times:s}),this},Mocker.prototype.matchMockItem=function(e,t){if(this.disabled)return null;for(var n=(t||"GET").toUpperCase(),r=Object.values(this.mockConfigData).filter(function(e){var t=e.disable,r=e.times,e=e.method,e=String(e).toUpperCase();return"YES"!==t&&(void 0===r||0<r)&&("ANY"===e||e===n)}).sort(function(e,t){return String(t.url).length-String(e.url).length}),o=0;o<2;o++)for(var s=0,i=r;s<i.length;s++){var u=i[s];try{if(u.url instanceof RegExp&&u.url.test(e))return u;var a=0===e.indexOf("//")?String(u.url).replace(/^https?:/gi,""):String(u.url);if(0===o&&e===a)return u;if(1===o&&-1!==e.indexOf(a))return u}catch(e){}}return null},Mocker.prototype.groupLog=function(e){if(this.log&&"function"==typeof console.groupCollapsed&&"function"==typeof console.groupEnd){Array.isArray(e[0])?console.groupCollapsed.apply(console,e[0]):console.groupCollapsed(e[0]);for(var t=1;t<e.length;t++)Array.isArray(e[t])?console.log.apply(console,e[t]):console.log(e[t]);console.groupEnd()}},Mocker.prototype.sendResponseLog=function(e,t,r,n){var o,s,i,u,r=[["[http-request-mock] %s %s %s (%c%s%c)","".concat((0,utils_1.currentTime)()),r.method,r.url,"color:"+(n.status<300?"green":"red"),n.status,"color:inherit"],["Request: ",r],["Response: ",{body:t,spent:e,headers:__assign(__assign({},n.header),{"x-powered-by":"http-request-mock"}),status:n.status,statusText:config_1.HTTPStatusCodes[n.status]||""}]];(0,utils_1.isNodejs)()?(t=n.url,e=n.method,o=n.delay,s=n.times,i=n.status,u=n.disable,r[3]=["MockItem:",{url:t,method:e,delay:o,times:s,status:i,disable:u}]):r[3]=["MockItem: ",n],this.groupLog(r)},Mocker}();exports.default=Mocker},699:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.Disable=t.Method=void 0,(r=t.Method||(t.Method={})).GET="GET",r.POST="POST",r.PUT="PUT",r.PATCH="PATCH",r.DELETE="DELETE",r.HEAD="HEAD",r.ANY="ANY",(r=t.Disable||(t.Disable={})).YES="YES",r.NO="NO"},141:(e,t,r)=>{const i=r(462);e.exports=class{static parseCommentTags(e){var t,r;const n=["url","method","disable","delay","status","header","times","remote","proxy"],o={},s={};for({tag:t,info:r}of this.getFileCommentTags(e))if(n.includes(t)){if("header"===t){if(!/^[\w.-]+\s*:\s*.+$/.test(r))continue;var i=r.slice(0,r.indexOf(":")).trim().toLowerCase(),u=r.slice(r.indexOf(":")+1).trim();if(!i||!u)continue;s[i]=s[i]?[].concat(s[i],u):u}o[t]=r}return o.header=0<Object.keys(s).length?s:void 0,o.method=/^(get|post|put|patch|delete|head)$/i.test(o.method)?o.method.toUpperCase():void 0,o.delay=/^\d{0,15}$/.test(o.delay)?+o.delay:void 0,o.times=/^-?\d{0,15}$/.test(o.times)?+o.times:void 0,o.status=/^[1-5][0-9][0-9]$/.test(o.status)?+o.status:void 0,o.disable=void 0!==o.disable&&/^(yes|true|1|)$/i.test(o.disable)?"yes":o.disable||void 0,o.remote=/^((get|post|put|patch|delete|head)\s+)?https?:\/\/[^\s]+$/i.test(o.remote)?o.remote:void 0,o.proxy=void 0!==o.proxy||void 0,this.isRegExp(o.url)&&(o.regexp=this.str2RegExp(o.url,!0),o.url=this.str2RegExp(o.url)),o}static getFileCommentTags(e){if(!i.existsSync(e))return[];const t=i.readFileSync(e,"utf8").replace(/^\uFEFF/,"");e=t.match(/\/\*\*\r?\n.*?\r?\n ?\*\//su);if(!e)return[];var r=e[0];const n=[],o=/^[ \t]*\*[ \t]*@(\w+)(?:[ \t]+(.*))?$/gm;let s=o.exec(r);for(;s;)n.push({tag:s[1],info:(s[2]||"").trim()}),s=o.exec(r);return n}static isRegExp(e){return/^\/[^/]/.test(e)&&/\/[gim]*$/.test(e)?"/":!(!/^#[^#]/.test(e)||!/#[gim]*$/.test(e))&&"#"}static str2RegExp(e,t=!1){let r="";return e=e.replace(/^(#|\/)/g,"").replace(/(#|\/)([gim]*)$/,e=>(r=e.slice(1),"")),t?[new RegExp(e,r).toString().replace(/^\/|\/\w*$/g,""),r]:new RegExp(e,r)}}},462:()=>{},328:()=>{},304:()=>{}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;t=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(t.exports,t,t.exports,__webpack_require__),t.exports}__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}();var __webpack_exports__=__webpack_require__(607),__webpack_exports__=__webpack_exports__.default;return __webpack_exports__})()});