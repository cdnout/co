!function(a){var b=[],c=[],d=[],e=[],f=[],g=[],h=[],j=[],k=[],l=[],m=[],n="coinsliderUniqueID",o=0;a.fn.coinslider=a.fn.CoinSlider=function(p){var q=function(d){var m,n,f=parseInt(b[d.id].width/b[d.id].spw),g=f,h=parseInt(b[d.id].height/b[d.id].sph),i=h,j=0,k=0,l=0,o=b[d.id].width-b[d.id].spw*g,p=o,q=b[d.id].height-b[d.id].sph*i,r=q;for(m=1;m<=b[d.id].sph;m++){for(p=o,r>0?(r--,i=h+1):i=h,n=1;n<=b[d.id].spw;n++)p>0?(p--,g=f+1):g=f,c[d.id][j]=m+""+n,j++,b[d.id].links?a("#"+d.id).append("<a href='"+e[d.id][0]+"' class='cs-"+d.id+"' id='cs-"+d.id+m+n+"' style='width:"+g+"px; height:"+i+"px; float: left; position: absolute;'></a>"):a("#"+d.id).append("<div class='cs-"+d.id+"' id='cs-"+d.id+m+n+"' style='width:"+g+"px; height:"+i+"px; float: left; position: absolute;'></div>"),a("#cs-"+d.id+m+n).css({"background-position":-k+"px "+(-l+"px"),left:k,top:l}),k+=g;l+=i,k=0}b[d.id].navigationPrevNextAlwaysShown||(a(".cs-"+d.id).mouseover(function(){a("#cs-navigation-"+d.id).show()}),a(".cs-"+d.id).mouseout(function(){a("#cs-navigation-"+d.id).hide()}),a("#cs-title-"+d.id).mouseover(function(){a("#cs-navigation-"+d.id).show()}),a("#cs-title-"+d.id).mouseout(function(){a("#cs-navigation-"+d.id).hide()})),b[d.id].hoverPause&&(a(".cs-"+d.id).mouseover(function(){b[d.id].pause=!0}),a(".cs-"+d.id).mouseout(function(){b[d.id].pause=!1}),a("#cs-title-"+d.id).mouseover(function(){b[d.id].pause=!0}),a("#cs-title-"+d.id).mouseout(function(){b[d.id].pause=!1}))},r=function(a){clearInterval(h[a.id]);var c=b[a.id].delay+b[a.id].spw*b[a.id].sph*b[a.id].sDelay;h[a.id]=setInterval(function(){s(a)},c)},s=function(e,f){b[e.id].pause!==!0&&(v(e),l[e.id]=0,k[e.id]=setInterval(function(){t(e,c[e.id][l[e.id]])},b[e.id].sDelay),a(e).css({"background-image":"url("+d[e.id][j[e.id]]+")"}),"undefined"==typeof f?j[e.id]++:"prev"==f?j[e.id]--:j[e.id]=f,j[e.id]==d[e.id].length&&(j[e.id]=0),-1==j[e.id]&&(j[e.id]=d[e.id].length-1),a(".cs-button-"+e.id).removeClass("cs-active"),a("#cs-button-"+e.id+"-"+(j[e.id]+1)).addClass("cs-active"),g[e.id][j[e.id]]?(a("#cs-title-"+e.id).css({opacity:0}).animate({opacity:b[e.id].opacity},b[e.id].titleSpeed),a("#cs-title-"+e.id).html(g[e.id][j[e.id]])):a("#cs-title-"+e.id).css("opacity",0))},t=function(c,g){return a(".cs-"+c.id).attr("href",e[c.id][j[c.id]]).attr("target",f[c.id][j[c.id]]),l[c.id]==b[c.id].spw*b[c.id].sph?void clearInterval(k[c.id]):(a("#cs-"+c.id+g).css({opacity:0,"background-image":"url("+d[c.id][j[c.id]]+")"}),a("#cs-"+c.id+g).animate({opacity:1},300),void l[c.id]++)},u=function(c){if(b[c.id].showNavigationPrevNext&&(a(c).append("<div id='cs-navigation-"+c.id+"'></div>"),b[c.id].navigationPrevNextAlwaysShown||a("#cs-navigation-"+c.id).hide(),a("#cs-navigation-"+c.id).append("<a href='#' id='cs-prev-"+c.id+"' class='cs-prev'>"+b[c.id].prevText+"</a>"),a("#cs-navigation-"+c.id).append("<a href='#' id='cs-next-"+c.id+"' class='cs-next'>"+b[c.id].nextText+"</a>"),a("#cs-prev-"+c.id).css({position:"absolute",top:b[c.id].height/2-15,left:0,"z-index":1001,"line-height":"30px",opacity:b[c.id].opacity}).click(function(a){a.preventDefault(),s(c,"prev"),r(c)}).mouseover(function(){a("#cs-navigation-"+c.id).show()}),a("#cs-next-"+c.id).css({position:"absolute",top:b[c.id].height/2-15,right:0,"z-index":1001,"line-height":"30px",opacity:b[c.id].opacity}).click(function(a){a.preventDefault(),s(c),r(c)}).mouseover(function(){a("#cs-navigation-"+c.id).show()}),a("#cs-navigation-"+c.id+" a").mouseout(function(){b[c.id].navigationPrevNextAlwaysShown||a("#cs-navigation-"+c.id).hide(),b[c.id].pause=!1})),b[c.id].showNavigationButtons){a("<div id='cs-buttons-"+c.id+"' class='cs-buttons'></div>").appendTo(a("#coin-slider-"+c.id));var e;for(e=1;e<d[c.id].length+1;e++)a("#cs-buttons-"+c.id).append("<a href='#' class='cs-button-"+c.id+"' id='cs-button-"+c.id+"-"+e+"'>"+e+"</a>");a.each(a(".cs-button-"+c.id),function(b,d){a(d).click(function(d){a(".cs-button-"+c.id).removeClass("cs-active"),a(this).addClass("cs-active"),d.preventDefault(),s(c,b),r(c)})}),a("#cs-buttons-"+c.id).css({left:"50%","margin-left":15*-d[c.id].length/2-5,position:"relative"})}},v=function(a){var e,f,g,h,d=["random","swirl","rain","straight"];if(h=""===b[a.id].effect?d[Math.floor(Math.random()*d.length)]:b[a.id].effect,c[a.id]=[],"random"==h){for(g=0,e=1;e<=b[a.id].sph;e++)for(f=1;f<=b[a.id].spw;f++)c[a.id][g]=e+""+f,g++;w(c[a.id])}"rain"==h&&y(a),"swirl"==h&&x(a),"straight"==h&&z(a),m[a.id]*=-1,m[a.id]>0&&c[a.id].reverse()},w=function(a){var c,d,e,b=a.length;if(0===b)return!1;for(;--b;)c=Math.floor(Math.random()*(b+1)),d=a[b],e=a[c],a[b]=e,a[c]=d},x=function(a){for(var k,m,d=b[a.id].sph,e=b[a.id].spw,f=1,g=1,h=0,i=0,j=0,l=!0;l;){for(i=0===h||2===h?e:d,m=1;i>=m;m++)if(c[a.id][j]=f+""+g,j++,m!=i)switch(h){case 0:g++;break;case 1:f++;break;case 2:g--;break;case 3:f--}switch(h=(h+1)%4){case 0:e--,g++;break;case 1:d--,f++;break;case 2:e--,g--;break;case 3:d--,f--}k=B(d,e)-A(d,e),k>=e&&k>=d&&(l=!1)}},y=function(a){for(var d=b[a.id].sph,e=b[a.id].spw,f=0,g=1,h=1,j=1,k=!0;k;){for(i=j;i<=g;i++)c[a.id][f]=i+""+parseInt(h-i+1),f++;h++,d>g&&e>h&&e>d&&g++,d>g&&d>=e&&g++,h>e&&j++,j>g&&(k=!1)}},z=function(a){var e,f,d=0;for(e=1;e<=b[a.id].sph;e++)for(f=1;f<=b[a.id].spw;f++)c[a.id][d]=e+""+f,d++},A=function(a,b){return a>b?b:a},B=function(a,b){return b>a?b:a},C=function(h){""===h.id&&(h.id=n+o++),c[h.id]=[],d[h.id]=[],e[h.id]=[],f[h.id]=[],g[h.id]=[],j[h.id]=0,l[h.id]=0,m[h.id]=1,b[h.id]=a.extend({},a.fn.coinslider.defaults,p),a.each(a("#"+h.id+" img"),function(b,c){d[h.id][b]=a(c).attr("src"),e[h.id][b]=a(c).parent().is("a")?a(c).parent().attr("href"):"",f[h.id][b]=a(c).parent().is("a")?a(c).parent().attr("target"):"",g[h.id][b]=a(c).next().is("span")?a(c).next().html():"",a(c).hide(),a(c).next().hide()}),a(h).css({"background-image":"url("+d[h.id][0]+")",width:b[h.id].width,height:b[h.id].height,position:"relative","background-position":"top left"}).wrap("<div class='coin-slider' id='coin-slider-"+h.id+"' />"),a("#"+h.id).append("<div class='cs-title' id='cs-title-"+h.id+"' style='position: absolute; bottom:0; left: 0; z-index: 1000;'></div>"),q(h),b[h.id].navigation&&u(h),s(h,0),r(h)};this.each(function(){C(this)})},a.fn.coinslider.defaults={width:565,height:290,spw:7,sph:5,delay:3e3,sDelay:30,opacity:.7,titleSpeed:500,effect:"",links:!0,hoverPause:!0,prevText:"prev",nextText:"next",navigation:!0,showNavigationPrevNext:!0,showNavigationButtons:!0,navigationPrevNextAlwaysShown:!1}}(jQuery);
