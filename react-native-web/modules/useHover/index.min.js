import{getModality}from"../modality";import useEvent from"../useEvent";import useLayoutEffect from"../useLayoutEffect";var emptyObject={},opts={passive:!0},lockEventType="react-gui:hover:lock",unlockEventType="react-gui:hover:unlock",supportsPointerEvent=function(){return!("undefined"==typeof window||null==window.PointerEvent)};function dispatchCustomEvent(e,t,n){var o=document.createEvent("CustomEvent"),u=n||emptyObject,l=u.bubbles,r=void 0===l||l,i=u.cancelable,v=void 0===i||i,c=u.detail;o.initCustomEvent(t,r,v,c),e.dispatchEvent(o)}function getPointerType(e){var t=e.pointerType;return null!=t?t:getModality()}export default function useHover(e,t){var n=t.contain,o=t.disabled,u=t.onHoverStart,l=t.onHoverChange,r=t.onHoverUpdate,i=t.onHoverEnd,v=supportsPointerEvent(),c=useEvent(v?"pointermove":"mousemove",opts),p=useEvent(v?"pointerenter":"mouseenter",opts),s=useEvent(v?"pointerleave":"mouseleave",opts),a=useEvent(lockEventType,opts),E=useEvent(unlockEventType,opts);useLayoutEffect(function(){var t=e.current;if(null!==t){var v=function(e){null!=i&&i(e),null!=l&&l(!1),c(t,null),s(t,null)},f=function(t){var o=e.current;null!=o&&"touch"!==getPointerType(t)&&(n&&dispatchCustomEvent(o,unlockEventType),v(t))},y=function(e){"touch"!==getPointerType(e)&&null!=r&&(null==e.x&&(e.x=e.clientX),null==e.y&&(e.y=e.clientY),r(e))},d=function(e){null!=u&&u(e),null!=l&&l(!0),null!=r&&c(t,o?null:y),s(t,o?null:f)};p(t,o?null:function(t){var u=e.current;null!=u&&"touch"!==getPointerType(t)&&(n&&dispatchCustomEvent(u,lockEventType),d(t),a(u,o?null:function(e){e.target!==u&&v(t)}),E(u,o?null:function(e){e.target!==u&&d(t)}))})}},[p,c,s,a,E,n,o,u,l,r,i,e])};