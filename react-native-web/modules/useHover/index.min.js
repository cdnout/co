import{getModality}from"../modality";import useEvent from"../useEvent";import useLayoutEffect from"../useLayoutEffect";var emptyObject={},opts={passive:!0},lockEventType="react-gui:hover:lock",unlockEventType="react-gui:hover:unlock",supportsPointerEvent=function(){return!("undefined"==typeof window||null==window.PointerEvent)};function dispatchCustomEvent(e,t,n){var o=document.createEvent("CustomEvent"),u=n||emptyObject,l=u.bubbles,n=u.cancelable,u=u.detail;o.initCustomEvent(t,void 0===l||l,void 0===n||n,u),e.dispatchEvent(o)}function getPointerType(e){e=e.pointerType;return null!=e?e:getModality()}export default function useHover(r,e){var i=e.contain,c=e.disabled,v=e.onHoverStart,p=e.onHoverChange,s=e.onHoverUpdate,a=e.onHoverEnd,e=supportsPointerEvent(),E=useEvent(e?"pointermove":"mousemove",opts),f=useEvent(e?"pointerenter":"mouseenter",opts),y=useEvent(e?"pointerleave":"mouseleave",opts),d=useEvent(lockEventType,opts),m=useEvent(unlockEventType,opts);useLayoutEffect(function(){var o,t,n,u,l=r.current;null!==l&&(o=function(e){null!=a&&a(e),null!=p&&p(!1),E(l,null),y(l,null)},t=function(e){var t=r.current;null!=t&&"touch"!==getPointerType(e)&&(i&&dispatchCustomEvent(t,unlockEventType),o(e))},n=function(e){"touch"!==getPointerType(e)&&null!=s&&(null==e.x&&(e.x=e.clientX),null==e.y&&(e.y=e.clientY),s(e))},u=function(e){null!=v&&v(e),null!=p&&p(!0),null!=s&&E(l,c?null:n),y(l,c?null:t)},f(l,c?null:function(t){var n=r.current;null!=n&&"touch"!==getPointerType(t)&&(i&&dispatchCustomEvent(n,lockEventType),u(t),d(n,c?null:function(e){e.target!==n&&o(t)}),m(n,c?null:function(e){e.target!==n&&u(t)}))}))},[f,E,y,d,m,i,c,v,p,s,a,r])}