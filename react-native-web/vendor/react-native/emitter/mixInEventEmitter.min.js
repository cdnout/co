"use strict";import EventEmitter from"./EventEmitter";import EventEmitterWithHolding from"./EventEmitterWithHolding";import EventHolder from"./EventHolder";import EventValidator from"./EventValidator";import invariant from"fbjs/lib/invariant";import keyOf from"fbjs/lib/keyOf";var __DEV__="production"!==process.env.NODE_ENV,TYPES_KEY=keyOf({__types:!0});function mixInEventEmitter(t,e){invariant(e,"Must supply set of valid event types");var i=t.prototype||t;invariant(!i.__eventEmitter,"An active emitter is already mixed in");var n=t.constructor;n&&invariant(n===Object||n===Function,"Mix EventEmitter into a class, not an instance"),i.hasOwnProperty(TYPES_KEY)?Object.assign(i.__types,e):i.__types?i.__types=Object.assign({},i.__types,e):i.__types=e,Object.assign(i,EventEmitterMixin)}var EventEmitterMixin={emit:function(t,e,i,n,r,E,s){return this.__getEventEmitter().emit(t,e,i,n,r,E,s)},emitAndHold:function(t,e,i,n,r,E,s){return this.__getEventEmitter().emitAndHold(t,e,i,n,r,E,s)},addListener:function(t,e,i){return this.__getEventEmitter().addListener(t,e,i)},once:function(t,e,i){return this.__getEventEmitter().once(t,e,i)},addRetroactiveListener:function(t,e,i){return this.__getEventEmitter().addRetroactiveListener(t,e,i)},addListenerMap:function(t,e){return this.__getEventEmitter().addListenerMap(t,e)},addRetroactiveListenerMap:function(t,e){return this.__getEventEmitter().addListenerMap(t,e)},removeAllListeners:function(){this.__getEventEmitter().removeAllListeners()},removeCurrentListener:function(){this.__getEventEmitter().removeCurrentListener()},releaseHeldEventType:function(t){this.__getEventEmitter().releaseHeldEventType(t)},__getEventEmitter:function(){if(!this.__eventEmitter){var t=new EventEmitter;__DEV__&&(t=EventValidator.addValidation(t,this.__types));var e=new EventHolder;this.__eventEmitter=new EventEmitterWithHolding(t,e)}return this.__eventEmitter}};export default mixInEventEmitter;