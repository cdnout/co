"use strict";import NativeEventEmitter from"../NativeEventEmitter";import NativeAnimatedModule from"./NativeAnimatedModule";import invariant from"fbjs/lib/invariant";var nativeEventEmitter,__nativeAnimatedNodeTagCount=1,__nativeAnimationIdCount=1,queueConnections=!1,queue=[],API={enableQueue:function(){queueConnections=!0},disableQueue:function(){invariant(NativeAnimatedModule,"Native animated module is not available"),queueConnections=!1;for(var e=0,t=queue.length;e<t;e++){var a=queue[e];NativeAnimatedModule.connectAnimatedNodes(a[0],a[1])}queue.length=0},createAnimatedNode:function(e,t){invariant(NativeAnimatedModule,"Native animated module is not available"),NativeAnimatedModule.createAnimatedNode(e,t)},startListeningToAnimatedNodeValue:function(e){invariant(NativeAnimatedModule,"Native animated module is not available"),NativeAnimatedModule.startListeningToAnimatedNodeValue(e)},stopListeningToAnimatedNodeValue:function(e){invariant(NativeAnimatedModule,"Native animated module is not available"),NativeAnimatedModule.stopListeningToAnimatedNodeValue(e)},connectAnimatedNodes:function(e,t){invariant(NativeAnimatedModule,"Native animated module is not available"),queueConnections?queue.push([e,t]):NativeAnimatedModule.connectAnimatedNodes(e,t)},disconnectAnimatedNodes:function(e,t){invariant(NativeAnimatedModule,"Native animated module is not available"),NativeAnimatedModule.disconnectAnimatedNodes(e,t)},startAnimatingNode:function(e,t,a,i){invariant(NativeAnimatedModule,"Native animated module is not available"),NativeAnimatedModule.startAnimatingNode(e,t,a,i)},stopAnimation:function(e){invariant(NativeAnimatedModule,"Native animated module is not available"),NativeAnimatedModule.stopAnimation(e)},setAnimatedNodeValue:function(e,t){invariant(NativeAnimatedModule,"Native animated module is not available"),NativeAnimatedModule.setAnimatedNodeValue(e,t)},setAnimatedNodeOffset:function(e,t){invariant(NativeAnimatedModule,"Native animated module is not available"),NativeAnimatedModule.setAnimatedNodeOffset(e,t)},flattenAnimatedNodeOffset:function(e){invariant(NativeAnimatedModule,"Native animated module is not available"),NativeAnimatedModule.flattenAnimatedNodeOffset(e)},extractAnimatedNodeOffset:function(e){invariant(NativeAnimatedModule,"Native animated module is not available"),NativeAnimatedModule.extractAnimatedNodeOffset(e)},connectAnimatedNodeToView:function(e,t){invariant(NativeAnimatedModule,"Native animated module is not available"),NativeAnimatedModule.connectAnimatedNodeToView(e,t)},disconnectAnimatedNodeFromView:function(e,t){invariant(NativeAnimatedModule,"Native animated module is not available"),NativeAnimatedModule.disconnectAnimatedNodeFromView(e,t)},dropAnimatedNode:function(e){invariant(NativeAnimatedModule,"Native animated module is not available"),NativeAnimatedModule.dropAnimatedNode(e)},addAnimatedEventToView:function(e,t,a){invariant(NativeAnimatedModule,"Native animated module is not available"),NativeAnimatedModule.addAnimatedEventToView(e,t,a)},removeAnimatedEventFromView:function(e,t,a){invariant(NativeAnimatedModule,"Native animated module is not available"),NativeAnimatedModule.removeAnimatedEventFromView(e,t,a)}},STYLES_WHITELIST={opacity:!0,transform:!0,borderRadius:!0,borderBottomEndRadius:!0,borderBottomLeftRadius:!0,borderBottomRightRadius:!0,borderBottomStartRadius:!0,borderTopEndRadius:!0,borderTopLeftRadius:!0,borderTopRightRadius:!0,borderTopStartRadius:!0,elevation:!0,shadowOpacity:!0,shadowRadius:!0,scaleX:!0,scaleY:!0,translateX:!0,translateY:!0},TRANSFORM_WHITELIST={translateX:!0,translateY:!0,scale:!0,scaleX:!0,scaleY:!0,rotate:!0,rotateX:!0,rotateY:!0,perspective:!0},SUPPORTED_INTERPOLATION_PARAMS={inputRange:!0,outputRange:!0,extrapolate:!0,extrapolateRight:!0,extrapolateLeft:!0};function addWhitelistedStyleProp(e){STYLES_WHITELIST[e]=!0}function addWhitelistedTransformProp(e){TRANSFORM_WHITELIST[e]=!0}function addWhitelistedInterpolationParam(e){SUPPORTED_INTERPOLATION_PARAMS[e]=!0}function validateTransform(e){e.forEach(function(e){if(!TRANSFORM_WHITELIST.hasOwnProperty(e.property))throw new Error("Property '"+e.property+"' is not supported by native animated module")})}function validateStyles(e){for(var t in e)if(!STYLES_WHITELIST.hasOwnProperty(t))throw new Error("Style property '"+t+"' is not supported by native animated module")}function validateInterpolation(e){for(var t in e)if(!SUPPORTED_INTERPOLATION_PARAMS.hasOwnProperty(t))throw new Error("Interpolation property '"+t+"' is not supported by native animated module")}function generateNewNodeTag(){return __nativeAnimatedNodeTagCount++}function generateNewAnimationId(){return __nativeAnimationIdCount++}function assertNativeAnimatedModule(){invariant(NativeAnimatedModule,"Native animated module is not available")}function shouldUseNativeDriver(e){return(!0!==e.useNativeDriver||NativeAnimatedModule)&&e.useNativeDriver||!1}function transformDataType(e){return"string"!=typeof e?e:/deg$/.test(e)?(parseFloat(e)||0)*Math.PI/180:e}var NativeAnimatedHelper={API:API,addWhitelistedStyleProp:addWhitelistedStyleProp,addWhitelistedTransformProp:addWhitelistedTransformProp,addWhitelistedInterpolationParam:addWhitelistedInterpolationParam,validateStyles:validateStyles,validateTransform:validateTransform,validateInterpolation:validateInterpolation,generateNewNodeTag:generateNewNodeTag,generateNewAnimationId:generateNewAnimationId,assertNativeAnimatedModule:assertNativeAnimatedModule,shouldUseNativeDriver:shouldUseNativeDriver,transformDataType:transformDataType,get nativeEventEmitter(){return nativeEventEmitter||(nativeEventEmitter=new NativeEventEmitter(NativeAnimatedModule)),nativeEventEmitter}};export{API,addWhitelistedStyleProp,addWhitelistedTransformProp,addWhitelistedInterpolationParam,validateStyles,validateTransform,validateInterpolation,generateNewNodeTag,generateNewAnimationId,assertNativeAnimatedModule,shouldUseNativeDriver,transformDataType};export default NativeAnimatedHelper;