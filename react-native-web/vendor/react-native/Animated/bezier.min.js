"use strict";var NEWTON_ITERATIONS=4,NEWTON_MIN_SLOPE=.001,SUBDIVISION_PRECISION=1e-7,SUBDIVISION_MAX_ITERATIONS=10,kSplineTableSize=11,kSampleStepSize=1/(kSplineTableSize-1),float32ArraySupported="function"==typeof Float32Array;function A(e,r){return 1-3*r+3*e}function B(e,r){return 3*r-6*e}function C(e){return 3*e}function calcBezier(e,r,n){return((A(r,n)*e+B(r,n))*e+C(r))*e}function getSlope(e,r,n){return 3*A(r,n)*e*e+2*B(r,n)*e+C(r)}function binarySubdivide(e,r,n,t,S){for(var i,a,o=0,u=r,l=n;0<(i=calcBezier(a=u+(l-u)/2,t,S)-e)?l=a:u=a,Math.abs(i)>SUBDIVISION_PRECISION&&++o<SUBDIVISION_MAX_ITERATIONS;);return a}function newtonRaphsonIterate(e,r,n,t){for(var S=r,i=0;i<NEWTON_ITERATIONS;++i){var a=getSlope(S,n,t);if(0===a)return S;S-=(calcBezier(S,n,t)-e)/a}return S}export default function bezier(a,r,o,n){if(!(0<=a&&a<=1&&0<=o&&o<=1))throw new Error("bezier x values must be in [0, 1] range");var u=new(float32ArraySupported?Float32Array:Array)(kSplineTableSize);if(a!==r||o!==n)for(var e=0;e<kSplineTableSize;++e)u[e]=calcBezier(e*kSampleStepSize,a,o);return function(e){return a===r&&o===n?e:0===e?0:1===e?1:calcBezier(function(e){for(var r=0,n=1,t=kSplineTableSize-1;n!==t&&u[n]<=e;++n)r+=kSampleStepSize;var S=r+(e-u[--n])/(u[n+1]-u[n])*kSampleStepSize,i=getSlope(S,a,o);return NEWTON_MIN_SLOPE<=i?newtonRaphsonIterate(e,S,a,o):0===i?S:binarySubdivide(e,r,r+kSampleStepSize,a,o)}(e),r,n)}}