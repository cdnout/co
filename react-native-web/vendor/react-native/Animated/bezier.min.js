"use strict";var NEWTON_ITERATIONS=4,NEWTON_MIN_SLOPE=.001,SUBDIVISION_PRECISION=1e-7,SUBDIVISION_MAX_ITERATIONS=10,kSplineTableSize=11,kSampleStepSize=1/(kSplineTableSize-1),float32ArraySupported="function"==typeof Float32Array;function A(e,r){return 1-3*r+3*e}function B(e,r){return 3*r-6*e}function C(e){return 3*e}function calcBezier(e,r,n){return((A(r,n)*e+B(r,n))*e+C(r))*e}function getSlope(e,r,n){return 3*A(r,n)*e*e+2*B(r,n)*e+C(r)}function binarySubdivide(e,r,n,t,S){var i,a,l=0,o=r,u=n;do{(i=calcBezier(a=o+(u-o)/2,t,S)-e)>0?u=a:o=a}while(Math.abs(i)>SUBDIVISION_PRECISION&&++l<SUBDIVISION_MAX_ITERATIONS);return a}function newtonRaphsonIterate(e,r,n,t){for(var S=r,i=0;i<NEWTON_ITERATIONS;++i){var a=getSlope(S,n,t);if(0===a)return S;S-=(calcBezier(S,n,t)-e)/a}return S}export default function bezier(e,r,n,t){if(!(e>=0&&e<=1&&n>=0&&n<=1))throw new Error("bezier x values must be in [0, 1] range");var S=float32ArraySupported?new Float32Array(kSplineTableSize):new Array(kSplineTableSize);if(e!==r||n!==t)for(var i=0;i<kSplineTableSize;++i)S[i]=calcBezier(i*kSampleStepSize,e,n);return function(i){return e===r&&n===t?i:0===i?0:1===i?1:calcBezier(function(r){for(var t=0,i=1,a=kSplineTableSize-1;i!==a&&S[i]<=r;++i)t+=kSampleStepSize;var l=t+(r-S[--i])/(S[i+1]-S[i])*kSampleStepSize,o=getSlope(l,e,n);return o>=NEWTON_MIN_SLOPE?newtonRaphsonIterate(r,l,e,n):0===o?l:binarySubdivide(r,t,t+kSampleStepSize,e,n)}(i),r,t)}};