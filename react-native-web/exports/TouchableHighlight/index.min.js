"use strict";function _extends(){return(_extends=Object.assign||function(e){for(var s=1;s<arguments.length;s++){var t=arguments[s];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function _objectWithoutPropertiesLoose(e,s){if(null==e)return{};var t,r,n={},l=Object.keys(e);for(r=0;r<l.length;r++)t=l[r],s.indexOf(t)>=0||(n[t]=e[t]);return n}import*as React from"react";import{useCallback,useMemo,useState,useRef}from"react";import useMergeRefs from"../../modules/useMergeRefs";import usePressEvents from"../../modules/usePressEvents";import StyleSheet from"../StyleSheet";import View from"../View";function createExtraStyles(e,s){return{child:{opacity:null!=e?e:.85},underlay:{backgroundColor:void 0===s?"black":s}}}function hasPressHandler(e){return null!=e.onPress||null!=e.onPressIn||null!=e.onPressOut||null!=e.onLongPress}function TouchableHighlight(e,s){var t=e.activeOpacity,r=e.children,n=e.delayPressIn,l=e.delayPressOut,o=e.delayLongPress,a=e.disabled,u=e.focusable,i=e.onHideUnderlay,c=e.onLongPress,d=e.onPress,y=e.onPressIn,h=e.onPressOut,f=e.onShowUnderlay,P=e.rejectResponderTermination,m=e.style,b=e.testOnly_pressed,p=e.underlayColor,g=_objectWithoutPropertiesLoose(e,["activeOpacity","children","delayPressIn","delayPressOut","delayLongPress","disabled","focusable","onHideUnderlay","onLongPress","onPress","onPressIn","onPressOut","onShowUnderlay","rejectResponderTermination","style","testOnly_pressed","underlayColor"]),S=useRef(null),O=useMergeRefs(s,S),R=useState(!0===b?createExtraStyles(t,p):null),v=R[0],H=R[1],E=useCallback(function(){hasPressHandler(e)&&(H(createExtraStyles(t,p)),null!=f&&f())},[t,f,e,p]),L=useCallback(function(){!0!==b&&hasPressHandler(e)&&(H(null),null!=i&&i())},[i,e,b]),x=useMemo(function(){return{cancelable:!P,disabled:a,delayLongPress:o,delayPressStart:n,delayPressEnd:l,onLongPress:c,onPress:d,onPressStart:function(e){E(),null!=y&&y(e)},onPressEnd:function(e){L(),null!=h&&h(e)}}},[o,n,l,a,c,d,y,h,P,E,L]),M=usePressEvents(S,x),T=React.Children.only(r);return React.createElement(View,_extends({},g,M,{accessibilityDisabled:a,focusable:!a&&!1!==u,ref:O,style:[styles.root,m,!a&&styles.actionable,v&&v.underlay]}),React.cloneElement(T,{style:StyleSheet.compose(T.props.style,v&&v.child)}))}var styles=StyleSheet.create({root:{userSelect:"none"},actionable:{cursor:"pointer",touchAction:"manipulation"}}),MemoedTouchableHighlight=React.memo(React.forwardRef(TouchableHighlight));MemoedTouchableHighlight.displayName="TouchableHighlight";export default MemoedTouchableHighlight;