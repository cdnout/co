"use strict";import InteractionManager from"../InteractionManager";import TouchHistoryMath from"../../vendor/react-native/TouchHistoryMath";var currentCentroidX=TouchHistoryMath.currentCentroidX,currentCentroidY=TouchHistoryMath.currentCentroidY,currentCentroidXOfTouchesChangedAfter=TouchHistoryMath.currentCentroidXOfTouchesChangedAfter,currentCentroidYOfTouchesChangedAfter=TouchHistoryMath.currentCentroidYOfTouchesChangedAfter,previousCentroidXOfTouchesChangedAfter=TouchHistoryMath.previousCentroidXOfTouchesChangedAfter,previousCentroidYOfTouchesChangedAfter=TouchHistoryMath.previousCentroidYOfTouchesChangedAfter,PanResponder={_initializeGestureState:function(e){e.x=0,e.y=0,e.initialX=0,e.initialY=0,e.deltaX=0,e.deltaY=0,e.velocityX=0,e.velocityY=0,e.numberActiveTouches=0,e._accountsForMovesUpTo=0},_updateGestureStateOnMove:function(e,n){var t=e._accountsForMovesUpTo,o=previousCentroidXOfTouchesChangedAfter(n,t),r=previousCentroidYOfTouchesChangedAfter(n,t),a=e.deltaX,i=e.deltaY,u=currentCentroidXOfTouchesChangedAfter(n,t),c=currentCentroidYOfTouchesChangedAfter(n,t),t=a+(u-o),o=i+(c-r),r=n.mostRecentTimeStamp-e._accountsForMovesUpTo;e.deltaX=t,e.deltaY=o,e.numberActiveTouches=n.numberActiveTouches,e.velocityX=(t-a)/r,e.velocityY=(o-i)/r,e.x=u,e.y=c,e._accountsForMovesUpTo=n.mostRecentTimeStamp},create:function(e){var t={handle:null},o={stateID:Math.random(),x:0,y:0,initialX:0,initialY:0,deltaX:0,deltaY:0,velocityX:0,velocityY:0,numberActiveTouches:0,_accountsForMovesUpTo:0},n=e.onStartShouldSetResponder,r=e.onStartShouldSetResponderCapture,a=e.onMoveShouldSetResponder,i=e.onMoveShouldSetResponderCapture,u=e.onPanGrant,c=e.onPanStart,s=e.onPanMove,d=e.onPanEnd,l=e.onPanRelease,h=e.onPanReject,p=e.onPanTerminate,v=e.onPanTerminationRequest;return{panHandlers:{onStartShouldSetResponder:function(e){return null!=n&&n(e,o)},onMoveShouldSetResponder:function(e){return null!=a&&a(e,o)},onStartShouldSetResponderCapture:function(e){return 1===e.nativeEvent.touches.length&&PanResponder._initializeGestureState(o),o.numberActiveTouches=e.touchHistory.numberActiveTouches,null!=r&&r(e,o)},onMoveShouldSetResponderCapture:function(e){var n=e.touchHistory;return PanResponder._updateGestureStateOnMove(o,n),null!=i&&i(e,o)},onResponderGrant:function(e){t.handle||(t.handle=InteractionManager.createInteractionHandle()),o.initialX=currentCentroidX(e.touchHistory),o.initialY=currentCentroidY(e.touchHistory),o.deltaX=0,o.deltaY=0,null!=u&&u(e,o)},onResponderReject:function(e){clearInteractionHandle(t,h,e,o)},onResponderStart:function(e){var n=e.touchHistory.numberActiveTouches;o.numberActiveTouches=n,null!=c&&c(e,o)},onResponderMove:function(e){var n=e.touchHistory;o._accountsForMovesUpTo!==n.mostRecentTimeStamp&&(PanResponder._updateGestureStateOnMove(o,n),null!=s&&s(e,o))},onResponderEnd:function(e){var n=e.touchHistory.numberActiveTouches;o.numberActiveTouches=n,clearInteractionHandle(t,d,e,o)},onResponderRelease:function(e){clearInteractionHandle(t,l,e,o),PanResponder._initializeGestureState(o)},onResponderTerminate:function(e){clearInteractionHandle(t,p,e,o),PanResponder._initializeGestureState(o)},onResponderTerminationRequest:function(e){return null==v||v(e,o)}},getInteractionHandle:function(){return t.handle}}}};function clearInteractionHandle(e,n,t,o){e.handle&&(InteractionManager.clearInteractionHandle(e.handle),e.handle=null),n&&n(t,o)}export default PanResponder;