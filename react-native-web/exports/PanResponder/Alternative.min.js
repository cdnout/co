"use strict";import InteractionManager from"../InteractionManager";import TouchHistoryMath from"../../vendor/react-native/TouchHistoryMath";var currentCentroidX=TouchHistoryMath.currentCentroidX,currentCentroidY=TouchHistoryMath.currentCentroidY,currentCentroidXOfTouchesChangedAfter=TouchHistoryMath.currentCentroidXOfTouchesChangedAfter,currentCentroidYOfTouchesChangedAfter=TouchHistoryMath.currentCentroidYOfTouchesChangedAfter,previousCentroidXOfTouchesChangedAfter=TouchHistoryMath.previousCentroidXOfTouchesChangedAfter,previousCentroidYOfTouchesChangedAfter=TouchHistoryMath.previousCentroidYOfTouchesChangedAfter,PanResponder={_initializeGestureState:function(e){e.x=0,e.y=0,e.initialX=0,e.initialY=0,e.deltaX=0,e.deltaY=0,e.velocityX=0,e.velocityY=0,e.numberActiveTouches=0,e._accountsForMovesUpTo=0},_updateGestureStateOnMove:function(e,n){var t=e._accountsForMovesUpTo,o=previousCentroidXOfTouchesChangedAfter(n,t),r=previousCentroidYOfTouchesChangedAfter(n,t),a=e.deltaX,i=e.deltaY,u=currentCentroidXOfTouchesChangedAfter(n,t),c=currentCentroidYOfTouchesChangedAfter(n,t),s=a+(u-o),d=i+(c-r),l=n.mostRecentTimeStamp-e._accountsForMovesUpTo;e.deltaX=s,e.deltaY=d,e.numberActiveTouches=n.numberActiveTouches,e.velocityX=(s-a)/l,e.velocityY=(d-i)/l,e.x=u,e.y=c,e._accountsForMovesUpTo=n.mostRecentTimeStamp},create:function(e){var n={handle:null},t={stateID:Math.random(),x:0,y:0,initialX:0,initialY:0,deltaX:0,deltaY:0,velocityX:0,velocityY:0,numberActiveTouches:0,_accountsForMovesUpTo:0},o=e.onStartShouldSetResponder,r=e.onStartShouldSetResponderCapture,a=e.onMoveShouldSetResponder,i=e.onMoveShouldSetResponderCapture,u=e.onPanGrant,c=e.onPanStart,s=e.onPanMove,d=e.onPanEnd,l=e.onPanRelease,h=e.onPanReject,p=e.onPanTerminate,v=e.onPanTerminationRequest;return{panHandlers:{onStartShouldSetResponder:function(e){return null!=o&&o(e,t)},onMoveShouldSetResponder:function(e){return null!=a&&a(e,t)},onStartShouldSetResponderCapture:function(e){return 1===e.nativeEvent.touches.length&&PanResponder._initializeGestureState(t),t.numberActiveTouches=e.touchHistory.numberActiveTouches,null!=r&&r(e,t)},onMoveShouldSetResponderCapture:function(e){var n=e.touchHistory;return PanResponder._updateGestureStateOnMove(t,n),null!=i&&i(e,t)},onResponderGrant:function(e){n.handle||(n.handle=InteractionManager.createInteractionHandle()),t.initialX=currentCentroidX(e.touchHistory),t.initialY=currentCentroidY(e.touchHistory),t.deltaX=0,t.deltaY=0,null!=u&&u(e,t)},onResponderReject:function(e){clearInteractionHandle(n,h,e,t)},onResponderStart:function(e){var n=e.touchHistory.numberActiveTouches;t.numberActiveTouches=n,null!=c&&c(e,t)},onResponderMove:function(e){var n=e.touchHistory;t._accountsForMovesUpTo!==n.mostRecentTimeStamp&&(PanResponder._updateGestureStateOnMove(t,n),null!=s&&s(e,t))},onResponderEnd:function(e){var o=e.touchHistory.numberActiveTouches;t.numberActiveTouches=o,clearInteractionHandle(n,d,e,t)},onResponderRelease:function(e){clearInteractionHandle(n,l,e,t),PanResponder._initializeGestureState(t)},onResponderTerminate:function(e){clearInteractionHandle(n,p,e,t),PanResponder._initializeGestureState(t)},onResponderTerminationRequest:function(e){return null==v||v(e,t)}},getInteractionHandle:function(){return n.handle}}}};function clearInteractionHandle(e,n,t,o){e.handle&&(InteractionManager.clearInteractionHandle(e.handle),e.handle=null),n&&n(t,o)}export default PanResponder;