import{canUseDOM}from"fbjs/lib/ExecutionEnvironment";import{MONOSPACE_FONT_STACK,SYSTEM_FONT_STACK,STYLE_SHORT_FORM_EXPANSIONS}from"./constants";import normalizeValueWithProperty from"./normalizeValueWithProperty";var emptyObject={},supportsCSS3TextDecoration=!canUseDOM||null!=window.CSS&&null!=window.CSS.supports&&(window.CSS.supports("text-decoration-line","none")||window.CSS.supports("-webkit-text-decoration-line","none")),mapTransform=function(e){var r=Object.keys(e)[0],t=e[r];return"matrix"===r||"matrix3d"===r?r+"("+t.join(",")+")":r+"("+normalizeValueWithProperty(t,r)+")"},resolveTransform=function(e,r){var t=r.transform;Array.isArray(r.transform)&&(t=r.transform.map(mapTransform).join(" ")),e.transform=t},createReactDOMStyle=function(e){if(!e)return emptyObject;var r={};return Object.keys(e).sort().forEach(function(t){var a=normalizeValueWithProperty(e[t],t);if(null!=a)switch(t){case"aspectRatio":case"elevation":case"overlayColor":case"resizeMode":case"tintColor":break;case"backgroundClip":"text"===a&&(r.backgroundClip=a,r.WebkitBackgroundClip=a);break;case"flex":-1===a?(r.flexGrow=0,r.flexShrink=1,r.flexBasis="auto"):r.flex=a;break;case"font":r[t]=a.replace("System",SYSTEM_FONT_STACK);break;case"fontFamily":if(a.indexOf("System")>-1){var o=a.split(/,\s*/);o[o.indexOf("System")]=SYSTEM_FONT_STACK,r[t]=o.join(",")}else r[t]="monospace"===a?MONOSPACE_FONT_STACK:a;break;case"fontVariant":Array.isArray(a)&&a.length>0&&(r.fontVariant=a.join(" "));break;case"textAlignVertical":r.verticalAlign="center"===a?"middle":a;break;case"textDecorationLine":supportsCSS3TextDecoration?r.textDecorationLine=a:r.textDecoration=a;break;case"transform":case"transformMatrix":resolveTransform(r,e);break;case"writingDirection":r.direction=a;break;default:var n=STYLE_SHORT_FORM_EXPANSIONS[t];n?n.forEach(function(t,o){void 0===e[t]&&(r[t]=a)}):r[t]=Array.isArray(a)?a.join(","):a}}),r};export default createReactDOMStyle;