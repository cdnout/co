var slice=Array.prototype.slice;export default function createOrderedCSSStyleSheet(e){var r,t={},n={};null!=e&&slice.call(e.cssRules).forEach(function(e,u){var l=e.cssText;if(l.indexOf("stylesheet-group")>-1)r=decodeGroupRule(e),t[r]={start:u,rules:[l]};else{var s=getSelectorText(l);null!=s&&(n[s]=!0,t[r].rules.push(l))}});function u(e,r,n){var u=getOrderedGroups(t),l=u.indexOf(r)+1,s=u[l],o=null!=s&&null!=t[s].start?t[s].start:e.cssRules.length,c=insertRuleAt(e,n,o);if(c){null==t[r].start&&(t[r].start=o);for(var a=l;a<u.length;a+=1){var i=u[a],p=t[i].start;t[i].start=p+1}}return c}return{getTextContent:function(){return getOrderedGroups(t).map(function(e){return t[e].rules.join("\n")}).join("\n")},insert:function(r,l){var s=Number(l);if(null==t[s]){var o=encodeGroupRule(s);t[s]={start:null,rules:[o]},null!=e&&u(e,s,o)}var c=getSelectorText(r);null!=c&&null==n[c]&&(n[c]=!0,t[s].rules.push(r),null!=e&&(u(e,s,r)||t[s].rules.pop()))}}};function encodeGroupRule(e){return'[stylesheet-group="'+e+'"]{}'}function decodeGroupRule(e){return Number(e.selectorText.split(/["']/)[1])}function getOrderedGroups(e){return Object.keys(e).map(Number).sort(function(e,r){return e>r?1:-1})}var pattern=/\s*([,])\s*/g;function getSelectorText(e){var r=e.split("{")[0].trim();return""!==r?r.replace(pattern,"$1"):null}function insertRuleAt(e,r,t){try{return e.insertRule(r,t),!0}catch(e){return!1}}