var slice=Array.prototype.slice;export default function createOrderedCSSStyleSheet(n){var u,a={},l={};function s(e,t,r){var n=getOrderedGroups(a),u=n.indexOf(t)+1,l=n[u],l=null!=l&&null!=a[l].start?a[l].start:e.cssRules.length,r=insertRuleAt(e,r,l);if(r){null==a[t].start&&(a[t].start=l);for(var s=u;s<n.length;s+=1){var o=n[s],c=a[o].start||0;a[o].start=c+1}}return r}return null!=n&&slice.call(n.cssRules).forEach(function(e,t){var r=e.cssText;-1<r.indexOf("stylesheet-group")?(u=decodeGroupRule(e),a[u]={start:t,rules:[r]}):null!=(t=getSelectorText(r))&&(l[t]=!0,a[u].rules.push(r))}),{getTextContent:function(){return getOrderedGroups(a).map(function(e){var t=a[e].rules,e=t.shift();return t.sort(),t.unshift(e),t.join("\n")}).join("\n")},insert:function(e,t){t=Number(t);null==a[t]&&(r=encodeGroupRule(t),a[t]={start:null,rules:[r]},null!=n&&s(n,t,r));var r=getSelectorText(e);null!=r&&null==l[r]&&(l[r]=!0,a[t].rules.push(e),null!=n&&(s(n,t,e)||a[t].rules.pop()))}}}function encodeGroupRule(e){return'[stylesheet-group="'+e+'"]{}'}var groupPattern=/["']/g;function decodeGroupRule(e){return Number(e.selectorText.split(groupPattern)[1])}function getOrderedGroups(e){return Object.keys(e).map(Number).sort(function(e,t){return t<e?1:-1})}var selectorPattern=/\s*([,])\s*/g;function getSelectorText(e){e=e.split("{")[0].trim();return""!==e?e.replace(selectorPattern,"$1"):null}function insertRuleAt(e,t,r){try{return e.insertRule(t,r),!0}catch(e){return!1}}