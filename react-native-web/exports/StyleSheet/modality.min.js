import{canUseDOM}from"fbjs/lib/ExecutionEnvironment";var focusVisibleAttributeName="data-focusvisible-polyfill",rule=":focus:not(["+focusVisibleAttributeName+"]){outline: none;}",modality=function(e){if(e(rule),canUseDOM){var t=!0,n=!1,o=null,i={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};document.addEventListener("keydown",function(e){"Tab"!==e.key&&(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)||(u(document.activeElement)&&d(document.activeElement),t=!0)},!0),document.addEventListener("mousedown",m,!0),document.addEventListener("pointerdown",m,!0),document.addEventListener("touchstart",m,!0),document.addEventListener("focus",function(e){var n,o,r,m;u(e.target)&&(t||(n=e.target,o=n.type,r=n.tagName,m=n.readOnly,"INPUT"===r&&i[o]&&!m||"TEXTAREA"===r&&!m||n.isContentEditable))&&d(e.target)},!0),document.addEventListener("blur",function(e){u(e.target)&&e.target.hasAttribute(focusVisibleAttributeName)&&(n=!0,window.clearTimeout(o),o=window.setTimeout(function(){n=!1,window.clearTimeout(o)},100),r(e.target))},!0),document.addEventListener("visibilitychange",function(e){"hidden"===document.visibilityState&&(n&&(t=!0),c())},!0),c()}function u(e){return!!(e&&e!==document&&"HTML"!==e.nodeName&&"BODY"!==e.nodeName&&"classList"in e&&"contains"in e.classList)}function d(e){e.hasAttribute(focusVisibleAttributeName)||e.setAttribute(focusVisibleAttributeName,!0)}function r(e){e.removeAttribute(focusVisibleAttributeName)}function m(e){!0===t&&function(){for(var e=document.querySelectorAll("["+focusVisibleAttributeName+"]"),t=0;t<e.length;t+=1)r(e[t])}(),t=!1}function c(){document.addEventListener("mousemove",s),document.addEventListener("mousedown",s),document.addEventListener("mouseup",s),document.addEventListener("pointermove",s),document.addEventListener("pointerdown",s),document.addEventListener("pointerup",s),document.addEventListener("touchmove",s),document.addEventListener("touchstart",s),document.addEventListener("touchend",s)}function s(e){"HTML"!==e.target.nodeName&&(t=!1,document.removeEventListener("mousemove",s),document.removeEventListener("mousedown",s),document.removeEventListener("mouseup",s),document.removeEventListener("pointermove",s),document.removeEventListener("pointerdown",s),document.removeEventListener("pointerup",s),document.removeEventListener("touchmove",s),document.removeEventListener("touchstart",s),document.removeEventListener("touchend",s))}};export default modality;