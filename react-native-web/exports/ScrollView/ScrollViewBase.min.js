import*as React from"react";import{forwardRef,useRef}from"react";import StyleSheet from"../StyleSheet";import View from"../View";import useMergeRefs from"../../modules/useMergeRefs";function normalizeScrollEvent(e){return{nativeEvent:{contentOffset:{get x(){return e.target.scrollLeft},get y(){return e.target.scrollTop}},contentSize:{get height(){return e.target.scrollHeight},get width(){return e.target.scrollWidth}},layoutMeasurement:{get height(){return e.target.offsetHeight},get width(){return e.target.offsetWidth}}},timeStamp:Date.now()}}function shouldEmitScrollEvent(e,t){var r=Date.now()-e;return t>0&&r>=t}var ScrollViewBase=forwardRef(function(e,t){var r=e.accessibilityLabel,o=e.accessibilityRole,l=e.accessibilityState,i=e.children,n=e.importantForAccessibility,c=e.nativeID,s=e.onLayout,a=e.onScroll,u=e.onTouchMove,f=e.onWheel,h=e.pointerEvents,S=e.scrollEnabled,d=void 0===S||S,g=e.scrollEventThrottle,m=void 0===g?0:g,v=e.showsHorizontalScrollIndicator,y=e.showsVerticalScrollIndicator,b=e.style,w=e.dataSet,p=e.testID,E=useRef({isScrolling:!1,scrollLastTick:0}),R=useRef(null),D=useRef(null);function T(e){return function(t){d&&e&&e(t)}}function L(e){E.current.scrollLastTick=Date.now(),a&&a(normalizeScrollEvent(e))}var I=!1===v||!1===y;return React.createElement(View,{accessibilityLabel:r,accessibilityRole:o,accessibilityState:l,children:i,dataSet:w,importantForAccessibility:n,nativeID:c,onLayout:s,onScroll:function(e){e.stopPropagation(),e.target===D.current&&(e.persist(),null!=R.current&&clearTimeout(R.current),R.current=setTimeout(function(){!function(e){E.current.isScrolling=!1,a&&a(normalizeScrollEvent(e))}(e)},100),E.current.isScrolling?shouldEmitScrollEvent(E.current.scrollLastTick,m)&&L(e):function(e){E.current.isScrolling=!0,L(e)}(e))},onTouchMove:T(u),onWheel:T(f),pointerEvents:h,ref:useMergeRefs(D,t),style:[b,!d&&styles.scrollDisabled,I&&styles.hideScrollbar],testID:p})}),styles=StyleSheet.create({scrollDisabled:{overflowX:"hidden",overflowY:"hidden",touchAction:"none"},hideScrollbar:{scrollbarWidth:"none"}});export default ScrollViewBase;