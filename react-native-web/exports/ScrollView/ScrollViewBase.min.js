function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,o=arguments[t];for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e}).apply(this,arguments)}function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};for(var r,o={},l=Object.keys(e),n=0;n<l.length;n++)r=l[n],0<=t.indexOf(r)||(o[r]=e[r]);return o}import*as React from"react";import StyleSheet from"../StyleSheet";import View from"../View";import useMergeRefs from"../../modules/useMergeRefs";function normalizeScrollEvent(e){return{nativeEvent:{contentOffset:{get x(){return e.target.scrollLeft},get y(){return e.target.scrollTop}},contentSize:{get height(){return e.target.scrollHeight},get width(){return e.target.scrollWidth}},layoutMeasurement:{get height(){return e.target.offsetHeight},get width(){return e.target.offsetWidth}}},timeStamp:Date.now()}}function shouldEmitScrollEvent(e,t){e=Date.now()-e;return 0<t&&t<=e}var ScrollViewBase=React.forwardRef(function(e,t){var r=e.onScroll,o=e.onTouchMove,l=e.onWheel,n=e.scrollEnabled,c=void 0===n||n,i=e.scrollEventThrottle,s=void 0===i?0:i,a=e.showsHorizontalScrollIndicator,n=e.showsVerticalScrollIndicator,i=e.style,e=_objectWithoutPropertiesLoose(e,["onScroll","onTouchMove","onWheel","scrollEnabled","scrollEventThrottle","showsHorizontalScrollIndicator","showsVerticalScrollIndicator","style"]),u=React.useRef({isScrolling:!1,scrollLastTick:0}),f=React.useRef(null),h=React.useRef(null);function d(t){return function(e){c&&t&&t(e)}}function g(e){u.current.scrollLastTick=Date.now(),r&&r(normalizeScrollEvent(e))}n=!1===a||!1===n;return React.createElement(View,_extends({},e,{onScroll:function(t){var e;t.stopPropagation(),t.target===h.current&&(t.persist(),null!=f.current&&clearTimeout(f.current),f.current=setTimeout(function(){var e;e=t,u.current.isScrolling=!1,r&&r(normalizeScrollEvent(e))},100),u.current.isScrolling?shouldEmitScrollEvent(u.current.scrollLastTick,s)&&g(t):(e=t,u.current.isScrolling=!0,g(e)))},onTouchMove:d(o),onWheel:d(l),ref:useMergeRefs(h,t),style:[i,!c&&styles.scrollDisabled,n&&styles.hideScrollbar]}))}),styles=StyleSheet.create({scrollDisabled:{overflowX:"hidden",overflowY:"hidden",touchAction:"none"},hideScrollbar:{scrollbarWidth:"none"}});export default ScrollViewBase;