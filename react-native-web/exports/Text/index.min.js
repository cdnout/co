import*as React from"react";import{forwardRef,useContext,useRef}from"react";import createElement from"../createElement";import css from"../StyleSheet/css";import pick from"../../modules/pick";import useElementLayout from"../../modules/useElementLayout";import useMergeRefs from"../../modules/useMergeRefs";import usePlatformMethods from"../../modules/usePlatformMethods";import useResponderEvents from"../../modules/useResponderEvents";import StyleSheet from"../StyleSheet";import TextAncestorContext from"./TextAncestorContext";var forwardPropsList={accessibilityLabel:!0,accessibilityLiveRegion:!0,accessibilityRole:!0,accessibilityState:!0,accessibilityValue:!0,accessible:!0,children:!0,classList:!0,dir:!0,importantForAccessibility:!0,lang:!0,nativeID:!0,onBlur:!0,onClick:!0,onClickCapture:!0,onContextMenu:!0,onFocus:!0,onKeyDown:!0,onKeyUp:!0,onTouchCancel:!0,onTouchCancelCapture:!0,onTouchEnd:!0,onTouchEndCapture:!0,onTouchMove:!0,onTouchMoveCapture:!0,onTouchStart:!0,onTouchStartCapture:!0,pointerEvents:!0,ref:!0,style:!0,testID:!0,dataSet:!0,onMouseDown:!0,onMouseEnter:!0,onMouseLeave:!0,onMouseMove:!0,onMouseOver:!0,onMouseOut:!0,onMouseUp:!0,onScroll:!0,onWheel:!0,href:!0,rel:!0,target:!0},pickProps=function(e){return pick(e,forwardPropsList)},Text=forwardRef(function(e,o){var t=e.dir,n=e.numberOfLines,r=e.onClick,s=e.onLayout,l=e.onPress,a=e.onMoveShouldSetResponder,i=e.onMoveShouldSetResponderCapture,u=e.onResponderEnd,p=e.onResponderGrant,d=e.onResponderMove,c=e.onResponderReject,S=e.onResponderRelease,R=e.onResponderStart,m=e.onResponderTerminate,h=e.onResponderTerminationRequest,f=e.onScrollShouldSetResponder,x=e.onScrollShouldSetResponderCapture,v=e.onSelectionChangeShouldSetResponder,C=e.onSelectionChangeShouldSetResponderCapture,b=e.onStartShouldSetResponder,y=e.onStartShouldSetResponderCapture,M=e.selectable,T=useContext(TextAncestorContext),w=useRef(null),L=[classes.text,!0===T&&classes.textHasAncestor,1===n&&classes.textOneLine,null!=n&&n>1&&classes.textMultiLine],E=[e.style,null!=n&&n>1&&{WebkitLineClamp:n},!0===M&&styles.selectable,!1===M&&styles.notSelectable,l&&styles.pressable];useElementLayout(w,s),useResponderEvents(w,{onMoveShouldSetResponder:a,onMoveShouldSetResponderCapture:i,onResponderEnd:u,onResponderGrant:p,onResponderMove:d,onResponderReject:c,onResponderRelease:S,onResponderStart:R,onResponderTerminate:m,onResponderTerminationRequest:h,onScrollShouldSetResponder:f,onScrollShouldSetResponderCapture:x,onSelectionChangeShouldSetResponder:v,onSelectionChangeShouldSetResponderCapture:C,onStartShouldSetResponder:b,onStartShouldSetResponderCapture:y});var k=T?"span":"div",g=pickProps(e);g.classList=L,g.dir=t,T||(g.dir=null!=t?t:"auto"),g.onClick=function(e){null!=r&&r(e),null==r&&null!=l&&(e.stopPropagation(),l(e))},g.style=E;var P=usePlatformMethods(g),O=useMergeRefs(w,P,o);g.ref=O;var A=createElement(k,g);return T?A:React.createElement(TextAncestorContext.Provider,{value:!0},A)});Text.displayName="Text";var classes=css.create({text:{border:"0 solid black",boxSizing:"border-box",color:"black",display:"inline",font:"14px System",margin:0,padding:0,whiteSpace:"pre-wrap",wordWrap:"break-word"},textHasAncestor:{color:"inherit",font:"inherit",whiteSpace:"inherit"},textOneLine:{maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},textMultiLine:{display:"-webkit-box",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",WebkitBoxOrient:"vertical"}}),styles=StyleSheet.create({notSelectable:{userSelect:"none"},selectable:{userSelect:"text"},pressable:{cursor:"pointer"}});export default Text;