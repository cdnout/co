import*as React from"react";import ModalPortal from"./ModalPortal";import ModalAnimation from"./ModalAnimation";import ModalContent from"./ModalContent";import ModalFocusTrap from"./ModalFocusTrap";var uniqueModalIdentifier=0,activeModalStack=[],activeModalListeners={};function notifyActiveModalListeners(){var t;0!==activeModalStack.length&&(t=activeModalStack[activeModalStack.length-1],activeModalStack.forEach(function(e){e in activeModalListeners&&activeModalListeners[e](e===t)}))}function removeActiveModal(e){e in activeModalListeners&&(activeModalListeners[e](!1),delete activeModalListeners[e]);e=activeModalStack.indexOf(e);-1!==e&&(activeModalStack.splice(e,1),notifyActiveModalListeners())}function addActiveModal(e,t){removeActiveModal(e),activeModalStack.push(e),activeModalListeners[e]=t,notifyActiveModalListeners()}var Modal=React.forwardRef(function(e,t){var a=e.animationType,o=e.children,i=e.onDismiss,n=e.onRequestClose,c=e.onShow,l=e.transparent,r=e.visible,d=void 0===r||r,s=React.useMemo(function(){return uniqueModalIdentifier++},[]),M=React.useState(!1),e=M[0],v=M[1],r=React.useCallback(function(){removeActiveModal(s),i&&i()},[s,i]),M=React.useCallback(function(){addActiveModal(s,v),c&&c()},[s,c]);return React.useEffect(function(){return function(){return removeActiveModal(s)}},[s]),React.createElement(ModalPortal,null,React.createElement(ModalAnimation,{animationType:a,onDismiss:r,onShow:M,visible:d},React.createElement(ModalFocusTrap,{active:e},React.createElement(ModalContent,{active:e,onRequestClose:n,ref:t,transparent:l},o))))});export default Modal;