"use strict";exports.__esModule=!0,exports.default=void 0;var _invariant=_interopRequireDefault(require("fbjs/lib/invariant")),_EventEmitter=_interopRequireDefault(require("../../vendor/react-native/emitter/_EventEmitter")),_ExecutionEnvironment=_interopRequireDefault(require("fbjs/lib/ExecutionEnvironment"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var canUseDOM=_ExecutionEnvironment.default.canUseDOM,isPrefixed=canUseDOM&&!document.hasOwnProperty("hidden")&&document.hasOwnProperty("webkitHidden"),EVENT_TYPES=["change","memoryWarning"],VISIBILITY_CHANGE_EVENT=isPrefixed?"webkitvisibilitychange":"visibilitychange",VISIBILITY_STATE_PROPERTY=isPrefixed?"webkitVisibilityState":"visibilityState",AppStates={BACKGROUND:"background",ACTIVE:"active"},changeEmitter=null,AppState=function(){function n(){}return n.addEventListener=function(e,t){if(n.isAvailable&&((0,_invariant.default)(-1!==EVENT_TYPES.indexOf(e),'Trying to subscribe to unknown event: "%s"',e),"change"===e))return changeEmitter||(changeEmitter=new _EventEmitter.default,document.addEventListener(VISIBILITY_CHANGE_EVENT,function(){changeEmitter&&changeEmitter.emit("change",n.currentState)},!1)),changeEmitter.addListener(e,t)},n.removeEventListener=function(e,t){n.isAvailable&&(console.error("AppState.removeListener('"+e+"', ...): Method has been deprecated. Please instead use `remove()` on the subscription returned by `AppState.addEventListener`."),(0,_invariant.default)(-1!==EVENT_TYPES.indexOf(e),'Trying to remove listener for unknown event: "%s"',e),"change"===e&&changeEmitter&&changeEmitter.removeListener(t))},_createClass(n,null,[{key:"currentState",get:function(){if(!n.isAvailable)return AppStates.ACTIVE;switch(document[VISIBILITY_STATE_PROPERTY]){case"hidden":case"prerender":case"unloaded":return AppStates.BACKGROUND;default:return AppStates.ACTIVE}}}]),n}();(exports.default=AppState).isAvailable=canUseDOM&&document[VISIBILITY_STATE_PROPERTY],module.exports=exports.default;