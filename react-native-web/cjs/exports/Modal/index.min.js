"use strict";exports.__esModule=!0,exports.default=void 0;var _react=_interopRequireWildcard(require("react")),_ModalPortal=_interopRequireDefault(require("./ModalPortal")),_ModalAnimation=_interopRequireDefault(require("./ModalAnimation")),_ModalContent=_interopRequireDefault(require("./ModalContent")),_ModalFocusTrap=_interopRequireDefault(require("./ModalFocusTrap"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return _getRequireWildcardCache=function(){return e},e}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=_getRequireWildcardCache();if(t&&t.has(e))return t.get(e);var a,r,i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(a in e)Object.prototype.hasOwnProperty.call(e,a)&&((r=o?Object.getOwnPropertyDescriptor(e,a):null)&&(r.get||r.set)?Object.defineProperty(i,a,r):i[a]=e[a]);return i.default=e,t&&t.set(e,i),i}var uniqueModalIdentifier=0,activeModalStack=[],activeModalListeners={};function notifyActiveModalListeners(){var t;0!==activeModalStack.length&&(t=activeModalStack[activeModalStack.length-1],activeModalStack.forEach(function(e){e in activeModalListeners&&activeModalListeners[e](e===t)}))}function removeActiveModal(e){e in activeModalListeners&&(activeModalListeners[e](!1),delete activeModalListeners[e]);e=activeModalStack.indexOf(e);-1!==e&&(activeModalStack.splice(e,1),notifyActiveModalListeners())}function addActiveModal(e,t){removeActiveModal(e),activeModalStack.push(e),activeModalListeners[e]=t,notifyActiveModalListeners()}var Modal=(0,_react.forwardRef)(function(e,t){var a=e.animationType,r=e.children,i=e.onDismiss,o=e.onRequestClose,n=e.onShow,l=e.transparent,c=e.visible,u=void 0===c||c,d=(0,_react.useMemo)(function(){return uniqueModalIdentifier++},[]),s=(0,_react.useState)(!1),e=s[0],f=s[1],c=(0,_react.useCallback)(function(){removeActiveModal(d),i&&i()},[d,i]),s=(0,_react.useCallback)(function(){addActiveModal(d,f),n&&n()},[d,n]);return(0,_react.useEffect)(function(){return function(){return removeActiveModal(d)}},[d]),_react.default.createElement(_ModalPortal.default,null,_react.default.createElement(_ModalAnimation.default,{animationType:a,onDismiss:c,onShow:s,visible:u},_react.default.createElement(_ModalFocusTrap.default,{active:e},_react.default.createElement(_ModalContent.default,{active:e,onRequestClose:o,ref:t,transparent:l},r))))}),_default=Modal;exports.default=Modal,module.exports=exports.default;