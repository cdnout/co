"use strict";exports.__esModule=!0,exports.default=void 0;var React=_interopRequireWildcard(require("react")),_ModalPortal=_interopRequireDefault(require("./ModalPortal")),_ModalAnimation=_interopRequireDefault(require("./ModalAnimation")),_ModalContent=_interopRequireDefault(require("./ModalContent")),_ModalFocusTrap=_interopRequireDefault(require("./ModalFocusTrap"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return _getRequireWildcardCache=function(){return e},e}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=_getRequireWildcardCache();if(t&&t.has(e))return t.get(e);var a,i,o={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(a in e)Object.prototype.hasOwnProperty.call(e,a)&&((i=r?Object.getOwnPropertyDescriptor(e,a):null)&&(i.get||i.set)?Object.defineProperty(o,a,i):o[a]=e[a]);return o.default=e,t&&t.set(e,o),o}var uniqueModalIdentifier=0,activeModalStack=[],activeModalListeners={};function notifyActiveModalListeners(){var t;0!==activeModalStack.length&&(t=activeModalStack[activeModalStack.length-1],activeModalStack.forEach(function(e){e in activeModalListeners&&activeModalListeners[e](e===t)}))}function removeActiveModal(e){e in activeModalListeners&&(activeModalListeners[e](!1),delete activeModalListeners[e]);e=activeModalStack.indexOf(e);-1!==e&&(activeModalStack.splice(e,1),notifyActiveModalListeners())}function addActiveModal(e,t){removeActiveModal(e),activeModalStack.push(e),activeModalListeners[e]=t,notifyActiveModalListeners()}var Modal=React.forwardRef(function(e,t){var a=e.animationType,i=e.children,o=e.onDismiss,r=e.onRequestClose,n=e.onShow,l=e.transparent,c=e.visible,u=void 0===c||c,d=React.useMemo(function(){return uniqueModalIdentifier++},[]),s=React.useState(!1),e=s[0],f=s[1],c=React.useCallback(function(){removeActiveModal(d),o&&o()},[d,o]),s=React.useCallback(function(){addActiveModal(d,f),n&&n()},[d,n]);return React.useEffect(function(){return function(){return removeActiveModal(d)}},[d]),React.createElement(_ModalPortal.default,null,React.createElement(_ModalAnimation.default,{animationType:a,onDismiss:c,onShow:s,visible:u},React.createElement(_ModalFocusTrap.default,{active:e},React.createElement(_ModalContent.default,{active:e,onRequestClose:r,ref:t,transparent:l},i))))}),_default=Modal;exports.default=_default,module.exports=exports.default;