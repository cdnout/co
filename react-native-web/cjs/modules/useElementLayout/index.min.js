"use strict";exports.__esModule=!0,exports.default=useElementLayout;var _useLayoutEffect=_interopRequireDefault(require("../useLayoutEffect")),_UIManager=_interopRequireDefault(require("../../exports/UIManager")),_ExecutionEnvironment=_interopRequireDefault(require("fbjs/lib/ExecutionEnvironment"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var canUseDOM=_ExecutionEnvironment.default.canUseDOM,DOM_LAYOUT_HANDLER_NAME="__reactLayoutHandler",didWarn=!canUseDOM,resizeObserver=null;function getResizeObserver(){return canUseDOM&&void 0!==window.ResizeObserver?null==resizeObserver&&(resizeObserver=new window.ResizeObserver(function(e){e.forEach(function(i){var e=i.target,s=e[DOM_LAYOUT_HANDLER_NAME];"function"==typeof s&&_UIManager.default.measure(e,function(e,t,r,n,u,o){o={nativeEvent:{layout:{x:e,y:t,width:r,height:n,left:u,top:o}},timeStamp:Date.now()};Object.defineProperty(o.nativeEvent,"target",{enumerable:!0,get:function(){return i.target}}),s(o)})})})):didWarn||"production"!==process.env.NODE_ENV&&"test"!==process.env.NODE_ENV&&(console.warn("onLayout relies on ResizeObserver which is not supported by your browser. Please include a polyfill, e.g., https://github.com/que-etc/resize-observer-polyfill."),didWarn=!0),resizeObserver}function useElementLayout(t,r){var n=getResizeObserver();(0,_useLayoutEffect.default)(function(){var e=t.current;null!=e&&(e[DOM_LAYOUT_HANDLER_NAME]=r)},[t,r]),(0,_useLayoutEffect.default)(function(){var e=t.current;return null!=e&&null!=n&&("function"==typeof e[DOM_LAYOUT_HANDLER_NAME]?n.observe(e):n.unobserve(e)),function(){null!=e&&null!=n&&n.unobserve(e)}},[t,n])}module.exports=exports.default;