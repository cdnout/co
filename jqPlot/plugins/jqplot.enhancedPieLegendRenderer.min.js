!function(e){e.jqplot.EnhancedPieLegendRenderer=function(){e.jqplot.TableLegendRenderer.call(this)},e.jqplot.EnhancedPieLegendRenderer.prototype=new e.jqplot.TableLegendRenderer,e.jqplot.EnhancedPieLegendRenderer.prototype.constructor=e.jqplot.EnhancedPieLegendRenderer,e.jqplot.EnhancedPieLegendRenderer.prototype.init=function(t){this.numberRows=null,this.numberColumns=null,this.seriesToggle="normal",this.seriesToggleReplot=!1,this.disableIEFading=!0,this.toolTips=[],e.extend(!0,this,t),this.seriesToggle&&e.jqplot.postDrawHooks.push(s)},e.jqplot.EnhancedPieLegendRenderer.prototype.draw=function(s,i){if(this.show){var o,n=this._series,l="position:absolute;";l+=this.background?"background:"+this.background+";":"",l+=this.border?"border:"+this.border+";":"",l+=this.fontSize?"font-size:"+this.fontSize+";":"",l+=this.fontFamily?"font-family:"+this.fontFamily+";":"",l+=this.textColor?"color:"+this.textColor+";":"",l+=null!=this.marginTop?"margin-top:"+this.marginTop+";":"",l+=null!=this.marginBottom?"margin-bottom:"+this.marginBottom+";":"",l+=null!=this.marginLeft?"margin-left:"+this.marginLeft+";":"",l+=null!=this.marginRight?"margin-right:"+this.marginRight+";":"",this._elem=e('<table class="jqplot-table-legend" style="'+l+'"></table>'),this.seriesToggle&&this._elem.css("z-index","3");var r,a,d=!1,h=!1,o=n[0],p=o.data.length,g=new e.jqplot.ColorGenerator(o.seriesColors);this.numberRows?(r=this.numberRows,a=this.numberColumns?this.numberColumns:Math.ceil(p/r)):this.numberColumns?(a=this.numberColumns,r=Math.ceil(p/this.numberColumns)):(r=p,a=1);var c,m,u,b,j,T,f,q,w,C=0;for(c=n.length-1;c>=0;c--)(1==a&&n[c]._stack||n[c].renderer.constructor==e.jqplot.BezierCurveRenderer)&&(h=!0);for(c=0;c<r;c++){for(u=e(document.createElement("tr")),u.addClass("jqplot-table-legend"),h?u.prependTo(this._elem):u.appendTo(this._elem),m=0;m<a;m++){if(C<p&&(T=this.labels[C]||o.data[C][0].toString(),tt=this.toolTips[C],T)){var R=g.next();if(d=h?c!=r-1:c>0,f=d?this.rowSpacing:"0",b=e(document.createElement("td")),b.addClass("jqplot-table-legend jqplot-table-legend-swatch"),b.css({textAlign:"center",paddingTop:f}),q=e(document.createElement("div")),q.addClass("jqplot-table-legend-swatch-outline"),void 0!==tt&&q.attr("title",tt),w=e(document.createElement("div")),w.addClass("jqplot-table-legend-swatch"),w.css({backgroundColor:R,borderColor:R}),b.append(q.append(w)),j=e(document.createElement("td")),j.addClass("jqplot-table-legend jqplot-table-legend-label"),j.css("paddingTop",f),void 0!==tt&&j.attr("title",tt),this.escapeHtml?j.text(T):j.html(T),h?(this.showLabels&&j.prependTo(u),this.showSwatches&&b.prependTo(u)):(this.showSwatches&&b.appendTo(u),this.showLabels&&j.appendTo(u)),this.seriesToggle){var v;"string"!=typeof this.seriesToggle&&"number"!=typeof this.seriesToggle||e.jqplot.use_excanvas&&this.disableIEFading||(v=this.seriesToggle),this.showSwatches&&(b.bind("click",{series:o,index:C,speed:v,plot:i,replot:this.seriesToggleReplot},t),b.addClass("jqplot-seriesToggle")),this.showLabels&&(j.bind("click",{series:o,index:C,speed:v,plot:i,replot:this.seriesToggleReplot},t),j.addClass("jqplot-seriesToggle")),o.showSlice[C]===!1&&o.showLabel&&(b.addClass("jqplot-series-hidden"),j.addClass("jqplot-series-hidden"))}d=!0}C++}b=j=q=w=null}}return this._elem};var t=function(t){var s=t.data,i=s.replot,o=s.plot,n=s.index;s.series.showSlice[n]=s.series.showSlice[n]===!1;var l={};e.isPlainObject(i)&&e.extend(!0,l,i),o.replot(l)},s=function(){if(this.legend.renderer.constructor==e.jqplot.EnhancedPieLegendRenderer&&this.legend.seriesToggle){var t=this.legend._elem.detach();this.eventCanvas._elem.after(t)}}}(jQuery);