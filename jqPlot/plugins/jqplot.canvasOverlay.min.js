!function(t){function e(){this.uid=null,this.type=null,this.gridStart=null,this.gridStop=null,this.tooltipWidthFactor=0,this.options={name:null,show:!0,lineWidth:2,lineCap:"round",color:"#666666",shadow:!0,shadowAngle:45,shadowOffset:1,shadowDepth:3,shadowAlpha:"0.07",xaxis:"xaxis",yaxis:"yaxis",showTooltip:!1,showTooltipPrecision:.6,tooltipLocation:"nw",fadeTooltip:!0,tooltipFadeSpeed:"fast",tooltipOffset:4,tooltipFormatString:"%d, %d"}}function i(i){e.call(this),this.type="rectangle";var s={xmin:null,xmax:null,xOffset:"6px",xminOffset:null,xmaxOffset:null,ymin:null,ymax:null,yOffset:"6px",yminOffset:null,ymaxOffset:null};t.extend(!0,this.options,s,i),this.options.showTooltipPrecision<.01&&(this.options.showTooltipPrecision=.01)}function s(i){e.call(this),this.type="line";var s={start:[],stop:[]};t.extend(!0,this.options,s,i),this.options.showTooltipPrecision<.01&&(this.options.showTooltipPrecision=.01)}function o(i){e.call(this),this.type="horizontalLine";var s={y:null,xmin:null,xmax:null,xOffset:"6px",xminOffset:null,xmaxOffset:null};t.extend(!0,this.options,s,i),this.options.showTooltipPrecision<.01&&(this.options.showTooltipPrecision=.01)}function n(i){e.call(this),this.type="dashedHorizontalLine";var s={y:null,xmin:null,xmax:null,xOffset:"6px",xminOffset:null,xmaxOffset:null,dashPattern:[8,8]};t.extend(!0,this.options,s,i),this.options.showTooltipPrecision<.01&&(this.options.showTooltipPrecision=.01)}function a(i){e.call(this),this.type="verticalLine";var s={x:null,ymin:null,ymax:null,yOffset:"6px",yminOffset:null,ymaxOffset:null};t.extend(!0,this.options,s,i),this.options.showTooltipPrecision<.01&&(this.options.showTooltipPrecision=.01)}function l(i){e.call(this),this.type="dashedVerticalLine",this.start=null,this.stop=null;var s={x:null,ymin:null,ymax:null,yOffset:"6px",yminOffset:null,ymaxOffset:null,dashPattern:[8,8]};t.extend(!0,this.options,s,i),this.options.showTooltipPrecision<.01&&(this.options.showTooltipPrecision=.01)}function r(e,i,s,o){var n,a,l=e.plugins.canvasOverlay,r=l._tooltipElem,p=i.options;switch(r.html(t.jqplot.sprintf(p.tooltipFormatString,o[0],o[1])),p.tooltipLocation){case"nw":n=s[0]+e._gridPadding.left-r.outerWidth(!0)-p.tooltipOffset,a=s[1]+e._gridPadding.top-p.tooltipOffset-r.outerHeight(!0);break;case"n":n=s[0]+e._gridPadding.left-r.outerWidth(!0)/2,a=s[1]+e._gridPadding.top-p.tooltipOffset-r.outerHeight(!0);break;case"ne":n=s[0]+e._gridPadding.left+p.tooltipOffset,a=s[1]+e._gridPadding.top-p.tooltipOffset-r.outerHeight(!0);break;case"e":n=s[0]+e._gridPadding.left+p.tooltipOffset,a=s[1]+e._gridPadding.top-r.outerHeight(!0)/2;break;case"se":n=s[0]+e._gridPadding.left+p.tooltipOffset,a=s[1]+e._gridPadding.top+p.tooltipOffset;break;case"s":n=s[0]+e._gridPadding.left-r.outerWidth(!0)/2,a=s[1]+e._gridPadding.top+p.tooltipOffset;break;case"sw":n=s[0]+e._gridPadding.left-r.outerWidth(!0)-p.tooltipOffset,a=s[1]+e._gridPadding.top+p.tooltipOffset;break;case"w":n=s[0]+e._gridPadding.left-r.outerWidth(!0)-p.tooltipOffset,a=s[1]+e._gridPadding.top-r.outerHeight(!0)/2;break;default:n=s[0]+e._gridPadding.left-r.outerWidth(!0)-p.tooltipOffset,a=s[1]+e._gridPadding.top-p.tooltipOffset-r.outerHeight(!0)}r.css("left",n),r.css("top",a),p.fadeTooltip?r.stop(!0,!0).fadeIn(p.tooltipFadeSpeed):r.show(),r=null}function p(t,e,i,s){var o=t[0],n=t[1],a=Math.round(i[0]),l=Math.round(i[1]),r=Math.round(e[0]),p=Math.round(e[1]),h=Math.sqrt(Math.pow(a-r,2)+Math.pow(l-p,2)),u=s*h,d=Math.abs((r-a)*(n-l)-(p-l)*(o-a)),c=d<u;return c}function h(t,e,i,s){var o,n=t[0],a=t[1],l=Math.round(i[0]),r=Math.round(i[1]),p=Math.round(e[0]),h=Math.round(e[1]);l>p&&(o=l,l=p,p=o),r>h&&(o=r,r=h,h=o);var u=n>=l&&n<=p&&a>=r&&a<=h;return u}function u(t,e,i,s,o){for(var n,a,l=o.plugins.canvasOverlay,u=l.objects,d=u.length,c=!1,f=0;f<d;f++)if(n=u[f],n.options.showTooltip){var x;if(x="rectangle"===n.type?h([e.x,e.y],n.gridStart,n.gridStop,n.tooltipWidthFactor):p([e.x,e.y],n.gridStart,n.gridStop,n.tooltipWidthFactor),i=[o.axes[n.options.xaxis].series_p2u(e.x),o.axes[n.options.yaxis].series_p2u(e.y)],x&&null==l.highlightObjectIndex){switch(n.type){case"line":r(o,n,[e.x,e.y],i);break;case"horizontalLine":case"dashedHorizontalLine":r(o,n,[e.x,n.gridStart[1]],[i[0],n.options.y]);break;case"verticalLine":case"dashedVerticalLine":r(o,n,[n.gridStart[0],e.y],[n.options.x,i[1]]);break;case"rectangle":r(o,n,[n.gridStart[0],e.y],[n.options.x,i[1]])}l.highlightObjectIndex=f,c=!0;break}if(x&&l.highlightObjectIndex!==f){switch(a=l._tooltipElem,n.fadeTooltip?a.fadeOut(n.tooltipFadeSpeed):a.hide(),n.type){case"line":r(o,n,[e.x,e.y],i);break;case"horizontalLine":case"dashedHorizontalLine":r(o,n,[e.x,n.gridStart[1]],[i[0],n.options.y]);break;case"verticalLine":case"dashedVerticalLine":r(o,n,[n.gridStart[0],e.y],[n.options.x,i[1]]);break;case"rectangle":r(o,n,[n.gridStart[0],e.y],[n.options.x,i[1]])}l.highlightObjectIndex=f,c=!0;break}if(x){switch(n.type){case"line":r(o,n,[e.x,e.y],i);break;case"horizontalLine":case"dashedHorizontalLine":r(o,n,[e.x,n.gridStart[1]],[i[0],n.options.y]);break;case"verticalLine":case"dashedVerticalLine":r(o,n,[n.gridStart[0],e.y],[n.options.x,i[1]]);break;case"rectangle":r(o,n,[n.gridStart[0],e.y],[n.options.x,i[1]])}c=!0;break}}c||null===l.highlightObjectIndex||(a=l._tooltipElem,n=l.getObject(l.highlightObjectIndex),n.fadeTooltip?a.fadeOut(n.tooltipFadeSpeed):a.hide(),l.highlightObjectIndex=null)}var d=0;t.jqplot.CanvasOverlay=function(e){var i=e||{};if(this.options={show:t.jqplot.config.enablePlugins,deferDraw:!1},this.objects=[],this.objectNames=[],this.canvas=null,this.markerRenderer=new t.jqplot.MarkerRenderer({style:"line"}),this.markerRenderer.init(),this.highlightObjectIndex=null,i.objects)for(var s,o=i.objects,n=0;n<o.length;n++){s=o[n];for(var a in s)switch(a){case"line":this.addLine(s[a]);break;case"horizontalLine":this.addHorizontalLine(s[a]);break;case"dashedHorizontalLine":this.addDashedHorizontalLine(s[a]);break;case"verticalLine":this.addVerticalLine(s[a]);break;case"dashedVerticalLine":this.addDashedVerticalLine(s[a]);break;case"rectangle":this.addRectangle(s[a])}}t.extend(!0,this.options,i)},t.jqplot.CanvasOverlay.postPlotInit=function(e,i,s){var o=s||{};this.plugins.canvasOverlay=new t.jqplot.CanvasOverlay(o.canvasOverlay)},i.prototype=new e,i.prototype.constructor=i,s.prototype=new e,s.prototype.constructor=s,o.prototype=new e,o.prototype.constructor=o,n.prototype=new e,n.prototype.constructor=n,a.prototype=new e,a.prototype.constructor=a,l.prototype=new e,l.prototype.constructor=l,t.jqplot.CanvasOverlay.prototype.addLine=function(t){var e=new s(t);e.uid=d++,this.objects.push(e),this.objectNames.push(e.options.name)},t.jqplot.CanvasOverlay.prototype.addHorizontalLine=function(t){var e=new o(t);e.uid=d++,this.objects.push(e),this.objectNames.push(e.options.name)},t.jqplot.CanvasOverlay.prototype.addDashedHorizontalLine=function(t){var e=new n(t);e.uid=d++,this.objects.push(e),this.objectNames.push(e.options.name)},t.jqplot.CanvasOverlay.prototype.addVerticalLine=function(t){var e=new a(t);e.uid=d++,this.objects.push(e),this.objectNames.push(e.options.name)},t.jqplot.CanvasOverlay.prototype.addDashedVerticalLine=function(t){var e=new l(t);e.uid=d++,this.objects.push(e),this.objectNames.push(e.options.name)},t.jqplot.CanvasOverlay.prototype.addRectangle=function(t){var e=new i(t);e.uid=d++,this.objects.push(e),this.objectNames.push(e.options.name)},t.jqplot.CanvasOverlay.prototype.removeObject=function(e){if("number"==t.type(e))this.objects.splice(e,1),this.objectNames.splice(e,1);else{var i=t.inArray(e,this.objectNames);i!=-1&&(this.objects.splice(i,1),this.objectNames.splice(i,1))}},t.jqplot.CanvasOverlay.prototype.getObject=function(e){if("number"==t.type(e))return this.objects[e];var i=t.inArray(e,this.objectNames);return i!=-1?this.objects[i]:void 0},t.jqplot.CanvasOverlay.prototype.get=t.jqplot.CanvasOverlay.prototype.getObject,t.jqplot.CanvasOverlay.prototype.clear=function(t){this.canvas._ctx.clearRect(0,0,this.canvas.getWidth(),this.canvas.getHeight())},t.jqplot.CanvasOverlay.prototype.draw=function(e){var i,s,o,n=this.objects,a=this.markerRenderer;if(this.options.show){this.canvas._ctx.clearRect(0,0,this.canvas.getWidth(),this.canvas.getHeight());for(var l=0;l<n.length;l++){i=n[l];var r=t.extend(!0,{},i.options);if(i.options.show)switch(a.shadow=i.options.shadow,i.tooltipWidthFactor=i.options.lineWidth/i.options.showTooltipPrecision,i.type){case"line":a.style="line",r.closePath=!1,s=[e.axes[i.options.xaxis].series_u2p(i.options.start[0]),e.axes[i.options.yaxis].series_u2p(i.options.start[1])],o=[e.axes[i.options.xaxis].series_u2p(i.options.stop[0]),e.axes[i.options.yaxis].series_u2p(i.options.stop[1])],i.gridStart=s,i.gridStop=o,a.draw(s,o,this.canvas._ctx,r);break;case"horizontalLine":if(null!=i.options.y){a.style="line",r.closePath=!1;var p,h,u=e.axes[i.options.xaxis],d=e.axes[i.options.yaxis].series_u2p(i.options.y),c=i.options.xminOffset||i.options.xOffset,f=i.options.xmaxOffset||i.options.xOffset;null!=i.options.xmin?p=u.series_u2p(i.options.xmin):null!=c&&("number"==t.type(c)?p=u.series_u2p(u.min+c):"string"==t.type(c)&&(p=u.series_u2p(u.min)+parseFloat(c))),null!=i.options.xmax?h=u.series_u2p(i.options.xmax):null!=f&&("number"==t.type(f)?h=u.series_u2p(u.max-f):"string"==t.type(f)&&(h=u.series_u2p(u.max)-parseFloat(f))),null!=h&&null!=p&&(i.gridStart=[p,d],i.gridStop=[h,d],a.draw([p,d],[h,d],this.canvas._ctx,r))}break;case"dashedHorizontalLine":for(var x=i.options.dashPattern,y=0,g=0;g<x.length;g++)y+=x[g];if(null!=i.options.y){a.style="line",r.closePath=!1;var p,h,u=e.axes[i.options.xaxis],d=e.axes[i.options.yaxis].series_u2p(i.options.y),c=i.options.xminOffset||i.options.xOffset,f=i.options.xmaxOffset||i.options.xOffset;if(null!=i.options.xmin?p=u.series_u2p(i.options.xmin):null!=c&&("number"==t.type(c)?p=u.series_u2p(u.min+c):"string"==t.type(c)&&(p=u.series_u2p(u.min)+parseFloat(c))),null!=i.options.xmax?h=u.series_u2p(i.options.xmax):null!=f&&("number"==t.type(f)?h=u.series_u2p(u.max-f):"string"==t.type(f)&&(h=u.series_u2p(u.max)-parseFloat(f))),null!=h&&null!=p){i.gridStart=[p,d],i.gridStop=[h,d];for(var m,v=Math.ceil((h-p)/y),O=p,g=0;g<v;g++)for(var b=0;b<x.length;b+=2)m=O+x[b],a.draw([O,d],[m,d],this.canvas._ctx,r),O+=x[b],b<x.length-1&&(O+=x[b+1])}}break;case"verticalLine":if(null!=i.options.x){a.style="line",r.closePath=!1;var _,j,w=e.axes[i.options.yaxis],P=e.axes[i.options.xaxis].series_u2p(i.options.x),k=i.options.yminOffset||i.options.yOffset,L=i.options.ymaxOffset||i.options.yOffset;null!=i.options.ymin?_=w.series_u2p(i.options.ymin):null!=k&&("number"==t.type(k)?_=w.series_u2p(w.min-k):"string"==t.type(k)&&(_=w.series_u2p(w.min)-parseFloat(k))),null!=i.options.ymax?j=w.series_u2p(i.options.ymax):null!=L&&("number"==t.type(L)?j=w.series_u2p(w.max+L):"string"==t.type(L)&&(j=w.series_u2p(w.max)+parseFloat(L))),null!=j&&null!=_&&(i.gridStart=[P,_],i.gridStop=[P,j],a.draw([P,_],[P,j],this.canvas._ctx,r))}break;case"dashedVerticalLine":for(var x=i.options.dashPattern,y=0,g=0;g<x.length;g++)y+=x[g];if(null!=i.options.x){a.style="line",r.closePath=!1;var _,j,w=e.axes[i.options.yaxis],P=e.axes[i.options.xaxis].series_u2p(i.options.x),k=i.options.yminOffset||i.options.yOffset,L=i.options.ymaxOffset||i.options.yOffset;if(null!=i.options.ymin?_=w.series_u2p(i.options.ymin):null!=k&&("number"==t.type(k)?_=w.series_u2p(w.min-k):"string"==t.type(k)&&(_=w.series_u2p(w.min)-parseFloat(k))),null!=i.options.ymax?j=w.series_u2p(i.options.ymax):null!=L&&("number"==t.type(L)?j=w.series_u2p(w.max+L):"string"==t.type(L)&&(j=w.series_u2p(w.max)+parseFloat(L))),null!=j&&null!=_){i.gridStart=[P,_],i.gridStop=[P,j];for(var m,v=Math.ceil((_-j)/y),O=_,g=0;g<v;g++)for(var b=0;b<x.length;b+=2)m=O-x[b],m<j&&(m=j),O<j&&(O=j),a.draw([P,O],[P,m],this.canvas._ctx,r),O-=x[b],b<x.length-1&&(O-=x[b+1])}}break;case"rectangle":a.style="line",r.closePath=!0;var p,h,u=e.axes[i.options.xaxis],d=e.axes[i.options.yaxis].series_u2p(i.options.y),c=i.options.xminOffset||i.options.xOffset,f=i.options.xmaxOffset||i.options.xOffset;null!=i.options.xmin?p=u.series_u2p(i.options.xmin):null!=c&&("number"==t.type(c)?p=u.series_u2p(u.min+c):"string"==t.type(c)&&(p=u.series_u2p(u.min)+parseFloat(c))),null!=i.options.xmax?h=u.series_u2p(i.options.xmax):null!=f&&("number"==t.type(f)?h=u.series_u2p(u.max-f):"string"==t.type(f)&&(h=u.series_u2p(u.max)-parseFloat(f)));var _,j,w=e.axes[i.options.yaxis],P=e.axes[i.options.xaxis].series_u2p(i.options.x),k=i.options.yminOffset||i.options.yOffset,L=i.options.ymaxOffset||i.options.yOffset;null!=i.options.ymin?_=w.series_u2p(i.options.ymin):null!=k&&("number"==t.type(k)?_=w.series_u2p(w.min-k):"string"==t.type(k)&&(_=w.series_u2p(w.min)-parseFloat(k))),null!=i.options.ymax?j=w.series_u2p(i.options.ymax):null!=L&&("number"==t.type(L)?j=w.series_u2p(w.max+L):"string"==t.type(L)&&(j=w.series_u2p(w.max)+parseFloat(L))),null!=h&&null!=p&&null!=j&&null!=_&&(i.gridStart=[p,_],i.gridStop=[h,j],this.canvas._ctx.fillStyle=i.options.color,this.canvas._ctx.fillRect(p,_,h-p,j-_))}}}},t.jqplot.CanvasOverlay.postPlotDraw=function(){var e=this.plugins.canvasOverlay;e&&e.highlightCanvas&&(e.highlightCanvas.resetCanvas(),e.highlightCanvas=null),e.canvas=new t.jqplot.GenericCanvas,this.eventCanvas._elem.before(e.canvas.createElement(this._gridPadding,"jqplot-overlayCanvas-canvas",this._plotDimensions,this)),e.canvas.setContext(),e.deferDraw||e.draw(this);var i=document.createElement("div");e._tooltipElem=t(i),i=null,e._tooltipElem.addClass("jqplot-canvasOverlay-tooltip"),e._tooltipElem.css({position:"absolute",display:"none"}),this.eventCanvas._elem.before(e._tooltipElem),this.eventCanvas._elem.bind("mouseleave",{elem:e._tooltipElem},function(t){t.data.elem.hide()});var e=null},t.jqplot.postInitHooks.push(t.jqplot.CanvasOverlay.postPlotInit),t.jqplot.postDrawHooks.push(t.jqplot.CanvasOverlay.postPlotDraw),t.jqplot.eventListenerHooks.push(["jqplotMouseMove",u])}(jQuery);