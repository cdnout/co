!function(t){t.jqplot.LogAxisRenderer=function(){t.jqplot.LinearAxisRenderer.call(this),this.axisDefaults={base:10,tickDistribution:"power"}},t.jqplot.LogAxisRenderer.prototype=new t.jqplot.LinearAxisRenderer,t.jqplot.LogAxisRenderer.prototype.constructor=t.jqplot.LogAxisRenderer,t.jqplot.LogAxisRenderer.prototype.init=function(e){this.drawBaseline=!0,this.minorTicks="auto",this._scalefact=1,t.extend(!0,this,e),this._autoFormatString="%d",this._overrideFormatString=!1;for(var i in this.renderer.axisDefaults)null==this[i]&&(this[i]=this.renderer.axisDefaults[i]);this.resetDataBounds()},t.jqplot.LogAxisRenderer.prototype.createTicks=function(e){var i,s,a,r,h,n=(this._ticks,this.ticks),o=(this.name,this._dataBounds),l="x"===this.name.charAt(0)?this._plotDimensions.width:this._plotDimensions.height,c=30;if(this._scalefact=(Math.max(l,c+1)-c)/300,n.length){for(h=0;h<n.length;h++){var u=n[h],m=new this.tickRenderer(this.tickOptions);u.constructor==Array?(m.value=u[0],m.label=u[1],this.showTicks?this.showTickMarks||(m.showMark=!1):(m.showLabel=!1,m.showMark=!1),m.setTick(u[0],this.name),this._ticks.push(m)):t.isPlainObject(u)?(t.extend(!0,m,u),m.axis=this.name,this._ticks.push(m)):(m.value=u,this.showTicks?this.showTickMarks||(m.showMark=!1):(m.showLabel=!1,m.showMark=!1),m.setTick(u,this.name),this._ticks.push(m))}this.numberTicks=n.length,this.min=this._ticks[0].value,this.max=this._ticks[this.numberTicks-1].value}else if(null==this.min&&null==this.max){if(s=o.min*(2-this.padMin),a=o.max*this.padMax,s==a){var g=.05;s*=1-g,a*=1+g}if(null!=this.min&&this.min<=0)throw new Error("Log axis minimum must be greater than 0");if(null!=this.max&&this.max<=0)throw new Error("Log axis maximum must be greater than 0");var k,_;k=Math.pow(this.base,Math.floor(Math.log(s)/Math.log(this.base))),_=Math.pow(this.base,Math.ceil(Math.log(a)/Math.log(this.base))),0===k&&(k=1);var x=Math.round(Math.log(k)/Math.LN10);null!=this.tickOptions&&this.tickOptions.formatString||(this._overrideFormatString=!0),this.min=k,this.max=_;var d,p=(this.max-this.min,"auto"===this.minorTicks?0:this.minorTicks);if(null==this.numberTicks)if(l>140){if(d=Math.round(Math.log(this.max/this.min)/Math.log(this.base)+1),d<2&&(d=2),0===p){var f=l/(d-1);p=f<100?0:f<190?1:f<250?3:f<600?4:9}}else d=2,0===p&&(p=1),p=0;else d=this.numberTicks;if(x>=0&&3!==p)this._autoFormatString="%d";else if(x<=0&&3===p){var f=-(x-1);this._autoFormatString="%."+Math.abs(x-1)+"f"}else if(x<0){var f=-x;this._autoFormatString="%."+Math.abs(x)+"f"}else this._autoFormatString="%d";for(var m,w,M,b,i,h=0;h<d;h++)if(r=Math.pow(this.base,h-d+1)*this.max,m=new this.tickRenderer(this.tickOptions),this._overrideFormatString&&(m.formatString=this._autoFormatString),this.showTicks?this.showTickMarks||(m.showMark=!1):(m.showLabel=!1,m.showMark=!1),m.setTick(r,this.name),this._ticks.push(m),p&&h<d-1){M=Math.pow(this.base,h-d+2)*this.max,b=M-r,i=M/(p+1);for(var v=p-1;v>=0;v--)w=M-i*(v+1),m=new this.tickRenderer(this.tickOptions),this._overrideFormatString&&""!=this._autoFormatString&&(m.formatString=this._autoFormatString),this.showTicks?this.showTickMarks||(m.showMark=!1):(m.showLabel=!1,m.showMark=!1),m.setTick(w,this.name),this._ticks.push(m)}}else if(null!=this.min&&null!=this.max){var R,T,S=t.extend(!0,{},this.tickOptions,{name:this.name,value:null});if(null==this.numberTicks&&null==this.tickInterval){var L=Math.max(l,c+1),F=Math.ceil((L-c)/35+1),j=t.jqplot.LinearTickGenerator.bestConstrainedInterval(this.min,this.max,F);this._autoFormatString=j[3],R=j[2],T=j[4];for(var h=0;h<R;h++)S.value=this.min+h*T,m=new this.tickRenderer(S),this._overrideFormatString&&""!=this._autoFormatString&&(m.formatString=this._autoFormatString),this.showTicks?this.showTickMarks||(m.showMark=!1):(m.showLabel=!1,m.showMark=!1),this._ticks.push(m)}else if(null!=this.numberTicks&&null!=this.tickInterval){R=this.numberTicks;for(var h=0;h<R;h++)S.value=this.min+h*this.tickInterval,m=new this.tickRenderer(S),this._overrideFormatString&&""!=this._autoFormatString&&(m.formatString=this._autoFormatString),this.showTicks?this.showTickMarks||(m.showMark=!1):(m.showLabel=!1,m.showMark=!1),this._ticks.push(m)}}},t.jqplot.LogAxisRenderer.prototype.pack=function(e,i){var s=parseInt(this.base,10),a=this._ticks,r=function(t){return Math.log(t)/Math.log(s)},h=function(t){return Math.pow(Math.E,Math.log(s)*t)},n=r(this.max),o=r(this.min),l=i.max,c=i.min,u=null!=this._label&&this._label.show;for(var m in e)this._elem.css(m,e[m]);this._offsets=i;var g=l-c,k=n-o;if(this.p2u=function(t){return h((t-c)*k/g+o)},this.u2p=function(t){return(r(t)-o)*g/k+c},"xaxis"==this.name||"x2axis"==this.name?(this.series_u2p=function(t){return(r(t)-o)*g/k},this.series_p2u=function(t){return h(t*k/g+o)}):(this.series_u2p=function(t){return(r(t)-n)*g/k},this.series_p2u=function(t){return h(t*k/g+n)}),this.show)if("xaxis"==this.name||"x2axis"==this.name){for(var _=0;_<a.length;_++){var x=a[_];if(x.show&&x.showLabel){var d;if(x.constructor==t.jqplot.CanvasAxisTickRenderer&&x.angle)switch(x.labelPosition){case"auto":d=x.angle<0?-x.getWidth()+x._textRenderer.height*Math.sin(-x._textRenderer.angle)/2:-x._textRenderer.height*Math.sin(x._textRenderer.angle)/2;break;case"end":d=-x.getWidth()+x._textRenderer.height*Math.sin(-x._textRenderer.angle)/2;break;case"start":d=-x._textRenderer.height*Math.sin(x._textRenderer.angle)/2;break;case"middle":d=-x.getWidth()/2+x._textRenderer.height*Math.sin(-x._textRenderer.angle)/2;break;default:d=-x.getWidth()/2+x._textRenderer.height*Math.sin(-x._textRenderer.angle)/2}else d=-x.getWidth()/2;var p=this.u2p(x.value)+d+"px";x._elem.css("left",p),x.pack()}}if(u){var f=this._label._elem.outerWidth(!0);this._label._elem.css("left",c+g/2-f/2+"px"),"xaxis"==this.name?this._label._elem.css("bottom","0px"):this._label._elem.css("top","0px"),this._label.pack()}}else{for(var _=0;_<a.length;_++){var x=a[_];if(x.show&&x.showLabel){var d;if(x.constructor==t.jqplot.CanvasAxisTickRenderer&&x.angle)switch(x.labelPosition){case"auto":case"end":d=x.angle<0?-x._textRenderer.height*Math.cos(-x._textRenderer.angle)/2:-x.getHeight()+x._textRenderer.height*Math.cos(x._textRenderer.angle)/2;break;case"start":d=x.angle>0?-x._textRenderer.height*Math.cos(-x._textRenderer.angle)/2:-x.getHeight()+x._textRenderer.height*Math.cos(x._textRenderer.angle)/2;break;case"middle":d=-x.getHeight()/2;break;default:d=-x.getHeight()/2}else d=-x.getHeight()/2;var p=this.u2p(x.value)+d+"px";x._elem.css("top",p),x.pack()}}if(u){var w=this._label._elem.outerHeight(!0);this._label._elem.css("top",l-g/2-w/2+"px"),"yaxis"==this.name?this._label._elem.css("left","0px"):this._label._elem.css("right","0px"),this._label.pack()}}}}(jQuery);