!function(){const e=Symbol.Slim,{isReadOnly:t}=Slim;Slim.customDirective(e=>"s:repeat"===e.nodeName,(l,n,r)=>{let o=r.value,i="data";o.indexOf(" as ")>0&&([o,i]=o.split(" as "));let c=[];const a=document.createComment(`${n.localName} s:repeat="${r.value}"`),m=n.parentElement||Slim.root(l);m.insertBefore(a,n),n.removeAttribute("s:repeat"),Slim.qSelectAll(n,"*").forEach(e=>{Slim._$(e).excluded=!0}),Slim._$(n).excluded=!0;const s=n.outerHTML;n.remove();let S=[];const u=(e,t)=>{let l=t,n="";if(e<1)return n;for(;e>1;)1&e&&(n+=l),e>>=1,l+=l;return n+l};Slim.bind(l,a,o,()=>{const n=Slim.lookup(l,o)||[];let r;if(n.length<c.length&&(c.slice(n.length).forEach(t=>{Slim.unbind(l,t),t[e].subTree&&t[e].subTree.forEach(e=>Slim.unbind(l,e)),t.remove()}),c.length=n.length),n.length>c.length){const t=c.length,o=n.length-c.length,m=u(o,s),S=document.createRange();S.setStartBefore(a),r=S.createContextualFragment(m);for(let l=0;l<o;l++){const o=n[l+t],a=r.children[l];Slim._$(a).repeater[i]=o;const m=Slim.qSelectAll(a,"*");m.forEach(function(e){Slim._$(e).repeater[i]=o}),a[e].subTree=m,c.push(a)}const h=Slim.qSelectAll(r,"*");l._bindChildren(h)}const h=(e,l)=>{t(e,i)||(e[i]=l),Slim.commit(e,i)};n.forEach(function(t,l){if(S[l]!==t){const n=c[l];[n,...n[e].subTree||Slim.qSelectAll(n,"*")].forEach(l=>{l[e].repeater[i]=t,l[e].repeater.__node=n,l.__isSlim?(l.createdCallback(),Slim.asap(()=>h(l,t))):h(l,t)})}}),S=n.concat(),r&&Slim.asap(()=>{m.insertBefore(r,a)})})},!0)}();