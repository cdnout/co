{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///dash-shaka-playback.min.js","webpack:///webpack/bootstrap 7a4d607fef434eef299a","webpack:///./src/clappr-dash-shaka-playback.js","webpack:///external \"Clappr\"","webpack:///external \"shaka\""],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE_1__","__WEBPACK_EXTERNAL_MODULE_2__","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","_classCallCheck","instance","Constructor","TypeError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","defineProperty","_createClass","defineProperties","target","props","i","length","descriptor","key","protoProps","staticProps","_get","_x2","_x3","_x4","_again","object","property","receiver","Function","desc","getOwnPropertyDescriptor","undefined","getter","get","parent","getPrototypeOf","_clappr","_shakaPlayer","_shakaPlayer2","SEND_STATS_INTERVAL_MS","DEFAULT_LEVEL_AUTO","DashShakaPlayback","_HTML5Video","options","_levels","autoPlay","play","player","Player","version","_player","set","_this","_currentLevelId","isAuto","configure","abr","enable","trigger","Events","PLAYBACK_LEVEL_SWITCH_START","selectTrack","videoTracks","filter","t","PLAYBACK_LEVEL_SWITCH_END","resource","mimeType","arguments","polyfill","installAll","browserSupported","isBrowserSupported","resourceParts","split","match","indexOf","SHAKA_READY","_setup","isReady","_src","el","src","once","event","Log","error","highDefinition","_this2","clearInterval","sendStatsId","_sendStats","unload","then","_isShakaReadyState","isLive","track","_onAdaptation","_this3","_destroy","destroy","_this4","_createPlayer","_options","shakaConfiguration","shakaOnBeforeLoad","playerLoaded","load","_loaded","e","_setupError","addEventListener","_onError","bind","_onBuffering","buffering","PLAYBACK_BUFFERING","PLAYBACK_BUFFERFULL","_startToSendStats","_fillLevels","map","videoTrack","label","height","reverse","PLAYBACK_LEVELS_AVAILABLE","levels","_this5","intervalMs","shakaSendStatsInterval","setInterval","PLAYBACK_STATS_ADD","getStats","err","PLAYBACK_ERROR","name","activeVideo","active","debug","PLAYBACK_HIGHDEFINITIONUPDATE","PLAYBACK_BITRATE","bandwidth","width","level","getTextTracks","getVariantTracks","startsWith","HTML5Video"],"mappings":"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","file":"dash-shaka-playback.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"Clappr\"), require(\"shaka\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"Clappr\", \"shaka\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"DashShakaPlayback\"] = factory(require(\"Clappr\"), require(\"shaka\"));\n\telse\n\t\troot[\"DashShakaPlayback\"] = factory(root[\"Clappr\"], root[\"shaka\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_1__, __WEBPACK_EXTERNAL_MODULE_2__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"Clappr\"), require(\"shaka\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"Clappr\", \"shaka\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"DashShakaPlayback\"] = factory(require(\"Clappr\"), require(\"shaka\"));\n\telse\n\t\troot[\"DashShakaPlayback\"] = factory(root[\"Clappr\"], root[\"shaka\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_1__, __WEBPACK_EXTERNAL_MODULE_2__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _get = function get(_x2, _x3, _x4) { var _again = true; _function: while (_again) { var object = _x2, property = _x3, receiver = _x4; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x2 = parent; _x3 = property; _x4 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar _clappr = __webpack_require__(1);\n\t\n\tvar _shakaPlayer = __webpack_require__(2);\n\t\n\tvar _shakaPlayer2 = _interopRequireDefault(_shakaPlayer);\n\t\n\tvar SEND_STATS_INTERVAL_MS = 30 * 1e3;\n\tvar DEFAULT_LEVEL_AUTO = -1;\n\t\n\tvar DashShakaPlayback = (function (_HTML5Video) {\n\t  _inherits(DashShakaPlayback, _HTML5Video);\n\t\n\t  _createClass(DashShakaPlayback, [{\n\t    key: 'name',\n\t    get: function get() {\n\t      return 'dash_shaka_playback';\n\t    }\n\t  }, {\n\t    key: 'shakaVersion',\n\t    get: function get() {\n\t      return _shakaPlayer2['default'].player.Player.version;\n\t    }\n\t  }, {\n\t    key: 'shakaPlayerInstance',\n\t    get: function get() {\n\t      return this._player;\n\t    }\n\t  }, {\n\t    key: 'levels',\n\t    get: function get() {\n\t      return this._levels;\n\t    }\n\t  }, {\n\t    key: 'currentLevel',\n\t    set: function set(id) {\n\t      var _this = this;\n\t\n\t      this._currentLevelId = id;\n\t      var isAuto = this._currentLevelId === DEFAULT_LEVEL_AUTO;\n\t\n\t      this._player.configure({ abr: { enable: !isAuto } });\n\t      this.trigger(_clappr.Events.PLAYBACK_LEVEL_SWITCH_START);\n\t      if (!isAuto) {\n\t        this.selectTrack(this.videoTracks.filter(function (t) {\n\t          return t.id === _this._currentLevelId;\n\t        })[0]);\n\t      }\n\t      this.trigger(_clappr.Events.PLAYBACK_LEVEL_SWITCH_END);\n\t    },\n\t    get: function get() {\n\t      return this._currentLevelId || DEFAULT_LEVEL_AUTO;\n\t    }\n\t  }], [{\n\t    key: 'canPlay',\n\t    value: function canPlay(resource) {\n\t      var mimeType = arguments.length <= 1 || arguments[1] === undefined ? '' : arguments[1];\n\t\n\t      _shakaPlayer2['default'].polyfill.installAll();\n\t      var browserSupported = _shakaPlayer2['default'].Player.isBrowserSupported();\n\t      var resourceParts = resource.split('?')[0].match(/.*\\.(.*)$/) || [];\n\t      return browserSupported && (resourceParts[1] === 'mpd' || mimeType.indexOf('application/dash+xml') > -1);\n\t    }\n\t  }, {\n\t    key: 'Events',\n\t    get: function get() {\n\t      return {\n\t        SHAKA_READY: 'shaka:ready'\n\t      };\n\t    }\n\t  }]);\n\t\n\t  function DashShakaPlayback(options) {\n\t    _classCallCheck(this, DashShakaPlayback);\n\t\n\t    _get(Object.getPrototypeOf(DashShakaPlayback.prototype), 'constructor', this).call(this, options);\n\t    this._levels = [];\n\t    options.autoPlay && this.play();\n\t  }\n\t\n\t  _createClass(DashShakaPlayback, [{\n\t    key: 'play',\n\t    value: function play() {\n\t      if (!this._player) {\n\t        this._setup();\n\t      }\n\t\n\t      if (!this.isReady) {\n\t        this.once(DashShakaPlayback.Events.SHAKA_READY, this.play);\n\t        return;\n\t      }\n\t\n\t      this._src = this.el.src;\n\t      _get(Object.getPrototypeOf(DashShakaPlayback.prototype), 'play', this).call(this);\n\t    }\n\t\n\t    // skipping setup `setupSrc` on tag video\n\t  }, {\n\t    key: 'setupSrc',\n\t    value: function setupSrc() {}\n\t\n\t    // skipping ready event on video tag in favor of ready on shaka\n\t  }, {\n\t    key: '_ready',\n\t    value: function _ready() {}\n\t  }, {\n\t    key: 'error',\n\t\n\t    // skipping error handling on video tag in favor of error on shaka\n\t    value: function error(event) {\n\t      _clappr.Log.error('an error was raised by the video tag', event, this.el.error);\n\t    }\n\t  }, {\n\t    key: 'isHighDefinitionInUse',\n\t    value: function isHighDefinitionInUse() {\n\t      return !!this.highDefinition;\n\t    }\n\t  }, {\n\t    key: 'stop',\n\t    value: function stop() {\n\t      var _this2 = this;\n\t\n\t      clearInterval(this.sendStatsId);\n\t      this._sendStats();\n\t\n\t      this._player.unload().then(function () {\n\t        _get(Object.getPrototypeOf(DashShakaPlayback.prototype), 'stop', _this2).call(_this2);\n\t        _this2._player = null;\n\t        _this2._isShakaReadyState = false;\n\t      })['catch'](function () {\n\t        _clappr.Log.error('shaka could not be unloaded');\n\t      });\n\t    }\n\t  }, {\n\t    key: 'getPlaybackType',\n\t    value: function getPlaybackType() {\n\t      return (this._player && this._player.isLive() ? 'live' : 'vod') || '';\n\t    }\n\t  }, {\n\t    key: 'selectTrack',\n\t    value: function selectTrack(track) {\n\t      this._player.selectTrack(track);\n\t      this._onAdaptation();\n\t    }\n\t  }, {\n\t    key: 'destroy',\n\t    value: function destroy() {\n\t      var _this3 = this;\n\t\n\t      clearInterval(this.sendStatsId);\n\t\n\t      if (this._player) {\n\t        this._destroy();\n\t      } else {\n\t        this._player.destroy().then(function () {\n\t          return _this3._destroy();\n\t        })['catch'](function () {\n\t          _this3._destroy();\n\t          _clappr.Log.error('shaka could not be destroyed');\n\t        });\n\t      }\n\t    }\n\t  }, {\n\t    key: '_setup',\n\t    value: function _setup() {\n\t      var _this4 = this;\n\t\n\t      this._isShakaReadyState = false;\n\t      this._player = this._createPlayer();\n\t      this._options.shakaConfiguration && this._player.configure(this._options.shakaConfiguration);\n\t      this._options.shakaOnBeforeLoad && this._options.shakaOnBeforeLoad(this._player);\n\t\n\t      var playerLoaded = this._player.load(this._options.src);\n\t      playerLoaded.then(function () {\n\t        return _this4._loaded();\n\t      })['catch'](function (e) {\n\t        return _this4._setupError(e);\n\t      });\n\t    }\n\t  }, {\n\t    key: '_createPlayer',\n\t    value: function _createPlayer() {\n\t      var player = new _shakaPlayer2['default'].Player(this.el);\n\t      player.addEventListener('error', this._onError.bind(this));\n\t      player.addEventListener('adaptation', this._onAdaptation.bind(this));\n\t      player.addEventListener('buffering', this._onBuffering.bind(this));\n\t      return player;\n\t    }\n\t  }, {\n\t    key: '_onBuffering',\n\t    value: function _onBuffering(e) {\n\t      var event = e.buffering ? _clappr.Events.PLAYBACK_BUFFERING : _clappr.Events.PLAYBACK_BUFFERFULL;\n\t      this.trigger(event);\n\t    }\n\t  }, {\n\t    key: '_loaded',\n\t    value: function _loaded() {\n\t      this._isShakaReadyState = true;\n\t      this.trigger(DashShakaPlayback.Events.SHAKA_READY);\n\t      _get(Object.getPrototypeOf(DashShakaPlayback.prototype), '_ready', this).call(this);\n\t      this._startToSendStats();\n\t      this._fillLevels();\n\t    }\n\t  }, {\n\t    key: '_fillLevels',\n\t    value: function _fillLevels() {\n\t      if (this._levels.length === 0) {\n\t        this._levels = this.videoTracks.map(function (videoTrack) {\n\t          return { id: videoTrack.id, label: videoTrack.height + 'p' };\n\t        }).reverse();\n\t        this.trigger(_clappr.Events.PLAYBACK_LEVELS_AVAILABLE, this.levels);\n\t      }\n\t    }\n\t  }, {\n\t    key: '_startToSendStats',\n\t    value: function _startToSendStats() {\n\t      var _this5 = this;\n\t\n\t      var intervalMs = this._options.shakaSendStatsInterval || SEND_STATS_INTERVAL_MS;\n\t      this.sendStatsId = setInterval(function () {\n\t        return _this5._sendStats();\n\t      }, intervalMs);\n\t    }\n\t  }, {\n\t    key: '_sendStats',\n\t    value: function _sendStats() {\n\t      this.trigger(_clappr.Events.PLAYBACK_STATS_ADD, this._player.getStats());\n\t    }\n\t  }, {\n\t    key: '_setupError',\n\t    value: function _setupError(err) {\n\t      this._onError(err);\n\t    }\n\t  }, {\n\t    key: '_onError',\n\t    value: function _onError(err) {\n\t      _clappr.Log.error('Shaka error event:', err);\n\t      this.trigger(_clappr.Events.PLAYBACK_ERROR, err, this.name);\n\t    }\n\t  }, {\n\t    key: '_onAdaptation',\n\t    value: function _onAdaptation() {\n\t      var activeVideo = this.videoTracks.filter(function (t) {\n\t        return t.active === true;\n\t      })[0];\n\t\n\t      this._fillLevels();\n\t\n\t      _clappr.Log.debug('an adaptation has happened:', activeVideo);\n\t      this.highDefinition = activeVideo.height >= 720;\n\t      this.trigger(_clappr.Events.PLAYBACK_HIGHDEFINITIONUPDATE, this.highDefinition);\n\t      this.trigger(_clappr.Events.PLAYBACK_BITRATE, {\n\t        bandwidth: activeVideo.bandwidth,\n\t        width: activeVideo.width,\n\t        height: activeVideo.height,\n\t        level: activeVideo.id\n\t      });\n\t    }\n\t  }, {\n\t    key: '_destroy',\n\t    value: function _destroy() {\n\t      _get(Object.getPrototypeOf(DashShakaPlayback.prototype), 'destroy', this).call(this);\n\t      this._isShakaReadyState = false;\n\t      _clappr.Log.debug('shaka was destroyed');\n\t    }\n\t  }, {\n\t    key: 'isReady',\n\t    get: function get() {\n\t      return this._isShakaReadyState;\n\t    }\n\t  }, {\n\t    key: 'textTracks',\n\t    get: function get() {\n\t      return this._player && this._player.getTextTracks();\n\t    }\n\t  }, {\n\t    key: 'audioTracks',\n\t    get: function get() {\n\t      return this._player && this._player.getVariantTracks().filter(function (t) {\n\t        return t.mimeType.startsWith('audio/');\n\t      });\n\t    }\n\t  }, {\n\t    key: 'videoTracks',\n\t    get: function get() {\n\t      return this._player && this._player.getVariantTracks().filter(function (t) {\n\t        return t.mimeType.startsWith('video/');\n\t      });\n\t    }\n\t  }]);\n\t\n\t  return DashShakaPlayback;\n\t})(_clappr.HTML5Video);\n\t\n\texports['default'] = DashShakaPlayback;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n/***/ })\n/******/ ])\n});\n;\n\n\n// WEBPACK FOOTER //\n// dash-shaka-playback.min.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 7a4d607fef434eef299a","import {HTML5Video, Log, Events} from 'clappr'\nimport shaka from 'shaka-player'\n\nconst SEND_STATS_INTERVAL_MS = 30 * 1e3\nconst DEFAULT_LEVEL_AUTO = -1\n\nclass DashShakaPlayback extends HTML5Video {\n  static get Events () {\n    return {\n      SHAKA_READY: 'shaka:ready'\n    }\n  }\n\n  static canPlay (resource, mimeType = '') {\n    shaka.polyfill.installAll()\n    var browserSupported = shaka.Player.isBrowserSupported()\n    var resourceParts = resource.split('?')[0].match(/.*\\.(.*)$/) || []\n    return browserSupported && ((resourceParts[1] === 'mpd') || mimeType.indexOf('application/dash+xml') > -1)\n  }\n\n  get name () {\n    return 'dash_shaka_playback'\n  }\n\n  get shakaVersion () {\n    return shaka.player.Player.version\n  }\n\n  get shakaPlayerInstance () {\n    return this._player\n  }\n\n  get levels () {\n    return this._levels\n  }\n\n  set currentLevel (id) {\n    this._currentLevelId = id\n    var isAuto = this._currentLevelId === DEFAULT_LEVEL_AUTO\n\n    this._player.configure({abr: {enable: !isAuto}})\n    this.trigger(Events.PLAYBACK_LEVEL_SWITCH_START)\n    if (!isAuto) {\n      this.selectTrack(this.videoTracks.filter((t) => t.id === this._currentLevelId)[0])\n    }\n    this.trigger(Events.PLAYBACK_LEVEL_SWITCH_END)\n  }\n\n  get currentLevel () {\n    return this._currentLevelId || DEFAULT_LEVEL_AUTO\n  }\n\n  constructor (options) {\n    super(options)\n    this._levels = []\n    options.autoPlay && this.play()\n  }\n\n  play () {\n    if (!this._player) {\n      this._setup()\n    }\n\n    if (!this.isReady) {\n      this.once(DashShakaPlayback.Events.SHAKA_READY, this.play)\n      return\n    }\n\n    this._src = this.el.src\n    super.play()\n  }\n\n  // skipping setup `setupSrc` on tag video\n  setupSrc () {}\n\n  // skipping ready event on video tag in favor of ready on shaka\n  _ready () {}\n\n  get isReady () {\n    return this._isShakaReadyState\n  }\n\n  // skipping error handling on video tag in favor of error on shaka\n  error (event) {\n    Log.error('an error was raised by the video tag', event, this.el.error)\n  }\n\n  isHighDefinitionInUse () {\n    return !!this.highDefinition\n  }\n\n  stop () {\n    clearInterval(this.sendStatsId)\n    this._sendStats()\n\n    this._player.unload().then(() => {\n      super.stop()\n      this._player = null\n      this._isShakaReadyState = false\n    }).catch(() => {\n      Log.error('shaka could not be unloaded')\n    })\n  }\n\n  get textTracks () {\n    return this._player && this._player.getTextTracks()\n  }\n\n  get audioTracks () {\n    return this._player && this._player.getVariantTracks().filter((t) => t.mimeType.startsWith('audio/'))\n  }\n\n  get videoTracks () {\n    return this._player && this._player.getVariantTracks().filter((t) => t.mimeType.startsWith('video/'))\n  }\n\n  getPlaybackType () {\n    return (this._player && this._player.isLive() ? 'live' : 'vod') || ''\n  }\n\n  selectTrack (track) {\n    this._player.selectTrack(track)\n    this._onAdaptation()\n  }\n\n  destroy () {\n    clearInterval(this.sendStatsId)\n\n    if (this._player) {\n      this._destroy()\n    } else {\n      this._player.destroy()\n        .then(() => this._destroy())\n        .catch(() => {\n          this._destroy()\n          Log.error('shaka could not be destroyed')\n        })\n    }\n  }\n\n  _setup () {\n    this._isShakaReadyState = false\n    this._player = this._createPlayer()\n    this._options.shakaConfiguration && this._player.configure(this._options.shakaConfiguration)\n    this._options.shakaOnBeforeLoad && this._options.shakaOnBeforeLoad(this._player)\n\n    var playerLoaded = this._player.load(this._options.src)\n    playerLoaded.then(() => this._loaded())\n      .catch((e) => this._setupError(e))\n  }\n\n  _createPlayer () {\n    var player = new shaka.Player(this.el)\n    player.addEventListener('error', this._onError.bind(this))\n    player.addEventListener('adaptation', this._onAdaptation.bind(this))\n    player.addEventListener('buffering', this._onBuffering.bind(this))\n    return player\n  }\n\n  _onBuffering (e) {\n    var event = e.buffering ? Events.PLAYBACK_BUFFERING : Events.PLAYBACK_BUFFERFULL\n    this.trigger(event)\n  }\n\n  _loaded () {\n    this._isShakaReadyState = true\n    this.trigger(DashShakaPlayback.Events.SHAKA_READY)\n    super._ready()\n    this._startToSendStats()\n    this._fillLevels()\n  }\n\n  _fillLevels () {\n    if (this._levels.length === 0) {\n      this._levels = this.videoTracks.map((videoTrack) => { return {id: videoTrack.id, label: `${videoTrack.height}p`} }).reverse()\n      this.trigger(Events.PLAYBACK_LEVELS_AVAILABLE, this.levels)\n    }\n  }\n\n  _startToSendStats () {\n    const intervalMs = this._options.shakaSendStatsInterval || SEND_STATS_INTERVAL_MS\n    this.sendStatsId = setInterval(() => this._sendStats(), intervalMs)\n  }\n\n  _sendStats () {\n    this.trigger(Events.PLAYBACK_STATS_ADD, this._player.getStats())\n  }\n\n  _setupError (err) {\n    this._onError(err)\n  }\n\n  _onError (err) {\n    Log.error('Shaka error event:', err)\n    this.trigger(Events.PLAYBACK_ERROR, err, this.name)\n  }\n\n  _onAdaptation () {\n    var activeVideo = this.videoTracks.filter((t) => t.active === true)[0]\n\n    this._fillLevels()\n\n    Log.debug('an adaptation has happened:', activeVideo)\n    this.highDefinition = (activeVideo.height >= 720)\n    this.trigger(Events.PLAYBACK_HIGHDEFINITIONUPDATE, this.highDefinition)\n    this.trigger(Events.PLAYBACK_BITRATE, {\n      bandwidth: activeVideo.bandwidth,\n      width: activeVideo.width,\n      height: activeVideo.height,\n      level: activeVideo.id\n    })\n  }\n\n  _destroy () {\n    super.destroy()\n    this._isShakaReadyState = false\n    Log.debug('shaka was destroyed')\n  }\n}\n\nexport default DashShakaPlayback\n\n\n\n// WEBPACK FOOTER //\n// ./src/clappr-dash-shaka-playback.js","module.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"Clappr\"\n// module id = 1\n// module chunks = 0","module.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"shaka\"\n// module id = 2\n// module chunks = 0"],"sourceRoot":""}