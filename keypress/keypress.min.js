(function(){var e,t,n,o,i,r,s,_,c,u,l,f,h,a,p,y,d,m,k,v,g,b,w={}.hasOwnProperty,q=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};c={is_unordered:!1,is_counting:!1,is_exclusive:!1,is_solitary:!1,prevent_default:!1,prevent_repeat:!1,normalize_caps_lock:!1},g=["meta","alt","option","ctrl","shift","cmd"],k="ctrl",(t={}).debug=!1,e=function(){function e(e){var t,n;for(t in e)w.call(e,t)&&!1!==(n=e[t])&&(this[t]=n);this.keys=this.keys||[],this.count=this.count||0}return e.prototype.allows_key_repeat=function(){return!this.prevent_repeat&&"function"==typeof this.on_keydown},e.prototype.reset=function(){return this.count=0,this.keyup_fired=null},e}(),t.Listener=function(){function t(e,t){var n,o,i,r,s,_;for(o in"undefined"!=typeof jQuery&&null!==jQuery&&e instanceof jQuery&&(1!==e.length&&m("Warning: your jQuery selector should have exactly one object."),e=e[0]),this.should_suppress_event_defaults=!1,this.should_force_event_defaults=!1,this.sequence_delay=800,this._registered_combos=[],this._keys_down=[],this._active_combos=[],this._sequence=[],this._sequence_timer=null,this._prevent_capture=!1,this._defaults=t||{},c)w.call(c,o)&&(i=c[o],this._defaults[o]=this._defaults[o]||i);this.element=e||document.body,n=function(e,t,n){return e.addEventListener?e.addEventListener(t,n):e.attachEvent&&e.attachEvent("on"+t,n),n},this.keydown_event=n(this.element,"keydown",(r=this,function(e){return e=e||window.event,r._receive_input(e,!0),r._bug_catcher(e)})),this.keyup_event=n(this.element,"keyup",(s=this,function(e){return e=e||window.event,s._receive_input(e,!1)})),this.blur_event=n(window,"blur",(_=this,function(){var e,t,n,o;for(t=0,n=(o=_._keys_down).length;t<n;t++)e=o[t],_._key_up(e,{});return _._keys_down=[]}))}return t.prototype.destroy=function(){var e;return(e=function(e,t,n){return null!=e.removeEventListener?e.removeEventListener(t,n):null!=e.removeEvent?e.removeEvent("on"+t,n):void 0})(this.element,"keydown",this.keydown_event),e(this.element,"keyup",this.keyup_event),e(window,"blur",this.blur_event)},t.prototype._bug_catcher=function(e){var t,n;if("cmd"===k&&q.call(this._keys_down,"cmd")>=0&&"cmd"!==(t=r(null!=(n=e.keyCode)?n:e.key))&&"shift"!==t&&"alt"!==t&&"caps"!==t&&"tab"!==t)return this._receive_input(e,!1)},t.prototype._cmd_bug_check=function(e){return!("cmd"===k&&q.call(this._keys_down,"cmd")>=0&&q.call(e,"cmd")<0)},t.prototype._prevent_default=function(e,t){if((t||this.should_suppress_event_defaults)&&!this.should_force_event_defaults&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation))return e.stopPropagation()},t.prototype._get_active_combos=function(e){var t,n,o,i;return t=[],(n=u(this._keys_down,function(t){return t!==e})).push(e),this._match_combo_arrays(n,(o=this,function(e){if(o._cmd_bug_check(e.keys))return t.push(e)})),this._fuzzy_match_combo_arrays(n,(i=this,function(e){if(!(q.call(t,e)>=0))return!e.is_solitary&&i._cmd_bug_check(e.keys)?t.push(e):void 0})),t},t.prototype._get_potential_combos=function(e){var t,n,o,i,r;for(n=[],o=0,i=(r=this._registered_combos).length;o<i;o++)(t=r[o]).is_sequence||q.call(t.keys,e)>=0&&this._cmd_bug_check(t.keys)&&n.push(t);return n},t.prototype._add_to_active_combos=function(e){var t,n,o,i,r,s,_,c,u,l,f,h,a,p,y;if(c=!1,_=!0,i=!1,q.call(this._active_combos,e)>=0)return!0;if(this._active_combos.length)for(s=u=0,p=this._active_combos.length;0<=p?u<p:u>p;s=0<=p?++u:--u)if((t=this._active_combos[s])&&t.is_exclusive&&e.is_exclusive){if(o=t.keys,!c)for(l=0,h=o.length;l<h;l++)if(n=o[l],c=!0,q.call(e.keys,n)<0){c=!1;break}if(_&&!c)for(f=0,a=(y=e.keys).length;f<a;f++)if(r=y[f],_=!1,q.call(o,r)<0){_=!0;break}c&&(i?null!=(t=this._active_combos.splice(s,1)[0])&&t.reset():(null!=(t=this._active_combos.splice(s,1,e)[0])&&t.reset(),i=!0),_=!1)}return _&&this._active_combos.unshift(e),c||_},t.prototype._remove_from_active_combos=function(e){var t,n,o;for(t=n=0,o=this._active_combos.length;0<=o?n<o:n>o;t=0<=o?++n:--n)if(this._active_combos[t]===e){(e=this._active_combos.splice(t,1)[0]).reset();break}},t.prototype._get_possible_sequences=function(){var e,t,n,o,i,r,s,_,c,l,f,h,a;for(i=[],s=0,l=(f=this._registered_combos).length;s<l;s++)for(e=f[s],n=_=1,h=this._sequence.length;1<=h?_<=h:_>=h;n=1<=h?++_:--_)if(r=this._sequence.slice(-n),e.is_sequence&&(!(q.call(e.keys,"shift")<0)||(r=u(r,function(e){return"shift"!==e})).length)){for(t=c=0,a=r.length;0<=a?c<a:c>a;t=0<=a?++c:--c){if(e.keys[t]!==r[t]){o=!1;break}o=!0}o&&i.push(e)}return i},t.prototype._add_key_to_sequence=function(e,t){var n,o,i,r,s;if(this._sequence.push(e),(o=this._get_possible_sequences()).length){for(i=0,r=o.length;i<r;i++)n=o[i],this._prevent_default(t,n.prevent_default);this._sequence_timer&&clearTimeout(this._sequence_timer),this.sequence_delay>-1&&(this._sequence_timer=setTimeout((s=this,function(){return s._sequence=[]}),this.sequence_delay))}else this._sequence=[]},t.prototype._get_sequence=function(e){var t,n,o,i,r,s,_,c,l,f,h,a,p;for(_=0,f=(h=this._registered_combos).length;_<f;_++)if((t=h[_]).is_sequence){for(o=c=1,a=this._sequence.length;1<=a?c<=a:c>=a;o=1<=a?++c:--c)if(s=u(this._sequence,function(e){return q.call(t.keys,"shift")>=0||"shift"!==e}).slice(-o),t.keys.length===s.length)for(n=l=0,p=s.length;0<=p?l<p:l>p;n=0<=p?++l:--l)if(r=s[n],!(q.call(t.keys,"shift")<0&&"shift"===r||"shift"===e&&q.call(t.keys,"shift")<0)){if(t.keys[n]!==r){i=!1;break}i=!0}if(i)return t.is_exclusive&&(this._sequence=[]),t}return!1},t.prototype._receive_input=function(e,t){var n,o;if(this._prevent_capture)this._keys_down.length&&(this._keys_down=[]);else if(n=r(null!=(o=e.keyCode)?o:e.key),(t||this._keys_down.length||"alt"!==n&&n!==k)&&n)return t?this._key_down(n,e):this._key_up(n,e)},t.prototype._fire=function(e,t,n,o){if("function"==typeof t["on_"+e]&&this._prevent_default(n,!0!==t["on_"+e].call(t.this,n,t.count,o)),"release"===e&&(t.count=0),"keyup"===e)return t.keyup_fired=!0},t.prototype._match_combo_arrays=function(e,t){var n,r,s,_,c;for(s=0,_=(c=this._registered_combos).length;s<_;s++)r=c[s],n=e.slice(0),r.normalize_caps_lock&&q.call(n,"caps")>=0&&n.splice(n.indexOf("caps"),1),(!r.is_unordered&&i(n,r.keys)||r.is_unordered&&o(n,r.keys))&&t(r)},t.prototype._fuzzy_match_combo_arrays=function(e,t){var n,o,i,r;for(o=0,i=(r=this._registered_combos).length;o<i;o++)(!(n=r[o]).is_unordered&&h(n.keys,e)||n.is_unordered&&f(n.keys,e))&&t(n)},t.prototype._keys_remain=function(e){var t,n,o,i,r;for(o=0,i=(r=e.keys).length;o<i;o++)if(t=r[o],q.call(this._keys_down,t)>=0){n=!0;break}return n},t.prototype._key_down=function(e,t){var n,o,i,r,_,c,u,l,f,h,a,p,y,d,m;for(_ in(f=s(e,t))&&(e=f),this._add_key_to_sequence(e,t),(l=this._get_sequence(e))&&this._fire("keydown",l,t),v)t[i=v[_]]&&(_===e||q.call(this._keys_down,_)>=0||this._keys_down.push(_));for(_ in v)if(i=v[_],_!==e&&q.call(this._keys_down,_)>=0&&!t[i]){if("cmd"===_&&"cmd"!==k)continue;for(r=h=0,m=this._keys_down.length;0<=m?h<m:h>m;r=0<=m?++h:--h)this._keys_down[r]===_&&this._keys_down.splice(r,1)}for(o=this._get_active_combos(e),u=this._get_potential_combos(e),a=0,y=o.length;a<y;a++)n=o[a],this._handle_combo_down(n,u,e,t);if(u.length)for(p=0,d=u.length;p<d;p++)c=u[p],this._prevent_default(t,c.prevent_default);q.call(this._keys_down,e)<0&&this._keys_down.push(e)},t.prototype._handle_combo_down=function(e,t,n,o){var i,r,s,_,c,u;if(q.call(e.keys,n)<0)return!1;if(this._prevent_default(o,e&&e.prevent_default),i=!1,q.call(this._keys_down,n)>=0&&(i=!0,!e.allows_key_repeat()))return!1;if(_=this._add_to_active_combos(e,n),e.keyup_fired=!1,r=!1,e.is_exclusive)for(c=0,u=t.length;c<u;c++)if((s=t[c]).is_exclusive&&s.keys.length>e.keys.length){r=!0;break}return!r&&(e.is_counting&&"function"==typeof e.on_keydown&&(e.count+=1),_)?this._fire("keydown",e,o,i):void 0},t.prototype._key_up=function(e,t){var n,o,i,r,_,c,u,l,f,h,a,p,y,m,k,v,g,b,w;if(l=e,(u=s(e,t))&&(e=u),u=d[l],t.shiftKey?u&&q.call(this._keys_down,u)>=0||(e=l):l&&q.call(this._keys_down,l)>=0||(e=u),(c=this._get_sequence(e))&&this._fire("keyup",c,t),q.call(this._keys_down,e)<0)return!1;for(_=f=0,v=this._keys_down.length;0<=v?f<v:f>v;_=0<=v?++f:--f)if((g=this._keys_down[_])===e||g===u||g===l){this._keys_down.splice(_,1);break}for(o=this._active_combos.length,r=[],h=0,y=(b=this._active_combos).length;h<y;h++)n=b[h],q.call(n.keys,e)>=0&&r.push(n);for(a=0,m=r.length;a<m;a++)i=r[a],this._handle_combo_up(i,t,e);if(o>1)for(p=0,k=(w=this._active_combos).length;p<k;p++)void 0===(n=w[p])||q.call(r,n)>=0||this._keys_remain(n)||this._remove_from_active_combos(n)},t.prototype._handle_combo_up=function(e,t,n){var i,r;this._prevent_default(t,e&&e.prevent_default),r=this._keys_remain(e),e.keyup_fired||((i=this._keys_down.slice()).push(n),e.is_solitary&&!o(i,e.keys)||(this._fire("keyup",e,t),e.is_counting&&"function"==typeof e.on_keyup&&"function"!=typeof e.on_keydown&&(e.count+=1))),r||(this._fire("release",e,t),this._remove_from_active_combos(e))},t.prototype.simple_combo=function(e,t){return this.register_combo({keys:e,on_keydown:t})},t.prototype.counting_combo=function(e,t){return this.register_combo({keys:e,is_counting:!0,is_unordered:!1,on_keydown:t})},t.prototype.sequence_combo=function(e,t){return this.register_combo({keys:e,on_keydown:t,is_sequence:!0,is_exclusive:!0})},t.prototype.register_combo=function(t){var n,o,i,r;for(o in"string"==typeof t.keys&&(t.keys=t.keys.split(" ")),r=this._defaults)w.call(r,o)&&(i=r[o],void 0===t[o]&&(t[o]=i));if(n=new e(t),b(n))return this._registered_combos.push(n),n},t.prototype.register_many=function(e){var t,n,o,i;for(i=[],n=0,o=e.length;n<o;n++)t=e[n],i.push(this.register_combo(t));return i},t.prototype.unregister_combo=function(t){var n,r,s,_,c,u,l,f,h,a;if(!t)return!1;if(a=this,s=function(e){var t,n,o,i;for(i=[],t=n=0,o=a._registered_combos.length;0<=o?n<o:n>o;t=0<=o?++n:--n){if(e===a._registered_combos[t]){a._registered_combos.splice(t,1);break}i.push(void 0)}return i},t instanceof e)return s(t);if("string"==typeof t)for(r=_=0,l=(t=t.split(" ")).length;0<=l?_<l:_>l;r=0<=l?++_:--_)"meta"===t[r]&&(t[r]=k);for(h=[],c=0,u=(f=this._registered_combos).length;c<u;c++)null!=(n=f[c])&&(n.is_unordered&&o(t,n.keys)||!n.is_unordered&&i(t,n.keys)?h.push(s(n)):h.push(void 0));return h},t.prototype.unregister_many=function(e){var t,n,o,i;for(i=[],n=0,o=e.length;n<o;n++)t=e[n],i.push(this.unregister_combo(t));return i},t.prototype.get_registered_combos=function(){return this._registered_combos},t.prototype.reset=function(){return this._registered_combos=[]},t.prototype.listen=function(){return this._prevent_capture=!1},t.prototype.stop_listening=function(){return this._prevent_capture=!0},t.prototype.get_meta_key=function(){return k},t}(),_=function(){-1!==navigator.userAgent.indexOf("Mac OS X")&&(k="cmd")},n=function(){-1!==navigator.userAgent.indexOf("Opera")&&(y[17]="cmd")},r=function(e){return y[e]},u=function(e,t){var n;return e.filter?e.filter(t):function(){var o,i,r;for(r=[],o=0,i=e.length;o<i;o++)n=e[o],t(n)&&r.push(n);return r}()},o=function(e,t){var n,o,i;if(e.length!==t.length)return!1;for(o=0,i=e.length;o<i;o++)if(n=e[o],!(q.call(t,n)>=0))return!1;return!0},i=function(e,t){var n,o,i;if(e.length!==t.length)return!1;for(n=o=0,i=e.length;0<=i?o<i:o>i;n=0<=i?++o:--o)if(e[n]!==t[n])return!1;return!0},f=function(e,t){var n,o,i;for(o=0,i=e.length;o<i;o++)if(n=e[o],q.call(t,n)<0)return!1;return!0},l=Array.prototype.indexOf||function(e,t){var n,o,i;for(n=o=0,i=e.length;0<=i?o<=i:o>=i;n=0<=i?++o:--o)if(e[n]===t)return n;return-1},h=function(e,t){var n,o,i,r,s;for(i=0,r=0,s=e.length;r<s;r++){if(o=e[r],!((n=l.call(t,o))>=i))return!1;i=n}return!0},m=function(){if(t.debug)return console.log.apply(console,arguments)},a=function(e){var t,n;for(n in t=!1,y)if(e===y[n]){t=!0;break}if(!t)for(n in d)if(e===d[n]){t=!0;break}return t},b=function(e){var t,n,o,i,r,s,_,u,f,h,y,d,v,b;for(_=!0,e.keys.length||m("You're trying to bind a combo with no keys:",e),n=u=0,v=e.keys.length;0<=v?u<v:u>v;n=0<=v?++u:--u)o=e.keys[n],(t=p[o])&&(o=e.keys[n]=t),"meta"===o&&e.keys.splice(n,1,k),"cmd"===o&&m('Warning: use the "meta" key rather than "cmd" for Windows compatibility');for(f=0,y=(b=e.keys).length;f<y;f++)o=b[f],a(o)||(m('Do not recognize the key "'+o+'"'),_=!1);if(q.call(e.keys,"meta")>=0||q.call(e.keys,"cmd")>=0){for(r=e.keys.slice(),h=0,d=g.length;h<d;h++)i=g[h],(n=l.call(r,i))>-1&&r.splice(n,1);r.length>1&&(m("META and CMD key combos cannot have more than 1 non-modifier keys",e,r),_=!1)}for(s in e)e[s],"undefined"===c[s]&&m("The property "+s+" is not a valid combo property. Your combo has still been registered.");return _},s=function(e,t){var n;return!!t.shiftKey&&(null!=(n=d[e])&&n)},v={cmd:"metaKey",ctrl:"ctrlKey",shift:"shiftKey",alt:"altKey"},p={escape:"esc",control:"ctrl",command:"cmd",break:"pause",windows:"cmd",option:"alt",caps_lock:"caps",apostrophe:"'",semicolon:";",tilde:"~",accent:"`",scroll_lock:"scroll",num_lock:"num"},d={"/":"?",".":">",",":"<","'":'"',";":":","[":"{","]":"}","\\":"|","`":"~","=":"+","-":"_",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")"},y={0:"\\",8:"backspace",9:"tab",12:"num",13:"enter",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"caps",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",44:"print",45:"insert",46:"delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",91:"cmd",92:"cmd",93:"cmd",96:"num_0",97:"num_1",98:"num_2",99:"num_3",100:"num_4",101:"num_5",102:"num_6",103:"num_7",104:"num_8",105:"num_9",106:"num_multiply",107:"num_add",108:"num_enter",109:"num_subtract",110:"num_decimal",111:"num_divide",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",124:"print",144:"num",145:"scroll",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",223:"`",224:"cmd",225:"alt",57392:"ctrl",63289:"num",59:";",61:"=",173:"-"},t._keycode_dictionary=y,t._is_array_in_array_sorted=h,_(),n(),"function"==typeof define&&define.amd?define([],function(){return t}):"undefined"!=typeof exports&&null!==exports?exports.keypress=t:window.keypress=t}).call(this);