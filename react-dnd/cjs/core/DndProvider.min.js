"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DndProvider=void 0;var _jsxRuntime=require("react/jsx-runtime"),_react=require("react"),_dndCore=require("dnd-core"),_DndContext=require("./DndContext");function _slicedToArray(e,r){return _arrayWithHoles(e)||_iterableToArrayLimit(e,r)||_unsupportedIterableToArray(e,r)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,r){if(e){if("string"==typeof e)return _arrayLikeToArray(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(e,r):void 0}}function _arrayLikeToArray(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function _iterableToArrayLimit(e,r){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var t=[],n=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(n=(i=u.next()).done)&&(t.push(i.value),!r||t.length!==r);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==u.return||u.return()}finally{if(o)throw a}}return t}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _objectWithoutProperties(e,r){if(null==e)return{};var t,n=_objectWithoutPropertiesLoose(e,r);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)t=o[a],0<=r.indexOf(t)||Object.prototype.propertyIsEnumerable.call(e,t)&&(n[t]=e[t]);return n}function _objectWithoutPropertiesLoose(e,r){if(null==e)return{};for(var t,n={},o=Object.keys(e),a=0;a<o.length;a++)t=o[a],0<=r.indexOf(t)||(n[t]=e[t]);return n}var refCount=0,INSTANCE_SYM=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__"),DndProvider=(0,_react.memo)(function(e){var r=e.children,t=_slicedToArray(getDndContextValue(_objectWithoutProperties(e,["children"])),2),e=t[0],n=t[1];return(0,_react.useEffect)(function(){if(n){var e=getGlobalContext();return++refCount,function(){0==--refCount&&(e[INSTANCE_SYM]=null)}}},[]),(0,_jsxRuntime.jsx)(_DndContext.DndContext.Provider,Object.assign({value:e},{children:r}),void 0)});function getDndContextValue(e){return"manager"in e?[{dragDropManager:e.manager},!1]:[createSingletonDndContext(e.backend,e.context,e.options,e.debugMode),!e.context]}function createSingletonDndContext(e){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:getGlobalContext(),t=2<arguments.length?arguments[2]:void 0,n=3<arguments.length?arguments[3]:void 0,o=r;return o[INSTANCE_SYM]||(o[INSTANCE_SYM]={dragDropManager:(0,_dndCore.createDragDropManager)(e,r,t,n)}),o[INSTANCE_SYM]}function getGlobalContext(){return"undefined"!=typeof global?global:window}exports.DndProvider=DndProvider;