"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SerialDisposable=exports.CompositeDisposable=exports.Disposable=void 0;var _js_utils=require("../utils/js_utils");function _classCallCheck(s,e){if(!(s instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(s,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(s,o.key,o)}}function _createClass(s,e,i){return e&&_defineProperties(s.prototype,e),i&&_defineProperties(s,i),s}var Disposable=function(){var s=function(){function e(s){_classCallCheck(this,e),this.isDisposed=!1,this.action=(0,_js_utils.isFunction)(s)?s:_js_utils.noop}return _createClass(e,[{key:"dispose",value:function(){this.isDisposed||(this.action(),this.isDisposed=!0)}}],[{key:"isDisposable",value:function(s){return Boolean(s&&(0,_js_utils.isFunction)(s.dispose))}},{key:"_fixup",value:function(s){return e.isDisposable(s)?s:e.empty}},{key:"create",value:function(s){return new e(s)}}]),e}();return s.empty={dispose:_js_utils.noop},s}();exports.Disposable=Disposable;var CompositeDisposable=function(){function o(){_classCallCheck(this,o),this.isDisposed=!1;for(var s=arguments.length,e=new Array(s),i=0;i<s;i++)e[i]=arguments[i];this.disposables=e}return _createClass(o,[{key:"add",value:function(s){this.isDisposed?s.dispose():this.disposables.push(s)}},{key:"remove",value:function(s){var e,i=!1;return this.isDisposed||-1!==(e=this.disposables.indexOf(s))&&(i=!0,this.disposables.splice(e,1),s.dispose()),i}},{key:"clear",value:function(){if(!this.isDisposed){for(var s=this.disposables.length,e=new Array(s),i=0;i<s;i++)e[i]=this.disposables[i];this.disposables=[];for(var o=0;o<s;o++)e[o].dispose()}}},{key:"dispose",value:function(){if(!this.isDisposed){this.isDisposed=!0;for(var s=this.disposables.length,e=new Array(s),i=0;i<s;i++)e[i]=this.disposables[i];this.disposables=[];for(var o=0;o<s;o++)e[o].dispose()}}}]),o}();exports.CompositeDisposable=CompositeDisposable;var SerialDisposable=function(){function s(){_classCallCheck(this,s),this.isDisposed=!1}return _createClass(s,[{key:"getDisposable",value:function(){return this.current}},{key:"setDisposable",value:function(s){var e,i=this.isDisposed;i||(e=this.current,this.current=s,e&&e.dispose()),i&&s&&s.dispose()}},{key:"dispose",value:function(){var s;this.isDisposed||(this.isDisposed=!0,s=this.current,this.current=void 0,s&&s.dispose())}}]),s}();exports.SerialDisposable=SerialDisposable;