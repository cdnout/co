"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createSourceFactory=createSourceFactory;var _invariant=require("@react-dnd/invariant"),_js_utils=require("../utils/js_utils"),_utils=require("./utils");function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}var ALLOWED_SPEC_METHODS=["canDrag","beginDrag","isDragging","endDrag"],REQUIRED_SPEC_METHODS=["beginDrag"],SourceImpl=function(){function n(e,t,i){var r=this;_classCallCheck(this,n),this.props=null,this.beginDrag=function(){if(r.props){var e=r.spec.beginDrag(r.props,r.monitor,r.ref.current);return"production"!==process.env.NODE_ENV&&(0,_invariant.invariant)((0,_js_utils.isPlainObject)(e),"beginDrag() must return a plain object that represents the dragged item. Instead received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source",e),e}},this.spec=e,this.monitor=t,this.ref=i}return _createClass(n,[{key:"receiveProps",value:function(e){this.props=e}},{key:"canDrag",value:function(){return!!this.props&&(!this.spec.canDrag||this.spec.canDrag(this.props,this.monitor))}},{key:"isDragging",value:function(e,t){return!!this.props&&(this.spec.isDragging?this.spec.isDragging(this.props,this.monitor):t===e.getSourceId())}},{key:"endDrag",value:function(){this.props&&this.spec.endDrag&&this.spec.endDrag(this.props,this.monitor,(0,_utils.getDecoratedComponent)(this.ref))}}]),n}();function createSourceFactory(i){return Object.keys(i).forEach(function(e){(0,_invariant.invariant)(-1<ALLOWED_SPEC_METHODS.indexOf(e),'Expected the drag source specification to only have some of the following keys: %s. Instead received a specification with an unexpected "%s" key. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source',ALLOWED_SPEC_METHODS.join(", "),e),(0,_invariant.invariant)("function"==typeof i[e],"Expected %s in the drag source specification to be a function. Instead received a specification with %s: %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source",e,e,i[e])}),REQUIRED_SPEC_METHODS.forEach(function(e){(0,_invariant.invariant)("function"==typeof i[e],"Expected %s in the drag source specification to be a function. Instead received a specification with %s: %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source",e,e,i[e])}),function(e,t){return new SourceImpl(i,e,t)}}