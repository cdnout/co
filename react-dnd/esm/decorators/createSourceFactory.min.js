function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}import{invariant}from"@react-dnd/invariant";import{isPlainObject,getDecoratedComponent}from"./utils";var ALLOWED_SPEC_METHODS=["canDrag","beginDrag","isDragging","endDrag"],REQUIRED_SPEC_METHODS=["beginDrag"],SourceImpl=function(){function e(t,i,r){var n=this;_classCallCheck(this,e),this.props=null,this.beginDrag=function(){if(n.props){var e=n.spec.beginDrag(n.props,n.monitor,n.ref.current);return"production"!==process.env.NODE_ENV&&invariant(isPlainObject(e),"beginDrag() must return a plain object that represents the dragged item. Instead received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source",e),e}},this.spec=t,this.monitor=i,this.ref=r}return _createClass(e,[{key:"receiveProps",value:function(e){this.props=e}},{key:"canDrag",value:function(){return!!this.props&&(!this.spec.canDrag||this.spec.canDrag(this.props,this.monitor))}},{key:"isDragging",value:function(e,t){return!!this.props&&(this.spec.isDragging?this.spec.isDragging(this.props,this.monitor):t===e.getSourceId())}},{key:"endDrag",value:function(){this.props&&this.spec.endDrag&&this.spec.endDrag(this.props,this.monitor,getDecoratedComponent(this.ref))}}]),e}();export function createSourceFactory(e){return Object.keys(e).forEach(function(t){invariant(ALLOWED_SPEC_METHODS.indexOf(t)>-1,'Expected the drag source specification to only have some of the following keys: %s. Instead received a specification with an unexpected "%s" key. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source',ALLOWED_SPEC_METHODS.join(", "),t),invariant("function"==typeof e[t],"Expected %s in the drag source specification to be a function. Instead received a specification with %s: %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source",t,t,e[t])}),REQUIRED_SPEC_METHODS.forEach(function(t){invariant("function"==typeof e[t],"Expected %s in the drag source specification to be a function. Instead received a specification with %s: %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source",t,t,e[t])}),function(t,i){return new SourceImpl(e,t,i)}};