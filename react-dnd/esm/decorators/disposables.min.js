function _classCallCheck(s,e){if(!(s instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(s,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(s,o.key,o)}}function _createClass(s,e,i){return e&&_defineProperties(s.prototype,e),i&&_defineProperties(s,i),s}import{isFunction,noop}from"./utils";export var Disposable=function(){function s(e){_classCallCheck(this,s),this.isDisposed=!1,this.action=isFunction(e)?e:noop}return _createClass(s,[{key:"dispose",value:function(){this.isDisposed||(this.action(),this.isDisposed=!0)}}],[{key:"isDisposable",value:function(s){return Boolean(s&&isFunction(s.dispose))}},{key:"_fixup",value:function(e){return s.isDisposable(e)?e:s.empty}},{key:"create",value:function(e){return new s(e)}}]),s}();Disposable.empty={dispose:noop};export var CompositeDisposable=function(){function s(){_classCallCheck(this,s),this.isDisposed=!1;for(var e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];this.disposables=i}return _createClass(s,[{key:"add",value:function(s){this.isDisposed?s.dispose():this.disposables.push(s)}},{key:"remove",value:function(s){var e=!1;if(!this.isDisposed){var i=this.disposables.indexOf(s);-1!==i&&(e=!0,this.disposables.splice(i,1),s.dispose())}return e}},{key:"clear",value:function(){if(!this.isDisposed){for(var s=this.disposables.length,e=new Array(s),i=0;i<s;i++)e[i]=this.disposables[i];this.disposables=[];for(var o=0;o<s;o++)e[o].dispose()}}},{key:"dispose",value:function(){if(!this.isDisposed){this.isDisposed=!0;for(var s=this.disposables.length,e=new Array(s),i=0;i<s;i++)e[i]=this.disposables[i];this.disposables=[];for(var o=0;o<s;o++)e[o].dispose()}}}]),s}();export var SerialDisposable=function(){function s(){_classCallCheck(this,s),this.isDisposed=!1}return _createClass(s,[{key:"getDisposable",value:function(){return this.current}},{key:"setDisposable",value:function(s){var e=this.isDisposed;if(!e){var i=this.current;this.current=s,i&&i.dispose()}e&&s&&s.dispose()}},{key:"dispose",value:function(){if(!this.isDisposed){this.isDisposed=!0;var s=this.current;this.current=void 0,s&&s.dispose()}}}]),s}();