"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(e,i,o){function a(t){for(var n,e=i.querySelectorAll("[data-panel-id], [data-panel-close]");t&&t!==i;t=t.parentNode)for(n=e.length;n--;)if(e[n]===t)return t}function r(t){for(;t&&t!==i;t=t.parentNode)if(t.classList.contains("dialog")||t.classList.contains("backdrop-dialog")||t.classList.contains("popover")||t.classList.contains("backdrop-popover"))return!0;return!1}var s=[],c=function(t){for(var n=s.length,e=0;e<n;e++)if(s[e].panel.getAttribute("id")===t){var o=s[e];return o.index=e,o}return null},l=function(t){for(var n,e=i.querySelectorAll(".panel, .panel-full");t&&t!==i;t=t.parentNode)for(n=e.length;n--;)if(e[n]===t&&t.classList.contains("active"))return t};function f(){i.body.removeChild(this);var t=c(this.getAttribute("data-backdrop-for"));s.splice(t.index,1),this.off(o.event.transitionEnd,f,!1)}function d(t){if(!t.classList.contains("active")){t.style.display="block",e.setTimeout(function(){t.classList.add("active")},10);var n=function(t){var n=i.createElement("div");return n.classList.add("backdrop-panel"),n.setAttribute("data-backdrop-for",t),n}(t.getAttribute("id"));i.body.appendChild(n),s.push({panel:t,backdrop:n})}}function p(n){if(n.classList.contains("active")){n.classList.remove("active"),n.classList.add("panel-closing");n.on(o.event.transitionEnd,function t(){n.classList.remove("panel-closing"),n.style.display="none",n.off(o.event.transitionEnd,t)});var t=c(n.getAttribute("id"));t&&(t.backdrop.classList.add("fadeout"),t.backdrop.on(o.event.transitionEnd,f,!1))}}i.on(o.event.start,function(t){if(!((t=t.originalEvent||t).target.classList.contains("notification")||t.parentNode&&t.target.parentNode.classList.contains("notification"))&&!r(t.target)&&0<s.length){var n=s[s.length-1].panel,e=l(t.target);e||p(n),e&&e!==n&&e.id!==n.id&&p(n)}}),i.on(o.event.tap,function(t){if(!(t.target.classList.contains("notification")||t.parentNode&&t.target.parentNode.classList.contains("notification")||r(t.target))){var n=a(t.target),e=null;if(n&&(e=function(t){var n=a(t.target);if(n){var e=n.getAttribute("data-panel-id");return e?i.querySelector("#".concat(e)):l(t.target)}}(t))&&(e.classList.contains("active")?p(e):d(e)),!(e=l(t.target))&&!n&&0<s.length){var o=s[s.length-1].panel;l(t.target);p(o)}}}),o.panel=function(t){var n="string"==typeof t?i.querySelector(t):t;if(null===n)throw new Error("The panel with ID ".concat(t," does not exist"));return{open:function(){d(n)},close:function(){p(n)}}},o.panelUtil={closeActive:function(){var t=0<s.length;return t&&p(s[s.length-1].panel),t}},e.phonon=o,"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=o.panel:"function"==typeof define&&define.amd&&define(function(){return o.panel})}(window,document,window.phonon||{});