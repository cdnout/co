"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(r,o){var a=[],c=null;function i(t){for(var e,n=document.querySelectorAll("[data-dialog-id], [data-dialog-close]");t&&t!==document;t=t.parentNode)for(e=n.length;e--;)if(n[e]===t)return t}function l(t,e,n,o,i,r){e="string"==typeof e?"<p>".concat(e,"</p>"):"";var a=_typeof(n);n="string"===a?n:t,o="boolean"!=typeof o||o,i="string"==typeof i?i:"Ok",r="string"==typeof r?r:"Cancel";var c="auto-gen-".concat(t,"-").concat(g++),l=document.createElement("div");l.setAttribute("class","dialog"),l.setAttribute("data-cancelable",o),l.setAttribute("data-auto","true"),l.id=c;var d=void 0===a?"":"<h3>".concat(n,"</h3>"),u='<li><a class="btn btn-flat btn-cancel" data-dialog-close="true">'.concat(r,"</a></li>"),s="",f="";"alert"===t?u="":"prompt"===t?s='<input type="text" placeholder="">':"passPrompt"===t?s='<input type="password" placeholder="Password">':"indicator"===t&&(e="",f='<div class="circle-progress active padded-bottom"><div class="spinner"></div></div>');var p="indicator"===t?"":'<ul class="buttons">'.concat(u,'<li><a class="btn btn-flat primary btn-confirm" data-dialog-close="true">').concat(i,"</a></li>")+"</ul>",v="".concat('<div class="content"><div class="padded-full">').concat(d).concat(e).concat(s).concat(f,"</div>")+"</div>".concat(p);return l.innerHTML=v,document.body.appendChild(l),l}var d=function(t){for(var e,n=document.querySelectorAll(".dialog");t&&t!==document;t=t.parentNode)for(e=n.length;e--;)if(n[e]===t&&t.classList.contains("active"))return t},u=function(t){for(var e=a.length-1;0<=e;e--)if(a[e].dialog.id===t){var n=a[e];return n.index=e,n}return!1},g=0;function s(){var t=u(this.getAttribute("data-id")),e=t.backdrop;e.classList.remove("fadeout"),document.body.removeChild(e);var n=t.dialog;n.style.visibility="hidden",n.style.display="none",n.classList.remove("close"),n.getAttribute("data-auto")&&document.body.removeChild(n),a.splice(t.index,1),this.off(o.event.transitionEnd,s,!1)}function f(t){if(t.style.visibility="visible",t.style.display="block",!t.classList.contains("active")){!function(t){var e=getComputedStyle(t),n=e.width,o=e.height;n=n.slice(0,n.length-2),o=o.slice(0,o.length-2);var i=r.innerHeight/2-o/2;t.style.top="".concat(i,"px")}(t),t.classList.add("active");var e=t.querySelector(".circle-progress");e&&o.preloader(e).show();var n=function(t){var e=document.createElement("div");return e.setAttribute("data-id",t),e.classList.add("backdrop-dialog"),e}(t.id);a.push({dialog:t,backdrop:n}),document.body.appendChild(n)}}function p(t){if(function(t){if("function"!=typeof c)return;var e=t.querySelectorAll(".btn-confirm, .btn-cancel");if(e)for(var n=0,o=e.length;n<o;n++)e[n].off("tap",c)}(t),t.classList.contains("active")){t.classList.remove("active"),t.classList.add("close");var e=t.querySelector(".circle-progress");e&&o.preloader(e).hide();var n=u(t.id).backdrop;n.on(o.event.transitionEnd,s,!1),r.setTimeout(function(){n.classList.add("fadeout")},1)}}function v(n,t,o){if(c=function(){var t,e=n.querySelector("input");e&&(t=e.value),o(t)},"confirm"===t){var e=n.querySelector(".btn-confirm");e&&(e.fireConfirm=c,e.on("tap",c))}else{!function(t,e){for(var n=0;n<a.length;n++)if(a[n].dialog===t){a[n].cancelCallback=e;break}}(n,o);var i=n.querySelector(".btn-cancel");i&&i.on("tap",c)}}document.on(o.event.start,function(t){if(0<a.length){var e=a[a.length-1],n=d(t.target);n||"false"!==e.dialog.getAttribute("data-cancelable")&&(p(e.dialog),"function"==typeof e.cancelCallback&&e.cancelCallback()),n&&n!==e.dialog&&n.id!==e.dialog.id&&p(e.dialog)}}),document.on("tap",function(t){var e=i(t.target),n=null;e&&(n=function(t){var e=i(t.target);if(e){var n=e.getAttribute("data-dialog-id");return n?document.querySelector("#".concat(n)):d(t.target)}}(t),e,n&&(n.classList.contains("active")?p(n):f(n)))}),document.on("keypress",function(t){if(0<a.length&&(13==t.which||13==t.keyCode)){var e=a[a.length-1],n=e.dialog.querySelector(".btn-confirm");return n&&void 0!==n.fireConfirm&&n.fireConfirm(),p(e.dialog),!1}return!0}),o.dialog=function(t){if(void 0===t)return{alert:function(t,e,n,o){var i=l("alert",t,e,n,o);return f(i),{on:function(t,e){v(i,t,e)}}},confirm:function(t,e,n,o,i){var r=l("confirm",t,e,n,o,i);return f(r),{on:function(t,e){v(r,t,e)}}},prompt:function(t,e,n,o,i){var r=l("prompt",t,e,n,o,i);return f(r),{on:function(t,e){v(r,t,e)}}},passPrompt:function(t,e,n,o,i){var r=l("passPrompt",t,e,n,o,i);return f(r),{on:function(t,e){v(r,t,e)}}},indicator:function(t,e){var n=l("indicator","",t,e);return f(n),{on:function(t,e){return v(n,t,e),this},open:function(){return f(n),this},close:function(){return p(n),this}}}};var n="string"==typeof t?document.querySelector(t):t;if(null===n)throw new Error("The following element ".concat(t," does not exists"));return{open:function(){return f(n),this},close:function(){return p(n),this},on:function(t,e){return v(n,t,e),this},isActive:function(){return!!n.classList.contains("active")}}},o.dialogUtil={closeActive:function(){var t=0<a.length;if(t){var e=a[a.length-1].dialog;"false"!==e.getAttribute("data-cancelable")&&p(e)}return t}},r.phonon=o,"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=o.dialog:"function"==typeof define&&define.amd&&define(function(){return o.dialog})}("undefined"!=typeof window?window:void 0,window.phonon||{});