!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("preact")):"function"==typeof define&&define.amd?define(["exports","preact"],t):t(n.unistore={},n.preact)}(this,function(n,t){function e(n,t){for(var e in t)n[e]=t[e];return n}function r(n){this.getChildContext=function(){return{store:n.store}}}r.prototype.render=function(n){return n.children&&n.children[0]||n.children},n.createStore=function(n){var t=[];function r(n){for(var e=[],r=0;r<t.length;r++)t[r]===n?n=null:e.push(t[r]);t=e}function o(r,o,i){n=o?r:e(e({},n),r);for(var u=t,c=0;c<u.length;c++)u[c](n,i)}return n=n||{},{action:function(t){function e(n){o(n,!1,t)}return function(){for(var r=arguments,o=[n],i=0;i<arguments.length;i++)o.push(r[i]);var u=t.apply(this,o);if(null!=u)return u.then?u.then(e):e(u)}},setState:o,subscribe:function(n){return t.push(n),function(){r(n)}},unsubscribe:r,getState:function(){return n}}},n.Provider=r,n.connect=function(n,r){var o;return"function"!=typeof n&&("string"==typeof(o=n||{})&&(o=o.split(/\s*,\s*/)),n=function(n){for(var t={},e=0;e<o.length;e++)t[o[e]]=n[o[e]];return t}),function(o){function i(i,u){var c=this,f=u.store,s=n(f?f.getState():{},i),a=r?function(n,t){"function"==typeof n&&(n=n(t));var e={};for(var r in n)e[r]=t.action(n[r]);return e}(r,f):{store:f},p=function(){var t=n(f?f.getState():{},i);for(var e in t)if(t[e]!==s[e])return s=t,c.setState({});for(var r in s)if(!(r in t))return s=t,c.setState({})};this.componentWillReceiveProps=function(n){i=n,p()},this.componentDidMount=function(){f.subscribe(p)},this.componentWillUnmount=function(){f.unsubscribe(p)},this.render=function(n){return t.h(o,e(e(e({},a),n),s))}}return(i.prototype=new t.Component).constructor=i}}});
//# sourceMappingURL=preact.umd.js.map
