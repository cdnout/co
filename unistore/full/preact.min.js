var n=require("preact");function t(t,n){for(var r in n)t[r]=n[r];return t}function r(t){this.getChildContext=function(){return{store:t.store}}}r.prototype.render=function(t){return t.children&&t.children[0]||t.children},exports.createStore=function(u){var c=[];function n(t){for(var n=[],r=0;r<c.length;r++)c[r]===t?t=null:n.push(c[r]);c=n}function r(n,r,e){u=r?n:t(t({},u),n);for(var o=c,i=0;i<o.length;i++)o[i](u,e)}return u=u||{},{action:function(o){function i(t){r(t,!1,o)}return function(){for(var t=arguments,n=[u],r=0;r<arguments.length;r++)n.push(t[r]);var e=o.apply(this,n);if(null!=e)return e.then?e.then(i):i(e)}},setState:r,subscribe:function(t){return c.push(t),function(){n(t)}},unsubscribe:n,getState:function(){return u}}},exports.Provider=r,exports.connect=function(a,p){var e;return"function"!=typeof a&&("string"==typeof(e=a||{})&&(e=e.split(/\s*,\s*/)),a=function(t){for(var n={},r=0;r<e.length;r++)n[e[r]]=t[e[r]];return n}),function(s){function r(e,r){function o(){var t=a(u?u.getState():{},e);for(var n in t)if(t[n]!==c[n])return c=t,i.setState({});for(var r in c)if(!(r in t))return c=t,i.setState({})}var i=this,u=r.store,c=a(u?u.getState():{},e),f=p?function(t,n){"function"==typeof t&&(t=t(n));var r={};for(var e in t)r[e]=n.action(t[e]);return r}(p,u):{store:u};this.componentWillReceiveProps=function(t){e=t,o()},this.componentDidMount=function(){u.subscribe(o)},this.componentWillUnmount=function(){u.unsubscribe(o)},this.render=function(r){return n.h(s,t(t(t({},f),r),c))}}return(r.prototype=new n.Component).constructor=r}};