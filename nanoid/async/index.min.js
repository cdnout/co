import crypto from"crypto";import{urlAlphabet}from"../url-alphabet/index.js";let random=r=>new Promise((t,e)=>{crypto.randomFill(Buffer.allocUnsafe(r),(r,l)=>{r?e(r):t(l)})}),customAlphabet=(r,t)=>{let e=(2<<31-Math.clz32(r.length-1|1))-1,l=Math.ceil(1.6*e*t/r.length),n=o=>random(l).then(a=>{let h=l;for(;h--;)if((o+=r[a[h]&e]||"").length===t)return o;return n(o)});return()=>n("")},nanoid=(r=21)=>random(r).then(t=>{let e="";for(;r--;)e+=urlAlphabet[63&t[r]];return e});export{nanoid,customAlphabet,random};