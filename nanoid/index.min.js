import crypto from"crypto";import{urlAlphabet}from"./url-alphabet/index.js";const POOL_SIZE_MULTIPLIER=32;let pool,poolOffset,random=o=>{!pool||pool.length<o?(pool=Buffer.allocUnsafe(32*o),crypto.randomFillSync(pool),poolOffset=0):poolOffset+o>pool.length&&(crypto.randomFillSync(pool),poolOffset=0);let l=pool.subarray(poolOffset,poolOffset+o);return poolOffset+=o,l},customRandom=(o,l,t)=>{let e=(2<<31-Math.clz32(o.length-1|1))-1,r=Math.ceil(1.6*e*l/o.length);return()=>{let p="";for(;;){let n=t(r),a=r;for(;a--;)if((p+=o[n[a]&e]||"").length===l)return p}}},customAlphabet=(o,l)=>customRandom(o,l,random),nanoid=(o=21)=>{let l=random(o),t="";for(;o--;)t+=urlAlphabet[63&l[o]];return t};export{nanoid,customAlphabet,customRandom,urlAlphabet,random};