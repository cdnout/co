!function(e){"use strict";"function"==typeof define&&define.amd?define(["./load-image"],e):"object"==typeof module&&module.exports?e(require("./load-image")):e(window.loadImage)}(function(e){"use strict";var u=e.global;u.fetch&&u.Request&&u.Response&&u.Response.prototype.blob?e.fetchBlob=function(e,t,n){function o(e){return e.blob()}if(u.Promise&&"function"!=typeof t)return fetch(new Request(e,t)).then(o);fetch(new Request(e,n)).then(o).then(t).catch(function(e){t(null,e)})}:u.XMLHttpRequest&&""===(new XMLHttpRequest).responseType&&(e.fetchBlob=function(e,t,s){function n(t,n){s=s||{};var o=new XMLHttpRequest;o.open(s.method||"GET",e),s.headers&&Object.keys(s.headers).forEach(function(e){o.setRequestHeader(e,s.headers[e])}),o.withCredentials="include"===s.credentials,o.responseType="blob",o.onload=function(){t(o.response)},o.onerror=o.onabort=o.ontimeout=function(e){t===n?n(null,e):n(e)},o.send(s.body)}return u.Promise&&"function"!=typeof t?(s=t,new Promise(n)):n(t,t)})});