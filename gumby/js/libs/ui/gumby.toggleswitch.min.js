!function(t){"use strict";function s(s){this.$el=t(s),this.targets=[],this.on="",this.className="",this.self=!1,this.$el.length&&(Gumby.debug("Initializing Toggle",s),this.init())}function i(s){this.$el=t(s),this.targets=[],this.on="",this.className="",this.self=!1,this.$el.length&&(Gumby.debug("Initializing Switch",s),this.init())}s.prototype.init=function(){var t=this;this.setup(),this.$el.on(this.on,function(s){s.preventDefault(),t.trigger(t.triggered)}).on("gumby.trigger",function(){Gumby.debug("Trigger event triggered",t.$el),t.trigger(t.triggered)}).on("gumby.initialize",function(){Gumby.debug("Re-initializing "+t.constructor,$el),t.setup()})},s.prototype.setup=function(){this.targets=this.parseTargets(),this.on=Gumby.selectAttr.apply(this.$el,["on"])||Gumby.click,this.className=Gumby.selectAttr.apply(this.$el,["classname"])||"active",this.self="false"===Gumby.selectAttr.apply(this.$el,["self"])},s.prototype.parseTargets=function(){var s=Gumby.selectAttr.apply(this.$el,["trigger"]),i=0,e=[];return s?(i=s.indexOf("|"),-1===i?this.checkTargets([s])?[t(s)]:!1:(e=s.split("|"),this.checkTargets(e)?e.length>1?[t(e[0]),t(e[1])]:[t(e[0])]:!1)):!1},s.prototype.checkTargets=function(s){var i=0;for(i;i<s.length;i++)if(s[i]&&!t(s[i]).length)return Gumby.error("Cannot find "+this.constructor.name+" target: "+s[i]),!1;return!0},s.prototype.triggered=function(){Gumby.debug("Triggering onTrigger event",this.$el),this.$el.trigger("gumby.onTrigger",[this.$el.hasClass(this.className)])},i.prototype=new s,i.prototype.constructor=i,s.prototype.trigger=function(t){Gumby.debug("Triggering Toggle",this.$el);var s;this.targets?1==this.targets.length?this.$el.add(this.targets[0]).toggleClass(this.className):this.targets.length>1&&(this.targets[0].hasClass(this.className)?(s=this.targets[0],this.self||(s=s.add(this.$el)),s.removeClass(this.className),this.targets[1].addClass(this.className)):(s=this.targets[0],this.self||(s=s.add(this.$el)),s.addClass(this.className),this.targets[1].removeClass(this.className))):this.$el.toggleClass(this.className),t&&"function"==typeof t&&t.apply(this)},i.prototype.trigger=function(t){Gumby.debug("Triggering Switch",this.$el);var s;this.targets?1==this.targets.length?(s=this.targets[0],this.self||(s=s.add(this.$el)),s.addClass(this.className)):this.targets.length>1&&(s=this.targets[0],this.self||(s=s.add(this.$el)),s.addClass(this.className),this.targets[1].removeClass(this.className)):this.$el.addClass(this.className),t&&"function"==typeof t&&t.apply(this)},Gumby.addInitalisation("toggles",function(i){t(".toggle").each(function(){var e=t(this);return e.data("isToggle")&&!i?!0:(e.data("isToggle")&&i&&e.trigger("gumby.initialize"),e.data("isToggle",!0),void new s(e))})}),Gumby.addInitalisation("switches",function(s){t(".switch").each(function(){var e=t(this);return e.data("isSwitch")&&!s?!0:e.data("isSwitch")&&s?(e.trigger("gumby.initialize"),!0):(e.data("isSwitch",!0),void new i(e))})}),Gumby.UIModule({module:"toggleswitch",events:["initialize","trigger","onTrigger"],init:function(){Gumby.initialize("switches"),Gumby.initialize("toggles")}})}(jQuery);