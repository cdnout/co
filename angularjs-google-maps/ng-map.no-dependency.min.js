!function(e){"object"==typeof exports?module.exports=e():"function"==typeof define&&define.amd?define([],e):e()}(function(){return angular.module("ngMap",[]),function(){"use strict";function e(y,h,b,O,e,t,M,w,L){A=t;var k=this,$=e.startSymbol(),C=e.endSymbol();k.mapOptions,k.mapEvents,k.eventListeners,k.addObject=function(e,t){var n;k.map&&(k.map[e]=k.map[e]||{},n=Object.keys(k.map[e]).length,k.map[e][t.id||n]=t,k.map instanceof google.maps.Map&&("infoWindows"!=e&&t.setMap&&t.setMap&&t.setMap(k.map),t.centered&&t.position&&k.map.setCenter(t.position),"markers"==e&&k.objectChanged("markers"),"customMarkers"==e&&k.objectChanged("customMarkers")))},k.deleteObject=function(e,t){if(t.map){var n=t.map[e];for(var o in n)n[o]===t&&(google.maps.event.clearInstanceListeners(t),delete n[o]);t.map&&t.setMap&&t.setMap(null),"markers"==e&&k.objectChanged("markers"),"customMarkers"==e&&k.objectChanged("customMarkers")}},k.observeAttrSetObj=function(e,t,n){if(t.noWatcher)return!1;for(var o=A.getAttrsToObserve(e),r=0;r<o.length;r++){var a=o[r];t.$observe(a,M.observeAndSet(a,n))}},k.zoomToIncludeMarkers=function(){if(null!=k.map.markers&&0<Object.keys(k.map.markers).length||null!=k.map.customMarkers&&0<Object.keys(k.map.customMarkers).length){var e=new google.maps.LatLngBounds;for(var t in k.map.markers)e.extend(k.map.markers[t].getPosition());for(var n in k.map.customMarkers)e.extend(k.map.customMarkers[n].getPosition());k.mapOptions.maximumZoom&&(k.enableMaximumZoomCheck=!0),k.map.fitBounds(e)}},k.objectChanged=function(e){!k.map||"markers"!=e&&"customMarkers"!=e||"auto"!=k.map.zoomToIncludeMarkers||k.zoomToIncludeMarkers()},k.initializeMap=function(){var n=k.mapOptions,e=k.mapEvents,t=k.map;if(k.map=w.getMapInstance(h[0]),M.setStyle(h[0]),t){var o=A.filter(b),r=A.getOptions(o),a=A.getControlOptions(o),n=angular.extend(r,a);for(var i in t){var s=t[i];if("object"==typeof s)for(var p in s)k.addObject(i,s[p])}k.map.showInfoWindow=k.showInfoWindow,k.map.hideInfoWindow=k.hideInfoWindow}n.zoom=n.zoom&&!isNaN(n.zoom)?+n.zoom:15;var c,l,u,g=n.center,d=new RegExp(L($)+".*"+L(C));for(var m in!n.center||"string"==typeof g&&g.match(d)?n.center=new google.maps.LatLng(0,0):"string"==typeof g&&g.match(/^[0-9.-]*,[0-9.-]*$/)?(c=parseFloat(g.split(",")[0]),l=parseFloat(g.split(",")[1]),n.center=new google.maps.LatLng(c,l)):g instanceof google.maps.LatLng||(u=n.center,delete n.center,M.getGeoLocation(u,n.geoLocationOptions).then(function(e){k.map.setCenter(e);var t=n.geoCallback;t&&O(t)(y)},function(){n.geoFallbackCenter&&k.map.setCenter(n.geoFallbackCenter)})),k.map.setOptions(n),e){var f=e[m],v=google.maps.event.addListener(k.map,m,f);k.eventListeners[m]=v}k.observeAttrSetObj(j,b,k.map),k.singleInfoWindow=n.singleInfoWindow,google.maps.event.trigger(k.map,"resize"),google.maps.event.addListenerOnce(k.map,"idle",function(){M.addMap(k),n.zoomToIncludeMarkers&&k.zoomToIncludeMarkers(),y.map=k.map,y.$emit("mapInitialized",k.map),b.mapInitialized&&O(b.mapInitialized)(y,{map:k.map})}),n.zoomToIncludeMarkers&&n.maximumZoom&&google.maps.event.addListener(k.map,"zoom_changed",function(){1==k.enableMaximumZoomCheck&&(k.enableMaximumZoomCheck=!1,google.maps.event.addListenerOnce(k.map,"bounds_changed",function(){k.map.setZoom(Math.min(n.maximumZoom,k.map.getZoom()))}))})},y.google=google;var n,o,j=A.orgAttributes(h),r=A.filter(b),a=A.getOptions(r,{scope:y}),i=A.getControlOptions(r),s=angular.extend(a,i),p=A.getEvents(y,r);Object.keys(p).length,k.mapOptions=s,k.mapEvents=p,k.eventListeners={},a.lazyInit?(o=b.id&&0===b.id.indexOf($,0)&&-1!==b.id.indexOf(C,b.id.length-C.length)?(n=b.id.slice(2,-2),O(n)(y)):b.id,k.map={id:o},M.addMap(k)):k.initializeMap(),a.triggerResize&&google.maps.event.trigger(k.map,"resize"),h.bind("$destroy",function(){w.returnMapInstance(k.map),M.deleteMap(k)})}var A;e.$inject=["$scope","$element","$attrs","$parse","$interpolate","Attr2MapOptions","NgMap","NgMapPool","escapeRegexpFilter"],angular.module("ngMap").controller("__MapController",e)}(),function(){"use strict";function t(e,t,n,o){o=o[0]||o[1];var r=c.orgAttributes(t),a=c.filter(n),i=c.getOptions(a,{scope:e}),s=c.getEvents(e,a),p=l(i,s);o.addObject("bicyclingLayers",p),o.observeAttrSetObj(r,n,p),t.bind("$destroy",function(){o.deleteObject("bicyclingLayers",p)})}function e(e){return c=e,{restrict:"E",require:["?^map","?^ngMap"],link:t}}var c,l=function(e,t){var n=new google.maps.BicyclingLayer(e);for(var o in t)google.maps.event.addListener(n,o,t[o]);return n};e.$inject=["Attr2MapOptions"],angular.module("ngMap").directive("bicyclingLayer",e)}(),function(){"use strict";function n(e,t,n,o,r){o=o[0]||o[1];var a=g.filter(n),i=g.getOptions(a,{scope:e}),s=g.getEvents(e,a),p=e.$new(),c=t[0].parentElement.removeChild(t[0]);for(var l in r(p,function(e){t.empty(),t.append(e),t.on("$destroy",function(){p.$destroy()})}),s)google.maps.event.addDomListener(c,l,s[l]);o.addObject("customControls",c);var u=i.position;o.map.controls[google.maps.ControlPosition[u]].push(c),t.bind("$destroy",function(){o.deleteObject("customControls",c)})}function e(e,t){return g=e,{restrict:"E",require:["?^map","?^ngMap"],link:n,transclude:!0}}var g;e.$inject=["Attr2MapOptions","NgMap"],angular.module("ngMap").directive("customControl",e)}(),function(){"use strict";function g(e){for(var t in e=e||{},this.el=document.createElement("div"),this.el.style.display="block",this.el.style.visibility="hidden",this.visible=!0,e)this[t]=e[t]}function e(e,t,n,o,r,a){d=o,c=e,m=t,f=r;var i=n.startSymbol(),s=n.endSymbol(),p=new RegExp(a(i)+"([^"+s.substring(0,1)+"]+)"+a(s),"g");return{restrict:"E",require:["?^map","?^ngMap"],compile:function(e){(g.prototype=new google.maps.OverlayView).setContent=function(e,t){this.el.innerHTML=e,this.el.style.position="absolute",this.el.style.top=0,this.el.style.left=0,t&&m(angular.element(this.el).contents())(t)},g.prototype.getDraggable=function(){return this.draggable},g.prototype.setDraggable=function(e){this.draggable=e},g.prototype.getPosition=function(){return this.position},g.prototype.setPosition=function(e){e&&(this.position=e);var t,o=this;this.getProjection()&&"function"==typeof this.position.lng&&(t=function(){var e,t,n;o.getProjection()&&(e=o.getProjection().fromLatLngToDivPixel(o.position),t=Math.round(e.x-o.el.offsetWidth/2),n=Math.round(e.y-o.el.offsetHeight-10),v?o.el.style[v]="translate("+t+"px, "+n+"px)":(o.el.style.left=t+"px",o.el.style.top=n+"px"),o.el.style.visibility="visible")},o.el.offsetWidth&&o.el.offsetHeight?t():c(t,300))},g.prototype.setZIndex=function(e){void 0!==e&&(this.zIndex!==e&&(this.zIndex=e),this.el.style.zIndex!==this.zIndex&&(this.el.style.zIndex=this.zIndex))},g.prototype.getVisible=function(){return this.visible},g.prototype.setVisible=function(e){"none"===this.el.style.display&&e?this.el.style.display="block":"none"===this.el.style.display||e||(this.el.style.display="none"),this.visible=e},g.prototype.addClass=function(e){var t=this.el.className.trim().split(" ");-1==t.indexOf(e)&&t.push(e),this.el.className=t.join(" ")},g.prototype.removeClass=function(e){var t=this.el.className.split(" "),n=t.indexOf(e);-1<n&&t.splice(n,1),this.el.className=t.join(" ")},g.prototype.onAdd=function(){this.getPanes().overlayMouseTarget.appendChild(this.el)},g.prototype.draw=function(){this.setPosition(),this.setZIndex(this.zIndex),this.setVisible(this.visible)},g.prototype.onRemove=function(){this.el.parentNode.removeChild(this.el)},e[0].style.display="none";var l,u,t=e.html(),n=t.match(p),o=[];return(n||[]).forEach(function(e){var t=e.replace(i,"").replace(s,"");-1==e.indexOf("::")&&-1==e.indexOf("this.")&&-1==o.indexOf(t)&&o.push(e.replace(i,"").replace(s,""))}),l=t,u=o,function(n,t,e,o){o=o[0]||o[1];var r=d.orgAttributes(t),a=d.filter(e),i=d.getOptions(a,{scope:n}),s=d.getEvents(n,a);t[0].style.display="none";var p=new g(i);for(var c in setTimeout(function(){n.$watch("["+u.join(",")+"]",function(e,t){p.setContent(l,n)},!0),p.setContent(t[0].innerHTML,n);var e=t[0].firstElementChild&&(t[0].firstElementChild.className||"");p.class&&(e+=" "+p.class),p.addClass("custom-marker"),e&&p.addClass(e),i.position instanceof google.maps.LatLng||f.getGeoLocation(i.position).then(function(e){p.setPosition(e)})}),s)google.maps.event.addDomListener(p.el,c,s[c]);o.addObject("customMarkers",p),o.observeAttrSetObj(r,e,p),t.bind("$destroy",function(){o.deleteObject("customMarkers",p)})}}}}var d,c,m,f,v=function(){for(var e="transform WebkitTransform MozTransform OTransform msTransform".split(" "),t=document.createElement("div"),n=0;n<e.length;n++)if(t&&void 0!==t.style[e[n]])return e[n];return!1}();e.$inject=["$timeout","$compile","$interpolate","Attr2MapOptions","NgMap","escapeRegexpFilter"],angular.module("ngMap").directive("customMarker",e)}(),function(){"use strict";function u(n,e){var o=new google.maps.DirectionsService,t=e;t.travelMode=t.travelMode||"DRIVING";var r=["origin","destination","travelMode","transitOptions","unitSystem","durationInTraffic","waypoints","optimizeWaypoints","provideRouteAlternatives","avoidHighways","avoidTolls","region"];if(t)for(var a in t)t.hasOwnProperty(a)&&-1===r.indexOf(a)&&delete t[a];function i(e){if(p&&e)if(c)for(var t in e)e.hasOwnProperty(t)&&(c[t]=e[t]);else c=e;else p=d(function(){c=c||e,o.route(c,function(e,t){t==google.maps.DirectionsStatus.OK&&(n.setDirections(e),c=void 0)}),d.cancel(p),p=void 0},20)}t.waypoints&&(Array.isArray(t.waypoints)||delete t.waypoints),t&&t.origin&&t.destination&&("current-location"==t.origin?s.getCurrentPosition().then(function(e){t.origin=new google.maps.LatLng(e.coords.latitude,e.coords.longitude),i(t)}):"current-location"==t.destination?s.getCurrentPosition().then(function(e){t.destination=new google.maps.LatLng(e.coords.latitude,e.coords.longitude),i(t)}):i(t))}function e(e,t,n,o){var l=e;return g=o,d=t,s=n,{restrict:"E",require:["?^map","?^ngMap"],link:function(e,t,o,n){n=n[0]||n[1];var r=l.orgAttributes(t),a=l.filter(o),i=l.getOptions(a,{scope:e}),s=l.getEvents(e,a),p=l.getAttrsToObserve(r),p=[];a.noWatcher||(p=l.getAttrsToObserve(r));var c=function(e,t){e.panel&&(e.panel=document.getElementById(e.panel)||document.querySelector(e.panel));var n=new google.maps.DirectionsRenderer(e);for(var o in t)google.maps.event.addListener(n,o,t[o]);return n}(i,s);n.addObject("directionsRenderers",c),p.forEach(function(e){var n;n=e,o.$observe(n,function(t){var e;"panel"==n?d(function(){var e=document.getElementById(t)||document.querySelector(t);e&&c.setPanel(e)}):i[n]!==t&&(e=l.toOptionValue(t,{key:n}),i[n]=e,u(c,i))})}),g.getMap().then(function(){u(c,i)}),t.bind("$destroy",function(){n.deleteObject("directionsRenderers",c)})}}}var g,d,s,p,c;e.$inject=["Attr2MapOptions","$timeout","NavigatorGeolocation","NgMap"],angular.module("ngMap").directive("directions",e)}(),function(){"use strict";angular.module("ngMap").directive("drawingManager",["Attr2MapOptions",function(e){var l=e;return{restrict:"E",require:["?^map","?^ngMap"],link:function(e,t,n,o){o=o[0]||o[1];var r=l.filter(n),a=l.getOptions(r,{scope:e}),i=l.getControlOptions(r),s=l.getEvents(e,r),p=new google.maps.drawing.DrawingManager({drawingMode:a.drawingmode,drawingControl:a.drawingcontrol,drawingControlOptions:i.drawingControlOptions,circleOptions:a.circleoptions,markerOptions:a.markeroptions,polygonOptions:a.polygonoptions,polylineOptions:a.polylineoptions,rectangleOptions:a.rectangleoptions});for(var c in n.$observe("drawingControlOptions",function(e){p.drawingControlOptions=l.getControlOptions({drawingControlOptions:e}).drawingControlOptions,p.setDrawingMode(null),p.setMap(o.map)}),s)google.maps.event.addListener(p,c,s[c]);o.addObject("mapDrawingManager",p),t.bind("$destroy",function(){o.deleteObject("mapDrawingManager",p)})}}}])}(),function(){"use strict";angular.module("ngMap").directive("dynamicMapsEngineLayer",["Attr2MapOptions",function(e){var p=e;return{restrict:"E",require:["?^map","?^ngMap"],link:function(e,t,n,o){o=o[0]||o[1];var r=p.filter(n),a=p.getOptions(r,{scope:e}),i=p.getEvents(e,r,i),s=function(e,t){var n=new google.maps.visualization.DynamicMapsEngineLayer(e);for(var o in t)google.maps.event.addListener(n,o,t[o]);return n}(a,i);o.addObject("mapsEngineLayers",s)}}}])}(),function(){"use strict";angular.module("ngMap").directive("fusionTablesLayer",["Attr2MapOptions",function(e){var p=e;return{restrict:"E",require:["?^map","?^ngMap"],link:function(e,t,n,o){o=o[0]||o[1];var r=p.filter(n),a=p.getOptions(r,{scope:e}),i=p.getEvents(e,r,i),s=function(e,t){var n=new google.maps.FusionTablesLayer(e);for(var o in t)google.maps.event.addListener(n,o,t[o]);return n}(a,i);o.addObject("fusionTablesLayers",s),t.bind("$destroy",function(){o.deleteObject("fusionTablesLayers",s)})}}}])}(),function(){"use strict";angular.module("ngMap").directive("heatmapLayer",["Attr2MapOptions","$window",function(e,s){var p=e;return{restrict:"E",require:["?^map","?^ngMap"],link:function(e,t,n,o){o=o[0]||o[1];var r=p.filter(n),a=p.getOptions(r,{scope:e});if(a.data=s[n.data]||function(e,t){return e.split(".").reduce(function(e,t){return e[t]},t||this)}(n.data,e),!(a.data instanceof Array))throw"invalid heatmap data";a.data=new google.maps.MVCArray(a.data);var i=new google.maps.visualization.HeatmapLayer(a);p.getEvents(e,r);o.addObject("heatmapLayers",i)}}}])}(),function(){"use strict";function e(e,l,u,g,d,m,f){var v=e;return{restrict:"E",require:["?^map","?^ngMap"],link:function(s,e,n,p){p=p[0]||p[1],e.css("display","none");var t,o=v.orgAttributes(e),r=v.filter(n),a=v.getOptions(r,{scope:s}),i=function(e,t,n){var r;for(var o in!e.position||e.position instanceof google.maps.LatLng||delete e.position,r=new google.maps.InfoWindow(e),t)o&&google.maps.event.addListener(r,o,t[o]);var a=u(function(t){angular.isString(n)?g(n).then(function(e){t(angular.element(e).wrap("<div>").parent())},function(e){throw"info-window template request failed: "+e}):t(n)}).then(function(e){var t=e.html().trim();if(1!=angular.element(t).length)throw"info-window working as a template must have a container";r.__template=t.replace(/\s?ng-non-bindable[='"]+/,"")});return r.__open=function(t,n,o){a.then(function(){d(function(){o&&(n.anchor=o);var e=l(r.__template)(n);r.setContent(e[0]),n.$apply(),o&&o.getPosition?r.open(t,o):o&&o instanceof google.maps.LatLng?(r.open(t),r.setPosition(o)):r.open(t),d(function(){r.content.parentElement.parentElement.parentElement.className="ng-map-info-window"})})})},r}(a,v.getEvents(s,r),a.template||e);!a.position||a.position instanceof google.maps.LatLng||(t=a.position),t&&f.getGeoLocation(t).then(function(e){i.setPosition(e),i.__open(p.map,s,e);var t=n.geoCallback;t&&m(t)(s)}),p.addObject("infoWindows",i),p.observeAttrSetObj(o,n,i),p.showInfoWindow=p.map.showInfoWindow=p.showInfoWindow||function(e,t,n){var o="string"==typeof e?e:t,r="string"==typeof e?t:n;if("string"==typeof r)if(void 0!==p.map.markers&&void 0!==p.map.markers[r])r=p.map.markers[r];else{if(void 0===p.map.customMarkers||void 0===p.map.customMarkers[r])throw new Error("Cant open info window for id "+r+". Marker or CustomMarker is not defined");r=p.map.customMarkers[r]}var a=p.map.infoWindows[o],i=r||(this.getPosition?this:null);a.__open(p.map,s,i),p.singleInfoWindow&&(p.lastInfoWindow&&s.hideInfoWindow(p.lastInfoWindow),p.lastInfoWindow=o)},p.hideInfoWindow=p.map.hideInfoWindow=p.hideInfoWindow||function(e,t){var n="string"==typeof e?e:t;p.map.infoWindows[n].close()},s.showInfoWindow=p.map.showInfoWindow,s.hideInfoWindow=p.map.hideInfoWindow;var c=i.mapId?{id:i.mapId}:0;f.getMap(c).then(function(e){var t;i.visible&&i.__open(e,s),i.visibleOnMarker&&(t=i.visibleOnMarker,i.__open(e,s,e.markers[t]))})}}}e.$inject=["Attr2MapOptions","$compile","$q","$templateRequest","$timeout","$parse","NgMap"],angular.module("ngMap").directive("infoWindow",e)}(),function(){"use strict";angular.module("ngMap").directive("kmlLayer",["Attr2MapOptions",function(e){var s=e;return{restrict:"E",require:["?^map","?^ngMap"],link:function(e,t,n,o){o=o[0]||o[1];var r=s.orgAttributes(t),a=s.filter(n),i=function(e,t){var n=new google.maps.KmlLayer(e);for(var o in t)google.maps.event.addListener(n,o,t[o]);return n}(s.getOptions(a,{scope:e}),s.getEvents(e,a));o.addObject("kmlLayers",i),o.observeAttrSetObj(r,n,i),t.bind("$destroy",function(){o.deleteObject("kmlLayers",i)})}}}])}(),function(){"use strict";angular.module("ngMap").directive("mapData",["Attr2MapOptions","NgMap",function(e,s){var p=e;return{restrict:"E",require:["?^map","?^ngMap"],link:function(r,e,t,n){n=n[0]||n[1];var o=p.filter(t),a=p.getOptions(o,{scope:r}),i=p.getEvents(r,o,i);s.getMap(n.map.id).then(function(e){for(var t in a){var n=a[t];"function"==typeof r[n]?e.data[t](r[n]):e.data[t](n)}for(var o in i)e.data.addListener(o,i[o])})}}}])}(),function(){"use strict";function n(e,t,n){var o,r=n.mapLazyLoadParams||n.mapLazyLoad;void 0===window.google||void 0===window.google.maps?(p.push({scope:e,element:t,savedHtml:s[p.length]}),window.lazyLoadCallback=function(){a(function(){p.forEach(function(e){e.element.html(e.savedHtml),i(e.element.contents())(e.scope)})},100)},(o=document.createElement("script")).src=r+(-1<r.indexOf("?")?"&":"?")+"callback=lazyLoadCallback",document.querySelector('script[src="'+o.src+'"]')||document.body.appendChild(o)):(t.html(s),i(t.contents())(e))}function o(e,t){return t.mapLazyLoad,s.push(e.html()),t.mapLazyLoad,(void 0===window.google||void 0===window.google.maps)&&(e.html(""),{pre:n})}function e(e,t){return i=e,a=t,{compile:o}}var a,i,s=[],p=[];e.$inject=["$compile","$timeout"],angular.module("ngMap").directive("mapLazyLoad",e)}(),function(){"use strict";angular.module("ngMap").directive("mapType",["$parse","NgMap",function(i,s){return{restrict:"E",require:["?^map","?^ngMap"],link:function(e,t,n,o){o=o[0]||o[1];var r,a=n.name;if(!a)throw"invalid map-type name";if(!(r=i(n.object)(e)))throw"invalid map-type object";s.getMap().then(function(e){e.mapTypes.set(a,r)}),o.addObject("mapTypes",r)}}}])}(),function(){"use strict";function e(){return{restrict:"AE",controller:"__MapController",controllerAs:"ngmap"}}angular.module("ngMap").directive("map",[e]),angular.module("ngMap").directive("ngMap",[e])}(),function(){"use strict";angular.module("ngMap").directive("mapsEngineLayer",["Attr2MapOptions",function(e){var p=e;return{restrict:"E",require:["?^map","?^ngMap"],link:function(e,t,n,o){o=o[0]||o[1];var r=p.filter(n),a=p.getOptions(r,{scope:e}),i=p.getEvents(e,r,i),s=function(e,t){var n=new google.maps.visualization.MapsEngineLayer(e);for(var o in t)google.maps.event.addListener(n,o,t[o]);return n}(a,i);o.addObject("mapsEngineLayers",s)}}}])}(),function(){"use strict";function o(n,e,o,t){t=t[0]||t[1];var r,a=l.orgAttributes(e),i=l.filter(o),s=l.getOptions(i,n,{scope:n}),p=l.getEvents(n,i);s.position instanceof google.maps.LatLng||(r=s.position);var c=function(e,t){var n;if(g.defaultOptions.marker)for(var o in g.defaultOptions.marker)void 0===e[o]&&(e[o]=g.defaultOptions.marker[o]);for(var r in e.position instanceof google.maps.LatLng||(e.position=new google.maps.LatLng(0,0)),n=new google.maps.Marker(e),Object.keys(t).length,t)r&&google.maps.event.addListener(n,r,t[r]);return n}(s,p);t.addObject("markers",c),r&&g.getGeoLocation(r).then(function(e){c.setPosition(e),s.centered&&c.map.setCenter(e);var t=o.geoCallback;t&&u(t)(n)}),t.observeAttrSetObj(a,o,c),e.bind("$destroy",function(){t.deleteObject("markers",c)})}function e(e,t,n){return l=e,u=t,g=n,{restrict:"E",require:["^?map","?^ngMap"],link:o}}var l,u,g;e.$inject=["Attr2MapOptions","$parse","NgMap"],angular.module("ngMap").directive("marker",e)}(),function(){"use strict";angular.module("ngMap").directive("overlayMapType",["NgMap",function(i){return{restrict:"E",require:["?^map","?^ngMap"],link:function(e,t,n,o){o=o[0]||o[1];var r=n.initMethod||"insertAt",a=e[n.object];i.getMap().then(function(e){var t;"insertAt"==r?(t=parseInt(n.index,10),e.overlayMapTypes.insertAt(t,a)):"push"==r&&e.overlayMapTypes.push(a)}),o.addObject("overlayMapTypes",a)}}}])}(),function(){"use strict";function e(e,l){var u=e;return{restrict:"A",require:"?ngModel",link:function(t,e,n,o){if("false"===n.placesAutoComplete)return!1;var r=u.filter(n),a=u.getOptions(r,{scope:t}),i=u.getEvents(t,r),s=new google.maps.places.Autocomplete(e[0],a);for(var p in s.setOptions({strictBounds:!0===a.strictBounds}),i)google.maps.event.addListener(s,p,i[p]);function c(){l(function(){o&&o.$setViewValue(e.val())},100)}google.maps.event.addListener(s,"place_changed",c),e[0].addEventListener("change",c),n.$observe("rectBounds",function(e){var t;e&&(t=u.toOptionValue(e,{key:"rectBounds"}),s.setBounds(new google.maps.LatLngBounds(new google.maps.LatLng(t.south_west.lat,t.south_west.lng),new google.maps.LatLng(t.north_east.lat,t.north_east.lng))))}),n.$observe("circleBounds",function(e){var t,n;e&&(t=u.toOptionValue(e,{key:"circleBounds"}),n=new google.maps.Circle(t),s.setBounds(n.getBounds()))}),n.$observe("types",function(e){var t;e&&(t=u.toOptionValue(e,{key:"types"}),s.setTypes(t))}),n.$observe("componentRestrictions",function(e){e&&s.setComponentRestrictions(t.$eval(e))})}}}e.$inject=["Attr2MapOptions","$timeout"],angular.module("ngMap").directive("placesAutoComplete",e)}(),function(){"use strict";function e(e,u,g){var d=e;return{restrict:"E",require:["?^map","?^ngMap"],link:function(n,e,o,t){t=t[0]||t[1];var r,a=d.orgAttributes(e),i=d.filter(o),s=d.getOptions(i,{scope:n}),p=d.getEvents(n,i),c=s.name;s.center instanceof google.maps.LatLng||(r=s.center);var l=function(e,t){var n=e.name;switch(delete e.name,n){case"circle":e.center instanceof google.maps.LatLng||(e.center=new google.maps.LatLng(0,0)),a=new google.maps.Circle(e);break;case"polygon":a=new google.maps.Polygon(e);break;case"polyline":a=new google.maps.Polyline(e);break;case"rectangle":a=new google.maps.Rectangle(e);break;case"groundOverlay":case"image":var o=e.url,r={opacity:e.opacity,clickable:e.clickable,id:e.id},a=new google.maps.GroundOverlay(o,e.bounds,r)}for(var i in t)t[i]&&google.maps.event.addListener(a,i,t[i]);return a}(s,p);t.addObject("shapes",l),r&&"circle"==c&&g.getGeoLocation(r).then(function(e){l.setCenter(e),l.centered&&l.map.setCenter(e);var t=o.geoCallback;t&&u(t)(n)}),t.observeAttrSetObj(a,o,l),e.bind("$destroy",function(){t.deleteObject("shapes",l)})}}}e.$inject=["Attr2MapOptions","$parse","NgMap"],angular.module("ngMap").directive("shape",e)}(),function(){"use strict";function e(e,p){var c=e;return{restrict:"E",require:["?^map","?^ngMap"],link:function(e,t,n){var o=c.filter(n),r=c.getOptions(o,{scope:e}),a=c.getControlOptions(o),i=angular.extend(r,a),s=c.getEvents(e,o);p.getMap().then(function(e){var t=function(e,t,n){var o,r;for(var a in t.container&&(r=(r=document.getElementById(t.container))||document.querySelector(t.container)),r?o=new google.maps.StreetViewPanorama(r,t):(o=e.getStreetView()).setOptions(t),n)a&&google.maps.event.addListener(o,a,n[a]);return o}(e,i,s);e.setStreetView(t),t.getPosition()||t.setPosition(e.getCenter()),google.maps.event.addListener(t,"position_changed",function(){t.getPosition()!==e.getCenter()&&e.setCenter(t.getPosition())});var n=google.maps.event.addListener(e,"center_changed",function(){t.setPosition(e.getCenter()),google.maps.event.removeListener(n)})})}}}e.$inject=["Attr2MapOptions","NgMap"],angular.module("ngMap").directive("streetViewPanorama",e)}(),function(){"use strict";angular.module("ngMap").directive("trafficLayer",["Attr2MapOptions",function(e){var s=e;return{restrict:"E",require:["?^map","?^ngMap"],link:function(e,t,n,o){o=o[0]||o[1];var r=s.orgAttributes(t),a=s.filter(n),i=function(e,t){var n=new google.maps.TrafficLayer(e);for(var o in t)google.maps.event.addListener(n,o,t[o]);return n}(s.getOptions(a,{scope:e}),s.getEvents(e,a));o.addObject("trafficLayers",i),o.observeAttrSetObj(r,n,i),t.bind("$destroy",function(){o.deleteObject("trafficLayers",i)})}}}])}(),function(){"use strict";angular.module("ngMap").directive("transitLayer",["Attr2MapOptions",function(e){var s=e;return{restrict:"E",require:["?^map","?^ngMap"],link:function(e,t,n,o){o=o[0]||o[1];var r=s.orgAttributes(t),a=s.filter(n),i=function(e,t){var n=new google.maps.TransitLayer(e);for(var o in t)google.maps.event.addListener(n,o,t[o]);return n}(s.getOptions(a,{scope:e}),s.getEvents(e,a));o.addObject("transitLayers",i),o.observeAttrSetObj(r,n,i),t.bind("$destroy",function(){o.deleteObject("transitLayers",i)})}}}])}(),function(){"use strict";var t=/([\:\-\_]+(.))/g,n=/^moz([A-Z])/;angular.module("ngMap").filter("camelCase",function(){return function(e){return e.replace(t,function(e,t,n,o){return o?n.toUpperCase():n}).replace(n,"Moz$1")}})}(),function(){"use strict";angular.module("ngMap").filter("escapeRegexp",function(){return function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}})}(),function(){"use strict";angular.module("ngMap").filter("jsonize",function(){return function(t){try{return JSON.parse(t),t}catch(e){return t.replace(/([\$\w]+)\s*:/g,function(e,t){return'"'+t+'":'}).replace(/'([^']+)'/g,function(e,t){return'"'+t+'"'}).replace(/''/g,'""')}}})}(),function(){"use strict";var isoDateRE=/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*)?)([zZ]|([+\-])(\d\d):?(\d\d))?$/,Attr2MapOptions=function($parse,$timeout,$log,$interpolate,NavigatorGeolocation,GeoCoder,camelCaseFilter,jsonizeFilter,escapeRegExp){var exprStartSymbol=$interpolate.startSymbol(),exprEndSymbol=$interpolate.endSymbol(),orgAttributes=function(e){0<e.length&&(e=e[0]);for(var t={},n=0;n<e.attributes.length;n++){var o=e.attributes[n];t[o.name]=o.value}return t},getJSON=function(e){return e.match(/^[\+\-]?[0-9\.]+,[ ]*\ ?[\+\-]?[0-9\.]+$/)&&(e="["+e+"]"),JSON.parse(jsonizeFilter(e))},getLatLng=function(e){var t=e;if(e[0].constructor==Array)if(e[0][0].constructor==Array&&2==e[0][0].length||e[0][0].constructor==Object){for(var n,o=[],r=0;r<e.length;r++)n=e[r].map(function(e){return new google.maps.LatLng(e[0],e[1])}),o.push(n);t=o}else t=e.map(function(e){return new google.maps.LatLng(e[0],e[1])});else!isNaN(parseFloat(e[0]))&&isFinite(e[0])&&(t=new google.maps.LatLng(t[0],t[1]));return t},toOptionValue=function(input,options){var output;try{output=getNumber(input)}catch(err){try{var output=getJSON(input),newOptions;output instanceof Array?output=output[0].constructor==Object||output[0]instanceof Array&&output[0][0].constructor==Object?output:getLatLng(output):output===Object(output)&&(newOptions=options,newOptions.doNotConverStringToNumber=!0,output=getOptions(output,newOptions))}catch(err2){if(input.match(/^[A-Z][a-zA-Z0-9]+\(.*\)$/))try{var exp="new google.maps."+input;output=eval(exp)}catch(e){output=input}else if(input.match(/^([A-Z][a-zA-Z0-9]+)\.([A-Z]+)$/))try{var matches=input.match(/^([A-Z][a-zA-Z0-9]+)\.([A-Z]+)$/);output=google.maps[matches[1]][matches[2]]}catch(e){output=input}else if(input.match(/^[A-Z]+$/))try{var capitalizedKey=options.key.charAt(0).toUpperCase()+options.key.slice(1);output=options.key.match(/temperatureUnit|windSpeedUnit|labelColor/)?(capitalizedKey=capitalizedKey.replace(/s$/,""),google.maps.weather[capitalizedKey][input]):google.maps[capitalizedKey][input]}catch(e){output=input}else if(input.match(isoDateRE))try{output=new Date(input)}catch(e){output=input}else if(input.match(new RegExp("^"+escapeRegExp(exprStartSymbol)))&&options.scope)try{var expr=input.replace(new RegExp(escapeRegExp(exprStartSymbol)),"").replace(new RegExp(escapeRegExp(exprEndSymbol),"g"),"");output=options.scope.$eval(expr)}catch(e){output=input}else output=input}}if(("center"==options.key||"position"==options.key)&&output instanceof Array&&(output=new google.maps.LatLng(output[0],output[1])),"bounds"==options.key&&output instanceof Array&&(output=new google.maps.LatLngBounds(output[0],output[1])),"icons"==options.key&&output instanceof Array)for(var i=0;i<output.length;i++){var el=output[i];el.icon.path.match(/^[A-Z_]+$/)&&(el.icon.path=google.maps.SymbolPath[el.icon.path])}if("icon"==options.key&&output instanceof Object)for(var key in(""+output.path).match(/^[A-Z_]+$/)&&(output.path=google.maps.SymbolPath[output.path]),output){var arr=output[key];"anchor"==key||"origin"==key||"labelOrigin"==key?output[key]=new google.maps.Point(arr[0],arr[1]):"size"!=key&&"scaledSize"!=key||(output[key]=new google.maps.Size(arr[0],arr[1]))}return output},getAttrsToObserve=function(e){var t=[],n=new RegExp(escapeRegExp(exprStartSymbol)+".*"+escapeRegExp(exprEndSymbol),"g");if(!e.noWatcher)for(var o in e){var r=e[o];r&&r.match(n)&&t.push(camelCaseFilter(o))}return t},filter=function(e){var t={};for(var n in e)n.match(/^\$/)||n.match(/^ng[A-Z]/)||(t[n]=e[n]);return t},getOptions=function(e,t){t=t||{};var n={};for(var o in e)if(e[o]||0===e[o]){if(o.match(/^on[A-Z]/))continue;if(o.match(/ControlOptions$/))continue;"string"!=typeof e[o]||t.doNotConverStringToNumber&&e[o].match(/^[0-9]+$/)?n[o]=e[o]:n[o]=toOptionValue(e[o],{key:o,scope:t.scope})}return n},getEvents=function(a,e){function t(e){return"_"+e.toLowerCase()}function n(e){var t=e.match(/([^\(]+)\(([^\)]*)\)/),o=t[1],n=t[2].replace(/event[ ,]*/,""),r=$parse("["+n+"]");return function(e){var t=r(a);var n=o.split(".").reduce(function(e,t){return e[t]},a);n&&n.apply(this,[e].concat(t)),$timeout(function(){a.$apply()})}}var o={};for(var r in e)if(e[r]){if(!r.match(/^on[A-Z]/))continue;var i=r.replace(/^on/,"");i=(i=i.charAt(0).toLowerCase()+i.slice(1)).replace(/([A-Z])/g,t);var s=e[r];o[i]=new n(s)}return o},getControlOptions=function(e){var t={};if("object"!=typeof e)return!1;for(var n in e)if(e[n]){if(!n.match(/(.*)ControlOptions$/))continue;var o=(o=e[n].replace(/'/g,'"')).replace(/([^"]+)|("[^"]+")/g,function(e,t,n){return t?t.replace(/([a-zA-Z0-9]+?):/g,'"$1":'):n});try{var r,a,i=JSON.parse(o);for(var s in i){i[s]&&("string"==typeof(r=i[s])?r=r.toUpperCase():"mapTypeIds"===s&&(r=r.map(function(e){return e.match(/^[A-Z]+$/)?google.maps.MapTypeId[e.toUpperCase()]:e})),"style"===s?(a=(n.charAt(0).toUpperCase()+n.slice(1)).replace(/Options$/,"")+"Style",i[s]=google.maps[a][r]):i[s]="position"===s?google.maps.ControlPosition[r]:r)}t[n]=i}catch(e){}}return t};return{filter:filter,getOptions:getOptions,getEvents:getEvents,getControlOptions:getControlOptions,toOptionValue:toOptionValue,getAttrsToObserve:getAttrsToObserve,orgAttributes:orgAttributes}};Attr2MapOptions.$inject=["$parse","$timeout","$log","$interpolate","NavigatorGeolocation","GeoCoder","camelCaseFilter","jsonizeFilter","escapeRegexpFilter"],angular.module("ngMap").service("Attr2MapOptions",Attr2MapOptions)}(),function(){"use strict";function t(e){var n=o.defer();return(new google.maps.Geocoder).geocode(e,function(e,t){t==google.maps.GeocoderStatus.OK?n.resolve(e):n.reject(t)}),n.promise}function e(e){return o=e,{geocode:t}}var o;e.$inject=["$q"],angular.module("ngMap").service("GeoCoder",e)}(),function(){"use strict";function e(e,t){return o=e,r=t,{load:function(e){var t,n=o.defer();return void 0===window.google||void 0===window.google.maps?(window.lazyLoadCallback=function(){r(function(){n.resolve(window.google)},100)},(t=document.createElement("script")).src=e+(-1<e.indexOf("?")?"&":"?")+"callback=lazyLoadCallback",document.querySelector('script[src="'+t.src+'"]')||document.body.appendChild(t)):n.resolve(window.google),n.promise}}}var o,r;e.$inject=["$q","$timeout"],angular.module("ngMap").service("GoogleMapsApi",e)}(),function(){"use strict";function t(e){var t=n.defer();return navigator.geolocation?(void 0===e?e={timeout:5e3}:void 0===e.timeout&&(e.timeout=5e3),navigator.geolocation.getCurrentPosition(function(e){t.resolve(e)},function(e){t.reject(e)},e)):t.reject("Browser Geolocation service failed."),t.promise}function e(e){return n=e,{getCurrentPosition:t}}var n;e.$inject=["$q"],angular.module("ngMap").service("NavigatorGeolocation",e)}(),function(){"use strict";function o(e){var t=function(e,t){for(var n,o=0;o<l.length;o++){var r=l[o];if(r.id==t&&!r.inUse){var a=r.getDiv();e.appendChild(a),n=r;break}}return n}(e,e.id)||function(e){for(var t,n=0;n<l.length;n++){var o=l[n];if(!o.id&&!o.inUse){var r=o.getDiv();e.appendChild(r),t=o;break}}return t}(e);return t?c(function(){google.maps.event.trigger(t,"idle")},100):t=function(e){var t=p.createElement("div");t.style.width="100%",t.style.height="100%",e.appendChild(t);var n=new s.google.maps.Map(t,{});return l.push(n),n}(e),t.inUse=!0,t}function r(e){e.inUse=!1}function a(){for(var e=0;e<l.length;e++)l[e]=null;l=[]}function i(e){for(var t=0;t<l.length;t++)null!==l[t]&&l[t].id==e&&(l[t]=null,l.splice(t,1))}function e(e,t,n){return p=e[0],s=t,c=n,{mapInstances:l,resetMapInstances:a,getMapInstance:o,returnMapInstance:r,deleteMapInstance:i}}var s,p,c,l=[];e.$inject=["$document","$window","$timeout"],angular.module("ngMap").factory("NgMapPool",e)}(),function(){"use strict";function t(e,t){var n;return e.currentStyle?n=e.currentStyle[t]:v.getComputedStyle&&(n=y.defaultView.getComputedStyle(e,null).getPropertyValue(t)),n}function c(e){var t=s[e||0];if(!(t.map instanceof google.maps.Map))return t.initializeMap(),t.map}function l(r,e){e=e||{},r="object"==typeof r?r.id:r;var a=h.defer(),i=e.timeout||1e4;return function e(t){var n=Object.keys(s),o=s[n[0]];r&&s[r]?a.resolve(s[r].map):!r&&o&&o.map?a.resolve(o.map):i<t?a.reject("could not find map"):v.setTimeout(function(){e(t+100)},100)}(0),a.promise}function u(e){var t;e.map&&(t=Object.keys(s).length,s[e.map.id||t]=e)}function g(t){var e=Object.keys(s).length-1,n=t.map.id||e;if(t.map){for(var o in t.eventListeners){var r=t.eventListeners[o];google.maps.event.removeListener(r)}t.map.controls&&t.map.controls.forEach(function(e){e.clear()})}t.map.heatmapLayers&&Object.keys(t.map.heatmapLayers).forEach(function(e){t.deleteObject("heatmapLayers",t.map.heatmapLayers[e])}),L.deleteMapInstance(n),delete s[n]}function d(e,t){var r=h.defer();return!e||e.match(/^current/i)?b.getCurrentPosition(t).then(function(e){var t=e.coords.latitude,n=e.coords.longitude,o=new google.maps.LatLng(t,n);r.resolve(o)},function(e){r.reject(e)}):M.geocode({address:e}).then(function(e){r.resolve(e[0].geometry.location)},function(e){r.reject(e)}),r.promise}function m(o,r){return function(e){var t,n;e&&(t=w("set-"+o),n=O.toOptionValue(e,{key:o}),r[t]&&(o.match(/center|position/)&&"string"==typeof n?d(n).then(function(e){r[t](e)}):r[t](n)))}}function f(e){"true"==e.getAttribute("default-style")?(e.style.display="block",e.style.height="300px"):("block"!=t(e,"display")&&(e.style.display="block"),t(e,"height").match(/^(0|auto)/)&&(e.style.height="300px"))}var v,y,h,b,O,M,w,L,s={};angular.module("ngMap").provider("NgMap",function(){var p={};this.setDefaultOptions=function(e){p=e};function e(e,t,n,o,r,a,i,s){return v=e,y=t[0],h=n,b=o,O=r,M=a,w=i,L=s,{defaultOptions:p,addMap:u,deleteMap:g,getMap:l,initMap:c,setStyle:f,getGeoLocation:d,observeAndSet:m}}e.$inject=["$window","$document","$q","NavigatorGeolocation","Attr2MapOptions","GeoCoder","camelCaseFilter","NgMapPool"],this.$get=e})}(),function(){"use strict";function t(e,t){t=t||e.getCenter();var n=o.defer();return(new google.maps.StreetViewService).getPanoramaByLocation(t||e.getCenter,100,function(e,t){t===google.maps.StreetViewStatus.OK?n.resolve(e.location.pano):n.resolve(!1)}),n.promise}function n(e,t){new google.maps.StreetViewPanorama(e.getDiv(),{enableCloseButton:!0}).setPano(t)}function e(e){return o=e,{getPanorama:t,setPanorama:n}}var o;e.$inject=["$q"],angular.module("ngMap").service("StreetView",e)}(),"ngMap"});