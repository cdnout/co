/*!
 * najaxjs tiny ver 1.1.0 - najax-tiny.js
 * (c) any-js - https://github.com/any-js/najaxjs/
 * Released under the MIT license
 */
var $najax={};!function(a){"use strict";function b(a){for(var b=[],c=0;c<a.length;c++)b.push(a[c]);return b}function c(a,b,d){if(!b)return a;for(var e in b)b.hasOwnProperty(e)&&(d&&b[e]instanceof Object&&b[e].constructor===Object?(null==a[e]&&(a[e]={}),a[e]=c(a[e],b[e],d)):a[e]=b[e]);return a}function d(a,b,d){"object"==typeof b?c(a,b,!0):a[b]=d}function e(a,b){try{return b.bind(a)}catch(c){}return function(){return b.apply(a,arguments)}}function f(a){for(var b in a)a.hasOwnProperty(b)?delete a[b]:a[b]=null}function g(){}function h(){$najax.define.error<=0||(console.error.apply(console,arguments),2==$najax.define.error&&console.trace())}function i(a,b,c){a.setAttribute(b,c)}function j(a){if(!a)return!0;for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}function k(){var a=null;try{a=new XMLHttpRequest}catch(b){try{a=new ActiveXObject("Msxml2.XMLHTTP")}catch(c){try{a=new ActiveXObject("Microsoft.XMLHTTP")}catch(d){h("can't create xhr object.")}}}return a}function l(a,b){var c,d=[];if("function"!=typeof b)switch(b){case"first":d=a[0].get();break;case"value":for(c=0;c<a.length;c++)d.push(a[c].get(0));break;case"data":for(c=0;c<a.length;c++)d.push(a[c].data());break;case"relay":default:return a}else for(c=0;c<a.length;c++)d.push(b(a[c]));return d}function m(a){var b,c;for(a._rls[a._rls.length-1]===!0&&(a._rls.pop(),a.init()),c=0;c<a._rls.length;c++)if(b=a._rls[c],0!=b._active)return void console.error("cancel linker, used object.",b);for(c=0;c<a._rls.length;c++)b=a._rls[c],b._active=1,b._linker=a}function n(a){var b=a.linker();if(1==a._active){a._active=2;var c,d=!0;for(c=0;c<b._rls.length;c++)switch(b._rls[c]._state){case 0:return;case-1:case-2:d=!1}var e=l(b._rls,b._argument);if(d?(b._sccs&&b._sccs.apply(b,e),b._relay&&b._relay._linker&&b._relay.notifySuccess.apply(b._relay,b._rls)):(b._fail&&b._fail.apply(b,e),b._relay&&b._relay._linker&&b._relay.notifyFail.apply(b._relay,b._rls)),b._cmpl&&b._cmpl.apply(b,e),b._rls)for(c=0;c<b._rls.length;c++)b._rls[c]._linker=null,b._rls[c]._abort=null}}function o(a,b){return 1&a._o.relaymode?b:[]}function p(a,b){b.abortCaller(e(a,a.abort)),a._relaydata&&2&a._o.relaymode&&b.data(a._relaydata)}function q(b){var c=b._o,d=b._url;c.type=c.type.toLowerCase(),c.method=c.method?c.method.toUpperCase():"GET",b._vs&&"POST"!==c.method&&(d=a.url(d,b._vs,c.noescape)),"jsonp"===c.type&&(d=d+s(d)+c.jsonp.name+"="+a.escape(c.jsonp.callback)),c.cache||(d=r(d)),b.__url=d}function r(b){return b+s(b)+a.define.utms+"="+(new Date).getTime()}function s(a){return-1==a.search(/\?/)?"?":-1==a.search(/[\&\?]$/)?"&":""}function t(b,c){return b instanceof Object&&b.constructor===Object||b instanceof Array?a.params(b,c):b}function u(a,b){switch(a._o.type){case"json":a.__rsp=x();break;case"html":a.__rsp=v(a._o.element);break;case"script":a.__rsp=w(a._o.iseval);break;case"func":a.__rsp=y();break;case"jsonp":a.__rsp=w(a._o.iseval);break;case"csv":a.__rsp=z(a._o.separator);break;case"xml":a.__type="document";break;case"blob":a.__type="blob";break;case"raw":case"text":case"":break;default:a.__type=a._o.type}a._download&&(a.__xhr.onprogress=function(b){var c=b.loaded/b.total;a._download(b,c,a.__xhr)}),a._upload&&(a.__xhr.upload.onprogress=function(b){var c=b.loaded/b.total;a._upload(b,c,a.__xhr)}),a.__xhr.onreadystatechange=function(){var c=a.__xhr;if(4==c.readyState){var d,e=c.response||c.responseText,f=null;if(200==c.status)4&a._o.relaymode&&b.data("_raw",e),a._o.filter&&(e=a._o.filter(e)),a.__rsp&&(e=a.__rsp(e)),d=[e,c],b.setState(null,o(a,d)),a._sccs&&(f=a._sccs.apply(b,d)),a.__end(b,d,f),b.notifySuccess();else{if(a._o.retry&&a._o.retry>a.__retry&&(c.status>=500||0==c.status))return a.__retry++,void A(a,!1);0==c.status&&h("connection failed.",c),d=[c.status,c],b.setState(null,o(a,d)),a._fail&&(f=a._fail.apply(b,d)),a.__end(b,d,f),b.notifyFail()}a._o.clean&&(a.clear(),a=b=null)}}}function v(b){return function(c){return"object"!=typeof b&&(b=document.createElement(b)),a.parseHTML(b,c),b}}function w(a){return a?function(a){return window.execScript?window.execScript(a,"JavaScript"):eval.call(null,a),null}:function(a){return new Function(a)(),null}}function x(){return function(a){if(!a)return null;try{a=JSON.parse(a)}catch(b){a=null}return a}}function y(){return function(a){return new Function(a)}}function z(a){var b=new RegExp('("([^'+a+']*?)"(?:s*'+a+"|$)|'([^"+a+"]*?)'(?:s*"+a+"|$)|([^"+a+"]+?)(?:s*"+a+"|$))","g");return function(a){for(var c,d,e,f=a.split(/[\r\n|\n]/),g=0;g<f.length;g++){for(e=[];null!==(c=b.exec(f[g]));)d=null!=c[2]?c[2]:null!=c[3]?c[3]:null!=c[4]?c[4]:"",e.push(d);f[g]=e}return f}}function A(a,b,c){var d,e=a._o,f=a.__xhr;f.open(e.method,a.__url,e.async,e.auth.user,e.auth.pw),e.async&&a.__type&&(f.responseType=a.__type),null!=e.timeout&&(f.timeout=1e3*e.timeout);for(d in e.headers)e.headers.hasOwnProperty(d)&&f.setRequestHeader(d,e.headers[d]);null!==a._token&&f.setRequestHeader(e.token,a._token),e.mime&&f.overrideMimeType&&f.overrideMimeType(e.mime),b&&a.__start(c,[f]),"POST"===a._o.method?(e.contentType&&f.setRequestHeader("content-type",e.contentType),f.send(t(a._vs,a._o.noescape))):f.send()}function B(a,b){for(var c,d,e={},f=a.split("&"),g=0;g<f.length;g++)if(""!=f[g]){if(c=f[g].split("="),d=void 0===c[1]?null:c[1],b)try{d=decodeURI(d)}catch(h){d=null}e[c[0]]=d}return e}function C(a,b,c){var d,e="";for(var f in a)a.hasOwnProperty(f)&&(d=c(f),b&&(d=b+"["+d+"]"),e+=a[f]instanceof Object?C(a[f],d,c):d+"="+c(a[f])+"&");return e}function D(a){return a}function E(a,b,c){for(var d in c)if(c.hasOwnProperty(d)){var e=c[d];if(null!=b&&(d=b+"["+d+"]"),e instanceof Object)E(a,d,e);else{var f=document.createElement("input");i(f,"type","hidden"),i(f,"name",d),i(f,"value",e),a.appendChild(f)}}}function F(a,b,c){null!=b[c]&&""!=b[c]&&(a[c]=b[c])}function G(a){for(var b,c=0;c<a.children.length;c++)if(b=a.children[c],b.children.length>0)G(b);else if("script"===b.tagName.toLocaleLowerCase()){var d=document.createElement("script");F(d,b,"type"),F(d,b,"language"),F(d,b,"charset"),F(d,b,"async"),F(d,b,"defer"),F(d,b,"src"),d.text=b.text,a.replaceChild(d,b)}}function H(){this.data({fn:M}),M=null}a.define={},a.define.error=1,a.define.utms="__utms",a.define.relaymode=3,a.define.failAlert=function(){alert(a.define.msg[1])};var I=function(){this._state=0,this._active=0,this._args=[],this._data=null,this._linker=null,this._abort=null};I.prototype.init=function(){return this._state=0,this._active=0,this._args=[],this._data=null,this},I.prototype.setState=function(a,b){return null!=a&&-2!=this._state&&(this._state=a),b&&b.length>0&&(this._args=b),this},I.prototype.notifySuccess=function(){return this.setState(1,b(arguments)),n(this),this},I.prototype.notifyFail=function(){return this.setState(-1,b(arguments)),n(this),this},I.prototype.abortCaller=function(a){this._abort=a},I.prototype.get=function(a){return void 0===a?this._args:this._args[a]},I.prototype.value=function(){return this._args[0]},I.prototype.data=function(a,b){return void 0===a?this._data:"object"!=typeof a&&void 0===b?this._data[a]:(null===this._data&&(this._data={}),void d(this._data,a,b))},I.prototype.state=function(){return this._state},I.prototype.isActive=function(){return this._active},I.prototype.abort=function(){return this._state=-2,this._abort&&this._abort(this),this.notifyFail(),this},I.prototype.clear=function(){for(var a,b=0;b<this._args.length;b++)a=this._args[b],a instanceof I&&a.clear&&a.clear();f(this)},I.prototype.linker=function(){return this._linker};var J=function(a){this._rls=b(a),this._argument="relay",this._sccs=null,this._fail=null,this._cmpl=null,this._lock=!1,this._relay=null,m(this)};J.prototype.init=function(){if(this._lock)return void console.error("not available");for(var a=0;a<this._rls.length;a++)this._rls[a].init();return this},J.prototype.argument=function(a){return this._lock?void console.error("not available"):(this._argument=a,this)},J.prototype.success=function(a){return this._sccs=a,this},J.prototype.fail=function(a){return this._fail=a,this},J.prototype.complete=function(a){return this._cmpl=a,this},J.prototype.done=function(a,b,c){return a&&(this._sccs=a),b&&(this._fail=b),c&&(this._cmpl=c),this._relay=new I,this._relay},J.prototype.clear=function(){for(var a=0;a<this._rls.length;a++)this._rls[a].clear&&this._rls[a].clear();f(this)},J.prototype.abort=function(){for(var a=0;a<this._rls.length;a++)this._rls[a].abort();return this},J.prototype.lock=function(){return this._lock=!0,this},a.linker=function(){return new J(arguments)},a.RelayClass=function(){return I},a.LinkerClass=function(){return J};var K={__basic:function(a,b,c){return this._url=a,b&&(this._vs=b),c&&(this._o.type=c),this},type:function(a){return this._o.type=a||"",this},url:function(a){return this._url=a,this},param:function(a,b){return this._vs||(this._vs={}),d(this._vs,a,b),this},cache:function(a){return this._o.cache=a,this},retry:function(a){return this._o.retry=a,this},success:function(a){return this._sccs=a,this},fail:function(a){return this._fail=a,this},begin:function(a){return this.__exist("begin","_begin")||(this._begin=a),this},running:function(a){return this.__exist("running","_running")||(this._running=a),this},complete:function(a){return this.__exist("complete","_cmpl")||(this._cmpl=a),this},jsonp:function(a,b){return this._o.type="jsonp",a&&("function"==typeof a&&(a=a.name),this._o.jsonp.callback=a),b&&(this._o.jsonp.name=b),this},clean:function(a){return this._o.clean=a,this},relay:function(a,b){return this._relaydata||(this._relaydata={}),this._o.relaymode=2|this._o.relaymode,d(this._relaydata,a,b),this},opt:function(a,b){return d(this._o,a,b),this},__set:function(a,b){return this[a]=b,this},__done:function(a,b,c){a&&(this._sccs=a),b&&(this._fail=b),c&&(this._cmpl=c)},__exist:function(a,b){return null!=this[b]?(h("already exist. ("+a+")"),!0):!1},__start:function(a,b){this.__before&&this.__before.apply(a,b),this._begin&&this._begin.apply(a,b),this._running&&this._running.call(a,!0)},__end:function(a,b,c){var d;this._cmpl&&(d=this._cmpl.apply(a,b)),this.__after&&(b.push(void 0!==d?d:c),this.__after.apply(a,b)),this._running&&this._running.call(a,!1)}},L=function(b){this._url=null,this._vs=null,this._relaydata=null,this._o=c({method:"GET",type:"json",async:!0,cache:!1,retry:null,timeout:null,filter:null,contentType:"application/x-www-form-urlencoded",mime:null,headers:{},token:"X-CSRF-Token",noescape:!1,jsonp:{callback:"",name:"callback"},element:"div",iseval:!0,separator:",",auth:{user:null,pw:null},relaymode:a.define.relaymode,clean:!0},b),this._upload=null,this._download=null,this._token=null,this._begin=null,this._running=null,this._sccs=null,this._fail=null,this._cmpl=null,this.__url=null,this.__retry=0,this.__before=null,this.__after=null,this.__xhr=null,this.__type="text",this.__rsp=null};L.prototype.method=function(a){return this._o.method=a,this},L.prototype.async=function(a){return this._o.async=a,this},L.prototype.timeout=function(a){return this._o.timeout=a,this},L.prototype.filter=function(a){return this._o.filter=a,this},L.prototype.contentType=function(a,b){return null!=a&&(this._o.contentType=a),b&&(this._o.mime=b),this},L.prototype.header=function(a,b){return this._o.headers||(this._o.headers={}),d(this._o.headers,a,b),this},L.prototype.token=function(a){return this._token=a,this},L.prototype.upload=function(a){var b;if(a instanceof FormData)b=a;else if(a.constructor===Object){b=new FormData;for(var c in a)a.hasOwnProperty(c)&&a[c].files&&b.append(c,a[c].files[0])}else if(a instanceof Element)switch(a.tagName.toLocaleLowerCase()){case"form":b=new FormData(a);break;case"input":b=new FormData,a.files&&b.append(a.name,a.files[0])}return this._vs=b,this.method("post"),this.contentType(!1),this},L.prototype.progress=function(a,b){return a&&(this._download=a),b&&(this._upload=b),this},L.prototype.auth=function(a,b){return this._o.auth={user:a,pw:b},this},L.prototype.done=function(a,b,c){this.__done(a,b,c);var d=new I;return this.__xhr=k(),q(this),p(this,d),u(this,d),A(this,!0,d),d},L.prototype.abort=function(){return this.__xhr.abort(),this},L.prototype.clear=function(){this.__xhr.onreadystatechange=g,this.__xhr.onprogress=g,this.__xhr.upload.onprogress=g,f(this)},L.prototype.xhr=function(){return this.__xhr},c(L.prototype,K),a.escape=function(a){return encodeURIComponent(a).replace(/%20/g,"+")},a.params=function(b,c){var d;return d=c?C(b,"",D):C(b,"",a.escape),d.slice(0,-1)},a.url=function(b,c,d){if(!c)return b;var e,f=/^([^\?#]*)\??([^#]*)#?(.*)$/.exec(b),g=B(f[2],!1);for(e in c)c.hasOwnProperty(e)&&(g[e]=c[e]);return b=f[1],j(g)||(b+="?"+a.params(g,d)),f[3]&&(b+="#"+f[3]),b},a.query=function(a){var b,c=/\?(.+)$/.exec(location.search);return b=c?B(c[1],!0):{}},a.hash=function(){return location.hash.replace("#","")},a.parseHTML=function(a,b){a.innerHTML=b,G(a)},a.submit=function(a,b,d){d=c({form:null,method:null,target:null,enctype:null},d);var e,f=!1;return d.form?e=d.form:(f=!0,e=document.createElement("form"),e.style.display="none",document.body.appendChild(e)),(f||d.method)&&i(e,"method",d.method),(f||a)&&i(e,"action",a),(f||d.enctype)&&i(e,"enctype",d.enctype),(f||d.target)&&i(e,"target",d.target),E(e,null,b),e.submit(),e},a.iframeHtml=function(a,b,d){d=c({all:!1,charset:"utf-8",css:"",js:""},d);var e,f=a.contentWindow||a.contentDocument;d.all?e=b:(e="<!doctype html><html><head><meta charset="+d.charset+"></head>",d.css&&(e+='<style type="text/css">'+d.css+"</style>"),d.js&&(e+='<script type="text/javascript">'+d.js+"</script>"),e+="</head><body>"+b+"</body></html>"),f&&(f.document.open(),f.document.write(e),f.document.close())},a.request=function(a,b,c){return new L(c).__basic(a,b)},a.get=function(a,b,c){return new L(c).__basic(a,b).opt("method","GET")},a.post=function(a,b,c){return new L(c).__basic(a,b).opt("method","POST")},a.raw=function(a,b,c){return new L(c).__basic(a,b).type("raw")},a.text=function(b,c,d){return a.raw(b,c,d)},a.html=function(a,b,c){return new L(c).__basic(a,b).cache(!0).type("html")},a.script=function(a,b,c){return new L(c).__basic(a,b).cache(!0).type("script")},a.func=function(a,b,c){return new L(c).__basic(a,b).cache(!0).type("func")},a.xml=function(a,b,c){return new L(c).__basic(a,b).type("xml")},a.jsonp=function(a,b,c){return new L(c).__basic(a).jsonp(b)},a.csv=function(a,b,c){return new L(c).__basic(a,b).type("csv")},a.sync=function(a,b,c){return new L(c).__basic(a,b).async(!1)};var M=null;a.require=function(b,d){d=c({base:"",run:!1,relaymode:2,cache:!0},d),"string"==typeof b&&(b=[b]);for(var e=[],f=0;f<b.length;f++)e[f]=a.script(d.base+b[f],null,d).complete(H).done();return a.linker.apply(null,e).argument(function(a){var b=a.data("fn");return d.run&&b&&(b=b()),b}).lock()},a.ready=function(a){a&&(M=a)},a.load=function(b,d,e,f){f=c({prefix:"njx",relaymode:3},f),f.cache=!0,b||(b=document.createElement("div"),b.id=f.prefix+$any.crc16(d),b.style.display="none",document.body.appendChild(b)),f.element=b;var g=a.html(d,e,f).done();return 2&f.relaymode&&g.data("_elem",b),a.linker(g)},a.module=function(b,c){return a.load(null,b,null,c)}}($najax);