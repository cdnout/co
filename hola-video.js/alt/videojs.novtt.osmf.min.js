/**
 * @license
 * Video.js 5.10.2-27 <http://videojs.com/>
 * Copyright Brightcove, Inc. <https://www.brightcove.com/>
 * Available under Apache License Version 2.0
 * <https://github.com/videojs/video.js/blob/master/LICENSE>
 */
!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.videojs=a()}}(function(){var a;return function b(a,c,d){function e(g,h){if(!c[g]){if(!a[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};a[g][0].call(k.exports,function(b){var c=a[g][1][b];return e(c?c:b)},k,k.exports,b,a,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(){},{}],2:[function(a,b){"use strict";var c=a("object-keys"),d=a("foreach"),e="function"==typeof Symbol&&"symbol"==typeof Symbol(),f=Object.prototype.toString,g=function(a){return"function"==typeof a&&"[object Function]"===f.call(a)},h=function(){var a={};try{Object.defineProperty(a,"x",{enumerable:!1,value:a});for(var b in a)return!1;return a.x===a}catch(c){return!1}},i=Object.defineProperty&&h(),j=function(a,b,c,d){(!(b in a)||g(d)&&d())&&(i?Object.defineProperty(a,b,{configurable:!0,enumerable:!1,value:c,writable:!0}):a[b]=c)},k=function(a,b){var f=arguments.length>2?arguments[2]:{},g=c(b);e&&(g=g.concat(Object.getOwnPropertySymbols(b))),d(g,function(c){j(a,c,b[c],f[c])})};k.supportsDescriptors=!!i,b.exports=k},{foreach:4,"object-keys":49}],3:[function(a,b){function c(a,b,c){if(!g(b))throw new TypeError("iterator must be a function");arguments.length<3&&(c=this),"[object Array]"===h.call(a)?d(a,b,c):"string"==typeof a?e(a,b,c):f(a,b,c)}function d(a,b,c){for(var d=0,e=a.length;e>d;d++)i.call(a,d)&&b.call(c,a[d],d,a)}function e(a,b,c){for(var d=0,e=a.length;e>d;d++)b.call(c,a.charAt(d),d,a)}function f(a,b,c){for(var d in a)i.call(a,d)&&b.call(c,a[d],d,a)}var g=a("is-function");b.exports=c;var h=Object.prototype.toString,i=Object.prototype.hasOwnProperty},{"is-function":9}],4:[function(a,b){var c=Object.prototype.hasOwnProperty,d=Object.prototype.toString;b.exports=function(a,b,e){if("[object Function]"!==d.call(b))throw new TypeError("iterator must be a function");var f=a.length;if(f===+f)for(var g=0;f>g;g++)b.call(e,a[g],g,a);else for(var h in a)c.call(a,h)&&b.call(e,a[h],h,a)}},{}],5:[function(a,b){"use strict";var c="Function.prototype.bind called on incompatible ",d=Array.prototype.slice,e=Object.prototype.toString,f="[object Function]";b.exports=function(a){var b=this;if("function"!=typeof b||e.call(b)!==f)throw new TypeError(c+b);for(var g,h=d.call(arguments,1),i=function(){if(this instanceof g){var c=b.apply(this,h.concat(d.call(arguments)));return Object(c)===c?c:this}return b.apply(a,h.concat(d.call(arguments)))},j=Math.max(0,b.length-h.length),k=[],l=0;j>l;l++)k.push("$"+l);if(g=Function("binder","return function ("+k.join(",")+"){ return binder.apply(this,arguments); }")(i),b.prototype){var m=function(){};m.prototype=b.prototype,g.prototype=new m,m.prototype=null}return g}},{}],6:[function(a,b){"use strict";var c=a("./implementation");b.exports=Function.prototype.bind||c},{"./implementation":5}],7:[function(a,b){(function(c){var d,e="undefined"!=typeof c?c:"undefined"!=typeof window?window:{},f=a("min-document");"undefined"!=typeof document?d=document:(d=e["__GLOBAL_DOCUMENT_CACHE@4"],d||(d=e["__GLOBAL_DOCUMENT_CACHE@4"]=f)),b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"min-document":1}],8:[function(a,b){(function(a){var c;c="undefined"!=typeof window?window:"undefined"!=typeof a?a:"undefined"!=typeof self?self:{},b.exports=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],9:[function(a,b){function c(a){var b=d.call(a);return"[object Function]"===b||"function"==typeof a&&"[object RegExp]"!==b||"undefined"!=typeof window&&(a===window.setTimeout||a===window.alert||a===window.confirm||a===window.prompt)}b.exports=c;var d=Object.prototype.toString},{}],10:[function(a,b){var c=a("../internal/getNative"),d=c(Date,"now"),e=d||function(){return(new Date).getTime()};b.exports=e},{"../internal/getNative":26}],11:[function(a,b){function c(a,b,c){function h(){r&&clearTimeout(r),n&&clearTimeout(n),t=0,n=r=s=void 0}function i(b,c){c&&clearTimeout(c),n=r=s=void 0,b&&(t=e(),o=a.apply(q,m),r||n||(m=q=void 0))}function j(){var a=b-(e()-p);0>=a||a>b?i(s,n):r=setTimeout(j,a)}function k(){i(v,r)}function l(){if(m=arguments,p=e(),q=this,s=v&&(r||!w),u===!1)var c=w&&!r;else{n||w||(t=p);var d=u-(p-t),f=0>=d||d>u;f?(n&&(n=clearTimeout(n)),t=p,o=a.apply(q,m)):n||(n=setTimeout(k,d))}return f&&r?r=clearTimeout(r):r||b===u||(r=setTimeout(j,b)),c&&(f=!0,o=a.apply(q,m)),!f||r||n||(m=q=void 0),o}var m,n,o,p,q,r,s,t=0,u=!1,v=!0;if("function"!=typeof a)throw new TypeError(f);if(b=0>b?0:+b||0,c===!0){var w=!0;v=!1}else d(c)&&(w=!!c.leading,u="maxWait"in c&&g(+c.maxWait||0,b),v="trailing"in c?!!c.trailing:v);return l.cancel=h,l}var d=a("../lang/isObject"),e=a("../date/now"),f="Expected a function",g=Math.max;b.exports=c},{"../date/now":10,"../lang/isObject":39}],12:[function(a,b){function c(a,b){if("function"!=typeof a)throw new TypeError(d);return b=e(void 0===b?a.length-1:+b||0,0),function(){for(var c=arguments,d=-1,f=e(c.length-b,0),g=Array(f);++d<f;)g[d]=c[b+d];switch(b){case 0:return a.call(this,g);case 1:return a.call(this,c[0],g);case 2:return a.call(this,c[0],c[1],g)}var h=Array(b+1);for(d=-1;++d<b;)h[d]=c[d];return h[b]=g,a.apply(this,h)}}var d="Expected a function",e=Math.max;b.exports=c},{}],13:[function(a,b){function c(a,b,c){var g=!0,h=!0;if("function"!=typeof a)throw new TypeError(f);return c===!1?g=!1:e(c)&&(g="leading"in c?!!c.leading:g,h="trailing"in c?!!c.trailing:h),d(a,b,{leading:g,maxWait:+b,trailing:h})}var d=a("./debounce"),e=a("../lang/isObject"),f="Expected a function";b.exports=c},{"../lang/isObject":39,"./debounce":11}],14:[function(a,b){function c(a,b){var c=-1,d=a.length;for(b||(b=Array(d));++c<d;)b[c]=a[c];return b}b.exports=c},{}],15:[function(a,b){function c(a,b){for(var c=-1,d=a.length;++c<d&&b(a[c],c,a)!==!1;);return a}b.exports=c},{}],16:[function(a,b){function c(a,b,c){c||(c={});for(var d=-1,e=b.length;++d<e;){var f=b[d];c[f]=a[f]}return c}b.exports=c},{}],17:[function(a,b){var c=a("./createBaseFor"),d=c();b.exports=d},{"./createBaseFor":24}],18:[function(a,b){function c(a,b){return d(a,b,e)}var d=a("./baseFor"),e=a("../object/keysIn");b.exports=c},{"../object/keysIn":45,"./baseFor":17}],19:[function(a,b){function c(a,b,l,m,n){if(!h(a))return a;var o=g(b)&&(f(b)||j(b)),p=o?void 0:k(b);return d(p||b,function(d,f){if(p&&(f=d,d=b[f]),i(d))m||(m=[]),n||(n=[]),e(a,b,f,c,l,m,n);else{var g=a[f],h=l?l(g,d,f,a,b):void 0,j=void 0===h;j&&(h=d),void 0===h&&(!o||f in a)||!j&&(h===h?h===g:g!==g)||(a[f]=h)}}),a}var d=a("./arrayEach"),e=a("./baseMergeDeep"),f=a("../lang/isArray"),g=a("./isArrayLike"),h=a("../lang/isObject"),i=a("./isObjectLike"),j=a("../lang/isTypedArray"),k=a("../object/keys");b.exports=c},{"../lang/isArray":36,"../lang/isObject":39,"../lang/isTypedArray":42,"../object/keys":44,"./arrayEach":15,"./baseMergeDeep":20,"./isArrayLike":27,"./isObjectLike":32}],20:[function(a,b){function c(a,b,c,k,l,m,n){for(var o=m.length,p=b[c];o--;)if(m[o]==p)return void(a[c]=n[o]);var q=a[c],r=l?l(q,p,c,a,b):void 0,s=void 0===r;s&&(r=p,g(p)&&(f(p)||i(p))?r=f(q)?q:g(q)?d(q):[]:h(p)||e(p)?r=e(q)?j(q):h(q)?q:{}:s=!1),m.push(p),n.push(r),s?a[c]=k(r,p,l,m,n):(r===r?r!==q:q===q)&&(a[c]=r)}var d=a("./arrayCopy"),e=a("../lang/isArguments"),f=a("../lang/isArray"),g=a("./isArrayLike"),h=a("../lang/isPlainObject"),i=a("../lang/isTypedArray"),j=a("../lang/toPlainObject");b.exports=c},{"../lang/isArguments":35,"../lang/isArray":36,"../lang/isPlainObject":40,"../lang/isTypedArray":42,"../lang/toPlainObject":43,"./arrayCopy":14,"./isArrayLike":27}],21:[function(a,b){function c(a){return function(b){return null==b?void 0:d(b)[a]}}var d=a("./toObject");b.exports=c},{"./toObject":34}],22:[function(a,b){function c(a,b,c){if("function"!=typeof a)return d;if(void 0===b)return a;switch(c){case 1:return function(c){return a.call(b,c)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)};case 5:return function(c,d,e,f,g){return a.call(b,c,d,e,f,g)}}return function(){return a.apply(b,arguments)}}var d=a("../utility/identity");b.exports=c},{"../utility/identity":48}],23:[function(a,b){function c(a){return f(function(b,c){var f=-1,g=null==b?0:c.length,h=g>2?c[g-2]:void 0,i=g>2?c[2]:void 0,j=g>1?c[g-1]:void 0;for("function"==typeof h?(h=d(h,j,5),g-=2):(h="function"==typeof j?j:void 0,g-=h?1:0),i&&e(c[0],c[1],i)&&(h=3>g?void 0:h,g=1);++f<g;){var k=c[f];k&&a(b,k,h)}return b})}var d=a("./bindCallback"),e=a("./isIterateeCall"),f=a("../function/restParam");b.exports=c},{"../function/restParam":12,"./bindCallback":22,"./isIterateeCall":30}],24:[function(a,b){function c(a){return function(b,c,e){for(var f=d(b),g=e(b),h=g.length,i=a?h:-1;a?i--:++i<h;){var j=g[i];if(c(f[j],j,f)===!1)break}return b}}var d=a("./toObject");b.exports=c},{"./toObject":34}],25:[function(a,b){var c=a("./baseProperty"),d=c("length");b.exports=d},{"./baseProperty":21}],26:[function(a,b){function c(a,b){var c=null==a?void 0:a[b];return d(c)?c:void 0}var d=a("../lang/isNative");b.exports=c},{"../lang/isNative":38}],27:[function(a,b){function c(a){return null!=a&&e(d(a))}var d=a("./getLength"),e=a("./isLength");b.exports=c},{"./getLength":25,"./isLength":31}],28:[function(a,b){var c=function(){try{Object({toString:0}+"")}catch(a){return function(){return!1}}return function(a){return"function"!=typeof a.toString&&"string"==typeof(a+"")}}();b.exports=c},{}],29:[function(a,b){function c(a,b){return a="number"==typeof a||d.test(a)?+a:-1,b=null==b?e:b,a>-1&&a%1==0&&b>a}var d=/^\d+$/,e=9007199254740991;b.exports=c},{}],30:[function(a,b){function c(a,b,c){if(!f(c))return!1;var g=typeof b;if("number"==g?d(c)&&e(b,c.length):"string"==g&&b in c){var h=c[b];return a===a?a===h:h!==h}return!1}var d=a("./isArrayLike"),e=a("./isIndex"),f=a("../lang/isObject");b.exports=c},{"../lang/isObject":39,"./isArrayLike":27,"./isIndex":29}],31:[function(a,b){function c(a){return"number"==typeof a&&a>-1&&a%1==0&&d>=a}var d=9007199254740991;b.exports=c},{}],32:[function(a,b){function c(a){return!!a&&"object"==typeof a}b.exports=c},{}],33:[function(a,b){function c(a){for(var b=i(a),c=b.length,j=c&&a.length,l=!!j&&g(j)&&(e(a)||d(a)||h(a)),m=-1,n=[];++m<c;){var o=b[m];(l&&f(o,j)||k.call(a,o))&&n.push(o)}return n}var d=a("../lang/isArguments"),e=a("../lang/isArray"),f=a("./isIndex"),g=a("./isLength"),h=a("../lang/isString"),i=a("../object/keysIn"),j=Object.prototype,k=j.hasOwnProperty;b.exports=c},{"../lang/isArguments":35,"../lang/isArray":36,"../lang/isString":41,"../object/keysIn":45,"./isIndex":29,"./isLength":31}],34:[function(a,b){function c(a){if(f.unindexedChars&&e(a)){for(var b=-1,c=a.length,g=Object(a);++b<c;)g[b]=a.charAt(b);return g}return d(a)?a:Object(a)}var d=a("../lang/isObject"),e=a("../lang/isString"),f=a("../support");b.exports=c},{"../lang/isObject":39,"../lang/isString":41,"../support":47}],35:[function(a,b){function c(a){return e(a)&&d(a)&&g.call(a,"callee")&&!h.call(a,"callee")}var d=a("../internal/isArrayLike"),e=a("../internal/isObjectLike"),f=Object.prototype,g=f.hasOwnProperty,h=f.propertyIsEnumerable;b.exports=c},{"../internal/isArrayLike":27,"../internal/isObjectLike":32}],36:[function(a,b){var c=a("../internal/getNative"),d=a("../internal/isLength"),e=a("../internal/isObjectLike"),f="[object Array]",g=Object.prototype,h=g.toString,i=c(Array,"isArray"),j=i||function(a){return e(a)&&d(a.length)&&h.call(a)==f};b.exports=j},{"../internal/getNative":26,"../internal/isLength":31,"../internal/isObjectLike":32}],37:[function(a,b){function c(a){return d(a)&&g.call(a)==e}var d=a("./isObject"),e="[object Function]",f=Object.prototype,g=f.toString;b.exports=c},{"./isObject":39}],38:[function(a,b){function c(a){return null==a?!1:d(a)?k.test(i.call(a)):f(a)&&(e(a)?k:g).test(a)}var d=a("./isFunction"),e=a("../internal/isHostObject"),f=a("../internal/isObjectLike"),g=/^\[object .+?Constructor\]$/,h=Object.prototype,i=Function.prototype.toString,j=h.hasOwnProperty,k=RegExp("^"+i.call(j).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");b.exports=c},{"../internal/isHostObject":28,"../internal/isObjectLike":32,"./isFunction":37}],39:[function(a,b){function c(a){var b=typeof a;return!!a&&("object"==b||"function"==b)}b.exports=c},{}],40:[function(a,b){function c(a){var b;if(!g(a)||l.call(a)!=i||f(a)||e(a)||!k.call(a,"constructor")&&(b=a.constructor,"function"==typeof b&&!(b instanceof b)))return!1;var c;return h.ownLast?(d(a,function(a,b,d){return c=k.call(d,b),!1}),c!==!1):(d(a,function(a,b){c=b}),void 0===c||k.call(a,c))}var d=a("../internal/baseForIn"),e=a("./isArguments"),f=a("../internal/isHostObject"),g=a("../internal/isObjectLike"),h=a("../support"),i="[object Object]",j=Object.prototype,k=j.hasOwnProperty,l=j.toString;b.exports=c},{"../internal/baseForIn":18,"../internal/isHostObject":28,"../internal/isObjectLike":32,"../support":47,"./isArguments":35}],41:[function(a,b){function c(a){return"string"==typeof a||d(a)&&g.call(a)==e}var d=a("../internal/isObjectLike"),e="[object String]",f=Object.prototype,g=f.toString;b.exports=c},{"../internal/isObjectLike":32}],42:[function(a,b){function c(a){return e(a)&&d(a.length)&&!!C[E.call(a)]}var d=a("../internal/isLength"),e=a("../internal/isObjectLike"),f="[object Arguments]",g="[object Array]",h="[object Boolean]",i="[object Date]",j="[object Error]",k="[object Function]",l="[object Map]",m="[object Number]",n="[object Object]",o="[object RegExp]",p="[object Set]",q="[object String]",r="[object WeakMap]",s="[object ArrayBuffer]",t="[object Float32Array]",u="[object Float64Array]",v="[object Int8Array]",w="[object Int16Array]",x="[object Int32Array]",y="[object Uint8Array]",z="[object Uint8ClampedArray]",A="[object Uint16Array]",B="[object Uint32Array]",C={};C[t]=C[u]=C[v]=C[w]=C[x]=C[y]=C[z]=C[A]=C[B]=!0,C[f]=C[g]=C[s]=C[h]=C[i]=C[j]=C[k]=C[l]=C[m]=C[n]=C[o]=C[p]=C[q]=C[r]=!1;var D=Object.prototype,E=D.toString;b.exports=c},{"../internal/isLength":31,"../internal/isObjectLike":32}],43:[function(a,b){function c(a){return d(a,e(a))}var d=a("../internal/baseCopy"),e=a("../object/keysIn");b.exports=c},{"../internal/baseCopy":16,"../object/keysIn":45}],44:[function(a,b){var c=a("../internal/getNative"),d=a("../internal/isArrayLike"),e=a("../lang/isObject"),f=a("../internal/shimKeys"),g=a("../support"),h=c(Object,"keys"),i=h?function(a){var b=null==a?void 0:a.constructor;return"function"==typeof b&&b.prototype===a||("function"==typeof a?g.enumPrototypes:d(a))?f(a):e(a)?h(a):[]}:f;b.exports=i},{"../internal/getNative":26,"../internal/isArrayLike":27,"../internal/shimKeys":33,"../lang/isObject":39,"../support":47}],45:[function(a,b){function c(a){if(null==a)return[];j(a)||(a=Object(a));var b=a.length;b=b&&i(b)&&(f(a)||e(a)||k(a))&&b||0;for(var c=a.constructor,d=-1,m=g(c)&&c.prototype||x,n=m===a,o=Array(b),q=b>0,r=l.enumErrorProps&&(a===w||a instanceof Error),t=l.enumPrototypes&&g(a);++d<b;)o[d]=d+"";for(var C in a)t&&"prototype"==C||r&&("message"==C||"name"==C)||q&&h(C,b)||"constructor"==C&&(n||!z.call(a,C))||o.push(C);if(l.nonEnumShadows&&a!==x){var D=a===y?u:a===w?p:A.call(a),E=B[D]||B[s];for(D==s&&(m=x),b=v.length;b--;){C=v[b];var F=E[C];n&&F||(F?!z.call(a,C):a[C]===m[C])||o.push(C)}}return o}var d=a("../internal/arrayEach"),e=a("../lang/isArguments"),f=a("../lang/isArray"),g=a("../lang/isFunction"),h=a("../internal/isIndex"),i=a("../internal/isLength"),j=a("../lang/isObject"),k=a("../lang/isString"),l=a("../support"),m="[object Array]",n="[object Boolean]",o="[object Date]",p="[object Error]",q="[object Function]",r="[object Number]",s="[object Object]",t="[object RegExp]",u="[object String]",v=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],w=Error.prototype,x=Object.prototype,y=String.prototype,z=x.hasOwnProperty,A=x.toString,B={};B[m]=B[o]=B[r]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},B[n]=B[u]={constructor:!0,toString:!0,valueOf:!0},B[p]=B[q]=B[t]={constructor:!0,toString:!0},B[s]={constructor:!0},d(v,function(a){for(var b in B)if(z.call(B,b)){var c=B[b];c[a]=z.call(c,a)}}),b.exports=c},{"../internal/arrayEach":15,"../internal/isIndex":29,"../internal/isLength":31,"../lang/isArguments":35,"../lang/isArray":36,"../lang/isFunction":37,"../lang/isObject":39,"../lang/isString":41,"../support":47}],46:[function(a,b){var c=a("../internal/baseMerge"),d=a("../internal/createAssigner"),e=d(c);b.exports=e},{"../internal/baseMerge":19,"../internal/createAssigner":23}],47:[function(a,b){var c=Array.prototype,d=Error.prototype,e=Object.prototype,f=e.propertyIsEnumerable,g=c.splice,h={};!function(a){var b=function(){this.x=a},c={0:a,length:a},e=[];b.prototype={valueOf:a,y:a};for(var i in new b)e.push(i);h.enumErrorProps=f.call(d,"message")||f.call(d,"name"),h.enumPrototypes=f.call(b,"prototype"),h.nonEnumShadows=!/valueOf/.test(e),h.ownLast="x"!=e[0],h.spliceObjects=(g.call(c,0,1),!c[0]),h.unindexedChars="x"[0]+Object("x")[0]!="xx"}(1,0),b.exports=h},{}],48:[function(a,b){function c(a){return a}b.exports=c},{}],49:[function(a,b){"use strict";var c=Object.prototype.hasOwnProperty,d=Object.prototype.toString,e=Array.prototype.slice,f=a("./isArguments"),g=Object.prototype.propertyIsEnumerable,h=!g.call({toString:null},"toString"),i=g.call(function(){},"prototype"),j=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],k=function(a){var b=a.constructor;return b&&b.prototype===a},l={$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},m=function(){if("undefined"==typeof window)return!1;for(var a in window)try{if(!l["$"+a]&&c.call(window,a)&&null!==window[a]&&"object"==typeof window[a])try{k(window[a])}catch(b){return!0}}catch(b){return!0}return!1}(),n=function(a){if("undefined"==typeof window||!m)return k(a);try{return k(a)}catch(b){return!1}},o=function(a){var b=null!==a&&"object"==typeof a,e="[object Function]"===d.call(a),g=f(a),k=b&&"[object String]"===d.call(a),l=[];if(!b&&!e&&!g)throw new TypeError("Object.keys called on a non-object");var m=i&&e;if(k&&a.length>0&&!c.call(a,0))for(var o=0;o<a.length;++o)l.push(String(o));if(g&&a.length>0)for(var p=0;p<a.length;++p)l.push(String(p));else for(var q in a)m&&"prototype"===q||!c.call(a,q)||l.push(String(q));if(h)for(var r=n(a),s=0;s<j.length;++s)r&&"constructor"===j[s]||!c.call(a,j[s])||l.push(j[s]);return l};o.shim=function(){if(Object.keys){var a=function(){return 2===(Object.keys(arguments)||"").length}(1,2);if(!a){var b=Object.keys;Object.keys=function(a){return b(f(a)?e.call(a):a)}}}else Object.keys=o;return Object.keys||o},b.exports=o},{"./isArguments":50}],50:[function(a,b){"use strict";var c=Object.prototype.toString;b.exports=function(a){var b=c.call(a),d="[object Arguments]"===b;return d||(d="[object Array]"!==b&&null!==a&&"object"==typeof a&&"number"==typeof a.length&&a.length>=0&&"[object Function]"===c.call(a.callee)),d}},{}],51:[function(a,b){"use strict";var c=a("object-keys");b.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var a={},b=Symbol("test"),d=Object(b);if("string"==typeof b)return!1;if("[object Symbol]"!==Object.prototype.toString.call(b))return!1;if("[object Symbol]"!==Object.prototype.toString.call(d))return!1;var e=42;a[b]=e;for(b in a)return!1;if(0!==c(a).length)return!1;if("function"==typeof Object.keys&&0!==Object.keys(a).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(a).length)return!1;var f=Object.getOwnPropertySymbols(a);if(1!==f.length||f[0]!==b)return!1;if(!Object.prototype.propertyIsEnumerable.call(a,b))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var g=Object.getOwnPropertyDescriptor(a,b);if(g.value!==e||g.enumerable!==!0)return!1}return!0}},{"object-keys":49}],52:[function(a,b){"use strict";var c=a("object-keys"),d=a("function-bind"),e=function(a){return"undefined"!=typeof a&&null!==a},f=a("./hasSymbols")(),g=Object,h=d.call(Function.call,Array.prototype.push),i=d.call(Function.call,Object.prototype.propertyIsEnumerable),j=f?Object.getOwnPropertySymbols:null;b.exports=function(a){if(!e(a))throw new TypeError("target must be an object");var b,d,k,l,m,n,o,p=g(a);for(b=1;b<arguments.length;++b){d=g(arguments[b]),l=c(d);var q=f&&(Object.getOwnPropertySymbols||j);if(q)for(m=q(d),k=0;k<m.length;++k)o=m[k],i(d,o)&&h(l,o);for(k=0;k<l.length;++k)o=l[k],n=d[o],i(d,o)&&(p[o]=n)}return p}},{"./hasSymbols":51,"function-bind":6,"object-keys":49}],53:[function(a,b){"use strict";var c=a("define-properties"),d=a("./implementation"),e=a("./polyfill"),f=a("./shim"),g=e();c(g,{implementation:d,getPolyfill:e,shim:f}),b.exports=g},{"./implementation":52,"./polyfill":54,"./shim":55,"define-properties":2}],54:[function(a,b){"use strict";var c=a("./implementation"),d=function(){if(!Object.assign)return!1;for(var a="abcdefghijklmnopqrst",b=a.split(""),c={},d=0;d<b.length;++d)c[b[d]]=b[d];var e=Object.assign({},c),f="";for(var g in e)f+=g;return a!==f},e=function(){if(!Object.assign||!Object.preventExtensions)return!1;var a=Object.preventExtensions({1:2});try{Object.assign(a,"xy")}catch(b){return"y"===a[1]}return!1};b.exports=function(){return Object.assign?d()?c:e()?c:Object.assign:c}},{"./implementation":52}],55:[function(a,b){"use strict";var c=a("define-properties"),d=a("./polyfill");b.exports=function(){var a=d();return c(Object,{assign:a},{assign:function(){return Object.assign!==a}}),a}},{"./polyfill":54,"define-properties":2}],56:[function(a,b){var c=a("trim"),d=a("for-each"),e=function(a){return"[object Array]"===Object.prototype.toString.call(a)};b.exports=function(a){if(!a)return{};var b={};return d(c(a).split("\n"),function(a){var d=a.indexOf(":"),f=c(a.slice(0,d)).toLowerCase(),g=c(a.slice(d+1));"undefined"==typeof b[f]?b[f]=g:e(b[f])?b[f].push(g):b[f]=[b[f],g]}),b}},{"for-each":3,trim:58}],57:[function(a,b){function c(a,b){var c,d=null;try{c=JSON.parse(a,b)}catch(e){d=e}return[d,c]}b.exports=c},{}],58:[function(a,b,c){function d(a){return a.replace(/^\s*|\s*$/g,"")}c=b.exports=d,c.left=function(a){return a.replace(/^\s*/,"")},c.right=function(a){return a.replace(/\s*$/,"")}},{}],59:[function(a,b){function c(a){return a.replace(/\n\r?\s*/g,"")}b.exports=function(a){for(var b="",d=0;d<arguments.length;d++)b+=c(a[d])+(arguments[d+1]||"");return b}},{}],60:[function(a,b){"use strict";function c(a,b){for(var c=0;c<a.length;c++)b(a[c])}function d(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}function e(a,b,c){var d=a;return k(b)?(c=b,"string"==typeof a&&(d={uri:a})):d=m(b,{uri:a}),d.callback=c,d}function f(a,b,c){return b=e(a,b,c),g(b)}function g(a){function b(){4===m.readyState&&g()}function c(){var a=void 0;if(a=m.response?m.response:m.responseText||h(m),v)try{a=JSON.parse(a)}catch(b){}return a}function e(a){return clearTimeout(p),a instanceof Error||(a=new Error(""+(a||"Unknown XMLHttpRequest Error"))),a.statusCode=0,j(a,k)}function g(){if(!o){var b;clearTimeout(p),b=a.useXDR&&void 0===m.status?200:1223===m.status?204:m.status;var d=k,e=null;return 0!==b?(d={body:c(),statusCode:b,method:r,headers:{},url:q,rawRequest:m},m.getAllResponseHeaders&&(d.headers=l(m.getAllResponseHeaders()))):e=new Error("Internal XMLHttpRequest Error"),j(e,d,d.body)}}if("undefined"==typeof a.callback)throw new Error("callback argument missing");var i=!1,j=function(b,c,d){i||(i=!0,a.callback(b,c,d))},k={body:void 0,headers:{},statusCode:0,method:r,url:q,rawRequest:m},m=a.xhr||null;m||(m=a.cors||a.useXDR?new f.XDomainRequest:new f.XMLHttpRequest);var n,o,p,q=m.url=a.uri||a.url,r=m.method=a.method||"GET",s=a.body||a.data||null,t=m.headers=a.headers||{},u=!!a.sync,v=!1;if("json"in a&&(v=!0,t.accept||t.Accept||(t.Accept="application/json"),"GET"!==r&&"HEAD"!==r&&(t["content-type"]||t["Content-Type"]||(t["Content-Type"]="application/json"),s=JSON.stringify(a.json))),m.onreadystatechange=b,m.onload=g,m.onerror=e,m.onprogress=function(){},m.ontimeout=e,m.open(r,q,!u,a.username,a.password),u||(m.withCredentials=!!a.withCredentials),!u&&a.timeout>0&&(p=setTimeout(function(){o=!0,m.abort("timeout");var a=new Error("XMLHttpRequest timeout");a.code="ETIMEDOUT",e(a)},a.timeout)),m.setRequestHeader)for(n in t)t.hasOwnProperty(n)&&m.setRequestHeader(n,t[n]);else if(a.headers&&!d(a.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in a&&(m.responseType=a.responseType),"beforeSend"in a&&"function"==typeof a.beforeSend&&a.beforeSend(m),m.send(s),m}function h(a){if("document"===a.responseType)return a.responseXML;var b=204===a.status&&a.responseXML&&"parsererror"===a.responseXML.documentElement.nodeName;return""!==a.responseType||b?null:a.responseXML}function i(){}var j=a("global/window"),k=a("is-function"),l=a("parse-headers"),m=a("xtend");b.exports=f,f.XMLHttpRequest=j.XMLHttpRequest||i,f.XDomainRequest="withCredentials"in new f.XMLHttpRequest?f.XMLHttpRequest:j.XDomainRequest,c(["get","put","post","patch","head","delete"],function(a){f["delete"===a?"del":a]=function(b,c,d){return c=e(b,c,d),c.method=a.toUpperCase(),g(c)}})},{"global/window":8,"is-function":9,"parse-headers":56,xtend:61}],61:[function(a,b){function c(){for(var a={},b=0;b<arguments.length;b++){var c=arguments[b];for(var e in c)d.call(c,e)&&(a[e]=c[e])}return a}b.exports=c;var d=Object.prototype.hasOwnProperty},{}],62:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var g=a("./button.js"),h=d(g),i=a("./component.js"),j=d(i),k=function(a){function b(c,d){e(this,b),a.call(this,c,d)}return f(b,a),b.prototype.buildCSSClass=function(){return"vjs-big-play-button"},b.prototype.handleClick=function(){this.player_.play()},b.prototype.tooltipHandler=function(){return void 0!==this.options_.tooltip?a.prototype.tooltipHandler.call(this):void 0},b}(h["default"]);k.prototype.controlText_="Play Video",j["default"].registerComponent("BigPlayButton",k),c["default"]=k,b.exports=c["default"]},{"./button.js":63,"./component.js":66}],63:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a){return a&&a.__esModule?a:{"default":a}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("./clickable-component.js"),i=e(h),j=a("./component"),k=e(j),l=a("./utils/events.js"),m=(d(l),a("./utils/fn.js")),n=(d(m),a("./utils/log.js")),o=e(n),p=a("global/document"),q=(e(p),a("object.assign")),r=e(q),s=function(a){function b(c,d){f(this,b),a.call(this,c,d)}return g(b,a),b.prototype.createEl=function(){var a=arguments.length<=0||void 0===arguments[0]?"button":arguments[0],b=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],c=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];b=r["default"]({className:this.buildCSSClass()},b),"button"!==a&&(o["default"].warn("Creating a Button with an HTML element of "+a+" is deprecated; use ClickableComponent instead."),b=r["default"]({tabIndex:0},b),c=r["default"]({role:"button"},c)),c=r["default"]({type:"button","aria-live":"polite"},c);var d=k["default"].prototype.createEl.call(this,a,b,c);return this.createControlTextEl(d),d},b.prototype.addChild=function(a){var b=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],c=this.constructor.name;return o["default"].warn("Adding an actionable (user controllable) child to a Button ("+c+") is not supported; use a ClickableComponent instead."),k["default"].prototype.addChild.call(this,a,b)},b.prototype.handleKeyPress=function(b){32===b.which||13===b.which||a.prototype.handleKeyPress.call(this,b)},b}(i["default"]);k["default"].registerComponent("Button",s),c["default"]=s,b.exports=c["default"]},{"./clickable-component.js":64,"./component":66,"./utils/events.js":145,"./utils/fn.js":146,"./utils/log.js":149,"global/document":7,"object.assign":53}],64:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a){return a&&a.__esModule?a:{"default":a}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("./component"),i=e(h),j=a("./utils/dom.js"),k=d(j),l=a("./utils/events.js"),m=d(l),n=a("./utils/fn.js"),o=d(n),p=a("./utils/log.js"),q=e(p),r=a("global/document"),s=e(r),t=a("object.assign"),u=e(t),v=a("./tooltip"),w=e(v),x=function(a){function b(c,d){f(this,b),a.call(this,c,d),this.appendTooltip(),this.emitTapEvents(),this.on("tap",this.handleClick),this.on("click",this.handleClick),this.on("focus",this.handleFocus),this.on("blur",this.handleBlur)}return g(b,a),b.prototype.createEl=function(){var b=arguments.length<=0||void 0===arguments[0]?"div":arguments[0],c=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],d=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];c=u["default"]({className:this.buildCSSClass(),tabIndex:0},c),"button"===b&&q["default"].error("Creating a ClickableComponent with an HTML element of "+b+" is not supported; use a Button instead."),d=u["default"]({role:"button","aria-live":"polite"},d);var e=a.prototype.createEl.call(this,b,c,d);return this.createControlTextEl(e),e},b.prototype.createControlTextEl=function(a){return this.controlTextEl_=k.createEl("span",{className:"vjs-control-text"}),a&&a.appendChild(this.controlTextEl_),this.controlText(this.controlText_),this.controlTextEl_},b.prototype.controlText=function(a){return a?(this.controlText_=a,this.controlTextEl_.innerHTML=this.localize(this.controlText_),this.tooltip?this.tooltip.text(this.controlText_):this.appendTooltip(),this):this.controlText_||"Need Text"},b.prototype.buildCSSClass=function(){return"vjs-control vjs-button "+a.prototype.buildCSSClass.call(this)},b.prototype.addChild=function(b){var c=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return a.prototype.addChild.call(this,b,c)},b.prototype.enable=function(){return this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),this},b.prototype.disable=function(){return this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),
this},b.prototype.handleClick=function(){},b.prototype.handleFocus=function(){m.on(s["default"],"keydown",o.bind(this,this.handleKeyPress))},b.prototype.handleKeyPress=function(b){32===b.which||13===b.which?(b.preventDefault(),this.handleClick(b)):a.prototype.handleKeyPress&&a.prototype.handleKeyPress.call(this,b)},b.prototype.handleBlur=function(){m.off(s["default"],"keydown",o.bind(this,this.handleKeyPress))},b.prototype.appendTooltip=function(){if(!this.tooltip&&this.controlText_&&this.el()){var a=this.tooltipHandler();a&&(this.tooltip=new w["default"](this.player_),this.el().appendChild(this.tooltip.el()),this.tooltip.text(this.controlText_),this.tooltip.handler(a))}},b.prototype.tooltipHandler=function(){var a=this.options_.tooltip;if(a!==!1)return a===!0||this.player_.options_&&this.player_.options_.tooltips?this.el():"string"==typeof a?k.getEl(a):a&&"function"==typeof a.el?a.el():a},b}(i["default"]);i["default"].registerComponent("ClickableComponent",x),c["default"]=x,b.exports=c["default"]},{"./component":66,"./tooltip":125,"./utils/dom.js":144,"./utils/events.js":145,"./utils/fn.js":146,"./utils/log.js":149,"global/document":7,"object.assign":53}],65:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var g=a("./button"),h=d(g),i=a("./component"),j=d(i),k=function(a){function b(c,d){e(this,b),a.call(this,c,d),this.controlText(d&&d.controlText||this.localize("Close"))}return f(b,a),b.prototype.buildCSSClass=function(){return"vjs-close-button "+a.prototype.buildCSSClass.call(this)},b.prototype.handleClick=function(){this.trigger({type:"close",bubbles:!1})},b}(h["default"]);j["default"].registerComponent("CloseButton",k),c["default"]=k,b.exports=c["default"]},{"./button":63,"./component":66}],66:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a){return a&&a.__esModule?a:{"default":a}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var g=a("global/window"),h=e(g),i=a("./utils/dom.js"),j=d(i),k=a("./utils/fn.js"),l=d(k),m=a("./utils/guid.js"),n=d(m),o=a("./utils/events.js"),p=d(o),q=a("./utils/log.js"),r=e(q),s=a("./utils/to-title-case.js"),t=e(s),u=a("object.assign"),v=e(u),w=a("./utils/merge-options.js"),x=e(w),y=function(){function a(b,c,d){if(f(this,a),this.player_=!b&&this.play?b=this:b,this.options_=x["default"]({},this.options_),c=this.options_=x["default"](this.options_,c),this.id_=c.id||c.el&&c.el.id,!this.id_){var e=b&&b.id&&b.id()||"no_player";this.id_=e+"_component_"+n.newGUID()}this.name_=c.name||null,c.el?this.el_=c.el:c.createEl!==!1&&(this.el_=this.createEl()),this.children_=[],this.childIndex_={},this.childNameIndex_={},c.initChildren!==!1&&this.initChildren(),this.ready(d),c.reportTouchActivity!==!1&&this.enableTouchActivity()}return a.prototype.dispose=function(){if(this.trigger({type:"dispose",bubbles:!1}),this.children_)for(var a=this.children_.length-1;a>=0;a--)this.children_[a].dispose&&this.children_[a].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.off(),this.el_.parentNode&&this.el_.parentNode.removeChild(this.el_),j.removeElData(this.el_),this.el_=null},a.prototype.player=function(){return this.player_},a.prototype.options=function(a){return r["default"].warn("this.options() has been deprecated and will be moved to the constructor in 6.0"),a?(this.options_=x["default"](this.options_,a),this.options_):this.options_},a.prototype.el=function(){return this.el_},a.prototype.createEl=function(a,b,c){return j.createEl(a,b,c)},a.prototype.localize=function(a){var b=this.player_.language&&this.player_.language(),c=this.player_.languages&&this.player_.languages();if(!b||!c)return a;var d=c[b];if(d&&d[a])return d[a];var e=b.split("-")[0],f=c[e];return f&&f[a]?f[a]:a},a.prototype.contentEl=function(){return this.contentEl_||this.el_},a.prototype.id=function(){return this.id_},a.prototype.name=function(){return this.name_},a.prototype.children=function(){return this.children_},a.prototype.getChildById=function(a){return this.childIndex_[a]},a.prototype.getChild=function(a){return this.childNameIndex_[a]},a.prototype.addChild=function(b){var c=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],d=arguments.length<=2||void 0===arguments[2]?this.children_.length:arguments[2],e=void 0,f=void 0;if("string"==typeof b){f=b,c||(c={}),c===!0&&(r["default"].warn("Initializing a child component with `true` is deprecated. Children should be defined in an array when possible, but if necessary use an object instead of `true`."),c={});var g=c.componentClass||t["default"](f);c.name=f;var h=a.getComponent(g);if(!h)throw new Error("Component "+g+" does not exist");if("function"!=typeof h)return null;e=new h(this.player_||this,c)}else e=b;if(this.children_.splice(d,0,e),"function"==typeof e.id&&(this.childIndex_[e.id()]=e),f=f||e.name&&e.name(),f&&(this.childNameIndex_[f]=e),"function"==typeof e.el&&e.el()){var i=this.contentEl().children,j=i[d]||null;this.contentEl().insertBefore(e.el(),j)}return e},a.prototype.removeChild=function(a){if("string"==typeof a&&(a=this.getChild(a)),a&&this.children_){for(var b=!1,c=this.children_.length-1;c>=0;c--)if(this.children_[c]===a){b=!0,this.children_.splice(c,1);break}if(b){this.childIndex_[a.id()]=null,this.childNameIndex_[a.name()]=null;var d=a.el();d&&d.parentNode===this.contentEl()&&this.contentEl().removeChild(a.el())}}},a.prototype.initChildren=function(){var b=this,c=this.options_.children;c&&!function(){var d=b.options_,e=function(a){var c=a.name,e=a.opts;if(void 0!==d[c]&&(e=d[c]),e!==!1){e===!0&&(e={}),e.playerOptions=b.options_.playerOptions;var f=b.addChild(c,e);f&&(b[c]=f)}},f=void 0,g=a.getComponent("Tech");f=Array.isArray(c)?c:Object.keys(c),f.concat(Object.keys(b.options_).filter(function(a){return!f.some(function(b){return"string"==typeof b?a===b:a===b.name})})).map(function(a){var d=void 0,e=void 0;return"string"==typeof a?(d=a,e=c[d]||b.options_[d]||{}):(d=a.name,e=a),{name:d,opts:e}}).filter(function(b){var c=a.getComponent(b.opts.componentClass||t["default"](b.name));return c&&!g.isTech(c)}).forEach(e)}()},a.prototype.buildCSSClass=function(){return""},a.prototype.on=function(a,b,c){var d=this;return"string"==typeof a||Array.isArray(a)?p.on(this.el_,a,l.bind(this,b)):!function(){var e=a,f=b,g=l.bind(d,c),h=function(){return d.off(e,f,g)};h.guid=g.guid,d.on("dispose",h);var i=function(){return d.off("dispose",h)};i.guid=g.guid,a.nodeName?(p.on(e,f,g),p.on(e,"dispose",i)):"function"==typeof a.on&&(e.on(f,g),e.on("dispose",i))}(),this},a.prototype.off=function(a,b,c){if(!a||"string"==typeof a||Array.isArray(a))p.off(this.el_,a,b);else{var d=a,e=b,f=l.bind(this,c);this.off("dispose",f),a.nodeName?(p.off(d,e,f),p.off(d,"dispose",f)):(d.off(e,f),d.off("dispose",f))}return this},a.prototype.one=function(a,b,c){var d=this,e=arguments;return"string"==typeof a||Array.isArray(a)?p.one(this.el_,a,l.bind(this,b)):!function(){var f=a,g=b,h=l.bind(d,c),i=function j(){d.off(f,g,j),h.apply(null,e)};i.guid=h.guid,d.on(f,g,i)}(),this},a.prototype.trigger=function(a,b){return p.trigger(this.el_,a,b),this},a.prototype.ready=function(a){var b=arguments.length<=1||void 0===arguments[1]?!1:arguments[1];return a&&(this.isReady_?b?a.call(this):this.setTimeout(a,1):(this.readyQueue_=this.readyQueue_||[],this.readyQueue_.push(a))),this},a.prototype.triggerReady=function(){this.isReady_=!0,this.setTimeout(function(){var a=this.readyQueue_;this.readyQueue_=[],a&&a.length>0&&a.forEach(function(a){a.call(this)},this),this.trigger("ready")},1)},a.prototype.$=function(a,b){return j.$(a,b||this.contentEl())},a.prototype.$$=function(a,b){return j.$$(a,b||this.contentEl())},a.prototype.hasClass=function(a){return j.hasElClass(this.el_,a)},a.prototype.addClass=function(a){return j.addElClass(this.el_,a),this},a.prototype.removeClass=function(a){return j.removeElClass(this.el_,a),this},a.prototype.toggleClass=function(a,b){return j.toggleElClass(this.el_,a,b),this},a.prototype.show=function(){return this.removeClass("vjs-hidden"),this},a.prototype.hide=function(){return this.addClass("vjs-hidden"),this},a.prototype.lockShowing=function(){return this.addClass("vjs-lock-showing"),this},a.prototype.unlockShowing=function(){return this.removeClass("vjs-lock-showing"),this},a.prototype.width=function(a,b){return this.dimension("width",a,b)},a.prototype.height=function(a,b){return this.dimension("height",a,b)},a.prototype.dimensions=function(a,b){return this.width(a,!0).height(b)},a.prototype.dimension=function(a,b,c){if(void 0!==b)return(null===b||b!==b)&&(b=0),this.el_.style[a]=-1!==(""+b).indexOf("%")||-1!==(""+b).indexOf("px")?b:"auto"===b?"":b+"px",c||this.trigger("resize"),this;if(!this.el_)return 0;var d=this.el_.style[a],e=d.indexOf("px");return-1!==e?parseInt(d.slice(0,e),10):parseInt(this.el_["offset"+t["default"](a)],10)},a.prototype.currentDimension=function(a){var b=0;if("width"!==a&&"height"!==a)throw new Error("currentDimension only accepts width or height value");if("function"==typeof h["default"].getComputedStyle){var c=h["default"].getComputedStyle(this.el_);b=c.getPropertyValue(a)||c[a]}else if(this.el_.currentStyle){var d="offset"+t["default"](a);b=this.el_[d]}return b=parseFloat(b)},a.prototype.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},a.prototype.currentWidth=function(){return this.currentDimension("width")},a.prototype.currentHeight=function(){return this.currentDimension("height")},a.prototype.emitTapEvents=function(){var a=0,b=null,c=10,d=200,e=void 0;this.on("touchstart",function(c){1===c.touches.length&&(b=v["default"]({},c.touches[0]),a=(new Date).getTime(),e=!0)}),this.on("touchmove",function(a){if(a.touches.length>1)e=!1;else if(b){var d=a.touches[0].pageX-b.pageX,f=a.touches[0].pageY-b.pageY,g=Math.sqrt(d*d+f*f);g>c&&(e=!1)}});var f=function(){e=!1};this.on("touchleave",f),this.on("touchcancel",f),this.on("touchend",function(c){if(b=null,e===!0){var f=(new Date).getTime()-a;d>f&&(c.preventDefault(),this.trigger("tap"))}})},a.prototype.enableTouchActivity=function(){if(this.player()&&this.player().reportUserActivity){var a=l.bind(this.player(),this.player().reportUserActivity),b=void 0;this.on("touchstart",function(){a(),this.clearInterval(b),b=this.setInterval(a,250)});var c=function(){a(),this.clearInterval(b)};this.on("touchmove",a),this.on("touchend",c),this.on("touchcancel",c)}},a.prototype.setTimeout=function(a,b){a=l.bind(this,a);var c=h["default"].setTimeout(a,b),d=function(){this.clearTimeout(c)};return d.guid="vjs-timeout-"+c,this.on("dispose",d),c},a.prototype.clearTimeout=function(a){h["default"].clearTimeout(a);var b=function(){};return b.guid="vjs-timeout-"+a,this.off("dispose",b),a},a.prototype.setInterval=function(a,b){a=l.bind(this,a);var c=h["default"].setInterval(a,b),d=function(){this.clearInterval(c)};return d.guid="vjs-interval-"+c,this.on("dispose",d),c},a.prototype.clearInterval=function(a){h["default"].clearInterval(a);var b=function(){};return b.guid="vjs-interval-"+a,this.off("dispose",b),a},a.registerComponent=function(b,c){return a.components_||(a.components_={}),a.components_[b]=c,c},a.getComponent=function(b){return a.components_&&a.components_[b]?a.components_[b]:h["default"]&&h["default"].videojs&&h["default"].videojs[b]?(r["default"].warn("The "+b+" component was added to the videojs object when it should be registered using videojs.registerComponent(name, component)"),h["default"].videojs[b]):void 0},a.extend=function(b){b=b||{},r["default"].warn("Component.extend({}) has been deprecated, use videojs.extend(Component, {}) instead");var c=b.init||b.init||this.prototype.init||this.prototype.init||function(){},d=function(){c.apply(this,arguments)};d.prototype=Object.create(this.prototype),d.prototype.constructor=d,d.extend=a.extend;for(var e in b)b.hasOwnProperty(e)&&(d.prototype[e]=b[e]);return d},a}();y.registerComponent("Component",y),c["default"]=y,b.exports=c["default"]},{"./utils/dom.js":144,"./utils/events.js":145,"./utils/fn.js":146,"./utils/guid.js":148,"./utils/log.js":149,"./utils/merge-options.js":150,"./utils/to-title-case.js":153,"global/window":8,"object.assign":53}],67:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a){return a&&a.__esModule?a:{"default":a}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("../track-button.js"),i=e(h),j=a("../../component.js"),k=e(j),l=a("../../utils/fn.js"),m=(d(l),a("./audio-track-menu-item.js")),n=e(m),o=function(a){function b(c){var d=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];f(this,b),d.tracks=c.audioTracks&&c.audioTracks(),a.call(this,c,d),this.el_.setAttribute("aria-label","Audio Menu")}return g(b,a),b.prototype.buildCSSClass=function(){return"vjs-audio-button "+a.prototype.buildCSSClass.call(this)},b.prototype.createItems=function(){var a=arguments.length<=0||void 0===arguments[0]?[]:arguments[0],b=this.player_.audioTracks&&this.player_.audioTracks();if(!b)return a;for(var c=0;c<b.length;c++){var d=b[c];a.push(new n["default"](this.player_,{selectable:!0,track:d}))}return a},b}(i["default"]);k["default"].registerComponent("AudioTrackButton",o),c["default"]=o,b.exports=c["default"]},{"../../component.js":66,"../../utils/fn.js":146,"../track-button.js":97,"./audio-track-menu-item.js":68}],68:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a){return a&&a.__esModule?a:{"default":a}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("../../menu/menu-item.js"),i=e(h),j=a("../../component.js"),k=e(j),l=a("../../utils/fn.js"),m=d(l),n=function(a){function b(c,d){var e=this;f(this,b);var g=d.track,h=c.audioTracks();d.label=g.label||g.language||"Unknown",d.selected=g.enabled,a.call(this,c,d),this.track=g,h&&!function(){var a=m.bind(e,e.handleTracksChange);h.addEventListener("change",a),e.on("dispose",function(){h.removeEventListener("change",a)})}()}return g(b,a),b.prototype.handleClick=function(b){var c=this.player_.audioTracks();if(a.prototype.handleClick.call(this,b),c)for(var d=0;d<c.length;d++){var e=c[d];e===this.track&&(e.enabled=!0)}},b.prototype.handleTracksChange=function(){this.selected(this.track.enabled)},b}(i["default"]);k["default"].registerComponent("AudioTrackMenuItem",n),c["default"]=n,b.exports=c["default"]},{"../../component.js":66,"../../menu/menu-item.js":110,"../../utils/fn.js":146}],69:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var g=a("../component.js"),h=d(g),i=a("./play-toggle.js"),j=(d(i),a("./time-controls/current-time-display.js")),k=(d(j),a("./time-controls/duration-display.js")),l=(d(k),a("./time-controls/time-divider.js")),m=(d(l),a("./time-controls/remaining-time-display.js")),n=(d(m),a("./live-display.js")),o=(d(n),a("./progress-control/progress-control.js")),p=(d(o),a("./fullscreen-toggle.js")),q=(d(p),a("./volume-control/volume-control.js")),r=(d(q),a("./volume-menu-button.js")),s=(d(r),a("./mute-toggle.js")),t=(d(s),a("./text-track-controls/chapters-button.js")),u=(d(t),a("./text-track-controls/descriptions-button.js")),v=(d(u),a("./text-track-controls/subtitles-button.js")),w=(d(v),a("./text-track-controls/captions-button.js")),x=(d(w),a("./audio-track-controls/audio-track-button.js")),y=(d(x),a("./playback-rate-menu/playback-rate-menu-button.js")),z=(d(y),a("./spacer-controls/custom-control-spacer.js")),A=(d(z),function(a){function b(){e(this,b),a.apply(this,arguments)}return f(b,a),b.prototype.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"},{role:"group"})},b}(h["default"]));A.prototype.options_={loadEvent:"play",children:["playToggle","volumeMenuButton","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subtitlesButton","captionsButton","audioTrackButton","fullscreenToggle"]},h["default"].registerComponent("ControlBar",A),c["default"]=A,b.exports=c["default"]},{"../component.js":66,"./audio-track-controls/audio-track-button.js":67,"./fullscreen-toggle.js":70,"./live-display.js":71,"./mute-toggle.js":72,"./play-toggle.js":73,"./playback-rate-menu/playback-rate-menu-button.js":74,"./progress-control/progress-control.js":79,"./spacer-controls/custom-control-spacer.js":82,"./text-track-controls/captions-button.js":85,"./text-track-controls/chapters-button.js":86,"./text-track-controls/descriptions-button.js":88,"./text-track-controls/subtitles-button.js":90,"./time-controls/current-time-display.js":93,"./time-controls/duration-display.js":94,"./time-controls/remaining-time-display.js":95,"./time-controls/time-divider.js":96,"./volume-control/volume-control.js":99,"./volume-menu-button.js":102}],70:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a){return a&&a.__esModule?a:{"default":a}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("../button.js"),i=e(h),j=a("../component.js"),k=e(j),l=a("../utils/fn.js"),m=d(l),n=function(a){function b(c,d){var e=this;f(this,b),a.call(this,c,d),c.on("ready",function(){e.player_.on("fullscreenchange",m.bind(e,e.updateHint))})}return g(b,a),b.prototype.buildCSSClass=function(){return"vjs-fullscreen-control "+a.prototype.buildCSSClass.call(this)},b.prototype.handleClick=function(){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen(),this.updateHint()},b.prototype.updateHint=function(){this.controlText(this.player_.isFullscreen()?"Exit fullscreen":"Fullscreen")},b}(i["default"]);n.prototype.controlText_="Fullscreen",k["default"].registerComponent("FullscreenToggle",n),c["default"]=n,b.exports=c["default"]},{"../button.js":63,"../component.js":66,"../utils/fn.js":146}],71:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a){return a&&a.__esModule?a:{"default":a}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("../component"),i=e(h),j=a("../utils/dom.js"),k=d(j),l=function(a){function b(c,d){f(this,b),a.call(this,c,d),this.updateShowing(),this.on(this.player(),"durationchange",this.updateShowing)}return g(b,a),b.prototype.createEl=function(){var b=a.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=k.createEl("div",{className:"vjs-live-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Stream Type")+"</span>"+this.localize("LIVE")},{"aria-live":"off"}),b.appendChild(this.contentEl_),b},b.prototype.updateShowing=function(){this.player().duration()===1/0?this.show():this.hide()},b}(i["default"]);i["default"].registerComponent("LiveDisplay",l),c["default"]=l,b.exports=c["default"]},{"../component":66,"../utils/dom.js":144}],72:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a){return a&&a.__esModule?a:{"default":a}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("../button"),i=e(h),j=a("../component"),k=e(j),l=a("../utils/dom.js"),m=d(l),n=function(a){function b(c,d){f(this,b),a.call(this,c,d),this.on(c,"volumechange",this.update),c.tech_&&c.tech_.featuresVolumeControl===!1&&this.addClass("vjs-hidden"),this.on(c,"loadstart",function(){this.update(),c.tech_.featuresVolumeControl===!1?this.addClass("vjs-hidden"):this.removeClass("vjs-hidden")})}return g(b,a),b.prototype.buildCSSClass=function(){return"vjs-mute-control "+a.prototype.buildCSSClass.call(this)},b.prototype.handleClick=function(){this.player_.muted(this.player_.muted()?!1:!0)},b.prototype.update=function(){var a=this.player_.volume(),b=3;0===a||this.player_.muted()?b=0:.33>a?b=1:.67>a&&(b=2);var c=this.player_.muted()?"Unmute":"Mute";this.controlText()!==c&&this.controlText(c);for(var d=0;4>d;d++)m.removeElClass(this.el_,"vjs-vol-"+d);m.addElClass(this.el_,"vjs-vol-"+b)},b}(i["default"]);n.prototype.controlText_="Mute",k["default"].registerComponent("MuteToggle",n),c["default"]=n,b.exports=c["default"]},{"../button":63,"../component":66,"../utils/dom.js":144}],73:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var g=a("../button.js"),h=d(g),i=a("../component.js"),j=d(i),k=function(a){function b(c,d){e(this,b),a.call(this,c,d),this.on(c,"play",this.handlePlay),this.on(c,"pause",this.handlePause)}return f(b,a),b.prototype.buildCSSClass=function(){return"vjs-play-control "+a.prototype.buildCSSClass.call(this)},b.prototype.handleClick=function(){this.player_.paused()?this.player_.play():this.player_.pause()},b.prototype.handlePlay=function(){this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},b.prototype.handlePause=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},b}(h["default"]);k.prototype.controlText_="Play",j["default"].registerComponent("PlayToggle",k),c["default"]=k,b.exports=c["default"]},{"../button.js":63,"../component.js":66}],74:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a){return a&&a.__esModule?a:{"default":a}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("../../menu/menu-button.js"),i=e(h),j=a("../../menu/menu.js"),k=e(j),l=a("./playback-rate-menu-item.js"),m=e(l),n=a("../../component.js"),o=e(n),p=a("../../utils/dom.js"),q=d(p),r=function(a){function b(c,d){f(this,b),a.call(this,c,d),this.updateVisibility(),this.updateLabel(),this.on(c,"loadstart",this.updateVisibility),this.on(c,"ratechange",this.updateLabel)}return g(b,a),b.prototype.createEl=function(){var b=a.prototype.createEl.call(this);return this.labelEl_=q.createEl("div",{className:"vjs-playback-rate-value",innerHTML:1}),b.appendChild(this.labelEl_),b},b.prototype.buildCSSClass=function(){return"vjs-playback-rate "+a.prototype.buildCSSClass.call(this)},b.prototype.createMenu=function(){var a=new k["default"](this.player()),b=this.playbackRates();if(b)for(var c=b.length-1;c>=0;c--)a.addChild(new m["default"](this.player(),{rate:b[c]+"x"}));return a},b.prototype.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},b.prototype.handleClick=function(){for(var a=this.player().playbackRate(),b=this.playbackRates(),c=b[0],d=0;d<b.length;d++)if(b[d]>a){c=b[d];break}this.player().playbackRate(c)},b.prototype.playbackRates=function(){return this.options_.playbackRates||this.options_.playerOptions&&this.options_.playerOptions.playbackRates},b.prototype.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0},b.prototype.updateVisibility=function(){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},b.prototype.updateLabel=function(){this.playbackRateSupported()&&(this.labelEl_.innerHTML=this.player().playbackRate()+"x")},b}(i["default"]);r.prototype.controlText_="Playback Rate",o["default"].registerComponent("PlaybackRateMenuButton",r),c["default"]=r,b.exports=c["default"]},{"../../component.js":66,"../../menu/menu-button.js":109,"../../menu/menu.js":111,"../../utils/dom.js":144,"./playback-rate-menu-item.js":75}],75:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var g=a("../../menu/menu-item.js"),h=d(g),i=a("../../component.js"),j=d(i),k=function(a){function b(c,d){e(this,b);var f=d.rate,g=parseFloat(f,10);d.label=f,d.selected=1===g,a.call(this,c,d),this.label=f,this.rate=g,this.on(c,"ratechange",this.update)}return f(b,a),b.prototype.handleClick=function(){a.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},b.prototype.update=function(){this.selected(this.player().playbackRate()===this.rate)},b}(h["default"]);k.prototype.contentElType="button",j["default"].registerComponent("PlaybackRateMenuItem",k),c["default"]=k,b.exports=c["default"]},{"../../component.js":66,"../../menu/menu-item.js":110}],76:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a){return a&&a.__esModule?a:{"default":a}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("../../component.js"),i=e(h),j=a("../../utils/dom.js"),k=d(j),l=function(a){function b(c,d){f(this,b),a.call(this,c,d),this.on(c,"progress",this.update)}return g(b,a),b.prototype.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-load-progress",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Loaded")+"</span>: 0%</span>"})},b.prototype.update=function(){var a=this.player_.buffered(),b=this.player_.duration(),c=this.player_.bufferedEnd(),d=this.el_.children,e=function(a,b){var c=a/b||0;return 100*(c>=1?1:c)+"%"};this.el_.style.width=e(c,b);for(var f=0;f<a.length;f++){var g=a.start(f),h=a.end(f),i=d[f];i||(i=this.el_.appendChild(k.createEl())),i.style.left=e(g,c),i.style.width=e(h-g,c)}for(var f=d.length;f>a.length;f--)this.el_.removeChild(d[f-1])},b}(i["default"]);i["default"].registerComponent("LoadProgressBar",l),c["default"]=l,b.exports=c["default"]},{"../../component.js":66,"../../utils/dom.js":144}],77:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a){return a&&a.__esModule?a:{"default":a}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("global/window"),i=e(h),j=a("../../component.js"),k=e(j),l=a("../../utils/dom.js"),m=d(l),n=a("../../utils/fn.js"),o=d(n),p=a("../../utils/format-time.js"),q=e(p),r=a("lodash-compat/function/throttle"),s=e(r),t=function(a){function b(c,d){var e=this;f(this,b),a.call(this,c,d),d.playerOptions&&d.playerOptions.controlBar&&d.playerOptions.controlBar.progressControl&&d.playerOptions.controlBar.progressControl.keepTooltipsInside&&(this.keepTooltipsInside=d.playerOptions.controlBar.progressControl.keepTooltipsInside),this.keepTooltipsInside&&(this.tooltip=m.createEl("div",{className:"vjs-time-tooltip"}),this.el().appendChild(this.tooltip),this.addClass("vjs-keep-tooltips-inside")),this.update(0,0,0),c.on("ready",function(){var a=e.player_.controlBar.progressControl.el();a.appendChild(e.tooltip),e.on(a,"mousemove",s["default"](o.bind(e,e.handleMouseMove),25))})}return g(b,a),b.prototype.createEl=function(){this.tooltip=m.createEl("div",{className:"vjs-mouse-display-tooltip"
});var b=a.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"});return b},b.prototype.dispose=function(){this.tooltip.parentNode&&this.tooltip.parentNode.removeChild(this.tooltip),m.removeElData(this.tooltip),this.tooltip=null,a.prototype.dispose.call(this)},b.prototype.handleMouseMove=function(a){var b=!1,c=this.player_.duration();c||(b=!0,c=100);var d=this.calculateDistance(a)*c,e=this.player().controlBar.progressControl.seekBar.width()-this.width(),f=a.pageX-m.findElPosition(this.el().parentNode).left;f=Math.min(Math.max(0,f),e);var g=this.tooltip.offsetWidth,h=this.tooltip.parentNode.offsetWidth-g,i=a.pageX-m.findElPosition(this.tooltip.parentNode).left-g/2;i=Math.min(Math.max(0,i),h),this.update(d,f,i,b)},b.prototype.update=function(a,b,c,d){var e=d?Math.round(a)+"%":q["default"](a,this.player_.duration());if(this.el().style.left=b+"px",this.tooltip.innerHTML=e,this.keepTooltipsInside){var f=this.clampPosition_(b),g=b-f+1,h=parseFloat(i["default"].getComputedStyle(this.tooltip).width),j=h/2;this.tooltip.style.left="auto",this.tooltip.style.right="-"+(j-g)+"px"}else this.tooltip.style.right="auto",this.tooltip.style.left=c+"px"},b.prototype.calculateDistance=function(a){return m.getPointerPosition(this.el().parentNode,a).x},b.prototype.clampPosition_=function(a){if(!this.keepTooltipsInside)return a;var b=parseFloat(i["default"].getComputedStyle(this.player().el()).width),c=parseFloat(i["default"].getComputedStyle(this.tooltip).width),d=c/2,e=a;return d>a?e=Math.ceil(d):a>b-d&&(e=Math.floor(b-d)),e},b}(k["default"]);k["default"].registerComponent("MouseTimeDisplay",t),c["default"]=t,b.exports=c["default"]},{"../../component.js":66,"../../utils/dom.js":144,"../../utils/fn.js":146,"../../utils/format-time.js":147,"global/window":8,"lodash-compat/function/throttle":13}],78:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a){return a&&a.__esModule?a:{"default":a}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("../../component.js"),i=e(h),j=a("../../utils/fn.js"),k=d(j),l=a("../../utils/dom.js"),m=(d(l),a("../../utils/format-time.js")),n=e(m),o=function(a){function b(c,d){f(this,b),a.call(this,c,d),this.updateDataAttr(),this.on(c,"timeupdate",this.updateDataAttr),c.ready(k.bind(this,this.updateDataAttr)),d.playerOptions&&d.playerOptions.controlBar&&d.playerOptions.controlBar.progressControl&&d.playerOptions.controlBar.progressControl.keepTooltipsInside&&(this.keepTooltipsInside=d.playerOptions.controlBar.progressControl.keepTooltipsInside),this.keepTooltipsInside&&this.addClass("vjs-keep-tooltips-inside")}return g(b,a),b.prototype.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Progress")+"</span>: 0%</span>"})},b.prototype.updateDataAttr=function(){var a=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();this.el_.setAttribute("data-current-time",n["default"](a,this.player_.duration()))},b}(i["default"]);i["default"].registerComponent("PlayProgressBar",o),c["default"]=o,b.exports=c["default"]},{"../../component.js":66,"../../utils/dom.js":144,"../../utils/fn.js":146,"../../utils/format-time.js":147}],79:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var g=a("../../component.js"),h=d(g),i=a("./seek-bar.js"),j=(d(i),a("./mouse-time-display.js")),k=(d(j),function(a){function b(){e(this,b),a.apply(this,arguments)}return f(b,a),b.prototype.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},b}(h["default"]));k.prototype.options_={children:["seekBar"]},h["default"].registerComponent("ProgressControl",k),c["default"]=k,b.exports=c["default"]},{"../../component.js":66,"./mouse-time-display.js":77,"./seek-bar.js":80}],80:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a){return a&&a.__esModule?a:{"default":a}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("global/window"),i=e(h),j=a("../../slider/slider.js"),k=e(j),l=a("../../component.js"),m=e(l),n=a("./load-progress-bar.js"),o=(e(n),a("./play-progress-bar.js")),p=(e(o),a("./tooltip-progress-bar.js")),q=(e(p),a("../../utils/fn.js")),r=d(q),s=a("../../utils/format-time.js"),t=e(s),u=a("object.assign"),v=(e(u),function(a){function b(c,d){f(this,b),a.call(this,c,d),this.on(c,"timeupdate",this.updateProgress),this.on(c,"ended",this.updateProgress),c.ready(r.bind(this,this.updateProgress)),d.playerOptions&&d.playerOptions.controlBar&&d.playerOptions.controlBar.progressControl&&d.playerOptions.controlBar.progressControl.keepTooltipsInside&&(this.keepTooltipsInside=d.playerOptions.controlBar.progressControl.keepTooltipsInside),this.keepTooltipsInside&&(this.tooltipProgressBar=this.addChild("TooltipProgressBar"))}return g(b,a),b.prototype.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":"progress bar"})},b.prototype.updateProgress=function(){if(this.updateAriaAttributes(this.el_),this.keepTooltipsInside){this.updateAriaAttributes(this.tooltipProgressBar.el_),this.tooltipProgressBar.el_.style.width=this.bar.el_.style.width;var a=parseFloat(i["default"].getComputedStyle(this.player().el()).width),b=parseFloat(i["default"].getComputedStyle(this.tooltipProgressBar.tooltip).width),c=this.tooltipProgressBar.el().style;c.maxWidth=Math.floor(a-b/2)+"px",c.minWidth=Math.ceil(b/2)+"px",c.right="-"+b/2+"px"}},b.prototype.updateAriaAttributes=function(a){var b=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();a.setAttribute("aria-valuenow",(100*this.getPercent()).toFixed(2)),a.setAttribute("aria-valuetext",t["default"](b,this.player_.duration()))},b.prototype.getPercent=function(){var a=this.player_.currentTime()/this.player_.duration();return a>=1?1:a},b.prototype.handleMouseDown=function(b){this.player_.scrubbing(!0),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),a.prototype.handleMouseDown.call(this,b)},b.prototype.handleMouseMove=function(a){var b=this.calculateDistance(a)*this.player_.duration();b===this.player_.duration()&&(b-=.1),this.player_.currentTime(b)},b.prototype.handleMouseUp=function(b){a.prototype.handleMouseUp.call(this,b),this.player_.scrubbing(!1),this.videoWasPlaying&&this.player_.play()},b.prototype.stepForward=function(){this.player_.currentTime(this.player_.currentTime()+5)},b.prototype.stepBack=function(){this.player_.currentTime(this.player_.currentTime()-5)},b}(k["default"]));v.prototype.options_={children:["loadProgressBar","mouseTimeDisplay","playProgressBar"],barName:"playProgressBar"},v.prototype.playerEvent="timeupdate",m["default"].registerComponent("SeekBar",v),c["default"]=v,b.exports=c["default"]},{"../../component.js":66,"../../slider/slider.js":119,"../../utils/fn.js":146,"../../utils/format-time.js":147,"./load-progress-bar.js":76,"./play-progress-bar.js":78,"./tooltip-progress-bar.js":81,"global/window":8,"object.assign":53}],81:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a){return a&&a.__esModule?a:{"default":a}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("../../component.js"),i=e(h),j=a("../../utils/fn.js"),k=d(j),l=a("../../utils/dom.js"),m=(d(l),a("../../utils/format-time.js")),n=e(m),o=function(a){function b(c,d){f(this,b),a.call(this,c,d),this.updateDataAttr(),this.on(c,"timeupdate",this.updateDataAttr),c.ready(k.bind(this,this.updateDataAttr))}return g(b,a),b.prototype.createEl=function(){var b=a.prototype.createEl.call(this,"div",{className:"vjs-tooltip-progress-bar vjs-slider-bar",innerHTML:'<div class="vjs-time-tooltip"></div>\n        <span class="vjs-control-text"><span>'+this.localize("Progress")+"</span>: 0%</span>"});return this.tooltip=b.querySelector(".vjs-time-tooltip"),b},b.prototype.updateDataAttr=function(){var a=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),b=n["default"](a,this.player_.duration());this.el_.setAttribute("data-current-time",b),this.tooltip.innerHTML=b},b}(i["default"]);i["default"].registerComponent("TooltipProgressBar",o),c["default"]=o,b.exports=c["default"]},{"../../component.js":66,"../../utils/dom.js":144,"../../utils/fn.js":146,"../../utils/format-time.js":147}],82:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var g=a("./spacer.js"),h=d(g),i=a("../../component.js"),j=d(i),k=function(a){function b(){e(this,b),a.apply(this,arguments)}return f(b,a),b.prototype.buildCSSClass=function(){return"vjs-custom-control-spacer "+a.prototype.buildCSSClass.call(this)},b.prototype.createEl=function(){var b=a.prototype.createEl.call(this,{className:this.buildCSSClass()});return b.innerHTML="&nbsp;",b},b}(h["default"]);j["default"].registerComponent("CustomControlSpacer",k),c["default"]=k,b.exports=c["default"]},{"../../component.js":66,"./spacer.js":83}],83:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var g=a("../../component.js"),h=d(g),i=function(a){function b(){e(this,b),a.apply(this,arguments)}return f(b,a),b.prototype.buildCSSClass=function(){return"vjs-spacer "+a.prototype.buildCSSClass.call(this)},b.prototype.createEl=function(){return a.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})},b}(h["default"]);h["default"].registerComponent("Spacer",i),c["default"]=i,b.exports=c["default"]},{"../../component.js":66}],84:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var g=a("./text-track-menu-item.js"),h=d(g),i=a("../../component.js"),j=d(i),k=function(a){function b(c,d){e(this,b),d.track={kind:d.kind,player:c,label:d.kind+" settings",selectable:!1,"default":!1,mode:"disabled"},d.selectable=!1,a.call(this,c,d),this.addClass("vjs-texttrack-settings"),this.controlText(", opens "+d.kind+" settings dialog")}return f(b,a),b.prototype.handleClick=function(){this.player().getChild("textTrackSettings").show(),this.player().getChild("textTrackSettings").el_.focus()},b}(h["default"]);j["default"].registerComponent("CaptionSettingsMenuItem",k),c["default"]=k,b.exports=c["default"]},{"../../component.js":66,"./text-track-menu-item.js":92}],85:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var g=a("./text-track-button.js"),h=d(g),i=a("../../component.js"),j=d(i),k=a("./caption-settings-menu-item.js"),l=d(k),m=function(a){function b(c,d,f){e(this,b),a.call(this,c,d,f),this.el_.setAttribute("aria-label","Captions Menu")}return f(b,a),b.prototype.buildCSSClass=function(){return"vjs-captions-button "+a.prototype.buildCSSClass.call(this)},b.prototype.update=function(){var b=2;a.prototype.update.call(this),this.player().tech_&&this.player().tech_.featuresNativeTextTracks&&(b=1),this.items&&this.items.length>b?this.show():this.hide()},b.prototype.createItems=function(){var b=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||b.push(new l["default"](this.player_,{kind:this.kind_})),a.prototype.createItems.call(this,b)},b}(h["default"]);m.prototype.kind_="captions",m.prototype.controlText_="Captions",j["default"].registerComponent("CaptionsButton",m),c["default"]=m,b.exports=c["default"]},{"../../component.js":66,"./caption-settings-menu-item.js":84,"./text-track-button.js":91}],86:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a){return a&&a.__esModule?a:{"default":a}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("./text-track-button.js"),i=e(h),j=a("../../component.js"),k=e(j),l=a("./text-track-menu-item.js"),m=e(l),n=a("./chapters-track-menu-item.js"),o=e(n),p=a("../../menu/menu.js"),q=e(p),r=a("../../utils/dom.js"),s=d(r),t=a("../../utils/fn.js"),u=(d(t),a("../../utils/to-title-case.js")),v=e(u),w=a("global/window"),x=(e(w),function(a){function b(c,d,e){f(this,b),a.call(this,c,d,e),this.el_.setAttribute("aria-label","Chapters Menu")}return g(b,a),b.prototype.buildCSSClass=function(){return"vjs-chapters-button "+a.prototype.buildCSSClass.call(this)},b.prototype.createItems=function(){var a=[],b=this.player_.textTracks();if(!b)return a;for(var c=0;c<b.length;c++){var d=b[c];d.kind===this.kind_&&a.push(new m["default"](this.player_,{track:d}))}return a},b.prototype.createMenu=function(){for(var a=this,b=this.player_.textTracks()||[],c=void 0,d=this.items=[],e=0,f=b.length;f>e;e++){var g=b[e];if(g.kind===this.kind_){c=g;break}}var h=this.menu;if(void 0===h){h=new q["default"](this.player_);var i=s.createEl("li",{className:"vjs-menu-title",innerHTML:v["default"](this.kind_),tabIndex:-1});h.children_.unshift(i),s.insertElFirst(i,h.contentEl())}if(c&&null==c.cues){c.mode="hidden";var j=this.player_.remoteTextTrackEls().getTrackElementByTrack_(c);j&&j.addEventListener("load",function(){return a.update()})}if(c&&c.cues&&c.cues.length>0){for(var k=c.cues,l=void 0,e=0,m=k.length;m>e;e++){l=k[e];var n=new o["default"](this.player_,{track:c,cue:l});d.push(n),h.addChild(n)}this.addChild(h)}return this.items.length>0&&this.show(),h},b}(i["default"]));x.prototype.kind_="chapters",x.prototype.controlText_="Chapters",k["default"].registerComponent("ChaptersButton",x),c["default"]=x,b.exports=c["default"]},{"../../component.js":66,"../../menu/menu.js":111,"../../utils/dom.js":144,"../../utils/fn.js":146,"../../utils/to-title-case.js":153,"./chapters-track-menu-item.js":87,"./text-track-button.js":91,"./text-track-menu-item.js":92,"global/window":8}],87:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a){return a&&a.__esModule?a:{"default":a}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("../../menu/menu-item.js"),i=e(h),j=a("../../component.js"),k=e(j),l=a("../../utils/fn.js"),m=d(l),n=function(a){function b(c,d){f(this,b);var e=d.track,g=d.cue,h=c.currentTime();d.label=g.text,d.selected=g.startTime<=h&&h<g.endTime,a.call(this,c,d),this.track=e,this.cue=g,e.addEventListener("cuechange",m.bind(this,this.update))}return g(b,a),b.prototype.handleClick=function(){a.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime),this.update(this.cue.startTime)},b.prototype.update=function(){var a=this.cue,b=this.player_.currentTime();this.selected(a.startTime<=b&&b<a.endTime)},b}(i["default"]);k["default"].registerComponent("ChaptersTrackMenuItem",n),c["default"]=n,b.exports=c["default"]},{"../../component.js":66,"../../menu/menu-item.js":110,"../../utils/fn.js":146}],88:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a){return a&&a.__esModule?a:{"default":a}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("./text-track-button.js"),i=e(h),j=a("../../component.js"),k=e(j),l=a("../../utils/fn.js"),m=d(l),n=function(a){function b(c,d,e){var g=this;f(this,b),a.call(this,c,d,e),this.el_.setAttribute("aria-label","Descriptions Menu");var h=c.textTracks();h&&!function(){var a=m.bind(g,g.handleTracksChange);h.addEventListener("change",a),g.on("dispose",function(){h.removeEventListener("change",a)})}()}return g(b,a),b.prototype.handleTracksChange=function(){for(var a=this.player().textTracks(),b=!1,c=0,d=a.length;d>c;c++){var e=a[c];if(e.kind!==this.kind_&&"showing"===e.mode){b=!0;break}}b?this.disable():this.enable()},b.prototype.buildCSSClass=function(){return"vjs-descriptions-button "+a.prototype.buildCSSClass.call(this)},b}(i["default"]);n.prototype.kind_="descriptions",n.prototype.controlText_="Descriptions",k["default"].registerComponent("DescriptionsButton",n),c["default"]=n,b.exports=c["default"]},{"../../component.js":66,"../../utils/fn.js":146,"./text-track-button.js":91}],89:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var g=a("./text-track-menu-item.js"),h=d(g),i=a("../../component.js"),j=d(i),k=function(a){function b(c,d){e(this,b),d.track={kind:d.kind,player:c,label:d.kind+" off","default":!1,mode:"disabled"},d.selectable=!0,a.call(this,c,d),this.selected(!0)}return f(b,a),b.prototype.handleTracksChange=function(){for(var a=this.player().textTracks(),b=!0,c=0,d=a.length;d>c;c++){var e=a[c];if(e.kind===this.track.kind&&"showing"===e.mode){b=!1;break}}this.selected(b)},b}(h["default"]);j["default"].registerComponent("OffTextTrackMenuItem",k),c["default"]=k,b.exports=c["default"]},{"../../component.js":66,"./text-track-menu-item.js":92}],90:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var g=a("./text-track-button.js"),h=d(g),i=a("../../component.js"),j=d(i),k=function(a){function b(c,d,f){e(this,b),a.call(this,c,d,f),this.el_.setAttribute("aria-label","Subtitles Menu")}return f(b,a),b.prototype.buildCSSClass=function(){return"vjs-subtitles-button "+a.prototype.buildCSSClass.call(this)},b}(h["default"]);k.prototype.kind_="subtitles",k.prototype.controlText_="Subtitles",j["default"].registerComponent("SubtitlesButton",k),c["default"]=k,b.exports=c["default"]},{"../../component.js":66,"./text-track-button.js":91}],91:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a){return a&&a.__esModule?a:{"default":a}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("../track-button.js"),i=e(h),j=a("../../component.js"),k=e(j),l=a("../../utils/fn.js"),m=(d(l),a("./text-track-menu-item.js")),n=e(m),o=a("./off-text-track-menu-item.js"),p=e(o),q=function(a){function b(c){var d=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];f(this,b),d.tracks=c.textTracks(),a.call(this,c,d)}return g(b,a),b.prototype.createItems=function(){var a=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];a.push(new p["default"](this.player_,{kind:this.kind_}));var b=this.player_.textTracks();if(!b)return a;for(var c=0;c<b.length;c++){var d=b[c];d.kind===this.kind_&&a.push(new n["default"](this.player_,{selectable:!0,track:d}))}return a},b}(i["default"]);k["default"].registerComponent("TextTrackButton",q),c["default"]=q,b.exports=c["default"]},{"../../component.js":66,"../../utils/fn.js":146,"../track-button.js":97,"./off-text-track-menu-item.js":89,"./text-track-menu-item.js":92}],92:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a){return a&&a.__esModule?a:{"default":a}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("../../menu/menu-item.js"),i=e(h),j=a("../../component.js"),k=e(j),l=a("../../utils/fn.js"),m=d(l),n=a("global/window"),o=e(n),p=a("global/document"),q=e(p),r=function(a){function b(c,d){var e=this;f(this,b);var g=d.track,h=c.textTracks();d.label=g.label||g.language||"Unknown",d.selected=g["default"]||"showing"===g.mode,a.call(this,c,d),this.track=g,h&&!function(){var a=m.bind(e,e.handleTracksChange);h.addEventListener("change",a),e.on("dispose",function(){h.removeEventListener("change",a)})}(),h&&void 0===h.onchange&&!function(){var a=void 0;e.on(["tap","click"],function(){if("object"!=typeof o["default"].Event)try{a=new o["default"].Event("change")}catch(b){}a||(a=q["default"].createEvent("Event"),a.initEvent("change",!0,!0)),h.dispatchEvent(a)})}()}return g(b,a),b.prototype.handleClick=function(b){var c=this.track.kind,d=this.player_.textTracks();if(a.prototype.handleClick.call(this,b),d)for(var e=0;e<d.length;e++){var f=d[e];f.kind===c&&(f.mode=f===this.track?"showing":"disabled")}},b.prototype.handleTracksChange=function(){this.selected("showing"===this.track.mode)},b}(i["default"]);k["default"].registerComponent("TextTrackMenuItem",r),c["default"]=r,b.exports=c["default"]},{"../../component.js":66,"../../menu/menu-item.js":110,"../../utils/fn.js":146,"global/document":7,"global/window":8}],93:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a){return a&&a.__esModule?a:{"default":a}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("../../component.js"),i=e(h),j=a("../../utils/dom.js"),k=d(j),l=a("../../utils/format-time.js"),m=e(l),n=function(a){function b(c,d){f(this,b),a.call(this,c,d),this.on(c,"timeupdate",this.updateContent)}return g(b,a),b.prototype.createEl=function(){var b=a.prototype.createEl.call(this,"div",{className:"vjs-current-time vjs-time-control vjs-control"});return this.contentEl_=k.createEl("div",{className:"vjs-current-time-display",innerHTML:'<span class="vjs-control-text">Current Time </span>0:00'},{"aria-live":"off"}),b.appendChild(this.contentEl_),b},b.prototype.updateContent=function(){var a=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),b=this.localize("Current Time"),c=m["default"](a,this.player_.duration());c!==this.formattedTime_&&(this.formattedTime_=c,this.contentEl_.innerHTML='<span class="vjs-control-text">'+b+"</span> "+c)},b}(i["default"]);i["default"].registerComponent("CurrentTimeDisplay",n),c["default"]=n,b.exports=c["default"]},{"../../component.js":66,"../../utils/dom.js":144,"../../utils/format-time.js":147}],94:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a){return a&&a.__esModule?a:{"default":a}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("../../component.js"),i=e(h),j=a("../../utils/dom.js"),k=d(j),l=a("../../utils/format-time.js"),m=e(l),n=function(a){function b(c,d){f(this,b),a.call(this,c,d),this.on(c,"timeupdate",this.updateContent),this.on(c,"loadedmetadata",this.updateContent)}return g(b,a),b.prototype.createEl=function(){var b=a.prototype.createEl.call(this,"div",{className:"vjs-duration vjs-time-control vjs-control"});return this.contentEl_=k.createEl("div",{className:"vjs-duration-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Duration Time")+"</span> 0:00"},{"aria-live":"off"}),b.appendChild(this.contentEl_),b},b.prototype.updateContent=function(){var a=this.player_.duration();if(a&&this.duration_!==a){this.duration_=a;var b=this.localize("Duration Time"),c=m["default"](a);this.contentEl_.innerHTML='<span class="vjs-control-text">'+b+"</span> "+c}},b}(i["default"]);i["default"].registerComponent("DurationDisplay",n),c["default"]=n,b.exports=c["default"]},{"../../component.js":66,"../../utils/dom.js":144,"../../utils/format-time.js":147}],95:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a){return a&&a.__esModule?a:{"default":a}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("../../component.js"),i=e(h),j=a("../../utils/dom.js"),k=d(j),l=a("../../utils/format-time.js"),m=e(l),n=function(a){function b(c,d){f(this,b),a.call(this,c,d),this.on(c,"timeupdate",this.updateContent)}return g(b,a),b.prototype.createEl=function(){var b=a.prototype.createEl.call(this,"div",{className:"vjs-remaining-time vjs-time-control vjs-control"});return this.contentEl_=k.createEl("div",{className:"vjs-remaining-time-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Remaining Time")+"</span> -0:00"},{"aria-live":"off"}),b.appendChild(this.contentEl_),b},b.prototype.updateContent=function(){if(this.player_.duration()){var a=this.localize("Remaining Time"),b=m["default"](this.player_.remainingTime());b!==this.formattedTime_&&(this.formattedTime_=b,this.contentEl_.innerHTML='<span class="vjs-control-text">'+a+"</span> -"+b)}},b}(i["default"]);i["default"].registerComponent("RemainingTimeDisplay",n),c["default"]=n,b.exports=c["default"]},{"../../component.js":66,"../../utils/dom.js":144,"../../utils/format-time.js":147}],96:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);

a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var g=a("../../component.js"),h=d(g),i=function(a){function b(){e(this,b),a.apply(this,arguments)}return f(b,a),b.prototype.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider",innerHTML:"<div><span>/</span></div>"})},b}(h["default"]);h["default"].registerComponent("TimeDivider",i),c["default"]=i,b.exports=c["default"]},{"../../component.js":66}],97:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a){return a&&a.__esModule?a:{"default":a}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("../menu/menu-button.js"),i=e(h),j=a("../component.js"),k=e(j),l=a("../utils/fn.js"),m=d(l),n=function(a){function b(c,d){f(this,b);var e=d.tracks;if(a.call(this,c,d),this.items.length<=1&&this.hide(),e){var g=m.bind(this,this.update);e.addEventListener("removetrack",g),e.addEventListener("addtrack",g),this.player_.on("dispose",function(){e.removeEventListener("removetrack",g),e.removeEventListener("addtrack",g)})}}return g(b,a),b}(i["default"]);k["default"].registerComponent("TrackButton",n),c["default"]=n,b.exports=c["default"]},{"../component.js":66,"../menu/menu-button.js":109,"../utils/fn.js":146}],98:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a){return a&&a.__esModule?a:{"default":a}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("../../slider/slider.js"),i=e(h),j=a("../../component.js"),k=e(j),l=a("../../utils/fn.js"),m=d(l),n=a("./volume-level.js"),o=(e(n),a("./volume-display.js")),p=(e(o),function(a){function b(c,d){f(this,b),a.call(this,c,d),this.on(c,"volumechange",this.updateARIAAttributes),c.ready(m.bind(this,this.updateARIAAttributes))}return g(b,a),b.prototype.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":"volume level"})},b.prototype.handleMouseMove=function(a){this.checkMuted(),this.player_.volume(this.calculateDistance(a))},b.prototype.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},b.prototype.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},b.prototype.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},b.prototype.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},b.prototype.updateARIAAttributes=function(){var a=(100*this.player_.volume()).toFixed(2);this.el_.setAttribute("aria-valuenow",a),this.el_.setAttribute("aria-valuetext",a+"%")},b}(i["default"]));p.prototype.options_={children:["volumeLevel","volumeDisplay"],barName:"volumeLevel"},p.prototype.playerEvent="volumechange",k["default"].registerComponent("VolumeBar",p),c["default"]=p,b.exports=c["default"]},{"../../component.js":66,"../../slider/slider.js":119,"../../utils/fn.js":146,"./volume-display.js":100,"./volume-level.js":101}],99:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var g=a("../../component.js"),h=d(g),i=a("./volume-bar.js"),j=(d(i),function(a){function b(c,d){e(this,b),a.call(this,c,d),c.tech_&&c.tech_.featuresVolumeControl===!1&&this.addClass("vjs-hidden"),this.on(c,"loadstart",function(){c.tech_.featuresVolumeControl===!1?this.addClass("vjs-hidden"):this.removeClass("vjs-hidden")})}return f(b,a),b.prototype.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control"})},b}(h["default"]));j.prototype.options_={children:["volumeBar"]},h["default"].registerComponent("VolumeControl",j),c["default"]=j,b.exports=c["default"]},{"../../component.js":66,"./volume-bar.js":98}],100:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a){return a&&a.__esModule?a:{"default":a}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("../../component.js"),i=e(h),j=a("../../utils/dom.js"),k=d(j),l=a("../../utils/fn.js"),m=d(l),n=a("lodash-compat/function/throttle"),o=e(n),p=function(a){function b(c,d){var e=this;f(this,b),a.call(this,c,d),this.update(0,0,0),c.on("ready",function(){c.controlBar.progressControl.el().appendChild(e.tooltip),e.parent=c.controlBar.volumeMenuButton.volumeBar,e.on(e.parent.el(),"mousemove",o["default"](m.bind(e,e.handleMouseMove),25)),e.on(e.parent.el(),"mouseover",o["default"](m.bind(e,e.handleHover),25)),e.on(e.parent.el(),"mouseout",o["default"](m.bind(e,e.handleLeave),25))})}return g(b,a),b.prototype.createEl=function(){return this.className="vjs-volume-display",this.tooltipClassName=this.className+"-tooltip",this.tooltip=k.createEl("div",{className:this.tooltipClassName}),a.prototype.createEl.call(this,"div",{className:this.className})},b.prototype.dispose=function(){this.tooltip.parentNode&&this.tooltip.parentNode.removeChild(this.tooltip),k.removeElData(this.tooltip),this.tooltip=null,a.prototype.dispose.call(this)},b.prototype.handleMouseMove=function(a){var b=100*this.calculateDistance(a),c=this.parent.width()-this.width(),d=a.pageX-k.findElPosition(this.el().parentNode).left;d=Math.min(Math.max(0,d),c);var e=this.tooltip.offsetWidth,f=k.findElPosition(this.tooltip.parentNode).left,g=k.findElPosition(this.parent.el()).left-f-e/2,h=g+this.parent.width(),i=a.pageX-f-e/2;i=Math.min(Math.max(g,i),h),this.update(b,d,i)},b.prototype.handleHover=function(){this.player_.trigger("tooltipShown"),k.addElClass(this.tooltip,this.tooltipClassName+"-active")},b.prototype.handleLeave=function(){k.removeElClass(this.tooltip,this.tooltipClassName+"-active")},b.prototype.update=function(a,b,c){var d=Math.round(a)+"%";this.el().style.left=b+"px",this.tooltip.style.left=c+"px",this.tooltip.innerHTML=d},b.prototype.calculateDistance=function(a){return k.getPointerPosition(this.el().parentNode,a).x},b}(i["default"]);i["default"].registerComponent("VolumeDisplay",p),c["default"]=p,b.exports=c["default"]},{"../../component.js":66,"../../utils/dom.js":144,"../../utils/fn.js":146,"lodash-compat/function/throttle":13}],101:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var g=a("../../component.js"),h=d(g),i=function(a){function b(){e(this,b),a.apply(this,arguments)}return f(b,a),b.prototype.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"></span>'})},b}(h["default"]);h["default"].registerComponent("VolumeLevel",i),c["default"]=i,b.exports=c["default"]},{"../../component.js":66}],102:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("../utils/fn.js"),i=e(h),j=a("../component.js"),k=d(j),l=a("../popup/popup.js"),m=d(l),n=a("../popup/popup-button.js"),o=d(n),p=a("./mute-toggle.js"),q=d(p),r=a("./volume-control/volume-bar.js"),s=d(r),t=function(a){function b(c){function d(){c.tech_&&c.tech_.featuresVolumeControl===!1?this.addClass("vjs-hidden"):this.removeClass("vjs-hidden")}var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];f(this,b),void 0===e.inline&&(e.inline=!0),void 0===e.vertical&&(e.vertical=e.inline?!1:!0),e.volumeBar=e.volumeBar||{},e.volumeBar.vertical=!!e.vertical,a.call(this,c,e),this.on(c,"volumechange",this.volumeUpdate),this.on(c,"loadstart",this.volumeUpdate),d.call(this),this.on(c,"loadstart",d),this.on(this.volumeBar,["slideractive","focus"],function(){this.addClass("vjs-slider-active")}),this.on(this.volumeBar,["sliderinactive","blur"],function(){this.removeClass("vjs-slider-active")}),this.on(this.volumeBar,["focus"],function(){this.addClass("vjs-lock-showing")}),this.on(this.volumeBar,["blur"],function(){this.removeClass("vjs-lock-showing")})}return g(b,a),b.prototype.buildCSSClass=function(){var b="";return b=this.options_.vertical?"vjs-volume-menu-button-vertical":"vjs-volume-menu-button-horizontal","vjs-volume-menu-button "+a.prototype.buildCSSClass.call(this)+" "+b},b.prototype.createPopup=function(){var a=new m["default"](this.player_,{contentElType:"div"}),b=new s["default"](this.player_,this.options_.volumeBar);return a.addChild(b),this.menuContent=a,this.volumeBar=b,this.attachVolumeBarEvents(),a},b.prototype.handleClick=function(){q["default"].prototype.handleClick.call(this),a.prototype.handleClick.call(this)},b.prototype.attachVolumeBarEvents=function(){this.menuContent.on(["mousedown","touchdown"],i.bind(this,this.handleMouseDown))},b.prototype.handleMouseDown=function(){this.on(["mousemove","touchmove"],i.bind(this.volumeBar,this.volumeBar.handleMouseMove)),this.on(this.el_.ownerDocument,["mouseup","touchend"],this.handleMouseUp)},b.prototype.handleMouseUp=function(){this.off(["mousemove","touchmove"],i.bind(this.volumeBar,this.volumeBar.handleMouseMove))},b}(o["default"]);t.prototype.volumeUpdate=q["default"].prototype.update,t.prototype.controlText_="Mute",k["default"].registerComponent("VolumeMenuButton",t),c["default"]=t,b.exports=c["default"]},{"../component.js":66,"../popup/popup-button.js":115,"../popup/popup.js":116,"../utils/fn.js":146,"./mute-toggle.js":72,"./volume-control/volume-bar.js":98}],103:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a){return a&&a.__esModule?a:{"default":a}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("./component"),i=e(h),j=a("./modal-dialog"),k=e(j),l=a("./utils/dom"),m=(d(l),a("./utils/merge-options")),n=e(m),o=function(a){function b(c,d){f(this,b),a.call(this,c,d),this.on(c,"error",this.open)}return g(b,a),b.prototype.buildCSSClass=function(){return"vjs-error-display "+a.prototype.buildCSSClass.call(this)},b.prototype.open=function(){var b=this.player().error(),c=this.options_.ignoreErr;return b&&(c===!0||"number"==typeof c&&c===b.code||c instanceof Array&&c.indexOf(b.code)>=0)?this:a.prototype.open.call(this)},b.prototype.content=function(){var a=this.player().error();return a?this.localize(a.message):""},b}(k["default"]);o.prototype.options_=n["default"](k["default"].prototype.options_,{fillAlways:!0,temporary:!1,uncloseable:!0,ignoreErr:!1}),i["default"].registerComponent("ErrorDisplay",o),c["default"]=o,b.exports=c["default"]},{"./component":66,"./modal-dialog":112,"./utils/dom":144,"./utils/merge-options":150}],104:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}c.__esModule=!0;var e=a("./utils/events.js"),f=d(e),g=function(){};g.prototype.allowedEvents_={},g.prototype.on=function(a,b){var c=this.addEventListener;this.addEventListener=function(){},f.on(this,a,b),this.addEventListener=c},g.prototype.addEventListener=g.prototype.on,g.prototype.off=function(a,b){f.off(this,a,b)},g.prototype.removeEventListener=g.prototype.off,g.prototype.one=function(a,b){var c=this.addEventListener;this.addEventListener=function(){},f.one(this,a,b),this.addEventListener=c},g.prototype.trigger=function(a){var b=a.type||a;"string"==typeof a&&(a={type:b}),a=f.fixEvent(a),this.allowedEvents_[b]&&this["on"+b]&&this["on"+b](a),f.trigger(this,a)},g.prototype.dispatchEvent=g.prototype.trigger,c["default"]=g,b.exports=c["default"]},{"./utils/events.js":145}],105:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}c.__esModule=!0;var e=a("./utils/log"),f=d(e),g=function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(a.super_=b)},h=function(a){var b=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],c=function(){a.apply(this,arguments)},d={};"object"==typeof b?("function"==typeof b.init&&(f["default"].warn("Constructor logic via init() is deprecated; please use constructor() instead."),b.constructor=b.init),b.constructor!==Object.prototype.constructor&&(c=b.constructor),d=b):"function"==typeof b&&(c=b),g(c,a);for(var e in d)d.hasOwnProperty(e)&&(c.prototype[e]=d[e]);return c};c["default"]=h,b.exports=c["default"]},{"./utils/log":149}],106:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}c.__esModule=!0;for(var e=a("global/document"),f=d(e),g={},h=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],i=h[0],j=void 0,k=0;k<h.length;k++)if(h[k][1]in f["default"]){j=h[k];break}if(j)for(var k=0;k<j.length;k++)g[i[k]]=j[k];c["default"]=g,b.exports=c["default"]},{"global/document":7}],107:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var g=a("./component"),h=d(g),i=function(a){function b(){e(this,b),a.apply(this,arguments)}return f(b,a),b.prototype.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"})},b}(h["default"]);h["default"].registerComponent("LoadingSpinner",i),c["default"]=i,b.exports=c["default"]},{"./component":66}],108:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}c.__esModule=!0;var e=a("object.assign"),f=d(e),g=function i(a){"number"==typeof a?this.code=a:"string"==typeof a?this.message=a:"object"==typeof a&&f["default"](this,a),this.message||(this.message=i.defaultMessages[this.code]||"")};g.prototype.code=0,g.prototype.message="",g.prototype.status=null,g.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],g.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var h=0;h<g.errorTypes.length;h++)g[g.errorTypes[h]]=h,g.prototype[g.errorTypes[h]]=h;c["default"]=g,b.exports=c["default"]},{"object.assign":53}],109:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a){return a&&a.__esModule?a:{"default":a}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("../clickable-component.js"),i=e(h),j=a("../component.js"),k=e(j),l=a("./menu.js"),m=e(l),n=a("../utils/dom.js"),o=d(n),p=a("../utils/fn.js"),q=d(p),r=a("../utils/to-title-case.js"),s=e(r),t=function(a){function b(c){var d=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];f(this,b),a.call(this,c,d),this.update(),this.enabled_=!0,this.el_.setAttribute("aria-haspopup","true"),this.el_.setAttribute("role","menuitem"),this.on("keydown",this.handleSubmenuKeyPress)}return g(b,a),b.prototype.update=function(){var a=this.createMenu();this.menu&&this.removeChild(this.menu),this.menu=a,this.addChild(a),this.buttonPressed_=!1,this.el_.setAttribute("aria-expanded","false"),this.items&&0===this.items.length?this.hide():this.items&&this.items.length>1&&this.show()},b.prototype.createMenu=function(){var a=new m["default"](this.player_);if(this.options_.title){var b=o.createEl("li",{className:"vjs-menu-title",innerHTML:s["default"](this.options_.title),tabIndex:-1});a.children_.unshift(b),o.insertElFirst(b,a.contentEl())}if(this.items=this.createItems(),this.items)for(var c=0;c<this.items.length;c++)a.addItem(this.items[c]);return a},b.prototype.createItems=function(){},b.prototype.createEl=function(){return a.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})},b.prototype.buildCSSClass=function(){var b="vjs-menu-button";return b+=this.options_.inline===!0?"-inline":"-popup","vjs-menu-button "+b+" "+a.prototype.buildCSSClass.call(this)},b.prototype.handleClick=function(){this.one("mouseout",q.bind(this,function(){this.menu.unlockShowing(),this.el_.blur()})),this.buttonPressed_?this.unpressButton():this.pressButton()},b.prototype.handleKeyPress=function(b){27===b.which||9===b.which?(this.buttonPressed_&&this.unpressButton(),9!==b.which&&b.preventDefault()):38===b.which||40===b.which?this.buttonPressed_||(this.pressButton(),b.preventDefault()):a.prototype.handleKeyPress.call(this,b)},b.prototype.handleSubmenuKeyPress=function(a){(27===a.which||9===a.which)&&(this.buttonPressed_&&this.unpressButton(),9!==a.which&&a.preventDefault())},b.prototype.pressButton=function(){this.enabled_&&(this.buttonPressed_=!0,this.menu.lockShowing(),this.el_.setAttribute("aria-expanded","true"),this.menu.focus())},b.prototype.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.el_.setAttribute("aria-expanded","false"),this.el_.focus())},b.prototype.disable=function(){return this.buttonPressed_=!1,this.menu.unlockShowing(),this.el_.setAttribute("aria-expanded","false"),this.enabled_=!1,a.prototype.disable.call(this)},b.prototype.enable=function(){return this.enabled_=!0,a.prototype.enable.call(this)},b.prototype.tooltipHandler=function(){},b}(i["default"]);k["default"].registerComponent("MenuButton",t),c["default"]=t,b.exports=c["default"]},{"../clickable-component.js":64,"../component.js":66,"../utils/dom.js":144,"../utils/fn.js":146,"../utils/to-title-case.js":153,"./menu.js":111}],110:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var g=a("../clickable-component.js"),h=d(g),i=a("../component.js"),j=d(i),k=a("object.assign"),l=d(k),m=function(a){function b(c,d){e(this,b),a.call(this,c,d),this.selectable=d.selectable,this.selected(d.selected),this.selectable?this.el_.setAttribute("role","menuitemcheckbox"):this.el_.setAttribute("role","menuitem")}return f(b,a),b.prototype.createEl=function(b,c,d){return a.prototype.createEl.call(this,"li",l["default"]({className:"vjs-menu-item",innerHTML:this.localize(this.options_.label),tabIndex:-1},c),d)},b.prototype.handleClick=function(){this.selected(!0)},b.prototype.selected=function(a){this.selectable&&(a?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected")):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(" ")))},b.prototype.tooltipHandler=function(){return void 0!==this.options_.tooltip?a.prototype.tooltipHandler.call(this):void 0},b}(h["default"]);j["default"].registerComponent("MenuItem",m),c["default"]=m,b.exports=c["default"]},{"../clickable-component.js":64,"../component.js":66,"object.assign":53}],111:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a){return a&&a.__esModule?a:{"default":a}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("../component.js"),i=e(h),j=a("../utils/dom.js"),k=d(j),l=a("../utils/fn.js"),m=d(l),n=a("../utils/events.js"),o=d(n),p=function(a){function b(c,d){f(this,b),a.call(this,c,d),this.focusedChild_=-1,this.on("keydown",this.handleKeyPress)}return g(b,a),b.prototype.addItem=function(a){this.addChild(a),a.on("click",m.bind(this,function(){this.unlockShowing()}))},b.prototype.createEl=function(){var b=this.options_.contentElType||"ul";this.contentEl_=k.createEl(b,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var c=a.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return c.setAttribute("role","presentation"),c.appendChild(this.contentEl_),o.on(c,"click",function(a){a.preventDefault(),a.stopImmediatePropagation()}),c},b.prototype.handleKeyPress=function(a){37===a.which||40===a.which?(a.preventDefault(),this.stepForward()):(38===a.which||39===a.which)&&(a.preventDefault(),this.stepBack())},b.prototype.stepForward=function(){var a=0;void 0!==this.focusedChild_&&(a=this.focusedChild_+1),this.focus(a)},b.prototype.stepBack=function(){var a=0;void 0!==this.focusedChild_&&(a=this.focusedChild_-1),this.focus(a)},b.prototype.focus=function(){var a=arguments.length<=0||void 0===arguments[0]?0:arguments[0],b=this.children().slice(),c=b.length&&b[0].className&&/vjs-menu-title/.test(b[0].className);c&&b.shift(),b.length>0&&(0>a?a=0:a>=b.length&&(a=b.length-1),this.focusedChild_=a,b[a].el_.focus())},b}(i["default"]);i["default"].registerComponent("Menu",p),c["default"]=p,b.exports=c["default"]},{"../component.js":66,"../utils/dom.js":144,"../utils/events.js":145,"../utils/fn.js":146}],112:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("./utils/dom"),i=e(h),j=a("./utils/fn"),k=e(j),l=a("./utils/log"),m=(d(l),a("./component")),n=d(m),o=a("./close-button"),p=(d(o),"vjs-modal-dialog"),q=27,r=function(a){function b(c,d){f(this,b),a.call(this,c,d),this.opened_=this.hasBeenOpened_=this.hasBeenFilled_=!1,this.closeable(!this.options_.uncloseable),this.content(this.options_.content),this.contentEl_=i.createEl("div",{className:p+"-content"},{role:"document"}),this.descEl_=i.createEl("p",{className:p+"-description vjs-offscreen",id:this.el().getAttribute("aria-describedby")}),i.textContent(this.descEl_,this.description()),this.el_.appendChild(this.descEl_),this.el_.appendChild(this.contentEl_)}return g(b,a),b.prototype.createEl=function(){return a.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},b.prototype.buildCSSClass=function(){return p+" vjs-hidden "+a.prototype.buildCSSClass.call(this)},b.prototype.handleKeyPress=function(a){a.which===q&&this.closeable()&&this.close()},b.prototype.label=function(){return this.options_.label||this.localize("Modal Window")},b.prototype.description=function(){var a=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(a+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),a},b.prototype.open=function(){if(!this.opened_){var a=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!a.paused(),this.wasPlaying_&&a.pause(),this.closeable()&&this.on(this.el_.ownerDocument,"keydown",k.bind(this,this.handleKeyPress)),a.controls(!1),this.show(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}return this},b.prototype.opened=function(a){return"boolean"==typeof a&&this[a?"open":"close"](),this.opened_},b.prototype.close=function(){if(this.opened_){var a=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&a.play(),this.closeable()&&this.off(this.el_.ownerDocument,"keydown",k.bind(this,this.handleKeyPress)),a.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.options_.temporary&&this.dispose()}return this},b.prototype.closeable=function c(a){if("boolean"==typeof a){var c=this.closeable_=!!a,b=this.getChild("closeButton");if(c&&!b){var d=this.contentEl_;this.contentEl_=this.el_,b=this.addChild("closeButton"),this.contentEl_=d,this.on(b,"close",this.close)}!c&&b&&(this.off(b,"close",this.close),this.removeChild(b),b.dispose())}return this.closeable_},b.prototype.fill=function(){return this.fillWith(this.content())},b.prototype.fillWith=function(a){var b=this.contentEl(),c=b.parentNode,d=b.nextSibling;return this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,c.removeChild(b),this.empty(),i.insertContent(b,a),this.trigger("modalfill"),d?c.insertBefore(b,d):c.appendChild(b),this},b.prototype.empty=function(){return this.trigger("beforemodalempty"),i.emptyEl(this.contentEl()),this.trigger("modalempty"),this},b.prototype.content=function(a){return"undefined"!=typeof a&&(this.content_=a),this.content_},b}(n["default"]);r.prototype.options_={temporary:!0},n["default"].registerComponent("ModalDialog",r),c["default"]=r,b.exports=c["default"]},{"./close-button":65,"./component":66,"./utils/dom":144,"./utils/fn":146,"./utils/log":149}],113:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a){return a&&a.__esModule?a:{"default":a}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("./component.js"),i=e(h),j=a("global/document"),k=e(j),l=a("global/window"),m=e(l),n=a("./utils/events.js"),o=d(n),p=a("./utils/dom.js"),q=d(p),r=a("./utils/fn.js"),s=d(r),t=a("./utils/guid.js"),u=d(t),v=a("./utils/browser.js"),w=d(v),x=a("./utils/log.js"),y=e(x),z=a("./utils/to-title-case.js"),A=e(z),B=a("./utils/time-ranges.js"),C=a("./utils/buffer.js"),D=a("./utils/stylesheet.js"),E=d(D),F=a("./fullscreen-api.js"),G=e(F),H=a("./media-error.js"),I=e(H),J=a("safe-json-parse/tuple"),K=e(J),L=a("object.assign"),M=e(L),N=a("./utils/merge-options.js"),O=e(N),P=a("./tracks/text-track-list-converter.js"),Q=e(P),R=a("./tracks/audio-track-list.js"),S=e(R),T=a("./tracks/video-track-list.js"),U=e(T),V=a("./tech/loader.js"),W=(e(V),a("./poster-image.js")),X=(e(W),a("./tracks/text-track-display.js")),Y=(e(X),a("./loading-spinner.js")),Z=(e(Y),a("./big-play-button.js")),$=(e(Z),a("./control-bar/control-bar.js")),_=(e($),
a("./error-display.js")),aa=(e(_),a("./tracks/text-track-settings.js")),ba=(e(aa),a("./modal-dialog")),ca=e(ba),da=a("./tech/tech.js"),ea=e(da),fa=a("./tech/html5.js"),ga=(e(fa),function(a){function b(c,d,e){var g=this;if(f(this,b),c.id=c.id||"vjs_video_"+u.newGUID(),d=M["default"](b.getTagSettings(c),d),d.initChildren=!1,d.createEl=!1,d.reportTouchActivity=!1,a.call(this,null,d,e),!this.options_||!this.options_.techOrder||!this.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");this.tag=c,this.tagAttributes=c&&q.getElAttributes(c),this.language(this.options_.language),d.languages?!function(){var a={};Object.getOwnPropertyNames(d.languages).forEach(function(b){a[b.toLowerCase()]=d.languages[b]}),g.languages_=a}():this.languages_=b.prototype.options_.languages,this.cache_={},this.poster_=d.poster||"",this.controls_=!!d.controls,c.controls=!1,this.scrubbing_=!1,this.el_=this.createEl();var h=O["default"](this.options_);d.plugins&&!function(){var a=d.plugins;Object.getOwnPropertyNames(a).forEach(function(b){"function"==typeof this[b]?this[b](a[b]):y["default"].error("Unable to find plugin:",b)},g)}(),this.options_.playerOptions=h,this.initChildren(),this.isAudio("audio"===c.nodeName.toLowerCase()),this.addClass(this.controls()?"vjs-controls-enabled":"vjs-controls-disabled"),this.el_.setAttribute("role","region"),this.isAudio()?this.el_.setAttribute("aria-label","audio player"):this.el_.setAttribute("aria-label","video player"),this.isAudio()&&this.addClass("vjs-audio"),this.flexNotSupported_()&&this.addClass("vjs-no-flex"),w.IS_IOS||this.addClass("vjs-workinghover"),b.players[this.id_]=this,this.userActive(!0),this.reportUserActivity(),this.listenForUserActivity_(),this.on("fullscreenchange",this.handleFullscreenChange_),this.on("stageclick",this.handleStageClick_)}return g(b,a),b.prototype.dispose=function(){this.trigger("dispose"),this.off("dispose"),this.styleEl_&&this.styleEl_.parentNode&&this.styleEl_.parentNode.removeChild(this.styleEl_),b.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&this.tech_.dispose(),a.prototype.dispose.call(this)},b.prototype.createEl=function(){var b=this.el_=a.prototype.createEl.call(this,"div"),c=this.tag;c.removeAttribute("width"),c.removeAttribute("height");var d=q.getElAttributes(c);if(Object.getOwnPropertyNames(d).forEach(function(a){"class"===a?b.className=d[a]:b.setAttribute(a,d[a])}),c.playerId=c.id,c.id+="_html5_api",c.className="vjs-tech",c.player=b.player=this,this.addClass("vjs-paused"),m["default"].VIDEOJS_NO_DYNAMIC_STYLE!==!0){this.styleEl_=E.createStyleElement("vjs-styles-dimensions");var e=q.$(".vjs-styles-defaults"),f=q.$("head");f.insertBefore(this.styleEl_,e?e.nextSibling:f.firstChild)}this.width(this.options_.width),this.height(this.options_.height),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio);for(var g=c.getElementsByTagName("a"),h=0;h<g.length;h++){var i=g.item(h);q.addElClass(i,"vjs-hidden"),i.setAttribute("hidden","hidden")}return c.initNetworkState_=c.networkState,c.parentNode&&c.parentNode.insertBefore(b,c),q.insertElFirst(c,b),this.children_.unshift(c),this.el_=b,b},b.prototype.width=function(a){return this.dimension("width",a)},b.prototype.height=function(a){return this.dimension("height",a)},b.prototype.dimension=function(a,b){var c=a+"_";if(void 0===b)return this[c]||0;if(""===b)this[c]=void 0;else{var d=parseFloat(b);if(isNaN(d))return y["default"].error('Improper value "'+b+'" supplied for for '+a),this;this[c]=d}return this.updateStyleEl_(),this},b.prototype.fluid=function(a){return void 0===a?!!this.fluid_:(this.fluid_=!!a,void(a?this.addClass("vjs-fluid"):this.removeClass("vjs-fluid")))},b.prototype.aspectRatio=function(a){if(void 0===a)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(a))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=a,this.fluid(!0),this.updateStyleEl_()},b.prototype.updateStyleEl_=function(){if(m["default"].VIDEOJS_NO_DYNAMIC_STYLE===!0){var a="number"==typeof this.width_?this.width_:this.options_.width,b="number"==typeof this.height_?this.height_:this.options_.height,c=this.tech_&&this.tech_.el();return void(c&&(a>=0&&(c.width=a),b>=0&&(c.height=b)))}var d=void 0,e=void 0,f=void 0,g=void 0;f=void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:this.videoWidth()?this.videoWidth()+":"+this.videoHeight():"16:9";var h=f.split(":"),i=h[1]/h[0];d=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/i:this.videoWidth()||300,e=void 0!==this.height_?this.height_:d*i,g=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(g),E.setTextContent(this.styleEl_,"\n      ."+g+" {\n        width: "+d+"px;\n        height: "+e+"px;\n      }\n\n      ."+g+".vjs-fluid {\n        padding-top: "+100*i+"%;\n      }\n    ")},b.prototype.loadTech_=function(a,b){this.tech_&&this.unloadTech_(),"Html5"!==a&&this.tag&&(ea["default"].getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=a,this.isReady_=!1;var c=M["default"]({nativeControlsForTouch:this.options_.nativeControlsForTouch,source:b,playerId:this.id(),techId:this.id()+"_"+a+"_api",videoTracks:this.videoTracks_,textTracks:this.textTracks_,audioTracks:this.audioTracks_,autoplay:this.options_.autoplay,controls:this.options_.controls,preload:this.options_.preload,loop:this.options_.loop,muted:this.options_.muted,poster:this.poster(),language:this.language(),"vtt.js":this.options_["vtt.js"]},this.options_[a.toLowerCase()]);this.tag&&(c.tag=this.tag),b&&(this.currentType_=b.type,b.src===this.cache_.src&&this.cache_.currentTime>0&&(c.startTime=this.cache_.currentTime),this.cache_.src=b.src);var d=ea["default"].getTech(a);d||(d=i["default"].getComponent(a)),this.tech_=new d(c),this.tech_.ready(s.bind(this,this.handleTechReady_),!0),Q["default"].jsonToTextTracks(this.textTracksJson_||[],this.tech_),this.on(this.tech_,"loadstart",this.handleTechLoadStart_),this.on(this.tech_,"waiting",this.handleTechWaiting_),this.on(this.tech_,"canplay",this.handleTechCanPlay_),this.on(this.tech_,"canplaythrough",this.handleTechCanPlayThrough_),this.on(this.tech_,"playing",this.handleTechPlaying_),this.on(this.tech_,"ended",this.handleTechEnded_),this.on(this.tech_,"seeking",this.handleTechSeeking_),this.on(this.tech_,"seeked",this.handleTechSeeked_),this.on(this.tech_,"play",this.handleTechPlay_),this.on(this.tech_,"firstplay",this.handleTechFirstPlay_),this.on(this.tech_,"pause",this.handleTechPause_),this.on(this.tech_,"progress",this.handleTechProgress_),this.on(this.tech_,"durationchange",this.handleTechDurationChange_),this.on(this.tech_,"fullscreenchange",this.handleTechFullscreenChange_),this.on(this.tech_,"error",this.handleTechError_),this.on(this.tech_,"suspend",this.handleTechSuspend_),this.on(this.tech_,"abort",this.handleTechAbort_),this.on(this.tech_,"emptied",this.handleTechEmptied_),this.on(this.tech_,"stalled",this.handleTechStalled_),this.on(this.tech_,"loadedmetadata",this.handleTechLoadedMetaData_),this.on(this.tech_,"loadeddata",this.handleTechLoadedData_),this.on(this.tech_,"timeupdate",this.handleTechTimeUpdate_),this.on(this.tech_,"ratechange",this.handleTechRateChange_),this.on(this.tech_,"volumechange",this.handleTechVolumeChange_),this.on(this.tech_,"texttrackchange",this.handleTechTextTrackChange_),this.on(this.tech_,"loadedmetadata",this.updateStyleEl_),this.on(this.tech_,"posterchange",this.handleTechPosterChange_),this.tech_.el().parentNode===this.el()||"Html5"===a&&this.tag||q.insertElFirst(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},b.prototype.unloadTech_=function(){this.videoTracks_=this.videoTracks(),this.textTracks_=this.textTracks(),this.audioTracks_=this.audioTracks(),this.textTracksJson_=Q["default"].textTracksToJson(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1},b.prototype.tech=function(a){if(a&&a.IWillNotUseThisInPlugins)return this.tech_;var b="\n      Please make sure that you are not using this inside of a plugin.\n      To disable this alert and error, please pass in an object with\n      `IWillNotUseThisInPlugins` to the `tech` method. See\n      https://github.com/videojs/video.js/issues/2617 for more info.\n    ";throw m["default"].alert(b),new Error(b)},b.prototype.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"mousedown",this.handleTechClick_),this.on(this.tech_,"touchstart",this.handleTechTouchStart_),this.on(this.tech_,"touchmove",this.handleTechTouchMove_),this.on(this.tech_,"touchend",this.handleTechTouchEnd_),this.on(this.tech_,"tap",this.handleTechTap_)},b.prototype.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.handleTechTap_),this.off(this.tech_,"touchstart",this.handleTechTouchStart_),this.off(this.tech_,"touchmove",this.handleTechTouchMove_),this.off(this.tech_,"touchend",this.handleTechTouchEnd_),this.off(this.tech_,"mousedown",this.handleTechClick_)},b.prototype.handleTechReady_=function(){this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_(),this.src()&&this.tag&&this.options_.autoplay&&this.paused()&&(delete this.tag.poster,this.play())},b.prototype.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay"))},b.prototype.hasStarted=function(a){return void 0!==a?(this.hasStarted_!==a&&(this.hasStarted_=a,a?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started")),this):!!this.hasStarted_},b.prototype.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},b.prototype.handleTechWaiting_=function(){var a=this;this.addClass("vjs-waiting"),this.trigger("waiting"),this.one("timeupdate",function(){return a.removeClass("vjs-waiting")})},b.prototype.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},b.prototype.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},b.prototype.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},b.prototype.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},b.prototype.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.trigger("seeked")},b.prototype.handleTechFirstPlay_=function(){this.options_.starttime&&this.currentTime(this.options_.starttime),this.addClass("vjs-has-started"),this.trigger("firstplay")},b.prototype.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},b.prototype.handleTechProgress_=function(){this.trigger("progress")},b.prototype.handleTechEnded_=function(){this.addClass("vjs-ended"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},b.prototype.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},b.prototype.handleTechClick_=function(a){0===a.button&&this.controls()&&(this.paused()?this.play():this.pause())},b.prototype.handleTechTap_=function(){this.userActive(!this.userActive())},b.prototype.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},b.prototype.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},b.prototype.handleTechTouchEnd_=function(a){a.preventDefault()},b.prototype.handleFullscreenChange_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},b.prototype.handleStageClick_=function(){this.reportUserActivity()},b.prototype.handleTechFullscreenChange_=function(a,b){b&&this.isFullscreen(b.isFullscreen),this.trigger("fullscreenchange")},b.prototype.handleTechError_=function(){var a=this.tech_.error();this.error(a&&a.code)},b.prototype.handleTechSuspend_=function(){this.trigger("suspend")},b.prototype.handleTechAbort_=function(){this.trigger("abort")},b.prototype.handleTechEmptied_=function(){this.trigger("emptied")},b.prototype.handleTechStalled_=function(){this.trigger("stalled")},b.prototype.handleTechLoadedMetaData_=function(){this.trigger("loadedmetadata")},b.prototype.handleTechLoadedData_=function(){this.trigger("loadeddata")},b.prototype.handleTechTimeUpdate_=function(){this.trigger("timeupdate")},b.prototype.handleTechRateChange_=function(){this.trigger("ratechange")},b.prototype.handleTechVolumeChange_=function(){this.trigger("volumechange")},b.prototype.handleTechTextTrackChange_=function(){this.trigger("texttrackchange")},b.prototype.getCache=function(){return this.cache_},b.prototype.techCall_=function(a,b){if(this.tech_&&!this.tech_.isReady_)this.tech_.ready(function(){this[a](b)},!0);else try{this.tech_&&this.tech_[a](b)}catch(c){throw y["default"](c),c}},b.prototype.techGet_=function(a){if(this.tech_&&this.tech_.isReady_)try{return this.tech_[a]()}catch(b){throw void 0===this.tech_[a]?y["default"]("Video.js: "+a+" method not defined for "+this.techName_+" playback technology.",b):"TypeError"===b.name?(y["default"]("Video.js: "+a+" unavailable on "+this.techName_+" playback technology element.",b),this.tech_.isReady_=!1):y["default"](b),b}},b.prototype.play=function(){return this.techCall_("play"),this},b.prototype.pause=function(){return this.techCall_("pause"),this},b.prototype.paused=function(){return this.techGet_("paused")===!1?!1:!0},b.prototype.scrubbing=function(a){return void 0!==a?(this.scrubbing_=!!a,a?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing"),this):this.scrubbing_},b.prototype.currentTime=function(a){return void 0!==a?(this.techCall_("setCurrentTime",a),this):this.cache_.currentTime=this.techGet_("currentTime")||0},b.prototype.duration=function(a){return void 0===a?this.cache_.duration||0:(a=parseFloat(a)||0,0>a&&(a=1/0),a!==this.cache_.duration&&(this.cache_.duration=a,a===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),this.trigger("durationchange")),this)},b.prototype.remainingTime=function(){return this.duration()-this.currentTime()},b.prototype.buffered=function c(){var c=this.techGet_("buffered");return c&&c.length||(c=B.createTimeRange(0,0)),c},b.prototype.bufferedPercent=function(){return C.bufferedPercent(this.buffered(),this.duration())},b.prototype.bufferedEnd=function(){var a=this.buffered(),b=this.duration(),c=a.end(a.length-1);return c>b&&(c=b),c},b.prototype.volume=function(a){var b=void 0;return void 0!==a?(b=Math.max(0,Math.min(1,parseFloat(a))),this.cache_.volume=b,this.techCall_("setVolume",b),this):(b=parseFloat(this.techGet_("volume")),isNaN(b)?1:b)},b.prototype.muted=function(a){return void 0!==a?(this.techCall_("setMuted",a),this):this.techGet_("muted")||!1},b.prototype.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},b.prototype.isFullscreen=function(a){return void 0!==a?(this.isFullscreen_=!!a,this):!!this.isFullscreen_},b.prototype.requestFullscreen=function(){var a=G["default"];return this.isFullscreen(!0),a.requestFullscreen?(o.on(k["default"],a.fullscreenchange,s.bind(this,function b(){this.isFullscreen(k["default"][a.fullscreenElement]),this.isFullscreen()===!1&&o.off(k["default"],a.fullscreenchange,b),this.trigger("fullscreenchange")})),this.el_[a.requestFullscreen]()):this.tech_.supportsFullScreen()?this.techCall_("enterFullScreen"):(this.enterFullWindow(),this.trigger("fullscreenchange")),this},b.prototype.exitFullscreen=function(){var a=G["default"];return this.isFullscreen(!1),a.requestFullscreen?k["default"][a.exitFullscreen]():this.tech_.supportsFullScreen()?this.techCall_("exitFullScreen"):(this.exitFullWindow(),this.trigger("fullscreenchange")),this},b.prototype.enterFullWindow=function(){this.isFullWindow=!0,this.docOrigOverflow=k["default"].documentElement.style.overflow,o.on(k["default"],"keydown",s.bind(this,this.fullWindowOnEscKey)),k["default"].documentElement.style.overflow="hidden",q.addElClass(k["default"].body,"vjs-full-window"),this.trigger("enterFullWindow")},b.prototype.fullWindowOnEscKey=function(a){27===a.keyCode&&(this.isFullscreen()===!0?this.exitFullscreen():this.exitFullWindow())},b.prototype.exitFullWindow=function(){this.isFullWindow=!1,o.off(k["default"],"keydown",this.fullWindowOnEscKey),k["default"].documentElement.style.overflow=this.docOrigOverflow,q.removeElClass(k["default"].body,"vjs-full-window"),this.trigger("exitFullWindow")},b.prototype.canPlayType=function(a){for(var b=void 0,c=0,d=this.options_.techOrder;c<d.length;c++){var e=A["default"](d[c]),f=ea["default"].getTech(e);if(f||(f=i["default"].getComponent(e)),f){if(f.isSupported()&&(b=f.canPlayType(a)))return b}else y["default"].error('The "'+e+'" tech is undefined. Skipped browser support check for that tech.')}return""},b.prototype.selectSource=function(a){var b=this.options_.techOrder.map(A["default"]).map(function(a){return[a,ea["default"].getTech(a)||i["default"].getComponent(a)]}).filter(function(a){var b=a[0],c=a[1];return c?c.isSupported():(y["default"].error('The "'+b+'" tech is undefined. Skipped browser support check for that tech.'),!1)}),c=function(a,b,c){var d=void 0;return a.some(function(a){return b.some(function(b){return d=c(a,b),d?!0:void 0})}),d},d=void 0,e=function(a){return function(b,c){return a(c,b)}},f=function(a,b){var c=a[0],d=a[1];return d.canPlaySource(b)?{source:b,tech:c}:void 0};return d=this.options_.sourceOrder?c(a,b,e(f)):c(b,a,f),d||!1},b.prototype.src=function(a){if(void 0===a)return this.techGet_("src");var b=ea["default"].getTech(this.techName_);return b||(b=i["default"].getComponent(this.techName_)),Array.isArray(a)?this.sourceList_(a):"string"==typeof a?this.src({src:a}):a instanceof Object&&(a.type&&!b.canPlaySource(a)?this.sourceList_([a]):(this.cache_.src=a.src,this.currentType_=a.type||"",this.ready(function(){b.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",a):this.techCall_("src",a.src),"auto"===this.options_.preload&&this.load(),this.options_.autoplay&&this.play()},!0))),this},b.prototype.sourceList_=function(a){var b=this.selectSource(a);b?b.tech===this.techName_?this.src(b.source):this.loadTech_(b.tech,b.source):(this.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0),this.triggerReady())},b.prototype.load=function(){return this.techCall_("load"),this},b.prototype.reset=function(){return this.loadTech_(A["default"](this.options_.techOrder[0]),null),this.techCall_("reset"),this},b.prototype.currentSrc=function(){return this.techGet_("currentSrc")||this.cache_.src||""},b.prototype.currentType=function(){return this.currentType_||""},b.prototype.preload=function(a){return void 0!==a?(this.techCall_("setPreload",a),this.options_.preload=a,this):this.techGet_("preload")},b.prototype.autoplay=function(a){return void 0!==a?(this.techCall_("setAutoplay",a),this.options_.autoplay=a,this):this.techGet_("autoplay",a)},b.prototype.loop=function(a){return void 0!==a?(this.techCall_("setLoop",a),this.options_.loop=a,this):this.techGet_("loop")},b.prototype.poster=function(a){return void 0===a?this.poster_:(a||(a=""),this.poster_=a,this.techCall_("setPoster",a),this.trigger("posterchange"),this)},b.prototype.handleTechPosterChange_=function(){!this.poster_&&this.tech_&&this.tech_.poster&&(this.poster_=this.tech_.poster()||"",this.trigger("posterchange"))},b.prototype.controls=function(a){return void 0!==a?(a=!!a,this.controls_!==a&&(this.controls_=a,this.usingNativeControls()&&this.techCall_("setControls",a),a?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_())),this):!!this.controls_},b.prototype.usingNativeControls=function(a){return void 0!==a?(a=!!a,this.usingNativeControls_!==a&&(this.usingNativeControls_=a,a?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols"))),this):!!this.usingNativeControls_},b.prototype.error=function(a){return void 0===a?this.error_||null:null===a?(this.error_=a,this.removeClass("vjs-error"),this.errorDisplay.close(),this):(this.error_=a instanceof I["default"]?a:new I["default"](a),this.addClass("vjs-error"),y["default"].error("(CODE:"+this.error_.code+" "+I["default"].errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error"),this)},b.prototype.ended=function(){return this.techGet_("ended")},b.prototype.seeking=function(){return this.techGet_("seeking")},b.prototype.seekable=function(){return this.techGet_("seekable")},b.prototype.reportUserActivity=function(){this.userActivity_=!0},b.prototype.userActive=function(a){return void 0!==a?(a=!!a,a!==this.userActive_&&(this.userActive_=a,a?(this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),this.trigger("useractive")):(this.userActivity_=!1,this.tech_&&this.tech_.one("mousemove",function(a){a.stopPropagation(),a.preventDefault()}),this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive"))),this):this.userActive_},b.prototype.listenForUserActivity_=function(){var a=void 0,b=void 0,c=void 0,d=s.bind(this,this.reportUserActivity),e=function(a){(a.screenX!==b||a.screenY!==c)&&(b=a.screenX,c=a.screenY,d())},f=function(){d(),this.clearInterval(a),a=this.setInterval(d,250)},g=function(){d(),this.clearInterval(a)};this.on("mousedown",f),this.on("mousemove",e),this.on("mouseup",g),this.on("keydown",d),this.on("keyup",d);{var h=void 0;this.setInterval(function(){if(this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(h);var a=this.options_.inactivityTimeout;a>0&&(h=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},a))}},250)}},b.prototype.playbackRate=function(a){return void 0!==a?(this.techCall_("setPlaybackRate",a),this):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("playbackRate"):1},b.prototype.isAudio=function(a){return void 0!==a?(this.isAudio_=!!a,this):!!this.isAudio_},b.prototype.networkState=function(){return this.techGet_("networkState")},b.prototype.readyState=function(){return this.techGet_("readyState")},b.prototype.videoTracks=function(){return this.tech_?this.tech_.videoTracks():(this.videoTracks_=this.videoTracks_||new U["default"],this.videoTracks_)},b.prototype.audioTracks=function(){return this.tech_?this.tech_.audioTracks():(this.audioTracks_=this.audioTracks_||new S["default"],this.audioTracks_)},b.prototype.textTracks=function(){return this.tech_&&this.tech_.textTracks()},b.prototype.remoteTextTracks=function(){return this.tech_&&this.tech_.remoteTextTracks()},b.prototype.remoteTextTrackEls=function(){return this.tech_&&this.tech_.remoteTextTrackEls()},b.prototype.addTextTrack=function(a,b,c){return this.tech_&&this.tech_.addTextTrack(a,b,c)},b.prototype.addRemoteTextTrack=function(a){return this.tech_&&this.tech_.addRemoteTextTrack(a)},b.prototype.removeRemoteTextTrack=function(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],b=a.track,c=void 0===b?arguments[0]:b;this.tech_&&this.tech_.removeRemoteTextTrack(c)},b.prototype.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},b.prototype.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},b.prototype.language=function(a){return void 0===a?this.language_:(this.language_=(""+a).toLowerCase(),this)},b.prototype.languages=function(){return O["default"](b.prototype.options_.languages,this.languages_)},b.prototype.toJSON=function(){var a=O["default"](this.options_),b=a.tracks;a.tracks=[];for(var c=0;c<b.length;c++){var d=b[c];d=O["default"](d),d.player=void 0,a.tracks[c]=d}return a},b.prototype.createModal=function(a,b){var c=this;b=b||{},b.content=a||"";var d=new ca["default"](c,b);return c.addChild(d),d.on("dispose",function(){c.removeChild(d)}),d.open()},b.getTagSettings=function(a){var b={sources:[],tracks:[]},c=q.getElAttributes(a),d=c["data-setup"];if(null!==d){var e=K["default"](d||"{}"),f=e[0],g=e[1];f&&y["default"].error(f),M["default"](c,g)}if(M["default"](b,c),a.hasChildNodes())for(var h=a.childNodes,i=0,j=h.length;j>i;i++){var k=h[i],l=k.nodeName.toLowerCase();"source"===l?b.sources.push(q.getElAttributes(k)):"track"===l&&b.tracks.push(q.getElAttributes(k))}return b},b}(i["default"]));ga.players={};var ha=m["default"].navigator;ga.prototype.options_={techOrder:["html5","flash"],html5:{},flash:{},defaultVolume:0,inactivityTimeout:2e3,playbackRates:[],children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","controlBar","errorDisplay","textTrackSettings"],language:k["default"].getElementsByTagName("html")[0].getAttribute("lang")||ha.languages&&ha.languages[0]||ha.userLanguage||ha.language||"en",languages:{},notSupportedMessage:"No compatible source was found for this media."},ga.prototype.handleLoadedMetaData_,ga.prototype.handleLoadedData_,ga.prototype.handleUserActive_,ga.prototype.handleUserInactive_,ga.prototype.handleTimeUpdate_,ga.prototype.handleTechEnded_,ga.prototype.handleVolumeChange_,ga.prototype.handleError_,ga.prototype.flexNotSupported_=function(){var a=k["default"].createElement("i");return!("flexBasis"in a.style||"webkitFlexBasis"in a.style||"mozFlexBasis"in a.style||"msFlexBasis"in a.style||"msFlexOrder"in a.style)},i["default"].registerComponent("Player",ga),c["default"]=ga,b.exports=c["default"]},{"./big-play-button.js":62,"./component.js":66,"./control-bar/control-bar.js":69,"./error-display.js":103,"./fullscreen-api.js":106,"./loading-spinner.js":107,"./media-error.js":108,"./modal-dialog":112,"./poster-image.js":117,"./tech/html5.js":122,"./tech/loader.js":123,"./tech/tech.js":124,"./tracks/audio-track-list.js":126,"./tracks/text-track-display.js":131,"./tracks/text-track-list-converter.js":132,"./tracks/text-track-settings.js":134,"./tracks/video-track-list.js":139,"./utils/browser.js":141,"./utils/buffer.js":142,"./utils/dom.js":144,"./utils/events.js":145,"./utils/fn.js":146,"./utils/guid.js":148,"./utils/log.js":149,"./utils/merge-options.js":150,"./utils/stylesheet.js":151,"./utils/time-ranges.js":152,"./utils/to-title-case.js":153,"global/document":7,"global/window":8,"object.assign":53,"safe-json-parse/tuple":57}],114:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}c.__esModule=!0;var e=a("./player.js"),f=d(e),g=function(a,b){f["default"].prototype[a]=b};c["default"]=g,b.exports=c["default"]},{"./player.js":113}],115:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a){return a&&a.__esModule?a:{"default":a}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("../clickable-component.js"),i=e(h),j=a("../component.js"),k=e(j),l=a("./popup.js"),m=(e(l),a("../utils/dom.js")),n=(d(m),a("../utils/fn.js")),o=(d(n),a("../utils/to-title-case.js")),p=(e(o),function(a){function b(c){var d=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];f(this,b),a.call(this,c,d),this.update()}return g(b,a),b.prototype.update=function(){var a=this.createPopup();this.popup&&this.removeChild(this.popup),this.popup=a,this.addChild(a),this.items&&0===this.items.length?this.hide():this.items&&this.items.length>1&&this.show()},b.prototype.createPopup=function(){},b.prototype.createEl=function(){return a.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})},b.prototype.buildCSSClass=function(){var b="vjs-menu-button";return b+=this.options_.inline===!0?"-inline":"-popup","vjs-menu-button "+b+" "+a.prototype.buildCSSClass.call(this)},b.prototype.tooltipHandler=function(){},b}(i["default"]));k["default"].registerComponent("PopupButton",p),c["default"]=p,b.exports=c["default"]},{"../clickable-component.js":64,"../component.js":66,"../utils/dom.js":144,"../utils/fn.js":146,"../utils/to-title-case.js":153,"./popup.js":116}],116:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a){return a&&a.__esModule?a:{"default":a}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("../component.js"),i=e(h),j=a("../utils/dom.js"),k=d(j),l=a("../utils/fn.js"),m=d(l),n=a("../utils/events.js"),o=d(n),p=function(a){function b(){f(this,b),a.apply(this,arguments)}return g(b,a),b.prototype.addItem=function(a){this.addChild(a),a.on("click",m.bind(this,function(){this.unlockShowing()}))},b.prototype.createEl=function(){var b=this.options_.contentElType||"ul";this.contentEl_=k.createEl(b,{className:"vjs-menu-content"});var c=a.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return c.appendChild(this.contentEl_),o.on(c,"click",function(a){a.preventDefault(),a.stopImmediatePropagation()}),c},b}(i["default"]);i["default"].registerComponent("Popup",p),c["default"]=p,b.exports=c["default"]},{"../component.js":66,"../utils/dom.js":144,"../utils/events.js":145,"../utils/fn.js":146}],117:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a){return a&&a.__esModule?a:{"default":a}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("./clickable-component.js"),i=e(h),j=a("./component.js"),k=e(j),l=a("./utils/fn.js"),m=d(l),n=a("./utils/dom.js"),o=d(n),p=a("./utils/browser.js"),q=d(p),r=function(a){function b(c,d){f(this,b),a.call(this,c,d),this.update(),c.on("posterchange",m.bind(this,this.update))}return g(b,a),b.prototype.dispose=function(){this.player().off("posterchange",this.update),a.prototype.dispose.call(this)},b.prototype.createEl=function(){var a=o.createEl("div",{className:"vjs-poster",tabIndex:-1});return q.BACKGROUND_SIZE_SUPPORTED||(this.fallbackImg_=o.createEl("img"),a.appendChild(this.fallbackImg_)),a},b.prototype.update=function(){var a=this.player().poster();

this.setSrc(a),a?this.show():this.hide()},b.prototype.setSrc=function(a){if(this.fallbackImg_)this.fallbackImg_.src=a;else{var b="";a&&(b='url("'+a+'")'),this.el_.style.backgroundImage=b}},b.prototype.handleClick=function(){this.player_.paused()?this.player_.play():this.player_.pause()},b}(i["default"]);k["default"].registerComponent("PosterImage",r),c["default"]=r,b.exports=c["default"]},{"./clickable-component.js":64,"./component.js":66,"./utils/browser.js":141,"./utils/dom.js":144,"./utils/fn.js":146}],118:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}c.__esModule=!0;var f=a("./utils/events.js"),g=e(f),h=a("global/document"),i=d(h),j=a("global/window"),k=d(j),l=!1,m=void 0,n=function(){var a=i["default"].getElementsByTagName("video"),b=i["default"].getElementsByTagName("audio"),c=[];if(a&&a.length>0)for(var d=0,e=a.length;e>d;d++)c.push(a[d]);if(b&&b.length>0)for(var d=0,e=b.length;e>d;d++)c.push(b[d]);if(c&&c.length>0)for(var d=0,e=c.length;e>d;d++){var f=c[d];if(!f||!f.getAttribute){o(1);break}if(void 0===f.player){var g=f.getAttribute("data-setup");if(null!==g){m(f)}}}else l||o(1)},o=function(a,b){b&&(m=b),setTimeout(n,a)};"complete"===i["default"].readyState?l=!0:g.one(k["default"],"load",function(){l=!0});var p=function(){return l};c.autoSetup=n,c.autoSetupTimeout=o,c.hasLoaded=p},{"./utils/events.js":145,"global/document":7,"global/window":8}],119:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a){return a&&a.__esModule?a:{"default":a}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("../component.js"),i=e(h),j=a("../utils/dom.js"),k=d(j),l=a("object.assign"),m=e(l),n=function(a){function b(c,d){f(this,b),a.call(this,c,d),this.bar=this.getChild(this.options_.barName),this.vertical(!!this.options_.vertical),this.on("mousedown",this.handleMouseDown),this.on("touchstart",this.handleMouseDown),this.on("focus",this.handleFocus),this.on("blur",this.handleBlur),this.on("click",this.handleClick),this.on(c,"controlsvisible",this.update),this.on(c,this.playerEvent,this.update)}return g(b,a),b.prototype.createEl=function(b){var c=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],d=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];return c.className=c.className+" vjs-slider",c=m["default"]({tabIndex:0},c),d=m["default"]({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},d),a.prototype.createEl.call(this,b,c,d)},b.prototype.handleMouseDown=function(a){var b=this.bar.el_.ownerDocument;a.preventDefault(),k.blockTextSelection(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(b,"mousemove",this.handleMouseMove),this.on(b,"mouseup",this.handleMouseUp),this.on(b,"touchmove",this.handleMouseMove),this.on(b,"touchend",this.handleMouseUp),this.handleMouseMove(a)},b.prototype.handleMouseMove=function(){},b.prototype.handleMouseUp=function(){var a=this.bar.el_.ownerDocument;k.unblockTextSelection(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(a,"mousemove",this.handleMouseMove),this.off(a,"mouseup",this.handleMouseUp),this.off(a,"touchmove",this.handleMouseMove),this.off(a,"touchend",this.handleMouseUp),this.update()},b.prototype.update=function(){if(this.el_){var a=this.getPercent(),b=this.bar;if(b){("number"!=typeof a||a!==a||0>a||a===1/0)&&(a=0);var c=(100*a).toFixed(2)+"%";this.vertical()?b.el().style.height=c:b.el().style.width=c}}},b.prototype.calculateDistance=function(a){var b=k.getPointerPosition(this.el_,a);return this.vertical()?b.y:b.x},b.prototype.handleFocus=function(){this.on(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)},b.prototype.handleKeyPress=function(a){37===a.which||40===a.which?(a.preventDefault(),this.stepBack()):(38===a.which||39===a.which)&&(a.preventDefault(),this.stepForward())},b.prototype.handleBlur=function(){this.off(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)},b.prototype.handleClick=function(a){a.stopImmediatePropagation(),a.preventDefault()},b.prototype.vertical=function(a){return void 0===a?this.vertical_||!1:(this.vertical_=!!a,this.addClass(this.vertical_?"vjs-slider-vertical":"vjs-slider-horizontal"),this)},b}(i["default"]);i["default"].registerComponent("Slider",n),c["default"]=n,b.exports=c["default"]},{"../component.js":66,"../utils/dom.js":144,"object.assign":53}],120:[function(a,b,c){"use strict";function d(a){return a.streamingFormats={"rtmp/mp4":"MP4","rtmp/flv":"FLV"},a.streamFromParts=function(a,b){return a+"&"+b},a.streamToParts=function(a){var b={connection:"",stream:""};if(!a)return b;var c=a.search(/&(?!\w+=)/),d=void 0;return-1!==c?d=c+1:(c=d=a.lastIndexOf("/")+1,0===c&&(c=d=a.length)),b.connection=a.substring(0,c),b.stream=a.substring(d,a.length),b},a.isStreamingType=function(b){return b in a.streamingFormats},a.RTMP_RE=/^rtmp[set]?:\/\//i,a.isStreamingSrc=function(b){return a.RTMP_RE.test(b)},a.rtmpSourceHandler={},a.rtmpSourceHandler.canPlayType=function(b){return a.isStreamingType(b)?"maybe":""},a.rtmpSourceHandler.canHandleSource=function(b){var c=a.rtmpSourceHandler.canPlayType(b.type);return c?c:a.isStreamingSrc(b.src)?"maybe":""},a.rtmpSourceHandler.handleSource=function(b,c){var d=a.streamToParts(b.src);c.setRtmpConnection(d.connection),c.setRtmpStream(d.stream)},a.registerSourceHandler(a.rtmpSourceHandler),a}c.__esModule=!0,c["default"]=d,b.exports=c["default"]},{}],121:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a){return a&&a.__esModule?a:{"default":a}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function h(a){var b=a.charAt(0).toUpperCase()+a.slice(1);A["set"+b]=function(b){return this.el_.vjs_setProperty(a,b)}}function i(a){A[a]=function(){return this.el_.vjs_getProperty(a)}}c.__esModule=!0;for(var j=a("./tech"),k=e(j),l=a("../utils/dom.js"),m=d(l),n=a("../utils/url.js"),o=d(n),p=a("../utils/time-ranges.js"),q=a("./flash-rtmp"),r=e(q),s=a("../component"),t=e(s),u=a("global/window"),v=e(u),w=a("object.assign"),x=e(w),y=v["default"].navigator,z=function(a){function b(c,d){f(this,b),a.call(this,c,d),c.source&&this.ready(function(){this.setSource(c.source)},!0),c.startTime&&this.ready(function(){this.load(),this.play(),this.currentTime(c.startTime)},!0),v["default"].videojs=v["default"].videojs||{},v["default"].videojs.Flash=v["default"].videojs.Flash||{},v["default"].videojs.Flash.onReady=b.onReady,v["default"].videojs.Flash.onEvent=b.onEvent,v["default"].videojs.Flash.onError=b.onError,this.on("seeked",function(){this.lastSeekTarget_=void 0})}return g(b,a),b.prototype.createEl=function(){var a=this.options_;a.swf||(a.swf="//cdn.rawgit.com/hola/video-js-swf-sv/v5.1.0-4/dist/video-js.swf");var c=a.techId;a.accelerated&&(a.params=x["default"](a.params||{},{allowfullscreen:!0,wmode:"direct"}));var d=x["default"]({readyFunction:"videojs.Flash.onReady",eventProxyFunction:"videojs.Flash.onEvent",errorEventProxyFunction:"videojs.Flash.onError",accelerated:a.accelerated,autoplay:a.autoplay,controls:a.controls,poster:a.poster,preload:a.preload,loop:a.loop,muted:a.muted},a.flashVars),e=x["default"]({allowfullscreen:!0,wmode:"opaque",bgcolor:"#000000"},a.params),f=x["default"]({id:c,name:c,"class":"vjs-tech"},a.attributes);return this.el_=b.embed(a.swf,d,e,f),this.el_.tech=this,this.el_},b.prototype.play=function(){this.ended()&&this.setCurrentTime(0),this.el_.vjs_play()},b.prototype.pause=function(){this.el_.vjs_pause()},b.prototype.src=function(a){return void 0===a?this.currentSrc():this.setSrc(a)},b.prototype.setSrc=function(a){if(a=o.getAbsoluteURL(a),this.el_.vjs_src(a),this.autoplay()){var b=this;this.setTimeout(function(){b.play()},0)}},b.prototype.seeking=function(){return void 0!==this.lastSeekTarget_},b.prototype.setCurrentTime=function(b){var c=this.seekable();c.length&&(b=b>c.start(0)?b:c.start(0),b=b<c.end(c.length-1)?b:c.end(c.length-1),this.lastSeekTarget_=b,this.trigger("seeking"),this.el_.vjs_setProperty("currentTime",b),a.prototype.setCurrentTime.call(this))},b.prototype.currentTime=function(){return this.seeking()?this.lastSeekTarget_||0:this.el_.vjs_getProperty("currentTime")},b.prototype.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.vjs_getProperty("currentSrc")},b.prototype.load=function(){this.el_.vjs_load()},b.prototype.seekable=function(){var a=this.duration();return 0===a?p.createTimeRange():p.createTimeRange(0,a)},b.prototype.buffered=function(){var a=this.el_.vjs_getProperty("buffered");return 0===a.length?p.createTimeRange():p.createTimeRange(a[0][0],a[0][1])},b.prototype.supportsFullScreen=function(){return!1},b.prototype.enterFullScreen=function(){return!1},b}(k["default"]),A=z.prototype,B="rtmpConnection,rtmpStream,preload,defaultPlaybackRate,playbackRate,autoplay,loop,mediaGroup,controller,controls,volume,muted,defaultMuted,poster".split(","),C="networkState,readyState,initialTime,duration,startOffsetTime,paused,ended,videoWidth,videoHeight".split(","),D=0;D<B.length;D++)i(B[D]),h(B[D]);for(var D=0;D<C.length;D++)i(C[D]);z.isSupported=function(){return z.version()[0]>=10},k["default"].withSourceHandlers(z),z.nativeSourceHandler={},z.nativeSourceHandler.canPlayType=function(a){return a in z.formats?"maybe":""},z.nativeSourceHandler.canHandleSource=function(a){function b(a){var b=o.getFileExtension(a);return b?"video/"+b:""}var c;return c=a.type?a.type.replace(/;.*/,"").toLowerCase():b(a.src),z.nativeSourceHandler.canPlayType(c)},z.nativeSourceHandler.handleSource=function(a,b){b.setSrc(a.src)},z.nativeSourceHandler.dispose=function(){},z.registerSourceHandler(z.nativeSourceHandler),z.formats={"video/flv":"FLV","video/x-flv":"FLV","video/mp4":"MP4","video/m4v":"MP4"},z.onReady=function(a){var b=m.getEl(a),c=b&&b.tech;c&&c.el()&&z.checkReady(c)},z.checkReady=function(a){a.el()&&(a.el().vjs_getProperty?a.triggerReady():this.setTimeout(function(){z.checkReady(a)},50))},z.onEvent=function(a,b){var c=m.getEl(a).tech;c.trigger(b)},z.onError=function(a,b){var c=m.getEl(a).tech;return"srcnotfound"===b?c.error(4):void c.error("FLASH: "+b)},z.version=function(){var a="0,0,0";try{a=new v["default"].ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version").replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}catch(b){try{y.mimeTypes["application/x-shockwave-flash"].enabledPlugin&&(a=(y.plugins["Shockwave Flash 2.0"]||y.plugins["Shockwave Flash"]).description.replace(/\D+/g,",").match(/^,?(.+),?$/)[1])}catch(c){}}return a.split(",")},z.embed=function(a,b,c,d){var e=z.getEmbedCode(a,b,c,d),f=m.createEl("div",{innerHTML:e}).childNodes[0];return f},z.getEmbedCode=function(a,b,c,d){var e='<object type="application/x-shockwave-flash" ',f="",g="",h="";return b&&Object.getOwnPropertyNames(b).forEach(function(a){f+=a+"="+b[a]+"&amp;"}),c=x["default"]({movie:a,flashvars:f,allowScriptAccess:"always",allowNetworking:"all"},c),Object.getOwnPropertyNames(c).forEach(function(a){g+='<param name="'+a+'" value="'+c[a]+'" />'}),d=x["default"]({data:a,width:"100%",height:"100%"},d),Object.getOwnPropertyNames(d).forEach(function(a){h+=a+'="'+d[a]+'" '}),""+e+h+">"+g+"</object>"},r["default"](z),t["default"].registerComponent("Flash",z),k["default"].registerTech("Flash",z),c["default"]=z,b.exports=c["default"]},{"../component":66,"../utils/dom.js":144,"../utils/time-ranges.js":152,"../utils/url.js":154,"./flash-rtmp":120,"./tech":124,"global/window":8,"object.assign":53}],122:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a){return a&&a.__esModule?a:{"default":a}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function h(a,b){return a.raw=b,a}c.__esModule=!0;var i=h(["Text Tracks are being loaded from another origin but the crossorigin attribute isn't used. \n            This may prevent text tracks from loading."],["Text Tracks are being loaded from another origin but the crossorigin attribute isn't used. \n            This may prevent text tracks from loading."]),j=a("./tech.js"),k=e(j),l=a("../component"),m=e(l),n=a("../utils/dom.js"),o=d(n),p=a("../utils/url.js"),q=d(p),r=a("../utils/fn.js"),s=d(r),t=a("../utils/log.js"),u=e(t),v=a("tsml"),w=e(v),x=a("../../../src/js/tracks/text-track.js"),y=(e(x),a("../utils/browser.js")),z=d(y),A=a("global/document"),B=e(A),C=a("global/window"),D=e(C),E=a("object.assign"),F=e(E),G=a("../utils/merge-options.js"),H=e(G),I=a("../utils/to-title-case.js"),J=e(I),K=function(a){function b(c,d){var e=this;f(this,b),a.call(this,c,d);var g=c.source,h=!1;if(g&&(this.el_.currentSrc!==g.src||c.tag&&3===c.tag.initNetworkState_)?this.setSource(g):this.handleLateInit_(this.el_),this.el_.hasChildNodes()){for(var j=this.el_.childNodes,k=j.length,l=[];k--;){var m=j[k],n=m.nodeName.toLowerCase();"track"===n&&(this.featuresNativeTextTracks?(this.remoteTextTrackEls().addTrackElement_(m),this.remoteTextTracks().addTrack_(m.track),h||this.el_.hasAttribute("crossorigin")||!q.isCrossOrigin(m.src)||(h=!0)):l.push(m))}for(var o=0;o<l.length;o++)this.el_.removeChild(l[o])}var p=["audio","video"];p.forEach(function(a){var b=J["default"](a);if(e["featuresNative"+b+"Tracks"]){var c=e.el()[a+"Tracks"];c&&c.addEventListener&&(c.addEventListener("change",s.bind(e,e["handle"+b+"TrackChange_"])),c.addEventListener("addtrack",s.bind(e,e["handle"+b+"TrackAdd_"])),c.addEventListener("removetrack",s.bind(e,e["handle"+b+"TrackRemove_"])))}}),this.featuresNativeTextTracks&&(h&&u["default"].warn(w["default"](i)),this.handleTextTrackChange_=s.bind(this,this.handleTextTrackChange),this.handleTextTrackAdd_=s.bind(this,this.handleTextTrackAdd),this.handleTextTrackRemove_=s.bind(this,this.handleTextTrackRemove),this.proxyNativeTextTracks_()),(z.TOUCH_ENABLED&&c.nativeControlsForTouch===!0||z.IS_IPHONE||z.IS_NATIVE_ANDROID)&&this.setControls(!0),this.triggerReady()}return g(b,a),b.prototype.dispose=function(){var c=this;["audio","video","text"].forEach(function(a){var b=J["default"](a),d=c.el_[a+"Tracks"];d&&d.removeEventListener&&(d.removeEventListener("change",c["handle"+b+"TrackChange_"]),d.removeEventListener("addtrack",c["handle"+b+"TrackAdd_"]),d.removeEventListener("removetrack",c["handle"+b+"TrackRemove_"]))}),b.disposeMediaElement(this.el_),a.prototype.dispose.call(this)},b.prototype.createEl=function(){var a=this.options_.tag;if(!a||this.movingMediaElementInDOM===!1)if(a){var c=a.cloneNode(!0);a.parentNode.insertBefore(c,a),b.disposeMediaElement(a),a=c}else{a=B["default"].createElement("video");var d=this.options_.tag&&o.getElAttributes(this.options_.tag),e=H["default"]({},d);z.TOUCH_ENABLED&&this.options_.nativeControlsForTouch===!0||delete e.controls,o.setElAttributes(a,F["default"](e,{id:this.options_.techId,"class":"vjs-tech"}))}for(var f=["autoplay","preload","loop","muted"],g=f.length-1;g>=0;g--){var h=f[g],i={};"undefined"!=typeof this.options_[h]&&(i[h]=this.options_[h]),o.setElAttributes(a,i)}return a},b.prototype.handleLateInit_=function(a){var b=this;if(0!==a.networkState&&3!==a.networkState){if(0===a.readyState){var c=function(){var a=!1,c=function(){a=!0};b.on("loadstart",c);var d=function(){a||this.trigger("loadstart")};return b.on("loadedmetadata",d),b.ready(function(){this.off("loadstart",c),this.off("loadedmetadata",d),a||this.trigger("loadstart")}),{v:void 0}}();if("object"==typeof c)return c.v}var d=["loadstart"];d.push("loadedmetadata"),a.readyState>=2&&d.push("loadeddata"),a.readyState>=3&&d.push("canplay"),a.readyState>=4&&d.push("canplaythrough"),this.ready(function(){d.forEach(function(a){this.trigger(a)},this)})}},b.prototype.proxyNativeTextTracks_=function(){var a=this.el().textTracks;if(a){for(var b=0;b<a.length;b++)this.textTracks().addTrack_(a[b]);a.addEventListener&&(a.addEventListener("change",this.handleTextTrackChange_),a.addEventListener("addtrack",this.handleTextTrackAdd_),a.addEventListener("removetrack",this.handleTextTrackRemove_))}},b.prototype.handleTextTrackChange=function(){var a=this.textTracks();this.textTracks().trigger({type:"change",target:a,currentTarget:a,srcElement:a})},b.prototype.handleTextTrackAdd=function(a){this.textTracks().addTrack_(a.track)},b.prototype.handleTextTrackRemove=function(a){this.textTracks().removeTrack_(a.track)},b.prototype.handleVideoTrackChange_=function(){var a=this.videoTracks();this.videoTracks().trigger({type:"change",target:a,currentTarget:a,srcElement:a})},b.prototype.handleVideoTrackAdd_=function(a){this.videoTracks().addTrack_(a.track)},b.prototype.handleVideoTrackRemove_=function(a){this.videoTracks().removeTrack_(a.track)},b.prototype.handleAudioTrackChange_=function(){var a=this.audioTracks();this.audioTracks().trigger({type:"change",target:a,currentTarget:a,srcElement:a})},b.prototype.handleAudioTrackAdd_=function(a){this.audioTracks().addTrack_(a.track)},b.prototype.handleAudioTrackRemove_=function(a){this.audioTracks().removeTrack_(a.track)},b.prototype.play=function(){var a=this.el_.play();a&&a["catch"](function(){})},b.prototype.pause=function(){this.el_.pause()},b.prototype.paused=function(){return this.el_.paused},b.prototype.currentTime=function(){return this.el_.currentTime},b.prototype.setCurrentTime=function(a){try{this.el_.currentTime=a}catch(b){u["default"](b,"Video is not ready. (Video.js)")}},b.prototype.duration=function(){return this.el_.duration||0},b.prototype.buffered=function(){return this.el_.buffered},b.prototype.volume=function(){return this.el_.volume},b.prototype.setVolume=function(a){this.el_.volume=a},b.prototype.muted=function(){return this.el_.muted},b.prototype.setMuted=function(a){this.el_.muted=a},b.prototype.width=function(){return this.el_.offsetWidth},b.prototype.height=function(){return this.el_.offsetHeight},b.prototype.supportsFullScreen=function(){if("function"==typeof this.el_.webkitEnterFullScreen){var a=D["default"].navigator.userAgent;if(/Android/.test(a)||!/Chrome|Mac OS X 10.5/.test(a))return!0}return!1},b.prototype.enterFullScreen=function(){var a=this.el_;"webkitDisplayingFullscreen"in a&&this.one("webkitbeginfullscreen",function(){this.one("webkitendfullscreen",function(){this.trigger("fullscreenchange",{isFullscreen:!1})}),this.trigger("fullscreenchange",{isFullscreen:!0})}),a.paused&&a.networkState<=a.HAVE_METADATA?(this.play(),this.setTimeout(function(){a.pause(),a.webkitEnterFullScreen()},0)):a.webkitEnterFullScreen()},b.prototype.exitFullScreen=function(){this.el_.webkitExitFullScreen()},b.prototype.src=function(a){return void 0===a?this.el_.src:void this.setSrc(a)},b.prototype.setSrc=function(a){this.el_.src=a},b.prototype.load=function(){this.el_.load()},b.prototype.reset=function(){b.resetMediaElement(this.el_)},b.prototype.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},b.prototype.poster=function(){return this.el_.poster},b.prototype.setPoster=function(a){this.el_.poster=a},b.prototype.preload=function(){return this.el_.preload},b.prototype.setPreload=function(a){this.el_.preload=a},b.prototype.autoplay=function(){return this.el_.autoplay},b.prototype.setAutoplay=function(a){this.el_.autoplay=a},b.prototype.controls=function(){return this.el_.controls},b.prototype.setControls=function(a){this.el_.controls=!!a},b.prototype.loop=function(){return this.el_.loop},b.prototype.setLoop=function(a){this.el_.loop=a},b.prototype.error=function(){return this.el_.error},b.prototype.seeking=function(){return this.el_.seeking},b.prototype.seekable=function(){return this.el_.seekable},b.prototype.ended=function(){return this.el_.ended},b.prototype.defaultMuted=function(){return this.el_.defaultMuted},b.prototype.playbackRate=function(){return this.el_.playbackRate},b.prototype.played=function(){return this.el_.played},b.prototype.setPlaybackRate=function(a){this.el_.playbackRate=a},b.prototype.networkState=function(){return this.el_.networkState},b.prototype.readyState=function(){return this.el_.readyState},b.prototype.videoWidth=function(){return this.el_.videoWidth},b.prototype.videoHeight=function(){return this.el_.videoHeight},b.prototype.textTracks=function(){return a.prototype.textTracks.call(this)},b.prototype.addTextTrack=function(b,c,d){return this.featuresNativeTextTracks?this.el_.addTextTrack(b,c,d):a.prototype.addTextTrack.call(this,b,c,d)},b.prototype.addRemoteTextTrack=function(){var b=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];if(!this.featuresNativeTextTracks)return a.prototype.addRemoteTextTrack.call(this,b);var c=B["default"].createElement("track");return b.kind&&(c.kind=b.kind),b.label&&(c.label=b.label),(b.language||b.srclang)&&(c.srclang=b.language||b.srclang),b["default"]&&(c["default"]=b["default"]),b.id&&(c.id=b.id),b.src&&(c.src=b.src),this.el().appendChild(c),this.remoteTextTrackEls().addTrackElement_(c),this.remoteTextTracks().addTrack_(c.track),c},b.prototype.removeRemoteTextTrack=function(b){if(!this.featuresNativeTextTracks)return a.prototype.removeRemoteTextTrack.call(this,b);var c=void 0,d=void 0,e=this.remoteTextTrackEls().getTrackElementByTrack_(b);for(this.remoteTextTrackEls().removeTrackElement_(e),this.remoteTextTracks().removeTrack_(b),c=this.$$("track"),d=c.length;d--;)(b===c[d]||b===c[d].track)&&this.el().removeChild(c[d])},b}(k["default"]);K.TEST_VID=B["default"].createElement("video");var L=B["default"].createElement("track");L.kind="captions",L.srclang="en",L.label="English",K.TEST_VID.appendChild(L),K.isSupported=function(){try{K.TEST_VID.volume=.5}catch(a){return!1}return!!K.TEST_VID.canPlayType},k["default"].withSourceHandlers(K),K.nativeSourceHandler={},K.nativeSourceHandler.canPlayType=function(a){try{return K.TEST_VID.canPlayType(a)}catch(b){return""}},K.nativeSourceHandler.canHandleSource=function(a){var b;return a.type?K.nativeSourceHandler.canPlayType(a.type):a.src?(b=q.getFileExtension(a.src),K.nativeSourceHandler.canPlayType("video/"+b)):""},K.nativeSourceHandler.handleSource=function(a,b){b.setSrc(a.src)},K.nativeSourceHandler.dispose=function(){},K.registerSourceHandler(K.nativeSourceHandler),K.canControlVolume=function(){var a=K.TEST_VID.volume;return K.TEST_VID.volume=a/2+.1,a!==K.TEST_VID.volume},K.canControlPlaybackRate=function(){if(z.IS_ANDROID&&z.IS_CHROME)return!1;var a=K.TEST_VID.playbackRate;return K.TEST_VID.playbackRate=a/2+.1,a!==K.TEST_VID.playbackRate},K.supportsNativeTextTracks=function(){var a;return a=!!K.TEST_VID.textTracks,a&&K.TEST_VID.textTracks.length>0&&(a="number"!=typeof K.TEST_VID.textTracks[0].mode),a&&z.IS_FIREFOX&&(a=!1),!a||"onremovetrack"in K.TEST_VID.textTracks||(a=!1),a},K.supportsNativeVideoTracks=function(){var a=!!K.TEST_VID.videoTracks;return a},K.supportsNativeAudioTracks=function(){var a=!!K.TEST_VID.audioTracks;return a},K.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","volumechange"],K.prototype.featuresVolumeControl=K.canControlVolume(),K.prototype.featuresPlaybackRate=K.canControlPlaybackRate(),K.prototype.movingMediaElementInDOM=!z.IS_IOS,K.prototype.featuresFullscreenResize=!0,K.prototype.featuresProgressEvents=!0,K.prototype.featuresNativeTextTracks=K.supportsNativeTextTracks(),K.prototype.featuresNativeVideoTracks=K.supportsNativeVideoTracks(),K.prototype.featuresNativeAudioTracks=K.supportsNativeAudioTracks();var M=void 0,N=/^application\/(?:x-|vnd\.apple\.)mpegurl/i,O=/^video\/mp4/i;K.patchCanPlayType=function(){z.ANDROID_VERSION>=4&&(M||(M=K.TEST_VID.constructor.prototype.canPlayType),K.TEST_VID.constructor.prototype.canPlayType=function(a){return a&&N.test(a)?"maybe":M.call(this,a)}),z.IS_OLD_ANDROID&&(M||(M=K.TEST_VID.constructor.prototype.canPlayType),K.TEST_VID.constructor.prototype.canPlayType=function(a){return a&&O.test(a)?"maybe":M.call(this,a)})},K.unpatchCanPlayType=function(){var a=K.TEST_VID.constructor.prototype.canPlayType;return K.TEST_VID.constructor.prototype.canPlayType=M,M=null,a},K.patchCanPlayType(),K.disposeMediaElement=function(a){if(a){for(a.parentNode&&a.parentNode.removeChild(a);a.hasChildNodes();)a.removeChild(a.firstChild);a.removeAttribute("src"),"function"==typeof a.load&&!function(){try{a.load()}catch(b){}}()}},K.resetMediaElement=function(a){if(a){for(var b=a.querySelectorAll("source"),c=b.length;c--;)a.removeChild(b[c]);a.removeAttribute("src"),"function"==typeof a.load&&!function(){try{a.load()}catch(b){}}()}},m["default"].registerComponent("Html5",K),k["default"].registerTech("Html5",K),c["default"]=K,b.exports=c["default"]},{"../../../src/js/tracks/text-track.js":135,"../component":66,"../utils/browser.js":141,"../utils/dom.js":144,"../utils/fn.js":146,"../utils/log.js":149,"../utils/merge-options.js":150,"../utils/to-title-case.js":153,"../utils/url.js":154,"./tech.js":124,"global/document":7,"global/window":8,"object.assign":53,tsml:59}],123:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var g=a("../component.js"),h=d(g),i=a("./tech.js"),j=d(i),k=a("global/window"),l=(d(k),a("../utils/to-title-case.js")),m=d(l),n=function(a){function b(c,d,f){if(e(this,b),a.call(this,c,d,f),d.playerOptions.sources&&0!==d.playerOptions.sources.length)c.src(d.playerOptions.sources);else for(var g=0,i=d.playerOptions.techOrder;g<i.length;g++){var k=m["default"](i[g]),l=j["default"].getTech(k);if(k||(l=h["default"].getComponent(k)),l&&l.isSupported()){c.loadTech_(k);break}}}return f(b,a),b}(h["default"]);h["default"].registerComponent("MediaLoader",n),c["default"]=n,b.exports=c["default"]},{"../component.js":66,"../utils/to-title-case.js":153,"./tech.js":124,"global/window":8}],124:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a){return a&&a.__esModule?a:{"default":a}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("../component"),i=e(h),j=a("../tracks/html-track-element"),k=e(j),l=a("../tracks/html-track-element-list"),m=e(l),n=a("../utils/merge-options.js"),o=e(n),p=a("../tracks/text-track"),q=e(p),r=a("../tracks/text-track-list"),s=e(r),t=a("../tracks/video-track"),u=(e(t),a("../tracks/video-track-list")),v=e(u),w=a("../tracks/audio-track-list"),x=e(w),y=a("../tracks/audio-track"),z=(e(y),a("../utils/fn.js")),A=d(z),B=a("../utils/log.js"),C=e(B),D=a("../utils/time-ranges.js"),E=a("../utils/buffer.js"),F=a("../media-error.js"),G=e(F),H=a("global/window"),I=e(H),J=a("global/document"),K=e(J),L=function(a){function b(){var c=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],d=arguments.length<=1||void 0===arguments[1]?function(){}:arguments[1];f(this,b),c.reportTouchActivity=!1,a.call(this,null,c,d),this.hasStarted_=!1,this.on("playing",function(){this.hasStarted_=!0}),this.on("loadstart",function(){this.hasStarted_=!1}),this.textTracks_=c.textTracks,this.videoTracks_=c.videoTracks,this.audioTracks_=c.audioTracks,this.featuresProgressEvents||this.manualProgressOn(),this.featuresTimeupdateEvents||this.manualTimeUpdatesOn(),(c.nativeCaptions===!1||c.nativeTextTracks===!1)&&(this.featuresNativeTextTracks=!1),this.featuresNativeTextTracks||this.on("ready",this.emulateTextTracks),this.initTextTrackListeners(),this.initTrackListeners(),this.emitTapEvents()}/*! Time Tracking -------------------------------------------------------------- */
return g(b,a),b.prototype.manualProgressOn=function(){this.on("durationchange",this.onDurationChange),this.manualProgress=!0,this.one("ready",this.trackProgress)},b.prototype.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange)},b.prototype.trackProgress=function(){this.stopTrackingProgress(),this.progressInterval=this.setInterval(A.bind(this,function(){var a=this.bufferedPercent();this.bufferedPercent_!==a&&this.trigger("progress"),this.bufferedPercent_=a,1===a&&this.stopTrackingProgress()}),500)},b.prototype.onDurationChange=function(){this.duration_=this.duration()},b.prototype.buffered=function(){return D.createTimeRange(0,0)},b.prototype.bufferedPercent=function(){return E.bufferedPercent(this.buffered(),this.duration_)},b.prototype.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},b.prototype.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime),this.on("pause",this.stopTrackingCurrentTime)},b.prototype.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime),this.off("pause",this.stopTrackingCurrentTime)},b.prototype.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)},b.prototype.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},b.prototype.dispose=function(){this.clearTracks(["audio","video","text"]),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),a.prototype.dispose.call(this)},b.prototype.clearTracks=function(a){var b=this;a=[].concat(a),a.forEach(function(a){for(var c=b[a+"Tracks"]()||[],d=c.length;d--;){var e=c[d];"text"===a&&b.removeRemoteTextTrack(e),c.removeTrack_(e)}})},b.prototype.reset=function(){},b.prototype.error=function(a){return void 0!==a&&(this.error_=a instanceof G["default"]?a:new G["default"](a),this.trigger("error")),this.error_},b.prototype.played=function(){return this.hasStarted_?D.createTimeRange(0,0):D.createTimeRange()},b.prototype.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},b.prototype.initTextTrackListeners=function(){var a=A.bind(this,function(){this.trigger("texttrackchange")}),b=this.textTracks();b&&(b.addEventListener("removetrack",a),b.addEventListener("addtrack",a),this.on("dispose",A.bind(this,function(){b.removeEventListener("removetrack",a),b.removeEventListener("addtrack",a)})))},b.prototype.initTrackListeners=function(){var a=this,b=["video","audio"];b.forEach(function(b){var c=function(){a.trigger(b+"trackchange")},d=a[b+"Tracks"]();d.addEventListener("removetrack",c),d.addEventListener("addtrack",c),a.on("dispose",function(){d.removeEventListener("removetrack",c),d.removeEventListener("addtrack",c)})})},b.prototype.emulateTextTracks=function(){var a=this,b=this.textTracks();if(b){I["default"].WebVTT||null==this.el().parentNode||!function(){var b=K["default"].createElement("script");b.src=a.options_["vtt.js"]||"https://cdn.rawgit.com/gkatsev/vtt.js/vjs-v0.12.1/dist/vtt.min.js",b.onload=function(){a.trigger("vttjsloaded")},b.onerror=function(){a.trigger("vttjserror")},a.on("dispose",function(){b.onload=null,b.onerror=null}),I["default"].WebVTT=!0,a.el().parentNode.appendChild(b)}();var c=function(){return a.trigger("texttrackchange")},d=function(){c();for(var a=0;a<b.length;a++){var d=b[a];d.removeEventListener("cuechange",c),"showing"===d.mode&&d.addEventListener("cuechange",c)}};d(),b.addEventListener("change",d),this.on("dispose",function(){b.removeEventListener("change",d)})}},b.prototype.videoTracks=function(){return this.videoTracks_=this.videoTracks_||new v["default"],this.videoTracks_},b.prototype.audioTracks=function(){return this.audioTracks_=this.audioTracks_||new x["default"],this.audioTracks_},b.prototype.textTracks=function(){return this.textTracks_=this.textTracks_||new s["default"],this.textTracks_},b.prototype.remoteTextTracks=function(){return this.remoteTextTracks_=this.remoteTextTracks_||new s["default"],this.remoteTextTracks_},b.prototype.remoteTextTrackEls=function(){return this.remoteTextTrackEls_=this.remoteTextTrackEls_||new m["default"],this.remoteTextTrackEls_},b.prototype.addTextTrack=function(a,b,c){if(!a)throw new Error("TextTrack kind is required but was not provided");return M(this,a,b,c)},b.prototype.addRemoteTextTrack=function(a){var b=o["default"](a,{tech:this}),c=new k["default"](b);return this.remoteTextTrackEls().addTrackElement_(c),this.remoteTextTracks().addTrack_(c.track),this.textTracks().addTrack_(c.track),c},b.prototype.removeRemoteTextTrack=function(a){this.textTracks().removeTrack_(a);var b=this.remoteTextTrackEls().getTrackElementByTrack_(a);this.remoteTextTrackEls().removeTrackElement_(b),this.remoteTextTracks().removeTrack_(a)},b.prototype.setPoster=function(){},b.prototype.canPlayType=function(){return""},b.isTech=function(a){return a.prototype instanceof b||a instanceof b||a===b},b.registerTech=function(a,c){if(b.techs_||(b.techs_={}),!b.isTech(c))throw new Error("Tech "+a+" must be a Tech");return b.techs_[a]=c,c},b.getTech=function(a){return b.techs_&&b.techs_[a]?b.techs_[a]:I["default"]&&I["default"].videojs&&I["default"].videojs[a]?(C["default"].warn("The "+a+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),I["default"].videojs[a]):void 0},b}(i["default"]);L.prototype.textTracks_,L.prototype.audioTracks_,L.prototype.videoTracks_;var M=function(a,b,c,d){var e=arguments.length<=4||void 0===arguments[4]?{}:arguments[4],f=a.textTracks();e.kind=b,c&&(e.label=c),d&&(e.language=d),e.tech=a;var g=new q["default"](e);return f.addTrack_(g),g};L.prototype.featuresVolumeControl=!0,L.prototype.featuresFullscreenResize=!1,L.prototype.featuresPlaybackRate=!1,L.prototype.featuresProgressEvents=!1,L.prototype.featuresTimeupdateEvents=!1,L.prototype.featuresNativeTextTracks=!1,L.withSourceHandlers=function(a){a.registerSourceHandler=function(b,c){var d=a.sourceHandlers;d||(d=a.sourceHandlers=[]),void 0===c&&(c=d.length),d.splice(c,0,b)},a.canPlayType=function(b){for(var c=a.sourceHandlers||[],d=void 0,e=0;e<c.length;e++)if(d=c[e].canPlayType(b))return d;return""},a.selectSourceHandler=function(b){for(var c=a.sourceHandlers||[],d=void 0,e=0;e<c.length;e++)if(d=c[e].canHandleSource(b))return c[e];return null},a.canPlaySource=function(b){var c=a.selectSourceHandler(b);return c?c.canHandleSource(b):""};var b=["seekable","duration"];b.forEach(function(a){var b=this[a];"function"==typeof b&&(this[a]=function(){return this.sourceHandler_&&this.sourceHandler_[a]?this.sourceHandler_[a].apply(this.sourceHandler_,arguments):b.apply(this,arguments)})},a.prototype),a.prototype.setSource=function(b){var c=a.selectSourceHandler(b);return c||(a.nativeSourceHandler?c=a.nativeSourceHandler:C["default"].error("No source hander found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler),this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),c!==a.nativeSourceHandler&&(this.currentSource_=b,this.off(this.el_,"loadstart",a.prototype.firstLoadStartListener_),this.off(this.el_,"loadstart",a.prototype.successiveLoadStartListener_),this.one(this.el_,"loadstart",a.prototype.firstLoadStartListener_)),this.sourceHandler_=c.handleSource(b,this,this.options_),this.on("dispose",this.disposeSourceHandler),this},a.prototype.firstLoadStartListener_=function(){this.one(this.el_,"loadstart",a.prototype.successiveLoadStartListener_)},a.prototype.successiveLoadStartListener_=function(){this.currentSource_=null,this.disposeSourceHandler(),this.one(this.el_,"loadstart",a.prototype.successiveLoadStartListener_)},a.prototype.disposeSourceHandler=function(){this.sourceHandler_&&this.sourceHandler_.dispose&&(this.off(this.el_,"loadstart",a.prototype.firstLoadStartListener_),this.off(this.el_,"loadstart",a.prototype.successiveLoadStartListener_),this.sourceHandler_.dispose())}},i["default"].registerComponent("Tech",L),i["default"].registerComponent("MediaTechController",L),L.registerTech("Tech",L),c["default"]=L,b.exports=c["default"]},{"../component":66,"../media-error.js":108,"../tracks/audio-track":127,"../tracks/audio-track-list":126,"../tracks/html-track-element":129,"../tracks/html-track-element-list":128,"../tracks/text-track":135,"../tracks/text-track-list":133,"../tracks/video-track":140,"../tracks/video-track-list":139,"../utils/buffer.js":142,"../utils/fn.js":146,"../utils/log.js":149,"../utils/merge-options.js":150,"../utils/time-ranges.js":152,"global/document":7,"global/window":8}],125:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a){return a&&a.__esModule?a:{"default":a}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("./component"),i=e(h),j=a("./utils/dom.js"),k=d(j),l=a("./utils/events.js"),m=(d(l),a("./utils/fn.js")),n=d(m),o=a("global/document"),p=(e(o),a("lodash-compat/function/throttle")),q=e(p),r=function(a){function b(c,d){f(this,b),a.call(this,c,d),this.handleHover_=q["default"](n.bind(this,this.handleHover),25),this.handleLeave_=q["default"](n.bind(this,this.handleLeave),25)}return g(b,a),b.prototype.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-tooltip"})},b.prototype.text=function(a){return a?(this.text_=a,this.el_.innerHTML=this.localize(this.text_),this.update(),this):this.text_||""},b.prototype.handler=function(a){return a?(this.handler_&&(this.off(this.handler_,"mouseover",this.handleHover_),this.off(this.handler_,"mouseout",this.handleLeave_)),this.handler_=a,this.on(this.handler_,"mouseover",this.handleHover_),this.on(this.handler_,"mouseout",this.handleLeave_),this):this.handler},b.prototype.handleHover=function(){var a=this;this.timeout&&(this.clearTimeout(this.timeout),this.timeout=0),this.timeout=this.setTimeout(function(){return a.hide()},1e3),this.show()},b.prototype.handleLeave=function(){var a=this;this.timeout&&(this.clearTimeout(this.timeout),this.timeout=0),this.timeout=this.setTimeout(function(){return a.hide()},50)},b.prototype.show=function(){var a=this;this.player_.trigger("tooltipShown"),this.player_.on("tooltipShown",function(){return a.hide()}),this.addClass("vjs-tooltip-active"),this.update()},b.prototype.hide=function(){this.removeClass("vjs-tooltip-active"),this.player_.off("tooltipShown")},b.prototype.update=function(){var a=this.width();if(!a)return this;var b=this.handler_,c=b?b.offsetWidth:0,d=k.findElPosition(b).left-k.findElPosition(this.player_.el()).left,e=c/2-a/2,f=-d,g=this.player_.el().offsetWidth-d-a;return e=Math.min(Math.max(f,e),g),this.el_.style.left=e+"px",this},b}(i["default"]);i["default"].registerComponent("Tooltip",r),c["default"]=r,b.exports=c["default"]},{"./component":66,"./utils/dom.js":144,"./utils/events.js":145,"./utils/fn.js":146,"global/document":7,"lodash-compat/function/throttle":13}],126:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a){return a&&a.__esModule?a:{"default":a}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("./track-list"),i=e(h),j=a("../utils/browser.js"),k=d(j),l=a("global/document"),m=e(l),n=function(a,b){for(var c=0;c<a.length;c++)b.id!==a[c].id&&(a[c].enabled=!1)},o=function(a){function b(){var c=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];f(this,b);for(var d=void 0,e=c.length-1;e>=0;e--)if(c[e].enabled){n(c,c[e]);break}if(k.IS_IE8){d=m["default"].createElement("custom");for(var g in i["default"].prototype)"constructor"!==g&&(d[g]=i["default"].prototype[g]);for(var g in b.prototype)"constructor"!==g&&(d[g]=b.prototype[g])}return d=a.call(this,c,d),d.changing_=!1,d}return g(b,a),b.prototype.addTrack_=function(b){var c=this;b.enabled&&n(this,b),a.prototype.addTrack_.call(this,b),b.addEventListener&&b.addEventListener("enabledchange",function(){c.changing_||(c.changing_=!0,n(c,b),c.changing_=!1,c.trigger("change"))})},b.prototype.addTrack=function(a){this.addTrack_(a)},b.prototype.removeTrack=function(b){a.prototype.removeTrack_.call(this,b)},b}(i["default"]);c["default"]=o,b.exports=c["default"]},{"../utils/browser.js":141,"./track-list":137,"global/document":7}],127:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a){return a&&a.__esModule?a:{"default":a}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("./track-enums"),i=a("./track"),j=e(i),k=a("../utils/merge-options"),l=e(k),m=a("../utils/browser.js"),n=d(m),o=function(a){function b(){var c=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];f(this,b);var d=l["default"](c,{kind:h.AudioTrackKind[c.kind]||""}),e=a.call(this,d),g=!1;if(n.IS_IE8)for(var i in b.prototype)"constructor"!==i&&(e[i]=b.prototype[i]);return Object.defineProperty(e,"enabled",{get:function(){return g},set:function(a){"boolean"==typeof a&&a!==g&&(g=a,this.trigger("enabledchange"))}}),d.enabled&&(e.enabled=d.enabled),e.loaded_=!0,e}return g(b,a),b}(j["default"]);c["default"]=o,b.exports=c["default"]},{"../utils/browser.js":141,"../utils/merge-options":150,"./track":138,"./track-enums":136}],128:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var g=a("../utils/browser.js"),h=e(g),i=a("global/document"),j=d(i),k=function(){function a(){var b=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];f(this,a);var c=this;if(h.IS_IE8){c=j["default"].createElement("custom");for(var d in a.prototype)"constructor"!==d&&(c[d]=a.prototype[d])}c.trackElements_=[],Object.defineProperty(c,"length",{get:function(){return this.trackElements_.length}});for(var e=0,g=b.length;g>e;e++)c.addTrackElement_(b[e]);return h.IS_IE8?c:void 0}return a.prototype.addTrackElement_=function(a){this.trackElements_.push(a)},a.prototype.getTrackElementByTrack_=function(a){for(var b=void 0,c=0,d=this.trackElements_.length;d>c;c++)if(a===this.trackElements_[c].track){b=this.trackElements_[c];break}return b},a.prototype.removeTrackElement_=function(a){for(var b=0,c=this.trackElements_.length;c>b;b++)if(a===this.trackElements_[b]){this.trackElements_.splice(b,1);break}},a}();c["default"]=k,b.exports=c["default"]},{"../utils/browser.js":141,"global/document":7}],129:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("../utils/browser.js"),i=e(h),j=a("global/document"),k=d(j),l=a("../event-target"),m=d(l),n=a("../tracks/text-track"),o=d(n),p=0,q=1,r=2,s=3,t=function(a){function b(){var c=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];f(this,b),a.call(this);var d=void 0,e=this;if(i.IS_IE8){e=k["default"].createElement("custom");for(var g in b.prototype)"constructor"!==g&&(e[g]=b.prototype[g])}var h=new o["default"](c);return e.kind=h.kind,e.src=h.src,e.srclang=h.language,e.label=h.label,e["default"]=h["default"],Object.defineProperty(e,"readyState",{get:function(){return d}}),Object.defineProperty(e,"track",{get:function(){return h}}),d=p,h.addEventListener("loadeddata",function(){d=r,e.trigger({type:"load",target:e})}),i.IS_IE8?e:void 0}return g(b,a),b}(m["default"]);t.prototype.allowedEvents_={load:"load"},t.NONE=p,t.LOADING=q,t.LOADED=r,t.ERROR=s,c["default"]=t,b.exports=c["default"]},{"../event-target":104,"../tracks/text-track":135,"../utils/browser.js":141,"global/document":7}],130:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var g=a("../utils/browser.js"),h=e(g),i=a("global/document"),j=d(i),k=function(){function a(b){f(this,a);var c=this;if(h.IS_IE8){c=j["default"].createElement("custom");for(var d in a.prototype)"constructor"!==d&&(c[d]=a.prototype[d])}return a.prototype.setCues_.call(c,b),Object.defineProperty(c,"length",{get:function(){return this.length_}}),h.IS_IE8?c:void 0}return a.prototype.setCues_=function(a){var b=this.length||0,c=0,d=a.length;this.cues_=a,this.length_=a.length;var e=function(a){""+a in this||Object.defineProperty(this,""+a,{get:function(){return this.cues_[a]}})};if(d>b)for(c=b;d>c;c++)e.call(this,c)},a.prototype.getCueById=function(a){for(var b=null,c=0,d=this.length;d>c;c++){var e=this[c];if(e.id===a){b=e;break}}return b},a}();c["default"]=k,b.exports=c["default"]},{"../utils/browser.js":141,"global/document":7}],131:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a){return a&&a.__esModule?a:{"default":a}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function h(a,b){return"rgba("+parseInt(a[1]+a[1],16)+","+parseInt(a[2]+a[2],16)+","+parseInt(a[3]+a[3],16)+","+b+")"}function i(a,b,c){try{a.style[b]=c}catch(d){}}c.__esModule=!0;var j=a("../component"),k=e(j),l=a("../menu/menu.js"),m=(e(l),a("../menu/menu-item.js")),n=(e(m),a("../menu/menu-button.js")),o=(e(n),a("../utils/fn.js")),p=d(o),q=a("global/document"),r=(e(q),a("global/window")),s=e(r),t="#222",u="#ccc",v={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'},w=function(a){function b(c,d,e){f(this,b),a.call(this,c,d,e),c.on("loadstart",p.bind(this,this.toggleDisplay)),c.on("texttrackchange",p.bind(this,this.updateDisplay)),c.ready(p.bind(this,function(){if(c.tech_&&c.tech_.featuresNativeTextTracks)return void this.hide();c.on("fullscreenchange",p.bind(this,this.updateDisplay));for(var a=this.options_.playerOptions.tracks||[],b=0;b<a.length;b++){var d=a[b];this.player_.addRemoteTextTrack(d)}var e={captions:1,subtitles:1},f=this.player_.textTracks(),g=void 0,h=void 0;if(f){for(var b=0;b<f.length;b++){var d=f[b];d["default"]&&("descriptions"!==d.kind||g?d.kind in e&&!h&&(h=d):g=d)}h?h.mode="showing":g&&(g.mode="showing")}}))}return g(b,a),b.prototype.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},b.prototype.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{"aria-live":"assertive","aria-atomic":"true"})},b.prototype.clearDisplay=function(){"function"==typeof s["default"].WebVTT&&s["default"].WebVTT.processCues(s["default"],[],this.el_)},b.prototype.updateDisplay=function(){var a=this.player_.textTracks();if(this.clearDisplay(),a){for(var b=null,c=null,d=a.length;d--;){var e=a[d];"showing"===e.mode&&("descriptions"===e.kind?b=e:c=e)}c?this.updateForTrack(c):b&&this.updateForTrack(b)}},b.prototype.updateForTrack=function(a){if("function"==typeof s["default"].WebVTT&&a.activeCues){for(var b=this.player_.textTrackSettings.getValues(),c=[],d=0;d<a.activeCues.length;d++)c.push(a.activeCues[d]);s["default"].WebVTT.processCues(s["default"],c,this.el_);for(var e=c.length;e--;){var f=c[e];if(f){var g=f.displayState;if(b.color&&(g.firstChild.style.color=b.color),b.textOpacity&&i(g.firstChild,"color",h(b.color||"#fff",b.textOpacity)),b.backgroundColor&&(g.firstChild.style.backgroundColor=b.backgroundColor),b.backgroundOpacity&&i(g.firstChild,"backgroundColor",h(b.backgroundColor||"#000",b.backgroundOpacity)),b.windowColor&&(b.windowOpacity?i(g,"backgroundColor",h(b.windowColor,b.windowOpacity)):g.style.backgroundColor=b.windowColor),b.edgeStyle&&("dropshadow"===b.edgeStyle?g.firstChild.style.textShadow="2px 2px 3px "+t+", 2px 2px 4px "+t+", 2px 2px 5px "+t:"raised"===b.edgeStyle?g.firstChild.style.textShadow="1px 1px "+t+", 2px 2px "+t+", 3px 3px "+t:"depressed"===b.edgeStyle?g.firstChild.style.textShadow="1px 1px "+u+", 0 1px "+u+", -1px -1px "+t+", 0 -1px "+t:"uniform"===b.edgeStyle&&(g.firstChild.style.textShadow="0 0 4px "+t+", 0 0 4px "+t+", 0 0 4px "+t+", 0 0 4px "+t)),b.fontPercent&&1!==b.fontPercent){var j=s["default"].parseFloat(g.style.fontSize);g.style.fontSize=j*b.fontPercent+"px",g.style.height="auto",g.style.top="auto",g.style.bottom="2px"}b.fontFamily&&"default"!==b.fontFamily&&("small-caps"===b.fontFamily?g.firstChild.style.fontVariant="small-caps":g.firstChild.style.fontFamily=v[b.fontFamily])}}}},b}(k["default"]);k["default"].registerComponent("TextTrackDisplay",w),c["default"]=w,b.exports=c["default"]},{"../component":66,"../menu/menu-button.js":109,"../menu/menu-item.js":110,"../menu/menu.js":111,"../utils/fn.js":146,"global/document":7,"global/window":8}],132:[function(a,b,c){"use strict";c.__esModule=!0;var d=function(a){var b=["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(b,c){return a[c]&&(b[c]=a[c]),b},{cues:a.cues&&Array.prototype.map.call(a.cues,function(a){return{startTime:a.startTime,endTime:a.endTime,text:a.text,id:a.id}})});return b},e=function(a){var b=a.$$("track"),c=Array.prototype.map.call(b,function(a){return a.track}),e=Array.prototype.map.call(b,function(a){var b=d(a.track);return a.src&&(b.src=a.src),b});return e.concat(Array.prototype.filter.call(a.textTracks(),function(a){return-1===c.indexOf(a)}).map(d))},f=function(a,b){return a.forEach(function(a){var c=b.addRemoteTextTrack(a).track;!a.src&&a.cues&&a.cues.forEach(function(a){return c.addCue(a)})}),b.textTracks()};c["default"]={textTracksToJson:e,jsonToTextTracks:f,trackToJson_:d},b.exports=c["default"]},{}],133:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a){return a&&a.__esModule?a:{"default":a}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("./track-list"),i=e(h),j=a("../utils/fn.js"),k=d(j),l=a("../utils/browser.js"),m=d(l),n=a("global/document"),o=e(n),p=function(a){function b(){var c=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];f(this,b);var d=void 0;if(m.IS_IE8){d=o["default"].createElement("custom");for(var e in i["default"].prototype)"constructor"!==e&&(d[e]=i["default"].prototype[e]);for(var e in b.prototype)"constructor"!==e&&(d[e]=b.prototype[e])}return d=a.call(this,c,d)}return g(b,a),b.prototype.addTrack_=function(b){a.prototype.addTrack_.call(this,b),b.addEventListener("modechange",k.bind(this,function(){this.trigger("change")}))},b.prototype.removeTrack_=function(a){for(var b=void 0,c=0,d=this.length;d>c;c++)if(this[c]===a){b=this[c],b.off&&b.off(),this.tracks_.splice(c,1);break}b&&this.trigger({track:b,type:"removetrack"})},b.prototype.getTrackById=function(a){for(var b=null,c=0,d=this.length;d>c;c++){var e=this[c];if(e.id===a){b=e;break}}return b},b}(i["default"]);c["default"]=p,b.exports=c["default"]},{"../utils/browser.js":141,"../utils/fn.js":146,"./track-list":137,"global/document":7}],134:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a){return a&&a.__esModule?a:{"default":a}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function h(a){var b=void 0;return a.selectedOptions?b=a.selectedOptions[0]:a.options&&(b=a.options[a.options.selectedIndex]),b.value}function i(a,b){if(b){var c=void 0;for(c=0;c<a.options.length;c++){var d=a.options[c];if(d.value===b)break}a.selectedIndex=c}}function j(){var a='<div class="vjs-tracksettings">\n      <div class="vjs-tracksettings-colors">\n        <div class="vjs-fg-color vjs-tracksetting">\n            <label class="vjs-label">Foreground</label>\n            <select>\n              <option value="">---</option>\n              <option value="#FFF">White</option>\n              <option value="#000">Black</option>\n              <option value="#F00">Red</option>\n              <option value="#0F0">Green</option>\n              <option value="#00F">Blue</option>\n              <option value="#FF0">Yellow</option>\n              <option value="#F0F">Magenta</option>\n              <option value="#0FF">Cyan</option>\n            </select>\n            <span class="vjs-text-opacity vjs-opacity">\n              <select>\n                <option value="">---</option>\n                <option value="1">Opaque</option>\n                <option value="0.5">Semi-Opaque</option>\n              </select>\n            </span>\n        </div> <!-- vjs-fg-color -->\n        <div class="vjs-bg-color vjs-tracksetting">\n            <label class="vjs-label">Background</label>\n            <select>\n              <option value="">---</option>\n              <option value="#FFF">White</option>\n              <option value="#000">Black</option>\n              <option value="#F00">Red</option>\n              <option value="#0F0">Green</option>\n              <option value="#00F">Blue</option>\n              <option value="#FF0">Yellow</option>\n              <option value="#F0F">Magenta</option>\n              <option value="#0FF">Cyan</option>\n            </select>\n            <span class="vjs-bg-opacity vjs-opacity">\n                <select>\n                  <option value="">---</option>\n                  <option value="1">Opaque</option>\n                  <option value="0.5">Semi-Transparent</option>\n                  <option value="0">Transparent</option>\n                </select>\n            </span>\n        </div> <!-- vjs-bg-color -->\n        <div class="window-color vjs-tracksetting">\n            <label class="vjs-label">Window</label>\n            <select>\n              <option value="">---</option>\n              <option value="#FFF">White</option>\n              <option value="#000">Black</option>\n              <option value="#F00">Red</option>\n              <option value="#0F0">Green</option>\n              <option value="#00F">Blue</option>\n              <option value="#FF0">Yellow</option>\n              <option value="#F0F">Magenta</option>\n              <option value="#0FF">Cyan</option>\n            </select>\n            <span class="vjs-window-opacity vjs-opacity">\n                <select>\n                  <option value="">---</option>\n                  <option value="1">Opaque</option>\n                  <option value="0.5">Semi-Transparent</option>\n                  <option value="0">Transparent</option>\n                </select>\n            </span>\n        </div> <!-- vjs-window-color -->\n      </div> <!-- vjs-tracksettings -->\n      <div class="vjs-tracksettings-font">\n        <div class="vjs-font-percent vjs-tracksetting">\n          <label class="vjs-label">Font Size</label>\n          <select>\n            <option value="0.50">50%</option>\n            <option value="0.75">75%</option>\n            <option value="1.00" selected>100%</option>\n            <option value="1.25">125%</option>\n            <option value="1.50">150%</option>\n            <option value="1.75">175%</option>\n            <option value="2.00">200%</option>\n            <option value="3.00">300%</option>\n            <option value="4.00">400%</option>\n          </select>\n        </div> <!-- vjs-font-percent -->\n        <div class="vjs-edge-style vjs-tracksetting">\n          <label class="vjs-label">Text Edge Style</label>\n          <select>\n            <option value="none">None</option>\n            <option value="raised">Raised</option>\n            <option value="depressed">Depressed</option>\n            <option value="uniform">Uniform</option>\n            <option value="dropshadow">Dropshadow</option>\n          </select>\n        </div> <!-- vjs-edge-style -->\n        <div class="vjs-font-family vjs-tracksetting">\n          <label class="vjs-label">Font Family</label>\n          <select>\n            <option value="">Default</option>\n            <option value="monospaceSerif">Monospace Serif</option>\n            <option value="proportionalSerif">Proportional Serif</option>\n            <option value="monospaceSansSerif">Monospace Sans-Serif</option>\n            <option value="proportionalSansSerif">Proportional Sans-Serif</option>\n            <option value="casual">Casual</option>\n            <option value="script">Script</option>\n            <option value="small-caps">Small Caps</option>\n          </select>\n        </div> <!-- vjs-font-family -->\n      </div>\n    </div>\n    <div class="vjs-tracksettings-controls">\n      <button class="vjs-default-button">Defaults</button>\n      <button class="vjs-done-button">Done</button>\n    </div>';

return a}c.__esModule=!0;var k=a("../component"),l=e(k),m=a("../utils/events.js"),n=d(m),o=a("../utils/fn.js"),p=d(o),q=a("../utils/log.js"),r=e(q),s=a("safe-json-parse/tuple"),t=e(s),u=a("global/window"),v=e(u),w=function(a){function b(c,d){f(this,b),a.call(this,c,d),this.hide(),void 0===d.persistTextTrackSettings&&(this.options_.persistTextTrackSettings=this.options_.playerOptions.persistTextTrackSettings),n.on(this.$(".vjs-done-button"),"click",p.bind(this,function(){this.saveSettings(),this.hide()})),n.on(this.$(".vjs-default-button"),"click",p.bind(this,function(){this.$(".vjs-fg-color > select").selectedIndex=0,this.$(".vjs-bg-color > select").selectedIndex=0,this.$(".window-color > select").selectedIndex=0,this.$(".vjs-text-opacity > select").selectedIndex=0,this.$(".vjs-bg-opacity > select").selectedIndex=0,this.$(".vjs-window-opacity > select").selectedIndex=0,this.$(".vjs-edge-style select").selectedIndex=0,this.$(".vjs-font-family select").selectedIndex=0,this.$(".vjs-font-percent select").selectedIndex=2,this.updateDisplay()})),n.on(this.$(".vjs-fg-color > select"),"change",p.bind(this,this.updateDisplay)),n.on(this.$(".vjs-bg-color > select"),"change",p.bind(this,this.updateDisplay)),n.on(this.$(".window-color > select"),"change",p.bind(this,this.updateDisplay)),n.on(this.$(".vjs-text-opacity > select"),"change",p.bind(this,this.updateDisplay)),n.on(this.$(".vjs-bg-opacity > select"),"change",p.bind(this,this.updateDisplay)),n.on(this.$(".vjs-window-opacity > select"),"change",p.bind(this,this.updateDisplay)),n.on(this.$(".vjs-font-percent select"),"change",p.bind(this,this.updateDisplay)),n.on(this.$(".vjs-edge-style select"),"change",p.bind(this,this.updateDisplay)),n.on(this.$(".vjs-font-family select"),"change",p.bind(this,this.updateDisplay)),this.options_.persistTextTrackSettings&&this.restoreSettings()}return g(b,a),b.prototype.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-caption-settings vjs-modal-overlay",innerHTML:j()})},b.prototype.getValues=function(){var a=h(this.$(".vjs-edge-style select")),b=h(this.$(".vjs-font-family select")),c=h(this.$(".vjs-fg-color > select")),d=h(this.$(".vjs-text-opacity > select")),e=h(this.$(".vjs-bg-color > select")),f=h(this.$(".vjs-bg-opacity > select")),g=h(this.$(".window-color > select")),i=h(this.$(".vjs-window-opacity > select")),j=v["default"].parseFloat(h(this.$(".vjs-font-percent > select"))),k={backgroundOpacity:f,textOpacity:d,windowOpacity:i,edgeStyle:a,fontFamily:b,color:c,backgroundColor:e,windowColor:g,fontPercent:j};for(var l in k)(""===k[l]||"none"===k[l]||"fontPercent"===l&&1===k[l])&&delete k[l];return k},b.prototype.setValues=function(a){i(this.$(".vjs-edge-style select"),a.edgeStyle),i(this.$(".vjs-font-family select"),a.fontFamily),i(this.$(".vjs-fg-color > select"),a.color),i(this.$(".vjs-text-opacity > select"),a.textOpacity),i(this.$(".vjs-bg-color > select"),a.backgroundColor),i(this.$(".vjs-bg-opacity > select"),a.backgroundOpacity),i(this.$(".window-color > select"),a.windowColor),i(this.$(".vjs-window-opacity > select"),a.windowOpacity);var b=a.fontPercent;b&&(b=b.toFixed(2)),i(this.$(".vjs-font-percent > select"),b)},b.prototype.restoreSettings=function(){var a=void 0,b=void 0;try{var c=t["default"](v["default"].localStorage.getItem("vjs-text-track-settings"));a=c[0],b=c[1],a&&r["default"].error(a)}catch(d){r["default"].warn(d)}b&&this.setValues(b)},b.prototype.saveSettings=function(){if(this.options_.persistTextTrackSettings){var a=this.getValues();try{Object.getOwnPropertyNames(a).length>0?v["default"].localStorage.setItem("vjs-text-track-settings",JSON.stringify(a)):v["default"].localStorage.removeItem("vjs-text-track-settings")}catch(b){r["default"].warn(b)}}},b.prototype.updateDisplay=function(){var a=this.player_.getChild("textTrackDisplay");a&&a.updateDisplay()},b}(l["default"]);l["default"].registerComponent("TextTrackSettings",w),c["default"]=w,b.exports=c["default"]},{"../component":66,"../utils/events.js":145,"../utils/fn.js":146,"../utils/log.js":149,"global/window":8,"safe-json-parse/tuple":57}],135:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a){return a&&a.__esModule?a:{"default":a}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("./text-track-cue-list"),i=e(h),j=a("../utils/fn.js"),k=d(j),l=a("./track-enums"),m=a("../utils/log.js"),n=e(m),o=a("global/document"),p=(e(o),a("global/window")),q=e(p),r=a("./track.js"),s=e(r),t=a("../utils/url.js"),u=a("xhr"),v=e(u),w=a("../utils/merge-options"),x=e(w),y=a("../utils/browser.js"),z=d(y),A=function(a,b){var c=new q["default"].WebVTT.Parser(q["default"],q["default"].vttjs,q["default"].WebVTT.StringDecoder()),d=[];c.oncue=function(a){b.addCue(a)},c.onparsingerror=function(a){d.push(a)},c.onflush=function(){b.trigger({type:"loadeddata",target:b})},c.parse(a),d.length>0&&(console.groupCollapsed,d.forEach(function(a){return n["default"].error(a)}),console.groupEnd),c.flush()},B=function(a,b){var c={uri:a},d=t.isCrossOrigin(a);d&&(c.cors=d),v["default"](c,k.bind(this,function(a,c,d){return a?n["default"].error(a,c):(b.loaded_=!0,void("function"!=typeof q["default"].WebVTT?b.tech_&&!function(){var a=function(){return A(d,b)};b.tech_.on("vttjsloaded",a),b.tech_.on("vttjserror",function(){n["default"].error("vttjs failed to load, stopping trying to process "+b.src),b.tech_.off("vttjsloaded",a)})}():A(d,b)))}))},C=function(a){function b(){var c=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];if(f(this,b),!c.tech)throw new Error("A tech was not provided.");var d=x["default"](c,{kind:l.TextTrackKind[c.kind]||"subtitles",language:c.language||c.srclang||""}),e=l.TextTrackMode[d.mode]||"disabled",g=d["default"];("metadata"===d.kind||"chapters"===d.kind)&&(e="hidden");var h=a.call(this,d);if(h.tech_=d.tech,z.IS_IE8)for(var j in b.prototype)"constructor"!==j&&(h[j]=b.prototype[j]);h.cues_=[],h.activeCues_=[];var m=new i["default"](h.cues_),n=new i["default"](h.activeCues_),o=!1,p=k.bind(h,function(){this.activeCues,o&&(this.trigger("cuechange"),o=!1)});return"disabled"!==e&&h.tech_.on("timeupdate",p),Object.defineProperty(h,"default",{get:function(){return g},set:function(){}}),Object.defineProperty(h,"mode",{get:function(){return e},set:function(a){l.TextTrackMode[a]&&(e=a,"showing"===e&&this.tech_.on("timeupdate",p),this.trigger("modechange"))}}),Object.defineProperty(h,"cues",{get:function(){return this.loaded_?m:null},set:function(){}}),Object.defineProperty(h,"activeCues",{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return n;for(var a=this.tech_.currentTime(),b=[],c=0,d=this.cues.length;d>c;c++){var e=this.cues[c];e.startTime<=a&&e.endTime>=a?b.push(e):e.startTime===e.endTime&&e.startTime<=a&&e.startTime+.5>=a&&b.push(e)}if(o=!1,b.length!==this.activeCues_.length)o=!0;else for(var c=0;c<b.length;c++)-1===this.activeCues_.indexOf(b[c])&&(o=!0);return this.activeCues_=b,n.setCues_(this.activeCues_),n},set:function(){}}),d.src?(h.src=d.src,B(d.src,h)):h.loaded_=!0,h}return g(b,a),b.prototype.addCue=function(a){var b=this.tech_.textTracks();if(b)for(var c=0;c<b.length;c++)b[c]!==this&&b[c].removeCue(a);this.cues_.push(a),this.cues.setCues_(this.cues_)},b.prototype.removeCue=function(a){for(var b=!1,c=0,d=this.cues_.length;d>c;c++){var e=this.cues_[c];e===a&&(this.cues_.splice(c,1),b=!0)}b&&this.cues.setCues_(this.cues_)},b}(s["default"]);C.prototype.allowedEvents_={cuechange:"cuechange"},c["default"]=C,b.exports=c["default"]},{"../utils/browser.js":141,"../utils/fn.js":146,"../utils/log.js":149,"../utils/merge-options":150,"../utils/url.js":154,"./text-track-cue-list":130,"./track-enums":136,"./track.js":138,"global/document":7,"global/window":8,xhr:60}],136:[function(a,b,c){"use strict";c.__esModule=!0;var d={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},e={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},f={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},g={disabled:"disabled",hidden:"hidden",showing:"showing"};c["default"]={VideoTrackKind:d,AudioTrackKind:e,TextTrackKind:f,TextTrackMode:g},b.exports=c["default"]},{}],137:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a){return a&&a.__esModule?a:{"default":a}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("../event-target"),i=e(h),j=a("../utils/fn.js"),k=(d(j),a("../utils/browser.js")),l=d(k),m=a("global/document"),n=e(m),o=function(a){function b(){var c=arguments.length<=0||void 0===arguments[0]?[]:arguments[0],d=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if(f(this,b),a.call(this),!d&&(d=this,l.IS_IE8)){d=n["default"].createElement("custom");for(var e in b.prototype)"constructor"!==e&&(d[e]=b.prototype[e])}d.tracks_=[],Object.defineProperty(d,"length",{get:function(){return this.tracks_.length}});for(var g=0;g<c.length;g++)d.addTrack_(c[g]);return d}return g(b,a),b.prototype.addTrack_=function(a){var b=this.tracks_.length;""+b in this||Object.defineProperty(this,b,{get:function(){return this.tracks_[b]}}),-1===this.tracks_.indexOf(a)&&(this.tracks_.push(a),this.trigger({track:a,type:"addtrack"}))},b.prototype.removeTrack_=function(a){for(var b=void 0,c=0,d=this.length;d>c;c++)if(this[c]===a){b=this[c],b.off&&b.off(),this.tracks_.splice(c,1);break}b&&this.trigger({track:b,type:"removetrack"})},b.prototype.getTrackById=function(a){for(var b=null,c=0,d=this.length;d>c;c++){var e=this[c];if(e.id===a){b=e;break}}return b},b}(i["default"]);o.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack"};for(var p in o.prototype.allowedEvents_)o.prototype["on"+p]=null;c["default"]=o,b.exports=c["default"]},{"../event-target":104,"../utils/browser.js":141,"../utils/fn.js":146,"global/document":7}],138:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("../utils/browser.js"),i=e(h),j=a("global/document"),k=d(j),l=a("../utils/guid.js"),m=e(l),n=a("../event-target"),o=d(n),p=function(a){function b(){var c=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];f(this,b),a.call(this);var d=this;if(i.IS_IE8){d=k["default"].createElement("custom");for(var e in b.prototype)"constructor"!==e&&(d[e]=b.prototype[e])}var g={id:c.id||"vjs_track_"+m.newGUID(),kind:c.kind||"",label:c.label||"",language:c.language||""},h=function(a){Object.defineProperty(d,a,{get:function(){return g[a]},set:function(){}})};for(var j in g)h(j);return d}return g(b,a),b}(o["default"]);c["default"]=p,b.exports=c["default"]},{"../event-target":104,"../utils/browser.js":141,"../utils/guid.js":148,"global/document":7}],139:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a){return a&&a.__esModule?a:{"default":a}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("./track-list"),i=e(h),j=a("../utils/browser.js"),k=d(j),l=a("global/document"),m=e(l),n=function(a,b){for(var c=0;c<a.length;c++)b.id!==a[c].id&&(a[c].selected=!1)},o=function(a){function b(){var c=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];f(this,b);for(var d=void 0,e=c.length-1;e>=0;e--)if(c[e].selected){n(c,c[e]);break}if(k.IS_IE8){d=m["default"].createElement("custom");for(var g in i["default"].prototype)"constructor"!==g&&(d[g]=i["default"].prototype[g]);for(var g in b.prototype)"constructor"!==g&&(d[g]=b.prototype[g])}return d=a.call(this,c,d),d.changing_=!1,Object.defineProperty(d,"selectedIndex",{get:function(){for(var a=0;a<this.length;a++)if(this[a].selected)return a;return-1},set:function(){}}),d}return g(b,a),b.prototype.addTrack_=function(b){var c=this;b.selected&&n(this,b),a.prototype.addTrack_.call(this,b),b.addEventListener&&b.addEventListener("selectedchange",function(){c.changing_||(c.changing_=!0,n(c,b),c.changing_=!1,c.trigger("change"))})},b.prototype.addTrack=function(a){this.addTrack_(a)},b.prototype.removeTrack=function(b){a.prototype.removeTrack_.call(this,b)},b}(i["default"]);c["default"]=o,b.exports=c["default"]},{"../utils/browser.js":141,"./track-list":137,"global/document":7}],140:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a){return a&&a.__esModule?a:{"default":a}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("./track-enums"),i=a("./track"),j=e(i),k=a("../utils/merge-options"),l=e(k),m=a("../utils/browser.js"),n=d(m),o=function(a){function b(){var c=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];f(this,b);var d=l["default"](c,{kind:h.VideoTrackKind[c.kind]||""}),e=a.call(this,d),g=!1;if(n.IS_IE8)for(var i in b.prototype)"constructor"!==i&&(e[i]=b.prototype[i]);return Object.defineProperty(e,"selected",{get:function(){return g},set:function(a){"boolean"==typeof a&&a!==g&&(g=a,this.trigger("selectedchange"))}}),d.selected&&(e.selected=d.selected),e}return g(b,a),b}(j["default"]);c["default"]=o,b.exports=c["default"]},{"../utils/browser.js":141,"../utils/merge-options":150,"./track":138,"./track-enums":136}],141:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}c.__esModule=!0;var e=a("global/document"),f=d(e),g=a("global/window"),h=d(g),i=h["default"].navigator.userAgent,j=/AppleWebKit\/([\d.]+)/i.exec(i),k=j?parseFloat(j.pop()):null,l=/iPad/i.test(i);c.IS_IPAD=l;var m=/iPhone/i.test(i)&&!l;c.IS_IPHONE=m;var n=/iPod/i.test(i);c.IS_IPOD=n;var o=m||l||n;c.IS_IOS=o;var p=function(){var a=i.match(/OS (\d+)_/i);return a&&a[1]?a[1]:void 0}();c.IOS_VERSION=p;var q=/Android/i.test(i);c.IS_ANDROID=q;var r=function(){var a,b,c=i.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);return c?(a=c[1]&&parseFloat(c[1]),b=c[2]&&parseFloat(c[2]),a&&b?parseFloat(c[1]+"."+c[2]):a?a:null):null}();c.ANDROID_VERSION=r;var s=q&&/webkit/i.test(i)&&2.3>r;c.IS_OLD_ANDROID=s;var t=q&&5>r&&537>k;c.IS_NATIVE_ANDROID=t;var u=/Firefox/i.test(i);c.IS_FIREFOX=u;var v=/Edge/i.test(i);c.IS_EDGE=v;var w=!v&&/Chrome/i.test(i);c.IS_CHROME=w;var x=/MSIE\s8\.0/.test(i);c.IS_IE8=x;var y=!!("ontouchstart"in h["default"]||h["default"].DocumentTouch&&f["default"]instanceof h["default"].DocumentTouch);c.TOUCH_ENABLED=y;var z="backgroundSize"in f["default"].createElement("video").style;c.BACKGROUND_SIZE_SUPPORTED=z},{"global/document":7,"global/window":8}],142:[function(a,b,c){"use strict";function d(a,b){var c,d,f=0;if(!b)return 0;a&&a.length||(a=e.createTimeRange(0,0));for(var g=0;g<a.length;g++)c=a.start(g),d=a.end(g),d>b&&(d=b),f+=d-c;return f/b}c.__esModule=!0,c.bufferedPercent=d;var e=a("./time-ranges.js")},{"./time-ranges.js":152}],143:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}c.__esModule=!0;var e=a("./log.js"),f=d(e),g={get:function(a,b){return a[b]},set:function(a,b,c){return a[b]=c,!0}};c["default"]=function(a){var b=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if("function"==typeof Proxy){var c=function(){var c={};return Object.keys(b).forEach(function(a){g.hasOwnProperty(a)&&(c[a]=function(){return f["default"].warn(b[a]),g[a].apply(this,arguments)})}),{v:new Proxy(a,c)}}();if("object"==typeof c)return c.v}return a},b.exports=c["default"]},{"./log.js":149}],144:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a){return a&&a.__esModule?a:{"default":a}}function f(a,b){return a.raw=b,a}function g(a){return"string"==typeof a&&/\S/.test(a)}function h(a){if(/\s/.test(a))throw new Error("class has illegal whitespace characters")}function i(a){return new RegExp("(^|\\s)"+a+"($|\\s)")}function j(a){return function(b,c){return g(b)?(g(c)&&(c=J["default"].querySelector(c)),(B(c)?c:J["default"])[a](b)):J["default"][a](null)}}function k(a){return 0===a.indexOf("#")&&(a=a.slice(1)),J["default"].getElementById(a)}function l(){var a=arguments.length<=0||void 0===arguments[0]?"div":arguments[0],b=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],c=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],d=J["default"].createElement(a);return Object.getOwnPropertyNames(b).forEach(function(a){var c=b[a];-1!==a.indexOf("aria-")||"role"===a||"type"===a?(P["default"].warn(R["default"](H,a,c)),d.setAttribute(a,c)):d[a]=c}),Object.getOwnPropertyNames(c).forEach(function(a){c[a];d.setAttribute(a,c[a])}),d}function m(a,b){"undefined"==typeof a.textContent?a.innerText=b:a.textContent=b}function n(a,b){b.firstChild?b.insertBefore(a,b.firstChild):b.appendChild(a)}function o(a){var b=a[T];return b||(b=a[T]=N.newGUID()),S[b]||(S[b]={}),S[b]}function p(a){var b=a[T];return b?!!Object.getOwnPropertyNames(S[b]).length:!1}function q(a){var b=a[T];if(b){delete S[b];try{delete a[T]}catch(c){a.removeAttribute?a.removeAttribute(T):a[T]=null}}}function r(a,b){return h(b),a.classList?a.classList.contains(b):i(b).test(a.className)}function s(a,b){return a.classList?a.classList.add(b):r(a,b)||(a.className=(a.className+" "+b).trim()),a}function t(a,b){return a.classList?a.classList.remove(b):(h(b),a.className=a.className.split(/\s+/).filter(function(a){return a!==b}).join(" ")),a}function u(a,b,c){var d=r(a,b);return"function"==typeof c&&(c=c(a,b)),"boolean"!=typeof c&&(c=!d),c!==d?(c?s(a,b):t(a,b),a):void 0}function v(a,b){Object.getOwnPropertyNames(b).forEach(function(c){var d=b[c];null===d||"undefined"==typeof d||d===!1?a.removeAttribute(c):a.setAttribute(c,d===!0?"":d)})}function w(a){var b,c,d,e,f;if(b={},c=",autoplay,controls,loop,muted,default,",a&&a.attributes&&a.attributes.length>0){d=a.attributes;for(var g=d.length-1;g>=0;g--)e=d[g].name,f=d[g].value,("boolean"==typeof a[e]||-1!==c.indexOf(","+e+","))&&(f=null!==f?!0:!1),b[e]=f}return b}function x(){J["default"].body.focus(),J["default"].onselectstart=function(){return!1}}function y(){J["default"].onselectstart=function(){return!0}}function z(a){var b=void 0;if(a.getBoundingClientRect&&a.parentNode&&(b=a.getBoundingClientRect()),!b)return{left:0,top:0};var c=J["default"].documentElement,d=J["default"].body,e=c.clientLeft||d.clientLeft||0,f=L["default"].pageXOffset||d.scrollLeft,g=b.left+f-e,h=c.clientTop||d.clientTop||0,i=L["default"].pageYOffset||d.scrollTop,j=b.top+i-h;return{left:Math.round(g),top:Math.round(j)}}function A(a,b){var c={},d=z(a),e=a.offsetWidth,f=a.offsetHeight,g=d.top,h=d.left,i=b.pageY,j=b.pageX;return b.changedTouches&&(j=b.changedTouches[0].pageX,i=b.changedTouches[0].pageY),c.y=Math.max(0,Math.min(1,(g-i+f)/f)),c.x=Math.max(0,Math.min(1,(j-h)/e)),c}function B(a){return!!a&&"object"==typeof a&&1===a.nodeType}function C(a){return!!a&&"object"==typeof a&&3===a.nodeType}function D(a){for(;a.firstChild;)a.removeChild(a.firstChild);return a}function E(a){return"function"==typeof a&&(a=a()),(Array.isArray(a)?a:[a]).map(function(a){return"function"==typeof a&&(a=a()),B(a)||C(a)?a:"string"==typeof a&&/\S/.test(a)?J["default"].createTextNode(a):void 0}).filter(function(a){return a})}function F(a,b){return E(b).forEach(function(b){return a.appendChild(b)}),a}function G(a,b){return F(D(a),b)}c.__esModule=!0,c.getEl=k,c.createEl=l,c.textContent=m,c.insertElFirst=n,c.getElData=o,c.hasElData=p,c.removeElData=q,c.hasElClass=r,c.addElClass=s,c.removeElClass=t,c.toggleElClass=u,c.setElAttributes=v,c.getElAttributes=w,c.blockTextSelection=x,c.unblockTextSelection=y,c.findElPosition=z,c.getPointerPosition=A,c.isEl=B,c.isTextNode=C,c.emptyEl=D,c.normalizeContent=E,c.appendContent=F,c.insertContent=G;var H=f(["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set "," to ","."],["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set "," to ","."]),I=a("global/document"),J=e(I),K=a("global/window"),L=e(K),M=a("./guid.js"),N=d(M),O=a("./log.js"),P=e(O),Q=a("tsml"),R=e(Q),S={},T="vdata"+(new Date).getTime(),U=j("querySelector");c.$=U;var V=j("querySelectorAll");c.$$=V},{"./guid.js":148,"./log.js":149,"global/document":7,"global/window":8,tsml:59}],145:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function f(a,b,c){if(Array.isArray(b))return l(f,a,b,c);var d=n.getElData(a);d.handlers||(d.handlers={}),d.handlers[b]||(d.handlers[b]=[]),c.guid||(c.guid=p.newGUID()),d.handlers[b].push(c),d.dispatcher||(d.disabled=!1,d.dispatcher=function(b,c){if(!d.disabled){b=j(b);var e=d.handlers[b.type];if(e)for(var f=e.slice(0),g=0,h=f.length;h>g&&!b.isImmediatePropagationStopped();g++)f[g].call(a,b,c)}}),1===d.handlers[b].length&&(a.addEventListener?a.addEventListener(b,d.dispatcher,!1):a.attachEvent&&a.attachEvent("on"+b,d.dispatcher))}function g(a,b,c){if(n.hasElData(a)){var d=n.getElData(a);if(d.handlers){if(Array.isArray(b))return l(g,a,b,c);var e=function(b){d.handlers[b]=[],k(a,b)};if(b){var f=d.handlers[b];if(f){if(!c)return void e(b);if(c.guid)for(var h=0;h<f.length;h++)f[h].guid===c.guid&&f.splice(h--,1);k(a,b)}}else for(var i in d.handlers)e(i)}}}function h(a,b,c){var d=n.hasElData(a)?n.getElData(a):{},e=a.parentNode||a.ownerDocument;if("string"==typeof b&&(b={type:b,target:a}),b=j(b),d.dispatcher&&d.dispatcher.call(a,b,c),e&&!b.isPropagationStopped()&&b.bubbles===!0)h.call(null,e,b,c);else if(!e&&!b.defaultPrevented){var f=n.getElData(b.target);b.target[b.type]&&(f.disabled=!0,"function"==typeof b.target[b.type]&&b.target[b.type](),f.disabled=!1)}return!b.defaultPrevented}function i(a,b,c){if(Array.isArray(b))return l(i,a,b,c);var d=function e(){g(a,b,e),c.apply(this,arguments)};d.guid=c.guid=c.guid||p.newGUID(),f(a,b,d)}function j(a){function b(){return!0}function c(){return!1}if(!a||!a.isPropagationStopped){var d=a||r["default"].event;a={};for(var e in d)"layerX"!==e&&"layerY"!==e&&"keyLocation"!==e&&"webkitMovementX"!==e&&"webkitMovementY"!==e&&("returnValue"===e&&d.preventDefault||(a[e]=d[e]));if(a.target||(a.target=a.srcElement||t["default"]),a.relatedTarget||(a.relatedTarget=a.fromElement===a.target?a.toElement:a.fromElement),a.preventDefault=function(){d.preventDefault&&d.preventDefault(),a.returnValue=!1,d.returnValue=!1,a.defaultPrevented=!0},a.defaultPrevented=!1,a.stopPropagation=function(){d.stopPropagation&&d.stopPropagation(),a.cancelBubble=!0,d.cancelBubble=!0,a.isPropagationStopped=b},a.isPropagationStopped=c,a.stopImmediatePropagation=function(){d.stopImmediatePropagation&&d.stopImmediatePropagation(),a.isImmediatePropagationStopped=b,a.stopPropagation()},a.isImmediatePropagationStopped=c,null!=a.clientX){var f=t["default"].documentElement,g=t["default"].body;a.pageX=a.clientX+(f&&f.scrollLeft||g&&g.scrollLeft||0)-(f&&f.clientLeft||g&&g.clientLeft||0),a.pageY=a.clientY+(f&&f.scrollTop||g&&g.scrollTop||0)-(f&&f.clientTop||g&&g.clientTop||0)}a.which=a.charCode||a.keyCode,null!=a.button&&(a.button=1&a.button?0:4&a.button?1:2&a.button?2:0)}return a}function k(a,b){var c=n.getElData(a);0===c.handlers[b].length&&(delete c.handlers[b],a.removeEventListener?a.removeEventListener(b,c.dispatcher,!1):a.detachEvent&&a.detachEvent("on"+b,c.dispatcher)),Object.getOwnPropertyNames(c.handlers).length<=0&&(delete c.handlers,delete c.dispatcher,delete c.disabled),0===Object.getOwnPropertyNames(c).length&&n.removeElData(a)}function l(a,b,c,d){c.forEach(function(c){a(b,c,d)})}c.__esModule=!0,c.on=f,c.off=g,c.trigger=h,c.one=i,c.fixEvent=j;var m=a("./dom.js"),n=e(m),o=a("./guid.js"),p=e(o),q=a("global/window"),r=d(q),s=a("global/document"),t=d(s)},{"./dom.js":144,"./guid.js":148,"global/document":7,"global/window":8}],146:[function(a,b,c){"use strict";c.__esModule=!0;var d=a("./guid.js"),e=function(a,b,c){b.guid||(b.guid=d.newGUID());var e=function(){return b.apply(a,arguments)};return e.guid=c?c+"_"+b.guid:b.guid,e};c.bind=e},{"./guid.js":148}],147:[function(a,b,c){"use strict";function d(a){var b=arguments.length<=1||void 0===arguments[1]?a:arguments[1];return function(){a=0>a?0:a;var c=Math.floor(a%60),d=Math.floor(a/60%60),e=Math.floor(a/3600),f=Math.floor(b/60%60),g=Math.floor(b/3600);return(isNaN(a)||a===1/0)&&(e=d=c="-"),e=e>0||g>0?e+":":"",d=((e||f>=10)&&10>d?"0"+d:d)+":",c=10>c?"0"+c:c,e+d+c}()}c.__esModule=!0,c["default"]=d,b.exports=c["default"]},{}],148:[function(a,b,c){"use strict";function d(){return e++}c.__esModule=!0,c.newGUID=d;var e=1},{}],149:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){var c=Array.prototype.slice.call(b),d=function(){},e=g["default"].console||{log:d,warn:d,error:d};a?c.unshift(a.toUpperCase()+":"):a="log",h.history.push(c),c.unshift("VIDEOJS:"),e[a].apply?e[a].apply(e,c):e[a](c.join(" "))}c.__esModule=!0;var f=a("global/window"),g=d(f),h=function(){e(null,arguments)};h.history=[],h.error=function(){e("error",arguments)},h.warn=function(){e("warn",arguments)},c["default"]=h,b.exports=c["default"]},{"global/window":8}],150:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){return!!a&&"object"==typeof a&&"[object Object]"===a.toString()&&a.constructor===Object}function f(){var a=Array.prototype.slice.call(arguments);return a.unshift({}),a.push(i),h["default"].apply(null,a),a[0]}c.__esModule=!0,c["default"]=f;var g=a("lodash-compat/object/merge"),h=d(g),i=function(a,b){return e(b)?e(a)?void 0:f(b):b};b.exports=c["default"]},{"lodash-compat/object/merge":46}],151:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}c.__esModule=!0;var e=a("global/document"),f=d(e),g=function(a){var b=f["default"].createElement("style");return b.className=a,b};c.createStyleElement=g;var h=function(a,b){a.styleSheet?a.styleSheet.cssText=b:a.textContent=b};c.setTextContent=h},{"global/document":7}],152:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){return Array.isArray(a)?f(a):void 0===a||void 0===b?f():f([[a,b]])}function f(a){return void 0===a||0===a.length?{length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:{length:a.length,start:g.bind(null,"start",0,a),end:g.bind(null,"end",1,a)}}function g(a,b,c,d){return void 0===d&&(j["default"].warn("DEPRECATED: Function '"+a+"' on 'TimeRanges' called without an index argument."),d=0),h(a,d,c.length-1),c[d][b]}function h(a,b,c){if(0>b||b>c)throw new Error("Failed to execute '"+a+"' on 'TimeRanges': The index provided ("+b+") is greater than or equal to the maximum bound ("+c+").")}c.__esModule=!0,c.createTimeRanges=e;var i=a("./log.js"),j=d(i);c.createTimeRange=e},{"./log.js":149}],153:[function(a,b,c){"use strict";function d(a){return a.charAt(0).toUpperCase()+a.slice(1)}c.__esModule=!0,c["default"]=d,b.exports=c["default"]},{}],154:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}c.__esModule=!0;var e=a("global/document"),f=d(e),g=a("global/window"),h=d(g),i=function(a){var b=["protocol","hostname","port","pathname","search","hash","host"],c=f["default"].createElement("a");c.href=a;var d=""===c.host&&"file:"!==c.protocol,e=void 0;d&&(e=f["default"].createElement("div"),e.innerHTML='<a href="'+a+'"></a>',c=e.firstChild,e.setAttribute("style","display:none; position:absolute;"),f["default"].body.appendChild(e));for(var g={},h=0;h<b.length;h++)g[b[h]]=c[b[h]];return"http:"===g.protocol&&(g.host=g.host.replace(/:80$/,"")),"https:"===g.protocol&&(g.host=g.host.replace(/:443$/,"")),d&&f["default"].body.removeChild(e),g};c.parseUrl=i;var j=function(a){if(!a.match(/^https?:\/\//)){var b=f["default"].createElement("div");b.innerHTML='<a href="'+a+'">x</a>',a=b.firstChild.href}return a};c.getAbsoluteURL=j;var k=function(a){if("string"==typeof a){var b=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/i,c=b.exec(a);if(c)return c.pop().toLowerCase()}return""};c.getFileExtension=k;var l=function(a){var b=h["default"].location,c=i(a),d=":"===c.protocol?b.protocol:c.protocol,e=d+c.host!==b.protocol+b.host;return e};c.isCrossOrigin=l},{"global/document":7,"global/window":8}],155:[function(b,c,d){"use strict";function e(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function f(a){return a&&a.__esModule?a:{"default":a}}d.__esModule=!0;{var g=b("global/window"),h=f(g),i=b("global/document"),j=f(i),k=b("./setup"),l=e(k),m=b("./utils/stylesheet.js"),n=e(m),o=b("./component"),p=f(o),q=b("./event-target"),r=f(q),s=b("./utils/events.js"),t=e(s),u=b("./player"),v=f(u),w=b("./plugins.js"),x=f(w),y=b("../../src/js/utils/merge-options.js"),z=f(y),A=b("./utils/fn.js"),B=e(A),C=b("./tracks/text-track.js"),D=f(C),E=b("./tracks/audio-track.js"),F=f(E),G=b("./tracks/video-track.js"),H=f(G),I=b("object.assign"),J=(f(I),b("./utils/time-ranges.js")),K=b("./utils/format-time.js"),L=f(K),M=b("./utils/log.js"),N=f(M),O=b("./utils/dom.js"),P=e(O),Q=b("./utils/browser.js"),R=e(Q),S=b("./utils/url.js"),T=e(S),U=b("./extend.js"),V=f(U),W=b("lodash-compat/object/merge"),X=f(W),Y=b("./utils/create-deprecation-proxy.js"),Z=f(Y),$=b("xhr"),_=f($),aa=b("./tech/tech.js"),ba=f(aa),ca=b("./tech/html5.js"),da=(f(ca),
b("./tech/flash.js"));f(da)}"undefined"==typeof HTMLVideoElement&&(j["default"].createElement("video"),j["default"].createElement("audio"),j["default"].createElement("track"));var ea=function ha(a,b,c){var d=void 0;if("string"==typeof a){if(0===a.indexOf("#")&&(a=a.slice(1)),ha.getPlayers()[a])return b&&N["default"].warn('Player "'+a+'" is already initialised. Options will not be applied.'),c&&ha.getPlayers()[a].ready(c),ha.getPlayers()[a];d=P.getEl(a)}else d=a;if(!d||!d.nodeName)throw new TypeError("The element or ID supplied is not valid. (videojs)");return d.player||v["default"].players[d.playerId]||new v["default"](d,b,c)};if(h["default"].VIDEOJS_NO_DYNAMIC_STYLE!==!0){var fa=P.$(".vjs-styles-defaults");if(!fa){fa=n.createStyleElement("vjs-styles-defaults");var ga=P.$("head");ga.insertBefore(fa,ga.firstChild),n.setTextContent(fa,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid {\n        padding-top: 56.25%\n      }\n    ")}}l.autoSetupTimeout(1,ea),ea.VERSION="5.10.2-27",ea.HOLA_VERSION=!0,ea.options=v["default"].prototype.options_,ea.getPlayers=function(){return v["default"].players},ea.players=Z["default"](v["default"].players,{get:"Access to videojs.players is deprecated; use videojs.getPlayers instead",set:"Modification of videojs.players is deprecated"}),ea.getComponent=p["default"].getComponent,ea.registerComponent=function(a,b){ba["default"].isTech(b)&&N["default"].warn("The "+a+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),p["default"].registerComponent.call(p["default"],a,b)},ea.getTech=ba["default"].getTech,ea.registerTech=ba["default"].registerTech,ea.browser=R,ea.TOUCH_ENABLED=R.TOUCH_ENABLED,ea.extend=V["default"],ea.mergeOptions=z["default"],ea.bind=B.bind,ea.plugin=x["default"],ea.addLanguage=function(a,b){var c;return a=(""+a).toLowerCase(),X["default"](ea.options.languages,(c={},c[a]=b,c))[a]},ea.log=N["default"],ea.createTimeRange=ea.createTimeRanges=J.createTimeRanges,ea.formatTime=L["default"],ea.parseUrl=T.parseUrl,ea.isCrossOrigin=T.isCrossOrigin,ea.EventTarget=r["default"],ea.on=t.on,ea.one=t.one,ea.off=t.off,ea.trigger=t.trigger,ea.xhr=_["default"],ea.TextTrack=D["default"],ea.AudioTrack=F["default"],ea.VideoTrack=H["default"],ea.isEl=P.isEl,ea.isTextNode=P.isTextNode,ea.createEl=P.createEl,ea.hasClass=P.hasElClass,ea.addClass=P.addElClass,ea.removeClass=P.removeElClass,ea.toggleClass=P.toggleElClass,ea.setAttributes=P.setElAttributes,ea.getAttributes=P.getElAttributes,ea.emptyEl=P.emptyEl,ea.appendContent=P.appendContent,ea.insertContent=P.insertContent,"function"==typeof a&&a.amd?a("videojs",[],function(){return ea}):"object"==typeof d&&"object"==typeof c&&(c.exports=ea),d["default"]=ea,c.exports=d["default"]},{"../../src/js/utils/merge-options.js":150,"./component":66,"./event-target":104,"./extend.js":105,"./player":113,"./plugins.js":114,"./setup":118,"./tech/flash.js":121,"./tech/html5.js":122,"./tech/tech.js":124,"./tracks/audio-track.js":127,"./tracks/text-track.js":135,"./tracks/video-track.js":140,"./utils/browser.js":141,"./utils/create-deprecation-proxy.js":143,"./utils/dom.js":144,"./utils/events.js":145,"./utils/fn.js":146,"./utils/format-time.js":147,"./utils/log.js":149,"./utils/stylesheet.js":151,"./utils/time-ranges.js":152,"./utils/url.js":154,"global/document":7,"global/window":8,"lodash-compat/object/merge":46,"object.assign":53,xhr:60}]},{},[155])(155)}),function(a,b){"use strict";function c(a,b){var c=document.createElement("link");c.setAttribute("rel","stylesheet"),c.setAttribute("href",a+(b?"?"+b:"")),document.getElementsByTagName("head")[0].appendChild(c)}var d='<svg height="100%" width="100%" viewBox="0 0 36 36"><defs><clipPath id="{vjs-volume-mask1}"><path d="m 14.35,-0.14 -5.86,5.86 20.73,20.78 5.86,-5.91 z"></path><path d="M 7.07,6.87 -1.11,15.33 19.61,36.11 27.80,27.60 z"></path><path class="vjs-volume-mask" d="M 9.09,5.20 6.47,7.88 26.82,28.77 29.66,25.99 z"></path></clipPath><clipPath id="{vjs-volume-mask2}"><path class="vjs-volume-mask" d="m -11.45,-15.55 -4.44,4.51 20.45,20.94 4.55,-4.66 z"></path></clipPath></defs><g clip-path="url(#{vjs-volume-mask1})"><path d="M8,21 L12,21 L17,26 L17,10 L12,15 L8,15 L8,21 Z M19,14 L19,22 C20.48,21.32 21.5,19.77 21.5,18 C21.5,16.26 20.48,14.74 19,14 Z"></path><path class="volume-level-2" d="M19,11.29 C21.89,12.15 24,14.83 24,18 C24,21.17 21.89,23.85 19,24.71 L19,26.77 C23.01,25.86 26,22.28 26,18 C26,13.72 23.01,10.14 19,9.23 L19,11.29 Z"></path></g><path clip-path="url(#{vjs-volume-mask2})" d="M 9.25,9 7.98,10.27 24.71,27 l 1.27,-1.27 Z"></path></svg>',e='<svg height="100%" width="100%" viewBox="0 0 36 36"><g><path d="m 10,16 2,0 0,-4 4,0 0,-2 L 10,10 l 0,6 0,0 z"/></g><g><path d="m 20,10 0,2 4,0 0,4 2,0 L 26,10 l -6,0 0,0 z"/></g><g><path d="m 24,24 -4,0 0,2 L 26,26 l 0,-6 -2,0 0,4 0,0 z"/></g><g><path d="M 12,20 10,20 10,26 l 6,0 0,-2 -4,0 0,-4 0,0 z"/></g></svg>',f='<svg height="100%" width="100%" viewBox="0 0 36 36"><g><path d="m 20,26 2,0 0,-4 4,0 0,-2 -6,0 0,6 0,0 z"/></g><g><path d="m 10,22 4,0 0,4 2,0 0,-6 -6,0 0,2 0,0 z"/></g><g><path d="m 14,14 -4,0 0,2 6,0 0,-6 -2,0 0,4 0,0 z"/></g><g><path d="m 22,14 0,-4 -2,0 0,6 6,0 0,-2 -4,0 0,0 z"/></g></svg>',g='<svg height="100%" width="100%" viewBox="0 14 96 68"><path d="M96,44.3v7.3c-0.1,7.7-1,15.5-1,15.5s-0.9,6.6-3.8,9.5c-3.6,3.8-7.7,3.8-9.6,4c-13.4,1-33.5,0.9-33.5,0.9 c-0.8,0-25-0.2-32.5-0.9c-2.1-0.4-6.9-0.3-10.6-4.1c-2.9-2.9-3.8-9.5-3.8-9.5s-1-7.7-1.1-15.5v-7.3c0.2-7.8,1.1-15.5,1.1-15.5 s0.9-6.6,3.8-9.5c3.6-3.8,7.7-3.8,9.6-4.1c13.4-1,33.5-0.9,33.5-0.9s20.1-0.1,33.5,0.9c1.9,0.2,5.9,0.2,9.6,4.1 c2.9,2.9,3.8,9.5,3.8,9.5S95.9,36.6,96,44.3z M38.3,61.4L64,47.9L38.3,34.4V61.4z"/><polygon points="64,47.9 38.3,61.4 38.3,34.4" fill="#fff"/></svg>',h='<div class="vjs-slider-gap-left"></div><div class="vjs-slider-gap-right"></div>',i=".vjs5-hola-skin",j=i+" .vjs-big-play-button:hover .vjs-button-icon {    fill: @play_button_color;}"+i+":not(.vjs-ad-playing) .vjs-progress-control .vjs-play-progress,"+i+" .vjs-progress-control .vjs-mouse-display:before,"+i+" .vjs-progress-control .vjs-play-progress:before,"+i+" .vjs-captions-toggle>.vjs-button-icon:after {    background-color: @seek_bar_color;}",k=function(b,c){var d=this;this.player=b,this.el=b.el(),this.opt=c,this.classes_added=[],b.on("dispose",function(){d.dispose()}),b.on("ready",function(){d.init()});var e=this._resize=this.resize.bind(this);b.on("resize",e),b.on("fullscreenchange",function(){setTimeout(e)}),a.addEventListener("resize",e),this.apply(),this.resize()};k.prototype.apply=function(){var a,b=[this.opt.className];for(this.opt.show_controls_before_start&&b.push("vjs-show-controls-before-start"),this.opt.show_time_for_live&&b.push("vjs-show-time-for-live");a=b.shift();)this.player.addClass(a)&&this.classes_added.push(a)},k.prototype.resize=function(){this.player.toggleClass("vjs-small",this.el.offsetWidth<=480)},k.prototype.init=function(){var a=this,c=this.player;this.init_volume_button(),this.has_played=!1;var d=c.controlBar.playToggle.el();d.appendChild(b.createEl("div",{className:"vjs-button-icon"})),c.on("play",function(){a.is_ended=!1,a.update_state(c)}).on("ended",function(){a.is_ended=!0,a.update_state(c)}).on("seeking",function(){c.currentTime()?(a.is_ended=!1,a.has_played=!0):a.has_played=!1,a.update_state(c)}).on("timeupdate",function(){var b=!!c.currentTime();b!=a.has_played&&(a.has_played=b,a.update_state(c))}).on("mouseleave",function(){c.hasClass("vjs-settings-expanded")||c.userActive(!1)}),this.update_state(c);var e=c.controlBar,f=e.progressControl.seekBar.el();f.insertAdjacentHTML("beforeend",h),c.addChild("PlayAnimation");var g=e.volumeMenuButton,i=g.volumeBar.el();i.insertAdjacentHTML("beforeend",h),g.on("mouseenter",function(){g.addClass("vjs-show-volume-button")});var j,k=c.reportUserActivity.bind(c);e.on("mouseenter",function(){j=this.setInterval(k,250)}),e.on("mouseleave",function(){j&&this.clearInterval(j),g.removeClass("vjs-show-volume-button")});var l=e.customControlSpacer.el();e.on("mousemove",function(a){var b=l.getBoundingClientRect();(a.clientX>b.left||a.clientY<b.top)&&g.removeClass("vjs-show-volume-button")}),this.opt.title&&c.addChild("TopBar",{title:this.opt.title})},k.prototype.update_state=function(a){var b="vjs-play-control-replay";a.controlBar.playToggle.toggleClass(b,this.is_ended),a.bigPlayButton.toggleClass(b,this.is_ended),a.toggleClass("vjs-pos-ended",this.is_ended&&this.has_played),a.toggleClass("vjs-pos-started",this.has_played);var c=a.posterImage.el();this.is_ended?(a.controlBar.playToggle.controlText("Replay"),setTimeout(function(){c.style.opacity=1})):c.style.opacity=""},k.prototype.init_volume_button=function(){var c=this.player,d=c.controlBar.volumeMenuButton,e=function(a,b,c,e){var f=m.prototype;d.off(a,b,f[c]),d.on(a,b,e),d[c]=e};e(c,["volumechange","loadstart"],"volumeUpdate",function(){var c,d=this.el_,e=this,f=!this.player_.muted()&&this.player_.volume(),g=f?.5>f?1:2:0;for(c=0;2>c;c++)b.toggleClass(d,"vjs-vol-"+c,c==g);var h=!f;if(void 0===this.muted_||this.muted_!=h){this.muted_=h,this.controlText(h?"Unmute":"Mute");var i=d.querySelectorAll(".vjs-volume-mask"),j=f?20:0,k=f?0:20,l=a.performance&&a.performance.now(),m=function(b){var d=b?(b-l)/250:1,f=j+(k-j)*Math.max(Math.min(d,1),0);for(c=0;c<i.length;c++)i[c].setAttribute("transform","translate("+f+","+f+")");f!=k&&(e.animId=a.requestAnimationFrame(m))};if(!l||!a.requestAnimationFrame)return void m();this.animId&&a.cancelAnimationFrame(this.animId),this.animId=a.requestAnimationFrame(m)}});var f=!1;e(d,["tap","click"],"handleClick",function(){f||(this.player_.muted(!this.player_.muted()&&!!this.player_.volume()),this.player_.muted()||this.player_.volume()||this.player_.volume(1))}),d.on("mousedown",function(a){f=this.volumeBar.el().contains(a.target)}),d.volumeUpdate()},k.prototype.dispose=function(){for(;this.classes_added.length;)this.player.removeClass(this.classes_added.pop());a.removeEventListener("resize",this._resize)};var l=b.getComponent("MenuButton"),m=b.getComponent("VolumeMenuButton");m.prototype.createEl=function(){var a=l.prototype.createEl.call(this),c=this.player_.id(),e=d.replace(/{vjs-volume-mask1}/g,"vjs-volume-mask1_"+c).replace(/{vjs-volume-mask2}/g,"vjs-volume-mask2_"+c),f=this.icon_=b.createEl("div",{className:"vjs-button-icon",innerHTML:e});return a.insertBefore(f,a.firstChild),a},m.prototype.tooltipHandler=function(){return this.icon_};var n=b.getComponent("Button"),o=b.getComponent("FullscreenToggle");o.prototype.controlText_="Full screen",o.prototype.createEl=function(){var a=n.prototype.createEl.call(this);return a.insertBefore(b.createEl("div",{className:"vjs-button-icon vjs-fullscreen-icon",innerHTML:e}),a.firstChild),a.insertBefore(b.createEl("div",{className:"vjs-button-icon vjs-exit-fullscreen-icon",innerHTML:f}),a.firstChild),a},o.prototype.updateHint=function(){this.controlText(this.player_.isFullscreen()?"Exit full screen":"Full screen")};var p=b.getComponent("BigPlayButton");p.prototype.createEl=function(){var a=n.prototype.createEl.call(this);return a.appendChild(b.createEl("div",{className:"vjs-button-icon",innerHTML:g})),a},b.registerComponent("ControlsWatermark",b.extend(n,{constructor:function(){n.apply(this,arguments)},createEl:function(){var a=this.options_,c=b.createEl("div",{className:"vjs-controls-watermark"});if(!a.image)return c;var d=a.url?b.createEl("a",{href:a.url,target:"_blank"}):c;return a.url&&c.insertBefore(d,c.firstChild),d.appendChild(b.createEl("img",{src:a.image})),c},buildCSSClass:function(){return"vjs-controls-watermark "+n.prototype.buildCSSClass.apply(this,arguments)}}));var q=b.getComponent("SeekBar"),r=q.prototype.createEl;q.prototype.createEl=function(){var a=r.call(this);return a.appendChild(b.createEl("div",{className:"vjs-slider-padding"})),a};var s=b.getComponent("ControlBar"),t=s.prototype.createEl;s.prototype.createEl=function(){var a=t.call(this);return a.appendChild(b.createEl("div",{className:"vjs-gradient vjs-bottom-gradient"})),a};var u=b.getComponent("Component");b.registerComponent("PlayAnimation",b.extend(u,{constructor:function(a){u.apply(this,arguments);var b,c=this;a.on(["videoclick"],function(){a.hasStarted()&&(c.el_.style.display="block",c.clearTimeout(b),b=c.setTimeout(function(){c.el_.style.display=""},500))})},createEl:function(){var a=u.prototype.createEl.apply(this,arguments);return a.className="vjs-play-animation",a}})),b.registerComponent("TopBar",b.extend(u,{createEl:function(){var a=b.createEl("div",{className:"vjs-top-bar"});return a.appendChild(b.createEl("div",{className:"vjs-gradient vjs-top-gradient"})),a.appendChild(b.createEl("div",{className:"vjs-video-title",innerHTML:this.options_.title})),a}}));var v=b.getComponent("LoadingSpinner"),w=v.prototype.createEl;v.prototype.createEl=function(){var a=w.call(this),c=b.createEl("div",{className:"vjs-spinner-rotator"});return c.appendChild(b.createEl("div",{className:"vjs-spinner-left"})),c.appendChild(b.createEl("div",{className:"vjs-spinner-right"})),a.appendChild(c),a};var x=b.getComponent("Tooltip"),y=x.prototype.show;x.prototype.show=function(){return this.timeout&&(this.clearTimeout(this.timeout),this.timeout=0),y.apply(this,arguments)};var z={className:"vjs5-hola-skin",css:"/css/videojs-hola-skin.css",ver:"ver=0.0.5-75"};b.plugin("hola_skin",function(a){a===!1&&(a={css:!1,className:!1});var d=b.mergeOptions(z,a);!d.css||a.className&&!a.css||c(d.css,d.ver),c("//fonts.googleapis.com/css?family=Roboto:400,500"),(d.play_button_color||d.seek_bar_color)&&(j=j.replace(/@play_button_color/g,d.play_button_color||"#00b7f1").replace(/@seek_bar_color/g,d.seek_bar_color||"#00b7f1"),require("browserify-css").createStyle(j)),new k(this,d)})}(window,window.videojs),function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(){!function(a,b){"use strict";function c(){function c(b){if(!b||!e(b))return null;var c=new RegExp("(?:^|.*;\\s*)"+a.escape(b).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*");return a.unescape(document.cookie.replace(c,"$1"))}function d(b,c,d,e,f,g){if(b&&!/^(?:expires|max\-age|path|domain|secure)$/i.test(b)){var h="";if(d)switch(d.constructor){case Number:h=d===1/0?"; expires=Tue, 19 Jan 2038 03:14:07 GMT":"; max-age="+d;break;case String:h="; expires="+d;break;case Date:h="; expires="+d.toGMTString()}document.cookie=a.escape(b)+"="+a.escape(c)+h+(f?"; domain="+f:"")+(e?"; path="+e:"")+(g?"; secure":"")}}function e(b){return new RegExp("(?:^|;\\s*)"+a.escape(b).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)}function f(){try{return a.localStorage.setItem("vjs-storage-test","value"),a.localStorage.removeItem("vjs-storage-test"),!0}catch(b){return!1}}b.utils.localStorage=f()?a.localStorage:{getItem:c,setItem:function(a,b){d(a,b,1/0,"/")}}}b.utils=b.utils||{},c()}(window,window.videojs)},{}],2:[function(a,b,c){!function(d,e){if("function"==typeof define&&define.amd)define(["module","select"],e);else if("undefined"!=typeof c)e(b,a("select"));else{var f={exports:{}};e(f,d.select),d.clipboardAction=f.exports}}(this,function(a,b){"use strict";function c(a){return a&&a.__esModule?a:{"default":a}}function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var e=c(b),f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(){function a(b){d(this,a),this.resolveOptions(b),this.initSelection()}return g(a,[{key:"resolveOptions",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action=a.action,this.container=a.container,this.emitter=a.emitter,this.target=a.target,this.text=a.text,this.trigger=a.trigger,this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var a=this,b="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return a.removeFake()},this.fakeHandler=this.container.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[b?"right":"left"]="-9999px";var c=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=c+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,this.container.appendChild(this.fakeElem),this.selectedText=e["default"](this.fakeElem),this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(this.container.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(this.container.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=e["default"](this.target),this.copyText()}},{key:"copyText",value:function(){var a=void 0;try{a=document.execCommand(this.action)}catch(b){a=!1}this.handleResult(a)}},{key:"handleResult",value:function(a){this.emitter.emit(a?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.trigger&&this.trigger.focus(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"copy";if(this._action=a,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(a){if(void 0!==a){if(!a||"object"!==("undefined"==typeof a?"undefined":f(a))||1!==a.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&a.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(a.hasAttribute("readonly")||a.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=a}},get:function(){return this._target}}]),a}();a.exports=h})},{select:129}],3:[function(a,b,c){!function(d,e){if("function"==typeof define&&define.amd)define(["module","./clipboard-action","tiny-emitter","good-listener"],e);else if("undefined"!=typeof c)e(b,a("./clipboard-action"),a("tiny-emitter"),a("good-listener"));else{var f={exports:{}};e(f,d.clipboardAction,d.tinyEmitter,d.goodListener),d.clipboard=f.exports}}(this,function(a,b,c,d){"use strict";function e(a){return a&&a.__esModule?a:{"default":a}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function h(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function i(a,b){var c="data-clipboard-"+a;if(b.hasAttribute(c))return b.getAttribute(c)}var j=e(b),k=e(c),l=e(d),m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},n=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),o=function(a){function b(a,c){f(this,b);var d=g(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return d.resolveOptions(c),d.listenClick(a),d}return h(b,a),n(b,[{key:"resolveOptions",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof a.action?a.action:this.defaultAction,this.target="function"==typeof a.target?a.target:this.defaultTarget,this.text="function"==typeof a.text?a.text:this.defaultText,this.container="object"===m(a.container)?a.container:document.body}},{key:"listenClick",value:function(a){var b=this;this.listener=l["default"](a,"click",function(a){return b.onClick(a)})}},{key:"onClick",value:function(a){var b=a.delegateTarget||a.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new j["default"]({action:this.action(b),target:this.target(b),text:this.text(b),container:this.container,trigger:b,emitter:this})}},{key:"defaultAction",value:function(a){return i("action",a)}},{key:"defaultTarget",value:function(a){var b=i("target",a);return b?document.querySelector(b):void 0}},{key:"defaultText",value:function(a){return i("text",a)}},{key:"destroy",value:function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],b="string"==typeof a?[a]:a,c=!!document.queryCommandSupported;return b.forEach(function(a){c=c&&!!document.queryCommandSupported(a)}),c}}]),b}(k["default"]);a.exports=o})},{"./clipboard-action":2,"good-listener":7,"tiny-emitter":130}],4:[function(a,b){function c(a,b){for(;a&&a.nodeType!==d;){if("function"==typeof a.matches&&a.matches(b))return a;a=a.parentNode}}var d=9;if("undefined"!=typeof Element&&!Element.prototype.matches){var e=Element.prototype;e.matches=e.matchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector}b.exports=c},{}],5:[function(a,b){function c(a,b,c,e,f){var g=d.apply(this,arguments);return a.addEventListener(c,g,f),{destroy:function(){a.removeEventListener(c,g,f)}}}function d(a,b,c,d){return function(c){c.delegateTarget=e(c.target,b),c.delegateTarget&&d.call(a,c)}}var e=a("./closest");b.exports=c},{"./closest":4}],6:[function(a,b,c){c.node=function(a){return void 0!==a&&a instanceof HTMLElement&&1===a.nodeType},c.nodeList=function(a){var b=Object.prototype.toString.call(a);return void 0!==a&&("[object NodeList]"===b||"[object HTMLCollection]"===b)&&"length"in a&&(0===a.length||c.node(a[0]))},c.string=function(a){return"string"==typeof a||a instanceof String},c.fn=function(a){var b=Object.prototype.toString.call(a);return"[object Function]"===b}},{}],7:[function(a,b){function c(a,b,c){if(!a&&!b&&!c)throw new Error("Missing required arguments");if(!g.string(b))throw new TypeError("Second argument must be a String");if(!g.fn(c))throw new TypeError("Third argument must be a Function");if(g.node(a))return d(a,b,c);if(g.nodeList(a))return e(a,b,c);if(g.string(a))return f(a,b,c);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function d(a,b,c){return a.addEventListener(b,c),{destroy:function(){a.removeEventListener(b,c)}}}function e(a,b,c){return Array.prototype.forEach.call(a,function(a){a.addEventListener(b,c)}),{destroy:function(){Array.prototype.forEach.call(a,function(a){a.removeEventListener(b,c)})}}}function f(a,b,c){return h(document.body,a,b,c)}var g=a("./is"),h=a("delegate");b.exports=c},{"./is":6,delegate:5}],8:[function(a,b){var c=a("./_getNative"),d=a("./_root"),e=c(d,"DataView");b.exports=e},{"./_getNative":57,"./_root":92}],9:[function(a,b){function c(a){var b=-1,c=null==a?0:a.length;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}var d=a("./_hashClear"),e=a("./_hashDelete"),f=a("./_hashGet"),g=a("./_hashHas"),h=a("./_hashSet");c.prototype.clear=d,c.prototype["delete"]=e,c.prototype.get=f,c.prototype.has=g,c.prototype.set=h,b.exports=c},{"./_hashClear":63,"./_hashDelete":64,"./_hashGet":65,"./_hashHas":66,"./_hashSet":67}],10:[function(a,b){function c(a){var b=-1,c=null==a?0:a.length;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}var d=a("./_listCacheClear"),e=a("./_listCacheDelete"),f=a("./_listCacheGet"),g=a("./_listCacheHas"),h=a("./_listCacheSet");c.prototype.clear=d,c.prototype["delete"]=e,c.prototype.get=f,c.prototype.has=g,c.prototype.set=h,b.exports=c},{"./_listCacheClear":74,"./_listCacheDelete":75,"./_listCacheGet":76,"./_listCacheHas":77,"./_listCacheSet":78}],11:[function(a,b){var c=a("./_getNative"),d=a("./_root"),e=c(d,"Map");b.exports=e},{"./_getNative":57,"./_root":92}],12:[function(a,b){function c(a){var b=-1,c=null==a?0:a.length;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}var d=a("./_mapCacheClear"),e=a("./_mapCacheDelete"),f=a("./_mapCacheGet"),g=a("./_mapCacheHas"),h=a("./_mapCacheSet");c.prototype.clear=d,c.prototype["delete"]=e,c.prototype.get=f,c.prototype.has=g,c.prototype.set=h,b.exports=c},{"./_mapCacheClear":79,"./_mapCacheDelete":80,"./_mapCacheGet":81,"./_mapCacheHas":82,"./_mapCacheSet":83}],13:[function(a,b){var c=a("./_getNative"),d=a("./_root"),e=c(d,"Promise");b.exports=e},{"./_getNative":57,"./_root":92}],14:[function(a,b){var c=a("./_getNative"),d=a("./_root"),e=c(d,"Set");b.exports=e},{"./_getNative":57,"./_root":92}],15:[function(a,b){function c(a){var b=-1,c=null==a?0:a.length;for(this.__data__=new d;++b<c;)this.add(a[b])}var d=a("./_MapCache"),e=a("./_setCacheAdd"),f=a("./_setCacheHas");c.prototype.add=c.prototype.push=e,c.prototype.has=f,b.exports=c},{"./_MapCache":12,"./_setCacheAdd":93,"./_setCacheHas":94}],16:[function(a,b){function c(a){var b=this.__data__=new d(a);this.size=b.size}var d=a("./_ListCache"),e=a("./_stackClear"),f=a("./_stackDelete"),g=a("./_stackGet"),h=a("./_stackHas"),i=a("./_stackSet");c.prototype.clear=e,c.prototype["delete"]=f,c.prototype.get=g,c.prototype.has=h,c.prototype.set=i,b.exports=c},{"./_ListCache":10,"./_stackClear":96,"./_stackDelete":97,"./_stackGet":98,"./_stackHas":99,"./_stackSet":100}],17:[function(a,b){var c=a("./_root"),d=c.Symbol;b.exports=d},{"./_root":92}],18:[function(a,b){var c=a("./_root"),d=c.Uint8Array;b.exports=d},{"./_root":92}],19:[function(a,b){var c=a("./_getNative"),d=a("./_root"),e=c(d,"WeakMap");b.exports=e},{"./_getNative":57,"./_root":92}],20:[function(a,b){function c(a,b){for(var c=-1,d=null==a?0:a.length,e=0,f=[];++c<d;){var g=a[c];b(g,c,a)&&(f[e++]=g)}return f}b.exports=c},{}],21:[function(a,b){function c(a,b){var c=f(a),j=!c&&e(a),l=!c&&!j&&g(a),m=!c&&!j&&!l&&i(a),n=c||j||l||m,o=n?d(a.length,String):[],p=o.length;for(var q in a)!b&&!k.call(a,q)||n&&("length"==q||l&&("offset"==q||"parent"==q)||m&&("buffer"==q||"byteLength"==q||"byteOffset"==q)||h(q,p))||o.push(q);return o}var d=a("./_baseTimes"),e=a("./isArguments"),f=a("./isArray"),g=a("./isBuffer"),h=a("./_isIndex"),i=a("./isTypedArray"),j=Object.prototype,k=j.hasOwnProperty;b.exports=c},{"./_baseTimes":43,"./_isIndex":68,"./isArguments":110,"./isArray":111,"./isBuffer":113,"./isTypedArray":119}],22:[function(a,b){function c(a,b){for(var c=-1,d=null==a?0:a.length,e=Array(d);++c<d;)e[c]=b(a[c],c,a);return e}b.exports=c},{}],23:[function(a,b){function c(a,b){for(var c=-1,d=b.length,e=a.length;++c<d;)a[e+c]=b[c];return a}b.exports=c},{}],24:[function(a,b){function c(a,b){for(var c=-1,d=null==a?0:a.length;++c<d;)if(b(a[c],c,a))return!0;return!1}b.exports=c},{}],25:[function(a,b){function c(a,b){for(var c=a.length;c--;)if(d(a[c][0],b))return c;return-1}var d=a("./eq");b.exports=c},{"./eq":104}],26:[function(a,b){function c(a,b,c,d){for(var e=a.length,f=c+(d?1:-1);d?f--:++f<e;)if(b(a[f],f,a))return f;return-1}b.exports=c},{}],27:[function(a,b){function c(a,b){b=d(b,a);for(var c=0,f=b.length;null!=a&&f>c;)a=a[e(b[c++])];return c&&c==f?a:void 0}var d=a("./_castPath"),e=a("./_toKey");b.exports=c},{"./_castPath":47,"./_toKey":102}],28:[function(a,b){function c(a,b,c){var f=b(a);return e(a)?f:d(f,c(a))}var d=a("./_arrayPush"),e=a("./isArray");b.exports=c},{"./_arrayPush":23,"./isArray":111}],29:[function(a,b){function c(a){return null==a?void 0===a?h:g:i&&i in Object(a)?e(a):f(a)}var d=a("./_Symbol"),e=a("./_getRawTag"),f=a("./_objectToString"),g="[object Null]",h="[object Undefined]",i=d?d.toStringTag:void 0;b.exports=c},{"./_Symbol":17,"./_getRawTag":58,"./_objectToString":90}],30:[function(a,b){function c(a,b){return null!=a&&b in Object(a)}b.exports=c},{}],31:[function(a,b){function c(a){return e(a)&&d(a)==f}var d=a("./_baseGetTag"),e=a("./isObjectLike"),f="[object Arguments]";b.exports=c},{"./_baseGetTag":29,"./isObjectLike":117}],32:[function(a,b){function c(a,b,f,g,h){return a===b?!0:null==a||null==b||!e(a)&&!e(b)?a!==a&&b!==b:d(a,b,f,g,c,h)}var d=a("./_baseIsEqualDeep"),e=a("./isObjectLike");b.exports=c},{"./_baseIsEqualDeep":33,"./isObjectLike":117}],33:[function(a,b){function c(a,b,c,p,r,s){var t=i(a),u=i(b),v=t?n:h(a),w=u?n:h(b);v=v==m?o:v,w=w==m?o:w;var x=v==o,y=w==o,z=v==w;if(z&&j(a)){if(!j(b))return!1;t=!0,x=!1}if(z&&!x)return s||(s=new d),t||k(a)?e(a,b,c,p,r,s):f(a,b,v,c,p,r,s);if(!(c&l)){var A=x&&q.call(a,"__wrapped__"),B=y&&q.call(b,"__wrapped__");if(A||B){var C=A?a.value():a,D=B?b.value():b;return s||(s=new d),r(C,D,c,p,s)}}return z?(s||(s=new d),g(a,b,c,p,r,s)):!1}var d=a("./_Stack"),e=a("./_equalArrays"),f=a("./_equalByTag"),g=a("./_equalObjects"),h=a("./_getTag"),i=a("./isArray"),j=a("./isBuffer"),k=a("./isTypedArray"),l=1,m="[object Arguments]",n="[object Array]",o="[object Object]",p=Object.prototype,q=p.hasOwnProperty;b.exports=c},{"./_Stack":16,"./_equalArrays":50,"./_equalByTag":51,"./_equalObjects":52,"./_getTag":60,"./isArray":111,"./isBuffer":113,"./isTypedArray":119}],34:[function(a,b){function c(a,b,c,h){var i=c.length,j=i,k=!h;if(null==a)return!j;for(a=Object(a);i--;){var l=c[i];if(k&&l[2]?l[1]!==a[l[0]]:!(l[0]in a))return!1}for(;++i<j;){l=c[i];var m=l[0],n=a[m],o=l[1];if(k&&l[2]){if(void 0===n&&!(m in a))return!1}else{var p=new d;if(h)var q=h(n,o,m,a,b,p);if(!(void 0===q?e(o,n,f|g,h,p):q))return!1}}return!0}var d=a("./_Stack"),e=a("./_baseIsEqual"),f=1,g=2;b.exports=c},{"./_Stack":16,"./_baseIsEqual":32}],35:[function(a,b){function c(a){if(!f(a)||e(a))return!1;var b=d(a)?n:i;return b.test(g(a))}var d=a("./isFunction"),e=a("./_isMasked"),f=a("./isObject"),g=a("./_toSource"),h=/[\\^$.*+?()[\]{}|]/g,i=/^\[object .+?Constructor\]$/,j=Function.prototype,k=Object.prototype,l=j.toString,m=k.hasOwnProperty,n=RegExp("^"+l.call(m).replace(h,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");b.exports=c},{"./_isMasked":71,"./_toSource":103,"./isFunction":114,"./isObject":116}],36:[function(a,b){function c(a){return f(a)&&e(a.length)&&!!E[d(a)]}var d=a("./_baseGetTag"),e=a("./isLength"),f=a("./isObjectLike"),g="[object Arguments]",h="[object Array]",i="[object Boolean]",j="[object Date]",k="[object Error]",l="[object Function]",m="[object Map]",n="[object Number]",o="[object Object]",p="[object RegExp]",q="[object Set]",r="[object String]",s="[object WeakMap]",t="[object ArrayBuffer]",u="[object DataView]",v="[object Float32Array]",w="[object Float64Array]",x="[object Int8Array]",y="[object Int16Array]",z="[object Int32Array]",A="[object Uint8Array]",B="[object Uint8ClampedArray]",C="[object Uint16Array]",D="[object Uint32Array]",E={};

E[v]=E[w]=E[x]=E[y]=E[z]=E[A]=E[B]=E[C]=E[D]=!0,E[g]=E[h]=E[t]=E[i]=E[u]=E[j]=E[k]=E[l]=E[m]=E[n]=E[o]=E[p]=E[q]=E[r]=E[s]=!1,b.exports=c},{"./_baseGetTag":29,"./isLength":115,"./isObjectLike":117}],37:[function(a,b){function c(a){return"function"==typeof a?a:null==a?f:"object"==typeof a?g(a)?e(a[0],a[1]):d(a):h(a)}var d=a("./_baseMatches"),e=a("./_baseMatchesProperty"),f=a("./identity"),g=a("./isArray"),h=a("./property");b.exports=c},{"./_baseMatches":39,"./_baseMatchesProperty":40,"./identity":109,"./isArray":111,"./property":122}],38:[function(a,b){function c(a){if(!d(a))return e(a);var b=[];for(var c in Object(a))g.call(a,c)&&"constructor"!=c&&b.push(c);return b}var d=a("./_isPrototype"),e=a("./_nativeKeys"),f=Object.prototype,g=f.hasOwnProperty;b.exports=c},{"./_isPrototype":72,"./_nativeKeys":88}],39:[function(a,b){function c(a){var b=e(a);return 1==b.length&&b[0][2]?f(b[0][0],b[0][1]):function(c){return c===a||d(c,a,b)}}var d=a("./_baseIsMatch"),e=a("./_getMatchData"),f=a("./_matchesStrictComparable");b.exports=c},{"./_baseIsMatch":34,"./_getMatchData":56,"./_matchesStrictComparable":85}],40:[function(a,b){function c(a,b){return g(a)&&h(b)?i(j(a),b):function(c){var g=e(c,a);return void 0===g&&g===b?f(c,a):d(b,g,k|l)}}var d=a("./_baseIsEqual"),e=a("./get"),f=a("./hasIn"),g=a("./_isKey"),h=a("./_isStrictComparable"),i=a("./_matchesStrictComparable"),j=a("./_toKey"),k=1,l=2;b.exports=c},{"./_baseIsEqual":32,"./_isKey":69,"./_isStrictComparable":73,"./_matchesStrictComparable":85,"./_toKey":102,"./get":107,"./hasIn":108}],41:[function(a,b){function c(a){return function(b){return null==b?void 0:b[a]}}b.exports=c},{}],42:[function(a,b){function c(a){return function(b){return d(b,a)}}var d=a("./_baseGet");b.exports=c},{"./_baseGet":27}],43:[function(a,b){function c(a,b){for(var c=-1,d=Array(a);++c<a;)d[c]=b(c);return d}b.exports=c},{}],44:[function(a,b){function c(a){if("string"==typeof a)return a;if(f(a))return e(a,c)+"";if(g(a))return j?j.call(a):"";var b=a+"";return"0"==b&&1/a==-h?"-0":b}var d=a("./_Symbol"),e=a("./_arrayMap"),f=a("./isArray"),g=a("./isSymbol"),h=1/0,i=d?d.prototype:void 0,j=i?i.toString:void 0;b.exports=c},{"./_Symbol":17,"./_arrayMap":22,"./isArray":111,"./isSymbol":118}],45:[function(a,b){function c(a){return function(b){return a(b)}}b.exports=c},{}],46:[function(a,b){function c(a,b){return a.has(b)}b.exports=c},{}],47:[function(a,b){function c(a,b){return d(a)?a:e(a,b)?[a]:f(g(a))}var d=a("./isArray"),e=a("./_isKey"),f=a("./_stringToPath"),g=a("./toString");b.exports=c},{"./_isKey":69,"./_stringToPath":101,"./isArray":111,"./toString":128}],48:[function(a,b){var c=a("./_root"),d=c["__core-js_shared__"];b.exports=d},{"./_root":92}],49:[function(a,b){function c(a){return function(b,c,g){var h=Object(b);if(!e(b)){var i=d(c,3);b=f(b),c=function(a){return i(h[a],a,h)}}var j=a(b,c,g);return j>-1?h[i?b[j]:j]:void 0}}var d=a("./_baseIteratee"),e=a("./isArrayLike"),f=a("./keys");b.exports=c},{"./_baseIteratee":37,"./isArrayLike":112,"./keys":120}],50:[function(a,b){function c(a,b,c,i,j,k){var l=c&g,m=a.length,n=b.length;if(m!=n&&!(l&&n>m))return!1;var o=k.get(a);if(o&&k.get(b))return o==b;var p=-1,q=!0,r=c&h?new d:void 0;for(k.set(a,b),k.set(b,a);++p<m;){var s=a[p],t=b[p];if(i)var u=l?i(t,s,p,b,a,k):i(s,t,p,a,b,k);if(void 0!==u){if(u)continue;q=!1;break}if(r){if(!e(b,function(a,b){return f(r,b)||s!==a&&!j(s,a,c,i,k)?void 0:r.push(b)})){q=!1;break}}else if(s!==t&&!j(s,t,c,i,k)){q=!1;break}}return k["delete"](a),k["delete"](b),q}var d=a("./_SetCache"),e=a("./_arraySome"),f=a("./_cacheHas"),g=1,h=2;b.exports=c},{"./_SetCache":15,"./_arraySome":24,"./_cacheHas":46}],51:[function(a,b){function c(a,b,c,d,w,y,z){switch(c){case v:if(a.byteLength!=b.byteLength||a.byteOffset!=b.byteOffset)return!1;a=a.buffer,b=b.buffer;case u:return a.byteLength==b.byteLength&&y(new e(a),new e(b))?!0:!1;case l:case m:case p:return f(+a,+b);case n:return a.name==b.name&&a.message==b.message;case q:case s:return a==b+"";case o:var A=h;case r:var B=d&j;if(A||(A=i),a.size!=b.size&&!B)return!1;var C=z.get(a);if(C)return C==b;d|=k,z.set(a,b);var D=g(A(a),A(b),d,w,y,z);return z["delete"](a),D;case t:if(x)return x.call(a)==x.call(b)}return!1}var d=a("./_Symbol"),e=a("./_Uint8Array"),f=a("./eq"),g=a("./_equalArrays"),h=a("./_mapToArray"),i=a("./_setToArray"),j=1,k=2,l="[object Boolean]",m="[object Date]",n="[object Error]",o="[object Map]",p="[object Number]",q="[object RegExp]",r="[object Set]",s="[object String]",t="[object Symbol]",u="[object ArrayBuffer]",v="[object DataView]",w=d?d.prototype:void 0,x=w?w.valueOf:void 0;b.exports=c},{"./_Symbol":17,"./_Uint8Array":18,"./_equalArrays":50,"./_mapToArray":84,"./_setToArray":95,"./eq":104}],52:[function(a,b){function c(a,b,c,f,h,i){var j=c&e,k=d(a),l=k.length,m=d(b),n=m.length;if(l!=n&&!j)return!1;for(var o=l;o--;){var p=k[o];if(!(j?p in b:g.call(b,p)))return!1}var q=i.get(a);if(q&&i.get(b))return q==b;var r=!0;i.set(a,b),i.set(b,a);for(var s=j;++o<l;){p=k[o];var t=a[p],u=b[p];if(f)var v=j?f(u,t,p,b,a,i):f(t,u,p,a,b,i);if(!(void 0===v?t===u||h(t,u,c,f,i):v)){r=!1;break}s||(s="constructor"==p)}if(r&&!s){var w=a.constructor,x=b.constructor;w!=x&&"constructor"in a&&"constructor"in b&&!("function"==typeof w&&w instanceof w&&"function"==typeof x&&x instanceof x)&&(r=!1)}return i["delete"](a),i["delete"](b),r}var d=a("./_getAllKeys"),e=1,f=Object.prototype,g=f.hasOwnProperty;b.exports=c},{"./_getAllKeys":54}],53:[function(a,b){(function(a){var c="object"==typeof a&&a&&a.Object===Object&&a;b.exports=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],54:[function(a,b){function c(a){return d(a,f,e)}var d=a("./_baseGetAllKeys"),e=a("./_getSymbols"),f=a("./keys");b.exports=c},{"./_baseGetAllKeys":28,"./_getSymbols":59,"./keys":120}],55:[function(a,b){function c(a,b){var c=a.__data__;return d(b)?c["string"==typeof b?"string":"hash"]:c.map}var d=a("./_isKeyable");b.exports=c},{"./_isKeyable":70}],56:[function(a,b){function c(a){for(var b=e(a),c=b.length;c--;){var f=b[c],g=a[f];b[c]=[f,g,d(g)]}return b}var d=a("./_isStrictComparable"),e=a("./keys");b.exports=c},{"./_isStrictComparable":73,"./keys":120}],57:[function(a,b){function c(a,b){var c=e(a,b);return d(c)?c:void 0}var d=a("./_baseIsNative"),e=a("./_getValue");b.exports=c},{"./_baseIsNative":35,"./_getValue":61}],58:[function(a,b){function c(a){var b=f.call(a,h),c=a[h];try{a[h]=void 0;var d=!0}catch(e){}var i=g.call(a);return d&&(b?a[h]=c:delete a[h]),i}var d=a("./_Symbol"),e=Object.prototype,f=e.hasOwnProperty,g=e.toString,h=d?d.toStringTag:void 0;b.exports=c},{"./_Symbol":17}],59:[function(a,b){var c=a("./_arrayFilter"),d=a("./stubArray"),e=Object.prototype,f=e.propertyIsEnumerable,g=Object.getOwnPropertySymbols,h=g?function(a){return null==a?[]:(a=Object(a),c(g(a),function(b){return f.call(a,b)}))}:d;b.exports=h},{"./_arrayFilter":20,"./stubArray":123}],60:[function(a,b){var c=a("./_DataView"),d=a("./_Map"),e=a("./_Promise"),f=a("./_Set"),g=a("./_WeakMap"),h=a("./_baseGetTag"),i=a("./_toSource"),j="[object Map]",k="[object Object]",l="[object Promise]",m="[object Set]",n="[object WeakMap]",o="[object DataView]",p=i(c),q=i(d),r=i(e),s=i(f),t=i(g),u=h;(c&&u(new c(new ArrayBuffer(1)))!=o||d&&u(new d)!=j||e&&u(e.resolve())!=l||f&&u(new f)!=m||g&&u(new g)!=n)&&(u=function(a){var b=h(a),c=b==k?a.constructor:void 0,d=c?i(c):"";if(d)switch(d){case p:return o;case q:return j;case r:return l;case s:return m;case t:return n}return b}),b.exports=u},{"./_DataView":8,"./_Map":11,"./_Promise":13,"./_Set":14,"./_WeakMap":19,"./_baseGetTag":29,"./_toSource":103}],61:[function(a,b){function c(a,b){return null==a?void 0:a[b]}b.exports=c},{}],62:[function(a,b){function c(a,b,c){b=d(b,a);for(var j=-1,k=b.length,l=!1;++j<k;){var m=i(b[j]);if(!(l=null!=a&&c(a,m)))break;a=a[m]}return l||++j!=k?l:(k=null==a?0:a.length,!!k&&h(k)&&g(m,k)&&(f(a)||e(a)))}var d=a("./_castPath"),e=a("./isArguments"),f=a("./isArray"),g=a("./_isIndex"),h=a("./isLength"),i=a("./_toKey");b.exports=c},{"./_castPath":47,"./_isIndex":68,"./_toKey":102,"./isArguments":110,"./isArray":111,"./isLength":115}],63:[function(a,b){function c(){this.__data__=d?d(null):{},this.size=0}var d=a("./_nativeCreate");b.exports=c},{"./_nativeCreate":87}],64:[function(a,b){function c(a){var b=this.has(a)&&delete this.__data__[a];return this.size-=b?1:0,b}b.exports=c},{}],65:[function(a,b){function c(a){var b=this.__data__;if(d){var c=b[a];return c===e?void 0:c}return g.call(b,a)?b[a]:void 0}var d=a("./_nativeCreate"),e="__lodash_hash_undefined__",f=Object.prototype,g=f.hasOwnProperty;b.exports=c},{"./_nativeCreate":87}],66:[function(a,b){function c(a){var b=this.__data__;return d?void 0!==b[a]:f.call(b,a)}var d=a("./_nativeCreate"),e=Object.prototype,f=e.hasOwnProperty;b.exports=c},{"./_nativeCreate":87}],67:[function(a,b){function c(a,b){var c=this.__data__;return this.size+=this.has(a)?0:1,c[a]=d&&void 0===b?e:b,this}var d=a("./_nativeCreate"),e="__lodash_hash_undefined__";b.exports=c},{"./_nativeCreate":87}],68:[function(a,b){function c(a,b){return b=null==b?d:b,!!b&&("number"==typeof a||e.test(a))&&a>-1&&a%1==0&&b>a}var d=9007199254740991,e=/^(?:0|[1-9]\d*)$/;b.exports=c},{}],69:[function(a,b){function c(a,b){if(d(a))return!1;var c=typeof a;return"number"==c||"symbol"==c||"boolean"==c||null==a||e(a)?!0:g.test(a)||!f.test(a)||null!=b&&a in Object(b)}var d=a("./isArray"),e=a("./isSymbol"),f=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,g=/^\w*$/;b.exports=c},{"./isArray":111,"./isSymbol":118}],70:[function(a,b){function c(a){var b=typeof a;return"string"==b||"number"==b||"symbol"==b||"boolean"==b?"__proto__"!==a:null===a}b.exports=c},{}],71:[function(a,b){function c(a){return!!e&&e in a}var d=a("./_coreJsData"),e=function(){var a=/[^.]+$/.exec(d&&d.keys&&d.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}();b.exports=c},{"./_coreJsData":48}],72:[function(a,b){function c(a){var b=a&&a.constructor,c="function"==typeof b&&b.prototype||d;return a===c}var d=Object.prototype;b.exports=c},{}],73:[function(a,b){function c(a){return a===a&&!d(a)}var d=a("./isObject");b.exports=c},{"./isObject":116}],74:[function(a,b){function c(){this.__data__=[],this.size=0}b.exports=c},{}],75:[function(a,b){function c(a){var b=this.__data__,c=d(b,a);if(0>c)return!1;var e=b.length-1;return c==e?b.pop():f.call(b,c,1),--this.size,!0}var d=a("./_assocIndexOf"),e=Array.prototype,f=e.splice;b.exports=c},{"./_assocIndexOf":25}],76:[function(a,b){function c(a){var b=this.__data__,c=d(b,a);return 0>c?void 0:b[c][1]}var d=a("./_assocIndexOf");b.exports=c},{"./_assocIndexOf":25}],77:[function(a,b){function c(a){return d(this.__data__,a)>-1}var d=a("./_assocIndexOf");b.exports=c},{"./_assocIndexOf":25}],78:[function(a,b){function c(a,b){var c=this.__data__,e=d(c,a);return 0>e?(++this.size,c.push([a,b])):c[e][1]=b,this}var d=a("./_assocIndexOf");b.exports=c},{"./_assocIndexOf":25}],79:[function(a,b){function c(){this.size=0,this.__data__={hash:new d,map:new(f||e),string:new d}}var d=a("./_Hash"),e=a("./_ListCache"),f=a("./_Map");b.exports=c},{"./_Hash":9,"./_ListCache":10,"./_Map":11}],80:[function(a,b){function c(a){var b=d(this,a)["delete"](a);return this.size-=b?1:0,b}var d=a("./_getMapData");b.exports=c},{"./_getMapData":55}],81:[function(a,b){function c(a){return d(this,a).get(a)}var d=a("./_getMapData");b.exports=c},{"./_getMapData":55}],82:[function(a,b){function c(a){return d(this,a).has(a)}var d=a("./_getMapData");b.exports=c},{"./_getMapData":55}],83:[function(a,b){function c(a,b){var c=d(this,a),e=c.size;return c.set(a,b),this.size+=c.size==e?0:1,this}var d=a("./_getMapData");b.exports=c},{"./_getMapData":55}],84:[function(a,b){function c(a){var b=-1,c=Array(a.size);return a.forEach(function(a,d){c[++b]=[d,a]}),c}b.exports=c},{}],85:[function(a,b){function c(a,b){return function(c){return null==c?!1:c[a]===b&&(void 0!==b||a in Object(c))}}b.exports=c},{}],86:[function(a,b){function c(a){var b=d(a,function(a){return c.size===e&&c.clear(),a}),c=b.cache;return b}var d=a("./memoize"),e=500;b.exports=c},{"./memoize":121}],87:[function(a,b){var c=a("./_getNative"),d=c(Object,"create");b.exports=d},{"./_getNative":57}],88:[function(a,b){var c=a("./_overArg"),d=c(Object.keys,Object);b.exports=d},{"./_overArg":91}],89:[function(a,b,c){var d=a("./_freeGlobal"),e="object"==typeof c&&c&&!c.nodeType&&c,f=e&&"object"==typeof b&&b&&!b.nodeType&&b,g=f&&f.exports===e,h=g&&d.process,i=function(){try{return h&&h.binding&&h.binding("util")}catch(a){}}();b.exports=i},{"./_freeGlobal":53}],90:[function(a,b){function c(a){return e.call(a)}var d=Object.prototype,e=d.toString;b.exports=c},{}],91:[function(a,b){function c(a,b){return function(c){return a(b(c))}}b.exports=c},{}],92:[function(a,b){var c=a("./_freeGlobal"),d="object"==typeof self&&self&&self.Object===Object&&self,e=c||d||Function("return this")();b.exports=e},{"./_freeGlobal":53}],93:[function(a,b){function c(a){return this.__data__.set(a,d),this}var d="__lodash_hash_undefined__";b.exports=c},{}],94:[function(a,b){function c(a){return this.__data__.has(a)}b.exports=c},{}],95:[function(a,b){function c(a){var b=-1,c=Array(a.size);return a.forEach(function(a){c[++b]=a}),c}b.exports=c},{}],96:[function(a,b){function c(){this.__data__=new d,this.size=0}var d=a("./_ListCache");b.exports=c},{"./_ListCache":10}],97:[function(a,b){function c(a){var b=this.__data__,c=b["delete"](a);return this.size=b.size,c}b.exports=c},{}],98:[function(a,b){function c(a){return this.__data__.get(a)}b.exports=c},{}],99:[function(a,b){function c(a){return this.__data__.has(a)}b.exports=c},{}],100:[function(a,b){function c(a,b){var c=this.__data__;if(c instanceof d){var h=c.__data__;if(!e||h.length<g-1)return h.push([a,b]),this.size=++c.size,this;c=this.__data__=new f(h)}return c.set(a,b),this.size=c.size,this}var d=a("./_ListCache"),e=a("./_Map"),f=a("./_MapCache"),g=200;b.exports=c},{"./_ListCache":10,"./_Map":11,"./_MapCache":12}],101:[function(a,b){var c=a("./_memoizeCapped"),d=/^\./,e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,f=/\\(\\)?/g,g=c(function(a){var b=[];return d.test(a)&&b.push(""),a.replace(e,function(a,c,d,e){b.push(d?e.replace(f,"$1"):c||a)}),b});b.exports=g},{"./_memoizeCapped":86}],102:[function(a,b){function c(a){if("string"==typeof a||d(a))return a;var b=a+"";return"0"==b&&1/a==-e?"-0":b}var d=a("./isSymbol"),e=1/0;b.exports=c},{"./isSymbol":118}],103:[function(a,b){function c(a){if(null!=a){try{return e.call(a)}catch(b){}try{return a+""}catch(b){}}return""}var d=Function.prototype,e=d.toString;b.exports=c},{}],104:[function(a,b){function c(a,b){return a===b||a!==a&&b!==b}b.exports=c},{}],105:[function(a,b){var c=a("./_createFind"),d=a("./findIndex"),e=c(d);b.exports=e},{"./_createFind":49,"./findIndex":106}],106:[function(a,b){function c(a,b,c){var h=null==a?0:a.length;if(!h)return-1;var i=null==c?0:f(c);return 0>i&&(i=g(h+i,0)),d(a,e(b,3),i)}var d=a("./_baseFindIndex"),e=a("./_baseIteratee"),f=a("./toInteger"),g=Math.max;b.exports=c},{"./_baseFindIndex":26,"./_baseIteratee":37,"./toInteger":126}],107:[function(a,b){function c(a,b,c){var e=null==a?void 0:d(a,b);return void 0===e?c:e}var d=a("./_baseGet");b.exports=c},{"./_baseGet":27}],108:[function(a,b){function c(a,b){return null!=a&&e(a,b,d)}var d=a("./_baseHasIn"),e=a("./_hasPath");b.exports=c},{"./_baseHasIn":30,"./_hasPath":62}],109:[function(a,b){function c(a){return a}b.exports=c},{}],110:[function(a,b){var c=a("./_baseIsArguments"),d=a("./isObjectLike"),e=Object.prototype,f=e.hasOwnProperty,g=e.propertyIsEnumerable,h=c(function(){return arguments}())?c:function(a){return d(a)&&f.call(a,"callee")&&!g.call(a,"callee")};b.exports=h},{"./_baseIsArguments":31,"./isObjectLike":117}],111:[function(a,b){var c=Array.isArray;b.exports=c},{}],112:[function(a,b){function c(a){return null!=a&&e(a.length)&&!d(a)}var d=a("./isFunction"),e=a("./isLength");b.exports=c},{"./isFunction":114,"./isLength":115}],113:[function(a,b,c){var d=a("./_root"),e=a("./stubFalse"),f="object"==typeof c&&c&&!c.nodeType&&c,g=f&&"object"==typeof b&&b&&!b.nodeType&&b,h=g&&g.exports===f,i=h?d.Buffer:void 0,j=i?i.isBuffer:void 0,k=j||e;b.exports=k},{"./_root":92,"./stubFalse":124}],114:[function(a,b){function c(a){if(!e(a))return!1;var b=d(a);return b==g||b==h||b==f||b==i}var d=a("./_baseGetTag"),e=a("./isObject"),f="[object AsyncFunction]",g="[object Function]",h="[object GeneratorFunction]",i="[object Proxy]";b.exports=c},{"./_baseGetTag":29,"./isObject":116}],115:[function(a,b){function c(a){return"number"==typeof a&&a>-1&&a%1==0&&d>=a}var d=9007199254740991;b.exports=c},{}],116:[function(a,b){function c(a){var b=typeof a;return null!=a&&("object"==b||"function"==b)}b.exports=c},{}],117:[function(a,b){function c(a){return null!=a&&"object"==typeof a}b.exports=c},{}],118:[function(a,b){function c(a){return"symbol"==typeof a||e(a)&&d(a)==f}var d=a("./_baseGetTag"),e=a("./isObjectLike"),f="[object Symbol]";b.exports=c},{"./_baseGetTag":29,"./isObjectLike":117}],119:[function(a,b){var c=a("./_baseIsTypedArray"),d=a("./_baseUnary"),e=a("./_nodeUtil"),f=e&&e.isTypedArray,g=f?d(f):c;b.exports=g},{"./_baseIsTypedArray":36,"./_baseUnary":45,"./_nodeUtil":89}],120:[function(a,b){function c(a){return f(a)?d(a):e(a)}var d=a("./_arrayLikeKeys"),e=a("./_baseKeys"),f=a("./isArrayLike");b.exports=c},{"./_arrayLikeKeys":21,"./_baseKeys":38,"./isArrayLike":112}],121:[function(a,b){function c(a,b){if("function"!=typeof a||null!=b&&"function"!=typeof b)throw new TypeError(e);var f=function(){var c=arguments,d=b?b.apply(this,c):c[0],e=f.cache;if(e.has(d))return e.get(d);var g=a.apply(this,c);return f.cache=e.set(d,g)||e,g};return f.cache=new(c.Cache||d),f}var d=a("./_MapCache"),e="Expected a function";c.Cache=d,b.exports=c},{"./_MapCache":12}],122:[function(a,b){function c(a){return f(a)?d(g(a)):e(a)}var d=a("./_baseProperty"),e=a("./_basePropertyDeep"),f=a("./_isKey"),g=a("./_toKey");b.exports=c},{"./_baseProperty":41,"./_basePropertyDeep":42,"./_isKey":69,"./_toKey":102}],123:[function(a,b){function c(){return[]}b.exports=c},{}],124:[function(a,b){function c(){return!1}b.exports=c},{}],125:[function(a,b){function c(a){if(!a)return 0===a?a:0;if(a=d(a),a===e||a===-e){var b=0>a?-1:1;return b*f}return a===a?a:0}var d=a("./toNumber"),e=1/0,f=1.7976931348623157e308;b.exports=c},{"./toNumber":127}],126:[function(a,b){function c(a){var b=d(a),c=b%1;return b===b?c?b-c:b:0}var d=a("./toFinite");b.exports=c},{"./toFinite":125}],127:[function(a,b){function c(a){if("number"==typeof a)return a;if(e(a))return f;if(d(a)){var b="function"==typeof a.valueOf?a.valueOf():a;a=d(b)?b+"":b}if("string"!=typeof a)return 0===a?a:+a;a=a.replace(g,"");var c=i.test(a);return c||j.test(a)?k(a.slice(2),c?2:8):h.test(a)?f:+a}var d=a("./isObject"),e=a("./isSymbol"),f=0/0,g=/^\s+|\s+$/g,h=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,j=/^0o[0-7]+$/i,k=parseInt;b.exports=c},{"./isObject":116,"./isSymbol":118}],128:[function(a,b){function c(a){return null==a?"":d(a)}var d=a("./_baseToString");b.exports=c},{"./_baseToString":44}],129:[function(a,b){function c(a){var b;if("SELECT"===a.nodeName)a.focus(),b=a.value;else if("INPUT"===a.nodeName||"TEXTAREA"===a.nodeName){var c=a.hasAttribute("readonly");c||a.setAttribute("readonly",""),a.select(),a.setSelectionRange(0,a.value.length),c||a.removeAttribute("readonly"),b=a.value}else{a.hasAttribute("contenteditable")&&a.focus();var d=window.getSelection(),e=document.createRange();e.selectNodeContents(a),d.removeAllRanges(),d.addRange(e),b=d.toString()}return b}b.exports=c},{}],130:[function(a,b){function c(){}c.prototype={on:function(a,b,c){var d=this.e||(this.e={});return(d[a]||(d[a]=[])).push({fn:b,ctx:c}),this},once:function(a,b,c){function d(){e.off(a,d),b.apply(c,arguments)}var e=this;return d._=b,this.on(a,d,c)},emit:function(a){var b=[].slice.call(arguments,1),c=((this.e||(this.e={}))[a]||[]).slice(),d=0,e=c.length;for(d;e>d;d++)c[d].fn.apply(c[d].ctx,b);return this},off:function(a,b){var c=this.e||(this.e={}),d=c[a],e=[];if(d&&b)for(var f=0,g=d.length;g>f;f++)d[f].fn!==b&&d[f].fn._!==b&&e.push(d[f]);return e.length?c[a]=e:delete c[a],this}},b.exports=c},{}],131:[function(a,b){var c=b.exports={WebVTT:a("./vtt.js").WebVTT,VTTCue:a("./vttcue-extended.js").VTTCue,VTTRegion:a("./vttregion-extended.js").VTTRegion};window.vttjs=c,window.WebVTT=c.WebVTT;var d=c.VTTCue,e=c.VTTRegion,f=window.VTTCue,g=window.VTTRegion;c.shim=function(){window.VTTCue=d,window.VTTRegion=e},c.restore=function(){window.VTTCue=f,window.VTTRegion=g},window.VTTCue||c.shim()},{"./vtt.js":132,"./vttcue-extended.js":133,"./vttregion-extended.js":135}],132:[function(){!function(a){function b(a,b){this.name="ParsingError",this.code=a.code,this.message=b||a.message}function c(a){function b(a,b,c,d){return 3600*(0|a)+60*(0|b)+(0|c)+(0|d)/1e3}var c=a.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return c?c[3]?b(c[1],c[2],c[3].replace(":",""),c[4]):c[1]>59?b(c[1],c[2],0,c[4]):b(0,c[1],c[2],c[4]):null}function d(){this.values=p(null)}function e(a,b,c,d){var e=d?a.split(d):[a];for(var f in e)if("string"==typeof e[f]){var g=e[f].split(c);if(2===g.length){var h=g[0],i=g[1];b(h,i)}}}function f(a,f,g){function h(){var d=c(a);if(null===d)throw new b(b.Errors.BadTimeStamp,"Malformed timestamp: "+k);return a=a.replace(/^[^\sa-zA-Z-]+/,""),d}function i(a,b){var c=new d;e(a,function(a,b){switch(a){case"region":for(var d=g.length-1;d>=0;d--)if(g[d].id===b){c.set(a,g[d].region);break}break;case"vertical":c.alt(a,b,["rl","lr"]);break;case"line":var e=b.split(","),f=e[0];c.integer(a,f),c.percent(a,f)?c.set("snapToLines",!1):null,c.alt(a,f,["auto"]),2===e.length&&c.alt("lineAlign",e[1],["start","middle","end"]);break;case"position":e=b.split(","),c.percent(a,e[0]),2===e.length&&c.alt("positionAlign",e[1],["start","middle","end"]);break;case"size":c.percent(a,b);break;case"align":c.alt(a,b,["start","middle","end","left","right"])}},/:/,/\s/),b.region=c.get("region",null),b.vertical=c.get("vertical",""),b.line=c.get("line","auto"),b.lineAlign=c.get("lineAlign","start"),b.snapToLines=c.get("snapToLines",!0),b.size=c.get("size",100),b.align=c.get("align","middle"),b.position=c.get("position",{start:0,left:0,middle:50,end:100,right:100},b.align),b.positionAlign=c.get("positionAlign",{start:"start",left:"start",middle:"middle",end:"end",right:"end"},b.align)}function j(){a=a.replace(/^\s+/,"")}var k=a;if(j(),f.startTime=h(),j(),"-->"!==a.substr(0,3))throw new b(b.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '-->'): "+k);a=a.substr(3),j(),f.endTime=h(),j(),i(a,f)}function g(a,b){function d(){function a(a){return b=b.substr(a.length),a}if(!b)return null;var c=b.match(/^([^<]*)(<[^>]+>?)?/);return a(c[1]?c[1]:c[2])}function e(a){return q[a]}function f(a){for(;o=a.match(/&(amp|lt|gt|lrm|rlm|nbsp);/);)a=a.replace(o[0],e);return a}function g(a,b){return!t[b.localName]||t[b.localName]===a.localName}function h(b,c){var d=r[b];if(!d)return null;var e=a.document.createElement(d);e.localName=d;var f=s[b];return f&&c&&(e[f]=c.trim()),e}for(var i,j=a.document.createElement("div"),k=j,l=[];null!==(i=d());)if("<"!==i[0])k.appendChild(a.document.createTextNode(f(i)));else{if("/"===i[1]){l.length&&l[l.length-1]===i.substr(2).replace(">","")&&(l.pop(),k=k.parentNode);continue}var m,n=c(i.substr(1,i.length-2));if(n){m=a.document.createProcessingInstruction("timestamp",n),k.appendChild(m);continue}var o=i.match(/^<([^.\s\/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!o)continue;if(m=h(o[1],o[3]),!m)continue;if(!g(k,m))continue;o[2]&&(m.className=o[2].substr(1).replace("."," ")),l.push(o[1]),k.appendChild(m),k=m}return j}function h(a){for(var b=0;b<u.length;b++){var c=u[b];if(a>=c[0]&&a<=c[1])return!0}return!1}function i(a){function b(a,b){for(var c=b.childNodes.length-1;c>=0;c--)a.push(b.childNodes[c])}function c(a){if(!a||!a.length)return null;var d=a.pop(),e=d.textContent||d.innerText;if(e){var f=e.match(/^.*(\n|\r)/);return f?(a.length=0,f[0]):e}return"ruby"===d.tagName?c(a):d.childNodes?(b(a,d),c(a)):void 0}var d,e=[],f="";if(!a||!a.childNodes)return"ltr";for(b(e,a);f=c(e);)for(var g=0;g<f.length;g++)if(d=f.charCodeAt(g),h(d))return"rtl";return"ltr"}function j(a){if("number"==typeof a.line&&(a.snapToLines||a.line>=0&&a.line<=100))return a.line;if(!a.track||!a.track.textTrackList||!a.track.textTrackList.mediaElement)return-1;for(var b=a.track,c=b.textTrackList,d=0,e=0;e<c.length&&c[e]!==b;e++)"showing"===c[e].mode&&d++;return-1*++d}function k(){}function l(a,b,c){var d=/MSIE\s8\.0/.test(navigator.userAgent),e="rgba(255, 255, 255, 1)",f="rgba(0, 0, 0, 0.8)";d&&(e="rgb(255, 255, 255)",f="rgb(0, 0, 0)"),k.call(this),this.cue=b,this.cueDiv=g(a,b.text);var h={color:e,backgroundColor:f,position:"relative",left:0,right:0,top:0,bottom:0,display:"inline"};d||(h.writingMode=""===b.vertical?"horizontal-tb":"lr"===b.vertical?"vertical-lr":"vertical-rl",h.unicodeBidi="plaintext"),this.applyStyles(h,this.cueDiv),this.div=a.document.createElement("div"),h={textAlign:"middle"===b.align?"center":b.align,font:c.font,whiteSpace:"pre-line",position:"absolute"},d||(h.direction=i(this.cueDiv),h.writingMode=""===b.vertical?"horizontal-tb":"lr"===b.vertical?"vertical-lr":"vertical-rl".stylesunicodeBidi="plaintext"),this.applyStyles(h),this.div.appendChild(this.cueDiv);var j=0;switch(b.positionAlign){case"start":j=b.position;break;case"middle":j=b.position-b.size/2;break;case"end":j=b.position-b.size}this.applyStyles(""===b.vertical?{left:this.formatStyle(j,"%"),width:this.formatStyle(b.size,"%")}:{top:this.formatStyle(j,"%"),height:this.formatStyle(b.size,"%")}),this.move=function(a){this.applyStyles({top:this.formatStyle(a.top,"px"),bottom:this.formatStyle(a.bottom,"px"),left:this.formatStyle(a.left,"px"),right:this.formatStyle(a.right,"px"),height:this.formatStyle(a.height,"px"),width:this.formatStyle(a.width,"px")})}}function m(a){var b,c,d,e,f=/MSIE\s8\.0/.test(navigator.userAgent);if(a.div){c=a.div.offsetHeight,d=a.div.offsetWidth,e=a.div.offsetTop;var g=(g=a.div.childNodes)&&(g=g[0])&&g.getClientRects&&g.getClientRects();a=a.div.getBoundingClientRect(),b=g?Math.max(g[0]&&g[0].height||0,a.height/g.length):0}this.left=a.left,this.right=a.right,this.top=a.top||e,this.height=a.height||c,this.bottom=a.bottom||e+(a.height||c),this.width=a.width||d,this.lineHeight=void 0!==b?b:a.lineHeight,f&&!this.lineHeight&&(this.lineHeight=13)}function n(a,b,c,d){function e(a,b){for(var e,f=new m(a),g=1,h=0;h<b.length;h++){for(;a.overlapsOppositeAxis(c,b[h])||a.within(c)&&a.overlapsAny(d);)a.move(b[h]);if(a.within(c))return a;var i=a.intersectPercentage(c);g>i&&(e=new m(a),g=i),a=new m(f)}return e||f}var f=new m(b),g=b.cue,h=j(g),i=[];if(g.snapToLines){var k;switch(g.vertical){case"":i=["+y","-y"],k="height";break;case"rl":i=["+x","-x"],k="width";break;case"lr":i=["-x","+x"],k="width"}var l=f.lineHeight,n=l*Math.round(h),o=c[k]+l,p=i[0];Math.abs(n)>o&&(n=0>n?-1:1,n*=Math.ceil(o/l)*l),0>h&&(n+=""===g.vertical?c.height:c.width,i=i.reverse()),f.move(p,n)}else{var q=f.lineHeight/c.height*100;switch(g.lineAlign){case"middle":h-=q/2;break;case"end":h-=q}switch(g.vertical){case"":b.applyStyles({top:b.formatStyle(h,"%")});break;case"rl":b.applyStyles({left:b.formatStyle(h,"%")});break;case"lr":b.applyStyles({right:b.formatStyle(h,"%")})}i=["+y","-x","+x","-y"],f=new m(b)}var r=e(f,i);b.move(r.toCSSCompatValues(c))}function o(){}var p=Object.create||function(){function a(){}return function(b){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return a.prototype=b,new a}}();b.prototype=p(Error.prototype),b.prototype.constructor=b,b.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},d.prototype={set:function(a,b){this.get(a)||""===b||(this.values[a]=b)},get:function(a,b,c){return c?this.has(a)?this.values[a]:b[c]:this.has(a)?this.values[a]:b},has:function(a){return a in this.values},alt:function(a,b,c){for(var d=0;d<c.length;++d)if(b===c[d]){this.set(a,b);break}},integer:function(a,b){/^-?\d+$/.test(b)&&this.set(a,parseInt(b,10))},percent:function(a,b){var c;return(c=b.match(/^([\d]{1,3})(\.[\d]*)?%$/))&&(b=parseFloat(b),b>=0&&100>=b)?(this.set(a,b),!0):!1}};var q={"&amp;":"&","&lt;":"<","&gt;":">","&lrm;":"‎","&rlm;":"‏","&nbsp;":" "},r={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},s={v:"title",lang:"lang"},t={rt:"ruby"},u=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];k.prototype.applyStyles=function(a,b){b=b||this.div;for(var c in a)a.hasOwnProperty(c)&&(b.style[c]=a[c])},k.prototype.formatStyle=function(a,b){return 0===a?0:a+b},l.prototype=p(k.prototype),l.prototype.constructor=l,m.prototype.move=function(a,b){switch(b=void 0!==b?b:this.lineHeight,a){case"+x":this.left+=b,this.right+=b;break;case"-x":this.left-=b,this.right-=b;break;case"+y":this.top+=b,this.bottom+=b;break;case"-y":this.top-=b,this.bottom-=b}},m.prototype.overlaps=function(a){return this.left<a.right&&this.right>a.left&&this.top<a.bottom&&this.bottom>a.top},m.prototype.overlapsAny=function(a){for(var b=0;b<a.length;b++)if(this.overlaps(a[b]))return!0;return!1},m.prototype.within=function(a){return this.top>=a.top&&this.bottom<=a.bottom&&this.left>=a.left&&this.right<=a.right},m.prototype.overlapsOppositeAxis=function(a,b){switch(b){case"+x":return this.left<a.left;case"-x":return this.right>a.right;case"+y":return this.top<a.top;case"-y":return this.bottom>a.bottom}},m.prototype.intersectPercentage=function(a){var b=Math.max(0,Math.min(this.right,a.right)-Math.max(this.left,a.left)),c=Math.max(0,Math.min(this.bottom,a.bottom)-Math.max(this.top,a.top)),d=b*c;return d/(this.height*this.width)},m.prototype.toCSSCompatValues=function(a){return{top:this.top-a.top,bottom:a.bottom-this.bottom,left:this.left-a.left,right:a.right-this.right,height:this.height,width:this.width}},m.getSimpleBoxPosition=function(a){var b=a.div?a.div.offsetHeight:a.tagName?a.offsetHeight:0,c=a.div?a.div.offsetWidth:a.tagName?a.offsetWidth:0,d=a.div?a.div.offsetTop:a.tagName?a.offsetTop:0;a=a.div?a.div.getBoundingClientRect():a.tagName?a.getBoundingClientRect():a;var e={left:a.left,right:a.right,top:a.top||d,height:a.height||b,bottom:a.bottom||d+(a.height||b),width:a.width||c};return e},o.StringDecoder=function(){return{decode:function(a){if(!a)return"";if("string"!=typeof a)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(a))}}},o.convertCueToDOMTree=function(a,b){return a&&b?g(a,b):null};var v=.05,w="sans-serif",x="1.5%";

o.processCues=function(a,b,c){function d(a){for(var b=0;b<a.length;b++)if(a[b].hasBeenReset||!a[b].displayState)return!0;return!1}if(!a||!b||!c)return null;for(;c.firstChild;)c.removeChild(c.firstChild);var e=a.document.createElement("div");if(e.style.position="absolute",e.style.left="0",e.style.right="0",e.style.top="0",e.style.bottom="0",e.style.margin=x,c.appendChild(e),d(b)){var f=[],g=m.getSimpleBoxPosition(e),h=Math.round(g.height*v*100)/100,i={font:h+"px "+w};!function(){for(var c,d,h=0;h<b.length;h++)d=b[h],c=new l(a,d,i),e.appendChild(c.div),n(a,c,g,f),d.displayState=c.div,f.push(m.getSimpleBoxPosition(c))}()}else for(var j=0;j<b.length;j++)e.appendChild(b[j].displayState)},o.Parser=function(a,b,c){c||(c=b,b={}),b||(b={}),this.window=a,this.vttjs=b,this.state="INITIAL",this.buffer="",this.decoder=c||new TextDecoder("utf8"),this.regionList=[]},o.Parser.prototype={reportOrThrowError:function(a){if(!(a instanceof b))throw a;this.onparsingerror&&this.onparsingerror(a)},parse:function(a){function g(){for(var a=k.buffer,b=0;b<a.length&&"\r"!==a[b]&&"\n"!==a[b];)++b;var c=a.substr(0,b);return"\r"===a[b]&&++b,"\n"===a[b]&&++b,k.buffer=a.substr(b),c}function h(a){var b=new d;if(e(a,function(a,c){switch(a){case"id":b.set(a,c);break;case"width":b.percent(a,c);break;case"lines":b.integer(a,c);break;case"regionanchor":case"viewportanchor":var e=c.split(",");if(2!==e.length)break;var f=new d;if(f.percent("x",e[0]),f.percent("y",e[1]),!f.has("x")||!f.has("y"))break;b.set(a+"X",f.get("x")),b.set(a+"Y",f.get("y"));break;case"scroll":b.alt(a,c,["up"])}},/=/,/\s/),b.has("id")){var c=new(k.vttjs.VTTRegion||k.window.VTTRegion);c.width=b.get("width",100),c.lines=b.get("lines",3),c.regionAnchorX=b.get("regionanchorX",0),c.regionAnchorY=b.get("regionanchorY",100),c.viewportAnchorX=b.get("viewportanchorX",0),c.viewportAnchorY=b.get("viewportanchorY",100),c.scroll=b.get("scroll",""),k.onregion&&k.onregion(c),k.regionList.push({id:b.get("id"),region:c})}}function i(a){var b=new d;e(a,function(a,d){switch(a){case"MPEGT":b.integer(a+"S",d);break;case"LOCA":b.set(a+"L",c(d))}},/[^\d]:/,/,/),k.ontimestampmap&&k.ontimestampmap({MPEGTS:b.get("MPEGTS"),LOCAL:b.get("LOCAL")})}function j(a){a.match(/X-TIMESTAMP-MAP/)?e(a,function(a,b){switch(a){case"X-TIMESTAMP-MAP":i(b)}},/=/):e(a,function(a,b){switch(a){case"Region":h(b)}},/:/)}var k=this;a&&(k.buffer+=k.decoder.decode(a,{stream:!0}));try{var l;if("INITIAL"===k.state){if(!/\r\n|\n/.test(k.buffer))return this;l=g();var m=l.match(/^WEBVTT([ \t].*)?$/);if(!m||!m[0])throw new b(b.Errors.BadSignature);k.state="HEADER"}for(var n=!1;k.buffer;){if(!/\r\n|\n/.test(k.buffer))return this;switch(n?n=!1:l=g(),k.state){case"HEADER":/:/.test(l)?j(l):l||(k.state="ID");continue;case"NOTE":l||(k.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(l)){k.state="NOTE";break}if(!l)continue;if(k.cue=new(k.vttjs.VTTCue||k.window.VTTCue)(0,0,""),k.state="CUE",-1===l.indexOf("-->")){k.cue.id=l;continue}case"CUE":try{f(l,k.cue,k.regionList)}catch(o){k.reportOrThrowError(o),k.cue=null,k.state="BADCUE";continue}k.state="CUETEXT";continue;case"CUETEXT":var p=-1!==l.indexOf("-->");if(!l||p&&(n=!0)){k.oncue&&k.oncue(k.cue),k.cue=null,k.state="ID";continue}k.cue.text&&(k.cue.text+="\n"),k.cue.text+=l;continue;case"BADCUE":l||(k.state="ID");continue}}}catch(o){k.reportOrThrowError(o),"CUETEXT"===k.state&&k.cue&&k.oncue&&k.oncue(k.cue),k.cue=null,k.state="INITIAL"===k.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var a=this;try{if(a.buffer+=a.decoder.decode(),(a.cue||"HEADER"===a.state)&&(a.buffer+="\n\n",a.parse()),"INITIAL"===a.state)throw new b(b.Errors.BadSignature)}catch(c){a.reportOrThrowError(c)}return a.onflush&&a.onflush(),this}},a.WebVTT=o}(this,this.vttjs||{})},{}],133:[function(a,b){"undefined"!=typeof b&&b.exports&&(this.VTTCue=this.VTTCue||a("./vttcue").VTTCue),function(a){a.VTTCue.prototype.toJSON=function(){var a={},b=this;return Object.keys(this).forEach(function(c){"getCueAsHTML"!==c&&"hasBeenReset"!==c&&"displayState"!==c&&(a[c]=b[c])}),a},a.VTTCue.create=function(b){if(!b.hasOwnProperty("startTime")||!b.hasOwnProperty("endTime")||!b.hasOwnProperty("text"))throw new Error("You must at least have start time, end time, and text.");var c=new a.VTTCue(b.startTime,b.endTime,b.text);for(var d in b)c.hasOwnProperty(d)&&(c[d]=b[d]);return c},a.VTTCue.fromJSON=function(a){return this.create(JSON.parse(a))}}(this)},{"./vttcue":134}],134:[function(){!function(a,b){function c(a){if("string"!=typeof a)return!1;var b=h[a.toLowerCase()];return b?a.toLowerCase():!1}function d(a){if("string"!=typeof a)return!1;var b=i[a.toLowerCase()];return b?a.toLowerCase():!1}function e(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)a[d]=c[d]}return a}function f(a,b,f){var h=this,i=/MSIE\s8\.0/.test(navigator.userAgent),j={};i?h=document.createElement("custom"):j.enumerable=!0,h.hasBeenReset=!1;var k="",l=!1,m=a,n=b,o=f,p=null,q="",r=!0,s="auto",t="start",u=50,v="middle",w=50,x="middle";return Object.defineProperty(h,"id",e({},j,{get:function(){return k},set:function(a){k=""+a}})),Object.defineProperty(h,"pauseOnExit",e({},j,{get:function(){return l},set:function(a){l=!!a}})),Object.defineProperty(h,"startTime",e({},j,{get:function(){return m},set:function(a){if("number"!=typeof a)throw new TypeError("Start time must be set to a number.");m=a,this.hasBeenReset=!0}})),Object.defineProperty(h,"endTime",e({},j,{get:function(){return n},set:function(a){if("number"!=typeof a)throw new TypeError("End time must be set to a number.");n=a,this.hasBeenReset=!0}})),Object.defineProperty(h,"text",e({},j,{get:function(){return o},set:function(a){o=""+a,this.hasBeenReset=!0}})),Object.defineProperty(h,"region",e({},j,{get:function(){return p},set:function(a){p=a,this.hasBeenReset=!0}})),Object.defineProperty(h,"vertical",e({},j,{get:function(){return q},set:function(a){var b=c(a);if(b===!1)throw new SyntaxError("An invalid or illegal string was specified.");q=b,this.hasBeenReset=!0}})),Object.defineProperty(h,"snapToLines",e({},j,{get:function(){return r},set:function(a){r=!!a,this.hasBeenReset=!0}})),Object.defineProperty(h,"line",e({},j,{get:function(){return s},set:function(a){if("number"!=typeof a&&a!==g)throw new SyntaxError("An invalid number or illegal string was specified.");s=a,this.hasBeenReset=!0}})),Object.defineProperty(h,"lineAlign",e({},j,{get:function(){return t},set:function(a){var b=d(a);if(!b)throw new SyntaxError("An invalid or illegal string was specified.");t=b,this.hasBeenReset=!0}})),Object.defineProperty(h,"position",e({},j,{get:function(){return u},set:function(a){if(0>a||a>100)throw new Error("Position must be between 0 and 100.");u=a,this.hasBeenReset=!0}})),Object.defineProperty(h,"positionAlign",e({},j,{get:function(){return v},set:function(a){var b=d(a);if(!b)throw new SyntaxError("An invalid or illegal string was specified.");v=b,this.hasBeenReset=!0}})),Object.defineProperty(h,"size",e({},j,{get:function(){return w},set:function(a){if(0>a||a>100)throw new Error("Size must be between 0 and 100.");w=a,this.hasBeenReset=!0}})),Object.defineProperty(h,"align",e({},j,{get:function(){return x},set:function(a){var b=d(a);if(!b)throw new SyntaxError("An invalid or illegal string was specified.");x=b,this.hasBeenReset=!0}})),h.displayState=void 0,i?h:void 0}var g="auto",h={"":!0,lr:!0,rl:!0},i={start:!0,middle:!0,end:!0,left:!0,right:!0};f.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)},a.VTTCue=a.VTTCue||f,b.VTTCue=f}(this,this.vttjs||{})},{}],135:[function(a,b){"undefined"!=typeof b&&b.exports&&(this.VTTRegion=a("./vttregion").VTTRegion),function(a){a.VTTRegion.create=function(b){var c=new a.VTTRegion;for(var d in b)c.hasOwnProperty(d)&&(c[d]=b[d]);return c},a.VTTRegion.fromJSON=function(a){return this.create(JSON.parse(a))}}(this)},{"./vttregion":136}],136:[function(){!function(a,b){function c(a){if("string"!=typeof a)return!1;var b=f[a.toLowerCase()];return b?a.toLowerCase():!1}function d(a){return"number"==typeof a&&a>=0&&100>=a}function e(){var a=100,b=3,e=0,f=100,g=0,h=100,i="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return a},set:function(b){if(!d(b))throw new Error("Width must be between 0 and 100.");a=b}},lines:{enumerable:!0,get:function(){return b},set:function(a){if("number"!=typeof a)throw new TypeError("Lines must be set to a number.");b=a}},regionAnchorY:{enumerable:!0,get:function(){return f},set:function(a){if(!d(a))throw new Error("RegionAnchorX must be between 0 and 100.");f=a}},regionAnchorX:{enumerable:!0,get:function(){return e},set:function(a){if(!d(a))throw new Error("RegionAnchorY must be between 0 and 100.");e=a}},viewportAnchorY:{enumerable:!0,get:function(){return h},set:function(a){if(!d(a))throw new Error("ViewportAnchorY must be between 0 and 100.");h=a}},viewportAnchorX:{enumerable:!0,get:function(){return g},set:function(a){if(!d(a))throw new Error("ViewportAnchorX must be between 0 and 100.");g=a}},scroll:{enumerable:!0,get:function(){return i},set:function(a){var b=c(a);if(b===!1)throw new SyntaxError("An invalid or illegal string was specified.");i=b}}})}var f={"":!0,up:!0};a.VTTRegion=a.VTTRegion||e,b.VTTRegion=e}(this,this.vttjs||{})},{}],137:[function(a){!function(b,c){"use strict";function d(a,b,d){return c.registerComponent(a,c.extend(c.getComponent(b),d)),c.getComponent(a)}function e(a){var b=a&&a.match(/(\d+)p/),c=b&&parseInt(b[1],10);return c>=2160?"4k":c>=720?"hd":null}function f(a){return a.tech_&&(a.tech_.flashlsProvider||a.tech_.hlsProvider)}function g(a){var b=[],c=a.textTracks();if(!c||!c.length)return b;for(var d=0;d<c.length;d++)("subtitles"==c[d].kind||"captions"==c[d].kind)&&b.push(c[d]);return b}function h(a){return a?a.label||a.language||a.kind:"Off"}function i(a){return"number"!=typeof a?a:a.toFixed(3)}function j(a){var c=b.hola_cdn;return c&&c.get_wrapper()&&(!a||!!c._get_bws())}function k(a,b){try{c.utils.localStorage.setItem(a,b)}catch(d){}}function l(a){try{return c.utils.localStorage.getItem(a)}catch(b){return null}}function m(){return b.top==b?location.href:document.referrer}function n(a,b){a.one("loadeddata",function(){return"Html5"==a.techName_?void a.currentTime(b):void a.on("timeupdate",function c(){a.currentTime()&&(a.off("timeupdate",c),a.currentTime(b))})})}function o(){return Object.keys(c.getPlayers()).length>1}a("@hola.org/videojs-utils");var p=a("clipboard"),q=a("lodash/find"),r=a("videojs-vtt.js"),s='<svg viewBox="0 0 36 36"><path d="m 23.94,18.78 c .03,-0.25 .05,-0.51 .05,-0.78 0,-0.27 -0.02,-0.52 -0.05,-0.78 l 1.68,-1.32 c .15,-0.12 .19,-0.33 .09,-0.51 l -1.6,-2.76 c -0.09,-0.17 -0.31,-0.24 -0.48,-0.17 l -1.99,.8 c -0.41,-0.32 -0.86,-0.58 -1.35,-0.78 l -0.30,-2.12 c -0.02,-0.19 -0.19,-0.33 -0.39,-0.33 l -3.2,0 c -0.2,0 -0.36,.14 -0.39,.33 l -0.30,2.12 c -0.48,.2 -0.93,.47 -1.35,.78 l -1.99,-0.8 c -0.18,-0.07 -0.39,0 -0.48,.17 l -1.6,2.76 c -0.10,.17 -0.05,.39 .09,.51 l 1.68,1.32 c -0.03,.25 -0.05,.52 -0.05,.78 0,.26 .02,.52 .05,.78 l -1.68,1.32 c -0.15,.12 -0.19,.33 -0.09,.51 l 1.6,2.76 c .09,.17 .31,.24 .48,.17 l 1.99,-0.8 c .41,.32 .86,.58 1.35,.78 l .30,2.12 c .02,.19 .19,.33 .39,.33 l 3.2,0 c .2,0 .36,-0.14 .39,-0.33 l .30,-2.12 c .48,-0.2 .93,-0.47 1.35,-0.78 l 1.99,.8 c .18,.07 .39,0 .48,-0.17 l 1.6,-2.76 c .09,-0.17 .05,-0.39 -0.09,-0.51 l -1.68,-1.32 0,0 z m -5.94,2.01 c -1.54,0 -2.8,-1.25 -2.8,-2.8 0,-1.54 1.25,-2.8 2.8,-2.8 1.54,0 2.8,1.25 2.8,2.8 0,1.54 -1.25,2.8 -2.8,2.8 l 0,0 z"/></svg>',t='<svg viewBox="-12 -12 72 72"><path d="M40 8H8c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h32c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zM8 24h8v4H8v-4zm20 12H8v-4h20v4zm12 0h-8v-4h8v4zm0-8H20v-4h20v4z"/></svg>',u=c.getComponent("Menu");d("PopupMenu","Menu",{className:"vjs-rightclick-popup",popped:!1,constructor:function(a,d){function e(a){for(var c=a;c=c.parentElement;){if(!c)return;var d=b.getComputedStyle(c);if("visible"!=d.overflowX||"visible"!=d.overflowY)return c}}function f(a){if(a.preventDefault(),h.popped)return void h.hide();h.show(),h.check_items();var c=h.el(),d=a.clientX,f=a.clientY,g=b.innerWidth,i=b.innerHeight,j=e(c);if(j){var k=j.getBoundingClientRect();g=Math.min(g,k.right),i=Math.min(i,k.bottom)}var l=d+c.offsetWidth-g+5;l=Math.max(0,l);var m=f+c.offsetHeight-i+5;m=Math.max(0,m);var n=h.player().el().getBoundingClientRect();c.style.left=Math.max(0,d-n.left-l)+"px",c.style.top=Math.max(0,f-n.top-m)+"px"}u.call(this,a,d);var g=a;this.addClass(this.className),this.hide();var h=this,i=this.options_;h.menuEnabled=!0,this.addChild(new I(a,{label:"Powered by Hola Player"})),i.copy_url!==!1&&this.addChild(new P(a,{label:"Copy video URL",url:i.copy_url})),i.copy_url===!1||i.copy_url_with_time===!1||o()&&!i.copy_url||this.addChild(new P(a,{url:i.copy_url,label:"Copy video URL at current time",time:!0})),i.embed_code&&this.addChild(new N(a,{label:"Copy embed code",text:i.embed_code})),i.debugging&&(this.addChild(new L(a,{label:"Download log"})),this.addChild(new O(a,{label:"Copy debug info"}))),i.report&&(i.report=c.mergeOptions({label:"Report playback issue"},i.report),this.addChild(new K(a,i.report))),i.info&&(i.info=c.mergeOptions({label:"Stats for nerds"},i.info),this.addChild(new Q(a,i.info))),i.graph&&(i.graph=c.mergeOptions({label:"CDN overlay"},i.graph),this.addChild(new M(a,i.graph))),i.about&&this.addChild(new J(a,{href:"https://holacdn.com/player",label:"About Hola Player"})),g.on("contextmenu",f),g.on(["tap","click"],function(a){return h.popped?(h.hide(),a.stopPropagation(),a.preventDefault(),!1):void 0}),c.on(document,["tap","click"],function(){h.popped&&h.hide()}),g.on("hola.wrapper_attached",this.check_items.bind(this)),g.on("hola.wrapper_detached",this.check_items.bind(this)),this.children().forEach(function(a){a.on(["tap","click"],function(){h.hide()})}),a.enablePopupMenu=function(){h.menuEnabled||(g.off("contextmenu"),g.on("contextmenu",f),h.menuEnabled=!0)},a.disablePopupMenu=function(){h.menuEnabled&&(g.off("contextmenu"),g.on("contextmenu",function(a){a.preventDefault()}),h.menuEnabled=!1)}},show:function(){this.removeClass("vjs-hidden"),this.popped=!0},hide:function(){this.addClass("vjs-hidden"),this.popped=!1},check_items:function(){this.children().forEach(function(a){a.is_visible&&a.toggleClass("vjs-hidden",!a.is_visible())})}});var v=d("SubMenu","Menu",{addToMain:!0,constructor:function(a,b,c){u.call(this,a,b),this.items=[],this.parent=c,this.createMenuItem(),this.createTitleItem(),this.className&&this.addClass(this.className),this.update()},createEl:function(){var a=E.prototype.createEl.call(this,"div",{className:"vjs-menu-content"});return a.setAttribute("role","menu"),a},createTitleItem:function(){if(this.title){var a=this,b=new H(this.player_,{label:this.title});b.addClass("vjs-submenu-title"),b.on(["tap","click"],function(){a.parent.back()}),this.addChild(b),this.titleItem=b}},createMenuItem:function(){if(this.title&&this.addToMain){var a=this.player(),b=this,d=this.menuItem=new H(a,{label:this.title});d.addClass("vjs-menu-item-next");var e=c.createEl("span",{className:"vjs-menu-item-content"});d.minorLabel=c.createEl("span",{className:"vjs-minor-label"}),d.contentLabel=c.createEl("span"),e.appendChild(d.contentLabel),e.appendChild(d.minorLabel),d.el().insertBefore(e,d.el().firstChild),d.on(["tap","click"],function(){b.parent.next(b)})}},update:function(){var a=this;this.items.forEach(function(b){a.removeChild(b)}),this.items=[],this.createItems&&this.createItems(),this.items.forEach(function(b){a.addChild(b),a.handleItemClick&&b.on(["tap","click"],a.handleItemClick.bind(a,b))})}}),w=d("QualitySubMenu","SubMenu",{className:"vjs-quality-submenu",title:"Quality",constructor:function(a,b,c){var d=this,e=a.tech_;v.call(this,a,b,c),this.one(a,"play",this.updateSelected),this.on(a,"resolutionchange",this.updateSelected),this.updateSelected(),e&&(e.on("loadedqualitydata",function(a,b){d.updateQuality(b)}),e.quality_data&&this.updateQuality(e.quality_data))},createItems:function(){var a=this.player(),b=this.options_.quality,d=b&&b.sources?b.sources:a.options_.sources;if(b===!1||!d||d.length<2)return void this.menuItem.hide();this.menuItem.show();for(var e=0;e<d.length;e++){var f=d[e].label||(1==d.length?"Auto":this.localize("Source")+" "+(e+1)),g=new x(a,c.mergeOptions(d[e],{label:f,callback:b.callback}));this.items.push(g)}},handleItemClick:function(a){var c=this.player();if(this.parent.settings_button.unpressButton(),!a.hasClass("vjs-selected")){var d,e=a.options_,f=e.level_id,g="beforeresolutionchange";try{d=new b.CustomEvent(g)}catch(h){d=document.createEvent("CustomEvent"),d.initCustomEvent(g,!0,!0,{})}if(c.trigger(d,e),!d.defaultPrevented){if(void 0!==f)return e.callback&&e.callback(f),void c.trigger("resolutionchange");var i=c.currentTime(),j=c.paused();c.pause(),c.src(e.src),c.ready(function(){n(c,i),c.trigger("resolutionchange"),j||(c.load(),c.play())})}}},updateSelected:function(){var a=this,c=this.player_,d=c.cache_.src,f=b.hola_cdn,g=f&&f.wrapper&&q(f.wrapper,function(a){return a.player&&a.player.vjs==c});g&&g.player&&(d=g.player.get_url());var h,i=this.items;i.forEach(function(b){var c=b.options_.src?b.options_.src==d:b.options_.level_id==a.selectedLevel;b.selected(c),c&&(h=b.options_.label)});var j;if(-1==this.selectedLevel&&void 0!==this.currentLevel){var k=(this.options_.quality||{}).sources||[],l=q(k,function(b){return b.level_id==a.currentLevel});j=l?l.label:""}var m=e(j||h);this.menuItem.contentLabel.innerHTML=this.localize(h)||"",this.menuItem.minorLabel.innerHTML=this.localize(j)||"",this.menuItem.toggleClass("vjs-quality-hd","hd"==m),this.menuItem.toggleClass("vjs-quality-4k","4k"==m),this.parent.settings_button.toggleClass("vjs-quality-hd","hd"==m),this.parent.settings_button.toggleClass("vjs-quality-4k","4k"==m)},levelsChanged:function(a){var b=(this.options_.quality||{}).sources||[];if(b.length!=a.length)return!0;for(var c=0;c<a.length;c++)if(b[c].level_id!=a[c].id)return!0;return!1},updateQuality:function(a){var b=[],c=a.callback,d=a.quality.list.slice().sort(function(a,b){return-1==b.id?-1:-1==a.id?1:b.bitrate-a.bitrate});this.selectedLevel=a.quality.selected,this.currentLevel=a.quality.current;var e=this.options_.quality=this.options_.quality||{};(this.levelsChanged(d)||c!=e.callback)&&(d.forEach(function(a){b.push({level_id:a.id,label:a.label})}),e.sources=b,e.callback=c,this.update()),this.updateSelected()}}),x=d("QualityMenuItem","MenuItem",{constructor:function(a,b){b=c.mergeOptions({selectable:!0},b),H.call(this,a,b);var d;(d=e(b.label))&&this.addClass("vjs-quality-"+d),b["default"]&&this.player_.src(b.src)},handleClick:function(){}}),y=d("SpeedSubMenu","SubMenu",{className:"vjs-speed-submenu",title:"Speed",values:[.25,.5,.75,1,1.25,1.5,2],constructor:function(a,b,c){this.supported=a.tech_&&a.tech_.featuresPlaybackRate,v.call(this,a,b,c),this.on(a,"ratechange",this.handleRateChange);var d=parseFloat(l("vjs5_speed"));this.supported&&-1!=this.values.indexOf(d)&&a.playbackRate(d),this.handleRateChange()},createItems:function(){var a=this,b=this.player(),c=this.supported?this.values:[1];c.forEach(function(c){var d=new H(b,{label:1==c?"Normal":c,selectable:!0,rate:c});a.items.push(d)})},handleItemClick:function(a){var b=this.player(),c=a.options_.rate;this.parent.back(),c!=b.playbackRate()&&b.playbackRate(c),k("vjs5_speed",c)},handleRateChange:function(){var a=this.player().playbackRate();this.menuItem.contentLabel.innerHTML=1==a?this.localize("Normal"):a,this.items.forEach(function(b){b.selected(b.options_.rate==a)})}}),z=d("CaptionsSubMenu","SubMenu",{className:"vjs-captions-submenu",title:"Subtitles/CC",constructor:function(a,b,d){v.call(this,a,b,d);var e=a.textTracks();if(e&&e.on){this.optionsMenu=new A(a,b,d),this.parent.addSubMenu(this.optionsMenu);var f=c.createEl("div",{className:"vjs-minor-label",innerHTML:this.localize("Options")});this.titleItem.el().appendChild(f),this.on(f,["touchstart","touchend","click"],function(a){a.preventDefault(),a.stopPropagation(),("click"==a.type||"touchend"==a.type)&&d.next(this.optionsMenu)}),this.on(e,"addtrack",this.update),this.on(e,"removetrack",this.update),this.on(e,"change",this.handleTrackChange)}},createItems:function(){var a=this.player(),b=g(a);if(!b.length)return void this.menuItem.hide();this.menuItem.show();for(var c=-1;c<b.length;c++){var d=b[c],e=new H(a,{label:h(d),selectable:!0,track:d});this.items.push(e)}this.handleTrackChange()},handleItemClick:function(a){for(var b=this.player(),c=b.textTracks(),d=0;d<c.length;d++)c[d].mode=c[d]==a.options_.track?"showing":"disabled";this.parent.back(),this.handleTrackChange()},handleTrackChange:function(){var a=q(this.items,function(a){return a.options_.track&&"showing"==a.options_.track.mode})||q(this.items,function(a){return!a.options_track});this.items.forEach(function(b){b.selected(b==a)}),this.menuItem.contentLabel.innerHTML=a?a.options_.label:""}}),A=d("CaptionsOptionsMenu","SubMenu",{className:"vjs-captions-options-submenu",title:"Options",addToMain:!1,dict:{font:[{value:"monospaceSerif",text:"Monospace Serif"},{value:"proportionalSerif",text:"Proportional Serif"},{value:"monospaceSansSerif",text:"Monospace Sans-Serif"},{value:"proportionalSansSerif",text:"Proportional Sans-Serif"},{value:"casual",text:"Casual"},{value:"script",text:"Script"},{value:"smallcaps",text:"Small Caps"}],size:[{value:"0.50",text:"50%"},{value:"0.75",text:"75%"},{value:"1.00",text:"100%"},{value:"1.50",text:"150%"},{value:"2.00",text:"200%"},{value:"3.00",text:"300%"},{value:"4.00",text:"400%"}],opacity:[{value:"0.00",text:"0%"},{value:"0.25",text:"25%"},{value:"0.50",text:"50%"},{value:"0.75",text:"75%"},{value:"1.00",text:"100%"}],color:[{value:"#FFF",text:"White"},{value:"#000",text:"Black"},{value:"#F00",text:"Red"},{value:"#0F0",text:"Green"},{value:"#00F",text:"Blue"},{value:"#FF0",text:"Yellow"},{value:"#F0F",text:"Magenta"},{value:"#0FF",text:"Cyan"}],edge:[{value:"none",text:"None"},{value:"raised",text:"Raised"},{value:"depressed",text:"Depressed"},{value:"uniform",text:"Uniform"},{value:"dropshadow",text:"Drop shadow"}]},constructor:function(a,b,c){var d=this.dict;this.params=[{key:"fontFamily",text:"Font family",dict:d.font,def:3},{key:"color",text:"Font color",dict:d.color,def:0},{key:"fontPercent",text:"Font size",dict:d.size,def:2},{key:"textOpacity",text:"Font opacity",dict:d.opacity,def:4},{key:"backgroundColor",text:"Background color",dict:d.color,def:1},{key:"backgroundOpacity",text:"Background opacity",dict:d.opacity,def:3},{key:"windowColor",text:"Window color",dict:d.color,def:1},{key:"windowOpacity",text:"Window opacity",dict:d.opacity,def:0},{key:"edgeStyle",text:"Text edge style",dict:d.edge,def:0}],this.reset(),this.load(),v.call(this,a,b,c),this.selectMenu=new B(a,b,c),this.on(this.selectMenu,"selected",this.handleValueChange),this.parent.addSubMenu(this.selectMenu);var e=a.getChild("textTrackSettings");a.removeChild(e),e.dispose(),a.textTrackSettings=this},save:function(){k("vjs5_captions_options",JSON.stringify(this.getValues()))},load:function(){var a;try{a=JSON.parse(l("vjs5_captions_options"))}catch(b){}a&&this.params.forEach(function(b){var c=q(b.dict,function(c){return c.value==a[b.key]});c&&(b.value=c)})},reset:function(){this.params.forEach(function(a){a.value=a.dict[a.def]})},getValues:function(){var a={};return this.params.forEach(function(b){a[b.key]=b.value.value}),a},createItems:function(){var a=this.player,b=this.items;this.params.forEach(function(d){var e=new H(a,{label:d.text});e.param=d,e.addClass("vjs-menu-item-next");var f=c.createEl("span",{className:"vjs-menu-item-content",innerHTML:e.localize(d.value.text)});e.contentLabel=f,e.el().insertBefore(f,e.el().firstChild),b.push(e)}),b.push(new H(a,{label:"Reset",reset:!0}))},handleItemClick:function(a){if(a.options_.reset)return this.reset(),this.update(),void this.changed();this.currentItem=a;var b=a.param;this.selectMenu.show({title:b.text,dict:b.dict,selected:b.value})},handleValueChange:function(a,b){this.currentItem.param.value=b,this.currentItem.contentLabel.innerHTML=b.text,this.changed()},changed:function(){this.save();var a=this.player().textTrackDisplay;if(a.updateDisplay(),this.timeout&&this.clearTimeout(this.timeout),!a.el().textContent){var b=this.localize("Subtitles will look like this"),c={activeCues:[new r.VTTCue(0,0,b)]};a.updateForTrack(c),this.timeout=this.setTimeout(function(){a.updateDisplay()},3e3)}}}),B=d("SelectValueMenu","SubMenu",{className:"vjs-select-value-submenu",addToMain:!1,dict:[],show:function(a){this.title=a.title,this.titleItem&&this.removeChild(this.titleItem),this.createTitleItem(),this.dict=a.dict,this.update(),this.items.forEach(function(b){b.selected(b.value==a.selected)}),this.parent.next(this)},createItems:function(){var a=this.items,b=this.player();this.dict.forEach(function(c){var d=new H(b,{label:c.text,selectable:!0});d.value=c,a.push(d)})},handleItemClick:function(a){this.trigger("selected",a.value),this.items.forEach(function(b){b.selected(b==a)})}}),C=d("SettingsMenu","Menu",{className:"vjs-settings-menu",history:[],constructor:function(a,b,c){u.call(this,a,b),this.settings_button=c,this.addClass(this.className),this.update(),this.on(["tap","click","touchstart","touchend"],function(a){a.stopPropagation()})},createEl:function(){var a=E.prototype.createEl.call(this,"div",{className:"vjs-menu"});return a.setAttribute("role","presentation"),a},update:function(){this.children().forEach(this.removeChild.bind(this)),this.createItems()},addSubMenu:function(a){this.addChild(a),a.menuItem&&this.mainMenu.addChild(a.menuItem)},createItems:function(){this.mainMenu=new v(this.player_,this.options_,this),this.mainMenu.addClass("vjs-main-submenu"),this.addChild(this.mainMenu);for(var a=[y,z,w],b=0;b<a.length;b++)this.addSubMenu(new a[b](this.player_,this.options_,this));this.selectMain(!0)},selectMain:function(a){this.history=[],this.setActive(this.mainMenu,a)},show:function(a){if(a)return this.el_.style.height="",this.el_.style.width="",this.selectMain(!0),void this.addClass("vjs-lock-showing");var b=this;this.el_.style.opacity="0",this.setTimeout(function(){this.el_.style.opacity="",b.removeClass("vjs-lock-showing")},100)},getSize:function(a){return a=a||this.el_,{width:a.offsetWidth,height:a.offsetHeight}},setSize:function(a){this.el_.style.height=a?a.height+"px":"",this.el_.style.width=a?a.width+"px":""},setActive:function(a,c){if(!c&&b.requestAnimationFrame){var d=a.el();d.style.maxHeight=this.player().el().offsetHeight-100+"px";var e=this,f=this.getSize(d);this.setSize(this.getSize()),b.requestAnimationFrame(function(){e.addClass("vjs-size-transition"),b.requestAnimationFrame(function(){var a=function(){e.removeClass("vjs-size-transition"),e.setSize(),e.clearTimeout(b)};e.setSize(f),e.one("transitionend",a);var b=e.setTimeout(a,300)})})}this.active=a,this.children().forEach(function(b){b.toggleClass("vjs-active-submenu",b==a)})},next:function(a){this.history.push(this.active),this.setActive(a)},back:function(){this.setActive(this.history.pop()||this.mainMenu)}}),D=c.getComponent("MenuButton");d("SettingsButton","MenuButton",{controlText_:"Settings",update:function(){var a=this.player_,b=new C(a,this.options_,this);this.menu&&a.removeChild(this.menu),this.menu=b,a.addChild(b),this.buttonPressed_=!1,this.el_.setAttribute("aria-expanded","false"),this.items&&!this.items.length?this.hide():this.items&&this.items.length>1&&this.show()},createEl:function(){var a=D.prototype.createEl.call(this);return this.icon_=c.createEl("div",{className:"vjs-button-icon",innerHTML:s}),a.insertBefore(this.icon_,a.firstChild),a},buildCSSClass:function(){return D.prototype.buildCSSClass.call(this)+" vjs-settings-button"},handleClick:function(){this.buttonPressed_?this.unpressButton():this.pressButton()},updateState:function(){this.player_.toggleClass("vjs-settings-expanded",this.buttonPressed_),this.el_.setAttribute("aria-expanded",this.buttonPressed_),this.menu.show(this.buttonPressed_)},unpressButton:function(){this.enabled_&&(this.buttonPressed_=!1,this.updateState(),this.el_.focus(),this.clearInterval(this.activityInterval),this.clickListener&&(c.off(document,["tap","click"],this.clickListener),this.player_.off(["tap","click"],this.clickListener),this.clickListener=null))},pressButton:function(){if(this.enabled_){this.buttonPressed_=!0,this.updateState(),this.menu.focus(),this.activityInterval=this.setInterval(this.player_.reportUserActivity.bind(this.player_),250);var a=this;this.setTimeout(function(){a.clickListener=a.unpressButton.bind(a),c.on(document,["tap","click"],this.clickListener),a.player_.on(["tap","click"],this.clickListener)})}},tooltipHandler:function(){return this.icon_}});var E=c.getComponent("Component"),F=d("Overlay","Component",{constructor:function(a,b){E.call(this,a,b),this.hide()},createEl:function(a,b){var d=this.options_["class"];d=d?" "+d:"";var e=E.prototype,f=e.createEl.call(this,"div",c.mergeOptions({className:"vjs-info-overlay"+d},b));return this.createContent(f),f},createContent:function(){}});d("InfoOverlay","Overlay",{constructor:function(a,b){this.info_data={duration:{units:"sec",title:"Duration",get:function(a){return i(a.duration())}},position:{units:"sec",title:"Position",get:function(a){return i(a.currentTime())}},buffered:{units:"sec",title:"Current buffer",get:function(a){var b=a.buffered(),c=a.currentTime();if(b&&b.length)for(var d=0;d<b.length;d++)if(b.start(d)<=c&&b.end(d)>=c)return i(b.end(d)-c);return"--"}},downloaded:{units:"sec",title:"Downloaded",get:function(a){var b=a.buffered(),c=0;if(b&&b.length)for(var d=0;d<b.length;d++)c+=b.end(d)-b.start(d);return i(c)}}},F.call(this,a,b)},createContent:function(a){function b(a,b){b=b?c.mergeOptions(b):b;var e=E.prototype;return e.createEl.call(d,a,b)}var d=this,e=this.player_,f=b("div",{className:"vjs-info-overlay-title",innerHTML:this.localize("Technical info")}),g=b("div",{className:"vjs-info-overlay-x"}),h=this.toggle.bind(this,null,!0);g.addEventListener("click",h),g.addEventListener("touchend",h);var i,j,k=b("div",{className:"vjs-info-overlay-content"}),l=b("ul",{className:"vjs-info-overlay-list"});for(var m in this.info_data)i=b("li",{className:"vjs-info-overlay-list-item"}),j=this.localize(this.info_data[m].title),this.info_data[m].units&&(j+=" ["+this.localize(this.info_data[m].units)+"]"),j+=": ",i.appendChild(b("strong",{innerHTML:j})),this.info_data[m].el=b("span"),i.appendChild(this.info_data[m].el),l.appendChild(i);k.appendChild(l),a.appendChild(f),a.appendChild(g),a.appendChild(k),this.update(),e.on("timeupdate",function(){d.update()}),setInterval(function(){d.update()},1e3)},update:function(){var a=this.player_,b=this.info_data;for(var c in b)b[c].el.innerHTML=b[c].get(a)},toggle:function(a,b){return a&&(this.last_caller=a),this.visible||b?(this.visible=!1,this.last_caller&&this.last_caller.selected(!1),void this.addClass("vjs-hidden")):(this.update(),this.visible=!0,void this.removeClass("vjs-hidden"))}}),d("NotifyOverlay","Overlay",{constructor:function(a,b){F.call(this,a,b),this.addClass("vjs-notify-overlay")},createContent:function(a){function b(a,b){b=b?c.mergeOptions(b):b;var e=E.prototype;return e.createEl.call(d,a,b)}var d=this,e=b("div",{className:"vjs-notify-overlay-title",innerHTML:this.localize("Issue report sent")}),f=b("div",{className:"vjs-notify-overlay-content",innerHTML:this.localize("Thank you!")});a.appendChild(e),a.appendChild(f)},flash:function(){if(!this.visible){this.visible=!0,this.removeClass("vjs-hidden");var a=this;setTimeout(function(){a.addClass("vjs-notify-flash")},50),setTimeout(function(){a.visible=!1,a.removeClass("vjs-notify-flash"),a.addClass("vjs-hidden")},3500)}}});var G=c.getComponent("ClickableComponent"),H=c.getComponent("MenuItem");H.prototype.createEl=function(a,b,c){return b=Object.assign({className:"vjs-menu-item",innerHTML:'<span class="vjs-menu-item-label">'+this.localize(this.options_.label)+"</span>",tabIndex:-1},b),G.prototype.createEl("li",b,c)};var I=d("PoweredBy","MenuItem",{constructor:function(a,c){c.label+=" "+b.hola_player.VERSION,
H.call(this,a,c),this.addClass("vjs-powered-by")}}),J=d("MenuItemLink","MenuItem",{createEl:function(a,b){var d=H.prototype,e=this.localize(this.options_.label),f=d.createEl.call(this,"li",c.mergeOptions({className:"vjs-menu-item vjs-menu-item-link",innerHTML:""},b));return this.link=E.prototype.createEl("a",{className:"vjs-menu-link",innerHTML:this.localize(e)},{target:"_blank",href:this.options_.href||"#"}),f.appendChild(this.link),this.link.addEventListener("touchstart",function(a){a.stopPropagation()}),f},handleClick:function(a){a.stopPropagation()}}),K=d("ReportButton","MenuItem",{is_visible:j,handleClick:function(){this.player_.trigger({type:"problem_report"});var a;(a=this.player_.getChild("NotifyOverlay"))&&a.flash(),this.selected(!1)}}),L=d("LogButton","MenuItem",{is_visible:j,handleClick:function(){this.player_.trigger({type:"save_logs"}),this.selected(!1)}}),M=d("GraphButton","MenuItem",{is_visible:j.bind(null,!0),handleClick:function(){this.player_.trigger({type:"cdn_graph_overlay"}),this.selected(!1)}}),N=d("CopyButton","MenuItem",{constructor:function(a,b){H.call(this,a,b),this.clipboard=new p(this.el_,{text:this.getText.bind(this)}),this.on("tap",function(a){this.clipboard.onClick({currentTarget:a.target})})},getText:function(){return this.options_.text},dispose:function(){this.clipboard.destroy(),H.prototype.dispose.call(this)}}),O=d("CopyLogButton","CopyButton",{getText:function(){var a=this.player();return a.hola_logs?a.hola_logs():"Can't find hola_logs method!"},is_visible:j}),P=d("CopyUrlButton","CopyButton",{getText:function(){var a=this.options_.url||m();if(this.options_.time){var b=Math.floor(this.player().currentTime()),c=/(#(?:.*&)?t=)(\d*)/;a.match(c)?a=a.replace(c,"$1"+b):a+=(-1!=a.indexOf("#")?"&t=":"#t=")+b}return a}}),Q=d("InfoButton","MenuItem",{handleClick:function(){var a;(a=this.player_.getChild("InfoOverlay"))&&a.toggle(this)}}),R=c.getComponent("Button");d("CaptionsToggle","Button",{controlText_:"Subtitles/closed captions",constructor:function(a,b){R.call(this,a,b),this.addClass("vjs-captions-toggle"),this.hide();var c=a.textTracks();c&&c.on&&(this.on(c,"addtrack",this.update),this.on(c,"removetrack",this.update),this.on(c,"change",this.update),this.update())},createEl:function(){var a=R.prototype.createEl.call(this);return this.icon_=c.createEl("div",{className:"vjs-button-icon",innerHTML:t}),a.insertBefore(this.icon_,a.firstChild),a},handleClick:function(){if(this.track){var a="showing"!=this.track.mode;this.track.mode=a?"showing":"disabled",a&&this.showHint()}},showHint:function(){var a;if(a=this.track){var b,c=this.player().textTrackDisplay;this.timeout&&this.clearTimeout(this.timeout);var d=[new r.VTTCue(0,0,h(a)),new r.VTTCue(0,0,this.localize("press %s to configure"))];for(b=0;b<d.length;b++)d[b].align="start",d[b].position=28,d[b].line=2+b;for(b=0;b<a.activeCues.length;b++)d.push(a.activeCues[b]);c.updateForTrack({activeCues:d});var e=s.replace(/viewBox="[^"]*"/,'viewBox="6 6 24 24"');d[1].displayState.innerHTML=d[1].displayState.innerHTML.replace("%s",e),this.timeout=this.setTimeout(function(){c.updateDisplay()},3e3)}},update:function(){var a=g(this.player());a.length?this.show():this.hide(),this.track&&-1==a.indexOf(this.track)&&(this.track=null);var b=q(a,function(a){return"showing"==a.mode});b&&(this.track=b),this.track||(this.track=q(a,function(a){return a["default"]})||a[0]),this.toggleClass("vjs-pressed",this.track&&"showing"==this.track.mode)}}),c.plugin("settings",function(a){var b=this;a=c.mergeOptions({info:!0,report:!0,quality:!1,volume:{level:1,mute:!!b.options_.muted},debugging:!0,about:!0},a),b.ready(function(){function d(a,b){var c,d,e;for(a=a.filter(function(a){return a.src}),c=0;c<a.length;c++)a[c].label||(a[c].label=a[c].type),d||void 0===a[c]["default"]||(d=a[c]),b&&b==a[c].label&&void 0===a[c]["prevent-default"]&&(e=a[c]);for(c=0;c<a.length;c++)a[c]["default"]=e?a[c]===e:d?a[c]===d:!1;return a}if(a.quality===!0&&(a.quality={sources:b.options_.sources}),a.quality&&!f(b)){var e="vjs5_quality";a.quality.sources=d(a.quality.sources,l(e)),b.on("resolutionchange",function(){for(var c=a.quality.sources,d=0;d<c.length;d++)if(b.currentSrc()==c[d].src){k(e,c[d].label);break}})}if(b.controlBar.addChild("SettingsButton",c.mergeOptions(a)),b.controlBar.addChild("CaptionsToggle",c.mergeOptions(a)),a.info&&b.addChild("InfoOverlay"),a.report&&b.addChild("NotifyOverlay"),a.volume){var g="vjs5_volume",h="vjs5_mute";b.ready(function(){if(!a.volume.override_local_storage){var c,d;null!=(c=l(g))&&(a.volume.level=c),null!=(d=l(h))&&(a.volume.mute="true"==d)}b.volume(a.volume.level),b.muted(a.volume.mute)}),b.on("volumechange",function(){k(g,b.volume()),k(h,b.muted())})}b.addChild("PopupMenu",c.mergeOptions(a));var i,j=m();!o()&&(i=j.match(/#(?:.*&)?t=(\d*)/))&&n(b,parseInt(i[1],10))})})}(window,window.videojs)},{"@hola.org/videojs-utils":1,clipboard:3,"lodash/find":105,"videojs-vtt.js":131}]},{},[137]),function(){"use strict";var a=function(){var b,c,d,e,f;b=Array.prototype.slice.call(arguments),c=b.shift()||{};for(d in b){e=b[d];for(f in e)e.hasOwnProperty(f)&&(c[f]="object"==typeof e[f]?a(c[f],e[f]):e[f])}return c},b=function(a,b){return function(c){return window.getComputedStyle?window.getComputedStyle(a,b)[c]:a.currentStyle[c]}},c=function(a){return"HTML"!==a.nodeName&&"static"===b(a)("position")?c(a.offsetParent):a},d=function(){return window.pageXOffset?{x:window.pageXOffset,y:window.pageYOffset}:{x:document.documentElement.scrollLeft,y:document.documentElement.scrollTop}},e=function(b){var c={};return Object.keys(b).forEach(function(d){var e;if(e=b[d].sprites){if(delete b[d].sprites,!e.position&&e.interval&&e.count){e.position=[];for(var f=0;f<e.count;f++)e.position.push(+d+f*e.interval)}var g=e.rows||1,h=Math.ceil(e.position.length/g);e.position.forEach(function(f,g){var i=g%h,j=Math.floor(g/h);b[f]=b[f]||{},b[f]=a({},c,b[f],{width:e.width,height:e.height,style:{left:"-"+e.width*i+"px",top:"-"+e.height*j+"px"}}),c=b[d]})}}),b},f=function(a){if(-1!==navigator.userAgent.toLowerCase().indexOf("android")){var b=a.controlBar.progressControl,c=function(){b.addClass("fake-active")},d=function(){b.removeClass("fake-active")};b.on("touchstart",c),b.on("touchend",d),b.on("touchcancel",d)}},g=function(a,b){var c=document.createElement("base");c.href=a;var d=document.getElementsByTagName("head")[0];d.insertBefore(c,d.firstChild);var e=document.createElement("a");e.href=b;var f=e.href;return d.removeChild(c),f},h=function(a,b){for(var c={},d=a.cues,e=0;e<d.length;e++){var f=d[e],h=c[f.startTime]={src:g(b,f.text.split("#")[0])},i=f.text.split("#")[1];if(i&&"xywh="===i.substring(0,5)){var j=i.substring(5).split(",");h.width=j[2],h.height=j[3],h.style={left:"-"+j[0]+"px",top:"-"+j[1]+"px"}}}return c},i=function(a,b){if(a._thumbs)return void(a._thumbs.settings=b);a._thumbs={settings:b},f(a);var e=document.createElement("div");e.className="vjs-thumbnail-holder";var g=document.createElement("img");e.appendChild(g),g.className="vjs-thumbnail";var h=a.duration();a.on("durationchange",function(){h=a.duration()}),a.on("loadedmetadata",function(){h=a.duration()});var i=a.controlBar.progressControl,j=i.seekBar,k=i.el();k.firstChild?k.insertBefore(e,k.firstChild):k.appendChild(e);var l=function(b){if(b.target!==e&&b.target!==g){var f=d().x,k=j.el().offsetLeft,l=k+j.el().offsetWidth,m=b.pageX;b.changedTouches&&(m=b.changedTouches[0].pageX);var n=m||b.clientX+document.body.scrollLeft+document.documentElement.scrollLeft;n-=c(i.el()).getBoundingClientRect().left+f;var o=Math.floor(j.calculateDistance(b)*h),p=0,q=a._thumbs.settings;for(var r in q)o>r&&(p=Math.max(p,r));var s=q[p];if(s){var t=/^https?:\/\//i;s.src&&g.src.replace(t,"//")!=s.src.replace(t,"//")&&(g.src=s.src);var u=a.hasClass("vjs-fullscreen")?1.5:1;s.style&&(g.style.left=parseFloat(s.style.left)*u+"px",g.style.top=parseFloat(s.style.top)*u+"px"),g.naturalWidth&&(g.style.width=g.naturalWidth*u+"px",g.style.height=g.naturalHeight*u+"px");var v=parseFloat(s.width||q[0].width)*u,w=parseFloat(s.height||q[0].height)*u,x=v/2;n+x>l?n=l-v:k>n-x?n=k:n-=x,e.style.width=v+"px",e.style.height=w+"px",e.style.left=n+"px",e.style.top="-"+w+"px",e.style.display="block"}}};i.on("mousemove",l),i.on("touchmove",l);var m=function(){e.style.display="none"};i.on("mouseout",m),i.on("touchcancel",m),i.on("touchend",m),a.on("userinactive",m)};videojs.plugin("thumbnails",function(a){if(a){var b=this;if(!a.vtt)return void i(b,e(a));var c=b.addRemoteTextTrack({id:"thumbnails",kind:"metadata",src:a.vtt});c.addEventListener("load",function d(){c.removeEventListener("load",d);var e=b.textTracks().getTrackById("thumbnails");i(b,h(e,a.vtt))})}})}(),function(a,b){"use strict";function c(){function c(b){if(!b||!e(b))return null;var c=new RegExp("(?:^|.*;\\s*)"+a.escape(b).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*");return a.unescape(document.cookie.replace(c,"$1"))}function d(b,c,d,e,f,g){if(b&&!/^(?:expires|max\-age|path|domain|secure)$/i.test(b)){var h="";if(d)switch(d.constructor){case Number:h=d===1/0?"; expires=Tue, 19 Jan 2038 03:14:07 GMT":"; max-age="+d;break;case String:h="; expires="+d;break;case Date:h="; expires="+d.toGMTString()}document.cookie=a.escape(b)+"="+a.escape(c)+h+(f?"; domain="+f:"")+(e?"; path="+e:"")+(g?"; secure":"")}}function e(b){return new RegExp("(?:^|;\\s*)"+a.escape(b).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)}function f(){try{return a.localStorage.setItem("vjs-storage-test","value"),a.localStorage.removeItem("vjs-storage-test"),!0}catch(b){return!1}}b.utils.localStorage=f()?a.localStorage:{getItem:c,setItem:function(a,b){d(a,b,1/0,"/")}}}b.utils=b.utils||{},c()}(window,window.videojs),/**
 * @hola.org/videojs-contrib-media-sources
 * @version 3.1.0-12
 * @copyright 2017 Brightcove, Inc.
 * @license Apache-2.0
 */
function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.videojsContribMediaSources=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){(function(a){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(c,"__esModule",{value:!0});var e="undefined"!=typeof window?window.videojs:"undefined"!=typeof a?a.videojs:null,f=d(e),g=function(a){Object.defineProperties(a.frame,{id:{get:function(){return f["default"].log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),a.value.key}},value:{get:function(){return f["default"].log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),a.value.data}},privateData:{get:function(){return f["default"].log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),a.value.data}}})},h=function(a,b,c){var d=window.WebKitDataCue||window.VTTCue;b&&b.forEach(function(a){this.inbandTextTrack_.addCue(new d(a.startTime+this.timestampOffset,a.endTime+this.timestampOffset,a.text))},a),c&&c.forEach(function(a){var b=a.cueTime+this.timestampOffset;a.frames.forEach(function(a){var c=new d(b,b,a.value||a.url||a.data||"");c.frame=a,c.value=a,g(c),this.metadataTrack_.addCue(c)},this)},a)};c["default"]=h,b.exports=c["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d=function(a){return/mp4a\.\d+.\d+/i.test(a)},e=function(a){return/avc1\.[\da-f]+/i.test(a)},f=function(a){var b={type:"",parameters:{}},c=a.trim().split(";");return b.type=c.shift().trim(),c.forEach(function(a){var c=a.trim().split("=");if(c.length>1){var d=c[0].replace(/"/g,"").trim(),e=c[1].replace(/"/g,"").trim();b.parameters[d]=e}}),b};c["default"]={isAudioCodec:d,parseContentType:f,isVideoCodec:e},b.exports=c["default"]},{}],3:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d=function(a,b,c){c.captions&&c.captions.length&&!a.inbandTextTrack_&&(a.inbandTextTrack_=b.player_.addTextTrack("captions","cc1")),c.metadata&&c.metadata.length&&!a.metadataTrack_&&(a.metadataTrack_=b.player_.addTextTrack("metadata","Timed Metadata"),a.metadataTrack_.inBandMetadataTrackDispatchType=c.metadata.dispatchType)};c["default"]=d,b.exports=c["default"]},{}],4:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={TIME_BETWEEN_CHUNKS:1,BYTES_PER_CHUNK:32768};c["default"]=d,b.exports=c["default"]},{}],5:[function(a,b,c){(function(d){"use strict";function e(a){return a&&a.__esModule?a:{"default":a}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0,h=j=void 0}},j="undefined"!=typeof window?window.videojs:"undefined"!=typeof d?d.videojs:null,k=e(j),l=a("./flash-source-buffer"),m=e(l),n=a("./flash-constants"),o=e(n),p=a("./codec-utils"),q=function(a){function b(){var a=this;f(this,b),i(Object.getPrototypeOf(b.prototype),"constructor",this).call(this),this.sourceBuffers=[],this.readyState="closed",this.on(["sourceopen","webkitsourceopen"],function(b){a.swfObj=document.getElementById(b.swfId),a.player_=k["default"](a.swfObj.parentNode),a.tech_=a.swfObj.tech,a.readyState="open",a.tech_.on("seeking",function(){for(var b=a.sourceBuffers.length;b--;)a.sourceBuffers[b].abort()}),a.swfObj&&a.swfObj.vjs_load()})}return g(b,a),h(b,[{key:"addSeekableRange_",value:function(){}},{key:"addSourceBuffer",value:function(a){var b=p.parseContentType(a),c=void 0;if("video/mp2t"!==b.type)throw new Error("NotSupportedError (Video.js)");return c=new m["default"](this),this.sourceBuffers.push(c),c}},{key:"endOfStream",value:function(a){"network"===a?this.tech_.error(2):"decode"===a&&this.tech_.error(3),"ended"!==this.readyState&&(this.readyState="ended",this.swfObj.vjs_endOfStream())}}]),b}(k["default"].EventTarget);c["default"]=q;try{Object.defineProperty(q.prototype,"duration",{get:function(){return this.swfObj?this.swfObj.vjs_getProperty("duration"):0/0},set:function(a){var b=void 0,c=this.swfObj.vjs_getProperty("duration");if(this.swfObj.vjs_setProperty("duration",a),c>a)for(b=0;b<this.sourceBuffers.length;b++)this.sourceBuffers[b].remove(a,c);return a}})}catch(r){q.prototype.duration=0/0}for(var s in o["default"])q[s]=o["default"][s];b.exports=c["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./codec-utils":2,"./flash-constants":4,"./flash-source-buffer":6}],6:[function(a,b,c){(function(d){"use strict";function e(a){return a&&a.__esModule?a:{"default":a}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0,h=j=void 0}},j="undefined"!=typeof window?window.videojs:"undefined"!=typeof d?d.videojs:null,k=e(j),l=a("@hola.org/mux.js"),m=e(l),n=a("./remove-cues-from-track"),o=e(n),p=a("./create-text-tracks-if-necessary"),q=e(p),r=a("./add-text-track-data"),s=e(r),t=a("./flash-constants"),u=e(t),v=function(a){window.setTimeout(a,u["default"].TIME_BETWEEN_CHUNKS)},w=function(){return Math.random().toString(36).slice(2,8)},x=function(a,b){("number"!=typeof b||0>b)&&(b=0);var c=Math.pow(10,b);return Math.round(a*c)/c},y=function(a){var b=8192,c="";if(a.length<=b)return String.fromCharCode.apply(null,a);for(var d=0;d<a.length;d+=b)c+=String.fromCharCode.apply(null,a.subarray(d,d+b));return c},z=function(a){function b(a){var c=this;f(this,b),i(Object.getPrototypeOf(b.prototype),"constructor",this).call(this);var d=void 0;this.chunkSize_=u["default"].BYTES_PER_CHUNK,this.buffer_=[],this.bufferSize_=0,this.basePtsOffset_=0/0,this.mediaSource=a,this.updating=!1,this.timestampOffset_=0,this.segmentParser_=new m["default"].flv.Transmuxer,this.segmentParser_.on("data",this.receiveBuffer_.bind(this)),d=window.btoa(String.fromCharCode.apply(null,Array.prototype.slice.call(this.segmentParser_.getFlvHeader())));var e=this.mediaSource.player_.id().replace(/[^a-zA-Z0-9]/g,"_");this.flashEncodedHeaderName_="vjs_flashEncodedHeader_"+e+w(),this.flashEncodedDataName_="vjs_flashEncodedData_"+e+w(),window[this.flashEncodedHeaderName_]=function(){return delete window[c.flashEncodedHeaderName_],d},this.mediaSource.swfObj.vjs_appendChunkReady(this.flashEncodedHeaderName_),Object.defineProperty(this,"timestampOffset",{get:function(){return this.timestampOffset_},set:function(a){"number"==typeof a&&a>=0&&(this.timestampOffset_=a,this.segmentParser_=new m["default"].flv.Transmuxer,this.segmentParser_.on("data",this.receiveBuffer_.bind(this)),this.mediaSource.swfObj.vjs_discontinuity(),this.basePtsOffset_=0/0)}}),Object.defineProperty(this,"buffered",{get:function(){if(!(this.mediaSource&&this.mediaSource.swfObj&&"vjs_getProperty"in this.mediaSource.swfObj))return k["default"].createTimeRange();var a=this.mediaSource.swfObj.vjs_getProperty("buffered");return a&&a.length&&(a[0][0]=x(a[0][0],3),a[0][1]=x(a[0][1],3)),k["default"].createTimeRanges(a)}}),this.mediaSource.player_.on("seeked",function(){o["default"](0,1/0,c.metadataTrack_),o["default"](0,1/0,c.inbandTextTrack_)})}return g(b,a),h(b,[{key:"appendBuffer",value:function(a){var b=this,c=void 0,d=524288,e=0;if(this.updating)throw c=new Error("SourceBuffer.append() cannot be called while an update is in progress"),c.name="InvalidStateError",c.code=11,c;this.updating=!0,this.mediaSource.readyState="open",this.trigger({type:"update"});var f=function g(){b.segmentParser_.push(a.subarray(e,e+d)),e+=d,v(e<a.byteLength?g:b.segmentParser_.flush.bind(b.segmentParser_))};f()}},{key:"abort",value:function(){this.buffer_=[],this.bufferSize_=0,this.mediaSource.swfObj.vjs_abort(),this.updating&&(this.updating=!1,this.trigger({type:"updateend"}))}},{key:"remove",value:function(a,b){o["default"](a,b,this.metadataTrack_),o["default"](a,b,this.inbandTextTrack_),this.trigger({type:"update"}),this.trigger({type:"updateend"})}},{key:"receiveBuffer_",value:function(a){var b=this;q["default"](this,this.mediaSource,a),s["default"](this,a.captions,a.metadata),v(function(){var c=b.convertTagsToData_(a);0===b.buffer_.length&&v(b.processBuffer_.bind(b)),c&&(b.buffer_.push(c),b.bufferSize_+=c.byteLength)})}},{key:"processBuffer_",value:function(){var a=this,b=u["default"].BYTES_PER_CHUNK;if(!this.buffer_.length)return void(this.updating!==!1&&(this.updating=!1,this.trigger({type:"updateend"})));for(var c=new Uint8Array(Math.min(b,this.bufferSize_)),d=c.byteLength;d;){var e=this.buffer_[0].subarray(0,d);c.set(e,c.byteLength-d),e.byteLength<this.buffer_[0].byteLength?this.buffer_[0]=this.buffer_[0].subarray(d):this.buffer_.shift(),d-=e.byteLength}this.bufferSize_-=c.byteLength;var f=window.btoa(y(c));window[this.flashEncodedDataName_]=function(){return v(a.processBuffer_.bind(a)),delete window[a.flashEncodedDataName_],f},this.mediaSource.swfObj.vjs_appendChunkReady(this.flashEncodedDataName_)}},{key:"convertTagsToData_",value:function(a){var b=0,c=this.mediaSource.tech_,d=0,e=void 0,f=void 0,g=void 0,h=[],i=this.getOrderedTags_(a);for(isNaN(this.basePtsOffset_)&&i.length&&(this.basePtsOffset_=i[0].pts),c.buffered().length&&(d=c.buffered().end(0)-this.timestampOffset),d=Math.max(d,c.currentTime()-this.timestampOffset),d*=1e3,d+=this.basePtsOffset_,e=0;e<i.length;e++)i[e].pts>=d&&h.push(i[e]);if(0!==h.length){for(e=0;e<h.length;e++)b+=h[e].bytes.byteLength;for(g=new Uint8Array(b),e=0,f=0;e<h.length;e++)g.set(h[e].bytes,f),f+=h[e].bytes.byteLength;return g}}},{key:"getOrderedTags_",value:function(a){for(var b=a.tags.videoTags,c=a.tags.audioTags,d=void 0,e=[];b.length||c.length;)d=b.length?c.length&&c[0].dts<b[0].dts?c.shift():b.shift():c.shift(),e.push(d.finalize());return e}}]),b}(k["default"].EventTarget);c["default"]=z,b.exports=c["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./add-text-track-data":1,"./create-text-tracks-if-necessary":3,"./flash-constants":4,"./remove-cues-from-track":8,"@hola.org/mux.js":18}],7:[function(a,b,c){(function(d){"use strict";function e(a){return a&&a.__esModule?a:{"default":a}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0,h=j=void 0}},j="undefined"!=typeof window?window.videojs:"undefined"!=typeof d?d.videojs:null,k=e(j),l=a("./virtual-source-buffer"),m=e(l),n=a("./codec-utils"),o=function(a){return a.map(function(a){return a.replace(/avc1\.(\d+)\.(\d+)/i,function(a,b,c){var d=("00"+Number(b).toString(16)).slice(-2),e=("00"+Number(c).toString(16)).slice(-2);return"avc1."+d+"00"+e})})},p=function(a){function b(){var a=this;f(this,b),i(Object.getPrototypeOf(b.prototype),"constructor",this).call(this);var c=void 0;this.nativeMediaSource_=new window.MediaSource;for(c in this.nativeMediaSource_)c in b.prototype||"function"!=typeof this.nativeMediaSource_[c]||(this[c]=this.nativeMediaSource_[c].bind(this.nativeMediaSource_));this.duration_=0/0,Object.defineProperty(this,"duration",{get:function(){return this.duration_===1/0?this.duration_:this.nativeMediaSource_.duration},set:function(a){return this.duration_=a,a!==1/0?void(this.nativeMediaSource_.duration=a):void 0}}),Object.defineProperty(this,"seekable",{get:function(){return this.duration_===1/0?k["default"].createTimeRanges([[0,this.nativeMediaSource_.duration]]):this.nativeMediaSource_.seekable}}),Object.defineProperty(this,"readyState",{get:function(){return this.nativeMediaSource_.readyState}}),Object.defineProperty(this,"activeSourceBuffers",{get:function(){return this.activeSourceBuffers_}}),this.sourceBuffers=[],this.activeSourceBuffers_=[],this.updateActiveSourceBuffers_=function(){a.activeSourceBuffers_.length=0;for(var b=!1,c=!0,d=0;d<a.player_.audioTracks().length;d++){var e=a.player_.audioTracks()[d];if(e.enabled&&"main"!==e.kind){b=!0,c=!1;break}}a.sourceBuffers.forEach(function(d){if(d.videoCodec_&&d.audioCodec_)d.audioDisabled_=b;else if(d.videoCodec_&&!d.audioCodec_)d.audioDisabled_=!0,c=!1;else if(!d.videoCodec_&&d.audioCodec_&&(d.audioDisabled_=c,c))return;a.activeSourceBuffers_.push(d)})},["sourceopen","sourceclose","sourceended"].forEach(function(a){this.nativeMediaSource_.addEventListener(a,this.trigger.bind(this))},this),this.on("sourceopen",function(){var b=document.querySelector('[src="'+a.url_+'"]');b&&(a.player_=k["default"](b.parentNode),a.player_.audioTracks().on("change",a.updateActiveSourceBuffers_),a.player_.audioTracks().on("addtrack",a.updateActiveSourceBuffers_),a.player_.audioTracks().on("removetrack",a.updateActiveSourceBuffers_))}),this.on("sourceclose",function(){this.sourceBuffers.forEach(function(a){a.transmuxer_&&a.transmuxer_.terminate()}),this.sourceBuffers.length=0,this.player_&&(this.player_.audioTracks().off("change",this.updateActiveSourceBuffers_),this.player_.audioTracks().off("addtrack",this.updateActiveSourceBuffers_),this.player_.audioTracks().off("removetrack",this.updateActiveSourceBuffers_))})}return g(b,a),h(b,[{key:"addSeekableRange_",value:function(a,b){var c=void 0;if(this.duration!==1/0)throw c=new Error("MediaSource.addSeekableRange() can only be invoked when the duration is Infinity"),c.name="InvalidStateError",c.code=11,c;(b>this.nativeMediaSource_.duration||isNaN(this.nativeMediaSource_.duration))&&(this.nativeMediaSource_.duration=b)}},{key:"addSourceBuffer",value:function(a){var b=void 0,c=n.parseContentType(a);if("video/mp2t"===c.type){var d=[];c.parameters&&c.parameters.codecs&&(d=c.parameters.codecs.split(","),d=o(d),d=d.map(function(a){return a.trim()}),d=d.filter(function(a){return n.isAudioCodec(a)||n.isVideoCodec(a)})),0===d.length&&(d=["avc1.4d400d","mp4a.40.2"]),b=new m["default"](this,d),0!==this.sourceBuffers.length&&(this.sourceBuffers[0].createRealSourceBuffers_(),b.createRealSourceBuffers_(),this.sourceBuffers[0].audioDisabled_=!0)}else b=this.nativeMediaSource_.addSourceBuffer(a);return this.sourceBuffers.push(b),b}}]),b}(k["default"].EventTarget);c["default"]=p,b.exports=c["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./codec-utils":2,"./virtual-source-buffer":10}],8:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d=function(a,b,c){var d=void 0,e=void 0;if(c)for(d=c.cues.length;d--;)e=c.cues[d],e.startTime<=b&&e.endTime>=a&&c.removeCue(e)};c["default"]=d,b.exports=c["default"]},{}],9:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=a("@hola.org/mux.js"),h=d(g),i=function(a){a.on("data",function(a){var b=a.data;a.data=b.buffer,postMessage({action:"data",segment:a,byteOffset:b.byteOffset,byteLength:b.byteLength},[a.data])}),a.captionStream&&a.captionStream.on("data",function(a){postMessage({action:"caption",data:a})}),a.on("done",function(){postMessage({action:"done"})})},j=function(){function a(b){e(this,a),this.options=b||{},this.init()}return f(a,[{key:"init",value:function(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new h["default"].mp4.Transmuxer(this.options),i(this.transmuxer)}},{key:"push",value:function(a){var b=new Uint8Array(a.data,a.byteOffset,a.byteLength);this.transmuxer.push(b)}},{key:"reset",value:function(){this.init()}},{key:"setTimestampOffset",value:function(a){var b=a.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(9e4*b))}},{key:"flush",value:function(){this.transmuxer.flush()}}]),a}(),k=function(a){a.onmessage=function(a){return"init"===a.data.action&&a.data.options?void(this.messageHandlers=new j(a.data.options)):(this.messageHandlers||(this.messageHandlers=new j),void(a.data&&a.data.action&&"init"!==a.data.action&&this.messageHandlers[a.data.action]&&this.messageHandlers[a.data.action](a.data)))}};c["default"]=function(a){return new k(a)},b.exports=c["default"]},{"@hola.org/mux.js":18}],10:[function(a,b,c){(function(d){"use strict";function e(a){return a&&a.__esModule?a:{"default":a}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0,h=j=void 0}},j="undefined"!=typeof window?window.videojs:"undefined"!=typeof d?d.videojs:null,k=e(j),l=a("./create-text-tracks-if-necessary"),m=e(l),n=a("./remove-cues-from-track"),o=e(n),p=a("./add-text-track-data"),q=e(p),r=a("webworkify"),s=e(r),t=a("./transmuxer-worker"),u=e(t),v=a("./codec-utils"),w=function(a){function b(a,c){var d=this;f(this,b),i(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,k["default"].EventTarget),this.timestampOffset_=0,this.pendingBuffers_=[],this.bufferUpdating_=!1,this.mediaSource_=a,this.codecs_=c,this.audioCodec_=null,this.videoCodec_=null,this.audioDisabled_=!1;var e={remux:!1};this.codecs_.forEach(function(a){v.isAudioCodec(a)?d.audioCodec_=a:v.isVideoCodec(a)&&(d.videoCodec_=a)}),this.transmuxer_=s["default"](u["default"]),this.transmuxer_.postMessage({action:"init",options:e}),this.transmuxer_.onmessage=function(a){return"data"===a.data.action?d.data_(a):"done"===a.data.action?d.done_(a):void 0},Object.defineProperty(this,"timestampOffset",{get:function(){return this.timestampOffset_},set:function(a){"number"==typeof a&&a>=0&&(this.timestampOffset_=a,this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:a}))}}),Object.defineProperty(this,"appendWindowStart",{get:function(){return(this.videoBuffer_||this.audioBuffer_).appendWindowStart},set:function(a){this.videoBuffer_&&(this.videoBuffer_.appendWindowStart=a),this.audioBuffer_&&(this.audioBuffer_.appendWindowStart=a)}}),Object.defineProperty(this,"updating",{get:function(){return!!(this.bufferUpdating_||!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.updating||this.videoBuffer_&&this.videoBuffer_.updating)}}),Object.defineProperty(this,"buffered",{get:function(){var a=null,b=null,c=0,d=[],e=[];if(!this.videoBuffer_&&(this.audioDisabled_||!this.audioBuffer_))return k["default"].createTimeRange();if(!this.videoBuffer_)return this.audioBuffer_.buffered;if(this.audioDisabled_||!this.audioBuffer_)return this.videoBuffer_.buffered;if(!(this.videoBuffer_&&0!==this.videoBuffer_.buffered.length||this.audioBuffer_&&0!==this.audioBuffer_.buffered.length))return k["default"].createTimeRange();for(var f=this.videoBuffer_.buffered,g=this.audioBuffer_.buffered,h=f.length;h--;)d.push({time:f.start(h),type:"start"}),d.push({time:f.end(h),type:"end"});for(h=g.length;h--;)d.push({time:g.start(h),type:"start"}),d.push({time:g.end(h),type:"end"});for(d.sort(function(a,b){return a.time-b.time}),h=0;h<d.length;h++)"start"===d[h].type?(c++,2===c&&(a=d[h].time)):"end"===d[h].type&&(c--,1===c&&(b=d[h].time)),null!==a&&null!==b&&(e.push([a,b]),a=null,b=null);return k["default"].createTimeRanges(e)}})}return g(b,a),h(b,[{key:"data_",value:function(a){var b=a.data.segment;b.data=new Uint8Array(b.data,a.data.byteOffset,a.data.byteLength),m["default"](this,this.mediaSource_,b),this.pendingBuffers_.push(b)}},{key:"done_",value:function(){this.processPendingSegments_()}},{key:"createRealSourceBuffers_",value:function(){var a=this,b=["audio","video"];b.forEach(function(c){if(a[c+"Codec_"]&&!a[c+"Buffer_"]){var d=null;a.mediaSource_[c+"Buffer_"]?d=a.mediaSource_[c+"Buffer_"]:(d=a.mediaSource_.nativeMediaSource_.addSourceBuffer(c+'/mp4;codecs="'+a[c+"Codec_"]+'"'),a.mediaSource_[c+"Buffer_"]=d),a[c+"Buffer_"]=d,["update","updatestart","updateend"].forEach(function(e){d.addEventListener(e,function(){if("audio"!==c||!a.audioDisabled_){var d=b.every(function(b){return"audio"===b&&a.audioDisabled_?!0:c!==b&&a[b+"Buffer_"]&&a[b+"Buffer_"].updating?!1:!0});return d?a.trigger(e):void 0}})})}})}},{key:"appendBuffer",value:function(a){this.bufferUpdating_=!0,this.transmuxer_.postMessage({action:"push",data:a.buffer,byteOffset:a.byteOffset,byteLength:a.byteLength},[a.buffer]),this.transmuxer_.postMessage({action:"flush"})}},{key:"pushBuffer",value:function(a){this.transmuxer_.postMessage({action:"push",data:a.buffer,byteOffset:a.byteOffset,byteLength:a.byteLength},[a.buffer])}},{key:"flushBuffer",value:function(){this.bufferUpdating_=!0,this.transmuxer_.postMessage({action:"flush"})}},{key:"remove",value:function(a,b){this.videoBuffer_&&this.videoBuffer_.remove(a,b),!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.remove(a,b),o["default"](a,b,this.metadataTrack_),o["default"](a,b,this.inbandTextTrack_)}},{key:"processPendingSegments_",value:function(){var a={video:{segments:[],bytes:0},audio:{segments:[],bytes:0},captions:[],metadata:[]};a=this.pendingBuffers_.reduce(function(a,b){var c=b.type,d=b.data;return a[c].segments.push(d),a[c].bytes+=d.byteLength,b.captions&&(a.captions=a.captions.concat(b.captions)),b.info&&(a[c].info=b.info),b.metadata&&(a.metadata=a.metadata.concat(b.metadata)),a},a),this.videoBuffer_||this.audioBuffer_||(0===a.video.bytes&&(this.videoCodec_=null),0===a.audio.bytes&&(this.audioCodec_=null),this.createRealSourceBuffers_()),a.audio.info&&this.mediaSource_.trigger({type:"audioinfo",info:a.audio.info}),a.video.info&&this.mediaSource_.trigger({type:"videoinfo",info:a.video.info}),this.videoBuffer_&&(this.concatAndAppendSegments_(a.video,this.videoBuffer_),q["default"](this,a.captions,a.metadata)),!this.audioDisabled_&&this.audioBuffer_&&this.concatAndAppendSegments_(a.audio,this.audioBuffer_),this.pendingBuffers_.length=0,this.bufferUpdating_=!1}},{key:"concatAndAppendSegments_",value:function(a,b){var c=0,d=void 0;a.bytes&&(d=new Uint8Array(a.bytes),a.segments.forEach(function(a){d.set(a,c),c+=a.byteLength}),b.appendBuffer(d))}},{key:"abort",value:function(){this.videoBuffer_&&this.videoBuffer_.abort(),this.audioBuffer_&&this.audioBuffer_.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"reset"}),this.pendingBuffers_.length=0,this.bufferUpdating_=!1}}]),b}(k["default"].EventTarget);c["default"]=w,b.exports=c["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./add-text-track-data":1,"./codec-utils":2,"./create-text-tracks-if-necessary":3,"./remove-cues-from-track":8,"./transmuxer-worker":9,webworkify:33}],11:[function(a,b){"use strict";var c,d=a("../utils/stream.js");c=function(){var a=new Uint8Array,b=0;c.prototype.init.call(this),this.setTimestamp=function(a){b=a},this.parseId3TagSize=function(a,b){var c=a[b+6]<<21|a[b+7]<<14|a[b+8]<<7|a[b+9],d=a[b+5],e=(16&d)>>4;return e?c+20:c+10},this.parseAdtsSize=function(a,b){var c=(224&a[b+5])>>5,d=a[b+4]<<3,e=6144&a[b+3];return e|d|c},this.push=function(c){var d,e,f,g,h=0,i=0;for(a.length?(g=a.length,a=new Uint8Array(c.byteLength+g),a.set(a.subarray(0,g)),a.set(c,g)):a=c;a.length-i>=3;)if(a[i]!=="I".charCodeAt(0)||a[i+1]!=="D".charCodeAt(0)||a[i+2]!=="3".charCodeAt(0))if(a[i]&!0&&240===(240&a[i+1])){if(a.length-i<7)break;if(h=this.parseAdtsSize(a,i),h>a.length)break;f={type:"audio",data:a.subarray(i,i+h),pts:b,dts:b},this.trigger("data",f),i+=h}else i++;else{if(a.length-i<10)break;if(h=this.parseId3TagSize(a,i),h>a.length)break;e={type:"timed-metadata",data:a.subarray(i,i+h)},this.trigger("data",e),i+=h}d=a.length-i,a=d>0?a.subarray(i):new Uint8Array}},c.prototype=new d,b.exports=c},{"../utils/stream.js":32}],12:[function(a,b){"use strict";var c,d=a("../utils/stream.js"),e=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];c=function(){var a;c.prototype.init.call(this),this.push=function(b){var c,d,f,g,h,i,j=0,k=0;if("audio"===b.type)for(a?(g=a,a=new Uint8Array(g.byteLength+b.data.byteLength),a.set(g),a.set(b.data,g.byteLength)):a=b.data;j+5<a.length;)if(255===a[j]&&240===(246&a[j+1])){if(d=2*(1&~a[j+1]),c=(3&a[j+3])<<11|a[j+4]<<3|(224&a[j+5])>>5,h=1024*((3&a[j+6])+1),i=9e4*h/e[(60&a[j+2])>>>2],f=j+c,a.byteLength<f)return;if(this.trigger("data",{pts:b.pts+k*i,dts:b.dts+k*i,sampleCount:h,audioobjecttype:(a[j+2]>>>6&3)+1,channelcount:(1&a[j+2])<<2|(192&a[j+3])>>>6,samplerate:e[(60&a[j+2])>>>2],samplingfrequencyindex:(60&a[j+2])>>>2,samplesize:16,data:a.subarray(j+7+d,f)}),a.byteLength===f)return void(a=void 0);k++,a=a.subarray(f)}else j++},this.flush=function(){this.trigger("done")}},c.prototype=new d,b.exports=c},{"../utils/stream.js":32}],13:[function(a,b){"use strict";var c,d,e=a("../utils/stream.js"),f=a("../utils/exp-golomb.js"),g={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},h={slice_layer_without_partitioning_rbsp:1,slice_layer_without_partitioning_rbsp_idr:5,sei_rbsp:6,seq_parameter_set_rbsp:7,pic_parameter_set_rbsp:8,access_unit_delimiter_rbsp:9};d=function(){var a,b,c=0;d.prototype.init.call(this),this.push=function(d){var e;for(b?(e=new Uint8Array(b.byteLength+d.data.byteLength),e.set(b),e.set(d.data,b.byteLength),b=e):b=d.data;c<b.byteLength-3;c++)if(1===b[c+2]){a=c+5;break}for(;a<b.byteLength;)switch(b[a]){case 0:if(0!==b[a-1]){a+=2;break}if(0!==b[a-2]){a++;break}c+3!==a-2&&this.trigger("data",b.subarray(c+3,a-2));do a++;while(1!==b[a]&&a<b.length);c=a-2,a+=3;break;case 1:if(0!==b[a-1]||0!==b[a-2]){a+=3;break}this.trigger("data",b.subarray(c+3,a-2)),c=a-2,a+=3;break;default:a+=3}b=b.subarray(c),a-=c,c=0},this.flush=function(){b&&b.byteLength>3&&this.trigger("data",b.subarray(c+3)),b=null,c=0,this.trigger("done")}},d.prototype=new e,c=function(){var a,b,e,h,i,j,k,l=new d;c.prototype.init.call(this),a=this,this.push=function(a){"video"===a.type&&(b=a.trackId,e=a.pts,h=a.dts,l.push(a))},l.on("data",function(c){var d={trackId:b,pts:e,dts:h,data:c},f=31&c[0];(1==f||f>=5&&9>=f)&&(d.nalUnitType=f),(7==f||6==f)&&(d.escapedRBSP=i(c.subarray(1)),d.config=7==f?j(d.escapedRBSP):null),a.trigger("data",d)}),l.on("done",function(){a.trigger("done")}),this.flush=function(){l.flush()},k=function(a,b){var c,d,e=8,f=8;for(c=0;a>c;c++)0!==f&&(d=b.readExpGolomb(),f=(e+d+256)%256),e=0===f?e:f},i=function(a){for(var b,c,d=a.byteLength,e=[],f=1;d-2>f;)0===a[f]&&0===a[f+1]&&3===a[f+2]?(e.push(f+2),f+=2):f++;if(0===e.length)return a;b=d-e.length,c=new Uint8Array(b);var g=0;for(f=0;b>f;g++,f++)g===e[0]&&(g++,e.shift()),c[f]=a[g];return c},j=function(a){var b,c,d,e,h,i,j,l,m,n,o,p,q,r,s=0,t=0,u=0,v=0,w=1;if(b=new f(a),c=b.readUnsignedByte(),e=b.readUnsignedByte(),d=b.readUnsignedByte(),b.skipUnsignedExpGolomb(),g[c]&&(h=b.readUnsignedExpGolomb(),3===h&&b.skipBits(1),b.skipUnsignedExpGolomb(),b.skipUnsignedExpGolomb(),b.skipBits(1),b.readBoolean()))for(o=3!==h?8:12,r=0;o>r;r++)b.readBoolean()&&(6>r?k(16,b):k(64,b));if(b.skipUnsignedExpGolomb(),i=b.readUnsignedExpGolomb(),0===i)b.readUnsignedExpGolomb();else if(1===i)for(b.skipBits(1),b.skipExpGolomb(),b.skipExpGolomb(),j=b.readUnsignedExpGolomb(),r=0;j>r;r++)b.skipExpGolomb();if(b.skipUnsignedExpGolomb(),b.skipBits(1),l=b.readUnsignedExpGolomb(),m=b.readUnsignedExpGolomb(),n=b.readBits(1),0===n&&b.skipBits(1),b.skipBits(1),b.readBoolean()&&(s=b.readUnsignedExpGolomb(),t=b.readUnsignedExpGolomb(),u=b.readUnsignedExpGolomb(),v=b.readUnsignedExpGolomb()),b.readBoolean()&&b.readBoolean()){switch(q=b.readUnsignedByte()){case 1:p=[1,1];break;case 2:p=[12,11];break;case 3:p=[10,11];break;case 4:p=[16,11];break;case 5:p=[40,33];break;case 6:p=[24,11];break;case 7:p=[20,11];break;case 8:p=[32,11];break;case 9:p=[80,33];break;case 10:p=[18,11];break;case 11:p=[15,11];break;case 12:p=[64,33];break;case 13:p=[160,99];break;case 14:p=[4,3];break;case 15:p=[3,2];break;case 16:p=[2,1];break;case 255:p=[b.readUnsignedByte()<<8|b.readUnsignedByte(),b.readUnsignedByte()<<8|b.readUnsignedByte()]}p&&(w=p[0]/p[1])}return{profileIdc:c,
levelIdc:d,profileCompatibility:e,width:Math.ceil((16*(l+1)-2*s-2*t)*w),height:(2-n)*(m+1)*16-2*u-2*v}}},c.prototype=new e,b.exports={H264Stream:c,NalByteStream:d,unitTypes:h}},{"../utils/exp-golomb.js":31,"../utils/stream.js":32}],14:[function(a,b){b.exports={adts:a("./adts"),h264:a("./h264")}},{"./adts":12,"./h264":13}],15:[function(a,b){"use strict";var c;c=function(a,b){var d,e=0,f=16384,g=function(a,b){var c,d=a.position+b;d<a.bytes.byteLength||(c=new Uint8Array(2*d),c.set(a.bytes.subarray(0,a.position),0),a.bytes=c,a.view=new DataView(a.bytes.buffer))},h=c.widthBytes||new Uint8Array("width".length),i=c.heightBytes||new Uint8Array("height".length),j=c.videocodecidBytes||new Uint8Array("videocodecid".length);if(!c.widthBytes){for(d=0;d<"width".length;d++)h[d]="width".charCodeAt(d);for(d=0;d<"height".length;d++)i[d]="height".charCodeAt(d);for(d=0;d<"videocodecid".length;d++)j[d]="videocodecid".charCodeAt(d);c.widthBytes=h,c.heightBytes=i,c.videocodecidBytes=j}switch(this.keyFrame=!1,a){case c.VIDEO_TAG:this.length=16,f*=6;break;case c.AUDIO_TAG:this.length=13,this.keyFrame=!0;break;case c.METADATA_TAG:this.length=29,this.keyFrame=!0;break;default:throw"Error Unknown TagType"}this.bytes=new Uint8Array(f),this.view=new DataView(this.bytes.buffer),this.bytes[0]=a,this.position=this.length,this.keyFrame=b,this.pts=0,this.dts=0,this.writeBytes=function(a,b,c){var d,e=b||0;c=c||a.byteLength,d=e+c,g(this,c),this.bytes.set(a.subarray(e,d),this.position),this.position+=c,this.length=Math.max(this.length,this.position)},this.writeByte=function(a){g(this,1),this.bytes[this.position]=a,this.position++,this.length=Math.max(this.length,this.position)},this.writeShort=function(a){g(this,2),this.view.setUint16(this.position,a),this.position+=2,this.length=Math.max(this.length,this.position)},this.negIndex=function(a){return this.bytes[this.length-a]},this.nalUnitSize=function(){return 0===e?0:this.length-(e+4)},this.startNalUnit=function(){if(e>0)throw new Error("Attempted to create new NAL wihout closing the old one");e=this.length,this.length+=4,this.position=this.length},this.endNalUnit=function(a){var b,c;this.length===e+4?this.length-=4:e>0&&(b=e+4,c=this.length-b,this.position=e,this.view.setUint32(this.position,c),this.position=this.length,a&&a.push(this.bytes.subarray(b,b+c))),e=0},this.writeMetaDataDouble=function(a,b){var c;if(g(this,2+a.length+9),this.view.setUint16(this.position,a.length),this.position+=2,"width"===a)this.bytes.set(h,this.position),this.position+=5;else if("height"===a)this.bytes.set(i,this.position),this.position+=6;else if("videocodecid"===a)this.bytes.set(j,this.position),this.position+=12;else for(c=0;c<a.length;c++)this.bytes[this.position]=a.charCodeAt(c),this.position++;this.position++,this.view.setFloat64(this.position,b),this.position+=8,this.length=Math.max(this.length,this.position),++e},this.writeMetaDataBoolean=function(a,b){var c;for(g(this,2),this.view.setUint16(this.position,a.length),this.position+=2,c=0;c<a.length;c++)g(this,1),this.bytes[this.position]=a.charCodeAt(c),this.position++;g(this,2),this.view.setUint8(this.position,1),this.position++,this.view.setUint8(this.position,b?1:0),this.position++,this.length=Math.max(this.length,this.position),++e},this.finalize=function(){var a,d;switch(this.bytes[0]){case c.VIDEO_TAG:this.bytes[11]=7|(this.keyFrame||b?16:32),this.bytes[12]=b?0:1,a=this.pts-this.dts,this.bytes[13]=(16711680&a)>>>16,this.bytes[14]=(65280&a)>>>8,this.bytes[15]=(255&a)>>>0;break;case c.AUDIO_TAG:this.bytes[11]=175,this.bytes[12]=b?0:1;break;case c.METADATA_TAG:this.position=11,this.view.setUint8(this.position,2),this.position++,this.view.setUint16(this.position,10),this.position+=2,this.bytes.set([111,110,77,101,116,97,68,97,116,97],this.position),this.position+=10,this.bytes[this.position]=8,this.position++,this.view.setUint32(this.position,e),this.position=this.length,this.bytes.set([0,0,9],this.position),this.position+=3,this.length=this.position}return d=this.length-11,this.bytes[1]=(16711680&d)>>>16,this.bytes[2]=(65280&d)>>>8,this.bytes[3]=(255&d)>>>0,this.bytes[4]=(16711680&this.dts)>>>16,this.bytes[5]=(65280&this.dts)>>>8,this.bytes[6]=(255&this.dts)>>>0,this.bytes[7]=(4278190080&this.dts)>>>24,this.bytes[8]=0,this.bytes[9]=0,this.bytes[10]=0,g(this,4),this.view.setUint32(this.length,this.length),this.length+=4,this.position+=4,this.bytes=this.bytes.subarray(0,this.length),this.frameTime=c.frameTime(this.bytes),this}},c.AUDIO_TAG=8,c.VIDEO_TAG=9,c.METADATA_TAG=18,c.isAudioFrame=function(a){return c.AUDIO_TAG===a[0]},c.isVideoFrame=function(a){return c.VIDEO_TAG===a[0]},c.isMetaData=function(a){return c.METADATA_TAG===a[0]},c.isKeyFrame=function(a){return c.isVideoFrame(a)?23===a[11]:c.isAudioFrame(a)?!0:c.isMetaData(a)?!0:!1},c.frameTime=function(a){var b=a[4]<<16;return b|=a[5]<<8,b|=a[6]<<0,b|=a[7]<<24},b.exports=c},{}],16:[function(a,b){b.exports={tag:a("./flv-tag"),Transmuxer:a("./transmuxer"),tools:a("../tools/flv-inspector")}},{"../tools/flv-inspector":29,"./flv-tag":15,"./transmuxer":17}],17:[function(a,b){"use strict";var c,d,e,f,g,h,i,j=a("../utils/stream.js"),k=a("./flv-tag.js"),l=a("../m2ts/m2ts.js"),m=a("../codecs"),n=m.adts,o=m.h264.H264Stream;g=function(a,b){"number"==typeof b.pts&&(a.timelineStartInfo.pts=void 0===a.timelineStartInfo.pts?b.pts:Math.min(a.timelineStartInfo.pts,b.pts)),"number"==typeof b.dts&&(a.timelineStartInfo.dts=void 0===a.timelineStartInfo.dts?b.dts:Math.min(a.timelineStartInfo.dts,b.dts))},h=function(a,b){var c=new k(k.METADATA_TAG);return c.dts=b,c.pts=b,c.writeMetaDataDouble("videocodecid",7),c.writeMetaDataDouble("width",a.width),c.writeMetaDataDouble("height",a.height),c},i=function(a,b){var c,d=new k(k.VIDEO_TAG,!0);for(d.dts=b,d.pts=b,d.writeByte(1),d.writeByte(a.profileIdc),d.writeByte(a.profileCompatibility),d.writeByte(a.levelIdc),d.writeByte(255),d.writeByte(225),d.writeShort(a.sps[0].length),d.writeBytes(a.sps[0]),d.writeByte(a.pps.length),c=0;c<a.pps.length;++c)d.writeShort(a.pps[c].length),d.writeBytes(a.pps[c]);return d},e=function(a){var b,c=[];e.prototype.init.call(this),this.push=function(b){g(a,b),a&&void 0===a.channelcount&&(a.audioobjecttype=b.audioobjecttype,a.channelcount=b.channelcount,a.samplerate=b.samplerate,a.samplingfrequencyindex=b.samplingfrequencyindex,a.samplesize=b.samplesize,a.extraData=a.audioobjecttype<<11|a.samplingfrequencyindex<<7|a.channelcount<<3),b.pts=Math.round(b.pts/90),b.dts=Math.round(b.dts/90),c.push(b)},this.flush=function(){var d,e,f,g=[];if(0===c.length)return void this.trigger("done");for(f=-(1/0);c.length;)d=c.shift(),(a.extraData!==b||d.pts-f>=1e3)&&(e=new k(k.METADATA_TAG),e.pts=d.pts,e.dts=d.dts,e.writeMetaDataDouble("audiocodecid",10),e.writeMetaDataBoolean("stereo",2===a.channelcount),e.writeMetaDataDouble("audiosamplerate",a.samplerate),e.writeMetaDataDouble("audiosamplesize",16),g.push(e),b=a.extraData,e=new k(k.AUDIO_TAG,!0),e.pts=d.pts,e.dts=d.dts,e.view.setUint16(e.position,a.extraData),e.position+=2,e.length=Math.max(e.length,e.position),g.push(e),f=d.pts),e=new k(k.AUDIO_TAG),e.pts=d.pts,e.dts=d.dts,e.writeBytes(d.data),g.push(e);b=null,this.trigger("data",{track:a,tags:g}),this.trigger("done")}},e.prototype=new j,d=function(a){var b,c,e=[];d.prototype.init.call(this),this.finishFrame=function(c,d){d&&(b&&a&&a.newMetadata&&(d.keyFrame||0===c.length)&&(c.push(h(b,d.pts)),c.push(i(a,d.pts)),a.newMetadata=!1),d.endNalUnit(),c.push(d))},this.push=function(b){g(a,b),b.pts=Math.round(b.pts/90),b.dts=Math.round(b.dts/90),e.push(b)},this.flush=function(){for(var d,f=[];e.length&&e[0].nalUnitType!==m.h264.unitTypes.access_unit_delimiter_rbsp;)e.shift();if(0===e.length)return void this.trigger("done");for(;e.length;){switch(d=e.shift(),d.nalUnitType){case m.h264.unitTypes.seq_parameter_set_rbsp:a.newMetadata=!0,b=d.config,a.width=b.width,a.height=b.height,a.sps=[d.data],a.profileIdc=b.profileIdc,a.levelIdc=b.levelIdc,a.profileCompatibility=b.profileCompatibility,c.endNalUnit();break;case m.h264.unitTypes.pic_parameter_set_rbsp:a.newMetadata=!0,a.pps=[d.data],c.endNalUnit();break;case m.h264.unitTypes.access_unit_delimiter_rbsp:c&&this.finishFrame(f,c),c=new k(k.VIDEO_TAG),c.pts=d.pts,c.dts=d.dts;break;case m.h264.unitTypes.slice_layer_without_partitioning_rbsp_idr:c.keyFrame=!0,c.endNalUnit();break;default:c.endNalUnit()}c.startNalUnit(),c.writeBytes(d.data)}c&&this.finishFrame(f,c),this.trigger("data",{track:a,tags:f}),this.trigger("done")}},d.prototype=new j,f=function(a){this.numberOfTracks=0,this.metadataStream=a.metadataStream,this.videoTags=[],this.audioTags=[],this.videoTrack=null,this.audioTrack=null,this.pendingCaptions=[],this.pendingMetadata=[],this.pendingTracks=0,f.prototype.init.call(this),this.push=function(a){return a.text?this.pendingCaptions.push(a):a.frames?this.pendingMetadata.push(a):("video"===a.track.type&&(this.videoTrack=a.track,this.videoTags=a.tags,this.pendingTracks++),void("audio"===a.track.type&&(this.audioTrack=a.track,this.audioTags=a.tags,this.pendingTracks++)))}},f.prototype=new j,f.prototype.flush=function(){var a,b,c,d,e={tags:{},captions:[],metadata:[]};if(!(this.pendingTracks<this.numberOfTracks)){for(this.videoTrack?d=this.videoTrack.timelineStartInfo.pts:this.audioTrack&&(d=this.audioTrack.timelineStartInfo.pts),e.tags.videoTags=this.videoTags,e.tags.audioTags=this.audioTags,c=0;c<this.pendingCaptions.length;c++)b=this.pendingCaptions[c],b.startTime=b.startPts-d,b.startTime/=9e4,b.endTime=b.endPts-d,b.endTime/=9e4,e.captions.push(b);for(c=0;c<this.pendingMetadata.length;c++)a=this.pendingMetadata[c],a.cueTime=a.pts-d,a.cueTime/=9e4,e.metadata.push(a);e.metadata.dispatchType=this.metadataStream.dispatchType,this.videoTrack=null,this.audioTrack=null,this.videoTags=[],this.audioTags=[],this.pendingCaptions.length=0,this.pendingMetadata.length=0,this.pendingTracks=0,this.trigger("data",e),this.trigger("done")}},c=function(a){var b,g,h,i,j,m,p,q,r,s=this;c.prototype.init.call(this),a=a||{},this.metadataStream=new l.MetadataStream,a.metadataStream=this.metadataStream,b=new l.TransportPacketStream,g=new l.TransportParseStream,h=new l.ElementaryStream,i=new n,j=new o,r=new f(a),b.pipe(g).pipe(h),h.pipe(j),h.pipe(i),h.pipe(this.metadataStream).pipe(r),q=new l.CaptionStream,j.pipe(q).pipe(r),h.on("data",function(a){var b,c,f;if("metadata"===a.type){for(b=a.tracks.length;b--;)"video"===a.tracks[b].type?c=a.tracks[b]:"audio"===a.tracks[b].type&&(f=a.tracks[b]);c&&!m&&(r.numberOfTracks++,m=new d(c),j.pipe(m).pipe(r)),f&&!p&&(r.numberOfTracks++,p=new e(f),i.pipe(p).pipe(r))}}),this.push=function(a){b.push(a)},this.flush=function(){b.flush()},r.on("data",function(a){s.trigger("data",a)}),r.on("done",function(){s.trigger("done")}),this.getFlvHeader=function(a,b,c){var d,e,f,g=new Uint8Array(9),h=new DataView(g.buffer);return a=a||0,b=void 0===b?!0:b,c=void 0===c?!0:c,h.setUint8(0,70),h.setUint8(1,76),h.setUint8(2,86),h.setUint8(3,1),h.setUint8(4,(b?4:0)|(c?1:0)),h.setUint32(5,g.byteLength),0>=a?(e=new Uint8Array(g.byteLength+4),e.set(g),e.set([0,0,0,0],g.byteLength),e):(d=new k(k.METADATA_TAG),d.pts=d.dts=0,d.writeMetaDataDouble("duration",a),f=d.finalize().length,e=new Uint8Array(g.byteLength+f),e.set(g),e.set(h.byteLength,f),e)}},c.prototype=new j,b.exports=c},{"../codecs":14,"../m2ts/m2ts.js":21,"../utils/stream.js":32,"./flv-tag.js":15}],18:[function(a,b){"use strict";var c={codecs:a("./codecs"),mp4:a("./mp4"),flv:a("./flv"),mp2t:a("./m2ts")};b.exports=c},{"./codecs":14,"./flv":16,"./m2ts":20,"./mp4":25}],19:[function(a,b){"use strict";var c=4,d=128,e=a("../utils/stream"),f=a("../codecs"),g=function(a){for(var b=0,e={payloadType:-1,payloadSize:0},f=0,g=0;b<a.byteLength&&a[b]!==d;){for(;255===a[b];)f+=255,b++;for(f+=a[b++];255===a[b];)g+=255,b++;if(g+=a[b++],!e.payload&&f===c){e.payloadType=f,e.payloadSize=g,e.payload=a.subarray(b,b+g);break}b+=g,f=0,g=0}return e},h=function(a){return 181!==a.payload[0]?null:49!==(a.payload[1]<<8|a.payload[2])?null:"GA94"!==String.fromCharCode(a.payload[3],a.payload[4],a.payload[5],a.payload[6])?null:3!==a.payload[7]?null:a.payload.subarray(8,a.payload.length-1)},i=function(a,b){var c,d,e,f,g=[];if(!(64&b[0]))return g;for(d=31&b[0],c=0;d>c;c++)e=3*c,f={type:3&b[e+2],pts:a},4&b[e+2]&&(f.ccData=b[e+3]<<8|b[e+4],g.push(f));return g},j=function(){j.prototype.init.call(this),this.captionPackets_=[],this.field1_=new y,this.field1_.on("data",this.trigger.bind(this,"data")),this.field1_.on("done",this.trigger.bind(this,"done"))};j.prototype=new e,j.prototype.push=function(a){var b,d;a.nalUnitType===f.h264.unitTypes.sei_rbsp&&(b=g(a.escapedRBSP),b.payloadType===c&&(d=h(b),d&&(this.captionPackets_=this.captionPackets_.concat(i(a.pts,d)))))},j.prototype.flush=function(){return this.captionPackets_.length?(this.captionPackets_.sort(function(a,b){return a.pts-b.pts}),this.captionPackets_.forEach(this.field1_.push,this.field1_),this.captionPackets_.length=0,void this.field1_.flush()):void this.field1_.flush()};var k={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608},l=function(a){return null===a?"":(a=k[a]||a,String.fromCharCode(a))},m=0,n=5152,o=5167,p=5157,q=5158,r=5159,s=5165,t=5153,u=5164,v=5166,w=14,x=function(){for(var a=[],b=w+1;b--;)a.push("");return a},y=function(){y.prototype.init.call(this),this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=x(),this.nonDisplayed_=x(),this.lastControlCode_=null,this.push=function(a){if(0===a.type){var b,c,d,e;if(b=32639&a.ccData,b===this.lastControlCode_)return void(this.lastControlCode_=null);switch(this.lastControlCode_=4096===(61440&b)?b:null,b){case m:break;case n:this.mode_="popOn";break;case o:this.flushDisplayed(a.pts),c=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=c,this.startPts_=a.pts;break;case p:this.topRow_=w-1,this.mode_="rollUp";break;case q:this.topRow_=w-2,this.mode_="rollUp";break;case r:this.topRow_=w-3,this.mode_="rollUp";break;case s:this.flushDisplayed(a.pts),this.shiftRowsUp_(),this.startPts_=a.pts;break;case t:"popOn"===this.mode_?this.nonDisplayed_[w]=this.nonDisplayed_[w].slice(0,-1):this.displayed_[w]=this.displayed_[w].slice(0,-1);break;case u:this.flushDisplayed(a.pts),this.displayed_=x();break;case v:this.nonDisplayed_=x();break;default:if(d=b>>>8,e=255&b,d>=16&&23>=d&&e>=64&&127>=e&&(16!==d||96>e)&&(d=32,e=null),(17===d||25===d)&&e>=48&&63>=e&&(d=9834,e=""),16===(240&d))return;this[this.mode_](a.pts,d,e)}}}};y.prototype=new e,y.prototype.flushDisplayed=function(a){var b=this.displayed_.map(function(a){return a.trim()}).filter(function(a){return a.length}).join("\n");b.length&&this.trigger("data",{startPts:this.startPts_,endPts:a,text:b})},y.prototype.popOn=function(a,b,c){var d=this.nonDisplayed_[w];d+=l(b),d+=l(c),this.nonDisplayed_[w]=d},y.prototype.rollUp=function(a,b,c){var d=this.displayed_[w];""===d&&(this.flushDisplayed(a),this.startPts_=a),d+=l(b),d+=l(c),this.displayed_[w]=d},y.prototype.shiftRowsUp_=function(){var a;for(a=0;a<this.topRow_;a++)this.displayed_[a]="";for(a=this.topRow_;w>a;a++)this.displayed_[a]=this.displayed_[a+1];this.displayed_[w]=""},b.exports={CaptionStream:j,Cea608Stream:y}},{"../codecs":14,"../utils/stream":32}],20:[function(a,b){b.exports=a("./m2ts")},{"./m2ts":21}],21:[function(a,b){"use strict";var c,d,e,f=a("../utils/stream.js"),g=a("./caption-stream"),h=a("./stream-types"),i=a("./timestamp-rollover-stream").TimestampRolloverStream,j=a("./stream-types.js"),k=188,l=71;c=function(){var a=new Uint8Array(k),b=0;c.prototype.init.call(this),this.push=function(c){var d,e=0,f=k;for(b?(d=new Uint8Array(c.byteLength+b),d.set(a.subarray(0,b)),d.set(c,b),b=0):d=c;f<d.byteLength;)d[e]!==l||d[f]!==l?(e++,f++):(this.trigger("data",d.subarray(e,f)),e+=k,f+=k);e<d.byteLength&&(a.set(d.subarray(e),0),b=d.byteLength-e)},this.flush=function(){b===k&&a[0]===l&&(this.trigger("data",a),b=0),this.trigger("done")}},c.prototype=new f,d=function(){var a,b,c,e;d.prototype.init.call(this),e=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,a=function(a,d){var e=0;d.payloadUnitStartIndicator&&(e+=a[e]+1),"pat"===d.type?b(a.subarray(e),d):c(a.subarray(e),d)},b=function(a,b){b.section_number=a[7],b.last_section_number=a[8],e.pmtPid=(31&a[10])<<8|a[11],b.pmtPid=e.pmtPid},c=function(a,b){var c,d,f,g;if(1&a[5]){for(e.programMapTable={},c=(15&a[1])<<8|a[2],d=3+c-4,f=(15&a[10])<<8|a[11],g=12+f;d>g;)e.programMapTable[(31&a[g+1])<<8|a[g+2]]=a[g],g+=((15&a[g+3])<<8|a[g+4])+5;for(b.programMapTable=e.programMapTable;e.packetsWaitingForPmt.length;)e.processPes_.apply(e,e.packetsWaitingForPmt.shift())}},this.push=function(b){var c={},d=4;c.payloadUnitStartIndicator=!!(64&b[1]),c.pid=31&b[1],c.pid<<=8,c.pid|=b[2],(48&b[3])>>>4>1&&(d+=b[d]+1),0===c.pid?(c.type="pat",a(b.subarray(d),c),this.trigger("data",c)):c.pid===this.pmtPid?(c.type="pmt",a(b.subarray(d),c),this.trigger("data",c)):void 0===this.programMapTable?this.packetsWaitingForPmt.push([b,d,c]):this.processPes_(b,d,c)},this.processPes_=function(a,b,c){c.streamType=this.programMapTable[c.pid],c.type="pes",c.data=a.subarray(b),this.trigger("data",c)}},d.prototype=new f,d.STREAM_TYPES={h264:27,adts:15},e=function(){var a=this,b={data:[],size:0},c={data:[],size:0},d={data:[],size:0},f=function(a,b){function c(a,b){var c=536870912*(14&a[b])+4194304*(255&a[b+1])+16384*(254&a[b+2])+128*(255&a[b+3])+(254&a[b+4])/2;return c>4294967295&&(c-=8589934592),c}var d;b.dataAlignmentIndicator=0!==(4&a[6]),d=a[7],192&d&&(b.pts=c(a,9),b.dts=64&d?c(a,14):b.pts),b.data=a.subarray(9+a[8])},g=function(b,c){var d,e=new Uint8Array(b.size),g={type:c},h=0;if(b.data.length){for(g.trackId=b.data[0].pid;b.data.length;)d=b.data.shift(),e.set(d.data,h),h+=d.data.byteLength;f(e,g),b.size=0,a.trigger("data",g)}};e.prototype.init.call(this),this.push=function(e){({pat:function(){},pes:function(){var a,f;switch(e.streamType){case h.H264_STREAM_TYPE:case j.H264_STREAM_TYPE:a=b,f="video";break;case h.ADTS_STREAM_TYPE:a=c,f="audio";break;case h.METADATA_STREAM_TYPE:a=d,f="timed-metadata";break;default:return}e.payloadUnitStartIndicator&&g(a,f),a.data.push(e),a.size+=e.data.byteLength},pmt:function(){var b,c,d={type:"metadata",tracks:[]},f=e.programMapTable;for(b in f)f.hasOwnProperty(b)&&(c={timelineStartInfo:{baseMediaDecodeTime:0}},c.id=+b,f[b]===j.H264_STREAM_TYPE?(c.codec="avc",c.type="video"):f[b]===j.ADTS_STREAM_TYPE&&(c.codec="adts",c.type="audio"),d.tracks.push(c));a.trigger("data",d)}})[e.type]()},this.flush=function(){g(b,"video"),g(c,"audio"),g(d,"timed-metadata"),this.trigger("done")}},e.prototype=new f;var m={PAT_PID:0,MP2T_PACKET_LENGTH:k,TransportPacketStream:c,TransportParseStream:d,ElementaryStream:e,TimestampRolloverStream:i,CaptionStream:g.CaptionStream,Cea608Stream:g.Cea608Stream,MetadataStream:a("./metadata-stream")};for(var n in h)h.hasOwnProperty(n)&&(m[n]=h[n]);b.exports=m},{"../utils/stream.js":32,"./caption-stream":19,"./metadata-stream":22,"./stream-types":23,"./stream-types.js":23,"./timestamp-rollover-stream":24}],22:[function(a,b){"use strict";var c,d=a("../utils/stream"),e=a("./stream-types"),f=function(a,b,c){var d,e="";for(d=b;c>d;d++)e+="%"+("00"+a[d].toString(16)).slice(-2);return e},g=function(a,b,c){return decodeURIComponent(f(a,b,c))},h=function(a,b,c){return unescape(f(a,b,c))},i=function(a){return a[0]<<21|a[1]<<14|a[2]<<7|a[3]},j={TXXX:function(a){var b;if(3===a.data[0]){for(b=1;b<a.data.length;b++)if(0===a.data[b]){a.description=g(a.data,1,b),a.value=g(a.data,b+1,a.data.length-1);break}a.data=a.value}},WXXX:function(a){var b;if(3===a.data[0])for(b=1;b<a.data.length;b++)if(0===a.data[b]){a.description=g(a.data,1,b),a.url=g(a.data,b+1,a.data.length);break}},PRIV:function(a){var b;for(b=0;b<a.data.length;b++)if(0===a.data[b]){a.owner=h(a.data,0,b);break}a.privateData=a.data.subarray(b+1),a.data=a.privateData}};c=function(a){var b,d={debug:!(!a||!a.debug),descriptor:a&&a.descriptor},f=0,g=[],h=0;if(c.prototype.init.call(this),this.dispatchType=e.METADATA_STREAM_TYPE.toString(16),d.descriptor)for(b=0;b<d.descriptor.length;b++)this.dispatchType+=("00"+d.descriptor[b].toString(16)).slice(-2);this.push=function(a){var b,c,e,k,l,m;if("timed-metadata"===a.type){if(a.dataAlignmentIndicator&&(h=0,g.length=0),0===g.length&&(a.data.length<10||a.data[0]!=="I".charCodeAt(0)||a.data[1]!=="D".charCodeAt(0)||a.data[2]!=="3".charCodeAt(0)))return void d.debug;if(g.push(a),h+=a.data.byteLength,1===g.length&&(f=i(a.data.subarray(6,10)),f+=10),!(f>h)){for(b={data:new Uint8Array(f),frames:[],pts:g[0].pts,dts:g[0].dts},l=0;f>l;)b.data.set(g[0].data.subarray(0,f-l),l),l+=g[0].data.byteLength,h-=g[0].data.byteLength,g.shift();c=10,64&b.data[5]&&(c+=4,c+=i(b.data.subarray(10,14)),f-=i(b.data.subarray(16,20)));do{if(e=i(b.data.subarray(c+4,c+8)),1>e)return void 0;if(m=String.fromCharCode(b.data[c],b.data[c+1],b.data[c+2],b.data[c+3]),k={id:m,data:b.data.subarray(c+10,c+e+10)},k.key=k.id,j[k.id]&&(j[k.id](k),"com.apple.streaming.transportStreamTimestamp"===k.owner)){var n=k.data,o=(1&n[3])<<30|n[4]<<22|n[5]<<14|n[6]<<6|n[7]>>>2;o*=4,o+=3&n[7],k.timeStamp=o,this.trigger("timestamp",k)}b.frames.push(k),c+=10,c+=e}while(f>c);this.trigger("data",b)}}}},c.prototype=new d,b.exports=c},{"../utils/stream":32,"./stream-types":23}],23:[function(a,b){"use strict";b.exports={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21}},{}],24:[function(a,b){"use strict";var c=a("../utils/stream"),d=8589934592,e=4294967296,f=function(a,b){var c=1;for(a>b&&(c=-1);Math.abs(b-a)>e;)a+=c*d;return a},g=function(a){var b,c;g.prototype.init.call(this),this.type_=a,this.push=function(a){a.type===this.type_&&(void 0===c&&(c=a.dts),a.dts=f(a.dts,c),a.pts=f(a.pts,c),b=a.dts,this.trigger("data",a))},this.flush=function(){c=b,this.trigger("done")}};g.prototype=new c,b.exports={TimestampRolloverStream:g,handleRollover:f}},{"../utils/stream":32}],25:[function(a,b){b.exports={generator:a("./mp4-generator"),Transmuxer:a("./transmuxer").Transmuxer,AudioSegmentStream:a("./transmuxer").AudioSegmentStream,VideoSegmentStream:a("./transmuxer").VideoSegmentStream,tools:a("../tools/mp4-inspector"),MP4ParserStream:a("./mp4-parser").MP4ParserStream,MP4BuilderStream:a("./mp4-parser").MP4BuilderStream}},{"../tools/mp4-inspector":30,"./mp4-generator":26,"./mp4-parser":27,"./transmuxer":28}],26:[function(a,b){"use strict";function c(a){return[a>>>24&255,a>>>16&255,a>>>8&255,255&a]}function d(a){return[a>>>8&255,255&a]}var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V=Math.pow(2,32)-1;T=window.Uint8Array,U=window.DataView,function(){var a;if(F={avc1:[],avcC:[],btrt:[],cslg:[],dinf:[],dref:[],edts:[],elst:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trep:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof T){for(a in F)F.hasOwnProperty(a)&&(F[a]=[a.charCodeAt(0),a.charCodeAt(1),a.charCodeAt(2),a.charCodeAt(3)]);G=new T(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),I=new T(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),H=new T([0,0,0,1]),J=new T([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),K=new T([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),L={video:J,audio:K},O=new T([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),N=new T([0,0,0,0,0,0,0,0]),P=new T([0,0,0,0,0,0,0,0]),Q=P,R=new T([0,0,0,0,0,0,0,0,0,0,0,0]),S=P,M=new T([0,0,0,1,0,0,0,0,0,0,0,0])}}(),e=function(a){var b,c,d,e=[],f=0;for(b=1;b<arguments.length;b++)e.push(arguments[b]);for(b=e.length;b--;)f+=e[b].byteLength;for(c=new T(f+8),d=new U(c.buffer,c.byteOffset,c.byteLength),d.setUint32(0,c.byteLength),c.set(a,4),b=0,f=8;b<e.length;b++)c.set(e[b],f),f+=e[b].byteLength;return c},f=function(a){var b={};for(var c in a)b[c]=a[c]>>>0;return e(F.cslg,new T([0,0,0,0,b.ctts_shift>>>24&255,b.ctts_shift>>>16&255,b.ctts_shift>>>8&255,255&b.ctts_shift,b.min_ctts>>>24&255,b.min_ctts>>>16&255,b.min_ctts>>>8&255,255&b.min_ctts,b.max_ctts>>>24&255,b.max_ctts>>>16&255,b.max_ctts>>>8&255,255&b.max_ctts,b.min_cts>>>24&255,b.min_cts>>>16&255,b.min_cts>>>8&255,255&b.min_cts,b.max_cts>>>24&255,b.max_cts>>>16&255,b.max_cts>>>8&255,255&b.max_cts]))},g=function(){return e(F.dinf,e(F.dref,O))},j=function(a){return e(F.edts,k(a))},k=function(a){var b,f=a.edit_list.length,g=[0,0,0,0].concat(c(f));for(b=0;f>b;b++)g=g.concat(c(a.edit_list[b].segment_duration)).concat(c(a.edit_list[b].media_time)).concat(d(a.edit_list[b].media_rate)).concat(d(0));return e(F.elst,new T(g))},h=function(a){return e(F.esds,new T([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,a.audioobjecttype<<3|a.samplingfrequencyindex>>>1,a.samplingfrequencyindex<<7|a.channelcount<<3,6,1,2]))},i=function(a){a=a||{};var b=a.compatible||[G,I];return b=b.slice(0),b.unshift(F.ftyp,a.major||G,H),e.apply(null,b)},w=function(a){return e(F.hdlr,L[a])},l=function(a){return e(F.mdat,a)},v=function(a){var b=new T([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,a.duration>>>24&255,a.duration>>>16&255,a.duration>>>8&255,255&a.duration,85,196,0,0]);return a.samplerate&&(b[12]=a.samplerate>>>24&255,b[13]=a.samplerate>>>16&255,b[14]=a.samplerate>>>8&255,b[15]=255&a.samplerate),e(F.mdhd,b)},u=function(a){return e(F.mdia,v(a),w(a.type),n(a))},m=function(a){return e(F.mfhd,new T([0,0,0,0,(4278190080&a)>>24,(16711680&a)>>16,(65280&a)>>8,255&a]))},n=function(a){return e(F.minf,"video"===a.type?e(F.vmhd,M):e(F.smhd,N),g(),y(a))},o=function(a,b,c){var d=[],f=b.length;for(c=c||{};f--;)d[f]=B(b[f],c);return e.apply(null,[F.moof,m(a)].concat(d))},p=function(a,b){var c=a.length,d=[],f=0;for(b=b||{};c--;)d[c]=s(a[c]),b.set_duration&&(f=Math.max(f,Math.floor(9e4*a[c].duration/a[c].samplerate)));return f=b.duration||f||4294967295,e.apply(null,[F.moov,r(f)].concat(d).concat(q(a)))},q=function(a){for(var b=a.length,c=[];b--;)c[b]=D(a[b]),a[b].cslg&&a[b].cslg.max_cts&&c.push(C(a[b]));return e.apply(null,[F.mvex].concat(c))},r=function(a){var b=new T([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&a)>>24,(16711680&a)>>16,(65280&a)>>8,255&a,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return e(F.mvhd,b)},x=function(a){var b,c,d=a.samples||[],f=new T(4+d.length);for(c=0;c<d.length;c++)b=d[c].flags,f[c+4]=b.isLeading<<6|b.dependsOn<<4|b.isDependedOn<<2|b.hasRedundancy;return e(F.sdtp,f)},y=function(a){return e(F.stbl,z(a),e(F.stts,S),e(F.stsc,Q),e(F.stsz,R),e(F.stco,P))},function(){var a,b;z=function(c){return e(F.stsd,new T([0,0,0,0,0,0,0,1]),"video"===c.type?a(c):b(c))},a=function(a){var b,c=a.sps||[],d=a.pps||[],f=[],g=[];for(b=0;b<c.length;b++)f.push((65280&c[b].byteLength)>>>8),f.push(255&c[b].byteLength),f=f.concat(Array.prototype.slice.call(c[b]));for(b=0;b<d.length;b++)g.push((65280&d[b].byteLength)>>>8),g.push(255&d[b].byteLength),g=g.concat(Array.prototype.slice.call(d[b]));return e(F.avc1,new T([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&a.width)>>8,255&a.width,(65280&a.height)>>8,255&a.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),e(F.avcC,new T([1,a.profileIdc,a.profileCompatibility,a.levelIdc,255].concat([224|c.length]).concat(f).concat([d.length]).concat(g))),e(F.btrt,new T([0,28,156,128,0,45,198,192,0,45,198,192])))},b=function(a){return e(F.mp4a,new T([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&a.channelcount)>>8,255&a.channelcount,(65280&a.samplesize)>>8,255&a.samplesize,0,0,0,0,(65280&a.samplerate)>>8,255&a.samplerate,0,0]),h(a))}}(),A=function(){return e(F.styp,G,H,G)},t=function(a){var b=a.duration;a.samplerate&&(b=Math.floor(9e4*b/a.samplerate));var c=new T([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&a.id)>>24,(16711680&a.id)>>16,(65280&a.id)>>8,255&a.id,0,0,0,0,(4278190080&a.duration)>>24,(16711680&a.duration)>>16,(65280&a.duration)>>8,255&a.duration,0,0,0,0,0,0,0,0,0,0,0,0,+("audio"==a.type),0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&a.width)>>8,255&a.width,0,0,(65280&a.height)>>8,255&a.height,0,0]);return e(F.tkhd,c)},B=function(a,b){var c,d,f,g,h,i,j;return b=b||{},c=e(F.tfhd,new T([0,b.no_multi_init?2:0,0,58,(4278190080&a.id)>>24,(16711680&a.id)>>16,(65280&a.id)>>8,255&a.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),i=Math.floor(a.baseMediaDecodeTime/(V+1)),j=Math.floor(a.baseMediaDecodeTime%(V+1)),d=e(F.tfdt,new T([1,0,0,0,i>>>24&255,i>>>16&255,i>>>8&255,255&i,j>>>24&255,j>>>16&255,j>>>8&255,255&j])),h=92,"audio"===a.type?(f=E(a,h),e(F.traf,c,d,f)):(g=x(a),f=E(a,g.length+h),e(F.traf,c,d,f,g))},s=function(a){a.duration=a.duration||4294967295;var b=[F.trak,t(a),u(a)];return a.edit_list&&a.edit_list.length&&b.splice(2,0,j(a)),e.apply(null,b)},C=function(a){return e(F.trep,new T([0,0,0,0,(4278190080&a.id)>>24,(16711680&a.id)>>16,(65280&a.id)>>8,255&a.id]),f(a.cslg))},D=function(a){var b=new T([0,0,0,0,(4278190080&a.id)>>24,(16711680&a.id)>>16,(65280&a.id)>>8,255&a.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==a.type&&(b[b.length-1]=0),e(F.trex,b)},E=function(a,b){function c(a){return("duration"in a&&1)|("size"in a&&2)|("flags"in a&&4)|("compositionTimeOffset"in a&&8)}function d(a,b,c){return[0,0,c,1,(4278190080&a.length)>>>24,(16711680&a.length)>>>16,(65280&a.length)>>>8,255&a.length,(4278190080&b)>>>24,(16711680&b)>>>16,(65280&b)>>>8,255&b]}var f=a.samples||[],g=c(f[0]||{});b+=20+4*f.length*((g>>3&1)+(g>>2&1)+(g>>1&1)+(1&g));for(var h=d(f,b,g),i=!1,j=0;j<f.length;j++){var k=f[j];1&g&&h.push(k.duration>>24&255,k.duration>>16&255,k.duration>>8&255,255&k.duration),2&g&&h.push(k.size>>24&255,k.size>>16&255,k.size>>8&255,255&k.size),4&g&&h.push(k.flags.isLeading<<2|k.flags.dependsOn,k.flags.isDependedOn<<6|k.flags.hasRedundancy<<4|k.flags.paddingValue<<1|k.flags.isNonSyncSample,k.flags.degradationPriority>>8&255,255&k.flags.degradationPriority),8&g&&(i=i||k.compositionTimeOffset<0,h.push(k.compositionTimeOffset>>24&255,k.compositionTimeOffset>>16&255,k.compositionTimeOffset>>8&255,255&k.compositionTimeOffset))}return h[0]=+!!i,e(F.trun,new T(h))},b.exports={ftyp:i,mdat:l,moof:o,moov:p,initSegment:function(a,b){var c,d=i(b),e=p(a,b);return c=new T(d.byteLength+e.byteLength),c.set(d),c.set(e,d.byteLength),c}}},{}],27:[function(a,b){"use strict";function c(a){return("0"+a.toString(16)).slice(-2)}function d(a){return String.fromCharCode(a>>24&255,a>>16&255,a>>8&255,255&a)}function e(a,b){return a.getUint32(b+4)+4294967296*a.getUint32(b)}function f(a,b){var c=a.getUint8(b);return 128>c?e(a,b):a.getUint32(b+4)+4294967296*(a.getUint32(b)-4294967296)}function g(a,b,c){var d=0,e=8*c;this.read=function(c,e){for(var f=0,g=d>>3,h=7-d%8,i=0,j=a.getUint8(g+b);c>i;i++,h--)f=f<<1|j>>h&1,h||(g++,h=8,j=a.getUint8(g+b));return e||(d+=c),f},this.bits=function(){return e-d}}function h(a){var b=a.view,c=a.ptr,d="tkhd"==a.type;return a.ver?[e(b,c),e(b,c+8),b.getUint32(c+16),e(b,c+(d?24:20))]:[b.getUint32(c),b.getUint32(c+4),b.getUint32(c+8),b.getUint32(c+(d?16:12))]}function i(a,b,c,d){for(var e=0;c>e;e++)d[e]=a.getUint32(b+4*e)}var j=a("../utils/stream.js"),k=a("./mp4-generator.js"),l={vide:"video",soun:"audio"},m=["meta","mvhd","tkhd","mdhd","smhd","vmhd","dref","hdlr","stsd","esds","stts","stps","stss","ctts","stsc","stsz","stco","esds","elst","nmhd","cslg","sdtp","co64"],n=["udta","smhd","vmhd","dref","iods","btrt","pasp","clap","uuid","colr","sbgp","sgpd","gmhd","tref","nmhd","svcC","hmhd","fiel","tapt","load","meta","sefd","beam","tgas","elng"],o={trak:{name:"track_info",multi:1},edts:{name:"edit_list"},exts:{name:"edit_list"},mdia:{name:"media_box"},minf:{name:"media_info"},dinf:{name:"data_info"},stbl:{name:"sample_table"}},p=function(){};p.prototype={},p.prototype.header=function(a){for(;a.ptr+a.buffer.b_pos>=a.branch.last;)"movie_box"==a.branch._id&&(a.root.h_parsed=!0),
a.branch=a.branch.parent;if(a.type=null,a.offset=8,a.buffer.b_size-a.ptr<8)return a.offset=0;if(a.size=a.view.getUint32(a.ptr),1==a.size){if(a.offset=16,a.buffer.b_size-a.ptr<16)return a.offset=0;a.size=(a.view.getUint32(a.ptr+8)<<32)+a.view.getUint32(a.ptr+12)}if(a.type=d(a.view.getUint32(a.ptr+4)),m.includes(a.type)){if(a.offset+=4,a.buffer.b_size-a.ptr<a.offset)return a.offset=0;var b=a.view.getUint8(a.ptr+a.offset-4);a.ver=b>>>24,a.flags=b&&16777215}a.size-=a.offset,a.ptr+=a.offset},p.prototype.parse=function(a){if(!this[a.type])throw new Error("Unknown box type: "+a.type);this[a.type](a)},n.forEach(function(a){p.prototype[a]=function(b){var c=b.branch[a]=new Uint8Array(b.size);c.set(b.buffer._buff.subarray(b.ptr,b.ptr+b.size))}}),Object.keys(o).forEach(function(a){p.prototype[a]=function(b){var c=o[a];b.branch[c.name]=b.branch[c.name]||(c.multi?[]:{});var d=b.branch[c.name];c.multi&&(d.push({}),d=d[d.length-1]),d.parent=b.branch,d.last=b.buffer.b_pos+b.ptr+b.size,d._id=c.name,b.branch=d,b.size=0}}),p.prototype.moov=function(a){var b=a.branch.movie_box=a.branch.movie_box||{};b.parent=a.branch,b.last=a.buffer.b_pos+a.ptr+a.size,b._id="movie_box",a.buffer.b_pos<256?a.branch.start_hdr_sz=a.size:a.branch.end_hdr_sz=a.size,a.branch=b,a.size=0},p.prototype.ftyp=function(a){a.branch.major_brand=d(a.view.getUint32(a.ptr)),a.branch.minor_version=a.view.getUint32(a.ptr+4),a.branch.compatible=[a.branch.major_brand];for(var b=8;b<a.size;b+=4)a.branch.compatible.push(d(a.view.getUint32(a.ptr+b)))},p.prototype.mdat=function(){},p.prototype.free=function(){},p.prototype.wide=function(){},p.prototype.skip=function(){},p.prototype.mvhd=function(a){var b=a.view,c=a.ptr,d=a.ver?28:16,e=a.branch.mv_hdr={},f=h(a);e.creation_time=f[0],e.modification_time=f[1],e.time_scale=f[2],e.duration=f[3],c+=d,e.rate=b.getUint32(c)/65536,e.volume=b.getUint16(c+4)/256,i(a.view,c+16,9,e.matrix=[]),e.next_track=b.getUint32(c+76)},p.prototype.tkhd=function(a){var b=a.view,c=a.ptr,d=a.ver?40:28,e=a.branch.tk_hdr={},f=h(a);e.enabled=!!(1&a.flags),e.in_movie=!!(2&a.flags),e.in_preview=!!(4&a.flags),e.creation_time=f[0],e.modification_time=f[1],e.track_id=f[2],e.duration=f[3],c+=d,e.layer=b.getUint16(c),e.alternate_group=b.getUint16(c+2),e.volume=b.getInt16(c+4)/256,i(a.view,c+8,9,e.matrix=[]),e.width=b.getUint32(c+44)/65536,e.height=b.getUint32(c+48)/65536},p.prototype.mdhd=function(a){var b=a.view,c=a.ptr,d=a.ver?28:16,e=a.branch.md_hdr={},f=h(a);e.creation_time=f[0],e.modification_time=f[1],e.time_scale=f[2],e.duration=f[3];var g=b.getUint16(c+d);e.lang=String.fromCharCode(g>>10|96,g>>5&31|96,31&g|96)},p.prototype.elst=function(a){var b=a.view,c=a.ptr+4,d=b.getUint32(a.ptr);a.branch.list=[];for(var g=0;d>g;c+=4,g++){var h={};h.segment_duration=a.ver?e(b,c):b.getUint32(c),h.media_time=a.ver?f(b,c+8):b.getInt32(c+4),c+=a.ver?16:8,h.media_rate=b.getInt16(c),a.branch.list.push(h)}},p.prototype.cslg=function(a){var b=a.view,c=a.ptr;a.branch.cslg={ctts_shift:b.getInt32(c),min_ctts:b.getInt32(c+4),max_ctts:b.getInt32(c+8),min_cts:b.getInt32(c+12),max_cts:b.getInt32(c+16)}},p.prototype.hdlr=function(a){a.branch.handler=d(a.view.getUint32(a.ptr+4))},p.prototype._parse_avcc=function(a,b){var c=a.view,d=a.ptr,e=b.sps=[],f=b.pps=[];b.avc_p_i=c.getUint8(d+1),b.prof_compat=c.getUint8(d+2),b.avc_l_i=c.getUint8(d+3),b.l_size_m_1=3&c.getUint8(d+4),b.n_sps=31&c.getUint8(d+5);for(var g=6,h=0;h<b.n_sps;h++)e[h]={l:c.getUint16(d+g)},g+=2,e[h].nal=new Uint8Array(a.buffer._buff.subarray(d+g,d+g+e[h].l)),g+=e[h].l;for(b.n_pps=c.getUint8(d+g++),h=0;h<b.n_pps;h++)f[h]={l:c.getUint16(d+g)},g+=2,f[h].nal=new Uint8Array(a.buffer._buff.subarray(d+g,d+g+f[h].l)),g+=f[h].l},p.prototype._parse_esds=function(a,b){for(var c=a.view,d=a.ptr;d<a.ptr+a.size;){var e,f=c.getUint8(d++),h=0;do e=c.getUint8(d++),h=(h<<7)+(127&e);while(128&e);switch(f){case 3:b.es_id=c.getUint16(d);var i=c.getUint8(d+2);d+=3+(i>>6&2)+(i>>4&2);break;case 4:b.obj_t=c.getUint8(d),b.str_t=63&c.getUint8(d+1),d+=13;break;case 5:var j,k=new g(c,d,h);if(b.aot=k.read(5),31==b.aot&&(b.aot=32+k.read(6)),b.freq=k.read(4),15==b.freq&&(b.freq=k.read(24)),b.channel=k.read(4),(5==b.aot||29==b.aot)&&(j=5,15==(b.ext_freq_index=k.read(4))&&(b.ext_freq=k.read(24)),b.aot=k.read(5),31==b.aot&&(b.aot=32+k.read(6))),5!=j&&36!=b.aot)for(;k.bits()>=16;)695==k.read(11,1)?(k.read(11),5==k.read(5)&&k.read(1)&&(15==k.read(4)&&k.read(24),k.bits()>=12&&1352==k.read(11)&&1!=k.read(1)&&(b.dsi=5))):k.read(1);d+=h;break;default:d+=h}}},p.prototype.stsd=function(a){var b,c,d=a.view,e=d.getUint32(a.ptr),f=a.branch.parent.parent.handler;for(a.branch.list={},a.ptr+=4,b=0;e>b;b++){this.header(a);var g={},h=d.getUint16(a.ptr+6),i=a.ptr+a.size;switch(f){case"vide":for(g.width=d.getUint16(a.ptr+24),g.height=d.getUint16(a.ptr+26),g.h_res=d.getUint32(a.ptr+28)/65536,g.v_res=d.getUint32(a.ptr+32)/65536,g.f_count=d.getUint16(a.ptr+40),g.compressor="",c=0;32>c;c++){var j=d.getUint8(a.ptr+42+c);if(!j)break;g.compressor+=String.fromCharCode()}g.depth=d.getUint16(a.ptr+74);for(var k=[1668246642,1668047216,1885434736,1718183276];k.includes(d.getUint32(a.ptr+82));)a.ptr+=d.getUint32(a.ptr+78);1635148611==d.getUint32(a.ptr+82)&&(g.avcc={},a.ptr+=78,this.header(a),this._parse_avcc(a,g.avcc));break;case"soun":for(g.c_count=d.getUint16(a.ptr+16),g.s_size=d.getUint16(a.ptr+18),g.s_rate=d.getUint32(a.ptr+24)/65536,c=32;c<a.size-12;c++)if(1702061171==d.getUint32(a.ptr+c)){g.esds={},a.ptr+=c-4,this.header(a),this._parse_esds(a,g.esds);break}}a.ptr=i,a.branch.list[h]=g}a.size=0},p.prototype.stts=function(a){var b=a.view.getUint32(a.ptr),c=a.ptr+4;a.branch.dtts=[];for(var d=0;b>d;d++)for(var e=a.view.getUint32(a.ptr+4+8*d),f=a.view.getUint32(c+8*d+4),g=0;e>g;g++)a.branch.dtts.push(f)},p.prototype.ctts=function(a){var b=a.view.getUint32(a.ptr),c=a.ptr+4;a.branch.ctts=[];for(var d=0;b>d;d++)for(var e=a.view.getUint32(c+8*d),f=a.view.getInt32(c+8*d+4),g=0;e>g;g++)a.branch.ctts.push(f)},p.prototype.stsc=function(a){for(var b=a.view.getUint32(a.ptr),c=a.branch.s_t_c=[],d=a.view,e=a.ptr+4,f=0;b>f;f++)c[f]={f_c:d.getUint32(e+12*f),s_p_c:d.getUint32(e+12*f+4),s_d_i:d.getUint32(e+12*f+8)};c.sort(function(a,b){return a.f_c-b.f_c})},p.prototype.stss=function(a){i(a.view,a.ptr+4,a.view.getUint32(a.ptr),a.branch.s_sync=[])},p.prototype.stps=function(a){i(a.view,a.ptr+4,a.view.getUint32(a.ptr),a.branch.s_psync=[])},p.prototype.sdtp=function(a){a.branch.s_dep=[];for(var b=0;b<a.size;b++){var c=a.view.getUint8(a.ptr+b);a.branch.s_dep[b]={red:3&c,is_dep:c>>2&3,dep:c>>4&3,lead:c>>6&3}}},p.prototype.stsz=function(a){var b=a.view.getUint32(a.ptr);if(a.branch.s_sz=[],a.branch.s_count=a.view.getUint32(a.ptr+4),b)for(var c=0;c<a.branch.s_count;c++)a.branch.s_sz.push(b);else i(a.view,a.ptr+8,a.branch.s_count,a.branch.s_sz)},p.prototype.stco=function(a){i(a.view,a.ptr+4,a.view.getUint32(a.ptr),a.branch.c_off=[])},p.prototype.co64=function(a){var b=a.view.getUint32(a.ptr);a.branch.c_off=[];for(var c=0;b>c;c++)a.branch.c_off[c]=e(a.view,a.ptr+4+8*c)};var q=function(a){this.conf_update(a)};q.prototype={},q.prototype.conf_update=function(a){this.break_on_count=a.break_on_count,this.frag_size=a.frag_size||10},q.prototype.process=function(a){var b={type:"metadata",tracks:[],brands:["iso5","iso6"],matrix:a.root.movie_box.mv_hdr.matrix,start_hdr_sz:a.root.start_hdr_sz,end_hdr_sz:a.root.end_hdr_sz},d=this;b.duration=Math.floor(9e4*a.root.movie_box.mv_hdr.duration/a.root.movie_box.mv_hdr.time_scale),b.timescale=9e4,b.s_info=this.s_info=[],b.s_p=this.s_p=[],a.root.movie_box.track_info.forEach(function(e){if(["vide","soun"].includes(e.media_box.handler)){var f={id:e.tk_hdr.track_id,ts:e.media_box.md_hdr.time_scale,type:e.media_box.handler,s_off:[],s_time:[],s_dri:[],s_sync:e.media_box.media_info.sample_table.s_sync||[],s_psync:e.media_box.media_info.sample_table.s_psync||[],s_sz:e.media_box.media_info.sample_table.s_sz,s_dep:e.media_box.media_info.sample_table.s_dep||[],s_ctts:e.media_box.media_info.sample_table.ctts||[],s_cslg:e.media_box.media_info.sample_table.cslg||{},s_list:e.media_box.media_info.sample_table.list};e.edit_list&&e.edit_list.list.length&&(f.elst=e.edit_list.list);for(var g=e.media_box.media_info.sample_table.c_off,h=e.media_box.media_info.sample_table.s_t_c,i=e.media_box.media_info.sample_table.dtts,j=1,k=0,m=0,n=Array.isArray(f.s_sz),o=0;o<h.length;o++)for(;j<(h[o+1]?h[o+1].f_c:g.length+1);j++)for(var p=g[j-1],q=0;q<h[o].s_p_c;q++)f.s_off[k]=p,f.s_time[k]=m,f.s_dri[k]=h[o].s_d_i,m+=i[k],p+=n?f.s_sz[k++]:f.s_sz;d.s_info.push(f),d.s_p.push({s:0,max_t:0}),"vide"==f.type&&(b.v_idx=d.v_idx=d.s_info.length-1);var r=f.s_list[1],s={id:f.id,type:l[f.type],edit_list:f.elst,cslg:f.s_cslg,dr:r,timelineStartInfo:{baseMediaDecodeTime:0},bitrate:Math.floor(8*f.s_sz.reduce(function(a,b){return a+b})*f.ts/e.media_box.md_hdr.duration),duration:"soun"==f.type?e.media_box.md_hdr.duration:Math.floor(9e4*e.media_box.md_hdr.duration/f.ts),samplerate:"soun"==f.type?f.ts:9e4,matrix:e.tk_hdr.matrix,track_width:e.tk_hdr.width,track_height:e.tk_hdr.height,nb_samples:f.s_time.length};if("soun"==f.type){var t=r.esds.dsi||r.esds.aot;s.codec="mp4a."+c(r.esds.obj_t.toString(16))+(t?"."+t:""),s.s_i=new Uint8Array([r.esds.aot<<3|r.esds.freq>>>1,r.esds.freq<<7|r.esds.channel<<3])}else{s.codec="avc1."+c(r.avcc.avc_p_i)+c(r.avcc.prof_compat)+c(r.avcc.avc_l_i);var u=[1,r.avcc.avc_p_i,r.avcc.avc_prof_compat,r.avcc.avc_l_i,255,r.avcc.sps.length+224];r.avcc.sps.forEach(function(a){u=u.concat([a.nal.length>>8,255&a.nal.length]),Array.prototype.push.apply(u,a.nal)}),u.push(r.avcc.pps.length),r.avcc.pps.forEach(function(a){u=u.concat([a.nal.length>>8,255&a.nal.length]),Array.prototype.push.apply(u,a.nal)}),s.s_i=new Uint8Array(u)}if(s.edit_list&&s.edit_list.forEach(function(b){"soun"!=f.type&&(b.media_time=Math.floor(9e4*b.media_time/f.ts)),b.segment_duration=Math.floor(9e4*b.segment_duration/a.root.movie_box.mv_hdr.time_scale)}),s.cslg)for(var v in s.cslg)s.cslg[v]=Math.floor(9e4*s.cslg[v]/f.ts);b.tracks.push(s)}}),a.stream.trigger("data",b)},q.prototype.parse=function(a){this.s_info||this.process(a);for(var b,c=a.buffer.b_pos,d=a.buffer.b_size+c,e=-1,f=0,g=!1;e;)for(e=0,b=0;b<this.s_p.length;b++){var h=this.s_info[b],i=this.s_p[b].s,j=h.s_off[i],k=h.s_sz[i],m=h.s_time;if(j>=c&&d>=j+k){this.s_p[b].s++,e++;var n={trackId:h.id};n.type=l[h.type],n.dts=m[i],n.pts=n.dts+(h.s_ctts[i]||0),n.duration=i==m.length-1?m[i]-m[i-1]:m[i+1]-m[i],n.size=k,this.s_p[b].max_t=n.dts/h.ts,n.data=a.buffer._buff.subarray(j-c,j+k-c),n.dr=h.s_list[h.s_dri[i]],n.ts=h.ts,n.synced=!h.s_sync.length||h.s_sync.includes(i+1),n.sn=i,n.dep=h.s_dep[i],"vide"==h.type&&(this.break_on_count?i%this.frag_size===0:i&&n.synced)&&a.stream.flush(),a.stream.trigger("data",n),f=j+k-c}else j+k>d&&b==this.v_idx&&(g=!0)}f&&a.buffer.advance(f);var o=1/0;for(b=0;b<this.s_p.length;b++)this.s_p[b].s!=this.s_info[b].s_off.length?o=Math.min(o,this.s_info[b].s_off[this.s_p[b].s]):this.s_p[b].finish=!0;return o==1/0&&a.stream.flush(),(o==1/0||o>=c&&d>o)&&(o=d),o},q.prototype.seek=function(a,b){function c(a,b,c){var d,e,f,g,h,i,j=c&&b.s_sync.length>0,k=("soun"==b.type,b.ts/9e4);for(d=0,e=j?b.s_sync.length:b.s_time.length,i=Math.floor(a*k);e-1>d;)if(g=d+e>>1,f=j?b.s_sync[g]-1:g,(h=b.s_time[f]+(0|b.s_ctts[f]))>i)e=g;else if(d=g,h==i)break;var l=j?b.s_sync[d]-1:d;if(i=h=b.s_time[l]+(0|b.s_ctts[l]),!j&&b.s_ctts.length){for(f=d-1;f>d-10;f--)b.s_time[f]+(0|b.s_ctts[f])>i&&(l=f);for(f=l;d+10>f;f++)h=b.s_time[f]+(0|b.s_ctts[f]),h>(0|(b.s_cslg&&b.s_cslg.min_ctts))&&i>h&&(i=h)}return{sn:l,min_t:i/b.ts}}if(!this.s_info)throw new Error("No metadata information for seeking");var d=9e4*a,e=1/0;if(void 0!==this.v_idx){var f=this.s_info[this.v_idx],g=c(d,f,b),h=g.sn;this.s_p[this.v_idx].s=h,this.s_p[this.v_idx].max_t=(f.s_time[h]+(0|f.s_ctts[h]))/f.ts,d=9e4*g.min_t,e=f.s_off[h]}var i=this;return this.s_info.forEach(function(a,f){if(f!=i.v_idx){var g=c(d,a,b).sn;i.s_p[f].s=g,i.s_p[f].max_t=(a.s_time[g]+(0|a.s_ctts[g]))/a.ts,e=Math.min(a.s_off[g],e)}}),{offset:e,time:this.s_p[void 0!==this.v_idx?this.v_idx:0].max_t}};var r=function(){this._buff=new Uint8Array(3145728),this.b_pos=0,this.b_size=0,this.pos=0};r.prototype={},r.prototype.advance=function(a){this._buff.set(this._buff.subarray(a,this.b_size)),this.b_pos+=a,this.b_size-=a},r.prototype.push=function(a){for(var b,c=a.length;c+this.b_size>this._buff.length;)b=new Uint8Array(2*this._buff.length),b.set(this._buff),this._buff=b;this.pos<this.b_pos+this.b_size&&this.pos+c>=this.b_pos?(b=new Uint8Array(Math.max(this.pos+c,this.b_pos+this.b_size)-Math.min(this.pos,this.b_pos)),this.pos<=this.b_pos?(b.set(a),this.pos+c<this.b_pos+this.b_size&&b.set(this._buff.subarray(this.pos+c-this.b_pos,this.b_size),c)):(b.set(this._buff.subarray(0,this.pos-this.b_pos)),b.set(a,this.pos-this.b_pos)),this._buff.set(b),this.b_size=b.length,b=null,this.b_pos=Math.min(this.b_pos,this.pos)):this.pos==this.b_pos+this.b_size?(this._buff.set(a,this.b_size),this.b_size+=c):(this._buff.set(a),this.b_size=c,this.b_pos=this.pos),this.view=new DataView(this._buff.buffer,this._buff.byteOffset,this.b_size)};var s=function(a){return this instanceof s?(s.prototype.init.call(this),this.buffer=new r,this.b_parser=new p,this.c_parser=new q(a),this.on("confupdate",function(a){this.c_parser.conf_update(a)}),this.metadata={},this.buffer.pos=a.pos||0,void(a.metadata&&(this.metadata.h_parsed=!0,this.c_parser.s_info=a.metadata.s_info.slice(),this.c_parser.s_p=a.metadata.s_p.slice(),this.c_parser.v_idx=a.metadata.v_idx))):new s(a)};s.prototype=new j,s.prototype.constructor=s,s.prototype.get_tl=function(a){if(!this.metadata.h_parsed)throw new Error("No metadata information for time map");var b=this.c_parser.s_info.filter(function(b){return b.id==a});if(!b.length)throw new Error("No track information for time map");return{offset:b[0].s_off.slice(0),time:b[0].s_time.map(function(a){return a/b[0].ts})}},s.prototype.push=function(a){this.buffer.push(a);for(var b={root:this.metadata,branch:this.metadata,buffer:this.buffer,view:this.buffer.view,stream:this,ptr:0};!this.metadata.h_parsed&&(this.b_parser.header(b),b.type&&!(b.size+b.ptr>this.buffer.b_size));)this.b_parser.parse(b),b.ptr+=b.size;return this.metadata.h_parsed?this.buffer.pos=this.c_parser.parse(b):(this.buffer.advance(b.ptr-b.offset),this.buffer.pos="mdat"==b.type?b.ptr+b.size:this.buffer.b_pos+this.buffer.b_size),this.buffer.pos},s.prototype.seek=function(a,b){this.trigger("data",{type:"seek"});var c=this.c_parser.seek(a,b);return this.buffer.pos=c.offset,c};var t=function(){return this instanceof t?void t.prototype.init.call(this):new t};t.prototype=new j,t.prototype.constructor=t,t.prototype.push=function(a){if("audio"==a.type){var b=9e4/a.ts;a.pts=Math.floor(a.pts*b),a.dts=Math.floor(a.dts*b),this.trigger("data",{type:"audio",samplerate:a.dr.s_rate,samplesize:a.dr.s_size,audioobjecttype:a.dr.esds.aot,samplingfrequencyindex:a.dr.esds.freq,channelcount:a.dr.esds.channel,ts:a.ts,dts:a.dts,pts:a.pts,data:new Uint8Array(a.data)})}};var u=function(){return this instanceof u?(u.prototype.init.call(this),this.synced=!1,void(this.au=new Uint8Array([9,240]))):new u};u.prototype=new j,u.prototype.constructor=u,u.prototype.flush=function(){this.dr=null,this.synced=!1,this.trigger("done")},u.prototype.push=function(a){if("video"==a.type){var b,c=0,d=new DataView(a.data.buffer,a.data.byteOffset,a.data.byteLength),e=9e4/a.ts;if(a.pts=Math.floor(a.pts*e),a.dts=Math.floor(a.dts*e),this.trigger("data",{trackId:a.trackId,pts:a.pts,dts:a.dts,data:this.au,nalUnitType:"access_unit_delimiter_rbsp"}),this.dr!=a.dr||!this.synced){if(this.dr=a.dr,this.dr.avcc.n_sps)for(b=0;b<this.dr.avcc.n_sps;b++)this.trigger("data",{trackId:a.trackId,pts:a.pts,dts:a.dts,nalUnitType:"seq_parameter_set_rbsp",data:this.dr.avcc.sps[b].nal,config:{profileIdc:this.dr.avcc.avc_p_i,levelIdc:this.dr.avcc.avc_l_i,profileCompatibility:this.dr.avcc.prof_compat,width:this.dr.width,height:this.dr.height}});if(this.dr.avcc.n_pps)for(b=0;b<this.dr.avcc.n_pps;b++)this.trigger("data",{trackId:a.trackId,pts:a.pts,dts:a.dts,nalUnitType:"pic_parameter_set_rbsp",data:this.dr.avcc.pps[0].nal});this.synced=!0}for(;c<a.data.length;){var f=d.getUint32(c),g={trackId:a.trackId,pts:a.pts,dts:a.dts,data:new Uint8Array(a.data.subarray(c+4,c+f+4))};5==(31&g.data[0])&&(g.nalUnitType="slice_layer_without_partitioning_rbsp_idr"),g.synced=!c&&a.synced,c+=f+4,this.trigger("data",g)}}};var v=function(a){return this instanceof v?(v.prototype.init.call(this),this.options=a||{},this.tracks={},this.options.no_multi_init=!0,this.options.major=new Uint8Array([105,115,111,53]),this.options.compatible=[new Uint8Array([105,115,111,54])],this.options.set_duration=!0,this.on("confupdate",function(a){this.options.break_on_count=a.break_on_count}),this.metadata=a.metadata,void(this.inited=!!this.metadata)):new v(a)};v.prototype=new j,v.prototype.constructor=v,v.prototype.push=function(a){var b;if("metadata"==a.type)return void(this.metadata=a);if("seek"!=a.type){b=a.trackId,this.tracks[b]=this.tracks[b]||{samples:[],seqno:0,sc:0,type:a.type};var c={duration:a.duration,size:a.size,dts:a.dts,pts:a.pts,data:new Uint8Array(a.data),sn:a.sn};if("video"==a.type){var d=9e4/a.ts;c.duration=Math.floor(c.duration*d),c.pts=Math.floor(c.pts*d),c.dts=Math.floor(c.dts*d),c.flags={dependsOn:0|(c.dep&&c.dep.dep),isDependedOn:0|(c.dep&&c.dep.is_dep),hasRedundancy:0|(c.dep&&c.dep.red)||2*a.synced,isLeading:0|(c.dep&&c.dep.lead)},this.options.break_on_count||(c.flags.isNonSyncSample=+!a.synced),c.compositionTimeOffset=c.pts-c.dts}a.data=null,this.tracks[b].samples.push(c)}else for(b in this.tracks)this.tracks[b].samples=[]},v.prototype.flush=function(){var a,b,c,d=this;if(!this.inited){this.inited=!0;var e=[];this.metadata.tracks.forEach(function(a){switch(a.type){case"video":a.profileIdc=a.dr.avcc.avc_p_i,a.levelIdc=a.dr.avcc.avc_l_i,a.profileCompatibility=a.dr.avcc.prof_compat,a.width=a.track_width,a.height=a.track_height,a.sps=a.dr.avcc.sps.map(function(a){return a.nal}),a.pps=a.dr.avcc.pps.map(function(a){return a.nal});break;case"audio":a.samplesize=a.dr.s_size,a.audioobjecttype=a.dr.esds.aot,a.samplingfrequencyindex=a.dr.esds.freq,a.channelcount=a.dr.esds.channel}e.push({id:a.id,buffer:k.initSegment([a],d.options)})}),this.trigger("data",{init:!0,inits:e})}for(var f in this.tracks){var g=this.tracks[f];if(g.samples.length){var h=g.samples;c=h.reduce(function(a,b){return a+b.data.length},0),a=k.moof(++g.seqno,[{id:f,baseMediaDecodeTime:h[0].dts,samples:h,type:g.type}],d.options);for(var i=new Uint8Array(8+c+a.length),j=new Uint8Array(c),l=0,m=0;m<h.length;m++)j.set(h[m].data,l),l+=h[m].data.length;b=k.mdat(j),i.set(a),i.set(b,a.length),i.sn=h[h.length-1].sn,j=b=a=null,this.tracks[f].sc+=h.length,this.trigger("data",{id:f,data:i,sc:this.tracks[f].sc}),this.tracks[f].samples=[]}}this.trigger("done")},b.exports={MP4ParserStream:s,AudioFilterStream:t,VideoFilterStream:u,MP4BuilderStream:v}},{"../utils/stream.js":32,"./mp4-generator.js":26}],28:[function(a,b){"use strict";var c,d,e,f,g,h,i,j,k,l,m,n=a("../utils/stream.js"),o=a("./mp4-generator.js"),p=a("./mp4-parser.js"),q=a("../m2ts/m2ts.js"),r=a("../codecs"),s=r.adts,t=r.h264.H264Stream,u=a("../aac"),v=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],w=["width","height","profileIdc","levelIdc","profileCompatibility"];g=function(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0}}},h=function(a){return a[0]==="I".charCodeAt(0)&&a[1]==="D".charCodeAt(0)&&a[2]==="3".charCodeAt(0)?!0:!1},l=function(a,b){var c;if(a.length!==b.length)return!1;for(c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0},m=function(a){var b,c,d=0;for(b=0;b<a.length;b++)c=a[b],d+=c.data.byteLength;return d},d=function(a){var b=[],c=0,e=0;d.prototype.init.call(this),this.push=function(c){i(a,c),a&&v.forEach(function(b){a[b]=c[b]}),b.push(c)},this.setEarliestDts=function(b){e=b-a.timelineStartInfo.baseMediaDecodeTime},this.flush=function(){var d,e,f,g;return 0===b.length?void this.trigger("done","AudioSegmentStream"):(d=this.trimAdtsFramesByEarliestDts_(b),a.samples=this.generateSampleTable_(d),f=o.mdat(this.concatenateFrameData_(d)),b=[],k(a),e=o.moof(c,[a]),g=new Uint8Array(e.byteLength+f.byteLength),c++,g.set(e),g.set(f,e.byteLength),j(a),this.trigger("data",{track:a,boxes:g}),void this.trigger("done","AudioSegmentStream"))},this.trimAdtsFramesByEarliestDts_=function(b){return a.minSegmentDts>=e?b:(a.minSegmentDts=1/0,b.filter(function(b){return b.dts>=e?(a.minSegmentDts=Math.min(a.minSegmentDts,b.dts),a.minSegmentPts=a.minSegmentDts,!0):!1}))},this.generateSampleTable_=function(a){var b,c,d=[];for(b=0;b<a.length;b++)c=a[b],d.push({size:c.data.byteLength,duration:1024});return d},this.concatenateFrameData_=function(a){var b,c,d=0,e=new Uint8Array(m(a));for(b=0;b<a.length;b++)c=a[b],e.set(c.data,d),d+=c.data.byteLength;return e}},d.prototype=new n,c=function(a){var b,d,e=0,f=[];c.prototype.init.call(this),delete a.minPTS,this.gopCache_=[],this.push=function(c){i(a,c),c.nalUnitType!==r.h264.unitTypes.seq_parameter_set_rbsp||b||(b=c.config,a.sps=[c.data],w.forEach(function(c){a[c]=b[c]},this)),c.nalUnitType!==r.h264.unitTypes.pic_parameter_set_rbsp||d||(d=c.data,a.pps=[c.data]),f.push(c)},this.flush=function(){for(var b,c,d,g,h,j;f.length&&f[0].nalUnitType!==r.h264.unitTypes.access_unit_delimiter_rbsp;)f.shift();return 0===f.length?(this.resetStream_(),void this.trigger("done","VideoSegmentStream")):(b=this.groupNalsIntoFrames_(f),d=this.groupFramesIntoGops_(b),d[0][0].keyFrame||(c=this.getGopForFusion_(f[0],a),c?(d.unshift(c),d.byteLength+=c.byteLength,d.nalCount+=c.nalCount,d.pts=c.pts,d.dts=c.dts,d.duration+=c.duration):d=this.extendFirstKeyFrame_(d)),i(a,d),a.samples=this.generateSampleTable_(d),h=o.mdat(this.concatenateNalData_(d)),this.gopCache_.unshift({gop:d.pop(),pps:a.pps,sps:a.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),f=[],k(a),this.trigger("timelineStartInfo",a.timelineStartInfo),g=o.moof(e,[a]),j=new Uint8Array(g.byteLength+h.byteLength),e++,j.set(g),j.set(h,g.byteLength),this.trigger("data",{track:a,boxes:j}),this.resetStream_(),void this.trigger("done","VideoSegmentStream"))},this.resetStream_=function(){j(a),b=void 0,d=void 0},this.getGopForFusion_=function(b){var c,d,e,f,g,h=45e3,i=1e4,j=1/0;for(g=0;g<this.gopCache_.length;g++)f=this.gopCache_[g],e=f.gop,a.pps&&l(a.pps[0],f.pps[0])&&a.sps&&l(a.sps[0],f.sps[0])&&(e.dts<a.timelineStartInfo.dts||(c=b.dts-e.dts-e.duration,c>=-i&&h>=c&&(!d||j>c)&&(d=f,j=c)));return d?d.gop:null},this.extendFirstKeyFrame_=function(a){var b;return!a[0][0].keyFrame&&a.length>1&&(b=a.shift(),a.byteLength-=b.byteLength,a.nalCount-=b.nalCount,a[0][0].dts=b.dts,a[0][0].pts=b.pts,a[0][0].duration+=b.duration),a},this.groupNalsIntoFrames_=function(a){var b,c,d=[],e=[];for(d.byteLength=0,b=0;b<a.length;b++)c=a[b],c.nalUnitType===r.h264.unitTypes.access_unit_delimiter_rbsp?(d.length&&(d.duration=c.dts-d.dts,e.push(d)),d=[c],d.byteLength=c.data.byteLength,d.pts=c.pts,d.dts=c.dts):(c.nalUnitType===r.h264.unitTypes.slice_layer_without_partitioning_rbsp_idr&&(d.keyFrame=!0),d.duration=c.dts-d.dts,d.byteLength+=c.data.byteLength,d.push(c));return e.length&&(!d.duration||d.duration<=0)&&(d.duration=e[e.length-1].duration),e.push(d),e},this.groupFramesIntoGops_=function(a){var b,c,d=[],e=[];for(d.byteLength=0,d.nalCount=0,d.duration=0,d.pts=a[0].pts,d.dts=a[0].dts,e.byteLength=0,e.nalCount=0,e.duration=0,e.pts=a[0].pts,e.dts=a[0].dts,b=0;b<a.length;b++)c=a[b],c.keyFrame?(d.length&&(e.push(d),e.byteLength+=d.byteLength,e.nalCount+=d.nalCount,e.duration+=d.duration),d=[c],d.nalCount=c.length,d.byteLength=c.byteLength,d.pts=c.pts,d.dts=c.dts,d.duration=c.duration):(d.duration+=c.duration,d.nalCount+=c.length,d.byteLength+=c.byteLength,d.push(c));return e.length&&d.duration<=0&&(d.duration=e[e.length-1].duration),e.byteLength+=d.byteLength,e.nalCount+=d.nalCount,e.duration+=d.duration,e.push(d),e},this.generateSampleTable_=function(a,b){var c,d,e,f,h,i=b||0,j=[];for(c=0;c<a.length;c++)for(f=a[c],d=0;d<f.length;d++)h=f[d],e=g(),e.dataOffset=i,e.compositionTimeOffset=h.pts-h.dts,e.duration=h.duration,e.size=4*h.length,e.size+=h.byteLength,h.keyFrame&&(e.flags.dependsOn=2),i+=e.size,j.push(e);return j},this.concatenateNalData_=function(a){var b,c,d,e,f,g,h=0,i=a.byteLength,j=a.nalCount,k=i+4*j,l=new Uint8Array(k),m=new DataView(l.buffer);for(b=0;b<a.length;b++)for(e=a[b],c=0;c<e.length;c++)for(f=e[c],d=0;d<f.length;d++)g=f[d],m.setUint32(h,g.data.byteLength),h+=4,l.set(g.data,h),h+=g.data.byteLength;return l}},c.prototype=new n,i=function(a,b){"number"==typeof b.pts&&(void 0===a.timelineStartInfo.pts&&(a.timelineStartInfo.pts=b.pts),a.minSegmentPts=void 0===a.minSegmentPts?b.pts:Math.min(a.minSegmentPts,b.pts),a.maxSegmentPts=void 0===a.maxSegmentPts?b.pts:Math.max(a.maxSegmentPts,b.pts)),"number"==typeof b.dts&&(void 0===a.timelineStartInfo.dts&&(a.timelineStartInfo.dts=b.dts),a.minSegmentDts=void 0===a.minSegmentDts?b.dts:Math.min(a.minSegmentDts,b.dts),a.maxSegmentDts=void 0===a.maxSegmentDts?b.dts:Math.max(a.maxSegmentDts,b.dts))},j=function(a){delete a.minSegmentDts,delete a.maxSegmentDts,delete a.minSegmentPts,delete a.maxSegmentPts},k=function(a){var b,c=9e4,d=a.minSegmentDts-a.timelineStartInfo.dts,e=a.minSegmentPts-a.minSegmentDts;return a.baseMediaDecodeTime=a.timelineStartInfo.baseMediaDecodeTime,a.baseMediaDecodeTime+=d,a.baseMediaDecodeTime-=e,a.baseMediaDecodeTime=Math.max(0,a.baseMediaDecodeTime),"audio"===a.type&&(b=a.samplerate/c,a.baseMediaDecodeTime*=b,a.baseMediaDecodeTime=Math.floor(a.baseMediaDecodeTime)),a.baseMediaDecodeTime},f=function(a,b){this.numberOfTracks=0,this.metadataStream=b,this.remuxTracks="undefined"!=typeof a.remux?!!a.remux:!0,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,f.prototype.init.call(this),this.push=function(a){return a.text?this.pendingCaptions.push(a):a.frames?this.pendingMetadata.push(a):(this.pendingTracks.push(a.track),this.pendingBoxes.push(a.boxes),this.pendingBytes+=a.boxes.byteLength,"video"===a.track.type&&(this.videoTrack=a.track),void("audio"===a.track.type&&(this.audioTrack=a.track)))}},f.prototype=new n,f.prototype.flush=function(a){var b,c,d,e,f=0,g={captions:[],metadata:[],info:{}},h=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==a&&"AudioSegmentStream"!==a)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}for(this.videoTrack?(h=this.videoTrack.timelineStartInfo.pts,w.forEach(function(a){g.info[a]=this.videoTrack[a]},this)):this.audioTrack&&(h=this.audioTrack.timelineStartInfo.pts,v.forEach(function(a){g.info[a]=this.audioTrack[a]},this)),g.type=1===this.pendingTracks.length?this.pendingTracks[0].type:"combined",this.emittedTracks+=this.pendingTracks.length,d=o.initSegment(this.pendingTracks,this.options),this.pendingBytes+=d.byteLength,this.pendingBoxes.unshift(d),g.data=new Uint8Array(this.pendingBytes),e=0;e<this.pendingBoxes.length;e++)g.data.set(this.pendingBoxes[e],f),f+=this.pendingBoxes[e].byteLength;for(e=0;e<this.pendingCaptions.length;e++)b=this.pendingCaptions[e],b.startTime=b.startPts-h,b.startTime/=9e4,b.endTime=b.endPts-h,b.endTime/=9e4,g.captions.push(b);for(e=0;e<this.pendingMetadata.length;e++)c=this.pendingMetadata[e],c.cueTime=c.pts-h,c.cueTime/=9e4,g.metadata.push(c);g.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",g),this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},e=function(a){var b,g,i=this,k=!0;e.prototype.init.call(this),a=a||{},a.input_type=a.input_type||"ts",void 0===a.break_on_count&&(a.break_on_count=!0),this.baseMediaDecodeTime=a.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var b={};this.transmuxPipeline_=b,b.type="aac",b.metadataStream=new q.MetadataStream,b.aacStream=new u,b.audioTimestampRolloverStream=new q.TimestampRolloverStream("audio"),b.timedMetadataTimestampRolloverStream=new q.TimestampRolloverStream("timed-metadata"),b.adtsStream=new s,b.coalesceStream=new f(a,b.metadataStream),b.headOfPipeline=b.aacStream,b.aacStream.pipe(b.audioTimestampRolloverStream).pipe(b.adtsStream),b.aacStream.pipe(b.timedMetadataTimestampRolloverStream).pipe(b.metadataStream).pipe(b.coalesceStream),b.metadataStream.on("timestamp",function(a){b.aacStream.setTimestamp(a.timeStamp)}),b.aacStream.on("data",function(a){"timed-metadata"!==a.type||b.audioSegmentStream||(g=g||{timelineStartInfo:{baseMediaDecodeTime:i.baseMediaDecodeTime},codec:"adts",type:"audio"},b.coalesceStream.numberOfTracks++,b.audioSegmentStream=new d(g),b.adtsStream.pipe(b.audioSegmentStream).pipe(b.coalesceStream))}),b.coalesceStream.on("data",this.trigger.bind(this,"data")),b.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setupTsPipeline=function(){var e={};this.transmuxPipeline_=e,e.type=a.input_type,"ts"==e.type?(a.metadataStream=e.metadataStream=new q.MetadataStream,e.packetStream=new q.TransportPacketStream,e.parseStream=new q.TransportParseStream,e.elementaryStream=new q.ElementaryStream,e.videoTimestampRolloverStream=new q.TimestampRolloverStream("video"),e.audioTimestampRolloverStream=new q.TimestampRolloverStream("audio"),e.timedMetadataTimestampRolloverStream=new q.TimestampRolloverStream("timed-metadata"),e.adtsStream=new s,e.h264Stream=new t,e.captionStream=new q.CaptionStream,e.coalesceStream=new f(a,e.metadataStream),e.headOfPipeline=e.packetStream,e.packetStream.pipe(e.parseStream).pipe(e.elementaryStream),e.elementaryStream.pipe(e.videoTimestampRolloverStream).pipe(e.h264Stream),e.elementaryStream.pipe(e.audioTimestampRolloverStream).pipe(e.adtsStream),e.elementaryStream.pipe(e.timedMetadataTimestampRolloverStream).pipe(e.metadataStream).pipe(e.coalesceStream),e.h264Stream.pipe(e.captionStream).pipe(e.coalesceStream)):(e.headOfPipeline=e.elementaryStream=new p.MP4ParserStream(a),e.mp4BuilderStream=new p.MP4BuilderStream(a),e.elementaryStream.pipe(e.mp4BuilderStream),this.seek=function(a,b){return e.elementaryStream.seek(a,b)},this.get_tl=function(a){return e.elementaryStream.get_tl(a)},this.conf_update=function(a){e.elementaryStream.trigger("confupdate",a),e.mp4BuilderStream.trigger("confupdate",a)}),e.elementaryStream.on("data",function(f){var h;if("metadata"===f.type){if("mp4"===a.input_type)return void i.trigger("metadata",f);for(h=f.tracks.length;h--;)b||"video"!==f.tracks[h].type?g||"audio"!==f.tracks[h].type||(g=f.tracks[h],g.timelineStartInfo.baseMediaDecodeTime=i.baseMediaDecodeTime):(b=f.tracks[h],b.timelineStartInfo.baseMediaDecodeTime=i.baseMediaDecodeTime);b&&!e.videoSegmentStream&&(e.coalesceStream.numberOfTracks++,e.videoSegmentStream=new c(b),e.videoSegmentStream.on("timelineStartInfo",function(a){g&&(g.timelineStartInfo=a,e.audioSegmentStream.setEarliestDts(a.dts))}),e.h264Stream.pipe(e.videoSegmentStream).pipe(e.coalesceStream)),g&&!e.audioSegmentStream&&(e.coalesceStream.numberOfTracks++,e.audioSegmentStream=new d(g),e.adtsStream.pipe(e.audioSegmentStream).pipe(e.coalesceStream))}}),"mp4"===a.input_type?(e.mp4BuilderStream.on("data",this.trigger.bind(this,"data")),e.mp4BuilderStream.on("done",this.trigger.bind(this,"done"))):(e.coalesceStream.on("data",this.trigger.bind(this,"data")),e.coalesceStream.on("done",this.trigger.bind(this,"done")))},this.setBaseMediaDecodeTime=function(a){var c=this.transmuxPipeline_;this.baseMediaDecodeTime=a,g&&(g.timelineStartInfo.dts=void 0,g.timelineStartInfo.pts=void 0,j(g),g.timelineStartInfo.baseMediaDecodeTime=a),b&&(c.videoSegmentStream&&(c.videoSegmentStream.gopCache_=[]),b.timelineStartInfo.dts=void 0,b.timelineStartInfo.pts=void 0,
j(b),b.timelineStartInfo.baseMediaDecodeTime=a)},this.push=function(b){if(k){var c=h(b)&&"mp4"!=a.input_type;c&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():c||this.transmuxPipeline_.type===a.input_type||this.setupTsPipeline(),k=!1}return this.transmuxPipeline_.headOfPipeline.push(b)},this.appendBuffer=function(a){return this.push(new Uint8Array(a))},this.flush=function(){k=!0,this.transmuxPipeline_.headOfPipeline.flush()}},e.prototype=new n,b.exports={Transmuxer:e,VideoSegmentStream:c,AudioSegmentStream:d,AUDIO_PROPERTIES:v,VIDEO_PROPERTIES:w}},{"../aac":11,"../codecs":14,"../m2ts/m2ts.js":21,"../utils/stream.js":32,"./mp4-generator.js":26,"./mp4-parser.js":27}],29:[function(a,b){"use strict";var c={8:"audio",9:"video",18:"metadata"},d=function(a){return"0x"+("00"+a.toString(16)).slice(-2).toUpperCase()},e=function(a){for(var b,c=[];a.byteLength>0;){switch(b=0,a.byteLength){default:c.push(d(a[b++]));case 7:c.push(d(a[b++]));case 6:c.push(d(a[b++]));case 5:c.push(d(a[b++]));case 4:c.push(d(a[b++]));case 3:c.push(d(a[b++]));case 2:c.push(d(a[b++]));case 1:c.push(d(a[b++]))}a=a.subarray(b)}return c.join(" ")},f=function(a,b){var c=["AVC Sequence Header","AVC NALU","AVC End-of-Sequence"],d=a[1]&parseInt("01111111",2)<<16|a[2]<<8|a[3];return b=b||{},b.avcPacketType=c[a[0]],b.CompositionTime=a[1]&parseInt("10000000",2)?-d:d,1===a[0]?b.nalUnitTypeRaw=e(a.subarray(4,100)):b.data=e(a.subarray(4)),b},g=function(a,b){var c=["Unknown","Keyframe (for AVC, a seekable frame)","Inter frame (for AVC, a nonseekable frame)","Disposable inter frame (H.263 only)","Generated keyframe (reserved for server use only)","Video info/command frame"],d=a[0]&parseInt("00001111",2);return b=b||{},b.frameType=c[(a[0]&parseInt("11110000",2))>>>4],b.codecID=d,7===d?f(a.subarray(1),b):b},h=function(a,b){var c=["AAC Sequence Header","AAC Raw"];return b=b||{},b.aacPacketType=c[a[0]],b.data=e(a.subarray(1)),b},i=function(a,b){var c=["Linear PCM, platform endian","ADPCM","MP3","Linear PCM, little endian","Nellymoser 16-kHz mono","Nellymoser 8-kHz mono","Nellymoser","G.711 A-law logarithmic PCM","G.711 mu-law logarithmic PCM","reserved","AAC","Speex","MP3 8-Khz","Device-specific sound"],d=["5.5-kHz","11-kHz","22-kHz","44-kHz"],e=(a[0]&parseInt("11110000",2))>>>4;return b=b||{},b.soundFormat=c[e],b.soundRate=d[(a[0]&parseInt("00001100",2))>>>2],b.soundSize=(a[0]&parseInt("00000010",2))>>>1?"16-bit":"8-bit",b.soundType=a[0]&parseInt("00000001",2)?"Stereo":"Mono",10===e?h(a.subarray(1),b):b},j=function(a){return{tagType:c[a[0]],dataSize:a[1]<<16|a[2]<<8|a[3],timestamp:a[7]<<24|a[4]<<16|a[5]<<8|a[6],streamID:a[8]<<16|a[9]<<8|a[10]}},k=function(a){var b=j(a);switch(a[0]){case 8:i(a.subarray(11),b);break;case 9:g(a.subarray(11),b);break;case 18:}return b},l=function(a){var b,c,d=9,e=[];for(d+=4;d<a.byteLength;)b=a[d+1]<<16,b|=a[d+2]<<8,b|=a[d+3],b+=11,c=a.subarray(d,d+b),e.push(k(c)),d+=b+4;return e},m=function(a){return JSON.stringify(a,null,2)};b.exports={inspectTag:k,inspect:l,textify:m}},{}],30:[function(a,b){(function(a){"use strict";var c,d,e=function(a){var b="";return b+=String.fromCharCode(a[0]),b+=String.fromCharCode(a[1]),b+=String.fromCharCode(a[2]),b+=String.fromCharCode(a[3])},f=function(a){return new Date(1e3*a-20828448e5)},g=function(a){return{isLeading:(12&a[0])>>>2,dependsOn:3&a[0],isDependedOn:(192&a[1])>>>6,hasRedundancy:(48&a[1])>>>4,paddingValue:(14&a[1])>>>1,isNonSyncSample:1&a[1],degradationPriority:a[2]<<8|a[3]}},h=function(a){var b,c,d=new DataView(a.buffer,a.byteOffset,a.byteLength),e=[];for(b=0;b+4<a.length;b+=c)if(c=d.getUint32(b),b+=4,0>=c)e.push("<span style='color:red;'>MALFORMED DATA</span>");else switch(31&a[b]){case 1:e.push("slice_layer_without_partitioning_rbsp");break;case 5:e.push("slice_layer_without_partitioning_rbsp_idr");break;case 6:e.push("sei_rbsp");break;case 7:e.push("seq_parameter_set_rbsp");break;case 8:e.push("pic_parameter_set_rbsp");break;case 9:e.push("access_unit_delimiter_rbsp");break;default:e.push("UNKNOWN NAL - "+a[b]&31)}return e},i={avc1:function(a){var b=new DataView(a.buffer,a.byteOffset,a.byteLength);return{dataReferenceIndex:b.getUint16(6),width:b.getUint16(24),height:b.getUint16(26),horizresolution:b.getUint16(28)+b.getUint16(30)/16,vertresolution:b.getUint16(32)+b.getUint16(34)/16,frameCount:b.getUint16(40),depth:b.getUint16(74),config:c(a.subarray(78,a.byteLength))}},avcC:function(a){var b,c,d,e,f=new DataView(a.buffer,a.byteOffset,a.byteLength),g={configurationVersion:a[0],avcProfileIndication:a[1],profileCompatibility:a[2],avcLevelIndication:a[3],lengthSizeMinusOne:3&a[4],sps:[],pps:[]},h=31&a[5];for(d=6,e=0;h>e;e++)c=f.getUint16(d),d+=2,g.sps.push(new Uint8Array(a.subarray(d,d+c))),d+=c;for(b=a[d],d++,e=0;b>e;e++)c=f.getUint16(d),d+=2,g.pps.push(new Uint8Array(a.subarray(d,d+c))),d+=c;return g},btrt:function(a){var b=new DataView(a.buffer,a.byteOffset,a.byteLength);return{bufferSizeDB:b.getUint32(0),maxBitrate:b.getUint32(4),avgBitrate:b.getUint32(8)}},esds:function(a){return{version:a[0],flags:new Uint8Array(a.subarray(1,4)),esId:a[6]<<8|a[7],streamPriority:31&a[8],decoderConfig:{objectProfileIndication:a[11],streamType:a[12]>>>2&63,bufferSize:a[13]<<16|a[14]<<8|a[15],maxBitrate:a[16]<<24|a[17]<<16|a[18]<<8|a[19],avgBitrate:a[20]<<24|a[21]<<16|a[22]<<8|a[23],decoderConfigDescriptor:{tag:a[24],length:a[25],audioObjectType:a[26]>>>3&31,samplingFrequencyIndex:(7&a[26])<<1|a[27]>>>7&1,channelConfiguration:a[27]>>>3&15}}}},ftyp:function(a){for(var b=new DataView(a.buffer,a.byteOffset,a.byteLength),c={majorBrand:e(a.subarray(0,4)),minorVersion:b.getUint32(4),compatibleBrands:[]},d=8;d<a.byteLength;)c.compatibleBrands.push(e(a.subarray(d,d+4))),d+=4;return c},dinf:function(a){return{boxes:c(a)}},dref:function(a){return{version:a[0],flags:new Uint8Array(a.subarray(1,4)),dataReferences:c(a.subarray(8))}},hdlr:function(b){var c=new DataView(b.buffer,b.byteOffset,b.byteLength),d={version:c.getUint8(0),flags:new Uint8Array(b.subarray(1,4)),handlerType:e(b.subarray(8,12)),name:""},f=8;for(f=24;f<b.byteLength;f++){if(0===b[f]){f++;break}d.name+=String.fromCharCode(b[f])}return d.name=decodeURIComponent(a.escape(d.name)),d},mdat:function(a){return{byteLength:a.byteLength,nals:h(a)}},mdhd:function(a){var b,c=new DataView(a.buffer,a.byteOffset,a.byteLength),d=4,e={version:c.getUint8(0),flags:new Uint8Array(a.subarray(1,4)),language:""};return 1===e.version?(d+=4,e.creationTime=f(c.getUint32(d)),d+=8,e.modificationTime=f(c.getUint32(d)),d+=4,e.timescale=c.getUint32(d),d+=8,e.duration=c.getUint32(d)):(e.creationTime=f(c.getUint32(d)),d+=4,e.modificationTime=f(c.getUint32(d)),d+=4,e.timescale=c.getUint32(d),d+=4,e.duration=c.getUint32(d)),d+=4,b=c.getUint16(d),e.language+=String.fromCharCode((b>>10)+96),e.language+=String.fromCharCode(((960&b)>>5)+96),e.language+=String.fromCharCode((31&b)+96),e},mdia:function(a){return{boxes:c(a)}},mfhd:function(a){return{version:a[0],flags:new Uint8Array(a.subarray(1,4)),sequenceNumber:a[4]<<24|a[5]<<16|a[6]<<8|a[7]}},minf:function(a){return{boxes:c(a)}},mp4a:function(a){var b=new DataView(a.buffer,a.byteOffset,a.byteLength),d={dataReferenceIndex:b.getUint16(6),channelcount:b.getUint16(16),samplesize:b.getUint16(18),samplerate:b.getUint16(24)+b.getUint16(26)/65536};return a.byteLength>28&&(d.streamDescriptor=c(a.subarray(28))[0]),d},moof:function(a){return{boxes:c(a)}},moov:function(a){return{boxes:c(a)}},mvex:function(a){return{boxes:c(a)}},mvhd:function(a){var b=new DataView(a.buffer,a.byteOffset,a.byteLength),c=4,d={version:b.getUint8(0),flags:new Uint8Array(a.subarray(1,4))};return 1===d.version?(c+=4,d.creationTime=f(b.getUint32(c)),c+=8,d.modificationTime=f(b.getUint32(c)),c+=4,d.timescale=b.getUint32(c),c+=8,d.duration=b.getUint32(c)):(d.creationTime=f(b.getUint32(c)),c+=4,d.modificationTime=f(b.getUint32(c)),c+=4,d.timescale=b.getUint32(c),c+=4,d.duration=b.getUint32(c)),c+=4,d.rate=b.getUint16(c)+b.getUint16(c+2)/16,c+=4,d.volume=b.getUint8(c)+b.getUint8(c+1)/8,c+=2,c+=2,c+=8,d.matrix=new Uint32Array(a.subarray(c,c+36)),c+=36,c+=24,d.nextTrackId=b.getUint32(c),d},pdin:function(a){var b=new DataView(a.buffer,a.byteOffset,a.byteLength);return{version:b.getUint8(0),flags:new Uint8Array(a.subarray(1,4)),rate:b.getUint32(4),initialDelay:b.getUint32(8)}},sdtp:function(a){var b,c={version:a[0],flags:new Uint8Array(a.subarray(1,4)),samples:[]};for(b=4;b<a.byteLength;b++)c.samples.push({dependsOn:(48&a[b])>>4,isDependedOn:(12&a[b])>>2,hasRedundancy:3&a[b]});return c},sidx:function(a){var b,c=new DataView(a.buffer,a.byteOffset,a.byteLength),d={version:a[0],flags:new Uint8Array(a.subarray(1,4)),references:[],referenceId:c.getUint32(4),timescale:c.getUint32(8),earliestPresentationTime:c.getUint32(12),firstOffset:c.getUint32(16)},e=c.getUint16(22);for(b=24;e;b+=12,e--)d.references.push({referenceType:(128&a[b])>>>7,referencedSize:2147483647&c.getUint32(b),subsegmentDuration:c.getUint32(b+4),startsWithSap:!!(128&a[b+8]),sapType:(112&a[b+8])>>>4,sapDeltaTime:268435455&c.getUint32(b+8)});return d},smhd:function(a){return{version:a[0],flags:new Uint8Array(a.subarray(1,4)),balance:a[4]+a[5]/256}},stbl:function(a){return{boxes:c(a)}},stco:function(a){var b,c=new DataView(a.buffer,a.byteOffset,a.byteLength),d={version:a[0],flags:new Uint8Array(a.subarray(1,4)),chunkOffsets:[]},e=c.getUint32(4);for(b=8;e;b+=4,e--)d.chunkOffsets.push(c.getUint32(b));return d},stsc:function(a){var b,c=new DataView(a.buffer,a.byteOffset,a.byteLength),d=c.getUint32(4),e={version:a[0],flags:new Uint8Array(a.subarray(1,4)),sampleToChunks:[]};for(b=8;d;b+=12,d--)e.sampleToChunks.push({firstChunk:c.getUint32(b),samplesPerChunk:c.getUint32(b+4),sampleDescriptionIndex:c.getUint32(b+8)});return e},stsd:function(a){return{version:a[0],flags:new Uint8Array(a.subarray(1,4)),sampleDescriptions:c(a.subarray(8))}},stsz:function(a){var b,c=new DataView(a.buffer,a.byteOffset,a.byteLength),d={version:a[0],flags:new Uint8Array(a.subarray(1,4)),sampleSize:c.getUint32(4),entries:[]};for(b=12;b<a.byteLength;b+=4)d.entries.push(c.getUint32(b));return d},stts:function(a){var b,c=new DataView(a.buffer,a.byteOffset,a.byteLength),d={version:a[0],flags:new Uint8Array(a.subarray(1,4)),timeToSamples:[]},e=c.getUint32(4);for(b=8;e;b+=8,e--)d.timeToSamples.push({sampleCount:c.getUint32(b),sampleDelta:c.getUint32(b+4)});return d},styp:function(a){return i.ftyp(a)},tfdt:function(a){return{version:a[0],flags:new Uint8Array(a.subarray(1,4)),baseMediaDecodeTime:a[4]<<24|a[5]<<16|a[6]<<8|a[7]}},tfhd:function(a){var b,c=new DataView(a.buffer,a.byteOffset,a.byteLength),d={version:a[0],flags:new Uint8Array(a.subarray(1,4)),trackId:c.getUint32(4)},e=1&d.flags[2],f=2&d.flags[2],g=8&d.flags[2],h=16&d.flags[2],i=32&d.flags[2];return b=8,e&&(b+=4,d.baseDataOffset=c.getUint32(12),b+=4),f&&(d.sampleDescriptionIndex=c.getUint32(b),b+=4),g&&(d.defaultSampleDuration=c.getUint32(b),b+=4),h&&(d.defaultSampleSize=c.getUint32(b),b+=4),i&&(d.defaultSampleFlags=c.getUint32(b)),d},tkhd:function(a){var b=new DataView(a.buffer,a.byteOffset,a.byteLength),c=4,d={version:b.getUint8(0),flags:new Uint8Array(a.subarray(1,4))};return 1===d.version?(c+=4,d.creationTime=f(b.getUint32(c)),c+=8,d.modificationTime=f(b.getUint32(c)),c+=4,d.trackId=b.getUint32(c),c+=4,c+=8,d.duration=b.getUint32(c)):(d.creationTime=f(b.getUint32(c)),c+=4,d.modificationTime=f(b.getUint32(c)),c+=4,d.trackId=b.getUint32(c),c+=4,c+=4,d.duration=b.getUint32(c)),c+=4,c+=8,d.layer=b.getUint16(c),c+=2,d.alternateGroup=b.getUint16(c),c+=2,d.volume=b.getUint8(c)+b.getUint8(c+1)/8,c+=2,c+=2,d.matrix=new Uint32Array(a.subarray(c,c+36)),c+=36,d.width=b.getUint16(c)+b.getUint16(c+2)/16,c+=4,d.height=b.getUint16(c)+b.getUint16(c+2)/16,d},traf:function(a){return{boxes:c(a)}},trak:function(a){return{boxes:c(a)}},trex:function(a){var b=new DataView(a.buffer,a.byteOffset,a.byteLength);return{version:a[0],flags:new Uint8Array(a.subarray(1,4)),trackId:b.getUint32(4),defaultSampleDescriptionIndex:b.getUint32(8),defaultSampleDuration:b.getUint32(12),defaultSampleSize:b.getUint32(16),sampleDependsOn:3&a[20],sampleIsDependedOn:(192&a[21])>>6,sampleHasRedundancy:(48&a[21])>>4,samplePaddingValue:(14&a[21])>>1,sampleIsDifferenceSample:!!(1&a[21]),sampleDegradationPriority:b.getUint16(22)}},trun:function(a){var b,c={version:a[0],flags:new Uint8Array(a.subarray(1,4)),samples:[]},d=new DataView(a.buffer,a.byteOffset,a.byteLength),e=1&c.flags[2],f=4&c.flags[2],h=1&c.flags[1],i=2&c.flags[1],j=4&c.flags[1],k=8&c.flags[1],l=d.getUint32(4),m=8;for(e&&(c.dataOffset=d.getUint32(m),m+=4),f&&l&&(b={flags:g(a.subarray(m,m+4))},m+=4,h&&(b.duration=d.getUint32(m),m+=4),i&&(b.size=d.getUint32(m),m+=4),k&&(b.compositionTimeOffset=d.getUint32(m),m+=4),c.samples.push(b),l--);l--;)b={},h&&(b.duration=d.getUint32(m),m+=4),i&&(b.size=d.getUint32(m),m+=4),j&&(b.flags=g(a.subarray(m,m+4)),m+=4),k&&(b.compositionTimeOffset=d.getUint32(m),m+=4),c.samples.push(b);return c},"url ":function(a){return{version:a[0],flags:new Uint8Array(a.subarray(1,4))}},vmhd:function(a){var b=new DataView(a.buffer,a.byteOffset,a.byteLength);return{version:a[0],flags:new Uint8Array(a.subarray(1,4)),graphicsmode:b.getUint16(4),opcolor:new Uint16Array([b.getUint16(6),b.getUint16(8),b.getUint16(10)])}}};c=function(a){for(var b,c,d,f,g,h=0,j=[],k=new ArrayBuffer(a.length),l=new Uint8Array(k),m=0;m<a.length;++m)l[m]=a[m];for(b=new DataView(k);h<a.byteLength;)c=b.getUint32(h),d=e(a.subarray(h+4,h+8)),f=c>1?h+c:a.byteLength,g=(i[d]||function(a){return{data:a}})(a.subarray(h+8,f)),g.size=c,g.type=d,j.push(g),h=f;return j},d=function(a,b){var c;return b=b||0,c=new Array(2*b+1).join(" "),a.map(function(a){return c+a.type+"\n"+Object.keys(a).filter(function(a){return"type"!==a&&"boxes"!==a}).map(function(b){var d=c+"  "+b+": ",e=a[b];if(e instanceof Uint8Array||e instanceof Uint32Array){var f=Array.prototype.slice.call(new Uint8Array(e.buffer,e.byteOffset,e.byteLength)).map(function(a){return" "+("00"+a.toString(16)).slice(-2)}).join("").match(/.{1,24}/g);return f?1===f.length?d+"<"+f.join("").slice(1)+">":d+"<\n"+f.map(function(a){return c+"  "+a}).join("\n")+"\n"+c+"  >":d+"<>"}return d+JSON.stringify(e,null,2).split("\n").map(function(a,b){return 0===b?a:c+"  "+a}).join("\n")}).join("\n")+(a.boxes?"\n"+d(a.boxes,b+1):"")}).join("\n")},b.exports={inspect:c,textify:d}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],31:[function(a,b){"use strict";var c;c=function(a){var b=a.byteLength,c=0,d=0;this.length=function(){return 8*b},this.bitsAvailable=function(){return 8*b+d},this.loadWord=function(){var e=a.byteLength-b,f=new Uint8Array(4),g=Math.min(4,b);if(0===g)throw new Error("no bytes available");f.set(a.subarray(e,e+g)),c=new DataView(f.buffer).getUint32(0),d=8*g,b-=g},this.skipBits=function(a){var e;d>a?(c<<=a,d-=a):(a-=d,e=Math.floor(a/8),a-=8*e,b-=e,this.loadWord(),c<<=a,d-=a)},this.readBits=function(a){var e=Math.min(d,a),f=c>>>32-e;return d-=e,d>0?c<<=e:b>0&&this.loadWord(),e=a-e,e>0&&d?f<<e|this.readBits(e):f},this.skipLeadingZeros=function(){var a;for(a=0;d>a;++a)if(0!==(c&2147483648>>>a))return c<<=a,d-=a,a;return this.loadWord(),a+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var a=this.skipLeadingZeros();return this.readBits(a+1)-1},this.readExpGolomb=function(){var a=this.readUnsignedExpGolomb();return 1&a?1+a>>>1:-(a>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()},b.exports=c},{}],32:[function(a,b){"use strict";var c=function(){this.init=function(){var a={};this.on=function(b,c){a[b]||(a[b]=[]),a[b].push(c)},this.off=function(b,c){var d;return a[b]?(d=a[b].indexOf(c),a[b].splice(d,1),d>-1):!1},this.trigger=function(b){var c,d,e,f;if(c=a[b])if(c=c.slice(0),2===arguments.length)for(e=c.length,d=0;e>d;++d)c[d].call(this,arguments[1]);else{for(f=[],d=arguments.length,d=1;d<arguments.length;++d)f.push(arguments[d]);for(e=c.length,d=0;e>d;++d)c[d].apply(this,f)}},this.dispose=function(){a={}}}};c.prototype.pipe=function(a){return this.on("data",function(b){a.push(b)}),this.on("done",function(b){a.flush(b)}),a},c.prototype.push=function(a){this.trigger("data",a)},c.prototype.flush=function(a){this.trigger("done",a)},b.exports=c},{}],33:[function(a,b){var c=arguments[3],d=arguments[4],e=arguments[5],f=JSON.stringify;b.exports=function(a){for(var b,g=Object.keys(e),h=0,i=g.length;i>h;h++){var j=g[h];if(e[j].exports===a){b=j;break}}if(!b){b=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var k={},h=0,i=g.length;i>h;h++){var j=g[h];k[j]=j}d[b]=[Function(["require","module","exports"],"("+a+")(self)"),k]}var l=Math.floor(Math.pow(16,8)*Math.random()).toString(16),m={};m[b]=b,d[l]=[Function(["require"],"require("+f(b)+")(self)"),m];var n="("+c+")({"+Object.keys(d).map(function(a){return f(a)+":["+d[a][0]+","+f(d[a][1])+"]"}).join(",")+"},{},["+f(l)+"])",o=window.URL||window.webkitURL||window.mozURL||window.msURL;return new Worker(o.createObjectURL(new Blob([n],{type:"text/javascript"})))}},{}],34:[function(a,b,c){(function(b){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(c,"__esModule",{value:!0});var e=a("./flash-media-source"),f=d(e),g=a("./html-media-source"),h=d(g),i="undefined"!=typeof window?window.videojs:"undefined"!=typeof b?b.videojs:null,j=d(i),k=0,l={mode:"auto"};j["default"].mediaSources={};var m=function(a,b){var c=j["default"].mediaSources[a];if(!c)throw new Error("Media Source not found (Video.js)");c.trigger({type:"sourceopen",swfId:b})},n=function(){return!!window.MediaSource&&!!window.MediaSource.isTypeSupported&&window.MediaSource.isTypeSupported('video/mp4;codecs="avc1.4d400d,mp4a.40.2"')},o=function(a){var b=j["default"].mergeOptions(l,a);return this.MediaSource={open:m,supportsNativeMediaSources:n},"html5"===b.mode||"auto"===b.mode&&n()?new h["default"]:new f["default"]};c.MediaSource=o,o.open=m,o.supportsNativeMediaSources=n;var p={createObjectURL:function(a){var b="blob:vjs-media-source/",c=void 0;return a instanceof h["default"]?(c=window.URL.createObjectURL(a.nativeMediaSource_),a.url_=c,c):a instanceof f["default"]?(c=b+k,k++,j["default"].mediaSources[c]=a,c):(c=window.URL.createObjectURL(a),a.url_=c,c)}};c.URL=p,j["default"].MediaSource=o,j["default"].URL=p}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./flash-media-source":5,"./html-media-source":7}]},{},[34])(34)}),/**
 * @hola.org/videojs-contrib-media-sources
 * @version 3.1.0-12
 * @copyright 2017 Brightcove, Inc.
 * @license Apache-2.0
 */
function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.videojsContribMediaSources=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){(function(a){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(c,"__esModule",{value:!0});var e="undefined"!=typeof window?window.videojs:"undefined"!=typeof a?a.videojs:null,f=d(e),g=function(a){Object.defineProperties(a.frame,{id:{get:function(){return f["default"].log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),a.value.key}},value:{get:function(){return f["default"].log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),a.value.data}},privateData:{get:function(){return f["default"].log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),a.value.data}}})},h=function(a,b,c){var d=window.WebKitDataCue||window.VTTCue;b&&b.forEach(function(a){this.inbandTextTrack_.addCue(new d(a.startTime+this.timestampOffset,a.endTime+this.timestampOffset,a.text))},a),c&&c.forEach(function(a){var b=a.cueTime+this.timestampOffset;a.frames.forEach(function(a){var c=new d(b,b,a.value||a.url||a.data||"");c.frame=a,c.value=a,g(c),this.metadataTrack_.addCue(c)},this)},a)};c["default"]=h,b.exports=c["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d=function(a){return/mp4a\.\d+.\d+/i.test(a)},e=function(a){return/avc1\.[\da-f]+/i.test(a)},f=function(a){var b={type:"",parameters:{}},c=a.trim().split(";");return b.type=c.shift().trim(),c.forEach(function(a){var c=a.trim().split("=");if(c.length>1){var d=c[0].replace(/"/g,"").trim(),e=c[1].replace(/"/g,"").trim();b.parameters[d]=e}}),b};c["default"]={isAudioCodec:d,parseContentType:f,isVideoCodec:e},b.exports=c["default"]},{}],3:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d=function(a,b,c){c.captions&&c.captions.length&&!a.inbandTextTrack_&&(a.inbandTextTrack_=b.player_.addTextTrack("captions","cc1")),c.metadata&&c.metadata.length&&!a.metadataTrack_&&(a.metadataTrack_=b.player_.addTextTrack("metadata","Timed Metadata"),a.metadataTrack_.inBandMetadataTrackDispatchType=c.metadata.dispatchType)};c["default"]=d,b.exports=c["default"]},{}],4:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={TIME_BETWEEN_CHUNKS:1,BYTES_PER_CHUNK:32768};c["default"]=d,b.exports=c["default"]},{}],5:[function(a,b,c){(function(d){"use strict";function e(a){return a&&a.__esModule?a:{"default":a}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0,h=j=void 0}},j="undefined"!=typeof window?window.videojs:"undefined"!=typeof d?d.videojs:null,k=e(j),l=a("./flash-source-buffer"),m=e(l),n=a("./flash-constants"),o=e(n),p=a("./codec-utils"),q=function(a){function b(){var a=this;f(this,b),i(Object.getPrototypeOf(b.prototype),"constructor",this).call(this),this.sourceBuffers=[],this.readyState="closed",this.on(["sourceopen","webkitsourceopen"],function(b){a.swfObj=document.getElementById(b.swfId),a.player_=k["default"](a.swfObj.parentNode),a.tech_=a.swfObj.tech,a.readyState="open",a.tech_.on("seeking",function(){for(var b=a.sourceBuffers.length;b--;)a.sourceBuffers[b].abort()}),a.swfObj&&a.swfObj.vjs_load()})}return g(b,a),h(b,[{key:"addSeekableRange_",value:function(){}},{key:"addSourceBuffer",value:function(a){var b=p.parseContentType(a),c=void 0;if("video/mp2t"!==b.type)throw new Error("NotSupportedError (Video.js)");return c=new m["default"](this),this.sourceBuffers.push(c),c}},{key:"endOfStream",value:function(a){"network"===a?this.tech_.error(2):"decode"===a&&this.tech_.error(3),"ended"!==this.readyState&&(this.readyState="ended",this.swfObj.vjs_endOfStream())}}]),b}(k["default"].EventTarget);c["default"]=q;try{Object.defineProperty(q.prototype,"duration",{get:function(){return this.swfObj?this.swfObj.vjs_getProperty("duration"):0/0},set:function(a){var b=void 0,c=this.swfObj.vjs_getProperty("duration");if(this.swfObj.vjs_setProperty("duration",a),c>a)for(b=0;b<this.sourceBuffers.length;b++)this.sourceBuffers[b].remove(a,c);return a}})}catch(r){q.prototype.duration=0/0}for(var s in o["default"])q[s]=o["default"][s];b.exports=c["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./codec-utils":2,"./flash-constants":4,"./flash-source-buffer":6}],6:[function(a,b,c){(function(d){"use strict";function e(a){return a&&a.__esModule?a:{"default":a}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0,h=j=void 0}},j="undefined"!=typeof window?window.videojs:"undefined"!=typeof d?d.videojs:null,k=e(j),l=a("@hola.org/mux.js"),m=e(l),n=a("./remove-cues-from-track"),o=e(n),p=a("./create-text-tracks-if-necessary"),q=e(p),r=a("./add-text-track-data"),s=e(r),t=a("./flash-constants"),u=e(t),v=function(a){window.setTimeout(a,u["default"].TIME_BETWEEN_CHUNKS)},w=function(){return Math.random().toString(36).slice(2,8)},x=function(a,b){("number"!=typeof b||0>b)&&(b=0);var c=Math.pow(10,b);return Math.round(a*c)/c},y=function(a){var b=8192,c="";if(a.length<=b)return String.fromCharCode.apply(null,a);for(var d=0;d<a.length;d+=b)c+=String.fromCharCode.apply(null,a.subarray(d,d+b));return c},z=function(a){function b(a){var c=this;f(this,b),i(Object.getPrototypeOf(b.prototype),"constructor",this).call(this);var d=void 0;this.chunkSize_=u["default"].BYTES_PER_CHUNK,this.buffer_=[],this.bufferSize_=0,this.basePtsOffset_=0/0,this.mediaSource=a,this.updating=!1,this.timestampOffset_=0,this.segmentParser_=new m["default"].flv.Transmuxer,this.segmentParser_.on("data",this.receiveBuffer_.bind(this)),d=window.btoa(String.fromCharCode.apply(null,Array.prototype.slice.call(this.segmentParser_.getFlvHeader())));var e=this.mediaSource.player_.id().replace(/[^a-zA-Z0-9]/g,"_");this.flashEncodedHeaderName_="vjs_flashEncodedHeader_"+e+w(),this.flashEncodedDataName_="vjs_flashEncodedData_"+e+w(),window[this.flashEncodedHeaderName_]=function(){return delete window[c.flashEncodedHeaderName_],d},this.mediaSource.swfObj.vjs_appendChunkReady(this.flashEncodedHeaderName_),Object.defineProperty(this,"timestampOffset",{get:function(){return this.timestampOffset_},set:function(a){"number"==typeof a&&a>=0&&(this.timestampOffset_=a,this.segmentParser_=new m["default"].flv.Transmuxer,this.segmentParser_.on("data",this.receiveBuffer_.bind(this)),this.mediaSource.swfObj.vjs_discontinuity(),this.basePtsOffset_=0/0)}}),Object.defineProperty(this,"buffered",{get:function(){if(!(this.mediaSource&&this.mediaSource.swfObj&&"vjs_getProperty"in this.mediaSource.swfObj))return k["default"].createTimeRange();var a=this.mediaSource.swfObj.vjs_getProperty("buffered");return a&&a.length&&(a[0][0]=x(a[0][0],3),a[0][1]=x(a[0][1],3)),k["default"].createTimeRanges(a)}}),this.mediaSource.player_.on("seeked",function(){o["default"](0,1/0,c.metadataTrack_),o["default"](0,1/0,c.inbandTextTrack_)})}return g(b,a),h(b,[{key:"appendBuffer",value:function(a){var b=this,c=void 0,d=524288,e=0;if(this.updating)throw c=new Error("SourceBuffer.append() cannot be called while an update is in progress"),c.name="InvalidStateError",c.code=11,c;this.updating=!0,this.mediaSource.readyState="open",this.trigger({type:"update"});var f=function g(){b.segmentParser_.push(a.subarray(e,e+d)),e+=d,v(e<a.byteLength?g:b.segmentParser_.flush.bind(b.segmentParser_))};f()}},{key:"abort",value:function(){this.buffer_=[],this.bufferSize_=0,this.mediaSource.swfObj.vjs_abort(),this.updating&&(this.updating=!1,this.trigger({type:"updateend"}))}},{key:"remove",value:function(a,b){o["default"](a,b,this.metadataTrack_),o["default"](a,b,this.inbandTextTrack_),this.trigger({type:"update"}),this.trigger({type:"updateend"})}},{key:"receiveBuffer_",value:function(a){var b=this;q["default"](this,this.mediaSource,a),s["default"](this,a.captions,a.metadata),v(function(){var c=b.convertTagsToData_(a);0===b.buffer_.length&&v(b.processBuffer_.bind(b)),c&&(b.buffer_.push(c),b.bufferSize_+=c.byteLength)})}},{key:"processBuffer_",value:function(){var a=this,b=u["default"].BYTES_PER_CHUNK;if(!this.buffer_.length)return void(this.updating!==!1&&(this.updating=!1,this.trigger({type:"updateend"})));for(var c=new Uint8Array(Math.min(b,this.bufferSize_)),d=c.byteLength;d;){var e=this.buffer_[0].subarray(0,d);c.set(e,c.byteLength-d),e.byteLength<this.buffer_[0].byteLength?this.buffer_[0]=this.buffer_[0].subarray(d):this.buffer_.shift(),d-=e.byteLength}this.bufferSize_-=c.byteLength;var f=window.btoa(y(c));window[this.flashEncodedDataName_]=function(){return v(a.processBuffer_.bind(a)),delete window[a.flashEncodedDataName_],f},this.mediaSource.swfObj.vjs_appendChunkReady(this.flashEncodedDataName_)}},{key:"convertTagsToData_",value:function(a){var b=0,c=this.mediaSource.tech_,d=0,e=void 0,f=void 0,g=void 0,h=[],i=this.getOrderedTags_(a);for(isNaN(this.basePtsOffset_)&&i.length&&(this.basePtsOffset_=i[0].pts),c.buffered().length&&(d=c.buffered().end(0)-this.timestampOffset),d=Math.max(d,c.currentTime()-this.timestampOffset),d*=1e3,d+=this.basePtsOffset_,e=0;e<i.length;e++)i[e].pts>=d&&h.push(i[e]);if(0!==h.length){for(e=0;e<h.length;e++)b+=h[e].bytes.byteLength;for(g=new Uint8Array(b),e=0,f=0;e<h.length;e++)g.set(h[e].bytes,f),f+=h[e].bytes.byteLength;return g}}},{key:"getOrderedTags_",value:function(a){for(var b=a.tags.videoTags,c=a.tags.audioTags,d=void 0,e=[];b.length||c.length;)d=b.length?c.length&&c[0].dts<b[0].dts?c.shift():b.shift():c.shift(),e.push(d.finalize());return e}}]),b}(k["default"].EventTarget);c["default"]=z,b.exports=c["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./add-text-track-data":1,"./create-text-tracks-if-necessary":3,"./flash-constants":4,"./remove-cues-from-track":8,"@hola.org/mux.js":18}],7:[function(a,b,c){(function(d){"use strict";function e(a){return a&&a.__esModule?a:{"default":a}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0,h=j=void 0}},j="undefined"!=typeof window?window.videojs:"undefined"!=typeof d?d.videojs:null,k=e(j),l=a("./virtual-source-buffer"),m=e(l),n=a("./codec-utils"),o=function(a){return a.map(function(a){return a.replace(/avc1\.(\d+)\.(\d+)/i,function(a,b,c){var d=("00"+Number(b).toString(16)).slice(-2),e=("00"+Number(c).toString(16)).slice(-2);return"avc1."+d+"00"+e})})},p=function(a){function b(){var a=this;f(this,b),i(Object.getPrototypeOf(b.prototype),"constructor",this).call(this);var c=void 0;this.nativeMediaSource_=new window.MediaSource;for(c in this.nativeMediaSource_)c in b.prototype||"function"!=typeof this.nativeMediaSource_[c]||(this[c]=this.nativeMediaSource_[c].bind(this.nativeMediaSource_));this.duration_=0/0,Object.defineProperty(this,"duration",{get:function(){return this.duration_===1/0?this.duration_:this.nativeMediaSource_.duration},set:function(a){return this.duration_=a,a!==1/0?void(this.nativeMediaSource_.duration=a):void 0}}),Object.defineProperty(this,"seekable",{get:function(){return this.duration_===1/0?k["default"].createTimeRanges([[0,this.nativeMediaSource_.duration]]):this.nativeMediaSource_.seekable}}),Object.defineProperty(this,"readyState",{get:function(){return this.nativeMediaSource_.readyState}}),Object.defineProperty(this,"activeSourceBuffers",{get:function(){return this.activeSourceBuffers_}}),this.sourceBuffers=[],this.activeSourceBuffers_=[],this.updateActiveSourceBuffers_=function(){a.activeSourceBuffers_.length=0;for(var b=!1,c=!0,d=0;d<a.player_.audioTracks().length;d++){var e=a.player_.audioTracks()[d];if(e.enabled&&"main"!==e.kind){b=!0,c=!1;break}}a.sourceBuffers.forEach(function(d){if(d.videoCodec_&&d.audioCodec_)d.audioDisabled_=b;else if(d.videoCodec_&&!d.audioCodec_)d.audioDisabled_=!0,c=!1;else if(!d.videoCodec_&&d.audioCodec_&&(d.audioDisabled_=c,c))return;a.activeSourceBuffers_.push(d)})},["sourceopen","sourceclose","sourceended"].forEach(function(a){this.nativeMediaSource_.addEventListener(a,this.trigger.bind(this))},this),this.on("sourceopen",function(){var b=document.querySelector('[src="'+a.url_+'"]');b&&(a.player_=k["default"](b.parentNode),a.player_.audioTracks().on("change",a.updateActiveSourceBuffers_),a.player_.audioTracks().on("addtrack",a.updateActiveSourceBuffers_),a.player_.audioTracks().on("removetrack",a.updateActiveSourceBuffers_))}),this.on("sourceclose",function(){this.sourceBuffers.forEach(function(a){a.transmuxer_&&a.transmuxer_.terminate()}),this.sourceBuffers.length=0,this.player_&&(this.player_.audioTracks().off("change",this.updateActiveSourceBuffers_),this.player_.audioTracks().off("addtrack",this.updateActiveSourceBuffers_),this.player_.audioTracks().off("removetrack",this.updateActiveSourceBuffers_))})}return g(b,a),h(b,[{key:"addSeekableRange_",value:function(a,b){var c=void 0;if(this.duration!==1/0)throw c=new Error("MediaSource.addSeekableRange() can only be invoked when the duration is Infinity"),c.name="InvalidStateError",c.code=11,c;(b>this.nativeMediaSource_.duration||isNaN(this.nativeMediaSource_.duration))&&(this.nativeMediaSource_.duration=b)}},{key:"addSourceBuffer",value:function(a){var b=void 0,c=n.parseContentType(a);if("video/mp2t"===c.type){var d=[];c.parameters&&c.parameters.codecs&&(d=c.parameters.codecs.split(","),d=o(d),d=d.map(function(a){return a.trim()}),d=d.filter(function(a){return n.isAudioCodec(a)||n.isVideoCodec(a)})),0===d.length&&(d=["avc1.4d400d","mp4a.40.2"]),b=new m["default"](this,d),0!==this.sourceBuffers.length&&(this.sourceBuffers[0].createRealSourceBuffers_(),b.createRealSourceBuffers_(),this.sourceBuffers[0].audioDisabled_=!0)}else b=this.nativeMediaSource_.addSourceBuffer(a);return this.sourceBuffers.push(b),b}}]),b}(k["default"].EventTarget);c["default"]=p,b.exports=c["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./codec-utils":2,"./virtual-source-buffer":10}],8:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d=function(a,b,c){var d=void 0,e=void 0;if(c)for(d=c.cues.length;d--;)e=c.cues[d],e.startTime<=b&&e.endTime>=a&&c.removeCue(e)};c["default"]=d,b.exports=c["default"]},{}],9:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=a("@hola.org/mux.js"),h=d(g),i=function(a){a.on("data",function(a){var b=a.data;a.data=b.buffer,postMessage({action:"data",segment:a,byteOffset:b.byteOffset,byteLength:b.byteLength},[a.data])}),a.captionStream&&a.captionStream.on("data",function(a){postMessage({action:"caption",data:a})}),a.on("done",function(){postMessage({action:"done"})})},j=function(){function a(b){e(this,a),this.options=b||{},this.init()}return f(a,[{key:"init",value:function(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new h["default"].mp4.Transmuxer(this.options),i(this.transmuxer)}},{key:"push",value:function(a){var b=new Uint8Array(a.data,a.byteOffset,a.byteLength);this.transmuxer.push(b)}},{key:"reset",value:function(){this.init()}},{key:"setTimestampOffset",value:function(a){var b=a.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(9e4*b))}},{key:"flush",value:function(){this.transmuxer.flush()}}]),a}(),k=function(a){a.onmessage=function(a){return"init"===a.data.action&&a.data.options?void(this.messageHandlers=new j(a.data.options)):(this.messageHandlers||(this.messageHandlers=new j),void(a.data&&a.data.action&&"init"!==a.data.action&&this.messageHandlers[a.data.action]&&this.messageHandlers[a.data.action](a.data)))}};c["default"]=function(a){return new k(a)},b.exports=c["default"]},{"@hola.org/mux.js":18}],10:[function(a,b,c){(function(d){"use strict";function e(a){return a&&a.__esModule?a:{"default":a}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0,h=j=void 0}},j="undefined"!=typeof window?window.videojs:"undefined"!=typeof d?d.videojs:null,k=e(j),l=a("./create-text-tracks-if-necessary"),m=e(l),n=a("./remove-cues-from-track"),o=e(n),p=a("./add-text-track-data"),q=e(p),r=a("webworkify"),s=e(r),t=a("./transmuxer-worker"),u=e(t),v=a("./codec-utils"),w=function(a){function b(a,c){var d=this;f(this,b),i(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,k["default"].EventTarget),this.timestampOffset_=0,this.pendingBuffers_=[],this.bufferUpdating_=!1,this.mediaSource_=a,this.codecs_=c,this.audioCodec_=null,this.videoCodec_=null,this.audioDisabled_=!1;var e={remux:!1};this.codecs_.forEach(function(a){v.isAudioCodec(a)?d.audioCodec_=a:v.isVideoCodec(a)&&(d.videoCodec_=a)}),this.transmuxer_=s["default"](u["default"]),this.transmuxer_.postMessage({action:"init",options:e}),this.transmuxer_.onmessage=function(a){return"data"===a.data.action?d.data_(a):"done"===a.data.action?d.done_(a):void 0},Object.defineProperty(this,"timestampOffset",{get:function(){return this.timestampOffset_},set:function(a){"number"==typeof a&&a>=0&&(this.timestampOffset_=a,this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:a}))}}),Object.defineProperty(this,"appendWindowStart",{get:function(){return(this.videoBuffer_||this.audioBuffer_).appendWindowStart},set:function(a){this.videoBuffer_&&(this.videoBuffer_.appendWindowStart=a),this.audioBuffer_&&(this.audioBuffer_.appendWindowStart=a)}}),Object.defineProperty(this,"updating",{get:function(){return!!(this.bufferUpdating_||!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.updating||this.videoBuffer_&&this.videoBuffer_.updating)}}),Object.defineProperty(this,"buffered",{get:function(){var a=null,b=null,c=0,d=[],e=[];if(!this.videoBuffer_&&(this.audioDisabled_||!this.audioBuffer_))return k["default"].createTimeRange();if(!this.videoBuffer_)return this.audioBuffer_.buffered;if(this.audioDisabled_||!this.audioBuffer_)return this.videoBuffer_.buffered;if(!(this.videoBuffer_&&0!==this.videoBuffer_.buffered.length||this.audioBuffer_&&0!==this.audioBuffer_.buffered.length))return k["default"].createTimeRange();for(var f=this.videoBuffer_.buffered,g=this.audioBuffer_.buffered,h=f.length;h--;)d.push({time:f.start(h),type:"start"}),d.push({time:f.end(h),type:"end"});for(h=g.length;h--;)d.push({time:g.start(h),type:"start"}),d.push({time:g.end(h),type:"end"});for(d.sort(function(a,b){return a.time-b.time}),h=0;h<d.length;h++)"start"===d[h].type?(c++,2===c&&(a=d[h].time)):"end"===d[h].type&&(c--,1===c&&(b=d[h].time)),null!==a&&null!==b&&(e.push([a,b]),a=null,b=null);return k["default"].createTimeRanges(e)}})}return g(b,a),h(b,[{key:"data_",value:function(a){var b=a.data.segment;b.data=new Uint8Array(b.data,a.data.byteOffset,a.data.byteLength),m["default"](this,this.mediaSource_,b),this.pendingBuffers_.push(b)}},{key:"done_",value:function(){this.processPendingSegments_()}},{key:"createRealSourceBuffers_",value:function(){var a=this,b=["audio","video"];b.forEach(function(c){if(a[c+"Codec_"]&&!a[c+"Buffer_"]){var d=null;a.mediaSource_[c+"Buffer_"]?d=a.mediaSource_[c+"Buffer_"]:(d=a.mediaSource_.nativeMediaSource_.addSourceBuffer(c+'/mp4;codecs="'+a[c+"Codec_"]+'"'),a.mediaSource_[c+"Buffer_"]=d),a[c+"Buffer_"]=d,["update","updatestart","updateend"].forEach(function(e){d.addEventListener(e,function(){if("audio"!==c||!a.audioDisabled_){var d=b.every(function(b){return"audio"===b&&a.audioDisabled_?!0:c!==b&&a[b+"Buffer_"]&&a[b+"Buffer_"].updating?!1:!0});return d?a.trigger(e):void 0}})})}})}},{key:"appendBuffer",value:function(a){this.bufferUpdating_=!0,this.transmuxer_.postMessage({action:"push",data:a.buffer,byteOffset:a.byteOffset,byteLength:a.byteLength},[a.buffer]),this.transmuxer_.postMessage({action:"flush"})}},{key:"pushBuffer",value:function(a){this.transmuxer_.postMessage({action:"push",data:a.buffer,byteOffset:a.byteOffset,byteLength:a.byteLength},[a.buffer])}},{key:"flushBuffer",value:function(){this.bufferUpdating_=!0,this.transmuxer_.postMessage({action:"flush"})}},{key:"remove",value:function(a,b){this.videoBuffer_&&this.videoBuffer_.remove(a,b),!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.remove(a,b),o["default"](a,b,this.metadataTrack_),o["default"](a,b,this.inbandTextTrack_)}},{key:"processPendingSegments_",value:function(){var a={video:{segments:[],bytes:0},audio:{segments:[],bytes:0},captions:[],metadata:[]};a=this.pendingBuffers_.reduce(function(a,b){var c=b.type,d=b.data;return a[c].segments.push(d),a[c].bytes+=d.byteLength,b.captions&&(a.captions=a.captions.concat(b.captions)),b.info&&(a[c].info=b.info),b.metadata&&(a.metadata=a.metadata.concat(b.metadata)),a},a),this.videoBuffer_||this.audioBuffer_||(0===a.video.bytes&&(this.videoCodec_=null),0===a.audio.bytes&&(this.audioCodec_=null),this.createRealSourceBuffers_()),a.audio.info&&this.mediaSource_.trigger({type:"audioinfo",info:a.audio.info}),a.video.info&&this.mediaSource_.trigger({type:"videoinfo",info:a.video.info}),this.videoBuffer_&&(this.concatAndAppendSegments_(a.video,this.videoBuffer_),q["default"](this,a.captions,a.metadata)),!this.audioDisabled_&&this.audioBuffer_&&this.concatAndAppendSegments_(a.audio,this.audioBuffer_),this.pendingBuffers_.length=0,this.bufferUpdating_=!1}},{key:"concatAndAppendSegments_",value:function(a,b){var c=0,d=void 0;a.bytes&&(d=new Uint8Array(a.bytes),a.segments.forEach(function(a){d.set(a,c),c+=a.byteLength}),b.appendBuffer(d))}},{key:"abort",value:function(){this.videoBuffer_&&this.videoBuffer_.abort(),this.audioBuffer_&&this.audioBuffer_.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"reset"}),this.pendingBuffers_.length=0,this.bufferUpdating_=!1}}]),b}(k["default"].EventTarget);c["default"]=w,b.exports=c["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./add-text-track-data":1,"./codec-utils":2,"./create-text-tracks-if-necessary":3,"./remove-cues-from-track":8,"./transmuxer-worker":9,webworkify:33}],11:[function(a,b){"use strict";var c,d=a("../utils/stream.js");c=function(){var a=new Uint8Array,b=0;c.prototype.init.call(this),this.setTimestamp=function(a){b=a},this.parseId3TagSize=function(a,b){var c=a[b+6]<<21|a[b+7]<<14|a[b+8]<<7|a[b+9],d=a[b+5],e=(16&d)>>4;return e?c+20:c+10},this.parseAdtsSize=function(a,b){var c=(224&a[b+5])>>5,d=a[b+4]<<3,e=6144&a[b+3];return e|d|c},this.push=function(c){var d,e,f,g,h=0,i=0;for(a.length?(g=a.length,a=new Uint8Array(c.byteLength+g),a.set(a.subarray(0,g)),a.set(c,g)):a=c;a.length-i>=3;)if(a[i]!=="I".charCodeAt(0)||a[i+1]!=="D".charCodeAt(0)||a[i+2]!=="3".charCodeAt(0))if(a[i]&!0&&240===(240&a[i+1])){if(a.length-i<7)break;if(h=this.parseAdtsSize(a,i),h>a.length)break;f={type:"audio",data:a.subarray(i,i+h),pts:b,dts:b},this.trigger("data",f),i+=h}else i++;else{if(a.length-i<10)break;if(h=this.parseId3TagSize(a,i),h>a.length)break;e={type:"timed-metadata",data:a.subarray(i,i+h)},this.trigger("data",e),i+=h}d=a.length-i,a=d>0?a.subarray(i):new Uint8Array}},c.prototype=new d,b.exports=c},{"../utils/stream.js":32}],12:[function(a,b){"use strict";var c,d=a("../utils/stream.js"),e=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];c=function(){var a;c.prototype.init.call(this),this.push=function(b){var c,d,f,g,h,i,j=0,k=0;if("audio"===b.type)for(a?(g=a,a=new Uint8Array(g.byteLength+b.data.byteLength),a.set(g),a.set(b.data,g.byteLength)):a=b.data;j+5<a.length;)if(255===a[j]&&240===(246&a[j+1])){if(d=2*(1&~a[j+1]),c=(3&a[j+3])<<11|a[j+4]<<3|(224&a[j+5])>>5,h=1024*((3&a[j+6])+1),i=9e4*h/e[(60&a[j+2])>>>2],f=j+c,a.byteLength<f)return;if(this.trigger("data",{pts:b.pts+k*i,dts:b.dts+k*i,sampleCount:h,audioobjecttype:(a[j+2]>>>6&3)+1,channelcount:(1&a[j+2])<<2|(192&a[j+3])>>>6,samplerate:e[(60&a[j+2])>>>2],samplingfrequencyindex:(60&a[j+2])>>>2,samplesize:16,data:a.subarray(j+7+d,f)}),a.byteLength===f)return void(a=void 0);k++,a=a.subarray(f)}else j++},this.flush=function(){this.trigger("done")}},c.prototype=new d,b.exports=c},{"../utils/stream.js":32}],13:[function(a,b){"use strict";var c,d,e=a("../utils/stream.js"),f=a("../utils/exp-golomb.js"),g={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},h={slice_layer_without_partitioning_rbsp:1,slice_layer_without_partitioning_rbsp_idr:5,sei_rbsp:6,seq_parameter_set_rbsp:7,pic_parameter_set_rbsp:8,access_unit_delimiter_rbsp:9};d=function(){var a,b,c=0;d.prototype.init.call(this),this.push=function(d){var e;for(b?(e=new Uint8Array(b.byteLength+d.data.byteLength),e.set(b),e.set(d.data,b.byteLength),b=e):b=d.data;c<b.byteLength-3;c++)if(1===b[c+2]){a=c+5;break}for(;a<b.byteLength;)switch(b[a]){case 0:if(0!==b[a-1]){a+=2;break}if(0!==b[a-2]){a++;break}c+3!==a-2&&this.trigger("data",b.subarray(c+3,a-2));do a++;while(1!==b[a]&&a<b.length);c=a-2,a+=3;break;case 1:if(0!==b[a-1]||0!==b[a-2]){a+=3;break}this.trigger("data",b.subarray(c+3,a-2)),c=a-2,a+=3;break;default:a+=3}b=b.subarray(c),a-=c,c=0},this.flush=function(){b&&b.byteLength>3&&this.trigger("data",b.subarray(c+3)),b=null,c=0,this.trigger("done")}},d.prototype=new e,c=function(){var a,b,e,h,i,j,k,l=new d;c.prototype.init.call(this),a=this,this.push=function(a){"video"===a.type&&(b=a.trackId,e=a.pts,h=a.dts,l.push(a))},l.on("data",function(c){var d={trackId:b,pts:e,dts:h,data:c},f=31&c[0];(1==f||f>=5&&9>=f)&&(d.nalUnitType=f),(7==f||6==f)&&(d.escapedRBSP=i(c.subarray(1)),d.config=7==f?j(d.escapedRBSP):null),a.trigger("data",d)}),l.on("done",function(){a.trigger("done")}),this.flush=function(){l.flush()},k=function(a,b){var c,d,e=8,f=8;for(c=0;a>c;c++)0!==f&&(d=b.readExpGolomb(),f=(e+d+256)%256),e=0===f?e:f},i=function(a){for(var b,c,d=a.byteLength,e=[],f=1;d-2>f;)0===a[f]&&0===a[f+1]&&3===a[f+2]?(e.push(f+2),f+=2):f++;if(0===e.length)return a;b=d-e.length,c=new Uint8Array(b);var g=0;for(f=0;b>f;g++,f++)g===e[0]&&(g++,e.shift()),c[f]=a[g];return c},j=function(a){var b,c,d,e,h,i,j,l,m,n,o,p,q,r,s=0,t=0,u=0,v=0,w=1;if(b=new f(a),c=b.readUnsignedByte(),e=b.readUnsignedByte(),d=b.readUnsignedByte(),b.skipUnsignedExpGolomb(),g[c]&&(h=b.readUnsignedExpGolomb(),3===h&&b.skipBits(1),b.skipUnsignedExpGolomb(),b.skipUnsignedExpGolomb(),b.skipBits(1),b.readBoolean()))for(o=3!==h?8:12,r=0;o>r;r++)b.readBoolean()&&(6>r?k(16,b):k(64,b));if(b.skipUnsignedExpGolomb(),i=b.readUnsignedExpGolomb(),0===i)b.readUnsignedExpGolomb();else if(1===i)for(b.skipBits(1),b.skipExpGolomb(),b.skipExpGolomb(),j=b.readUnsignedExpGolomb(),r=0;j>r;r++)b.skipExpGolomb();if(b.skipUnsignedExpGolomb(),b.skipBits(1),l=b.readUnsignedExpGolomb(),m=b.readUnsignedExpGolomb(),n=b.readBits(1),0===n&&b.skipBits(1),b.skipBits(1),b.readBoolean()&&(s=b.readUnsignedExpGolomb(),t=b.readUnsignedExpGolomb(),u=b.readUnsignedExpGolomb(),v=b.readUnsignedExpGolomb()),b.readBoolean()&&b.readBoolean()){switch(q=b.readUnsignedByte()){case 1:p=[1,1];break;case 2:p=[12,11];break;case 3:p=[10,11];break;case 4:p=[16,11];break;case 5:p=[40,33];break;case 6:p=[24,11];break;case 7:p=[20,11];break;case 8:p=[32,11];break;case 9:p=[80,33];break;case 10:p=[18,11];break;case 11:p=[15,11];break;case 12:p=[64,33];break;case 13:p=[160,99];break;case 14:p=[4,3];break;case 15:p=[3,2];break;case 16:p=[2,1];break;case 255:p=[b.readUnsignedByte()<<8|b.readUnsignedByte(),b.readUnsignedByte()<<8|b.readUnsignedByte()]}p&&(w=p[0]/p[1])}return{profileIdc:c,
levelIdc:d,profileCompatibility:e,width:Math.ceil((16*(l+1)-2*s-2*t)*w),height:(2-n)*(m+1)*16-2*u-2*v}}},c.prototype=new e,b.exports={H264Stream:c,NalByteStream:d,unitTypes:h}},{"../utils/exp-golomb.js":31,"../utils/stream.js":32}],14:[function(a,b){b.exports={adts:a("./adts"),h264:a("./h264")}},{"./adts":12,"./h264":13}],15:[function(a,b){"use strict";var c;c=function(a,b){var d,e=0,f=16384,g=function(a,b){var c,d=a.position+b;d<a.bytes.byteLength||(c=new Uint8Array(2*d),c.set(a.bytes.subarray(0,a.position),0),a.bytes=c,a.view=new DataView(a.bytes.buffer))},h=c.widthBytes||new Uint8Array("width".length),i=c.heightBytes||new Uint8Array("height".length),j=c.videocodecidBytes||new Uint8Array("videocodecid".length);if(!c.widthBytes){for(d=0;d<"width".length;d++)h[d]="width".charCodeAt(d);for(d=0;d<"height".length;d++)i[d]="height".charCodeAt(d);for(d=0;d<"videocodecid".length;d++)j[d]="videocodecid".charCodeAt(d);c.widthBytes=h,c.heightBytes=i,c.videocodecidBytes=j}switch(this.keyFrame=!1,a){case c.VIDEO_TAG:this.length=16,f*=6;break;case c.AUDIO_TAG:this.length=13,this.keyFrame=!0;break;case c.METADATA_TAG:this.length=29,this.keyFrame=!0;break;default:throw"Error Unknown TagType"}this.bytes=new Uint8Array(f),this.view=new DataView(this.bytes.buffer),this.bytes[0]=a,this.position=this.length,this.keyFrame=b,this.pts=0,this.dts=0,this.writeBytes=function(a,b,c){var d,e=b||0;c=c||a.byteLength,d=e+c,g(this,c),this.bytes.set(a.subarray(e,d),this.position),this.position+=c,this.length=Math.max(this.length,this.position)},this.writeByte=function(a){g(this,1),this.bytes[this.position]=a,this.position++,this.length=Math.max(this.length,this.position)},this.writeShort=function(a){g(this,2),this.view.setUint16(this.position,a),this.position+=2,this.length=Math.max(this.length,this.position)},this.negIndex=function(a){return this.bytes[this.length-a]},this.nalUnitSize=function(){return 0===e?0:this.length-(e+4)},this.startNalUnit=function(){if(e>0)throw new Error("Attempted to create new NAL wihout closing the old one");e=this.length,this.length+=4,this.position=this.length},this.endNalUnit=function(a){var b,c;this.length===e+4?this.length-=4:e>0&&(b=e+4,c=this.length-b,this.position=e,this.view.setUint32(this.position,c),this.position=this.length,a&&a.push(this.bytes.subarray(b,b+c))),e=0},this.writeMetaDataDouble=function(a,b){var c;if(g(this,2+a.length+9),this.view.setUint16(this.position,a.length),this.position+=2,"width"===a)this.bytes.set(h,this.position),this.position+=5;else if("height"===a)this.bytes.set(i,this.position),this.position+=6;else if("videocodecid"===a)this.bytes.set(j,this.position),this.position+=12;else for(c=0;c<a.length;c++)this.bytes[this.position]=a.charCodeAt(c),this.position++;this.position++,this.view.setFloat64(this.position,b),this.position+=8,this.length=Math.max(this.length,this.position),++e},this.writeMetaDataBoolean=function(a,b){var c;for(g(this,2),this.view.setUint16(this.position,a.length),this.position+=2,c=0;c<a.length;c++)g(this,1),this.bytes[this.position]=a.charCodeAt(c),this.position++;g(this,2),this.view.setUint8(this.position,1),this.position++,this.view.setUint8(this.position,b?1:0),this.position++,this.length=Math.max(this.length,this.position),++e},this.finalize=function(){var a,d;switch(this.bytes[0]){case c.VIDEO_TAG:this.bytes[11]=7|(this.keyFrame||b?16:32),this.bytes[12]=b?0:1,a=this.pts-this.dts,this.bytes[13]=(16711680&a)>>>16,this.bytes[14]=(65280&a)>>>8,this.bytes[15]=(255&a)>>>0;break;case c.AUDIO_TAG:this.bytes[11]=175,this.bytes[12]=b?0:1;break;case c.METADATA_TAG:this.position=11,this.view.setUint8(this.position,2),this.position++,this.view.setUint16(this.position,10),this.position+=2,this.bytes.set([111,110,77,101,116,97,68,97,116,97],this.position),this.position+=10,this.bytes[this.position]=8,this.position++,this.view.setUint32(this.position,e),this.position=this.length,this.bytes.set([0,0,9],this.position),this.position+=3,this.length=this.position}return d=this.length-11,this.bytes[1]=(16711680&d)>>>16,this.bytes[2]=(65280&d)>>>8,this.bytes[3]=(255&d)>>>0,this.bytes[4]=(16711680&this.dts)>>>16,this.bytes[5]=(65280&this.dts)>>>8,this.bytes[6]=(255&this.dts)>>>0,this.bytes[7]=(4278190080&this.dts)>>>24,this.bytes[8]=0,this.bytes[9]=0,this.bytes[10]=0,g(this,4),this.view.setUint32(this.length,this.length),this.length+=4,this.position+=4,this.bytes=this.bytes.subarray(0,this.length),this.frameTime=c.frameTime(this.bytes),this}},c.AUDIO_TAG=8,c.VIDEO_TAG=9,c.METADATA_TAG=18,c.isAudioFrame=function(a){return c.AUDIO_TAG===a[0]},c.isVideoFrame=function(a){return c.VIDEO_TAG===a[0]},c.isMetaData=function(a){return c.METADATA_TAG===a[0]},c.isKeyFrame=function(a){return c.isVideoFrame(a)?23===a[11]:c.isAudioFrame(a)?!0:c.isMetaData(a)?!0:!1},c.frameTime=function(a){var b=a[4]<<16;return b|=a[5]<<8,b|=a[6]<<0,b|=a[7]<<24},b.exports=c},{}],16:[function(a,b){b.exports={tag:a("./flv-tag"),Transmuxer:a("./transmuxer"),tools:a("../tools/flv-inspector")}},{"../tools/flv-inspector":29,"./flv-tag":15,"./transmuxer":17}],17:[function(a,b){"use strict";var c,d,e,f,g,h,i,j=a("../utils/stream.js"),k=a("./flv-tag.js"),l=a("../m2ts/m2ts.js"),m=a("../codecs"),n=m.adts,o=m.h264.H264Stream;g=function(a,b){"number"==typeof b.pts&&(a.timelineStartInfo.pts=void 0===a.timelineStartInfo.pts?b.pts:Math.min(a.timelineStartInfo.pts,b.pts)),"number"==typeof b.dts&&(a.timelineStartInfo.dts=void 0===a.timelineStartInfo.dts?b.dts:Math.min(a.timelineStartInfo.dts,b.dts))},h=function(a,b){var c=new k(k.METADATA_TAG);return c.dts=b,c.pts=b,c.writeMetaDataDouble("videocodecid",7),c.writeMetaDataDouble("width",a.width),c.writeMetaDataDouble("height",a.height),c},i=function(a,b){var c,d=new k(k.VIDEO_TAG,!0);for(d.dts=b,d.pts=b,d.writeByte(1),d.writeByte(a.profileIdc),d.writeByte(a.profileCompatibility),d.writeByte(a.levelIdc),d.writeByte(255),d.writeByte(225),d.writeShort(a.sps[0].length),d.writeBytes(a.sps[0]),d.writeByte(a.pps.length),c=0;c<a.pps.length;++c)d.writeShort(a.pps[c].length),d.writeBytes(a.pps[c]);return d},e=function(a){var b,c=[];e.prototype.init.call(this),this.push=function(b){g(a,b),a&&void 0===a.channelcount&&(a.audioobjecttype=b.audioobjecttype,a.channelcount=b.channelcount,a.samplerate=b.samplerate,a.samplingfrequencyindex=b.samplingfrequencyindex,a.samplesize=b.samplesize,a.extraData=a.audioobjecttype<<11|a.samplingfrequencyindex<<7|a.channelcount<<3),b.pts=Math.round(b.pts/90),b.dts=Math.round(b.dts/90),c.push(b)},this.flush=function(){var d,e,f,g=[];if(0===c.length)return void this.trigger("done");for(f=-(1/0);c.length;)d=c.shift(),(a.extraData!==b||d.pts-f>=1e3)&&(e=new k(k.METADATA_TAG),e.pts=d.pts,e.dts=d.dts,e.writeMetaDataDouble("audiocodecid",10),e.writeMetaDataBoolean("stereo",2===a.channelcount),e.writeMetaDataDouble("audiosamplerate",a.samplerate),e.writeMetaDataDouble("audiosamplesize",16),g.push(e),b=a.extraData,e=new k(k.AUDIO_TAG,!0),e.pts=d.pts,e.dts=d.dts,e.view.setUint16(e.position,a.extraData),e.position+=2,e.length=Math.max(e.length,e.position),g.push(e),f=d.pts),e=new k(k.AUDIO_TAG),e.pts=d.pts,e.dts=d.dts,e.writeBytes(d.data),g.push(e);b=null,this.trigger("data",{track:a,tags:g}),this.trigger("done")}},e.prototype=new j,d=function(a){var b,c,e=[];d.prototype.init.call(this),this.finishFrame=function(c,d){d&&(b&&a&&a.newMetadata&&(d.keyFrame||0===c.length)&&(c.push(h(b,d.pts)),c.push(i(a,d.pts)),a.newMetadata=!1),d.endNalUnit(),c.push(d))},this.push=function(b){g(a,b),b.pts=Math.round(b.pts/90),b.dts=Math.round(b.dts/90),e.push(b)},this.flush=function(){for(var d,f=[];e.length&&e[0].nalUnitType!==m.h264.unitTypes.access_unit_delimiter_rbsp;)e.shift();if(0===e.length)return void this.trigger("done");for(;e.length;){switch(d=e.shift(),d.nalUnitType){case m.h264.unitTypes.seq_parameter_set_rbsp:a.newMetadata=!0,b=d.config,a.width=b.width,a.height=b.height,a.sps=[d.data],a.profileIdc=b.profileIdc,a.levelIdc=b.levelIdc,a.profileCompatibility=b.profileCompatibility,c.endNalUnit();break;case m.h264.unitTypes.pic_parameter_set_rbsp:a.newMetadata=!0,a.pps=[d.data],c.endNalUnit();break;case m.h264.unitTypes.access_unit_delimiter_rbsp:c&&this.finishFrame(f,c),c=new k(k.VIDEO_TAG),c.pts=d.pts,c.dts=d.dts;break;case m.h264.unitTypes.slice_layer_without_partitioning_rbsp_idr:c.keyFrame=!0,c.endNalUnit();break;default:c.endNalUnit()}c.startNalUnit(),c.writeBytes(d.data)}c&&this.finishFrame(f,c),this.trigger("data",{track:a,tags:f}),this.trigger("done")}},d.prototype=new j,f=function(a){this.numberOfTracks=0,this.metadataStream=a.metadataStream,this.videoTags=[],this.audioTags=[],this.videoTrack=null,this.audioTrack=null,this.pendingCaptions=[],this.pendingMetadata=[],this.pendingTracks=0,f.prototype.init.call(this),this.push=function(a){return a.text?this.pendingCaptions.push(a):a.frames?this.pendingMetadata.push(a):("video"===a.track.type&&(this.videoTrack=a.track,this.videoTags=a.tags,this.pendingTracks++),void("audio"===a.track.type&&(this.audioTrack=a.track,this.audioTags=a.tags,this.pendingTracks++)))}},f.prototype=new j,f.prototype.flush=function(){var a,b,c,d,e={tags:{},captions:[],metadata:[]};if(!(this.pendingTracks<this.numberOfTracks)){for(this.videoTrack?d=this.videoTrack.timelineStartInfo.pts:this.audioTrack&&(d=this.audioTrack.timelineStartInfo.pts),e.tags.videoTags=this.videoTags,e.tags.audioTags=this.audioTags,c=0;c<this.pendingCaptions.length;c++)b=this.pendingCaptions[c],b.startTime=b.startPts-d,b.startTime/=9e4,b.endTime=b.endPts-d,b.endTime/=9e4,e.captions.push(b);for(c=0;c<this.pendingMetadata.length;c++)a=this.pendingMetadata[c],a.cueTime=a.pts-d,a.cueTime/=9e4,e.metadata.push(a);e.metadata.dispatchType=this.metadataStream.dispatchType,this.videoTrack=null,this.audioTrack=null,this.videoTags=[],this.audioTags=[],this.pendingCaptions.length=0,this.pendingMetadata.length=0,this.pendingTracks=0,this.trigger("data",e),this.trigger("done")}},c=function(a){var b,g,h,i,j,m,p,q,r,s=this;c.prototype.init.call(this),a=a||{},this.metadataStream=new l.MetadataStream,a.metadataStream=this.metadataStream,b=new l.TransportPacketStream,g=new l.TransportParseStream,h=new l.ElementaryStream,i=new n,j=new o,r=new f(a),b.pipe(g).pipe(h),h.pipe(j),h.pipe(i),h.pipe(this.metadataStream).pipe(r),q=new l.CaptionStream,j.pipe(q).pipe(r),h.on("data",function(a){var b,c,f;if("metadata"===a.type){for(b=a.tracks.length;b--;)"video"===a.tracks[b].type?c=a.tracks[b]:"audio"===a.tracks[b].type&&(f=a.tracks[b]);c&&!m&&(r.numberOfTracks++,m=new d(c),j.pipe(m).pipe(r)),f&&!p&&(r.numberOfTracks++,p=new e(f),i.pipe(p).pipe(r))}}),this.push=function(a){b.push(a)},this.flush=function(){b.flush()},r.on("data",function(a){s.trigger("data",a)}),r.on("done",function(){s.trigger("done")}),this.getFlvHeader=function(a,b,c){var d,e,f,g=new Uint8Array(9),h=new DataView(g.buffer);return a=a||0,b=void 0===b?!0:b,c=void 0===c?!0:c,h.setUint8(0,70),h.setUint8(1,76),h.setUint8(2,86),h.setUint8(3,1),h.setUint8(4,(b?4:0)|(c?1:0)),h.setUint32(5,g.byteLength),0>=a?(e=new Uint8Array(g.byteLength+4),e.set(g),e.set([0,0,0,0],g.byteLength),e):(d=new k(k.METADATA_TAG),d.pts=d.dts=0,d.writeMetaDataDouble("duration",a),f=d.finalize().length,e=new Uint8Array(g.byteLength+f),e.set(g),e.set(h.byteLength,f),e)}},c.prototype=new j,b.exports=c},{"../codecs":14,"../m2ts/m2ts.js":21,"../utils/stream.js":32,"./flv-tag.js":15}],18:[function(a,b){"use strict";var c={codecs:a("./codecs"),mp4:a("./mp4"),flv:a("./flv"),mp2t:a("./m2ts")};b.exports=c},{"./codecs":14,"./flv":16,"./m2ts":20,"./mp4":25}],19:[function(a,b){"use strict";var c=4,d=128,e=a("../utils/stream"),f=a("../codecs"),g=function(a){for(var b=0,e={payloadType:-1,payloadSize:0},f=0,g=0;b<a.byteLength&&a[b]!==d;){for(;255===a[b];)f+=255,b++;for(f+=a[b++];255===a[b];)g+=255,b++;if(g+=a[b++],!e.payload&&f===c){e.payloadType=f,e.payloadSize=g,e.payload=a.subarray(b,b+g);break}b+=g,f=0,g=0}return e},h=function(a){return 181!==a.payload[0]?null:49!==(a.payload[1]<<8|a.payload[2])?null:"GA94"!==String.fromCharCode(a.payload[3],a.payload[4],a.payload[5],a.payload[6])?null:3!==a.payload[7]?null:a.payload.subarray(8,a.payload.length-1)},i=function(a,b){var c,d,e,f,g=[];if(!(64&b[0]))return g;for(d=31&b[0],c=0;d>c;c++)e=3*c,f={type:3&b[e+2],pts:a},4&b[e+2]&&(f.ccData=b[e+3]<<8|b[e+4],g.push(f));return g},j=function(){j.prototype.init.call(this),this.captionPackets_=[],this.field1_=new y,this.field1_.on("data",this.trigger.bind(this,"data")),this.field1_.on("done",this.trigger.bind(this,"done"))};j.prototype=new e,j.prototype.push=function(a){var b,d;a.nalUnitType===f.h264.unitTypes.sei_rbsp&&(b=g(a.escapedRBSP),b.payloadType===c&&(d=h(b),d&&(this.captionPackets_=this.captionPackets_.concat(i(a.pts,d)))))},j.prototype.flush=function(){return this.captionPackets_.length?(this.captionPackets_.sort(function(a,b){return a.pts-b.pts}),this.captionPackets_.forEach(this.field1_.push,this.field1_),this.captionPackets_.length=0,void this.field1_.flush()):void this.field1_.flush()};var k={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608},l=function(a){return null===a?"":(a=k[a]||a,String.fromCharCode(a))},m=0,n=5152,o=5167,p=5157,q=5158,r=5159,s=5165,t=5153,u=5164,v=5166,w=14,x=function(){for(var a=[],b=w+1;b--;)a.push("");return a},y=function(){y.prototype.init.call(this),this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=x(),this.nonDisplayed_=x(),this.lastControlCode_=null,this.push=function(a){if(0===a.type){var b,c,d,e;if(b=32639&a.ccData,b===this.lastControlCode_)return void(this.lastControlCode_=null);switch(this.lastControlCode_=4096===(61440&b)?b:null,b){case m:break;case n:this.mode_="popOn";break;case o:this.flushDisplayed(a.pts),c=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=c,this.startPts_=a.pts;break;case p:this.topRow_=w-1,this.mode_="rollUp";break;case q:this.topRow_=w-2,this.mode_="rollUp";break;case r:this.topRow_=w-3,this.mode_="rollUp";break;case s:this.flushDisplayed(a.pts),this.shiftRowsUp_(),this.startPts_=a.pts;break;case t:"popOn"===this.mode_?this.nonDisplayed_[w]=this.nonDisplayed_[w].slice(0,-1):this.displayed_[w]=this.displayed_[w].slice(0,-1);break;case u:this.flushDisplayed(a.pts),this.displayed_=x();break;case v:this.nonDisplayed_=x();break;default:if(d=b>>>8,e=255&b,d>=16&&23>=d&&e>=64&&127>=e&&(16!==d||96>e)&&(d=32,e=null),(17===d||25===d)&&e>=48&&63>=e&&(d=9834,e=""),16===(240&d))return;this[this.mode_](a.pts,d,e)}}}};y.prototype=new e,y.prototype.flushDisplayed=function(a){var b=this.displayed_.map(function(a){return a.trim()}).filter(function(a){return a.length}).join("\n");b.length&&this.trigger("data",{startPts:this.startPts_,endPts:a,text:b})},y.prototype.popOn=function(a,b,c){var d=this.nonDisplayed_[w];d+=l(b),d+=l(c),this.nonDisplayed_[w]=d},y.prototype.rollUp=function(a,b,c){var d=this.displayed_[w];""===d&&(this.flushDisplayed(a),this.startPts_=a),d+=l(b),d+=l(c),this.displayed_[w]=d},y.prototype.shiftRowsUp_=function(){var a;for(a=0;a<this.topRow_;a++)this.displayed_[a]="";for(a=this.topRow_;w>a;a++)this.displayed_[a]=this.displayed_[a+1];this.displayed_[w]=""},b.exports={CaptionStream:j,Cea608Stream:y}},{"../codecs":14,"../utils/stream":32}],20:[function(a,b){b.exports=a("./m2ts")},{"./m2ts":21}],21:[function(a,b){"use strict";var c,d,e,f=a("../utils/stream.js"),g=a("./caption-stream"),h=a("./stream-types"),i=a("./timestamp-rollover-stream").TimestampRolloverStream,j=a("./stream-types.js"),k=188,l=71;c=function(){var a=new Uint8Array(k),b=0;c.prototype.init.call(this),this.push=function(c){var d,e=0,f=k;for(b?(d=new Uint8Array(c.byteLength+b),d.set(a.subarray(0,b)),d.set(c,b),b=0):d=c;f<d.byteLength;)d[e]!==l||d[f]!==l?(e++,f++):(this.trigger("data",d.subarray(e,f)),e+=k,f+=k);e<d.byteLength&&(a.set(d.subarray(e),0),b=d.byteLength-e)},this.flush=function(){b===k&&a[0]===l&&(this.trigger("data",a),b=0),this.trigger("done")}},c.prototype=new f,d=function(){var a,b,c,e;d.prototype.init.call(this),e=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,a=function(a,d){var e=0;d.payloadUnitStartIndicator&&(e+=a[e]+1),"pat"===d.type?b(a.subarray(e),d):c(a.subarray(e),d)},b=function(a,b){b.section_number=a[7],b.last_section_number=a[8],e.pmtPid=(31&a[10])<<8|a[11],b.pmtPid=e.pmtPid},c=function(a,b){var c,d,f,g;if(1&a[5]){for(e.programMapTable={},c=(15&a[1])<<8|a[2],d=3+c-4,f=(15&a[10])<<8|a[11],g=12+f;d>g;)e.programMapTable[(31&a[g+1])<<8|a[g+2]]=a[g],g+=((15&a[g+3])<<8|a[g+4])+5;for(b.programMapTable=e.programMapTable;e.packetsWaitingForPmt.length;)e.processPes_.apply(e,e.packetsWaitingForPmt.shift())}},this.push=function(b){var c={},d=4;c.payloadUnitStartIndicator=!!(64&b[1]),c.pid=31&b[1],c.pid<<=8,c.pid|=b[2],(48&b[3])>>>4>1&&(d+=b[d]+1),0===c.pid?(c.type="pat",a(b.subarray(d),c),this.trigger("data",c)):c.pid===this.pmtPid?(c.type="pmt",a(b.subarray(d),c),this.trigger("data",c)):void 0===this.programMapTable?this.packetsWaitingForPmt.push([b,d,c]):this.processPes_(b,d,c)},this.processPes_=function(a,b,c){c.streamType=this.programMapTable[c.pid],c.type="pes",c.data=a.subarray(b),this.trigger("data",c)}},d.prototype=new f,d.STREAM_TYPES={h264:27,adts:15},e=function(){var a=this,b={data:[],size:0},c={data:[],size:0},d={data:[],size:0},f=function(a,b){function c(a,b){var c=536870912*(14&a[b])+4194304*(255&a[b+1])+16384*(254&a[b+2])+128*(255&a[b+3])+(254&a[b+4])/2;return c>4294967295&&(c-=8589934592),c}var d;b.dataAlignmentIndicator=0!==(4&a[6]),d=a[7],192&d&&(b.pts=c(a,9),b.dts=64&d?c(a,14):b.pts),b.data=a.subarray(9+a[8])},g=function(b,c){var d,e=new Uint8Array(b.size),g={type:c},h=0;if(b.data.length){for(g.trackId=b.data[0].pid;b.data.length;)d=b.data.shift(),e.set(d.data,h),h+=d.data.byteLength;f(e,g),b.size=0,a.trigger("data",g)}};e.prototype.init.call(this),this.push=function(e){({pat:function(){},pes:function(){var a,f;switch(e.streamType){case h.H264_STREAM_TYPE:case j.H264_STREAM_TYPE:a=b,f="video";break;case h.ADTS_STREAM_TYPE:a=c,f="audio";break;case h.METADATA_STREAM_TYPE:a=d,f="timed-metadata";break;default:return}e.payloadUnitStartIndicator&&g(a,f),a.data.push(e),a.size+=e.data.byteLength},pmt:function(){var b,c,d={type:"metadata",tracks:[]},f=e.programMapTable;for(b in f)f.hasOwnProperty(b)&&(c={timelineStartInfo:{baseMediaDecodeTime:0}},c.id=+b,f[b]===j.H264_STREAM_TYPE?(c.codec="avc",c.type="video"):f[b]===j.ADTS_STREAM_TYPE&&(c.codec="adts",c.type="audio"),d.tracks.push(c));a.trigger("data",d)}})[e.type]()},this.flush=function(){g(b,"video"),g(c,"audio"),g(d,"timed-metadata"),this.trigger("done")}},e.prototype=new f;var m={PAT_PID:0,MP2T_PACKET_LENGTH:k,TransportPacketStream:c,TransportParseStream:d,ElementaryStream:e,TimestampRolloverStream:i,CaptionStream:g.CaptionStream,Cea608Stream:g.Cea608Stream,MetadataStream:a("./metadata-stream")};for(var n in h)h.hasOwnProperty(n)&&(m[n]=h[n]);b.exports=m},{"../utils/stream.js":32,"./caption-stream":19,"./metadata-stream":22,"./stream-types":23,"./stream-types.js":23,"./timestamp-rollover-stream":24}],22:[function(a,b){"use strict";var c,d=a("../utils/stream"),e=a("./stream-types"),f=function(a,b,c){var d,e="";for(d=b;c>d;d++)e+="%"+("00"+a[d].toString(16)).slice(-2);return e},g=function(a,b,c){return decodeURIComponent(f(a,b,c))},h=function(a,b,c){return unescape(f(a,b,c))},i=function(a){return a[0]<<21|a[1]<<14|a[2]<<7|a[3]},j={TXXX:function(a){var b;if(3===a.data[0]){for(b=1;b<a.data.length;b++)if(0===a.data[b]){a.description=g(a.data,1,b),a.value=g(a.data,b+1,a.data.length-1);break}a.data=a.value}},WXXX:function(a){var b;if(3===a.data[0])for(b=1;b<a.data.length;b++)if(0===a.data[b]){a.description=g(a.data,1,b),a.url=g(a.data,b+1,a.data.length);break}},PRIV:function(a){var b;for(b=0;b<a.data.length;b++)if(0===a.data[b]){a.owner=h(a.data,0,b);break}a.privateData=a.data.subarray(b+1),a.data=a.privateData}};c=function(a){var b,d={debug:!(!a||!a.debug),descriptor:a&&a.descriptor},f=0,g=[],h=0;if(c.prototype.init.call(this),this.dispatchType=e.METADATA_STREAM_TYPE.toString(16),d.descriptor)for(b=0;b<d.descriptor.length;b++)this.dispatchType+=("00"+d.descriptor[b].toString(16)).slice(-2);this.push=function(a){var b,c,e,k,l,m;if("timed-metadata"===a.type){if(a.dataAlignmentIndicator&&(h=0,g.length=0),0===g.length&&(a.data.length<10||a.data[0]!=="I".charCodeAt(0)||a.data[1]!=="D".charCodeAt(0)||a.data[2]!=="3".charCodeAt(0)))return void d.debug;if(g.push(a),h+=a.data.byteLength,1===g.length&&(f=i(a.data.subarray(6,10)),f+=10),!(f>h)){for(b={data:new Uint8Array(f),frames:[],pts:g[0].pts,dts:g[0].dts},l=0;f>l;)b.data.set(g[0].data.subarray(0,f-l),l),l+=g[0].data.byteLength,h-=g[0].data.byteLength,g.shift();c=10,64&b.data[5]&&(c+=4,c+=i(b.data.subarray(10,14)),f-=i(b.data.subarray(16,20)));do{if(e=i(b.data.subarray(c+4,c+8)),1>e)return void 0;if(m=String.fromCharCode(b.data[c],b.data[c+1],b.data[c+2],b.data[c+3]),k={id:m,data:b.data.subarray(c+10,c+e+10)},k.key=k.id,j[k.id]&&(j[k.id](k),"com.apple.streaming.transportStreamTimestamp"===k.owner)){var n=k.data,o=(1&n[3])<<30|n[4]<<22|n[5]<<14|n[6]<<6|n[7]>>>2;o*=4,o+=3&n[7],k.timeStamp=o,this.trigger("timestamp",k)}b.frames.push(k),c+=10,c+=e}while(f>c);this.trigger("data",b)}}}},c.prototype=new d,b.exports=c},{"../utils/stream":32,"./stream-types":23}],23:[function(a,b){"use strict";b.exports={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21}},{}],24:[function(a,b){"use strict";var c=a("../utils/stream"),d=8589934592,e=4294967296,f=function(a,b){var c=1;for(a>b&&(c=-1);Math.abs(b-a)>e;)a+=c*d;return a},g=function(a){var b,c;g.prototype.init.call(this),this.type_=a,this.push=function(a){a.type===this.type_&&(void 0===c&&(c=a.dts),a.dts=f(a.dts,c),a.pts=f(a.pts,c),b=a.dts,this.trigger("data",a))},this.flush=function(){c=b,this.trigger("done")}};g.prototype=new c,b.exports={TimestampRolloverStream:g,handleRollover:f}},{"../utils/stream":32}],25:[function(a,b){b.exports={generator:a("./mp4-generator"),Transmuxer:a("./transmuxer").Transmuxer,AudioSegmentStream:a("./transmuxer").AudioSegmentStream,VideoSegmentStream:a("./transmuxer").VideoSegmentStream,tools:a("../tools/mp4-inspector"),MP4ParserStream:a("./mp4-parser").MP4ParserStream,MP4BuilderStream:a("./mp4-parser").MP4BuilderStream}},{"../tools/mp4-inspector":30,"./mp4-generator":26,"./mp4-parser":27,"./transmuxer":28}],26:[function(a,b){"use strict";function c(a){return[a>>>24&255,a>>>16&255,a>>>8&255,255&a]}function d(a){return[a>>>8&255,255&a]}var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V=Math.pow(2,32)-1;T=window.Uint8Array,U=window.DataView,function(){var a;if(F={avc1:[],avcC:[],btrt:[],cslg:[],dinf:[],dref:[],edts:[],elst:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trep:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof T){for(a in F)F.hasOwnProperty(a)&&(F[a]=[a.charCodeAt(0),a.charCodeAt(1),a.charCodeAt(2),a.charCodeAt(3)]);G=new T(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),I=new T(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),H=new T([0,0,0,1]),J=new T([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),K=new T([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),L={video:J,audio:K},O=new T([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),N=new T([0,0,0,0,0,0,0,0]),P=new T([0,0,0,0,0,0,0,0]),Q=P,R=new T([0,0,0,0,0,0,0,0,0,0,0,0]),S=P,M=new T([0,0,0,1,0,0,0,0,0,0,0,0])}}(),e=function(a){var b,c,d,e=[],f=0;for(b=1;b<arguments.length;b++)e.push(arguments[b]);for(b=e.length;b--;)f+=e[b].byteLength;for(c=new T(f+8),d=new U(c.buffer,c.byteOffset,c.byteLength),d.setUint32(0,c.byteLength),c.set(a,4),b=0,f=8;b<e.length;b++)c.set(e[b],f),f+=e[b].byteLength;return c},f=function(a){var b={};for(var c in a)b[c]=a[c]>>>0;return e(F.cslg,new T([0,0,0,0,b.ctts_shift>>>24&255,b.ctts_shift>>>16&255,b.ctts_shift>>>8&255,255&b.ctts_shift,b.min_ctts>>>24&255,b.min_ctts>>>16&255,b.min_ctts>>>8&255,255&b.min_ctts,b.max_ctts>>>24&255,b.max_ctts>>>16&255,b.max_ctts>>>8&255,255&b.max_ctts,b.min_cts>>>24&255,b.min_cts>>>16&255,b.min_cts>>>8&255,255&b.min_cts,b.max_cts>>>24&255,b.max_cts>>>16&255,b.max_cts>>>8&255,255&b.max_cts]))},g=function(){return e(F.dinf,e(F.dref,O))},j=function(a){return e(F.edts,k(a))},k=function(a){var b,f=a.edit_list.length,g=[0,0,0,0].concat(c(f));for(b=0;f>b;b++)g=g.concat(c(a.edit_list[b].segment_duration)).concat(c(a.edit_list[b].media_time)).concat(d(a.edit_list[b].media_rate)).concat(d(0));return e(F.elst,new T(g))},h=function(a){return e(F.esds,new T([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,a.audioobjecttype<<3|a.samplingfrequencyindex>>>1,a.samplingfrequencyindex<<7|a.channelcount<<3,6,1,2]))},i=function(a){a=a||{};var b=a.compatible||[G,I];return b=b.slice(0),b.unshift(F.ftyp,a.major||G,H),e.apply(null,b)},w=function(a){return e(F.hdlr,L[a])},l=function(a){return e(F.mdat,a)},v=function(a){var b=new T([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,a.duration>>>24&255,a.duration>>>16&255,a.duration>>>8&255,255&a.duration,85,196,0,0]);return a.samplerate&&(b[12]=a.samplerate>>>24&255,b[13]=a.samplerate>>>16&255,b[14]=a.samplerate>>>8&255,b[15]=255&a.samplerate),e(F.mdhd,b)},u=function(a){return e(F.mdia,v(a),w(a.type),n(a))},m=function(a){return e(F.mfhd,new T([0,0,0,0,(4278190080&a)>>24,(16711680&a)>>16,(65280&a)>>8,255&a]))},n=function(a){return e(F.minf,"video"===a.type?e(F.vmhd,M):e(F.smhd,N),g(),y(a))},o=function(a,b,c){var d=[],f=b.length;for(c=c||{};f--;)d[f]=B(b[f],c);return e.apply(null,[F.moof,m(a)].concat(d))},p=function(a,b){var c=a.length,d=[],f=0;for(b=b||{};c--;)d[c]=s(a[c]),b.set_duration&&(f=Math.max(f,Math.floor(9e4*a[c].duration/a[c].samplerate)));return f=b.duration||f||4294967295,e.apply(null,[F.moov,r(f)].concat(d).concat(q(a)))},q=function(a){for(var b=a.length,c=[];b--;)c[b]=D(a[b]),a[b].cslg&&a[b].cslg.max_cts&&c.push(C(a[b]));return e.apply(null,[F.mvex].concat(c))},r=function(a){var b=new T([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&a)>>24,(16711680&a)>>16,(65280&a)>>8,255&a,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return e(F.mvhd,b)},x=function(a){var b,c,d=a.samples||[],f=new T(4+d.length);for(c=0;c<d.length;c++)b=d[c].flags,f[c+4]=b.isLeading<<6|b.dependsOn<<4|b.isDependedOn<<2|b.hasRedundancy;return e(F.sdtp,f)},y=function(a){return e(F.stbl,z(a),e(F.stts,S),e(F.stsc,Q),e(F.stsz,R),e(F.stco,P))},function(){var a,b;z=function(c){return e(F.stsd,new T([0,0,0,0,0,0,0,1]),"video"===c.type?a(c):b(c))},a=function(a){var b,c=a.sps||[],d=a.pps||[],f=[],g=[];for(b=0;b<c.length;b++)f.push((65280&c[b].byteLength)>>>8),f.push(255&c[b].byteLength),f=f.concat(Array.prototype.slice.call(c[b]));for(b=0;b<d.length;b++)g.push((65280&d[b].byteLength)>>>8),g.push(255&d[b].byteLength),g=g.concat(Array.prototype.slice.call(d[b]));return e(F.avc1,new T([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&a.width)>>8,255&a.width,(65280&a.height)>>8,255&a.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),e(F.avcC,new T([1,a.profileIdc,a.profileCompatibility,a.levelIdc,255].concat([224|c.length]).concat(f).concat([d.length]).concat(g))),e(F.btrt,new T([0,28,156,128,0,45,198,192,0,45,198,192])))},b=function(a){return e(F.mp4a,new T([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&a.channelcount)>>8,255&a.channelcount,(65280&a.samplesize)>>8,255&a.samplesize,0,0,0,0,(65280&a.samplerate)>>8,255&a.samplerate,0,0]),h(a))}}(),A=function(){return e(F.styp,G,H,G)},t=function(a){var b=a.duration;a.samplerate&&(b=Math.floor(9e4*b/a.samplerate));var c=new T([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&a.id)>>24,(16711680&a.id)>>16,(65280&a.id)>>8,255&a.id,0,0,0,0,(4278190080&a.duration)>>24,(16711680&a.duration)>>16,(65280&a.duration)>>8,255&a.duration,0,0,0,0,0,0,0,0,0,0,0,0,+("audio"==a.type),0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&a.width)>>8,255&a.width,0,0,(65280&a.height)>>8,255&a.height,0,0]);return e(F.tkhd,c)},B=function(a,b){var c,d,f,g,h,i,j;return b=b||{},c=e(F.tfhd,new T([0,b.no_multi_init?2:0,0,58,(4278190080&a.id)>>24,(16711680&a.id)>>16,(65280&a.id)>>8,255&a.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),i=Math.floor(a.baseMediaDecodeTime/(V+1)),j=Math.floor(a.baseMediaDecodeTime%(V+1)),d=e(F.tfdt,new T([1,0,0,0,i>>>24&255,i>>>16&255,i>>>8&255,255&i,j>>>24&255,j>>>16&255,j>>>8&255,255&j])),h=92,"audio"===a.type?(f=E(a,h),e(F.traf,c,d,f)):(g=x(a),f=E(a,g.length+h),e(F.traf,c,d,f,g))},s=function(a){a.duration=a.duration||4294967295;var b=[F.trak,t(a),u(a)];return a.edit_list&&a.edit_list.length&&b.splice(2,0,j(a)),e.apply(null,b)},C=function(a){return e(F.trep,new T([0,0,0,0,(4278190080&a.id)>>24,(16711680&a.id)>>16,(65280&a.id)>>8,255&a.id]),f(a.cslg))},D=function(a){var b=new T([0,0,0,0,(4278190080&a.id)>>24,(16711680&a.id)>>16,(65280&a.id)>>8,255&a.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==a.type&&(b[b.length-1]=0),e(F.trex,b)},E=function(a,b){function c(a){return("duration"in a&&1)|("size"in a&&2)|("flags"in a&&4)|("compositionTimeOffset"in a&&8)}function d(a,b,c){return[0,0,c,1,(4278190080&a.length)>>>24,(16711680&a.length)>>>16,(65280&a.length)>>>8,255&a.length,(4278190080&b)>>>24,(16711680&b)>>>16,(65280&b)>>>8,255&b]}var f=a.samples||[],g=c(f[0]||{});b+=20+4*f.length*((g>>3&1)+(g>>2&1)+(g>>1&1)+(1&g));for(var h=d(f,b,g),i=!1,j=0;j<f.length;j++){var k=f[j];1&g&&h.push(k.duration>>24&255,k.duration>>16&255,k.duration>>8&255,255&k.duration),2&g&&h.push(k.size>>24&255,k.size>>16&255,k.size>>8&255,255&k.size),4&g&&h.push(k.flags.isLeading<<2|k.flags.dependsOn,k.flags.isDependedOn<<6|k.flags.hasRedundancy<<4|k.flags.paddingValue<<1|k.flags.isNonSyncSample,k.flags.degradationPriority>>8&255,255&k.flags.degradationPriority),8&g&&(i=i||k.compositionTimeOffset<0,h.push(k.compositionTimeOffset>>24&255,k.compositionTimeOffset>>16&255,k.compositionTimeOffset>>8&255,255&k.compositionTimeOffset))}return h[0]=+!!i,e(F.trun,new T(h))},b.exports={ftyp:i,mdat:l,moof:o,moov:p,initSegment:function(a,b){var c,d=i(b),e=p(a,b);return c=new T(d.byteLength+e.byteLength),c.set(d),c.set(e,d.byteLength),c}}},{}],27:[function(a,b){"use strict";function c(a){return("0"+a.toString(16)).slice(-2)}function d(a){return String.fromCharCode(a>>24&255,a>>16&255,a>>8&255,255&a)}function e(a,b){return a.getUint32(b+4)+4294967296*a.getUint32(b)}function f(a,b){var c=a.getUint8(b);return 128>c?e(a,b):a.getUint32(b+4)+4294967296*(a.getUint32(b)-4294967296)}function g(a,b,c){var d=0,e=8*c;this.read=function(c,e){for(var f=0,g=d>>3,h=7-d%8,i=0,j=a.getUint8(g+b);c>i;i++,h--)f=f<<1|j>>h&1,h||(g++,h=8,j=a.getUint8(g+b));return e||(d+=c),f},this.bits=function(){return e-d}}function h(a){var b=a.view,c=a.ptr,d="tkhd"==a.type;return a.ver?[e(b,c),e(b,c+8),b.getUint32(c+16),e(b,c+(d?24:20))]:[b.getUint32(c),b.getUint32(c+4),b.getUint32(c+8),b.getUint32(c+(d?16:12))]}function i(a,b,c,d){for(var e=0;c>e;e++)d[e]=a.getUint32(b+4*e)}var j=a("../utils/stream.js"),k=a("./mp4-generator.js"),l={vide:"video",soun:"audio"},m=["meta","mvhd","tkhd","mdhd","smhd","vmhd","dref","hdlr","stsd","esds","stts","stps","stss","ctts","stsc","stsz","stco","esds","elst","nmhd","cslg","sdtp","co64"],n=["udta","smhd","vmhd","dref","iods","btrt","pasp","clap","uuid","colr","sbgp","sgpd","gmhd","tref","nmhd","svcC","hmhd","fiel","tapt","load","meta","sefd","beam","tgas","elng"],o={trak:{name:"track_info",multi:1},edts:{name:"edit_list"},exts:{name:"edit_list"},mdia:{name:"media_box"},minf:{name:"media_info"},dinf:{name:"data_info"},stbl:{name:"sample_table"}},p=function(){};p.prototype={},p.prototype.header=function(a){for(;a.ptr+a.buffer.b_pos>=a.branch.last;)"movie_box"==a.branch._id&&(a.root.h_parsed=!0),
a.branch=a.branch.parent;if(a.type=null,a.offset=8,a.buffer.b_size-a.ptr<8)return a.offset=0;if(a.size=a.view.getUint32(a.ptr),1==a.size){if(a.offset=16,a.buffer.b_size-a.ptr<16)return a.offset=0;a.size=(a.view.getUint32(a.ptr+8)<<32)+a.view.getUint32(a.ptr+12)}if(a.type=d(a.view.getUint32(a.ptr+4)),m.includes(a.type)){if(a.offset+=4,a.buffer.b_size-a.ptr<a.offset)return a.offset=0;var b=a.view.getUint8(a.ptr+a.offset-4);a.ver=b>>>24,a.flags=b&&16777215}a.size-=a.offset,a.ptr+=a.offset},p.prototype.parse=function(a){if(!this[a.type])throw new Error("Unknown box type: "+a.type);this[a.type](a)},n.forEach(function(a){p.prototype[a]=function(b){var c=b.branch[a]=new Uint8Array(b.size);c.set(b.buffer._buff.subarray(b.ptr,b.ptr+b.size))}}),Object.keys(o).forEach(function(a){p.prototype[a]=function(b){var c=o[a];b.branch[c.name]=b.branch[c.name]||(c.multi?[]:{});var d=b.branch[c.name];c.multi&&(d.push({}),d=d[d.length-1]),d.parent=b.branch,d.last=b.buffer.b_pos+b.ptr+b.size,d._id=c.name,b.branch=d,b.size=0}}),p.prototype.moov=function(a){var b=a.branch.movie_box=a.branch.movie_box||{};b.parent=a.branch,b.last=a.buffer.b_pos+a.ptr+a.size,b._id="movie_box",a.buffer.b_pos<256?a.branch.start_hdr_sz=a.size:a.branch.end_hdr_sz=a.size,a.branch=b,a.size=0},p.prototype.ftyp=function(a){a.branch.major_brand=d(a.view.getUint32(a.ptr)),a.branch.minor_version=a.view.getUint32(a.ptr+4),a.branch.compatible=[a.branch.major_brand];for(var b=8;b<a.size;b+=4)a.branch.compatible.push(d(a.view.getUint32(a.ptr+b)))},p.prototype.mdat=function(){},p.prototype.free=function(){},p.prototype.wide=function(){},p.prototype.skip=function(){},p.prototype.mvhd=function(a){var b=a.view,c=a.ptr,d=a.ver?28:16,e=a.branch.mv_hdr={},f=h(a);e.creation_time=f[0],e.modification_time=f[1],e.time_scale=f[2],e.duration=f[3],c+=d,e.rate=b.getUint32(c)/65536,e.volume=b.getUint16(c+4)/256,i(a.view,c+16,9,e.matrix=[]),e.next_track=b.getUint32(c+76)},p.prototype.tkhd=function(a){var b=a.view,c=a.ptr,d=a.ver?40:28,e=a.branch.tk_hdr={},f=h(a);e.enabled=!!(1&a.flags),e.in_movie=!!(2&a.flags),e.in_preview=!!(4&a.flags),e.creation_time=f[0],e.modification_time=f[1],e.track_id=f[2],e.duration=f[3],c+=d,e.layer=b.getUint16(c),e.alternate_group=b.getUint16(c+2),e.volume=b.getInt16(c+4)/256,i(a.view,c+8,9,e.matrix=[]),e.width=b.getUint32(c+44)/65536,e.height=b.getUint32(c+48)/65536},p.prototype.mdhd=function(a){var b=a.view,c=a.ptr,d=a.ver?28:16,e=a.branch.md_hdr={},f=h(a);e.creation_time=f[0],e.modification_time=f[1],e.time_scale=f[2],e.duration=f[3];var g=b.getUint16(c+d);e.lang=String.fromCharCode(g>>10|96,g>>5&31|96,31&g|96)},p.prototype.elst=function(a){var b=a.view,c=a.ptr+4,d=b.getUint32(a.ptr);a.branch.list=[];for(var g=0;d>g;c+=4,g++){var h={};h.segment_duration=a.ver?e(b,c):b.getUint32(c),h.media_time=a.ver?f(b,c+8):b.getInt32(c+4),c+=a.ver?16:8,h.media_rate=b.getInt16(c),a.branch.list.push(h)}},p.prototype.cslg=function(a){var b=a.view,c=a.ptr;a.branch.cslg={ctts_shift:b.getInt32(c),min_ctts:b.getInt32(c+4),max_ctts:b.getInt32(c+8),min_cts:b.getInt32(c+12),max_cts:b.getInt32(c+16)}},p.prototype.hdlr=function(a){a.branch.handler=d(a.view.getUint32(a.ptr+4))},p.prototype._parse_avcc=function(a,b){var c=a.view,d=a.ptr,e=b.sps=[],f=b.pps=[];b.avc_p_i=c.getUint8(d+1),b.prof_compat=c.getUint8(d+2),b.avc_l_i=c.getUint8(d+3),b.l_size_m_1=3&c.getUint8(d+4),b.n_sps=31&c.getUint8(d+5);for(var g=6,h=0;h<b.n_sps;h++)e[h]={l:c.getUint16(d+g)},g+=2,e[h].nal=new Uint8Array(a.buffer._buff.subarray(d+g,d+g+e[h].l)),g+=e[h].l;for(b.n_pps=c.getUint8(d+g++),h=0;h<b.n_pps;h++)f[h]={l:c.getUint16(d+g)},g+=2,f[h].nal=new Uint8Array(a.buffer._buff.subarray(d+g,d+g+f[h].l)),g+=f[h].l},p.prototype._parse_esds=function(a,b){for(var c=a.view,d=a.ptr;d<a.ptr+a.size;){var e,f=c.getUint8(d++),h=0;do e=c.getUint8(d++),h=(h<<7)+(127&e);while(128&e);switch(f){case 3:b.es_id=c.getUint16(d);var i=c.getUint8(d+2);d+=3+(i>>6&2)+(i>>4&2);break;case 4:b.obj_t=c.getUint8(d),b.str_t=63&c.getUint8(d+1),d+=13;break;case 5:var j,k=new g(c,d,h);if(b.aot=k.read(5),31==b.aot&&(b.aot=32+k.read(6)),b.freq=k.read(4),15==b.freq&&(b.freq=k.read(24)),b.channel=k.read(4),(5==b.aot||29==b.aot)&&(j=5,15==(b.ext_freq_index=k.read(4))&&(b.ext_freq=k.read(24)),b.aot=k.read(5),31==b.aot&&(b.aot=32+k.read(6))),5!=j&&36!=b.aot)for(;k.bits()>=16;)695==k.read(11,1)?(k.read(11),5==k.read(5)&&k.read(1)&&(15==k.read(4)&&k.read(24),k.bits()>=12&&1352==k.read(11)&&1!=k.read(1)&&(b.dsi=5))):k.read(1);d+=h;break;default:d+=h}}},p.prototype.stsd=function(a){var b,c,d=a.view,e=d.getUint32(a.ptr),f=a.branch.parent.parent.handler;for(a.branch.list={},a.ptr+=4,b=0;e>b;b++){this.header(a);var g={},h=d.getUint16(a.ptr+6),i=a.ptr+a.size;switch(f){case"vide":for(g.width=d.getUint16(a.ptr+24),g.height=d.getUint16(a.ptr+26),g.h_res=d.getUint32(a.ptr+28)/65536,g.v_res=d.getUint32(a.ptr+32)/65536,g.f_count=d.getUint16(a.ptr+40),g.compressor="",c=0;32>c;c++){var j=d.getUint8(a.ptr+42+c);if(!j)break;g.compressor+=String.fromCharCode()}g.depth=d.getUint16(a.ptr+74);for(var k=[1668246642,1668047216,1885434736,1718183276];k.includes(d.getUint32(a.ptr+82));)a.ptr+=d.getUint32(a.ptr+78);1635148611==d.getUint32(a.ptr+82)&&(g.avcc={},a.ptr+=78,this.header(a),this._parse_avcc(a,g.avcc));break;case"soun":for(g.c_count=d.getUint16(a.ptr+16),g.s_size=d.getUint16(a.ptr+18),g.s_rate=d.getUint32(a.ptr+24)/65536,c=32;c<a.size-12;c++)if(1702061171==d.getUint32(a.ptr+c)){g.esds={},a.ptr+=c-4,this.header(a),this._parse_esds(a,g.esds);break}}a.ptr=i,a.branch.list[h]=g}a.size=0},p.prototype.stts=function(a){var b=a.view.getUint32(a.ptr),c=a.ptr+4;a.branch.dtts=[];for(var d=0;b>d;d++)for(var e=a.view.getUint32(a.ptr+4+8*d),f=a.view.getUint32(c+8*d+4),g=0;e>g;g++)a.branch.dtts.push(f)},p.prototype.ctts=function(a){var b=a.view.getUint32(a.ptr),c=a.ptr+4;a.branch.ctts=[];for(var d=0;b>d;d++)for(var e=a.view.getUint32(c+8*d),f=a.view.getInt32(c+8*d+4),g=0;e>g;g++)a.branch.ctts.push(f)},p.prototype.stsc=function(a){for(var b=a.view.getUint32(a.ptr),c=a.branch.s_t_c=[],d=a.view,e=a.ptr+4,f=0;b>f;f++)c[f]={f_c:d.getUint32(e+12*f),s_p_c:d.getUint32(e+12*f+4),s_d_i:d.getUint32(e+12*f+8)};c.sort(function(a,b){return a.f_c-b.f_c})},p.prototype.stss=function(a){i(a.view,a.ptr+4,a.view.getUint32(a.ptr),a.branch.s_sync=[])},p.prototype.stps=function(a){i(a.view,a.ptr+4,a.view.getUint32(a.ptr),a.branch.s_psync=[])},p.prototype.sdtp=function(a){a.branch.s_dep=[];for(var b=0;b<a.size;b++){var c=a.view.getUint8(a.ptr+b);a.branch.s_dep[b]={red:3&c,is_dep:c>>2&3,dep:c>>4&3,lead:c>>6&3}}},p.prototype.stsz=function(a){var b=a.view.getUint32(a.ptr);if(a.branch.s_sz=[],a.branch.s_count=a.view.getUint32(a.ptr+4),b)for(var c=0;c<a.branch.s_count;c++)a.branch.s_sz.push(b);else i(a.view,a.ptr+8,a.branch.s_count,a.branch.s_sz)},p.prototype.stco=function(a){i(a.view,a.ptr+4,a.view.getUint32(a.ptr),a.branch.c_off=[])},p.prototype.co64=function(a){var b=a.view.getUint32(a.ptr);a.branch.c_off=[];for(var c=0;b>c;c++)a.branch.c_off[c]=e(a.view,a.ptr+4+8*c)};var q=function(a){this.conf_update(a)};q.prototype={},q.prototype.conf_update=function(a){this.break_on_count=a.break_on_count,this.frag_size=a.frag_size||10},q.prototype.process=function(a){var b={type:"metadata",tracks:[],brands:["iso5","iso6"],matrix:a.root.movie_box.mv_hdr.matrix,start_hdr_sz:a.root.start_hdr_sz,end_hdr_sz:a.root.end_hdr_sz},d=this;b.duration=Math.floor(9e4*a.root.movie_box.mv_hdr.duration/a.root.movie_box.mv_hdr.time_scale),b.timescale=9e4,b.s_info=this.s_info=[],b.s_p=this.s_p=[],a.root.movie_box.track_info.forEach(function(e){if(["vide","soun"].includes(e.media_box.handler)){var f={id:e.tk_hdr.track_id,ts:e.media_box.md_hdr.time_scale,type:e.media_box.handler,s_off:[],s_time:[],s_dri:[],s_sync:e.media_box.media_info.sample_table.s_sync||[],s_psync:e.media_box.media_info.sample_table.s_psync||[],s_sz:e.media_box.media_info.sample_table.s_sz,s_dep:e.media_box.media_info.sample_table.s_dep||[],s_ctts:e.media_box.media_info.sample_table.ctts||[],s_cslg:e.media_box.media_info.sample_table.cslg||{},s_list:e.media_box.media_info.sample_table.list};e.edit_list&&e.edit_list.list.length&&(f.elst=e.edit_list.list);for(var g=e.media_box.media_info.sample_table.c_off,h=e.media_box.media_info.sample_table.s_t_c,i=e.media_box.media_info.sample_table.dtts,j=1,k=0,m=0,n=Array.isArray(f.s_sz),o=0;o<h.length;o++)for(;j<(h[o+1]?h[o+1].f_c:g.length+1);j++)for(var p=g[j-1],q=0;q<h[o].s_p_c;q++)f.s_off[k]=p,f.s_time[k]=m,f.s_dri[k]=h[o].s_d_i,m+=i[k],p+=n?f.s_sz[k++]:f.s_sz;d.s_info.push(f),d.s_p.push({s:0,max_t:0}),"vide"==f.type&&(b.v_idx=d.v_idx=d.s_info.length-1);var r=f.s_list[1],s={id:f.id,type:l[f.type],edit_list:f.elst,cslg:f.s_cslg,dr:r,timelineStartInfo:{baseMediaDecodeTime:0},bitrate:Math.floor(8*f.s_sz.reduce(function(a,b){return a+b})*f.ts/e.media_box.md_hdr.duration),duration:"soun"==f.type?e.media_box.md_hdr.duration:Math.floor(9e4*e.media_box.md_hdr.duration/f.ts),samplerate:"soun"==f.type?f.ts:9e4,matrix:e.tk_hdr.matrix,track_width:e.tk_hdr.width,track_height:e.tk_hdr.height,nb_samples:f.s_time.length};if("soun"==f.type){var t=r.esds.dsi||r.esds.aot;s.codec="mp4a."+c(r.esds.obj_t.toString(16))+(t?"."+t:""),s.s_i=new Uint8Array([r.esds.aot<<3|r.esds.freq>>>1,r.esds.freq<<7|r.esds.channel<<3])}else{s.codec="avc1."+c(r.avcc.avc_p_i)+c(r.avcc.prof_compat)+c(r.avcc.avc_l_i);var u=[1,r.avcc.avc_p_i,r.avcc.avc_prof_compat,r.avcc.avc_l_i,255,r.avcc.sps.length+224];r.avcc.sps.forEach(function(a){u=u.concat([a.nal.length>>8,255&a.nal.length]),Array.prototype.push.apply(u,a.nal)}),u.push(r.avcc.pps.length),r.avcc.pps.forEach(function(a){u=u.concat([a.nal.length>>8,255&a.nal.length]),Array.prototype.push.apply(u,a.nal)}),s.s_i=new Uint8Array(u)}if(s.edit_list&&s.edit_list.forEach(function(b){"soun"!=f.type&&(b.media_time=Math.floor(9e4*b.media_time/f.ts)),b.segment_duration=Math.floor(9e4*b.segment_duration/a.root.movie_box.mv_hdr.time_scale)}),s.cslg)for(var v in s.cslg)s.cslg[v]=Math.floor(9e4*s.cslg[v]/f.ts);b.tracks.push(s)}}),a.stream.trigger("data",b)},q.prototype.parse=function(a){this.s_info||this.process(a);for(var b,c=a.buffer.b_pos,d=a.buffer.b_size+c,e=-1,f=0,g=!1;e;)for(e=0,b=0;b<this.s_p.length;b++){var h=this.s_info[b],i=this.s_p[b].s,j=h.s_off[i],k=h.s_sz[i],m=h.s_time;if(j>=c&&d>=j+k){this.s_p[b].s++,e++;var n={trackId:h.id};n.type=l[h.type],n.dts=m[i],n.pts=n.dts+(h.s_ctts[i]||0),n.duration=i==m.length-1?m[i]-m[i-1]:m[i+1]-m[i],n.size=k,this.s_p[b].max_t=n.dts/h.ts,n.data=a.buffer._buff.subarray(j-c,j+k-c),n.dr=h.s_list[h.s_dri[i]],n.ts=h.ts,n.synced=!h.s_sync.length||h.s_sync.includes(i+1),n.sn=i,n.dep=h.s_dep[i],"vide"==h.type&&(this.break_on_count?i%this.frag_size===0:i&&n.synced)&&a.stream.flush(),a.stream.trigger("data",n),f=j+k-c}else j+k>d&&b==this.v_idx&&(g=!0)}f&&a.buffer.advance(f);var o=1/0;for(b=0;b<this.s_p.length;b++)this.s_p[b].s!=this.s_info[b].s_off.length?o=Math.min(o,this.s_info[b].s_off[this.s_p[b].s]):this.s_p[b].finish=!0;return o==1/0&&a.stream.flush(),(o==1/0||o>=c&&d>o)&&(o=d),o},q.prototype.seek=function(a,b){function c(a,b,c){var d,e,f,g,h,i,j=c&&b.s_sync.length>0,k=("soun"==b.type,b.ts/9e4);for(d=0,e=j?b.s_sync.length:b.s_time.length,i=Math.floor(a*k);e-1>d;)if(g=d+e>>1,f=j?b.s_sync[g]-1:g,(h=b.s_time[f]+(0|b.s_ctts[f]))>i)e=g;else if(d=g,h==i)break;var l=j?b.s_sync[d]-1:d;if(i=h=b.s_time[l]+(0|b.s_ctts[l]),!j&&b.s_ctts.length){for(f=d-1;f>d-10;f--)b.s_time[f]+(0|b.s_ctts[f])>i&&(l=f);for(f=l;d+10>f;f++)h=b.s_time[f]+(0|b.s_ctts[f]),h>(0|(b.s_cslg&&b.s_cslg.min_ctts))&&i>h&&(i=h)}return{sn:l,min_t:i/b.ts}}if(!this.s_info)throw new Error("No metadata information for seeking");var d=9e4*a,e=1/0;if(void 0!==this.v_idx){var f=this.s_info[this.v_idx],g=c(d,f,b),h=g.sn;this.s_p[this.v_idx].s=h,this.s_p[this.v_idx].max_t=(f.s_time[h]+(0|f.s_ctts[h]))/f.ts,d=9e4*g.min_t,e=f.s_off[h]}var i=this;return this.s_info.forEach(function(a,f){if(f!=i.v_idx){var g=c(d,a,b).sn;i.s_p[f].s=g,i.s_p[f].max_t=(a.s_time[g]+(0|a.s_ctts[g]))/a.ts,e=Math.min(a.s_off[g],e)}}),{offset:e,time:this.s_p[void 0!==this.v_idx?this.v_idx:0].max_t}};var r=function(){this._buff=new Uint8Array(3145728),this.b_pos=0,this.b_size=0,this.pos=0};r.prototype={},r.prototype.advance=function(a){this._buff.set(this._buff.subarray(a,this.b_size)),this.b_pos+=a,this.b_size-=a},r.prototype.push=function(a){for(var b,c=a.length;c+this.b_size>this._buff.length;)b=new Uint8Array(2*this._buff.length),b.set(this._buff),this._buff=b;this.pos<this.b_pos+this.b_size&&this.pos+c>=this.b_pos?(b=new Uint8Array(Math.max(this.pos+c,this.b_pos+this.b_size)-Math.min(this.pos,this.b_pos)),this.pos<=this.b_pos?(b.set(a),this.pos+c<this.b_pos+this.b_size&&b.set(this._buff.subarray(this.pos+c-this.b_pos,this.b_size),c)):(b.set(this._buff.subarray(0,this.pos-this.b_pos)),b.set(a,this.pos-this.b_pos)),this._buff.set(b),this.b_size=b.length,b=null,this.b_pos=Math.min(this.b_pos,this.pos)):this.pos==this.b_pos+this.b_size?(this._buff.set(a,this.b_size),this.b_size+=c):(this._buff.set(a),this.b_size=c,this.b_pos=this.pos),this.view=new DataView(this._buff.buffer,this._buff.byteOffset,this.b_size)};var s=function(a){return this instanceof s?(s.prototype.init.call(this),this.buffer=new r,this.b_parser=new p,this.c_parser=new q(a),this.on("confupdate",function(a){this.c_parser.conf_update(a)}),this.metadata={},this.buffer.pos=a.pos||0,void(a.metadata&&(this.metadata.h_parsed=!0,this.c_parser.s_info=a.metadata.s_info.slice(),this.c_parser.s_p=a.metadata.s_p.slice(),this.c_parser.v_idx=a.metadata.v_idx))):new s(a)};s.prototype=new j,s.prototype.constructor=s,s.prototype.get_tl=function(a){if(!this.metadata.h_parsed)throw new Error("No metadata information for time map");var b=this.c_parser.s_info.filter(function(b){return b.id==a});if(!b.length)throw new Error("No track information for time map");return{offset:b[0].s_off.slice(0),time:b[0].s_time.map(function(a){return a/b[0].ts})}},s.prototype.push=function(a){this.buffer.push(a);for(var b={root:this.metadata,branch:this.metadata,buffer:this.buffer,view:this.buffer.view,stream:this,ptr:0};!this.metadata.h_parsed&&(this.b_parser.header(b),b.type&&!(b.size+b.ptr>this.buffer.b_size));)this.b_parser.parse(b),b.ptr+=b.size;return this.metadata.h_parsed?this.buffer.pos=this.c_parser.parse(b):(this.buffer.advance(b.ptr-b.offset),this.buffer.pos="mdat"==b.type?b.ptr+b.size:this.buffer.b_pos+this.buffer.b_size),this.buffer.pos},s.prototype.seek=function(a,b){this.trigger("data",{type:"seek"});var c=this.c_parser.seek(a,b);return this.buffer.pos=c.offset,c};var t=function(){return this instanceof t?void t.prototype.init.call(this):new t};t.prototype=new j,t.prototype.constructor=t,t.prototype.push=function(a){if("audio"==a.type){var b=9e4/a.ts;a.pts=Math.floor(a.pts*b),a.dts=Math.floor(a.dts*b),this.trigger("data",{type:"audio",samplerate:a.dr.s_rate,samplesize:a.dr.s_size,audioobjecttype:a.dr.esds.aot,samplingfrequencyindex:a.dr.esds.freq,channelcount:a.dr.esds.channel,ts:a.ts,dts:a.dts,pts:a.pts,data:new Uint8Array(a.data)})}};var u=function(){return this instanceof u?(u.prototype.init.call(this),this.synced=!1,void(this.au=new Uint8Array([9,240]))):new u};u.prototype=new j,u.prototype.constructor=u,u.prototype.flush=function(){this.dr=null,this.synced=!1,this.trigger("done")},u.prototype.push=function(a){if("video"==a.type){var b,c=0,d=new DataView(a.data.buffer,a.data.byteOffset,a.data.byteLength),e=9e4/a.ts;if(a.pts=Math.floor(a.pts*e),a.dts=Math.floor(a.dts*e),this.trigger("data",{trackId:a.trackId,pts:a.pts,dts:a.dts,data:this.au,nalUnitType:"access_unit_delimiter_rbsp"}),this.dr!=a.dr||!this.synced){if(this.dr=a.dr,this.dr.avcc.n_sps)for(b=0;b<this.dr.avcc.n_sps;b++)this.trigger("data",{trackId:a.trackId,pts:a.pts,dts:a.dts,nalUnitType:"seq_parameter_set_rbsp",data:this.dr.avcc.sps[b].nal,config:{profileIdc:this.dr.avcc.avc_p_i,levelIdc:this.dr.avcc.avc_l_i,profileCompatibility:this.dr.avcc.prof_compat,width:this.dr.width,height:this.dr.height}});if(this.dr.avcc.n_pps)for(b=0;b<this.dr.avcc.n_pps;b++)this.trigger("data",{trackId:a.trackId,pts:a.pts,dts:a.dts,nalUnitType:"pic_parameter_set_rbsp",data:this.dr.avcc.pps[0].nal});this.synced=!0}for(;c<a.data.length;){var f=d.getUint32(c),g={trackId:a.trackId,pts:a.pts,dts:a.dts,data:new Uint8Array(a.data.subarray(c+4,c+f+4))};5==(31&g.data[0])&&(g.nalUnitType="slice_layer_without_partitioning_rbsp_idr"),g.synced=!c&&a.synced,c+=f+4,this.trigger("data",g)}}};var v=function(a){return this instanceof v?(v.prototype.init.call(this),this.options=a||{},this.tracks={},this.options.no_multi_init=!0,this.options.major=new Uint8Array([105,115,111,53]),this.options.compatible=[new Uint8Array([105,115,111,54])],this.options.set_duration=!0,this.on("confupdate",function(a){this.options.break_on_count=a.break_on_count}),this.metadata=a.metadata,void(this.inited=!!this.metadata)):new v(a)};v.prototype=new j,v.prototype.constructor=v,v.prototype.push=function(a){var b;if("metadata"==a.type)return void(this.metadata=a);if("seek"!=a.type){b=a.trackId,this.tracks[b]=this.tracks[b]||{samples:[],seqno:0,sc:0,type:a.type};var c={duration:a.duration,size:a.size,dts:a.dts,pts:a.pts,data:new Uint8Array(a.data),sn:a.sn};if("video"==a.type){var d=9e4/a.ts;c.duration=Math.floor(c.duration*d),c.pts=Math.floor(c.pts*d),c.dts=Math.floor(c.dts*d),c.flags={dependsOn:0|(c.dep&&c.dep.dep),isDependedOn:0|(c.dep&&c.dep.is_dep),hasRedundancy:0|(c.dep&&c.dep.red)||2*a.synced,isLeading:0|(c.dep&&c.dep.lead)},this.options.break_on_count||(c.flags.isNonSyncSample=+!a.synced),c.compositionTimeOffset=c.pts-c.dts}a.data=null,this.tracks[b].samples.push(c)}else for(b in this.tracks)this.tracks[b].samples=[]},v.prototype.flush=function(){var a,b,c,d=this;if(!this.inited){this.inited=!0;var e=[];this.metadata.tracks.forEach(function(a){switch(a.type){case"video":a.profileIdc=a.dr.avcc.avc_p_i,a.levelIdc=a.dr.avcc.avc_l_i,a.profileCompatibility=a.dr.avcc.prof_compat,a.width=a.track_width,a.height=a.track_height,a.sps=a.dr.avcc.sps.map(function(a){return a.nal}),a.pps=a.dr.avcc.pps.map(function(a){return a.nal});break;case"audio":a.samplesize=a.dr.s_size,a.audioobjecttype=a.dr.esds.aot,a.samplingfrequencyindex=a.dr.esds.freq,a.channelcount=a.dr.esds.channel}e.push({id:a.id,buffer:k.initSegment([a],d.options)})}),this.trigger("data",{init:!0,inits:e})}for(var f in this.tracks){var g=this.tracks[f];if(g.samples.length){var h=g.samples;c=h.reduce(function(a,b){return a+b.data.length},0),a=k.moof(++g.seqno,[{id:f,baseMediaDecodeTime:h[0].dts,samples:h,type:g.type}],d.options);for(var i=new Uint8Array(8+c+a.length),j=new Uint8Array(c),l=0,m=0;m<h.length;m++)j.set(h[m].data,l),l+=h[m].data.length;b=k.mdat(j),i.set(a),i.set(b,a.length),i.sn=h[h.length-1].sn,j=b=a=null,this.tracks[f].sc+=h.length,this.trigger("data",{id:f,data:i,sc:this.tracks[f].sc}),this.tracks[f].samples=[]}}this.trigger("done")},b.exports={MP4ParserStream:s,AudioFilterStream:t,VideoFilterStream:u,MP4BuilderStream:v}},{"../utils/stream.js":32,"./mp4-generator.js":26}],28:[function(a,b){"use strict";var c,d,e,f,g,h,i,j,k,l,m,n=a("../utils/stream.js"),o=a("./mp4-generator.js"),p=a("./mp4-parser.js"),q=a("../m2ts/m2ts.js"),r=a("../codecs"),s=r.adts,t=r.h264.H264Stream,u=a("../aac"),v=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],w=["width","height","profileIdc","levelIdc","profileCompatibility"];g=function(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0}}},h=function(a){return a[0]==="I".charCodeAt(0)&&a[1]==="D".charCodeAt(0)&&a[2]==="3".charCodeAt(0)?!0:!1},l=function(a,b){var c;if(a.length!==b.length)return!1;for(c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0},m=function(a){var b,c,d=0;for(b=0;b<a.length;b++)c=a[b],d+=c.data.byteLength;return d},d=function(a){var b=[],c=0,e=0;d.prototype.init.call(this),this.push=function(c){i(a,c),a&&v.forEach(function(b){a[b]=c[b]}),b.push(c)},this.setEarliestDts=function(b){e=b-a.timelineStartInfo.baseMediaDecodeTime},this.flush=function(){var d,e,f,g;return 0===b.length?void this.trigger("done","AudioSegmentStream"):(d=this.trimAdtsFramesByEarliestDts_(b),a.samples=this.generateSampleTable_(d),f=o.mdat(this.concatenateFrameData_(d)),b=[],k(a),e=o.moof(c,[a]),g=new Uint8Array(e.byteLength+f.byteLength),c++,g.set(e),g.set(f,e.byteLength),j(a),this.trigger("data",{track:a,boxes:g}),void this.trigger("done","AudioSegmentStream"))},this.trimAdtsFramesByEarliestDts_=function(b){return a.minSegmentDts>=e?b:(a.minSegmentDts=1/0,b.filter(function(b){return b.dts>=e?(a.minSegmentDts=Math.min(a.minSegmentDts,b.dts),a.minSegmentPts=a.minSegmentDts,!0):!1}))},this.generateSampleTable_=function(a){var b,c,d=[];for(b=0;b<a.length;b++)c=a[b],d.push({size:c.data.byteLength,duration:1024});return d},this.concatenateFrameData_=function(a){var b,c,d=0,e=new Uint8Array(m(a));for(b=0;b<a.length;b++)c=a[b],e.set(c.data,d),d+=c.data.byteLength;return e}},d.prototype=new n,c=function(a){var b,d,e=0,f=[];c.prototype.init.call(this),delete a.minPTS,this.gopCache_=[],this.push=function(c){i(a,c),c.nalUnitType!==r.h264.unitTypes.seq_parameter_set_rbsp||b||(b=c.config,a.sps=[c.data],w.forEach(function(c){a[c]=b[c]},this)),c.nalUnitType!==r.h264.unitTypes.pic_parameter_set_rbsp||d||(d=c.data,a.pps=[c.data]),f.push(c)},this.flush=function(){for(var b,c,d,g,h,j;f.length&&f[0].nalUnitType!==r.h264.unitTypes.access_unit_delimiter_rbsp;)f.shift();return 0===f.length?(this.resetStream_(),void this.trigger("done","VideoSegmentStream")):(b=this.groupNalsIntoFrames_(f),d=this.groupFramesIntoGops_(b),d[0][0].keyFrame||(c=this.getGopForFusion_(f[0],a),c?(d.unshift(c),d.byteLength+=c.byteLength,d.nalCount+=c.nalCount,d.pts=c.pts,d.dts=c.dts,d.duration+=c.duration):d=this.extendFirstKeyFrame_(d)),i(a,d),a.samples=this.generateSampleTable_(d),h=o.mdat(this.concatenateNalData_(d)),this.gopCache_.unshift({gop:d.pop(),pps:a.pps,sps:a.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),f=[],k(a),this.trigger("timelineStartInfo",a.timelineStartInfo),g=o.moof(e,[a]),j=new Uint8Array(g.byteLength+h.byteLength),e++,j.set(g),j.set(h,g.byteLength),this.trigger("data",{track:a,boxes:j}),this.resetStream_(),void this.trigger("done","VideoSegmentStream"))},this.resetStream_=function(){j(a),b=void 0,d=void 0},this.getGopForFusion_=function(b){var c,d,e,f,g,h=45e3,i=1e4,j=1/0;for(g=0;g<this.gopCache_.length;g++)f=this.gopCache_[g],e=f.gop,a.pps&&l(a.pps[0],f.pps[0])&&a.sps&&l(a.sps[0],f.sps[0])&&(e.dts<a.timelineStartInfo.dts||(c=b.dts-e.dts-e.duration,c>=-i&&h>=c&&(!d||j>c)&&(d=f,j=c)));return d?d.gop:null},this.extendFirstKeyFrame_=function(a){var b;return!a[0][0].keyFrame&&a.length>1&&(b=a.shift(),a.byteLength-=b.byteLength,a.nalCount-=b.nalCount,a[0][0].dts=b.dts,a[0][0].pts=b.pts,a[0][0].duration+=b.duration),a},this.groupNalsIntoFrames_=function(a){var b,c,d=[],e=[];for(d.byteLength=0,b=0;b<a.length;b++)c=a[b],c.nalUnitType===r.h264.unitTypes.access_unit_delimiter_rbsp?(d.length&&(d.duration=c.dts-d.dts,e.push(d)),d=[c],d.byteLength=c.data.byteLength,d.pts=c.pts,d.dts=c.dts):(c.nalUnitType===r.h264.unitTypes.slice_layer_without_partitioning_rbsp_idr&&(d.keyFrame=!0),d.duration=c.dts-d.dts,d.byteLength+=c.data.byteLength,d.push(c));return e.length&&(!d.duration||d.duration<=0)&&(d.duration=e[e.length-1].duration),e.push(d),e},this.groupFramesIntoGops_=function(a){var b,c,d=[],e=[];for(d.byteLength=0,d.nalCount=0,d.duration=0,d.pts=a[0].pts,d.dts=a[0].dts,e.byteLength=0,e.nalCount=0,e.duration=0,e.pts=a[0].pts,e.dts=a[0].dts,b=0;b<a.length;b++)c=a[b],c.keyFrame?(d.length&&(e.push(d),e.byteLength+=d.byteLength,e.nalCount+=d.nalCount,e.duration+=d.duration),d=[c],d.nalCount=c.length,d.byteLength=c.byteLength,d.pts=c.pts,d.dts=c.dts,d.duration=c.duration):(d.duration+=c.duration,d.nalCount+=c.length,d.byteLength+=c.byteLength,d.push(c));return e.length&&d.duration<=0&&(d.duration=e[e.length-1].duration),e.byteLength+=d.byteLength,e.nalCount+=d.nalCount,e.duration+=d.duration,e.push(d),e},this.generateSampleTable_=function(a,b){var c,d,e,f,h,i=b||0,j=[];for(c=0;c<a.length;c++)for(f=a[c],d=0;d<f.length;d++)h=f[d],e=g(),e.dataOffset=i,e.compositionTimeOffset=h.pts-h.dts,e.duration=h.duration,e.size=4*h.length,e.size+=h.byteLength,h.keyFrame&&(e.flags.dependsOn=2),i+=e.size,j.push(e);return j},this.concatenateNalData_=function(a){var b,c,d,e,f,g,h=0,i=a.byteLength,j=a.nalCount,k=i+4*j,l=new Uint8Array(k),m=new DataView(l.buffer);for(b=0;b<a.length;b++)for(e=a[b],c=0;c<e.length;c++)for(f=e[c],d=0;d<f.length;d++)g=f[d],m.setUint32(h,g.data.byteLength),h+=4,l.set(g.data,h),h+=g.data.byteLength;return l}},c.prototype=new n,i=function(a,b){"number"==typeof b.pts&&(void 0===a.timelineStartInfo.pts&&(a.timelineStartInfo.pts=b.pts),a.minSegmentPts=void 0===a.minSegmentPts?b.pts:Math.min(a.minSegmentPts,b.pts),a.maxSegmentPts=void 0===a.maxSegmentPts?b.pts:Math.max(a.maxSegmentPts,b.pts)),"number"==typeof b.dts&&(void 0===a.timelineStartInfo.dts&&(a.timelineStartInfo.dts=b.dts),a.minSegmentDts=void 0===a.minSegmentDts?b.dts:Math.min(a.minSegmentDts,b.dts),a.maxSegmentDts=void 0===a.maxSegmentDts?b.dts:Math.max(a.maxSegmentDts,b.dts))},j=function(a){delete a.minSegmentDts,delete a.maxSegmentDts,delete a.minSegmentPts,delete a.maxSegmentPts},k=function(a){var b,c=9e4,d=a.minSegmentDts-a.timelineStartInfo.dts,e=a.minSegmentPts-a.minSegmentDts;return a.baseMediaDecodeTime=a.timelineStartInfo.baseMediaDecodeTime,a.baseMediaDecodeTime+=d,a.baseMediaDecodeTime-=e,a.baseMediaDecodeTime=Math.max(0,a.baseMediaDecodeTime),"audio"===a.type&&(b=a.samplerate/c,a.baseMediaDecodeTime*=b,a.baseMediaDecodeTime=Math.floor(a.baseMediaDecodeTime)),a.baseMediaDecodeTime},f=function(a,b){this.numberOfTracks=0,this.metadataStream=b,this.remuxTracks="undefined"!=typeof a.remux?!!a.remux:!0,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,f.prototype.init.call(this),this.push=function(a){return a.text?this.pendingCaptions.push(a):a.frames?this.pendingMetadata.push(a):(this.pendingTracks.push(a.track),this.pendingBoxes.push(a.boxes),this.pendingBytes+=a.boxes.byteLength,"video"===a.track.type&&(this.videoTrack=a.track),void("audio"===a.track.type&&(this.audioTrack=a.track)))}},f.prototype=new n,f.prototype.flush=function(a){var b,c,d,e,f=0,g={captions:[],metadata:[],info:{}},h=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==a&&"AudioSegmentStream"!==a)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}for(this.videoTrack?(h=this.videoTrack.timelineStartInfo.pts,w.forEach(function(a){g.info[a]=this.videoTrack[a]},this)):this.audioTrack&&(h=this.audioTrack.timelineStartInfo.pts,v.forEach(function(a){g.info[a]=this.audioTrack[a]},this)),g.type=1===this.pendingTracks.length?this.pendingTracks[0].type:"combined",this.emittedTracks+=this.pendingTracks.length,d=o.initSegment(this.pendingTracks,this.options),this.pendingBytes+=d.byteLength,this.pendingBoxes.unshift(d),g.data=new Uint8Array(this.pendingBytes),e=0;e<this.pendingBoxes.length;e++)g.data.set(this.pendingBoxes[e],f),f+=this.pendingBoxes[e].byteLength;for(e=0;e<this.pendingCaptions.length;e++)b=this.pendingCaptions[e],b.startTime=b.startPts-h,b.startTime/=9e4,b.endTime=b.endPts-h,b.endTime/=9e4,g.captions.push(b);for(e=0;e<this.pendingMetadata.length;e++)c=this.pendingMetadata[e],c.cueTime=c.pts-h,c.cueTime/=9e4,g.metadata.push(c);g.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",g),this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},e=function(a){var b,g,i=this,k=!0;e.prototype.init.call(this),a=a||{},a.input_type=a.input_type||"ts",void 0===a.break_on_count&&(a.break_on_count=!0),this.baseMediaDecodeTime=a.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var b={};this.transmuxPipeline_=b,b.type="aac",b.metadataStream=new q.MetadataStream,b.aacStream=new u,b.audioTimestampRolloverStream=new q.TimestampRolloverStream("audio"),b.timedMetadataTimestampRolloverStream=new q.TimestampRolloverStream("timed-metadata"),b.adtsStream=new s,b.coalesceStream=new f(a,b.metadataStream),b.headOfPipeline=b.aacStream,b.aacStream.pipe(b.audioTimestampRolloverStream).pipe(b.adtsStream),b.aacStream.pipe(b.timedMetadataTimestampRolloverStream).pipe(b.metadataStream).pipe(b.coalesceStream),b.metadataStream.on("timestamp",function(a){b.aacStream.setTimestamp(a.timeStamp)}),b.aacStream.on("data",function(a){"timed-metadata"!==a.type||b.audioSegmentStream||(g=g||{timelineStartInfo:{baseMediaDecodeTime:i.baseMediaDecodeTime},codec:"adts",type:"audio"},b.coalesceStream.numberOfTracks++,b.audioSegmentStream=new d(g),b.adtsStream.pipe(b.audioSegmentStream).pipe(b.coalesceStream))}),b.coalesceStream.on("data",this.trigger.bind(this,"data")),b.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setupTsPipeline=function(){var e={};this.transmuxPipeline_=e,e.type=a.input_type,"ts"==e.type?(a.metadataStream=e.metadataStream=new q.MetadataStream,e.packetStream=new q.TransportPacketStream,e.parseStream=new q.TransportParseStream,e.elementaryStream=new q.ElementaryStream,e.videoTimestampRolloverStream=new q.TimestampRolloverStream("video"),e.audioTimestampRolloverStream=new q.TimestampRolloverStream("audio"),e.timedMetadataTimestampRolloverStream=new q.TimestampRolloverStream("timed-metadata"),e.adtsStream=new s,e.h264Stream=new t,e.captionStream=new q.CaptionStream,e.coalesceStream=new f(a,e.metadataStream),e.headOfPipeline=e.packetStream,e.packetStream.pipe(e.parseStream).pipe(e.elementaryStream),e.elementaryStream.pipe(e.videoTimestampRolloverStream).pipe(e.h264Stream),e.elementaryStream.pipe(e.audioTimestampRolloverStream).pipe(e.adtsStream),e.elementaryStream.pipe(e.timedMetadataTimestampRolloverStream).pipe(e.metadataStream).pipe(e.coalesceStream),e.h264Stream.pipe(e.captionStream).pipe(e.coalesceStream)):(e.headOfPipeline=e.elementaryStream=new p.MP4ParserStream(a),e.mp4BuilderStream=new p.MP4BuilderStream(a),e.elementaryStream.pipe(e.mp4BuilderStream),this.seek=function(a,b){return e.elementaryStream.seek(a,b)},this.get_tl=function(a){return e.elementaryStream.get_tl(a)},this.conf_update=function(a){e.elementaryStream.trigger("confupdate",a),e.mp4BuilderStream.trigger("confupdate",a)}),e.elementaryStream.on("data",function(f){var h;if("metadata"===f.type){if("mp4"===a.input_type)return void i.trigger("metadata",f);for(h=f.tracks.length;h--;)b||"video"!==f.tracks[h].type?g||"audio"!==f.tracks[h].type||(g=f.tracks[h],g.timelineStartInfo.baseMediaDecodeTime=i.baseMediaDecodeTime):(b=f.tracks[h],b.timelineStartInfo.baseMediaDecodeTime=i.baseMediaDecodeTime);b&&!e.videoSegmentStream&&(e.coalesceStream.numberOfTracks++,e.videoSegmentStream=new c(b),e.videoSegmentStream.on("timelineStartInfo",function(a){g&&(g.timelineStartInfo=a,e.audioSegmentStream.setEarliestDts(a.dts))}),e.h264Stream.pipe(e.videoSegmentStream).pipe(e.coalesceStream)),g&&!e.audioSegmentStream&&(e.coalesceStream.numberOfTracks++,e.audioSegmentStream=new d(g),e.adtsStream.pipe(e.audioSegmentStream).pipe(e.coalesceStream))}}),"mp4"===a.input_type?(e.mp4BuilderStream.on("data",this.trigger.bind(this,"data")),e.mp4BuilderStream.on("done",this.trigger.bind(this,"done"))):(e.coalesceStream.on("data",this.trigger.bind(this,"data")),e.coalesceStream.on("done",this.trigger.bind(this,"done")))},this.setBaseMediaDecodeTime=function(a){var c=this.transmuxPipeline_;this.baseMediaDecodeTime=a,g&&(g.timelineStartInfo.dts=void 0,g.timelineStartInfo.pts=void 0,j(g),g.timelineStartInfo.baseMediaDecodeTime=a),b&&(c.videoSegmentStream&&(c.videoSegmentStream.gopCache_=[]),b.timelineStartInfo.dts=void 0,b.timelineStartInfo.pts=void 0,
j(b),b.timelineStartInfo.baseMediaDecodeTime=a)},this.push=function(b){if(k){var c=h(b)&&"mp4"!=a.input_type;c&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():c||this.transmuxPipeline_.type===a.input_type||this.setupTsPipeline(),k=!1}return this.transmuxPipeline_.headOfPipeline.push(b)},this.appendBuffer=function(a){return this.push(new Uint8Array(a))},this.flush=function(){k=!0,this.transmuxPipeline_.headOfPipeline.flush()}},e.prototype=new n,b.exports={Transmuxer:e,VideoSegmentStream:c,AudioSegmentStream:d,AUDIO_PROPERTIES:v,VIDEO_PROPERTIES:w}},{"../aac":11,"../codecs":14,"../m2ts/m2ts.js":21,"../utils/stream.js":32,"./mp4-generator.js":26,"./mp4-parser.js":27}],29:[function(a,b){"use strict";var c={8:"audio",9:"video",18:"metadata"},d=function(a){return"0x"+("00"+a.toString(16)).slice(-2).toUpperCase()},e=function(a){for(var b,c=[];a.byteLength>0;){switch(b=0,a.byteLength){default:c.push(d(a[b++]));case 7:c.push(d(a[b++]));case 6:c.push(d(a[b++]));case 5:c.push(d(a[b++]));case 4:c.push(d(a[b++]));case 3:c.push(d(a[b++]));case 2:c.push(d(a[b++]));case 1:c.push(d(a[b++]))}a=a.subarray(b)}return c.join(" ")},f=function(a,b){var c=["AVC Sequence Header","AVC NALU","AVC End-of-Sequence"],d=a[1]&parseInt("01111111",2)<<16|a[2]<<8|a[3];return b=b||{},b.avcPacketType=c[a[0]],b.CompositionTime=a[1]&parseInt("10000000",2)?-d:d,1===a[0]?b.nalUnitTypeRaw=e(a.subarray(4,100)):b.data=e(a.subarray(4)),b},g=function(a,b){var c=["Unknown","Keyframe (for AVC, a seekable frame)","Inter frame (for AVC, a nonseekable frame)","Disposable inter frame (H.263 only)","Generated keyframe (reserved for server use only)","Video info/command frame"],d=a[0]&parseInt("00001111",2);return b=b||{},b.frameType=c[(a[0]&parseInt("11110000",2))>>>4],b.codecID=d,7===d?f(a.subarray(1),b):b},h=function(a,b){var c=["AAC Sequence Header","AAC Raw"];return b=b||{},b.aacPacketType=c[a[0]],b.data=e(a.subarray(1)),b},i=function(a,b){var c=["Linear PCM, platform endian","ADPCM","MP3","Linear PCM, little endian","Nellymoser 16-kHz mono","Nellymoser 8-kHz mono","Nellymoser","G.711 A-law logarithmic PCM","G.711 mu-law logarithmic PCM","reserved","AAC","Speex","MP3 8-Khz","Device-specific sound"],d=["5.5-kHz","11-kHz","22-kHz","44-kHz"],e=(a[0]&parseInt("11110000",2))>>>4;return b=b||{},b.soundFormat=c[e],b.soundRate=d[(a[0]&parseInt("00001100",2))>>>2],b.soundSize=(a[0]&parseInt("00000010",2))>>>1?"16-bit":"8-bit",b.soundType=a[0]&parseInt("00000001",2)?"Stereo":"Mono",10===e?h(a.subarray(1),b):b},j=function(a){return{tagType:c[a[0]],dataSize:a[1]<<16|a[2]<<8|a[3],timestamp:a[7]<<24|a[4]<<16|a[5]<<8|a[6],streamID:a[8]<<16|a[9]<<8|a[10]}},k=function(a){var b=j(a);switch(a[0]){case 8:i(a.subarray(11),b);break;case 9:g(a.subarray(11),b);break;case 18:}return b},l=function(a){var b,c,d=9,e=[];for(d+=4;d<a.byteLength;)b=a[d+1]<<16,b|=a[d+2]<<8,b|=a[d+3],b+=11,c=a.subarray(d,d+b),e.push(k(c)),d+=b+4;return e},m=function(a){return JSON.stringify(a,null,2)};b.exports={inspectTag:k,inspect:l,textify:m}},{}],30:[function(a,b){(function(a){"use strict";var c,d,e=function(a){var b="";return b+=String.fromCharCode(a[0]),b+=String.fromCharCode(a[1]),b+=String.fromCharCode(a[2]),b+=String.fromCharCode(a[3])},f=function(a){return new Date(1e3*a-20828448e5)},g=function(a){return{isLeading:(12&a[0])>>>2,dependsOn:3&a[0],isDependedOn:(192&a[1])>>>6,hasRedundancy:(48&a[1])>>>4,paddingValue:(14&a[1])>>>1,isNonSyncSample:1&a[1],degradationPriority:a[2]<<8|a[3]}},h=function(a){var b,c,d=new DataView(a.buffer,a.byteOffset,a.byteLength),e=[];for(b=0;b+4<a.length;b+=c)if(c=d.getUint32(b),b+=4,0>=c)e.push("<span style='color:red;'>MALFORMED DATA</span>");else switch(31&a[b]){case 1:e.push("slice_layer_without_partitioning_rbsp");break;case 5:e.push("slice_layer_without_partitioning_rbsp_idr");break;case 6:e.push("sei_rbsp");break;case 7:e.push("seq_parameter_set_rbsp");break;case 8:e.push("pic_parameter_set_rbsp");break;case 9:e.push("access_unit_delimiter_rbsp");break;default:e.push("UNKNOWN NAL - "+a[b]&31)}return e},i={avc1:function(a){var b=new DataView(a.buffer,a.byteOffset,a.byteLength);return{dataReferenceIndex:b.getUint16(6),width:b.getUint16(24),height:b.getUint16(26),horizresolution:b.getUint16(28)+b.getUint16(30)/16,vertresolution:b.getUint16(32)+b.getUint16(34)/16,frameCount:b.getUint16(40),depth:b.getUint16(74),config:c(a.subarray(78,a.byteLength))}},avcC:function(a){var b,c,d,e,f=new DataView(a.buffer,a.byteOffset,a.byteLength),g={configurationVersion:a[0],avcProfileIndication:a[1],profileCompatibility:a[2],avcLevelIndication:a[3],lengthSizeMinusOne:3&a[4],sps:[],pps:[]},h=31&a[5];for(d=6,e=0;h>e;e++)c=f.getUint16(d),d+=2,g.sps.push(new Uint8Array(a.subarray(d,d+c))),d+=c;for(b=a[d],d++,e=0;b>e;e++)c=f.getUint16(d),d+=2,g.pps.push(new Uint8Array(a.subarray(d,d+c))),d+=c;return g},btrt:function(a){var b=new DataView(a.buffer,a.byteOffset,a.byteLength);return{bufferSizeDB:b.getUint32(0),maxBitrate:b.getUint32(4),avgBitrate:b.getUint32(8)}},esds:function(a){return{version:a[0],flags:new Uint8Array(a.subarray(1,4)),esId:a[6]<<8|a[7],streamPriority:31&a[8],decoderConfig:{objectProfileIndication:a[11],streamType:a[12]>>>2&63,bufferSize:a[13]<<16|a[14]<<8|a[15],maxBitrate:a[16]<<24|a[17]<<16|a[18]<<8|a[19],avgBitrate:a[20]<<24|a[21]<<16|a[22]<<8|a[23],decoderConfigDescriptor:{tag:a[24],length:a[25],audioObjectType:a[26]>>>3&31,samplingFrequencyIndex:(7&a[26])<<1|a[27]>>>7&1,channelConfiguration:a[27]>>>3&15}}}},ftyp:function(a){for(var b=new DataView(a.buffer,a.byteOffset,a.byteLength),c={majorBrand:e(a.subarray(0,4)),minorVersion:b.getUint32(4),compatibleBrands:[]},d=8;d<a.byteLength;)c.compatibleBrands.push(e(a.subarray(d,d+4))),d+=4;return c},dinf:function(a){return{boxes:c(a)}},dref:function(a){return{version:a[0],flags:new Uint8Array(a.subarray(1,4)),dataReferences:c(a.subarray(8))}},hdlr:function(b){var c=new DataView(b.buffer,b.byteOffset,b.byteLength),d={version:c.getUint8(0),flags:new Uint8Array(b.subarray(1,4)),handlerType:e(b.subarray(8,12)),name:""},f=8;for(f=24;f<b.byteLength;f++){if(0===b[f]){f++;break}d.name+=String.fromCharCode(b[f])}return d.name=decodeURIComponent(a.escape(d.name)),d},mdat:function(a){return{byteLength:a.byteLength,nals:h(a)}},mdhd:function(a){var b,c=new DataView(a.buffer,a.byteOffset,a.byteLength),d=4,e={version:c.getUint8(0),flags:new Uint8Array(a.subarray(1,4)),language:""};return 1===e.version?(d+=4,e.creationTime=f(c.getUint32(d)),d+=8,e.modificationTime=f(c.getUint32(d)),d+=4,e.timescale=c.getUint32(d),d+=8,e.duration=c.getUint32(d)):(e.creationTime=f(c.getUint32(d)),d+=4,e.modificationTime=f(c.getUint32(d)),d+=4,e.timescale=c.getUint32(d),d+=4,e.duration=c.getUint32(d)),d+=4,b=c.getUint16(d),e.language+=String.fromCharCode((b>>10)+96),e.language+=String.fromCharCode(((960&b)>>5)+96),e.language+=String.fromCharCode((31&b)+96),e},mdia:function(a){return{boxes:c(a)}},mfhd:function(a){return{version:a[0],flags:new Uint8Array(a.subarray(1,4)),sequenceNumber:a[4]<<24|a[5]<<16|a[6]<<8|a[7]}},minf:function(a){return{boxes:c(a)}},mp4a:function(a){var b=new DataView(a.buffer,a.byteOffset,a.byteLength),d={dataReferenceIndex:b.getUint16(6),channelcount:b.getUint16(16),samplesize:b.getUint16(18),samplerate:b.getUint16(24)+b.getUint16(26)/65536};return a.byteLength>28&&(d.streamDescriptor=c(a.subarray(28))[0]),d},moof:function(a){return{boxes:c(a)}},moov:function(a){return{boxes:c(a)}},mvex:function(a){return{boxes:c(a)}},mvhd:function(a){var b=new DataView(a.buffer,a.byteOffset,a.byteLength),c=4,d={version:b.getUint8(0),flags:new Uint8Array(a.subarray(1,4))};return 1===d.version?(c+=4,d.creationTime=f(b.getUint32(c)),c+=8,d.modificationTime=f(b.getUint32(c)),c+=4,d.timescale=b.getUint32(c),c+=8,d.duration=b.getUint32(c)):(d.creationTime=f(b.getUint32(c)),c+=4,d.modificationTime=f(b.getUint32(c)),c+=4,d.timescale=b.getUint32(c),c+=4,d.duration=b.getUint32(c)),c+=4,d.rate=b.getUint16(c)+b.getUint16(c+2)/16,c+=4,d.volume=b.getUint8(c)+b.getUint8(c+1)/8,c+=2,c+=2,c+=8,d.matrix=new Uint32Array(a.subarray(c,c+36)),c+=36,c+=24,d.nextTrackId=b.getUint32(c),d},pdin:function(a){var b=new DataView(a.buffer,a.byteOffset,a.byteLength);return{version:b.getUint8(0),flags:new Uint8Array(a.subarray(1,4)),rate:b.getUint32(4),initialDelay:b.getUint32(8)}},sdtp:function(a){var b,c={version:a[0],flags:new Uint8Array(a.subarray(1,4)),samples:[]};for(b=4;b<a.byteLength;b++)c.samples.push({dependsOn:(48&a[b])>>4,isDependedOn:(12&a[b])>>2,hasRedundancy:3&a[b]});return c},sidx:function(a){var b,c=new DataView(a.buffer,a.byteOffset,a.byteLength),d={version:a[0],flags:new Uint8Array(a.subarray(1,4)),references:[],referenceId:c.getUint32(4),timescale:c.getUint32(8),earliestPresentationTime:c.getUint32(12),firstOffset:c.getUint32(16)},e=c.getUint16(22);for(b=24;e;b+=12,e--)d.references.push({referenceType:(128&a[b])>>>7,referencedSize:2147483647&c.getUint32(b),subsegmentDuration:c.getUint32(b+4),startsWithSap:!!(128&a[b+8]),sapType:(112&a[b+8])>>>4,sapDeltaTime:268435455&c.getUint32(b+8)});return d},smhd:function(a){return{version:a[0],flags:new Uint8Array(a.subarray(1,4)),balance:a[4]+a[5]/256}},stbl:function(a){return{boxes:c(a)}},stco:function(a){var b,c=new DataView(a.buffer,a.byteOffset,a.byteLength),d={version:a[0],flags:new Uint8Array(a.subarray(1,4)),chunkOffsets:[]},e=c.getUint32(4);for(b=8;e;b+=4,e--)d.chunkOffsets.push(c.getUint32(b));return d},stsc:function(a){var b,c=new DataView(a.buffer,a.byteOffset,a.byteLength),d=c.getUint32(4),e={version:a[0],flags:new Uint8Array(a.subarray(1,4)),sampleToChunks:[]};for(b=8;d;b+=12,d--)e.sampleToChunks.push({firstChunk:c.getUint32(b),samplesPerChunk:c.getUint32(b+4),sampleDescriptionIndex:c.getUint32(b+8)});return e},stsd:function(a){return{version:a[0],flags:new Uint8Array(a.subarray(1,4)),sampleDescriptions:c(a.subarray(8))}},stsz:function(a){var b,c=new DataView(a.buffer,a.byteOffset,a.byteLength),d={version:a[0],flags:new Uint8Array(a.subarray(1,4)),sampleSize:c.getUint32(4),entries:[]};for(b=12;b<a.byteLength;b+=4)d.entries.push(c.getUint32(b));return d},stts:function(a){var b,c=new DataView(a.buffer,a.byteOffset,a.byteLength),d={version:a[0],flags:new Uint8Array(a.subarray(1,4)),timeToSamples:[]},e=c.getUint32(4);for(b=8;e;b+=8,e--)d.timeToSamples.push({sampleCount:c.getUint32(b),sampleDelta:c.getUint32(b+4)});return d},styp:function(a){return i.ftyp(a)},tfdt:function(a){return{version:a[0],flags:new Uint8Array(a.subarray(1,4)),baseMediaDecodeTime:a[4]<<24|a[5]<<16|a[6]<<8|a[7]}},tfhd:function(a){var b,c=new DataView(a.buffer,a.byteOffset,a.byteLength),d={version:a[0],flags:new Uint8Array(a.subarray(1,4)),trackId:c.getUint32(4)},e=1&d.flags[2],f=2&d.flags[2],g=8&d.flags[2],h=16&d.flags[2],i=32&d.flags[2];return b=8,e&&(b+=4,d.baseDataOffset=c.getUint32(12),b+=4),f&&(d.sampleDescriptionIndex=c.getUint32(b),b+=4),g&&(d.defaultSampleDuration=c.getUint32(b),b+=4),h&&(d.defaultSampleSize=c.getUint32(b),b+=4),i&&(d.defaultSampleFlags=c.getUint32(b)),d},tkhd:function(a){var b=new DataView(a.buffer,a.byteOffset,a.byteLength),c=4,d={version:b.getUint8(0),flags:new Uint8Array(a.subarray(1,4))};return 1===d.version?(c+=4,d.creationTime=f(b.getUint32(c)),c+=8,d.modificationTime=f(b.getUint32(c)),c+=4,d.trackId=b.getUint32(c),c+=4,c+=8,d.duration=b.getUint32(c)):(d.creationTime=f(b.getUint32(c)),c+=4,d.modificationTime=f(b.getUint32(c)),c+=4,d.trackId=b.getUint32(c),c+=4,c+=4,d.duration=b.getUint32(c)),c+=4,c+=8,d.layer=b.getUint16(c),c+=2,d.alternateGroup=b.getUint16(c),c+=2,d.volume=b.getUint8(c)+b.getUint8(c+1)/8,c+=2,c+=2,d.matrix=new Uint32Array(a.subarray(c,c+36)),c+=36,d.width=b.getUint16(c)+b.getUint16(c+2)/16,c+=4,d.height=b.getUint16(c)+b.getUint16(c+2)/16,d},traf:function(a){return{boxes:c(a)}},trak:function(a){return{boxes:c(a)}},trex:function(a){var b=new DataView(a.buffer,a.byteOffset,a.byteLength);return{version:a[0],flags:new Uint8Array(a.subarray(1,4)),trackId:b.getUint32(4),defaultSampleDescriptionIndex:b.getUint32(8),defaultSampleDuration:b.getUint32(12),defaultSampleSize:b.getUint32(16),sampleDependsOn:3&a[20],sampleIsDependedOn:(192&a[21])>>6,sampleHasRedundancy:(48&a[21])>>4,samplePaddingValue:(14&a[21])>>1,sampleIsDifferenceSample:!!(1&a[21]),sampleDegradationPriority:b.getUint16(22)}},trun:function(a){var b,c={version:a[0],flags:new Uint8Array(a.subarray(1,4)),samples:[]},d=new DataView(a.buffer,a.byteOffset,a.byteLength),e=1&c.flags[2],f=4&c.flags[2],h=1&c.flags[1],i=2&c.flags[1],j=4&c.flags[1],k=8&c.flags[1],l=d.getUint32(4),m=8;for(e&&(c.dataOffset=d.getUint32(m),m+=4),f&&l&&(b={flags:g(a.subarray(m,m+4))},m+=4,h&&(b.duration=d.getUint32(m),m+=4),i&&(b.size=d.getUint32(m),m+=4),k&&(b.compositionTimeOffset=d.getUint32(m),m+=4),c.samples.push(b),l--);l--;)b={},h&&(b.duration=d.getUint32(m),m+=4),i&&(b.size=d.getUint32(m),m+=4),j&&(b.flags=g(a.subarray(m,m+4)),m+=4),k&&(b.compositionTimeOffset=d.getUint32(m),m+=4),c.samples.push(b);return c},"url ":function(a){return{version:a[0],flags:new Uint8Array(a.subarray(1,4))}},vmhd:function(a){var b=new DataView(a.buffer,a.byteOffset,a.byteLength);return{version:a[0],flags:new Uint8Array(a.subarray(1,4)),graphicsmode:b.getUint16(4),opcolor:new Uint16Array([b.getUint16(6),b.getUint16(8),b.getUint16(10)])}}};c=function(a){for(var b,c,d,f,g,h=0,j=[],k=new ArrayBuffer(a.length),l=new Uint8Array(k),m=0;m<a.length;++m)l[m]=a[m];for(b=new DataView(k);h<a.byteLength;)c=b.getUint32(h),d=e(a.subarray(h+4,h+8)),f=c>1?h+c:a.byteLength,g=(i[d]||function(a){return{data:a}})(a.subarray(h+8,f)),g.size=c,g.type=d,j.push(g),h=f;return j},d=function(a,b){var c;return b=b||0,c=new Array(2*b+1).join(" "),a.map(function(a){return c+a.type+"\n"+Object.keys(a).filter(function(a){return"type"!==a&&"boxes"!==a}).map(function(b){var d=c+"  "+b+": ",e=a[b];if(e instanceof Uint8Array||e instanceof Uint32Array){var f=Array.prototype.slice.call(new Uint8Array(e.buffer,e.byteOffset,e.byteLength)).map(function(a){return" "+("00"+a.toString(16)).slice(-2)}).join("").match(/.{1,24}/g);return f?1===f.length?d+"<"+f.join("").slice(1)+">":d+"<\n"+f.map(function(a){return c+"  "+a}).join("\n")+"\n"+c+"  >":d+"<>"}return d+JSON.stringify(e,null,2).split("\n").map(function(a,b){return 0===b?a:c+"  "+a}).join("\n")}).join("\n")+(a.boxes?"\n"+d(a.boxes,b+1):"")}).join("\n")},b.exports={inspect:c,textify:d}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],31:[function(a,b){"use strict";var c;c=function(a){var b=a.byteLength,c=0,d=0;this.length=function(){return 8*b},this.bitsAvailable=function(){return 8*b+d},this.loadWord=function(){var e=a.byteLength-b,f=new Uint8Array(4),g=Math.min(4,b);if(0===g)throw new Error("no bytes available");f.set(a.subarray(e,e+g)),c=new DataView(f.buffer).getUint32(0),d=8*g,b-=g},this.skipBits=function(a){var e;d>a?(c<<=a,d-=a):(a-=d,e=Math.floor(a/8),a-=8*e,b-=e,this.loadWord(),c<<=a,d-=a)},this.readBits=function(a){var e=Math.min(d,a),f=c>>>32-e;return d-=e,d>0?c<<=e:b>0&&this.loadWord(),e=a-e,e>0&&d?f<<e|this.readBits(e):f},this.skipLeadingZeros=function(){var a;for(a=0;d>a;++a)if(0!==(c&2147483648>>>a))return c<<=a,d-=a,a;return this.loadWord(),a+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var a=this.skipLeadingZeros();return this.readBits(a+1)-1},this.readExpGolomb=function(){var a=this.readUnsignedExpGolomb();return 1&a?1+a>>>1:-(a>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()},b.exports=c},{}],32:[function(a,b){"use strict";var c=function(){this.init=function(){var a={};this.on=function(b,c){a[b]||(a[b]=[]),a[b].push(c)},this.off=function(b,c){var d;return a[b]?(d=a[b].indexOf(c),a[b].splice(d,1),d>-1):!1},this.trigger=function(b){var c,d,e,f;if(c=a[b])if(c=c.slice(0),2===arguments.length)for(e=c.length,d=0;e>d;++d)c[d].call(this,arguments[1]);else{for(f=[],d=arguments.length,d=1;d<arguments.length;++d)f.push(arguments[d]);for(e=c.length,d=0;e>d;++d)c[d].apply(this,f)}},this.dispose=function(){a={}}}};c.prototype.pipe=function(a){return this.on("data",function(b){a.push(b)}),this.on("done",function(b){a.flush(b)}),a},c.prototype.push=function(a){this.trigger("data",a)},c.prototype.flush=function(a){this.trigger("done",a)},b.exports=c},{}],33:[function(a,b){var c=arguments[3],d=arguments[4],e=arguments[5],f=JSON.stringify;b.exports=function(a){for(var b,g=Object.keys(e),h=0,i=g.length;i>h;h++){var j=g[h];if(e[j].exports===a){b=j;break}}if(!b){b=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var k={},h=0,i=g.length;i>h;h++){var j=g[h];k[j]=j}d[b]=[Function(["require","module","exports"],"("+a+")(self)"),k]}var l=Math.floor(Math.pow(16,8)*Math.random()).toString(16),m={};m[b]=b,d[l]=[Function(["require"],"require("+f(b)+")(self)"),m];var n="("+c+")({"+Object.keys(d).map(function(a){return f(a)+":["+d[a][0]+","+f(d[a][1])+"]"}).join(",")+"},{},["+f(l)+"])",o=window.URL||window.webkitURL||window.mozURL||window.msURL;return new Worker(o.createObjectURL(new Blob([n],{type:"text/javascript"})))}},{}],34:[function(a,b,c){(function(b){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(c,"__esModule",{value:!0});var e=a("./flash-media-source"),f=d(e),g=a("./html-media-source"),h=d(g),i="undefined"!=typeof window?window.videojs:"undefined"!=typeof b?b.videojs:null,j=d(i),k=0,l={mode:"auto"};j["default"].mediaSources={};var m=function(a,b){var c=j["default"].mediaSources[a];if(!c)throw new Error("Media Source not found (Video.js)");c.trigger({type:"sourceopen",swfId:b})},n=function(){return!!window.MediaSource&&!!window.MediaSource.isTypeSupported&&window.MediaSource.isTypeSupported('video/mp4;codecs="avc1.4d400d,mp4a.40.2"')},o=function(a){var b=j["default"].mergeOptions(l,a);return this.MediaSource={open:m,supportsNativeMediaSources:n},"html5"===b.mode||"auto"===b.mode&&n()?new h["default"]:new f["default"]};c.MediaSource=o,o.open=m,o.supportsNativeMediaSources=n;var p={createObjectURL:function(a){var b="blob:vjs-media-source/",c=void 0;return a instanceof h["default"]?(c=window.URL.createObjectURL(a.nativeMediaSource_),a.url_=c,c):a instanceof f["default"]?(c=b+k,k++,j["default"].mediaSources[c]=a,c):(c=window.URL.createObjectURL(a),a.url_=c,c)}};c.URL=p,j["default"].MediaSource=o,j["default"].URL=p}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./flash-media-source":5,"./html-media-source":7}]},{},[34])(34)}),function(a,b,c){"use strict";var d=b.getComponent("Flash"),e=b.extend(d,{constructor:function(a,c){var f=a.source,g=b(a.playerId);g.osmf=this,a.flashVars={playerId:a.playerId,readyFunction:"onReady",eventProxyFunction:"onEvent",errorEventProxyFunction:"onError"},d.call(this,a,c),this.firstplay=!1,this.loadstart=!1,g.on("loadeddata",e.onLoadedData),g.on("ended",e.onEnded),a.source=f}});e.formats={"application/adobe-f4m":"F4M","application/adobe-f4v":"F4V","application/dash+xml":"MPD"},e.canPlaySource=function(a){var b=a.type.replace(/;.*/,"").toLowerCase();return b in e.formats?"maybe":""},e.log_enabled=!1;var f=e.prototype,g=["preload","defaultPlaybackRate","playbackRate","autoplay","loop","mediaGroup","controller","controls","volume","muted","defaultMuted"],h=["error","networkState","readyState","seeking","videoWidth","startOffsetTime","paused","played","ended","streamType","initialTime","videoHeight","currentLevel","levels"],i=function(a){var b=a.charAt(0).toUpperCase()+a.slice(1);f["set"+b]=function(b){return this.el_.vjs_setProperty?this.el_.vjs_setProperty(a,b):void 0}},j=function(a){f[a]=function(){return this.el_.vjs_getProperty?this.el_.vjs_getProperty(a):void 0}};!function(){for(var a=0;a<g.length;a++)j(g[a]),i(g[a]);for(a=0;a<h.length;a++)j(h[a])}(),e.prototype.duration=function(){return this.el_?"live"==this.streamType()?1/0:this.el_.vjs_getProperty("duration"):0},e.prototype.play=function(){this.el_.vjs_play()},e.prototype.load=function(){this.el_.vjs_load()},e.prototype.paused=function(){return this.el_.vjs_paused()},e.prototype.pause=function(){this.el_.vjs_pause()},e.prototype.currentTime=function(a){return a?void this.el_.vjs_setProperty("currentTime"):this.el_.vjs_getProperty("currentTime")},e.prototype.streamStatus=function(){return this.el_.streamStatus()},e.isSupported=function(){return d.version()[0]>=10},e.onLoadedData=function(){var a=this;a.options_.autoplay?a.play():a.options_.preload&&"none"!==a.options_.preload&&(a.currentTime()&&a.currentTime(0),a.play(),a.pause(),a.bigPlayButton.show(),a.bigPlayButton.one("click",function(){a.bigPlayButton.hide()}))},e.onEnded=function(){this.options().loop&&this.currentTime(0),this.pause()},e.onReady=function(a){e.log_enabled&&b.log("OSMF","Ready",a),d.onReady(a);var f=c.getElementById(a).tech;f.currentSrc()&&f.currentSrc().length>0&&f.el_.vjs_src(f.currentSrc())},e.onError=function(a,d){var f=c.getElementById(a).tech;"loaderror"==d&&(d="srcnotfound"),e.log_enabled&&b.log("OSMF","Error",d),f.options_.reconnectOnError&&!f.reconnecting_&&(f.reconnecting_=!0,f.trigger("waiting"),setTimeout(function(){f.src(f.currentSrc()),f.reconnecting_=!1,f.error(null)},5e3)),f.error({code:4,msg:""})},e.onEvent=function(a,d,f){var g=c.getElementById(a).tech;switch(d){case"playing":g.firstplay===!1&&(e.log_enabled&&b.log("OSMF","Event",a,"loadstart"),g.trigger("loadstart"),g.loadstart=!0,e.log_enabled&&b.log("OSMF","Event",a,"firstplay"),g.trigger("firstplay"),g.firstplay=!0);break;case"buffering":d="waiting";break;case"ready":d="loadeddata"}g.trigger(d,f),"timeupdate"!==d&&e.log_enabled&&b.log("OSMF","Event",a,d)},e.prototype.supportsFullScreen=function(){return!1},e.prototype.enterFullScreen=function(){return!1},b.options.osmf={},b.options.techOrder.push("osmf"),b.registerComponent("Osmf",e)}(window,window.videojs,document);
//# sourceMappingURL=videojs.novtt.osmf.min.js.map