!function(){var e="undefined"!=typeof window?window:global,t={};if(function(d,e,t){var o="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value)},u=(void 0===d||d!==this)&&void 0!==e&&null!=e?e:this;function c(){c=function(){},u.Symbol||(u.Symbol=i)}var n,i=(n=0,function(e){return"jscomp_symbol_"+(e||"")+n++});function l(){c();var e=(e=u.Symbol.iterator)||(u.Symbol.iterator=u.Symbol("iterator"));"function"!=typeof Array.prototype[e]&&o(Array.prototype,e,{configurable:!0,writable:!0,value:function(){return r(this)}}),l=function(){}}function r(e){var t=0;return a(function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}})}function a(e){return l(),(e={next:e})[u.Symbol.iterator]=function(){return this},e}function B(e){l();var t=e[Symbol.iterator];return t?t.call(e):r(e)}function s(e,t){if(t){for(var n=u,i=e.split("."),r=0;r<i.length-1;r++){var a=i[r];a in n||(n[a]={}),n=n[a]}(a=t(r=n[i=i[i.length-1]]))!=r&&null!=a&&o(n,i,{configurable:!0,writable:!0,value:a})}}function h(t){function r(e){return t.next(e)}function a(e){return t.throw(e)}return new Promise(function(n,i){!function e(t){t.done?n(t.value):Promise.resolve(t.value).then(r,a).then(e,i)}(t.next())})}function G(e){return h(e())}s("Promise",function(e){function o(e){this.b=0,this.g=void 0,this.a=[];var t=this.c();try{e(t.resolve,t.reject)}catch(e){t.reject(e)}}function t(){this.a=null}function s(t){return t instanceof o?t:new o(function(e){e(t)})}if(e)return e;t.prototype.b=function(e){null==this.a&&(this.a=[],this.f()),this.a.push(e)},t.prototype.f=function(){var e=this;this.c(function(){e.j()})};var n=u.setTimeout;t.prototype.c=function(e){n(e,0)},t.prototype.j=function(){for(;this.a&&this.a.length;){var e=this.a;this.a=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(e){this.g(e)}}}this.a=null},t.prototype.g=function(e){this.c(function(){throw e})},o.prototype.c=function(){function e(t){return function(e){i||(i=!0,t.call(n,e))}}var n=this,i=!1;return{resolve:e(this.w),reject:e(this.f)}},o.prototype.w=function(e){if(e===this)this.f(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof o)this.B(e);else{e:switch(typeof e){case"object":var t=null!=e;break e;case"function":t=!0;break e;default:t=!1}t?this.v(e):this.j(e)}},o.prototype.v=function(e){var t=void 0;try{t=e.then}catch(e){return void this.f(e)}"function"==typeof t?this.F(t,e):this.j(e)},o.prototype.f=function(e){this.l(2,e)},o.prototype.j=function(e){this.l(1,e)},o.prototype.l=function(e,t){if(0!=this.b)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.b);this.b=e,this.g=t,this.s()},o.prototype.s=function(){if(null!=this.a){for(var e=0;e<this.a.length;++e)r.b(this.a[e]);this.a=null}};var r=new t;return o.prototype.B=function(e){var t=this.c();e.Jc(t.resolve,t.reject)},o.prototype.F=function(e,t){var n=this.c();try{e.call(t,n.resolve,n.reject)}catch(e){n.reject(e)}},o.prototype.then=function(e,t){function n(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(e){r(e)}}:e}var i,r,a=new o(function(e,t){i=e,r=t});return this.Jc(n(e,i),n(t,r)),a},o.prototype.catch=function(e){return this.then(void 0,e)},o.prototype.Jc=function(e,t){function n(){switch(i.b){case 1:e(i.g);break;case 2:t(i.g);break;default:throw Error("Unexpected state: "+i.b)}}var i=this;null==this.a?r.b(n):this.a.push(n)},o.resolve=s,o.reject=function(n){return new o(function(e,t){t(n)})},o.race=function(r){return new o(function(e,t){for(var n=B(r),i=n.next();!i.done;i=n.next())s(i.value).Jc(e,t)})},o.all=function(e){var t=B(e),a=t.next();return a.done?s([]):new o(function(n,e){for(var i=[],r=0;i.push(void 0),r++,s(a.value).Jc(function(t){return function(e){i[t]=e,0==--r&&n(i)}}(i.length-1),e),a=t.next(),!a.done;);})},o}),s("Promise.prototype.finally",function(e){return e||function(t){return this.then(function(e){return Promise.resolve(t()).then(function(){return e})},function(e){return Promise.resolve(t()).then(function(){throw e})})}});var f,p="function"==typeof Object.create?Object.create:function(e){function t(){}return t.prototype=e,new t};if("function"==typeof Object.setPrototypeOf)Ls=Object.setPrototypeOf;else{e:{var m={};try{m.__proto__={Hf:!0},f=m.Hf;break e}catch(e){}f=!1}Ls=f?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var g=Ls;function v(e,t){if(e.prototype=p(t.prototype),e.prototype.constructor=e,g)g(e,t);else for(var n in t){var i;"prototype"!=n&&(Object.defineProperties?(i=Object.getOwnPropertyDescriptor(t,n))&&Object.defineProperty(e,n,i):e[n]=t[n])}e.Eh=t.prototype}function b(){this.g=!1,this.c=null,this.A=void 0,this.o=1,this.b=this.f=0,this.l=this.a=null}function y(e){if(e.g)throw new TypeError("Generator is already running");e.g=!0}function E(e,t){e.a={Ge:t,Se:!0},e.o=e.f||e.b}function V(e,t,n){return e.o=n,{value:t}}function x(e){e.o=0}function z(e,t,n){e.f=t,null!=n&&(e.b=n)}function C(e,t){e.f=0,e.b=t||0}function H(e,t){e.o=t,e.f=0}function W(e){e.f=0;var t=e.a.Ge;return e.a=null,t}function N(e){e.l=[e.a],e.f=0,e.b=0}function P(e,t){var n=e.l.splice(0)[0];(n=e.a=e.a||n)?n.Se?e.o=e.f||e.b:null!=n.C&&e.b<n.C?(e.o=n.C,e.a=null):e.o=e.b:e.o=t}function w(e){this.a=new b,this.b=e}function T(t,e,n,i){try{var r=e.call(t.a.c,n);if(!(r instanceof Object))throw new TypeError("Iterator result "+r+" is not an object");if(!r.done)return t.a.g=!1,r;var a=r.value}catch(e){return t.a.c=null,E(t.a,e),S(t)}return t.a.c=null,i.call(t.a,a),S(t)}function S(t){for(;t.a.o;)try{var e=t.b(t.a);if(e)return t.a.g=!1,{value:e.value,done:!1}}catch(e){t.a.A=void 0,E(t.a,e)}if(t.a.g=!1,t.a.a){if(e=t.a.a,t.a.a=null,e.Se)throw e.Ge;return{value:e.return,done:!0}}return{value:void 0,done:!0}}function A(t){this.next=function(e){return y(t.a),e=t.a.c?T(t,t.a.c.next,e,t.a.j):(t.a.j(e),S(t))},this.throw=function(e){return y(t.a),e=t.a.c?T(t,t.a.c.throw,e,t.a.j):(E(t.a,e),S(t))},this.return=function(e){return function(e,t){y(e.a);var n=e.a.c;return n?T(e,"return"in n?n.return:function(e){return{value:e,done:!0}},t,e.a.return):(e.a.return(t),S(e))}(t,e)},l(),this[Symbol.iterator]=function(){return this}}function q(e,t){return A.prototype=e.prototype,new A(new w(t))}function I(e){if(!(e instanceof Array)){e=B(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}function k(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function M(e,t,n){e instanceof String&&(e=String(e));for(var i=e.length,r=0;r<i;r++){var a=e[r];if(t.call(n,a,r,e))return{Pe:r,Bf:a}}return{Pe:-1,Bf:void 0}}function R(e,t,n){if(null==e)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return e+""}b.prototype.j=function(e){this.A=e},b.prototype.return=function(e){this.a={return:e},this.o=this.b},b.prototype.C=function(e){this.o=e},s("WeakMap",function(i){function e(e){if(this.a=(a+=Math.random()+1).toString(),e){c(),l(),e=B(e);for(var t;!(t=e.next()).done;)t=t.value,this.set(t[0],t[1])}}function n(e){k(e,r)||o(e,r,{value:{}})}function t(e){var t=Object[e];t&&(Object[e]=function(e){return n(e),t(e)})}if(function(){if(i&&Object.seal)try{var e=Object.seal({}),t=Object.seal({}),n=new i([[e,2],[t,3]]);return 2!=n.get(e)||3!=n.get(t)?void 0:(n.delete(e),n.set(t,4),!n.has(e)&&4==n.get(t))}catch(e){return}}())return i;var r="$jscomp_hidden_"+Math.random();t("freeze"),t("preventExtensions"),t("seal");var a=0;return e.prototype.set=function(e,t){if(n(e),!k(e,r))throw Error("WeakMap key fail: "+e);return e[r][this.a]=t,this},e.prototype.get=function(e){return k(e,r)?e[r][this.a]:void 0},e.prototype.has=function(e){return k(e,r)&&k(e[r],this.a)},e.prototype.delete=function(e){return!(!k(e,r)||!k(e[r],this.a))&&delete e[r][this.a]},e}),s("Map",function(i){function n(){var e={};return e.fb=e.next=e.head=e}function e(e,t){var n=e.a;return a(function(){if(n){for(;n.head!=e.a;)n=n.fb;if(n.next!=n.head)return n=n.next,{done:!1,value:t(n)};n=null}return{done:!0,value:void 0}})}function r(e,t){var n=t&&typeof t;"object"==n||"function"==n?o.has(t)?n=o.get(t):(n=""+ ++s,o.set(t,n)):n="p_"+t;var i=e.b[n];if(i&&k(e.b,n))for(var r=0;r<i.length;r++){var a=i[r];if(t!=t&&a.key!=a.key||t===a.key)return{id:n,list:i,index:r,qa:a}}return{id:n,list:i,index:-1,qa:void 0}}function t(e){if(this.b={},this.a=n(),this.size=0,e){e=B(e);for(var t;!(t=e.next()).done;)t=t.value,this.set(t[0],t[1])}}if(function(){if(i&&"function"==typeof i&&i.prototype.entries&&"function"==typeof Object.seal)try{var e=Object.seal({x:4}),t=new i(B([[e,"s"]]));if("s"!=t.get(e)||1!=t.size||t.get({x:4})||t.set({x:4},"t")!=t||2!=t.size)return;var n=t.entries(),t=n.next();return t.done||t.value[0]!=e||"s"!=t.value[1]?void 0:!((t=n.next()).done||4!=t.value[0].x||"t"!=t.value[1]||!n.next().done)}catch(e){return}}())return i;c(),l();var o=new WeakMap;t.prototype.set=function(e,t){var n=r(this,e);return n.list||(n.list=this.b[n.id]=[]),n.qa?n.qa.value=t:(n.qa={next:this.a,fb:this.a.fb,head:this.a,key:e,value:t},n.list.push(n.qa),this.a.fb.next=n.qa,this.a.fb=n.qa,this.size++),this},t.prototype.delete=function(e){return!(!(e=r(this,e)).qa||!e.list)&&(e.list.splice(e.index,1),e.list.length||delete this.b[e.id],e.qa.fb.next=e.qa.next,e.qa.next.fb=e.qa.fb,e.qa.head=null,this.size--,!0)},t.prototype.clear=function(){this.b={},this.a=this.a.fb=n(),this.size=0},t.prototype.has=function(e){return!!r(this,e).qa},t.prototype.get=function(e){return(e=r(this,e).qa)&&e.value},t.prototype.entries=function(){return e(this,function(e){return[e.key,e.value]})},t.prototype.keys=function(){return e(this,function(e){return e.key})},t.prototype.values=function(){return e(this,function(e){return e.value})},t.prototype.forEach=function(e,t){for(var n,i=this.entries();!(n=i.next()).done;)n=n.value,e.call(t,n[1],n[0],this)},t.prototype[Symbol.iterator]=t.prototype.entries;var s=0;return t}),s("Set",function(i){function e(e){if(this.a=new Map,e){e=B(e);for(var t;!(t=e.next()).done;)this.add(t.value)}this.size=this.a.size}return function(){if(i&&"function"==typeof i&&i.prototype.entries&&"function"==typeof Object.seal)try{var e=Object.seal({x:4}),t=new i(B([e]));if(!t.has(e)||1!=t.size||t.add(e)!=t||1!=t.size||t.add({x:4})!=t||2!=t.size)return;var n=t.entries(),t=n.next();return t.done||t.value[0]!=e||t.value[1]!=e?void 0:!(t=n.next()).done&&t.value[0]!=e&&4==t.value[0].x&&t.value[1]==t.value[0]&&n.next().done}catch(e){return}}()?i:(c(),l(),e.prototype.add=function(e){return this.a.set(e,e),this.size=this.a.size,this},e.prototype.delete=function(e){return e=this.a.delete(e),this.size=this.a.size,e},e.prototype.clear=function(){this.a.clear(),this.size=0},e.prototype.has=function(e){return this.a.has(e)},e.prototype.entries=function(){return this.a.entries()},e.prototype.keys=e.prototype.values=function(){return this.a.values()},e.prototype[Symbol.iterator]=e.prototype.values,e.prototype.forEach=function(t,n){var i=this;this.a.forEach(function(e){return t.call(n,e,e,i)})},e)}),s("Array.prototype.keys",function(e){return e||function(){return function(t,n){l(),t instanceof String&&(t+="");var i=0,r={next:function(){if(i<t.length){var e=i++;return{value:n(e,t[e]),done:!1}}return r.next=function(){return{done:!0,value:void 0}},r.next()}};return r[Symbol.iterator]=function(){return r},r}(this,function(e){return e})}}),s("Array.from",function(e){return e||function(e,t,n){l(),t=null!=t?t:function(e){return e};var i=[],r=e[Symbol.iterator];if("function"==typeof r)for(e=r.call(e);!(r=e.next()).done;)i.push(t.call(n,r.value));else{r=e.length;for(var a=0;a<r;a++)i.push(t.call(n,e[a]))}return i}}),s("Array.prototype.findIndex",function(e){return e||function(e,t){return M(this,e,t).Pe}}),s("Object.is",function(e){return e||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}}),s("Array.prototype.includes",function(e){return e||function(e,t){var n=this;n instanceof String&&(n=String(n));var i=n.length,r=t||0;for(r<0&&(r=Math.max(r+i,0));r<i;r++){var a=n[r];if(a===e||Object.is(a,e))return!0}return!1}}),s("String.prototype.includes",function(e){return e||function(e,t){return-1!==R(this,e,"includes").indexOf(e,t||0)}}),s("String.prototype.startsWith",function(e){return e||function(e,t){for(var n=R(this,e,"startsWith"),i=n.length,r=e.length,a=Math.max(0,Math.min(0|t,n.length)),o=0;o<r&&a<i;)if(n[a++]!=e[o++])return!1;return r<=o}}),s("Array.prototype.find",function(e){return e||function(e,t){return M(this,e,t).Bf}});var L="function"==typeof Object.assign?Object.assign:function(e,t){for(var n=1;n<arguments.length;n++){var i=arguments[n];if(i)for(var r in i)k(i,r)&&(e[r]=i[r])}return e};s("Object.assign",function(e){return e||L});var U=this;function _(e,t){var n,i=e.split("."),r=U;i[0]in r||!r.execScript||r.execScript("var "+i[0]);for(;i.length&&(n=i.shift());)i.length||void 0===t?r=r[n]||(r[n]={}):r[n]=t}function O(e,i){function t(){}t.prototype=i.prototype,e.Eh=i.prototype,e.prototype=new t,(e.prototype.constructor=e).base=function(e,t,n){return i.prototype[t].apply(e,Array.prototype.slice.call(arguments,2))}}function D(e,t){for(var n in t=void 0===t?{}:t)this[n]=t[n];this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=(d.performance&&d.performance.now?d.performance:Date).now(),this.type=e,this.isTrusted=!1,this.target=this.currentTarget=null,this.a=!1}U.a=!0,_("shaka.util.FakeEvent",D),D.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},D.prototype.stopImmediatePropagation=function(){this.a=!0},D.prototype.stopPropagation=function(){};var X={Nb:0,Hc:function(){},ba:function(){},error:function(){},u:function(){},info:function(){},debug:function(){},I:function(){},N:function(){}};function F(){this.a={}}function j(){this.Cd=new F,this.Ec=this}function K(e,t){for(var n=[],i=B(e),r=i.next();!r.done;r=i.next())n.push(t(r.value));return n}function Y(e,t){for(var n=B(e),i=n.next();!i.done;i=n.next())if(!t(i.value))return!1;return!0}function $(e,t){for(var n=[],i=B(e),r=i.next();!r.done;r=i.next())t(r=r.value)&&n.push(r);return n}function J(e,t){return e=Q(e),t=Q(t),e.split("-")[0]==t.split("-")[0]}function Z(e,t){e=Q(e),t=Q(t);e=e.split("-"),t=t.split("-");return e[0]==t[0]&&1==e.length&&2==t.length}function Q(e){var t=e.split("-");return e=t[0]||"",t=t[1]||"",e=e.toLowerCase(),e=ie.get(e)||e,(t=t.toUpperCase())?e+"-"+t:e}function ee(e){var t=e.indexOf("-");return e=(e=0<=t?e.substring(0,t):e).toLowerCase(),ie.get(e)||e}function te(e){return e.language?Q(e.language):e.audio&&e.audio.language?Q(e.audio.language):e.video&&e.video.language?Q(e.video.language):"und"}function ne(e,t){for(var n=Q(e),i=new Set,r=B(t),a=r.next();!a.done;a=r.next())i.add(Q(a.value));for(a=(r=B(i)).next();!a.done;a=r.next())if((a=a.value)==n)return a;for(a=(r=B(i)).next();!a.done;a=r.next())if(Z(a=a.value,n))return a;for(a=(r=B(i)).next();!a.done;a=r.next()){var o=n,s=Q(s=a=a.value),o=Q(o);if(s=s.split("-"),o=o.split("-"),2==s.length&&2==o.length&&s[0]==o[0])return a}for(a=(i=B(i)).next();!a.done;a=i.next())if(Z(n,r=a.value))return r;return null}d.console&&d.console.log.bind&&(X.ba=console.warn.bind(console),X.Hc=console.error.bind(console),1<=X.Nb&&(X.error=console.error.bind(console)),2<=X.Nb&&(X.u=console.warn.bind(console)),3<=X.Nb&&(X.info=console.info.bind(console)),4<=X.Nb&&(X.debug=console.log.bind(console)),5<=X.Nb&&(X.I=console.debug.bind(console)),6<=X.Nb&&(X.N=console.debug.bind(console))),(e=F.prototype).push=function(e,t){this.a.hasOwnProperty(e)?this.a[e].push(t):this.a[e]=[t]},e.get=function(e){return(e=this.a[e])?e.slice():null},e.getAll=function(){var e,t=[];for(e in this.a)t.push.apply(t,this.a[e]);return t},e.remove=function(e,t){var n=this.a[e];if(n)for(var i=0;i<n.length;++i)n[i]==t&&(n.splice(i,1),--i)},e.forEach=function(e){for(var t in this.a)e(t,this.a[t])},j.prototype.addEventListener=function(e,t){this.Cd.push(e,t)},j.prototype.removeEventListener=function(e,t){this.Cd.remove(e,t)},j.prototype.dispatchEvent=function(e){for(var t=this.Cd.get(e.type)||[],n=0;n<t.length;++n){e.target=this.Ec,e.currentTarget=this.Ec;var i=t[n];try{i.handleEvent?i.handleEvent(e):i.call(this,e)}catch(e){X.error("Uncaught exception in event handler",e,e?e.message:null,e?e.stack:null)}if(e.a)break}return e.defaultPrevented};var ie=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]);function re(e){this.g=Q(e),this.f=new Map,this.b=new Set,this.c=new Map,this.a=new j}function ae(n){for(var e=n.c,t=n.g,i=n.b,r=new Set,a={},o=B(i),s=o.next();!s.done;a={locale:a.locale},s=o.next()){a.locale=s.value,r.add(a.locale),r.add(ee(a.locale)),(s=$(e.keys(),function(r){return function(e){var t=r.locale,n=ee(e),i=ee(t);return e!=n&&t!=i&&n==i}}(a))).sort();for(var u=B(s),s=u.next();!s.done;s=u.next())r.add(s.value);for((s=$(e.keys(),function(t){return function(e){return ee(e)==t.locale}}(a))).sort(),s=(u=B(s)).next();!s.done;s=u.next())r.add(s.value)}for(r.add(t),t=[],s=(r=B(r)).next();!s.done;s=r.next())(s=e.get(s.value))&&t.push(s);for(t.reverse(),n.f.clear(),s=(e=B(t)).next();!s.done;s=e.next())s.value.forEach(function(e,t){n.f.set(t,e)});for(e=n.f.keys(),r=new Set,s=(t=B(n.b)).next();!s.done;s=t.next())(function(e,t,n){for(var i=(t=B(t)).next();!i.done;i=t.next())i=i.value,e.get(i)||n.add(i)})(s=n.c.get(s.value)||new Map,e,r);0<r.size&&(i={locales:Array.from(i),missing:Array.from(r)},n.a.dispatchEvent(new D("missing-localizations",i)))}_("shaka.ui.Localization",re),re.prototype.addEventListener=function(e,t,n){this.a.addEventListener(e,t,n)},re.prototype.removeEventListener=function(e,t,n){this.a.removeEventListener(e,t,n||void 0)},re.prototype.dispatchEvent=function(e){return this.a.dispatchEvent(e)},re.prototype.changeLocale=re.prototype.Be=function(e){var t=this;this.b.clear();for(var n=(e=B(e)).next();!n.done;n=e.next())this.b.add(Q(n.value));ae(this),this.a.dispatchEvent(new D("locale-changed")),(e=$(this.b,function(e){return!t.c.has(e)})).length&&this.a.dispatchEvent(new D("unknown-locales",{locales:e}))},re.prototype.insert=re.prototype.aa=function(e,t,n){var i=oe;e=Q(e),void 0===n&&(n=i.Gf);var r=this.c.get(e)||new Map;return t.forEach(function(e,t){r.has(t)&&n!=i.Gf||r.set(t,e)}),this.c.set(e,r),ae(this),this.a.dispatchEvent(new D("locale-updated")),this},re.prototype.resolveDictionary=re.prototype.nh=function(e){for(var t=B(e.keys()),n=t.next();!n.done;n=t.next())n=n.value,e.set(n,this.resolve(n))},re.prototype.resolve=function(e){var t=this.f.get(e);return t||(e={locales:Array.from(this.b),missing:e},this.a.dispatchEvent(new D("unknown-localization",e)),"")};var oe={USE_OLD:0,USE_NEW:1};function se(e){this.c=Math.exp(Math.log(.5)/e),this.b=this.a=0}function ue(e,t,n){var i=Math.pow(e.c,t);n=n*(1-i)+i*e.a,isNaN(n)||(e.a=n,e.b+=t)}function ce(e){return e.a/(1-Math.pow(e.c,e.b))}function le(){this.b=new se(2),this.c=new se(5),this.a=0}function de(e,t,n,i){for(var r=[],a=3;a<arguments.length;++a)r[a-3]=arguments[a];this.severity=e,this.category=t,this.code=n,this.data=r,this.handled=!1}re.ConflictResolution=oe,re.UNKNOWN_LOCALES="unknown-locales",re.UNKNOWN_LOCALIZATION="unknown-localization",re.MISSING_LOCALIZATIONS="missing-localizations",re.LOCALE_CHANGED="locale-changed",re.LOCALE_UPDATED="locale-updated",le.prototype.getBandwidthEstimate=function(e){return this.a<128e3?e:Math.min(ce(this.b),ce(this.c))},_("shaka.util.Error",de),de.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},de.Severity={RECOVERABLE:1,CRITICAL:2},de.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9},de.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,UNPLAYABLE_PERIOD:4011,RESTRICTIONS_CANNOT_BE_MET:4012,NO_PERIODS:4014,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_COULD_NOT_GUESS_MIME_TYPE:4021,HLS_MASTER_PLAYLIST_NOT_PROVIDED:4022,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,HLS_COULD_NOT_PARSE_SEGMENT_START_TIME:4030,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,HLS_AES_128_ENCRYPTION_NOT_SUPPORTED:4034,HLS_INTERNAL_SKIP_STREAM:4035,INVALID_STREAMS_CHOSEN:5005,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,STORE_ALREADY_IN_PROGRESS:9006,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013};var he=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;function fe(e){var t;e instanceof fe?(pe(this,e.Qa),this.Kb=e.Kb,this.Pa=e.Pa,me(this,e.ec),this.Ca=e.Ca,ge(this,e.a.clone()),this.wb=e.wb):e&&(t=String(e).match(he))?(pe(this,t[1]||"",!0),this.Kb=ve(t[2]||""),this.Pa=ve(t[3]||"",!0),me(this,t[4]),this.Ca=ve(t[5]||"",!0),ge(this,t[6]||"",!0),this.wb=ve(t[7]||"")):this.a=new Ie(null)}function pe(e,t,n){e.Qa=n?ve(t,!0):t,e.Qa&&(e.Qa=e.Qa.replace(/:$/,""))}function me(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error("Bad port number "+t);e.ec=t}else e.ec=null}function ge(e,t,n){t instanceof Ie?e.a=t:(n||(t=be(t,Se)),e.a=new Ie(t))}function ve(e,t){return e?(t?decodeURI:decodeURIComponent)(e):""}function be(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,ye),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function ye(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}(e=fe.prototype).Qa="",e.Kb="",e.Pa="",e.ec=null,e.Ca="",e.wb="",e.toString=function(){var e,t=[],n=this.Qa;return n&&t.push(be(n,Ee,!0),":"),(n=this.Pa)&&(t.push("//"),(e=this.Kb)&&t.push(be(e,Ee,!0),"@"),t.push(encodeURIComponent(n).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.ec)&&t.push(":",String(n))),(n=this.Ca)&&(this.Pa&&"/"!=n.charAt(0)&&t.push("/"),t.push(be(n,"/"==n.charAt(0)?Te:we,!0))),(n=this.a.toString())&&t.push("?",n),(n=this.wb)&&t.push("#",be(n,Ae)),t.join("")},e.resolve=function(e){var t=this.clone();"data"===t.Qa&&(t=new fe);var n=!!e.Qa;n?pe(t,e.Qa):n=!!e.Kb,n?t.Kb=e.Kb:n=!!e.Pa,n?t.Pa=e.Pa:n=null!=e.ec;var i,r=e.Ca;if(n)me(t,e.ec);else if(n=!!e.Ca)if("/"!=r.charAt(0)&&(this.Pa&&!this.Ca?r="/"+r:-1!=(i=t.Ca.lastIndexOf("/"))&&(r=t.Ca.substr(0,i+1)+r)),".."==r||"."==r)r="";else if(-1!=r.indexOf("./")||-1!=r.indexOf("/.")){i=0==r.lastIndexOf("/",0),r=r.split("/");for(var a=[],o=0;o<r.length;){var s=r[o++];"."==s?i&&o==r.length&&a.push(""):".."==s?((1<a.length||1==a.length&&""!=a[0])&&a.pop(),i&&o==r.length&&a.push("")):(a.push(s),i=!0)}r=a.join("/")}return n?t.Ca=r:n=""!==e.a.toString(),n?ge(t,e.a.clone()):n=!!e.wb,n&&(t.wb=e.wb),t},e.clone=function(){return new fe(this)};var Ee=/[#\/\?@]/g,we=/[#\?:]/g,Te=/[#\?]/g,Se=/[#\?@]/g,Ae=/#/g;function Ie(e){this.a=e||null}(e=Ie.prototype).Aa=null,e.Mc=null,e.add=function(e,t){if(!this.Aa&&(this.Aa={},this.Mc=0,this.a))for(var n=this.a.split("&"),i=0;i<n.length;i++){var r,a=n[i].indexOf("="),o=null;0<=a?(r=n[i].substring(0,a),o=n[i].substring(a+1)):r=n[i],r=decodeURIComponent(r.replace(/\+/g," ")),o=o||"",this.add(r,decodeURIComponent(o.replace(/\+/g," ")))}return this.a=null,(n=this.Aa.hasOwnProperty(e)&&this.Aa[e])||(this.Aa[e]=n=[]),n.push(t),this.Mc++,this},e.toString=function(){if(this.a)return this.a;if(!this.Aa)return"";var e,t=[];for(e in this.Aa)for(var n=encodeURIComponent(e),i=this.Aa[e],r=0;r<i.length;r++){var a=n;""!==i[r]&&(a+="="+encodeURIComponent(i[r])),t.push(a)}return this.a=t.join("&")},e.clone=function(){var e=new Ie;if(e.a=this.a,this.Aa){var t,n={};for(t in this.Aa)n[t]=this.Aa[t].concat();e.Aa=n,e.Mc=this.Mc}return e};var ke={Pf:function(e,t){return e.reduce(function(e,t,n){return t.catch(e.bind(null,n))}.bind(null,t),Promise.reject())},nd:function(e,t){return e.concat(t)},Uc:function(){},jb:function(e){return null!=e}};function Ce(e,t){if(0==t.length)return e;var n=t.map(function(e){return new fe(e)});return e.map(function(e){return new fe(e)}).map(function(e){return n.map(e.resolve.bind(e))}).reduce(ke.nd,[]).map(function(e){return e.toString()})}function xe(e,t){return{keySystem:e,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:t||[],keyIds:[]}}var Ne={tb:"video",jc:"audio",Oa:"text",Mh:"image",Kh:"application"},Pe=1/15;function Me(){var n,i,e=new Promise(function(e,t){n=e,i=t});return e.resolve=n,e.reject=i,e}function Re(e){if(!e)return"";239==(e=new Uint8Array(e))[0]&&187==e[1]&&191==e[2]&&(e=e.subarray(3)),e=De(e),e=escape(e);try{return decodeURIComponent(e)}catch(e){throw new de(2,2,2004)}}function Le(e,t,n){if(!e)return"";if(!n&&0!=e.byteLength%2)throw X.error("Data has an incorrect length, must be even."),new de(2,2,2004);var i=e instanceof ArrayBuffer?e:((n=new Uint8Array(e.byteLength)).set(new Uint8Array(e)),n.buffer);e=Math.floor(e.byteLength/2),n=new Uint16Array(e),i=new DataView(i);for(var r=0;r<e;r++)n[r]=i.getUint16(2*r,t);return De(n)}function Ue(e){var t=new Uint8Array(e);if(239==t[0]&&187==t[1]&&191==t[2])return Re(t);if(254==t[0]&&255==t[1])return Le(t.subarray(2),!1);if(255==t[0]&&254==t[1])return Le(t.subarray(2),!0);var n=function(e,t){return e.byteLength<=t||32<=e[t]&&e[t]<=126}.bind(null,t);if(X.debug("Unable to find byte-order-mark, making an educated guess."),0==t[0]&&0==t[2])return Le(e,!1);if(0==t[1]&&0==t[3])return Le(e,!0);if(n(0)&&n(1)&&n(2)&&n(3))return Re(e);throw new de(2,2,2003)}function _e(e){e=encodeURIComponent(e),e=unescape(e);for(var t=new Uint8Array(e.length),n=0;n<e.length;++n)t[n]=e.charCodeAt(n);return t.buffer}function Oe(e,t){for(var n=new Uint8Array(2*e.length),i=new DataView(n.buffer),r=0;r<e.length;++r)i.setUint16(2*r,e.charCodeAt(r),t);return n.buffer}function De(e){if(!Fe)for(var t={size:65536};0<t.size;(t={size:t.size}).size/=2)if(function(e){try{var t=new Uint8Array(e);return 0<String.fromCharCode.apply(null,t).length}catch(e){return!1}}(t.size)){Fe=function(i){return function(e){for(var t="",n=0;n<e.length;n+=i.size)t+=String.fromCharCode.apply(null,e.subarray(n,n+i.size));return t}}(t);break}return Fe(e)}Me.prototype.resolve=function(){},Me.prototype.reject=function(){},_("shaka.util.StringUtils.fromUTF8",Re),_("shaka.util.StringUtils.fromUTF16",Le),_("shaka.util.StringUtils.fromBytesAutoDetect",Ue),_("shaka.util.StringUtils.toUTF8",_e),_("shaka.util.StringUtils.toUTF16",Oe);var Fe=null;_("shaka.util.StringUtils.resetFromCharCode",function(){Fe=null});var je={gd:function(e,t){e=De(e);return t=null==t||t,e=d.btoa(e).replace(/\+/g,"-").replace(/\//g,"_"),t?e:e.replace(/=*$/,"")}};function Ke(){this.a=new muxjs.mp4.Transmuxer({keepOriginalTimestamps:!0}),this.b=null,this.g=[],this.c=[],this.f=!1,this.a.on("data",this.l.bind(this)),this.a.on("done",this.j.bind(this))}function Be(e,t){return!(!d.muxjs||"mp2t"!=e.toLowerCase().split(";")[0].split("/")[1])&&(t?MediaSource.isTypeSupported(Ge(t,e)):MediaSource.isTypeSupported(Ge("audio",e))||MediaSource.isTypeSupported(Ge("video",e)))}function Ge(e,t){var n=t.replace(/mp2t/i,"mp4");"audio"==e&&(n=n.replace("video","audio"));var i=/avc1\.(66|77|100)\.(\d+)/.exec(n);return i&&(t="avc1.",t=("66"==(e=i[1])?t+"4200":"77"==e?t+"4d00":t+"6400")+((e=Number(i[2]))>>4).toString(16),t+=(15&e).toString(16),n=n.replace(i[0],t)),n}function Ve(e){this.b=e,this.a=null}function ze(e){this.b=e,this.a=null}function He(e,t){var n=qe();this.l=(null==e.maxAttempts?n:e).maxAttempts,this.f=(null==e.baseDelay?n:e).baseDelay,this.j=(null==e.fuzzFactor?n:e).fuzzFactor,this.g=(null==e.backoffFactor?n:e).backoffFactor,this.a=0,this.b=this.f,(this.c=void 0!==t&&t)&&(this.a=1)}function We(i){return G(function e(){var t,n;return q(e,function(e){switch(e.o){case 1:if(i.a>=i.l){if(!i.c)return e.return(Promise.reject());i.a=1,i.b=i.f}return(t=i.a,i.a++,0==t)?e.return():(n=i.b*(1+(2*Math.random()-1)*i.j),V(e,new Promise(function(e){new ze(e).R(n/1e3)}),2));case 2:i.b*=i.g,x(e)}})})}function qe(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0}}function Xe(e,t){this.promise=e,this.We=t,this.a=!1}function Ye(e){return new Xe(Promise.reject(e),function(){return Promise.resolve()})}function $e(){var e=Promise.reject(new de(2,7,7001));return e.catch(function(){}),new Xe(e,function(){return Promise.resolve()})}function Je(e){return new Xe(Promise.resolve(e),function(){return Promise.resolve()})}function Ze(e){return new Xe(e,function(){return e.catch(function(){})})}function Qe(e){return new Xe(Promise.all(e.map(function(e){return e.promise})),function(){return Promise.all(e.map(function(e){return e.abort()}))})}function et(e){var a=new Set;return function e(t){switch(typeof t){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return t;default:if(!t||t.buffer&&t.buffer.constructor==ArrayBuffer)return t;if(a.has(t))return null;var n=t.constructor==Array;if(t.constructor!=Object&&!n)return null;a.add(t);var i,r=n?[]:{};for(i in t)r[i]=e(t[i]);return n&&(r.length=t.length),r}}(e)}function tt(e,t){return!("number"!=typeof e||"number"!=typeof t||!isNaN(e)||!isNaN(t))||e===t}function nt(e,t){t=e.indexOf(t);-1<t&&e.splice(t,1)}function it(e,t,n){if(n=n||tt,e.length!=t.length)return!1;t=t.slice();for(var i={},r=(e=B(e)).next();!r.done;i={item:i.item},r=e.next()){if(i.item=r.value,-1==(r=t.findIndex(function(t){return function(e){return n(t.item,e)}}(i))))return!1;t[r]=t[t.length-1],t.pop()}return 0==t.length}function rt(e,t,n){if(n=n||tt,e.length==t.length){for(var i=0;i<e.length;i++)if(!n(e[i],t[i]))return;return 1}}function at(){this.a=[]}function ot(e,t){e.a.push(t.finally(function(){nt(e.a,t)}))}function st(e){j.call(this),this.f=!1,this.g=new at,this.a=new Set,this.b=new Set,this.c=e||null}_("shaka.util.Uint8ArrayUtils.toBase64",je.gd),je.Za=function(e){e=d.atob(e.replace(/-/g,"+").replace(/_/g,"/"));for(var t=new Uint8Array(e.length),n=0;n<e.length;++n)t[n]=e.charCodeAt(n);return t},_("shaka.util.Uint8ArrayUtils.fromBase64",je.Za),je.vd=function(e){for(var t=new Uint8Array(e.length/2),n=0;n<e.length;n+=2)t[n/2]=d.parseInt(e.substr(n,2),16);return t},_("shaka.util.Uint8ArrayUtils.fromHex",je.vd),je.hd=function(e){for(var t="",n=0;n<e.length;++n){var i=e[n].toString(16);1==i.length&&(i="0"+i),t+=i}return t},_("shaka.util.Uint8ArrayUtils.toHex",je.hd),je.Xa=function(e,t){if(!e&&!t)return!0;if(!e||!t||e.length!=t.length)return!1;for(var n=0;n<e.length;++n)if(e[n]!=t[n])return!1;return!0},_("shaka.util.Uint8ArrayUtils.equal",je.Xa),je.concat=function(e){for(var t=[],n=0;n<arguments.length;++n)t[n]=arguments[n];for(var i=n=0;i<t.length;++i)n+=t[i].length;n=new Uint8Array(n);for(var r=i=0;r<t.length;++r)n.set(t[r],i),i+=t[r].length;return n},_("shaka.util.Uint8ArrayUtils.concat",je.concat),Ke.prototype.destroy=function(){return this.a.dispose(),this.a=null,Promise.resolve()},Ke.prototype.l=function(e){this.c=e.captions;var t=new Uint8Array(e.data.byteLength+e.initSegment.byteLength);t.set(e.initSegment,0),t.set(e.data,e.initSegment.byteLength),this.g.push(t)},Ke.prototype.j=function(){var e={data:je.concat.apply(null,this.g),captions:this.c};this.b.resolve(e),this.f=!1},Ve.prototype.R=function(e){var t=this;this.stop();var n=!0,i=null;return this.a=function(){d.clearTimeout(i),n=!1},i=d.setTimeout(function(){n&&t.b()},1e3*e),this},Ve.prototype.stop=function(){this.a&&(this.a(),this.a=null)},_("shaka.util.Timer",ze),ze.prototype.tickNow=ze.prototype.gb=function(){return this.stop(),this.b(),this},ze.prototype.tickAfter=ze.prototype.R=function(e){var t=this;return this.stop(),this.a=new Ve(function(){t.b()}).R(e),this},ze.prototype.tickEvery=ze.prototype.Ia=function(e){var t=this;return this.stop(),this.a=new Ve(function(){t.a.R(e),t.b()}).R(e),this},ze.prototype.stop=function(){this.a&&(this.a.stop(),this.a=null)},_("shaka.util.AbortableOperation",Xe),Xe.failed=Ye,Xe.aborted=$e,Xe.completed=Je,Xe.notAbortable=Ze,Xe.prototype.abort=function(){return this.a=!0,this.We()},Xe.all=Qe,Xe.prototype.finally=function(e){return this.promise.then(function(){return e(!0)},function(){return e(!1)}),this},Xe.prototype.chain=Xe.prototype.ma=function(i,r){function e(n){return function(e){var t;o.a&&n?s.reject(u):(t=n?i:r)?a=function(e,t,n){try{var i=e(t);return i&&i.promise&&i.abort?(n.resolve(i.promise),function(){return i.abort()}):(n.resolve(i),function(){return Promise.resolve(i).then(function(){},function(){})})}catch(e){return n.reject(e),function(){return Promise.resolve()}}}(t,e,s):(n?s.resolve:s.reject)(e)}}function a(){return s.reject(u),o.abort()}var o=this,s=new Me,u=new de(2,7,7001);return this.promise.then(e(!0),e(!1)),new Xe(s,function(){return a()})},at.prototype.destroy=function(){var t=[];return this.a.forEach(function(e){e.promise.catch(function(){}),t.push(e.abort())}),this.a=[],Promise.all(t)},O(st,j),_("shaka.net.NetworkingEngine",st),st.RequestType={MANIFEST:0,SEGMENT:1,LICENSE:2,APP:3,TIMING:4},st.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:3};var ut={};function ct(e,t,n){n=n||3;var i=ut[e];(!i||n>=i.priority)&&(ut[e]={priority:n,dh:t})}function lt(e,t){return{uris:e,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:t,licenseRequestType:null,sessionId:null}}function dt(){this.a=0}function ht(e,t,n){Xe.call(this,e,t),this.b=n}function ft(){}function pt(){this.a=new F}function mt(e,t,n,i){this.target=e,this.type=t,this.listener=n,this.a=function(e,t){if(null==t)return!1;if("boolean"==typeof t)return t;var n=new Set(["passive","capture"]);return Object.keys(t).filter(function(e){return!n.has(e)}),function(e){var t=gt;if(null==t){t=!1;try{var n={},i={get:function(){return!(t=!0)}};Object.defineProperty(n,"passive",i),Object.defineProperty(n,"capture",i),i=function(){},e.addEventListener("test",i,n),e.removeEventListener("test",i,n)}catch(e){t=!1}gt=t}return t||!1}(e)?t:t.capture||!1}(e,i),this.target.addEventListener(t,n,this.a)}st.registerScheme=ct,st.unregisterScheme=function(e){delete ut[e]},st.prototype.registerRequestFilter=st.prototype.fh=function(e){this.a.add(e)},st.prototype.unregisterRequestFilter=st.prototype.Fh=function(e){this.a.delete(e)},st.prototype.clearAllRequestFilters=st.prototype.Nf=function(){this.a.clear()},st.prototype.registerResponseFilter=st.prototype.gh=function(e){this.b.add(e)},st.prototype.unregisterResponseFilter=st.prototype.Gh=function(e){this.b.delete(e)},st.prototype.clearAllResponseFilters=st.prototype.Of=function(){this.b.clear()},st.defaultRetryParameters=qe,st.makeRequest=lt,st.prototype.destroy=function(){return this.f=!0,this.a.clear(),this.b.clear(),this.g.destroy()},st.prototype.request=function(i,e){var r=this,t=new dt;if(this.f){var n=Promise.reject(new de(2,7,7001));return n.catch(function(){}),new ht(n,function(){return Promise.resolve()},t)}e.method=e.method||"GET",e.headers=e.headers||{},e.retryParameters=e.retryParameters?et(e.retryParameters):qe(),e.uris=et(e.uris);var a=(n=function(e,t,n){for(var i=Je(void 0),r={},a=(e=B(e.a)).next();!a.done;r={Yd:r.Yd},a=e.next())r.Yd=a.value,i=i.ma(function(e){return function(){return e.Yd(t,n)}}(r));return i.ma(void 0,function(e){if(e&&7001==e.code)throw e;throw new de(2,1,1006,e)})}(this,i,e)).ma(function(){return function t(i,r,n,a,o,s,u){var e=new fe(n.uris[o]),c=e.Qa,l=!1;c||(c=location.protocol,c=c.slice(0,-1),pe(e,c),n.uris[o]=e.toString());c=c.toLowerCase();var d=(c=ut[c])?c.dh:null;if(!d)return Ye(new de(2,1,1e3,e));var h;return Ze(We(a)).ma(function(){return i.f?$e():(h=Date.now(),d(n.uris[o],n,r,function(e,t,n){i.c&&1==r&&(i.c(e,t),l=!0,u.a=n)}))}).ma(function(e){return null==e.timeMs&&(e.timeMs=Date.now()-h),{response:e,Ag:l}},function(e){if(e&&7001==e.code)throw e;if(i.f)return $e();if(e&&1==e.severity)return i.dispatchEvent(new D("retry",{error:e instanceof de?e:null})),o=(o+1)%n.uris.length,t(i,r,n,a,o,e,u);throw e||s})}(r,i,e,new He(e.retryParameters,!1),0,null,t)}),o=a.ma(function(e){return function(e,t,n){for(var i=Je(void 0),r=(e=B(e.b)).next();!r.done;r=e.next())i=i.ma(r.value.bind(null,t,n.response));return i.ma(function(){return n},function(e){if(e&&7001==e.code)throw e;var t=2;throw e instanceof de&&(t=e.severity),new de(t,1,1007,e)})}(r,i,e)}),s=Date.now(),u=0;n.promise.then(function(){u=Date.now()-s},function(){});var c=0;return a.promise.then(function(){c=Date.now()},function(){}),n=new ht((n=o.ma(function(e){var t=Date.now()-c,n=e.response;return n.timeMs+=u,n.timeMs+=t,e.Ag||!r.c||n.fromCache||1!=i||r.c(n.timeMs,n.data.byteLength),n},function(e){throw e&&(e.severity=2),e})).promise,n.We,t),ot(this.g,n),n},st.NumBytesRemainingClass=dt,v(ht,Xe),(st.PendingRequest=ht).all=Qe,ht.notAbortable=Ze,ht.completed=Je,ht.aborted=$e,ht.failed=Ye,_("shaka.util.IReleasable",ft),ft.prototype.release=function(){},_("shaka.util.EventManager",pt),pt.prototype.release=function(){this.Hb(),this.a=null},pt.prototype.listen=pt.prototype.m=function(e,t,n,i){this.a&&(e=new mt(e,t,n,i),this.a.push(t,e))},pt.prototype.listenOnce=pt.prototype.Ha=function(n,i,r,e){var a=this;this.m(n,i,function e(t){a.xa(n,i,e),r(t)},e)},pt.prototype.unlisten=pt.prototype.xa=function(e,t,n){if(this.a)for(var i=this.a.get(t)||[],r=(i=B(i)).next();!r.done;r=i.next())(r=r.value).target!=e||n!=r.listener&&n||(r.xa(),this.a.remove(t,r))},pt.prototype.removeAll=pt.prototype.Hb=function(){if(this.a){for(var e=this.a.getAll(),t=(e=B(e)).next();!t.done;t=e.next())t.value.xa();this.a.a={}}},mt.prototype.unlisten=mt.prototype.xa=function(){this.target.removeEventListener(this.type,this.listener,this.a),this.listener=this.target=null,this.a=!1};var gt=void 0;function vt(e){return new fe(e=Ue(e)).Pa}function bt(e,t,n){function i(e){new DataView(r.buffer).setUint32(a,e.byteLength,!0),a+=4,r.set(e,a),a+=e.byteLength}if(!n||!n.byteLength)throw new de(2,6,6015);t="string"==typeof t?new Uint8Array(Oe(t,!0)):new Uint8Array(t),e=Oe(e=Ue(e),!0);var r=new Uint8Array(12+e.byteLength+t.byteLength+n.byteLength),a=0;return i(new Uint8Array(e)),i(t),i(new Uint8Array(n)),r}function yt(t){var n=new Map;return Object.keys(t).forEach(function(e){n.set(e,t[e])}),n}function Et(e){var n={};return e.forEach(function(e,t){n[t]=e}),n}function wt(e,t){return t&&(e+='; codecs="'+t+'"'),e}function Tt(e){var t=(e=e.split("."))[0];return e.pop(),[t,e.join(".")]}_("shaka.util.FairPlayUtils.defaultGetContentId",vt),_("shaka.util.FairPlayUtils.initDataTransform",bt);var St=(new Map).set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels");function At(){return!(!d.MediaSource||!MediaSource.isTypeSupported)}function It(e){return""!=Pt().canPlayType(e)}function kt(){return Nt("Tizen")}function Ct(){return!!navigator.vendor&&navigator.vendor.includes("Apple")&&!kt()}function xt(){if(!Ct())return null;var e=navigator.userAgent.match(/Version\/(\d+)/);return(e=e||navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(e[1],10):null}function Nt(e){return(navigator.userAgent||"").includes(e)}function Pt(){return Rt||(Mt=Mt||new ze(function(){Rt=null}),(Rt=document.getElementsByTagName("video")[0]||document.getElementsByTagName("audio")[0])||(Rt=document.createElement("video")),Mt.R(1),Rt)}var Mt=null,Rt=null;function Lt(t,e){var i=this;e=void 0===e?1:e,this.F=t,this.w=new Set,this.j=this.s=null,this.O=!1,this.K=0,this.a=null,this.l=new pt,this.b=new Map,this.B=[],this.v=new Me,this.f=null,this.g=function(e){i.v.reject(e),t.onError(e)},this.na=new Map,this.Y=new Map,this.L=new ze(function(){return t=(e=i).na,(n=e.Y).clear(),t.forEach(function(e,t){return n.set(t,e)}),(t=Array.from(n.values())).length&&t.every(function(e){return"expired"==e})&&e.g(new de(2,6,6014)),void e.F.Wc(Et(n));var e,t,n}),this.c=!1,this.ia=new Me,this.H=!1,this.J=[],this.ka=!1,this.Z=new ze(function(){var r;(r=i).b.forEach(function(e,t){var n=e.Qd,i=t.expiration;isNaN(i)&&(i=1/0),i!=n&&(r.F.onExpirationUpdated(t.sessionId,i),e.Qd=i)})}).Ia(e),this.v.catch(function(){})}function Ut(e,t,n){return e.B=n,e.H=0<n.length,_t(e,t)}function _t(e,t){var n=function(e){if(0==(e=yt(e.f.clearKeys)).size)return null;var n=[],i=[];e.forEach(function(e,t){t=je.vd(t),e=je.vd(e),t={kty:"oct",kid:je.gd(t,!1),k:je.gd(e,!1)};n.push(t),i.push(t.kid)}),e=JSON.stringify({keys:n});var t=JSON.stringify({kids:i});return t=[{initData:new Uint8Array(_e(t)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",licenseServerUri:"data:application/json;base64,"+d.btoa(e),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:t,keyIds:[]}}(e);if(n)for(var i=B(t),r=i.next();!r.done;r=i.next())r.value.drmInfos=[n];for((n=t.some(function(e){return 0<e.drmInfos.length}))||function(e,t){var n=[];t.forEach(function(e,t){n.push({keySystem:t,licenseServerUri:e,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:[],keyIds:[]})});for(var i=B(e),r=i.next();!r.done;r=i.next())r.value.drmInfos=n}(t,r=yt(e.f.servers)),r=(i=B(t)).next();!r.done;r=i.next())for(var a=(r=B(r.value.drmInfos)).next();!a.done;a=r.next())Zt(a.value,yt(e.f.servers),yt(e.f.advanced||{}));return(r=function(e,t){for(var n=new Set,i=B(t),r=i.next();!r.done;r=i.next()){var a=B(r.value.drmInfos);for(r=a.next();!r.done;r=a.next())n.add(r.value)}for(i=B(n),r=i.next();!r.done;r=i.next())Zt(r.value,yt(e.f.servers),yt(e.f.advanced||{}));a=e.H?"required":"optional";var o=e.H?["persistent-license"]:["temporary"];for(i=new Map,n=B(n),r=n.next();!r.done;r=n.next())r=r.value,i.set(r.keySystem,{audioCapabilities:[],videoCapabilities:[],distinctiveIdentifier:"optional",persistentState:a,sessionTypes:o,label:r.keySystem,drmInfos:[]});for(n=B(t),r=n.next();!r.done;r=n.next()){r=r.value,a=r.audio,o=r.video;var s=a?Gt(a):"",u=o?Gt(o):"",c=B(r.drmInfos);for(r=c.next();!r.done;r=c.next()){r=r.value;var l=i.get(r.keySystem);l.drmInfos.push(r),r.distinctiveIdentifierRequired&&(l.distinctiveIdentifier="required"),r.persistentStateRequired&&(l.persistentState="required"),a&&(l.audioCapabilities.push({robustness:r.audioRobustness||"",contentType:s}),"ac-3"==a.codecs.toLowerCase()&&kt()&&l.audioCapabilities.push({robustness:r.audioRobustness||"",contentType:wt(a.mimeType,"ec-3")})),o&&l.videoCapabilities.push({robustness:r.videoRobustness||"",contentType:u})}}return i}(e,t)).size?(r=Vt(e,r),n?r:r.catch(function(){})):(e.O=!0,Promise.resolve())}function Ot(n){return G(function e(){var t;return q(e,function(e){switch(e.o){case 1:if(n.s&&n.a&&n.a.serverCertificate&&n.a.serverCertificate.length)return z(e,3),V(e,n.s.setServerCertificate(n.a.serverCertificate),5);e.C(0);break;case 5:e.A||X.u("Server certificates are not supported by the key system.  The server certificate has been ignored."),H(e,0);break;case 3:return t=W(e),e.return(Promise.reject(new de(2,6,6004,t.message)))}})})}function Dt(t){var e=t.a?t.a.initData:[];return e.forEach(function(e){return Ft(t,e.initDataType,e.initData)}),t.B.forEach(function(e){return zt(t,e)}),e.length||t.B.length||t.v.resolve(),t.v}function Ft(e,t,n){for(var i=e.b.values(),r=(i=B(i)).next();!r.done;r=i.next())if(je.Xa(n,r.value.initData)&&!Nt("Tizen 2"))return void X.debug("Ignoring duplicate init data.");!function(n,t,e){try{var i;i=n.H?(X.I("Creating new persistent session"),n.s.createSession("persistent-license")):(X.I("Creating new temporary session"),n.s.createSession())}catch(e){return n.g(new de(2,6,6005,e.message))}n.l.m(i,"message",n.cf.bind(n)),n.l.m(i,"keystatuseschange",n.$e.bind(n)),n.b.set(i,{initData:e,loaded:!1,Qd:1/0,Va:null});try{e=n.f.initDataTransform(e,n.a)}catch(e){return(t=e)instanceof de||(t=new de(2,6,6016,e)),n.g(t)}i.generateRequest(t,e).catch(function(e){var t;n.c||(n.b.delete(i),e.errorCode&&e.errorCode.systemCode&&((t=e.errorCode.systemCode)<0&&(t+=Math.pow(2,32)),t="0x"+t.toString(16)),n.g(new de(2,6,6006,e.message,e,t)))})}(e,t,n)}function jt(e){return e?e.keySystem:""}function Kt(e,t){if(navigator.userAgent.match(/Edge\//))return 1;if(t=t.toLowerCase(),kt()&&t.includes('codecs="ac-3"')){var n=t.replace("ac-3","ec-3");return e.w.has(t)||e.w.has(n)}return e.w.has(t)}function Bt(e){return e=K(e=e.b.keys(),function(e){return e.sessionId}),Array.from(e)}function Gt(e){var t=wt(e.mimeType,e.codecs);return Be(t)?Ge(e.type,t):t}function Vt(e,h){if(1==h.size&&h.has(""))return Promise.reject(new de(2,6,6e3));for(var t=B(h.values()),n=t.next();!n.done;n=t.next())0==(n=n.value).audioCapabilities.length&&delete n.audioCapabilities,0==n.videoCapabilities.length&&delete n.videoCapabilities;var r=t=new Me;return[!0,!1].forEach(function(n){var i=this;h.forEach(function(e,t){e.drmInfos.some(function(e){return!!e.licenseServerUri})==n&&(r=r.catch(function(){if(!this.c)return navigator.requestMediaKeySystemAccess(t,[e])}.bind(i)))})}.bind(e)),r=(r=r.catch(function(){return Promise.reject(new de(2,6,6001))})).then(function(e){if(this.c)return Promise.reject();this.w.clear();for(var t=(i=e.getConfiguration()).videoCapabilities||[],n=B(i.audioCapabilities||[]),i=n.next();!i.done;i=n.next())this.w.add(i.value.contentType.toLowerCase());for(i=(t=B(t)).next();!i.done;i=t.next())this.w.add(i.value.contentType.toLowerCase());t=e.keySystem,i=h.get(e.keySystem),n=[];var r,a,o,s,u,c=[],l=[],d=[];return r=i.drmInfos,a=n,o=c,s=l,u=d,r.forEach(function(t){if(a.includes(t.licenseServerUri)||a.push(t.licenseServerUri),t.serverCertificate&&(o.some(function(e){return je.Xa(e,t.serverCertificate)})||o.push(t.serverCertificate)),t.initData&&t.initData.forEach(function(t){s.some(function(e){return!(!e.keyId||e.keyId!=t.keyId)||e.initDataType==t.initDataType&&je.Xa(e.initData,t.initData)})||s.push(t)}),t.keyIds)for(var e=0;e<t.keyIds.length;++e)u.includes(t.keyIds[e])||u.push(t.keyIds[e])}),1<c.length&&X.u("Multiple unique server certificates found! Only the first will be used."),1<n.length&&X.u("Multiple unique license server URIs found! Only the first will be used."),this.a={keySystem:t,licenseServerUri:n[0],distinctiveIdentifierRequired:"required"==i.distinctiveIdentifier,persistentStateRequired:"required"==i.persistentState,audioRobustness:(i.audioCapabilities?i.audioCapabilities[0].robustness:"")||"",videoRobustness:(i.videoCapabilities?i.videoCapabilities[0].robustness:"")||"",serverCertificate:c[0],initData:l,keyIds:d},this.a.licenseServerUri?e.createMediaKeys():Promise.reject(new de(2,6,6012,this.a.keySystem))}.bind(e)).then(function(e){if(this.c)return Promise.reject();X.info("Created MediaKeys object for key system",this.a.keySystem),this.s=e,this.O=!0}.bind(e)).catch(function(e){if(!this.c)return this.a=null,this.w.clear(),e instanceof de?Promise.reject(e):Promise.reject(new de(2,6,6002,e.message))}.bind(e)),t.reject(),r}function zt(t,n){try{X.I("Attempting to load an offline session",n);var i=t.s.createSession("persistent-license")}catch(e){var r=new de(2,6,6005,e.message);return t.g(r),Promise.reject(r)}t.l.m(i,"message",t.cf.bind(t)),t.l.m(i,"keystatuseschange",t.$e.bind(t));var a={initData:null,loaded:!1,Qd:1/0,Va:null};return t.b.set(i,a),i.load(n).then(function(e){return this.c?Promise.reject():(X.N("Loaded offline session",n,e),e?(a.loaded=!0,Jt(this)&&this.v.resolve(),i):(this.b.delete(i),void this.g(new de(2,6,6013))))}.bind(t),function(e){this.c||(this.b.delete(i),this.g(new de(2,6,6005,e.message)))}.bind(t))}function Ht(e,t){return jt(t).startsWith("com.apple.fps")&&(t=t.serverCertificate,e=bt(e,vt(e),t)),e}function Wt(e,t){var n=t.target;X.I("Sending license request for session",n.sessionId,"of type",t.messageType);var i=e.b.get(n),r=e.a.licenseServerUri,a=e.f.advanced[e.a.keySystem];"individualization-request"==t.messageType&&a&&a.individualizationServer&&(r=a.individualizationServer),(r=lt([r],e.f.retryParameters)).body=t.message,r.method="POST",r.licenseRequestType=t.messageType,r.sessionId=n.sessionId,"com.microsoft.playready"!=e.a.keySystem&&"com.chromecast.playready"!=e.a.keySystem||function(e){var t=Le(e.body,!0,!0);if(t.includes("PlayReadyKeyMessage")){X.debug("Unwrapping PlayReady request.");for(var n=(t=(new DOMParser).parseFromString(t,"application/xml")).getElementsByTagName("HttpHeader"),i=0;i<n.length;++i)e.headers[n[i].getElementsByTagName("name")[0].textContent]=n[i].getElementsByTagName("value")[0].textContent;e.body=je.Za(t.getElementsByTagName("Challenge")[0].textContent).buffer}else X.debug("PlayReady request is already unwrapped."),e.headers["Content-Type"]="text/xml; charset=utf-8"}(r),e.a.keySystem.startsWith("com.apple.fps")&&e.f.fairPlayTransform&&(a=r,t=new Uint8Array(a.body),t="spc="+je.gd(t),a.headers["Content-Type"]="application/x-www-form-urlencoded",a.body=_e(t));var o=Date.now();e.F.Zb.request(2,r).promise.then(function(e){return this.c?Promise.reject():(this.a.keySystem.startsWith("com.apple.fps")&&this.f.fairPlayTransform&&function(e){try{var t=Re(e.data)}catch(e){return}"<ckc>"===(t=t.trim()).substr(0,5)&&"</ckc>"===t.substr(-6)&&(t=t.slice(5,-6));try{t=JSON.parse(t).ckc}catch(e){}e.data=je.Za(t).buffer}(e),this.K+=(Date.now()-o)/1e3,X.I("Updating session",n.sessionId),n.update(e.data).then(function(){var e=this;this.F.onEvent(new D("drmsessionupdate")),i&&(i.Va&&i.Va.resolve(),new ze(function(){i.loaded=!0,Jt(e)&&e.v.resolve()}).R(en))}.bind(this)))}.bind(e),function(e){this.c||(e=new de(2,6,6007,e),this.g(e),i&&i.Va&&i.Va.reject(e))}.bind(e)).catch(function(e){this.c||(e=new de(2,6,6008,e.message),this.g(e),i&&i.Va&&i.Va.reject(e))}.bind(e))}function qt(){var r=[{videoCapabilities:e=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],persistentState:"required",sessionTypes:["persistent-license"]},{videoCapabilities:e}],a=new Map,e="org.w3.clearkey com.widevine.alpha com.microsoft.playready com.apple.fps.3_0 com.apple.fps.2_0 com.apple.fps.1_0 com.apple.fps com.adobe.primetime".split(" ").map(function(e){return i=e,G(function e(){var t,n;return q(e,function(e){switch(e.o){case 1:return z(e,2),V(e,navigator.requestMediaKeySystemAccess(i,r),4);case 4:return t=e.A,n=!!(n=t.getConfiguration().sessionTypes)&&n.includes("persistent-license"),Nt("Tizen 3")&&(n=!1),a.set(i,{persistentState:n}),V(e,t.createMediaKeys(),5);case 5:H(e,0);break;case 2:W(e),a.set(i,null),x(e)}})});var i});return Promise.all(e).then(function(){return Et(a)})}function Xt(e,t){var n=t.audio,i=t.video;if(n&&n.encrypted&&!Kt(e,n=Gt(n))||i&&i.encrypted&&!Kt(e,i=Gt(i)))return!1;var r=jt(e.a);return 0==t.drmInfos.length||t.drmInfos.some(function(e){return e.keySystem==r})}function Yt(e,t){if(!e.length)return t;if(!t.length)return e;for(var n=[],i=0;i<e.length;i++)for(var r=0;r<t.length;r++)if(e[i].keySystem==t[r].keySystem){var a=e[i],r=t[r],o=[];o=(o=o.concat(a.initData||[])).concat(r.initData||[]);var s=[];s=(s=s.concat(a.keyIds)).concat(r.keyIds),n.push({keySystem:a.keySystem,licenseServerUri:a.licenseServerUri||r.licenseServerUri,distinctiveIdentifierRequired:a.distinctiveIdentifierRequired||r.distinctiveIdentifierRequired,persistentStateRequired:a.persistentStateRequired||r.persistentStateRequired,videoRobustness:a.videoRobustness||r.videoRobustness,audioRobustness:a.audioRobustness||r.audioRobustness,serverCertificate:a.serverCertificate||r.serverCertificate,initData:o,keyIds:s});break}return n}function $t(n){return G(function e(){var t;return q(e,function(e){if(1===e.o)return t=Array.from(n.b.keys()),n.b.clear(),V(e,Promise.all(t.map(function(t){return G(function e(){return q(e,function(e){switch(e.o){case 1:return X.I("Closing session",t.sessionId),z(e,2),V(e,(n=t,G(function e(){var t;return q(e,function(e){switch(e.o){case 1:return t=new Promise(function(e,t){new ze(t).R(Qt)}),z(e,2),V(e,Promise.race([Promise.all([n.close(),n.closed]),t]),4);case 4:H(e,0);break;case 2:W(e),X.u("Timeout waiting for session close"),x(e)}})})),4);case 4:H(e,0);break;case 2:W(e),x(e)}var n})})})),0)})})}function Jt(e){return Y(e=e.b.values(),function(e){return e.loaded})}function Zt(e,t,n){!e.keySystem||"org.w3.clearkey"==e.keySystem&&e.licenseServerUri||(t.size&&(t=t.get(e.keySystem)||"",e.licenseServerUri=t),e.keyIds||(e.keyIds=[]),(n=n.get(e.keySystem))&&(e.distinctiveIdentifierRequired||(e.distinctiveIdentifierRequired=n.distinctiveIdentifierRequired),e.persistentStateRequired||(e.persistentStateRequired=n.persistentStateRequired),e.videoRobustness||(e.videoRobustness=n.videoRobustness),e.audioRobustness||(e.audioRobustness=n.audioRobustness),e.serverCertificate||(e.serverCertificate=n.serverCertificate)),d.cast&&d.cast.__platform__&&"com.microsoft.playready"==e.keySystem&&(e.keySystem="com.chromecast.playready"))}(e=Lt.prototype).destroy=function(){var n=this;return G(function e(){return q(e,function(e){switch(e.o){case 1:return n.c?V(e,n.ia,0):(n.c=!0,V(e,(t=n,G(function e(){return q(e,function(e){switch(e.o){case 1:return t.l.release(),t.l=null,t.v.reject(),t.Z.stop(),t.Z=null,t.L.stop(),t.L=null,V(e,$t(t),2);case 2:if(t.j)return z(e,4),V(e,t.j.setMediaKeys(null),6);e.C(3);break;case 6:H(e,5);break;case 4:W(e);case 5:t.j=null;case 3:t.a=null,t.w.clear(),t.s=null,t.B=[],t.f=null,t.g=null,t.F=null,x(e)}})})),4));case 4:n.ia.resolve(),e.C(0)}var t})})},e.configure=function(e){this.f=e},e.kc=function(e){var t=this;if(!this.s)return this.l.Ha(e,"encrypted",function(){t.g(new de(2,6,6010))}),Promise.resolve();this.j=e,this.l.Ha(this.j,"play",function(){for(var e=0;e<t.J.length;e++)Wt(t,t.J[e]);t.ka=!0,t.J=[]}),"webkitCurrentPlaybackTargetIsWireless"in this.j&&this.l.m(this.j,"webkitcurrentplaybacktargetiswirelesschanged",function(){return $t(t)}),e=(e=this.j.setMediaKeys(this.s)).catch(function(e){return Promise.reject(new de(2,6,6003,e.message))});var n=Ot(this);return Promise.all([e,n]).then(function(){return t.c?Promise.reject():(Dt(t),void(t.a.initData.length||t.B.length||t.l.m(t.j,"encrypted",function(e){return Ft(t,e.initDataType,new Uint8Array(e.initData))})))}).catch(function(e){if(!t.c)return Promise.reject(e)})},e.nc=function(){for(var e=1/0,t=this.b.keys(),n=(t=B(t)).next();!n.done;n=t.next())n=n.value,isNaN(n.expiration)||(e=Math.min(e,n.expiration));return e},e.cf=function(e){this.j&&this.f.delayLicenseRequestUntilPlayed&&this.j.paused&&!this.ka?this.J.push(e):Wt(this,e)},e.$e=function(e){e=e.target,X.N("Key status changed for session",e.sessionId);var o=this.b.get(e),s=!1;e.keyStatuses.forEach(function(e,t){var n,i,r,a;"string"==typeof t&&(n=t,t=e,e=n),"com.microsoft.playready"==this.a.keySystem&&16==t.byteLength&&(Nt("Trident/")||navigator.userAgent.match(/Edge?\//))&&(i=(n=new DataView(t)).getUint32(0,!0),r=n.getUint16(4,!0),a=n.getUint16(6,!0),n.setUint32(0,i,!1),n.setUint16(4,r,!1),n.setUint16(6,a,!1)),"com.microsoft.playready"==this.a.keySystem&&"status-pending"==e&&(e="usable"),"status-pending"!=e&&(o.loaded=!0),"expired"==e&&(s=!0),n=je.hd(new Uint8Array(t)),this.na.set(n,e)}.bind(this));var t=e.expiration-Date.now();(t<0||s&&t<1e3)&&o&&!o.Va&&(X.debug("Session has expired",e.sessionId),this.b.delete(e),e.close().catch(function(){})),Jt(this)&&(this.v.resolve(),this.L.R(tn))};var Qt=1,en=5,tn=.5;function nn(){this.a=new muxjs.mp4.CaptionParser,this.g=[],this.f={}}function rn(){}function an(e){return e&&!(1==e.length&&e.end(0)-e.start(0)<1e-6)&&e.length?e.end(e.length-1):null}function on(e,t,n){return n=void 0===n?0:n,!(!e||!e.length||1==e.length&&e.end(0)-e.start(0)<1e-6||t>e.end(e.length-1))&&t+n>=e.start(0)}function sn(e,t){if(!e||!e.length||1==e.length&&e.end(0)-e.start(0)<1e-6)return 0;for(var n=0,i=e.length-1;0<=i&&e.end(i)>t;--i)n+=e.end(i)-Math.max(e.start(i),t);return n}function un(e){if(!e)return[];for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}function cn(e,t,n){this.startTime=e,this.direction=gn,this.endTime=t,this.payload=n,this.region=new An,this.position=null,this.positionAlign=dn,this.size=0,this.textAlign=hn,this.writingMode=vn,this.lineInterpretation=bn,this.line=null,this.lineHeight="",this.lineAlign=yn,this.displayAlign=pn,this.fontSize=this.backgroundImage=this.backgroundColor=this.color="",this.fontWeight=wn,this.fontStyle=Tn,this.fontFamily="",this.textDecoration=[],this.wrapLine=!0,this.id="",this.nestedCues=[],this.spacer=!1}function ln(e,t){if(e.startTime!=t.startTime||e.endTime!=t.endTime||e.payload!=t.payload)return!1;for(var n in e)if("startTime"!=n&&"endTime"!=n&&"payload"!=n)if("nestedCues"==n){if(!rt(e.nestedCues,t.nestedCues,ln))return!1}else if("region"==n||"cellResolution"==n){for(var i in e[n])if(e[n][i]!=t[n][i])return!1}else if(Array.isArray(e[n])){if(!rt(e[n],t[n]))return!1}else if(e[n]!=t[n])return!1;return!0}nn.prototype.init=function(e){var t=muxjs.mp4.probe;e=new Uint8Array(e),this.g=t.videoTrackIds(e),this.f=t.timescale(e),this.a.init()},nn.prototype.b=function(e,t){e=new Uint8Array(e);(e=this.a.parse(e,this.g,this.f))&&e.captions&&t(e.captions),this.a.clearParsedCaptions()},nn.prototype.c=function(){this.a.resetCaptionStream()},rn.prototype.init=function(){},rn.prototype.b=function(){},rn.prototype.c=function(){},_("shaka.text.Cue",cn),cn.prototype.clone=function(){var e,t=new cn(0,0,"");for(e in this)t[e]=this[e],t[e]&&t[e].constructor==Array&&(t[e]=t[e].slice());return t};var dn="auto";cn.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:dn};var hn="center",fn={LEFT:"left",RIGHT:"right",CENTER:hn,START:"start",END:"end"};cn.textAlign=fn;var pn="after",mn={BEFORE:"before",CENTER:"center",AFTER:pn};cn.displayAlign=mn;var gn="ltr";cn.direction={HORIZONTAL_LEFT_TO_RIGHT:gn,HORIZONTAL_RIGHT_TO_LEFT:"rtl"};var vn="horizontal-tb";cn.writingMode={HORIZONTAL_TOP_TO_BOTTOM:vn,VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"};var bn=0;cn.lineInterpretation={LINE_NUMBER:bn,PERCENTAGE:1};var yn="start",En={CENTER:"center",START:yn,END:"end"};cn.lineAlign=En;var wn=400;cn.fontWeight={NORMAL:wn,BOLD:700};var Tn="normal",Sn={NORMAL:Tn,ITALIC:"italic",OBLIQUE:"oblique"};function An(){this.id="",this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0,this.height=this.width=100,this.viewportAnchorUnits=this.widthUnits=this.heightUnits=In,this.scroll=kn}cn.fontStyle=Sn,cn.textDecoration={UNDERLINE:"underline",LINE_THROUGH:"lineThrough",OVERLINE:"overline"},_("shaka.text.CueRegion",An);var In=1;An.units={PX:0,PERCENTAGE:In,LINES:2};var kn="";function Cn(e){this.g=null,this.c=e,this.f=this.v=0,this.j=1/0,this.b=this.a=null,this.s="",this.l=new Map}An.scrollMode={NONE:kn,UP:"up"};var xn={};function Nn(e){return!!(xn[e]||d.muxjs&&"application/cea-608"==e)}function Pn(e,t){"application/cea-608"!=t&&(e.g=new xn[t])}function Mn(e,t,n,i,r){for(var a=n+" "+i,o=new Map,s=(t=B(t)).next();!s.done;s=t.next()){var u=s.value,s=u.stream;o.has(s)||o.set(s,new Map),o.get(s).has(a)||o.get(s).set(a,[]),u.startTime+=r,u.endTime+=r,u.startTime>=e.f&&u.startTime<e.j&&(u=new cn(u.startTime,u.endTime,u.text),o.get(s).get(a).push(u),s==e.s&&e.c.append([u]))}for(a=(r=B(o.keys())).next();!a.done;a=r.next())for(a=a.value,e.l.has(a)||e.l.set(a,new Map),s=(t=B(o.get(a).keys())).next();!s.done;s=t.next())s=s.value,u=o.get(a).get(s),e.l.get(a).set(s,u);e.a=null==e.a?Math.max(n,e.f):Math.min(e.a,Math.max(n,e.f)),e.b=Math.max(e.b,Math.min(i,e.j))}function Rn(e,t,n){var i,r;this.f=e,this.g=n,this.b={},this.a=null,this.c={},this.l=new pt,this.B=!1,this.s={},this.v=t,this.w=new Me,this.j=(r=(i=this).w,t=new MediaSource,i.l.Ha(t,"sourceopen",function(){URL.revokeObjectURL(i.F),r.resolve()}),i.F=Ln(t),i.f.src=i.F,t),this.F=""}_("shaka.text.TextEngine.registerParser",function(e,t){xn[e]=t}),_("shaka.text.TextEngine.unregisterParser",function(e){delete xn[e]}),Cn.prototype.destroy=function(){return this.c=this.g=null,this.l.clear(),Promise.resolve()},Cn.prototype.Rc=function(e){try{return this.g.parseMedia(new Uint8Array(e),{periodStart:0,segmentStart:null,segmentEnd:0})[0].startTime}catch(e){throw new de(2,2,2009,e)}},Cn.prototype.remove=function(e,t){return Promise.resolve().then(function(){!this.c||!this.c.remove(e,t)||null==this.a||t<=this.a||e>=this.b||(e<=this.a&&t>=this.b?this.a=this.b=null:e<=this.a&&t<this.b?this.a=t:e>this.a&&t>=this.b&&(this.b=e))}.bind(this))};var Ln=d.URL.createObjectURL;function Un(e){var n,i,t=wt(e.mimeType,e.codecs),r=(i=[(n=e).mimeType],St.forEach(function(e,t){t=n[t];t&&i.push(e+'="'+t+'"')}),i.join(";"));return Nn(t)||MediaSource.isTypeSupported(r)||Be(t,e.type)}function _n(e,t){e.a||(e.a=new Cn(e.g)),Pn(e.a,t)}function On(e){return!e.j||"ended"==e.j.readyState}function Dn(e,t){var n="text"==t?e.a.a:!(n=jn(e,t))||1==n.length&&n.end(0)-n.start(0)<1e-6?null:1==n.length&&n.start(0)<0?0:n.length?n.start(0):null;return n}function Fn(e,t){return"text"==t?e.a.b:an(jn(e,t))}function jn(t,n){try{return t.b[n].buffered}catch(e){return n in t.b&&X.error("failed to get buffered range for "+n,e),null}}function Kn(t,n,e,i,r,a){return"text"==n?(l=t.a,o=e,s=i,u=r,Promise.resolve().then(function(){var e;this.g&&this.c&&(null==s||null==u?this.g.parseInit(new Uint8Array(o)):(e={periodStart:this.v,segmentStart:s,segmentEnd:u},e=this.g.parseMedia(new Uint8Array(o),e).filter(function(e){return e.startTime>=this.f&&e.startTime<this.j}.bind(this)),this.c.append(e),null==this.a&&(this.a=Math.max(s,this.f)),this.b=Math.min(u,this.j)))}.bind(l))):t.s[n]?(c=t.s[n],l=e,c.f=!0,c.b=new Me,c.g=[],c.c=[],l=new Uint8Array(l),c.a.push(l),c.a.flush(),c.f&&c.b.reject(new de(2,3,3018)),c.b.then(function(e){return this.a||_n(this,"text/vtt"),e.captions&&e.captions.length&&Mn(this.a,e.captions,i,r,this.b.video.timestampOffset),Vn(this,n,this.wf.bind(this,n,e.data.buffer))}.bind(t))):(a&&d.muxjs&&(t.a||_n(t,"text/vtt"),null==i&&null==r?t.v.init(e):t.v.b(e,function(e){e.length&&Mn(t.a,e,i,r,t.b.video.timestampOffset)})),Vn(t,n,t.wf.bind(t,n,e)));var o,s,u,c,l}function Bn(e,t){var n=Fn(e,"video")||0;!function(e,t,n){if(e.s=t,t=e.l.get(t))for(var i=B(t.keys()),r=i.next();!r.done;r=i.next())(r=t.get(r.value).filter(function(e){return e.endTime<=n}))&&e.c.append(r)}(e.a,t,n)}function Gn(e,t){return"text"==t?e.a?(e.v.c(),e.a.remove(0,1/0)):Promise.resolve():Vn(e,t,e.xf.bind(e,t,0,e.j.duration))}function Vn(t,n,i){if(t.B)return Promise.reject();if(i={start:i,p:new Me},t.c[n].push(i),1==t.c[n].length)try{i.start()}catch(e){"QuotaExceededError"==e.name?i.p.reject(new de(2,3,3017,n)):i.p.reject(new de(2,3,3015,e)),Hn(t,n)}return i.p}function zn(e,n){if(e.B)return Promise.reject();var t,i=[];for(t in e.b){var r=new Me,a={start:function(e){e.resolve()}.bind(null,r),p:r};e.c[t].push(a),i.push(r),1==e.c[t].length&&a.start()}return Promise.all(i).then(function(){try{n()}catch(e){var t=Promise.reject(new de(2,3,3015,e))}for(var e in this.b)Hn(this,e);return t}.bind(e),function(e){throw e}.bind(e))}function Hn(t,n){t.c[n].shift();var i=t.c[n][0];if(i)try{i.start()}catch(e){i.p.reject(new de(2,3,3015,e)),Hn(t,n)}}(e=Rn.prototype).destroy=function(){var e=this;this.B=!0;var t,n,i=[];for(t in this.c){var r=this.c[t],a=r[0];for(this.c[t]=r.slice(0,1),a&&i.push(a.p.catch(ke.Uc)),a=1;a<r.length;++a)r[a].p.reject()}for(n in this.a&&i.push(this.a.destroy()),this.g&&i.push(this.g.destroy()),this.s)i.push(this.s[n].destroy());return Promise.all(i).then(function(){e.l&&(e.l.release(),e.l=null),e.f&&(e.f.removeAttribute("src"),e.f.load(),e.f=null),e.j=null,e.a=null,e.g=null,e.b={},e.s={},e.v=null,e.c={}})},e.init=function(t,i){var r=this;return G(function e(){var n;return q(e,function(e){switch(e.o){case 1:return n=Ne,V(e,r.w,2);case 2:t.forEach(function(e,t){e=wt(e.mimeType,e.codecs);t==n.Oa?_n(r,e):(!i&&MediaSource.isTypeSupported(e)||!Be(e,t)||(r.s[t]=new Ke,e=Ge(t,e)),e=r.j.addSourceBuffer(e),r.l.m(e,"error",r.wh.bind(r,t)),r.l.m(e,"updateend",r.bc.bind(r,t)),r.b[t]=e,r.c[t]=[])}),x(e)}})})},e.wd=function(e){var t,n;e.total=un(this.f.buffered),e.audio=un(jn(this,"audio")),e.video=un(jn(this,"video")),e.text=[],this.a&&(t=this.a.a,n=this.a.b,null!=t&&null!=n&&e.text.push({start:t,end:n}))},e.remove=function(e,t,n){return"text"==e?this.a.remove(t,n):Vn(this,e,this.xf.bind(this,e,t,n))},e.flush=function(e){return"text"==e?Promise.resolve():Vn(this,e,this.Uf.bind(this,e))},e.endOfStream=function(e){return zn(this,function(){On(this)||(e?this.j.endOfStream(e):this.j.endOfStream())}.bind(this))},e.Ua=function(e){return zn(this,function(){this.j.duration=e}.bind(this))},e.ra=function(){return this.j.duration},e.wf=function(e,t){this.b[e].appendBuffer(t)},e.xf=function(e,t,n){n<=t?this.bc(e):this.b[e].remove(t,n)},e.If=function(e){var t=this.b[e].appendWindowStart,n=this.b[e].appendWindowEnd;this.b[e].abort(),this.b[e].appendWindowStart=t,this.b[e].appendWindowEnd=n,this.bc(e)},e.Uf=function(e){this.f.currentTime-=.001,this.bc(e)},e.vh=function(e,t){t<0&&(t+=.001),this.b[e].timestampOffset=t,this.bc(e)},e.rh=function(e,t,n){this.b[e].appendWindowStart=0,this.b[e].appendWindowEnd=n,this.b[e].appendWindowStart=t,this.bc(e)},e.wh=function(e){this.c[e][0].p.reject(new de(2,3,3014,this.f.error?this.f.error.code:0))},e.bc=function(e){var t=this.c[e][0];t&&(t.p.resolve(),Hn(this,e))};var Wn={De:function(e,t){function n(e){var t="";e.video&&(t=Tt(e.video.codecs)[0]);var n="";return e.audio&&(n=Tt(e.audio.codecs)[0]),t+"-"+n}for(var i=e.periods.reduce(function(e,t){return e.concat(t.variants)},[]),i=Wn.Ie(i,t),r=new F,a=(i=B(i)).next();!a.done;a=i.next()){var o=n(a=a.value);r.push(o,a)}var s=null,u=1/0;for(r.forEach(function(e,t){for(var n=0,i=0,r=B(t),a=r.next();!a.done;a=r.next())n+=a.value.bandwidth||0,++i;n/=i,X.debug("codecs",e,"avg bandwidth",n),n<u&&(s=e,u=n)}),i=(r=B(e.periods)).next();!i.done;i=r.next())(i=i.value).variants=i.variants.filter(function(e){return n(e)==s||(X.debug("Dropping Variant (better codec available)",e),!1)})},Jd:function(e,t,n){function i(e,t,n){return t<=e&&e<=n}var r=e.video;return!(r&&r.width&&r.height&&(!i(r.width,t.minWidth,Math.min(t.maxWidth,n.width))||!i(r.height,t.minHeight,Math.min(t.maxHeight,n.height))||!i(r.width*r.height,t.minPixels,t.maxPixels))||e&&e.video&&e.video.frameRate&&!i(e.video.frameRate,t.minFrameRate,t.maxFrameRate)||!i(e.bandwidth,t.minBandwidth,t.maxBandwidth))},we:function(e,n,i){var r=!1;return e.forEach(function(e){var t=e.allowedByApplication;e.allowedByApplication=Wn.Jd(e,n,i),t!=e.allowedByApplication&&(r=!0)}),r},filterNewPeriod:function(n,i,r,e){e.variants=e.variants.filter(function(e){if(n&&n.O&&!Xt(n,e))return X.debug("Dropping variant - not compatible with key system",e),!1;var t=e.audio;return e=e.video,t&&!Un(t)?(X.debug("Dropping variant - audio not compatible with platform",Wn.Tb(t)),!1):e&&!Un(e)?(X.debug("Dropping variant - video not compatible with platform",Wn.Tb(e)),!1):t&&i&&!Wn.xe(t,i)?(X.debug("Droping variant - not compatible with active audio","active audio",Wn.Tb(i),"variant.audio",Wn.Tb(t)),!1):!(e&&r&&!Wn.xe(e,r))||(X.debug("Droping variant - not compatible with active video","active video",Wn.Tb(r),"variant.video",Wn.Tb(e)),!1)}),e.textStreams=e.textStreams.filter(function(e){var t=Nn(wt(e.mimeType,e.codecs));return t||X.debug("Dropping text stream. Is not supported by the platform.",e),t})},xe:function(e,t){return e.mimeType==t.mimeType&&e.codecs.split(".")[0]==t.codecs.split(".")[0]},ue:function(e){var t=e.audio,n=e.video,i=t?t.codecs:null,r=n?n.codecs:null,a=[];r&&a.push(r),i&&a.push(i);var o=[];n&&o.push(n.mimeType),t&&o.push(t.mimeType),o=o[0]||null;var s=[];t&&s.push(t.kind),n&&s.push(n.kind),s=s[0]||null;var u=new Set;return t&&t.roles.forEach(function(e){return u.add(e)}),n&&n.roles.forEach(function(e){return u.add(e)}),e={id:e.id,active:!1,type:"variant",bandwidth:e.bandwidth,language:e.language,label:null,kind:s,width:null,height:null,frameRate:null,pixelAspectRatio:null,mimeType:o,codecs:a.join(", "),audioCodec:i,videoCodec:r,primary:e.primary,roles:Array.from(u),audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null},n&&(e.videoId=n.id,e.originalVideoId=n.originalId,e.width=n.width||null,e.height=n.height||null,e.frameRate=n.frameRate||null,e.pixelAspectRatio=n.pixelAspectRatio||null,e.videoBandwidth=n.bandwidth||null),t&&(e.audioId=t.id,e.originalAudioId=t.originalId,e.channelsCount=t.channelsCount,e.audioSamplingRate=t.audioSamplingRate,e.audioBandwidth=t.bandwidth||null,e.label=t.label,e.audioRoles=t.roles),e},fd:function(e){return{id:e.id,active:!1,type:"text",bandwidth:0,language:e.language,label:e.label,kind:e.kind||null,width:null,height:null,frameRate:null,pixelAspectRatio:null,mimeType:e.mimeType,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:e.primary,roles:e.roles,audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:e.originalId}},Bd:function(e){return e.__shaka_id||(e.__shaka_id=Wn.Kg++),e.__shaka_id},Kg:0,Bg:function(e){var t=Wn.Oe(e);return t.active="disabled"!=e.mode,t.type="text",t.originalTextId=e.id,"captions"==e.kind&&(t.mimeType="application/cea-608"),e.kind&&(t.roles=[e.kind]),t},Ne:function(e){var t=Wn.Oe(e);return t.active=e.enabled,t.type="variant",t.originalAudioId=e.id,"main"==e.kind&&(t.primary=!0),e.kind&&(t.roles=[e.kind],t.audioRoles=[e.kind]),t},Oe:function(e){return{id:Wn.Bd(e),active:!1,type:"",bandwidth:0,language:Q(e.language),label:e.label,kind:e.kind,width:null,height:null,frameRate:null,pixelAspectRatio:null,mimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null}},Xb:function(e){return e.allowedByApplication&&e.allowedByKeySystem},qg:function(e){return e.filter(function(e){return Wn.Xb(e)})},Ie:function(e,t){for(var n=e.filter(function(e){return e.audio&&e.audio.channelsCount}),i=new Map,r=(n=B(n)).next();!r.done;r=n.next()){var a=(r=r.value).audio.channelsCount;i.has(a)||i.set(a,[]),i.get(a).push(r)}return 0==(n=Array.from(i.keys())).length?e:(r=n.filter(function(e){return e<=t})).length?i.get(Math.max.apply(null,r)):i.get(Math.min.apply(null,n))},mc:function(e,t,n){var i=e,r=e.filter(function(e){return e.primary});r.length&&(i=r);var a,o=i.length?i[0].language:"",i=i.filter(function(e){return e.language==o});if(!t||(a=ne(Q(t),e.map(function(e){return e.language})))&&(i=e.filter(function(e){return Q(e.language)==a})),n){if((e=Wn.He(i,n)).length)return e;X.u("No exact match for the text role could be found.")}else if((e=i.filter(function(e){return 0==e.roles.length})).length)return e;return(e=i.map(function(e){return e.roles}).reduce(ke.nd,[])).length?Wn.He(i,e[0]):i},He:function(e,t){return e.filter(function(e){return e.roles.includes(t)})},Me:function(e,t,n){for(var i=0;i<n.length;i++)if(n[i].audio==e&&n[i].video==t)return n[i];return null},Cg:function(e){return"audio"==e.type},Gg:function(e){return"video"==e.type},yg:function(e){var t=[];return e.audio&&t.push(e.audio),e.video&&t.push(e.video),t},Tb:function(e){return Wn.Cg(e)?"type=audio codecs="+e.codecs+" bandwidth="+e.bandwidth+" channelsCount="+e.channelsCount+" audioSamplingRate="+e.audioSamplingRate:Wn.Gg(e)?"type=video codecs="+e.codecs+" bandwidth="+e.bandwidth+" frameRate="+e.frameRate+" width="+e.width+" height="+e.height:"unexpected stream type"}};function qn(){this.j=null,this.f=!1,this.b=new le,this.g=[],this.l=!1,this.a=this.c=null}function Xn(t,e){return t&&(e=e.filter(function(e){return Wn.Jd(e,t,{width:1/0,height:1/0})})),e.sort(function(e,t){return e.bandwidth-t.bandwidth})}function Yn(e,t){this.a=e,this.b=t}function $n(e,t){var n=new Yn(2,6),i=Qn.a,r=n.b-i.b;(0<(n.a-i.a||r)?Qn.c:Qn.b)(Qn.a,n,e,t)}function Jn(e,t,n,i){X.ba([n,"has been deprecated and will be removed in",t,". We are currently at version",e,". Additional information:",i].join(" "))}function Zn(e,t,n,i){X.Hc([n,"has been deprecated and has been removed in",t,". We are now at version",e,". Additional information:",i].join(""))}_("shaka.abr.SimpleAbrManager",qn),qn.prototype.stop=function(){this.j=null,this.f=!1,this.g=[],this.c=null},qn.prototype.init=function(e){this.j=e},qn.prototype.chooseVariant=function(){var e=Xn(this.a.restrictions,this.g),t=this.b.getBandwidthEstimate(this.a.defaultBandwidthEstimate);this.g.length&&!e.length&&(X.u("No variants met the ABR restrictions. Choosing a variant by lowest bandwidth."),e=[(e=Xn(null,this.g))[0]]);for(var n=e[0]||null,i=0;i<e.length;++i){var r=e[i],a=r.bandwidth/this.a.bandwidthDowngradeTarget,o=(e[i+1]||{bandwidth:1/0}).bandwidth/this.a.bandwidthUpgradeTarget;X.N("Bandwidth ranges:",(r.bandwidth/1e6).toFixed(3),(a/1e6).toFixed(3),(o/1e6).toFixed(3)),a<=t&&t<=o&&(n=r)}return this.c=Date.now(),n},qn.prototype.enable=function(){this.f=!0},qn.prototype.disable=function(){this.f=!1},qn.prototype.segmentDownloaded=function(e,t){X.N("Segment downloaded:","deltaTimeMs="+e,"numBytes="+t,"lastTimeChosenMs="+this.c,"enabled="+this.f);var n,i=this.b;if(t<16e3||(n=8e3*t/e,e=e/1e3,i.a+=t,ue(i.b,e,n),ue(i.c,e,n)),null!=this.c&&this.f)e:{if(X.N("Suggesting Streams..."),this.l){if(Date.now()-this.c<1e3*this.a.switchInterval){X.N("Still within switch interval...");break e}}else{if(!(128e3<=this.b.a)){X.N("Still waiting for a good estimate...");break e}this.l=!0}i=this.chooseVariant(),n=this.b.getBandwidthEstimate(this.a.defaultBandwidthEstimate),X.debug("Calling switch_(), bandwidth="+Math.round(n/1e3)+" kbps"),this.j(i)}},qn.prototype.getBandwidthEstimate=function(){return this.b.getBandwidthEstimate(this.a.defaultBandwidthEstimate)},qn.prototype.setVariants=function(e){this.g=e},qn.prototype.configure=function(e){this.a=e},Yn.prototype.toString=function(){return"v"+this.a+"."+this.b};var Qn=null,ei="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),ti="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),ni=["loop","playbackRate"],ii=["pause","play"],ri="abrstatuschanged adaptation buffering drmsessionupdate emsg error expirationupdated largegap loading manifestparsed onstatechange onstateidle streaming textchanged texttrackvisibility timelineregionadded timelineregionenter timelineregionexit trackschanged unloading variantchanged".split(" "),ai={getAssetUri:2,getAudioLanguages:2,getAudioLanguagesAndRoles:2,getBufferedInfo:2,getConfiguration:2,getExpiration:2,getPlaybackRate:2,getTextLanguages:2,getTextLanguagesAndRoles:2,getTextTracks:2,getStats:5,getVariantTracks:2,isAudioOnly:10,isBuffering:1,isInProgress:1,isLive:10,isTextTrackVisible:1,keySystem:10,seekRange:1,usingEmbeddedTextTrack:2,getLoadMode:10},oi={getPlayheadTimeAsDate:1,getPresentationStartTimeAsDate:20},si=[["getConfiguration","configure"]],ui=[["isTextTrackVisible","setTextTrackVisibility"]],ci="addTextTrack cancelTrickPlay configure resetConfiguration retryStreaming selectAudioLanguage selectEmbeddedTextTrack selectTextLanguage selectTextTrack selectVariantTrack selectVariantsByLabel setTextTrackVisibility trickPlay".split(" "),li=["attach","detach","load","unload"];function di(e){return JSON.stringify(e,function(e,t){if("function"!=typeof t){if(t instanceof Event||t instanceof D){var n={};for(r in t){var i=t[r];i&&"object"==typeof i?"detail"==r&&(n[r]=i):r in Event||(n[r]=i)}return n}if(t instanceof Error){var r=new Set(["name","message","stack"]);for(n in t)r.add(n);for(n=(i=B(Object.getOwnPropertyNames(t))).next();!n.done;n=i.next())r.add(n.value);for(i={},n=(r=B(r)).next();!n.done;n=r.next())i[n=n.value]=t[n];r={__type__:"Error",contents:i}}else if(t instanceof TimeRanges)for(r={__type__:"TimeRanges",length:t.length,start:[],end:[]},n=0;n<t.length;++n)r.start.push(t.start(n)),r.end.push(t.end(n));else r=t instanceof Uint8Array?{__type__:"Uint8Array",entries:Array.from(t)}:"number"==typeof t?isNaN(t)?"NaN":isFinite(t)?t:t<0?"-Infinity":"Infinity":t;return r}})}function hi(e){return JSON.parse(e,function(e,t){if("NaN"==t)var n=NaN;else if("-Infinity"==t)n=-1/0;else if("Infinity"==t)n=1/0;else if(t&&"object"==typeof t&&"TimeRanges"==t.__type__)n={length:(a=t).length,start:function(e){return a.start[e]},end:function(e){return a.end[e]}};else if(t&&"object"==typeof t&&"Uint8Array"==t.__type__)n=new Uint8Array(t.entries);else if(t&&"object"==typeof t&&"Error"==t.__type__){n=t.contents;var i,r=Error(n.message);for(i in n)r[i]=n[i];n=r}else n=t;var a;return n})}function fi(e,t,n,i,r,a){this.L=e,this.f=new ze(t),this.O=n,this.s=!1,this.B=i,this.K=r,this.H=a,this.b=this.j=!1,this.J="",this.l=null,this.v=this.Rd.bind(this),this.w=this.Rg.bind(this),this.a={video:{},player:{}},this.F=0,this.c={},this.g=null,Ei.add(this)}var pi=!1,mi=null;function gi(e,t){X.debug("CastSender: onExistingSessionJoined");var n=e.H();e.g=new Me,e.s=!0,e.Td(n,t)}function vi(e){var t=mi;t.removeUpdateListener(e.v),t.removeMessageListener("urn:x-cast:com.google.shaka.v2",e.w)}function bi(e){for(var t in e.c){var n=e.c[t];delete e.c[t],n.reject(new de(1,7,7e3))}}function yi(t,e){var n=di(e),i=mi;try{i.sendMessage("urn:x-cast:com.google.shaka.v2",n,function(){},X.error)}catch(e){throw X.error("Cast session sendMessage threw",e),n=new de(2,8,8005,e),t.B("player",new D("error",{detail:n})),t.Qb(),n}}(e=fi.prototype).destroy=function(){return Ei.delete(this),bi(this),mi&&vi(this),this.f&&(this.f.stop(),this.f=null),this.K=this.B=null,this.b=this.j=!1,this.w=this.v=this.g=this.c=this.a=this.l=null,Promise.resolve()},e.ha=function(){return this.b},e.bd=function(){return this.J},e.init=function(){var e;d.chrome&&chrome.cast&&chrome.cast.isAvailable&&this.L.length&&(this.j=!0,this.f.gb(),e=new chrome.cast.SessionRequest(this.L),e=new chrome.cast.ApiConfig(e,function(e){for(var t=B(Ei),n=t.next();!n.done;n=t.next())gi(n.value,e)}.bind(this),function(e){for(var t=B(Ei),n=t.next();!n.done;n=t.next()){n=n.value;var i=e;X.debug("CastSender: receiver status",i),pi="available"==i,n.f.gb()}}.bind(this),"origin_scoped"),chrome.cast.initialize(e,function(){X.debug("CastSender: init")},function(e){X.error("CastSender: init error",e)}),pi&&this.f.R(.02),(e=mi)&&e.status!=chrome.cast.SessionStatus.STOPPED?(X.debug("CastSender: re-using existing connection"),gi(this,e)):mi=null)},e.be=function(e){this.l=e,this.b&&yi(this,{type:"appData",appData:this.l})},e.cast=function(e){return this.j?pi?this.b?Promise.reject(new de(1,8,8002)):(this.g=new Me,chrome.cast.requestSession(this.Td.bind(this,e),this.Ze.bind(this)),this.g):Promise.reject(new de(1,8,8001)):Promise.reject(new de(1,8,8e3))},e.Qb=function(){if(this.b){if(bi(this),mi){vi(this);try{mi.stop(function(){},function(){})}catch(e){}mi=null}this.Rd()}},e.get=function(e,t){if("video"==e){if(ii.includes(t))return this.mf.bind(this,e,t)}else if("player"==e){if(oi[t]&&!this.get("player","isLive")())return function(){};if(ci.includes(t))return this.mf.bind(this,e,t);if(li.includes(t))return this.ih.bind(this,e,t);if(ai[t])return this.gf.bind(this,e,t)}return this.gf(e,t)},e.set=function(e,t,n){this.a[e][t]=n,yi(this,{type:"set",targetName:e,property:t,value:n})},e.Td=function(e,t){X.debug("CastSender: onSessionInitiated"),(mi=t).addUpdateListener(this.v),t.addMessageListener("urn:x-cast:com.google.shaka.v2",this.w),this.Rd(),yi(this,{type:"init",initState:e,appData:this.l}),this.g.resolve()},e.Ze=function(e){var t=8003;switch(e.code){case"cancel":t=8004;break;case"timeout":t=8005;break;case"receiver_unavailable":t=8006}this.g.reject(new de(2,8,t,e))},e.gf=function(e,t){return this.a[e][t]},e.mf=function(e,t,n){for(var i=[],r=2;r<arguments.length;++r)i[r-2]=arguments[r];yi(this,{type:"call",targetName:e,methodName:t,args:i})},e.ih=function(e,t,n){for(var i=[],r=2;r<arguments.length;++r)i[r-2]=arguments[r];r=new Me;var a=this.F.toString();this.F++,this.c[a]=r;try{yi(this,{type:"asyncCall",targetName:e,methodName:t,args:i,id:a})}catch(e){r.reject(e)}return r},e.Rd=function(){var e=!!mi&&"connected"==mi.status;if(X.debug("CastSender: connection status",e),this.b&&!e){for(var t in this.K(),this.a)this.a[t]={};bi(this)}this.J=(this.b=e)?mi.receiver.friendlyName:"",this.f.gb()},e.Rg=function(e,t){var n=hi(t);switch(X.N("CastSender: message",n),n.type){case"event":var i=n.event;this.B(n.targetName,new D(i.type,i));break;case"update":for(var r in i=n.update)for(var a in n=this.a[r]||{},i[r])n[a]=i[r][a];this.s&&(this.O(),this.s=!1);break;case"asyncComplete":if(r=n.id,n=n.error,a=this.c[r],delete this.c[r],a)if(n){for(i in r=new de(n.severity,n.category,n.code),n)r[i]=n[i];a.reject(r)}else a.resolve()}};var Ei=new Set;function wi(e,t,n){var i=this;j.call(this),this.c=e,this.b=t,this.l=this.g=this.f=this.s=this.j=null,this.w=n,this.v=new Map,this.a=new fi(n,function(){return Ai(i)},function(){return Ii(i)},function(e,t){return Ci(i,e,t)},function(){return ki(i)},function(){return Si(i)}),function(t){for(var e in t.a.init(),t.l=new pt,ei.forEach(function(e){this.l.m(this.c,e,this.H.bind(this))}.bind(t)),ri.forEach(function(e){this.l.m(this.b,e,this.B.bind(this))}.bind(t)),t.j={},t.c)Object.defineProperty(t.j,e,{configurable:!1,enumerable:!0,get:t.F.bind(t,e),set:t.J.bind(t,e)});t.s={},Ti(t,function(e){Object.defineProperty(t.s,e,{configurable:!1,enumerable:!0,get:function(){return function e(t,n){t.v.has(n)&&(n=t.v.get(n));if("addEventListener"==n)return t.g.addEventListener.bind(t.g);if("removeEventListener"==n)return t.g.removeEventListener.bind(t.g);if("getMediaElement"==n)return function(){return this.j}.bind(t);if("getSharedConfiguration"==n)return X.u("Can't share configuration across a network. Returning copy."),t.a.get("player","getConfiguration");if("getNetworkingEngine"==n)return t.a.ha()&&X.u("NOTE: getNetworkingEngine() is always local!"),t.b.pc.bind(t.b);if(t.a.ha()){if("getManifest"==n||"drmInfo"==n)return function(){return X.ba(n+"() does not work while casting!"),null};if("getManifestUri"==n)return $n("getManifestUri",'Please use "getAssetUri" instead.'),e(t,"getAssetUri");if("attach"==n||"detach"==n)return function(){return X.ba(n+"() does not work while casting!"),Promise.resolve()}}return t.a.ha()&&0==Object.keys(t.a.a.video).length&&ai[n]||!t.a.ha()?t.b[n].bind(t.b):t.a.get("player",n)}(t,e)}})}),function(i){var r=new Map;Ti(i,function(e,t){var n;r.has(t)?(n=r.get(t),e.length<n.length?i.v.set(e,n):i.v.set(n,e)):r.set(t,e)})}(t),t.f=new j,t.f.Ec=t.j,t.g=new j,t.g.Ec=t.s}(this)}function Ti(e,t){function n(e){return"constructor"!=e&&"function"==typeof i[e]&&!r.has(e)}var i=e.b,r=new Set;for(a in i)n(a)&&(r.add(a),t(a,i[a]));for(var a=Object.getPrototypeOf(i),o=Object.getPrototypeOf({});a&&a!=o;){for(var s=B(Object.getOwnPropertyNames(a)),u=s.next();!u.done;u=s.next())n(u=u.value)&&(r.add(u),t(u,i[u]));a=Object.getPrototypeOf(a)}}function Si(e){var n={video:{},player:{},playerAfterLoad:{},manifest:e.b.Oc(),startTime:null};return e.c.pause(),ni.forEach(function(e){n.video[e]=this.c[e]}.bind(e)),e.c.ended||(n.startTime=e.c.currentTime),si.forEach(function(e){var t=e[1];e=this.b[e[0]](),n.player[t]=e}.bind(e)),ui.forEach(function(e){var t=e[1];e=this.b[e[0]](),n.playerAfterLoad[t]=e}.bind(e)),n}function Ai(e){e.dispatchEvent(new D("caststatuschanged"))}function Ii(e){e.f.dispatchEvent(new D(e.j.paused?"pause":"play"))}function ki(t){si.forEach(function(e){var t=e[1];e=this.a.get("player",e[0])(),this.b[t](e)}.bind(t));var e=t.a.get("player","getAssetUri")(),n=t.a.get("video","ended"),i=Promise.resolve(),r=t.c.autoplay,a=null;n||(a=t.a.get("video","currentTime")),e&&(t.c.autoplay=!1,i=t.b.load(e,a));var o={};ni.forEach(function(e){o[e]=this.a.get("video",e)}.bind(t)),i.then(function(){t.c&&(ni.forEach(function(e){this.c[e]=o[e]}.bind(t)),ui.forEach(function(e){var t=e[1];e=this.a.get("player",e[0])(),this.b[t](e)}.bind(t)),t.c.autoplay=r,e&&t.c.play())},function(e){t.b.dispatchEvent(new D("error",{detail:e}))})}function Ci(e,t,n){e.a.ha()&&("video"==t?e.f.dispatchEvent(n):"player"==t&&e.g.dispatchEvent(n))}function xi(e,t,n,i){var r=this;j.call(this),this.a=e,this.b=t,this.c=new pt,this.H={video:e,player:t},this.w=n||function(){},this.J=i||function(e){return e},this.B=!1,this.j=!0,this.g=0,this.v=!1,this.s=!0,this.l=this.f=null,this.F=new ze(function(){Pi(r)}),n=this,(i=cast.receiver.CastReceiverManager.getInstance()).onSenderConnected=n.bf.bind(n),i.onSenderDisconnected=n.bf.bind(n),i.onSystemVolumeChanged=n.Tf.bind(n),n.l=i.getCastMessageBus("urn:x-cast:com.google.cast.media"),n.l.onMessage=n.Mg.bind(n),n.f=i.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),n.f.onMessage=n.Wg.bind(n),i.start(),ei.forEach(function(e){this.c.m(this.a,e,this.hf.bind(this,"video"))}.bind(n)),ri.forEach(function(e){this.c.m(this.b,e,this.hf.bind(this,"player"))}.bind(n)),cast.__platform__&&cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160')?n.b.ee(3840,2160):n.b.ee(1920,1080),n.c.m(n.a,"loadeddata",function(){this.v=!0}.bind(n)),n.c.m(n.b,"loading",function(){this.j=!1,Ni(this)}.bind(n)),n.c.m(n.a,"playing",function(){this.j=!1,Ni(this)}.bind(n)),n.c.m(n.a,"pause",function(){Ni(this)}.bind(n)),n.c.m(n.b,"unloading",function(){this.j=!0,Ni(this)}.bind(n)),n.c.m(n.a,"ended",function(){var e=this;new ze(function(){e.a&&e.a.ended&&(e.j=!0,Ni(e))}).R(5)}.bind(n))}function Ni(e){Promise.resolve().then(function(){this.b&&(this.dispatchEvent(new D("caststatuschanged")),Mi(this)||Ui(this))}.bind(e))}function Pi(e){e.F.R(.5);var t,n={video:{},player:{}};if(ti.forEach(function(e){n.video[e]=this.a[e]}.bind(e)),e.b.W())for(var i in oi)0==e.g%oi[i]&&(n.player[i]=e.b[i]());for(t in ai)0==e.g%ai[t]&&(n.player[t]=e.b[t]());(i=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())&&(n.video.volume=i.level,n.video.muted=i.muted),e.v&&(e.g+=1),Li(e,{type:"update",update:n},e.f),Mi(e)}function Mi(e){return e.s&&(e.a.duration||e.b.W())&&(Ri(e),e.s=!1,1)}function Ri(e,t){t=void 0===t?0:t;var n={contentId:e.b.Oc(),streamType:e.b.W()?"LIVE":"BUFFERED",contentType:""};e.b.W()||(n.duration=e.a.duration),Ui(e,t,n)}function Li(e,t,n,i){e.B&&(e=di(t),i?n.getCastChannel(i).send(e):n.broadcast(e))}function Ui(e,t,n){t=void 0===t?0:t,n=void 0===n?null:n;var i=e.a.playbackRate,r=_i,i={mediaSessionId:0,playbackRate:i,playerState:r=e.j?r.IDLE:e.b.Wb()?r.Cf:e.a.paused?r.Ef:r.Ff,currentTime:e.a.currentTime,supportedMediaCommands:63,volume:{level:e.a.volume,muted:e.a.muted}};n&&(i.media=n),Li(e,{requestId:t,type:"MEDIA_STATUS",status:[i]},e.l)}d.__onGCastApiAvailable=function(e){if(e)for(var t=(e=B(Ei)).next();!t.done;t=e.next())t.value.init()},O(wi,j),_("shaka.cast.CastProxy",wi),wi.prototype.destroy=function(e){return e&&this.a.Qb(),this.l&&(this.l.release(),this.l=null),e=[],this.b&&(e.push(this.b.destroy()),this.b=null),this.a&&(e.push(this.a.destroy()),this.a=null),this.s=this.j=this.c=null,Promise.all(e)},wi.prototype.getVideo=wi.prototype.sc=function(){return this.j},wi.prototype.getPlayer=wi.prototype.$a=function(){return this.s},wi.prototype.canCast=wi.prototype.ye=function(){return this.a.j&&pi},wi.prototype.isCasting=wi.prototype.ha=function(){return this.a.ha()},wi.prototype.receiverName=wi.prototype.bd=function(){return this.a.bd()},wi.prototype.cast=function(){var e=Si(this);return this.a.cast(e).then(function(){if(this.b)return this.b.re()}.bind(this))},wi.prototype.setAppData=wi.prototype.be=function(e){this.a.be(e)},wi.prototype.suggestDisconnect=wi.prototype.yf=function(){var e,t=this.a;t.b&&(e=t.H(),chrome.cast.requestSession(t.Td.bind(t,e),t.Ze.bind(t)))},wi.prototype.changeReceiverId=wi.prototype.Ce=function(t){var n=this;return G(function e(){return q(e,function(e){switch(e.o){case 1:return t==n.w?e.return():(n.w=t,n.a.Qb(),V(e,n.a.destroy(),2));case 2:n.a=null,n.a=new fi(t,function(){return Ai(n)},function(){return Ii(n)},function(e,t){return Ci(n,e,t)},function(){return ki(n)},function(){return Si(n)}),n.a.init(),x(e)}})})},wi.prototype.forceDisconnect=wi.prototype.Qb=function(){this.a.Qb()},wi.prototype.F=function(e){if("addEventListener"==e)return this.f.addEventListener.bind(this.f);if("removeEventListener"==e)return this.f.removeEventListener.bind(this.f);if(this.a.ha()&&0==Object.keys(this.a.a.video).length){var t=this.c[e];if("function"!=typeof t)return t}return this.a.ha()?this.a.get("video",e):("function"==typeof(e=this.c[e])&&(e=e.bind(this.c)),e)},wi.prototype.J=function(e,t){this.a.ha()?this.a.set("video",e,t):this.c[e]=t},wi.prototype.H=function(e){this.a.ha()||this.f.dispatchEvent(new D(e.type,e))},wi.prototype.B=function(e){this.a.ha()||this.g.dispatchEvent(e)},O(xi,j),_("shaka.cast.CastReceiver",xi),xi.prototype.isConnected=function(){return this.B},xi.prototype.isIdle=xi.prototype.Eg=function(){return this.j},xi.prototype.destroy=function(){var n=this;return G(function e(){var t;return q(e,function(e){switch(e.o){case 1:return n.c&&(n.c.release(),n.c=null),t=[],n.b&&(t.push(n.b.destroy()),n.b=null),n.F&&(n.F.stop(),n.F=null),n.a=null,n.H=null,n.w=null,n.B=!1,n.j=!0,n.f=null,n.l=null,V(e,Promise.all(t),2);case 2:cast.receiver.CastReceiverManager.getInstance().stop(),x(e)}})})},(e=xi.prototype).bf=function(){this.g=0,this.s=!0,this.B=0!=cast.receiver.CastReceiverManager.getInstance().getSenders().length,Ni(this)},e.hf=function(e,t){this.b&&(Pi(this),Li(this,{type:"event",targetName:e,event:t},this.f))},e.Tf=function(){var e=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();e&&Li(this,{type:"update",update:{video:{volume:e.level,muted:e.muted}}},this.f),Li(this,{type:"event",targetName:"video",event:{type:"volumechange"}},this.f)},e.Wg=function(e){var t=hi(e.data);switch(X.debug("CastReceiver: message",t),t.type){case"init":this.g=0,this.v=!1,this.s=!0,function(n,i,e){for(var t in i.player)n.b[t](i.player[t]);n.w(e),e=Promise.resolve();var r=n.a.autoplay;i.manifest&&(n.a.autoplay=!1,e=n.b.load(i.manifest,i.startTime)),e.then(function(){if(n.b){for(var e in i.video)n.a[e]=i.video[e];for(var t in i.playerAfterLoad)n.b[t](i.playerAfterLoad[t]);n.a.autoplay=r,i.manifest&&(n.a.play(),Ui(n))}},function(e){n.b.dispatchEvent(new D("error",{detail:e}))})}(this,t.initState,t.appData),Pi(this);break;case"appData":this.w(t.appData);break;case"set":var n=t.targetName,i=t.property,t=t.value;if("video"==n){var r=cast.receiver.CastReceiverManager.getInstance();if("volume"==i){r.setSystemVolumeLevel(t);break}if("muted"==i){r.setSystemVolumeMuted(t);break}}this.H[n][i]=t;break;case"call":(n=this.H[t.targetName])[t.methodName].apply(n,t.args);break;case"asyncCall":n=t.targetName,i=t.methodName,"player"==n&&"load"==i&&(this.g=0,this.v=!1),r=t.id,e=e.senderId;var a=this.H[n];t=a[i].apply(a,t.args),"player"==n&&"load"==i&&(t=t.then(function(){this.s=!0}.bind(this))),t.then(this.rf.bind(this,e,r,null),this.rf.bind(this,e,r))}},e.Mg=function(e){var n=hi(e.data);switch(X.debug("CastReceiver: message",n),n.type){case"PLAY":this.a.play(),Ui(this);break;case"PAUSE":this.a.pause(),Ui(this);break;case"SEEK":e=n.currentTime;var t=n.resumeState;null!=e&&(this.a.currentTime=Number(e)),t&&"PLAYBACK_START"==t?(this.a.play(),Ui(this)):t&&"PLAYBACK_PAUSE"==t&&(this.a.pause(),Ui(this));break;case"STOP":this.b.re().then(function(){this.b&&Ui(this)}.bind(this));break;case"GET_STATUS":Ri(this,Number(n.requestId));break;case"VOLUME":e=(t=n.volume).level,t=t.muted;var i=this.a.volume,r=this.a.muted;null!=e&&(this.a.volume=Number(e)),null!=t&&(this.a.muted=t),i==this.a.volume&&r==this.a.muted||Ui(this);break;case"LOAD":this.g=0,this.s=this.v=!1,e=n.media,t=n.currentTime,i=this.J(e.contentId),r=n.autoplay||!0,this.w(e.customData),r&&(this.a.autoplay=!0),this.b.load(i,t).then(function(){this.b&&Ri(this)}.bind(this)).catch(function(e){var t="LOAD_FAILED";7==e.category&&7e3==e.code&&(t="LOAD_CANCELLED"),Li(this,{requestId:Number(n.requestId),type:t},this.l)}.bind(this));break;default:X.u("Unrecognized message type from the generic Chromecast controller!",n.type),Li(this,{requestId:Number(n.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},this.l)}},e.rf=function(e,t,n){this.b&&Li(this,{type:"asyncComplete",id:t,error:n},this.f,e)};var _i={IDLE:"IDLE",Ff:"PLAYING",Cf:"BUFFERING",Ef:"PAUSED"};function Oi(e,t){this.T=e,this.b=t==Di,this.a=0}_("shaka.util.DataViewReader",Oi);var Di=1;function Fi(){throw new de(2,3,3e3)}function ji(){this.c=[],this.b=[],this.a=!1}function Ki(e){for(var t=Hi(e);e.reader.Ra()&&!e.parser.a;)e.parser.Yc(e.start+t,e.reader,e.partialOkay)}function Bi(e){for(var t=Hi(e),n=e.reader.M();0<n&&!e.parser.a;--n)e.parser.Yc(e.start+t,e.reader,e.partialOkay)}function Gi(t){return function(e){t(e.reader.Gb(e.reader.T.byteLength-e.reader.va()))}}function Vi(e){for(var t=0,n=0;n<e.length;n++)t=t<<8|e.charCodeAt(n);return t}function zi(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,255&e)}function Hi(e){return 8+(e.has64BitSize?8:0)+(null!=e.flags?4:0)}function Wi(e){var r=this;this.a=[],this.b=[],this.data=[],(new ji).P("moov",Ki).za("pssh",function(e){if(1<e.version)X.u("Unrecognized PSSH version found!");else{var t=e.reader.T,t=new Uint8Array(t.buffer,t.byteOffset-12,e.size);if(r.data.push(t),r.a.push(je.hd(e.reader.Gb(16))),0<e.version){t=e.reader.M();for(var n=0;n<t;++n){var i=je.hd(e.reader.Gb(16));r.b.push(i)}}}}).parse(e),0==this.data.length&&X.u("No pssh box found!")}Oi.Endianness={Lh:0,Nh:Di},Oi.prototype.hasMoreData=Oi.prototype.Ra=function(){return this.a<this.T.byteLength},Oi.prototype.getPosition=Oi.prototype.va=function(){return this.a},Oi.prototype.getLength=Oi.prototype.eg=function(){return this.T.byteLength},Oi.prototype.readUint8=Oi.prototype.Ea=function(){try{var e=this.T.getUint8(this.a);return this.a+=1,e}catch(e){Fi()}},Oi.prototype.readUint16=Oi.prototype.xc=function(){try{var e=this.T.getUint16(this.a,this.b);return this.a+=2,e}catch(e){Fi()}},Oi.prototype.readUint32=Oi.prototype.M=function(){try{var e=this.T.getUint32(this.a,this.b);return this.a+=4,e}catch(e){Fi()}},Oi.prototype.readInt32=Oi.prototype.lf=function(){try{var e=this.T.getInt32(this.a,this.b);return this.a+=4,e}catch(e){Fi()}},Oi.prototype.readUint64=Oi.prototype.fc=function(){try{var e,t;this.b?(e=this.T.getUint32(this.a,!0),t=this.T.getUint32(this.a+4,!0)):(t=this.T.getUint32(this.a,!1),e=this.T.getUint32(this.a+4,!1))}catch(e){Fi()}if(2097151<t)throw new de(2,3,3001);return this.a+=8,t*Math.pow(2,32)+e},Oi.prototype.readBytes=Oi.prototype.Gb=function(e){this.a+e>this.T.byteLength&&Fi();var t=new Uint8Array(this.T.buffer,this.T.byteOffset+this.a,e);return this.a+=e,t},Oi.prototype.skip=Oi.prototype.V=function(e){this.a+e>this.T.byteLength&&Fi(),this.a+=e},Oi.prototype.rewind=Oi.prototype.nf=function(e){this.a<e&&Fi(),this.a-=e},Oi.prototype.seek=function(e){(e<0||e>this.T.byteLength)&&Fi(),this.a=e},Oi.prototype.readTerminatedString=Oi.prototype.Vd=function(){for(var e=this.a;this.Ra()&&0!=this.T.getUint8(this.a);)this.a+=1;return e=new Uint8Array(this.T.buffer,this.T.byteOffset+e,this.a-e),this.a+=1,Re(e)},_("shaka.util.Mp4Parser",ji),ji.prototype.box=ji.prototype.P=function(e,t){e=Vi(e);return this.c[e]=0,this.b[e]=t,this},ji.prototype.fullBox=ji.prototype.za=function(e,t){e=Vi(e);return this.c[e]=1,this.b[e]=t,this},ji.prototype.stop=function(){this.a=!0},ji.prototype.parse=function(e,t){var n=new Uint8Array(e),n=new Oi(new DataView(n.buffer,n.byteOffset,n.byteLength),0);for(this.a=!1;n.Ra()&&!this.a;)this.Yc(0,n,t)},ji.prototype.parseNext=ji.prototype.Yc=function(e,t,n){var i=t.va(),r=t.M(),a=t.M(),o=!1;switch(X.N("Parsing MP4 box",zi(a)),r){case 0:r=t.T.byteLength-i;break;case 1:r=t.fc(),o=!0}var s,u,c=this.b[a];c?(u=s=null,1==this.c[a]&&(s=(u=t.M())>>>24,u&=16777215),a=i+r,n&&a>t.T.byteLength&&(a=t.T.byteLength),t=0<(a-=t.va())?t.Gb(a):new Uint8Array(0),c({parser:this,partialOkay:n||!1,version:s,flags:u,reader:t=new Oi(new DataView(t.buffer,t.byteOffset,t.byteLength),0),size:r,start:i+e,has64BitSize:o})):t.V(Math.min(i+r-t.va(),t.T.byteLength-t.va()))},ji.children=Ki,ji.sampleDescription=Bi,ji.allData=Gi,ji.typeToString=zi,ji.headerSize=Hi;var qi={Nc:function(e,t){t=qi.$(e,t);return 1!=t.length?null:t[0]},td:function(e,t,n){return 1!=(e=qi.Je(e,t,n)).length?null:e[0]},$:function(e,t){return Array.prototype.filter.call(e.childNodes,function(e){return e instanceof Element&&e.tagName==t})},Je:function(e,t,n){return Array.prototype.filter.call(e.childNodes,function(e){return e instanceof Element&&e.localName==n&&e.namespaceURI==t})},getAttributeNS:function(e,t,n){return e.hasAttributeNS(t,n)?e.getAttributeNS(t,n):null},Pc:function(e){return Array.prototype.every.call(e.childNodes,function(e){return e.nodeType==Node.TEXT_NODE||e.nodeType==Node.CDATA_SECTION_NODE})?e.textContent.trim():null},S:function(e,t,n,i){i=void 0===i?null:i;var r=null;return null!=(e=e.getAttribute(t))&&(r=n(e)),null==r?i:r},$g:function(e){return e?(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z"),e=Date.parse(e),isNaN(e)?null:Math.floor(e/1e3)):null},eb:function(e){if(!e)return null;var t=/^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$/.exec(e);return t?(e=31536e3*Number(t[1]||null)+2592e3*Number(t[2]||null)+86400*Number(t[3]||null)+3600*Number(t[4]||null)+60*Number(t[5]||null)+Number(t[6]||null),isFinite(e)?e:null):(X.u("Invalid duration string:",e),null)},$c:function(e){var t=/([0-9]+)-([0-9]+)/.exec(e);return t?(e=Number(t[1]),isFinite(e)?(t=Number(t[2]),isFinite(t)?{start:e,end:t}:null):null):null},parseInt:function(e){return 0==(e=Number(e))%1?e:null},Zc:function(e){return 0==(e=Number(e))%1&&0<e?e:null},cc:function(e){return 0==(e=Number(e))%1&&0<=e?e:null},parseFloat:function(e){return e=Number(e),isNaN(e)?null:e},Rf:function(e){var t;return e=(t=e.match(/^(\d+)\/(\d+)$/))?Number(t[1])/Number(t[2]):Number(e),isNaN(e)?null:e},ef:function(e,t){var n,i=new DOMParser;try{var r=i.parseFromString(e,"text/xml")}catch(e){}return r&&r.documentElement.tagName==t&&(n=r.documentElement),n&&0<n.getElementsByTagName("parsererror").length?null:n},df:function(e,t){try{var n=Re(e);return qi.ef(n,t)}catch(e){}}},Xi=(new Map).set("urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b","org.w3.clearkey").set("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed","com.widevine.alpha").set("urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95","com.microsoft.playready").set("urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95","com.microsoft.playready").set("urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb","com.adobe.primetime");function Yi(e,t,n){var i=function(e){for(var t=[],n=(e=B(e)).next();!n.done;n=e.next())(n=function(e){var t=e.getAttribute("schemeIdUri"),n=qi.getAttributeNS(e,"urn:mpeg:cenc:2013","default_KID"),i=qi.Je(e,"urn:mpeg:cenc:2013","pssh").map(qi.Pc);if(!t)return X.error("Missing required schemeIdUri attribute on","ContentProtection element",e),null;if(t=t.toLowerCase(),n&&(n=n.replace(/-/g,"").toLowerCase()).includes(" "))throw new de(2,4,4009);var r=[];try{r=i.map(function(e){return{initDataType:"cenc",initData:je.Za(e),keyId:null}})}catch(e){throw new de(2,4,4007)}return{node:e,pf:t,keyId:n,init:0<r.length?r:null}}(n.value))&&t.push(n);return t}(e),r=null;e=[];var a=[],o=new Set(i.map(function(e){return e.keyId}));if(o.delete(null),1<o.size)throw new de(2,4,4010);if(n||(a=i.filter(function(e){return"urn:mpeg:dash:mp4protection:2011"!=e.pf||(r=e.init||r,!1)})).length&&(0==(e=function(e,t,n){for(var i,r=[],a=(n=B(n)).next();!a.done;a=n.next()){a=a.value;var o,s,u,c,l,d,h=Xi.get(a.pf);if(h)i=(i=qi.td(a.node,"urn:microsoft:playready","pro"))?(i=je.Za(i.textContent),o=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),s=i.length,u=o.length+16+s,c=new ArrayBuffer(u),l=new Uint8Array(c),c=new DataView(c),d=0,c.setUint32(0,u),d+=4,c.setUint32(4,1886614376),d+=4,c.setUint32(8,0),d+=4,l.set(o,12),d+=o.length,c.setUint32(d,s),d+=4,l.set(i,d),[{initData:l,initDataType:"cenc",keyId:a.keyId}]):null,i=xe(h,a.init||e||i),(h=Ji.get(h))&&(i.licenseServerUri=h(a)),r.push(i);else for(a=t(a.node)||[],a=B(a),h=a.next();!h.done;h=a.next())r.push(h.value)}return r}(r,t,a)).length&&(e=[xe("",r)])),i.length&&(n||!a.length))for(e=[],n=(t=B(Xi.values())).next();!n.done;n=t.next())"org.w3.clearkey"!=(n=n.value)&&e.push(xe(n,r));if(o=Array.from(o)[0]||null)for(n=(t=B(e)).next();!n.done;n=t.next())for(i=(n=B(n.value.initData)).next();!i.done;i=n.next())i.value.keyId=o;return{Fe:o,Oh:r,drmInfos:e,Ke:!0}}var $i,Ji=(new Map).set("com.widevine.alpha",function(e){return(e=qi.td(e.node,"urn:microsoft","laurl"))&&e.getAttribute("licenseUrl")||""}).set("com.microsoft.playready",function(e){return(e=qi.td(e.node,"urn:microsoft:playready","pro"))&&(e=function(e){var t=0,n=new DataView(e).getUint32(t,!0);if(t+=4,n!==e.byteLength)return X.u("PlayReady Object with invalid length encountered."),[];t+=2,n=[];for(var i=new DataView(e);t<e.byteLength-1;){var r=i.getUint16(t,!0);t+=2;var a=i.getUint16(t,!0);t+=2;var o=new Uint8Array(e,t,a);n.push({type:r,value:o}),t+=a}return n}((e=je.Za(e.textContent)).buffer).filter(function(e){return 1===e.type})[0])?(e=Le(e.value,!0),(e=qi.ef(e,"WRMHEADER"))?function(e){for(var t=(e=B(e.getElementsByTagName("DATA"))).next();!t.done;t=e.next())for(var n=(t=B(t.value.childNodes)).next();!n.done;n=t.next())if((n=n.value)instanceof Element&&"LA_URL"==n.tagName)return n.textContent;return""}(e):""):""});function Zi(a,e,t,n,i){var o={RepresentationID:e,Number:t,Bandwidth:n,Time:i};return a.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,function(e,t,n,i){if("$$"==e)return"$";var r=o[t];if(null==r)return X.u("URL template does not have an available substitution for identifier",'"'+t+'":',a),e;switch("RepresentationID"==t&&n&&(X.u("URL template should not contain a width specifier for identifier",'"RepresentationID":',a),n=void 0),"Time"==t&&(r=Math.round(r)),i){case void 0:case"d":case"i":case"u":e=r.toString();break;case"o":e=r.toString(8);break;case"x":e=r.toString(16);break;case"X":e=r.toString(16).toUpperCase();break;default:e=r.toString()}return n=d.parseInt(n,10)||1,Array(Math.max(0,n-e.length)+1).join("0")+e})}function Qi(e,t){var n=er(e,t,"timescale"),i=1;n&&(i=qi.Zc(n)||1),n=er(e,t,"duration"),(n=qi.Zc(n||""))&&(n/=i);var r=er(e,t,"startNumber"),a=Number(er(e,t,"presentationTimeOffset"))||0,o=qi.cc(r||"");null!=r&&null!=o||(o=1);r=null;if(u=tr(e,t,"SegmentTimeline")){r=i;for(var s=e.ea.duration||1/0,u=qi.$(u,"S"),c=[],l=-a,d=0;d<u.length;++d){var h=u[d],f=qi.S(h,"t",qi.cc),p=qi.S(h,"d",qi.cc),m=qi.S(h,"r",qi.parseInt);if(null!=f&&(f-=a),!p){X.u('"S" element must have a duration:','ignoring the remaining "S" elements.',h);break}if(f=null!=f?f:l,(m=m||0)<0)if(d+1<u.length){if(null==(m=qi.S(u[d+1],"t",qi.cc))){X.u('An "S" element cannot have a negative repeat','if the next "S" element does not have a valid start time:','ignoring the remaining "S" elements.',h);break}if(m<=f){X.u('An "S" element cannot have a negative repeat','if its start time exceeds the next "S" element\'s start time:','ignoring the remaining "S" elements.',h);break}m=Math.ceil((m-f)/p)-1}else{if(1/0==s){X.u('The last "S" element cannot have a negative repeat',"if the Period has an infinite duration:",'ignoring the last "S" element.',h);break}if(s<=f/r){X.u('The last "S" element cannot have a negative repeat',"if its start time exceeds the Period's duration:",'igoring the last "S" element.',h);break}m=Math.ceil((s*r-f)/p)-1}for(0<c.length&&f!=l&&(Math.abs((f-l)/r)>=Pe&&X.u("SegmentTimeline contains a large gap/overlap:","the content may have errors in it.",h),c[c.length-1].end=f/r),h=0;h<=m;++h)l=f+p,c.push({start:f/r,end:l/r,Hh:f}),f=l}r=c}return{timescale:i,sa:n,Jb:o,Fa:a/i||0,se:a,X:r}}function er(e,t,n){return[t(e.G),t(e.oa),t(e.Da)].filter(ke.jb).map(function(e){return e.getAttribute(n)}).reduce(function(e,t){return e||t})}function tr(e,t,n){return[t(e.G),t(e.oa),t(e.Da)].filter(ke.jb).map(function(e){return qi.Nc(e,n)}).reduce(function(e,t){return e||t})}function nr(e,t,n,i,r,a){if(a=void 0===a?0:a,qi.getAttributeNS(e,"http://www.w3.org/1999/xlink","href")){var o=function(r,a,o,e,s,u){for(var c=qi.getAttributeNS(r,"http://www.w3.org/1999/xlink","href"),t=qi.getAttributeNS(r,"http://www.w3.org/1999/xlink","actuate")||"onRequest",n=0;n<r.attributes.length;n++){var i=r.attributes[n];"http://www.w3.org/1999/xlink"==i.namespaceURI&&(r.removeAttributeNS(i.namespaceURI,i.localName),--n)}if(5<=u)return Ye(new de(2,4,4028));if("onLoad"!=t)return Ye(new de(2,4,4027));var l=Ce([e],[c]);return s.request(0,lt(l,a)).ma(function(e){if(!(e=qi.df(e.data,r.tagName)))return Ye(new de(2,4,4001,c));for(;r.childNodes.length;)r.removeChild(r.childNodes[0]);for(;e.childNodes.length;){var t=e.childNodes[0];e.removeChild(t),r.appendChild(t)}for(t=0;t<e.attributes.length;t++){var n=e.attributes[t].nodeName,i=e.getAttribute(n);r.setAttribute(n,i)}return nr(r,a,o,l[0],s,u+1)})}(e,t,n,i,r,a);return n&&(o=o.ma(void 0,function(){return nr(e,t,n,i,r,a)})),o}o=[];for(var s=0;s<e.childNodes.length;s++){var u=e.childNodes[s];u instanceof Element&&("urn:mpeg:dash:resolve-to-zero:2013"==qi.getAttributeNS(u,"http://www.w3.org/1999/xlink","href")?(e.removeChild(u),--s):"SegmentTimeline"!=u.tagName&&o.push(nr(u,t,n,i,r,a)))}return Qe(o).ma(function(){return e})}function ir(e,t,n){this.c=e,this.b=t,this.a=n}function rr(e,t,n,i,r,a){this.position=e,this.startTime=t,this.endTime=n,this.c=i,this.b=r,this.a=a}function ar(e,t,n,i){var r,a=(new ji).za("sidx",function(e){r=function(e,t,n,i){var r=[];i.reader.V(4);var a=i.reader.M();if(0==a)throw X.error("Invalid timescale."),new de(2,3,3005);{var o,s;s=0==i.version?(o=i.reader.M(),i.reader.M()):(o=i.reader.fc(),i.reader.fc())}i.reader.V(2);var u=i.reader.xc();for(e=e+i.size+s,s=0;s<u;s++){var c=i.reader.M(),l=(2147483648&c)>>>31;c&=2147483647;var d=i.reader.M();if(i.reader.V(4),1==l)throw X.error("Heirarchical SIDXs are not supported."),new de(2,3,3006);r.push(new rr(r.length,o/a-t,(o+d)/a-t,function(){return n},e,e+c-1)),o+=d,e+=c}return i.parser.stop(),r}(t,i,n,e)});if(e&&a.parse(e),r)return r;throw X.error('Invalid box type, expected "sidx".'),new de(2,3,3004)}function or(e){this.a=e}function sr(e,t){for(;e.a.length&&e.a[e.a.length-1].startTime>=t;)e.a.pop();for(;e.a.length&&e.a[0].endTime<=0;)e.a.shift();var n;0!=e.a.length&&(n=e.a[e.a.length-1],e.a[e.a.length-1]=new rr(n.position,n.startTime,t,n.c,n.b,n.a))}function ur(e){this.b=e,this.a=new Oi(e,0),$i=$i||[new Uint8Array([255]),new Uint8Array([127,255]),new Uint8Array([63,255,255]),new Uint8Array([31,255,255,255]),new Uint8Array([15,255,255,255,255]),new Uint8Array([7,255,255,255,255,255]),new Uint8Array([3,255,255,255,255,255,255]),new Uint8Array([1,255,255,255,255,255,255,255])]}function cr(e){var t=lr(e);if(7<t.length)throw new de(2,3,3002);for(var n=0,i=0;i<t.length;i++)n=256*n+t[i];t=n,n=lr(e);e:{i=je.Xa;for(var r=0;r<$i.length;r++)if(i(n,$i[r])){i=!0;break e}i=!1}if(i)n=e.b.byteLength-e.a.va();else{if(8==n.length&&224&n[1])throw new de(2,3,3001);for(i=n[0]&(1<<8-n.length)-1,r=1;r<n.length;r++)i=256*i+n[r];n=i}return n=e.a.va()+n<=e.b.byteLength?n:e.b.byteLength-e.a.va(),i=new DataView(e.b.buffer,e.b.byteOffset+e.a.va(),n),e.a.V(n),new dr(t,i)}function lr(e){for(var t=e.a.Ea(),n=1;n<=8&&!(t&1<<8-n);n++);if(8<n)throw new de(2,3,3002);var i=new Uint8Array(n);for(i[0]=t,t=1;t<n;t++)i[t]=e.a.Ea();return i}function dr(e,t){this.id=e,this.a=t}function hr(e){if(8<e.a.byteLength)throw new de(2,3,3002);if(8==e.a.byteLength&&224&e.a.getUint8(0))throw new de(2,3,3001);for(var t=0,n=0;n<e.a.byteLength;n++)t=256*t+e.a.getUint8(n);return t}function fr(){}function pr(e,t){var n=tr(e,t,"Initialization");if(!n)return null;var i=e.G.Ga,t=n.getAttribute("sourceURL");t&&(i=Ce(e.G.Ga,[t])),t=0;e=null;return(n=qi.S(n,"range",qi.$c))&&(t=n.start,e=n.end),new ir(function(){return i},t,e)}function mr(e,t,n,i,r,a,o,s){var u=e.presentationTimeline,c=!e.Ob||!e.ea.Ed,l=e.ea.start,d=e.ea.duration,h=t,f=null;return{createSegmentIndex:function(){var e=[h(i,r,a),"webm"==o?h(n.c(),n.b,n.a):null];return h=null,Promise.all(e).then(function(e){var t=e[0];e=e[1]||null,t="mp4"==o?ar(t,r,i,s):(new fr).parse(t,e,i,s),u.$b(t,l),f=new or(t),c&&sr(f,d)})},findSegmentPosition:function(e){return f.find(e)},getSegmentReference:function(e){return f.get(e)}}}function gr(e){return e.yc}function vr(e,t){var n,i=pr(e,br),r=[(n=e).G.ob,n.oa.ob,n.Da.ob].filter(ke.jb).map(function(e){return qi.$(e,"SegmentURL")}).reduce(function(e,t){return 0<e.length?e:t}).map(function(e){return e.getAttribute("indexRange")&&!n.Qe&&(n.Qe=!0,X.u("We do not support the SegmentURL@indexRange attribute on SegmentList.  We only use the SegmentList@duration attribute or SegmentTimeline, which must be accurate.")),{Ig:e.getAttribute("media"),start:(e=qi.S(e,"mediaRange",qi.$c,{start:0,end:null})).start,end:e.end}}),a=Qi(e,br),o=a.Jb;0==o&&(X.u("SegmentList@startNumber must be > 0"),o=1);var s=0;if(a.sa?s=a.sa*(o-1):a.X&&0<a.X.length&&(s=a.X[0].start),!(r={sa:a.sa,startTime:s,Jb:o,Fa:a.Fa,X:a.X,Db:r}).sa&&!r.X&&1<r.Db.length)throw X.u("SegmentList does not contain sufficient segment information:","the SegmentList specifies multiple segments,","but does not specify a segment duration or timeline.",e.G),new de(2,4,4002);if(!r.sa&&!e.ea.duration&&!r.X&&1==r.Db.length)throw X.u("SegmentList does not contain sufficient segment information:","the SegmentList specifies one segment,","but does not specify a segment duration, period duration,","or timeline.",e.G),new de(2,4,4002);if(r.X&&0==r.X.length)throw X.u("SegmentList does not contain sufficient segment information:","the SegmentList has an empty timeline.",e.G),new de(2,4,4002);return o=a=null,e.Da.id&&e.G.id&&(a=t[o=e.Da.id+","+e.G.id]),s=function(e,t,n,i){var r=i.Db.length;i.X&&i.X.length!=i.Db.length&&(r=Math.min(i.X.length,i.Db.length),X.u("The number of items in the segment timeline and the number of segment","URLs do not match, truncating",i.Db.length,"to",r));for(var a=[],o=i.startTime,s=0;s<r;s++){var u=i.Db[s],c=Ce(n,[u.Ig]),l=void 0;l=null!=i.sa?o+i.sa:i.X?i.X[s].end:o+e,a.push(new rr(s+t,o,l,function(e){return e}.bind(null,c),u.start,u.end)),o=l}return a}(e.ea.duration,r.Jb,e.G.Ga,r),a?(a.Kd(s),o=e.presentationTimeline.rc(),a.rd(o-e.ea.start)):(e.presentationTimeline.$b(s,e.ea.start),a=new or(s),o&&e.Ob&&(t[o]=a)),e.Ob&&e.ea.Ed||sr(a,e.ea.duration),{createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:a.find.bind(a),getSegmentReference:a.get.bind(a),initSegmentReference:i,Fa:r.Fa}}function br(e){return e.ob}function yr(e,t,n,i){var r,a,o,s,u,c,l,d,h,f,p=function(e){var t=er(e,Er,"initialization");if(!t)return null;var n=e.G.id,i=e.bandwidth||null,r=e.G.Ga;return new ir(function(){var e=Zi(t,n,null,i,null);return Ce(r,[e])},0,null)}(e),m=Qi(e,Er),g=er(e,Er,"media"),v=er(e,Er,"index"),g=(m={sa:m.sa,timescale:m.timescale,Jb:m.Jb,Fa:m.Fa,se:m.se,X:m.X,Id:g,vc:v}).vc?1:0;if(g+=m.X?1:0,0==(g+=m.sa?1:0))throw X.error("SegmentTemplate does not contain any segment information:","the SegmentTemplate must contain either an index URL template","a SegmentTimeline, or a segment duration.",e.G),new de(2,4,4002);if(1!=g&&(X.u("SegmentTemplate containes multiple segment information sources:","the SegmentTemplate should only contain an index URL template,","a SegmentTimeline or a segment duration.",e.G),m.vc?(X.info("Using the index URL template by default."),m.X=null):X.info("Using the SegmentTimeline by default."),m.sa=null),!m.vc&&!m.Id)throw X.error("SegmentTemplate does not contain sufficient segment information:","the SegmentTemplate's media URL template is missing.",e.G),new de(2,4,4002);if(m.vc){if("mp4"!=(n=e.G.mimeType.split("/")[1])&&"webm"!=n)throw X.error("SegmentTemplate specifies an unsupported container type.",e.G),new de(2,4,4006);if("webm"==n&&!p)throw X.error("SegmentTemplate does not contain sufficient segment information:","the SegmentTemplate uses a WebM container,","but does not contain an initialization URL template.",e.G),new de(2,4,4005);i=Zi(m.vc,e.G.id,null,e.bandwidth||null,null),e=mr(e,t,p,i=Ce(e.G.Ga,[i]),0,null,n,m.Fa)}else e=m.sa?(i||(e.presentationTimeline.Nd(m.sa),e.presentationTimeline.Od(e.ea.start)),a=m,o=(r=e).ea.duration,s=a.sa,u=a.Jb,c=a.timescale,l=a.Id,d=r.bandwidth||null,h=r.G.id,f=r.G.Ga,{createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(e){return e<0||o&&o<=e?null:Math.floor(e/s)},getSegmentReference:function(t){var n=t*s,e=n+s;return o&&(e=Math.min(e,o)),e<0||o&&o<=n?null:new rr(t,n,e,function(){var e=Zi(l,h,t+u,d,n*c);return Ce(f,[e])},0,null)}}):(g=t=null,e.Da.id&&e.G.id&&(t=n[g=e.Da.id+","+e.G.id]),v=function(e,t){for(var n=[],i=0;i<t.X.length;i++){var r=i+t.Jb;n.push(new rr(r,t.X[i].start,t.X[i].end,function(e,t,n,i,r,a){return Ce(i,[e=Zi(e,t,r,n,a)]).map(function(e){return e.toString()})}.bind(null,t.Id,e.G.id,e.bandwidth||null,e.G.Ga,r,t.X[i].Hh+t.se),0,null))}return n}(e,m),i=!e.Ob||!e.ea.Ed,t?(i&&sr(new or(v),e.ea.duration),t.Kd(v),n=e.presentationTimeline.rc(),t.rd(n-e.ea.start)):(e.presentationTimeline.$b(v,e.ea.start),t=new or(v),g&&e.Ob&&(n[g]=t)),i&&sr(t,e.ea.duration),{createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:t.find.bind(t),getSegmentReference:t.get.bind(t)});return{createSegmentIndex:e.createSegmentIndex,findSegmentPosition:e.findSegmentPosition,getSegmentReference:e.getSegmentReference,initSegmentReference:p,Fa:m.Fa}}function Er(e){return e.Ac}_("shaka.media.InitSegmentReference",ir),ir.prototype.createUris=ir.prototype.pd=function(){return this.c()},ir.prototype.getStartByte=ir.prototype.zd=function(){return this.b},ir.prototype.getEndByte=ir.prototype.xd=function(){return this.a},_("shaka.media.SegmentReference",rr),rr.prototype.getPosition=rr.prototype.va=function(){return this.position},rr.prototype.getStartTime=rr.prototype.Rc=function(){return this.startTime},rr.prototype.getEndTime=rr.prototype.cg=function(){return this.endTime},rr.prototype.createUris=rr.prototype.pd=function(){return this.c()},rr.prototype.getStartByte=rr.prototype.zd=function(){return this.b},rr.prototype.getEndByte=rr.prototype.xd=function(){return this.a},_("shaka.media.SegmentIndex",or),or.prototype.destroy=function(){return this.a=null,Promise.resolve()},or.prototype.find=function(e){for(var t=this.a.length-1;0<=t;--t){var n=this.a[t];if(e>=n.startTime&&e<n.endTime)return n.position}return this.a.length&&e<this.a[0].startTime?this.a[0].position:null},or.prototype.get=function(e){return 0==this.a.length||(e-=this.a[0].position)<0||e>=this.a.length?null:this.a[e]},or.prototype.offset=function(e){for(var t=0;t<this.a.length;++t)this.a[t].startTime+=e,this.a[t].endTime+=e},or.prototype.merge=or.prototype.Kd=function(e){for(var t=[],n=0,i=0;n<this.a.length&&i<e.length;){var r=this.a[n],a=e[i];r.startTime<a.startTime?(t.push(r),n++):(r.startTime>a.startTime?0==n?t.push(a):X.u("Refusing to rewrite original references on update!"):(.1<Math.abs(r.endTime-a.endTime)?t.push(new rr(r.position,a.startTime,a.endTime,a.c,a.b,a.a)):t.push(r),n++),i++)}for(;n<this.a.length;)t.push(this.a[n++]);if(t.length)for(n=t[t.length-1].position+1;i<e.length;)r=new rr(n++,(r=e[i++]).startTime,r.endTime,r.c,r.b,r.a),t.push(r);else t=e;this.a=t},or.prototype.evict=or.prototype.rd=function(e){for(var t=0;t<this.a.length;++t)if(this.a[t].endTime>e)return void this.a.splice(0,t);this.a=[]},ur.prototype.Ra=function(){return this.a.Ra()},fr.prototype.parse=function(e,t,n,i){var r;if(440786851!=cr(t=new ur(new DataView(t))).id)throw X.error("Not an EBML element."),new de(2,3,3008);var a=cr(t);if(408125543!=a.id)throw X.error("Not a Segment element."),new de(2,3,3009);for(t=a.a.byteOffset,a=new ur(a.a),r=null;a.Ra();){var o=cr(a);if(357149030==o.id){r=o;break}}if(!r)throw X.error("Not an Info element."),new de(2,3,3010);for(a=new ur(r.a),r=1e6,o=null;a.Ra();){var s=cr(a);if(2807729==s.id)r=hr(s);else if(17545==s.id)if(4==(o=s).a.byteLength)o=o.a.getFloat32(0);else{if(8!=o.a.byteLength)throw new de(2,3,3003);o=o.a.getFloat64(0)}}if(null==o)throw new de(2,3,3011);if(r=o*(a=r/1e9),475249515!=(e=cr(new ur(new DataView(e)))).id)throw X.error("Not a Cues element."),new de(2,3,3007);return function(e,t,n,i,r,a){function o(){return r}var s=[];e=new ur(e.a);for(var u=null,c=null;e.Ra();){var l,d=cr(e);187!=d.id||(l=function(e){var t=new ur(e.a);if(179!=(e=cr(t)).id)throw X.u("Not a CueTime element."),new de(2,3,3013);if(e=hr(e),183!=(t=cr(t)).id)throw X.u("Not a CueTrackPositions element."),new de(2,3,3012);t=new ur(t.a);for(var n=0;t.Ra();){var i=cr(t);if(241==i.id){n=hr(i);break}}return{Ih:e,hh:n}}(d))&&(d=n*l.Ih,l=t+l.hh,null!=u&&s.push(new rr(s.length,u-a,d-a,o,c,l-1)),u=d,c=l)}return null!=u&&s.push(new rr(s.length,u-a,i-a,o,c,null)),s}(e,t,a,r,n,i)};var wr={dc:{},wc:{},Xd:function(e,t){wr.wc[e]=t}};function Tr(e,t,n){this.f=e,this.ad=t,this.j=this.g=1/0,this.a=1,this.b=this.c=null,this.s=0,this.v=!0,this.l=0,this.w=void 0===n||n}function Sr(e,t,n,i){return e=lt(e,i),0==t&&null==n||(e.headers.Range=n?"bytes="+t+"-"+n:"bytes="+t+"-"),e}function Ar(){var e=this;this.b=this.a=null,this.f=[],this.c=null,this.s=[],this.j=1,this.v={},this.w=0,this.B=new se(5),this.l=new ze(function(){var i;i=e,G(function e(){var t,n;return q(e,function(e){switch(e.o){case 1:return X.info("Updating manifest..."),t=0,z(e,2),V(e,Ir(i),4);case 4:t=e.A,H(e,3);break;case 2:n=W(e),i.b&&(n.severity=1,i.b.onError(n));case 3:if(!i.b)return e.return();Cr(i,t),x(e)}})})}),this.g=new at}function Ir(t){var n=Date.now(),e=t.b.networkingEngine.request(0,lt(t.f,t.a.retryParameters));return ot(t.g,e),e.promise.then(function(e){if(t.b)return e.uri&&!t.f.includes(e.uri)&&t.f.unshift(e.uri),function(t,e,n){if(!(e=qi.df(e,"MPD")))throw new de(2,4,4001,n);return e=nr(e,t.a.retryParameters,t.a.dash.xlinkFailGracefully,n,t.b.networkingEngine),ot(t.g,e),e.promise.then(function(e){return I=t,k=e,C=n,G(function e(){var h,f,p,m,g,v,b,y,E,w,T,S,A;return q(e,function(e){switch(e.o){case 1:m=ke,b=[C],0<(g=(h=qi).$(k,"Location").map(h.Pc).filter(m.jb)).length&&(v=Ce(b,g),b=I.f=v),y=h.$(k,"BaseURL").map(h.Pc),f=Ce(b,y),E=I.a.dash.ignoreMinBufferTime,p=0,E||(p=h.S(k,"minBufferTime",h.eb)),I.w=h.S(k,"minimumUpdatePeriod",h.eb,-1),m=h.S(k,"availabilityStartTime",h.$g),g=h.S(k,"timeShiftBufferDepth",h.eb),v=h.S(k,"maxSegmentDuration",h.eb),b=k.getAttribute("type")||"static",y=I.a.dash.ignoreSuggestedPresentationDelay,E=null,y||(E=h.S(k,"suggestedPresentationDelay",h.eb)),E=I.c?I.c.presentationTimeline:(w=Math.max(I.a.dash.defaultPresentationDelay,1.5*p),new Tr(m,null!=E?E:w,I.a.dash.autoCorrectDrift));for(var t={Ob:"static"!=b,presentationTimeline:E,Da:null,ea:null,oa:null,G:null,bandwidth:0,Qe:!1},n=f,i=qi.S(k,"mediaPresentationDuration",qi.eb),r=[],a=0,o=qi.$(k,"Period"),s=0;s<o.length;s++){var u,c=o[s],a=qi.S(c,"start",qi.eb,a),l=qi.S(c,"duration",qi.eb),d=null;if(s!=o.length-1?null!=(u=qi.S(o[s+1],"start",qi.eb))&&(d=u-a):null!=i&&(d=i-a),u=Pe,d&&l&&Math.abs(d-l)>u&&X.u("There is a gap/overlap between Periods",c),null==d&&(d=l),c=function(e,t,n,i){if(t.Da=xr(i.node,null,n),t.ea=i,t.Da.id||(X.info("No Period ID given for Period with start time "+i.start+",  Assigning a default"),t.Da.id="__shaka_period_"+i.start),qi.$(i.node,"EventStream").forEach(e.ah.bind(e,i.start,i.duration)),n=qi.$(i.node,"AdaptationSet").map(e.Zg.bind(e,t)).filter(ke.jb),t.Ob){t=[];for(var r=B(n),a=r.next();!a.done;a=r.next())for(var o=(a=B(a.value.kh)).next();!o.done;o=a.next())t.push(o.value);if(t.length!=new Set(t).size)throw new de(2,4,4018)}var s=n.filter(function(e){return!e.pe});if(n.filter(function(e){return e.pe}).forEach(function(n){var t=n.pe.split(" ");s.forEach(function(e){t.includes(e.id)&&e.streams.forEach(function(t){t.trickModeVideo=n.streams.find(function(e){return Tt(t.codecs)[0]==Tt(e.codecs)[0]})})})}),t=kr(s,"video"),r=kr(s,"audio"),!t.length&&!r.length)throw new de(2,4,4004);n=e.a.disableAudio,r.length&&!n||(r=[null]);n=e.a.disableVideo,t.length&&!n||(t=[null]);for(n=[],a=0;a<r.length;a++)for(o=0;o<t.length;o++)!function(e,t,n,i){if(t||n)if(t&&n){var r=t.drmInfos,a=n.drmInfos;if(!r.length||!a.length||0<Yt(r,a).length){a=Yt(t.drmInfos,n.drmInfos);for(var o=0;o<t.streams.length;o++)for(var s=0;s<n.streams.length;s++)r=(n.streams[s].bandwidth||0)+(t.streams[o].bandwidth||0),r={id:e.j++,language:t.language,primary:t.Hd||n.Hd,audio:t.streams[o],video:n.streams[s],bandwidth:r,drmInfos:a,allowedByApplication:!0,allowedByKeySystem:!0},i.push(r)}}else for(a=t||n,o=0;o<a.streams.length;o++)r=a.streams[o].bandwidth||0,r={id:e.j++,language:a.language||"und",primary:a.Hd,audio:t?a.streams[o]:null,video:n?a.streams[o]:null,bandwidth:r,drmInfos:a.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0},i.push(r)}(e,r[a],t[o],n);if(t=[],!e.a.disableText)for(e=kr(s,"text"),r=0;r<e.length;r++)t.push.apply(t,e[r].streams);return{startTime:i.start,textStreams:t,variants:n}}(I,t,n,{start:a,duration:d,node:c,Ed:null==d||s==o.length-1}),r.push(c),l=t.Da.id,I.s.includes(l)||(I.s.push(l),I.c&&(I.b.filterNewPeriod(c),I.c.periods.push(c))),null==d){s!=o.length-1&&X.u("Skipping Period",s+1,"and any subsequent Periods:","Period",s+1,"does not have a valid start time.",r[s+1]),a=null;break}a+=d}if(null==I.c&&I.b.filterAllPeriods(r),w=null!=i?(a!=i&&X.u("@mediaPresentationDuration does not match the total duration of all","Periods."),S=r,T=i,!1):(S=r,T=a,!0),T=T,S=S,E.Bc("static"==b),"static"!=b&&w||E.Ua(T||1/0),E.W()&&!isNaN(I.a.availabilityWindowOverride)&&(g=I.a.availabilityWindowOverride),null==g&&(g=1/0),E.ie(g),E.Nd(v||1),I.c){e.C(0);break}if(I.c={presentationTimeline:E,periods:S,offlineSessionIds:[],minBufferTime:p||0},E.Af())return A=h.$(k,"UTCTiming"),V(e,function(e,n,t){t=t.map(function(e){return{scheme:e.getAttribute("schemeIdUri"),value:e.getAttribute("value")}});var i=e.a.dash.clockSyncUri;return!t.length&&i&&t.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:i}),ke.Pf(t,function(e){var t=e.scheme;switch(e=e.value,t){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return Nr(this,n,e,"HEAD");case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return Nr(this,n,e,"GET");case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return t=Date.parse(e),isNaN(t)?0:t-Date.now();case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":return X.ba("NTP UTCTiming scheme is not supported"),Promise.reject();default:return X.ba("Unrecognized scheme in UTCTiming element",t),Promise.reject()}}.bind(e)).catch(function(){return X.ba("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),0})}(I,f,A),4);e.C(0);break;case 4:if(A=e.A,!I.b)return e.return();E.sf(A),x(e)}})});var I,k,C})}(t,e.data,e.uri)}).then(function(){var e=(Date.now()-n)/1e3;return ue(t.B,1,e),e})}function kr(e,t){return e.filter(function(e){return e.contentType==t})}function Cr(e,t){e.w<0||e.l.R(Math.max(3,e.w-t,ce(e.B)))}function xr(e,t,n){t=t||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,Pd:null,audioSamplingRate:null},n=n||t.Ga;for(var i=qi.cc,r=qi.Rf,a=qi.$(e,"BaseURL").map(qi.Pc),o=e.getAttribute("contentType")||t.contentType,s=e.getAttribute("mimeType")||t.mimeType,u=e.getAttribute("codecs")||t.codecs,r=qi.S(e,"frameRate",r)||t.frameRate,c=e.getAttribute("sar")||t.pixelAspectRatio,l=qi.$(e,"InbandEventStream"),d=t.emsgSchemeIdUris.slice(),h=(l=B(l)).next();!h.done;h=l.next())h=h.value.getAttribute("schemeIdUri"),d.includes(h)||d.push(h);return l=function(e){for(var t=0;t<e.length;++t){var n=e[t],i=n.getAttribute("schemeIdUri");if(i&&(n=n.getAttribute("value")))switch(i){case"urn:mpeg:dash:outputChannelPositionList:2012":return n.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":var r=parseInt(n,10);if(r)return r;X.u("Channel parsing failure! Ignoring scheme and value",i,n);continue;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":if(!(r=parseInt(n,16))){X.u("Channel parsing failure! Ignoring scheme and value",i,n);continue}for(e=0;r;)1&r&&++e,r>>=1;return e;default:X.u("Unrecognized audio channel scheme:",i,n)}}return null}(l=qi.$(e,"AudioChannelConfiguration"))||t.Pd,h=qi.S(e,"audioSamplingRate",i)||t.audioSamplingRate,o=o||Pr(s,u),{Ga:Ce(n,a),yc:qi.Nc(e,"SegmentBase")||t.yc,ob:qi.Nc(e,"SegmentList")||t.ob,Ac:qi.Nc(e,"SegmentTemplate")||t.Ac,width:qi.S(e,"width",i)||t.width,height:qi.S(e,"height",i)||t.height,contentType:o,mimeType:s,codecs:u,frameRate:r,pixelAspectRatio:c,emsgSchemeIdUris:d,id:e.getAttribute("id"),Pd:l,audioSamplingRate:h}}function Nr(e,t,n,i){return(t=lt(t=Ce(t,[n]),e.a.retryParameters)).method=i,t=e.b.networkingEngine.request(4,t),ot(e.g,t),t.promise.then(function(e){if("HEAD"==i){if(!e.headers||!e.headers.date)return X.u("UTC timing response is missing","expected date header"),0;e=e.headers.date}else e=Re(e.data);return e=Date.parse(e),isNaN(e)?(X.u("Unable to parse date from UTC timing response"),0):e-Date.now()})}function Pr(e,t){return Nn(wt(e,t))?"text":e.split("/")[0]}function Mr(e,t,n,i){this.b=e,this.type=t,this.a=n,this.segments=i||null}function Rr(e,t,n,i){this.id=e,this.name=t,this.a=n,this.value=void 0===i?null:i}function Lr(e,t){this.name=e,this.value=t}function Ur(e,t,n){return(e=e.getAttribute(t))?e.value:n||null}function _r(e,t){this.b=t,this.a=e}_("shaka.media.ManifestParser.registerParserByExtension",wr.Xd),wr.gc=function(e,t){wr.dc[e]=t},_("shaka.media.ManifestParser.registerParserByMime",wr.gc),wr.eh=function(){var e={};if(At()){for(var t in wr.dc)e[t]=!0;for(var n in wr.wc)e[n]=!0}t={mpd:"application/dash+xml",m3u8:"application/x-mpegurl",ism:"application/vnd.ms-sstr+xml"};for(var i,r=(n=B(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"])).next();!r.done;r=n.next())e[r=r.value]=At()?!!wr.dc[r]:It(r);for(i in t)e[i]=At()?!!wr.wc[i]:It(t[i]);return e},wr.create=function(n,i,r,a){return G(function e(){var t;return q(e,function(e){switch(e.o){case 1:return z(e,2),V(e,wr.dg(n,i,r,a),4);case 4:return t=e.A,e.return(new t);case 2:throw(t=W(e)).severity=2,t}})})},wr.dg=function(r,a,o,s){return G(function e(){var t,n,i;return q(e,function(e){switch(e.o){case 1:if(i=wr,s){if(n=i.dc[s.toLowerCase()])return e.return(n);X.u("Could not determine manifest type using MIME type ",s)}if(t=i.getExtension(r)){if(n=i.wc[t])return e.return(n);X.u("Could not determine manifest type for extension ",t)}else X.u("Could not find extension for ",r);if(s){e.C(2);break}return V(e,i.og(r,a,o),3);case 3:if(s=e.A){if(i=wr.dc[s])return e.return(i);X.u("Could not determine manifest type using MIME type",s)}case 2:throw new de(2,4,4e3,r)}})})},wr.og=function(n,i,r){return G(function e(){var t;return q(e,function(e){switch(e.o){case 1:return(t=lt([n],r)).method="HEAD",V(e,i.request(0,t).promise,2);case 2:return t=e.A,t=t.headers["content-type"],e.return(t?t.toLowerCase().split(";").shift():"")}})})},wr.getExtension=function(e){return 1==(e=new fe(e).Ca.split("/").pop().split(".")).length?"":e.pop().toLowerCase()},wr.isSupported=function(e,t){return!!At()&&(t in wr.dc||wr.getExtension(e)in wr.wc)},_("shaka.media.PresentationTimeline",Tr),Tr.prototype.getDuration=Tr.prototype.ra=function(){return this.g},Tr.prototype.getMaxSegmentDuration=Tr.prototype.mg=function(){return this.a},Tr.prototype.setDuration=Tr.prototype.Ua=function(e){this.g=e},Tr.prototype.getPresentationStartTime=Tr.prototype.sg=function(){return this.f},Tr.prototype.setClockOffset=Tr.prototype.sf=function(e){this.s=e},Tr.prototype.setStatic=Tr.prototype.Bc=function(e){this.v=e},Tr.prototype.setSegmentAvailabilityDuration=Tr.prototype.ie=function(e){this.j=e},Tr.prototype.setDelay=Tr.prototype.sh=function(e){this.ad=e},Tr.prototype.getDelay=Tr.prototype.ag=function(){return this.ad},Tr.prototype.notifySegments=Tr.prototype.$b=function(e,t){var n;0!=e.length&&(n=e[e.length-1].endTime+t,this.Od(e[0].startTime+t),this.a=e.reduce(function(e,t){return Math.max(e,t.endTime-t.startTime)},this.a),this.b=Math.max(this.b,n),null!=this.f&&this.w&&(this.f=(Date.now()+this.s)/1e3-this.b-this.a),X.I("notifySegments:","maxSegmentDuration="+this.a))},Tr.prototype.notifyMinSegmentStartTime=Tr.prototype.Od=function(e){this.c=null==this.c?e:Math.min(this.c,e)},Tr.prototype.notifyMaxSegmentDuration=Tr.prototype.Nd=function(e){this.a=Math.max(this.a,e),X.I("notifyNewSegmentDuration:","maxSegmentDuration="+this.a)},Tr.prototype.offset=function(e){null!=this.c&&(this.c+=e),null!=this.b&&(this.b+=e)},Tr.prototype.isLive=Tr.prototype.W=function(){return 1/0==this.g&&!this.v},Tr.prototype.isInProgress=Tr.prototype.Bb=function(){return 1/0!=this.g&&!this.v},Tr.prototype.getSegmentAvailabilityStart=Tr.prototype.rc=function(){if(1/0==this.j)return this.l;var e=this.Sb()-this.j;return Math.max(this.l,e)},Tr.prototype.setUserSeekStart=Tr.prototype.vf=function(e){this.l=e},Tr.prototype.getSegmentAvailabilityEnd=Tr.prototype.Sb=function(){return this.W()||this.Bb()?Math.min(Math.max(0,(Date.now()+this.s)/1e3-this.a-this.f),this.g):this.g},Tr.prototype.getSafeSeekRangeStart=Tr.prototype.qc=function(e){var t=Math.max(this.c,this.l);if(1/0==this.j)return t;var n=this.Sb()-this.j;return e=Math.min(n+e,this.ab()),Math.max(t,e)},Tr.prototype.getSeekRangeStart=Tr.prototype.Rb=function(){return this.qc(0)},Tr.prototype.getSeekRangeEnd=Tr.prototype.ab=function(){var e=this.W()||this.Bb()?this.ad:0;return Math.max(0,this.Sb()-e)},Tr.prototype.usingPresentationStartTime=Tr.prototype.Af=function(){return!(null==this.f||null!=this.b&&this.w)},_("shaka.dash.DashParser",Ar),(e=Ar.prototype).configure=function(e){this.a=e},e.start=function(n,i){var r=this;return G(function e(){var t;return q(e,function(e){switch(e.o){case 1:return r.f=[n],r.b=i,V(e,Ir(r),2);case 2:if(t=e.A,r.b&&Cr(r,t),!r.b)throw new de(2,7,7001);return e.return(r.c)}})})},e.stop=function(){return this.a=this.b=null,this.f=[],this.c=null,this.s=[],this.v={},null!=this.l&&(this.l.stop(),this.l=null),this.g.destroy()},e.update=function(){Ir(this).catch(function(e){this.b&&this.b.onError(e)}.bind(this))},e.onExpirationUpdated=function(){},e.Zg=function(t,e){if(t.oa=xr(e,t.Da,null),"image"==t.oa.contentType)return X.u("Skipping Image AdaptationSet",t.oa),null;var n=!1,i=(d=qi.$(e,"Role")).map(function(e){return e.getAttribute("value")}).filter(ke.jb),r=void 0,a="text"==t.oa.contentType;a&&(r="subtitle");for(var o=0;o<d.length;o++){var s=d[o].getAttribute("schemeIdUri");if(null==s||"urn:mpeg:dash:role:2011"==s)switch(s=d[o].getAttribute("value"),s){case"main":n=!0;break;case"caption":case"subtitle":r=s}}var u=null,c=!1;qi.$(e,"EssentialProperty").forEach(function(e){"http://dashif.org/guidelines/trickmode"==e.getAttribute("schemeIdUri")?u=e.getAttribute("value"):c=!0}),o=qi.$(e,"Accessibility");var l=new Map,d={};for(s=(o=B(o)).next();!s.done;d={lc:d.lc},s=o.next()){var s=(h=s.value).getAttribute("schemeIdUri"),h=h.getAttribute("value");"urn:scte:dash:cc:cea-608:2015"==s||"urn:scte:dash:cc:cea-708:2015"==s?(d.lc=1,null!=h?h.split(";").forEach(function(n){return function(e){var t;e.includes("=")?(t=(e=e.split("="))[0].startsWith("CC")?e[0]:"CC"+e[0],e=e[1].split(",")[0].split(":").pop()):(t="CC"+n.lc,n.lc+=2),l.set(t,Q(e))}}(d)):l.set("CC1","und")):"urn:mpeg:dash:role:2011"==s&&null!=h&&(i.push(h),"captions"==h&&(r="caption"))}if(c)return null;var f=Yi(d=qi.$(e,"ContentProtection"),this.a.dash.customScheme,this.a.dash.ignoreDrmInfo);if(d=Q(e.getAttribute("lang")||"und"),o=e.getAttribute("label"),(s=qi.$(e,"Label"))&&s.length&&((s=s[0]).textContent&&(o=s.textContent)),0!=(i=(s=qi.$(e,"Representation")).map(this.bh.bind(this,t,f,r,d,o,n,i,l)).filter(function(e){return!!e})).length)return t.oa.contentType&&"application"!=t.oa.contentType||(t.oa.contentType=Pr(i[0].mimeType,i[0].codecs),i.forEach(function(e){e.type=t.oa.contentType})),i.forEach(function(t){f.drmInfos.forEach(function(e){t.keyId&&e.keyIds.push(t.keyId)})}),a=s.map(function(e){return e.getAttribute("id")}).filter(ke.jb),{id:t.oa.id||"__fake__"+this.j++,contentType:t.oa.contentType,language:d,Hd:n,streams:i,drmInfos:f.drmInfos,pe:u,kh:a};if(this.a.dash.ignoreEmptyAdaptationSet||a)return null;throw new de(2,4,4003)},e.bh=function(e,t,n,i,r,a,o,s,u){if(e.G=xr(u,e.oa,null),l=e.G,c=l.yc?1:0,c+=l.ob?1:0,!(0!=(c+=l.Ac?1:0)?(1!=c&&(X.u("Representation contains multiple segment information sources:","the Representation should only contain one of SegmentBase,","SegmentList, or SegmentTemplate.",l),l.yc?(X.info("Using SegmentBase by default."),l.ob=null):X.info("Using SegmentList by default."),l.Ac=null),!0):"text"==l.contentType||"application"==l.contentType||(X.u("Representation does not contain a segment information source:","the Representation must contain one of SegmentBase, SegmentList,",'SegmentTemplate, or explicitly indicate that it is "text".',l),!1)))return X.u("Skipping Representation",e.G),null;var c;e.bandwidth=qi.S(u,"bandwidth",qi.Zc)||0;var l="text"==(l=e.G.contentType)||"application"==l;try{var d,h,f,p=this.lh.bind(this);f=e.G.yc?function(e,t){var n=Number(er(e,gr,"presentationTimeOffset"))||0,i=er(e,gr,"timescale"),r=1;i&&(r=qi.Zc(i)||1),n=n/r||0,i=pr(e,gr);var a=e.G.contentType,r=e.G.mimeType.split("/")[1];if("text"!=a&&"mp4"!=r&&"webm"!=r)throw X.error("SegmentBase specifies an unsupported container type.",e.G),new de(2,4,4006);if("webm"==r&&!i)throw X.error("SegmentBase does not contain sufficient segment information:","the SegmentBase uses a WebM container,","but does not contain an Initialization element.",e.G),new de(2,4,4005);a=tr(e,gr,"RepresentationIndex");var o,s=er(e,gr,"indexRange"),u=e.G.Ga,s=qi.$c(s||"");if(a&&((o=a.getAttribute("sourceURL"))&&(u=Ce(e.G.Ga,[o])),s=qi.S(a,"range",qi.$c,s)),!s)throw X.error("SegmentBase does not contain sufficient segment information:","the SegmentBase does not contain @indexRange","or a RepresentationIndex element.",e.G),new de(2,4,4002);return{createSegmentIndex:(r=mr(e,t,i,u,s.start,s.end,r,n)).createSegmentIndex,findSegmentPosition:r.findSegmentPosition,getSegmentReference:r.getSegmentReference,initSegmentReference:i,Fa:n}}(e,p):e.G.ob?vr(e,this.v):e.G.Ac?yr(e,p,this.v,!!this.c):(d=e.G.Ga,h=e.ea.duration||0,{createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(e){return 0<=e&&e<h?1:null},getSegmentReference:function(e){return 1!=e?null:new rr(1,0,h,function(){return d},0,null)},initSegmentReference:null,Fa:0})}catch(e){if(l&&4002==e.code)return null;throw e}return u=function(e,t,n,i){var r=Yi(e,t,i);if(n.Ke)e=1==n.drmInfos.length&&!n.drmInfos[0].keySystem,t=0==r.drmInfos.length,(0==n.drmInfos.length||e&&!t)&&(n.drmInfos=r.drmInfos),n.Ke=!1;else if(0<r.drmInfos.length&&(n.drmInfos=n.drmInfos.filter(function(t){return r.drmInfos.some(function(e){return e.keySystem==t.keySystem})}),0==n.drmInfos.length))throw new de(2,4,4008);return r.Fe||n.Fe}(u=qi.$(u,"ContentProtection"),this.a.dash.customScheme,t,this.a.dash.ignoreDrmInfo),{id:this.j++,originalId:e.G.id,createSegmentIndex:f.createSegmentIndex,findSegmentPosition:f.findSegmentPosition,getSegmentReference:f.getSegmentReference,initSegmentReference:f.initSegmentReference,presentationTimeOffset:f.Fa,mimeType:e.G.mimeType,codecs:e.G.codecs,frameRate:e.G.frameRate,pixelAspectRatio:e.G.pixelAspectRatio,bandwidth:e.bandwidth,width:e.G.width,height:e.G.height,kind:n,encrypted:0<t.drmInfos.length,keyId:u,language:i,label:r,type:e.oa.contentType,primary:a,trickModeVideo:null,emsgSchemeIdUris:e.G.emsgSchemeIdUris,roles:o,channelsCount:e.G.Pd,audioSamplingRate:e.G.audioSamplingRate,closedCaptions:s}},e.ah=function(i,r,e){var a=qi.cc,o=e.getAttribute("schemeIdUri")||"",s=e.getAttribute("value")||"",u=qi.S(e,"timescale",a)||1;qi.$(e,"Event").forEach(function(e){var t=qi.S(e,"presentationTime",a)||0,n=qi.S(e,"duration",a)||0,n=(t=t/u+i)+n/u;null!=r&&(t=Math.min(t,i+r),n=Math.min(n,i+r)),e={schemeIdUri:o,value:s,startTime:t,endTime:n,id:e.getAttribute("id")||"",eventElement:e},this.b.onTimelineRegionAdded(e)}.bind(this))},e.lh=function(e,t,n){return e=Sr(e,t,n,this.a.retryParameters),e=this.b.networkingEngine.request(1,e),ot(this.g,e),e.promise.then(function(e){return e.data})},wr.Xd("mpd",Ar),wr.gc("application/dash+xml",Ar),wr.gc("video/vnd.mpeg.dash.mpd",Ar),Rr.prototype.toString=function(){var e="#"+this.name,t=this.a?this.a.map(function(e){return e.name+"="+(isNaN(Number(e.value))?'"'+e.value+'"':e.value)}):[];return this.value&&t.unshift(this.value),0<t.length&&(e+=":"+t.join(",")),e},Rr.prototype.getAttribute=function(t){var e=this.a.filter(function(e){return e.name==t});return e.length?e[0]:null};var Or={Pb:function(e,t){return e.filter(function(e){return e.name==t})},xb:function(e,t){t=Or.Pb(e,t);return t.length?t[0]:null},ud:function(e,n,i){return e.filter(function(e){var t=e.getAttribute("TYPE");return e=e.getAttribute("GROUP-ID"),t.value==n&&e.value==i})},od:function(e,t){return Ce([e],[t])[0]},Dd:function(e){return/^#(?!EXT)/m.test(e)}};function Dr(e){this.b=e,this.a=0}function Fr(e){jr(e,/[ \t]+/gm)}function jr(e,t){t.lastIndex=e.a;t=null==(t=t.exec(e.b))?null:{position:t.index,length:t[0].length,oh:t};return e.a==e.b.length||null==t||t.position!=e.a?null:(e.a+=t.length,t.oh)}function Kr(e){return e.a!=e.b.length&&(e=jr(e,/[^ \t\n]*/gm))?e[0]:null}function Br(){this.a=0}function Gr(e,t,n){var i=(t=(t=Re(t)).replace(/\r\n|\r(?=[^\n]|$)/gm,"\n").trim()).split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(i[0]))throw new de(2,4,4015);t=0;for(var r=1;r<i.length;r++)if(!Or.Dd(i[r])){var a=Vr(e,i[r]);if(--e.a,zr.includes(a.name)){t=1;break}"EXT-X-STREAM-INF"==a.name&&(r+=1)}for(r=[],a=1;a<i.length;)if(Or.Dd(i[a]))a+=1;else{var o=Vr(e,i[a]);if(Hr.includes(o.name)){if(1!=t)throw new de(2,4,4017);return new Mr(n,t,r,e=function(t,n,e,i){var r=[],a=[];return e.forEach(function(e){if(/^(#EXT)/.test(e))e=Vr(t,e),(zr.includes(e.name)?i:a).push(e);else{if(Or.Dd(e))return[];e=Or.od(n,e.trim()),r.push(new _r(e,a)),a=[]}}),r}(e,n,i=i.splice(a,i.length-a),r))}r.push(o),a+=1,"EXT-X-STREAM-INF"==o.name&&(o.a.push(new Lr("URI",i[a])),a+=1)}return new Mr(n,t,r)}function Vr(e,t){e=e.a++;if(!(a=t.match(/^#(EXT[^:]*)(?::(.*))?$/)))throw new de(2,4,4016,t);var n,i,t=a[1],r=a[2],a=[];if(r){(i=jr(r=new Dr(r),/^([^,=]+)(?:,|$)/g))&&(n=i[1]);for(var o=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;i=jr(r,o);)a.push(new Lr(i[1],i[2]||i[3]))}return new Rr(e,t,a,n)}var zr="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-MAP EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST".split(" "),Hr="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE".split(" ");function Wr(e){try{var t=Wr.parse(e);return Je({uri:e,Ud:e,data:t.data,headers:{"content-type":t.contentType}})}catch(e){return Ye(e)}}function qr(){var e=this;this.a=this.f=null,this.Z=1,this.H=new Map,this.O=new Set,this.b=new Map,this.c=null,this.B="",this.w=new Br,this.L=0,this.j=new ze(function(){var n;n=e,G(function e(){var t;return q(e,function(e){switch(e.o){case 1:return(X.info("Updating manifest..."),n.f)?(z(e,2),V(e,n.update(),4)):e.return();case 4:t=n.L,n.j.R(t),H(e,0);break;case 2:if(t=W(e),!n.f)return e.return();t.severity=1,n.f.onError(t),n.j.R(.1),x(e)}})})}),this.g=da,this.v=null,this.F=0,this.J=1/0,this.l=new at,this.K=[],this.s=new Map,this.Y=!1}function Xr(e){e.forEach(function(e){var t;e&&(t=(t=e.stream.codecs.split(",")).filter(function(e){return"mp4a.40.34"!=e}),e.stream.codecs=t.join(","))})}function Yr(c,l,d){return G(function e(){var n,i,r,a,o,s,u;return q(e,function(e){switch(e.o){case 1:return(n=ia(l,"URI"),c.b.has(n))?e.return(c.b.get(n)):(i=ia(l,"TYPE").toLowerCase(),u=Ne,"subtitles"==i&&(i=u.Oa),r=Q(Ur(l,"LANGUAGE","und")),a=Ur(l,"NAME"),s=l.getAttribute("DEFAULT"),o="YES"==s,u=Ur(l,"CHANNELS"),t="audio"==i&&u?(t=u.split("/")[0],parseInt(t,10)):null,s=t,u=Ur(l,"CHARACTERISTICS"),V(e,$r(c,n,d,i,r,o,a,s,null,u),2));var t;case 2:return(u=e.A,c.b.has(n))?e.return(c.b.get(n)):null==u?e.return(null):(c.H.set(l.id,u),c.b.set(n,u),e.return(u))}})})}function $r(M,R,L,U,_,O,D,F,j,K){return G(function e(){var h,f,p,m,g,v,b,y,E,w,T,S,A,I,k,C,x,N,P;return q(e,function(e){switch(e.o){case 1:return f=(h=Or).od(M.B,R),V(e,ca(M,lt([f],M.a.retryParameters),0),2);case 2:if(S=e.A,f=S.uri,1!=(P=Gr(M.w,S.data,f)).type)throw new de(2,4,4017);p=[],P.segments.forEach(function(e){e=h.Pb(e.b,"EXT-X-KEY"),p.push.apply(p,e)}),m=!1,g=[],v=null;for(var t=B(p),n=t.next();!n.done;n=t.next())if(E=n.value,"NONE"!=(y=ia(E,"METHOD"))){if(m=!0,"AES-128"==y)return X.u("Unsupported HLS Encryption",y),M.Y=!0,e.return(null);b=ia(E,"KEYFORMAT"),(E=(y=la[b])?y(E):null)?(E.keyIds.length&&(v=E.keyIds[0]),g.push(E)):X.u("Unsupported HLS KEYFORMAT",b)}if(m&&!g.length)throw new de(2,4,4026);return i=M,r=P,a=ha,l=Or.xb(r.a,"EXT-X-PLAYLIST-TYPE"),d=Or.xb(r.a,"EXT-X-ENDLIST"),d=l&&"VOD"==l.value||d,l=l&&"EVENT"==l.value&&!d,l=!d&&!l,d?ua(i,a.ub):(ua(i,l?a.ve:a.Df),a=ra(r.a,"EXT-X-TARGETDURATION"),a=Number(a.value),i.F=Math.max(a,i.F),i.J=Math.min(a,i.J)),w=function(e,t){if(1==t.length)return t[0];e=na(e,t);if(null!=e)return e;throw new de(2,4,4025,t)}(U,L),V(e,(o=M,s=U,u=w,c=P,G(function e(){var t,n,i,r,a;return q(e,function(e){switch(e.o){case 1:return(t=Ne,n=c.segments[0].a,r=new fe(n),i=r.Ca.split(".").pop(),r=sa[s],r=r[i])?e.return(r):s==t.Oa?u&&"vtt"!=u&&"wvtt"!=u?e.return("application/mp4"):e.return("text/vtt"):((a=lt([n],o.a.retryParameters)).method="HEAD",V(e,ca(o,a,1),2));case 2:if(a=e.A,!(a=a.headers["content-type"]))throw new de(2,4,4021,i);return e.return(a.split(";")[0])}})})),3);case 3:return T=e.A,oa.includes(T)&&(w=""),I=(A=h.xb(P.a,"EXT-X-MEDIA-SEQUENCE"))?Number(A.value):0,z(e,4),V(e,ea(M,R,P,I,T,w),6);case 6:C=e.A,H(e,5);break;case 4:if(4035==(k=W(e)).code)return X.ba("Skipping unsupported HLS stream",T,R),e.return(null);throw k;case 5:if(S=C[0].startTime,A=C[C.length-1].endTime,I=A-S,k=new or(C),C=Jr(P),P=void 0,"text"==U&&(P="subtitle"),x=[],K)for(n=(t=B(K.split(","))).next();!n.done;n=t.next())N=n.value,x.push(N);return P={id:M.Z++,originalId:D,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:k.find.bind(k),getSegmentReference:k.get.bind(k),initSegmentReference:C,presentationTimeOffset:0,mimeType:T,codecs:w,kind:P,encrypted:m,keyId:v,language:_,label:D,type:U,primary:O,trickModeVideo:null,emsgSchemeIdUris:null,frameRate:void 0,pixelAspectRatio:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:x,channelsCount:F,audioSamplingRate:null,closedCaptions:j},e.return({stream:P,zc:k,drmInfos:g,jd:R,Jf:f,Ld:S,Ph:A,duration:I})}var o,s,u,c,i,r,a,l,d})})}function Jr(e){var t=Or.Pb(e.a,"EXT-X-MAP");if(!t.length)return null;if(1<t.length)throw new de(2,4,4020);var n=ia(t=t[0],"URI"),i=Or.od(e.b,n);return e=0,n=null,(t=Ur(t,"BYTERANGE"))&&(e=t.split("@"),t=Number(e[0]),n=(e=Number(e[1]))+t-1),new ir(function(){return[i]},e,n)}function Zr(e,t,n,i){var r=t.b,a=t.a;t=ra(r,"EXTINF").value.split(","),t=i+Number(t[0]);var o=0,s=null;return(r=Or.xb(r,"EXT-X-BYTERANGE"))&&(o=r.value.split("@"),r=Number(o[0]),s=(o=o[1]?Number(o[1]):e.a+1)+r-1),new rr(n,i,t,function(){return[a]},o,s)}function Qr(t){t.c&&(t.K.forEach(function(e){t.c.$b(e,0)}),t.K=[])}function ea(v,b,y,E,w,T){return G(function e(){var n,i,r,a,h,f,p,m,g;return q(e,function(e){switch(e.o){case 1:return n=y.segments,i=[],r=n[0].a,a=Zr(null,n[0],E,0),h=Jr(y),V(e,(o=v,s=b,u=h,c=a,l=w,d=T,G(function e(){var i,r,a;return q(e,function(e){switch(e.o){case 1:if(o.v){if(r=o.b.get(s),r=r.zc,r=r.get(c.position))return X.I("Found segment start time in previous manifest"),e.return(r.startTime);X.debug("Unable to find segment start time in previous manifest!")}if(X.I("Fetching segment to find start time"),l=l.toLowerCase(),oa.includes(l))throw X.ba("Raw formats are not yet supported.  Skipping "+l),new de(1,4,4035);if("video/webm"==l)throw X.ba("WebM in HLS is not yet supported.  Skipping."),new de(1,4,4035);if("video/mp4"==l||"audio/mp4"==l)return i=[ta(o,c)],u&&i.push(ta(o,u)),V(e,Promise.all(i),3);e.C(2);break;case 3:return r=e.A,i=r[0],r=r[1]||r[0],e.return(function(e,t,n,i){var r=0;if((new ji).P("moov",Ki).P("trak",Ki).P("mdia",Ki).za("mdhd",function(e){e.reader.V(0==e.version?8:16),r=e.reader.M(),e.parser.stop()}).parse(i,!0),!r)throw X.error("Unable to find timescale in init segment!"),new de(2,4,4030,e,t);var a=0,o=!1;if((new ji).P("moof",Ki).P("traf",Ki).za("tfdt",function(e){a=(0==e.version?e.reader.M():e.reader.fc())/r,o=!0,e.parser.stop()}).parse(n,!0),!o)throw new de(2,4,4030,e,t);return a}(s,i.uri,i.data,r.data));case 2:if("video/mp2t"==l)return V(e,ta(o,c),5);e.C(4);break;case 5:return a=e.A,e.return(function(e,t,n){function i(){a.seek(o+188),71!=(s=a.Ea())&&(a.seek(o+192),s=a.Ea()),71!=s&&(a.seek(o+204),s=a.Ea()),71!=s&&r(),a.nf(1)}function r(){throw new de(2,4,4030,e,t)}for(var a=new Oi(new DataView(n),0),o=0,s=0;;)if(o=a.va(),71!=(s=a.Ea())&&r(),8191==(8191&(n=a.xc())))i();else if(16384&n){if(0!=(n=(48&a.Ea())>>4)&&2!=n||r(),3==n&&(n=a.Ea(),a.V(n)),1==a.M()>>8){a.V(3),0!=(n=a.Ea()>>6)&&1!=n||r(),0==a.Ea()&&r(),n=a.Ea();var u=a.xc(),c=a.xc();return(1073741824*((14&n)>>1)+((65534&u)<<14|(65534&c)>>1))/9e4}i()}else i()}(s,a.uri,a.data));case 4:if("application/mp4"==l||l.startsWith("text/"))return V(e,ta(o,c),7);e.C(6);break;case 7:return a=e.A,e.return((t=l,n=d,e=a.data,Nn(t=wt(t,n))?(Pn(n=new Cn(null),t),n.Rc(e)):0));case 6:throw new de(2,4,4030,s)}var t,n})})),2);case 2:f=e.A,X.debug("First segment",r.split("/").pop(),"starts at",f);for(var t=0;t<n.length;++t)p=n[t],m=i[i.length-1],g=0==t?f:m.endTime,g=Zr(m,p,E+t,g),i.push(g);return v.K.push(i),Qr(v),e.return(i)}var o,s,u,c,l,d})})}function ta(a,o){return G(function e(){var t,n,i,r;return q(e,function(e){switch(e.o){case 1:return(r=1,t=Sr(o.c(),o.b,o.b+2048-1,a.a.retryParameters),n=Sr(o.c(),o.b,o.a,a.a.retryParameters),a.a.hls.useFullSegmentsForStartTime)?e.return(ca(a,n,r)):(z(e,2),V(e,ca(a,t,r),4));case 4:return i=e.A,e.return(i);case 2:if(7001==(i=W(e)).code)throw i;return X.ba("Unable to fetch a partial HLS segment! Falling back to a full segment request, which is expensive!  Your server should support Range requests and CORS preflights.",t.uris[0]),V(e,ca(a,n,r),5);case 5:return r=e.A,e.return(r)}})})}function na(e,t){for(var n=aa[e],i=0;i<n.length;i++)for(var r=0;r<t.length;r++)if(n[i].test(t[r].trim()))return t[r].trim();return"text"==e?"":null}function ia(e,t){e=e.getAttribute(t);if(!e)throw new de(2,4,4023,t);return e.value}function ra(e,t){e=Or.xb(e,t);if(!e)throw new de(2,4,4024,t);return e}_("shaka.net.DataUriPlugin",Wr),Wr.parse=function(e){var t=e.split(":");if(t.length<2||"data"!=t[0])throw X.error("Bad data URI, failed to parse scheme"),new de(2,1,1004,e);if((t=t.slice(1).join(":").split(",")).length<2)throw X.error("Bad data URI, failed to extract encoding and MIME type"),new de(2,1,1004,e);var n=t[0];e=d.decodeURIComponent(t.slice(1).join(",")),n=(t=n.split(";"))[0];var i=!1;return 1<t.length&&"base64"==t[t.length-1]&&(i=!0,t.pop()),{data:i?je.Za(e).buffer:_e(e),contentType:n}},ct("data",Wr),_("shaka.hls.HlsParser",qr),(e=qr.prototype).configure=function(e){this.a=e},e.start=function(n,i){var r=this;return G(function e(){var t;return q(e,function(e){switch(e.o){case 1:return r.f=i,V(e,ca(r,lt([n],r.a.retryParameters),0),2);case 2:return t=e.A,r.B=t.uri,V(e,(p=r,m=t.data,G(function e(){var i,r,a,o,s,l,d,h,f;return q(e,function(e){switch(e.o){case 1:if(0!=(l=Gr(p.w,m,p.B)).type)throw new de(2,4,4022);return V(e,(u=p,c=l,G(function e(){var t,n,i,r,a,o,s;return q(e,function(e){switch(e.o){case 1:return t=Or,s=ke,n=c.a,r=t.Pb(c.a,"EXT-X-MEDIA"),i=r.filter(function(e){return"SUBTITLES"==ia(e,"TYPE")}.bind(u)),i=i.map(function(r){var a=this;return G(function e(){var t;return q(e,function(e){switch(e.o){case 1:return a.a.disableText?e.return(null):(z(e,2),V(e,(n=a,i=r,G(function e(){var t;return q(e,function(e){switch(e.o){case 1:return ia(i,"TYPE"),V(e,Yr(n,i,[]),2);case 2:return t=e.A,e.return(t.stream)}})})),4));case 4:return e.return(e.A);case 2:if(t=W(e),a.a.hls.ignoreTextStreamFailures)return e.return(null);throw t}var n,i})})}.bind(u)),r=r.filter(function(e){return"CLOSED-CAPTIONS"==ia(e,"TYPE")}),function(e,t){for(var n=B(t),i=n.next();!i.done;i=n.next()){ia(i=i.value,"TYPE");var r=Ur(i,"LANGUAGE")||"und";r=Q(r);var a=ia(i,"GROUP-ID");i=ia(i,"INSTREAM-ID"),e.s.get(a)||e.s.set(a,new Map),e.s.get(a).set(i,r)}}(u,r),V(e,Promise.all(i),2);case 2:return a=e.A,o=t.Pb(n,"EXT-X-STREAM-INF"),o=o.map(function(e){return S=this,A=e,I=c,G(function e(){var t,n,i,r,c,l,d,h,f,p,m,g,v,b,y,E,w,T;return q(e,function(e){switch(e.o){case 1:return t=Ne,n=Or,f=[],S.a.disableVideo||f.push("avc1.42E01E"),S.a.disableAudio||f.push("mp4a.40.2"),E=f.join(","),g=Ur(A,"CODECS",E),i=function(e){for(var t=new Set,n=[],i=(e=B(e)).next();!i.done;i=e.next()){var r=Tt(i=i.value)[0];t.has(r)?X.debug("Ignoring duplicate codec"):(n.push(i),t.add(r))}return n}(g.split(/\s*,\s*/)),r=A.getAttribute("RESOLUTION"),l=c=null,d=Ur(A,"FRAME-RATE"),h=Number(ia(A,"BANDWIDTH")),r&&(p=r.value.split("x"),c=p[0],l=p[1]),v=(v=(v=n.Pb(I.a,"EXT-X-MEDIA")).filter(function(e){return"CLOSED-CAPTIONS"!=ia(e,"TYPE")})).filter(function(e){var t=Ur(e,"URI")||"";return"SUBTITLES"==(Ur(e,"TYPE")||"")||""!=t}),f=Ur(A,"AUDIO"),E=Ur(A,"VIDEO"),f?v=n.ud(v,"AUDIO",f):E&&(v=n.ud(v,"VIDEO",E)),(g=na(t.Oa,i))&&((p=Ur(A,"SUBTITLES"))&&(m=n.ud(v,"SUBTITLES",p)).length&&(w=S.H.get(m[0].id))&&(w.stream.codecs=g),nt(i,g)),w=v.map(function(e){return Yr(this,e,i)}.bind(S)),g=[],v=[],V(e,Promise.all(w),2);case 2:if(w=(w=e.A).filter(function(e){return null!=e}),f?g=w:E&&(v=w),X.debug("Guessing stream type for",A.toString()),E=!1,g.length||v.length?g.length?(w=ia(A,"URI"),T=g[0].jd,w==T?(X.debug("Guessing audio-only."),y=t.jc,E=!0):(X.debug("Guessing video."),y=t.tb)):(X.debug("Guessing audio."),y=t.jc):1==i.length?(T=na(t.tb,i),y=r||d||T?(X.debug("Guessing video-only."),t.tb):(X.debug("Guessing audio-only."),t.jc)):(X.debug("Guessing multiplexed audio+video."),y=t.tb,i=[i.join(",")]),E){e.C(3);break}return V(e,(a=S,o=A,s=i,u=y,G(function e(){var t,n,i,r;return q(e,function(e){switch(e.o){case 1:return(t=Ne,n=ia(o,"URI"),a.b.has(n))?e.return(a.b.get(n)):(i=Ur(o,"CLOSED-CAPTIONS"),r=null,u==t.tb&&i&&"NONE"!=i&&(r=a.s.get(i)),V(e,$r(a,n,s,u,"und",!1,null,null,r,null),2));case 2:return null==(r=e.A)?e.return(null):a.b.has(n)?e.return(a.b.get(n)):(a.b.set(n,r),e.return(r))}})})),4);case 4:b=e.A;case 3:if(b)b.stream.type==t.jc?g=[b]:v=[b];else if(null===b)return X.debug("streamInfo is null"),e.return([]);return v&&Xr(v),g&&Xr(g),e.return(function(e,t,n,i,r,a,o){n.forEach(function(e){(e=e.stream)&&(e.width=Number(r)||void 0,e.height=Number(a)||void 0,e.frameRate=Number(o)||void 0)}.bind(e));var s=!!e.a&&e.a.disableAudio;t.length&&!s||(t=[null]);s=!!e.a&&e.a.disableVideo,n.length&&!s||(n=[null]);s=[];for(var u=(t=B(t)).next();!u.done;u=t.next()){u=u.value;for(var c=B(n),l=c.next();!l.done;l=c.next()){var d=l.value;l=u?u.stream:null;var h=d?d.stream:null,f=u?u.drmInfos:null,p=d?d.drmInfos:null;d=(d?d.jd:"")+" - "+(u?u.jd:"");var m=void 0;if(l&&h){if(f.length&&p.length&&!(0<Yt(f,p).length)){X.u("Incompatible DRM info in HLS variant.  Skipping.");continue}m=Yt(f,p)}else l?m=f:h&&(m=p);e.O.has(d)?X.debug("Skipping variant which only differs in text streams."):(l=function(e,t,n,i,r){return{id:e.Z++,language:t?t.language:"und",primary:!!t&&t.primary||!!n&&n.primary,audio:t,video:n,bandwidth:i,drmInfos:r,allowedByApplication:!0,allowedByKeySystem:!0}}(e,l,h,i,m),s.push(l),e.O.add(d))}}return s}(S,g,v,h,c,l,d))}var a,o,s,u})});var S,A,I}.bind(u)),V(e,Promise.all(o),3);case 3:return o=e.A,s=(s=o.reduce(s.nd,[])).filter(function(e){return null!=e}),e.return({startTime:0,variants:s,textStreams:a.filter(function(e){return null!=e})})}})})),2);case 2:if(i=e.A,!p.f)throw new de(2,7,7001);if(p.Y&&0==i.variants.length)throw X.info("No stream is created, because we don't support AES-128","encryption yet"),new de(2,4,4034);p.f.filterAllPeriods([i]),r=1/0,o=1/(a=0);for(var t=B(p.b.values()),n=t.next();!n.done;n=t.next())s=n.value,r=Math.min(r,s.Ld),a=Math.max(a,s.Ld),"text"!=s.stream.type&&(o=Math.min(o,s.duration));if(p.g!=ha.ub?(p.c=new Tr(0,3*p.F),p.c.Bc(!1)):(p.c=new Tr(null,0),p.c.Bc(!0)),Qr(p),p.g!=ha.ub){for(p.L=p.J,p.g==ha.ve&&(l=p.c.ad,isNaN(p.a.availabilityWindowOverride)||(l=p.a.availabilityWindowOverride),p.c.ie(l)),d=0;95443.7176888889<=a;)d+=95443.7176888889,a-=95443.7176888889;if(d)for(X.debug("Offsetting live streams by",d,"to compensate for rollover"),n=(t=B(p.b.values())).next();!n.done;n=t.next())(h=n.value).Ld<95443.7176888889?(X.I("Offset applied to",h.stream.type),h.stream.presentationTimeOffset=-d,h.zc.offset(d)):X.I("Offset NOT applied to",h.stream.type)}else for(p.c.Ua(o),p.c.offset(-r),n=(t=B(p.b.values())).next();!n.done;n=t.next())(f=n.value).stream.presentationTimeOffset=r,f.zc.offset(-r),sr(f.zc,o);p.v={presentationTimeline:p.c,periods:[i],offlineSessionIds:[],minBufferTime:0},x(e)}var u,c})})),3);case 3:return 0<(t=r.L)&&r.j.R(t),e.return(r.v)}var p,m})})},e.stop=function(){this.j&&(this.j.stop(),this.j=null);var e=[];return this.l&&(e.push(this.l.destroy()),this.l=null),this.a=this.f=null,this.H.clear(),this.O.clear(),this.b.clear(),this.v=null,Promise.all(e)},e.update=function(){if(this.g!=ha.ub){for(var e=[],t=B(this.b.values()),n=t.next();!n.done;n=t.next())e.push(function(o,s){return G(function e(){var t,n,i,r,a;return q(e,function(e){switch(e.o){case 1:return t=Or,n=ha,r=s.Jf,V(e,ca(o,lt([r],o.a.retryParameters),0),2);case 2:if(r=e.A,1!=(i=Gr(o.w,r.data,r.uri)).type)throw new de(2,4,4017);return r=(a=t.xb(i.a,"EXT-X-MEDIA-SEQUENCE"))?Number(a.value):0,a=s.stream,V(e,ea(o,s.jd,i,r,a.mimeType,a.codecs),3);case 3:a=e.A,s.zc.a=a,a=a[a.length-1],t.xb(i.a,"EXT-X-ENDLIST")&&(ua(o,n.ub),o.c.Ua(a.endTime)),x(e)}})})}(this,n.value));return Promise.all(e)}},e.onExpirationUpdated=function(){};var aa={audio:[/^vorbis$/,/^opus$/,/^flac$/,/^mp4a/,/^[ae]c-3$/],video:[/^avc/,/^hev/,/^hvc/,/^vp0?[89]/,/^av1$/],text:[/^vtt$/,/^wvtt/,/^stpp/]},oa=["audio/aac","audio/ac3","audio/ec3","audio/mpeg"],sa={audio:{mp4:"audio/mp4",mp4a:"audio/mp4",m4s:"audio/mp4",m4i:"audio/mp4",m4a:"audio/mp4",m4f:"audio/mp4",cmfa:"audio/mp4",ts:"video/mp2t",aac:"audio/aac",ac3:"audio/ac3",ec3:"audio/ec3",mp3:"audio/mpeg"},video:{mp4:"video/mp4",mp4v:"video/mp4",m4s:"video/mp4",m4i:"video/mp4",m4v:"video/mp4",m4f:"video/mp4",cmfv:"video/mp4",ts:"video/mp2t"},text:{mp4:"application/mp4",m4s:"application/mp4",m4i:"application/mp4",m4f:"application/mp4",cmft:"application/mp4",vtt:"text/vtt",ttml:"application/ttml+xml"}};function ua(e,t){e.g=t,e.c&&e.c.Bc(e.g==ha.ub),e.g!=ha.ub||e.j.stop()}function ca(e,t,n){if(!e.l)throw new de(2,7,7001);return t=e.f.networkingEngine.request(n,t),ot(e.l,t),t.promise}var la={"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":function(e){var t=ia(e,"METHOD");$n("HLS SAMPLE-AES-CENC","SAMPLE-AES-CENC will no longer be supported, see Issue #1227");var n=["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"];return n.includes(t)?(t=ia(e,"URI"),t=Wr.parse(t),t=xe("com.widevine.alpha",[{initDataType:"cenc",initData:t=new Uint8Array(t.data)}]),(e=Ur(e,"KEYID"))&&(t.keyIds=[e.toLowerCase().substr(2)]),t):(X.error("Widevine in HLS is only supported with [",n.join(", "),"], not",t),null)}},da="VOD",ha={ub:da,Df:"EVENT",ve:"LIVE"};function fa(){this.a=new Map}function pa(e,t,n){ma(e,t).text=n}function ma(e,t){return e.a.has(t)||e.a.set(t,new ga),e.a.get(t)}function ga(){this.text=this.variant=null}function va(e,t){this.a=e,this.b=new Set([e]);for(var n=B(t=t||[]),i=n.next();!i.done;i=n.next())this.add(i.value)}function ba(e,t){var n,i;return!(i=!!e.audio!=!!t.audio||!!e.video!=!!t.video||e.language!=t.language)&&(i=e.audio&&t.audio)&&(i=e.audio,n=t.audio,i=!(i.channelsCount==n.channelsCount&&ya(i,n)&&Ea(i.roles,n.roles))),!i&&(i=e.video&&t.video)&&(i=!(ya(i=e.video,n=t.video)&&Ea(i.roles,n.roles))),!i}function ya(e,t){if(e.mimeType==t.mimeType){var n=e.codecs.split(",").map(function(e){return Tt(e)[0]}),i=t.codecs.split(",").map(function(e){return Tt(e)[0]});if(n.length==i.length){n.sort(),i.sort();for(var r=0;r<n.length;r++)if(n[r]!=i[r])return;return 1}}}function Ea(e,t){var n=new Set(e),i=new Set(t);if(n.delete("main"),i.delete("main"),n.size==i.size){for(var r=(n=B(n)).next();!r.done;r=n.next())if(!i.has(r.value))return;return 1}}function wa(e){this.a=e,this.b=new Ta(e.language,"",e.audio&&e.audio.channelsCount?e.audio.channelsCount:0,"")}function Ta(e,t,n,i){this.c=e,this.f=t,this.a=n,this.b=void 0===i?"":i}function Sa(){this.a=ka,this.b=(new Map).set(ka,2).set(Ia,1)}function Aa(e,t,n){e.b.set(ka,n).set(Ia,t)}wr.Xd("m3u8",qr),wr.gc("application/x-mpegurl",qr),wr.gc("application/vnd.apple.mpegurl",qr),va.prototype.add=function(e){return ba(this.a,e)?(this.b.add(e),!0):(X.u("Rejecting variant - not compatible with root."),!1)},va.prototype.values=function(){return this.b.values()},wa.prototype.create=function(e){var t=this,n=e.filter(function(e){return ba(t.a,e)});return n.length?new va(n[0],n):this.b.create(e)},Ta.prototype.create=function(e){var t,n,i=[];a=e,t=this.c,i=(n=ne(Q(t),a.map(te)))?a.filter(function(e){return n==te(e)}):[];var r,a,o,s=e.filter(function(e){return e.primary}),i=i.length?i:s.length?s:e;for(a=i,r=this.f,(e=a.filter(function(e){return!!e.audio&&(r?e.audio.roles.includes(r):0==e.audio.roles.length)})).length?i=e:X.u("No exact match for variant role could be found."),this.a&&((e=Wn.Ie(i,this.a)).length?i=e:X.u("No exact match for the channel count could be found.")),this.b&&(a=i,o=this.b,(e=a.filter(function(e){return!!e.audio&&e.audio.label.toLowerCase()==o.toLowerCase()})).length?i=e:X.u("No exact match for variant label could be found.")),e=new va(i[0]),s=(i=B(i)).next();!s.done;s=i.next())s=s.value,ba(e.a,s)&&e.add(s);return e};var Ia=0,ka=1;function Ca(e,t){this.g=e,this.j=Na(e),this.a=e.a.currentTime,this.f=Date.now()/1e3,this.b=!1,this.l=t,this.c=function(){}}function xa(e){this.a=e}function Na(e){if(e.a.paused||0==e.a.playbackRate||0==e.a.buffered.length)var t=!1;else e:{t=e.a.buffered,e=e.a.currentTime;for(var n=0;n<t.length;n++){var i=t.start(n),r=t.end(n);if(!(e<i-.1||r-.5<e)){t=!0;break e}}t=!1}return t}function Pa(e,t,n,i,r){var a=this;this.a=e,this.B=t,this.w=n,this.s=r,this.f=new pt,this.l=!1,this.v=e.readyState,this.c=!1,this.b=i,this.j=!1,this.f.m(e,"waiting",function(){return Ma(a)}),this.g=new ze(function(){Ma(a)}).Ia(.25)}function Ma(e){if(0!=e.a.readyState){if(e.a.seeking){if(!e.l)return}else e.l=!1;var t,n,i,r,a,o,s,u;if(!e.a.paused)if(e.a.readyState!=e.v&&(e.c=!1,e.v=e.a.readyState),(t=!e.b)||(i=Na(n=(t=e.b).g),r=n.a.currentTime,a=Date.now()/1e3,t.a==r&&t.j==i||(t.f=a,t.a=r,t.j=i,t.b=!1),(i=(r=a-t.f)>=t.l&&i&&!t.b)&&(t.c(t.a,r),t.b=!0,t.a=n.a.currentTime),t=!i),t){a=e.w.smallGapLimit,t=e.a.currentTime;e:{if((n=e.a.buffered)&&n.length&&!(1==n.length&&n.end(0)-n.start(0)<1e-6))for(i=navigator.userAgent.match(/Edge\//)||Nt("Trident/")||kt()||Nt("CrKey")?.5:.1,r=0;r<n.length;r++)if(n.start(r)>t&&(0==r||n.end(r-1)-t<=i)){i=r;break e}i=null}null==i||0==i&&!e.j||(r=n.start(i),(o=e.B.ab())<=r||(a=(o=r-t)<=a,s=!1,o<.001||(a||e.c||(e.c=!0,(u=new D("largegap",{currentTime:t,gapSize:o})).cancelable=!0,e.s(u),e.w.jumpLargeGaps&&!u.defaultPrevented?s=!0:X.info("Ignoring large gap at",t,"size",o)),(a||s)&&(0==i?X.info("Jumping forward",o,"seconds because of gap before start time of",r):X.info("Jumping forward",o,"seconds because of gap starting at",n.end(i-1),"and ending at",r),e.a.currentTime=r))))}}}function Ra(e){var t=this;this.c=e,this.a=new Set,this.b=new ze(function(){La(t,!1)}).Ia(.25)}function La(e,t){for(var n=B(e.a),i=n.next();!i.done;i=n.next())i.value.g(e.c.currentTime,t)}function Ua(e){for(var t=[],n=(e=B(e)).next();!n.done;n=e.next())for(var i=(n=B(n.value.variants)).next();!i.done;i=n.next())t.push(i.value);return t}function _a(e,t){for(var n=null,i=B(e),r=i.next();!r.done;r=i.next())t>=(r=r.value).startTime&&(n=r);return n}function Oa(e){this.c=e,this.a=null,this.b=function(){}}function Da(e){var t=this;this.a=e,this.f=!1,this.c=this.a.Qc(),this.b=new ze(function(){t.a.Ue(.25*t.c)})}function Fa(e){e.b.stop();var t=e.f?0:e.c;if(0<=t)try{return void(e.a.Qc()!=t&&e.a.fe(t))}catch(e){}e.b.Ia(.25),0!=e.a.Qc()&&e.a.fe(0)}function ja(e,t,n,i){t==HTMLMediaElement.HAVE_NOTHING||e.readyState>=t?i():(t=Ka.get(t),n.Ha(e,t,i))}Ca.prototype.release=function(){this.g=null,this.c=function(){}},Pa.prototype.release=function(){this.f&&(this.f.release(),this.f=null),null!=this.g&&(this.g.stop(),this.g=null),this.b&&(this.b.release(),this.b=null),this.a=this.B=this.s=null},Pa.prototype.Sd=function(){this.j=!0,Ma(this)},Ra.prototype.release=function(){this.b.stop();for(var e=B(this.a),t=e.next();!t.done;t=e.next())t.value.release();this.a.clear()},Oa.prototype.release=function(){this.a=this.c=null,this.b=function(){}},Oa.prototype.g=function(e){var t=this.a,n=this.c.periods;t!=(e=_a(n,e)||n[0])&&this.b(e),this.a=e},Da.prototype.release=function(){this.b&&(this.b.stop(),this.b=null),this.a=null},Da.prototype.set=function(e){this.c=e,Fa(this)};var Ka=new Map([[HTMLMediaElement.HAVE_METADATA,"loadedmetadata"],[HTMLMediaElement.HAVE_CURRENT_DATA,"loadeddata"],[HTMLMediaElement.HAVE_FUTURE_DATA,"canplay"],[HTMLMediaElement.HAVE_ENOUGH_DATA,"canplaythrough"]]);function Ba(e,t,n){var i=this;this.a=e,this.g=t,this.f=n,this.j=!1,this.b=new pt,this.c=new Wa(e),ja(this.a,HTMLMediaElement.HAVE_METADATA,this.b,function(){za(i,i.f)})}function Ga(e){return e.j?e.a.currentTime:e.f}function Va(e,t){0<e.a.readyState?qa(e.c,t):ja(e.a,HTMLMediaElement.HAVE_METADATA,e.b,function(){za(e,e.f)})}function za(e,t){Math.abs(e.a.currentTime-t)<.001?Ha(e):(e.b.Ha(e.a,"seeking",function(){Ha(e)}),qa(e.c,0==e.a.currentTime?t:e.a.currentTime))}function Ha(e){e.j=!0,e.b.m(e.a,"seeking",function(){return e.g()})}function Wa(e){var t=this;this.b=e,this.j=10,this.g=this.c=this.f=0,this.a=new ze(function(){t.f<=0?(X.u(["Failed to move playhead from",t.c,"to",t.g].join(" ")),t.a.stop()):t.b.currentTime!=t.c?t.a.stop():(t.b.currentTime=t.g,t.f--)})}function qa(e,t){e.c=e.b.currentTime,e.g=t,e.f=e.j,e.b.currentTime=t,e.a.Ia(.1)}function Xa(e){var t=this;this.a=e,this.f=!1,this.c=null,this.b=new pt,ja(this.a,HTMLMediaElement.HAVE_CURRENT_DATA,this.b,function(){null==t.c?t.f=!0:(t.b.Ha(t.a,"seeking",function(){t.f=!0}),t.a.currentTime=Math.max(0,t.a.currentTime+t.c))})}function Ya(e,t,n,i,r,a){var o=this;this.c=e,this.a=t.presentationTimeline,this.F=t.minBufferTime||0,this.j=n,this.B=r,this.s=null,this.f=new Pa(e,t.presentationTimeline,n,function(n,e){if(!e.stallEnabled)return null;var i=e.stallSkip,e=new Ca(new xa(n),e.stallThreshold);return function(e,t){e.c=t}(e,function(e,t){X.debug("Stall detected at "+e+" for "+t+" seconds."),i?(X.debug("Seeking forward "+i+" seconds to break stall."),n.currentTime+=i):(X.debug("Pausing and unpausing to break stall."),n.pause(),n.play())}),e}(e,n),a),this.b=new Ba(e,function(){e:{var e=o.f;e.l=!0,e.j=!1,e.c=!1,e=Ga(o.b);var t=Ja(o,e);if(.001<Math.abs(t-e)){var n=Date.now()/1e3;if(!o.s||o.s<n-1){o.s=n,Va(o.b,t),e=void 0;break e}}X.I("Seek to "+e),o.B(),e=void 0}return e},(e=this,null==(i=i)?i=1/0>e.a.ra()?e.a.Rb():e.a.ab():i<0&&(i=e.a.ab()+i),$a(e,Za(e,i)))),this.l=new ze(function(){var e,t,n;0==o.c.readyState||o.c.paused||(e=Ga(o.b),t=o.a.Rb(),(n=o.a.ab())-t<3&&(t=n-3),e<t&&(t=Ja(o,e),X.info("Jumping forward "+(t-e)+" seconds to catch up with the seek range."),o.c.currentTime=t))}).Ia(.25)}function $a(e,t){var n=e.a.ra();return n<=t?n-e.j.durationBackoff:t}function Ja(e,t){var n=on.bind(null,e.c.buffered),i=Math.max(e.F,e.j.rebufferingGoal),r=e.j.safeSeekOffset,a=e.a.Rb(),o=e.a.ab(),s=e.a.ra();o-a<3&&(a=o-3);var u=e.a.qc(i),c=e.a.qc(r),i=e.a.qc(i+r);return s<=t?(X.I("Playhead past duration."),$a(e,t)):o<t?(X.I("Playhead past end."),o):t<a?n(c)?(X.I("Playhead before start & start is buffered"),c):(X.I("Playhead before start & start is unbuffered"),i):u<=t||n(t)?(X.I("Playhead in safe region or in buffered region."),t):(X.I("Playhead outside safe region & in unbuffered region."),i)}function Za(e,t){var n=e.a.Rb();return t<n||(n=e.a.ab())<t?n:t}function Qa(e){var i=this;this.b=function(){},this.a=new Set,this.f=e,this.c=new ze(function(){for(var e=i.f(),t=B(i.a),n=t.next();!n.done;n=t.next())(n=n.value).endTime<e.start&&i.a.delete(n)}).Ia(2)}function eo(e){var n=this;this.j=e,this.f=new Map,this.a=function(){},this.b=function(){},this.c=function(){},this.l=[{Mb:null,Lb:no,Ab:function(e,t){return n.a(e,t)}},{Mb:to,Lb:no,Ab:function(e,t){return n.a(e,t)}},{Mb:io,Lb:no,Ab:function(e,t){return n.a(e,t)}},{Mb:no,Lb:to,Ab:function(e,t){return n.b(e,t)}},{Mb:no,Lb:io,Ab:function(e,t){return n.b(e,t)}},{Mb:to,Lb:io,Ab:function(e,t){return n.c(e,t)}},{Mb:io,Lb:to,Ab:function(e,t){return n.c(e,t)}}]}Ba.prototype.release=function(){this.b&&(this.b.release(),this.b=null),null!=this.c&&(this.c.release(),this.c=null),this.g=function(){},this.a=null},Wa.prototype.release=function(){this.a&&(this.a.stop(),this.a=null),this.b=null},Xa.prototype.release=function(){this.b&&(this.b.release(),this.b=null),this.a=null},Xa.prototype.v=function(e){this.c=this.f?this.c:e},Xa.prototype.g=function(){return(this.f?this.a.currentTime:this.c)||0},Xa.prototype.w=function(){},Ya.prototype.release=function(){this.b&&(this.b.release(),this.b=null),this.f&&(this.f.release(),this.f=null),this.l&&(this.l.stop(),this.l=null),this.c=this.b=this.a=this.j=null,this.B=function(){}},Ya.prototype.v=function(e){Va(this.b,e)},Ya.prototype.g=function(){var e=Ga(this.b);return 0<this.c.readyState&&!this.c.paused?Za(this,e):e},Ya.prototype.w=function(){this.f.Sd()},Qa.prototype.release=function(){this.b=function(){},this.a.clear(),this.c.stop()},eo.prototype.release=function(){this.j=null,this.f.clear(),this.a=function(){},this.b=function(){},this.c=function(){}},eo.prototype.g=function(e,t){for(var n=B(this.j.a),i=n.next();!i.done;i=n.next()){i=i.value;var r=this.f.get(i),a=e<i.startTime?to:e>i.endTime?io:no;this.f.set(i,a);for(var o=B(this.l),s=o.next();!s.done;s=o.next())(s=s.value).Mb==r&&s.Lb==a&&s.Ab(i,t)}};var to=1,no=2,io=3;function ro(e,t){this.a=t,this.c=e,this.g=null,this.s=1,this.B=Promise.resolve(),this.j=[],this.l=new Map,this.b=new Map,this.w=!1,this.J=null,this.H=this.f=this.v=!1,this.F=0}function ao(e){return so(e,"audio")}function oo(e){return so(e,"video")}function so(e,t){t=e.b.get(t);return t?t.mb||t.stream:null}function uo(o,s){return G(function e(){var t,n,i,r,a;return q(e,function(e){switch(e.o){case 1:return t=Ne,V(e,Gn(o.a.U,t.Oa),2);case 2:return o.F++,o.H=!1,n=o.F,i=o.a.U,r=new Map,a=new Set,r.set(t.Oa,s),a.add(s),V(e,i.init(r,!1),3);case 3:return o.f?e.return():V(e,vo(o,a),4);case 4:if(o.f)return e.return();a=o.a.U.g.isTextVisible()||o.g.alwaysStreamText,o.F!=n||o.b.has(t.Oa)||o.H||!a||(a=o.a.yb(),a=Io(o,a),a=mo(s,a,0),o.b.set(t.Oa,a),No(o,a,0)),x(e)}})})}function co(e,t){var n,i=e.b.get("video");!i||(n=i.stream)&&(X.debug("setTrickPlay",t),t?(t=n.trickModeVideo)&&!i.mb&&(X.debug("Engaging trick mode stream",t),ho(e,t,!1,0,!1),i.mb=n):(n=i.mb)&&(X.debug("Restoring non-trick-mode stream",n),ho(e,n,!(i.mb=null),0,!1)))}function lo(e,t,n,i){var r,a=!1;return t.video&&(r=ho(e,t.video,n,i,!1),a=a||r),t.audio&&(e=ho(e,t.audio,n,i,!1),a=a||e),a}function ho(t,e,n,i,r){var a=t.b.get(e.type);if(!a&&"text"==e.type&&t.g.ignoreTextStreamFailures)return uo(t,e),!0;if(!a)return!1;var o=ko(t,e),s=Array.from(t.b.values()).every(function(e){return e.Ba==a.Ba});return n&&o!=a.Ba&&s?(X.debug("switch: switching to stream in another Period; clearing buffer and changing Periods"),t.b.forEach(function(e){fo(t,e)}),!0):(a.mb&&(X.debug("switch during trick play mode",e),e.trickModeVideo?(e=(a.mb=e).trickModeVideo,X.debug("switch found trick play stream",e)):(a.mb=null,X.debug("switch found no special trick play stream"))),!(!(s=t.j[o])||!s.hc)&&(!(!(s=t.l.get(e.id))||!s.hc)&&(a.stream!=e||r?("text"==e.type&&_n(t.a.U,wt(e.mimeType,e.codecs)),a.stream=e,a.Tc=!0,X.debug("switch: switching to Stream "+Lo(a)),function(e,t,n){if(!t.Fb)return!1;var i=e.a.yb(),r=Fn(e.a.U,t.type),a=Eo(e,t,i,r,n);return n=a&&a.a?a.a-a.b:null,a&&!n&&(n=(a.endTime-a.Rc())*t.stream.bandwidth/8),!isNaN(n)&&((a=t.stream.initSegmentReference)&&(n+=(a.a?a.a-a.b:null)||0),a=e.a.getBandwidthEstimate(),8*n/a<r-i-Math.max(e.c.minBufferTime||0,e.g.rebufferingGoal)||t.Fb.b.a>n)}(t,a,o)&&(X.info("Aborting current segment request to switch."),a.Fb.abort()),n&&(a.vb?a.kd=!0:a.kb?(a.qb=!0,a.Kc=i,a.kd=!0):(Po(a),xo(t,a,!0,i).catch(function(e){t.a&&t.a.onError(e)}))),!0):(X.debug("switch: Stream "+Lo(a)+" already active"),!1))))}function fo(t,e){var n=Lo(e);e.vb?X.debug(n,"clear: already clearing the buffer"):e.qb?X.debug(n,"clear: already waiting"):e.kb?(X.debug(n,"clear: currently updating"),e.qb=!0,e.Kc=0):null==Dn(t.a.U,e.type)?(X.debug(n,"clear: nothing buffered"),null==e.hb&&No(t,e,0)):(X.debug(n,"clear: handling right now"),Po(e),xo(t,e,!1,0).catch(function(e){t.a&&t.a.onError(e)}))}function po(u,c,l,d,h){return G(function e(){var i,r,a,o,s;return q(e,function(e){switch(e.o){case 1:return o=u.a.yb(),i=Io(u,o),s=Ne,r=new Map,a=new Set,c&&(r.set(s.jc,c),a.add(c)),l&&(r.set(s.tb,l),a.add(l)),d&&(r.set(s.Oa,d),a.add(d)),o=u.a.U,s=u.g.forceTransmuxTS,V(e,o.init(r,s),2);case 2:return u.f?e.return():((n=(t=u).c.presentationTimeline.ra())<1/0?t.a.U.Ua(n):t.a.U.Ua(Math.pow(2,32)),V(e,vo(u,a),3));case 3:if(u.f)return e.return();r.forEach(function(e,t){u.b.has(t)||(e=mo(e,i,h),u.b.set(t,e),No(u,e,0))}),x(e)}var t,n})})}function mo(e,t,n){return{stream:e,type:e.type,Yb:null,cb:null,mb:null,Tc:!0,Ba:t,endOfStream:!1,kb:!1,hb:null,qb:!1,Kc:0,kd:!1,vb:!1,Wd:!1,tc:!1,Zd:n||0,Fb:null}}function go(e,t){var n=e.j[t];if(n)return X.debug("(all) Period "+t+" is being or has been set up"),n.promise;X.debug("(all) setting up Period "+t),n={promise:new Me,hc:!1},e.j[t]=n;for(var i=new Set,r=B(e.c.periods[t].variants),a=r.next();!a.done;a=r.next())(a=a.value).video&&i.add(a.video),a.video&&a.video.trickModeVideo&&i.add(a.video.trickModeVideo),a.audio&&i.add(a.audio);for(a=(r=B(e.c.periods[t].textStreams)).next();!a.done;a=r.next())i.add(a.value);return e.B=e.B.then(function(){if(!this.f)return vo(this,i)}.bind(e)).then(function(){this.f||(this.j[t].promise.resolve(),this.j[t].hc=!0,X.I("(all) setup Period "+t))}.bind(e)).catch(function(e){this.f||(this.j[t].promise.catch(function(){}),this.j[t].promise.reject(),delete this.j[t],X.u("(all) failed to setup Period "+t),this.a.onError(e))}.bind(e)),n.promise}function vo(l,d){return G(function e(){var i,r,a,o,s,u,c;return q(e,function(e){switch(e.o){case 1:i=[];for(var t=B(d),n=t.next();!n.done;n=t.next())r=n.value,(a=l.l.get(r.id))?(X.debug("(all) Stream "+r.id+" is being or has been set up"),i.push(a.promise)):(X.I("(all) setting up Stream "+r.id),l.l.set(r.id,{promise:new Me,hc:!1}),i.push(r.createSegmentIndex()));return z(e,2),V(e,Promise.all(i),4);case 4:if(l.f)return e.return();H(e,3);break;case 2:if(o=W(e),l.f)return e.return();for(n=(e=B(d)).next();!n.done;n=e.next())s=n.value,l.l.get(s.id).promise.catch(function(){}),l.l.get(s.id).promise.reject(),l.l.delete(s.id);throw o;case 3:for(n=(t=B(d)).next();!n.done;n=t.next())u=n.value,(c=l.l.get(u.id)).hc||(c.promise.resolve(),c.hc=!0,X.I("(all) setup Stream "+u.id));x(e)}})})}function bo(t,e){if(!t.f){var n=Lo(e);if(!e.kb&&null!=e.hb&&!e.vb)if(e.hb=null,e.qb)X.debug(n,"skipping update and clearing the buffer"),xo(t,e,e.kd,e.Kc);else{try{var i=function(t,e){if(So(e))return Bn(t.a.U,e.stream.originalId||""),null;var n=Lo(e),i=t.a.yb(),r=yo(t,e,i);X.N(n,"timeNeeded="+r);var a=ko(t,e.stream),o=Io(t,r),s=function(e,t,n){return"text"==t?null==(e=e.a).b||e.b<n?0:e.b-Math.max(n,e.a):sn(e=jn(e,t),n)}(t.a.U,e.type,i);X.N(n,"update_:","presentationTime="+i,"bufferedAhead="+s);var u=Math.max(t.c.minBufferTime||0,t.g.rebufferingGoal,t.g.bufferingGoal)*t.s;if(r>=t.c.presentationTimeline.ra())return X.debug(n,"buffered to end of presentation"),e.endOfStream=!0,"video"==e.type&&(r=t.b.get("text"))&&"application/cea-608"==r.stream.mimeType&&(r.endOfStream=!0),null;if(e.endOfStream=!1,(e.Ba=o)!=a)return X.debug(n,"need Period "+o,"presentationTime="+i,"timeNeeded="+r,"currentPeriodIndex="+a),null;if(u<=s)return X.N(n,"buffering goal met"),.5;if(n=Fn(t.a.U,e.type),!(n=Eo(t,e,i,n,a)))return 1;var c=1/0;return Array.from(t.b.values()).forEach(function(e){So(e)||(e=yo(t,e,i),c=Math.min(c,e))}),r>=c+t.c.presentationTimeline.a?1:(e.Zd=0,function(e,l,d,t,h){var n=Lo(l),f=e.c.periods[t];X.I(n,"fetchAndAppend_:","presentationTime="+d,"currentPeriod.startTime="+f.startTime,"reference.position="+h.position,"reference.startTime="+h.startTime,"reference.endTime="+h.endTime);var p=l.stream,i=e.c.presentationTimeline.ra(),r=e.c.periods[t+1];t=function(e,t,n,i,r){if(!t.Tc)return Promise.resolve();var a=Lo(t);return n=e.c.periods[n].startTime-t.stream.presentationTimeOffset,X.I(a,"setting timestamp offset to "+n),X.I(a,"setting append window start to "+i),X.I(a,"setting append window end to "+r),i=function(e,t,n,i,r){return"text"==t?(e.a.v=n,(e=e.a).f=i,e.j=r,Promise.resolve()):Promise.all([Vn(e,t,e.If.bind(e,t)),Vn(e,t,e.vh.bind(e,t,n)),Vn(e,t,e.rh.bind(e,t,i,r))])}(e.a.U,t.type,n,i,r),t.stream.initSegmentReference?(X.I(a,"fetching init segment"),e=Co(e,t,t.stream.initSegmentReference).then(function(e){if(!this.f)return X.I(a,"appending init segment"),Kn(this.a.U,t.type,e,null,null,t.stream.closedCaptions&&0<t.stream.closedCaptions.size)}.bind(e)).catch(function(e){return t.Tc=!0,Promise.reject(e)}),Promise.all([i,e])):i}(e,l,t,Math.max(0,f.startTime-.1),r?r.startTime+.01:i),l.kb=!0,l.Tc=!1,X.N(n,"fetching segment"),i=Co(e,l,h),Promise.all([t,i]).then(function(e){if(!this.f&&!this.v)return t=this,n=l,i=d,r=f,a=p,o=h,s=e[1],u=Lo(n),c=a.closedCaptions&&0<a.closedCaptions.size,null!=a.emsgSchemeIdUris&&0<a.emsgSchemeIdUris.length&&(new ji).za("emsg",t.K.bind(t,r,o,a.emsgSchemeIdUris)).parse(s),function(e,t,n){var i=Lo(t);X.N(i,"checking buffer length");var r=Math.max(e.g.bufferBehind,e.c.presentationTimeline.a),a=Dn(e.a.U,t.type);if(null==a)return X.N(i,"buffer behind okay because nothing buffered:","presentationTime="+n,"bufferBehind="+r),Promise.resolve();var o=n-a,s=o-r;return s<=.01?(X.N(i,"buffer behind okay:","presentationTime="+n,"bufferedBehind="+o,"bufferBehind="+r,"underflow="+Math.abs(s)),Promise.resolve()):(X.I(i,"buffer behind too large:","presentationTime="+n,"bufferedBehind="+o,"bufferBehind="+r,"overflow="+s),e.a.U.remove(t.type,a,a+s).then(function(){this.f||X.I(i,"evicted "+s+" seconds")}.bind(e)))}(t,n,i).then(function(){if(!this.f)return X.I(u,"appending media segment"),Kn(this.a.U,n.type,s,o.startTime+r.startTime,o.endTime+r.startTime,c)}.bind(t)).then(function(){if(!this.f)return X.N(u,"appended media segment"),n.Yb=a,n.cb=o,Promise.resolve()}.bind(t));var t,n,i,r,a,o,s,u,c}.bind(e)).then(function(){this.f||this.v||(l.kb=!1,l.Wd=!1,l.qb||this.a.Sd(),No(this,l,0),function(e,t,n){if(!e.w){var i=Lo(t);if(1==(t=Array.from(e.b.values())).length&&"text"==t[0].type||(e.w=t.every(function(e){return"text"==e.type||!e.qb&&!e.vb&&e.cb})),e.w){for(X.debug(i,"startup complete"),n=ko(e,n),e.j[n]||go(e,n).then(function(){this.f||(X.I(i,"calling onCanSwitch()..."),this.a.Xe())}.bind(e)).catch(ke.Uc),n=0;n<e.c.periods.length;++n)go(e,n).catch(ke.Uc);e.a.Xg&&(X.I(i,"calling onStartupComplete()..."),e.a.Xg())}}}(this,l,p),X.I(n,"finished fetch and append"))}.bind(e)).catch(function(e){this.f||this.v||(l.kb=!1,"text"==l.type&&this.g.ignoreTextStreamFailures?(1001==e.code?X.u(n,"Text stream failed to download. Proceeding without it."):X.u(n,"Text stream failed to parse. Proceeding without it."),this.b.delete("text")):7001==e.code?(l.kb=!1,l.hb=null,No(this,l,0)):3017==e.code?function(e,t,n){var i=Lo(t);if(Array.from(e.b.values()).some(function(e){return e!=t&&e.Wd}))X.debug(i,"MediaSource threw QuotaExceededError:","waiting for another stream to recover...");else{var r=Math.round(100*e.s);if(20<r)e.s-=.2;else{if(!(4<r))return X.error(i,"MediaSource threw QuotaExceededError too many times"),t.tc=!0,e.v=!0,e.a.onError(n);e.s-=.04}X.u(i,"MediaSource threw QuotaExceededError:","reducing buffering goals by "+(100-Math.round(100*e.s))+"%"),t.Wd=!0}No(e,t,4)}(this,l,e):(X.error(n,"failed fetch and append: code="+e.code),l.tc=!0,e.severity=2,Ro(this,e)))}.bind(e))}(t,e,i,a,n),null)}(t,e);null!=i&&(No(t,e,i),e.tc=!1)}catch(e){return void Ro(t,e)}i=Array.from(t.b.values()),function(e,t){var s=Lo(t),n=ko(e,t.stream);{var u,c;t.Ba!=n&&(u=t.Ba,(c=Array.from(e.b.values())).every(function(e){return e.Ba==u||So(e)})?c.every(Ao)?(X.debug(s,"all need Period "+u),go(e,u).then(function(){if(!this.f)if(c.every(function(e){var t=Ao(e),n=ko(this,e.stream);return!!So(e)||t&&e.Ba==u&&n!=u}.bind(this))){var e=this.c.periods[u];X.I(s,"calling onChooseStreams()...");var t=this.a.Ye(e),n=new Map;t.variant&&t.variant.video&&n.set("video",t.variant.video),t.variant&&t.variant.audio&&n.set("audio",t.variant.audio),t.text&&n.set("text",t.text);for(var i=(t=B(this.b.keys())).next();!i.done;i=t.next())if(i=i.value,!n.has(i)&&"text"!=i)return X.error(s,"invalid Streams chosen: missing "+i+" Stream"),void this.a.onError(new de(2,5,5005));for(i=(t=B(Array.from(n.keys()))).next();!i.done;i=t.next())if(i=i.value,!this.b.has(i)){if("text"!=i)return X.error(s,"invalid Streams chosen: unusable "+i+" Stream"),void this.a.onError(new de(2,5,5005));po(this,null,null,n.get("text"),e.startTime),n.delete(i)}for(i=(t=B(Array.from(this.b.keys()))).next();!i.done;i=t.next()){i=i.value;var r,a=this.b.get(i),o=n.get(i);o?((r=So(a))&&(a.Ba=u,a.Zd=e.startTime),ho(this,o,!1,0,!1),r&&So(a)||No(this,this.b.get(i),0)):this.b.delete(i)}X.I(s,"calling onCanSwitch()..."),this.a.Xe()}else X.debug(s,"ignoring transition to Period",u,"since another is happening")}.bind(e)).catch(ke.Uc)):X.debug(s,"all MediaStates need Period "+u+", but not all MediaStates are idle"):X.debug(s,"not all MediaStates need Period "+u))}}(t,e),t.w&&i.every(function(e){return e.endOfStream})&&(X.I(n,"calling endOfStream()..."),t.a.U.endOfStream().then(function(){var e;this.f||0!=(e=this.a.U.ra())&&e<this.c.presentationTimeline.ra()&&this.c.presentationTimeline.Ua(e)}.bind(t)))}}}function yo(e,t,n){return t.Yb&&t.cb?(n=ko(e,t.Yb),e.c.periods[n].startTime+t.cb.endTime):Math.max(n,t.Zd)}function Eo(e,t,n,i,r){var a=Lo(t);return t.cb&&t.stream==t.Yb?(i=t.cb.position+1,X.N(a,"next position known:","position="+i),To(e,t,r,i)):null==(a=t.cb?(X.I(a,"next position unknown: another Stream buffered"),a=ko(e,t.Yb),wo(e,t,e.c.periods[a].startTime+t.cb.endTime,r)):(X.I(a,"next position unknown: nothing buffered"),wo(e,t,i||n,r)))?null:((n=null)==i&&(n=To(e,t,r,Math.max(0,a-1))),n||To(e,t,r,a))}function wo(e,t,n,i){var r=Lo(t);return e=e.c.periods[i],X.debug(r,"looking up segment:","presentationTime="+n,"currentPeriod.startTime="+e.startTime),n=Math.max(0,n-e.startTime),null==(t=t.stream.findSegmentPosition(n))&&X.u(r,"cannot find segment:","currentPeriod.startTime="+e.startTime,"lookupTime="+n),t}function To(e,t,n,i){var r=Lo(t);return n=e.c.periods[n],(t=t.stream.getSegmentReference(i))?(e=(i=e.c.presentationTimeline).rc(),i=i.Sb(),n.startTime+t.endTime<e||n.startTime+t.startTime>i?(X.N(r,"segment is not available:","currentPeriod.startTime="+n.startTime,"reference.startTime="+t.startTime,"reference.endTime="+t.endTime,"availabilityStart="+e,"availabilityEnd="+i),null):t):(X.I(r,"segment does not exist:","currentPeriod.startTime="+n.startTime,"position="+i),null)}function So(e){return e&&"text"==e.type&&"application/cea-608"==e.stream.mimeType}function Ao(e){return!e.kb&&null==e.hb&&!e.qb&&!e.vb}function Io(e,t){t=_a(e.c.periods,t+Pe);return t?e.c.periods.indexOf(t):0}function ko(e,t){for(var n=e.c.periods,i=0;i<n.length;i++){for(var r=n[i],a=new Set,o=B(r.variants),s=o.next();!s.done;s=o.next())(s=s.value).audio&&a.add(s.audio),s.video&&a.add(s.video),s.video&&s.video.trickModeVideo&&a.add(s.video.trickModeVideo);for(o=(r=B(r.textStreams)).next();!o.done;o=r.next())a.add(o.value);if(a.has(t))return i}return-1}function Co(e,t,n){var i=Sr(n.c(),n.b,n.a,e.g.retryParameters);return X.N("fetching: reference=",n),e=e.a.Zb.request(1,i),(t.Fb=e).promise.then(function(e){return t.Fb=null,e.data})}function xo(r,a,o,s){return G(function e(){var t,n,i;return q(e,function(e){switch(e.o){case 1:return t=Lo(a),a.qb=!1,a.kd=!1,a.Kc=0,a.vb=!0,a.Yb=null,a.cb=null,X.debug(t,"clearing buffer"),V(e,s?(n=r.a.yb(),i=r.a.U.ra(),r.a.U.remove(a.type,n+s,i)):Gn(r.a.U,a.type).then(function(){if(!this.f&&o)return this.a.U.flush(a.type)}.bind(r)),2);case 2:if(r.f)return e.return();X.debug(t,"cleared buffer"),a.vb=!1,a.endOfStream=!1,No(r,a,0),x(e)}})})}function No(n,i,e){var t=Lo(i),r=i.type;"text"!=r||n.b.has(r)?(X.N(t,"updating in "+e+" seconds"),i.hb=new Ve(function(){return G(function e(){var t;return q(e,function(e){switch(e.o){case 1:return z(e,2),V(e,bo(n,i),4);case 4:H(e,0);break;case 2:t=W(e),n.a&&n.a.onError(t),x(e)}})})}).R(e)):X.I(t,"Text stream is unloaded. No update is needed.")}function Po(e){null!=e.hb&&(e.hb.stop(),e.hb=null)}function Mo(t){return G(function e(){return q(e,function(e){if(1===e.o){if(t.Fb)return V(e,t.Fb.abort(),0);e.C(0)}})})}function Ro(e,t){We(e.J).then(function(){this.f||(this.a.onError(t),t.handled||this.g.failureCallback(t))}.bind(e))}function Lo(e){return"("+e.type+":"+e.stream.id+")"}function Uo(e,t,n,i,r,a){if(200<=n&&n<=299&&202!=n)return{uri:r||i,Ud:i,data:t,headers:e,fromCache:!!e["x-shaka-from-cache"]};r=null;try{r=Ue(t)}catch(e){}throw X.debug("HTTP error text:",r),new de(401==n||403==n?2:1,1,1001,i,n,r,e,a)}function _o(e,t,n,i){var r=new _o.b;yt(t.headers).forEach(function(e,t){r.append(t,e)});var a,o=new _o.a,s={Ae:!1,zf:!1};return e=new Xe(e=_o.s(e,n,{body:t.body||void 0,headers:r,method:t.method,signal:o.signal,credentials:t.allowCrossSiteCredentials?"include":void 0},s,i),function(){return s.Ae=!0,o.abort(),Promise.resolve()}),(t=t.retryParameters.timeout)&&((a=new ze(function(){s.zf=!0,o.abort()})).R(t/1e3),e.finally(function(){a.stop()})),e}function Oo(s,t,u,n){var i=new Oo.f,r=Date.now(),c=0;return new Xe(new Promise(function(a,o){for(var e in i.open(t.method,s,!0),i.responseType="arraybuffer",i.timeout=t.retryParameters.timeout,i.withCredentials=t.allowCrossSiteCredentials,i.onabort=function(){o(new de(1,1,7001,s,u))},i.onload=function(e){for(var t=(e=e.target).getAllResponseHeaders().trim().split("\r\n"),n={},i=(t=B(t)).next();!i.done;i=t.next())n[(i=i.value.split(": "))[0].toLowerCase()]=i.slice(1).join(": ");try{var r=Uo(n,e.response,e.status,s,e.responseURL,u);a(r)}catch(e){o(e)}},i.onerror=function(e){o(new de(1,1,1002,s,e,u))},i.ontimeout=function(){o(new de(1,1,1003,s,u))},i.onprogress=function(e){var t=Date.now();(100<t-r||e.lengthComputable&&e.loaded==e.total)&&(n(t-r,e.loaded-c,e.total-e.loaded),c=e.loaded,r=t)},t.headers)i.setRequestHeader(e.toLowerCase(),t.headers[e]);i.send(t.body)}),function(){return i.abort(),Promise.resolve()})}function Do(){this.a=this.f=this.b=0,this.c=new Map,this.g=0}function Fo(e,t,n){this.j=e,this.b=new Map,this.c=!1,this.g=t,this.f=n,this.a=new Do}function jo(c,e,l,t,d,h){var f=function(e,t){e.b+=t;var n=e.g;return e.g++,e.c.set(n,t),n}(c.a,t);t=c.b.get(e)||Promise.resolve(),c.b.set(e,t.then(function(){return G(function e(){var r,a,o,s,u;return q(e,function(e){switch(e.o){case 1:return V(e,(n=c,i=l,G(function e(){var t;return q(e,function(e){switch(e.o){case 1:return V(e,n.j.request(1,i).promise,2);case 2:return t=e.A,e.return(t.data)}})})),2);case 2:if(r=e.A,c.c)throw new de(2,9,7001);if(d)for(var t in a=new Uint8Array(r),(o=new Wi(a)).data)u=Number(t),s=o.data[u],u=o.a[u],c.f(s,u);return c.a.close(f,r.byteLength),t=c.a,c.g(0==t.b?0:t.f/t.b,c.a.a),e.return(h(r))}var n,i})})}))}function Ko(e,t){var n=this;this.c=e,this.b=e.objectStore(t),this.a=new Me,e.onabort=function(e){e.preventDefault(),n.a.reject()},e.onerror=function(e){e.preventDefault(),n.a.reject()},e.oncomplete=function(){n.a.resolve()}}function Bo(i,r){return new Promise(function(t,e){var n=i.b.openCursor();n.onerror=e,n.onsuccess=function(e){if(!(e=e.target.result))return t();r(e.key,e.value,e),e.continue()}})}function Go(e){this.b=e,this.a=[]}function Vo(e,t){return zo(e,t,"readwrite")}function zo(e,t,n){var i=new Ko(n=e.b.transaction([t],n),t);return e.a.push(i),i.promise().then(function(){nt(e.a,i)},function(){nt(e.a,i)}),i}function Ho(e,t,n){this.b=new Go(e),this.c=t,this.a=n}function Wo(e){return Promise.reject(new de(2,9,9011,"Cannot add new value to "+e))}function qo(e,t,n,i){t=(e=Vo(e.b,t)).store();for(var r={},a=(n=B(n)).next();!a.done;r={key:r.key},a=n.next())r.key=a.value,t.delete(r.key).onsuccess=function(e){return function(){return i(e.key)}}(r);return e.promise()}function Xo(u,c,l){return G(function e(){var t,n,i,r,a,o,s;return q(e,function(e){switch(e.o){case 1:for(t=zo(u.b,c,"readonly"),n=t.store(),i={},r=[],a={},o=B(l),s=o.next();!s.done;a={request:a.request,key:a.key},s=o.next())a.key=s.value,a.request=n.get(a.key),a.request.onsuccess=function(e){return function(){null==e.request.result&&r.push(e.key),i[e.key]=e.request.result}}(a);return V(e,t.promise(),2);case 2:if(r.length)throw new de(2,9,9012,"Could not find values for "+r);return e.return(l.map(function(e){return i[e]}))}})})}function Yo(e){this.a=new Go(e)}function $o(){this.a=new Map}function Jo(e,t,n){if(!(e=e.a.get(t)))throw new de(2,9,9013,"Could not find mechanism with name "+t);if(!(t=e.getCells().get(n)))throw new de(2,9,9013,"Could not find cell with name "+n);return t}function Zo(e,t){Qo.set(e,t)}ro.prototype.destroy=function(){var a=this;return G(function e(){var i,r;return q(e,function(e){switch(e.o){case 1:i=[];for(var t=B(a.b.values()),n=t.next();!n.done;n=t.next())Po(r=n.value),i.push(Mo(r));return V(e,Promise.all(i),2);case 2:a.b.clear(),a.l.clear(),a.a=null,a.c=null,a.B=null,a.j=null,a.g=null,a.f=!0,x(e)}})})},ro.prototype.configure=function(e){this.g=e,this.J=new He({maxAttempts:Math.max(e.retryParameters.maxAttempts,2),baseDelay:e.retryParameters.baseDelay,backoffFactor:e.retryParameters.backoffFactor,fuzzFactor:e.retryParameters.fuzzFactor,timeout:0},!0)},ro.prototype.start=function(){var i=this;return G(function e(){var t,n;return q(e,function(e){switch(e.o){case 1:return t=i.a.yb(),n=Io(i,t),(n=i.a.Ye(i.c.periods[n])).variant||n.text?V(e,po(i,n.variant?n.variant.audio:null,n.variant?n.variant.video:null,n.text,t),2):(X.error("init: no Streams chosen"),e.return(new de(2,5,5005)));case 2:if(i.f)return e.return();X.debug("init: completed initial Stream setup"),i.a&&i.a.Og&&(X.I("init: calling onInitialStreamsSetup()..."),i.a.Og()),x(e)}})})},ro.prototype.K=function(e,t,n,i){var r=i.reader.Vd(),a=i.reader.Vd(),o=i.reader.M(),s=i.reader.M(),u=i.reader.M(),c=i.reader.M();i=i.reader.Gb(i.reader.T.byteLength-i.reader.va()),e=e.startTime+t.startTime+s/o,n.includes(r)&&("urn:mpeg:dash:event:2012"==r?this.a.Pg():this.a.onEvent(new D("emsg",{detail:{startTime:e,endTime:e+u/o,schemeIdUri:r,value:a,timescale:o,presentationTimeDelta:s,eventDuration:u,id:c,messageData:i}})))},_("shaka.net.HttpFetchPlugin",_o),_o.s=function(d,h,f,p,m){return G(function e(){var t,n,a,o,s,u,i,c,r,l;return q(e,function(e){switch(e.o){case 1:return i=_o.g,r=_o.c,o=a=0,s=Date.now(),z(e,2),V(e,i(d,f),4);case 4:return t=e.A,u=t.clone().body.getReader(),c=(i=t.headers.get("Content-Length"))?parseInt(i,10):0,new r({start:function(r){!function i(){return G(function e(){var t,n;return q(e,function(e){switch(e.o){case 1:return z(e,2),V(e,u.read(),4);case 4:t=e.A,H(e,3);break;case 2:return n=W(e),X.I("error reading from stream",n.message),e.return();case 3:t.done||(a+=t.value.byteLength),(100<(n=Date.now())-s||t.done)&&(m(n-s,a-o,c-a),o=a,s=n),t.done?r.close():(r.enqueue(t.value),i()),x(e)}})})}()}}),V(e,t.arrayBuffer(),5);case 5:n=e.A,H(e,3);break;case 2:if(r=W(e),p.Ae)throw new de(1,1,7001,d,h);if(p.zf)throw new de(1,1,1003,d,h);throw new de(1,1,1002,d,r,h);case 3:return l={},t.headers.forEach(function(e,t){l[t.trim()]=e}),e.return(Uo(l,n,t.status,d,t.url,h))}})})},_o.isSupported=function(){if(!d.ReadableStream)return!1;try{new ReadableStream({})}catch(e){return!1}return!(!d.fetch||!d.AbortController)},_o.isSupported,_o.g=d.fetch,_o.a=d.AbortController,_o.c=d.ReadableStream,_o.b=d.Headers,_o.isSupported()&&(ct("http",_o,2),ct("https",_o,2)),_("shaka.net.HttpXHRPlugin",Oo),Oo.f=d.XMLHttpRequest,ct("http",Oo,1),ct("https",Oo,1),Do.prototype.close=function(e,t){var n;this.c.has(e)&&(n=this.c.get(e),this.c.delete(e),this.f+=n,this.a+=t)},Fo.prototype.destroy=function(){return this.c=!0,Promise.all(this.b.values()).then(function(){},function(){})},Ko.prototype.abort=function(){try{this.c.abort()}catch(e){}return this.a.catch(function(){})},Ko.prototype.store=function(){return this.b},Ko.prototype.promise=function(){return this.a},Go.prototype.destroy=function(){return Promise.all(this.a.map(function(e){return e.abort()}))},(e=Ho.prototype).destroy=function(){return this.b.destroy()},e.hasFixedKeySpace=function(){return!0},e.addSegments=function(){return Wo(this.c)},e.removeSegments=function(e,t){return qo(this,this.c,e,t)},e.getSegments=function(n){var i=this;return G(function e(){var t;return q(e,function(e){switch(e.o){case 1:return V(e,Xo(i,i.c,n),2);case 2:return t=e.A,e.return(t.map(function(e){return i.Ee(e)}))}})})},e.addManifests=function(){return Wo(this.a)},e.updateManifestExpiration=function(t,n){var e=Vo(this.b,this.a),i=e.store();return i.get(t).onsuccess=function(e){(e=e.target.result)&&(e.expiration=n,i.put(e,t))},e.promise()},e.removeManifests=function(e,t){return qo(this,this.a,e,t)},e.getManifests=function(n){var i=this;return G(function e(){var t;return q(e,function(e){switch(e.o){case 1:return V(e,Xo(i,i.a,n),2);case 2:return t=e.A,e.return(t.map(function(e){return i.Lc(e)}))}})})},e.getAllManifests=function(){var i=this;return G(function e(){var t,n;return q(e,function(e){switch(e.o){case 1:return t=zo(i.b,i.a,"readonly"),n=new Map,V(e,Bo(t,function(e,t){n.set(e,i.Lc(t))}),2);case 2:return V(e,t.promise(),3);case 3:return e.return(n)}})})},e.Ee=function(e){return e},e.Lc=function(e){return e},e.add=function(s,u){var c=this;return G(function e(){var i,r,a,o;return q(e,function(e){switch(e.o){case 1:i=Vo(c.b,s),r=i.store(),a=[];for(var t=B(u),n=t.next();!n.done;n=t.next())o=n.value,r.add(o).onsuccess=function(e){a.push(e.target.result)};return V(e,i.promise(),2);case 2:return e.return(a)}})})},Yo.prototype.destroy=function(){return this.a.destroy()},Yo.prototype.getAll=function(){var i=this;return G(function e(){var t,n;return q(e,function(e){switch(e.o){case 1:return t=zo(i.a,"session-ids","readonly"),n=[],V(e,Bo(t,function(e,t){n.push(t)}),2);case 2:return V(e,t.promise(),3);case 3:return e.return(n)}})})},Yo.prototype.add=function(e){for(var t=Vo(this.a,"session-ids"),n=t.store(),i=(e=B(e)).next();!i.done;i=e.next())n.add(i.value);return t.promise()},Yo.prototype.remove=function(i){var n=this;return G(function e(){var t;return q(e,function(e){switch(e.o){case 1:return V(e,Bo(t=Vo(n.a,"session-ids"),function(e,t,n){0<=i.indexOf(t.sessionId)&&n.delete()}),2);case 2:return V(e,t.promise(),0)}})})},$o.prototype.destroy=function(){for(var e=[],t=B(this.a.values()),n=t.next();!n.done;n=t.next())e.push(n.value.destroy());return this.a.clear(),Promise.all(e)},$o.prototype.init=function(){var n=this;Qo.forEach(function(e,t){e=e();e?n.a.set(t,e):X.info("Skipping "+t+" as it is not supported on this platform")});for(var e=[],t=B(this.a.values()),i=t.next();!i.done;i=t.next())e.push(i.value.init());return Promise.all(e)},$o.prototype.erase=function(){var i=this;return G(function e(){var t,n;return q(e,function(e){switch(e.o){case 1:return t=Array.from(i.a.values()),(n=0<t.length)||Qo.forEach(function(e){(e=e())&&t.push(e)}),V(e,Promise.all(t.map(function(e){return e.erase()})),2);case 2:if(!n)return V(e,Promise.all(t.map(function(e){return e.destroy()})),0);e.C(0)}})})},_("shaka.offline.StorageMuxer.register",Zo),_("shaka.offline.StorageMuxer.unregister",function(e){Qo.delete(e)});var Qo=new Map;function es(e){Ho.apply(this,arguments)}function ts(e){return function(e){var t=e.streams.filter(function(e){return"audio"==e.contentType}),i=e.streams.filter(function(e){return"video"==e.contentType});{var r,n,a;t.every(function(e){return e.variantIds})&&i.every(function(e){return e.variantIds})||(t.forEach(function(e){e.variantIds=[]}),i.forEach(function(e){e.variantIds=[]}),r=0,i.length&&!t.length&&(X.debug("Found video-only content. Creating variants for video."),n=r++,i.forEach(function(e){e.variantIds.push(n)})),!i.length&&t.length&&(X.debug("Found audio-only content. Creating variants for audio."),a=r++,t.forEach(function(e){e.variantIds.push(a)})),i.length&&t.length&&(X.debug("Found audio-video content. Creating variants."),t.forEach(function(n){i.forEach(function(e){var t=r++;n.variantIds.push(t),e.variantIds.push(t)})})))}}(e),e.streams.forEach(function(){}),{startTime:e.startTime,streams:e.streams.map(ns)}}function ns(e){var t=e.initSegmentUri?rs(e.initSegmentUri):null;return{id:e.id,originalId:null,primary:e.primary,presentationTimeOffset:e.presentationTimeOffset,contentType:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:void 0,kind:e.kind,language:e.language,label:e.label,width:e.width,height:e.height,initSegmentKey:t,encrypted:e.encrypted,keyId:e.keyId,segments:e.segments.map(is),variantIds:e.variantIds}}function is(e){var t=rs(e.uri);return{startTime:e.startTime,endTime:e.endTime,dataKey:t}}function rs(e){var t;if((t=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e))||(t=/^offline:segment\/([0-9]+)$/.exec(e)))return Number(t[1]);throw new de(2,9,9004,"Could not parse uri "+e)}function as(e,t,n,i){Ho.call(this,e,t,n),this.f=i}function os(){this.g=this.c=this.b=this.a=this.f=null}function ss(e,t,n,i){this.a=e,this.g=t,this.f=n,this.c=i,this.b=["offline:",e,"/",t,"/",n,"/",i].join("")}function us(e){if(null==(e=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(e)))return null;var t=e[1];if("manifest"!=t&&"segment"!=t)return null;var n=e[2];if(!n)return null;var i=e[3];return i&&null!=t?new ss(t,n,i,Number(e[4])):null}function cs(e,t){this.b=e,this.a=t}function ls(n,t,i){var e=t.streams.filter(function(e){return"audio"==e.contentType}),r=t.streams.filter(function(e){return"video"==e.contentType}),e=function(e,t,n){for(var i=new Set,r=B(t),a=r.next();!a.done;a=r.next()){var o=B(a.value.variantIds);for(a=o.next();!a.done;a=o.next())i.add(a.value)}for(r=B(n),a=r.next();!a.done;a=r.next())for(o=B(a.value.variantIds),a=o.next();!a.done;a=o.next())i.add(a.value);for(r=new Map,i=B(i),a=i.next();!a.done;a=i.next())a=a.value,r.set(a,{id:a,language:"",primary:!1,audio:null,video:null,bandwidth:0,drmInfos:[],allowedByApplication:!0,allowedByKeySystem:!0});for(t=B(t),i=t.next();!i.done;i=t.next())for(i=i.value,a=ds(e,i),o=B(i.variantIds),i=o.next();!i.done;i=o.next())(i=r.get(i.value)).language=a.language,i.primary=i.primary||a.primary,i.audio=a;for(n=B(n),t=n.next();!t.done;t=n.next())for(i=t.value,t=ds(e,i),a=B(i.variantIds),i=a.next();!i.done;i=a.next())(i=r.get(i.value)).primary=i.primary||t.primary,i.video=t;return r}(n,e,r),r=t.streams.filter(function(e){return"text"==e.contentType}).map(function(e){return ds(n,e)});return t.streams.forEach(function(e){e=e.segments.map(function(e,t){return hs(n,t,e)}),i.$b(e,t.startTime)}),{startTime:t.startTime,variants:Array.from(e.values()),textStreams:r}}function ds(n,e){var t,i,r=new or(a=e.segments.map(function(e,t){return hs(n,t,e)})),a={id:e.id,originalId:e.originalId,createSegmentIndex:function(){return Promise.resolve()},findSegmentPosition:function(e){return r.find(e)},getSegmentReference:function(e){return r.get(e)},initSegmentReference:null,presentationTimeOffset:e.presentationTimeOffset,mimeType:e.mimeType,codecs:e.codecs,width:e.width||void 0,height:e.height||void 0,frameRate:e.frameRate||void 0,pixelAspectRatio:e.pixelAspectRatio||void 0,kind:e.kind,encrypted:e.encrypted,keyId:e.keyId,language:e.language,label:e.label||null,type:e.contentType,primary:e.primary,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],channelsCount:null,audioSamplingRate:null,closedCaptions:null};return null!=e.initSegmentKey&&(a.initSegmentReference=(t=n,e=e.initSegmentKey,i=new ss("segment",t.b,t.a,e),new ir(function(){return[i.toString()]},0,null))),a}function hs(e,t,n){var i=new ss("segment",e.b,e.a,n.dataKey);return new rr(t,n.startTime,n.endTime,function(){return[i.toString()]},0,null)}function fs(){this.a=null}function ps(e){var t=us(e);return t&&"manifest"==t.a?ps.j(e):t&&"segment"==t.a?ps.l(t.key(),t):Ye(new de(2,1,9004,e))}function ms(v,b,y){return G(function e(){var l,p,m,g;return q(e,function(e){switch(e.o){case 1:l=[];for(var t=[],n=B(y),i=n.next();!i.done;i=n.next()){i=i.value;for(var r=!1,a=B(t),o=a.next();!o.done;o=a.next())if(o=o.value,s=o.info,u=i,s.keySystem==u.keySystem&&s.licenseUri==u.licenseUri&&it(s.audioCapabilities,u.audioCapabilities,c)&&it(s.videoCapabilities,u.videoCapabilities,c)){o.sessionIds.push(i.sessionId),r=!0;break}r||t.push({info:i,sessionIds:[i.sessionId]})}p=B(t),m=p.next();case 2:if(m.done){e.C(4);break}return g=m.value,d=v,h=b,f=g,g=G(function e(){var u,c,l;return q(e,function(e){switch(e.o){case 1:return u=new Lt({Zb:h,onError:function(){},Wc:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),z(e,2),u.configure(d),V(e,(t=u,n=f.info.keySystem,i=f.info.licenseUri,r=f.info.serverCertificate,a=f.info.audioCapabilities,o=f.info.videoCapabilities,(s=new Map).set(n,{audioCapabilities:a,videoCapabilities:o,distinctiveIdentifier:"optional",persistentState:"required",sessionTypes:["persistent-license"],label:n,drmInfos:[{keySystem:n,licenseServerUri:i,distinctiveIdentifierRequired:!1,persistentStateRequired:!0,audioRobustness:"",videoRobustness:"",serverCertificate:r,initData:null,keyIds:null}]}),Vt(t,s)),4);case 4:H(e,3);break;case 2:return c=W(e),X.u("Error initializing EME",c),V(e,u.destroy(),5);case 5:return e.return([]);case 3:return z(e,6),V(e,Ot(u),8);case 8:H(e,7);break;case 6:return c=W(e),X.u("Error setting server certificate",c),V(e,u.destroy(),9);case 9:return e.return([]);case 7:return l=[],V(e,Promise.all(f.sessionIds.map(function(n){return G(function e(){var t;return q(e,function(e){switch(e.o){case 1:return z(e,2),V(e,(r=u,a=n,G(function e(){var t,n,i;return q(e,function(e){switch(e.o){case 1:return V(e,zt(r,a),2);case 2:return(t=e.A)?(n=[],(i=r.b.get(t))&&(i.Va=new Me,n.push(i.Va)),X.N("Attempting to remove session",a),n.push(t.remove()),V(e,Promise.all(n),0)):(X.N("Ignoring attempt to remove missing session",a),e.return())}})})),4);case 4:l.push(n),H(e,0);break;case 2:t=W(e),X.u("Error deleting offline session",t),x(e)}var r,a})})})),10);case 10:return V(e,u.destroy(),11);case 11:return e.return(l)}var t,n,i,r,a,o,s})}),V(e,g,5);case 5:g=e.A,l=l.concat(g),m=p.next(),e.C(2);break;case 4:return e.return(l)}var d,h,f,s,u;function c(e,t){return e.robustness==t.robustness&&e.contentType==t.contentType}})})}function gs(e,t){var n=Eu(),i=this;this.j=t,this.c=e,this.f=n,this.l=null,this.g=[],this.b=this.a=null,this.s=!0,this.v=Promise.resolve().then(function(){return r=i,G(function e(){return q(e,function(e){if(1===e.o){if(r.s){var t,n=!(0==r.g.length||r.a&&!r.a.zb)&&(r.a&&(r.a.Sa.Eb(),r.a=null),(t=(n=r.g.shift()).create(r.f))?(n.Sa.ac(),r.a={node:t.node,payload:t.payload,zb:t.zb,Sa:n.Sa}):n.Sa.Xc(),!0);return n=n?Promise.resolve():r.a?(i=r,G(function e(){var t,n;return q(e,function(e){switch(e.o){case 1:return i.c=i.j.pg(i.c,i.f,i.a.node,i.a.payload),z(e,2),i.b=i.j.Qf(i.c,i.f,i.a.payload),V(e,i.b.promise,4);case 4:i.b=null,i.c==i.a.node&&(i.a.Sa.Vc(),i.a=null),H(e,0);break;case 2:return 7001==(t=W(e)).code?i.a.Sa.Eb():i.a.Sa.onError(t),i.a=null,i.b=null,V(e,(n=i).j.handleError(i.f,t),5);case 5:n.c=e.A,x(e)}})})):(r.j.Ng(r.c),r.l=new Me,r.l),V(e,n,1)}e.C(0)}var i})});var r})}function vs(e,t){var n={ac:function(){},Vc:function(){},Eb:function(){},onError:function(){},Xc:function(){},Qh:function(){}};return e.g.push({create:t,Sa:n}),e.b&&e.b.abort(),bs(e),n}function bs(e){e.l&&(e.l.resolve(),e.l=null)}function ys(e){this.a=null;for(var t=0;t<e.textTracks.length;++t){var n=e.textTracks[t];n.mode="disabled","Shaka Player TextTrack"==n.label&&(this.a=n)}this.a||(this.a=e.addTextTrack("subtitles","Shaka Player TextTrack")),this.a.mode="hidden"}function Es(e){if(e.startTime>=e.endTime)return X.u("Invalid cue times: "+e.startTime+" - "+e.endTime),null;var t=new VTTCue(e.startTime,e.endTime,e.payload);t.lineAlign=e.lineAlign,t.positionAlign=e.positionAlign,e.size&&(t.size=e.size);try{t.align=e.textAlign}catch(e){}return"center"==e.textAlign&&"center"!=t.align&&(t.align="middle"),"vertical-lr"==e.writingMode?t.vertical="lr":"vertical-rl"==e.writingMode&&(t.vertical="rl"),1==e.lineInterpretation&&(t.snapToLines=!1),null!=e.line&&(t.line=e.line),null!=e.position&&(t.position=e.position),t}function ws(e,t){var n=e.mode;e.mode="showing"==n?"showing":"hidden";for(var i=e.cues,r=i.length-1;0<=r;r--){var a=i[r];a&&t(a)&&e.removeCue(a)}e.mode=n}function Ts(e,t,n,i,r){var a,o=r in i,s=!0;for(a in t){var u=r+"."+a,c=o?i[r]:n[a];o||a in n?void 0===t[a]?void 0===c||o?delete e[a]:e[a]=et(c):c.constructor==Object&&t[a]&&t[a].constructor==Object?(e[a]||(e[a]=et(c)),u=Ts(e[a],t[a],c,i,u),s=s&&u):typeof t[a]!=typeof c||null==t[a]||"function"!=typeof t[a]&&t[a].constructor!=c.constructor?(X.Hc("Invalid config, wrong type for "+u),s=!1):("function"==typeof n[a]&&n[a].length!=t[a].length&&X.ba("Unexpected number of arguments for "+u),e[a]=t[a]):(X.Hc("Invalid config, unrecognized key "+u),s=!1)}return s}function Ss(e,t){for(var n={},i=n,r=0,a=0;!((r=e.indexOf(".",r))<0);)0!=r&&"\\"==e[r-1]||(i[a=e.substring(a,r).replace(/\\\./g,".")]={},i=i[a],a=r+1),r+=1;return i[e.substring(a).replace(/\\\./g,".")]=t,n}function As(){}function Is(){var e=5e5,t=1/0;navigator.connection&&(navigator.connection.downlink&&(e=1e6*navigator.connection.downlink),navigator.connection.saveData&&(t=360));var n={retryParameters:qe(),servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,initDataTransform:Ht,fairPlayTransform:!0,updateExpirationTime:1},i={retryParameters:qe(),availabilityWindowOverride:NaN,disableAudio:!1,disableVideo:!1,disableText:!1,dash:{customScheme:function(e){if(e)return null},clockSyncUri:"",ignoreDrmInfo:!1,xlinkFailGracefully:!1,defaultPresentationDelay:10,ignoreMinBufferTime:!1,autoCorrectDrift:!0,ignoreSuggestedPresentationDelay:!1,ignoreEmptyAdaptationSet:!1},hls:{ignoreTextStreamFailures:!1,useFullSegmentsForStartTime:!1}},r={retryParameters:qe(),failureCallback:function(e){return X.error("Unhandled streaming error",e),[e]},rebufferingGoal:2,bufferingGoal:10,bufferBehind:30,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,smallGapLimit:.5,jumpLargeGaps:!1,durationBackoff:1,forceTransmuxTS:!1,safeSeekOffset:5,stallEnabled:!0,stallThreshold:1,stallSkip:.1,useNativeHlsOnSafari:!0};(Nt("Web0S")||kt()||Nt("CrKey"))&&(r.stallSkip=0);var a={trackSelectionCallback:function(t){return G(function e(){return q(e,function(e){if(1===e.o)return e.return(t)})})},progressCallback:function(e,t){return[e,t]},usePersistentLicense:!0},o={drm:n,manifest:i,streaming:r,offline:a,abrFactory:qn,abr:{enabled:!0,defaultBandwidthEstimate:e,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:t,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0}},preferredAudioLanguage:"",preferredTextLanguage:"",preferredVariantRole:"",preferredTextRole:"",preferredAudioChannelCount:2,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0},playRangeStart:0,playRangeEnd:1/0,textDisplayFactory:function(){return null}};return a.trackSelectionCallback=function(t){return G(function e(){return q(e,function(e){if(1===e.o)return e.return(function(e,t){var n=e.filter(function(e){return"variant"==e.type}),i=[],r=ne(t,n.map(function(e){return e.language}));r&&(i=n.filter(function(e){return Q(e.language)==r})),0==i.length&&(i=n.filter(function(e){return e.primary})),0==i.length&&(1<new Set(n.map(function(e){return e.language})).size&&X.u("Could not choose a good audio track based on language preferences or primary tracks.  An arbitrary language will be stored!"),i=n);var a=i.filter(function(e){return e.height&&e.height<=480});{var o;a.length&&(a.sort(function(e,t){return t.height-e.height}),i=a.filter(function(e){return e.height==a[0].height})),n=[],i.length&&(o=Math.floor(i.length/2),i.sort(function(e,t){return e.bandwidth-t.bandwidth}),n.push(i[o]))}for(i=B(e),o=i.next();!o.done;o=i.next())"text"==(o=o.value).type&&n.push(o);return n}(t,o.preferredAudioLanguage))})})},o}function ks(e,t,n){var i={".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",serverCertificate:new Uint8Array(0),individualizationServer:""}};return Ts(e,t,n||Is(),i,"")}function Cs(){this.a=null,this.b=[]}function xs(e,t){var n;null==e.a?e.a={timestamp:Date.now()/1e3,state:t,duration:0}:(n=Date.now()/1e3,e.a.duration=n-e.a.timestamp,e.a.state!=t&&(e.b.push(e.a),e.a={timestamp:n,state:t,duration:0}))}function Ns(e,t){var n=0;e.a&&e.a.state==t&&(n+=e.a.duration);for(var i=B(e.b),r=i.next();!r.done;r=i.next())n+=(r=r.value).state==t?r.duration:0;return n}function Ps(){this.b=this.c=null,this.a=[]}function Ms(){this.f=this.w=this.j=this.b=this.l=this.s=this.v=this.g=this.B=NaN,this.a=new Cs,this.c=new Ps}function Rs(e,t){var n,s=this;j.call(this),this.l=Su,this.a=null,this.Ma=!1,this.g=new pt,this.ld=this.s=this.rb=this.c=this.w=this.f=this.Cc=this.F=this.Dc=this.J=this.La=this.v=this.H=this.j=this.L=null,this.kf=1e9,this.Fc=new Set,this.Wa=!0,this.na=null,this.jf=!1,this.Ve=0,this.ka=null,this.Z=new fa,this.b=Hs(this),this.Gc={width:1/0,height:1/0},this.B=null,this.sb=new Ta(this.b.preferredAudioLanguage,this.b.preferredVariantRole,this.b.preferredAudioChannelCount),this.ia=this.b.preferredTextLanguage,this.Ja=this.b.preferredTextRole,this.md=[],t&&t(this),this.L=(n=this,new st(function(e,t){n.s&&n.s.segmentDownloaded(e,t)})),this.g.m(d,"online",function(){s.$d()}),this.K={name:"detach"},this.O={name:"attach"},this.wa={name:"unload"},this.Gd={name:"manifest-parser"},this.Fd={name:"manifest"},this.Ka={name:"media-source"},this.qd={name:"drm-engine"},this.Y={name:"load"},this.Md={name:"src-equals-drm-engine"},this.Na={name:"src-equals"};var i=new Map;i.set(this.O,function(e,t){return Ze((n=s,t=t,null==(e=e).D&&(e.D=t.D,n.g.m(e.D,"error",function(){var e=uu(n);e&&n.pb(e)})),n.a=e.D,Promise.resolve()));var n}),i.set(this.K,function(e){return e.D&&(s.g.xa(e.D,"error"),e.D=null),s.a=null,Ze(e=Promise.resolve())}),i.set(this.wa,function(e){return Ze(Ds(s,e))}),i.set(this.Ka,function(e){var r,a;return r=s,a=e,Ze(e=G(function e(){var t,n,i;return q(e,function(e){switch(e.o){case 1:return t=new(d.muxjs?nn:rn),n=r.b.textDisplayFactory,i=new n,r.Ad=n,V(e,(i=new Rn(a.D,t,i)).w,2);case 2:r.H=i,x(e)}})}))}),i.set(this.Gd,function(e,t){var r,a,o;return Ze((r=s,a=e,o=t,G(function e(){var t,n,i;return q(e,function(e){switch(e.o){case 1:if(a.Ya=o.Ya,a.mimeType=o.mimeType,a.uri=o.uri,t=a.uri,n=r.L,r.rb=t,a.Ya){r.w=a.Ya(),e.C(2);break}return i=r,V(e,wr.create(t,n,r.b.manifest.retryParameters,a.mimeType),3);case 3:i.w=e.A;case 2:i=et(r.b.manifest),o.D&&"AUDIO"===o.D.nodeName&&(i.disableVideo=!0),r.w.configure(i),x(e)}})})))}),i.set(this.Fd,function(e){return function(r,e){var a=e.uri,e=r.L;r.Cc=new Qa(function(){return r.Ib()}),function(e,t){e.b=t}(r.Cc,function(e){su(r,"timelineregionadded",e)});var o={networkingEngine:e,filterNewPeriod:function(e){return r.sd(e)},filterAllPeriods:function(e){return Ws(r,e)},onTimelineRegionAdded:function(e){var t=r.Cc;e:{for(var n=B(t.a),i=n.next();!i.done;i=n.next())if((i=i.value).schemeIdUri==e.schemeIdUri&&i.id==e.id&&i.startTime==e.startTime&&i.endTime==e.endTime){n=i;break e}n=null}null==n&&(t.a.add(e),t.b(e))},onEvent:function(e){return r.dispatchEvent(e)},onError:function(e){return r.pb(e)}};return new Xe(Promise.resolve().then(function(){return G(function e(){var i;return q(e,function(e){switch(e.o){case 1:return V(e,(i=r).w.start(a,o),2);case 2:if(i.c=e.A,r.dispatchEvent(new D("manifestparsed")),0==r.c.periods.length)throw new de(2,4,4014);(n=r.c.periods).some(function(e){return e.variants.some(t)})&&(X.debug("Found variant with audio and video content, so filtering out audio-only content in all periods."),n.forEach(function(e){e.variants=e.variants.filter(t)})),x(e)}function t(e){return e.video&&e.audio||e.video&&e.video.codecs.includes(",")}var n})})}),function(){return X.info("Aborting parser step..."),r.w.stop()})}(s,e)}),i.set(this.qd,function(e){var n,t;return n=s,t=e,Ze(e=G(function e(){return q(e,function(e){switch(e.o){case 1:return n.j=Fs(n,{Zb:n.L,onError:function(e){n.pb(e)},Wc:function(e){cu(n,e)},onExpirationUpdated:function(e,t){lu(n,e,t)},onEvent:function(e){n.dispatchEvent(e)}}),n.j.configure(n.b.drm),V(e,Ut(n.j,Ua(n.c.periods),n.c.offlineSessionIds),2);case 2:return V(e,n.j.kc(t.D),3);case 3:Ws(n,n.c.periods),x(e)}})}))}),i.set(this.Y,function(e,t){return Ze((p=s,m=e,g=t,G(function e(){var c,l,d,h,f;return q(e,function(e){switch(e.o){case 1:return m.startTime=g.startTime,c=m.D,d=m.uri,p.rb=d,p.J=new Da({Qc:function(){return m.D.playbackRate},fe:function(e){m.D.playbackRate=e},Ue:function(e){m.D.currentTime+=e}}),p.B=new Ms,l=function(){return Js(p)},d=function(){return $s(p)},p.g.m(c,"playing",l),p.g.m(c,"pause",l),p.g.m(c,"ended",l),p.g.m(c,"ratechange",d),d=p.b.abrFactory,p.s&&p.ld==d||(p.ld=d,p.s=new d,p.s.configure(p.b.abr)),function(e,t){for(var n=0;n<t.length;n++){for(var i=t[n],r=new Map,a=B(i.variants),o=a.next();!o.done;o=a.next())if((o=o.value).video&&o.video.closedCaptions)for(var s,u=B((o=o.video).closedCaptions.keys()),c=u.next();!c.done;c=u.next())c=c.value,r.has(c)||(s={id:e.kf++,originalId:c,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(){return null},getSegmentReference:function(){return null},initSegmentReference:null,presentationTimeOffset:0,mimeType:"application/cea-608",codecs:"",kind:"caption",encrypted:!1,keyId:null,language:o.closedCaptions.get(c),label:null,type:"text",primary:!1,frameRate:void 0,pixelAspectRatio:void 0,trickModeVideo:null,emsgSchemeIdUris:null,roles:o.roles,channelsCount:null,audioSamplingRate:null,closedCaptions:null},r.set(c,s));for(r=B(r.values()),a=r.next();!a.done;a=r.next())i.textStreams.push(a.value)}}(p,p.c.periods),p.sb=new Ta(p.b.preferredAudioLanguage,p.b.preferredVariantRole,p.b.preferredAudioChannelCount),p.ia=p.b.preferredTextLanguage,o=p.c.presentationTimeline,s=p.b.playRangeStart,u=p.b.playRangeEnd,0<s&&(o.W()?X.u("|playRangeStart| has been configured for live content. Ignoring the setting."):o.vf(s)),u<o.ra()&&(o.W()?X.u("|playRangeEnd| has been configured for live content. Ignoring the setting."):o.Ua(u)),p.s.init(function(e,t,n){t=void 0!==t&&t,n=void 0===n?0:n,X.debug("switch_");e:{for(var i=B(p.c.periods),r=i.next();!r.done;r=i.next())if((r=r.value).variants.includes(e)){i=r;break e}i=null}Vs(p,i,e,!0),p.f&&lo(p.f,e,t,n)&&tu(p)}),p.v=(r=p,a=m.startTime,new Ya(r.a,r.c,r.b.streaming,a,function(){r.La&&La(r.La,!0),r.f&&function(n){function e(e){var t=n.a.U;return e="text"==e?null!=(e=t.a).a&&null!=e.b&&(i>=e.a&&i<e.b):on(e=jn(t,e),i,r)}var i=n.a.yb(),r=n.g.smallGapLimit,t=!1,a=Io(n,i);if(Y(n.b.values(),function(e){return e.Ba==a}))for(var o=B(n.b.keys()),s=o.next();!s.done;s=o.next())e(s=s.value)||(fo(n,n.b.get(s)),t=!0);else Y(n.b.keys(),e)||(X.debug("(all): seeked: unbuffered seek: clearing all buffers"),n.b.forEach(function(e){fo(n,e)}),t=!0);t||X.debug("(all): seeked: buffered seek: presentationTime="+i)}(r.f),r.F&&Ks(r)},function(e){return r.dispatchEvent(e)})),p.La=function(n){var e=new Oa(n.c);!function(e,t){e.b=t}(e,function(){nu(n)});var t=new eo(n.Cc);!function(e,t,n,i){e.a=t,e.b=n,e.c=i}(t,function(e){su(n,"timelineregionenter",e)},function(e){su(n,"timelineregionexit",e)},function(e,t){t||(su(n,"timelineregionenter",e),su(n,"timelineregionexit",e))});var i=new Ra(n.a);return i.a.add(e),i.a.add(t),i}(p),d=Math.max(p.c.minBufferTime,p.b.streaming.rebufferingGoal),js(p,d),p.f=new ro((i=p).c,{yb:function(){return i.v.g()},getBandwidthEstimate:function(){return i.s.getBandwidthEstimate()},U:i.H,Zb:i.L,Ye:i.Lg.bind(i),Xe:i.Mf.bind(i),onError:i.pb.bind(i),onEvent:function(e){return i.dispatchEvent(e)},Pg:i.Qg.bind(i),Sd:i.Vg.bind(i)}),p.f.configure(p.b.streaming),Wn.De(p.c,p.b.preferredAudioChannelCount),p.l=Au,p.dispatchEvent(new D("streaming")),V(e,p.f.start(),2);case 2:p.b.streaming.startAtSegmentBoundary&&(h=p.v.g(),s=h,u=ao((o=p).f),a=oo(o.f),n=gu(o),u=t(u,s),f=null!=(a=t(a,s))&&null!=u?Math.max(a,u):null!=a?a:null!=u?u:s,p.v.v(f)),p.c.periods.forEach(p.sd.bind(p)),nu(p),tu(p),h=gu(p)||p.c.periods[0],f=h.variants.some(function(e){return e.primary}),p.b.preferredAudioLanguage||f||X.u("No preferred audio language set.  We will choose an arbitrary language initially"),Zs(p,h.variants),p.g.Ha(c,"loadedmetadata",function(){p.B.b=Date.now()/1e3-g.le}),x(e)}function t(e,t){if(!e)return null;t=e.findSegmentPosition(t-n.startTime);return null!=t&&(t=e.getSegmentReference(t))?t.startTime+n.startTime:null}var n,i,r,a,o,s,u})})));var p,m,g}),i.set(this.Md,function(e){var n,i;return n=s,i=e,Ze(e=G(function e(){var t;return q(e,function(e){switch(e.o){case 1:return t=Ne,n.j=Fs(n,{Zb:n.L,onError:function(e){n.pb(e)},Wc:function(e){cu(n,e)},onExpirationUpdated:function(e,t){lu(n,e,t)},onEvent:function(e){n.dispatchEvent(e)}}),n.j.configure(n.b.drm),t={id:0,language:"und",primary:!1,audio:null,video:{id:0,originalId:null,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(){return null},getSegmentReference:function(){return null},initSegmentReference:null,presentationTimeOffset:0,mimeType:"video/mp4",codecs:"",encrypted:!0,keyId:null,language:"und",label:null,type:t.tb,primary:!1,frameRate:void 0,pixelAspectRatio:void 0,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],channelsCount:null,audioSamplingRate:null,closedCaptions:null},bandwidth:100,drmInfos:[],allowedByApplication:!0,allowedByKeySystem:!0},V(e,Ut(n.j,[t],[]),2);case 2:return V(e,n.j.kc(i.D),0)}})}))}),i.set(this.Na,function(e,t){return function(t,n,e){function i(){return Js(t)}{var r;n.uri=e.uri,n.startTime=e.startTime,t.rb=n.uri,t.B=new Ms,t.v=new Xa(n.D),null!=n.startTime&&t.v.v(n.startTime),t.J=new Da({Qc:function(){return n.D.playbackRate},fe:function(e){n.D.playbackRate=e},Ue:function(e){n.D.currentTime+=e}}),js(t,t.b.streaming.rebufferingGoal),t.g.m(n.D,"playing",i),t.g.m(n.D,"pause",i),t.g.m(n.D,"ended",i),t.g.m(n.D,"ratechange",function(){return $s(t)}),"none"!=t.a.preload&&t.g.Ha(n.D,"loadedmetadata",function(){t.B.b=Date.now()/1e3-e.le}),t.a.audioTracks&&(t.g.m(t.a.audioTracks,"addtrack",function(){return nu(t)}),t.g.m(t.a.audioTracks,"removetrack",function(){return nu(t)}),t.g.m(t.a.audioTracks,"change",function(){return nu(t)})),t.a.textTracks&&(r=t.a.textTracks,t.g.m(r,"addtrack",function(){return nu(t)}),t.g.m(r,"removetrack",function(){return nu(t)}),t.g.m(r,"change",function(){return nu(t)}))}n.D.src=n.uri,(kt()||Nt("Web0S"))&&n.D.load(),t.l=Iu,t.dispatchEvent(new D("streaming"));var a=new Me;ja(t.a,HTMLMediaElement.HAVE_METADATA,t.g,function(){a.resolve()});var o=!1;return t.md.push(function(){o=!0}),ja(t.a,HTMLMediaElement.HAVE_CURRENT_DATA,t.g,function(){return G(function e(){return q(e,function(e){switch(e.o){case 1:if(o)return e.return();if(!function(e){var t=e.b.preferredAudioLanguage;{var n;""!=t&&(e.cd(t),""!=(n=e.b.preferredVariantRole)&&e.cd(t,n))}}(t),Gs(t).find(function(e){return"disabled"!=e.mode})){e.C(2);break}return V(e,new Promise(function(e){t.g.Ha(t.a.textTracks,"change",e),new ze(e).R(1)}),2);case 2:if(o)return e.return();!function(e){var t=e.b.preferredTextLanguage;{var n;""!=t&&(e.dd(t),""!=(n=e.b.preferredTextRole)&&e.dd(t,n))}}(t),x(e)}})})}),t.a.error?a.reject(uu(t)):"none"==t.a.preload&&(X.ba('With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.'),a.resolve()),t.g.Ha(t.a,"error",function(){a.reject(uu(t))}),new Xe(a,function(){return a.reject(new de(2,7,7001)),Promise.resolve()})}(s,e,t)}),this.ya=new gs(this.K,{pg:function(e,t,n,i){var r=null;return e==s.K&&(r=n==s.K?s.K:s.O),e==s.O&&(r=n==s.K||t.D!=i.D?s.K:n==s.O?s.O:n==s.Ka||n==s.Y?s.Ka:n==s.Na?s.Md:null),e==s.Ka&&(r=n==s.Y&&t.D==i.D?s.Gd:s.wa),e==s.Gd&&(r=yu(s.Y,s.Fd,s.wa,n,t,i)),e==s.Fd&&(r=yu(s.Y,s.qd,s.wa,n,t,i)),e==s.qd&&(r=yu(s.Y,s.Y,s.wa,n,t,i)),e==s.Md&&(r=n==s.Na&&t.D==i.D?s.Na:s.wa),e!=s.Y&&e!=s.Na||(r=s.wa),e==s.wa&&(r=i.D&&t.D==i.D?s.O:s.K),r},Qf:function(e,t,n){return s.dispatchEvent(new D("onstatechange",{state:e.name})),i.get(e)(t,n)},handleError:function(t,n){return G(function e(){return q(e,function(e){switch(e.o){case 1:return X.u("The walker saw an error:"),n instanceof de?X.u("Error Code:",n.code):(X.u("Error Message:",n.message),X.u("Error Stack:",n.stack)),V(e,Ds(s,t),2);case 2:return e.return(t.D?s.O:s.K)}})})},Ng:function(e){s.dispatchEvent(new D("onstateidle",{state:e.name}))}}),e&&this.kc(e,!0)}v(es,Ho),es.prototype.updateManifestExpiration=function(t,n){var e=Vo(this.b,this.a),i=e.store(),r=new Me;return i.get(t).onsuccess=function(e){(e=e.target.result)?(e.expiration=n,i.put(e),r.resolve()):r.reject(new de(2,9,9012,"Could not find values for "+t))},e.promise().then(function(){return r})},es.prototype.Lc=function(e){return{originalManifestUri:e.originalManifestUri,duration:e.duration,size:e.size,expiration:null==e.expiration?1/0:e.expiration,periods:e.periods.map(ts),sessionIds:e.sessionIds,drmInfo:e.drmInfo,appMetadata:e.appMetadata}},es.prototype.Ee=function(e){return{data:e.data}},v(as,Ho),as.prototype.hasFixedKeySpace=function(){return this.f},as.prototype.addSegments=function(e){return this.f?Wo(this.c):this.add(this.c,e)},as.prototype.addManifests=function(e){return this.f?Wo(this.a):this.add(this.a,e)},as.prototype.Lc=function(e){return null==e.expiration&&(e.expiration=1/0),e},(e=os.prototype).init=function(){var n=this,i=new Me,t=d.indexedDB.open("shaka_offline_db",4);return t.onsuccess=function(e){e=e.target.result;var t=(t=(n.f=e).objectStoreNames).contains("manifest")&&t.contains("segment")?(X.debug("Mounting v1 idb storage cell"),new es(e,"segment","manifest")):null;n.a=t,t=(t=e.objectStoreNames).contains("manifest-v2")&&t.contains("segment-v2")?(X.debug("Mounting v2 idb storage cell"),new as(e,"segment-v2","manifest-v2",!0)):null,n.b=t,t=(t=e.objectStoreNames).contains("manifest-v3")&&t.contains("segment-v3")?(X.debug("Mounting v3 idb storage cell"),new as(e,"segment-v3","manifest-v3",!1)):null,n.c=t,e=e.objectStoreNames.contains("session-ids")?(X.debug("Mounting session ID idb storage cell"),new Yo(e)):null,n.g=e,i.resolve()},t.onupgradeneeded=function(e){e=e.target.result;for(var t=B(["segment-v3","manifest-v3","session-ids"]),n=t.next();!n.done;n=t.next())n=n.value,e.objectStoreNames.contains(n)||e.createObjectStore(n,{autoIncrement:!0})},t.onerror=function(e){i.reject(new de(2,9,9001,t.error)),e.preventDefault()},i},e.destroy=function(){var t=this;return G(function e(){return q(e,function(e){switch(e.o){case 1:if(t.a)return V(e,t.a.destroy(),2);e.C(2);break;case 2:if(t.b)return V(e,t.b.destroy(),4);e.C(4);break;case 4:if(t.c)return V(e,t.c.destroy(),6);e.C(6);break;case 6:if(t.g)return V(e,t.g.destroy(),8);e.C(8);break;case 8:t.f&&t.f.close(),x(e)}})})},e.getCells=function(){var e=new Map;return this.a&&e.set("v1",this.a),this.b&&e.set("v2",this.b),this.c&&e.set("v3",this.c),e},e.getEmeSessionCell=function(){return this.g},e.erase=function(){var i=this;return G(function e(){return q(e,function(e){switch(e.o){case 1:if(i.a)return V(e,i.a.destroy(),2);e.C(2);break;case 2:if(i.b)return V(e,i.b.destroy(),4);e.C(4);break;case 4:if(i.c)return V(e,i.c.destroy(),6);e.C(6);break;case 6:return i.f&&i.f.close(),V(e,(t=new Me,(n=d.indexedDB.deleteDatabase("shaka_offline_db")).onblocked=function(){X.u("Deleting","shaka_offline_db","is being blocked")},n.onsuccess=function(){t.resolve()},n.onerror=function(e){t.reject(new de(2,9,9001,n.error)),e.preventDefault()},t),8);case 8:return i.f=null,i.a=null,i.b=null,i.c=null,V(e,i.init(),0)}var t,n})})},Zo("idb",function(){return Nt("CrKey")||!d.indexedDB?null:new os}),ss.prototype.Ta=function(){return this.g},ss.prototype.ua=function(){return this.f},ss.prototype.key=function(){return this.c},ss.prototype.toString=function(){return this.b},(e=fs.prototype).configure=function(){},e.start=function(r){var a=this;return G(function e(){var t,n,i;return q(e,function(e){switch(e.o){case 1:return(i=us(r),null==(a.a=i)||"manifest"!=i.a)?e.return(Promise.reject(new de(2,1,9004,i))):(t=new $o,C(e,2),V(e,t.init(),4));case 4:return V(e,Jo(t,i.Ta(),i.ua()),5);case 5:return V(e,e.A.getManifests([i.key()]),6);case 6:return n=e.A,n=n[0],i=new cs(i.Ta(),i.ua()),e.return(function(t,e){var n=new Tr(null,0);n.Ua(e.duration);var i=e.periods.map(function(e){return ls(t,e,n)}),r=e.drmInfo?[e.drmInfo]:[];return e.drmInfo&&i.forEach(function(e){e.variants.forEach(function(e){e.drmInfos=r})}),{presentationTimeline:n,minBufferTime:2,offlineSessionIds:e.sessionIds,periods:i}}(i,n));case 2:return N(e),V(e,t.destroy(),7);case 7:P(e,0)}})})},e.stop=function(){return Promise.resolve()},e.update=function(){},e.onExpirationUpdated=function(o,s){var u=this;return G(function e(){var t,n,i,r,a;return q(e,function(e){switch(e.o){case 1:return t=u.a,a=new $o,z(e,2,3),V(e,a.init(),5);case 5:return V(e,Jo(a,t.Ta(),t.ua()),6);case 6:return V(e,(n=e.A).getManifests([t.key()]),7);case 7:if(i=e.A,r=i[0],i=r.sessionIds.includes(o),r=null==r.expiration||r.expiration>s,i&&r)return X.debug("Updating expiration for stored content"),V(e,n.updateManifestExpiration(t.key(),s),3);e.C(3);break;case 3:return N(e),V(e,a.destroy(),10);case 10:P(e,0);break;case 2:a=W(e),X.error("There was an error updating",t,a),e.C(3)}})})},wr.gc("application/x-offline-manifest",fs),_("shaka.offline.OfflineScheme",ps),ps.j=function(e){return Je(e={uri:e,Ud:e,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"}})},ps.l=function(e,t){var n=new $o;return Je(void 0).ma(function(){return n.init()}).ma(function(){return Jo(n,t.Ta(),t.ua())}).ma(function(e){return e.getSegments([t.key()])}).ma(function(e){return{uri:t,Ud:t,data:e[0].data,headers:{}}}).finally(function(){return n.destroy()})},ct("offline",ps),gs.prototype.destroy=function(){var i=this;return G(function e(){return q(e,function(e){switch(e.o){case 1:return i.s=!1,i.b&&i.b.abort(),bs(i),V(e,i.v,2);case 2:i.a&&i.a.Sa.Eb();for(var t=B(i.g),n=t.next();!n.done;n=t.next())n.value.Sa.Eb();i.a=null,i.g=[],i.j=null,x(e)}})})},_("shaka.text.SimpleTextDisplayer",ys),ys.prototype.remove=function(t,n){return!!this.a&&(ws(this.a,function(e){return e.startTime<n&&e.endTime>t}),!0)},ys.prototype.append=function(e){var t=Es,n=e.map(function(e){var t;return e.nestedCues.length&&(t=e.nestedCues.map(function(e){return e.spacer?"\n":e.payload+" "}).join("").replace(/ $/m,""),(e=e.clone()).nestedCues=[],e.payload=t),e}),i=[];e=this.a.cues?Array.from(this.a.cues):[];for(var r={},a=(n=B(n)).next();!a.done;r={Vb:r.Vb},a=n.next())r.Vb=a.value,e.some(function(t){return function(e){return e.startTime==t.Vb.startTime&&e.endTime==t.Vb.endTime&&e.text==t.Vb.payload}}(r))||(a=t(r.Vb))&&i.push(a);i.slice().sort(function(e,t){return e.startTime!=t.startTime?e.startTime-t.startTime:e.endTime!=t.endTime?e.endTime-t.startTime:"line"in VTTCue.prototype?i.indexOf(t)-i.indexOf(e):i.indexOf(e)-i.indexOf(t)}).forEach(function(e){this.a.addCue(e)}.bind(this))},ys.prototype.destroy=function(){return this.a&&ws(this.a,function(){return 1}),this.a=null,Promise.resolve()},ys.prototype.isTextVisible=function(){return"showing"==this.a.mode},ys.prototype.setTextVisibility=function(e){this.a.mode=e?"showing":"hidden"},_("shaka.util.ConfigUtils.mergeConfigObjects",Ts),_("shaka.util.ConfigUtils.convertToConfigObject",Ss),_("shaka.util.PlayerConfiguration",As),As.mergeConfigObjects=ks,O(Rs,j),_("shaka.Player",Rs),Rs.prototype.destroy=function(){var n=this;return G(function e(){var t;return q(e,function(e){switch(e.o){case 1:return n.l==Tu?e.return():(n.l=Tu,t=vs(n.ya,function(){return{node:n.K,payload:Eu(),zb:!1}}),V(e,new Promise(function(e){t.ac=function(){X.info("Preparing to destroy walker...")},t.Vc=function(){e(),n.dispatchEvent(new D("loaded"))},t.Eb=function(){e()},t.onError=function(){e()},t.Xc=function(){e()}}),2));case 2:return V(e,n.ya.destroy(),3);case 3:if(n.g&&(n.g.release(),n.g=null),n.ld=null,n.s=null,n.b=null,n.L)return V(e,n.L.destroy(),5);e.C(0);break;case 5:n.L=null,x(e)}})})},Rs.version="v2.5.20";var Ls=["2","5"],Qn=new function(e){this.a=e,this.c=Jn,this.b=Zn}(new Yn(Number(Ls[0]),Number(Ls[1]))),Us=["output-restricted","internal-error"],_s={};function Os(){if(!(d.Promise&&d.Uint8Array&&Array.prototype.forEach))return!1;var e=xt();return!(e&&e<12||!(d.MediaKeys&&d.navigator&&d.navigator.requestMediaKeySystemAccess&&d.MediaKeySystemAccess&&d.MediaKeySystemAccess.prototype.getConfiguration))&&(!!At()||It("application/x-mpegurl"))}function Ds(n,i){return G(function e(){var t;return q(e,function(e){switch(e.o){case 1:return n.l!=Tu&&(n.l=Su),t=n.md.map(function(e){return e()}),n.md=[],V(e,Promise.all(t),2);case 2:if(n.dispatchEvent(new D("unloading")),i.Ya=null,i.mimeType=null,i.startTime=null,i.uri=null,i.D&&(n.g.xa(i.D,"loadedmetadata"),n.g.xa(i.D,"playing"),n.g.xa(i.D,"pause"),n.g.xa(i.D,"ended"),n.g.xa(i.D,"ratechange")),n.La&&(n.La.release(),n.La=null),n.Dc&&(n.Dc.stop(),n.Dc=null),n.w)return V(e,n.w.stop(),4);e.C(3);break;case 4:n.w=null;case 3:if(n.s)return V(e,n.s.stop(),5);e.C(5);break;case 5:if(n.f)return V(e,n.f.destroy(),8);e.C(7);break;case 8:n.f=null;case 7:if(n.J&&(n.J.release(),n.J=null),n.v&&(n.v.release(),n.v=null),n.H)return V(e,n.H.destroy(),10);e.C(9);break;case 10:n.H=null;case 9:if(i.D&&i.D.src)return V(e,new Promise(function(e){return new ze(e).R(.1)}),12);e.C(11);break;case 12:i.D.removeAttribute("src"),i.D.load();case 11:if(n.j)return V(e,n.j.destroy(),14);e.C(13);break;case 14:n.j=null;case 13:n.Z.a.clear(),n.rb=null,n.F=null,n.Fc.clear(),n.c=null,n.B=null,n.Ad=null,n.Wa=!0,Ys(n),x(e)}})})}function Fs(e,t){return new Lt(t,e.b.drm.updateExpirationTime)}function js(e,t){e.F=new Sa,e.F.a=Ia,Aa(e.F,t,Math.min(.5,t/2)),Ys(e),e.Dc=new ze(function(){Ks(e)}).Ia(.25)}function Ks(e){switch(e.l){case Iu:var t=!!e.a.ended||an(e.a.buffered)>=e.a.duration-1;break;case Au:e:if(e.a.ended||On(e.H))t=!0;else{if(e.c.presentationTimeline.W()){var n=e.c.presentationTimeline.Sb();if(an(e.a.buffered)>=n){t=!0;break e}}t=!1}break;default:t=!1}var i=sn(e.a.buffered,e.a.currentTime),r=t,a=(n=e.F).b.get(n.a),t=n.a,i=r||a<=i?ka:Ia;t!=(n.a=i)&&Ys(e)}function Bs(t){var e;if(t.w&&(r=et(t.b.manifest),t.a&&"AUDIO"===t.a.nodeName&&(r.disableVideo=!0),t.w.configure(r)),t.j&&t.j.configure(t.b.drm),t.f){t.f.configure(t.b.streaming);try{t.c.periods.forEach(t.sd.bind(t))}catch(e){t.pb(e)}var n=ao(t.f),i=oo(t.f),r=gu(t),n=Wn.Me(n,i,r.variants);t.s&&n&&n.allowedByApplication&&n.allowedByKeySystem?Zs(t,r.variants):(X.debug("Choosing new streams after changing configuration"),Qs(t,r))}t.H&&(r=t.b.textDisplayFactory,t.Ad!=r)&&(n=new r,e=(i=t.H).g,i.g=n,e&&(n.setTextVisibility(e.isTextVisible()),e.destroy()),i.a&&(i.a.c=n),t.Ad=r,!t.f||(n=(r=t.f).b.get("text"))&&ho(r,n.stream,!0,0,!0)),t.s&&(t.s.configure(t.b.abr),t.b.abr.enabled&&!t.Wa?t.s.enable():t.s.disable(),ou(t)),t.F&&(r=t.b.streaming.rebufferingGoal,t.c&&(r=Math.max(r,t.c.minBufferTime)),Aa(t.F,r,Math.min(.5,r/2)))}function Gs(e){return Array.from(e.a.textTracks).filter(function(e){return"metadata"!=e.kind&&"chapters"!=e.kind&&"Shaka Player TextTrack"!=e.label})}function Vs(e,t,n,i){ma(e.Z,t).variant=n,(e=e.B.c).c!=n&&(e.c=n,e.a.push({timestamp:Date.now()/1e3,id:n.id,type:"variant",fromAdaptation:i,bandwidth:n.bandwidth}))}function zs(e,t,n,i){pa(e.Z,t,n),(e=e.B.c).b!=n&&(e.b=n,e.a.push({timestamp:Date.now()/1e3,id:n.id,type:"text",fromAdaptation:i,bandwidth:null}))}function Hs(t){var e=Is();return e.streaming.failureCallback=function(e){t.W()&&[1001,1002,1003].includes(e.code)&&(e.severity=1,X.u("Live streaming error.  Retrying automatically..."),t.$d())},e.textDisplayFactory=function(){return new ys(t.a)},e}function Ws(e,t){var n,i,r=e.f?ao(e.f):null,a=e.f?oo(e.f):null;if(t.forEach(Wn.filterNewPeriod.bind(null,e.j,r,a)),n=function(e){return e.variants.some(Wn.Xb)},i=0,t.forEach(function(e){i+=n(e)?1:0}),0==(r=i))throw new de(2,4,4032);if(r<t.length)throw new de(2,4,4011);t.forEach(function(e){Wn.we(e.variants,this.b.restrictions,this.Gc)&&this.f&&gu(this)==e&&nu(this),du(this,e.variants)}.bind(e))}function qs(e,t,n,i){return n=void 0!==n&&n,i=void 0===i?0:i,e.Wa?(e.na=t,e.jf=n,e.Ve=i,!0):((t=lo(e.f,t,n,i))&&iu(e),t)}function Xs(e,t){if(e.Wa)return e.ka=t,!0;t=ho(e.f,t,!0,0,!1);return t&&ru(e),t}function Ys(e){var t,n=e.Wb();e.B&&e.F&&e.v&&((t=e.J).f=n,Fa(t),Js(e)),e.dispatchEvent(new D("buffering",{buffering:n}))}function $s(e){var t=e.a.playbackRate;0!=t&&e.J.set(t)}function Js(e){var t;e.B&&e.F&&(t=e.B.a,e.F.a==Ia?xs(t,"buffering"):e.a.paused?xs(t,"paused"):e.a.ended?xs(t,"ended"):xs(t,"playing"))}function Zs(t,e){try{du(t,e)}catch(e){return t.pb(e),null}var n=e.filter(function(e){return Wn.Xb(e)}),n=t.sb.create(n);return t.s.setVariants(Array.from(n.values())),t.s.chooseVariant()}function Qs(e,t){var n=eu(e,t,!1),i=Wn.mc(t.textStreams,e.ia,e.Ja)[0]||null,r=!1;i&&(e.b.streaming.alwaysStreamText||e.bb())&&(zs(e,t,i,!0),r=Xs(e,i)),(n||r)&&tu(e)}function eu(e,t,n){n=void 0===n||n;var i=Zs(e,t.variants),r=!1;return i&&(Vs(e,t,i,!0),r=qs(e,i,!0)),n&&r&&tu(e),r}function tu(e){hu(e,new D("adaptation"))}function nu(e){hu(e,new D("trackschanged"))}function iu(e){hu(e,new D("variantchanged"))}function ru(e){hu(e,new D("textchanged"))}function au(e){hu(e,new D("texttrackvisibility"))}function ou(e){hu(e,new D("abrstatuschanged",{Jg:e.b.abr.enabled}))}function su(e,t,n){e.dispatchEvent(new D(t,{detail:{schemeIdUri:n.schemeIdUri,value:n.value,startTime:n.startTime,endTime:n.endTime,id:n.id,eventElement:n.eventElement}}))}function uu(e){if(!e.a.error)return null;var t=e.a.error.code;if(1==t)return null;var n=e.a.error.msExtendedCode;return n&&(n<0&&(n+=Math.pow(2,32)),n=n.toString(16)),new de(2,3,3016,t,n,e.a.error.message)}function cu(e,i){var t,r,n,a,o;e.f&&(t=gu(e),r=!1,0==(n=Object.keys(i)).length&&X.u("Got a key status event without any key statuses, so we don't know the real key statuses. If we don't have all the keys, you'll need to set restrictions so we don't select those tracks."),(a=1==n.length&&"00"==n[0])&&X.u("Got a synthetic key status event, so we don't know the real key statuses. If we don't have all the keys, you'll need to set restrictions so we don't select those tracks."),n.length&&e.c.periods.forEach(function(e){e.variants.forEach(function(n){Wn.yg(n).forEach(function(e){var t=n.allowedByKeySystem;e.keyId&&(e=i[a?"00":e.keyId],n.allowedByKeySystem=!!e&&!Us.includes(e)),t!=n.allowedByKeySystem&&(r=!0)})})}),n=ao(e.f),o=oo(e.f),(n=Wn.Me(n,o,t.variants))&&!n.allowedByKeySystem&&(X.debug("Choosing new variants after key status changed"),eu(e,t)),r&&(nu(e),Zs(e,t.variants)))}function lu(e,t,n){e.w&&e.w.onExpirationUpdated&&e.w.onExpirationUpdated(t,n),e.dispatchEvent(new D("expirationupdated"))}function du(e,t){for(var n=e.j?Et(e.j.Y):{},i=(i=Object.keys(n)).length&&"00"==i[0],r=!1,a=!1,o=[],s=[],u=B(t),c=u.next();!c.done;c=u.next()){var l=[];(c=c.value).audio&&l.push(c.audio),c.video&&l.push(c.video);for(var d,h=(l=B(l)).next();!h.done;h=l.next())(h=h.value).keyId&&((d=n[i?"00":h.keyId])?Us.includes(d)&&(s.includes(d)||s.push(d)):o.includes(h.keyId)||o.push(h.keyId));c.allowedByApplication?c.allowedByKeySystem&&(r=!0):a=!0}if(!r)throw new de(2,4,4012,{hasAppRestrictions:a,missingKeys:o,restrictedKeyStatuses:s})}function hu(t,n){G(function e(){return q(e,function(e){switch(e.o){case 1:return V(e,Promise.resolve(),2);case 2:t.l!=Tu&&t.dispatchEvent(n),x(e)}})})}function fu(e){for(var t=new Set,n=(e=B(e)).next();!n.done;n=e.next())(n=n.value).language?t.add(Q(n.language)):t.add("und");return t}function pu(e){for(var t=new Map,n=(e=B(e)).next();!n.done;n=e.next()){var i=n.value,n="und",r=[];for(i.language&&(n=Q(i.language)),(r="variant"==i.type?i.audioRoles:i.roles)&&r.length||(r=[""]),t.has(n)||t.set(n,new Set),r=(i=B(r)).next();!r.done;r=i.next())r=r.value,t.get(n).add(r)}var a=[];return t.forEach(function(e,t){for(var n=B(e),i=n.next();!i.done;i=n.next())a.push({language:t,role:i.value})}),a}function mu(e){return null==(e=gu(e))?[]:e.variants.filter(function(e){return Wn.Xb(e)})}function gu(e){for(var t=e.v.g(),n=null,i=(e=B(e.c.periods)).next();!i.done;i=e.next())(i=i.value).startTime<=t&&(n=i);return n}function vu(e){var t=gu(e);return ma(e.Z,t).variant}function bu(){return new de(2,7,7e3)}function yu(e,t,n,i,r,a){return i==e&&r.D==a.D&&r.uri==a.uri&&r.mimeType==a.mimeType&&r.Ya==a.Ya?t:n}function Eu(){return{Ya:null,D:null,mimeType:null,startTime:null,le:null,uri:null}}function wu(n){return new Promise(function(e,t){n.Eb=function(){return t(bu())},n.Vc=function(){return e()},n.onError=function(e){return t(e)},n.Xc=function(){return t(bu())}})}Rs.registerSupportPlugin=function(e,t){_s[e]=t},Rs.isBrowserSupported=Os,Rs.probeSupport=function(){return qt().then(function(e){for(var t,n=wr.eh(),i={},r=B('video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="opus",audio/mp4; codecs="flac",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",")),a=r.next();!a.done;a=r.next()){i[a=a.value]=At()?!!Nn(a)||(MediaSource.isTypeSupported(a)||Be(a)):It(a);var o=a.split(";")[0];i[o]=i[o]||i[a]}for(t in e={manifest:n,media:i,drm:e},_s)e[t]=_s[t]();return e})},Rs.prototype.attach=Rs.prototype.kc=function(e,t){if(t=void 0===t||t,this.l==Tu)return Promise.reject(bu());var n=Eu();n.D=e,At()||(t=!1);var i=t?this.Ka:this.O,t=vs(this.ya,function(){return{node:i,payload:n,zb:!1}});return t.ac=function(){return X.info("Starting attach...")},wu(t)},Rs.prototype.detach=function(){var e=this;if(this.l==Tu)return Promise.reject(bu());var t=vs(this.ya,function(){return{node:e.K,payload:Eu(),zb:!1}});return t.ac=function(){return X.info("Starting detach...")},wu(t)},Rs.prototype.unload=Rs.prototype.re=function(n){var i=this;if(n=void 0===n||n,this.l==Tu)return Promise.reject(bu());At()||(n=!1);var r=Eu(),e=vs(this.ya,function(e){var t=e.D&&n?i.Ka:e.D?i.O:i.K;return r.D=e.D,{node:t,payload:r,zb:!1}});return e.ac=function(){return X.info("Starting unload...")},wu(e)},Rs.prototype.load=function(e,t,n){if(this.l==Tu)return Promise.reject(bu());this.dispatchEvent(new D("loading"));var i=Eu();i.uri=e,i.le=Date.now()/1e3,n&&"string"!=typeof n&&($n("Loading with a manifest parser factory","Please register a manifest parser and for the mime-type."),i.Ya=function(){return new n}),n&&"string"==typeof n&&(i.mimeType=n),void 0!==t&&(i.startTime=t);var r=function(e,t){if(t.Ya)return!1;if(!At())return!0;var n=t.mimeType,i=t.uri||"";return!!(n=n||{mp4:"video/mp4",m4v:"video/mp4",m4a:"audio/mp4",webm:"video/webm",weba:"audio/webm",mkv:"video/webm",ts:"video/mp2t",ogv:"video/ogg",ogg:"audio/ogg",mpg:"video/mpeg",mpeg:"video/mpeg",m3u8:"application/x-mpegurl",mp3:"audio/mpeg",aac:"audio/aac",flac:"audio/flac",wav:"audio/wav"}[wr.getExtension(i)])&&(""!=(t.D||Pt()).canPlayType(n)&&(!wr.isSupported(i,n)||Ct()&&e.b.streaming.useNativeHlsOnSafari))}(this,i)?this.Na:this.Y,a=vs(this.ya,function(e){return null==e.D?null:(i.D=e.D,{node:r,payload:i,zb:!0})});return a.ac=function(){return X.info("Starting load of "+e+"...")},new Promise(function(e,t){a.Xc=function(){return t(new de(2,7,7002))},a.Vc=function(){return e()},a.Eb=function(){return t(bu())},a.onError=function(e){return t(e)}})},Rs.prototype.configure=function(e,t){2==arguments.length&&"string"==typeof e&&(e=Ss(e,t));var n=ks(this.b,e,Hs(this));return Bs(this),n},Rs.prototype.getConfiguration=function(){var e=Hs(this);return ks(e,this.b,Hs(this)),e},Rs.prototype.resetConfiguration=Rs.prototype.mh=function(){for(var e in this.b)delete this.b[e];ks(this.b,Hs(this),Hs(this)),Bs(this)},Rs.prototype.getLoadMode=Rs.prototype.fg=function(){return this.l},Rs.prototype.getMediaElement=Rs.prototype.ng=function(){return this.a},Rs.prototype.getNetworkingEngine=Rs.prototype.pc=function(){return this.L},Rs.prototype.getAssetUri=Rs.prototype.Oc=function(){return this.rb},Rs.prototype.getManifestUri=Rs.prototype.lg=function(){return $n("getManifestUri",'Please use "getAssetUri" instead.'),this.Oc()},Rs.prototype.isLive=Rs.prototype.W=function(){return this.c?this.c.presentationTimeline.W():!(!this.a||!this.a.src)&&1/0==this.a.duration},Rs.prototype.isInProgress=Rs.prototype.Bb=function(){return!!this.c&&this.c.presentationTimeline.Bb()},Rs.prototype.isAudioOnly=Rs.prototype.Re=function(){if(this.c){if(!this.c.periods.length)return!1;var e=this.c.periods[0].variants;return!!e.length&&!e[0].video}return!(!this.a||!this.a.src)&&(this.a.videoTracks?0==this.a.videoTracks.length:0==this.a.videoHeight)},Rs.prototype.seekRange=Rs.prototype.Ib=function(){if(this.c){var e=this.c.presentationTimeline;return{start:e.Rb(),end:e.ab()}}return this.a&&this.a.src&&(e=this.a.seekable).length?{start:e.start(0),end:e.end(e.length-1)}:{start:0,end:0}},Rs.prototype.keySystem=function(){return jt(this.drmInfo())},Rs.prototype.drmInfo=function(){return this.j?this.j.a:null},Rs.prototype.getExpiration=Rs.prototype.nc=function(){return this.j?this.j.nc():1/0},Rs.prototype.isBuffering=Rs.prototype.Wb=function(){return!!this.F&&this.F.a==Ia},Rs.prototype.getPlaybackRate=Rs.prototype.yd=function(){var e;return e=!this.J||(e=this.J).f?0:e.c},Rs.prototype.trickPlay=Rs.prototype.qe=function(e){0==e?X.ba("A trick play rate of 0 is unsupported!"):(this.a.paused&&this.a.play(),this.J&&this.J.set(e),this.l==Au&&co(this.f,1<Math.abs(e)))},Rs.prototype.cancelTrickPlay=Rs.prototype.ze=function(){this.l==Iu&&this.J.set(1),this.l==Au&&(this.J.set(1),co(this.f,!1))},Rs.prototype.getVariantTracks=Rs.prototype.Ub=function(){if(this.c&&this.v){for(var e=vu(this),t=[],n=B(mu(this)),i=n.next();!i.done;i=n.next()){i=i.value;var r=Wn.ue(i);r.active=i==e,t.push(r)}return t}return this.a&&this.a.audioTracks?Array.from(this.a.audioTracks).map(function(e){return Wn.Ne(e)}):[]},Rs.prototype.getTextTracks=Rs.prototype.ib=function(){if(this.c&&this.v){for(var e=function(e){var t=gu(e);if(null==t)return null;{var n;ma(e.Z,t).text||(n=Wn.mc(t.textStreams,e.ia,e.Ja)).length&&pa(e.Z,t,n[0])}return ma(e.Z,t).text}(this),t=[],n=B(null==(o=gu(a=this))?[]:o.textStreams.filter(function(e){return!a.Fc.has(e)})),i=n.next();!i.done;i=n.next()){i=i.value;var r=Wn.fd(i);r.active=i==e,t.push(r)}return t}var a,o;return this.a&&this.a.src&&this.a.textTracks?Gs(this).map(function(e){return Wn.Bg(e)}):[]},Rs.prototype.selectTextTrack=Rs.prototype.ae=function(t){if(this.c&&this.f){var e=gu(this),n=e.textStreams.find(function(e){return e.id==t.id});n?(zs(this,e,n,!1),Xs(this,n),this.ia=n.language):X.error("No stream with id",t.id)}else if(this.a&&this.a.src&&this.a.textTracks){for(n=(e=B(e=Gs(this))).next();!n.done;n=e.next())n=n.value,Wn.Bd(n)==t.id?n.mode=this.Ma?"showing":"hidden":n.mode="disabled";ru(this)}},Rs.prototype.selectEmbeddedTextTrack=Rs.prototype.ph=function(){$n("selectEmbeddedTextTrack","If closed captions are signaled in the manifest, a text stream will be created to represent them. Please use SelectTextTrack.");var e=this.ib().filter(function(e){return"application/cea-608"==e.mimeType});0<e.length?this.ae(e[0]):X.u("Unable to find the text track embedded in the video.")},Rs.prototype.usingEmbeddedTextTrack=Rs.prototype.Jh=function(){$n("usingEmbeddedTextTrack","If closed captions are signaled in the manifest, a text stream will be created to represent them. There should be no reason to know if the player is playing embedded text.");var e=this.ib().filter(function(e){return e.active})[0];return!!e&&"application/cea-608"==e.mimeType},Rs.prototype.selectVariantTrack=Rs.prototype.qf=function(t,e,n){if(n=void 0===n?0:n,this.c&&this.f){var i=gu(this);this.b.abr.enabled&&X.ba("Changing tracks while abr manager is enabled will likely result in the selected track being overriden. Consider disabling abr before calling selectVariantTrack().");var r=i.variants.find(function(e){return e.id==t.id});r?Wn.Xb(r)?(Vs(this,i,r,!1),qs(this,r,e,n),this.sb=new wa(r),Zs(this,i.variants)):X.error("Unable to switch to restricted track",t.id):X.error("No variant with id",t.id)}else if(this.a&&this.a.audioTracks){for(n=(e=B(e=Array.from(this.a.audioTracks))).next();!n.done;n=e.next())n=n.value,Wn.Bd(n)==t.id&&(n.enabled=!0);iu(this)}},Rs.prototype.getAudioLanguagesAndRoles=Rs.prototype.Wf=function(){return pu(this.Ub())},Rs.prototype.getTextLanguagesAndRoles=Rs.prototype.xg=function(){return pu(this.ib())},Rs.prototype.getAudioLanguages=Rs.prototype.Vf=function(){return Array.from(fu(this.Ub()))},Rs.prototype.getTextLanguages=Rs.prototype.wg=function(){return Array.from(fu(this.ib()))},Rs.prototype.selectAudioLanguage=Rs.prototype.cd=function(e,t){if(this.c&&this.v){var n=gu(this);this.sb=new Ta(e,t||"",0,""),eu(this,n)}else if(this.a&&this.a.audioTracks){for(var i=Array.from(this.a.audioTracks),n=Q(e),r=null,a=null,o=(i=B(i)).next();!o.done;o=i.next()){o=o.value;var s=Wn.Ne(o);Q(s.language)==n&&(r=o,t?s.roles.includes(t)&&(a=o):0==s.roles.length&&(a=o))}a?(a.enabled=!0,iu(this)):r&&(r.enabled=!0,iu(this))}},Rs.prototype.selectTextLanguage=Rs.prototype.dd=function(e,t){var n,i,r;this.c&&this.v?(n=gu(this),this.ia=e,this.Ja=t||"",(i=Wn.mc(n.textStreams,this.ia,this.Ja)[0]||null)&&(zs(this,n,i,!1),(this.b.streaming.alwaysStreamText||this.bb())&&Xs(this,i))):(r=Q(e),(n=this.ib().filter(function(e){return Q(e.language)==r&&(!t||e.roles.includes(t))})[0])&&this.ae(n))},Rs.prototype.selectVariantsByLabel=Rs.prototype.qh=function(e){if(this.c&&this.v){for(var t=gu(this),n=null,i=B(mu(this)),r=i.next();!r.done;r=i.next())if((r=r.value).audio.label==e){n=r;break}null==n?X.u("No variants were found with label: "+e+". Ignoring the request to switch."):(this.sb=new Ta(n.language,"",0,e),eu(this,t))}},Rs.prototype.isTextTrackVisible=Rs.prototype.bb=function(){var e=this.Ma;return this.H?this.H.g.isTextVisible():this.a&&this.a.src&&this.a.textTracks?Gs(this).some(function(e){return"showing"==e.mode}):e},Rs.prototype.setTextTrackVisibility=Rs.prototype.je=function(o){var s=this;return G(function e(){var i,r,a;return q(e,function(e){switch(e.o){case 1:if(s.Ma==(i=!!o))return e.return();if(s.Ma=i,s.l!=Au){if(s.a&&s.a.src&&s.a.textTracks)for(var t=B(Gs(s)),n=t.next();!n.done;n=t.next())"disabled"!=(r=n.value).mode&&(r.mode=i?"showing":"hidden");e.C(2);break}if(s.H.g.setTextVisibility(i),s.b.streaming.alwaysStreamText){e.C(2);break}if(!i){!function(e){e.H=!0;var t=e.b.get("text");t&&(Po(t),Mo(t).catch(function(){}),e.b.delete("text"))}(s.f),e.C(2);break}if(so(s.f,"text")){e.C(2);break}if(a=gu(s),0<(a=Wn.mc(a.textStreams,s.ia,s.Ja)).length)return V(e,uo(s.f,a[0]),2);e.C(2);break;case 2:au(s),x(e)}})})},Rs.prototype.getPlayheadTimeAsDate=Rs.prototype.rg=function(){if(!this.W())return X.u("getPlayheadTimeAsDate is for live streams!"),null;var e=this.ya.f,t=0;if(this.v)t=this.v.g();else if(e){if(null==e.startTime)return new Date;t=e.startTime}return this.c?new Date(1e3*(this.c.presentationTimeline.f+this.a.currentTime)):this.a&&this.a.getStartDate?(e=this.a.getStartDate(),isNaN(e.getTime())?(X.u("EXT-X-PROGRAM-DATETIME required to get playhead time as Date!"),null):new Date(e.getTime()+1e3*t)):(X.u("No way to get playhead time as Date!"),null)},Rs.prototype.getPresentationStartTimeAsDate=Rs.prototype.ug=function(){if(!this.W())return X.u("getPresentationStartTimeAsDate is for live streams!"),null;if(this.c)return new Date(1e3*this.c.presentationTimeline.f);if(this.a&&this.a.getStartDate){var e=this.a.getStartDate();return isNaN(e.getTime())?(X.u("EXT-X-PROGRAM-DATETIME required to get presentation start time as Date!"),null):e}return X.u("No way to get presentation start time as Date!"),null},Rs.prototype.getBufferedInfo=Rs.prototype.wd=function(){var e={total:[],audio:[],video:[],text:[]};return this.l==Iu&&(e.total=un(this.a.buffered)),this.l==Au&&this.H.wd(e),e},Rs.prototype.getStats=function(){if(this.l!=Au&&this.l!=Iu)return{width:NaN,height:NaN,streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,corruptedFrames:NaN,estimatedBandwidth:NaN,loadLatency:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,licenseTime:NaN,switchHistory:[],stateHistory:[]};Js(this),(t=this.a).getVideoPlaybackQuality&&(t=t.getVideoPlaybackQuality(),n=this.B,i=Number(t.totalVideoFrames),n.v=Number(t.droppedVideoFrames),n.s=i,this.B.l=Number(t.corruptedVideoFrames)),t=this.j?(t=this.j).K||NaN:NaN,this.B.j=t,this.l==Au&&((t=vu(this))&&(this.B.w=t.bandwidth),t&&t.video&&(n=this.B,i=t.video.height||NaN,n.B=t.video.width||NaN,n.g=i),t=this.s.getBandwidthEstimate(),this.B.f=t);for(var e=this.B,t=e.B,n=e.g,i=e.w,r=e.s,a=e.v,o=e.l,s=e.f,u=e.b,c=Ns(e.a,"playing"),l=Ns(e.a,"paused"),d=Ns(e.a,"buffering"),h=e.j,f=function(e){function t(e){return{timestamp:e.timestamp,state:e.state,duration:e.duration}}for(var n=[],i=B(e.b),r=i.next();!r.done;r=i.next())n.push(t(r.value));return e.a&&n.push(t(e.a)),n}(e.a),p=[],m=(e=B(e.c.a)).next();!m.done;m=e.next())m=m.value,p.push({timestamp:m.timestamp,id:m.id,type:m.type,fromAdaptation:m.fromAdaptation,bandwidth:m.bandwidth});return{width:t,height:n,streamBandwidth:i,decodedFrames:r,droppedFrames:a,corruptedFrames:o,estimatedBandwidth:s,loadLatency:u,playTime:c,pauseTime:l,bufferingTime:d,licenseTime:h,stateHistory:f,switchHistory:p}},Rs.prototype.addTextTrack=function(a,o,s,u,c,l){var d=this;return G(function e(){var t,n,i,r;return q(e,function(e){switch(e.o){case 1:if(d.l==Iu)throw X.error("Cannot add text when loaded with src="),Error("State error!");if(d.l!=Au)throw X.error("Must call load() and wait for it to resolve before adding text tracks."),Error("State error!");if(t=gu(d),r=Ne,i=d.c.periods.indexOf(t),i=(i=i+1)>=d.c.periods.length?d.c.presentationTimeline.ra():d.c.periods[i].startTime,1/0==(i=i-t.startTime))throw new de(1,4,4033);return n=new rr(1,0,i,function(){return[a]},0,null),i={id:d.kf++,originalId:null,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(){return 1},getSegmentReference:function(e){return 1==e?n:null},initSegmentReference:null,presentationTimeOffset:0,mimeType:u,codecs:c||"",kind:s,encrypted:!1,keyId:null,language:o,label:l||null,type:r.Oa,primary:!1,frameRate:void 0,pixelAspectRatio:void 0,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],channelsCount:null,audioSamplingRate:null,closedCaptions:null},d.Fc.add(i),t.textStreams.push(i),V(e,uo(d.f,i),2);case 2:return(r=so(d.f,"text"))&&pa(d.Z,t,r),d.Fc.delete(i),X.debug("Choosing new streams after adding a text stream"),Qs(d,t),nu(d),e.return(Wn.fd(i))}})})},Rs.prototype.setMaxHardwareResolution=Rs.prototype.ee=function(e,t){this.Gc.width=e,this.Gc.height=t},Rs.prototype.retryStreaming=Rs.prototype.$d=function(){if(this.l==Au){var e=this.f;if(e.f)X.error("Unable to retry after StreamingEngine is destroyed!"),e=!1;else if(e.v)X.error("Unable to retry after StreamingEngine encountered a fatal error!"),e=!1;else{for(var t=B(e.b.values()),n=t.next();!n.done;n=t.next()){var i=Lo(n=n.value);n.tc&&(X.info(i,"Retrying after failure..."),n.tc=!1,No(e,n,.1))}e=!0}}else e=!1;return e},Rs.prototype.getManifest=Rs.prototype.jg=function(){return this.c},Rs.prototype.getManifestParserFactory=Rs.prototype.kg=function(){return this.w?this.w.constructor:null},(e=Rs.prototype).sd=function(e){var t=this.f?ao(this.f):null,n=this.f?oo(this.f):null;if(Wn.filterNewPeriod(this.j,t,n,e),!(t=e.variants).some(Wn.Xb))throw new de(2,4,4011);if(du(this,e.variants),Wn.we(t,this.b.restrictions,this.Gc)&&this.f&&gu(this)==e&&nu(this),e=this.j?this.j.a:null)for(n=(t=B(t)).next();!n.done;n=t.next())for(var i=(n=B(n.value.drmInfos)).next();!i.done;i=n.next())if((i=i.value).keySystem==e.keySystem)for(var r=(i=B(i.initData||[])).next();!r.done;r=i.next())r=r.value,Ft(this.j,r.initDataType,r.initData)},e.Lg=function(e){X.debug("onChooseStreams_",e);try{X.N("onChooseStreams_, choosing variant from ",e.variants),X.N("onChooseStreams_, choosing text from ",e.textStreams),this.Wa=!0,this.s.disable(),ou(this),X.debug("Choosing new streams after period changed");var t=Zs(this,e.variants),n=Wn.mc(e.textStreams,this.ia,this.Ja)[0]||null;this.na&&(e.variants.includes(this.na)&&(t=this.na),this.na=null),this.ka&&(e.textStreams.includes(this.ka)&&(n=this.ka),this.ka=null),t&&Vs(this,e,t,!0),n&&zs(this,e,n,!0);var i=this.f,r=i.b.get("video");o=r?i.c.periods[r.Ba]:(a=i.b.get("audio"))?i.c.periods[a.Ba]:null;var a,o,r=t?t.audio:null;!o&&n&&((i=r)&&(e=n,a=Q(this.b.preferredTextLanguage),o=Q(r.language),i=J(r=Q(e.language),a)&&!J(o,r)),i&&(this.Ma=!0),this.Ma&&this.H.g.setTextVisibility(!0),au(this));t=this.b.streaming.alwaysStreamText||this.bb()?{variant:t,text:n}:{variant:t,text:null};return X.N("onChooseStreams_, chose variant ",t.variant),X.N("onChooseStreams_, chose text ",t.text),t}catch(e){return this.pb(e),{variant:null,text:null}}},e.Mf=function(){X.debug("canSwitch_"),this.Wa=!1,this.b.abr.enabled&&(this.s.enable(),ou(this)),this.na&&(lo(this.f,this.na,this.jf,this.Ve),iu(this),this.na=null),this.ka&&(ho(this.f,this.ka,!0,0,!1),ru(this),this.ka=null)},e.Qg=function(){this.w&&this.w.update&&this.w.update()},e.Vg=function(){this.v&&this.v.w()},e.pb=function(e){var t;this.l!=Tu&&(t=new D("error",{detail:e}),this.dispatchEvent(t),t.defaultPrevented&&(e.handled=!0))};var Tu=0,Su=1,Au=2,Iu=3;function ku(e,t){var n=ls(new cs(e.Ta(),e.ua()),t.periods[0],new Tr(null,0)),i=t.appMetadata||{},n=Cu(n);return{offlineUri:e.toString(),originalManifestUri:t.originalManifestUri,duration:t.duration,size:t.size,expiration:t.expiration,tracks:n,appMetadata:i}}function Cu(e){for(var t=[],n=Wn.qg(e.variants),i=(n=B(n)).next();!i.done;i=n.next())t.push(Wn.ue(i.value));for(n=(e=B(e.textStreams)).next();!n.done;n=e.next())t.push(Wn.fd(n.value));return t}function xu(){this.a={}}function Nu(e,t){t=e.a[t];return null==t&&(t=0,X.error("Asking for bitrate of stream not given to the estimator")),0==t&&X.u("Using bitrate of 0, this stream won't affect progress"),t}function Pu(e){this.a=!1,this.b=new Me,this.c=e}function Mu(e){var a=new Lu;e.periods.forEach(function(e,t){var n,i=Uu(e.variants);if(0==t)for(var r=(i=B(i.a)).next();!r.done;r=i.next())a.add(r.value);else n=i,(t=a).a=t.a.filter(function(e){return n.contains(e)})});for(var t=(e=B(e.periods)).next();!t.done;t=e.next())(t=t.value).variants=t.variants.filter(function(e){return a.contains(new Ru(e))})}function Ru(e){var t=e.audio;e=e.video,this.b=t?t.mimeType:null,this.a=t?t.codecs.split(".")[0]:null,this.f=e?e.mimeType:null,this.c=e?e.codecs.split(".")[0]:null}function Lu(){this.a=[]}function Uu(e){for(var t=new Lu,n=(e=B(e)).next();!n.done;n=e.next())t.add(new Ru(n.value));return t}function _u(e){var n=this;if(e&&e.constructor!=Rs)throw new de(2,9,9008);this.b=this.a=null,e?(this.a=e.b,this.b=e.pc()):(this.a=Is(),this.b=new st),this.f=!1,this.c=[],this.g=[];var i=!e;this.j=new Pu(function(){return G(function e(){var t;return q(e,function(e){switch(e.o){case 1:return t=function(){},V(e,Promise.all(n.g.map(function(e){return e.then(t,t)})),2);case 2:if(i)return V(e,n.b.destroy(),3);e.C(3);break;case 3:n.a=null,n.b=null,x(e)}})})})}function Ou(){if(At())e:{for(var e=B(Qo.values()),t=e.next();!t.done;t=e.next())if(t=(t=t.value)()){t.destroy(),e=!0;break e}e=!1}else e=!1;return e}function Du(e,t){for(var n=[],i=B(e.periods),r=i.next();!r.done;r=i.next())for(var a=(r=B(r.value.streams)).next();!a.done;a=r.next())a=a.value,t&&"video"==a.contentType?n.push({contentType:wt(a.mimeType,a.codecs),robustness:e.drmInfo.videoRobustness}):t||"audio"!=a.contentType||n.push({contentType:wt(a.mimeType,a.codecs),robustness:e.drmInfo.audioRobustness});return n}function Fu(e){if(e.j.a)throw new de(2,9,7001)}function ju(){if(!Ou())throw new de(2,9,9e3)}function Ku(t,n){return G(function e(){return q(e,function(e){switch(e.o){case 1:return t.g.push(n),C(e,2),V(e,n,4);case 4:return e.return(e.A);case 2:N(e),nt(t.g,n),P(e,0)}})})}Rs.LoadMode={DESTROYED:Tu,NOT_LOADED:Su,MEDIA_SOURCE:Au,SRC_EQUALS:Iu},Pu.prototype.destroy=function(){var e=this;return this.a?this.b:(this.a=!0,this.c().then(function(){e.b.resolve()},function(){e.b.resolve()}))},Lu.prototype.add=function(e){this.contains(e)||this.a.push(e)},Lu.prototype.contains=function(t){return this.a.some(function(e){return t.b==e.b&&t.a==e.a&&t.f==e.f&&t.c==e.c})},_("shaka.offline.Storage",_u),_u.support=Ou,_u.prototype.destroy=function(){return this.j.destroy()},_u.prototype.configure=function(e,t){2==arguments.length&&"string"==typeof e&&(e=Ss(e,t));var n=e,i=!1;return null!=n.trackSelectionCallback&&(i=!0,n.offline=n.offline||{},n.offline.trackSelectionCallback=n.trackSelectionCallback,delete n.trackSelectionCallback),null!=n.progressCallback&&(i=!0,n.offline=n.offline||{},n.offline.progressCallback=n.progressCallback,delete n.progressCallback),null!=n.usePersistentLicense&&(i=!0,n.offline=n.offline||{},n.offline.usePersistentLicense=n.usePersistentLicense,delete n.usePersistentLicense),i&&$n("Storage.configure with OfflineConfig","Please configure storage with a player configuration."),ks(this.a,e)},_u.prototype.getConfiguration=function(){var e=Is();return ks(e,this.a,Is()),e},_u.prototype.getNetworkingEngine=_u.prototype.pc=function(){return this.b},_u.prototype.store=function(n,e,i){var v,b,y,k,r=this;return Ku(this,(v=this,b=n,y=e||{},k=function(){return G(function e(){var t;return q(e,function(e){switch(e.o){case 1:return i&&"string"!=typeof i?($n("Storing with a manifest parser factory","Please register a manifest parser and for the mime-type."),e.return(new i)):V(e,wr.create(n,r.b,r.a.manifest.retryParameters,i),2);case 2:return t=e.A,e.return(t)}})})},G(function e(){var t,r,d,f,p,m,g;return q(e,function(e){switch(e.o){case 1:return(ju(),v.f)?e.return(Promise.reject(new de(2,9,9006))):(v.f=!0,V(e,(a=v,o=b,l=k,G(function e(){var t,n,i,r;return q(e,function(e){switch(e.o){case 1:return t=null,r=a.b,r={networkingEngine:r,filterAllPeriods:function(){},filterNewPeriod:function(){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(e){t=e}},V(e,l(),2);case 2:return(n=e.A).configure(a.a.manifest),Fu(a),C(e,3),V(e,n.start(o,r),5);case 5:return i=e.A,Fu(a),r=function(e){for(var t=new Set,n=(e=B(e.periods)).next();!n.done;n=e.next()){for(var i=B((n=n.value).textStreams),r=i.next();!r.done;r=i.next())t.add(r.value);for(n=B(n.variants),i=n.next();!i.done;i=n.next())(i=i.value).audio&&t.add(i.audio),i.video&&t.add(i.video)}return t}(i),V(e,Promise.all(K(r,function(e){return e.createSegmentIndex()})),6);case 6:if(Fu(a),t)throw t;return e.return(i);case 3:return N(e),V(e,n.stop(),7);case 7:P(e,0)}})})),2));case 2:if(m=e.A,Fu(v),!(!m.presentationTimeline.W()&&!m.presentationTimeline.Bb()))throw new de(2,9,9005,b);return t=null,r=new $o,f=d=null,z(e,3,4),V(e,(s=v,u=m,c=function(e){f=f||e},G(function e(){var r,a,o;return q(e,function(e){switch(e.o){case 1:return r=new Lt({Zb:s.b,onError:c,Wc:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),a=Ua(u.periods),o=s.a,r.configure(o.drm),V(e,(t=r,n=a,i=o.offline.usePersistentLicense,t.B=[],t.H=i,_t(t,n)),2);case 2:return V(e,Ot(r),3);case 3:return V(e,Dt(r),4);case 4:return e.return(r)}var t,n,i})})),6);case 6:if(t=e.A,Fu(v),f)throw f;return V(e,(h=v,n=m,i=t,G(function e(){var t;return q(e,function(e){switch(e.o){case 1:return t={width:1/0,height:1/0},function(e,t,n){for(var i=(e=B(e.periods)).next();!i.done;i=e.next())(i=i.value).variants=i.variants.filter(function(e){return Wn.Jd(e,t,n)})}(n,h.a.restrictions,t),function(e){for(var t=(e=B(e.periods)).next();!t.done;t=e.next())(t=t.value).variants=t.variants.filter(function(e){var t=!0;return e.audio&&(t=t&&Un(e.audio)),e.video&&(t=t&&Un(e.video)),t})}(n),function(e,t){for(var n=B(e.periods),i=n.next();!i.done;i=n.next())(i=i.value).variants=i.variants.filter(function(e){return Xt(t,e)})}(n,i),Mu(n),t=h.a.preferredAudioChannelCount,Wn.De(n,t),V(e,(a=n,o=function(d){return G(function e(){var i,r,a,o,s,u,c,l;return q(e,function(e){switch(e.o){case 1:i=Wn,r=[];for(var t=B(d.variants),n=t.next();!n.done;n=t.next())a=n.value,r.push(i.ue(a));for(n=(t=B(d.textStreams)).next();!n.done;n=t.next())o=n.value,r.push(i.fd(o));return V(e,h.a.offline.trackSelectionCallback(r),2);case 2:for(s=e.A,u=new Set,c=new Set,n=(t=B(s)).next();!n.done;n=t.next())"variant"==(l=n.value).type&&u.add(l.id),"text"==l.type&&c.add(l.id);d.variants=d.variants.filter(function(e){return u.has(e.id)}),d.textStreams=d.textStreams.filter(function(e){return c.has(e.id)}),x(e)}})})},G(function e(){var t,n,i,r;return q(e,function(e){switch(e.o){case 1:t=null,n=B(a.periods),i=n.next();case 2:if(i.done){e.C(0);break}return r=i.value,t&&(r.variants=r.variants.filter(function(e){return t.contains(new Ru(e))})),V(e,o(r),5);case 5:t=Uu(r.variants),i=n.next(),e.C(2)}})})),2);case 2:(function(e){if(0==e.periods.length)throw new de(2,4,4014);for(var t=(e=B(e.periods)).next();!t.done;t=e.next())!function(e){var t=new Set(e.variants.map(function(e){return e.video})),n=new Set(e.variants.map(function(e){return e.audio}));e=e.textStreams,1<t.size&&X.u("Multiple video tracks selected to be stored");for(var i=(t=B(n)).next();!i.done;i=t.next()){i=i.value;for(var r=B(n),a=r.next();!a.done;a=r.next())a=a.value,i!=a&&i.language==a.language&&X.u("Similar audio tracks were selected to be stored",i.id,a.id)}for(n=B(e),t=n.next();!t.done;t=n.next())for(t=t.value,i=B(e),r=i.next();!r.done;r=i.next())r=r.value,t!=r&&t.language==r.language&&X.u("Similar text tracks were selected to be stored",t.id,r.id)}(t.value)})(n),x(e)}var a,o})})),7);case 7:return V(e,r.init(),8);case 8:return Fu(v),V(e,function(e){var i=null;if(e.a.forEach(function(e,n){e.getCells().forEach(function(e,t){e.hasFixedKeySpace()||i||(i={path:{Ta:n,ua:t},ua:e})})}),i)return i;throw new de(2,9,9013,"Could not find a cell that supports add-operations")}(r),9);case 9:return d=e.A,Fu(v),V(e,(E=v,w=d.ua,T=t,S=m,A=b,I=y,G(function e(){var f,p,m,g,v,b,y;return q(e,function(e){switch(e.o){case 1:return c=A,d=I,h=null==(l=S).expiration?1/0:l.expiration,f={offlineUri:null,originalManifestUri:c,duration:l.presentationTimeline.ra(),size:0,expiration:h,tracks:l=Cu(l.periods[0]),appMetadata:d},p=S.periods.some(function(e){return e.variants.some(function(e){return e.drmInfos&&e.drmInfos.length})}),b=S.periods.some(function(e){return e.variants.some(function(e){return e.drmInfos.some(function(e){return e.initData&&e.initData.length})})}),g=null,(m=p&&!b)&&(y=T.a,g=Bu.get(y.keySystem)),v=new Fo(E.b,function(e,t){f.size=t,E.a.offline.progressCallback(f,e)},function(e,t){m&&E.a.offline.usePersistentLicense&&g==t&&Ft(T,"cenc",e)}),C(e,2),n=E,i=v,r=w,a=T,o=S,s=A,c=I,u=new xu,h=o.periods.map(function(e){return function(e,t,n,i,r,a){for(var o=B(a.variants),s=o.next();!s.done;s=o.next())!function(e,t){var n,i,r=t.audio,a=t.video;r&&!a&&(e.a[r.id]=r.bandwidth||t.bandwidth),!r&&a&&(e.a[a.id]=a.bandwidth||t.bandwidth),r&&a&&(n=r.bandwidth||393216,(i=a.bandwidth||t.bandwidth-n)<=0&&(X.u("Audio bit rate consumes variants bandwidth. Setting video bandwidth to match variant's bandwidth."),i=t.bandwidth),e.a[r.id]=n,e.a[a.id]=i)}(i,s.value);for(o=B(a.textStreams),s=o.next();!s.done;s=o.next())i.a[s.value.id]=52;o=function(e){for(var t=new Set,n=B(e.textStreams),i=n.next();!i.done;i=n.next())t.add(i.value);for(e=B(e.variants),n=e.next();!n.done;n=e.next())(n=n.value).audio&&t.add(n.audio),n.video&&t.add(n.video);return t}(a);var u=new Map;for(o=B(o),s=o.next();!s.done;s=o.next()){s=s.value;var c=function(r,a,o,s,e,u){var c={id:u.id,originalId:u.originalId,primary:u.primary,presentationTimeOffset:u.presentationTimeOffset||0,contentType:u.type,mimeType:u.mimeType,codecs:u.codecs,frameRate:u.frameRate,pixelAspectRatio:u.pixelAspectRatio,kind:u.kind,language:u.language,label:u.label,width:u.width||null,height:u.height||null,initSegmentKey:null,encrypted:u.encrypted,keyId:u.keyId,segments:[],variantIds:[]};e=e.presentationTimeline.rc();var l=u.id,t=u.initSegmentReference;return t&&(t=Sr(t.c(),t.b,t.a,r.a.streaming.retryParameters),jo(a,l,t,.5*Nu(s,u.id),!0,function(n){return G(function e(){var t;return q(e,function(e){switch(e.o){case 1:return V(e,o.addSegments([{data:n}]),2);case 2:t=e.A,r.c.push(t[0]),c.initSegmentKey=t[0],x(e)}})})})),function(e,t,n){for(var i=null==(t=e.findSegmentPosition(t))?null:e.getSegmentReference(t);i;)n(i),i=e.getSegmentReference(++t)}(u,e,function(i){var e,t,n=Sr(i.c(),i.b,i.a,r.a.streaming.retryParameters);jo(a,l,n,(e=s,t=u.id,n=(n=i).endTime-n.startTime,Nu(e,t)*n),!1,function(n){return G(function e(){var t;return q(e,function(e){switch(e.o){case 1:return V(e,o.addSegments([{data:n}]),2);case 2:t=e.A,r.c.push(t[0]),c.segments.push({startTime:i.startTime,endTime:i.endTime,dataKey:t[0]}),x(e)}})})})}),c}(e,t,n,i,r,s);u.set(s.id,c)}return a.variants.forEach(function(e){e.audio&&u.get(e.audio.id).variantIds.push(e.id),e.video&&u.get(e.video.id).variantIds.push(e.id)}),{startTime:a.startTime,streams:Array.from(u.values())}}(n,i,r,u,o,e)}),l=a.a,d=n.a.offline.usePersistentLicense,l&&d&&(l.initData=[]),y=b={originalManifestUri:s,duration:o.presentationTimeline.ra(),size:0,expiration:a.nc(),periods:h,sessionIds:d?Bt(a):[],drmInfo:l,appMetadata:c},V(e,(t=v,G(function e(){return q(e,function(e){switch(e.o){case 1:return V(e,Promise.all(t.b.values()),2);case 2:return e.return(t.a.a)}})})),4);case 4:if(y.size=e.A,b.expiration=T.nc(),y=Bt(T),b.sessionIds=E.a.offline.usePersistentLicense?y:[],p&&E.a.offline.usePersistentLicense&&!y.length)throw new de(2,9,9007);return e.return(b);case 2:return N(e),V(e,v.destroy(),5);case 5:P(e,0)}var t,n,i,r,a,o,s,u,c,l,d,h})})),10);case 10:if(p=e.A,Fu(v),f)throw f;return V(e,d.ua.addManifests([p]),11);case 11:return m=e.A,Fu(v),m=new ss("manifest",d.path.Ta,d.path.ua,m[0]),e.return(ku(m,p));case 4:return N(e),v.f=!1,v.c=[],V(e,r.destroy(),12);case 12:if(t)return V(e,t.destroy(),13);e.C(13);break;case 13:P(e,0);break;case 3:if(g=W(e),d)return V(e,d.ua.removeSegments(v.c,function(){}),15);e.C(15);break;case 15:throw f||g}var E,w,T,S,A,I,h,n,i,s,u,c,a,o,l})})))},_u.prototype.getStoreInProgress=_u.prototype.vg=function(){return this.f},_u.prototype.remove=function(e){return Ku(this,(v=this,b=e,G(function e(){var f,p,m,g;return q(e,function(e){switch(e.o){case 1:return(ju(),null==(g=us(b))||"manifest"!=g.a)?e.return(Promise.reject(new de(2,9,9004,b))):(f=g,p=new $o,C(e,2),V(e,p.init(),4));case 4:return V(e,Jo(p,f.Ta(),f.ua()),5);case 5:return V(e,(m=e.A).getManifests([f.key()]),6);case 6:return g=e.A,g=g[0],V(e,Promise.all([(l=v,d=g,h=p,G(function e(){return q(e,function(e){if(1===e.o)return V(e,(r=l.b,a=l.a.drm,o=h,s=d,G(function e(){var t,n,i;return q(e,function(e){switch(e.o){case 1:return s.drmInfo?(t=function(e){var t=Array.from(e.a.keys());if(!t.length)throw new de(2,9,9e3,"No supported storage mechanisms found");return e.a.get(t[0]).getEmeSessionCell()}(o),n=s.sessionIds.map(function(e){return{sessionId:e,keySystem:s.drmInfo.keySystem,licenseUri:s.drmInfo.licenseServerUri,serverCertificate:s.drmInfo.serverCertificate,audioCapabilities:Du(s,!1),videoCapabilities:Du(s,!0)}}),V(e,ms(a,r,n),2)):e.return();case 2:return i=e.A,V(e,t.remove(i),3);case 3:return V(e,t.add(n.filter(function(e){return-1==i.indexOf(e.sessionId)})),0)}})})),0);var r,a,o,s})})),(n=v,i=m,r=f,o=function(e){var t=[];return e.periods.forEach(function(e){e.streams.forEach(function(e){null!=e.initSegmentKey&&t.push(e.initSegmentKey),e.segments.forEach(function(e){t.push(e.dataKey)})})}),t}(a=g),s=o.length+1,u=0,c=ku(r,a),Promise.all([i.removeSegments(o,t),i.removeManifests([r.key()],t)]))]),2);case 2:return N(e),V(e,p.destroy(),8);case 8:P(e,0)}function t(){u+=1,n.a.offline.progressCallback(c,u/s)}var n,i,r,a,o,s,u,c,l,d,h})})));var v,b},_u.prototype.removeEmeSessions=_u.prototype.jh=function(){return Ku(this,(d=this,G(function e(){var r,a,n,o,i,s,u,c,l;return q(e,function(e){switch(e.o){case 1:return ju(),r=d.b,a=d.a.drm,n=new $o,o=!1,C(e,2),V(e,n.init(),4);case 4:for(i=[],t=function(e){return i.push(e)},n.a.forEach(function(e){t(e.getEmeSessionCell())}),s=Promise.resolve(),u={},c=B(i),l=c.next();!l.done;u={ed:u.ed},l=c.next())u.ed=l.value,s=s.then(function(i){return function(){return G(function e(){var t,n;return q(e,function(e){switch(e.o){case 1:return V(e,i.ed.getAll(),2);case 2:return t=e.A,V(e,ms(a,r,t),3);case 3:return n=e.A,V(e,i.ed.remove(n),4);case 4:n.length!=t.length&&(o=!0),x(e)}})})}}(u));return V(e,s,2);case 2:return N(e),V(e,n.destroy(),6);case 6:P(e,3);break;case 3:return e.return(!o)}var t})})));var d},_u.prototype.list=function(){return Ku(this,G(function e(){var r,t,a;return q(e,function(e){switch(e.o){case 1:return ju(),r=[],t=new $o,C(e,2),V(e,t.init(),4);case 4:return a=Promise.resolve(),i=function(n,t){a=a.then(function(){return G(function e(){return q(e,function(e){switch(e.o){case 1:return V(e,t.getAllManifests(),2);case 2:e.A.forEach(function(e,t){e=ku(new ss("manifest",n.Ta,n.ua,t),e);r.push(e)}),x(e)}})})})},t.a.forEach(function(e,n){e.getCells().forEach(function(e,t){i({Ta:n,ua:t},e)})}),V(e,a,2);case 2:return N(e),V(e,t.destroy(),6);case 6:P(e,3);break;case 3:return e.return(r)}var i})}))},_u.deleteAll=function(){return G(function e(){var t;return q(e,function(e){switch(e.o){case 1:return t=new $o,C(e,2),V(e,t.erase(),2);case 2:return N(e),V(e,t.destroy(),5);case 5:P(e,0)}})})};var Bu=(new Map).set("org.w3.clearkey","1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha","edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready","9a04f07998404286ab92e65be0885f95").set("com.adobe.primetime","f239e769efa348509c16a903c6932efb");function Gu(){for(var e=0;e<Hu.length;++e)try{Hu[e].Lf()}catch(e){X.ba("Error installing polyfill!",e)}}_s.offline=Ou,_("shaka.polyfill.installAll",Gu);var Vu,zu,Hu=[];function Wu(e,t){for(var n={priority:t=t||0,Lf:e},i=0;i<Hu.length;i++)if(Hu[i].priority<t)return void Hu.splice(i,0,n);Hu.push(n)}function qu(e){var t,n=e.type.replace(/^(webkit|moz|MS)/,"").toLowerCase();"function"==typeof Event?t=new Event(n,e):(t=document.createEvent("Event")).initEvent(n,e.bubbles,e.cancelable),e.target.dispatchEvent(t)}function Xu(e,t,n){"input"==e&&"range"===this.type&&(e="change"),HTMLInputElement.prototype.originalAddEventListener.call(this,e,t,n)}function Yu(){var i=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(e){for(var t=[],n=0;n<arguments.length;++n)t[n]=arguments[n];return(t=i.apply(this,t)).abort=function(){},t}}function $u(e,t){X.debug("PatchedMediaKeysApple.requestMediaKeySystemAccess");try{var n=new Ju(e,t);return Promise.resolve(n)}catch(e){return Promise.reject(e)}}function Ju(e,t){if(X.debug("PatchedMediaKeysApple.MediaKeySystemAccess"),(this.keySystem=e).startsWith("com.apple.fps"))for(var n=B(t),i=n.next();!i.done;i=n.next()){var r=i.value;if("required"==r.persistentState)i=null;else{var a,o=!(i={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:r.initDataTypes,sessionTypes:["temporary"],label:r.label}),s=!1;if(r.audioCapabilities)for(var u=B(r.audioCapabilities),c=u.next();!c.done;c=u.next())(c=c.value).contentType&&(o=!0,a=c.contentType.split(";")[0],WebKitMediaKeys.isTypeSupported(this.keySystem,a)&&(i.audioCapabilities.push(c),s=!0));if(r.videoCapabilities)for(c=(r=B(r.videoCapabilities)).next();!c.done;c=r.next())(u=c.value).contentType&&(o=!0,c=u.contentType.split(";")[0],WebKitMediaKeys.isTypeSupported(this.keySystem,c)&&(i.videoCapabilities.push(u),s=!0));o||(s=WebKitMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),i=s?i:null}if(i)return void(this.a=i)}throw(n=Error("Unsupported keySystem")).name="NotSupportedError",n.code=DOMException.NOT_SUPPORTED_ERR,n}function Zu(e){X.debug("PatchedMediaKeysApple.setMediaKeys");var t=this.mediaKeys;return t&&t!=e&&ec(t,null),delete this.mediaKeys,(this.mediaKeys=e)?ec(e,this):Promise.resolve()}function Qu(e){X.debug("PatchedMediaKeysApple.MediaKeys"),this.b=new WebKitMediaKeys(e),this.a=new pt}function ec(e,t){if(e.a.Hb(),!t)return Promise.resolve();e.a.m(t,"webkitneedkey",nc);try{return ja(t,HTMLMediaElement.HAVE_METADATA,e.a,function(){t.webkitSetMediaKeys(e.b)}),Promise.resolve()}catch(e){return Promise.reject(e)}}function tc(e){X.debug("PatchedMediaKeysApple.MediaKeySession"),j.call(this),this.b=null,this.g=e,this.c=this.a=null,this.f=new pt,this.sessionId="",this.expiration=NaN,this.closed=new Me,this.keyStatuses=new rc}function nc(e){if(X.debug("PatchedMediaKeysApple.onWebkitNeedKey_",e),e=new Uint8Array(e.initData),new DataView(e.buffer,e.byteOffset,e.byteLength).getUint32(0,!0)+4!=e.byteLength)throw new RangeError("Malformed FairPlay init data");e=_e(e=Le(e.subarray(4),!0));var t=new Event("encrypted");t.initDataType="skd",t.initData=e,this.dispatchEvent(t)}function ic(e,t){var n=e.keyStatuses;n.size=null==t?0:1,n.a=t,e.dispatchEvent(new D("keystatuseschange"))}function rc(){this.size=0,this.a=void 0}function ac(e,t){X.debug("PatchedMediaKeysMs.requestMediaKeySystemAccess");try{var n=new oc(e,t);return Promise.resolve(n)}catch(e){return Promise.reject(e)}}function oc(e,t){X.debug("PatchedMediaKeysMs.MediaKeySystemAccess"),this.keySystem=e;for(var n=!1,i=0;i<t.length;++i){var r=t[i],a={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:r.initDataTypes,sessionTypes:["temporary"],label:r.label},o=!1;if(r.audioCapabilities)for(var s=0;s<r.audioCapabilities.length;++s){var u,c=r.audioCapabilities[s];c.contentType&&(o=!0,u=c.contentType.split(";")[0],MSMediaKeys.isTypeSupported(this.keySystem,u)&&(a.audioCapabilities.push(c),n=!0))}if(r.videoCapabilities)for(s=0;s<r.videoCapabilities.length;++s)(c=r.videoCapabilities[s]).contentType&&(o=!0,u=c.contentType.split(";")[0],MSMediaKeys.isTypeSupported(this.keySystem,u)&&(a.videoCapabilities.push(c),n=!0));if(o||(n=MSMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),"required"==r.persistentState&&(n=!1),n)return void(this.a=a)}throw(n=Error("Unsupported keySystem")).name="NotSupportedError",n.code=DOMException.NOT_SUPPORTED_ERR,n}function sc(e){X.debug("PatchedMediaKeysMs.setMediaKeys");var t=this.mediaKeys;return t&&t!=e&&cc(t,null),delete this.mediaKeys,(this.mediaKeys=e)?cc(e,this):Promise.resolve()}function uc(e){X.debug("PatchedMediaKeysMs.MediaKeys"),this.b=new MSMediaKeys(e),this.a=new pt}function cc(e,t){if(e.a.Hb(),!t)return Promise.resolve();e.a.m(t,"msneedkey",dc);try{return ja(t,HTMLMediaElement.HAVE_METADATA,e.a,function(){t.msSetMediaKeys(e.b)}),Promise.resolve()}catch(e){return Promise.reject(e)}}function lc(e){X.debug("PatchedMediaKeysMs.MediaKeySession"),j.call(this),this.c=null,this.g=e,this.b=this.a=null,this.f=new pt,this.sessionId="",this.expiration=NaN,this.closed=new Me,this.keyStatuses=new fc}function dc(e){var t;X.debug("PatchedMediaKeysMs.onMsNeedKey_",e),e.initData&&((t=document.createEvent("CustomEvent")).initCustomEvent("encrypted",!1,!1,null),t.initDataType="cenc",t.initData=function(e){if(!e)return e;var t=new Wi(e);if(t.data.length<=1)return e;e=[];for(var n={},i=(t=B(t.data)).next();!i.done;n={Sc:n.Sc},i=t.next())n.Sc=i.value,e.some(function(t){return function(e){return je.Xa(e,t.Sc)}}(n))||e.push(n.Sc);return je.concat.apply(je,I(e))}(e.initData).buffer,this.dispatchEvent(t))}function hc(e,t){var n=e.keyStatuses;n.size=null==t?0:1,n.a=t,e.dispatchEvent(new D("keystatuseschange"))}function fc(){this.size=0,this.a=void 0}function pc(){return X.debug("PatchedMediaKeysNop.requestMediaKeySystemAccess"),Promise.reject(Error("The key system specified is not supported."))}function mc(e){return X.debug("PatchedMediaKeysNop.setMediaKeys"),null==e?Promise.resolve():Promise.reject(Error("MediaKeys not supported."))}function gc(){throw new TypeError("Illegal constructor.")}function vc(){throw new TypeError("Illegal constructor.")}_("shaka.polyfill.register",Wu),Wu(function(){Ml()},-1),Wu(function(){var e;d.Document&&((e=Element.prototype).requestFullscreen=e.requestFullscreen||e.mozRequestFullScreen||e.msRequestFullscreen||e.webkitRequestFullscreen,(e=Document.prototype).exitFullscreen=e.exitFullscreen||e.mozCancelFullScreen||e.msExitFullscreen||e.webkitCancelFullScreen,"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled}})),document.addEventListener("webkitfullscreenchange",qu),document.addEventListener("webkitfullscreenerror",qu),document.addEventListener("mozfullscreenchange",qu),document.addEventListener("mozfullscreenerror",qu),document.addEventListener("MSFullscreenChange",qu),document.addEventListener("MSFullscreenError",qu))}),Wu(function(){X.debug("InputEvent.install"),Nt("Trident/")&&!HTMLInputElement.prototype.originalAddEventListener&&(X.info("Patching input event support on IE."),HTMLInputElement.prototype.originalAddEventListener=HTMLInputElement.prototype.addEventListener,HTMLInputElement.prototype.addEventListener=Xu)}),Wu(function(){navigator.languages||Object.defineProperty(navigator,"languages",{get:function(){return navigator.language?[navigator.language]:["en"]}})}),Wu(function(){X.debug("mathRound.install")}),Wu(function(){X.debug("MediaSource.install");var t,n,i,r,e=xt();d.MediaSource?d.cast&&cast.__platform__&&cast.__platform__.canDisplayType?(X.info("Patching Chromecast MSE bugs."),r=MediaSource.isTypeSupported,MediaSource.isTypeSupported=function(e){var t=e.split(/ *; */);return t.shift(),t.some(function(e){return e.startsWith("codecs=")})?cast.__platform__.canDisplayType(e):r(e)}):e?(i=MediaSource.isTypeSupported,MediaSource.isTypeSupported=function(e){return"mp2t"!=e.split(/ *; */)[0].split("/")[1].toLowerCase()&&i(e)},e<=12?(X.info("Patching Safari 11 & 12 MSE bugs."),Yu(),n=SourceBuffer.prototype.remove,SourceBuffer.prototype.remove=function(e,t){return n.call(this,e,t-.001)}):(X.info("Patching Safari 13 MSE bugs."),Yu())):Nt("Tizen 2")||Nt("Tizen 3")||Nt("Tizen 4")?(t=MediaSource.isTypeSupported,MediaSource.isTypeSupported=function(e){return"opus"!=Tt(e)[0]&&t(e)}):X.info("Using native MSE as-is."):X.info("No MSE implementation available.")}),Ju.prototype.createMediaKeys=function(){X.debug("PatchedMediaKeysApple.MediaKeySystemAccess.createMediaKeys");var e=new Qu(this.keySystem);return Promise.resolve(e)},Ju.prototype.getConfiguration=function(){return X.debug("PatchedMediaKeysApple.MediaKeySystemAccess.getConfiguration"),this.a},Qu.prototype.createSession=function(e){if(X.debug("PatchedMediaKeysApple.MediaKeys.createSession"),"temporary"!=(e=e||"temporary"))throw new TypeError("Session type "+e+" is unsupported on this platform.");return new tc(this.b)},Qu.prototype.setServerCertificate=function(e){return X.debug("PatchedMediaKeysApple.MediaKeys.setServerCertificate"),e&&new Uint8Array(e),Promise.resolve(!0)},O(tc,j),(e=tc.prototype).generateRequest=function(e,t){X.debug("PatchedMediaKeysApple.MediaKeySession.generateRequest"),this.a=new Me;try{this.b=this.g.createSession("video/mp4",new Uint8Array(t)),this.sessionId=this.b.sessionId||"",this.f.m(this.b,"webkitkeymessage",this.Ah.bind(this)),this.f.m(this.b,"webkitkeyadded",this.xh.bind(this)),this.f.m(this.b,"webkitkeyerror",this.yh.bind(this)),ic(this,"status-pending")}catch(e){this.a.reject(e)}return this.a},e.load=function(){return X.debug("PatchedMediaKeysApple.MediaKeySession.load"),Promise.reject(Error("MediaKeySession.load not yet supported"))},e.update=function(e){X.debug("PatchedMediaKeysApple.MediaKeySession.update"),this.c=new Me;try{this.b.update(new Uint8Array(e))}catch(e){this.c.reject(e)}return this.c},e.close=function(){X.debug("PatchedMediaKeysApple.MediaKeySession.close");try{this.b.close(),this.closed.resolve(),this.f.Hb()}catch(e){this.closed.reject(e)}return this.closed},e.remove=function(){return X.debug("PatchedMediaKeysApple.MediaKeySession.remove"),Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))},e.Ah=function(e){X.debug("PatchedMediaKeysApple.onWebkitKeyMessage_",e),this.a&&(this.a.resolve(),this.a=null),this.dispatchEvent(new D("message",{messageType:null==this.keyStatuses.a?"license-request":"license-renewal",message:e.message.buffer}))},e.xh=function(e){X.debug("PatchedMediaKeysApple.onWebkitKeyAdded_",e),this.c&&(ic(this,"usable"),this.c.resolve(),this.c=null)},e.yh=function(e){if(X.debug("PatchedMediaKeysApple.onWebkitKeyError_",e),(e=Error("EME PatchedMediaKeysApple key error")).errorCode=this.b.error,null!=this.a)this.a.reject(e),this.a=null;else if(null!=this.c)this.c.reject(e),this.c=null;else switch(this.b.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:ic(this,"output-not-allowed");break;default:ic(this,"internal-error")}},(e=rc.prototype).forEach=function(e){this.a&&e(this.a,Vu)},e.get=function(e){if(this.has(e))return this.a},e.has=function(e){var t=Vu;return!(!this.a||!je.Xa(new Uint8Array(e),new Uint8Array(t)))},e.entries=function(){},e.keys=function(){},e.values=function(){},Wu(function(){d.HTMLVideoElement&&d.WebKitMediaKeys&&(X.info("Using Apple-prefixed EME"),Vu=new Uint8Array([0]).buffer,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=Zu,d.MediaKeys=Qu,d.MediaKeySystemAccess=Ju,navigator.requestMediaKeySystemAccess=$u)}),oc.prototype.createMediaKeys=function(){X.debug("PatchedMediaKeysMs.MediaKeySystemAccess.createMediaKeys");var e=new uc(this.keySystem);return Promise.resolve(e)},oc.prototype.getConfiguration=function(){return X.debug("PatchedMediaKeysMs.MediaKeySystemAccess.getConfiguration"),this.a},uc.prototype.createSession=function(e){if(X.debug("PatchedMediaKeysMs.MediaKeys.createSession"),"temporary"!=(e=e||"temporary"))throw new TypeError("Session type "+e+" is unsupported on this platform.");return new lc(this.b)},uc.prototype.setServerCertificate=function(){return X.debug("PatchedMediaKeysMs.MediaKeys.setServerCertificate"),Promise.resolve(!1)},O(lc,j),(e=lc.prototype).generateRequest=function(e,t){X.debug("PatchedMediaKeysMs.MediaKeySession.generateRequest"),this.a=new Me;try{this.c=this.g.createSession("video/mp4",new Uint8Array(t),null),this.f.m(this.c,"mskeymessage",this.Ug.bind(this)),this.f.m(this.c,"mskeyadded",this.Sg.bind(this)),this.f.m(this.c,"mskeyerror",this.Tg.bind(this)),hc(this,"status-pending")}catch(e){this.a.reject(e)}return this.a},e.load=function(){return X.debug("PatchedMediaKeysMs.MediaKeySession.load"),Promise.reject(Error("MediaKeySession.load not yet supported"))},e.update=function(e){X.debug("PatchedMediaKeysMs.MediaKeySession.update"),this.b=new Me;try{this.c.update(new Uint8Array(e))}catch(e){this.b.reject(e)}return this.b},e.close=function(){X.debug("PatchedMediaKeysMs.MediaKeySession.close");try{this.c.close(),this.closed.resolve(),this.f.Hb()}catch(e){this.closed.reject(e)}return this.closed},e.remove=function(){return X.debug("PatchedMediaKeysMs.MediaKeySession.remove"),Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))},e.Ug=function(e){X.debug("PatchedMediaKeysMs.onMsKeyMessage_",e),this.a&&(this.a.resolve(),this.a=null),this.dispatchEvent(new D("message",{messageType:null==this.keyStatuses.a?"license-request":"license-renewal",message:e.message.buffer}))},e.Sg=function(e){X.debug("PatchedMediaKeysMs.onMsKeyAdded_",e),this.a?(X.debug("Simulating completion for a PR persistent license."),hc(this,"usable"),this.a.resolve(),this.a=null):this.b&&(hc(this,"usable"),this.b.resolve(),this.b=null)},e.Tg=function(e){if(X.debug("PatchedMediaKeysMs.onMsKeyError_",e),(e=Error("EME PatchedMediaKeysMs key error")).errorCode=this.c.error,null!=this.a)this.a.reject(e),this.a=null;else if(null!=this.b)this.b.reject(e),this.b=null;else switch(this.c.error.code){case MSMediaKeyError.MS_MEDIA_KEYERR_OUTPUT:case MSMediaKeyError.MS_MEDIA_KEYERR_HARDWARECHANGE:hc(this,"output-not-allowed");break;default:hc(this,"internal-error")}},(e=fc.prototype).forEach=function(e){this.a&&e(this.a,zu)},e.get=function(e){if(this.has(e))return this.a},e.has=function(e){var t=zu;return!(!this.a||!je.Xa(new Uint8Array(e),new Uint8Array(t)))},e.entries=function(){},e.keys=function(){},e.values=function(){},Wu(function(){!d.HTMLVideoElement||!d.MSMediaKeys||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(X.info("Using ms-prefixed EME v20140218"),zu=new Uint8Array([0]).buffer,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=sc,d.MediaKeys=uc,d.MediaKeySystemAccess=oc,navigator.requestMediaKeySystemAccess=ac)}),gc.prototype.createSession=function(){},gc.prototype.setServerCertificate=function(){},vc.prototype.getConfiguration=function(){},vc.prototype.createMediaKeys=function(){},Wu(function(){!d.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(X.info("EME not available."),navigator.requestMediaKeySystemAccess=pc,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=mc,d.MediaKeys=gc,d.MediaKeySystemAccess=vc)},-10);var bc,yc="";function Ec(e){return yc?yc+e.charAt(0).toUpperCase()+e.slice(1):e}function wc(e,t){X.debug("PatchedMediaKeysWebkit.requestMediaKeySystemAccess");try{var n=new Sc(e,t);return Promise.resolve(n)}catch(e){return Promise.reject(e)}}function Tc(e){X.debug("PatchedMediaKeysWebkit.setMediaKeys");var t=this.mediaKeys;return t&&t!=e&&Ic(t,null),delete this.mediaKeys,(this.mediaKeys=e)&&Ic(e,this),Promise.resolve()}function Sc(e,t){X.debug("PatchedMediaKeysWebkit.MediaKeySystemAccess");var n=!1;"org.w3.clearkey"==(this.a=this.keySystem=e)&&(n=!(this.a="webkit-org.w3.clearkey"));for(var i=!1,r=(r=document.getElementsByTagName("video")).length?r[0]:document.createElement("video"),a=0;a<t.length;++a){var o=t[a],s={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:o.initDataTypes,sessionTypes:["temporary"],label:o.label},u=!1;if(o.audioCapabilities)for(var c=0;c<o.audioCapabilities.length;++c){var l,d=o.audioCapabilities[c];d.contentType&&(u=!0,l=d.contentType.split(";")[0],r.canPlayType(l,this.a)&&(s.audioCapabilities.push(d),i=!0))}if(o.videoCapabilities)for(c=0;c<o.videoCapabilities.length;++c)(d=o.videoCapabilities[c]).contentType&&(u=!0,r.canPlayType(d.contentType,this.a)&&(s.videoCapabilities.push(d),i=!0));if(u||(i=r.canPlayType("video/mp4",this.a)||r.canPlayType("video/webm",this.a)),"required"==o.persistentState&&(n?(s.persistentState="required",s.sessionTypes=["persistent-license"]):i=!1),i)return void(this.b=s)}throw n="org.w3.clearkey"!=e&&"com.widevine.alpha"!=e?"Unsupported keySystem":"None of the requested configurations were supported.",(n=Error(n)).name="NotSupportedError",n.code=DOMException.NOT_SUPPORTED_ERR,n}function Ac(e){X.debug("PatchedMediaKeysWebkit.MediaKeys"),this.g=e,this.b=null,this.a=new pt,this.c=[],this.f={}}function Ic(e,t){e.b=t,e.a.Hb();var n=yc;t&&(e.a.m(t,n+"needkey",e.Yg.bind(e)),e.a.m(t,n+"keymessage",e.Dh.bind(e)),e.a.m(t,n+"keyadded",e.Bh.bind(e)),e.a.m(t,n+"keyerror",e.Ch.bind(e)))}function kc(e,t){var n=e.f[t];return n?(X.debug("PatchedMediaKeysWebkit.MediaKeys.findSession_",n),n):(n=e.c.shift())?(n.sessionId=t,e.f[t]=n,X.debug("PatchedMediaKeysWebkit.MediaKeys.findSession_",n),n):null}function Cc(e,t,n){X.debug("PatchedMediaKeysWebkit.MediaKeySession"),j.call(this),this.f=e,this.j=!1,this.a=this.b=null,this.c=t,this.g=n,this.sessionId="",this.expiration=NaN,this.closed=new Me,this.keyStatuses=new Pc}function xc(t,e,n){if(t.j)return Promise.reject(Error("The session is already initialized."));t.j=!0;try{var i,r,a="persistent-license"==t.g?n?new Uint8Array(_e("LOAD_SESSION|"+n)):(i=_e("PERSISTENT|"),(r=new Uint8Array(i.byteLength+e.byteLength)).set(new Uint8Array(i),0),r.set(new Uint8Array(e),i.byteLength),r):new Uint8Array(e)}catch(e){return Promise.reject(e)}t.b=new Me;var o=Ec("generateKeyRequest");try{t.f[o](t.c,a)}catch(e){if("InvalidStateError"!=e.name)return t.b=null,Promise.reject(e);new ze(function(){try{t.f[o](t.c,a)}catch(e){t.b.reject(e),t.b=null}}).R(.01)}return t.b}function Nc(e,t){var n=e.keyStatuses;n.size=null==t?0:1,n.a=t,e.dispatchEvent(new D("keystatuseschange"))}function Pc(){this.size=0,this.a=void 0}function Mc(e){var t="picture-in-picture"==(e=e.target).webkitPresentationMode?(document.pictureInPictureElement=e,new Event("enterpictureinpicture")):(document.pictureInPictureElement==e&&(document.pictureInPictureElement=null),new Event("leavepictureinpicture"));e.dispatchEvent(t)}function Rc(){return this.webkitSupportsPresentationMode("picture-in-picture")?(this.webkitSetPresentationMode("picture-in-picture"),document.pictureInPictureElement=this,Promise.resolve()):Promise.reject(Error("PiP not allowed by video element"))}function Lc(){var e=document.pictureInPictureElement;return e?(e.webkitSetPresentationMode("inline"),document.pictureInPictureElement=null,Promise.resolve()):Promise.reject(Error("No picture in picture element found"))}function Uc(){return!!this.hasAttribute("disablePictureInPicture")||!this.webkitSupportsPresentationMode("picture-in-picture")}function _c(e){e?this.setAttribute("disablePictureInPicture",""):this.removeAttribute("disablePictureInPicture")}function Oc(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}function Dc(e,t,n){return new d.TextTrackCue(e,t,n)}function Fc(e,t,n){return new d.TextTrackCue(e+"-"+t+"-"+n,e,t,n)}function jc(){}Sc.prototype.createMediaKeys=function(){X.debug("PatchedMediaKeysWebkit.MediaKeySystemAccess.createMediaKeys");var e=new Ac(this.a);return Promise.resolve(e)},Sc.prototype.getConfiguration=function(){return X.debug("PatchedMediaKeysWebkit.MediaKeySystemAccess.getConfiguration"),this.b},(e=Ac.prototype).createSession=function(e){if(X.debug("PatchedMediaKeysWebkit.MediaKeys.createSession"),"temporary"!=(e=e||"temporary")&&"persistent-license"!=e)throw new TypeError("Session type "+e+" is unsupported on this platform.");var t=this.b||document.createElement("video");return t.src||(t.src="about:blank"),e=new Cc(t,this.g,e),this.c.push(e),e},e.setServerCertificate=function(){return X.debug("PatchedMediaKeysWebkit.MediaKeys.setServerCertificate"),Promise.resolve(!1)},e.Yg=function(e){X.debug("PatchedMediaKeysWebkit.onWebkitNeedKey_",e);var t=document.createEvent("CustomEvent");t.initCustomEvent("encrypted",!1,!1,null),t.initDataType="cenc",e.initData instanceof ArrayBuffer?t.initData=e.initData:t.initData=e.initData.buffer,this.b.dispatchEvent(t)},e.Dh=function(e){X.debug("PatchedMediaKeysWebkit.onWebkitKeyMessage_",e);var t=kc(this,e.sessionId);t?(e=new D("message",{messageType:null==t.keyStatuses.a?"licenserequest":"licenserenewal",message:e.message}),X.debug("PatchedMediaKeysWebkit.MediaKeySession.generated"),t.b&&(t.b.resolve(),t.b=null),t.dispatchEvent(e)):X.error("Session not found",e.sessionId)},e.Bh=function(e){X.debug("PatchedMediaKeysWebkit.onWebkitKeyAdded_",e),(e=kc(this,e.sessionId))&&(X.debug("PatchedMediaKeysWebkit.MediaKeySession.ready"),Nc(e,"usable"),e.a&&e.a.resolve(),e.a=null)},e.Ch=function(e){X.debug("PatchedMediaKeysWebkit.onWebkitKeyError_",e);var t=kc(this,e.sessionId);t&&t.handleError(e)},O(Cc,j),(e=Cc.prototype).handleError=function(e){X.debug("PatchedMediaKeysWebkit.MediaKeySession.handleError",e);var t=Error("EME v0.1b key error"),n=e.errorCode;n.systemCode=e.systemCode,t.errorCode=n,!e.sessionId&&this.b?(45==e.systemCode&&(t.message="Unsupported session type."),this.b.reject(t),this.b=null):e.sessionId&&this.a?(this.a.reject(t),this.a=null):(t=e.systemCode,e.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?Nc(this,"output-restricted"):Nc(this,1==t?"expired":"internal-error"))},e.ke=function(e,t){if(this.a)this.a.then(this.ke.bind(this,e,t)).catch(this.ke.bind(this,e,t));else{var n,i;this.a=e,i="webkit-org.w3.clearkey"==this.c?(n=Re(t),"oct"!=(i=JSON.parse(n)).keys[0].kty&&(this.a.reject(Error("Response is not a valid JSON Web Key Set.")),this.a=null),n=je.Za(i.keys[0].k),je.Za(i.keys[0].kid)):(n=new Uint8Array(t),null);var r=Ec("addKey");try{this.f[r](this.c,n,i,this.sessionId)}catch(e){this.a.reject(e),this.a=null}}},e.generateRequest=function(e,t){return X.debug("PatchedMediaKeysWebkit.MediaKeySession.generateRequest"),xc(this,t,null)},e.load=function(e){return X.debug("PatchedMediaKeysWebkit.MediaKeySession.load"),"persistent-license"==this.g?xc(this,null,e):Promise.reject(Error("Not a persistent session."))},e.update=function(e){X.debug("PatchedMediaKeysWebkit.MediaKeySession.update",e);var t=new Me;return this.ke(t,e),t},e.close=function(){if(X.debug("PatchedMediaKeysWebkit.MediaKeySession.close"),"persistent-license"!=this.g){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var e=Ec("cancelKeyRequest");try{this.f[e](this.c,this.sessionId)}catch(e){}}return this.closed.resolve(),this.closed},e.remove=function(){return X.debug("PatchedMediaKeysWebkit.MediaKeySession.remove"),"persistent-license"!=this.g?Promise.reject(Error("Not a persistent session.")):this.close()},(e=Pc.prototype).forEach=function(e){this.a&&e(this.a,bc)},e.get=function(e){if(this.has(e))return this.a},e.has=function(e){var t=bc;return!(!this.a||!je.Xa(new Uint8Array(e),new Uint8Array(t)))},e.entries=function(){},e.keys=function(){},e.values=function(){},Wu(function(){if(!(!d.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)X.info("Using webkit-prefixed EME v0.1b"),yc="webkit";else{if(!HTMLMediaElement.prototype.generateKeyRequest)return;X.info("Using nonprefixed EME v0.1b")}bc=new Uint8Array([0]).buffer,navigator.requestMediaKeySystemAccess=wc,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=Tc,d.MediaKeys=Ac,d.MediaKeySystemAccess=Sc}}),Wu(function(){var e;d.HTMLVideoElement&&((e=HTMLVideoElement.prototype).requestPictureInPicture&&document.exitPictureInPicture||!e.webkitSupportsPresentationMode||(X.debug("PiPWebkit.install"),document.pictureInPictureEnabled=!0,document.pictureInPictureElement=null,e.requestPictureInPicture=Rc,Object.defineProperty(e,"disablePictureInPicture",{get:Uc,set:_c,enumerable:!0,configurable:!0}),document.exitPictureInPicture=Lc,document.addEventListener("webkitpresentationmodechanged",Mc,!0)))}),Wu(function(){var t;X.debug("VideoPlayPromise.install"),d.HTMLMediaElement&&(t=HTMLMediaElement.prototype.play,HTMLMediaElement.prototype.play=function(){var e=t.apply(this);return e&&e.catch(function(){}),e})}),Wu(function(){var e;!d.HTMLVideoElement||!(e=HTMLVideoElement.prototype).getVideoPlaybackQuality&&"webkitDroppedFrameCount"in e&&(e.getVideoPlaybackQuality=Oc)}),Wu(function(){if(d.VTTCue)X.info("Using native VTTCue.");else if(d.TextTrackCue){var e=TextTrackCue.length;if(3==e)X.info("Using VTTCue polyfill from 3 argument TextTrackCue."),d.VTTCue=Dc;else if(6==e)X.info("Using VTTCue polyfill from 6 argument TextTrackCue."),d.VTTCue=Fc;else{try{var t=!!Dc(1,2,"")}catch(e){t=!1}t&&(X.info("Using VTTCue polyfill from 3 argument TextTrackCue."),d.VTTCue=Dc)}}else X.error("VTTCue not available.")}),_("shaka.text.TtmlTextParser",jc),jc.prototype.parseInit=function(){},jc.prototype.parseMedia=function(e,t){var n=Re(e),i=[],r=new DOMParser,a=null;if(""==n)return i;try{a=r.parseFromString(n,"text/xml")}catch(e){throw new de(2,2,2005,"Failed to parse TTML.")}if(a){if(n=a.getElementsByTagName("parsererror")[0])throw new de(2,2,2005,n.textContent);if(!(r=a.getElementsByTagName("tt")[0]))throw new de(2,2,2005,"TTML does not contain <tt> tag.");var o=qi.getAttributeNS(r,"http://www.w3.org/ns/ttml#parameter","frameRate"),s=qi.getAttributeNS(r,"http://www.w3.org/ns/ttml#parameter","subFrameRate"),u=qi.getAttributeNS(r,"http://www.w3.org/ns/ttml#parameter","frameRateMultiplier"),c=qi.getAttributeNS(r,"http://www.w3.org/ns/ttml#parameter","tickRate"),a=r.getAttribute("xml:space")||"default",n=qi.getAttributeNS(r,"http://www.w3.org/ns/ttml#styling","extent");if("default"!=a&&"preserve"!=a)throw new de(2,2,2005,"Invalid xml:space value: "+a);a="default"==a,o=new ll(o,s,u,c),s=Qc(r.getElementsByTagName("metadata")[0]),u=Qc(r.getElementsByTagName("styling")[0]),c=Qc(r.getElementsByTagName("layout")[0]);for(var l=[],d=0;d<c.length;d++){var h,f,p=c[d],m=u,g=n,v=new An,b=p.getAttribute("xml:id");b?(v.id=b,b=null,g&&(b=Gc.exec(g)||zc.exec(g)),g=b?Number(b[1]):null,b=b?Number(b[2]):null,!(h=rl(p,m,"extent"))||null!=(h=(f=Gc.exec(h))||zc.exec(h))&&(v.width=null!=g?100*Number(h[1])/g:Number(h[1]),v.height=null!=b?100*Number(h[2])/b:Number(h[2]),v.widthUnits=f||null!=g?In:0,v.heightUnits=f||null!=b?In:0),!(p=rl(p,m,"origin"))||null!=(h=(f=Gc.exec(p))||zc.exec(p))&&(v.viewportAnchorX=null!=g?100*Number(h[1])/g:Number(h[1]),v.viewportAnchorY=null!=b?100*Number(h[2])/b:Number(h[2]),v.viewportAnchorUnits=f||null!=g?In:0)):(X.u("TtmlTextParser parser encountered a region with no id. Region will be ignored."),v=null),v&&l.push(v)}for(n=function e(t){if(!t)return[];var n=[];t=B(t.childNodes);for(var i=t.next();!i.done;i=t.next())i=i.value,i instanceof Element&&(i.hasAttribute("begin")?n.push(i):n=n.concat(e(i)));return n}(r.getElementsByTagName("body")[0]),r=(n=B(n)).next();!r.done;r=n.next())(r=function e(t,n,i,r,a,o,s,u,c){if(c&&"br"==t.nodeName)return t=new cn(0,0,""),t.spacer=!0,t;var l=/^[\s\n]*$/.test(t.textContent),d=t.nodeType==Node.ELEMENT_NODE&&!t.hasAttribute("begin")&&!t.hasAttribute("end");if(t.nodeType!=Node.ELEMENT_NODE||d&&l||d&&!c)return null;l=ul(t.getAttribute("begin"),i);d=ul(t.getAttribute("end"),i);var h=ul(t.getAttribute("dur"),i);null==d&&null!=h&&(d=l+h);if(!c&&(null==l||null==d))throw new de(2,2,2001);l=c&&null==l?0:l+n;d=c&&null==d?0:d+n;h="";c=[];if(Array.from(t.childNodes).find(function(e){return e.nodeType===Node.TEXT_NODE&&/\S+/.test(e.textContent)}))h=el(t,u);else for(var f=B(t.childNodes),p=f.next();!p.done;p=f.next())(p=e(p.value,n,i,r,a,o,s,u,!0))&&(p.startTime=p.startTime||l,p.endTime=p.endTime||d,c.push(p));n=new cn(l,d,h);n.nestedCues=c;{var m;(o=sl(t,"region",o,"")[0])&&o.getAttribute("xml:id")&&(m=o.getAttribute("xml:id"),n.region=s.filter(function(e){return e.id==m})[0])}r=sl(t,"backgroundImage",r,"#","http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt")[0];tl(n,t,o,r,a);return n}(r.value,t.periodStart,o,s,u,c,l,a,!1))&&i.push(r)}return i};var Kc,Bc,Gc=/^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/,Vc=/^(\d+px|\d+em)$/,zc=/^(\d+)px (\d+)px$/,Hc=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,Wc=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,qc=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d{2,})$/,Xc=/^(\d*(?:\.\d*)?)f$/,Yc=/^(\d*(?:\.\d*)?)t$/,$c=/^(?:(\d*(?:\.\d*)?)h)?(?:(\d*(?:\.\d*)?)m)?(?:(\d*(?:\.\d*)?)s)?(?:(\d*(?:\.\d*)?)ms)?$/,Jc={left:yn,center:"center",right:"end",start:yn,end:"end"},Zc={left:"line-left",center:"center",right:"line-right"};function Qc(e){var t=[];if(!e)return t;for(var n=B(e.childNodes),i=n.next();!i.done;i=n.next())(i=i.value).nodeType==Node.ELEMENT_NODE&&"br"!==i.nodeName&&(i=Qc(i),t=t.concat(i));return t.length||t.push(e),t}function el(e,t){for(var n="",i=B(e.childNodes),r=i.next();!r.done;r=i.next())"br"==(r=r.value).nodeName&&e.childNodes[0]!==r?n+="\n":r.childNodes&&0<r.childNodes.length?n+=el(r,t):t?n+=r=(r=r.textContent.trim()).replace(/\s+/g," "):n+=r.textContent;return n}function tl(e,t,n,i,r){"rtl"==il(t,n,r,"direction")&&(e.direction="rtl");var a,o=il(t,n,r,"writingMode");"tb"==o||"tblr"==o?e.writingMode="vertical-lr":"tbrl"==o?e.writingMode="vertical-rl":"rltb"==o||"rl"==o?e.direction="rtl":o&&(e.direction=gn),(o=il(t,n,r,"textAlign"))?(e.positionAlign=Zc[o],e.lineAlign=Jc[o],e.textAlign=fn[o.toUpperCase()]):e.textAlign="start",(o=il(t,n,r,"displayAlign"))&&(e.displayAlign=mn[o.toUpperCase()]),(o=il(t,n,r,"color"))&&(e.color=o),(o=il(t,n,r,"backgroundColor"))&&(e.backgroundColor=o),(o=il(t,n,r,"fontFamily"))&&(e.fontFamily=o),(o=il(t,n,r,"fontWeight"))&&"bold"==o&&(e.fontWeight=700),(o=il(t,n,r,"wrapOption"))&&"noWrap"==o&&(e.wrapLine=!1),(o=il(t,n,r,"lineHeight"))&&o.match(Vc)&&(e.lineHeight=o),(o=il(t,n,r,"fontSize"))&&o.match(Vc)&&(e.fontSize=o),(o=il(t,n,r,"fontStyle"))&&(e.fontStyle=Sn[o.toUpperCase()]),i&&(o=i.getAttribute("imagetype"),a=i.getAttribute("encoding"),i=i.textContent.trim(),"PNG"==o&&"Base64"==a&&i&&(e.backgroundImage="data:image/png;base64,"+i)),(n=rl(n,r,"textDecoration"))&&nl(e,n),(t=al(t,r,"textDecoration"))&&nl(e,t)}function nl(e,t){for(var n=t.split(" "),i=0;i<n.length;i++)switch(n[i]){case"underline":e.textDecoration.includes("underline")||e.textDecoration.push("underline");break;case"noUnderline":e.textDecoration.includes("underline")&&nt(e.textDecoration,"underline");break;case"lineThrough":e.textDecoration.includes("lineThrough")||e.textDecoration.push("lineThrough");break;case"noLineThrough":e.textDecoration.includes("lineThrough")&&nt(e.textDecoration,"lineThrough");break;case"overline":e.textDecoration.includes("overline")||e.textDecoration.push("overline");break;case"noOverline":e.textDecoration.includes("overline")&&nt(e.textDecoration,"overline")}}function il(e,t,n,i){return(e=al(e,n,i))?e:rl(t,n,i)}function rl(e,t,n){if(!e)return null;for(var i=Qc(e),r=0;r<i.length;r++){var a=qi.getAttributeNS(i[r],"http://www.w3.org/ns/ttml#styling",n);if(a)return a}return ol(e,t,n)}function al(e,t,n){var i=qi.getAttributeNS(e,"http://www.w3.org/ns/ttml#styling",n);return i||ol(e,t,n)}function ol(e,t,n){e=sl(e,"style",t,"");for(var i=null,r=0;r<e.length;r++){var a=qi.getAttributeNS(e[r],"http://www.w3.org/ns/ttml#styling",n);(a=a||al(e[r],t,n))&&(i=a)}return i}function sl(e,t,n,i,r){var a=[];if(!e||n.length<1)return a;var o=e;for(e=null;o&&!(e=r?qi.getAttributeNS(o,r,t):o.getAttribute(t))&&(o=o.parentNode)instanceof Element;);if(t=e)for(r=(t=B(t=t.split(" "))).next();!r.done;r=t.next())for(r=r.value,o=(e=B(n)).next();!o.done;o=e.next())if(i+(o=o.value).getAttribute("xml:id")==r){a.push(o);break}return a}function ul(e,t){var n,i,r,a,o=null;return Hc.test(e)?(o=Hc.exec(e),n=Number(o[1]),i=Number(o[2]),r=Number(o[3]),a=Number(o[4]),o=(r+=(a+=(Number(o[5])||0)/t.b)/t.frameRate)+60*i+3600*n):Wc.test(e)?o=cl(Wc,e):qc.test(e)?o=cl(qc,e):Xc.test(e)?(o=Xc.exec(e),o=Number(o[1])/t.frameRate):Yc.test(e)?(o=Yc.exec(e),o=Number(o[1])/t.a):$c.test(e)&&(o=cl($c,e)),o}function cl(e,t){t=e.exec(t);return null==t||""==t[0]?null:(Number(t[4])||0)/1e3+(Number(t[3])||0)+60*(Number(t[2])||0)+3600*(Number(t[1])||0)}function ll(e,t,n,i){this.frameRate=Number(e)||30,this.b=Number(t)||1,this.a=Number(i),0==this.a&&(this.a=e?this.frameRate*this.b:1),n&&(e=/^(\d+) (\d+)$/g.exec(n))&&(this.frameRate*=Number(e[1])/Number(e[2]))}function dl(){this.a=new jc}function hl(){}function fl(e,t,n){var i;if(i=/^align:(start|middle|center|end|left|right)$/.exec(t))t=i[1],e.textAlign="middle"==t?hn:fn[t.toUpperCase()];else if(i=/^vertical:(lr|rl)$/.exec(t))e.writingMode="lr"==i[1]?"vertical-lr":"vertical-rl";else if(i=/^size:([\d.]+)%$/.exec(t))e.size=Number(i[1]);else if(i=/^position:([\d.]+)%(?:,(line-left|line-right|center|start|end))?$/.exec(t))e.position=Number(i[1]),i[2]&&(t=i[2],e.positionAlign="line-left"==t||"start"==t?"line-left":"line-right"==t||"end"==t?"line-right":"center");else{if(!(i=/^region:(.*)$/.exec(t))){e:{if(n=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(t))e.lineInterpretation=1,e.line=Number(n[1]),n[2]&&(e.lineAlign=En[n[2].toUpperCase()]);else{if(!(n=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(t))){e=!1;break e}e.lineInterpretation=bn,e.line=Number(n[1]),n[2]&&(e.lineAlign=En[n[2].toUpperCase()])}e=!0}return e}(t=function(e,t){e=e.filter(function(e){return e.id==t});return e.length?e[0]:(X.u("VTT parser could not find a region with id: ",t," The region will be ignored."),null)}(n,i[1]))&&(e.region=t)}return 1}function pl(e){if(null==(e=jr(e,/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3})/g)))return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}function ml(){this.a=null}function gl(e){return document.createElement(e)}function vl(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function bl(){}function yl(){Kc?console.debug("EmeEncryptionSchemePolyfill: Already installed."):navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration?(Kc=navigator.requestMediaKeySystemAccess,console.debug("EmeEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.requestMediaKeySystemAccess=El):console.debug("EmeEncryptionSchemePolyfill: EME not found")}function El(n,i){var r=this;return G(function e(){var t;return q(e,function(e){switch(e.o){case 1:return console.assert(r==navigator,'bad "this" for requestMediaKeySystemAccess'),V(e,Kc.call(r,n,i),2);case 2:return Nl(t=e.A)?(console.debug("EmeEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.requestMediaKeySystemAccess=Kc,e.return(t)):(console.debug("EmeEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.requestMediaKeySystemAccess=wl,e.return(wl.call(r,n,i)))}})})}function wl(c,l){var d=this;return G(function e(){var i,r,a,o,s,u;return q(e,function(e){switch(e.o){case 1:console.assert(d==navigator,'bad "this" for requestMediaKeySystemAccess'),i=xl(c),r=[];for(var t=B(l),n=t.next();!n.done;n=t.next())s=n.value,a=Tl(s.videoCapabilities,i),o=Tl(s.audioCapabilities,i),s.videoCapabilities&&s.videoCapabilities.length&&!a.length||s.audioCapabilities&&s.audioCapabilities.length&&!o.length||((s=Object.assign({},s)).videoCapabilities=a,s.audioCapabilities=o,r.push(s));if(!r.length)throw(u=Error("Unsupported keySystem or supportedConfigurations.")).name="NotSupportedError",u.code=DOMException.NOT_SUPPORTED_ERR,u;return V(e,Kc.call(d,c,r),2);case 2:return u=e.A,e.return(new Cl(u,i))}})})}function Tl(e,t){return e&&e.filter(function(e){return!e.encryptionScheme||e.encryptionScheme==t})}function Sl(){}function Al(){Bc?console.debug("McEncryptionSchemePolyfill: Already installed."):navigator.mediaCapabilities?(Bc=navigator.mediaCapabilities.decodingInfo,console.debug("McEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=Il):console.debug("McEncryptionSchemePolyfill: MediaCapabilities not found")}function Il(n){var i=this;return G(function e(){var t;return q(e,function(e){switch(e.o){case 1:return console.assert(i==navigator.mediaCapabilities,'bad "this" for decodingInfo'),V(e,Bc.call(i,n),2);case 2:return(t=e.A,n.keySystemConfiguration&&t.keySystemAccess)?Nl(t.keySystemAccess)?(console.debug("McEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.mediaCapabilities.decodingInfo=Bc,e.return(t)):(console.debug("McEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=kl,e.return(kl.call(i,n))):e.return(t)}})})}function kl(a){var o=this;return G(function e(){var t,n,i,r;return q(e,function(e){switch(e.o){case 1:return console.assert(o==navigator.mediaCapabilities,'bad "this" for decodingInfo'),t=null,a.keySystemConfiguration&&(i=a.keySystemConfiguration,r=i.keySystem,n=i.audio&&i.audio.encryptionScheme,i=i.video&&i.video.encryptionScheme,t=xl(r),r={powerEfficient:!1,smooth:!1,supported:!1,keySystemAccess:null,configuration:a},n&&n!=t||i&&i!=t)?e.return(r):V(e,Bc.call(o,a),2);case 2:return(r=e.A).keySystemAccess&&(r.keySystemAccess=new Cl(r.keySystemAccess,t)),e.return(r)}})})}function Cl(e,t){this.b=e,this.a=t,this.keySystem=e.keySystem}function xl(e){return e.startsWith("com.widevine")||e.startsWith("com.microsoft")||e.startsWith("com.adobe")||e.startsWith("org.w3")?"cenc":e.startsWith("com.apple")?"cbcs-1-9":(console.warn("EmeEncryptionSchemePolyfill: Unknown key system:",e,"Please contribute!"),null)}function Nl(e){var t=(e=e.getConfiguration()).audioCapabilities&&e.audioCapabilities[0];return!(!(e=e.videoCapabilities&&e.videoCapabilities[0]||t)||void 0===e.encryptionScheme)}function Pl(){}function Ml(){yl(),Al()}xn["application/ttml+xml"]=jc,_("shaka.text.Mp4TtmlParser",dl),dl.prototype.parseInit=function(e){var t=!1;if((new ji).P("moov",Ki).P("trak",Ki).P("mdia",Ki).P("minf",Ki).P("stbl",Ki).za("stsd",Bi).P("stpp",function(e){t=!0,e.parser.stop()}).parse(e),!t)throw new de(2,2,2007)},dl.prototype.parseMedia=function(e,t){var n=!1,i=[];if((new ji).P("mdat",Gi(function(e){n=!0,i=i.concat(this.a.parseMedia(e,t))}.bind(this))).parse(e),!n)throw new de(2,2,2007);return i},xn['application/mp4; codecs="stpp"']=dl,xn['application/mp4; codecs="stpp.ttml.im1t"']=dl,xn['application/mp4; codecs="stpp.TTML.im1t"']=dl,_("shaka.text.VttTextParser",hl),hl.prototype.parseInit=function(){},hl.prototype.parseMedia=function(e,t){var n=Re(e);if(n=(n=n.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n")).split(/\n{2,}/m),!/^WEBVTT($|[ \t\n])/m.test(n[0]))throw new de(2,2,2e3);var i=t.segmentStart;if(null==i&&n[i=0].includes("X-TIMESTAMP-MAP")){var r=n[0].match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),a=n[0].match(/MPEGTS:(\d+)/m);if(r&&a){if(null==(i=pl(new Dr(r[1]))))throw new de(2,2,2e3);i=t.periodStart+(Number(a[1])/9e4-i)}}a=[];for(var o=n[0].split("\n"),r=1;r<o.length;r++)if(/^Region:/.test(o[r])){var s=new Dr(o[r]),u=new An;Kr(s),Fr(s);for(var c,l=Kr(s);l;){e:{var d=u,h=l;if(c=/^id=(.*)$/.exec(h))d.id=c[1];else if(c=/^width=(\d{1,2}|100)%$/.exec(h))d.width=Number(c[1]);else if(c=/^lines=(\d+)$/.exec(h))d.height=Number(c[1]),d.heightUnits=2;else if(c=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(h))d.regionAnchorX=Number(c[1]),d.regionAnchorY=Number(c[2]);else if(c=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(h))d.viewportAnchorX=Number(c[1]),d.viewportAnchorY=Number(c[2]);else{if(!/^scroll=up$/.exec(h)){c=!1;break e}d.scroll="up"}c=!0}c||X.u("VTT parser encountered an invalid VTTRegion setting: ",l," The setting will be ignored."),Fr(s),l=Kr(s)}a.push(u)}for(r=[],s=1;s<n.length;s++){if(c=o=n[s].split("\n"),d=i,o=a,1==c.length&&!c[0]||/^NOTE($|[ \t])/.test(c[0])||"STYLE"==c[0])o=null;else{u=null,c[0].includes("--\x3e")||(u=c[0],c.splice(0,1)),h=pl(l=new Dr(c[0]));var f=jr(l,/[ \t]+--\x3e[ \t]+/g),p=pl(l);if(null==h||null==f||null==p)throw new de(2,2,2001);for(c=new cn(h+d,p+d,c.slice(1).join("\n").trim()),Fr(l),d=Kr(l);d;)fl(c,d,o)||X.u("VTT parser encountered an invalid VTT setting: ",d," The setting will be ignored."),Fr(l),d=Kr(l);null!=u&&(c.id=u),o=c}o&&r.push(o)}return r},xn["text/vtt"]=hl,xn['text/vtt; codecs="vtt"']=hl,xn['text/vtt; codecs="wvtt"']=hl,_("shaka.text.Mp4VttParser",ml),ml.prototype.parseInit=function(e){var t=!1;if((new ji).P("moov",Ki).P("trak",Ki).P("mdia",Ki).za("mdhd",function(e){0==e.version?(e.reader.V(4),e.reader.V(4),this.a=e.reader.M(),e.reader.V(4)):(e.reader.V(8),e.reader.V(8),this.a=e.reader.M(),e.reader.V(8)),e.reader.V(4)}.bind(this)).P("minf",Ki).P("stbl",Ki).za("stsd",Bi).P("wvtt",function(){t=!0}).parse(e),!this.a)throw new de(2,2,2008);if(!t)throw new de(2,2,2008)},ml.prototype.parseMedia=function(e,s){var u=this;if(!this.a)throw X.error("No init segment for MP4+VTT!"),new de(2,2,2008);var t,c=0,l=[],d=[],n=!1,h=!1,i=!1,f=null;if((new ji).P("moof",Ki).P("traf",Ki).za("tfdt",function(e){n=!0,c=0==e.version?e.reader.M():e.reader.fc()}).za("tfhd",function(e){var t=e.flags;(e=e.reader).V(4),1&t&&e.V(8),2&t&&e.V(4),f=8&t?e.M():null}).za("trun",function(e){h=!0;var t=e.version,n=e.flags,i=(e=e.reader).M();1&n&&e.V(4),4&n&&e.V(4);for(var r=[],a=0;a<i;a++){var o={duration:null,sampleSize:null,me:null};256&n&&(o.duration=e.M()),512&n&&(o.sampleSize=e.M()),1024&n&&e.V(4),2048&n&&(o.me=0==t?e.M():e.lf()),r.push(o)}l=r}).P("mdat",Gi(function(e){i=!0,t=e})).parse(e),!i&&!n&&!h)throw new de(2,2,2008);var p=c,m=new Oi(new DataView(t.buffer,t.byteOffset,t.byteLength),0);return l.forEach(function(e){var t=e.duration||f,n=e.me?c+e.me:p;p=n+(t||0);var i=0;do{var r=m.M();i+=r;var a=m.M(),o=null;"vttc"==(a=zi(a))?8<r&&(o=m.Gb(r-8)):("vtte"!=a&&X.error("Unknown box "+a+"! Skipping!"),m.V(r-8)),t?o&&d.push(function(e,t,n){var i,r,a;return(new ji).P("payl",Gi(function(e){i=Re(e)})).P("iden",Gi(function(e){r=Re(e)})).P("sttg",Gi(function(e){a=Re(e)})).parse(e),i?function(e,t,n,i,r){if(e=new cn(i,r,e),t&&(e.id=t),n)for(t=new Dr(n),n=Kr(t);n;)fl(e,n,[])||X.u("VTT parser encountered an invalid VTT setting: ",n," The setting will be ignored."),Fr(t),n=Kr(t);return e}(i,r,a,t,n):null}(o,s.periodStart+n/u.a,s.periodStart+p/u.a)):X.error("WVTT sample duration unknown, and no default found!")}while(e.sampleSize&&i<e.sampleSize)}),d.filter(ke.jb)},xn['application/mp4; codecs="wvtt"']=ml,_("shaka.util.Dom.createHTMLElement",gl),_("shaka.util.Dom.createVideoElement",function(){var e=document.createElement("video");return e.muted=!0,e.width=600,e.height=400,e}),_("shaka.util.Dom.asHTMLElement",function(e){return e}),_("shaka.util.Dom.asHTMLMediaElement",function(e){return e}),_("shaka.util.Dom.removeAllChildren",vl),_("EmeEncryptionSchemePolyfill",bl),bl.install=yl,_("McEncryptionSchemePolyfill",Sl),Sl.install=Al,Cl.prototype.getConfiguration=function(){var e=this.b.getConfiguration();if(e.videoCapabilities)for(var t=B(e.videoCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.a;if(e.audioCapabilities)for(n=(t=B(e.audioCapabilities)).next();!n.done;n=t.next())n.value.encryptionScheme=this.a;return e},Cl.prototype.createMediaKeys=function(){return this.b.createMediaKeys()},_("EncryptionSchemePolyfills",Pl),Pl.install=Ml,void 0!==t&&t.Sf&&(t.Sf=Pl);for(var Rl={ach:{h:"Lwo",i:"Acholi"},ady:{h:"",i:"Adyghe"},af:{h:"Afrikaans",i:"Afrikaans"},"af-NA":{h:"Afrikaans (Namibia)",i:"Afrikaans (Namibia)"},"af-ZA":{h:"Afrikaans (South Africa)",i:"Afrikaans (South Africa)"},ak:{h:"Ti",i:"Akan"},ar:{h:"",i:"Arabic"},"ar-AR":{h:"",i:"Arabic"},"ar-MA":{h:"",i:"Arabic (Morocco)"},"ar-SA":{h:" ()",i:"Arabic (Saudi Arabia)"},"ay-BO":{h:"Aymar aru",i:"Aymara"},az:{h:"Azrbaycan dili",i:"Azerbaijani"},"az-AZ":{h:"Azrbaycan dili",i:"Azerbaijani"},"be-BY":{h:"",i:"Belarusian"},bg:{h:"",i:"Bulgarian"},"bg-BG":{h:"",i:"Bulgarian"},bn:{h:"",i:"Bengali"},"bn-IN":{h:" ()",i:"Bengali (India)"},"bn-BD":{h:"()",i:"Bengali (Bangladesh)"},"bs-BA":{h:"Bosanski",i:"Bosnian"},ca:{h:"Catal",i:"Catalan"},"ca-ES":{h:"Catal",i:"Catalan"},cak:{h:"Maya Kaqchikel",i:"Kaqchikel"},"ck-US":{h:" (tsalagi)",i:"Cherokee"},cs:{h:"etina",i:"Czech"},"cs-CZ":{h:"etina",i:"Czech"},cy:{h:"Cymraeg",i:"Welsh"},"cy-GB":{h:"Cymraeg",i:"Welsh"},da:{h:"Dansk",i:"Danish"},"da-DK":{h:"Dansk",i:"Danish"},de:{h:"Deutsch",i:"German"},"de-AT":{h:"Deutsch (sterreich)",i:"German (Austria)"},"de-DE":{h:"Deutsch (Deutschland)",i:"German (Germany)"},"de-CH":{h:"Deutsch (Schweiz)",i:"German (Switzerland)"},dsb:{h:"Dolnoserbina",i:"Lower Sorbian"},el:{h:"",i:"Greek"},"el-GR":{h:"",i:"Greek (Greece)"},en:{h:"English",i:"English"},"en-GB":{h:"English (UK)",i:"English (UK)"},"en-AU":{h:"English (Australia)",i:"English (Australia)"},"en-CA":{h:"English (Canada)",i:"English (Canada)"},"en-IE":{h:"English (Ireland)",i:"English (Ireland)"},"en-IN":{h:"English (India)",i:"English (India)"},"en-PI":{h:"English (Pirate)",i:"English (Pirate)"},"en-UD":{h:"English (Upside Down)",i:"English (Upside Down)"},"en-US":{h:"English (US)",i:"English (US)"},"en-ZA":{h:"English (South Africa)",i:"English (South Africa)"},"en@pirate":{h:"English (Pirate)",i:"English (Pirate)"},eo:{h:"Esperanto",i:"Esperanto"},"eo-EO":{h:"Esperanto",i:"Esperanto"},es:{h:"Espaol",i:"Spanish"},"es-AR":{h:"Espaol (Argentine)",i:"Spanish (Argentina)"},"es-419":{h:"Espaol (Latinoamrica)",i:"Spanish (Latin America)"},"es-CL":{h:"Espaol (Chile)",i:"Spanish (Chile)"},"es-CO":{h:"Espaol (Colombia)",i:"Spanish (Colombia)"},"es-EC":{h:"Espaol (Ecuador)",i:"Spanish (Ecuador)"},"es-ES":{h:"Espaol (Espaa)",i:"Spanish (Spain)"},"es-LA":{h:"Espaol (Latinoamrica)",i:"Spanish (Latin America)"},"es-NI":{h:"Espaol (Nicaragua)",i:"Spanish (Nicaragua)"},"es-MX":{h:"Espaol (Mxico)",i:"Spanish (Mexico)"},"es-US":{h:"Espaol (Estados Unidos)",i:"Spanish (United States)"},"es-VE":{h:"Espaol (Venezuela)",i:"Spanish (Venezuela)"},et:{h:"eesti keel",i:"Estonian"},"et-EE":{h:"Eesti (Estonia)",i:"Estonian (Estonia)"},eu:{h:"Euskara",i:"Basque"},"eu-ES":{h:"Euskara",i:"Basque"},fa:{h:"",i:"Persian"},"fa-IR":{h:"",i:"Persian"},"fb-LT":{h:"Leet Speak",i:"Leet"},ff:{h:"Fulah",i:"Fulah"},fi:{h:"Suomi",i:"Finnish"},"fi-FI":{h:"Suomi",i:"Finnish"},"fo-FO":{h:"Froyskt",i:"Faroese"},fr:{h:"Franais",i:"French"},"fr-CA":{h:"Franais (Canada)",i:"French (Canada)"},"fr-FR":{h:"Franais (France)",i:"French (France)"},"fr-BE":{h:"Franais (Belgique)",i:"French (Belgium)"},"fr-CH":{h:"Franais (Suisse)",i:"French (Switzerland)"},"fy-NL":{h:"Frysk",i:"Frisian (West)"},ga:{h:"Gaeilge",i:"Irish"},"ga-IE":{h:"Gaeilge (Gaelic)",i:"Irish (Gaelic)"},gl:{h:"Galego",i:"Galician"},"gl-ES":{h:"Galego",i:"Galician"},"gn-PY":{h:"Avae'",i:"Guarani"},"gu-IN":{h:"",i:"Gujarati"},"gx-GR":{h:" ",i:"Classical Greek"},he:{h:"",i:"Hebrew"},"he-IL":{h:"",i:"Hebrew"},hi:{h:"",i:"Hindi"},"hi-IN":{h:"",i:"Hindi"},hr:{h:"Hrvatski",i:"Croatian"},"hr-HR":{h:"Hrvatski",i:"Croatian"},hsb:{h:"Hornjoserbina",i:"Upper Sorbian"},ht:{h:"Kreyl",i:"Haitian Creole"},hu:{h:"Magyar",i:"Hungarian"},"hu-HU":{h:"Magyar",i:"Hungarian"},"hy-AM":{h:"",i:"Armenian"},id:{h:"Bahasa Indonesia",i:"Indonesian"},"id-ID":{h:"Bahasa Indonesia",i:"Indonesian"},is:{h:"slenska",i:"Icelandic"},"is-IS":{h:"slenska (Iceland)",i:"Icelandic (Iceland)"},it:{h:"Italiano",i:"Italian"},"it-IT":{h:"Italiano",i:"Italian"},ja:{h:"",i:"Japanese"},"ja-JP":{h:"",i:"Japanese"},"jv-ID":{h:"Basa Jawa",i:"Javanese"},"ka-GE":{h:"",i:"Georgian"},"kk-KZ":{h:"",i:"Kazakh"},km:{h:"",i:"Khmer"},"km-KH":{h:"",i:"Khmer"},kab:{h:"Taqbaylit",i:"Kabyle"},kn:{h:"",i:"Kannada"},"kn-IN":{h:" (India)",i:"Kannada (India)"},ko:{h:"",i:"Korean"},"ko-KR":{h:" ()",i:"Korean (Korea)"},ku:{h:"Kurd",i:"Kurdish"},"ku-TR":{h:"Kurd",i:"Kurdish"},la:{h:"Latin",i:"Latin"},"la-VA":{h:"Latin",i:"Latin"},lb:{h:"Ltzebuergesch",i:"Luxembourgish"},"li-NL":{h:"Lmbrgs",i:"Limburgish"},lt:{h:"Lietuvi",i:"Lithuanian"},"lt-LT":{h:"Lietuvi",i:"Lithuanian"},lv:{h:"Latvieu",i:"Latvian"},"lv-LV":{h:"Latvieu",i:"Latvian"},mai:{h:", ",i:"Maithili"},"mg-MG":{h:"Malagasy",i:"Malagasy"},mk:{h:"",i:"Macedonian"},"mk-MK":{h:" ()",i:"Macedonian (Macedonian)"},ml:{h:"",i:"Malayalam"},"ml-IN":{h:"",i:"Malayalam"},"mn-MN":{h:"",i:"Mongolian"},mr:{h:"",i:"Marathi"},"mr-IN":{h:"",i:"Marathi"},ms:{h:"Bahasa Melayu",i:"Malay"},"ms-MY":{h:"Bahasa Melayu",i:"Malay"},mt:{h:"Malti",i:"Maltese"},"mt-MT":{h:"Malti",i:"Maltese"},my:{h:"",i:"Burmese"},nb:{h:"Norsk (bokml)",i:"Norwegian (bokmal)"},"nb-NO":{h:"Norsk (bokml)",i:"Norwegian (bokmal)"},ne:{h:"",i:"Nepali"},"ne-NP":{h:"",i:"Nepali"},nl:{h:"Nederlands",i:"Dutch"},"nl-BE":{h:"Nederlands (Belgi)",i:"Dutch (Belgium)"},"nl-NL":{h:"Nederlands (Nederland)",i:"Dutch (Netherlands)"},"nn-NO":{h:"Norsk (nynorsk)",i:"Norwegian (nynorsk)"},no:{h:"Norsk",i:"Norwegian"},oc:{h:"Occitan",i:"Occitan"},"or-IN":{h:"",i:"Oriya"},pa:{h:"",i:"Punjabi"},"pa-IN":{h:" ( )",i:"Punjabi (India)"},pl:{h:"Polski",i:"Polish"},"pl-PL":{h:"Polski",i:"Polish"},"ps-AF":{h:"",i:"Pashto"},pt:{h:"Portugus",i:"Portuguese"},"pt-BR":{h:"Portugus (Brasil)",i:"Portuguese (Brazil)"},"pt-PT":{h:"Portugus (Portugal)",i:"Portuguese (Portugal)"},"qu-PE":{h:"Qhichwa",i:"Quechua"},"rm-CH":{h:"Rumantsch",i:"Romansh"},ro:{h:"Romn",i:"Romanian"},"ro-RO":{h:"Romn",i:"Romanian"},ru:{h:"",i:"Russian"},"ru-RU":{h:"",i:"Russian"},"sa-IN":{h:"",i:"Sanskrit"},"se-NO":{h:"Davvismegiella",i:"Northern Smi"},"si-LK":{h:"",i:"Sinhala (Sri Lanka)"},sk:{h:"Slovenina",i:"Slovak"},"sk-SK":{h:"Slovenina (Slovakia)",i:"Slovak (Slovakia)"},sl:{h:"Slovenina",i:"Slovenian"},"sl-SI":{h:"Slovenina",i:"Slovenian"},"so-SO":{h:"Soomaaliga",i:"Somali"},sq:{h:"Shqip",i:"Albanian"},"sq-AL":{h:"Shqip",i:"Albanian"},sr:{h:"",i:"Serbian"},"sr-RS":{h:" (Serbia)",i:"Serbian (Serbia)"},su:{h:"Basa Sunda",i:"Sundanese"},sv:{h:"Svenska",i:"Swedish"},"sv-SE":{h:"Svenska",i:"Swedish"},sw:{h:"Kiswahili",i:"Swahili"},"sw-KE":{h:"Kiswahili",i:"Swahili (Kenya)"},ta:{h:"",i:"Tamil"},"ta-IN":{h:"",i:"Tamil"},te:{h:"",i:"Telugu"},"te-IN":{h:"",i:"Telugu"},tg:{h:" ",i:"Tajik"},"tg-TJ":{h:"",i:"Tajik"},th:{h:"",i:"Thai"},"th-TH":{h:" ()",i:"Thai (Thailand)"},tl:{h:"Filipino",i:"Filipino"},"tl-PH":{h:"Filipino",i:"Filipino"},tlh:{h:"tlhIngan-Hol",i:"Klingon"},tr:{h:"Trke",i:"Turkish"},"tr-TR":{h:"Trke",i:"Turkish"},"tt-RU":{h:"",i:"Tatar"},uk:{h:"",i:"Ukrainian"},"uk-UA":{h:"",i:"Ukrainian"},ur:{h:"",i:"Urdu"},"ur-PK":{h:"",i:"Urdu"},uz:{h:"O'zbek",i:"Uzbek"},"uz-UZ":{h:"O'zbek",i:"Uzbek"},vi:{h:"Ting Vit",i:"Vietnamese"},"vi-VN":{h:"Ting Vit",i:"Vietnamese"},"xh-ZA":{h:"isiXhosa",i:"Xhosa"},yi:{h:"",i:"Yiddish"},"yi-DE":{h:" (German)",i:"Yiddish (German)"},zh:{h:"",i:"Chinese"},"zh-HANS":{h:"",i:"Chinese Simplified"},"zh-HANT":{h:"",i:"Chinese Traditional"},"zh-CN":{h:"",i:"Chinese Simplified (China)"},"zh-HK":{h:"",i:"Chinese Traditional (Hong Kong)"},"zh-SG":{h:"",i:"Chinese Simplified (Singapore)"},"zh-TW":{h:"",i:"Chinese Traditional (Taiwan)"},"zu-ZA":{h:"isiZulu",i:"Zulu"}},Ll=B(Object.keys(Rl)),Ul=Ll.next();!Ul.done;Ul=Ll.next()){var _l=Ul.value;Rl[_l.toLowerCase()]=Rl[_l]}function Ol(e,t){this.parent=e,this.controls=t,this.eventManager=new pt,this.localization=this.controls.La,this.player=this.controls.$a(),this.video=this.controls.sc()}function Dl(e,t,n,i){Ol.call(this,e,t);var r=this;this.container=gl("div"),this.container.classList.add("shaka-range-container"),this.container.classList.add.apply(this.container.classList,I(n)),this.a=!1,this.bar=document.createElement("input"),this.bar.classList.add("shaka-range-element"),this.bar.classList.add.apply(this.bar.classList,I(i)),this.bar.type="range",this.bar.step="any",this.bar.min="0",this.bar.max="1",this.bar.value="0",this.container.appendChild(this.bar),this.parent.appendChild(this.container),this.eventManager.m(this.bar,"mousedown",function(){r.controls.Cb()&&(r.a=!0,r.onChangeStart())}),this.eventManager.m(this.bar,"touchstart",function(e){r.controls.Cb()&&(r.a=!0,Fl(r,e),r.onChangeStart())}),this.eventManager.m(this.bar,"input",function(){r.onChange()}),this.eventManager.m(this.bar,"touchmove",function(e){r.a&&(Fl(r,e),r.onChange())}),this.eventManager.m(this.bar,"touchend",function(e){r.a&&(r.a=!1,Fl(r,e),r.onChangeEnd())}),this.eventManager.m(this.bar,"mouseup",function(){r.a&&(r.a=!1,r.onChangeEnd())})}function Fl(e,t){t.preventDefault();var n=t.changedTouches[0],i=e.bar.getBoundingClientRect(),r=parseFloat(e.bar.min),t=parseFloat(e.bar.max);(n=r+(t-r)/i.width*(n.clientX-i.left))<r?n=r:t<n&&(n=t),e.bar.value=n}function jl(e,t){t=e.getElementsByClassName(t);return t.length?t[0]:null}function Kl(e){(e=e&&jl(e,"shaka-chosen-item"))&&e.parentElement.focus()}function Bl(){var e=gl("i");return e.classList.add("material-icons-round"),e.classList.add("shaka-chosen-item"),e.textContent="done",e.setAttribute("aria-hidden","true"),e}function Gl(e,t){e&&(t?(e.classList.add("shaka-displayed"),e.classList.remove("shaka-hidden")):(e.classList.add("shaka-hidden"),e.classList.remove("shaka-displayed")))}function Vl(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function zl(e,t){Dl.call(this,e,t,["shaka-seek-bar-container"],["shaka-seek-bar","shaka-no-propagation","shaka-show-controls-on-mouse-over"]);var n=this;this.c=this.controls.g,this.b=new ze(function(){n.video.currentTime=n.getValue()}),this.f=!1,this.eventManager.m(this.localization,"locale-updated",function(){return Wl(n)}),this.eventManager.m(this.localization,"locale-changed",function(){return Wl(n)}),this.setValue(this.video.currentTime),Hl(this),Wl(this)}function Hl(e){var t=e.c.seekBarColors,n=e.getValue(),i=e.video.buffered.length,r=i?e.video.buffered.start(0):0,a=i?e.video.buffered.end(i-1):0,o=e.player.Ib(),s=o.end-o.start;e.setRange(o.start,o.end),e.player.W()&&s<5?Gl(e.container,!1):(Gl(e.container,!0),0==i?e.container.style.background=t.base:(i=(Math.max(r,o.start)-o.start)/s||0,a=(Math.min(a,o.end)-o.start)/s||0,n=(Math.min(Math.max(n,o.start),o.end)-o.start)/s||0,e.container.style.background="linear-gradient("+["to right",(e.c.showUnbufferedStart?t.base:t.played)+" "+100*i+"%",t.played+" "+100*i+"%",t.played+" "+100*n+"%",t.buffered+" "+100*n+"%",t.buffered+" "+100*a+"%",t.base+" "+100*a+"%"].join()+")"))}function Wl(e){e.bar.setAttribute("aria-label",e.localization.resolve("SEEK"))}function ql(e,t,n,i){var r,a=this;j.call(this),this.O=!0,this.g=i,this.l=new wi(n,e,this.g.castReceiverAppId),this.Ja=!0,this.c=this.l.sc(),this.B=n,this.s=this.l.$a(),this.wa=e,this.f=t,this.j=null,this.Z=!1,this.H=[],this.Wa=[],this.Na=!1,this.K=new ze(function(){a.f.style.cursor="none",a.Na=!1,$l(a)}),this.Y=new ze(function(){a.a.removeAttribute("shown"),a.v.R(2)}),this.v=new ze(function(){for(var e=B(a.H),t=e.next();!t.done;t=e.next())Gl(t.value,!1)}),this.ya=new ze(function(){a.Cb()&&ed(a)}),this.w=null,this.Ka=[],this.La=((t=new re("en")).aa("ar",new Map([["AUTO_QUALITY",""],["BACK",""],["CAPTIONS"," "],["CAST","..."],["ENTER_PICTURE_IN_PICTURE",'   "  "'],["EXIT_FULL_SCREEN","   "],["EXIT_PICTURE_IN_PICTURE",'   "  "'],["FAST_FORWARD"," "],["FULL_SCREEN"," "],["LANGUAGE",""],["LIVE",""],["MORE_SETTINGS","  "],["MULTIPLE_LANGUAGES"," "],["MUTE"," "],["NOT_APPLICABLE"," "],["OFF",""],["ON",""],["PAUSE"," "],["PICTURE_IN_PICTURE","  "],["PLAY",""],["RESOLUTION"," "],["REWIND",""],["SEEK"," "],["SKIP_TO_LIVE","   "],["UNDETERMINED_LANGUAGE"," "],["UNMUTE"," "],["UNRECOGNIZED_LANGUAGE"," "],["VOLUME"," "]])),t.aa("de",new Map([["AUTO_QUALITY","Automatisch"],["BACK","Zurck"],["CAPTIONS","Untertitel"],["CAST","Streamen..."],["ENTER_PICTURE_IN_PICTURE","Bild-im-Bild-Modus aktivieren"],["EXIT_FULL_SCREEN","Vollbildmodus beenden"],["EXIT_PICTURE_IN_PICTURE","Bild-im-Bild-Modus beenden"],["FAST_FORWARD","Vorspulen"],["FULL_SCREEN","Vollbildmodus"],["LANGUAGE","Sprache"],["LIVE","Live"],["MORE_SETTINGS","Weitere Einstellungen"],["MULTIPLE_LANGUAGES","Mehrere Sprachen"],["MUTE","Stummschalten"],["NOT_APPLICABLE","Nicht zutreffend"],["OFF","Aus"],["ON","Ein"],["PAUSE","Pause"],["PICTURE_IN_PICTURE","Bild im Bild"],["PLAY","Wiedergabe"],["RESOLUTION","Auflsung"],["REWIND","Zurckspulen"],["SEEK","Suche"],["SKIP_TO_LIVE","Zum Live-Videostream wechseln"],["UNDETERMINED_LANGUAGE","Unbestimmt"],["UNMUTE","Stummschaltung aufheben"],["UNRECOGNIZED_LANGUAGE","Unbekannt"],["VOLUME","Lautstrke"]])),t.aa("en",new Map([["AUTO_QUALITY","Auto"],["BACK","Back"],["CAPTIONS","Captions"],["CAST","Cast..."],["ENTER_PICTURE_IN_PICTURE","Enter Picture-in-Picture"],["EXIT_FULL_SCREEN","Exit full screen"],["EXIT_PICTURE_IN_PICTURE","Exit Picture-in-Picture"],["FAST_FORWARD","Fast-forward"],["FULL_SCREEN","Full screen"],["LANGUAGE","Language"],["LIVE","Live"],["MORE_SETTINGS","More settings"],["MULTIPLE_LANGUAGES","Multiple languages"],["MUTE","Mute"],["NOT_APPLICABLE","Not applicable"],["OFF","Off"],["ON","On"],["PAUSE","Pause"],["PICTURE_IN_PICTURE","Picture-in-Picture"],["PLAY","Play"],["RESOLUTION","Resolution"],["REWIND","Rewind"],["SEEK","Seek"],["SKIP_TO_LIVE","Skip ahead to live"],["UNDETERMINED_LANGUAGE","Undetermined"],["UNMUTE","Unmute"],["UNRECOGNIZED_LANGUAGE","Unrecognized"],["VOLUME","Volume"]])),t.aa("en-GB",new Map([["AUTO_QUALITY","Auto"],["BACK","Back"],["CAPTIONS","Captions"],["CAST","Cast..."],["ENTER_PICTURE_IN_PICTURE","Enter picture-in-picture"],["EXIT_FULL_SCREEN","Exit full screen"],["EXIT_PICTURE_IN_PICTURE","Exit picture-in-picture"],["FAST_FORWARD","Fast-forward"],["FULL_SCREEN","Full screen"],["LANGUAGE","Language"],["LIVE","Live"],["MORE_SETTINGS","More settings"],["MULTIPLE_LANGUAGES","Multiple languages"],["MUTE","Mute"],["NOT_APPLICABLE","Not applicable"],["OFF","Off"],["ON","On"],["PAUSE","Pause"],["PICTURE_IN_PICTURE","Picture-in-picture"],["PLAY","Play"],["RESOLUTION","Resolution"],["REWIND","Rewind"],["SEEK","Seek"],["SKIP_TO_LIVE","Skip ahead to live"],["UNDETERMINED_LANGUAGE","Undetermined"],["UNMUTE","Unmute"],["UNRECOGNIZED_LANGUAGE","Unrecognised"],["VOLUME","volume"]])),t.aa("es",new Map([["AUTO_QUALITY","Automtico"],["BACK","Atrs"],["CAPTIONS","Subttulos"],["CAST","Enviar..."],["ENTER_PICTURE_IN_PICTURE","Activar el modo imagen en imagen"],["EXIT_FULL_SCREEN","Salir del modo de pantalla completa"],["EXIT_PICTURE_IN_PICTURE","Salir del modo imagen en imagen"],["FAST_FORWARD","Avanzar rpidamente"],["FULL_SCREEN","Pantalla completa"],["LANGUAGE","Idioma"],["LIVE","En directo"],["MORE_SETTINGS","Ms opciones"],["MULTIPLE_LANGUAGES","Varios idiomas"],["MUTE","Silenciar"],["NOT_APPLICABLE","No aplicable"],["OFF","No"],["ON","S"],["PAUSE","Pausar"],["PICTURE_IN_PICTURE","Imagen en imagen"],["PLAY","Reproducir"],["RESOLUTION","Resolucin"],["REWIND","Rebobinar"],["SEEK","Buscar"],["SKIP_TO_LIVE","Ir al vdeo en directo"],["UNDETERMINED_LANGUAGE","Sin especificar"],["UNMUTE","Activar sonido"],["UNRECOGNIZED_LANGUAGE","No reconocida"],["VOLUME","Volumen"]])),t.aa("es-419",new Map([["AUTO_QUALITY","Automtico"],["BACK","Atrs"],["CAPTIONS","Subttulos"],["CAST","Transmitir..."],["ENTER_PICTURE_IN_PICTURE","Ingresar al modo de pantalla en pantalla"],["EXIT_FULL_SCREEN","Salir de pantalla completa"],["EXIT_PICTURE_IN_PICTURE","Salir del modo de pantalla en pantalla"],["FAST_FORWARD","Avanzar"],["FULL_SCREEN","Pantalla completa"],["LANGUAGE","Idioma"],["LIVE","En directo"],["MORE_SETTINGS","Ms opciones de configuracin"],["MULTIPLE_LANGUAGES","Varios idiomas"],["MUTE","Silenciar"],["NOT_APPLICABLE","No aplicable"],["OFF","Desactivado"],["ON","Activado"],["PAUSE","Detener"],["PICTURE_IN_PICTURE","Pantalla en pantalla"],["PLAY","Reproducir"],["RESOLUTION","Resolucin"],["REWIND","Retroceder"],["SEEK","Buscar"],["SKIP_TO_LIVE","Adelantar hasta la transmisin en vivo"],["UNDETERMINED_LANGUAGE","Sin especificar"],["UNMUTE","Dejar de silenciar"],["UNRECOGNIZED_LANGUAGE","No reconocida"],["VOLUME","Volumen"]])),t.aa("fr",new Map([["AUTO_QUALITY","Automatique"],["BACK","Retour"],["CAPTIONS","Sous-titres"],["CAST","Caster"],["ENTER_PICTURE_IN_PICTURE","Utiliser le mode Picture-in-Picture"],["EXIT_FULL_SCREEN","Quitter le mode plein cran"],["EXIT_PICTURE_IN_PICTURE","Quitter le modePIP (Picture-in-picture)"],["FAST_FORWARD","Avance rapide"],["FULL_SCREEN","Plein cran"],["LANGUAGE","Langue"],["LIVE","En direct"],["MORE_SETTINGS","Plus de paramtres"],["MULTIPLE_LANGUAGES","Plusieurs langues"],["MUTE","Couper le son"],["NOT_APPLICABLE","Non applicable"],["OFF","Dsactive"],["ON","Active"],["PAUSE","Pause"],["PICTURE_IN_PICTURE","Picture-in-Picture"],["PLAY","Visionner"],["RESOLUTION","Rsolution"],["REWIND","Retour arrire"],["SEEK","Chercher"],["SKIP_TO_LIVE","Accder  la partie la plus rcente du direct"],["UNDETERMINED_LANGUAGE","Langue indtermine"],["UNMUTE","Ractiver le son"],["UNRECOGNIZED_LANGUAGE","Non reconnu"],["VOLUME","Volume"]])),t.aa("it",new Map([["AUTO_QUALITY","Automatica"],["BACK","Indietro"],["CAPTIONS","Sottotitoli"],["CAST","Trasmetti..."],["ENTER_PICTURE_IN_PICTURE","Attiva Picture in picture"],["EXIT_FULL_SCREEN","Esci da schermo intero"],["EXIT_PICTURE_IN_PICTURE","Esci da Picture in picture"],["FAST_FORWARD","Avanti veloce"],["FULL_SCREEN","Schermo intero"],["LANGUAGE","Lingua"],["LIVE","Dal vivo"],["MORE_SETTINGS","Altre impostazioni"],["MULTIPLE_LANGUAGES","Pi lingue"],["MUTE","Disattiva audio"],["NOT_APPLICABLE","Non applicabile"],["OFF","Disattivo"],["ON","Attivo"],["PAUSE","Metti in pausa"],["PICTURE_IN_PICTURE","Picture in picture"],["PLAY","Riproduci"],["RESOLUTION","Risoluzione"],["REWIND","Riavvolgi"],["SEEK","Cerca"],["SKIP_TO_LIVE","Passa alla trasmissione dal vivo"],["UNDETERMINED_LANGUAGE","Indeterminata"],["UNMUTE","Riattiva audio"],["UNRECOGNIZED_LANGUAGE","Non riconosciuto"],["VOLUME","Volume"]])),t.aa("ja",new Map([["AUTO_QUALITY",""],["BACK",""],["CAPTIONS",""],["CAST","..."],["ENTER_PICTURE_IN_PICTURE","  "],["EXIT_FULL_SCREEN",""],["EXIT_PICTURE_IN_PICTURE","  "],["FAST_FORWARD",""],["FULL_SCREEN",""],["LANGUAGE",""],["LIVE",""],["MORE_SETTINGS",""],["MULTIPLE_LANGUAGES",""],["MUTE",""],["NOT_APPLICABLE",""],["OFF",""],["ON",""],["PAUSE",""],["PICTURE_IN_PICTURE","  "],["PLAY",""],["RESOLUTION",""],["REWIND",""],["SEEK",""],["SKIP_TO_LIVE",""],["UNDETERMINED_LANGUAGE",""],["UNMUTE",""],["UNRECOGNIZED_LANGUAGE",""],["VOLUME",""]])),t.aa("ko",new Map([["AUTO_QUALITY",""],["BACK",""],["CAPTIONS",""],["CAST","..."],["ENTER_PICTURE_IN_PICTURE","PIP  "],["EXIT_FULL_SCREEN"," "],["EXIT_PICTURE_IN_PICTURE","PIP  "],["FAST_FORWARD"," "],["FULL_SCREEN",""],["LANGUAGE",""],["LIVE",""],["MORE_SETTINGS"," "],["MULTIPLE_LANGUAGES"," "],["MUTE",""],["NOT_APPLICABLE","  "],["OFF"," "],["ON",""],["PAUSE",""],["PICTURE_IN_PICTURE","PIP "],["PLAY",""],["RESOLUTION",""],["REWIND",""],["SEEK",""],["SKIP_TO_LIVE","  "],["UNDETERMINED_LANGUAGE",""],["UNMUTE"," "],["UNRECOGNIZED_LANGUAGE","  "],["VOLUME",""]])),t.aa("nl",new Map([["AUTO_QUALITY","Automatisch"],["BACK","Terug"],["CAPTIONS","Ondertiteling"],["CAST","Casten..."],["ENTER_PICTURE_IN_PICTURE","Scherm-in-scherm openen"],["EXIT_FULL_SCREEN","Volledig scherm sluiten"],["EXIT_PICTURE_IN_PICTURE","Scherm-in-scherm afsluiten"],["FAST_FORWARD","Vooruitspoelen"],["FULL_SCREEN","Volledig scherm"],["LANGUAGE","Taal"],["LIVE","Live"],["MORE_SETTINGS","Meer instellingen"],["MULTIPLE_LANGUAGES","Meerdere talen"],["MUTE","Dempen"],["NOT_APPLICABLE","Niet van toepassing"],["OFF","Uit"],["ON","Aan"],["PAUSE","Onderbreken"],["PICTURE_IN_PICTURE","Scherm-in-scherm"],["PLAY","Afspelen"],["RESOLUTION","Resolutie"],["REWIND","Terugspoelen"],["SEEK","Zoeken"],["SKIP_TO_LIVE","Doorgaan naar live"],["UNDETERMINED_LANGUAGE","Onbepaald"],["UNMUTE","Dempen opheffen"],["UNRECOGNIZED_LANGUAGE","Onbekend"],["VOLUME","Volume"]])),t.aa("pl",new Map([["AUTO_QUALITY","Automatycznie"],["BACK","Wstecz"],["CAPTIONS","Napisy"],["CAST","Przesyaj..."],["ENTER_PICTURE_IN_PICTURE","Wcz tryb obrazu wobrazie"],["EXIT_FULL_SCREEN","Zamknij peny ekran"],["EXIT_PICTURE_IN_PICTURE","Wycz tryb obrazu wobrazie"],["FAST_FORWARD","Przewi do przodu"],["FULL_SCREEN","Peny ekran"],["LANGUAGE","Jzyk"],["LIVE","Na ywo"],["MORE_SETTINGS","Wicej ustawie"],["MULTIPLE_LANGUAGES","Wiele jzykw"],["MUTE","Wycisz"],["NOT_APPLICABLE","Nie dotyczy"],["OFF","Wyczone"],["ON","Wczone"],["PAUSE","Wstrzymaj"],["PICTURE_IN_PICTURE","Obraz wobrazie"],["PLAY","Odtwrz"],["RESOLUTION","Rozdzielczo"],["REWIND","Przewi do tyu"],["SEEK","Szukaj"],["SKIP_TO_LIVE","Przejd do transmisji na ywo"],["UNDETERMINED_LANGUAGE","Nie okrelono"],["UNMUTE","Wycz wyciszenie"],["UNRECOGNIZED_LANGUAGE","Nierozpoznany"],["VOLUME","Gono"]])),t.aa("pt-BR",new Map([["CAPTIONS","Legendas"],["CAST","Transmitir..."],["EXIT_FULL_SCREEN","Sair do modo tela cheia"],["EXIT_PICTURE_IN_PICTURE","Sair de picture-in-picture"],["FULL_SCREEN","Tela cheia"],["LANGUAGE","Idioma"],["LIVE","Ao vivo"],["MORE_SETTINGS","Mais definies"],["MUTE","Desativar som"],["OFF","Desativado"],["ON","Ativado"],["PAUSE","Pausar"],["PICTURE_IN_PICTURE","Picture-in-picture"],["PLAY","Reproduzir"],["REWIND","Retroceder"],["SEEK","Procurar"],["UNMUTE","Ativar som"],["UNRECOGNIZED_LANGUAGE","No reconhecido"],["VOLUME","Volume"]])),t.aa("pt-PT",new Map([["AUTO_QUALITY","Automtico"],["BACK","Anterior"],["CAPTIONS","Legendas"],["CAST","Transmitir..."],["ENTER_PICTURE_IN_PICTURE","Entrar no modo ecr no ecr"],["EXIT_FULL_SCREEN","Sair do modo de ecr inteiro"],["EXIT_PICTURE_IN_PICTURE","Sair do modo ecr no ecr"],["FAST_FORWARD","Avanar"],["FULL_SCREEN","Ecr inteiro"],["LANGUAGE","Idioma"],["LIVE","Em direto"],["MORE_SETTINGS","Mais definies"],["MULTIPLE_LANGUAGES","Vrios idiomas"],["MUTE","Desativar som"],["NOT_APPLICABLE","No aplicvel"],["OFF","Desligado"],["ON","Ligado"],["PAUSE","Colocar em pausa"],["PICTURE_IN_PICTURE","Ecr no ecr"],["PLAY","Reproduzir"],["RESOLUTION","Resoluo"],["REWIND","Rebobinar"],["SEEK","Procurar"],["SKIP_TO_LIVE","Avanar para o direto"],["UNDETERMINED_LANGUAGE","Indeterminado"],["UNMUTE","Reativar o som"],["UNRECOGNIZED_LANGUAGE","No reconhecido"],["VOLUME","Volume"]])),t.aa("ru",new Map([["AUTO_QUALITY",""],["BACK",""],["CAPTIONS",""],["CAST","..."],["ENTER_PICTURE_IN_PICTURE",'   "  "'],["EXIT_FULL_SCREEN"," "],["EXIT_PICTURE_IN_PICTURE",'   "  "'],["FAST_FORWARD"," "],["FULL_SCREEN"," "],["LANGUAGE",""],["LIVE"," "],["MORE_SETTINGS"," "],["MULTIPLE_LANGUAGES"," "],["MUTE"," "],["NOT_APPLICABLE",""],["OFF",""],["ON",""],["PAUSE",""],["PICTURE_IN_PICTURE","  "],["PLAY",""],["RESOLUTION",""],["REWIND"," "],["SEEK",""],["SKIP_TO_LIVE","     "],["UNDETERMINED_LANGUAGE"," "],["UNMUTE"," "],["UNRECOGNIZED_LANGUAGE"," "],["VOLUME",""]])),t.aa("th",new Map([["AUTO_QUALITY",""],["BACK",""],["CAPTIONS",""],["CAST","..."],["ENTER_PICTURE_IN_PICTURE",""],["EXIT_FULL_SCREEN",""],["EXIT_PICTURE_IN_PICTURE",""],["FAST_FORWARD",""],["FULL_SCREEN",""],["LANGUAGE",""],["LIVE",""],["MORE_SETTINGS",""],["MULTIPLE_LANGUAGES",""],["MUTE",""],["NOT_APPLICABLE",""],["OFF",""],["ON",""],["PAUSE",""],["PICTURE_IN_PICTURE",""],["PLAY",""],["RESOLUTION",""],["REWIND",""],["SEEK",""],["SKIP_TO_LIVE",""],["UNDETERMINED_LANGUAGE",""],["UNMUTE",""],["UNRECOGNIZED_LANGUAGE",""],["VOLUME",""]])),t.aa("tr",new Map([["AUTO_QUALITY","Otomatik"],["BACK","Geri"],["CAPTIONS","Altyazlar"],["CAST","Yaynla..."],["ENTER_PICTURE_IN_PICTURE","Pencere iinde Pencere moduna gir"],["EXIT_FULL_SCREEN","Tam ekrandan k"],["EXIT_PICTURE_IN_PICTURE","Pencere inde Pencereden k"],["FAST_FORWARD","leri sar"],["FULL_SCREEN","Tam ekran"],["LANGUAGE","Dil"],["LIVE","Canl"],["MORE_SETTINGS","Daha fazla ayar"],["MULTIPLE_LANGUAGES","Birden ok dil"],["MUTE","Sesi kapat"],["NOT_APPLICABLE","Geerli deil"],["OFF","Kapal"],["ON","Ak"],["PAUSE","Duraklat"],["PICTURE_IN_PICTURE","Pencere inde Pencere"],["PLAY","Oynat"],["RESOLUTION","znrlk"],["REWIND","Geri sar"],["SEEK","Ara"],["SKIP_TO_LIVE","Canl yayna atla"],["UNDETERMINED_LANGUAGE","Belirsiz"],["UNMUTE","Sesi a"],["UNRECOGNIZED_LANGUAGE","Tannmayan"],["VOLUME","Ses"]])),t.aa("zh",new Map([["AUTO_QUALITY",""],["BACK",""],["CAPTIONS",""],["CAST",""],["ENTER_PICTURE_IN_PICTURE",""],["EXIT_FULL_SCREEN",""],["EXIT_PICTURE_IN_PICTURE",""],["FAST_FORWARD",""],["FULL_SCREEN",""],["LANGUAGE",""],["LIVE",""],["MORE_SETTINGS",""],["MULTIPLE_LANGUAGES",""],["MUTE",""],["NOT_APPLICABLE",""],["OFF",""],["ON",""],["PAUSE",""],["PICTURE_IN_PICTURE",""],["PLAY",""],["RESOLUTION",""],["REWIND",""],["SEEK",""],["SKIP_TO_LIVE",""],["UNDETERMINED_LANGUAGE",""],["UNMUTE",""],["UNRECOGNIZED_LANGUAGE",""],["VOLUME",""]])),t.aa("zh-TW",new Map([["AUTO_QUALITY",""],["BACK",""],["CAPTIONS",""],["CAST","..."],["ENTER_PICTURE_IN_PICTURE",""],["EXIT_FULL_SCREEN",""],["EXIT_PICTURE_IN_PICTURE",""],["FAST_FORWARD",""],["FULL_SCREEN",""],["LANGUAGE",""],["LIVE",""],["MORE_SETTINGS",""],["MULTIPLE_LANGUAGES",""],["MUTE",""],["NOT_APPLICABLE",""],["OFF",""],["ON",""],["PAUSE",""],["PICTURE_IN_PICTURE",""],["PLAY",""],["RESOLUTION",""],["REWIND",""],["SEEK",""],["SKIP_TO_LIVE",""],["UNDETERMINED_LANGUAGE",""],["UNMUTE",""],["UNRECOGNIZED_LANGUAGE",""],["VOLUME",""]])),t.Be(navigator.languages||[]),t),this.b=new pt,this.configure(this.g),(r=this).b.m(r.s,"buffering",function(){r.O&&Gl(r.F,r.s.Wb())}),r.O&&Gl(r.F,r.s.Wb()),r.b.m(d,"keydown",function(e){r.ka.add(e.key);var t=r.Ic();"Tab"==e.key&&(r.a.classList.add("shaka-keyboard-navigation"),$l(r),r.b.m(d,"mousedown",r.rb.bind(r))),"Escape"==e.key&&r.v.gb(),t&&r.ka.has("Tab")&&function(e,t){var n=e.H.filter(function(e){return e.classList.contains("shaka-displayed")})[0];if(n.childNodes.length){for(var i=n.firstElementChild;i&&i.classList.contains("shaka-hidden");)i=i.nextElementSibling;for(n=n.lastElementChild;n&&n.classList.contains("shaka-hidden");)n=n.previousElementSibling;var r=document.activeElement;e.ka.has("Shift")?r==i&&(t.preventDefault(),n.focus()):r==n&&(t.preventDefault(),i.focus())}}(r,e)}),r.b.m(d,"click",function(){return r.uc()}),r.b.m(r.c,"play",r.L.bind(r)),r.b.m(r.c,"pause",r.L.bind(r)),r.b.m(r.c,"ended",r.L.bind(r)),r.b.m(r.f,"mousemove",r.ia.bind(r)),r.b.m(r.f,"touchmove",r.ia.bind(r),{passive:!0}),r.b.m(r.f,"touchend",r.ia.bind(r),{passive:!0}),r.b.m(r.f,"mouseleave",r.sb.bind(r)),r.b.m(r.l,"caststatuschanged",function(){Zl(r)}),r.b.m(r.f,"keyup",function(e){var t=document.activeElement,n=!(!t||!t.classList)&&t.classList.contains("shaka-volume-bar"),i=t&&t.classList&&t.classList.contains("shaka-seek-bar");if(r.a.contains(t)&&r.ia(e),r.ka.delete(e.key),r.g.enableKeyboardPlaybackControls)switch(e.key){case"ArrowLeft":n||Ql(r,r.c.currentTime-5);break;case"ArrowRight":n||Ql(r,r.c.currentTime+5);break;case"Home":Ql(r,r.s.Ib().start);break;case"End":Ql(r,r.s.Ib().end);break;case" ":i&&Jl(r)}}),screen.orientation&&r.b.m(screen.orientation,"change",function(){r.c&&0!=r.c.readyState&&!r.l.ha()&&r.g.enableFullscreenOnRotation&&(screen.orientation.type.includes("landscape")&&!document.fullscreenElement?r.f.requestFullscreen({navigationUI:"hide"}):screen.orientation.type.includes("portrait")&&document.fullscreenElement&&document.exitFullscreen())}),this.ka=new Set,Zl(this),this.ya.Ia(.125)}_("shaka.ui.Element",Ol),Ol.prototype.destroy=function(){return this.eventManager.release(),this.video=this.player=this.localization=this.eventManager=this.controls=this.parent=null,Promise.resolve()},v(Dl,Ol),_("shaka.ui.RangeElement",Dl),Dl.prototype.setRange=function(e,t){this.bar.min=e,this.bar.max=t},Dl.prototype.onChangeStart=function(){},Dl.prototype.onChange=function(){},Dl.prototype.onChangeEnd=function(){},Dl.prototype.getValue=function(){return parseFloat(this.bar.value)},Dl.prototype.setValue=function(e){this.a||(this.bar.value=e)},_("shaka.ui.Utils.getFirstDescendantWithClassName",jl),_("shaka.ui.Utils.setDisplay",Gl),_("shaka.ui.Utils.removeAllChildren",Vl),v(zl,Dl),_("shaka.ui.SeekBar",zl),zl.prototype.destroy=function(){var t=this;return G(function e(){return q(e,function(e){if(1===e.o)return t.b&&(t.b.stop(),t.b=null),V(e,Dl.prototype.destroy.call(t),0)})})},zl.prototype.onChangeStart=function(){this.f=!this.video.paused,this.controls.ge(!0),this.video.pause()},zl.prototype.onChange=function(){this.video.duration&&(Hl(this),this.b.R(.125))},zl.prototype.onChangeEnd=function(){this.b.gb(),this.controls.ge(!1),this.f&&this.video.play()},O(ql,j),_("shaka.ui.Controls",ql);var Xl=new Map;function Yl(e,t){Xl.set(e,t)}function $l(e){var t=e.c.paused&&!e.Z,n=e.a.classList.contains("shaka-keyboard-navigation");t||e.Na||n||(n=e,d.matchMedia("hover: hover").matches&&n.Wa.some(function(e){return e.matches(":hover")}))?(ed(e),e.a.setAttribute("shown","true"),e.Y.stop()):e.Y.R(e.g.fadeDelay)}function Jl(e){e.O&&e.c.duration&&(e.s.ze(),e.c.paused?e.c.play():e.c.pause())}function Zl(e){var t=e.l.ha();e.dispatchEvent(new D("caststatuschanged",{Jg:t})),t?e.a.setAttribute("casting","true"):e.a.removeAttribute("casting")}function Ql(e,t){e.c.currentTime=t,e.Cb()&&ed(e)}function ed(e){if(e.j)if(e.j.setValue(e.c.currentTime),Hl(e.j),e.j.container.classList.contains("shaka-hidden"))for(var t=B(e.H),n=t.next();!n.done;n=t.next())n.value.classList.add("shaka-low-position");else for(var n=(t=B(e.H)).next();!n.done;n=t.next())n.value.classList.remove("shaka-low-position");e.dispatchEvent(new D("timeandseekrangeupdated"))}function td(e,t){var n=this;this.f=!1,this.c=[],this.l=e,this.j=t,this.a=gl("div"),this.a.classList.add("shaka-text-container"),this.a.style.textAlign="center",this.a.style.display="flex",this.a.style.flexDirection="column",this.a.style.alignItems="center",this.a.style.justifyContent="flex-end",this.j.appendChild(this.a),this.g=new ze(function(){nd(n)}).Ia(.25),this.b=new Map}function nd(t){function n(e){return t.c.includes(e)&&t.f&&e.startTime<=i&&e.endTime>=i}for(var e,i=t.l.currentTime,r=B(t.b.keys()),a=r.next();!a.done;a=r.next())n(a=a.value)||(e=t.b.get(a),t.a.removeChild(e),t.b.delete(a));for(r=new Set(t.b.values()),e=(a=B(Array.from(t.a.childNodes))).next();!e.done;e=a.next())e=e.value,r.has(e)||t.a.removeChild(e);for(a=(r=B(r=t.c.filter(function(e){return n(e)&&!t.b.has(e)}).sort(function(e,t){return e.startTime!=t.startTime?e.startTime-t.startTime:e.endTime-t.endTime}))).next();!a.done;a=r.next())!function(e,t,n){if(n.nestedCues.length){var i=gl("p");i.style.width="100%",rd(i,n,!1);for(var r=0;r<n.nestedCues.length;r++)id(i,n.nestedCues[r],!0);t.appendChild(i),e.b.set(n,i)}else e.b.set(n,id(t,n,!1))}(t,t.a,a.value)}function id(e,t,n){var i=gl("span");return n&&i.classList.add("shaka-nested-cue"),t.spacer?i.style.display="block":rd(i,t,!0),e.appendChild(i),i}function rd(e,t,n){var i,r=e.style;r.whiteSpace="pre-line",e.textContent=t.payload,n&&(r.backgroundColor=t.backgroundColor),r.color=t.color,r.direction=t.direction,t.backgroundImage&&(r.backgroundImage="url('"+t.backgroundImage+"')",r.backgroundRepeat="no-repeat",r.backgroundSize="contain",r.backgroundPosition="center",""==t.backgroundColor&&(r.backgroundColor="transparent")),t.backgroundImage&&t.region&&(e=In,i=t.region.widthUnits==e?"%":"px",r.height=t.region.height+(t.region.heightUnits==e?"%":"px"),r.width=t.region.width+i),r.justifyContent="before"==t.displayAlign?"flex-start":"center"==t.displayAlign?"center":"flex-end",t.nestedCues.length&&(r.display="flex",r.flexDirection="row",r.margin="0",r.alignItems=r.justifyContent,r.justifyContent="center"),n&&(r.maxWidth="100%"),r.fontFamily=t.fontFamily,r.fontWeight=t.fontWeight.toString(),r.fontSize=t.fontSize,r.fontStyle=t.fontStyle,t.line?1==t.lineInterpretation&&(r.position="absolute",t.writingMode==vn?t.lineAlign==yn?r.top=t.line+"%":"end"==t.lineAlign&&(r.bottom=t.line+"%"):"vertical-lr"==t.writingMode?t.lineAlign==yn?r.left=t.line+"%":"end"==t.lineAlign&&(r.right=t.line+"%"):t.lineAlign==yn?r.right=t.line+"%":"end"==t.lineAlign&&(r.left=t.line+"%")):t.region&&t.region.id&&!n&&(n=In,e=t.region.widthUnits==n?"%":"px",i=t.region.viewportAnchorUnits==n?"%":"px",r.height=t.region.height+(t.region.heightUnits==n?"%":"px"),r.width=t.region.width+e,r.position="absolute",r.top=t.region.viewportAnchorY+i,r.left=t.region.viewportAnchorX+i),r.lineHeight=t.lineHeight,t.position&&(t.writingMode==vn?r.paddingLeft=t.position:r.paddingTop=t.position),"line-left"==t.positionAlign?r.cssFloat="left":"line-right"==t.positionAlign&&(r.cssFloat="right"),r.textAlign=t.textAlign,r.textDecoration=t.textDecoration.join(" "),r.writingMode=t.writingMode,t.size&&(t.writingMode==vn?r.width=t.size+"%":r.height=t.size+"%")}function ad(e,t,n){this.c=e,this.b=od(),t.dataset.shakaPlayerContainer="",(t.ui=this).Te()&&t.classList.add("shaka-mobile"),this.a=new ql(e,t,n,this.b),this.configure({}),n.controls||e.configure("textDisplayFactory",function(){return new td(n,t)}),t.ui=this,n.ui=this}function od(){return{controlPanelElements:"time_and_duration spacer mute volume fullscreen overflow_menu".split(" "),overflowMenuButtons:["captions","quality","language","picture_in_picture","cast"],addSeekBar:!0,addBigPlayButton:!0,castReceiverAppId:"",clearBufferOnQualityChange:!0,showUnbufferedStart:!0,seekBarColors:{base:"rgba(255, 255, 255, 0.3)",buffered:"rgba(255, 255, 255, 0.54)",played:"rgb(255, 255, 255)"},volumeBarColors:{base:"rgba(255, 255, 255, 0.54)",level:"rgb(255, 255, 255)"},trackLabelFormat:ld,fadeDelay:0,doubleClickForFullscreen:!0,enableKeyboardPlaybackControls:!0,enableFullscreenOnRotation:!0}}function sd(){return G(function e(){var n,i,r,a,o,s,u;return q(e,function(e){switch(e.o){case 1:if(Gu(),!Os())return X.error("Shaka Player does not support this browser. Please see https://tinyurl.com/y7s4j9tr for the list of supported browsers."),ud("shaka-ui-load-failed"),e.return();if(n=document.querySelectorAll("[data-shaka-player-container]"),!(i=document.querySelectorAll("[data-shaka-player]")).length&&!n.length){e.C(2);break}if(i.length&&!n.length){for(var t=0;t<i.length;t++)(r=i[t]).ui||(a=document.createElement("div"),r.parentElement.replaceChild(a,r),a.appendChild(r),cd(a,r));e.C(2);break}o=0;case 4:if(!(o<n.length)){e.C(2);break}if((s=n[o]).ui){e.C(5);break}for(u=null,t=0;t<i.length;t++)if(i[t].parentElement==s){u=i[t];break}return u||((u=document.createElement("video")).setAttribute("playsinline",""),s.appendChild(u)),V(e,cd(s,u),5);case 5:o++,e.C(4);break;case 2:ud("shaka-ui-loaded"),x(e)}})})}function ud(e){var t=document.createEvent("CustomEvent");t.initCustomEvent(e,!1,!1,null),document.dispatchEvent(t)}function cd(a,o){return G(function e(){var t,n,i,r;return q(e,function(e){switch(e.o){case 1:n=new Rs(o),t=new ad(n,a,o),n="",a.dataset&&a.dataset.shakaPlayerCastReceiverId?n=a.dataset.shakaPlayerCastReceiverId:o.dataset&&o.dataset.shakaPlayerCastReceiverId&&(n=o.dataset.shakaPlayerCastReceiverId),n.length&&t.configure({castReceiverAppId:n}),o.controls&&t.a.tf(!0),(n=o.getAttribute("src"))&&((i=document.createElement("source")).setAttribute("src",n),o.appendChild(i),o.removeAttribute("src")),n=B(o.querySelectorAll("source")),i=n.next();case 2:if(i.done){e.C(0);break}return r=i.value,z(e,5),V(e,t.a.$a().load(r.getAttribute("src")),7);case 7:e.C(0);break;case 5:r=W(e),X.error("Error auto-loading asset",r);case 3:i=n.next(),e.C(2)}})})}ql.prototype.destroy=function(){var t=this;return G(function e(){return q(e,function(e){switch(e.o){case 1:if(t.b&&(t.b.release(),t.b=null),t.K&&(t.K.stop(),t.K=null),t.Y&&(t.Y.stop(),t.Y=null),t.v&&(t.v.stop(),t.v=null),t.ya&&(t.ya.stop(),t.ya=null),t.a&&(t.f.removeChild(t.a),t.a=null),t.l)return V(e,t.l.destroy(),3);e.C(2);break;case 3:t.l=null;case 2:if(t.wa)return V(e,t.wa.destroy(),5);e.C(4);break;case 5:t.wa=null;case 4:return t.s=null,t.B=null,t.c=null,t.La=null,t.ka.clear(),V(e,Promise.all(t.Ka.map(function(e){return e.destroy()})),6);case 6:if(t.Ka=[],t.j)return V(e,t.j.destroy(),0);e.C(0)}})})},ql.registerElement=Yl,ql.prototype.allowCast=ql.prototype.Kf=function(e){this.Ja=e,Zl(this)},ql.prototype.loadComplete=ql.prototype.Hg=function(){this.L()},ql.prototype.configure=function(e){var t;this.g=e,this.l.Ce(e.castReceiverAppId),this.j&&(this.j.destroy(),this.j=null),this.Ma&&(this.Ma.destroy(),this.Ma=null),this.a?(vl(this.a),this.f.removeChild(this.F)):((t=this).a=gl("div"),t.a.classList.add("shaka-controls-container"),t.f.appendChild(t.a),t.b.m(t.a,"touchstart",function(e){t.c.duration&&(t.Cb()?t.w=Date.now():(t.ia(e),e.preventDefault()))},{passive:!1}),t.b.m(t.a,"click",function(){t.O&&(t.Ic()?t.v.gb():Jl(t))}),t.b.m(t.a,"dblclick",function(){t.g.doubleClickForFullscreen&&t.oe()})),function(e){e.f.classList.add("shaka-video-container"),e.B.classList.add("shaka-video");var t=gl("div");t.classList.add("shaka-skim-container"),t.classList.add("shaka-fade-out-on-mouse-out"),e.a.appendChild(t),e.g.addBigPlayButton&&((t=gl("div")).classList.add("shaka-play-button-container"),e.a.appendChild(t),e.Ma=new Id(t,e)),e.F=gl("div"),e.F.classList.add("shaka-spinner-container"),e.f.appendChild(e.F);var n=gl("div");if(n.classList.add("shaka-spinner"),e.F.appendChild(n),(t=document.createElementNS("http://www.w3.org/2000/svg","svg")).setAttribute("class","shaka-spinner-svg"),t.setAttribute("viewBox","0 0 30 30"),n.appendChild(t),(n=document.createElementNS("http://www.w3.org/2000/svg","circle")).setAttribute("class","shaka-spinner-path"),n.setAttribute("cx","15"),n.setAttribute("cy","15"),n.setAttribute("r","14.5"),n.setAttribute("fill","none"),n.setAttribute("stroke-width","1"),n.setAttribute("stroke-miterlimit","10"),t.appendChild(n),function(e){e.na=gl("div"),e.na.classList.add("shaka-bottom-controls"),e.a.appendChild(e.na),e.J=gl("div"),e.J.classList.add("shaka-controls-button-panel"),e.J.classList.add("shaka-no-propagation"),e.J.classList.add("shaka-show-controls-on-mouse-over"),e.na.appendChild(e.J),e.b.m(e.J,"click",function(){e.uc()});for(var t=0;t<e.g.controlPanelElements.length;t++){var n=e.g.controlPanelElements[t];Xl.get(n)?(n=Xl.get(n),e.Ka.push(n.create(e.J,e))):X.ba("Unrecognized control panel element requested:",n)}}(e),e.H=Array.from(e.f.getElementsByClassName("shaka-settings-menu")),e.g.addSeekBar)e.j=new zl(e.na,e);else for(t=B(e.H),n=t.next();!n.done;n=t.next())n.value.classList.add("shaka-low-position");e.Wa=Array.from(e.f.getElementsByClassName("shaka-show-controls-on-mouse-over"))}(this),this.L();for(var n=(e=B(this.f.getElementsByClassName("shaka-no-propagation"))).next();!n.done;n=e.next()){n=n.value;function i(e){return e.stopPropagation()}this.b.m(n,"click",i),this.b.m(n,"dblclick",i)}},ql.prototype.setEnabledShakaControls=ql.prototype.ce=function(e){(this.O=e)?(Gl(this.a,!0),Gl(this.F,this.s.Wb()),this.B.tabIndex=-1,this.B.controls=!1):(Gl(this.a,!1),Gl(this.F,!1)),this.L()},ql.prototype.setSeeking=ql.prototype.ge=function(e){this.Z=e},ql.prototype.setEnabledNativeControls=ql.prototype.tf=function(e){this.B.controls=e,this.B.tabIndex=e?0:-1,e&&this.ce(!1)},ql.prototype.getCastProxy=ql.prototype.Xf=function(){return this.l},ql.prototype.getLocalization=ql.prototype.ig=function(){return this.La},ql.prototype.toggleFullScreen=ql.prototype.oe=function(){var n=this;return G(function e(){var t;return q(e,function(e){switch(e.o){case 1:if(document.fullscreenElement){document.exitFullscreen(),e.C(0);break}if(z(e,3),document.pictureInPictureElement)return V(e,document.exitPictureInPicture(),5);e.C(5);break;case 5:H(e,4);break;case 3:t=W(e),n.dispatchEvent(new D("error",{detail:t}));case 4:return V(e,n.f.requestFullscreen({navigationUI:"hide"}),0)}})})},ql.prototype.getVideoContainer=ql.prototype.zg=function(){return this.f},ql.prototype.getVideo=ql.prototype.sc=function(){return this.c},ql.prototype.getLocalVideo=ql.prototype.hg=function(){return this.B},ql.prototype.getPlayer=ql.prototype.$a=function(){return this.s},ql.prototype.getLocalPlayer=ql.prototype.gg=function(){return this.wa},ql.prototype.getControlsContainer=ql.prototype.$f=function(){return this.a},ql.prototype.getConfig=ql.prototype.Yf=function(){return this.g},ql.prototype.isSeeking=ql.prototype.Fg=function(){return this.Z},ql.prototype.isCastAllowed=ql.prototype.Dg=function(){return this.Ja},ql.prototype.getDisplayTime=ql.prototype.Le=function(){return this.j?this.j.getValue():this.c.currentTime},ql.prototype.setLastTouchEventTime=ql.prototype.uf=function(e){this.w=e},ql.prototype.anySettingsMenusAreOpen=ql.prototype.Ic=function(){return this.H.some(function(e){return e.classList.contains("shaka-displayed")})},ql.prototype.hideSettingsMenus=ql.prototype.uc=function(){this.v.gb()},ql.prototype.ia=function(e){"mousemove"==e.type&&(this.a.classList.remove("shaka-keyboard-navigation"),$l(this)),"touchstart"==e.type||"touchmove"==e.type||"touchend"==e.type||"keyup"==e.type?this.w=Date.now():this.w+1e3<Date.now()&&(this.w=null),this.w&&"mousemove"==e.type||(this.f.style.cursor="",this.Na=!0,this.v.stop(),this.Cb()||(ed(this),$l(this)),this.K.stop(),"touchend"!=e.type&&"keyup"!=e.type&&this.w||this.K.R(3))},ql.prototype.sb=function(){this.w||this.K.gb()},ql.prototype.L=function(){this.c.ended&&!this.c.paused&&this.c.pause(),$l(this)},ql.prototype.isOpaque=ql.prototype.Cb=function(){return!!this.O&&(null!=this.a.getAttribute("shown")||null!=this.a.getAttribute("casting"))},ql.prototype.rb=function(){this.b.xa(d,"mousedown")},_("shaka.ui.TextDisplayer",td),td.prototype.append=function(e){for(var t=[].concat(I(this.c)),n={},i=(e=B(e)).next();!i.done;n={cue:n.cue},i=e.next())n.cue=i.value,t.some(function(t){return function(e){return ln(e,t.cue)}}(n))||this.c.push(n.cue)},td.prototype.destroy=function(){this.j.removeChild(this.a),this.a=null,this.f=!1,this.c=[],this.g&&this.g.stop(),this.b.clear()},td.prototype.remove=function(t,n){return!!this.a&&(this.c=this.c.filter(function(e){return e.startTime<t||e.endTime>=n}),nd(this),!0)},td.prototype.isTextVisible=function(){return this.f},td.prototype.setTextVisibility=function(e){this.f=e},_("shaka.ui.Overlay",ad),ad.prototype.destroy=function(){var t=this;return G(function e(){return q(e,function(e){switch(e.o){case 1:if(t.a)return V(e,t.a.destroy(),3);e.C(2);break;case 3:t.a=null;case 2:if(t.c)return V(e,t.c.destroy(),5);e.C(0);break;case 5:t.c=null,x(e)}})})},ad.prototype.isMobile=ad.prototype.Te=function(){return!!/(?:iPhone|iPad|iPod|Android)/.test(navigator.userAgent)||Ct()&&1<navigator.maxTouchPoints},ad.prototype.getConfiguration=function(){var e=od();return Ts(e,this.b,od(),{},""),e},ad.prototype.configure=function(e,t){2==arguments.length&&"string"==typeof e&&(e=Ss(e,t)),Ts(this.b,e,od(),{},""),this.b.castReceiverAppId&&!this.b.overflowMenuButtons.includes("cast")&&this.b.overflowMenuButtons.push("cast"),this.a.configure(this.b),this.a.dispatchEvent(new D("uiupdated"))},ad.prototype.getPlayer=ad.prototype.$a=function(){return $n("ui.Overlay.getPlayer()","Please use getControls().getPlayer() instead."),this.a.$a()},ad.prototype.getControls=ad.prototype.Zf=function(){return this.a},ad.prototype.setEnabled=ad.prototype.uh=function(e){this.a.ce(e)};var ld=0;function dd(e,t,n,i,r,a,o){function s(e){return"variant"==e.type?e.audioRoles?e.audioRoles.join(", "):void 0:e.roles.join(", ")}var u=e.filter(function(e){return 1==e.active})[0],c=jl(t,"shaka-back-to-overflow-button");Vl(t),t.appendChild(c),c=new Map;for(var l=B(e),d=l.next();!d.done;d=l.next())d=d.value,c.has(d.language)||c.set(d.language,new Set),c.get(d.language).add(s(d));for(c=new Set,u=u?u.language+": "+s(u):"",l={},d=(e=B(e)).next();!d.done;l={ic:l.ic},d=e.next()){l.ic=d.value,d=l.ic.language;var h=s(l.ic),f=d+": "+h;if(!c.has(f)){c.add(f);var p=gl("button");p.addEventListener("click",function(e){return function(){n(e.ic)}}(l));var m=gl("span");switch(p.appendChild(m),m.textContent=function(e,t){if(!e&&!t)return"";switch(e){case"mul":return t.resolve("MULTIPLE_LANGUAGES");case"und":return t.resolve("UNDETERMINED_LANGUAGE");case"zxx":return t.resolve("NOT_APPLICABLE")}var n=ee(e);return e in Rl?Rl[e].h:n in Rl?Rl[n].h+" ("+e+")":t.resolve("UNRECOGNIZED_LANGUAGE")+" ("+e+")"}(d,a),o){case 1:h?m.textContent=h:(X.ba("Track #"+l.ic.id+" does not have a role, but the UI is configured to only show role."),m.textContent="?");break;case 2:h&&(m.textContent+=": "+h)}i&&f==u&&(p.appendChild(Bl()),m.classList.add("shaka-chosen-item"),p.setAttribute("aria-selected","true"),r.textContent=m.textContent),t.appendChild(p)}}}function hd(e,t){Ol.call(this,e,t);var n=this;this.f=this.controls.g,this.g=this.controls.a,this.c=[],this.b=gl("button"),this.b.classList.add("shaka-overflow-menu-button"),this.b.classList.add("shaka-no-propagation"),this.b.classList.add("material-icons-round"),this.b.textContent="more_vert",this.parent.appendChild(this.b),this.a=gl("div"),this.a.classList.add("shaka-overflow-menu"),this.a.classList.add("shaka-no-propagation"),this.a.classList.add("shaka-show-controls-on-mouse-over"),this.a.classList.add("shaka-settings-menu"),this.g.appendChild(this.a),function(e){for(var t=0;t<e.f.overflowMenuButtons.length;t++){var n=e.f.overflowMenuButtons[t];gd.get(n)?(n=gd.get(n),e.c.push(n.create(e.a,e.controls))):X.ba("Unrecognized overflow menu element requested:",n)}}(this);for(var i=this.controls.f.getElementsByClassName("shaka-back-to-overflow-button"),r=0;r<i.length;r++)this.eventManager.m(i[r],"click",function(){n.controls.uc(),Gl(n.a,!0),n.a.childNodes.length&&n.a.childNodes[0].focus(),$l(n.controls)});this.eventManager.m(this.localization,"locale-updated",function(){pd(n)}),this.eventManager.m(this.localization,"locale-changed",function(){pd(n)}),this.eventManager.m(this.controls,"submenuopen",function(){Gl(n.a,!1)}),this.eventManager.m(this.a,"touchstart",function(e){n.controls.uf(Date.now()),e.stopPropagation()}),this.eventManager.m(this.b,"click",function(){!function(e){{var t;e.controls.Ic()?e.controls.uc():(Gl(e.a,!0),$l(e.controls),t=function(e){return 0==e.classList.contains("shaka-hidden")},function(e,t){for(var n=B(e),i=n.next();!i.done;i=n.next())if(t(i.value))return 1}(e.a.childNodes,t)&&$(e.a.childNodes,t)[0].focus())}}(n)}),pd(this)}function fd(e,t){gd.set(e,t)}function pd(e){e.b.setAttribute("aria-label",e.localization.resolve("MORE_SETTINGS"))}function md(){}ad.TrackLabelFormat={LANGUAGE:ld,ROLE:1,LANGUAGE_ROLE:2},"complete"==document.readyState?Promise.resolve().then(sd):d.addEventListener("load",sd),v(hd,Ol),_("shaka.ui.OverflowMenu",hd),hd.prototype.destroy=function(){var t=this;return G(function e(){return q(e,function(e){switch(e.o){case 1:return t.g=null,V(e,Promise.all(t.c.map(function(e){return e.destroy()})),2);case 2:return t.c=[],V(e,Ol.prototype.destroy.call(t),0)}})})},hd.registerElement=fd,md.prototype.create=function(e,t){return new hd(e,t)},Yl("overflow_menu",new md);var gd=new Map;function vd(e,t,n){Ol.call(this,e,t);var i=this;!function(e,t){e.button=gl("button"),e.icon=gl("i"),e.icon.classList.add("material-icons-round"),e.icon.textContent=t,e.button.appendChild(e.icon);t=gl("label");t.classList.add("shaka-overflow-button-label"),e.nameSpan=gl("span"),t.appendChild(e.nameSpan),e.currentSelection=gl("span"),e.currentSelection.classList.add("shaka-current-selection-span"),t.appendChild(e.currentSelection),e.button.appendChild(t),e.parent.appendChild(e.button)}(this,n),function(e){e.menu=gl("div"),e.menu.classList.add("shaka-no-propagation"),e.menu.classList.add("shaka-show-controls-on-mouse-over"),e.menu.classList.add("shaka-settings-menu"),e.backButton=gl("button"),e.backButton.classList.add("shaka-back-to-overflow-button"),e.menu.appendChild(e.backButton);var t=gl("i");t.classList.add("material-icons-round"),t.textContent="arrow_back",e.backButton.appendChild(t),e.backSpan=gl("span"),e.backButton.appendChild(e.backSpan),e.controls.a.appendChild(e.menu)}(this),this.eventManager.m(this.button,"click",function(){i.controls.dispatchEvent(new D("submenuopen")),Gl(i.menu,!0),Kl(i.menu)})}function bd(e,t){vd.call(this,e,t,"language");var n=this;this.button.classList.add("shaka-language-button"),this.menu.classList.add("shaka-audio-languages"),this.eventManager.m(this.localization,"locale-updated",function(){Ed(n)}),this.eventManager.m(this.localization,"locale-changed",function(){Ed(n)}),this.eventManager.m(this.player,"trackschanged",function(){var e=0<n.player.Ub().length;Gl(n.button,e),yd(n)}),this.eventManager.m(this.player,"variantchanged",function(){yd(n)}),Ed(this),yd(this)}function yd(t){dd(t.player.Ub(),t.menu,function(e){t.player.cd(e.language,e.roles[0])},!0,t.currentSelection,t.localization,t.controls.g.trackLabelFormat),Kl(t.menu),t.controls.dispatchEvent(new D("languageselectionupdated"))}function Ed(e){e.backButton.setAttribute("aria-label",e.localization.resolve("BACK")),e.button.setAttribute("aria-label",e.localization.resolve("LANGUAGE")),e.nameSpan.textContent=e.localization.resolve("LANGUAGE"),e.backSpan.textContent=e.localization.resolve("LANGUAGE")}function wd(){}function Td(e,t){Ol.call(this,e,t);var n=this;this.button=gl("button"),this.parent.appendChild(this.button),this.eventManager.m(this.localization,"locale-updated",function(){Ad(n)}),this.eventManager.m(this.localization,"locale-changed",function(){Ad(n)}),this.eventManager.m(this.video,"play",function(){Ad(n)}),this.eventManager.m(this.video,"pause",function(){Ad(n)}),this.eventManager.m(this.button,"click",function(){Sd(n)?n.video.play():n.video.pause()})}function Sd(e){return e.video.paused&&!e.controls.Z}function Ad(e){e.button.setAttribute("aria-label",e.localization.resolve(Sd(e)?"PLAY":"PAUSE"))}function Id(e,t){Td.call(this,e,t);var n=this;this.button.classList.add("shaka-play-button"),this.button.classList.add("shaka-no-propagation"),kd(this),Ad(this),this.eventManager.m(this.video,"play",function(){kd(n)}),this.eventManager.m(this.video,"pause",function(){kd(n)})}function kd(e){Sd(e)?e.button.setAttribute("icon","play"):e.button.setAttribute("icon","pause")}function Cd(e,t){Ol.call(this,e,t);var i=this;this.b=this.controls.l,this.a=gl("button"),this.a.classList.add("shaka-cast-button"),this.a.setAttribute("aria-pressed","false"),this.c=gl("i"),this.c.classList.add("material-icons-round"),this.c.textContent="cast",this.a.appendChild(this.c);t=gl("label");t.classList.add("shaka-overflow-button-label"),this.g=gl("span"),t.appendChild(this.g),this.f=gl("span"),this.f.classList.add("shaka-current-selection-span"),t.appendChild(this.f),this.a.appendChild(t),this.parent.appendChild(this.a),Pd(this),xd(this),this.eventManager.m(this.localization,"locale-updated",function(){Pd(i)}),this.eventManager.m(this.localization,"locale-changed",function(){Pd(i)}),this.eventManager.m(this.a,"click",function(){var n;n=i,G(function e(){var t;return q(e,function(e){switch(e.o){case 1:if(n.b.ha()){n.b.yf(),e.C(0);break}return z(e,3),n.a.disabled=!0,V(e,n.b.cast(),5);case 5:n.a.disabled=!1,H(e,0);break;case 3:t=W(e),n.a.disabled=!1,8004!=t.code&&n.controls.dispatchEvent(new D("error",{detail:t})),x(e)}})})}),this.eventManager.m(this.controls,"caststatuschanged",function(){xd(i)})}function xd(e){var t=e.b.ye()&&e.controls.Ja,n=e.b.ha();Gl(e.a,t),e.c.textContent=n?"cast_connected":"cast",t&&(n?e.a.setAttribute("aria-pressed","true"):e.a.setAttribute("aria-pressed","false")),Nd(e)}function Nd(e){e.f.textContent=e.b.ha()?e.b.bd():e.localization.resolve("OFF")}function Pd(e){e.a.setAttribute("aria-label",e.localization.resolve("CAST")),e.g.textContent=e.localization.resolve("CAST"),Nd(e)}function Md(){}function Rd(e,t){Ol.call(this,e,t);var n=this;this.a=gl("button"),this.a.classList.add("material-icons-round"),this.a.classList.add("shaka-fast-forward-button"),this.a.textContent="fast_forward",this.parent.appendChild(this.a),Ld(this),this.eventManager.m(this.localization,"locale-updated",function(){Ld(n)}),this.eventManager.m(this.localization,"locale-changed",function(){Ld(n)}),this.eventManager.m(this.a,"click",function(){var e;n.video.duration&&(e=n.player.yd(),n.player.qe(e<0||4<e?1:2*e))})}function Ld(e){e.a.setAttribute("aria-label",e.localization.resolve("FAST_FORWARD"))}function Ud(){}function _d(e,t){Ol.call(this,e,t);var n=this;this.a=gl("button"),this.a.classList.add("shaka-fullscreen-button"),this.a.classList.add("material-icons-round"),document.fullscreenEnabled||this.a.classList.add("shaka-hidden"),this.a.textContent="fullscreen",this.parent.appendChild(this.a),Od(this),this.eventManager.m(this.localization,"locale-updated",function(){Od(n)}),this.eventManager.m(this.localization,"locale-changed",function(){Od(n)}),this.eventManager.m(this.a,"click",function(){n.controls.oe()}),this.eventManager.m(document,"fullscreenchange",function(){n.a.textContent=document.fullscreenElement?"fullscreen_exit":"fullscreen",Od(n)})}function Od(e){e.a.setAttribute("aria-label",e.localization.resolve(document.fullscreenElement?"EXIT_FULL_SCREEN":"FULL_SCREEN"))}function Dd(){}function Fd(e,t){Ol.call(this,e,t);var n=this;this.a=gl("button"),this.a.classList.add("shaka-mute-button"),this.a.classList.add("material-icons-round"),this.a.textContent="volume_up",this.parent.appendChild(this.a),jd(this),this.eventManager.m(this.localization,"locale-updated",function(){jd(n)}),this.eventManager.m(this.localization,"locale-changed",function(){jd(n)}),this.eventManager.m(this.a,"click",function(){n.video.muted=!n.video.muted}),this.eventManager.m(this.video,"volumechange",function(){jd(n),n.a.textContent=n.video.muted?"volume_off":"volume_up"})}function jd(e){e.a.setAttribute("aria-label",e.localization.resolve(e.video.muted?"UNMUTE":"MUTE"))}function Kd(){}function Bd(e,t){Ol.call(this,e,t);var i=this;this.g=this.controls.B,this.a=gl("button"),this.a.classList.add("shaka-pip-button"),this.c=gl("i"),this.c.classList.add("material-icons-round"),this.c.textContent="picture_in_picture_alt",this.a.appendChild(this.c);t=gl("label");t.classList.add("shaka-overflow-button-label"),this.f=gl("span"),this.f.textContent=this.localization.resolve("PICTURE_IN_PICTURE"),t.appendChild(this.f),this.b=gl("span"),this.b.classList.add("shaka-current-selection-span"),t.appendChild(this.b),this.a.appendChild(t),Gd(this),this.parent.appendChild(this.a),document.pictureInPictureEnabled&&!this.video.disablePictureInPicture||Gl(this.a,!1),this.eventManager.m(this.localization,"locale-updated",function(){Gd(i)}),this.eventManager.m(this.localization,"locale-changed",function(){Gd(i)}),this.eventManager.m(this.a,"click",function(){var n;n=i,G(function e(){var t;return q(e,function(e){switch(e.o){case 1:return z(e,2),document.pictureInPictureElement?V(e,document.exitPictureInPicture(),5):(document.fullscreenElement&&document.exitFullscreen(),V(e,n.video.requestPictureInPicture(),5));case 5:H(e,0);break;case 2:t=W(e),n.controls.dispatchEvent(new D("error",{detail:t})),x(e)}})})}),this.eventManager.m(this.g,"enterpictureinpicture",function(){i.c.textContent="branding_watermark",i.a.setAttribute("aria-label",i.localization.resolve("EXIT_PICTURE_IN_PICTURE")),i.b.textContent=i.localization.resolve("ON")}),this.eventManager.m(this.g,"leavepictureinpicture",function(){i.c.textContent="picture_in_picture_alt",i.a.setAttribute("aria-label",i.localization.resolve("ENTER_PICTURE_IN_PICTURE")),i.b.textContent=i.localization.resolve("OFF")}),this.eventManager.m(this.controls,"caststatuschanged",function(e){e.newStatus?document.pictureInPictureEnabled&&!i.video.disablePictureInPicture&&Gl(i.a,!1):document.pictureInPictureEnabled&&!i.video.disablePictureInPicture&&Gl(i.a,!0)}),this.eventManager.m(this.player,"trackschanged",function(){var t;t=i,G(function e(){return q(e,function(e){if(1===e.o){if(document.pictureInPictureEnabled&&!t.video.disablePictureInPicture)if(t.player&&t.player.Re()){if(Gl(t.a,!1),document.pictureInPictureElement)return V(e,document.exitPictureInPicture(),0)}else Gl(t.a,!0);else Gl(t.a,!1);e.C(0)}})})})}function Gd(e){e.f.textContent=e.localization.resolve("PICTURE_IN_PICTURE"),e.a.setAttribute("aria-label",e.localization.resolve(document.pictureInPictureElement?"EXIT_PICTURE_IN_PICTURE":"ENTER_PICTURE_IN_PICTURE")),e.b.textContent=e.localization.resolve(document.pictureInPictureElement?"ON":"OFF")}function Vd(){}function zd(e,t){Ol.call(this,e,t);var a=this;this.a=gl("button"),this.a.classList.add("shaka-current-time"),Hd(this,"0:00"),this.parent.appendChild(this.a),this.eventManager.m(this.a,"click",function(){a.player.W()&&(a.video.currentTime=a.player.Ib().end)}),this.eventManager.m(this.controls,"timeandseekrangeupdated",function(){var e=a.controls.Z,t=a.controls.Le(),n=a.video.duration,i=a.player.Ib(),r=i.end-i.start;a.player.W()?(n=3600<=r,1<=(t=Math.max(0,Math.floor(i.end-t)))||e?(Hd(a,"- "+Wd(t,n)),a.a.disabled=!1):(Hd(a,a.localization.resolve("LIVE")),a.a.disabled=!0)):(t=Wd(t,e=3600<=n),n&&(t+=" / "+Wd(n,e)),Hd(a,t),a.a.disabled=!0)}),this.eventManager.m(this.player,"trackschanged",function(){a.player.W()&&a.a.setAttribute("aria-label",a.localization.resolve("SKIP_TO_LIVE"))})}function Hd(e,t){t!=e.a.textContent&&(e.a.textContent=t)}function Wd(e,t){var n=Math.floor(e/3600),i=Math.floor(e/60%60),e=Math.floor(e%60);return e<10&&(e="0"+e),e=i+":"+e,t&&(i<10&&(e="0"+e),e=n+":"+e),e}function qd(){}function Xd(e,t){vd.call(this,e,t,"settings");var n=this;this.button.classList.add("shaka-resolution-button"),this.menu.classList.add("shaka-resolutions"),this.eventManager.m(this.localization,"locale-updated",function(){$d(n)}),this.eventManager.m(this.localization,"locale-changed",function(){$d(n)}),this.eventManager.m(this.player,"variantchanged",function(){Yd(n)}),this.eventManager.m(this.player,"trackschanged",function(){Yd(n)}),this.eventManager.m(this.player,"abrstatuschanged",function(){Yd(n)}),Yd(this),$d(this)}function Yd(i){var r,e,a,n=i.player.Ub();n.length&&!n[0].height?(Gl(i.menu,!1),Gl(i.button,!1)):(Gl(i.button,!0),n.sort(function(e,t){return t.height-e.height}),(r=n.find(function(e){return e.active}))&&(n=n.filter(function(e){return e.language==r.language&&e.channelsCount==r.channelsCount})),n=n.filter(function(t,e){return n.findIndex(function(e){return e.height==t.height})==e}),e=jl(i.menu,"shaka-back-to-overflow-button"),Vl(i.menu),i.menu.appendChild(e),a=i.player.getConfiguration().abr.enabled,n.forEach(function(e){var t=gl("button");t.classList.add("explicit-resolution"),i.eventManager.m(t,"click",i.b.bind(i,e));var n=gl("span");n.textContent=e.height+"p",t.appendChild(n),a||e!=r||(t.setAttribute("aria-selected","true"),t.appendChild(Bl()),n.classList.add("shaka-chosen-item"),i.currentSelection.textContent=n.textContent),i.menu.appendChild(t)}),(e=gl("button")).classList.add("shaka-enable-abr-button"),i.eventManager.m(e,"click",function(){this.player.configure({abr:{enabled:!0}}),Yd(this)}.bind(i)),i.a=gl("span"),i.a.classList.add("shaka-auto-span"),i.a.textContent=i.localization.resolve("AUTO_QUALITY"),e.appendChild(i.a),a&&(e.setAttribute("aria-selected","true"),e.appendChild(Bl()),i.a.classList.add("shaka-chosen-item"),i.currentSelection.textContent=i.localization.resolve("AUTO_QUALITY")),i.menu.appendChild(e),Kl(i.menu),i.controls.dispatchEvent(new D("resolutionselectionupdated")))}function $d(e){e.button.setAttribute("aria-label",e.localization.resolve("RESOLUTION")),e.backButton.setAttribute("aria-label",e.localization.resolve("RESOLUTION")),e.backSpan.textContent=e.localization.resolve("RESOLUTION"),e.nameSpan.textContent=e.localization.resolve("RESOLUTION"),e.a.textContent=e.localization.resolve("AUTO_QUALITY"),e.player.getConfiguration().abr.enabled&&(e.currentSelection.textContent=e.localization.resolve("AUTO_QUALITY"))}function Jd(){}function Zd(e,t){Ol.call(this,e,t);var n=this;this.a=gl("button"),this.a.classList.add("material-icons-round"),this.a.classList.add("shaka-rewind-button"),this.a.textContent="fast_rewind",this.parent.appendChild(this.a),Qd(this),this.eventManager.m(this.localization,"locale-updated",function(){Qd(n)}),this.eventManager.m(this.localization,"locale-changed",function(){Qd(n)}),this.eventManager.m(this.a,"click",function(){var e;n.video.duration&&(e=n.player.yd(),n.player.qe(0<e||e<-4?-1:2*e))})}function Qd(e){e.a.setAttribute("aria-label",e.localization.resolve("REWIND"))}function eh(){}function th(e,t){Td.call(this,e,t);var n=this;this.button.classList.add("shaka-small-play-button"),this.button.classList.add("material-icons-round"),nh(this),Ad(this),this.eventManager.m(this.video,"play",function(){nh(n)}),this.eventManager.m(this.video,"pause",function(){nh(n)})}function nh(e){e.button.textContent=Sd(e)?"play_arrow":"pause"}function ih(){}function rh(e,t){Ol.call(this,e,t);t=gl("div");t.classList.add("shaka-spacer"),t.setAttribute("aria-hidden",!0),this.parent.appendChild(t)}function ah(){}function oh(e,t){vd.call(this,e,t,"closed_caption");var n=this;this.button.classList.add("shaka-caption-button"),this.menu.classList.add("shaka-text-languages"),this.player&&this.player.bb()?this.button.setAttribute("aria-pressed","true"):this.button.setAttribute("aria-pressed","false"),e=this,(t=gl("button")).setAttribute("aria-selected","true"),e.menu.appendChild(t),t.appendChild(Bl()),e.a=gl("span"),e.a.classList.add("shaka-auto-span"),t.appendChild(e.a),this.eventManager.m(this.localization,"locale-updated",function(){ch(n),uh(n)}),this.eventManager.m(this.localization,"locale-changed",function(){ch(n),uh(n)}),this.eventManager.m(this.player,"texttrackvisibility",function(){sh(n),n.player.bb()&&lh(n)}),this.eventManager.m(this.player,"textchanged",function(){uh(n)}),this.eventManager.m(this.player,"trackschanged",function(){lh(n)}),sh(this),ch(this),uh(this)}function sh(e){e.player.bb()?(e.icon.classList.add("shaka-captions-on"),e.icon.classList.remove("shaka-captions-off"),e.button.setAttribute("aria-pressed","true")):(e.icon.classList.add("shaka-captions-off"),e.icon.classList.remove("shaka-captions-on"),e.button.setAttribute("aria-pressed","false")),e.controls.dispatchEvent(new D("captionselectionupdated"))}function uh(i){var e=i.player.ib();dd(e,i.menu,function(e){return t=i,n=e,G(function e(){return q(e,function(e){switch(e.o){case 1:return V(e,t.player.je(!0),2);case 2:t.player&&t.player.dd(n.language,n.roles[0]),x(e)}})});var t,n},i.player.bb(),i.currentSelection,i.localization,i.controls.g.trackLabelFormat),(e=gl("button")).classList.add("shaka-turn-captions-off-button"),i.eventManager.m(e,"click",function(){i.player.je(!1).catch(function(){}),uh(i)}),e.appendChild(i.a),i.menu.appendChild(e),i.player.bb()||(e.setAttribute("aria-selected","true"),e.appendChild(Bl()),i.a.classList.add("shaka-chosen-item"),i.currentSelection.textContent=i.localization.resolve("OFF")),Kl(i.menu),i.controls.dispatchEvent(new D("captionselectionupdated"))}function ch(e){e.button.setAttribute("aria-label",e.localization.resolve("CAPTIONS")),e.backButton.setAttribute("aria-label",e.localization.resolve("BACK")),e.nameSpan.textContent=e.localization.resolve("CAPTIONS"),e.backSpan.textContent=e.localization.resolve("CAPTIONS"),e.a.textContent=e.localization.resolve("OFF")}function lh(e){var t=0<e.player.ib().length;Gl(e.button,t),uh(e)}function dh(){}function hh(e,t){Dl.call(this,e,t,["shaka-volume-bar-container"],["shaka-volume-bar"]);var n=this;this.b=this.controls.g,this.eventManager.m(this.video,"volumechange",function(){return fh(n)}),this.eventManager.m(this.localization,"locale-updated",function(){return ph(n)}),this.eventManager.m(this.localization,"locale-changed",function(){return ph(n)}),fh(this),ph(this)}function fh(e){e.video.muted?e.setValue(0):e.setValue(e.video.volume);var t=e.b.volumeBarColors,n=["to right"];n.push(t.level+100*e.getValue()+"%"),n.push(t.base+100*e.getValue()+"%"),n.push(t.base+"100%"),e.container.style.background="linear-gradient("+n.join(",")+")"}function ph(e){e.bar.setAttribute("aria-label",e.localization.resolve("VOLUME"))}function mh(){}v(vd,Ol),_("shaka.ui.SettingsMenu",vd),v(bd,vd),_("shaka.ui.AudioLanguageSelection",bd),wd.prototype.create=function(e,t){return new bd(e,t)},fd("language",new wd),v(Td,Ol),_("shaka.ui.PlayButton",Td),v(Id,Td),_("shaka.ui.BigPlayButton",Id),v(Cd,Ol),_("shaka.ui.CastButton",Cd),Md.prototype.create=function(e,t){return new Cd(e,t)},fd("cast",new Md),v(Rd,Ol),_("shaka.ui.FastForwardButton",Rd),Ud.prototype.create=function(e,t){return new Rd(e,t)},Yl("fast_forward",new Ud),v(_d,Ol),_("shaka.ui.FullscreenButton",_d),Dd.prototype.create=function(e,t){return new _d(e,t)},Yl("fullscreen",new Dd),v(Fd,Ol),_("shaka.ui.MuteButton",Fd),Kd.prototype.create=function(e,t){return new Fd(e,t)},Yl("mute",new Kd),v(Bd,Ol),_("shaka.ui.PipButton",Bd),Vd.prototype.create=function(e,t){return new Bd(e,t)},fd("picture_in_picture",new Vd),v(zd,Ol),_("shaka.ui.PresentationTimeTracker",zd),qd.prototype.create=function(e,t){return new zd(e,t)},Yl("time_and_duration",new qd),v(Xd,vd),_("shaka.ui.ResolutionSelection",Xd),Xd.prototype.b=function(e){this.player.configure({abr:{enabled:!1}}),this.player.qf(e,this.controls.g.clearBufferOnQualityChange)},Jd.prototype.create=function(e,t){return new Xd(e,t)},fd("quality",new Jd),v(Zd,Ol),_("shaka.ui.RewindButton",Zd),eh.prototype.create=function(e,t){return new Zd(e,t)},Yl("rewind",new eh),v(th,Td),_("shaka.ui.SmallPlayButton",th),ih.prototype.create=function(e,t){return new th(e,t)},Yl("play_pause",new ih),v(rh,Ol),_("shaka.ui.Spacer",rh),ah.prototype.create=function(e,t){return new rh(e,t)},Yl("spacer",new ah),v(oh,vd),_("shaka.ui.TextSelection",oh),dh.prototype.create=function(e,t){return new oh(e,t)},fd("captions",new dh),v(hh,Dl),_("shaka.ui.VolumeBar",hh),hh.prototype.onChange=function(){this.video.volume=this.getValue(),this.video.muted=0==this.video.volume},mh.prototype.create=function(e,t){return new hh(e,t)},Yl("volume",new mh)}.call(t,e,e,void 0),"undefined"!=typeof exports)for(var n in t.shaka)exports[n]=t.shaka[n];else"function"==typeof define&&define.amd?define(function(){return t.shaka}):e.shaka=t.shaka}();