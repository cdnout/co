import{defaults as defaults$3,Element,canvasHelpers,elements,helpers as helpers$2,controllers,scaleService,LinearScaleBase,Tooltip}from"chart.js";function _defineProperty(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function ownKeys(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,r)}return i}function _objectSpread2(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(i,!0).forEach(function(e){_defineProperty(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):ownKeys(i).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_nonIterableRest()}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _iterableToArrayLimit(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var i=[],r=!0,o=!1,a=void 0;try{for(var n,l=t[Symbol.iterator]();!(r=(n=l.next()).done)&&(i.push(n.value),!e||i.length!==e);r=!0);}catch(t){o=!0,a=t}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return i}}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function gaussian(t){return 1/Math.sqrt(2*Math.PI)*Math.exp(-.5*t*t)}function mean(t){var e=t.length;if(0===e)return NaN;for(var i=0,r=-1;++r<e;)i+=(t[r]-i)/(r+1);return i}function variance(t){var e=t.length;if(e<1)return NaN;if(1===e)return 0;for(var i=mean(t),r=-1,o=0;++r<e;){var a=t[r]-i;o+=a*a}return o/(e-1)}function ascending(t,e){return t-e}function quantiles(t,e){var i=(t=t.slice().sort(ascending)).length-1;return e.map(function(e){if(0===e)return t[0];if(1===e)return t[i];var r=1+e*i,o=Math.floor(r),a=r-o,n=t[o-1];return 0===a?n:n+a*(t[o]-n)})}function iqr(t){var e=quantiles(t,[.25,.75]);return e[1]-e[0]}function nrd(t){var e=iqr(t)/1.34;return 1.06*Math.min(Math.sqrt(variance(t)),e)*Math.pow(t.length,-.2)}function functor(t){return"function"==typeof t?t:function(){return t}}function kde(){var t=gaussian,e=[],i=nrd;function r(r,o){var a=i.call(this,e);return r.map(function(i){for(var r=-1,o=0,n=e.length;++r<n;)o+=t((i-e[r])/a);return[i,o/a/n]})}return r.kernel=function(e){return arguments.length?(t=e,r):t},r.sample=function(t){return arguments.length?(e=t,r):e},r.bandwidth=function(t){return arguments.length?(i=functor(t),r):i},r}function quantilesType7(t){var e=t.length-1,i=function(i){var r=1+i*e,o=Math.floor(r),a=r-o,n=t[o-1];return 0===a?n:n+a*(t[o]-n)};return{min:t[0],q1:i(.25),median:i(.5),q3:i(.75),max:t[e]}}function fivenum(t){var e=t.length,i=Math.floor((e+3)/2)/2,r=function(e){return.5*(t[Math.floor(e)-1]+t[Math.ceil(e)-1])};return{min:t[0],q1:r(i),median:r((e+1)/2),q3:r(e+1-i),max:t[e-1]}}function whiskers(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1.5,r=t.q3-t.q1,o="number"==typeof i&&i>0,a=o?Math.max(t.min,t.q1-i*r):t.min,n=o?Math.min(t.max,t.q3+i*r):t.max;if(Array.isArray(e)){for(var l=0;l<e.length;l++){var s=e[l];if(s>=a){a=s;break}}for(var u=e.length-1;u>=0;u--){var c=e[u];if(c<=n){n=c;break}}}return{whiskerMin:a,whiskerMax:n}}var defaultStatsOptions={coef:1.5,quantiles:7};function determineStatsOptions(t){var e=null==t||"number"!=typeof t.coef?defaultStatsOptions.coef:t.coef,i=null==t?null:t.quantiles;return{coef:e,quantiles:"function"==typeof i?i:"hinges"===i||"fivenum"===i?fivenum:quantilesType7}}function boxplotStats(t,e){if(0===t.length)return{min:NaN,max:NaN,median:NaN,q1:NaN,q3:NaN,whiskerMin:NaN,whiskerMax:NaN,outliers:[]};(t=t.filter(function(t){return"number"==typeof t&&!isNaN(t)})).sort(function(t,e){return t-e});var i=determineStatsOptions(e),r=i.quantiles,o=i.coef,a=r(t),n=whiskers(a,t,o),l=n.whiskerMin,s=n.whiskerMax;return a.outliers=t.filter(function(t){return t<l||t>s}),a.whiskerMin=l,a.whiskerMax=s,a}function violinStats(t,e){if(0===t.length)return{};(t=t.filter(function(t){return"number"==typeof t&&!isNaN(t)})).sort(function(t,e){return t-e});var i=(0,determineStatsOptions(e).quantiles)(t);return i.kde=kde().sample(t),i}function asBoxPlotStats(t,e){if(!t)return null;if("number"==typeof t.median&&"number"==typeof t.q1&&"number"==typeof t.q3){if(void 0===t.whiskerMin){var i=determineStatsOptions(e).coef,r=whiskers(t,Array.isArray(t.items)?t.items.slice().sort(function(t,e){return t-e}):null,i),o=r.whiskerMin,a=r.whiskerMax;t.whiskerMin=o,t.whiskerMax=a}return t}return Array.isArray(t)?(void 0===t.__stats&&(t.__stats=boxplotStats(t,e)),t.__stats):void 0}function asViolinStats(t,e){return t?"number"!=typeof t.median||"function"!=typeof t.kde&&!Array.isArray(t.coords)?Array.isArray(t)?(void 0===t.__kde&&(t.__kde=violinStats(t,e)),t.__kde):void 0:t:null}function asValueStats(t,e,i,r){return"number"==typeof t[e]&&"number"==typeof t[i]?t:Array.isArray(t)&&0!==t.length?asBoxPlotStats(t,r):void 0}function getRightValue(t,e){if(!t)return t;if("number"==typeof t||"string"==typeof t)return Number(t);var i=asBoxPlotStats(t,e);return i?i.median:t}var commonScaleOptions={ticks:_objectSpread2({minStats:"min",maxStats:"max"},defaultStatsOptions)};function commonDataLimits(t){var e=this,i=this.chart,r=this.isHorizontal(),o=this.options.ticks,a=o.minStats,n=o.maxStats;this.min=null,this.max=null,i.data.datasets.forEach(function(o,l){var s=i.getDatasetMeta(l);i.isDatasetVisible(l)&&function(t){return r?t.xAxisID===e.id:t.yAxisID===e.id}(s)&&o.data.forEach(function(i,r){if(null!=i&&!s.data[r].hidden){var o,l,u=asValueStats(i,a,n,e.options.ticks);if(u)o=u[a],l=u[n];else{var c=+e.getRightValue(i);if(isNaN(c))return;o=l=c}(null===e.min||o<e.min)&&(e.min=o),(null===e.max||l>e.max)&&(e.max=l),t&&t(u)}})})}function rnd(t){return void 0===t&&(t=Date.now()),function(){return(t=(9301*t+49297)%233280)/233280}}var defaults=_objectSpread2({},defaults$3.global.elements.rectangle,{borderWidth:1,outlierRadius:2,outlierColor:defaults$3.global.elements.rectangle.backgroundColor,lowerColor:defaults$3.global.elements.rectangle.lowerColor,medianColor:null,itemRadius:0,itemStyle:"circle",itemBackgroundColor:defaults$3.global.elements.rectangle.backgroundColor,itemBorderColor:defaults$3.global.elements.rectangle.borderColor,hitPadding:2,outlierHitRadius:4,tooltipDecimals:2}),ArrayElementBase=Element.extend({isVertical:function(){return void 0!==this._view.width},draw:function(){},_drawItems:function(t,e,i,r){if(!(t.itemRadius<=0||!e.items||e.items.length<=0)){i.save(),i.strokeStle=t.itemBorderColor,i.fillStyle=t.itemBackgroundColor;var o=rnd(1e3*this._datasetIndex+this._index);r?e.items.forEach(function(e){canvasHelpers.drawPoint(i,t.itemStyle,t.itemRadius,t.x-t.width/2+o()*t.width,e)}):e.items.forEach(function(e){canvasHelpers.drawPoint(i,t.itemStyle,t.itemRadius,e,t.y-t.height/2+o()*t.height)}),i.restore()}},_drawOutliers:function(t,e,i,r){t.outlierRadius<=0||!e.outliers||0===e.outliers.length||(i.fillStyle=t.outlierColor,i.beginPath(),r?e.outliers.forEach(function(e){i.arc(t.x,e,t.outlierRadius,0,2*Math.PI)}):e.outliers.forEach(function(e){i.arc(e,t.y,t.outlierRadius,0,2*Math.PI)}),i.fill(),i.closePath())},_getBounds:function(){return{left:0,top:0,right:0,bottom:0}},_getHitBounds:function(){var t=this._view.hitPadding,e=this._getBounds();return{left:e.left-t,top:e.top-t,right:e.right+t,bottom:e.bottom+t}},height:function(){return 0},inRange:function(t,e){return!!this._view&&(this._boxInRange(t,e)||this._outlierIndexInRange(t,e)>=0)},inLabelRange:function(t,e){if(!this._view)return!1;var i=this._getHitBounds();return this.isVertical()?t>=i.left&&t<=i.right:e>=i.top&&e<=i.bottom},inXRange:function(t){var e=this._getHitBounds();return t>=e.left&&t<=e.right},inYRange:function(t){var e=this._getHitBounds();return t>=e.top&&t<=e.bottom},_outlierIndexInRange:function(t,e){var i=this._view,r=i.outlierHitRadius,o=this._getOutliers(),a=this.isVertical();if(a&&Math.abs(t-i.x)>r||!a&&Math.abs(e-i.y)>r)return-1;for(var n=a?e:t,l=0;l<o.length;l++)if(Math.abs(o[l]-n)<=r)return l;return-1},_boxInRange:function(t,e){var i=this._getHitBounds();return t>=i.left&&t<=i.right&&e>=i.top&&e<=i.bottom},getCenterPoint:function(){var t=this._view;return{x:t.x,y:t.y}},getArea:function(){return 0},_getOutliers:function(){return[]},tooltipPosition:function(t,e){if(!t)return this.getCenterPoint();delete e._tooltipOutlier;var i=this._view,r=this._outlierIndexInRange(t.x,t.y);return r<0?this.getCenterPoint():(e._tooltipOutlier=r,this.isVertical()?{x:i.x,y:this._getOutliers()[r]}:{x:this._getOutliers()[r],y:i.y})}});function transitionBoxPlot(t,e,i,r){for(var o=0,a=Object.keys(i);o<a.length;o++){var n=a[o],l=i[n],s=t[n];if(s!==l)if("number"!=typeof l){if(Array.isArray(l))for(var u=e[n],c=Math.min(l.length,s.length),h=0;h<c;++h)u[h]=s[h]+(l[h]-s[h])*r}else e[n]=s+(l-s)*r}}defaults$3.global.elements.boxandwhiskers=_objectSpread2({},defaults);var BoxAndWiskers=elements.BoxAndWhiskers=ArrayElementBase.extend({transition:function(t){var e=Element.prototype.transition.call(this,t),i=this._model,r=this._start,o=this._view;return i&&1!==t?null==r.boxplot?e:(i.boxplot===o.boxplot&&(o.boxplot=helpers$2.clone(o.boxplot)),transitionBoxPlot(r.boxplot,o.boxplot,i.boxplot,t),e):e},draw:function(){var t=this._chart.ctx,e=this._view,i=e.boxplot,r=this.isVertical();t.save(),t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor,t.lineWidth=e.borderWidth,this._drawBoxPlot(e,i,t,r),this._drawOutliers(e,i,t,r),t.restore(),this._drawItems(e,i,t,r)},_drawBoxPlot:function(t,e,i,r){r?this._drawBoxPlotVert(t,e,i):this._drawBoxPlotHoriz(t,e,i)},_drawBoxPlotVert:function(t,e,i){var r=t.x,o=t.width,a=r-o/2;e.q3>e.q1?i.fillRect(a,e.q1,o,e.q3-e.q1):i.fillRect(a,e.q3,o,e.q1-e.q3),i.save(),t.medianColor&&(i.strokeStyle=t.medianColor),i.beginPath(),i.moveTo(a,e.median),i.lineTo(a+o,e.median),t.lowerColor&&(i.fillStyle=t.lowerColor,e.q3>e.q1?i.fillRect(a,e.median,o,e.q3-e.median):i.fillRect(a,e.median,o,e.q1-e.median)),i.closePath(),i.stroke(),i.restore(),e.q3>e.q1?i.strokeRect(a,e.q1,o,e.q3-e.q1):i.strokeRect(a,e.q3,o,e.q1-e.q3),i.beginPath(),i.moveTo(a,e.whiskerMin),i.lineTo(a+o,e.whiskerMin),i.moveTo(r,e.whiskerMin),i.lineTo(r,e.q1),i.moveTo(a,e.whiskerMax),i.lineTo(a+o,e.whiskerMax),i.moveTo(r,e.whiskerMax),i.lineTo(r,e.q3),i.closePath(),i.stroke()},_drawBoxPlotHoriz:function(t,e,i){var r=t.y,o=t.height,a=r-o/2;e.q3>e.q1?i.fillRect(e.q1,a,e.q3-e.q1,o):i.fillRect(e.q3,a,e.q1-e.q3,o),i.save(),t.medianColor&&(i.strokeStyle=t.medianColor),i.beginPath(),i.moveTo(e.median,a),i.lineTo(e.median,a+o),i.closePath(),i.stroke(),i.restore(),e.q3>e.q1?i.strokeRect(e.q1,a,e.q3-e.q1,o):i.strokeRect(e.q3,a,e.q1-e.q3,o),i.beginPath(),i.moveTo(e.whiskerMin,a),i.lineTo(e.whiskerMin,a+o),i.moveTo(e.whiskerMin,r),i.lineTo(e.q1,r),i.moveTo(e.whiskerMax,a),i.lineTo(e.whiskerMax,a+o),i.moveTo(e.whiskerMax,r),i.lineTo(e.q3,r),i.closePath(),i.stroke()},_getBounds:function(){var t=this._view,e=this.isVertical(),i=t.boxplot;if(!i)return{left:0,top:0,right:0,bottom:0};if(e){var r=t.x,o=t.width,a=r-o/2;return{left:a,top:i.whiskerMax,right:a+o,bottom:i.whiskerMin}}var n=t.y,l=t.height,s=n-l/2;return{left:i.whiskerMin,top:s,right:i.whiskerMax,bottom:s+l}},height:function(){var t=this._view;return t.base-Math.min(t.boxplot.q1,t.boxplot.q3)},getArea:function(){var t=this._view,e=Math.abs(t.boxplot.q3-t.boxplot.q1);return this.isVertical()?e*t.width:e*t.height},_getOutliers:function(){return this._view.boxplot&&this._view.boxplot.outliers||[]}});function transitionViolin(t,e,i,r){for(var o=0,a=Object.keys(i);o<a.length;o++){var n=a[o],l=i[n],s=t[n];if(s!==l)if("number"!=typeof l){if("coords"===n)for(var u=e[n],c=Math.min(l.length,s.length),h=0;h<c;++h)u[h].v=s[h].v+(l[h].v-s[h].v)*r,u[h].estimate=s[h].estimate+(l[h].estimate-s[h].estimate)*r}else e[n]=s+(l-s)*r}}defaults$3.global.elements.violin=_objectSpread2({points:100},defaults);var Violin=elements.Violin=ArrayElementBase.extend({transition:function(t){var e=Element.prototype.transition.call(this,t),i=this._model,r=this._start,o=this._view;return i&&1!==t?null==r.violin?e:(i.violin===o.violin&&(o.violin=helpers$2.clone(o.violin)),transitionViolin(r.violin,o.violin,i.violin,t),e):e},draw:function(){var t=this._chart.ctx,e=this._view,i=e.violin,r=this.isVertical();t.save(),t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor,t.lineWidth=e.borderWidth;var o=i.coords;if(canvasHelpers.drawPoint(t,"rectRot",5,e.x,e.y),t.stroke(),t.beginPath(),r){var a=e.x,n=e.width/2/i.maxEstimate;t.moveTo(a,i.min),o.forEach(function(e){var i=e.v,r=e.estimate;t.lineTo(a-r*n,i)}),t.lineTo(a,i.max),t.moveTo(a,i.min),o.forEach(function(e){var i=e.v,r=e.estimate;t.lineTo(a+r*n,i)}),t.lineTo(a,i.max)}else{var l=e.y,s=e.height/2/i.maxEstimate;t.moveTo(i.min,l),o.forEach(function(e){var i=e.v,r=e.estimate;t.lineTo(i,l-r*s)}),t.lineTo(i.max,l),t.moveTo(i.min,l),o.forEach(function(e){var i=e.v,r=e.estimate;t.lineTo(i,l+r*s)}),t.lineTo(i.max,l)}t.stroke(),t.fill(),t.closePath(),this._drawOutliers(e,i,t,r),t.restore(),this._drawItems(e,i,t,r)},_getBounds:function(){var t=this._view,e=this.isVertical(),i=t.violin;if(e){var r=t.x,o=t.width,a=r-o/2;return{left:a,top:i.max,right:a+o,bottom:i.min}}var n=t.y,l=t.height,s=n-l/2;return{left:i.min,top:s,right:i.max,bottom:s+l}},height:function(){var t=this._view;return t.base-Math.min(t.violin.min,t.violin.max)},getArea:function(){var t=this._view,e=Math.abs(t.violin.max-t.violin.min);return this.isVertical()?e*t.width:e*t.height},_getOutliers:function(){return this._view.violin.outliers||[]}}),verticalDefaults={scales:{yAxes:[{type:"arrayLinear"}]}},horizontalDefaults={scales:{xAxes:[{type:"arrayLinear"}]}};function toFixed(t){var e=this._chart.config.options.tooltipDecimals;return null==e||"number"!=typeof e||e<0?t:Number.parseFloat(t).toFixed(e)}var configKeys=["outlierRadius","itemRadius","itemStyle","itemBackgroundColor","itemBorderColor","outlierColor","medianColor","hitPadding","outlierHitRadius","lowerColor"],configKeyIsColor=[!1,!1,!1,!0,!0,!0,!0,!1,!1,!0],array={_elementOptions:function(){return{}},updateElement:function(t,e,i){var r=this.getDataset(),o=t.custom||{},a=this._elementOptions();controllers.bar.prototype.updateElement.call(this,t,e,i);var n=helpers$2.options.resolve,l={chart:this.chart,dataIndex:e,dataset:r,datasetIndex:this.index};configKeys.forEach(function(i){t._model[i]=n([o[i],r[i],a[i]],l,e)})},_calculateCommonModel:function(t,e,i,r){i.outliers&&(t.outliers=i.outliers.map(function(t){return r.getPixelForValue(Number(t))})),Array.isArray(e)?t.items=e.map(function(t){return r.getPixelForValue(Number(t))}):i.items&&(t.items=i.items.map(function(t){return r.getPixelForValue(Number(t))}))},setHoverStyle:function(t){controllers.bar.prototype.setHoverStyle.call(this,t);var e=this.chart.data.datasets[t._datasetIndex],i=t._index,r=t.custom||{},o=t._model,a=helpers$2.getHoverColor,n=helpers$2.options.resolve;configKeys.forEach(function(l,s){t.$previousStyle[l]=o[l];var u="hover".concat(l.charAt(0).toUpperCase()).concat(l.slice(1)),c=configKeyIsColor[s]&&null!=o[l]?a(o[l]):o[l];t._model[l]=n([r[u],e[u],c],void 0,i)})}};function boxplotTooltip(t,e){for(var i=asBoxPlotStats(e.datasets[t.datasetIndex].data[t.index],this._chart.getDatasetMeta(t.datasetIndex).controller._getValueScale().options.ticks),r=null==this._tooltipOutlier?-1:this._tooltipOutlier,o=this._options.callbacks.boxplotLabel,a=arguments.length,n=new Array(a>2?a-2:0),l=2;l<a;l++)n[l-2]=arguments[l];return o.apply(this,[t,e,i,r].concat(n))}var defaults$1={tooltips:{position:"boxplot",callbacks:{label:boxplotTooltip,boxplotLabel:function(t,e,i,r){var o=e.datasets[t.datasetIndex].label||"",a="".concat(o," ").concat("string"==typeof t.xLabel?t.xLabel:t.yLabel);if(!i)return"".concat(a," (NaN)");if(r>=0){var n=i.outliers[r];return"".concat(a," (outlier: ").concat(toFixed.call(this,n),")")}return"".concat(a," (min: ").concat(toFixed.call(this,i.min),", q1: ").concat(toFixed.call(this,i.q1),", median: ").concat(toFixed.call(this,i.median),", q3: ").concat(toFixed.call(this,i.q3),", max: ").concat(toFixed.call(this,i.max),")")}}}};defaults$3.boxplot=helpers$2.merge({},[defaults$3.bar,verticalDefaults,defaults$1]),defaults$3.horizontalBoxplot=helpers$2.merge({},[defaults$3.horizontalBar,horizontalDefaults,defaults$1]),defaults$3.global.datasets&&defaults$3.global.datasets.bar&&(defaults$3.global.datasets.boxplot=_objectSpread2({},defaults$3.global.datasets.bar)),defaults$3.global.datasets&&defaults$3.global.datasets.horizontalBar&&(defaults$3.global.datasets.horizontalBoxplot=_objectSpread2({},defaults$3.global.datasets.horizontalBar));var boxplot=_objectSpread2({},array,{dataElementType:elements.BoxAndWhiskers,_elementOptions:function(){return this.chart.options.elements.boxandwhiskers},_updateElementGeometry:function(t,e,i){for(var r,o=arguments.length,a=new Array(o>3?o-3:0),n=3;n<o;n++)a[n-3]=arguments[n];(r=controllers.bar.prototype._updateElementGeometry).call.apply(r,[this,t,e,i].concat(a)),t._model.boxplot=this._calculateBoxPlotValuesPixels(this.index,e)},_calculateBoxPlotValuesPixels:function(t,e){var i=this._getValueScale(),r=this.chart.data.datasets[t].data[e];if(!r)return null;var o=asBoxPlotStats(r,i.options.ticks),a={};return Object.keys(o).forEach(function(t){"outliers"!==t&&"items"!==t&&(a[t]=i.getPixelForValue(Number(o[t])))}),this._calculateCommonModel(a,r,o,i),a}}),BoxPlot=controllers.boxplot=controllers.bar.extend(boxplot),HorizontalBoxPlot=controllers.horizontalBoxplot=controllers.horizontalBar.extend(boxplot);function violinTooltip(t,e){for(var i=asViolinStats(e.datasets[t.datasetIndex].data[t.index],this._chart.getDatasetMeta(t.datasetIndex).controller._getValueScale().options.ticks),r=this._options.callbacks.violinLabel,o=arguments.length,a=new Array(o>2?o-2:0),n=2;n<o;n++)a[n-2]=arguments[n];return r.apply(this,[t,e,i].concat(a))}var defaults$2={tooltips:{callbacks:{label:violinTooltip,violinLabel:function(t,e){var i=e.datasets[t.datasetIndex].label||"",r=t.value,o="".concat(i," ").concat("string"==typeof t.xLabel?t.xLabel:t.yLabel);return"".concat(o," (").concat(toFixed.call(this,r),")")}}}};defaults$3.violin=helpers$2.merge({},[defaults$3.bar,verticalDefaults,defaults$2]),defaults$3.horizontalViolin=helpers$2.merge({},[defaults$3.horizontalBar,horizontalDefaults,defaults$2]),defaults$3.global.datasets&&defaults$3.global.datasets.bar&&(defaults$3.global.datasets.violin=_objectSpread2({},defaults$3.global.datasets.bar)),defaults$3.global.datasets&&defaults$3.global.datasets.horizontalBar&&(defaults$3.global.datasets.horizontalViolin=_objectSpread2({},defaults$3.global.datasets.horizontalBar));var controller=_objectSpread2({},array,{dataElementType:elements.Violin,_elementOptions:function(){return this.chart.options.elements.violin},_updateElementGeometry:function(t,e,i){for(var r,o=arguments.length,a=new Array(o>3?o-3:0),n=3;n<o;n++)a[n-3]=arguments[n];(r=controllers.bar.prototype._updateElementGeometry).call.apply(r,[this,t,e,i].concat(a));var l=t.custom||{},s=this._elementOptions();t._model.violin=this._calculateViolinValuesPixels(this.index,e,void 0!==l.points?l.points:s.points)},_calculateViolinValuesPixels:function(t,e,i){var r=this._getValueScale(),o=this.chart.data.datasets[t].data[e],a=asViolinStats(o,r.options.ticks);if(!Array.isArray(o)&&"number"==typeof o&&!Number.isNaN||null==a)return{min:o,max:o,median:o,coords:[{v:o,estimate:Number.NEGATIVE_INFINITY}],maxEstimate:Number.NEGATIVE_INFINITY};for(var n=[],l=(a.max-a.min)/i,s=a.min;s<=a.max&&l>0;s+=l)n.push(s);n[n.length-1]!==a.max&&n.push(a.max);var u=a.coords||a.kde(n).map(function(t){return{v:t[0],estimate:t[1]}}),c={min:r.getPixelForValue(a.min),max:r.getPixelForValue(a.max),median:r.getPixelForValue(a.median),coords:u.map(function(t){var e=t.v,i=t.estimate;return{v:r.getPixelForValue(e),estimate:i}}),maxEstimate:u.reduce(function(t,e){return Math.max(t,e.estimate)},Number.NEGATIVE_INFINITY)};return this._calculateCommonModel(c,o,a,r),c}}),Violin$1=controllers.violin=controllers.bar.extend(controller),HorizontalViolin=controllers.horizontalViolin=controllers.horizontalBar.extend(controller),helpers=helpers$2,ArrayLinearScaleOptions=helpers.merge({},[commonScaleOptions,scaleService.getScaleDefaults("linear")]),ArrayLinearScale=scaleService.getScaleConstructor("linear").extend({getRightValue:function(t){return LinearScaleBase.prototype.getRightValue.call(this,getRightValue(t,this.options.ticks))},_parseValue:function(t){return LinearScaleBase.prototype._parseValue.call(this,getRightValue(t,this.options.ticks))},determineDataLimits:function(){commonDataLimits.call(this),this.handleTickRangeOptions()}});scaleService.registerScaleType("arrayLinear",ArrayLinearScale,ArrayLinearScaleOptions);var helpers$1=helpers$2,ArrayLogarithmicScaleOptions=helpers$1.merge({},[commonScaleOptions,scaleService.getScaleDefaults("logarithmic")]),ArrayLogarithmicScale=scaleService.getScaleConstructor("logarithmic").extend({getRightValue:function(t){return LinearScaleBase.prototype.getRightValue.call(this,getRightValue(t,this.options.ticks))},_parseValue:function(t){return LinearScaleBase.prototype._parseValue.call(this,getRightValue(t,this.options.ticks))},determineDataLimits:function(){var t=this,e=this.options.ticks;this.minNotZero=null,commonDataLimits.call(this,function(i){var r=i[e.minStats];0!==r&&(null===t.minNotZero||r<t.minNotZero)&&(t.minNotZero=r)}),this.min=helpers$1.valueOrDefault(e.min,this.min-.05*this.min),this.max=helpers$1.valueOrDefault(e.max,this.max+.05*this.max),this.min===this.max&&(0!==this.min&&null!==this.min?(this.min=Math.pow(10,Math.floor(helpers$1.log10(this.min))-1),this.max=Math.pow(10,Math.floor(helpers$1.log10(this.max))+1)):(this.min=1,this.max=10))}});function boxplotPositioner(t,e){var i=this;if(!t.length)return!1;var r=_slicedToArray(t.reduce(function(t,r){var o=_slicedToArray(t,3),a=o[0],n=o[1],l=o[2];if(r&&r.hasValue()){var s=r.tooltipPosition(e,i);return[a+s.x,n+s.y,l+1]}return[a,n,l]},[0,0,0]),3),o=r[0],a=r[1],n=r[2];return{x:o/n,y:a/n}}scaleService.registerScaleType("arrayLogarithmic",ArrayLogarithmicScale,ArrayLogarithmicScaleOptions),Tooltip.positioners.boxplot=boxplotPositioner;export{ArrayLinearScale,ArrayLogarithmicScale,BoxAndWiskers as BoxAndWhiskers,BoxPlot,HorizontalBoxPlot,HorizontalViolin,Violin};