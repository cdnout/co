/*! CAF: caf.js
	v12.0.1 (c) 2021 Kyle Simpson
	MIT License: http://getify.mit-license.org
*/
!function UMD(e,n,l,r){"function"==typeof define&&define.amd?(l=Object.values(l),define(e,l,r)):"undefined"!=typeof module&&module.exports?(l=Object.keys(l).map((e=>require(e))),module.exports=r(...l)):(l=Object.values(l).map((e=>n[e])),n[e]=r(...l))}("CAF","undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:new Function("return this")(),{"./shared.js":"CAFShared"},(function DEF(e){"use strict";var{CLEANUP_FN:n,TIMEOUT_TOKEN:l,cancelToken:r,signalPromise:u,processTokenOrSignal:o}=e;let a={};function delay(e,n){var l,r;return"number"==typeof e&&"number"!=typeof n&&([n,e]=[e,n]),e&&({tokenOrSignal:e,signal:l,signalPr:r}=o(e)),l&&l.aborted?r:new Promise((function c(e,u){l&&(r.catch((function onAbort(r){o&&(clearTimeout(o),u(r||`delay (${n}) interrupted`)),e=u=o=l=null})),r=null);var o=setTimeout((function onTimeout(){e(`delayed: ${n}`),e=u=o=l=null}),n)}))}function runner(e,...n){var l=e.apply(this,n);return e=n=null,{it:l,result:function getNextResult(e){try{var n=l.next(e);e=null}catch(e){return Promise.reject(e)}return function processResult(e){var n=Promise.resolve(e.value);return e.done?l=null:(n=n.then(getNextResult,(function onRejection(e){return Promise.resolve(l.throw(e)).then(processResult)}))).catch((function cleanup(){l=null})),e=null,n}(n)}()}}return a=Object.assign((function CAF(e){return function instance(n,...r){var u,a;if(({tokenOrSignal:n,signal:u,signalPr:a}=o(n)),u.aborted)return a;var i=a.catch((function onCancellation(e){try{var n=s.return();throw void 0!==n.value?n.value:e}finally{s=f=i=d=null}})),{it:s,result:f}=runner.call(this,e,u,...r),d=Promise.race([f,i]);if(n!==u&&n[l]){let e=function cancelTimer(){n.abort(),n=e=null};d.then(e,e)}else d.catch((()=>{})),n=null;return u=r=null,d}}),{cancelToken:r,delay:delay,timeout:function timeout(e,n="Timeout"){e=Number(e)||0;var u=new r;return delay(u.signal,e).then(cleanup,cleanup),Object.defineProperty(u,l,{value:!0,writable:!1,enumerable:!1,configurable:!1}),u;function cleanup(){u.abort(n),u=null}},signalRace:function signalRace(e){var l=new r,o=e.map(u),a=o.map((e=>e[n]));return Promise.race(o).catch((function c(e){l.abort(e)})).then((function t(){for(let e of a)e();a=l=null})),l.signal},signalAll:function signalAll(e){var l=new r,o=e.map(u),a=o.map((e=>e[n]));return Promise.all(o.map((function m(e){return e.catch((e=>e))}))).then((function t(e){l.abort(e)})).then((function t(){for(let e of a)e();a=l=null})),l.signal}}),a.cancelToken=r,a}));