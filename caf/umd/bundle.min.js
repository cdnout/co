!function(n,e){for(let[r,t,l]of e)"function"==typeof define&&define.amd?(t=Object.keys(t).map(n=>n.replace(/^\.\//,"")),define(r,t,l)):"undefined"!=typeof module&&module.exports?(t=Object.keys(t).map(n=>require(n)),module.exports[r]=l(...t)):(t=Object.values(t).map(e=>n[e]),n[r]=l(...t))}("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:new Function("return this")(),[["CAFShared",{},function(){"use strict";const n=Symbol("Cleanup Function"),e=Symbol("Timeout Token");class r{constructor(e=new AbortController){var r;this.controller=e,this.signal=e.signal;var t=(e,t)=>{var l=()=>{if(t){var n=this.signal&&this.signal.reason?this.signal.reason:void 0;t(n),t=null}};this.signal.addEventListener("abort",l,!1),r=(()=>{this.signal&&(this.signal.removeEventListener("abort",l,!1),this.signal.pr&&(this.signal.pr[n]=null)),l=null})};this.signal.pr=new Promise(t),this.signal.pr[n]=r,this.signal.pr.catch(r),t=r=null}abort(n){this.signal&&!("reason"in this.signal)&&(this.signal.reason=n),this.controller&&this.controller.abort()}discard(){this.signal&&(this.signal.pr&&(this.signal.pr[n]&&this.signal.pr[n](),this.signal.pr=null),this.signal=this.signal.reason=null),this.controller=null}}let t={};function l(e){if(e.pr)return e.pr;var r,t=new Promise(function(n,t){r=(()=>t()),e.addEventListener("abort",r,!1)});return t[n]=function(){e&&(e.removeEventListener("abort",r,!1),e=null),t&&(t=t[n]=r=null)},t.catch(t[n]),t}function i(n){n instanceof AbortController&&(n=new r(n));var e=n&&n instanceof r?n.signal:n;return{tokenOrSignal:n,signal:e,signalPr:l(e)}}return(t={CLEANUP_FN:n,TIMEOUT_TOKEN:e,cancelToken:r,signalPromise:l,processTokenOrSignal:i}).CLEANUP_FN=n,t.TIMEOUT_TOKEN=e,t.cancelToken=r,t.signalPromise=l,t.processTokenOrSignal=i,t}],["CAG",{"./shared.js":"CAFShared"},function(n){"use strict";var{TIMEOUT_TOKEN:e,cancelToken:r,signalPromise:t,processTokenOrSignal:l}=n;let i={};i=function(n){return function(r,...t){var i,h;if(({tokenOrSignal:r,signal:i,signalPr:h}=l(r)),i.aborted)throw i.reason||"Aborted";var d=function(){var n;return{pr:new Promise(function(e){n=e}),resolve:n}}(),{it:v,ait:g}=function(n,e,r,t,...l){var i=n.call(this,{signal:t,pwait:f},...l);n=l=null;var h=t.pr.catch(n=>{throw{[u]:!0,reason:n}});return{it:i,ait:async function*(){var n,t=o;try{for(;!e.resolved;)if(t!==o?(n=t,t=o,n=i.throw(n)):n=i.next(n),c(n.value))if(a.has(n.value)){a.delete(n.value);try{if((n=await Promise.race([e,h,n.value]))===s)return}catch(n){if(n[u]){let e=i.return();throw void 0!==e.value?e.value:n.reason}t=n}}else n=yield n.value;else{if(n.done)return n.value;n=yield n.value}}finally{i=e=null,r()}}()}}(n,d.pr,m,i,...t),p=g.return;return g.return=function(n){try{return d.pr.resolved=!0,d.resolve(s),Promise.resolve(v.return(n))}finally{p.call(g),m()}},g;function m(){r&&r!==i&&r[e]&&r.abort(),g&&(g.return=p,r=d=v=g=p=null)}}};var a=new WeakSet;const o=Symbol("unset"),s=Symbol("returned"),u=Symbol("canceled");function c(n){return n&&"object"==typeof n&&"function"==typeof n.then}function f(n){var e=Promise.resolve(n);return a.add(e),e}return i}],["CAF",{"./shared.js":"CAFShared"},function(n){"use strict";var{CLEANUP_FN:e,TIMEOUT_TOKEN:r,cancelToken:t,signalPromise:l,processTokenOrSignal:i}=n;let a={};function o(n,e){var r,t;return"number"==typeof n&&"number"!=typeof e&&([e,n]=[n,e]),n&&({tokenOrSignal:n,signal:r,signalPr:t}=i(n)),r&&r.aborted?t:new Promise(function(n,l){r&&(t.catch(function(t){i&&(clearTimeout(i),l(t||`delay (${e}) interrupted`)),n=l=i=r=null}),t=null);var i=setTimeout(function(){n(`delayed: ${e}`),n=l=i=r=null},e)})}return(a=Object.assign(function(n){return function(e,...t){var l,a;if(({tokenOrSignal:e,signal:l,signalPr:a}=i(e)),l.aborted)return a;var o=a.catch(function(n){try{var e=s.return();throw void 0!==e.value?e.value:n}finally{s=u=o=c=null}}),{it:s,result:u}=function(n,...e){var r=n.apply(this,e);return n=e=null,{it:r,result:function n(e){try{var t=r.next(e);e=null}catch(e){return Promise.reject(e)}return function e(t){var l=Promise.resolve(t.value);return t.done?r=null:(l=l.then(n,function(n){return Promise.resolve(r.throw(n)).then(e)})).catch(function(){r=null}),t=null,l}(t)}()}}.call(this,n,l,...t),c=Promise.race([u,o]);if(e!==l&&e[r]){let n=function(){e.abort(),e=n=null};c.then(n,n)}else c.catch(()=>{}),e=null;return l=t=null,c}},{cancelToken:t,delay:o,timeout:function(n,e="Timeout"){n=Number(n)||0;var l=new t;return o(l.signal,n).then(i,i),Object.defineProperty(l,r,{value:!0,writable:!1,enumerable:!1,configurable:!1}),l;function i(){l.abort(e),l=null}},signalRace:function(n){var r=new t,i=n.map(l),a=i.map(n=>n[e]);return Promise.race(i).catch(function(n){r.abort(n)}).then(function(){for(let n of a)n();a=r=null}),r.signal},signalAll:function(n){var r=new t,i=n.map(l),a=i.map(n=>n[e]);return Promise.all(i.map(function(n){return n.catch(n=>n)})).then(function(n){r.abort(n)}).then(function(){for(let n of a)n();a=r=null}),r.signal}})).cancelToken=t,a}],["Index",{"./caf.js":"CAF","./cag.js":"CAG","./shared.js":"CAFShared"},function(n,e,r){"use strict";return{CAF:n,CAG:e,CAFShared:r}}]]);