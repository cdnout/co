!function(n,e,t,r){"function"==typeof define&&define.amd?(t=Object.values(t),define(n,t,r)):"undefined"!=typeof module&&module.exports?(t=Object.keys(t).map(n=>require(n)),module.exports=r(...t)):(t=Object.values(t).map(n=>e[n]),e[n]=r(...t))}("CAF","undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:new Function("return this")(),{"./shared.js":"CAFShared"},function(n){"use strict";var{CLEANUP_FN:e,TIMEOUT_TOKEN:t,cancelToken:r,signalPromise:l,processTokenOrSignal:u}=n;let o={};function i(n,e){var t,r;return"number"==typeof n&&"number"!=typeof e&&([e,n]=[n,e]),n&&({tokenOrSignal:n,signal:t,signalPr:r}=u(n)),t&&t.aborted?r:new Promise(function(n,l){t&&(r.catch(function(r){u&&(clearTimeout(u),l(r||`delay (${e}) interrupted`)),n=l=u=t=null}),r=null);var u=setTimeout(function(){n(`delayed: ${e}`),n=l=u=t=null},e)})}return(o=Object.assign(function(n){return function(e,...r){var l,o;if(({tokenOrSignal:e,signal:l,signalPr:o}=u(e)),l.aborted)return o;var i=o.catch(function(n){try{var e=a.return();throw void 0!==e.value?e.value:n}finally{a=c=i=f=null}}),{it:a,result:c}=function(n,...e){var t=n.apply(this,e);return n=e=null,{it:t,result:function n(e){try{var r=t.next(e);e=null}catch(e){return Promise.reject(e)}return function e(r){var l=Promise.resolve(r.value);return r.done?t=null:(l=l.then(n,function(n){return Promise.resolve(t.throw(n)).then(e)})).catch(function(){t=null}),r=null,l}(r)}()}}.call(this,n,l,...r),f=Promise.race([c,i]);if(e!==l&&e[t]){let n=function(){e.abort(),e=n=null};f.then(n,n)}else f.catch(()=>{}),e=null;return l=r=null,f}},{cancelToken:r,delay:i,timeout:function(n,e="Timeout"){n=Number(n)||0;var l=new r;return i(l.signal,n).then(u,u),Object.defineProperty(l,t,{value:!0,writable:!1,enumerable:!1,configurable:!1}),l;function u(){l.abort(e),l=null}},signalRace:function(n){var t=new r,u=n.map(l),o=u.map(n=>n[e]);return Promise.race(u).catch(function(n){t.abort(n)}).then(function(){for(let n of o)n();o=t=null}),t.signal},signalAll:function(n){var t=new r,u=n.map(l),o=u.map(n=>n[e]);return Promise.all(u.map(function(n){return n.catch(n=>n)})).then(function(n){t.abort(n)}).then(function(){for(let n of o)n();o=t=null}),t.signal}})).cancelToken=r,o});