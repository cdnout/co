/*! CAF: bundle.js
	v11.0.0 (c) 2020 Kyle Simpson
	MIT License: http://getify.mit-license.org
*/
!function UMDBundle(n,e){for(let[r,l,i]of e)"function"==typeof define&&define.amd?(l=Object.keys(l).map((n=>n.replace(/^\.\//,""))),define(r,l,i)):"undefined"!=typeof module&&module.exports?(l=Object.keys(l).map((n=>require(n))),module.exports[r]=i(...l)):(l=Object.values(l).map((e=>n[e])),n[r]=i(...l))}("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:new Function("return this")(),[["CAFShared",{},function DEF(){"use strict";const n=Symbol("Cleanup Function"),e=Symbol("Timeout Token");class r{constructor(e=new AbortController){var r;this.controller=e,this.signal=e.signal;var handleReject=(e,l)=>{var doRej=()=>{if(l){var n=this.signal&&this.signal.reason?this.signal.reason:void 0;l(n),l=null}};this.signal.addEventListener("abort",doRej,!1),r=()=>{this.signal&&(this.signal.removeEventListener("abort",doRej,!1),this.signal.pr&&(this.signal.pr[n]=null)),doRej=null}};this.signal.pr=new Promise(handleReject),this.signal.pr[n]=r,this.signal.pr.catch(r),handleReject=r=null}abort(n){this.signal&&!("reason"in this.signal)&&(this.signal.reason=n),this.controller&&this.controller.abort()}discard(){this.signal&&(this.signal.pr&&(this.signal.pr[n]&&this.signal.pr[n](),this.signal.pr=null),this.signal=this.signal.reason=null),this.controller=null}}let l={};function signalPromise(e){if(e.pr)return e.pr;var r,l=new Promise((function c(n,l){r=()=>l(),e.addEventListener("abort",r,!1)}));return l[n]=function cleanup(){e&&(e.removeEventListener("abort",r,!1),e=null),l&&(l=l[n]=r=null)},l.catch(l[n]),l}function processTokenOrSignal(n){n instanceof AbortController&&(n=new r(n));var e=n&&n instanceof r?n.signal:n;return{tokenOrSignal:n,signal:e,signalPr:signalPromise(e)}}return l={CLEANUP_FN:n,TIMEOUT_TOKEN:e,cancelToken:r,signalPromise:signalPromise,processTokenOrSignal:processTokenOrSignal},l.CLEANUP_FN=n,l.TIMEOUT_TOKEN=e,l.cancelToken=r,l.signalPromise=signalPromise,l.processTokenOrSignal=processTokenOrSignal,l}],["CAG",{"./shared.js":"CAFShared"},function DEF(n){"use strict";var{TIMEOUT_TOKEN:e,cancelToken:r,signalPromise:l,processTokenOrSignal:i}=n;let a={};a=function CAG(n){return function instance(r,...l){var a,g;if(({tokenOrSignal:r,signal:a,signalPr:g}=i(r)),a.aborted)throw a.reason||"Aborted";var h=function deferred(){var n;return{pr:new Promise((function c(e){n=e})),resolve:n}}(),{it:d,ait:p}=function runner(n,e,r,l,...i){var a=n.call(this,{signal:l,pwait:pwait},...i);n=i=null;var g=l.pr.catch((n=>{throw{[f]:!0,reason:n}}));return{it:a,ait:async function*runner(){var n,l=s;try{for(;!e.resolved;)if(l!==s?(n=l,l=s,n=a.throw(n)):n=a.next(n),isPromise(n.value))if(o.has(n.value)){o.delete(n.value);try{if((n=await Promise.race([e,g,n.value]))===u)return}catch(n){if(n[f]){let e=a.return();throw void 0!==e.value?e.value:n.reason}l=n}}else n=yield n.value;else{if(n.done)return n.value;n=yield n.value}}finally{a=e=null,r()}}()}}(n,h.pr,onComplete,a,...l),v=p.return;return p.return=function doReturn(n){try{return h.pr.resolved=!0,h.resolve(u),Promise.resolve(d.return(n))}finally{v.call(p),onComplete()}},p;function onComplete(){r&&r!==a&&r[e]&&r.abort(),p&&(p.return=v,r=h=d=p=v=null)}}};var o=new WeakSet;const s=Symbol("unset"),u=Symbol("returned"),f=Symbol("canceled");function isPromise(n){return n&&"object"==typeof n&&"function"==typeof n.then}function pwait(n){var e=Promise.resolve(n);return o.add(e),e}return a}],["CAF",{"./shared.js":"CAFShared"},function DEF(n){"use strict";var{CLEANUP_FN:e,TIMEOUT_TOKEN:r,cancelToken:l,signalPromise:i,processTokenOrSignal:a}=n;let o={};function delay(n,e){var r,l;return"number"==typeof n&&"number"!=typeof e&&([e,n]=[n,e]),n&&({tokenOrSignal:n,signal:r,signalPr:l}=a(n)),r&&r.aborted?l:new Promise((function c(n,i){r&&(l.catch((function onAbort(l){a&&(clearTimeout(a),i(l||`delay (${e}) interrupted`)),n=i=a=r=null})),l=null);var a=setTimeout((function onTimeout(){n(`delayed: ${e}`),n=i=a=r=null}),e)}))}function runner(n,...e){var r=n.apply(this,e);return n=e=null,{it:r,result:function getNextResult(n){try{var e=r.next(n);n=null}catch(n){return Promise.reject(n)}return function processResult(n){var e=Promise.resolve(n.value);return n.done?r=null:(e=e.then(getNextResult,(function onRejection(n){return Promise.resolve(r.throw(n)).then(processResult)}))).catch((function cleanup(){r=null})),n=null,e}(e)}()}}return o=Object.assign((function CAF(n){return function instance(e,...l){var i,o;if(({tokenOrSignal:e,signal:i,signalPr:o}=a(e)),i.aborted)return o;var s=o.catch((function onCancellation(n){try{var e=u.return();throw void 0!==e.value?e.value:n}finally{u=f=s=g=null}})),{it:u,result:f}=runner.call(this,n,i,...l),g=Promise.race([f,s]);if(e!==i&&e[r]){let n=function cancelTimer(){e.abort(),e=n=null};g.then(n,n)}else g.catch((()=>{})),e=null;return i=l=null,g}}),{cancelToken:l,delay:delay,timeout:function timeout(n,e="Timeout"){n=Number(n)||0;var i=new l;return delay(i.signal,n).then(cleanup,cleanup),Object.defineProperty(i,r,{value:!0,writable:!1,enumerable:!1,configurable:!1}),i;function cleanup(){i.abort(e),i=null}},signalRace:function signalRace(n){var r=new l,a=n.map(i),o=a.map((n=>n[e]));return Promise.race(a).catch((function c(n){r.abort(n)})).then((function t(){for(let n of o)n();o=r=null})),r.signal},signalAll:function signalAll(n){var r=new l,a=n.map(i),o=a.map((n=>n[e]));return Promise.all(a.map((function m(n){return n.catch((n=>n))}))).then((function t(n){r.abort(n)})).then((function t(){for(let n of o)n();o=r=null})),r.signal}}),o.cancelToken=l,o}],["Index",{"./caf.js":"CAF","./cag.js":"CAG","./shared.js":"CAFShared"},function DEF(n,e,r){"use strict";return{CAF:n,CAG:e,CAFShared:r}}]]);