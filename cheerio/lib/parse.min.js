"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.update=void 0;var htmlparser2_1=require("htmlparser2"),htmlparser2_adapter_1=require("./parsers/htmlparser2-adapter"),parse5_adapter_1=require("./parsers/parse5-adapter"),domhandler_1=require("domhandler");function parse(r,e,a){if("string"==typeof(r="undefined"!=typeof Buffer&&Buffer.isBuffer(r)?r.toString():r))return e.xmlMode||e._useHtmlParser2?htmlparser2_adapter_1.parse(r,e):parse5_adapter_1.parse(r,e,a);a=r;if(!Array.isArray(a)&&domhandler_1.isDocument(a))return a;r=new domhandler_1.Document([]);return update(a,r),r}function update(r,e){var a=Array.isArray(r)?r:[r];e?e.children=a:e=null;for(var t=0;t<a.length;t++){var p=a[t];p.parent&&p.parent.children!==a&&htmlparser2_1.DomUtils.removeElement(p),e?(p.prev=a[t-1]||null,p.next=a[t+1]||null):p.prev=p.next=null,p.parent=e}return e}exports.default=parse,exports.update=update;