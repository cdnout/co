"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.merge=exports.contains=exports.root=exports.parseHTML=exports.text=exports.xml=exports.html=void 0;var tslib_1=require("tslib"),options_1=tslib_1.__importStar(require("./options")),cheerio_select_1=require("cheerio-select"),htmlparser2_1=require("htmlparser2"),parse5_adapter_1=require("./parsers/parse5-adapter"),htmlparser2_adapter_1=require("./parsers/htmlparser2-adapter");function render(e,t,r){var o,e=t?"string"==typeof t?cheerio_select_1.select(t,null!==(o=null==e?void 0:e._root)&&void 0!==o?o:[],r):t:null==e?void 0:e._root.children;return e?r.xmlMode||r._useHtmlParser2?htmlparser2_adapter_1.render(e,r):parse5_adapter_1.render(e):""}function isOptions(e){return!("object"!=typeof e||null==e||"length"in e||"type"in e)}function html(e,t){return!t&&isOptions(e)&&(t=e,e=void 0),render(this||void 0,e,tslib_1.__assign(tslib_1.__assign(tslib_1.__assign({},options_1.default),this?this._options:{}),options_1.flatten(null!=t?t:{})))}function xml(e){return render(this,e,tslib_1.__assign(tslib_1.__assign({},this._options),{xmlMode:!0}))}function text(e){for(var t=e||(this?this.root():[]),r="",o=0;o<t.length;o++){var s=t[o];htmlparser2_1.DomUtils.isText(s)?r+=s.data:htmlparser2_1.DomUtils.hasChildren(s)&&s.type!==htmlparser2_1.ElementType.Comment&&s.type!==htmlparser2_1.ElementType.Script&&s.type!==htmlparser2_1.ElementType.Style&&(r+=text(s.children))}return r}function parseHTML(e,t,r){if(void 0===r&&(r="boolean"==typeof t&&t),!e||"string"!=typeof e)return null;"boolean"==typeof t&&(r=t);e=this.load(e,options_1.default,!1);return r||e("script").remove(),e.root()[0].children.slice()}function root(){return this(this._root)}function contains(e,t){if(t===e)return!1;for(var r=t;r&&r!==r.parent;)if((r=r.parent)===e)return!0;return!1}function merge(e,t){if(isArrayLike(e)&&isArrayLike(t)){for(var r=e.length,o=+t.length,s=0;s<o;s++)e[r++]=t[s];return e.length=r,e}}function isArrayLike(e){if(Array.isArray(e))return!0;if("object"!=typeof e||!Object.prototype.hasOwnProperty.call(e,"length")||"number"!=typeof e.length||e.length<0)return!1;for(var t=0;t<e.length;t++)if(!(t in e))return!1;return!0}exports.html=html,exports.xml=xml,exports.text=text,exports.parseHTML=parseHTML,exports.root=root,exports.contains=contains,exports.merge=merge;