"use strict";function some(e,n){for(var r=e.length,i=0;i<r;++i)if(n(e[i],i))return!0;return!1}function find(e,n){for(var r=e.length,i=0;i<r;++i)if(n(e[i],i))return e[i];return null}function getUserAgent(e){var n=e;if(void 0===n){if("undefined"==typeof navigator||!navigator)return"";n=navigator.userAgent||""}return n.toLowerCase()}function execRegExp(e,n){try{return new RegExp(e,"g").exec(n)}catch(e){return null}}function hasUserAgentData(){if("undefined"==typeof navigator||!navigator||!navigator.userAgentData)return!1;var e=navigator.userAgentData,n=e.brands||e.uaList;return!(!n||!n.length)}function findVersion(e,n){var r=execRegExp("("+e+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",n);return r?r[3]:""}function convertVersion(e){return e.replace(/_/g,".")}function findPreset(e,r){var i=null,t="-1";return some(e,function(e){var n=execRegExp("("+e.test+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",r);return!(!n||e.brand)&&(i=e,t=n[3]||"-1",e.versionAlias?t=e.versionAlias:e.versionTest&&(t=findVersion(e.versionTest.toLowerCase(),r)||t),t=convertVersion(t),!0)}),{preset:i,version:t}}function findBrand(e,r){return find(e,function(e){var n=e.brand;return execRegExp(""+r.test,n.toLowerCase())})}var BROWSER_PRESETS=[{test:"phantomjs",id:"phantomjs"},{test:"whale",id:"whale"},{test:"edgios|edge|edg",id:"edge"},{test:"msie|trident|windows phone",id:"ie",versionTest:"iemobile|msie|rv"},{test:"miuibrowser",id:"miui browser"},{test:"samsungbrowser",id:"samsung internet"},{test:"samsung",id:"samsung internet",versionTest:"version"},{test:"chrome|crios",id:"chrome"},{test:"firefox|fxios",id:"firefox"},{test:"android",id:"android browser",versionTest:"version"},{test:"safari|iphone|ipad|ipod",id:"safari",versionTest:"version"}],CHROMIUM_PRESETS=[{test:"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",id:"chrome"},{test:"chromium",id:"chrome"},{test:"whale",id:"chrome",brand:!0}],WEBKIT_PRESETS=[{test:"applewebkit",id:"webkit"}],WEBVIEW_PRESETS=[{test:"(?=(iphone|ipad))(?!(.*version))",id:"webview"},{test:"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",id:"webview"},{test:"webview",id:"webview"}],OS_PRESETS=[{test:"windows phone",id:"windows phone"},{test:"windows 2000",id:"window",versionAlias:"5.0"},{test:"windows nt",id:"window"},{test:"iphone|ipad|ipod",id:"ios",versionTest:"iphone os|cpu os"},{test:"mac os x",id:"mac"},{test:"android",id:"android"},{test:"tizen",id:"tizen"},{test:"webos|web0s",id:"webos"}];function parseUserAgentData(r){var n,e,i=navigator.userAgentData,t=(i.uaList||i.brands).slice(),s=i.mobile||!1,o=t[0],a={name:o.brand,version:o.version,majorVersion:-1,webkit:!1,webview:some(WEBVIEW_PRESETS,function(e){return findBrand(t,e)}),chromium:some(CHROMIUM_PRESETS,function(e){return findBrand(t,e)})},d={name:"unknown",version:"-1",majorVersion:-1};return a.webkit=!a.chromium&&some(WEBKIT_PRESETS,function(e){return findBrand(t,e)}),r&&(n=r.platform.toLowerCase(),e=find(OS_PRESETS,function(e){return new RegExp(""+e.test,"g").exec(n)}),d.name=e?e.id:n,d.version=r.platformVersion),some(BROWSER_PRESETS,function(e){var n=findBrand(t,e);return!!n&&(a.name=e.id,a.version=r?r.uaFullVersion:n.version,!0)}),"Linux armv8l"===navigator.platform?d.name="android":a.webkit&&(d.name=s?"ios":"mac"),"ios"===d.name&&a.webview&&(a.version="-1"),d.version=convertVersion(d.version),a.version=convertVersion(a.version),d.majorVersion=parseInt(d.version,10),a.majorVersion=parseInt(a.version,10),{browser:a,os:d,isMobile:s,isHints:!0}}function parseUserAgent(e){var n=getUserAgent(e),r=!!/mobi/g.exec(n),i={name:"unknown",version:"-1",majorVersion:-1,webview:!!findPreset(WEBVIEW_PRESETS,n).preset,chromium:!!findPreset(CHROMIUM_PRESETS,n).preset,webkit:!1},t={name:"unknown",version:"-1",majorVersion:-1},s=findPreset(BROWSER_PRESETS,n),o=s.preset,a=s.version,d=findPreset(OS_PRESETS,n),u=d.preset,v=d.version;return i.webkit=!i.chromium&&!!findPreset(WEBKIT_PRESETS,n).preset,u&&(t.name=u.id,t.version=v,t.majorVersion=parseInt(v,10)),o&&(i.name=o.id,i.version=a,i.webview&&"ios"===t.name&&"safari"!==i.name&&(i.webview=!1)),i.majorVersion=parseInt(i.version,10),{browser:i,os:t,isMobile:r,isHints:!1}}function getAccurateAgent(r){return hasUserAgentData()?navigator.userAgentData.getHighEntropyValues(["architecture","model","platform","platformVersion","uaFullVersion"]).then(function(e){var n=parseUserAgentData(e);return r&&r(n),n}):(r&&r(agent()),"undefined"!=typeof Promise&&Promise?Promise.resolve(agent()):null)}function agent(e){return void 0===e&&hasUserAgentData()?parseUserAgentData():parseUserAgent(e)}var modules={__proto__:null,getAccurateAgent:getAccurateAgent,default:agent};for(var name in modules)agent[name]=modules[name];module.exports=agent;