import{top,left,right,bottom}from"../enums.js";import getOffsetParent from"../dom-utils/getOffsetParent.js";import getWindow from"../dom-utils/getWindow.js";import getDocumentElement from"../dom-utils/getDocumentElement.js";import getComputedStyle from"../dom-utils/getComputedStyle.js";import getBasePlacement from"../utils/getBasePlacement.js";var unsetSides={top:"auto",right:"auto",bottom:"auto",left:"auto"};function roundOffsetsByDPR(t){var e=t.x,s=t.y,o=window.devicePixelRatio||1;return{x:Math.round(e*o)/o||0,y:Math.round(s*o)/o||0}}export function mapToStyles(t){var e,s=t.popper,o=t.popperRect,a=t.placement,p=t.offsets,i=t.position,r=t.gpuAcceleration,n=t.adaptive,f=t.roundOffsets?roundOffsetsByDPR(p):p,m=f.x,l=void 0===m?0:m,c=f.y,d=void 0===c?0:c,u=p.hasOwnProperty("x"),g=p.hasOwnProperty("y"),O=left,b=top,j=window;if(n){var y=getOffsetParent(s);y===getWindow(s)&&(y=getDocumentElement(s)),a===top&&(b=bottom,d-=y.clientHeight-o.height,d*=r?1:-1),a===left&&(O=right,l-=y.clientWidth-o.width,l*=r?1:-1)}var v,w=Object.assign({position:i},n&&unsetSides);return r?Object.assign(Object.assign({},w),{},((v={})[b]=g?"0":"",v[O]=u?"0":"",v.transform=(j.devicePixelRatio||1)<2?"translate("+l+"px, "+d+"px)":"translate3d("+l+"px, "+d+"px, 0)",v)):Object.assign(Object.assign({},w),{},((e={})[b]=g?d+"px":"",e[O]=u?l+"px":"",e.transform="",e))};function computeStyles(t){var e=t.state,s=t.options,o=s.gpuAcceleration,a=void 0===o||o,p=s.adaptive,i=void 0===p||p,r=s.roundOffsets,n=void 0===r||r,f={placement:getBasePlacement(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:a};null!=e.modifiersData.popperOffsets&&(e.styles.popper=Object.assign(Object.assign({},e.styles.popper),mapToStyles(Object.assign(Object.assign({},f),{},{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:i,roundOffsets:n})))),null!=e.modifiersData.arrow&&(e.styles.arrow=Object.assign(Object.assign({},e.styles.arrow),mapToStyles(Object.assign(Object.assign({},f),{},{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:n})))),e.attributes.popper=Object.assign(Object.assign({},e.attributes.popper),{},{"data-popper-placement":e.placement})}export default{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:computeStyles,data:{}};