"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="monospaced.qrcode"),angular.module("monospaced.qrcode",[]).directive("qrcode",["$window",function(e){var o=!!e.CanvasRenderingContext2D,r={L:"Low",M:"Medium",Q:"Quartile",H:"High"},n=function(e,o,r,n,t){for(var i=0;i<r;i++)for(var a=0;a<r;a++){var d=Math.ceil((a+1)*n)-Math.floor(a*n),c=Math.ceil((i+1)*n)-Math.floor(i*n);e.fillStyle=o.isDark(i,a)?t.foreground:t.background,e.fillRect(Math.round(a*n),Math.round(i*n),d,c)}};return{restrict:"E",template:'<canvas class="qrcode"></canvas>',link:function(e,t,i){var a,d,c,f,u,s,l,v,g,h=t[0],m=t.find("canvas"),b=m[0],p=o?b.getContext("2d"):null,w="download"in i,M=i.href,q=w||M?document.createElement("a"):"",k=/^\s+|\s+$/g,$={foreground:"#000",background:"#fff"},C=function(e){$.foreground=e||$.foreground},x=function(e){$.background=e||$.background},L=function(e){d=Math.max(1,Math.min(parseInt(e,10),40))||5},D=function(e){c=e in r?e:"M"},y=function(e){if(e){f=e.replace(k,""),v=qrcode(d,c),v.addData(f);try{v.make()}catch(r){var o;if(d>=40)throw new Error("Data is too long",r);return o=d+1,L(o),console.warn("qrcode version is too low and has been incremented to",o),void y(e)}a=!1,s=v.getModuleCount()}},H=function(e){u=parseInt(e,10)||2*s,l=u/s,b.width=b.height=u},R=function(){if(v){if(a)return q&&(q.removeAttribute("download"),q.title="",q.href="#_"),o||(h.innerHTML='<img src width="'+u+'"height="'+u+'"class="qrcode">'),void e.$emit("qrcode:error",a);if(w&&(h.download="qrcode.png",h.title="Download QR code"),o){if(n(p,v,s,l,$),w)return void(h.href=b.toDataURL("image/png"))}else if(h.innerHTML=v.createImgTag(l,0),g=t.find("img"),g.addClass("qrcode"),w)return void(h.href=g[0].src);M&&(h.href=M)}};q&&(q.className="qrcode-link",m.wrap(q),h=h.firstChild),C(i.color),x(i.background),L(i.version),D(i.errorCorrectionLevel),H(i.size),i.$observe("version",function(e){e&&(L(e),y(f),H(u),R())}),i.$observe("errorCorrectionLevel",function(e){e&&(D(e),y(f),H(u),R())}),i.$observe("data",function(e){e&&(y(e),H(u),R())}),i.$observe("size",function(e){e&&(H(e),R())}),i.$observe("color",function(e){e&&(C(e),R())}),i.$observe("background",function(e){e&&(x(e),R())}),i.$observe("href",function(e){e&&(M=e,R())})}}}]);
//# sourceMappingURL=angular-qrcode.min.js.map