!function(e){var t=[63,6,91,79,102,109,125,7,127,111],i="sevenSeg-svg",n="sevenSeg-segOn";e("<style type='text/css'>."+i+"{fill: #320000; overflow: hidden; stroke-width: 0; height: 100%; width: 100%; background-color: Black}."+n+"{fill: Red}</style>").prependTo("head"),e.widget("bw.sevenSegDigit",{options:{value:null,colorOn:null,colorOff:null,colorBackground:null,slant:0,decimalPoint:!0},_create:function(){this.jqSvgElement=e("<svg/>",{"class":i,viewBox:"0 0 57 80",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}).css({fill:this.options.colorOff,"background-color":this.options.colorBackground}),e("<defs/>").append(e("<polyline/>",{id:"h-seg",points:"11 0, 37 0, 42 5, 37 10, 11 10, 6 5"})).append(e("<polyline/>",{id:"v-seg",points:"0 11, 5 6, 10 11, 10 34, 5 39, 0 39"})).appendTo(this.jqSvgElement),this.jqSegments=e("<g/>",{"class":this.widgetName+"-segGroup"}).append(e("<use/>",{"xlink:href":"#h-seg",x:"0",y:"0"})).append(e("<use/>",{"xlink:href":"#v-seg",x:"-48",y:"0",transform:"scale(-1,1)"})).append(e("<use/>",{"xlink:href":"#v-seg",x:"-48",y:"-80",transform:"scale(-1,-1)"})).append(e("<use/>",{"xlink:href":"#h-seg",x:"0",y:"70"})).append(e("<use/>",{"xlink:href":"#v-seg",x:"0",y:"-80",transform:"scale(1,-1)"})).append(e("<use/>",{"xlink:href":"#v-seg",x:"0",y:"0"})).append(e("<use/>",{"xlink:href":"#h-seg",x:"0",y:"35"})).appendTo(this.jqSvgElement),this.options.slant&&this.jqSegments.attr("transform","skewX("+-this.options.slant+")"),this.options.decimalPoint&&e("<circle/>",{cx:"52",cy:"75",r:"5"}).appendTo(this.jqSvgElement),this.jqSvgElement.appendTo(this.element),this.element.html(this.element.html()),this.jqSvgElement=this.element.find("svg"),this.jqSegments=this.jqSvgElement.find("."+this.widgetName+"-segGroup"),this.options.value&&this.displayValue(this.options.value)},_destroy:function(){this.jqSvgElement.remove()},_setOption:function(e,t){switch(this.options[e]=t,e){case"value":this.displayValue(t)}},displayValue:function(i,n){var s=this;if(!(i>=t.length)){s.options.value=i;var l=s._getSegments(i);s.jqSegments.children().each(function(t,i){s._setSvgElementFill(e(i),l&1<<t)}),s._setSvgElementFill(s.jqSvgElement.find("circle"),n)}},_getSegments:function(e){return"-"===e?64:t[e]},_setSvgElementFill:function(e,t){e.attr("class",t&&n),e.css("fill",t&&this.options.colorOn||"")}}),e.widget("bw.sevenSeg",{options:{value:null,digits:1,allowInput:!1,step:1,decimalPlaces:-1},_create:function(){this.aJqDigits=[];for(var t=this.options.digits&&100/this.options.digits+"%",i=0;i<this.options.digits;++i)this.aJqDigits[i]=e("<div/>",{style:"display: inline-block; height: 100%;"}).css("width",t).sevenSegDigit(this.options).appendTo(this.element);this.aJqDigits.reverse(),this._displayValue(this.options.value),this._bindMouseWheel()},_destroy:function(){e.each(this.aJqDigits,function(e,t){t.sevenSegDigit("destroy"),t.remove()})},_bindMouseWheel:function(){var e=this,t="onwheel"in document?"wheel":"mousewheel";if(e._off(e.element,t),e.options.allowInput){var i={};i[t]=function(t){var i=e.options.step,n=t.originalEvent.wheelDelta||-t.originalEvent.deltaY;0>n&&(i=-i),e.option("value",parseFloat(e.options.value,10)+i),t.preventDefault()},e._on(i)}},_setOption:function(e,t){switch(this.options[e]=t,e){case"value":this._displayValue(t)}},_displayValue:function(t){var i=this,n=i._createValueString(t),s=n.indexOf("."),l=n.length-1;e.each(i.aJqDigits,function(e,t){var i=s>=0&&l===s;i&&--l;var o=n[l];t.sevenSegDigit("displayValue",o,i),--l}),i._trigger("change",null,t)},_createValueString:function(e){if(!e)return"";if(this.options.decimalPlaces<0)return e.toString();var t=parseFloat(e,10);return t.toFixed(this.options.decimalPlaces)}}),ko&&ko.bindingHandlers&&(ko.bindingHandlers.sevenSeg={init:function(t,i){var n=i();e(t).sevenSeg(ko.toJS(n)),ko.isWriteableObservable(n.value)&&e(t).on("sevensegchange",function(e,t){n.value(t)})},update:function(t,i){e(t).sevenSeg(ko.toJS(i()))}})}(jQuery);