(()=>{var r={7105:e=>{"use strict";e.exports=function(n){return function(){var e=arguments.length;if(e){for(var t=[],r=-1;++r<e;)t[r]=arguments[r];return n.call(this,t)}return n.call(this,[])}}},6313:e=>{var t=function(){"use strict";function _(e,t){return null!=t&&e instanceof t}var b,w,k;try{b=Map}catch(_){b=function(){}}try{w=Set}catch(_){w=function(){}}try{k=Promise}catch(_){k=function(){}}function j(e,p,t,h,v){"object"==typeof p&&(t=p.depth,h=p.prototype,v=p.includeNonEnumerable,p=p.circular);var y=[],g=[],m="undefined"!=typeof Buffer;return void 0===p&&(p=!0),function n(e,o){if(null===e)return null;if(0===o)return e;var r,t,i;if("object"!=typeof e)return e;if(_(e,b))r=new b;else if(_(e,w))r=new w;else if(_(e,k))r=new k(function(t,r){e.then(function(e){t(n(e,o-1))},function(e){r(n(e,o-1))})});else if(j.__isArray(e))r=[];else if(j.__isRegExp(e))r=new RegExp(e.source,O(e)),e.lastIndex&&(r.lastIndex=e.lastIndex);else if(j.__isDate(e))r=new Date(e.getTime());else{if(m&&Buffer.isBuffer(e))return r=Buffer.allocUnsafe?Buffer.allocUnsafe(e.length):new Buffer(e.length),e.copy(r),r;_(e,Error)?r=Object.create(e):void 0===h?(t=Object.getPrototypeOf(e),r=Object.create(t)):(r=Object.create(h),t=h)}if(p){var s=y.indexOf(e);if(-1!=s)return g[s];y.push(e),g.push(r)}for(a in _(e,b)&&e.forEach(function(e,t){t=n(t,o-1),e=n(e,o-1);r.set(t,e)}),_(e,w)&&e.forEach(function(e){e=n(e,o-1);r.add(e)}),e)(i=t?Object.getOwnPropertyDescriptor(t,a):i)&&null==i.set||(r[a]=n(e[a],o-1));if(Object.getOwnPropertySymbols)for(var u=Object.getOwnPropertySymbols(e),a=0;a<u.length;a++){var c=u[a];(l=Object.getOwnPropertyDescriptor(e,c))&&!l.enumerable&&!v||(r[c]=n(e[c],o-1),l.enumerable||Object.defineProperty(r,c,{enumerable:!1}))}if(v){var f=Object.getOwnPropertyNames(e);for(a=0;a<f.length;a++){var l,d=f[a];(l=Object.getOwnPropertyDescriptor(e,d))&&l.enumerable||(r[d]=n(e[d],o-1),Object.defineProperty(r,d,{enumerable:!1}))}}return r}(e,t=void 0===t?1/0:t)}function t(e){return Object.prototype.toString.call(e)}function O(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),t}return j.clonePrototype=function(e){if(null===e)return null;function t(){}return t.prototype=e,new t},j.__objToStr=t,j.__isDate=function(e){return"object"==typeof e&&"[object Date]"===t(e)},j.__isArray=function(e){return"object"==typeof e&&"[object Array]"===t(e)},j.__isRegExp=function(e){return"object"==typeof e&&"[object RegExp]"===t(e)},j.__getRegExpFlags=O,j}();e.exports&&(e.exports=t)},7187:e=>{"use strict";var t="object"==typeof Reflect?Reflect:null,a=t&&"function"==typeof t.apply?t.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)},r=t&&"function"==typeof t.ownKeys?t.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)},n=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}e.exports=o,e.exports.once=function(o,i){return new Promise(function(e,t){function r(e){o.removeListener(i,n),t(e)}function n(){"function"==typeof o.removeListener&&o.removeListener("error",r),e([].slice.call(arguments))}h(o,i,n,{once:!0}),"error"!==i&&"function"==typeof o.on&&h(o,"error",r,{once:!0})})},(o.EventEmitter=o).prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var i=10;function c(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function s(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function u(e,t,r,n){var o,i;return c(r),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,r.listener||r),o=e._events),i=o[t]),void 0===i?(i=o[t]=r,++e._eventsCount):("function"==typeof i?i=o[t]=n?[r,i]:[i,r]:n?i.unshift(r):i.push(r),0<(o=s(e))&&i.length>o&&!i.warned&&(i.warned=!0,(n=new Error("Possible EventEmitter memory leak detected. "+i.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit")).name="MaxListenersExceededWarning",n.emitter=e,n.type=t,n.count=i.length,console&&console.warn&&console.warn(n))),e}function f(e,t,r){e={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},t=function(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}.bind(e);return t.listener=r,e.wrapFn=t}function l(e,t,r){e=e._events;if(void 0===e)return[];e=e[t];{if(void 0===e)return[];if("function"==typeof e)return r?[e.listener||e]:[e];if(r){for(var n=e,o=new Array(n.length),i=0;i<o.length;++i)o[i]=n[i].listener||n[i];return o}return p(e,e.length)}}function d(e){var t=this._events;if(void 0!==t){t=t[e];if("function"==typeof t)return 1;if(void 0!==t)return t.length}return 0}function p(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function h(r,n,o,i){if("function"==typeof r.on)i.once?r.once(n,o):r.on(n,o);else{if("function"!=typeof r.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof r);r.addEventListener(n,function e(t){i.once&&r.removeEventListener(n,e),o(t)})}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return i},set:function(e){if("number"!=typeof e||e<0||n(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");i=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||n(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return s(this)},o.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n="error"===e,o=this._events;if(void 0!==o)n=n&&void 0===o.error;else if(!n)return!1;if(n){if((i=0<t.length?t[0]:i)instanceof Error)throw i;n=new Error("Unhandled error."+(i?" ("+i.message+")":""));throw n.context=i,n}var i=o[e];if(void 0===i)return!1;if("function"==typeof i)a(i,this,t);else for(var s=i.length,u=p(i,s),r=0;r<s;++r)a(u[r],this,t);return!0},o.prototype.on=o.prototype.addListener=function(e,t){return u(this,e,t,!1)},o.prototype.prependListener=function(e,t){return u(this,e,t,!0)},o.prototype.once=function(e,t){return c(t),this.on(e,f(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return c(t),this.prependListener(e,f(this,e,t)),this},o.prototype.off=o.prototype.removeListener=function(e,t){var r,n,o,i,s;if(c(t),void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(o=-1,i=r.length-1;0<=i;i--)if(r[i]===t||r[i].listener===t){s=r[i].listener,o=i;break}if(o<0)return this;if(0===o)r.shift();else{var u=r;var a=o;for(;a+1<u.length;a++)u[a]=u[a+1];u.pop()}1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,s||t)}return this},o.prototype.removeAllListeners=function(e){var t,r;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){for(var n,o=Object.keys(r),i=0;i<o.length;++i)"removeListener"!==(n=o[i])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;0<=i;i--)this.removeListener(e,t[i]);return this},o.prototype.listeners=function(e){return l(this,e,!0)},o.prototype.rawListeners=function(e){return l(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):d.call(e,t)},o.prototype.listenerCount=d,o.prototype.eventNames=function(){return 0<this._eventsCount?r(this._events):[]}},1180:(e,t,r)=>{"use strict";var n,o,i,s=[r(5525),r(4785),r(8291),r(2709),r(2506),r(9176)],u=-1,a=[],c=!1;function f(){n&&o&&(n=!1,o.length?a=o.concat(a):u=-1,a.length&&l())}function l(){if(!n){n=!(c=!1);for(var e=a.length,t=setTimeout(f);e;){for(o=a,a=[];o&&++u<e;)o[u].run();u=-1,e=a.length}o=null,n=!(u=-1),clearTimeout(t)}}for(var d=-1,p=s.length;++d<p;)if(s[d]&&s[d].test&&s[d].test()){i=s[d].install(l);break}function h(e,t){this.fun=e,this.array=t}h.prototype.run=function(){var e=this.fun,t=this.array;switch(t.length){case 0:return e();case 1:return e(t[0]);case 2:return e(t[0],t[1]);case 3:return e(t[0],t[1],t[2]);default:return e.apply(null,t)}},e.exports=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];a.push(new h(e,t)),c||n||(c=!0,i())}},2709:(e,t,r)=>{"use strict";t.test=function(){return!r.g.setImmediate&&void 0!==r.g.MessageChannel},t.install=function(e){var t=new r.g.MessageChannel;return t.port1.onmessage=e,function(){t.port2.postMessage(0)}}},8291:(e,t,n)=>{"use strict";var o=n.g.MutationObserver||n.g.WebKitMutationObserver;t.test=function(){return o},t.install=function(e){var t=0,e=new o(e),r=n.g.document.createTextNode("");return e.observe(r,{characterData:!0}),function(){r.data=t=++t%2}}},4785:(e,t,r)=>{"use strict";t.test=function(){return"function"==typeof r.g.queueMicrotask},t.install=function(e){return function(){r.g.queueMicrotask(e)}}},2506:(e,t,r)=>{"use strict";t.test=function(){return"document"in r.g&&"onreadystatechange"in r.g.document.createElement("script")},t.install=function(t){return function(){var e=r.g.document.createElement("script");return e.onreadystatechange=function(){t(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},r.g.document.documentElement.appendChild(e),t}}},9176:(e,t)=>{"use strict";t.test=function(){return!0},t.install=function(e){return function(){setTimeout(e,0)}}},5717:e=>{"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){var r;t&&(e.super_=t,(r=function(){}).prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e)}},9134:e=>{e.exports=function(){return"undefined"!=typeof window&&"object"==typeof window.process&&"renderer"===window.process.type||!("undefined"==typeof process||"object"!=typeof process.versions||!process.versions.electron)||"object"==typeof navigator&&"string"==typeof navigator.userAgent&&0<=navigator.userAgent.indexOf("Electron")}},6898:e=>{"use strict";e.exports=e=>!!e&&("symbol"==typeof Symbol.observable&&"function"==typeof e[Symbol.observable]?e===e[Symbol.observable]():"function"==typeof e["@@observable"]&&e===e["@@observable"]())},1528:function(t,r){var n,o;!function(e){"use strict";"object"==typeof t.exports?t.exports=e():(o=[],void 0!==(o="function"==typeof(n=e)?n.apply(r,o):n)&&(t.exports=o))}(function(){"use strict";var t=Object.prototype.toString;function c(e,t){return null!=e&&Object.prototype.hasOwnProperty.call(e,t)}function f(e){if(!e)return 1;if(d(e)&&0===e.length)return 1;if("string"!=typeof e){for(var t in e)if(c(e,t))return;return 1}}function l(e){return t.call(e)}var d=Array.isArray||function(e){return"[object Array]"===t.call(e)};function p(e){var t=parseInt(e);return t.toString()===e?t:e}function e(o){function s(r){return Object.keys(s).reduce(function(e,t){return"create"!==t&&"function"==typeof s[t]&&(e[t]=s[t].bind(s,r)),e},{})}var i,u;function r(e,t){if(i(e,t))return e[t]}function a(e,t,r,n){if(!(t="number"==typeof t?[t]:t)||0===t.length)return e;if("string"==typeof t)return a(e,t.split(".").map(p),r,n);var o=t[0],i=u(e,o);return 1===t.length?(void 0!==i&&n||(e[o]=r),i):(void 0===i&&("number"==typeof t[1]?e[o]=[]:e[o]={}),a(e[o],t.slice(1),r,n))}return i=(o=o||{}).includeInheritedProps?function(){return!0}:function(e,t){return"number"==typeof t&&Array.isArray(e)||c(e,t)},u=o.includeInheritedProps?function(e,t){e=r(e,t="string"!=typeof t&&"number"!=typeof t?String(t):t);if("__proto__"===t||"prototype"===t||"constructor"===t&&"function"==typeof e)throw new Error("For security reasons, object's magic properties cannot be set");return e}:r,s.has=function(e,t){if("number"==typeof t?t=[t]:"string"==typeof t&&(t=t.split(".")),!t||0===t.length)return!!e;for(var r=0;r<t.length;r++){var n=p(t[r]);if(!("number"==typeof n&&d(e)&&n<e.length||(o.includeInheritedProps?n in Object(e):c(e,n))))return!1;e=e[n]}return!0},s.ensureExists=function(e,t,r){return a(e,t,r,!0)},s.set=a,s.insert=function(e,t,r,n){var o=s.get(e,t);n=~~n,d(o)||s.set(e,t,o=[]),o.splice(n,0,r)},s.empty=function(e,t){var r,n;if(!f(t)&&null!=e&&(r=s.get(e,t))){if("string"==typeof r)return s.set(e,t,"");if("boolean"==typeof r||"[object Boolean]"===l(r))return s.set(e,t,!1);if("number"==typeof r)return s.set(e,t,0);if(d(r))r.length=0;else{if("object"!=typeof r||"[object Object]"!==l(r))return s.set(e,t,null);for(n in r)i(r,n)&&delete r[n]}}},s.push=function(e,t){var r=s.get(e,t);d(r)||s.set(e,t,r=[]),r.push.apply(r,Array.prototype.slice.call(arguments,2))},s.coalesce=function(e,t,r){for(var n,o=0,i=t.length;o<i;o++)if(void 0!==(n=s.get(e,t[o])))return n;return r},s.get=function(e,t,r){if(!(t="number"==typeof t?[t]:t)||0===t.length)return e;if(null==e)return r;if("string"==typeof t)return s.get(e,t.split("."),r);var n=p(t[0]),o=u(e,n);return void 0===o?r:1===t.length?o:s.get(e[n],t.slice(1),r)},s.del=function(e,t){if(null==e)return e;if(f(t="number"==typeof t?[t]:t))return e;if("string"==typeof t)return s.del(e,t.split("."));var r=p(t[0]);return u(e,r),i(e,r)?1!==t.length?s.del(e[r],t.slice(1)):(d(e)?e.splice(r,1):delete e[r],e):e},s}var r=e();return r.create=e,r.withInheritedProps=e({includeInheritedProps:!0}),r})},7857:(d,e,t)=>{"use strict";t.r(e),t.d(e,{default:()=>T});var k=t(347),g=t(807),s=t(7239);function n(){this._store={}}function r(e){if(this._store=new n,e&&Array.isArray(e))for(var t=0,r=e.length;t<r;t++)this.add(e[t])}n.prototype.get=function(e){return this._store["$"+e]},n.prototype.set=function(e,t){return this._store["$"+e]=t,!0},n.prototype.has=function(e){return"$"+e in this._store},n.prototype.delete=function(e){var e="$"+e,t=e in this._store;return delete this._store[e],t},n.prototype.forEach=function(e){for(var t=Object.keys(this._store),r=0,n=t.length;r<n;r++){var o=t[r];e(this._store[o],o.substring(1))}},Object.defineProperty(n.prototype,"size",{get:function(){return Object.keys(this._store).length}}),r.prototype.add=function(e){return this._store.set(e,!0)},r.prototype.has=function(e){return this._store.has(e)},r.prototype.forEach=function(r){this._store.forEach(function(e,t){r(t)})},Object.defineProperty(r.prototype,"size",{get:function(){return this._store.size}});var p=function(){var e;if("undefined"!=typeof Symbol&&"undefined"!=typeof Map&&"undefined"!=typeof Set)return e=Object.getOwnPropertyDescriptor(Map,Symbol.species),e&&"get"in e&&Map[Symbol.species]===Map}()?(Set,Map):n,q=t(2733),I=t(8621);function o(e){return e.reduce(function(e,t){return e[t]=!0,e},{})}var h=o(["_id","_rev","_attachments","_deleted","_revisions","_revs_info","_conflicts","_deleted_conflicts","_local_seq","_rev_tree","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats","_removed"]),v=o(["_attachments","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats"]);function l(e){if(!/^\d+-/.test(e))return(0,q.Tr)(q.Dq);var t=e.indexOf("-"),r=e.substring(0,t),e=e.substring(t+1);return{prefix:parseInt(r,10),id:e}}function B(e,t,r){r=r||{deterministic_revs:!0};var n,o,i,s={status:"available"};if(e._deleted&&(s.deleted=!0),t)if(e._id||(e._id=(0,k.Vj)()),o=(0,k.OD)(e,r.deterministic_revs),e._rev){if((i=l(e._rev)).error)return i;e._rev_tree=[{pos:i.prefix,ids:[i.id,{status:"missing"},[[o,s,[]]]]}],n=i.prefix+1}else e._rev_tree=[{pos:1,ids:[o,s,[]]}],n=1;else if(e._revisions&&(e._rev_tree=function(e){for(var t=e.start-e.ids.length+1,r=e.ids,n=[r[0],s,[]],o=1,i=r.length;o<i;o++)n=[r[o],{status:"missing"},[n]];return[{pos:t,ids:n}]}(e._revisions),n=e._revisions.start,o=e._revisions.ids[0]),!e._rev_tree){if((i=l(e._rev)).error)return i;n=i.prefix,o=i.id,e._rev_tree=[{pos:n,ids:[o,s,[]]}]}(0,k.GE)(e._id),e._rev=n+"-"+o;var u,a={metadata:{},data:{}};for(u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var c,f="_"===u[0];if(f&&!h[u])throw(c=(0,q.Tr)(q.cI,u)).message=q.cI.message+": "+u,c;f&&!v[u]?a.metadata[u.slice(1)]=e[u]:a.data[u]=e[u]}return a}function G(e,t,r){if(e.stub)return r();var n,o,i;"string"==typeof e.data?function(t,e,r){var n=function(e){try{return(0,g.ty)(e)}catch(e){return{error:(0,q.Tr)(q.eC,"Attachment is not a valid base64 string")}}}(t.data);if(n.error)return r(n.error);t.length=n.length,t.data="blob"===e?(0,g.sG)(n,t.content_type):"base64"===e?(0,g.r3)(n):n,(0,s.u)(n,function(e){t.digest="md5-"+e,r()})}(e,t,r):(n=e,o=t,i=r,(0,s.u)(n.data,function(e){n.digest="md5-"+e,n.length=n.data.size||n.data.length||0,"binary"===o?(0,g.bk)(n.data,function(e){n.data=e,i()}):"base64"===o?(0,g.Tn)(n.data,function(e){n.data=e,i()}):i()}))}function Y(m,e,n,_,o,b,w,k,t){m=m||1e3;var j=k.new_edits,i=new p,r=0,s=e.length;function u(){++r===s&&t&&t()}e.forEach(function(e,r){var t;e._id&&(0,I.zB)(e._id)?(t=e._deleted?"_removeLocal":"_putLocal",n[t](e,{ctx:o},function(e,t){b[r]=e||t,u()})):(t=e.metadata.id,i.has(t)?(s--,i.get(t).push([e,r])):i.set(t,[[e,r]]))}),i.forEach(function(h,v){var y=0;function g(){(++y<h.length?e:u)()}function e(){var e,t,r,n,o,i,s,u,a,c,f,l,d=h[y],p=d[0],d=d[1];_.has(v)?(e=m,t=_.get(v),r=p,n=b,o=d,i=g,s=w,u=j,(0,I.FS)(t.rev_tree,r.metadata.rev)&&!u?(n[o]=r,i()):(l=t.winningRev||(0,I.S)(t),a="deleted"in t?t.deleted:(0,I.uY)(t,l),c="deleted"in r.metadata?r.metadata.deleted:(0,I.uY)(r.metadata),f=/^1-/.test(r.metadata.rev),a&&!c&&u&&f&&((f=r.data)._rev=l,f._id=r.metadata.id,r=B(f,u)),l=(0,I.TS)(t.rev_tree,r.metadata.rev_tree[0],e),u&&(a&&c&&"new_leaf"!==l.conflicts||!a&&"new_leaf"!==l.conflicts||a&&!c&&"new_branch"===l.conflicts)?(f=(0,q.Tr)(q.gW),n[o]=f,i()):(e=r.metadata.rev,r.metadata.rev_tree=l.tree,r.stemmedRevs=l.stemmedRevs||[],t.rev_map&&(r.metadata.rev_map=t.rev_map),u=(0,I.S)(r.metadata),c=(0,I.uY)(r.metadata,u),n=a===c?0:a<c?-1:1,s(r,u,c,e===u?c:(0,I.uY)(r.metadata,e),!0,n,o,i)))):(f=(0,I.TS)([],p.metadata.rev_tree[0],m),p.metadata.rev_tree=f.tree,p.stemmedRevs=f.stemmedRevs||[],l=p,t=d,a=g,s=(0,I.S)(l.metadata),u=(0,I.uY)(l.metadata,s),"was_delete"in k&&u?(b[t]=(0,q.Tr)(q.Uc,"deleted"),a()):j&&"missing"===l.metadata.rev_tree[0].ids[1].status?(c=(0,q.Tr)(q.gW),b[t]=c,a()):w(l,s,u,u,!1,u?0:1,t,a))}e()})}var a,i=t(3684);function u(){this._store={}}function c(e){if(this._store=new u,e&&Array.isArray(e))for(var t=0,r=e.length;t<r;t++)this.add(e[t])}u.prototype.get=function(e){return this._store["$"+e]},u.prototype.set=function(e,t){return this._store["$"+e]=t,!0},u.prototype.has=function(e){return"$"+e in this._store},u.prototype.delete=function(e){var e="$"+e,t=e in this._store;return delete this._store[e],t},u.prototype.forEach=function(e){for(var t=Object.keys(this._store),r=0,n=t.length;r<n;r++){var o=t[r];e(this._store[o],o.substring(1))}},Object.defineProperty(u.prototype,"size",{get:function(){return Object.keys(this._store).length}}),c.prototype.add=function(e){return this._store.set(e,!0)},c.prototype.has=function(e){return this._store.has(e)},c.prototype.forEach=function(r){this._store.forEach(function(e,t){r(t)})},Object.defineProperty(c.prototype,"size",{get:function(){return this._store.size}});var C=function(){var e;if("undefined"!=typeof Symbol&&"undefined"!=typeof Map&&"undefined"!=typeof Set)return e=Object.getOwnPropertyDescriptor(Map,Symbol.species),e&&"get"in e&&Map[Symbol.species]===Map}()?(a=Set,Map):(a=c,u),L="document-store",R="by-sequence",z="attach-store",U="attach-seq-store",N="meta-store",F="local-store",m="detect-blob-support";function W(r){return function(e){var t="unknown_error";e.target&&e.target.error&&(t=e.target.error.name||e.target.error.message),r((0,q.Tr)(q.cG,t,e.type))}}function K(e,t,r){return{data:function(t){try{return JSON.stringify(t)}catch(e){return i.stringify(t)}}(e),winningRev:t,deletedOrLocal:r?"1":"0",seq:e.seq,id:e.id}}function V(e){if(!e)return null;var t=function(t){try{return JSON.parse(t)}catch(e){return i.parse(t)}}(e.data);return t.winningRev=e.winningRev,t.deleted="1"===e.deletedOrLocal,t.seq=e.seq,t}function A(e){if(!e)return e;var t=e._doc_id_rev.lastIndexOf(":");return e._id=e._doc_id_rev.substring(0,t-1),e._rev=e._doc_id_rev.substring(t+1),delete e._doc_id_rev,e}function O(e,t,r,n){r?n(e?"string"!=typeof e?e:(0,g.W7)(e,t):(0,g.Ik)([""],{type:t})):e?"string"!=typeof e?(0,g.fM)(e,function(e){n((0,g.r3)(e))}):n(e):n("")}function D(n,o,i,e){var t=Object.keys(n._attachments||{});if(!t.length)return e&&e();var r=0;function s(){++r===t.length&&e&&e()}t.forEach(function(e){var t,r;o.attachments&&o.include_docs?(t=n._attachments[e],r=t.digest,i.objectStore(z).get(r).onsuccess=function(e){t.body=e.target.result.body,s()}):(n._attachments[e].stub=!0,s())})}function E(e,s){return Promise.all(e.map(function(i){var e;if(i.doc&&i.doc._attachments)return e=Object.keys(i.doc._attachments),Promise.all(e.map(function(r){var e,n,o=i.doc._attachments[r];if("body"in o)return e=o.body,n=o.content_type,new Promise(function(t){O(e,n,s,function(e){i.doc._attachments[r]=(0,k.f0)((0,k.ei)(o,["digest","content_type"]),{data:e}),t()})})}))}))}function H(e,t,r){var n=[],o=r.objectStore(R),i=r.objectStore(z),s=r.objectStore(U),u=e.length;function a(){--u||n.length&&n.forEach(function(t){s.index("digestSeq").count(IDBKeyRange.bound(t+"::",t+"::￿",!1,!1)).onsuccess=function(e){e.target.result||i.delete(t)}})}e.forEach(function(e){o.index("_doc_id_rev").getKey(t+"::"+e).onsuccess=function(e){e=e.target.result;if("number"!=typeof e)return a();o.delete(e),s.index("seq").openCursor(IDBKeyRange.only(e)).onsuccess=function(e){var t,e=e.target.result;e?(t=e.value.digestSeq.split("::")[0],n.push(t),s.delete(e.primaryKey),e.continue()):a()}}})}function J(e,t,r){try{return{txn:e.transaction(t,r)}}catch(e){return{error:e}}}var Q=new k.b6;function x(u,e,a,d,t,c){for(var p,h,v,_,y,r,n,f,l=e.docs,o=0,i=l.length;o<i;o++){var s=l[o];s._id&&(0,I.zB)(s._id)||(s=l[o]=B(s,a.new_edits,u)).error&&!n&&(n=s)}if(n)return c(n);var g=!1,b=0,m=new Array(l.length),w=new C,k=!1,e=d._meta.blobSupport?"blob":"base64";function j(){g=!0,O()}function O(){f&&g&&(f.docCount+=b,r.put(f))}function x(){k||(Q.notify(d._meta.name),c(null,m))}function S(e,t,r,n,o,i,s,u){e.metadata.winningRev=t,e.metadata.deleted=r;var a,c,f,l,d,p,h,v,y=e.data;if(y._id=e.metadata.id,y._rev=e.metadata.rev,n&&(y._deleted=!0),y._attachments&&Object.keys(y._attachments).length)return c=t,f=r,l=o,d=s,p=u,n=(a=e).data,h=0,void(v=Object.keys(n._attachments)).forEach(function(e){var t,r,n,o,e=a.data._attachments[e];e.stub?(h++,g()):(t=e.data,delete e.data,e.revpos=parseInt(c,10),r=e.digest,n=t,o=m,_.count(r).onsuccess=function(e){if(e.target.result)return o();_.put({digest:r,body:n}).onsuccess=o})});function g(){h===v.length&&P(a,c,f,l,d,p)}function m(){h++,g()}b+=i,O(),P(e,t,r,o,s,u)}function P(a,r,n,o,c,f){var t=a.data,l=a.metadata;function i(e){var t=a.stemmedRevs||[],t=((t=o&&d.auto_compaction?t.concat((0,I.UB)(a.metadata)):t)&&t.length&&H(t,a.metadata.id,p),l.seq=e.target.result,K(l,r,n));h.put(t).onsuccess=s}function s(){m[c]={ok:!0,id:l.id,rev:l.rev},w.set(a.metadata.id,a.metadata);var e=a,t=l.seq,r=f,n=0,o=Object.keys(e.data._attachments||{});if(o.length)for(var i,s=0;s<o.length;s++)i=o[s],i=e.data._attachments[i].digest,(i=y.put({seq:t,digestSeq:i+"::"+t})).onsuccess=u,i.onerror=function(e){e.preventDefault(),e.stopPropagation(),u()};else r();function u(){++n===o.length&&r()}}t._doc_id_rev=l.id+"::"+l.rev,delete t._id,delete t._rev;var e=v.put(t);e.onsuccess=i,e.onerror=function(e){e.preventDefault(),e.stopPropagation(),v.index("_doc_id_rev").getKey(t._doc_id_rev).onsuccess=function(e){v.put(t,e.target.result).onsuccess=i}}}var A,E,D=l,M=e,$=function(e){if(e)return c(e);var n,o,i,s,e=J(t,[L,R,z,F,U,N],"readwrite");e.error?c(e.error):((p=e.txn).onabort=W(c),p.ontimeout=W(c),p.oncomplete=x,h=p.objectStore(L),v=p.objectStore(R),_=p.objectStore(z),y=p.objectStore(U),(r=p.objectStore(N)).get(N).onsuccess=function(e){f=e.target.result,O()},i=function(e){if(e)return k=!0,c(e);if(l.length)for(var t=0,r=0,n=l.length;r<n;r++){var o=l[r];o._id&&(0,I.zB)(o._id)?i():h.get(o.metadata.id).onsuccess=s}function i(){++t===l.length&&Y(u.revs_limit,l,d,w,p,m,S,a,j)}function s(e){e=V(e.target.result);e&&w.set(e.id,e),i()}},s=[],l.forEach(function(t){t.data&&t.data._attachments&&Object.keys(t.data._attachments).forEach(function(e){e=t.data._attachments[e];e.stub&&s.push(e.digest)})}),s.length?(o=0,s.forEach(function(e){var t,r;t=e,r=function(e){e&&!n&&(n=e),++o===s.length&&i(n)},_.get(t).onsuccess=function(e){e.target.result?r():((e=(0,q.Tr)(q.wp,"unknown stub attachment with digest "+t)).status=412,r(e))}})):i())};function T(){E++,D.length===E&&(A?$(A):$())}D.length?(E=0,D.forEach(function(e){var t,r=e.data&&e.data._attachments?Object.keys(e.data._attachments):[],n=0;if(!r.length)return T();function o(e){A=e,++n===r.length&&T()}for(t in e.data._attachments)e.data._attachments.hasOwnProperty(t)&&G(e.data._attachments[t],M,o)})):$()}function M(r,n,e,o,i){var s,u,t;function a(e){u=e.target.result,s&&i(s,u,t)}function c(e){s=e.target.result,u&&i(s,u,t)}function f(e){e=e.target.result;if(!e)return i();i([e.key],[e.value],e)}-1===o&&(o=1e3),"function"==typeof r.getAll&&"function"==typeof r.getAllKeys&&1<o&&!e?(t={continue:function(){if(!s.length)return i();var e,t=s[s.length-1];if(n&&n.upper)try{e=IDBKeyRange.bound(t,n.upper,!0,n.upperOpen)}catch(e){if("DataError"===e.name&&0===e.code)return i()}else e=IDBKeyRange.lowerBound(t,!0);n=e,u=s=null,r.getAll(n,o).onsuccess=a,r.getAllKeys(n,o).onsuccess=c}},r.getAll(n,o).onsuccess=a,r.getAllKeys(n,o).onsuccess=c):e?r.openCursor(n,"prev").onsuccess=f:r.openCursor(n).onsuccess=f}function S(i,e,t){var r,n,o="startkey"in i&&i.startkey,s="endkey"in i&&i.endkey,u="key"in i&&i.key,a="keys"in i&&i.keys,c=i.skip||0,f="number"==typeof i.limit?i.limit:-1,l=!1!==i.inclusive_end;if(!a&&((n=(r=function(e,t,r,n,o){try{if(e&&t)return o?IDBKeyRange.bound(t,e,!r,!1):IDBKeyRange.bound(e,t,!1,!r);if(e)return o?IDBKeyRange.upperBound(e):IDBKeyRange.lowerBound(e);if(t)return o?IDBKeyRange.lowerBound(t,!r):IDBKeyRange.upperBound(t,!r);if(n)return IDBKeyRange.only(n)}catch(e){return{error:e}}return null}(o,s,l,u,i.descending))&&r.error)&&("DataError"!==n.name||0!==n.code)))return t((0,q.Tr)(q.cG,n.name,n.message));o=[L,R,N],i.attachments&&o.push(z),s=J(e,o,"readonly");if(s.error)return t(s.error);var d=s.txn;d.oncomplete=function(){i.attachments?E(O,i.binary).then(P):P()},d.onabort=W(t);var p,h,v,y,g,m,_,b,w,k,l=d.objectStore(L),u=d.objectStore(R),e=d.objectStore(N),j=u.index("_doc_id_rev"),O=[];function x(e){for(var t=0,r=e.length;t<r&&O.length!==f;t++){var n=e[t];n.error&&a?O.push(n):function(e,t){var r,n,o={id:t.id,key:t.id,value:{rev:e}};t.deleted?a&&(O.push(o),o.value.deleted=!0,o.doc=null):c--<=0&&(O.push(o),i.include_docs&&(n=o,o=(r=t).id+"::"+e,j.get(o).onsuccess=function(e){n.doc=A(e.target.result)||{},i.conflicts&&(e=(0,I.DJ)(r)).length&&(n.doc._conflicts=e),D(n.doc,i,d)}))}((n=V(n)).winningRev,n)}}function S(e,t,r){r&&(x(t),O.length<f&&r.continue())}function P(){var e={total_rows:p,offset:i.skip,rows:O};i.update_seq&&void 0!==h&&(e.update_seq=h),t(null,e)}e.get(N).onsuccess=function(e){p=e.target.result.docCount},i.update_seq&&(k=function(e){e.target.result&&0<e.target.result.length&&(h=e.target.result[0])},u.openCursor(null,"prev").onsuccess=function(e){var e=e.target.result,t=void 0;return e&&e.key&&(t=e.key),k({target:{result:[t]}})}),n||0===f||(a?(g=i.keys,m=l,_=S,b=new Array(g.length),w=0,g.forEach(function(t,r){m.get(t).onsuccess=function(e){e.target.result?b[r]=e.target.result:b[r]={key:t,error:"not_found"},++w===g.length&&_(g,b,{})}})):-1===f?(o=r,v=function(e){e=e.target.result;x(e=i.descending?e.reverse():e)},"function"!=typeof(s=l).getAll?(y=[],s.openCursor(o).onsuccess=function(e){e=e.target.result;e?(y.push(e.value),e.continue()):v({target:{result:y}})}):s.getAll(o).onsuccess=v):M(l,r,i.descending,f+c,S))}var _=!1,f=[];function P(){!_&&f.length&&(_=!0,f.shift()())}function $(p,e,t,r){var n;if((p=(0,k.d9)(p)).continuous)return n=t+":"+(0,k.Vj)(),Q.addListener(t,n,e,p),Q.notify(t),{cancel:function(){Q.removeListener(t,n)}};var i=p.doc_ids&&new a(p.doc_ids),h=(p.since=p.since||0,p.since),v="limit"in p?p.limit:-1;0===v&&(v=1);var y,s,o,g=[],m=0,_=(0,k.sP)(p),b=new C;function w(e,t,r,n){if(r.seq!==t)return n();if(r.winningRev===e._rev)return n(r,e);t=e._id+"::"+r.winningRev;o.get(t).onsuccess=function(e){n(r,A(e.target.result))}}function u(){p.complete(null,{results:g,last_seq:h})}var e=[L,R],r=(p.attachments&&e.push(z),J(r,e,"readonly"));if(r.error)return p.complete(r.error);(y=r.txn).onabort=W(p.complete),y.oncomplete=function(){!p.continuous&&p.attachments?E(g).then(u):u()},e=y.objectStore(R),s=y.objectStore(L),o=e.index("_doc_id_rev"),M(e,p.since&&!p.descending?IDBKeyRange.lowerBound(p.since,!0):null,p.descending,v,function(a,e,c){var f,l,d;c&&a.length&&(f=new Array(a.length),l=new Array(a.length),d=0,e.forEach(function(e,u){var t,r,n,o;t=A(e),r=a[u],n=function(e,t){if(l[u]=e,f[u]=t,++d===a.length){for(var r=[],n=0,o=f.length;n<o&&m!==v;n++){var i,s=f[n];s&&(i=l[n],r.push(function(e,t){var r=p.processChange(t,e,p),e=(h=r.seq=e.seq,_(r));return"object"==typeof e?Promise.reject(e):e?(m++,p.return_docs&&g.push(r),p.attachments&&p.include_docs?new Promise(function(e){D(t,p,y,function(){E([r],p.binary).then(function(){e(r)})})}):Promise.resolve(r)):Promise.resolve()}(i,s)))}Promise.all(r).then(function(e){for(var t=0,r=e.length;t<r;t++)e[t]&&p.onChange(e[t])}).catch(p.complete),m!==v&&c.continue()}},i&&!i.has(t._id)?n():(o=b.get(t._id))?w(t,r,o,n):s.get(t._id).onsuccess=function(e){o=V(e.target.result),b.set(t._id,o),w(t,r,o,n)}}))})}var b,w=new C,j=new C;function y(t,e){var o,y,r=this;o=e,y=r.constructor,f.push(function(){function i(e){var t=e.createObjectStore(L,{keyPath:"id"}),t=(e.createObjectStore(R,{autoIncrement:!0}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0}),e.createObjectStore(z,{keyPath:"digest"}),e.createObjectStore(N,{keyPath:"id",autoIncrement:!1}),e.createObjectStore(m),t.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1}),e.createObjectStore(F,{keyPath:"_id"}),e.createObjectStore(U,{autoIncrement:!0}));t.createIndex("seq","seq"),t.createIndex("digestSeq","digestSeq",{unique:!0})}function s(e,n){var o=e.objectStore(L);o.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1}),o.openCursor().onsuccess=function(e){var t,r,e=e.target.result;e?(t=e.value,r=(0,I.uY)(t),t.deletedOrLocal=r?"1":"0",o.put(t),e.continue()):n()}}function u(e){e.createObjectStore(F,{keyPath:"_id"}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0})}function a(e,s){var u=e.objectStore(F),a=e.objectStore(L),c=e.objectStore(R);a.openCursor().onsuccess=function(e){var t,r,n,o,i=e.target.result;i?(r=(e=i.value).id,n=(0,I.zB)(r),e=(0,I.S)(e),n?(t=r+"::"+e,n=r+"::",e=r+"::~",r=c.index("_doc_id_rev"),n=IDBKeyRange.bound(n,e,!1,!1),(o=r.openCursor(n)).onsuccess=function(e){(o=e.target.result)?((e=o.value)._doc_id_rev===t&&u.put(e),c.delete(o.primaryKey),o.continue()):(a.delete(i.primaryKey),i.continue())}):i.continue()):s&&s()}}function c(e){e=e.createObjectStore(U,{autoIncrement:!0});e.createIndex("seq","seq"),e.createIndex("digestSeq","digestSeq",{unique:!0})}function f(e,a){var t=e.objectStore(R),r=e.objectStore(z),c=e.objectStore(U);r.count().onsuccess=function(e){if(!e.target.result)return a();t.openCursor().onsuccess=function(e){e=e.target.result;if(!e)return a();for(var t=e.value,r=e.primaryKey,n=Object.keys(t._attachments||{}),o={},i=0;i<n.length;i++)o[t._attachments[n[i]].digest]=!0;for(var s=Object.keys(o),i=0;i<s.length;i++){var u=s[i];c.put({seq:r,digestSeq:u+"::"+r})}e.continue()}}}function l(e){var s=e.objectStore(R),u=e.objectStore(L);u.openCursor().onsuccess=function(e){var t,r,n=e.target.result;if(n){var o=(e=n.value).data?V(e):(e.deleted="1"===e.deletedOrLocal,e);if(o.winningRev=o.winningRev||(0,I.S)(o),o.seq)return i();e=o.id+"::",t=o.id+"::￿",e=s.index("_doc_id_rev").openCursor(IDBKeyRange.bound(e,t)),r=0,e.onsuccess=function(e){e=e.target.result;if(!e)return o.seq=r,i();var t=e.primaryKey;r<t&&(r=t),e.continue()}}function i(){var e=K(o,o.winningRev,o.deleted);u.put(e).onsuccess=function(){n.continue()}}}}var d,n,p,h,v,e;d=r,p=function(e,t){var r=o,n=e,e=t,t=y;try{r(n,e)}catch(n){t.emit("error",n)}(_=!1,k.Y3)(function(){P()})},h=(n=t).name,v=null,d._meta=null,d._remote=!1,d.type=function(){return"idb"},d._id=(0,k.Vi)(function(e){e(null,d._meta.instanceId)}),d._bulkDocs=function(e,t,r){x(n,e,t,d,v,r)},d._get=function(e,r,t){var n,o,i,s=r.ctx;if(!s){var u=J(v,[L,R,z],"readonly");if(u.error)return t(u.error);s=u.txn}function a(){t(i,{doc:n,metadata:o,ctx:s})}s.objectStore(L).get(e).onsuccess=function(e){if(!(o=V(e.target.result)))return i=(0,q.Tr)(q.Uc,"missing"),a();if(r.rev)t=r.latest?(0,I.pA)(r.rev,o):r.rev;else if(t=o.winningRev,(0,I.uY)(o))return i=(0,q.Tr)(q.Uc,"deleted"),a();var e=s.objectStore(R),t=o.id+"::"+t;e.index("_doc_id_rev").get(t).onsuccess=function(e){if(!(n=(n=e.target.result)?A(n):n))return i=(0,q.Tr)(q.Uc,"missing"),a();a()}}},d._getAttachment=function(e,t,r,n,o){var i;if(n.ctx)i=n.ctx;else{var s=J(v,[L,R,z],"readonly");if(s.error)return o(s.error);i=s.txn}var s=r.digest,u=r.content_type;i.objectStore(z).get(s).onsuccess=function(e){O(e.target.result.body,u,n.binary,function(e){o(null,e)})}},d._info=function(e){var t,r,n=J(v,[N,R],"readonly");if(n.error)return e(n.error);n=n.txn;n.objectStore(N).get(N).onsuccess=function(e){r=e.target.result.docCount},n.objectStore(R).openCursor(null,"prev").onsuccess=function(e){e=e.target.result;t=e?e.key:0},n.oncomplete=function(){e(null,{doc_count:r,update_seq:t,idb_attachment_format:d._meta.blobSupport?"binary":"base64"})}},d._allDocs=function(e,t){S(e,v,t)},d._changes=function(e){return $(e,d,h,v)},d._close=function(e){v.close(),w.delete(h),e()},d._getRevisionTree=function(e,t){var r=J(v,[L],"readonly");if(r.error)return t(r.error);r.txn.objectStore(L).get(e).onsuccess=function(e){e=V(e.target.result);e?t(null,e.rev_tree):t((0,q.Tr)(q.Uc))}},d._doCompaction=function(n,i,e){var t=J(v,[L,R,z,U],"readwrite");if(t.error)return e(t.error);var o=t.txn;o.objectStore(L).get(n).onsuccess=function(e){var e=V(e.target.result),t=((0,I.fE)(e.rev_tree,function(e,t,r,n,o){-1!==i.indexOf(t+"-"+r)&&(o.status="missing")}),H(i,n,o),e.winningRev),r=e.deleted;o.objectStore(L).put(K(e,t,r))},o.onabort=W(e),o.oncomplete=function(){e()}},d._getLocal=function(e,t){var r=J(v,[F],"readonly");if(r.error)return t(r.error);r=r.txn.objectStore(F).get(e);r.onerror=W(t),r.onsuccess=function(e){e=e.target.result;e?(delete e._doc_id_rev,t(null,e)):t((0,q.Tr)(q.Uc))}},d._putLocal=function(t,r,n){"function"==typeof r&&(n=r,r={}),delete t._revisions;var o=t._rev,e=t._id;t._rev=o?"0-"+(parseInt(o.split("-")[1],10)+1):"0-1";var i,s=r.ctx;if(!s){var u=J(v,[F],"readwrite");if(u.error)return n(u.error);(s=u.txn).onerror=W(n),s.oncomplete=function(){i&&n(null,i)}}var a,c=s.objectStore(F);o?(a=c.get(e)).onsuccess=function(e){e=e.target.result;e&&e._rev===o?c.put(t).onsuccess=function(){i={ok:!0,id:t._id,rev:t._rev},r.ctx&&n(null,i)}:n((0,q.Tr)(q.gW))}:((a=c.add(t)).onerror=function(e){n((0,q.Tr)(q.gW)),e.preventDefault(),e.stopPropagation()},a.onsuccess=function(){i={ok:!0,id:t._id,rev:t._rev},r.ctx&&n(null,i)})},d._removeLocal=function(t,r,n){"function"==typeof r&&(n=r,r={});var o,e=r.ctx;if(!e){var i=J(v,[F],"readwrite");if(i.error)return n(i.error);(e=i.txn).oncomplete=function(){o&&n(null,o)}}var s=t._id,u=e.objectStore(F),i=u.get(s);i.onerror=W(n),i.onsuccess=function(e){e=e.target.result;e&&e._rev===t._rev?(u.delete(s),o={ok:!0,id:s,rev:"0-0"},r.ctx&&n(null,o)):n((0,q.Tr)(q.Uc))}},d._destroy=function(e,t){Q.removeAllListeners(h);var r=j.get(h),r=(r&&r.result&&(r.result.close(),w.delete(h)),indexedDB.deleteDatabase(h));r.onsuccess=function(){j.delete(h),(0,k.eW)()&&h in localStorage&&delete localStorage[h],t(null,{ok:!0})},r.onerror=W(t)},(e=w.get(h))?(v=e.idb,d._meta=e.global,(0,k.Y3)(function(){p(null,d)})):(e=indexedDB.open(h,5),j.set(h,e),e.onupgradeneeded=function(e){var t=e.target.result;if(e.oldVersion<1)return i(t);var r=e.currentTarget.transaction,n=(e.oldVersion<3&&u(t),e.oldVersion<4&&c(t),[s,a,f,l]),o=e.oldVersion;!function e(){var t=n[o-1];o++,t&&t(r,e)}()},e.onsuccess=function(e){(v=e.target.result).onversionchange=function(){v.close(),w.delete(h)},v.onabort=function(e){(0,k.yq)("error","Database has a global failure",e.target.error),v.close(),w.delete(h)};var t,r,n,o,i,s=v.transaction([N,m,L],"readwrite"),u=!1;function a(){void 0!==n&&u&&(d._meta={name:h,instanceId:o,blobSupport:n},w.set(h,{idb:v,global:d._meta}),p(null,d))}function c(){var e;void 0!==r&&void 0!==t&&((e=h+"_id")in t?o=t[e]:t[e]=o=(0,k.Vj)(),t.docCount=r,s.objectStore(N).put(t))}s.objectStore(N).get(N).onsuccess=function(e){t=e.target.result||{id:N},c()},s.objectStore(L).index("deletedOrLocal").count(IDBKeyRange.only("0")).onsuccess=function(e){e=e.target.result,r=e,c()},b||(i=s,b=new Promise(function(r){var e=(0,g.Ik)([""]),e=i.objectStore(m).put(e,"key");e.onsuccess=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),t=navigator.userAgent.match(/Edge\//);r(t||!e||43<=parseInt(e[1],10))},e.onerror=i.onabort=function(e){e.preventDefault(),e.stopPropagation(),r(!1)}}).catch(function(){return!1})),b.then(function(e){n=e,a()}),s.oncomplete=function(){u=!0,a()},s.onabort=W(p)},e.onerror=function(e){e=e.target.error&&e.target.error.message;e?-1!==e.indexOf("stored database is a higher version")&&(e=new Error('This DB was created with the newer "indexeddb" adapter, but you are trying to open it with the older "idb" adapter')):e="Failed to open indexedDB, are you in private browsing mode?",(0,k.yq)("error",e),p((0,q.Tr)(q.cG,e))})}),P()}y.valid=function(){try{return"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(e){return!1}};const T=function(e){e.adapter("idb",y,!0)}},807:(e,t,r)=>{"use strict";r.d(t,{Ik:()=>i,LX:()=>function(e,t){var r=new FileReader;r.onloadend=function(e){e=e.target.result||new ArrayBuffer(0);t(e)},r.readAsArrayBuffer(e)},Tn:()=>function(e,t){a(e,function(e){t(o(e))})},W7:()=>function(e,t){return s(n(e),t)},bk:()=>a,fM:()=>u,r3:()=>o,sG:()=>s,ty:()=>n});var n=function(e){return atob(e)},o=function(e){return btoa(e)};function i(t,r){t=t||[],r=r||{};try{return new Blob(t,r)}catch(e){if("TypeError"!==e.name)throw e;for(var n=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),o=0;o<t.length;o+=1)n.append(t[o]);return n.getBlob(r.type)}}function s(e,t){return i([function(e){for(var t=e.length,r=new ArrayBuffer(t),n=new Uint8Array(r),o=0;o<t;o++)n[o]=e.charCodeAt(o);return r}(e)],{type:t})}function u(e,t){var r=new FileReader,n="function"==typeof r.readAsBinaryString;r.onloadend=function(e){var o=e.target.result||"";if(n)return t(o);t(function(){for(var e="",t=new Uint8Array(o),r=t.byteLength,n=0;n<r;n++)e+=String.fromCharCode(t[n]);return e}())},n?r.readAsBinaryString(e):r.readAsArrayBuffer(e)}function a(e,t){u(e,function(e){t(e)})}},2733:(e,t,r)=>{"use strict";r.d(t,{Dq:()=>g,G3:()=>function(e){{var t;"object"!=typeof e&&(t=e,(e=f).data=t)}return"error"in e&&"conflict"===e.error&&(e.name="conflict",e.status=409),"name"in e||(e.name=e.error||"unknown"),"status"in e||(e.status=500),"message"in e||(e.message=e.message||e.reason),e},I4:()=>f,JE:()=>u,Tr:()=>function(o,e){function t(e){for(var t=Object.getOwnPropertyNames(o),r=0,n=t.length;r<n;r++)"function"!=typeof o[t[r]]&&(this[t[r]]=o[t[r]]);void 0!==e&&(this.reason=e)}return t.prototype=n.prototype,new t(e)},Uc:()=>i,Xt:()=>a,bi:()=>d,cG:()=>y,cI:()=>p,eC:()=>l,gW:()=>s,kD:()=>o,nM:()=>v,wp:()=>m,y3:()=>h,zG:()=>c});t=r(5717);function n(e,t,r){Error.call(this,r),this.status=e,this.name=t,this.message=r,this.error=!0}r.n(t)()(n,Error),n.prototype.toString=function(){return JSON.stringify({status:this.status,name:this.name,message:this.message,reason:this.reason})},new n(401,"unauthorized","Name or password is incorrect.");var o=new n(400,"bad_request","Missing JSON list of 'docs'"),i=new n(404,"not_found","missing"),s=new n(409,"conflict","Document update conflict"),u=new n(400,"bad_request","_id field must contain a string"),a=new n(412,"missing_id","_id is required for puts"),c=new n(400,"bad_request","Only reserved document ids may start with underscore."),f=(new n(412,"precondition_failed","Database not open"),new n(500,"unknown_error","Database encountered an unknown error")),l=new n(500,"badarg","Some query argument is invalid"),d=(new n(400,"invalid_request","Request was invalid"),new n(400,"query_parse_error","Some query parameter is invalid")),p=new n(500,"doc_validation","Bad special document member"),h=new n(400,"bad_request","Something wrong with the request"),v=new n(400,"bad_request","Document must be a JSON object"),y=(new n(404,"not_found","Database not found"),new n(500,"indexed_db_went_bad","unknown")),g=(new n(500,"web_sql_went_bad","unknown"),new n(500,"levelDB_went_went_bad","unknown"),new n(403,"forbidden","Forbidden by design doc validate_doc_update function"),new n(400,"bad_request","Invalid rev format")),m=(new n(412,"file_exists","The database could not be created, the file already exists."),new n(412,"missing_stub","A pre-existing attachment stub wasn't found"));new n(413,"invalid_url","Provided URL is invalid")},7239:(e,t,r)=>{"use strict";r.d(t,{$:()=>function(e){return p().hash(e)},u:()=>function(t,r){var e="string"==typeof t,n=e?t.length:t.size,o=Math.min(32768,n),i=Math.ceil(n/o),s=0,u=new(e?p():p().ArrayBuffer),a=e?y:v;function c(){h(l)}function f(){e=u.end(!0);var e=(0,d.r3)(e);r(e),u.destroy()}function l(){var e=s*o;a(u,t,e,e+o,++s<i?c:f)}l()}});var d=r(807),t=r(1368),p=r.n(t),h=self.setImmediate||self.setTimeout;function v(t,e,r,n,o){var i;(0<r||n<e.size)&&(r=r,n=n,e=(i=e).webkitSlice?i.webkitSlice(r,n):i.slice(r,n)),(0,d.LX)(e,function(e){t.append(e),o()})}function y(e,t,r,n,o){(0<r||n<t.length)&&(t=t.substring(r,n)),e.appendBinary(t),o()}},1368:e=>{e.exports=function(){"use strict";var n=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function a(e,t){var r=e[0],n=e[1],o=e[2],i=e[3],n=((n+=((o=((o+=((i=((i+=((r=((r+=(n&o|~n&i)+t[0]-680876936|0)<<7|r>>>25)+n|0)&n|~r&o)+t[1]-389564586|0)<<12|i>>>20)+r|0)&r|~i&n)+t[2]+606105819|0)<<17|o>>>15)+i|0)&i|~o&r)+t[3]-1044525330|0)<<22|n>>>10)+o|0;n=((n+=((o=((o+=((i=((i+=((r=((r+=(n&o|~n&i)+t[4]-176418897|0)<<7|r>>>25)+n|0)&n|~r&o)+t[5]+1200080426|0)<<12|i>>>20)+r|0)&r|~i&n)+t[6]-1473231341|0)<<17|o>>>15)+i|0)&i|~o&r)+t[7]-45705983|0)<<22|n>>>10)+o|0,n=((n+=((o=((o+=((i=((i+=((r=((r+=(n&o|~n&i)+t[8]+1770035416|0)<<7|r>>>25)+n|0)&n|~r&o)+t[9]-1958414417|0)<<12|i>>>20)+r|0)&r|~i&n)+t[10]-42063|0)<<17|o>>>15)+i|0)&i|~o&r)+t[11]-1990404162|0)<<22|n>>>10)+o|0,n=((n+=((o=((o+=((i=((i+=((r=((r+=(n&o|~n&i)+t[12]+1804603682|0)<<7|r>>>25)+n|0)&n|~r&o)+t[13]-40341101|0)<<12|i>>>20)+r|0)&r|~i&n)+t[14]-1502002290|0)<<17|o>>>15)+i|0)&i|~o&r)+t[15]+1236535329|0)<<22|n>>>10)+o|0,n=((n+=((o=((o+=((i=((i+=((r=((r+=(n&i|o&~i)+t[1]-165796510|0)<<5|r>>>27)+n|0)&o|n&~o)+t[6]-1069501632|0)<<9|i>>>23)+r|0)&n|r&~n)+t[11]+643717713|0)<<14|o>>>18)+i|0)&r|i&~r)+t[0]-373897302|0)<<20|n>>>12)+o|0,n=((n+=((o=((o+=((i=((i+=((r=((r+=(n&i|o&~i)+t[5]-701558691|0)<<5|r>>>27)+n|0)&o|n&~o)+t[10]+38016083|0)<<9|i>>>23)+r|0)&n|r&~n)+t[15]-660478335|0)<<14|o>>>18)+i|0)&r|i&~r)+t[4]-405537848|0)<<20|n>>>12)+o|0,n=((n+=((o=((o+=((i=((i+=((r=((r+=(n&i|o&~i)+t[9]+568446438|0)<<5|r>>>27)+n|0)&o|n&~o)+t[14]-1019803690|0)<<9|i>>>23)+r|0)&n|r&~n)+t[3]-187363961|0)<<14|o>>>18)+i|0)&r|i&~r)+t[8]+1163531501|0)<<20|n>>>12)+o|0,n=((n+=((o=((o+=((i=((i+=((r=((r+=(n&i|o&~i)+t[13]-1444681467|0)<<5|r>>>27)+n|0)&o|n&~o)+t[2]-51403784|0)<<9|i>>>23)+r|0)&n|r&~n)+t[7]+1735328473|0)<<14|o>>>18)+i|0)&r|i&~r)+t[12]-1926607734|0)<<20|n>>>12)+o|0,n=((n+=((o=((o+=((i=((i+=((r=((r+=(n^o^i)+t[5]-378558|0)<<4|r>>>28)+n|0)^n^o)+t[8]-2022574463|0)<<11|i>>>21)+r|0)^r^n)+t[11]+1839030562|0)<<16|o>>>16)+i|0)^i^r)+t[14]-35309556|0)<<23|n>>>9)+o|0,n=((n+=((o=((o+=((i=((i+=((r=((r+=(n^o^i)+t[1]-1530992060|0)<<4|r>>>28)+n|0)^n^o)+t[4]+1272893353|0)<<11|i>>>21)+r|0)^r^n)+t[7]-155497632|0)<<16|o>>>16)+i|0)^i^r)+t[10]-1094730640|0)<<23|n>>>9)+o|0,n=((n+=((o=((o+=((i=((i+=((r=((r+=(n^o^i)+t[13]+681279174|0)<<4|r>>>28)+n|0)^n^o)+t[0]-358537222|0)<<11|i>>>21)+r|0)^r^n)+t[3]-722521979|0)<<16|o>>>16)+i|0)^i^r)+t[6]+76029189|0)<<23|n>>>9)+o|0,n=((n+=((o=((o+=((i=((i+=((r=((r+=(n^o^i)+t[9]-640364487|0)<<4|r>>>28)+n|0)^n^o)+t[12]-421815835|0)<<11|i>>>21)+r|0)^r^n)+t[15]+530742520|0)<<16|o>>>16)+i|0)^i^r)+t[2]-995338651|0)<<23|n>>>9)+o|0,n=((n+=((i=((i+=(n^((r=((r+=(o^(n|~i))+t[0]-198630844|0)<<6|r>>>26)+n|0)|~o))+t[7]+1126891415|0)<<10|i>>>22)+r|0)^((o=((o+=(r^(i|~n))+t[14]-1416354905|0)<<15|o>>>17)+i|0)|~r))+t[5]-57434055|0)<<21|n>>>11)+o|0,n=((n+=((i=((i+=(n^((r=((r+=(o^(n|~i))+t[12]+1700485571|0)<<6|r>>>26)+n|0)|~o))+t[3]-1894986606|0)<<10|i>>>22)+r|0)^((o=((o+=(r^(i|~n))+t[10]-1051523|0)<<15|o>>>17)+i|0)|~r))+t[1]-2054922799|0)<<21|n>>>11)+o|0,n=((n+=((i=((i+=(n^((r=((r+=(o^(n|~i))+t[8]+1873313359|0)<<6|r>>>26)+n|0)|~o))+t[15]-30611744|0)<<10|i>>>22)+r|0)^((o=((o+=(r^(i|~n))+t[6]-1560198380|0)<<15|o>>>17)+i|0)|~r))+t[13]+1309151649|0)<<21|n>>>11)+o|0,n=((n+=((i=((i+=(n^((r=((r+=(o^(n|~i))+t[4]-145523070|0)<<6|r>>>26)+n|0)|~o))+t[11]-1120210379|0)<<10|i>>>22)+r|0)^((o=((o+=(r^(i|~n))+t[2]+718787259|0)<<15|o>>>17)+i|0)|~r))+t[9]-343485551|0)<<21|n>>>11)+o|0,e[0]=r+e[0]|0,e[1]=n+e[1]|0,e[2]=o+e[2]|0,e[3]=i+e[3]|0}function c(e){for(var t=[],r=0;r<64;r+=4)t[r>>2]=e.charCodeAt(r)+(e.charCodeAt(r+1)<<8)+(e.charCodeAt(r+2)<<16)+(e.charCodeAt(r+3)<<24);return t}function f(e){for(var t=[],r=0;r<64;r+=4)t[r>>2]=e[r]+(e[r+1]<<8)+(e[r+2]<<16)+(e[r+3]<<24);return t}function r(e){for(var t,r,n,o,i=e.length,s=[1732584193,-271733879,-1732584194,271733878],u=64;u<=i;u+=64)a(s,c(e.substring(u-64,u)));for(t=(e=e.substring(u-64)).length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],u=0;u<t;u+=1)r[u>>2]|=e.charCodeAt(u)<<(u%4<<3);if(r[u>>2]|=128<<(u%4<<3),55<u)for(a(s,r),u=0;u<16;u+=1)r[u]=0;return o=(o=8*i).toString(16).match(/(.*?)(.{0,8})$/),n=parseInt(o[2],16),o=parseInt(o[1],16)||0,r[14]=n,r[15]=o,a(s,r),s}function s(e){for(var t=0;t<e.length;t+=1)e[t]=function(e){for(var t="",r=0;r<4;r+=1)t+=n[e>>8*r+4&15]+n[e>>8*r&15];return t}(e[t]);return e.join("")}function o(e){return e=/[\u0080-\uFFFF]/.test(e)?unescape(encodeURIComponent(e)):e}function u(e){for(var t=[],r=e.length,n=0;n<r-1;n+=2)t.push(parseInt(e.substr(n,2),16));return String.fromCharCode.apply(String,t)}function i(){this.reset()}return s(r("hello")),"undefined"==typeof ArrayBuffer||ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=function(e,t){var r=this.byteLength,e=l(e,r),n=r;return(n=void 0!==t?l(t,r):n)<e?new ArrayBuffer(0):(t=n-e,r=new ArrayBuffer(t),n=new Uint8Array(r),e=new Uint8Array(this,e,t),n.set(e),r)}),i.prototype.append=function(e){return this.appendBinary(o(e)),this},i.prototype.appendBinary=function(e){this._buff+=e,this._length+=e.length;for(var t=this._buff.length,r=64;r<=t;r+=64)a(this._hash,c(this._buff.substring(r-64,r)));return this._buff=this._buff.substring(r-64),this},i.prototype.end=function(e){for(var t,r=this._buff,n=r.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],i=0;i<n;i+=1)o[i>>2]|=r.charCodeAt(i)<<(i%4<<3);return this._finish(o,n),t=s(this._hash),e&&(t=u(t)),this.reset(),t},i.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},i.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},i.prototype.setState=function(e){return this._buff=e.buff,this._length=e.length,this._hash=e.hash,this},i.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},i.prototype._finish=function(e,t){var r,n=t;if(e[n>>2]|=128<<(n%4<<3),55<n)for(a(this._hash,e),n=0;n<16;n+=1)e[n]=0;t=(t=8*this._length).toString(16).match(/(.*?)(.{0,8})$/),r=parseInt(t[2],16),t=parseInt(t[1],16)||0,e[14]=r,e[15]=t,a(this._hash,e)},i.hash=function(e,t){return i.hashBinary(o(e),t)},i.hashBinary=function(e,t){e=s(r(e));return t?u(e):e},(i.ArrayBuffer=function(){this.reset()}).prototype.append=function(e){r=this._buff.buffer,n=e,o=!0,(i=new Uint8Array(r.byteLength+n.byteLength)).set(new Uint8Array(r)),i.set(new Uint8Array(n),r.byteLength);var t,r,n,o,i,s=o?i:i.buffer,u=s.length;for(this._length+=e.byteLength,t=64;t<=u;t+=64)a(this._hash,f(s.subarray(t-64,t)));return this._buff=t-64<u?new Uint8Array(s.buffer.slice(t-64)):new Uint8Array(0),this},i.ArrayBuffer.prototype.end=function(e){for(var t,r=this._buff,n=r.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],i=0;i<n;i+=1)o[i>>2]|=r[i]<<(i%4<<3);return this._finish(o,n),t=s(this._hash),e&&(t=u(t)),this.reset(),t},i.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},i.ArrayBuffer.prototype.getState=function(){var e,t=i.prototype.getState.call(this);return t.buff=(e=t.buff,String.fromCharCode.apply(null,new Uint8Array(e))),t},i.ArrayBuffer.prototype.setState=function(e){return e.buff=function(e,t){for(var r=e.length,n=new ArrayBuffer(r),o=new Uint8Array(n),i=0;i<r;i+=1)o[i]=e.charCodeAt(i);return t?o:n}(e.buff,!0),i.prototype.setState.call(this,e)},i.ArrayBuffer.prototype.destroy=i.prototype.destroy,i.ArrayBuffer.prototype._finish=i.prototype._finish,i.ArrayBuffer.hash=function(e,t){e=s(function(e){for(var t,r,n,o,i=e.length,s=[1732584193,-271733879,-1732584194,271733878],u=64;u<=i;u+=64)a(s,f(e.subarray(u-64,u)));for(t=(e=u-64<i?e.subarray(u-64):new Uint8Array(0)).length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],u=0;u<t;u+=1)r[u>>2]|=e[u]<<(u%4<<3);if(r[u>>2]|=128<<(u%4<<3),55<u)for(a(s,r),u=0;u<16;u+=1)r[u]=0;return o=(o=8*i).toString(16).match(/(.*?)(.{0,8})$/),n=parseInt(o[2],16),o=parseInt(o[1],16)||0,r[14]=n,r[15]=o,a(s,r),s}(new Uint8Array(e)));return t?u(e):e},i;function l(e,t){return(e=0|e||0)<0?Math.max(e+t,0):Math.min(e,t)}}()},8621:(e,t,r)=>{"use strict";function u(e){for(var t,r,n,o=e.rev_tree.slice();f=o.pop();){var i=f.ids,s=i[2],u=f.pos;if(s.length)for(var a=0,c=s.length;a<c;a++)o.push({pos:u+1,ids:s[a]});else{var f=!!i[1].deleted,i=i[0];t&&!(n!==f?n:r!==u?r<u:t<i)||(t=i,r=u,n=f)}}return r+"-"+t}function p(e,t){for(var r,n=e.slice();r=n.pop();)for(var o=r.pos,i=r.ids,s=i[2],u=t(0===s.length,o,i[0],r.ctx,i[1]),a=0,c=s.length;a<c;a++)n.push({pos:o+1,ids:s[a],ctx:u})}function n(e,t){return e.pos-t.pos}function a(e){var i=[];p(e,function(e,t,r,n,o){e&&i.push({rev:t+"-"+r,pos:t,opts:o})}),i.sort(n).reverse();for(var t=0,r=i.length;t<r;t++)delete i[t].pos;return i}function h(e){for(var t,r=[],n=e.slice();t=n.pop();){var o=t.pos,i=t.ids,s=i[0],u=i[1],a=i[2],i=0===a.length,c=t.history?t.history.slice():[];c.push({id:s,opts:u}),i&&r.push({pos:o+1-c.length,ids:c});for(var f=0,l=a.length;f<l;f++)n.push({pos:o+1,ids:a[f],history:c})}return r.reverse()}function _(e,t){return e.pos-t.pos}function v(e,t){for(var r,n,o=t,i=e.length;o<i;o++){var s=e[o],s=[s.id,s.opts,[]];n?(n[2].push(s),n=s):r=n=s}return r}function y(e,t){return e[0]<t[0]?-1:1}function b(e,t){for(var r,n,o,i=[{tree1:e,tree2:t}],s=!1;0<i.length;){var u=i.pop(),a=u.tree1,c=u.tree2;(a[1].status||c[1].status)&&(a[1].status="available"===a[1].status||"available"===c[1].status?"available":"missing");for(var f=0;f<c[2].length;f++)if(a[2][0]){for(var l=!1,d=0;d<a[2].length;d++)a[2][d][0]===c[2][f][0]&&(i.push({tree1:a[2][d],tree2:c[2][f]}),l=!0);l||(s="new_branch",r=a[2],n=c[2][f],o=function(e,t,r){for(var n,o=0,i=e.length;o<i;)r(e[n=o+i>>>1],t)<0?o=1+n:i=n;return o}(r,n,o=y),r.splice(o,0,n))}else s="new_leaf",a[2][0]=c[2][f]}return{conflicts:s,tree:e}}function g(e,t,r){var n,o=[],i=!1,s=!1;if(!e.length)return{tree:[t],conflicts:"new_leaf"};for(var u=0,a=e.length;u<a;u++){var c=e[u];if(c.pos===t.pos&&c.ids[0]===t.ids[0])n=b(c.ids,t.ids),o.push({pos:c.pos,ids:n.tree}),i=i||n.conflicts,s=!0;else if(!0!==r){var f=c.pos<t.pos?c:t,l=c.pos<t.pos?t:c,d=l.pos-f.pos,p=[],h=[];for(h.push({ids:f.ids,diff:d,parent:null,parentIdx:null});0<h.length;){var v=h.pop();if(0!==v.diff)for(var y=v.ids[2],g=0,m=y.length;g<m;g++)h.push({ids:y[g],diff:v.diff-1,parent:v.ids,parentIdx:g});else v.ids[0]===l.ids[0]&&p.push(v)}d=p[0];d?(n=b(d.ids,l.ids),d.parent[2][d.parentIdx]=n.tree,o.push({pos:f.pos,ids:f.ids}),i=i||n.conflicts,s=!0):o.push(c)}else o.push(c)}return s||o.push(t),o.sort(_),{tree:o,conflicts:i||"internal_node"}}function i(e){return e.ids}r.d(t,{DJ:()=>function(e){for(var t=u(e),r=a(e.rev_tree),n=[],o=0,i=r.length;o<i;o++){var s=r[o];s.rev===t||s.opts.deleted||n.push(s.rev)}return n},FS:()=>function(e,t){for(var r,n=e.slice(),e=t.split("-"),o=parseInt(e[0],10),i=e[1];r=n.pop();){if(r.pos===o&&r.ids[0]===i)return!0;for(var s=r.ids[2],u=0,a=s.length;u<a;u++)n.push({pos:r.pos+1,ids:s[u]})}return!1},S:()=>u,TS:()=>function(e,t,r){return e=g(e,t),{tree:(t=function(e,t){for(var r,n=h(e),o=0,i=n.length;o<i;o++){var s=n[o],u=s.ids;if(u.length>t)for(var a=a||{},c=u.length-t,f={pos:s.pos+c,ids:v(u,c)},l=0;l<c;l++){var d=s.pos+l+"-"+u[l].id;a[d]=!0}else f={pos:s.pos,ids:v(u,0)};r=r?g(r,f,!0).tree:[f]}return a&&p(r,function(e,t,r){delete a[t+"-"+r]}),{tree:r,revs:a?Object.keys(a):[]}}(e.tree,r)).tree,stemmedRevs:t.revs,conflicts:e.conflicts}},UB:()=>function(e){var i=[];return p(e.rev_tree,function(e,t,r,n,o){"available"!==o.status||e||(i.push(t+"-"+r),o.status="missing")}),i},cI:()=>a,fE:()=>p,pA:()=>function(e,t){for(var r,n=t.rev_tree.slice();r=n.pop();){var o=r.pos,i=r.ids,s=i[0],u=i[1],a=i[2],i=0===a.length,c=r.history?r.history.slice():[];if(c.push({id:s,pos:o,opts:u}),i)for(var f=0,l=c.length;f<l;f++){var d=c[f];if(d.pos+"-"+d.id===e)return o+"-"+s}for(var p=0,h=a.length;p<h;p++)n.push({pos:o+1,ids:a[p],history:c})}throw new Error("Unable to resolve latest revision for id "+t.id+", rev "+e)},uY:()=>function(e,t){for(var r,n=(t=t||u(e)).substring(t.indexOf("-")+1),o=e.rev_tree.map(i);r=o.pop();){if(r[0]===n)return!!r[1].deleted;o=o.concat(r[2])}},vc:()=>h,zB:()=>function(e){return/^_local/.test(e)}})},347:(e,t,r)=>{"use strict";r.d(t,{D3:()=>function(a,c){return y(n()(function(n){if(this._closed)return Promise.reject(new Error("database is closed"));if(this._destroyed)return Promise.reject(new Error("database is destroyed"));var o=this,i=o,s=a,e=n;if(i.constructor.listeners("debug").length){for(var t=["api",i.name,s],r=0;r<e.length-1;r++)t.push(e[r]);i.constructor.emit("debug",t);var u=e[e.length-1];e[e.length-1]=function(e,t){var r=(r=["api",i.name,s]).concat(e?["error",e]:["success",t]);i.constructor.emit("debug",r),u(e,t)}}return this.taskqueue.isReady?c.apply(this,n):new Promise(function(t,r){o.taskqueue.addTask(function(e){e?r(e):t(o[a].apply(o,n))})})}))},GE:()=>function(e){var t;if(e?"string"!=typeof e?t=(0,s.Tr)(s.JE):/^_/.test(e)&&!/^_(design|local)/.test(e)&&(t=(0,s.Tr)(s.zG)):t=(0,s.Tr)(s.Xt),t)throw t},H:()=>function o(i,s,u){return new Promise(function(r,n){i.get(s,function(e,t){if(e){if(404!==e.status)return n(e);t={}}e=t._rev,t=u(t);if(!t)return r({updated:!1,rev:e});t._id=s,t._rev=e,r(function(t,r,n){return t.put(r).then(function(e){return{updated:!0,rev:e.rev}},function(e){if(409!==e.status)throw e;return o(t,r._id,n)})}(i,t,u))})})},IH:()=>v,OD:()=>function(e,t){e=h(e);return t?(delete e._rev_tree,(0,f.$)(JSON.stringify(e))):(0,c.v4)().replace(/-/g,"").toLowerCase()},Q1:()=>function(e){return"boolean"==typeof e._remote?e._remote:"function"==typeof e.type&&(k("warn","db.type() is deprecated and will be removed in a future version of PouchDB"),"http"===e.type())},Rc:()=>function(e){e=O(e);return e?e.join("/"):null},VO:()=>O,Vi:()=>y,Vj:()=>x,Y3:()=>u.a,b6:()=>w,d9:()=>h,eW:()=>b,ei:()=>g,f0:()=>j,m6:()=>function(e,t){var r,n=[],o=[];for(r in t)t.hasOwnProperty(r)&&(n.push(r),o.push(t[r]));return n.push(e),Function.apply(null,n).apply(null,o)},o:()=>function(u,a,c){var e=a.docs,f=new o.D,l=(e.forEach(function(e){f.has(e.id)?f.get(e.id).push(e):f.set(e.id,[e])}),f.size),d=0,p=new Array(l);var n=[],t=(f.forEach(function(e,t){n.push(t)}),0);!function s(){var e,r;t>=n.length||(e=Math.min(t+6,n.length),e=n.slice(t,e),r=t,e.forEach(function(n,e){var o=r+e,t=g((e=f.get(n))[0],["atts_since","attachments"]),i=(t.open_revs=e.map(function(e){return e.rev}),t.open_revs=t.open_revs.filter(m),m);0===t.open_revs.length&&(delete t.open_revs,i=_),["revs","attachments","binary","ajax","latest"].forEach(function(e){e in a&&(t[e]=a[e])}),u.get(n,t,function(e,t){var r,e=e?[{error:e}]:i(t);p[o]={id:n,docs:e},++d===l&&(r=[],p.forEach(function(t){t.docs.forEach(function(e){r.push({id:t.id,docs:[e]})})}),c(null,{results:r})),s()})}),t+=e.length)}()},sP:()=>function(n){var o={},i=n.filter&&"function"==typeof n.filter;return o.query=n.query_params,function(e){e.doc||(e.doc={});var t=i&&function(e,t,r){try{return!e(t,r)}catch(e){t="Filter function threw: "+e.toString();return(0,s.Tr)(s.y3,t)}}(n.filter,e.doc,o);if("object"==typeof t)return t;if(t)return!1;if(n.include_docs){if(!n.attachments)for(var r in e.doc._attachments)e.doc._attachments.hasOwnProperty(r)&&(e.doc._attachments[r].stub=!0)}else delete e.doc;return!0}},xH:()=>function(e){for(var t=[],r=0,n=e.length;r<n;r++)t=t.concat(e[r]);return t},xS:()=>function(e,t){return"listenerCount"in e?e.listenerCount(t):a().listenerCount(e,t)},yq:()=>k});var t=r(7105),n=r.n(t),o=r(7610),t=r(5717),t=r.n(t),i=r(1180),u=r.n(i),s=r(2733),i=r(7187),a=r.n(i),c=r(8894),f=r(7239);var l,d=Function.prototype.toString,p=d.call(Object);function h(t){var e,r,n,o;if(!t||"object"!=typeof t)return t;if(Array.isArray(t)){for(e=[],r=0,n=t.length;r<n;r++)e[r]=h(t[r]);return e}if(t instanceof Date)return t.toISOString();if("undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer||"undefined"!=typeof Blob&&t instanceof Blob){var i=t;if(i instanceof ArrayBuffer){if("function"==typeof(a=i).slice)return a.slice(0);var s=new ArrayBuffer(a.byteLength),u=new Uint8Array(s),a=new Uint8Array(a);return u.set(a),s}return u=i.size,a=i.type,"function"==typeof i.slice?i.slice(0,u,a):i.webkitSlice(0,u,a)}if(!function(){var e=Object.getPrototypeOf(t);if(null===e)return 1;e=e.constructor;return"function"==typeof e&&e instanceof e&&d.call(e)==p}())return t;for(r in e={},t)!Object.prototype.hasOwnProperty.call(t,r)||void 0!==(o=h(t[r]))&&(e[r]=o);return e}function v(t){var r=!1;return n()(function(e){if(r)throw new Error("once called more than once");r=!0,t.apply(this,e)})}function y(s){return n()(function(o){o=h(o);var i=this,t="function"==typeof o[o.length-1]&&o.pop(),e=new Promise(function(r,n){var e;try{var t=v(function(e,t){e?n(e):r(t)});o.push(t),(e=s.apply(i,o))&&"function"==typeof e.then&&r(e)}catch(e){n(e)}});return t&&e.then(function(e){t(null,e)},t),e})}function g(e,t){for(var r={},n=0,o=t.length;n<o;n++){var i=t[n];i in e&&(r[i]=e[i])}return r}function m(e){return e}function _(e){return[{ok:e}]}try{localStorage.setItem("_pouch_check_localstorage",1),l=!!localStorage.getItem("_pouch_check_localstorage")}catch(e){l=!1}function b(){return l}function w(){var t;a().call(this),this._listeners={},t=this,l&&addEventListener("storage",function(e){t.emit(e.key)})}function k(e){var t;"undefined"!=typeof console&&"function"==typeof console[e]&&(t=Array.prototype.slice.call(arguments,1),console[e].apply(console,t))}t()(w,a()),w.prototype.addListener=function(e,t,r,n){var o,i;function s(){var e;o._listeners[t]&&(i?i="waiting":(i=!0,e=g(n,["style","include_docs","attachments","conflicts","filter","doc_ids","view","since","query_params","binary","return_docs"]),r.changes(e).on("change",function(e){e.seq>n.since&&!n.cancelled&&(n.since=e.seq,n.onChange(e))}).on("complete",function(){"waiting"===i&&u()(s),i=!1}).on("error",function(){i=!1})))}this._listeners[t]||(i=!1,(o=this)._listeners[t]=s,this.on(e,s))},w.prototype.removeListener=function(e,t){t in this._listeners&&(a().prototype.removeListener.call(this,e,this._listeners[t]),delete this._listeners[t])},w.prototype.notifyLocalWindows=function(e){l&&(localStorage[e]="a"===localStorage[e]?"b":"a")},w.prototype.notify=function(e){this.emit(e),this.notifyLocalWindows(e)};var j="function"==typeof Object.assign?Object.assign:function(e){for(var t=Object(e),r=1;r<arguments.length;r++){var n=arguments[r];if(null!=n)for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t};function O(e){if(!e)return null;var t=e.split("/");return 2===t.length?t:1===t.length?[e,e]:null}var x=c.v4},7610:(e,t,r)=>{"use strict";function n(){this._store={}}function o(e){if(this._store=new n,e&&Array.isArray(e))for(var t=0,r=e.length;t<r;t++)this.add(e[t])}var i;r.d(t,{D:()=>i}),n.prototype.get=function(e){return this._store["$"+e]},n.prototype.set=function(e,t){return this._store["$"+e]=t,!0},n.prototype.has=function(e){return"$"+e in this._store},n.prototype.delete=function(e){var e="$"+e,t=e in this._store;return delete this._store[e],t},n.prototype.forEach=function(e){for(var t=Object.keys(this._store),r=0,n=t.length;r<n;r++){var o=t[r];e(this._store[o],o.substring(1))}},Object.defineProperty(n.prototype,"size",{get:function(){return Object.keys(this._store).length}}),o.prototype.add=function(e){return this._store.set(e,!0)},o.prototype.has=function(e){return this._store.has(e)},o.prototype.forEach=function(r){this._store.forEach(function(e,t){r(t)})},Object.defineProperty(o.prototype,"size",{get:function(){return this._store.size}}),i=function(){var e;if("undefined"!=typeof Symbol&&"undefined"!=typeof Map&&"undefined"!=typeof Set)return e=Object.getOwnPropertyDescriptor(Map,Symbol.species),e&&"get"in e&&Map[Symbol.species]===Map}()?(Set,Map):n},5334:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const n=[];for(let e=0;e<256;++e)n.push((e+256).toString(16).substr(1));t.default=function(e,t){var t=t||0,r=n;return(r[e[t+0]]+r[e[t+1]]+r[e[t+2]]+r[e[t+3]]+"-"+r[e[t+4]]+r[e[t+5]]+"-"+r[e[t+6]]+r[e[t+7]]+"-"+r[e[t+8]]+r[e[t+9]]+"-"+r[e[t+10]]+r[e[t+11]]+r[e[t+12]]+r[e[t+13]]+r[e[t+14]]+r[e[t+15]]).toLowerCase()}},1074:(e,t,r)=>{"use strict";Object.defineProperty(t,"v1",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"v3",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"v4",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"v5",{enumerable:!0,get:function(){return s.default}});var n=u(r(8828)),o=u(r(2046)),i=u(r(6287)),s=u(r(7056));function u(e){return e&&e.__esModule?e:{default:e}}},2557:(e,t)=>{"use strict";function c(e){return 14+(e+64>>>9<<4)+1}function f(e,t){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function u(e,t,r,n,o,i){return f((t=f(f(t,e),f(n,i)))<<o|t>>>32-o,r)}function l(e,t,r,n,o,i,s){return u(t&r|~t&n,e,t,o,i,s)}function d(e,t,r,n,o,i,s){return u(t&n|r&~n,e,t,o,i,s)}function p(e,t,r,n,o,i,s){return u(t^r^n,e,t,o,i,s)}function h(e,t,r,n,o,i,s){return u(r^(t|~n),e,t,o,i,s)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=function(t){if("string"==typeof t){const n=unescape(encodeURIComponent(t));t=new Uint8Array(n.length);for(let e=0;e<n.length;++e)t[e]=n.charCodeAt(e)}{var r=function(t,e){t[e>>5]|=128<<e%32,t[c(e)-1]=e;let r=1732584193,n=-271733879,o=-1732584194,i=271733878;for(let e=0;e<t.length;e+=16){const c=r,s=n,u=o,a=i;r=l(r,n,o,i,t[e],7,-680876936),i=l(i,r,n,o,t[e+1],12,-389564586),o=l(o,i,r,n,t[e+2],17,606105819),n=l(n,o,i,r,t[e+3],22,-1044525330),r=l(r,n,o,i,t[e+4],7,-176418897),i=l(i,r,n,o,t[e+5],12,1200080426),o=l(o,i,r,n,t[e+6],17,-1473231341),n=l(n,o,i,r,t[e+7],22,-45705983),r=l(r,n,o,i,t[e+8],7,1770035416),i=l(i,r,n,o,t[e+9],12,-1958414417),o=l(o,i,r,n,t[e+10],17,-42063),n=l(n,o,i,r,t[e+11],22,-1990404162),r=l(r,n,o,i,t[e+12],7,1804603682),i=l(i,r,n,o,t[e+13],12,-40341101),o=l(o,i,r,n,t[e+14],17,-1502002290),n=l(n,o,i,r,t[e+15],22,1236535329),r=d(r,n,o,i,t[e+1],5,-165796510),i=d(i,r,n,o,t[e+6],9,-1069501632),o=d(o,i,r,n,t[e+11],14,643717713),n=d(n,o,i,r,t[e],20,-373897302),r=d(r,n,o,i,t[e+5],5,-701558691),i=d(i,r,n,o,t[e+10],9,38016083),o=d(o,i,r,n,t[e+15],14,-660478335),n=d(n,o,i,r,t[e+4],20,-405537848),r=d(r,n,o,i,t[e+9],5,568446438),i=d(i,r,n,o,t[e+14],9,-1019803690),o=d(o,i,r,n,t[e+3],14,-187363961),n=d(n,o,i,r,t[e+8],20,1163531501),r=d(r,n,o,i,t[e+13],5,-1444681467),i=d(i,r,n,o,t[e+2],9,-51403784),o=d(o,i,r,n,t[e+7],14,1735328473),n=d(n,o,i,r,t[e+12],20,-1926607734),r=p(r,n,o,i,t[e+5],4,-378558),i=p(i,r,n,o,t[e+8],11,-2022574463),o=p(o,i,r,n,t[e+11],16,1839030562),n=p(n,o,i,r,t[e+14],23,-35309556),r=p(r,n,o,i,t[e+1],4,-1530992060),i=p(i,r,n,o,t[e+4],11,1272893353),o=p(o,i,r,n,t[e+7],16,-155497632),n=p(n,o,i,r,t[e+10],23,-1094730640),r=p(r,n,o,i,t[e+13],4,681279174),i=p(i,r,n,o,t[e],11,-358537222),o=p(o,i,r,n,t[e+3],16,-722521979),n=p(n,o,i,r,t[e+6],23,76029189),r=p(r,n,o,i,t[e+9],4,-640364487),i=p(i,r,n,o,t[e+12],11,-421815835),o=p(o,i,r,n,t[e+15],16,530742520),n=p(n,o,i,r,t[e+2],23,-995338651),r=h(r,n,o,i,t[e],6,-198630844),i=h(i,r,n,o,t[e+7],10,1126891415),o=h(o,i,r,n,t[e+14],15,-1416354905),n=h(n,o,i,r,t[e+5],21,-57434055),r=h(r,n,o,i,t[e+12],6,1700485571),i=h(i,r,n,o,t[e+3],10,-1894986606),o=h(o,i,r,n,t[e+10],15,-1051523),n=h(n,o,i,r,t[e+1],21,-2054922799),r=h(r,n,o,i,t[e+8],6,1873313359),i=h(i,r,n,o,t[e+15],10,-30611744),o=h(o,i,r,n,t[e+6],15,-1560198380),n=h(n,o,i,r,t[e+13],21,1309151649),r=h(r,n,o,i,t[e+4],6,-145523070),i=h(i,r,n,o,t[e+11],10,-1120210379),o=h(o,i,r,n,t[e+2],15,718787259),n=h(n,o,i,r,t[e+9],21,-343485551),r=f(r,c),n=f(n,s),o=f(o,u),i=f(i,a)}return[r,n,o,i]}(function(t){if(0===t.length)return[];const r=8*t.length,n=new Uint32Array(c(r));for(let e=0;e<r;e+=8)n[e>>5]|=(255&t[e/8])<<e%32;return n}(t),8*t.length);const o=[],i=32*r.length,s="0123456789abcdef";for(let e=0;e<i;e+=8){const i=r[e>>5]>>>e%32&255,u=parseInt(s.charAt(i>>>4&15)+s.charAt(15&i),16);o.push(u)}return o}}},6041:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){if(r)return r(n);throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported")};const r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),n=new Uint8Array(16)},2751:(e,t)=>{"use strict";function l(e,t){return e<<t|e>>>32-t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=function(r){const u=[1518500249,1859775393,2400959708,3395469782],a=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof r){const u=unescape(encodeURIComponent(r));r=[];for(let e=0;e<u.length;++e)r.push(u.charCodeAt(e))}r.push(128);const c=r.length/4+2,e=Math.ceil(c/16),f=new Array(e);for(let t=0;t<e;++t){const n=new Uint32Array(16);for(let e=0;e<16;++e)n[e]=r[64*t+4*e]<<24|r[64*t+4*e+1]<<16|r[64*t+4*e+2]<<8|r[64*t+4*e+3];f[t]=n}f[e-1][14]=8*(r.length-1)/Math.pow(2,32),f[e-1][14]=Math.floor(f[e-1][14]),f[e-1][15]=8*(r.length-1)&4294967295;for(let s=0;s<e;++s){const c=new Uint32Array(80);for(let e=0;e<16;++e)c[e]=f[s][e];for(let e=16;e<80;++e)c[e]=l(c[e-3]^c[e-8]^c[e-14]^c[e-16],1);let t=a[0],r=a[1],n=a[2],o=a[3],i=a[4];for(let e=0;e<80;++e){const a=Math.floor(e/20),f=l(t,5)+function(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:case 3:return t^r^n;case 2:return t&r^t&n^r&n}}(a,r,n,o)+i+u[a]+c[e]>>>0;i=o,o=n,n=l(r,30)>>>0,r=t,t=f}a[0]=a[0]+t>>>0,a[1]=a[1]+r>>>0,a[2]=a[2]+n>>>0,a[3]=a[3]+o>>>0,a[4]=a[4]+i>>>0}return[a[0]>>24&255,a[0]>>16&255,a[0]>>8&255,255&a[0],a[1]>>24&255,a[1]>>16&255,a[1]>>8&255,255&a[1],a[2]>>24&255,a[2]>>16&255,a[2]>>8&255,255&a[2],a[3]>>24&255,a[3]>>16&255,a[3]>>8&255,255&a[3],a[4]>>24&255,a[4]>>16&255,a[4]>>8&255,255&a[4]]}},8828:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=n(r(6041)),f=n(r(5334));function n(e){return e&&e.__esModule?e:{default:e}}let l,d,p=0,h=0;t.default=function(e,t,r){var n=t&&r||0;const o=t||[];let i=(e=e||{}).node||l,s=void 0!==e.clockseq?e.clockseq:d;if(null==i||null==s){const t=e.random||(e.rng||c.default)();null==i&&(i=l=[1|t[0],t[1],t[2],t[3],t[4],t[5]]),null==s&&(s=d=16383&(t[6]<<8|t[7]))}let u=void 0!==e.msecs?e.msecs:Date.now(),a=void 0!==e.nsecs?e.nsecs:h+1;r=u-p+(a-h)/1e4;if(r<0&&void 0===e.clockseq&&(s=s+1&16383),1e4<=(a=(r<0||u>p)&&void 0===e.nsecs?0:a))throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");p=u,h=a,d=s;r=(1e4*(268435455&(u+=122192928e5))+a)%4294967296,o[n++]=r>>>24&255,o[n++]=r>>>16&255,o[n++]=r>>>8&255,o[n++]=255&r,e=u/4294967296*1e4&268435455;o[n++]=e>>>8&255,o[n++]=255&e,o[n++]=e>>>24&15|16,o[n++]=e>>>16&255,o[n++]=s>>>8|128,o[n++]=255&s;for(let e=0;e<6;++e)o[n+e]=i[e];return t||(0,f.default)(o)}},2046:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(r(7117)),r=o(r(2557));function o(e){return e&&e.__esModule?e:{default:e}}n=(0,n.default)("v3",48,r.default);t.default=n},7117:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,s,u){function t(e,r,t,n){var o=t&&n||0;if("string"==typeof e&&(e=function(t){t=unescape(encodeURIComponent(t));const r=[];for(let e=0;e<t.length;++e)r.push(t.charCodeAt(e));return r}(e)),"string"==typeof r&&(r=function(){const t=[];return r.replace(/[a-fA-F0-9]{2}/g,function(e){t.push(parseInt(e,16))}),t}()),!Array.isArray(e))throw TypeError("value must be an array of bytes");if(!Array.isArray(r)||16!==r.length)throw TypeError("namespace must be uuid string or an Array of 16 byte values");const i=u(r.concat(e));if(i[6]=15&i[6]|s,i[8]=63&i[8]|128,t)for(let e=0;e<16;++e)t[o+e]=i[e];return t||(0,a.default)(i)}try{t.name=e}catch(e){}return t.DNS=n,t.URL=o,t},t.URL=t.DNS=void 0;var a=(r=r(5334))&&r.__esModule?r:{default:r};const n="6ba7b810-9dad-11d1-80b4-00c04fd430c8",o=(t.DNS=n,"6ba7b811-9dad-11d1-80b4-00c04fd430c8");t.URL=o},6287:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(6041)),i=n(r(5334));function n(e){return e&&e.__esModule?e:{default:e}}t.default=function(t,r,e){"string"==typeof t&&(r="binary"===t?new Uint8Array(16):null,t=null);const n=(t=t||{}).random||(t.rng||o.default)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,r){const t=e||0;for(let e=0;e<16;++e)r[t+e]=n[e];return r}return(0,i.default)(n)}},7056:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(r(7117)),r=o(r(2751));function o(e){return e&&e.__esModule?e:{default:e}}n=(0,n.default)("v5",80,r.default);t.default=n},8322:e=>{e.exports=function(){"use strict";var n=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function a(e,t){var r=e[0],n=e[1],o=e[2],i=e[3],n=((n+=((o=((o+=((i=((i+=((r=((r+=(n&o|~n&i)+t[0]-680876936|0)<<7|r>>>25)+n|0)&n|~r&o)+t[1]-389564586|0)<<12|i>>>20)+r|0)&r|~i&n)+t[2]+606105819|0)<<17|o>>>15)+i|0)&i|~o&r)+t[3]-1044525330|0)<<22|n>>>10)+o|0;n=((n+=((o=((o+=((i=((i+=((r=((r+=(n&o|~n&i)+t[4]-176418897|0)<<7|r>>>25)+n|0)&n|~r&o)+t[5]+1200080426|0)<<12|i>>>20)+r|0)&r|~i&n)+t[6]-1473231341|0)<<17|o>>>15)+i|0)&i|~o&r)+t[7]-45705983|0)<<22|n>>>10)+o|0,n=((n+=((o=((o+=((i=((i+=((r=((r+=(n&o|~n&i)+t[8]+1770035416|0)<<7|r>>>25)+n|0)&n|~r&o)+t[9]-1958414417|0)<<12|i>>>20)+r|0)&r|~i&n)+t[10]-42063|0)<<17|o>>>15)+i|0)&i|~o&r)+t[11]-1990404162|0)<<22|n>>>10)+o|0,n=((n+=((o=((o+=((i=((i+=((r=((r+=(n&o|~n&i)+t[12]+1804603682|0)<<7|r>>>25)+n|0)&n|~r&o)+t[13]-40341101|0)<<12|i>>>20)+r|0)&r|~i&n)+t[14]-1502002290|0)<<17|o>>>15)+i|0)&i|~o&r)+t[15]+1236535329|0)<<22|n>>>10)+o|0,n=((n+=((o=((o+=((i=((i+=((r=((r+=(n&i|o&~i)+t[1]-165796510|0)<<5|r>>>27)+n|0)&o|n&~o)+t[6]-1069501632|0)<<9|i>>>23)+r|0)&n|r&~n)+t[11]+643717713|0)<<14|o>>>18)+i|0)&r|i&~r)+t[0]-373897302|0)<<20|n>>>12)+o|0,n=((n+=((o=((o+=((i=((i+=((r=((r+=(n&i|o&~i)+t[5]-701558691|0)<<5|r>>>27)+n|0)&o|n&~o)+t[10]+38016083|0)<<9|i>>>23)+r|0)&n|r&~n)+t[15]-660478335|0)<<14|o>>>18)+i|0)&r|i&~r)+t[4]-405537848|0)<<20|n>>>12)+o|0,n=((n+=((o=((o+=((i=((i+=((r=((r+=(n&i|o&~i)+t[9]+568446438|0)<<5|r>>>27)+n|0)&o|n&~o)+t[14]-1019803690|0)<<9|i>>>23)+r|0)&n|r&~n)+t[3]-187363961|0)<<14|o>>>18)+i|0)&r|i&~r)+t[8]+1163531501|0)<<20|n>>>12)+o|0,n=((n+=((o=((o+=((i=((i+=((r=((r+=(n&i|o&~i)+t[13]-1444681467|0)<<5|r>>>27)+n|0)&o|n&~o)+t[2]-51403784|0)<<9|i>>>23)+r|0)&n|r&~n)+t[7]+1735328473|0)<<14|o>>>18)+i|0)&r|i&~r)+t[12]-1926607734|0)<<20|n>>>12)+o|0,n=((n+=((o=((o+=((i=((i+=((r=((r+=(n^o^i)+t[5]-378558|0)<<4|r>>>28)+n|0)^n^o)+t[8]-2022574463|0)<<11|i>>>21)+r|0)^r^n)+t[11]+1839030562|0)<<16|o>>>16)+i|0)^i^r)+t[14]-35309556|0)<<23|n>>>9)+o|0,n=((n+=((o=((o+=((i=((i+=((r=((r+=(n^o^i)+t[1]-1530992060|0)<<4|r>>>28)+n|0)^n^o)+t[4]+1272893353|0)<<11|i>>>21)+r|0)^r^n)+t[7]-155497632|0)<<16|o>>>16)+i|0)^i^r)+t[10]-1094730640|0)<<23|n>>>9)+o|0,n=((n+=((o=((o+=((i=((i+=((r=((r+=(n^o^i)+t[13]+681279174|0)<<4|r>>>28)+n|0)^n^o)+t[0]-358537222|0)<<11|i>>>21)+r|0)^r^n)+t[3]-722521979|0)<<16|o>>>16)+i|0)^i^r)+t[6]+76029189|0)<<23|n>>>9)+o|0,n=((n+=((o=((o+=((i=((i+=((r=((r+=(n^o^i)+t[9]-640364487|0)<<4|r>>>28)+n|0)^n^o)+t[12]-421815835|0)<<11|i>>>21)+r|0)^r^n)+t[15]+530742520|0)<<16|o>>>16)+i|0)^i^r)+t[2]-995338651|0)<<23|n>>>9)+o|0,n=((n+=((i=((i+=(n^((r=((r+=(o^(n|~i))+t[0]-198630844|0)<<6|r>>>26)+n|0)|~o))+t[7]+1126891415|0)<<10|i>>>22)+r|0)^((o=((o+=(r^(i|~n))+t[14]-1416354905|0)<<15|o>>>17)+i|0)|~r))+t[5]-57434055|0)<<21|n>>>11)+o|0,n=((n+=((i=((i+=(n^((r=((r+=(o^(n|~i))+t[12]+1700485571|0)<<6|r>>>26)+n|0)|~o))+t[3]-1894986606|0)<<10|i>>>22)+r|0)^((o=((o+=(r^(i|~n))+t[10]-1051523|0)<<15|o>>>17)+i|0)|~r))+t[1]-2054922799|0)<<21|n>>>11)+o|0,n=((n+=((i=((i+=(n^((r=((r+=(o^(n|~i))+t[8]+1873313359|0)<<6|r>>>26)+n|0)|~o))+t[15]-30611744|0)<<10|i>>>22)+r|0)^((o=((o+=(r^(i|~n))+t[6]-1560198380|0)<<15|o>>>17)+i|0)|~r))+t[13]+1309151649|0)<<21|n>>>11)+o|0,n=((n+=((i=((i+=(n^((r=((r+=(o^(n|~i))+t[4]-145523070|0)<<6|r>>>26)+n|0)|~o))+t[11]-1120210379|0)<<10|i>>>22)+r|0)^((o=((o+=(r^(i|~n))+t[2]+718787259|0)<<15|o>>>17)+i|0)|~r))+t[9]-343485551|0)<<21|n>>>11)+o|0,e[0]=r+e[0]|0,e[1]=n+e[1]|0,e[2]=o+e[2]|0,e[3]=i+e[3]|0}function c(e){for(var t=[],r=0;r<64;r+=4)t[r>>2]=e.charCodeAt(r)+(e.charCodeAt(r+1)<<8)+(e.charCodeAt(r+2)<<16)+(e.charCodeAt(r+3)<<24);return t}function f(e){for(var t=[],r=0;r<64;r+=4)t[r>>2]=e[r]+(e[r+1]<<8)+(e[r+2]<<16)+(e[r+3]<<24);return t}function r(e){for(var t,r,n,o,i=e.length,s=[1732584193,-271733879,-1732584194,271733878],u=64;u<=i;u+=64)a(s,c(e.substring(u-64,u)));for(t=(e=e.substring(u-64)).length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],u=0;u<t;u+=1)r[u>>2]|=e.charCodeAt(u)<<(u%4<<3);if(r[u>>2]|=128<<(u%4<<3),55<u)for(a(s,r),u=0;u<16;u+=1)r[u]=0;return o=(o=8*i).toString(16).match(/(.*?)(.{0,8})$/),n=parseInt(o[2],16),o=parseInt(o[1],16)||0,r[14]=n,r[15]=o,a(s,r),s}function s(e){for(var t=0;t<e.length;t+=1)e[t]=function(e){for(var t="",r=0;r<4;r+=1)t+=n[e>>8*r+4&15]+n[e>>8*r&15];return t}(e[t]);return e.join("")}function o(e){return e=/[\u0080-\uFFFF]/.test(e)?unescape(encodeURIComponent(e)):e}function u(e){for(var t=[],r=e.length,n=0;n<r-1;n+=2)t.push(parseInt(e.substr(n,2),16));return String.fromCharCode.apply(String,t)}function i(){this.reset()}return s(r("hello")),"undefined"==typeof ArrayBuffer||ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=function(e,t){var r=this.byteLength,e=l(e,r),n=r;return(n=void 0!==t?l(t,r):n)<e?new ArrayBuffer(0):(t=n-e,r=new ArrayBuffer(t),n=new Uint8Array(r),e=new Uint8Array(this,e,t),n.set(e),r)}),i.prototype.append=function(e){return this.appendBinary(o(e)),this},i.prototype.appendBinary=function(e){this._buff+=e,this._length+=e.length;for(var t=this._buff.length,r=64;r<=t;r+=64)a(this._hash,c(this._buff.substring(r-64,r)));return this._buff=this._buff.substring(r-64),this},i.prototype.end=function(e){for(var t,r=this._buff,n=r.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],i=0;i<n;i+=1)o[i>>2]|=r.charCodeAt(i)<<(i%4<<3);return this._finish(o,n),t=s(this._hash),e&&(t=u(t)),this.reset(),t},i.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},i.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},i.prototype.setState=function(e){return this._buff=e.buff,this._length=e.length,this._hash=e.hash,this},i.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},i.prototype._finish=function(e,t){var r,n=t;if(e[n>>2]|=128<<(n%4<<3),55<n)for(a(this._hash,e),n=0;n<16;n+=1)e[n]=0;t=(t=8*this._length).toString(16).match(/(.*?)(.{0,8})$/),r=parseInt(t[2],16),t=parseInt(t[1],16)||0,e[14]=r,e[15]=t,a(this._hash,e)},i.hash=function(e,t){return i.hashBinary(o(e),t)},i.hashBinary=function(e,t){e=s(r(e));return t?u(e):e},(i.ArrayBuffer=function(){this.reset()}).prototype.append=function(e){r=this._buff.buffer,n=e,o=!0,(i=new Uint8Array(r.byteLength+n.byteLength)).set(new Uint8Array(r)),i.set(new Uint8Array(n),r.byteLength);var t,r,n,o,i,s=o?i:i.buffer,u=s.length;for(this._length+=e.byteLength,t=64;t<=u;t+=64)a(this._hash,f(s.subarray(t-64,t)));return this._buff=t-64<u?new Uint8Array(s.buffer.slice(t-64)):new Uint8Array(0),this},i.ArrayBuffer.prototype.end=function(e){for(var t,r=this._buff,n=r.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],i=0;i<n;i+=1)o[i>>2]|=r[i]<<(i%4<<3);return this._finish(o,n),t=s(this._hash),e&&(t=u(t)),this.reset(),t},i.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},i.ArrayBuffer.prototype.getState=function(){var e,t=i.prototype.getState.call(this);return t.buff=(e=t.buff,String.fromCharCode.apply(null,new Uint8Array(e))),t},i.ArrayBuffer.prototype.setState=function(e){return e.buff=function(e,t){for(var r=e.length,n=new ArrayBuffer(r),o=new Uint8Array(n),i=0;i<r;i+=1)o[i]=e.charCodeAt(i);return t?o:n}(e.buff,!0),i.prototype.setState.call(this,e)},i.ArrayBuffer.prototype.destroy=i.prototype.destroy,i.ArrayBuffer.prototype._finish=i.prototype._finish,i.ArrayBuffer.hash=function(e,t){e=s(function(e){for(var t,r,n,o,i=e.length,s=[1732584193,-271733879,-1732584194,271733878],u=64;u<=i;u+=64)a(s,f(e.subarray(u-64,u)));for(t=(e=u-64<i?e.subarray(u-64):new Uint8Array(0)).length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],u=0;u<t;u+=1)r[u>>2]|=e[u]<<(u%4<<3);if(r[u>>2]|=128<<(u%4<<3),55<u)for(a(s,r),u=0;u<16;u+=1)r[u]=0;return o=(o=8*i).toString(16).match(/(.*?)(.{0,8})$/),n=parseInt(o[2],16),o=parseInt(o[1],16)||0,r[14]=n,r[15]=o,a(s,r),s}(new Uint8Array(e)));return t?u(e):e},i;function l(e,t){return(e=0|e||0)<0?Math.max(e+t,0):Math.min(e,t)}}()},2467:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serialize=t.deserialize=t.registerSerializer=void 0;const n=r(7381);let o=n.DefaultSerializer;t.registerSerializer=function(e){o=n.extendSerializer(o,e)},t.deserialize=function(e){return o.deserialize(e)},t.serialize=function(e){return o.serialize(e)}},7381:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultSerializer=t.extendSerializer=void 0,t.extendSerializer=function(e,t){const r=e.deserialize.bind(e),n=e.serialize.bind(e);return{deserialize:e=>t.deserialize(e,r),serialize:e=>t.serialize(e,n)}};const r={deserialize:e=>Object.assign(Error(e.message),{name:e.name,stack:e.stack}),serialize:e=>({__error_marker:"$$error",message:e.message,name:e.name,stack:e.stack})};t.DefaultSerializer={deserialize(e){return(t=e)&&"object"==typeof t&&"__error_marker"in t&&"$$error"===t.__error_marker?r.deserialize(e):e;var t},serialize:e=>e instanceof Error?r.serialize(e):e}},8258:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.$worker=t.$transferable=t.$terminate=t.$events=t.$errors=void 0,t.$errors=Symbol("thread.errors"),t.$events=Symbol("thread.events"),t.$terminate=Symbol("thread.terminate"),t.$transferable=Symbol("thread.transferable"),t.$worker=Symbol("thread.worker")},8180:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Transfer=t.isTransferDescriptor=void 0;const n=r(8258);t.isTransferDescriptor=function(e){return e&&"object"==typeof e&&e[n.$transferable]},t.Transfer=function(e,t){if(!t){if(!e||"object"!=typeof e)throw Error();t=[e]}return{[n.$transferable]:!0,send:e,transferables:t}}},3229:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.WorkerMessageType=t.MasterMessageType=void 0,(r=t.MasterMessageType||(t.MasterMessageType={})).cancel="cancel",r.run="run",(r=t.WorkerMessageType||(t.WorkerMessageType={})).error="error",r.init="init",r.result="result",r.running="running",r.uncaughtError="uncaughtError"},3447:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={isWorkerRuntime:function(){var e="undefined"!=typeof self&&"undefined"!=typeof Window&&self instanceof Window;return!("undefined"==typeof self||!self.postMessage||e)},postMessageToMaster:function(e,t){self.postMessage(e,t)},subscribeToMasterMessages:function(t){const e=e=>{t(e.data)};return self.addEventListener("message",e),()=>{self.removeEventListener("message",e)}}}},1934:function(e,t,r){"use strict";var s=this&&this.__awaiter||function(e,s,u,a){return new(u=u||Promise)(function(r,t){function n(e){try{i(a.next(e))}catch(e){t(e)}}function o(e){try{i(a.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof u?t:new u(function(e){e(t)})).then(n,o)}i((a=a.apply(e,s||[])).next())})},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.expose=t.isWorkerRuntime=t.Transfer=t.registerSerializer=void 0;const o=n(r(6898)),u=r(2467),i=r(8180),a=r(3229),c=n(r(3447));var f=r(2467),l=(Object.defineProperty(t,"registerSerializer",{enumerable:!0,get:function(){return f.registerSerializer}}),r(8180));Object.defineProperty(t,"Transfer",{enumerable:!0,get:function(){return l.Transfer}}),t.isWorkerRuntime=c.default.isWorkerRuntime;let d=!1;const p=new Map,h=e=>e&&e.type===a.MasterMessageType.run,v=e=>o.default(e)||e&&"object"==typeof e&&"function"==typeof e.subscribe;function y(e){return i.isTransferDescriptor(e)?{payload:e.send,transferables:e.transferables}:{payload:e,transferables:void 0}}function g(e,t){var{payload:t,transferables:r}=y(t),e={type:a.WorkerMessageType.error,uid:e,error:u.serialize(t)};c.default.postMessageToMaster(e,r)}function m(e,t,r){var{payload:r,transferables:n}=y(r),e={type:a.WorkerMessageType.result,uid:e,complete:!!t||void 0,payload:r};c.default.postMessageToMaster(e,n)}function _(t){try{var e={type:a.WorkerMessageType.uncaughtError,error:u.serialize(t)};c.default.postMessageToMaster(e)}catch(e){console.error("Not reporting uncaught error back to master thread as it occured while reporting an uncaught error already.\nLatest error:",e,"\nOriginal error:",t)}}function b(n,o,i){s(this,void 0,void 0,function*(){let e;try{e=o(...i)}catch(e){return g(n,e)}var t=v(e)?"observable":"promise",r=n;if(r={type:a.WorkerMessageType.running,uid:r,resultType:t},c.default.postMessageToMaster(r),v(e)){const o=e.subscribe(e=>m(n,!1,u.serialize(e)),e=>{g(n,u.serialize(e)),p.delete(n)},()=>{m(n,!0),p.delete(n)});p.set(n,o)}else try{const o=yield e;m(n,!0,u.serialize(o))}catch(e){g(n,u.serialize(e))}})}t.expose=function(t){if(!c.default.isWorkerRuntime())throw Error("expose() called in the master thread.");if(d)throw Error("expose() called more than once. This is not possible. Pass an object to expose() if you want to expose multiple functions.");if(d=!0,"function"==typeof t)c.default.subscribeToMasterMessages(e=>{h(e)&&!e.method&&b(e.uid,t,e.args.map(u.deserialize))}),e={type:a.WorkerMessageType.init,exposed:{type:"function"}},c.default.postMessageToMaster(e);else{if("object"!=typeof t||!t)throw Error("Invalid argument passed to expose(). Expected a function or an object, got: "+t);c.default.subscribeToMasterMessages(e=>{h(e)&&e.method&&b(e.uid,t[e.method],e.args.map(u.deserialize))});e=Object.keys(t).filter(e=>"function"==typeof t[e]);e={type:a.WorkerMessageType.init,exposed:{type:"module",methods:e}},c.default.postMessageToMaster(e)}var e;c.default.subscribeToMasterMessages(e=>{if(e&&e.type===a.MasterMessageType.cancel){const t=e.uid,r=p.get(t);r&&(r.unsubscribe(),p.delete(t))}var t})},"undefined"!=typeof self&&"function"==typeof self.addEventListener&&c.default.isWorkerRuntime()&&(self.addEventListener("error",e=>{setTimeout(()=>_(e.error||e),250)}),self.addEventListener("unhandledrejection",e=>{const t=e.reason;t&&"string"==typeof t.message&&setTimeout(()=>_(t),250)})),"undefined"!=typeof process&&"function"==typeof process.on&&c.default.isWorkerRuntime()&&(process.on("uncaughtException",e=>{setTimeout(()=>_(e),250)}),process.on("unhandledRejection",e=>{e&&"string"==typeof e.message&&setTimeout(()=>_(e),250)}))},3684:(e,t)=>{"use strict";function d(e,t,r){var n=r[r.length-1],r=(e===n.element&&(r.pop(),n=r[r.length-1]),n.element),n=n.index;Array.isArray(r)?r.push(e):n===t.length-2?r[t.pop()]=e:t.push(e)}t.stringify=function(e){var t=[];t.push({obj:e});for(var r,n,o,i,s,u,a,c,f="";n=t.pop();)if(r=n.obj,f+=n.prefix||"",n=n.val||"")f+=n;else if("object"!=typeof r)f+=void 0===r?null:JSON.stringify(r);else if(null===r)f+="null";else if(Array.isArray(r)){for(t.push({val:"]"}),o=r.length-1;0<=o;o--)t.push({obj:r[o],prefix:0===o?"":","});t.push({val:"["})}else{for(s in i=[],r)r.hasOwnProperty(s)&&i.push(s);for(t.push({val:"}"}),o=i.length-1;0<=o;o--)a=r[u=i[o]],c=0<o?",":"",c+=JSON.stringify(u)+":",t.push({obj:a,prefix:c});t.push({val:"{"})}return f},t.parse=function(e){for(var t,r,n,o,i,s,u,a,c=[],f=[],l=0;;)if("}"!==(t=e[l++])&&"]"!==t&&void 0!==t)switch(t){case" ":case"\t":case"\n":case":":case",":break;case"n":l+=3,d(null,c,f);break;case"t":l+=3,d(!0,c,f);break;case"f":l+=4,d(!1,c,f);break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"-":for(r="",l--;;){if(n=e[l++],!/[\d\.\-e\+]/.test(n)){l--;break}r+=n}d(parseFloat(r),c,f);break;case'"':for(o="",i=void 0,s=0;'"'!==(u=e[l++])||"\\"===i&&s%2==1;)o+=u,"\\"===(i=u)?s++:s=0;d(JSON.parse('"'+o+'"'),c,f);break;case"[":a={element:[],index:c.length},c.push(a.element),f.push(a);break;case"{":a={element:{},index:c.length},c.push(a.element),f.push(a);break;default:throw new Error("unexpectedly reached end of input: "+t)}else{if(1===c.length)return c.pop();d(c.pop(),c,f)}}},5525:()=>{},8894:(e,t,r)=>{"use strict";r.d(t,{v4:()=>n});t=r(1074);t.v1,t.v3;const n=t.v4;t.v5}},n={};function dn(e){var t=n[e];if(void 0!==t)return t.exports;t=n[e]={exports:{}};return r[e].call(t.exports,t,t.exports,dn),t.exports}dn.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return dn.d(t,{a:t}),t},dn.d=(e,t)=>{for(var r in t)dn.o(t,r)&&!dn.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},dn.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),dn.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),dn.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";function n(){this._store={}}function B(e){if(this._store=new n,e&&Array.isArray(e))for(var t=0,r=e.length;t<r;t++)this.add(e[t])}n.prototype.get=function(e){return this._store["$"+e]},n.prototype.set=function(e,t){return this._store["$"+e]=t,!0},n.prototype.has=function(e){return"$"+e in this._store},n.prototype.delete=function(e){var e="$"+e,t=e in this._store;return delete this._store[e],t},n.prototype.forEach=function(e){for(var t=Object.keys(this._store),r=0,n=t.length;r<n;r++){var o=t[r];e(this._store[o],o.substring(1))}},Object.defineProperty(n.prototype,"size",{get:function(){return Object.keys(this._store).length}}),B.prototype.add=function(e){return this._store.set(e,!0)},B.prototype.has=function(e){return this._store.has(e)},B.prototype.forEach=function(r){this._store.forEach(function(e,t){r(t)})},Object.defineProperty(B.prototype,"size",{get:function(){return this._store.size}}),C=function(){var e;if("undefined"!=typeof Symbol&&"undefined"!=typeof Map&&"undefined"!=typeof Set)return e=Object.getOwnPropertyDescriptor(Map,Symbol.species),e&&"get"in e&&Map[Symbol.species]===Map}()?(Set,Map):n;var C,e=dn(7105),L=dn.n(e),b=dn(8621),w=dn(2733),k=dn(347),e=dn(5717),t=dn.n(e),e=dn(7187),u=dn.n(e),R=fetch,z=Headers,U=-324;function p(e,t){if(e===t)return 0;e=l(e),t=l(t);var r=N(e),n=N(t);if(r-n!=0)return r-n;switch(typeof e){case"number":return e-t;case"boolean":return e<t?-1:1;case"string":return e===t?0:t<e?1:-1}return(Array.isArray(e)?function(e,t){for(var r=Math.min(e.length,t.length),n=0;n<r;n++){var o=p(e[n],t[n]);if(0!==o)return o}return e.length===t.length?0:e.length>t.length?1:-1}:function(e,t){for(var r=Object.keys(e),n=Object.keys(t),o=Math.min(r.length,n.length),i=0;i<o;i++){var s=p(r[i],n[i]);if(0!==s)return s;if(0!==(s=p(e[r[i]],t[n[i]])))return s}return r.length===n.length?0:r.length>n.length?1:-1})(e,t)}function l(e){switch(typeof e){case"undefined":return null;case"number":return e===1/0||e===-1/0||isNaN(e)?null:e;case"object":var t,r=e;if(Array.isArray(e)){var n=e.length;e=new Array(n);for(var o=0;o<n;o++)e[o]=l(r[o])}else{if(e instanceof Date)return e.toJSON();if(null!==e)for(var i in e={},r)!r.hasOwnProperty(i)||void 0!==(t=r[i])&&(e[i]=l(t))}}return e}function d(e){return N(e=l(e))+""+function(e){if(null!==e)switch(typeof e){case"boolean":return e?1:0;case"number":var t=e;if(0===t)return"1";var r=t.toExponential().split(/e\+?/),n=parseInt(r[1],10),o=(t=t<0)?"0":"2",i=((t?-n:n)-U).toString(),n=(o+=""+(function(){for(var e="",t=3-i.length;e.length<t;)e+="0";return e}()+i),Math.abs(parseFloat(r[0])));return o+""+(n=t?10-n:n).toFixed(20).replace(/\.?0+$/,"");case"string":return e.replace(/\u0002/g,"").replace(/\u0001/g,"").replace(/\u0000/g,"");case"object":var r=Array.isArray(e),s=r?e:Object.keys(e),u=-1,a=s.length,c="";if(r)for(;++u<a;)c+=d(s[u]);else for(;++u<a;){var f=s[u];c+=d(f)+d(e[f])}return c}return""}(e)+"\0"}function N(e){var t=["boolean","number","string","object"].indexOf(typeof e);return~t?null===e?1:Array.isArray(e)?5:t<3?t+2:t+3:Array.isArray(e)?5:void 0}function F(e,t){for(var r=e,n=0,o=t.length;n<o&&(r=r[t[n]]);n++);return r}function W(e,t){return e<t?-1:t<e?1:0}function K(e){for(var t=[],r="",n=0,o=e.length;n<o;n++){var i=e[n];"."===i?r=0<n&&"\\"===e[n-1]?r.substring(0,r.length-1)+".":(t.push(r),""):r+=i}return t.push(r),t}var V=["$or","$nor","$not"];function J(e){return-1<V.indexOf(e)}function x(e){return Object.keys(e)[0]}function Q(e){return e[x(e)]}function G(e){var r={};return e.forEach(function(t){Object.keys(t).forEach(function(e){var u,a=t[e];"object"!=typeof a&&(a={$eq:a}),J(e)?r[e]=a instanceof Array?a.map(function(e){return G([e])}):G([a]):(u=r[e]=r[e]||{},Object.keys(a).forEach(function(e){var t,r,n,o,i,s=a[e];return"$gt"===e||"$gte"===e?(n=e,o=s,void(void 0===(i=u).$eq&&(void 0!==i.$gte?"$gte"===n?o>i.$gte&&(i.$gte=o):o>=i.$gte&&(delete i.$gte,i.$gt=o):void 0!==i.$gt?"$gte"===n?o>i.$gt&&(delete i.$gt,i.$gte=o):o>i.$gt&&(i.$gt=o):i[n]=o))):"$lt"===e||"$lte"===e?(i=e,n=s,void(void 0===(o=u).$eq&&(void 0!==o.$lte?"$lte"===i?n<o.$lte&&(o.$lte=n):n<=o.$lte&&(delete o.$lte,o.$lt=n):void 0!==o.$lt?"$lte"===i?n<o.$lt&&(delete o.$lt,o.$lte=n):n<o.$lt&&(o.$lt=n):o[i]=n))):"$ne"===e?(t=s,void("$ne"in(r=u)?r.$ne.push(t):r.$ne=[t])):"$eq"===e?(r=s,delete(t=u).$gt,delete t.$gte,delete t.$lt,delete t.$lte,delete t.$ne,void(t.$eq=r)):void(u[e]=s)}))})}),r}function Y(e){var t=(0,k.d9)(e),r=!1;!function e(t,r){for(var n in t)"$and"===n&&(r=!0),"object"==typeof(n=t[n])&&(r=e(n,r));return r}(t,!1)||("$and"in(t=function e(t){for(var r in t){if(Array.isArray(t))for(var n in t)t[n].$and&&(t[n]=G(t[n].$and));"object"==typeof(r=t[r])&&e(r)}return t}(t))&&(t=G(t.$and)),r=!0),["$or","$nor"].forEach(function(e){e in t&&t[e].forEach(function(e){for(var t=Object.keys(e),r=0;r<t.length;r++){var n=t[r],o=e[n];"object"==typeof o&&null!==o||(e[n]={$eq:o})}})}),"$not"in t&&(t.$not=G([t.$not]));for(var n=Object.keys(t),o=0;o<n.length;o++){var i=n[o],s=t[i];"object"!=typeof s||null===s?s={$eq:s}:"$ne"in s&&!r&&(s.$ne=[s.$ne]),t[i]=s}return t}function H(e,t,r){var n,o,i;function s(t){return n.map(function(e){e=K(x(e));return F(t,e)})}return e=e.filter(function(e){return a(e.doc,t.selector,r)}),t.sort&&(n=t.sort,e=e.sort(function(e,t){var r=p(s(e.doc),s(t.doc));return 0!==r?r:W(e.doc._id,t.doc._id)}),"string"!=typeof t.sort[0]&&"desc"===Q(t.sort[0])&&(e=e.reverse())),("limit"in t||"skip"in t)&&(o=t.skip||0,i=("limit"in t?t.limit:e.length)+o,e=e.slice(o,i)),e}function a(s,u,e){return e.every(function(e){var t,r,n=u[e],o=K(e),i=F(s,o);return J(e)?(t=n,r=s,"$or"===(e=e)?t.some(function(e){return a(r,e,Object.keys(e))}):"$not"===e?!a(r,t,Object.keys(t)):!t.find(function(e){return a(r,e,Object.keys(e))})):X(n,s,o,i)})}function X(r,n,o,i){return!r||("object"==typeof r?Object.keys(r).every(function(e){var t=r[e];if(te[e])return te[e](n,t,o,i);throw new Error('unknown operator "'+e+'" - should be one of $eq, $lte, $lt, $gt, $gte, $exists, $ne, $in, $nin, $size, $mod, $regex, $elemMatch, $type, $allMatch or $all')}):r===i)}function Z(e){return null!=e}function o(e){return void 0!==e}function ee(t,e){return e.some(function(e){return t instanceof Array?-1<t.indexOf(e):t===e})}var te={$elemMatch:function(t,r,n,e){return!!Array.isArray(e)&&0!==e.length&&("object"==typeof e[0]?e.some(function(e){return a(e,r,Object.keys(r))}):e.some(function(e){return X(r,t,n,e)}))},$allMatch:function(t,r,n,e){return!!Array.isArray(e)&&0!==e.length&&("object"==typeof e[0]?e.every(function(e){return a(e,r,Object.keys(r))}):e.every(function(e){return X(r,t,n,e)}))},$eq:function(e,t,r,n){return o(n)&&0===p(n,t)},$gte:function(e,t,r,n){return o(n)&&0<=p(n,t)},$gt:function(e,t,r,n){return o(n)&&0<p(n,t)},$lte:function(e,t,r,n){return o(n)&&p(n,t)<=0},$lt:function(e,t,r,n){return o(n)&&p(n,t)<0},$exists:function(e,t,r,n){return t?o(n):!o(n)},$mod:function(e,n,t,r){return Z(r)&&function(e){var t=n[0],r=n[1];if(0===t)throw new Error("Bad divisor, cannot divide by zero");if(parseInt(t,10)!==t)throw new Error("Divisor is not an integer");if(parseInt(r,10)!==r)throw new Error("Modulus is not an integer");return parseInt(e,10)===e&&e%t===r}(r)},$ne:function(e,t,r,n){return t.every(function(e){return 0!==p(n,e)})},$in:function(e,t,r,n){return Z(n)&&ee(n,t)},$nin:function(e,t,r,n){return Z(n)&&!ee(n,t)},$size:function(e,t,r,n){return Z(n)&&n.length===t},$all:function(e,t,r,n){return Array.isArray(n)&&(o=n,t.every(function(e){return-1<o.indexOf(e)}));var o},$regex:function(e,t,r,n){return Z(n)&&(n=n,new RegExp(t).test(n))},$type:function(e,t,r,n){var o=n,n=t;switch(n){case"null":return null===o;case"boolean":return"boolean"==typeof o;case"number":return"number"==typeof o;case"string":return"string"==typeof o;case"array":return o instanceof Array;case"object":return"[object Object]"==={}.toString.call(o)}throw new Error(n+" not supported as a type.Please use one of object, string, array, number, boolean or null.")}};function re(e,t){if(e.selector&&e.filter&&"_selector"!==e.filter)return e="string"==typeof e.filter?e.filter:"function",t(new Error('selector invalid for filter "'+e+'"'));t()}function ne(e){e.view&&!e.filter&&(e.filter="_view"),e.selector&&!e.filter&&(e.filter="_selector"),e.filter&&"string"==typeof e.filter&&("_view"===e.filter?e.view=(0,k.Rc)(e.view):e.filter=(0,k.Rc)(e.filter))}function oe(e,t){return t.filter&&"string"==typeof t.filter&&!t.doc_ids&&!(0,k.Q1)(e.db)}function ie(r,n){var e,o,i=n.complete;if("_view"===n.filter){if(!n.view||"string"!=typeof n.view)return e=(0,w.Tr)(w.y3,"`view` filter parameter not found or invalid."),i(e);var s=(0,k.VO)(n.view);r.db.get("_design/"+s[0],function(e,t){return r.isCancelled?i(null,{status:"cancelled"}):e?i((0,w.G3)(e)):(e=t&&t.views&&t.views[s[1]]&&t.views[s[1]].map)?(n.filter=(e=["return function(doc) {",'  "use strict";',"  var emitted = false;","  var emit = function (a, b) {","    emitted = true;","  };","  var view = "+e+";","  view(doc);","  if (emitted) {","    return true;","  }","};"].join("\n"),(0,k.m6)(e,{})),void r.doChanges(n)):i((0,w.Tr)(w.Uc,t.views?"missing json key: "+s[1]:"missing json key: views"))})}else n.selector?(n.filter=function(e){var t=n.selector;if("object"!=typeof t)throw new Error("Selector error: expected a JSON object");return(e=H([{doc:e}],{selector:t=Y(t)},Object.keys(t)))&&1===e.length},r.doChanges(n)):(o=(0,k.VO)(n.filter),r.db.get("_design/"+o[0],function(e,t){return r.isCancelled?i(null,{status:"cancelled"}):e?i((0,w.G3)(e)):(e=t&&t.filters&&t.filters[o[1]])?(n.filter=(0,k.m6)('"use strict";\nreturn '+e+";",{}),void r.doChanges(n)):i((0,w.Tr)(w.Uc,t&&t.filters?"missing json key: "+o[1]:"missing json key: filters"))}))}function se(r,t,n){u().call(this);var o=this,i=(this.db=r,(t=t?(0,k.d9)(t):{}).complete=(0,k.IH)(function(e,t){e?0<(0,k.xS)(o,"error")&&o.emit("error",e):o.emit("complete",t),o.removeAllListeners(),r.removeListener("destroyed",s)}));function s(){o.cancel()}n&&(o.on("complete",function(e){n(null,e)}),o.on("error",n)),r.once("destroyed",s),t.onChange=function(e,t,r){if(!o.isCancelled){var n=o;try{n.emit("change",e,t,r)}catch(n){(0,k.yq)("error",'Error in .on("change", function):',n)}}};var e=new Promise(function(r,n){t.complete=function(e,t){e?n(e):r(t)}});o.once("cancel",function(){r.removeListener("destroyed",s),t.complete(null,{status:"cancelled"})}),this.then=e.then.bind(e),this.catch=e.catch.bind(e),this.then(function(e){i(null,e)},i),r.taskqueue.isReady?o.validateChanges(t):r.taskqueue.addTask(function(e){e?t.complete(e):o.isCancelled?o.emit("cancel"):o.validateChanges(t)})}function ue(e,t,r){var n=[{rev:e._rev}],n=("all_docs"===r.style&&(n=(0,b.cI)(t.rev_tree).map(function(e){return{rev:e.rev}})),{id:t.id,changes:n,doc:e});return(0,b.uY)(t,e._rev)&&(n.deleted=!0),r.conflicts&&(n.doc._conflicts=(0,b.DJ)(t),n.doc._conflicts.length||delete n.doc._conflicts),n}function ae(e,t){return e<t?-1:t<e?1:0}function ce(r,n){return function(e,t){e||t[0]&&t[0].error?((e=e||t[0]).docId=n,r(e)):r(null,t.length?t[0]:t)}}function fe(e,t){var r=ae(e._id,t._id);return 0!==r?r:ae(e._revisions?e._revisions.start:0,t._revisions?t._revisions.start:0)}function i(){for(var e in u().call(this),i.prototype)"function"==typeof this[e]&&(this[e]=this[e].bind(this))}function le(){this.isReady=!1,this.failed=!1,this.queue=[]}function c(e,t){if(!(this instanceof c))return new c(e,t);var o=this;if(t=t||{},e&&"object"==typeof e&&(e=(t=e).name,delete t.name),void 0===t.deterministic_revs&&(t.deterministic_revs=!0),this.__opts=t=(0,k.d9)(t),o.auto_compaction=t.auto_compaction,o.prefix=c.prefix,"string"!=typeof e)throw new Error("Missing/invalid DB name");var r=function(e,t){var r=e.match(/([a-z-]*):\/\/(.*)/);if(r)return{name:/https?/.test(r[1])?r[1]+"://"+r[2]:r[2],adapter:r[1]};var n=c.adapters,o=c.preferredAdapters,i=c.prefix,s=t.adapter;if(!s)for(var u=0;u<o.length&&"idb"===(s=o[u])&&"websql"in n&&(0,k.eW)()&&localStorage["_pouch__websqldb_"+i+e];++u)(0,k.yq)("log",'PouchDB is downgrading "'+e+'" to WebSQL to avoid data loss, because it was already opened with WebSQL.');r=n[s];return{name:r&&"use_prefix"in r&&!r.use_prefix?e:i+e,adapter:s}}((t.prefix||"")+e,t);if(t.name=r.name,t.adapter=t.adapter||r.adapter,o.name=e,o._adapter=t.adapter,c.emit("debug",["adapter","Picked adapter: ",t.adapter]),!c.adapters[t.adapter]||!c.adapters[t.adapter].valid())throw new Error("Invalid Adapter: "+t.adapter);i.call(o),o.taskqueue=new le,o.adapter=t.adapter,c.adapters[t.adapter].call(o,t,function(e){if(e)return o.taskqueue.fail(e);function t(e){n.removeListener("closed",r),e||n.constructor.emit("destroyed",n.name)}function r(){n.removeListener("destroyed",t),n.constructor.emit("unref",n)}var n;(n=o).once("destroyed",t),n.once("closed",r),n.constructor.emit("ref",n),o.emit("created",o),c.emit("created",o.name),o.taskqueue.ready(o)})}t()(se,u()),se.prototype.cancel=function(){this.isCancelled=!0,this.db.taskqueue.isReady&&this.emit("cancel")},se.prototype.validateChanges=function(t){var r=t.complete,n=this;c._changesFilterPlugin?c._changesFilterPlugin.validate(t,function(e){if(e)return r(e);n.doChanges(t)}):n.doChanges(t)},se.prototype.doChanges=function(t){var r=this,n=t.complete;if("live"in(t=(0,k.d9)(t))&&!("continuous"in t)&&(t.continuous=t.live),t.processChange=ue,"latest"===t.since&&(t.since="now"),t.since||(t.since=0),"now"!==t.since){if(c._changesFilterPlugin){if(c._changesFilterPlugin.normalize(t),c._changesFilterPlugin.shouldFilter(this,t))return c._changesFilterPlugin.filter(this,t)}else["doc_ids","filter","selector","view"].forEach(function(e){e in t&&(0,k.yq)("warn",'The "'+e+'" option was passed in to changes/replicate, but pouchdb-changes-filter plugin is not installed, so it was ignored. Please install the plugin to enable filtering.')});"descending"in t||(t.descending=!1),t.limit=0===t.limit?1:t.limit,t.complete=n;var o,i=this.db._changes(t);i&&"function"==typeof i.cancel&&(o=r.cancel,r.cancel=L()(function(e){i.cancel(),o.apply(this,e)}))}else this.db.info().then(function(e){r.isCancelled?n(null,{status:"cancelled"}):(t.since=e.update_seq,r.doChanges(t))},n)},t()(i,u()),i.prototype.post=(0,k.D3)("post",function(e,t,r){if("function"==typeof t&&(r=t,t={}),"object"!=typeof e||Array.isArray(e))return r((0,w.Tr)(w.nM));this.bulkDocs({docs:[e]},t,ce(r,e._id))}),i.prototype.put=(0,k.D3)("put",function(r,t,n){if("function"==typeof t&&(n=t,t={}),"object"!=typeof r||Array.isArray(r))return n((0,w.Tr)(w.nM));if((0,k.GE)(r._id),(0,b.zB)(r._id)&&"function"==typeof this._putLocal)return r._deleted?this._removeLocal(r,n):this._putLocal(r,n);var e,o,i,s=this;function u(e){"function"==typeof s._put&&!1!==t.new_edits?s._put(r,t,e):s.bulkDocs({docs:[r]},t,ce(e,r._id))}t.force&&r._rev?(e=(o=r._rev.split("-"))[1],o=parseInt(o[0],10)+1,i=(0,k.OD)(),r._revisions={start:o,ids:[i,e]},r._rev=o+"-"+i,t.new_edits=!1,u(function(e){var t=e?null:{ok:!0,id:r._id,rev:r._rev};n(e,t)})):u(n)}),i.prototype.putAttachment=(0,k.D3)("putAttachment",function(t,r,n,o,i){var s=this;function u(e){var t="_rev"in e?parseInt(e._rev,10):0;return e._attachments=e._attachments||{},e._attachments[r]={content_type:i,data:o,revpos:++t},s.put(e)}return"function"==typeof i&&(i=o,o=n,n=null),void 0===i&&(i=o,o=n,n=null),i||(0,k.yq)("warn","Attachment",r,"on document",t,"is missing content_type"),s.get(t).then(function(e){if(e._rev!==n)throw(0,w.Tr)(w.gW);return u(e)},function(e){if(e.reason===w.Uc.message)return u({_id:t});throw e})}),i.prototype.removeAttachment=(0,k.D3)("removeAttachment",function(e,r,n,o){var i=this;i.get(e,function(e,t){if(e)o(e);else if(t._rev===n){if(!t._attachments)return o();delete t._attachments[r],0===Object.keys(t._attachments).length&&delete t._attachments,i.put(t,o)}else o((0,w.Tr)(w.gW))})}),i.prototype.remove=(0,k.D3)("remove",function(e,t,r,n){"string"==typeof t?(o={_id:e,_rev:t},"function"==typeof r&&(n=r,r={})):(o=e,r="function"==typeof t?(n=t,{}):(n=r,t)),(r=r||{}).was_delete=!0;var o,e={_id:o._id,_rev:o._rev||r.rev,_deleted:!0};if((0,b.zB)(e._id)&&"function"==typeof this._removeLocal)return this._removeLocal(o,n);this.bulkDocs({docs:[e]},r,ce(n,e._id))}),i.prototype.revsDiff=(0,k.D3)("revsDiff",function(o,e,u){"function"==typeof e&&(u=e,e={});var a=Object.keys(o);if(!a.length)return u(null,{});var c=0,f=new C;function l(e,t){f.has(e)||f.set(e,{missing:[]}),f.get(e).missing.push(t)}a.map(function(n){this._getRevisionTree(n,function(e,t){if(e&&404===e.status&&"missing"===e.message)f.set(n,{missing:o[n]});else{if(e)return u(e);e=t,s=o[i=n].slice(0),(0,b.fE)(e,function(e,t,r,n,o){t=t+"-"+r,r=s.indexOf(t);-1!==r&&(s.splice(r,1),"available"!==o.status&&l(i,t))}),s.forEach(function(e){l(i,e)})}var i,s,r;if(++c===a.length)return r={},f.forEach(function(e,t){r[t]=e}),u(null,r)})},this)}),i.prototype.bulkGet=(0,k.D3)("bulkGet",function(e,t){(0,k.o)(this,e,t)}),i.prototype.compactDocument=(0,k.D3)("compactDocument",function(n,a,c){var f=this;this._getRevisionTree(n,function(e,t){if(e)return c(e);o={},i=[],(0,b.fE)(t,function(e,t,r,n){t=t+"-"+r;return e&&(o[t]=0),void 0!==n&&i.push({from:n,to:t}),t}),i.reverse(),i.forEach(function(e){void 0===o[e.from]?o[e.from]=1+o[e.to]:o[e.from]=Math.min(o[e.from],1+o[e.to])});var o,i,r=o,s=[],u=[];Object.keys(r).forEach(function(e){r[e]>a&&s.push(e)}),(0,b.fE)(t,function(e,t,r,n,o){t=t+"-"+r;"available"===o.status&&-1!==s.indexOf(t)&&u.push(t)}),f._doCompaction(n,u,c)})}),i.prototype.compact=(0,k.D3)("compact",function(e,t){"function"==typeof e&&(t=e,e={});var r=this;e=e||{},r._compactionQueue=r._compactionQueue||[],r._compactionQueue.push({opts:e,callback:t}),1===r._compactionQueue.length&&function r(n){var e=n._compactionQueue[0],t=e.opts,o=e.callback;n.get("_local/compaction").catch(function(){return!1}).then(function(e){e&&e.last_seq&&(t.last_seq=e.last_seq),n._compact(t,function(e,t){e?o(e):o(null,t),(0,k.Y3)(function(){n._compactionQueue.shift(),n._compactionQueue.length&&r(n)})})})}(r)}),i.prototype._compact=function(e,r){var n=this,e={return_docs:!1,last_seq:e.last_seq||0},o=[];n.changes(e).on("change",function(e){o.push(n.compactDocument(e.id,0))}).on("complete",function(e){var t=e.last_seq;Promise.all(o).then(function(){return(0,k.H)(n,"_local/compaction",function(e){return(!e.last_seq||e.last_seq<t)&&(e.last_seq=t,e)})}).then(function(){r(null,{ok:!0})}).catch(r)}).on("error",r)},i.prototype.get=(0,k.D3)("get",function(y,g,m){if("function"==typeof g&&(m=g,g={}),"string"!=typeof y)return m((0,w.Tr)(w.JE));if((0,b.zB)(y)&&"function"==typeof this._getLocal)return this._getLocal(y,m);var r=[],_=this;function n(){var s=[],u=r.length;if(!u)return m(null,s);r.forEach(function(i){_.get(y,{rev:i,revs:g.revs,latest:g.latest,attachments:g.attachments,binary:g.binary},function(e,t){if(e)s.push({missing:i});else{for(var r,n=0,o=s.length;n<o;n++)if(s[n].ok&&s[n].ok._rev===t._rev){r=!0;break}r||s.push({ok:t})}--u||m(null,s)})})}if(!g.open_revs)return this._get(y,g,function(e,t){if(e)return e.docId=y,m(e);var o=t.doc,r=t.metadata,i=t.ctx;if(!g.conflicts||(t=(0,b.DJ)(r)).length&&(o._conflicts=t),(0,b.uY)(r,o._rev)&&(o._deleted=!0),g.revs||g.revs_info){for(var t=o._rev.split("-"),n=parseInt(t[0],10),s=t[1],u=(0,b.vc)(r.rev_tree),a=null,c=0;c<u.length;c++){var f=u[c],l=f.ids.map(function(e){return e.id}).indexOf(s);l!==n-1&&(a||-1===l)||(a=f)}if(!a)return(e=new Error("invalid rev tree")).docId=y,m(e);var d,t=a.ids.map(function(e){return e.id}).indexOf(o._rev.split("-")[1])+1,r=a.ids.length-t;a.ids.splice(t,r),a.ids.reverse(),g.revs&&(o._revisions={start:a.pos+a.ids.length-1,ids:a.ids.map(function(e){return e.id})}),g.revs_info&&(d=a.pos+a.ids.length,o._revs_info=a.ids.map(function(e){return{rev:--d+"-"+e.id,status:e.opts.status}}))}if(g.attachments&&o._attachments){var p=o._attachments,h=Object.keys(p).length;if(0===h)return m(null,o);Object.keys(p).forEach(function(n){this._getAttachment(o._id,n,p[n],{rev:o._rev,binary:g.binary,ctx:i},function(e,t){var r=o._attachments[n];r.data=t,delete r.stub,delete r.length,--h||m(null,o)})},_)}else{if(o._attachments)for(var v in o._attachments)o._attachments.hasOwnProperty(v)&&(o._attachments[v].stub=!0);m(null,o)}});if("all"===g.open_revs)this._getRevisionTree(y,function(e,t){if(e)return m(e);r=(0,b.cI)(t).map(function(e){return e.rev}),n()});else{if(!Array.isArray(g.open_revs))return m((0,w.Tr)(w.I4,"function_clause"));for(var r=g.open_revs,e=0;e<r.length;e++){var t=r[e];if("string"!=typeof t||!/^\d+-/.test(t))return m((0,w.Tr)(w.Dq))}n()}}),i.prototype.getAttachment=(0,k.D3)("getAttachment",function(r,n,o,i){var s=this;o instanceof Function&&(i=o,o={}),this._get(r,o,function(e,t){return e?i(e):t.doc._attachments&&t.doc._attachments[n]?(o.ctx=t.ctx,o.binary=!0,void s._getAttachment(r,n,t.doc._attachments[n],o,i)):i((0,w.Tr)(w.Uc))})}),i.prototype.allDocs=(0,k.D3)("allDocs",function(t,e){if("function"==typeof t&&(e=t,t={}),t.skip=void 0!==t.skip?t.skip:0,t.start_key&&(t.startkey=t.start_key),t.end_key&&(t.endkey=t.end_key),"keys"in t){if(!Array.isArray(t.keys))return e(new TypeError("options.keys must be an array"));var r=["startkey","endkey","key"].filter(function(e){return e in t})[0];if(r)return void e((0,w.Tr)(w.bi,"Query parameter `"+r+"` is not compatible with multi-get"));if(!(0,k.Q1)(this)&&(n="limit"in(r=t)?r.keys.slice(r.skip,r.limit+r.skip):0<r.skip?r.keys.slice(r.skip):r.keys,r.keys=n,r.skip=0,delete r.limit,r.descending&&(n.reverse(),r.descending=!1),0===t.keys.length))return this._allDocs({limit:0},e)}var n;return this._allDocs(t,e)}),i.prototype.changes=function(e,t){return"function"==typeof e&&(t=e,e={}),(e=e||{}).return_docs="return_docs"in e?e.return_docs:!e.live,new se(this,e,t)},i.prototype.close=(0,k.D3)("close",function(e){return this._closed=!0,this.emit("closed"),this._close(e)}),i.prototype.info=(0,k.D3)("info",function(r){var n=this;this._info(function(e,t){if(e)return r(e);t.db_name=t.db_name||n.name,t.auto_compaction=!(!n.auto_compaction||(0,k.Q1)(n)),t.adapter=n.adapter,r(null,t)})}),i.prototype.id=(0,k.D3)("id",function(e){return this._id(e)}),i.prototype.type=function(){return"function"==typeof this._type?this._type():this.adapter},i.prototype.bulkDocs=(0,k.D3)("bulkDocs",function(e,o,i){if("function"==typeof o&&(i=o,o={}),o=o||{},!(e=Array.isArray(e)?{docs:e}:e)||!e.docs||!Array.isArray(e.docs))return i((0,w.Tr)(w.kD));for(var n,t=0;t<e.docs.length;++t)if("object"!=typeof e.docs[t]||Array.isArray(e.docs[t]))return i((0,w.Tr)(w.nM));if(e.docs.forEach(function(r){r._attachments&&Object.keys(r._attachments).forEach(function(e){var t;n=n||"_"===(t=e).charAt(0)&&t+" is not a valid attachment name, attachment names cannot start with '_'",r._attachments[e].content_type||(0,k.yq)("warn","Attachment",e,"on document",r._id,"is missing content_type")})}),n)return i((0,w.Tr)(w.y3,n));"new_edits"in o||(o.new_edits=!("new_edits"in e)||e.new_edits);for(var s=this,r=(o.new_edits||(0,k.Q1)(s)||e.docs.sort(fe),e.docs),u=0;u<r.length;u++){var a=r[u];if(a._deleted)delete a._attachments;else if(a._attachments)for(var c=Object.keys(a._attachments),f=0;f<c.length;f++){var l=c[f];a._attachments[l]=(0,k.ei)(a._attachments[l],["data","digest","content_type","length","revpos","stub"])}}var d=e.docs.map(function(e){return e._id});return this._bulkDocs(e,o,function(e,t){if(e)return i(e);if(o.new_edits||(t=t.filter(function(e){return e.error})),!(0,k.Q1)(s))for(var r=0,n=t.length;r<n;r++)t[r].id=t[r].id||d[r];i(null,t)})}),i.prototype.registerDependentDatabase=(0,k.D3)("registerDependentDatabase",function(t,e){var r=new this.constructor(t,this.__opts);(0,k.H)(this,"_local/_pouch_dependentDbs",function(e){return e.dependentDbs=e.dependentDbs||{},!e.dependentDbs[t]&&(e.dependentDbs[t]=!0,e)}).then(function(){e(null,{db:r})}).catch(e)}),i.prototype.destroy=(0,k.D3)("destroy",function(e,n){"function"==typeof e&&(n=e,e={});var o=this,i=!("use_prefix"in o)||o.use_prefix;function s(){o._destroy(e,function(e,t){if(e)return n(e);o._destroyed=!0,o.emit("destroyed"),n(null,t||{ok:!0})})}if((0,k.Q1)(o))return s();o.get("_local/_pouch_dependentDbs",function(e,t){if(e)return 404!==e.status?n(e):s();var e=t.dependentDbs,r=o.constructor,t=Object.keys(e).map(function(e){e=i?e.replace(new RegExp("^"+r.prefix),""):e;return new r(e,o.__opts).destroy()});Promise.all(t).then(s,n)})}),le.prototype.execute=function(){var e;if(this.failed)for(;e=this.queue.shift();)e(this.failed);else for(;e=this.queue.shift();)e()},le.prototype.fail=function(e){this.failed=e,this.execute()},le.prototype.ready=function(e){this.isReady=!0,this.db=e,this.execute()},le.prototype.addTask=function(e){this.queue.push(e),this.failed&&this.execute()},t()(c,i),c.adapters={},c.preferredAdapters=[],c.prefix="_pouch_";var r,s,de=new(u());r=c,Object.keys(u().prototype).forEach(function(e){"function"==typeof u().prototype[e]&&(r[e]=de[e].bind(de))}),s=r._destructionListeners=new C,r.on("ref",function(e){s.has(e.name)||s.set(e.name,[]),s.get(e.name).push(e)}),r.on("unref",function(e){var t,r;!s.has(e.name)||(r=(t=s.get(e.name)).indexOf(e))<0||(t.splice(r,1),1<t.length?s.set(e.name,t):s.delete(e.name))}),r.on("destroyed",function(e){var t;s.has(e)&&(t=s.get(e),s.delete(e),t.forEach(function(e){e.emit("destroyed",!0)}))}),c.adapter=function(e,t,r){t.valid()&&(c.adapters[e]=t,r&&c.preferredAdapters.push(e))},c.plugin=function(t){if("function"==typeof t)t(c);else{if("object"!=typeof t||0===Object.keys(t).length)throw new Error('Invalid plugin: got "'+t+'", expected an object or a function');Object.keys(t).forEach(function(e){c.prototype[e]=t[e]})}return this.__defaults&&(c.__defaults=(0,k.f0)({},this.__defaults)),c},c.defaults=function(e){function r(e,t){if(!(this instanceof r))return new r(e,t);t=t||{},e&&"object"==typeof e&&(e=(t=e).name,delete t.name),t=(0,k.f0)({},r.__defaults,t),c.call(this,e,t)}return t()(r,c),r.preferredAdapters=c.preferredAdapters.slice(),Object.keys(c).forEach(function(e){e in r||(r[e]=c[e])}),r.__defaults=(0,k.f0)({},this.__defaults,e),r},c.fetch=function(e,t){return R(e,t)},c.plugin(function(e){e._changesFilterPlugin={validate:re,normalize:ne,shouldFilter:oe,filter:ie}}),c.version="7.2.2";const pe=c;function he(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ve(e,t,r){t&&he(e.prototype,t),r&&he(e,r),Object.defineProperty(e,"prototype",{writable:!1})}function ye(e,t){return(ye=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ge(e,t){e.prototype=Object.create(t.prototype),ye(e.prototype.constructor=e,t)}function me(e){return(me=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _e(e,t,r){return(_e=function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),1}catch(e){return}}}()?Reflect.construct:function(e,t,r){var n=[null],t=(n.push.apply(n,t),new(Function.bind.apply(e,n)));return r&&ye(t,r.prototype),t}).apply(null,arguments)}function be(e){var r="function"==typeof Map?new Map:void 0;return(be=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(e))return r.get(e);r.set(e,t)}function t(){return _e(e,arguments,me(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),ye(t,e)})(e)}dn(6313),dn(8322);var e=dn(9134),e=dn.n(e),we=0;function ke(){var e=(new Date).getTime();return we=e=e<=we?we+1:e}Promise.resolve(!0),Promise.resolve(!1),Promise.resolve(null);var je=Promise.resolve();function Oe(e){if(e)return e;throw new Error("ensureNotFalsy() is falsy")}function v(e){return Object.assign({},e)}function xe(e){e=e.split("-");return{height:parseInt(e[0],10),hash:e[1]}}function y(e,t){e=e.get(t);if(e)return e;throw new Error("missing value from map "+t)}function Se(e){return Array.isArray(e)}e()();function Pe(n){return"string"==typeof n?Promise.resolve(n):"undefined"!=typeof Buffer&&n instanceof Buffer?new Promise(function(e){return setTimeout(e,0)}).then(function(){return n.toString("base64")}):new Promise(function(t,e){var r=new FileReader;r.onerror=e,r.onload=function(){var e=r.result.split(",");e.shift(),t(e.join(","))},"[object Uint8Array]"===Object.prototype.toString.call(n)&&(n=new Blob([n])),r.readAsDataURL(n)})}function Ae(e){return"RxDB Error-Code "+e+".\n        Error messages are not included in RxDB core to reduce build size.\n        - To find out what this error means, either use the dev-mode-plugin https://rxdb.info/dev-mode.html\n        - or search for the error code here: https://github.com/pubkey/rxdb/search?q="+e+"\n        "}function Ee(e,t,r){return"RxError ("+t+"):\n"+e+"\n"+(n=r,t="",0===Object.keys(n).length?t:(t=(t+="Given parameters: {\n")+Object.keys(n).map(function(e){var t="[object Object]";try{t=JSON.stringify(n[e],function(e,t){return void 0===t?null:t},2)}catch(e){}return e+":"+t}).join("\n"))+"}");var n}ge(Ie,Me=be(Error)),Ie.prototype.toString=function(){return this.message},ve(Ie,[{key:"name",get:function(){return"RxError ("+this.code+")"}},{key:"typeError",get:function(){return!1}}]);var De,Me,$e=Ie,Te=(ge(qe,De=be(TypeError)),qe.prototype.toString=function(){return this.message},ve(qe,[{key:"name",get:function(){return"RxTypeError ("+this.code+")"}},{key:"typeError",get:function(){return!0}}]),qe);function qe(e,t){var r,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},t=Ee(t,e,n);return(r=De.call(this,t)||this).code=e,r.message=t,r.parameters=n,r.rxdb=!0,r}function Ie(e,t){var r,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},t=Ee(t,e,n);return(r=Me.call(this,t)||this).code=e,r.message=t,r.parameters=n,r.rxdb=!0,r}function g(e,t){return new $e(e,Ae(e),t)}var Be=new Set;function Ce(e){if(e.rxdb)throw new Te("PL2",Ae("PL2"),{plugin:e});"object"==typeof e&&e.default&&(e=e.default),Be.has(e)||(Be.add(e),pe.plugin(e))}var Le=pe,Re=(ze.prototype.has=function(e){return this.set.has(e)},ze.prototype.add=function(e){var o=this;this.timeMap.set(e,Ue()),this.set.add(e),setTimeout(function(){for(var e=o,t=Ue()-e.ttl,r=e.set[Symbol.iterator]();;){var n=r.next().value;if(!n)return;if(!(e.timeMap.get(n)<t))return;e.timeMap.delete(n),e.set.delete(n)}},0)},ze.prototype.clear=function(){this.set.clear(),this.timeMap.clear()},ze);function ze(e){this.ttl=e,this.set=new Set,this.timeMap=new Map}function Ue(){return(new Date).getTime()}var Ne=function(e,t){return(Ne=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};function Fe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Ne(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}function We(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ke(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)s.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s}function Ve(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||((n=n||Array.prototype.slice.call(t,0,o))[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))}function h(e){return"function"==typeof e}function Je(e){e=e(function(e){Error.call(e),e.stack=(new Error).stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e}Object.create,Object.create;var Qe=Je(function(t){return function(e){t(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e}});function Ge(e,t){e&&0<=(t=e.indexOf(t))&&e.splice(t,1)}f.prototype.unsubscribe=function(){var e,t,r,n,o;if(!this.closed){this.closed=!0;var i=this._parentage;if(i)if(this._parentage=null,Array.isArray(i))try{for(var s=We(i),u=s.next();!u.done;u=s.next())u.value.remove(this)}catch(t){e={error:t}}finally{try{u&&!u.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}else i.remove(this);i=this.initialTeardown;if(h(i))try{i()}catch(e){o=e instanceof Qe?e.errors:[e]}i=this._finalizers;if(i){this._finalizers=null;try{for(var a=We(i),c=a.next();!c.done;c=a.next()){var f=c.value;try{Ze(f)}catch(e){o=null!=o?o:[],e instanceof Qe?o=Ve(Ve([],Ke(o)),Ke(e.errors)):o.push(e)}}}catch(e){r={error:e}}finally{try{c&&!c.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}}if(o)throw new Qe(o)}},f.prototype.add=function(e){var t;if(e&&e!==this)if(this.closed)Ze(e);else{if(e instanceof f){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!=(t=this._finalizers)?t:[]).push(e)}},f.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},f.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},f.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&Ge(t,e)},f.prototype.remove=function(e){var t=this._finalizers;t&&Ge(t,e),e instanceof f&&e._removeParent(this)},f.EMPTY=((e=new f).closed=!0,e);var Ye=f,He=Ye.EMPTY;function f(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}function Xe(e){return e instanceof Ye||e&&"closed"in e&&h(e.remove)&&h(e.add)&&h(e.unsubscribe)}function Ze(e){h(e)?e():e.unsubscribe()}var et=null,tt=null,rt=void 0,nt=!1,ot=!1,it={setTimeout:function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var o=it.delegate;return null!=o&&o.setTimeout?o.setTimeout.apply(o,Ve([e,t],Ke(r))):setTimeout.apply(void 0,Ve([e,t],Ke(r)))},clearTimeout:function(e){var t=it.delegate;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function st(){}var ut=at("C",void 0,void 0);function at(e,t,r){return{kind:e,value:t,error:r}}var m=null;function ct(e){if(nt){var t=!m;if(t&&(m={errorThrown:!1,error:null}),e(),t){var t=m,r=t.errorThrown,t=t.error;if(m=null,r)throw t}}else e()}Fe(_,ft=Ye),_.create=function(e,t,r){return new yt(e,t,r)},_.prototype.next=function(e){this.isStopped?bt(at("N",e,void 0),this):this._next(e)},_.prototype.error=function(e){this.isStopped?bt(at("E",void 0,e),this):(this.isStopped=!0,this._error(e))},_.prototype.complete=function(){this.isStopped?bt(ut,this):(this.isStopped=!0,this._complete())},_.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,ft.prototype.unsubscribe.call(this),this.destination=null)},_.prototype._next=function(e){this.destination.next(e)},_.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},_.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}};var ft,lt=_,dt=Function.prototype.bind;function _(e){var t=ft.call(this)||this;return t.isStopped=!1,e?Xe(t.destination=e)&&e.add(t):t.destination=wt,t}function pt(e,t){return dt.call(e,t)}mt.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){_t(e)}},mt.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){_t(e)}else _t(e)},mt.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){_t(e)}};var ht,vt=mt,yt=(Fe(gt,ht=lt),gt);function gt(e,t,r){var n=ht.call(this)||this,r=h(e)||!e?{next:null!=e?e:void 0,error:null!=t?t:void 0,complete:null!=r?r:void 0}:n&&ot?((t=Object.create(e)).unsubscribe=function(){return n.unsubscribe()},{next:e.next&&pt(e.next,t),error:e.error&&pt(e.error,t),complete:e.complete&&pt(e.complete,t)}):e;return n.destination=new vt(r),n}function mt(e){this.partialObserver=e}function _t(e){var t,r;nt?(t=e,nt&&m&&(m.errorThrown=!0,m.error=t)):(r=e,it.setTimeout(function(){if(!et)throw r;et(r)}))}function bt(e,t){var r=tt;r&&it.setTimeout(function(){return r(e,t)})}var wt={closed:!0,next:st,error:function(e){throw e},complete:st},e="function"==typeof Symbol&&Symbol.observable||"@@observable";function kt(e){return e}j.prototype.lift=function(e){var t=new j;return t.source=this,t.operator=e,t},j.prototype.subscribe=function(e,t,r){var n,o=this,i=(n=e)&&n instanceof lt||n&&h(n.next)&&h(n.error)&&h(n.complete)&&Xe(n)?e:new yt(e,t,r);return ct(function(){var e=o.operator,t=o.source;i.add(e?e.call(i,t):t?o._subscribe(i):o._trySubscribe(i))}),i},j.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){t.error(e)}},j.prototype.forEach=function(n,e){var o=this;return new(e=Ot(e))(function(e,t){var r=new yt({next:function(e){try{n(e)}catch(e){t(e),r.unsubscribe()}},error:t,complete:e});o.subscribe(r)})},j.prototype._subscribe=function(e){var t;return null==(t=this.source)?void 0:t.subscribe(e)},j.prototype[e]=function(){return this},j.prototype.pipe=function(){for(var t,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return(0===(t=e).length?kt:1===t.length?t[0]:function(e){return t.reduce(function(e,t){return t(e)},e)})(this)},j.prototype.toPromise=function(e){var n=this;return new(e=Ot(e))(function(e,t){var r;n.subscribe(function(e){return r=e},function(e){return t(e)},function(){return e(r)})})},j.create=function(e){return new j(e)};var jt=j;function j(e){e&&(this._subscribe=e)}function Ot(e){return null!=(e=null!=e?e:rt)?e:Promise}var xt,St,Pt=Je(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),At=(Fe(S,St=jt),S.prototype.lift=function(e){var t=new Et(this,this);return t.operator=e,t},S.prototype._throwIfClosed=function(){if(this.closed)throw new Pt},S.prototype.next=function(o){var i=this;ct(function(){var t,e;if(i._throwIfClosed(),!i.isStopped){i.currentObservers||(i.currentObservers=Array.from(i.observers));try{for(var r=We(i.currentObservers),n=r.next();!n.done;n=r.next())n.value.next(o)}catch(e){t={error:e}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}}})},S.prototype.error=function(t){var r=this;ct(function(){if(r._throwIfClosed(),!r.isStopped){r.hasError=r.isStopped=!0,r.thrownError=t;for(var e=r.observers;e.length;)e.shift().error(t)}})},S.prototype.complete=function(){var t=this;ct(function(){if(t._throwIfClosed(),!t.isStopped){t.isStopped=!0;for(var e=t.observers;e.length;)e.shift().complete()}})},S.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(S.prototype,"observed",{get:function(){var e;return 0<(null==(e=this.observers)?void 0:e.length)},enumerable:!1,configurable:!0}),S.prototype._trySubscribe=function(e){return this._throwIfClosed(),St.prototype._trySubscribe.call(this,e)},S.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},S.prototype._innerSubscribe=function(e){var t=this,r=this.hasError,n=this.isStopped,o=this.observers;return r||n?He:(this.currentObservers=null,o.push(e),new Ye(function(){t.currentObservers=null,Ge(o,e)}))},S.prototype._checkFinalizedStatuses=function(e){var t=this.hasError,r=this.thrownError,n=this.isStopped;t?e.error(r):n&&e.complete()},S.prototype.asObservable=function(){var e=new jt;return e.source=this,e},S.create=function(e,t){return new Et(e,t)},S),Et=(Fe(O,xt=At),O.prototype.next=function(e){var t,r;null!=(r=null==(t=this.destination)?void 0:t.next)&&r.call(t,e)},O.prototype.error=function(e){var t,r;null!=(r=null==(t=this.destination)?void 0:t.error)&&r.call(t,e)},O.prototype.complete=function(){var e,t;null!=(t=null==(e=this.destination)?void 0:e.complete)&&t.call(e)},O.prototype._subscribe=function(e){var t;return null!=(t=null==(t=this.source)?void 0:t.subscribe(e))?t:He},O),Dt=dn(7239);function O(e,t){var r=xt.call(this)||this;return r.destination=e,r.source=t,r}function S(){var e=St.call(this)||this;return e.closed=!1,e.currentObservers=null,e.observers=[],e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}var e=dn(1528),Mt=dn.n(e);function $t(e){return"string"==typeof e?e:e.key}function Tt(e){try{if(!e)return Promise.resolve({});var s={};return Promise.resolve(Promise.all(Object.entries(e).map(function(e){try{var n=e[0],t=e[1];if(!t.type)throw g("SNH",{args:{obj:t}});var r=t.data?(o=function(r){return Promise.resolve(qt.hash(atob(r))).then(function(e){var t=atob(r).length;s[n]={digest:"md5-"+e,length:t,type:i.type}})},"string"==typeof(i=t).data?o(i.data):Promise.resolve(Pe(i.data)).then(o)):void(s[n]=t);return Promise.resolve(r&&r.then?r.then(function(){}):void 0)}catch(e){return Promise.reject(e)}var o,i}))).then(function(){return s})}catch(e){return Promise.reject(e)}}var qt={hash:function(e){return r=e,new Promise(function(t){(0,Dt.u)(r,function(e){t(e)})});var r},hashKey:"md5",doesBroadcastChangestream:function(){return!1},getSortComparator:function(e,r){var n=$t(e.primaryKey),o=r.sort||[((e={})[n]="asc",e)],e=r.selector||{},i=Object.keys(e).filter(function(e){return!e.startsWith("$")});return function(e,t){if(e[n]===t[n])throw g("SNH",{args:{a:e,b:t},primaryPath:n});e=[e,t].map(function(e){return{doc:Lt(n,e)}}),t=H(e,{selector:{},sort:o},i);if(2!==t.length)throw g("SNH",{query:r,primaryPath:n,args:{rows:e,sortedRows:t}});return t[0].doc._id===e[0].doc._id?-1:1}},getQueryMatcher:function(e,t){var r=$t(e.primaryKey),n=t.selector||{},o=Y(n);return function(e){if(e._deleted)return!1;e=H([{doc:Lt(r,e)}],{selector:o},Object.keys(n));return e&&1===e.length}},prepareQuery:function(e,t){return t=t,n=$t((o=e).primaryKey),(i=t).sort&&i.sort.forEach(function(e){var t,r=Object.keys(e)[0],n=["$gt","$gte","$lt","$lte","$eq"];if(!(i.selector&&i.selector[r]&&Object.keys(i.selector[r]).some(function(e){return n.includes(e)}))){e=o,t=function(e){for(;"."===e.charAt(0);)e=e.substr(1);for(;"."===e.slice(-1);)e=e.slice(0,-1);return e}(t="properties."+(t=r).replace(/\./g,".properties."));e=Mt().get(e,t);if(!e)throw g("QU5",{query:i,key:r,schema:o});switch(i.selector||(i.selector={}),i.selector[r]||(i.selector[r]={}),e.type){case"number":case"integer":i.selector[r].$gt=-1e28;break;case"string":"string"!=typeof i.selector[r]&&(i.selector[r].$gt="");break;default:i.selector[r].$gt=null}}}),i.sort&&(r=i.sort.map(function(e){var t,r=Object.keys(e)[0],e=Object.values(e)[0];return(t={})[r===n?"_id":r]=e,t}),i.sort=r),Object.entries(Oe(i.selector)).forEach(function(e){var t=e[0],e=e[1];"object"!=typeof e||null===e||Array.isArray(e)||0!==Object.keys(e).length||delete Oe(i.selector)[t]}),t.index&&(r=Rt((Se(r=t.index)?r:[r]).map(function(e){return e===n?"_id":e})),delete t.index,t.use_index=r),i.selector=function r(e,n){if("_id"===n)return e;if(Array.isArray(e))return e.map(function(e){return r(e,n)});{var o;if("object"==typeof e)return o={},Object.entries(e).forEach(function(e){var t=e[0],e=e[1];t===n?o._id=e:t.startsWith("$")?o[t]=r(e,n):o[t]=e}),o}return e}(i.selector,n),i;var o,r,n,i}},It=new Set,Bt="_design/";function Ct(e,t){return"_id"===e||t[e]||((t=v(t))[e]=t._id,delete t._id),t}function P(e,t){var r=Ct(e,t);return delete(r=v(r))._revisions,r._deleted=!!r._deleted,r._attachments={},t._attachments&&Object.entries(t._attachments).forEach(function(e){var t=e[0],e=e[1];e.data?r._attachments[t]={data:e.data,type:e.type||e.content_type}:r._attachments[t]={digest:e.digest,type:e.type||e.content_type,length:e.length}}),r._meta=r.rxdbMeta,delete r.rxdbMeta,r}function Lt(e,t){if("_id"===e)return t;var r=t[e],t=v(t);return delete t[e],t._id=r,t}function Rt(e){return"idx-rxdb-index-"+e.join(",")}var zt=!1,Ut=new Map;function Nt(e){var e=[e.name,e.adapter].join("|"),t=Ut.get(e);return t||(t={subject:new At},Ut.set(e,t)),t}var Ft=0,Wt=new WeakMap;function Kt(){var n,i;zt||(zt=!0,n=pe.prototype.bulkDocs,i=function(e,a,c){try{var f,t=function(){var s=[],i=!1;if(a.custom&&a.hasOwnProperty("new_edits")&&!1===a.new_edits){f=[];var e=a.custom.writeRowById,u=a.custom.insertDocsById;if(Array.from(e.entries()).forEach(function(e){var t=e[0],e=e[1],r=e.previous?e.previous._rev:null,n=xe(e.document._rev),o=h.get(t);(o?o._rev:null)===r||o&&o._deleted&&!e.previous?((r={start:o?o._revisions.start+1:n.height,ids:o?o._revisions.ids.slice(0):[]}).ids.unshift(n.hash),o=r.start+"-"+n.hash,i=!0,f.push(Object.assign({},u.get(t),{_revisions:r,_rev:o})),s.push({ok:!0,id:t,rev:e.document._rev})):s.push({error:!0,id:t,status:409})}),!i)return s}var t,r=v(a),e=(r.isDeeper=!0,new Promise(function(o,i){t=n.call(l,f,r,function(e,t){if(e)(c||i)(e);else try{t.forEach(function(e){s.push(e)});var r,n=je;return a.isDeeper||(r=ke(),n=function(u,s,a){try{var c=[],e=function(){if(!a.writeOptions.custom&&a.writeOptions.hasOwnProperty("new_edits")&&!1===a.writeOptions.new_edits)return Promise.resolve(Promise.all(a.writeDocs.map(function(o){try{var i=o._id;return o=P(s,o),Promise.resolve(Tt(o._attachments)).then(function(e){o._attachments=e;var t,e=a.previousDocs.get(i);if(e=e&&P(s,e)){var r=xe(e._rev),n=xe(o._rev);if(r.height>n.height||r.height===n.height&&r.hash>n.hash)return}if((e||!o._deleted)&&!(e&&e._deleted&&o._deleted)){if(e&&!e._deleted||o._deleted)if(o._deleted&&e&&!e._deleted)e._rev=o._rev,t={operation:"DELETE",doc:null,id:i,previous:e};else{if(!e)throw g("SNH",{args:{writeDoc:o}});t={operation:"UPDATE",doc:o,id:i,previous:e}}else t={operation:"INSERT",doc:o,id:i,previous:null};r=Vt(u,s,t,a.startTime,a.endTime);c.push(r)}})}catch(e){return Promise.reject(e)}}))).then(function(){});var e=function(){var n;if(!a.writeOptions.custom||a.writeOptions.custom&&!a.writeOptions.custom.writeRowById)return n=new Map,a.writeDocs.forEach(function(e){return n.set(e._id,e)}),Promise.resolve(Promise.all(a.writeResult.map(function(t){try{var e=t.id;if(e.startsWith(Bt)||e.startsWith("_local/"))return Promise.resolve();var r=y(n,t.id),r=P(s,r);return Promise.resolve(Tt(r._attachments)).then(function(e){r._attachments=e,(r=v(r))._rev=t.rev;e=function(e,t){if(!t)throw g("SNH",{args:{pouchDoc:t}});var r=t._id,n=(e=P(e,t))._rev?xe(e._rev).height:1;return t._deleted?{operation:"DELETE",id:r,doc:null,previous:e}:1===n?{operation:"INSERT",id:r,doc:e,previous:null}:{operation:"UPDATE",id:r,doc:e,previous:"UNKNOWN"}}(s,r),e=Vt(u,s,e);c.push(e)})}catch(e){return Promise.reject(e)}}))).then(function(){});var e=a.writeOptions.custom.writeRowById;return Promise.resolve(Promise.all(a.writeResult.map(function(o){try{if(o.error)return Promise.resolve();var i=o.id,s=y(e,i);return Promise.resolve(Tt(s.document._attachments)).then(function(e){function t(){var e;s.document._deleted&&(!s.previous||s.previous._deleted)||(e=Vt(u,a.writeOptions.custom.primaryPath,r,a.startTime,a.endTime),c.push(e))}var r,n=Object.assign({},s.document,{_attachments:e,_rev:o.rev}),e=function(){if(!s.previous||s.previous._deleted)r={operation:"INSERT",doc:n,id:i,previous:null};else{var e=s.document._deleted?Promise.resolve(Tt(s.previous._attachments)).then(function(e){e=Object.assign({},s.previous,{_attachments:e});r={operation:"DELETE",doc:null,id:o.id,previous:e}}):void(r={operation:"UPDATE",doc:n,id:o.id,previous:s.previous});if(e&&e.then)return e.then(function(){})}}();return e&&e.then?e.then(t):t()})}catch(e){return Promise.reject(e)}}))).then(function(){})}();return e&&e.then?e.then(function(){}):void 0}();return Promise.resolve(e&&e.then?e.then(function(){return c}):c)}catch(u){return Promise.reject(u)}}(l,"_id",{emitId:p,writeDocs:f,writeOptions:a,writeResult:s,previousDocs:h,startTime:d,endTime:r}).then(function(e){e={id:function(e){for(var t=0<arguments.length&&void 0!==e?e:10,r="",n="abcdefghijklmnopqrstuvwxyz",o=0;o<t;o++)r+=n.charAt(Math.floor(Math.random()*n.length));return r}(10),events:e};Nt(l).subject.next(e)})),c?(c(null,s),Promise.resolve()):Promise.resolve(n.then(function(){return o(s),s}))}catch(n){return Promise.reject(n)}})}));return a.custom?e:t},l=this,d=ke(),p=Ft++;if("function"==typeof a&&(c=a,a={}),a=a||{},Array.isArray(e)?f=e:void 0===e?f=[]:(f=e.docs,e.hasOwnProperty("new_edits")&&(a.new_edits=e.new_edits)),0===f.length)throw g("SNH",{args:{body:e,options:a}});var h=a.custom?a.custom.previousDocsInDb:new Map,r=function(){if(a.hasOwnProperty("new_edits")&&!1===a.new_edits)return Promise.resolve(l.bulkGet({docs:f.map(function(e){return{id:e._id}}),revs:!0,latest:!0})).then(function(e){var r=[],e=(e.results.forEach(function(e){var t=e.docs[0];t.ok?h.set(t.ok._id,t.ok):t.error&&"deleted"===t.error.reason&&r.push(e.id)}),function(){if(0<r.length)return Promise.resolve(l.allDocs({keys:r,include_docs:!0,conflicts:!0})).then(function(e){var t=[];return e.rows.forEach(function(e){t.push({id:e.id,rev:e.value.rev})}),Promise.resolve(l.bulkGet({docs:t,revs:!0,latest:!0})).then(function(r){r.results.forEach(function(e){var t=e.docs[0];if(!t.ok)throw g("SNH",{args:{deletedDocsViaBulkGetWithRev:r,resultRow:e}});h.set(t.ok._id,t.ok)})})})}());if(e&&e.then)return e.then(function(){})})}();return Promise.resolve(r&&r.then?r.then(t):t())}catch(e){return Promise.reject(e)}},pe.plugin({bulkDocs:function(e,t,r){try{var n=this,o=Wt.get(n);return o=(o=o||je).then(function(){try{return Promise.resolve(i.bind(n)(e,t,r))}catch(e){return Promise.reject(e)}}),Wt.set(n,o),Promise.resolve(o)}catch(e){return Promise.reject(e)}}}))}function Vt(e,t,r,n,o){var i,s,t=("DELETE"===r.operation?r.previous:r.doc)[t];return{eventId:(s=((i=r).doc||i.previous)._rev,e.name+"|"+t+"|"+i.operation+"|"+s),documentId:t,change:r,startTime:n,endTime:o}}function A(e,t,r){if(!e.s){if(r instanceof Qt){if(!r.s)return void(r.o=A.bind(null,e,t));1&t&&(t=r.s),r=r.v}r&&r.then?r.then(A.bind(null,e,t),A.bind(null,e,2)):(e.s=t,e.v=r,(t=e.o)&&t(e))}}var Jt=0;E.prototype.then=function(r,n){const o=new E,e=this.s;if(e){const E=1&e?r:n;if(E){try{A(o,1,E(this.v))}catch(e){A(o,2,e)}return o}return this}return this.o=function(e){try{var t=e.v;1&e.s?A(o,1,r?r(t):t):n?A(o,1,n(t)):A(o,2,t)}catch(e){A(o,2,e)}},o};const Qt=E;function E(){}function D(e){return e instanceof Qt&&1&e.s}(e=Ht.prototype).close=function(){return this.subs.forEach(function(e){return e.unsubscribe()}),It.delete(this),je},e.remove=function(){try{return this.subs.forEach(function(e){return e.unsubscribe()}),It.delete(this),Promise.resolve(this.internals.pouch.destroy()).then(function(){})}catch(e){return Promise.reject(e)}},e.bulkWrite=function(e){try{var s=this;if(0===e.length)throw g("P2",{args:{documentWrites:e}});var u=new Map,o=new Map,t=e.map(function(e){if(e.document._meta.lwt<1e3||e.previous&&e.previous._meta.lwt>=e.document._meta.lwt)throw g("SNH",{args:e});var t=e.document[s.primaryPath];u.set(t,e);n=s.primaryPath,e=e.document,(r=v(r=Lt(n,e)))._attachments={},e._attachments&&Object.entries(e._attachments).forEach(function(e){var t=e[0],e=e[1];e.data?r._attachments[t]={data:e.data,content_type:e.type}:r._attachments[t]={digest:e.digest,content_type:e.type,length:e.length,stub:!0}}),r.rxdbMeta=r._meta,delete r._meta;var r,n=r;return o.set(t,n),n}),a=new Map;return Promise.resolve(s.internals.pouch.bulkDocs(t,{new_edits:!1,custom:{primaryPath:s.primaryPath,writeRowById:u,insertDocsById:o,previousDocsInDb:a}})).then(function(e){var i={success:{},error:{}};return Promise.resolve(Promise.all(e.map(function(n){try{var o=y(u,n.id),e=function(){var t;if(!n.error)return r=function(){i.success[n.id]=t},t=v(o.document),(t=Ct(s.primaryPath,t))._rev=n.rev,t._attachments={},(e=o.document._attachments?Promise.resolve(Tt(o.document._attachments)).then(function(e){t._attachments=e}):void(o.document._attachments={}))&&e.then?e.then(r):r();var e=y(a,n.id),r={isError:!0,status:409,documentId:n.id,writeRow:o,documentInDb:P(s.primaryPath,e)};i.error[n.id]=r}();return Promise.resolve(e&&e.then?e.then(function(){}):void 0)}catch(n){return Promise.reject(n)}}))).then(function(){return i})})}catch(e){return Promise.reject(e)}},e.query=function(e){try{var t=this;return Promise.resolve(t.internals.pouch.find(e)).then(function(e){return{documents:e.docs.map(function(e){return P(t.primaryPath,e)})}})}catch(e){return Promise.reject(e)}},e.getAttachmentData=function(e,t){try{return Promise.resolve(this.internals.pouch.getAttachment(e,t)).then(function(e){return Promise.resolve(Pe(e))})}catch(e){return Promise.reject(e)}},e.findDocumentsById=function(t,e){try{var r=function(e){return n?e:Promise.resolve(o.internals.pouch.allDocs({include_docs:!0,keys:t})).then(function(e){var r={};return e.rows.filter(function(e){return!!e.doc}).forEach(function(e){var t=e.doc,t=P(o.primaryPath,t);r[e.id]=t}),r})},n=!1,o=this,i=function(){if(e)return Promise.resolve(o.internals.pouch.changes({live:!1,since:0,doc_ids:t,style:"all_docs"})).then(function(e){var r={};return Promise.resolve(Promise.all(e.results.map(function(t){try{return Promise.resolve(o.internals.pouch.get(t.id,{rev:t.changes[0].rev,deleted:"ok",style:"all_docs"})).then(function(e){e=P(o.primaryPath,e);r[t.id]=e})}catch(t){return Promise.reject(t)}}))).then(function(){return n=!0,r})})}();return Promise.resolve(i&&i.then?i.then(r):r(i))}catch(t){return Promise.reject(t)}},e.changeStream=function(){return this.changes$.asObservable()},e.cleanup=function(e){return this.internals.pouch.compact().then(function(){return!0})},e.getChangedDocumentsSince=function(e,r){try{var t=function(){return Promise.resolve(n.findDocumentsById(a.map(function(e){return e.id}),!0)).then(function(t){if(0<Object.keys(t).length&&r&&r.sequence===i)throw new Error("same sequence");return a.map(function(e){return{checkpoint:{sequence:e.sequence},document:function(e,t){if(e=e[t])return e;throw new Error("missing value from object "+t)}(t,e.id)}})})},n=this;if(!e||"number"!=typeof e)throw new Error("wrong limit");var o={live:!1,limit:e,include_docs:!1,since:r?r.sequence:0,descending:!1},i=0,s=!0,u=0,a=[],c=function(t,r,n){for(var e;;){var o=t();if(!(o=D(o)?o.v:o))return i;if(o.then){e=0;break}var i=n();if(i&&i.then){if(!D(i)){e=1;break}i=i.s}if(r){var s=r();if(s&&s.then&&!D(s)){e=2;break}}}var u=new Qt,a=A.bind(null,u,2);return(0===e?o.then(f):1===e?i.then(c):s.then(l)).then(void 0,a),u;function c(e){i=e;do{if(r&&(s=r())&&s.then&&!D(s))return void s.then(l).then(void 0,a);if(!(o=t())||D(o)&&!o.v)return void A(u,1,i);if(o.then)return void o.then(f).then(void 0,a)}while(!(i=D(i=n())?i.v:i)||!i.then);i.then(c).then(void 0,a)}function f(e){e?(i=n())&&i.then?i.then(c).then(void 0,a):c(i):A(u,1,i)}function l(){(o=t())?o.then?o.then(f).then(void 0,a):f(o):A(u,1,i)}}(function(){return!!s||0<u},void 0,function(){return s=!1,u=0,Promise.resolve(n.internals.pouch.changes(o)).then(function(e){var t=e.results.filter(function(e){return!e.id.startsWith(Bt)||(u+=1,!1)}).map(function(e){return{id:e.id,sequence:e.seq}});a=a.concat(t),i=e.last_seq,o.since=i,o.limit=u})});return Promise.resolve(c&&c.then?c.then(t):t())}catch(e){return Promise.reject(e)}};var Gt,Yt=Ht;function Ht(e,t,r,n,o,i){var s=this,e=(this.id=Jt++,this.changes$=new At,this.subs=[],this.storage=e,this.databaseName=t,this.collectionName=r,this.schema=n,this.internals=o,this.options=i,It.add(this),this.primaryPath=$t(this.schema.primaryKey),Nt(this.internals.pouch)),u=new Re(6e4),t=e.subject.subscribe(function(e){try{return 0===e.events.length||u.has(e.id)||(u.add(e.id),e.events.forEach(function(e){e.change.doc&&(e.change.doc=Ct(s.primaryPath,e.change.doc)),e.change.previous&&(e.change.previous=Ct(s.primaryPath,e.change.previous))}),s.changes$.next(e)),Promise.resolve()}catch(e){return Promise.reject(e)}});this.subs.push(t)}function M(){this._store={}}function Xt(e){if(this._store=new M,e&&Array.isArray(e))for(var t=0,r=e.length;t<r;t++)this.add(e[t])}M.prototype.get=function(e){return this._store["$"+e]},M.prototype.set=function(e,t){return this._store["$"+e]=t,!0},M.prototype.has=function(e){return"$"+e in this._store},M.prototype.delete=function(e){var e="$"+e,t=e in this._store;return delete this._store[e],t},M.prototype.forEach=function(e){for(var t=Object.keys(this._store),r=0,n=t.length;r<n;r++){var o=t[r];e(this._store[o],o.substring(1))}},Object.defineProperty(M.prototype,"size",{get:function(){return Object.keys(this._store).length}}),Xt.prototype.add=function(e){return this._store.set(e,!0)},Xt.prototype.has=function(e){return this._store.has(e)},Xt.prototype.forEach=function(r){this._store.forEach(function(e,t){r(t)})},Object.defineProperty(Xt.prototype,"size",{get:function(){return this._store.size}});var Zt,er=function(){var e;if("undefined"!=typeof Symbol&&"undefined"!=typeof Map&&"undefined"!=typeof Set)return e=Object.getOwnPropertyDescriptor(Map,Symbol.species),e&&"get"in e&&Map[Symbol.species]===Map}()?(Gt=Set,Map):(Gt=Xt,M),tr=dn(807);function $(){this._store={}}function rr(e){if(this._store=new $,e&&Array.isArray(e))for(var t=0,r=e.length;t<r;t++)this.add(e[t])}function T(e){this.status=400,this.name="query_parse_error",this.message=e,this.error=!0;try{Error.captureStackTrace(this,T)}catch(e){}}function nr(e){this.status=404,this.name="not_found",this.message=e,this.error=!0;try{Error.captureStackTrace(this,nr)}catch(e){}}function or(e){this.status=500,this.name="invalid_value",this.message=e,this.error=!0;try{Error.captureStackTrace(this,or)}catch(e){}}function ir(e,t){t&&e.then(function(e){(0,k.Y3)(function(){t(null,e)})},function(e){(0,k.Y3)(function(){t(e)})})}function sr(r,n){return function(){var e=arguments,t=this;return r.add(function(){return n.apply(t,e)})}}function ur(e){var e=new Zt(e),t=new Array(e.size),r=-1;return e.forEach(function(e){t[++r]=e}),t}function ar(e){var r=new Array(e.size),n=-1;return e.forEach(function(e,t){r[++n]=t}),r}function cr(){this.promise=new Promise(function(e){e()})}function fr(e){if(!e)return"undefined";switch(typeof e){case"function":case"string":return e.toString();default:return JSON.stringify(e)}}function lr(n,o,i,s,t,u){e=s;var a,c=fr(i)+fr(e)+"undefined";if(!t&&(a=n._cachedViews=n._cachedViews||{})[c])return a[c];var e=n.info().then(function(e){var r=e.db_name+"-mrview-"+(t?"temp":(0,Dt.$)(c));return(0,k.H)(n,"_local/"+u,function(e){e.views=e.views||{};var t=o,t=(-1===t.indexOf("/")&&(t=o+"/"+o),e.views[t]=e.views[t]||{});if(!t[r])return t[r]=!0,e}).then(function(){return n.registerDependentDatabase(r).then(function(e){var e=e.db,t=(e.auto_compaction=!0,{name:r,db:e,sourceDB:n,adapter:n.adapter,mapFun:i,reduceFun:s});return t.db.get("_local/lastSeq").catch(function(e){if(404!==e.status)throw e}).then(function(e){return t.seq=e?e.seq:0,a&&t.db.once("destroyed",function(){delete a[c]}),t})})})});return a&&(a[c]=e),e}$.prototype.get=function(e){return this._store["$"+e]},$.prototype.set=function(e,t){return this._store["$"+e]=t,!0},$.prototype.has=function(e){return"$"+e in this._store},$.prototype.delete=function(e){var e="$"+e,t=e in this._store;return delete this._store[e],t},$.prototype.forEach=function(e){for(var t=Object.keys(this._store),r=0,n=t.length;r<n;r++){var o=t[r];e(this._store[o],o.substring(1))}},Object.defineProperty($.prototype,"size",{get:function(){return Object.keys(this._store).length}}),rr.prototype.add=function(e){return this._store.set(e,!0)},rr.prototype.has=function(e){return this._store.has(e)},rr.prototype.forEach=function(r){this._store.forEach(function(e,t){r(t)})},Object.defineProperty(rr.prototype,"size",{get:function(){return this._store.size}}),function(){var e;if("undefined"!=typeof Symbol&&"undefined"!=typeof Map&&"undefined"!=typeof Set)return e=Object.getOwnPropertyDescriptor(Map,Symbol.species),e&&"get"in e&&Map[Symbol.species]===Map}()?(Zt=Set,Map):Zt=rr,t()(T,Error),t()(nr,Error),t()(or,Error),cr.prototype.add=function(e){return this.promise=this.promise.catch(function(){}).then(function(){return e()}),this.promise},cr.prototype.finish=function(){return this.promise};var dr={},pr=new cr;function hr(e){return-1===e.indexOf("/")?[e,e]:e.split("/")}function vr(e,t){try{e.emit("error",t)}catch(e){(0,k.yq)("error","The user's map/reduce function threw an uncaught error.\nYou can debug this error by doing:\nmyDatabase.on('error', function (err) { debugger; });\nPlease double-check your map/reduce function."),(0,k.yq)("error",t)}}function yr(t){return(t=(0,k.d9)(t)).index||(t.index={}),["type","name","ddoc"].forEach(function(e){t.index[e]&&(t[e]=t.index[e],delete t.index[e])}),t.fields&&(t.index.fields=t.fields,delete t.fields),t.type||(t.type="json"),t}function gr(e,t,r,n){var o,i;r.headers=new z({"Content-type":"application/json"}),e.fetch(t,r).then(function(e){return o=e.status,i=e.ok,e.json()}).then(function(e){i?n(null,e):(e.status=o,e=(0,w.G3)(e),n(e))}).catch(n)}function mr(n){return function(){for(var e=arguments.length,t=new Array(e),r=-1;++r<e;)t[r]=arguments[r];return n.call(this,t)}}function _r(n){return mr(function(e){var t,r=e.pop(),e=n.apply(this,e);return t=r,e.then(function(e){(0,k.Y3)(function(){t(null,e)})},function(e){(0,k.Y3)(function(){t(e)})}),e})}var br=mr(function(e){for(var t=[],r=0,n=e.length;r<n;r++){var o=e[r];Array.isArray(o)?t=t.concat(br.apply(null,o)):t.push(o)}return t});function wr(e){for(var t={},r=0,n=e.length;r<n;r++)t=(0,k.f0)(t,e[r]);return t}function kr(e,t){for(var r=0,n=Math.min(e.length,t.length);r<n;r++)if(e[r]!==t[r])return!1;return!0}function jr(e,t){if(e.length!==t.length)return!1;for(var r=0,n=e.length;r<n;r++)if(e[r]!==t[r])return!1;return!0}Or="indexes",xr=function(e,t){return e=Object.keys(e.fields),t=t,f=function(e){for(var t=0,r=e.length;t<r;t++)if(-1!==e[t].indexOf("."))return!1;return!0}(e),l=1===e.length,f?l?(r=e[0],n=t,function(e){n(e[r])}):(s=e,u=t,function(e){for(var t=[],r=0,n=s.length;r<n;r++)t.push(e[s[r]]);u(t)}):l?(f=e[0],o=t,i=K(f),function(e){for(var t=e,r=0,n=i.length;r<n;r++)if(void 0===(t=t[i[r]]))return;o(t)}):(a=e,c=t,function(e){for(var t=[],r=0,n=a.length;r<n;r++){for(var o=K(a[r]),i=e,s=0,u=o.length;s<u;s++)if(void 0===(i=i[o[s]]))return;t.push(i)}c(t)});var a,c,o,i,s,u,r,n,f,l},Sr=function(){throw new Error("reduce not supported")},Pr=function(e,t){var r=e.views[t];if(!r.map||!r.map.fields)throw new Error("ddoc "+e._id+" with view "+t+" doesn't have map.fields defined. maybe it wasn't created by this plugin?")};var Or,xr,Sr,Pr,Ar,Er={query:function(g,m,e){var _=this,t=("function"==typeof m&&(e=m,m={}),m=m?((t=m).group_level=Tr(t.group_level),t.limit=Tr(t.limit),t.skip=Tr(t.skip),t):{},"function"==typeof g&&(g={map:g}),Promise.resolve().then(function(){var e,t,o,r,n,i,s,u,a,c,f=_,l=g,d=m;if("function"==typeof f._query)return e=f,t=l,o=d,new Promise(function(r,n){e._query(t,o,function(e,t){if(e)return n(e);r(t)})});if((0,k.Q1)(f))return r=f,n=l,v="GET",q("reduce",i=d,c=[]),q("include_docs",i,c),q("attachments",i,c),q("limit",i,c),q("descending",i,c),q("group",i,c),q("group_level",i,c),q("skip",i,c),q("stale",i,c),q("conflicts",i,c),q("startkey",i,c,!0),q("start_key",i,c,!0),q("endkey",i,c,!0),q("end_key",i,c,!0),q("inclusive_end",i,c),q("key",i,c,!0),q("update_seq",i,c),c=""===(c=c.join("&"))?"":"?"+c,void 0!==i.keys&&((h="keys="+encodeURIComponent(JSON.stringify(i.keys))).length+c.length+1<=2e3?c+=("?"===c[0]?"&":"?")+h:(v="POST","string"==typeof n?s={keys:i.keys}:n.keys=i.keys)),"string"==typeof n?(h=hr(n),r.fetch("_design/"+h[0]+"/_view/"+h[1]+c,{headers:new z({"Content-Type":"application/json"}),method:v,body:JSON.stringify(s)}).then(function(e){return u=e.ok,a=e.status,e.json()}).then(function(e){if(u)return e.rows.forEach(function(e){if(e.value&&e.value.error&&"builtin_reduce_error"===e.value.error)throw new Error(e.reason)}),e;throw e.status=a,(0,w.G3)(e)}).then($r(i))):(s=s||{},Object.keys(n).forEach(function(e){Array.isArray(n[e])?s[e]=n[e]:s[e]=n[e].toString()}),r.fetch("_temp_view"+c,{headers:new z({"Content-Type":"application/json"}),method:"POST",body:JSON.stringify(s)}).then(function(e){return u=e.ok,a=e.status,e.json()}).then(function(e){if(u)return e;throw e.status=a,(0,w.G3)(e)}).then($r(i)));if("string"!=typeof l)return qr(d,l),pr.add(function(){return lr(f,"temp_view/temp_view",l.map,l.reduce,!0,Or).then(function(e){return t=Lr(e).then(function(){return Rr(e,d)}),r=function(){return e.db.destroy()},t.then(function(e){return r().then(function(){return e})},function(e){return r().then(function(){throw e})});var t,r})}),pr.finish();var p=l,h=hr(p),v=h[0],y=h[1];return f.get("_design/"+v).then(function(e){var t=e.views&&e.views[y];if(t)return Pr(e,y),qr(d,t),lr(f,p,t.map,t.reduce,!1,Or).then(function(e){return"ok"===d.stale||"update_after"===d.stale?("update_after"===d.stale&&(0,k.Y3)(function(){Lr(e)}),Rr(e,d)):Lr(e).then(function(){return Rr(e,d)})});throw new nr("ddoc "+e._id+" has no view named "+y)})}));return ir(t,e),t},viewCleanup:(Ar=function(){var t,e,r=this;return"function"==typeof this._viewCleanup?(e=this,new Promise(function(r,n){e._viewCleanup(function(e,t){if(e)return n(e);r(t)})})):(0,k.Q1)(this)?r.fetch("_view_cleanup",{headers:new z({"Content-Type":"application/json"}),method:"POST"}).then(function(e){return e.json()}):(t=r).get("_local/"+Or).then(function(s){var u=new er,e=(Object.keys(s.views).forEach(function(e){var e=hr(e),t="_design/"+e[0],e=e[1],r=u.get(t);r||(r=new Gt,u.set(t,r)),r.add(e)}),{keys:ar(u),include_docs:!0});return t.allDocs(e).then(function(e){var i={},e=(e.rows.forEach(function(n){var o=n.key.substring(8);u.get(n.key).forEach(function(e){var t=o+"/"+e,t=(s.views[t]||(t=e),Object.keys(s.views[t])),r=n.doc&&n.doc.views&&n.doc.views[e];t.forEach(function(e){i[e]=i[e]||r})})}),Object.keys(i).filter(function(e){return!i[e]}).map(function(e){return sr(Cr(e),function(){return new t.constructor(e,t.__opts).destroy()})()}));return Promise.all(e).then(function(){return{ok:!0}})})},Ir({ok:!0}))},L()(function(e){var t=e.pop(),e=Ar.apply(this,e);return"function"==typeof t&&ir(e,t),e}))};function Dr(e,t){var r=p(e.key,t.key);return 0!==r?r:p(e.value,t.value)}function Mr(e){var t=e.value;return t&&"object"==typeof t&&t._id||e.id}function $r(t){return function(e){return t.include_docs&&t.attachments&&t.binary&&e.rows.forEach(function(e){var r=e.doc&&e.doc._attachments;r&&Object.keys(r).forEach(function(e){var t=r[e];r[e].data=(0,tr.W7)(t.data,t.content_type)})}),e}}function q(e,t,r,n){t=t[e];void 0!==t&&(n&&(t=encodeURIComponent(JSON.stringify(t))),r.push(e+"="+t))}function Tr(e){var t;if(void 0!==e)return t=Number(e),isNaN(t)||t!==parseInt(e,10)?e:t}function qr(t,e){var r=t.descending?"endkey":"startkey",n=t.descending?"startkey":"endkey";if(void 0!==t[r]&&void 0!==t[n]&&0<p(t[r],t[n]))throw new T("No rows can match your key range, reverse your start_key and end_key or set {descending : true}");if(e.reduce&&!1!==t.reduce){if(t.include_docs)throw new T("{include_docs:true} is invalid for reduce");if(t.keys&&1<t.keys.length&&!t.group&&!t.group_level)throw new T("Multi-key fetches for reduce views must use {group: true}")}["group_level","limit","skip"].forEach(function(e){e=function(e){if(e)return"number"!=typeof e?new T('Invalid value for integer: "'+e+'"'):e<0?new T('Invalid value for positive integer: "'+e+'"'):void 0}(t[e]);if(e)throw e})}function Ir(t){return function(e){if(404===e.status)return t;throw e}}function Br(e,t,r){var n="_local/doc_"+e,o={_id:n,keys:[]},r=r.get(e),f=r[0];return(1===(e=r[1]).length&&/^1-/.test(e[0].rev)?Promise.resolve(o):t.db.get(n).catch(Ir(o))).then(function(c){return(c.keys.length?t.db.allDocs({keys:c.keys,include_docs:!0}):Promise.resolve({rows:[]})).then(function(e){for(var t=c,r=e,n=[],o=new Gt,i=0,s=r.rows.length;i<s;i++){var u,a=r.rows[i].doc;!a||(n.push(a),o.add(a._id),a._deleted=!f.has(a._id),a._deleted)||"value"in(u=f.get(a._id))&&(a.value=u.value)}e=ar(f);return e.forEach(function(e){var t;o.has(e)||(t={_id:e},"value"in(e=f.get(e))&&(t.value=e.value),n.push(t))}),t.keys=ur(e.concat(t.keys)),n.push(t),n})})}function Cr(e){e="string"==typeof e?e:e.name;return dr[e]||(dr[e]=new cr)}function Lr(t){return sr(Cr(t),function(){return c=xr((s=t).mapFun,function(e,t){e={id:a._id,key:l(e)},null!=t&&(e.value=l(t)),u.push(e)}),f=s.seq||0,o=new cr,n().then(function(){return o.finish()}).then(function(){s.seq=f});function r(t,i){return function(){return n=t,o=i,e="_local/lastSeq",(r=s).db.get(e).catch(Ir({_id:e,seq:0})).then(function(t){var e=ar(n);return Promise.all(e.map(function(e){return Br(e,r,n)})).then(function(e){e=(0,k.xH)(e);return t.seq=o,e.push(t),r.db.bulkDocs({docs:e})})});var r,n,o,e}}function n(){return s.sourceDB.changes({return_docs:!0,conflicts:!0,include_docs:!0,style:"all_docs",since:f,limit:50}).then(e)}function e(e){e=e.results;if(e.length){var t=function(e){for(var t=new er,r=0,n=e.length;r<n;r++){var o,i=e[r];"_"!==i.doc._id[0]&&(u=[],(a=i.doc)._deleted||function(e,t,r){try{t(r)}catch(t){vr(e,t)}}(s.sourceDB,c,a),u.sort(Dr),o=function(e){for(var t,r=new er,n=0,o=e.length;n<o;n++){var i=e[n],s=[i.key,i.id];0<n&&0===p(i.key,t)&&s.push(n),r.set(d(s),i),t=i.key}return r}(u),t.set(i.doc._id,[o,i.changes])),f=i.seq}return t}(e);if(o.add(r(t,f)),!(e.length<50))return n()}}var s,u,a,c,f,o})()}function Rr(f,l){return sr(Cr(f),function(){var r,o=f,i=l,s=o.reduceFun&&!1!==i.reduce,u=i.skip||0;function t(e){return e.include_docs=!0,o.db.allDocs(e).then(function(e){return r=e.total_rows,e.rows.map(function(e){if("value"in e.doc&&"object"==typeof e.doc.value&&null!==e.doc.value){var t=Object.keys(e.doc.value).sort(),r=["id","key","value"];if(!(t<r||r<t))return e.doc.value}r=function(e){for(var t,r,n,o,i=[],s=[],u=0;;){var a=e[u++];if("\0"!==a)switch(a){case"1":i.push(null);break;case"2":i.push("1"===e[u]),u++;break;case"3":var c=function(e,t){var r,n=t;if("1"===e[t])r=0,t++;else{var o="0"===e[t],i="",s=e.substring(++t,t+3),s=parseInt(s,10)+U;for(o&&(s=-s),t+=3;;){var u=e[t];if("\0"===u)break;i+=u,t++}r=1===(i=i.split(".")).length?parseInt(i,10):parseFloat(i[0]+"."+i[1]),o&&(r-=10),0!==s&&(r=parseFloat(r+"e"+s))}return{num:r,length:t-n}}(e,u);i.push(c.num),u+=c.length;break;case"4":for(var f="";;){var l=e[u];if("\0"===l)break;f+=l,u++}f=f.replace(/\u0001\u0001/g,"\0").replace(/\u0001\u0002/g,"").replace(/\u0002\u0002/g,""),i.push(f);break;case"5":c={element:[],index:i.length};i.push(c.element),s.push(c);break;case"6":var d={element:{},index:i.length};i.push(d.element),s.push(d);break;default:throw new Error("bad collationIndex or unexpectedly reached end of input: "+a)}else{if(1===i.length)return i.pop();r=s,o=n=void 0,o=(t=i).pop(),r.length&&(o===(n=r[r.length-1]).element&&(r.pop(),n=r[r.length-1]),r=n.element,n=n.index,Array.isArray(r)?r.push(o):n===t.length-2?r[t.pop()]=o:t.push(o))}}}(e.doc._id);return{key:r[0],id:r[1],value:"value"in e.doc?e.doc.value:null}})})}function e(t){var e,n=s?function(e,t,r){0===r.group_level&&delete r.group_level;var n=r.group||r.group_level,o=Sr(e.reduceFun),i=[],s=isNaN(r.group_level)?Number.POSITIVE_INFINITY:r.group_level;t.forEach(function(e){var t=i[i.length-1],r=n?e.key:null;if(n&&Array.isArray(r)&&(r=r.slice(0,s)),t&&0===p(t.groupKey,r))return t.keys.push([e.key,e.id]),void t.values.push(e.value);i.push({keys:[[e.key,e.id]],values:[e.value],groupKey:r})}),t=[];for(var u,a,c=0,f=i.length;c<f;c++){var l=i[c],d=function(e,t,r,n,o){try{return{output:t(r,n,o)}}catch(t){return vr(e,t),{error:t}}}(e.sourceDB,o,l.keys,l.values,!1);if(d.error&&d.error instanceof or)throw d.error;t.push({value:d.error?null:d.output,key:l.groupKey})}return{rows:(u=t,a=r.limit,r=(r=r.skip)||0,"number"==typeof a?u.slice(r,a+r):0<r?u.slice(r):u)}}(o,t,i):{total_rows:r,offset:u,rows:t};return i.update_seq&&(n.update_seq=o.seq),i.include_docs?(e=ur(t.map(Mr)),o.sourceDB.allDocs({keys:e,include_docs:!0,conflicts:i.conflicts,attachments:i.attachments,binary:i.binary}).then(function(e){var r=new er;return e.rows.forEach(function(e){r.set(e.id,e.doc)}),t.forEach(function(e){var t=Mr(e),t=r.get(t);t&&(e.doc=t)}),n})):n}if(void 0===i.keys||i.keys.length||(i.limit=0,delete i.keys),void 0!==i.keys)return c=i.keys.map(function(e){e={startkey:d([e]),endkey:d([e,{}])};return i.update_seq&&(e.update_seq=!0),t(e)}),Promise.all(c).then(k.xH).then(e);var n,a,c={descending:i.descending};return i.update_seq&&(c.update_seq=!0),"start_key"in i&&(n=i.start_key),"startkey"in i&&(n=i.startkey),"end_key"in i&&(a=i.end_key),"endkey"in i&&(a=i.endkey),void 0!==n&&(c.startkey=i.descending?d([n,{}]):d([n])),void 0!==a&&(n=!1!==i.inclusive_end,i.descending&&(n=!n),c.endkey=d(n?[a,{}]:[a])),void 0!==i.key&&(n=d([i.key]),a=d([i.key,{}]),c.descending?(c.endkey=n,c.startkey=a):(c.startkey=n,c.endkey=a)),s||("number"==typeof i.limit&&(c.limit=i.limit),c.skip=u),t(c).then(e)})()}function zr(e){return e._customFindAbstractMapper||Er}function Ur(e){return e.fields=e.fields.map(function(e){var t;return"string"==typeof e?((t={})[e]="asc",t):e}),e}function Nr(e){return e.allDocs({startkey:"_design/",endkey:"_design/￿",include_docs:!0}).then(function(e){var t={indexes:[{ddoc:null,name:"_all_docs",type:"special",def:{fields:[{_id:"asc"}]}}]};return t.indexes=br(t.indexes,e.rows.filter(function(e){return"query"===e.doc.language}).map(function(r){return(void 0!==r.doc.views?Object.keys(r.doc.views):[]).map(function(e){var t=r.doc.views[e];return{ddoc:r.id,name:e,type:"json",def:Ur(t.options.def)}})})),t.indexes.sort(function(e,t){return W(e.name,t.name)}),t.total_rows=t.indexes.length,t})}var Fr=null,Wr={"￿":{}};const Kr={queryOpts:{limit:0,startkey:Wr,endkey:Fr},inMemoryFields:[]};function Vr(e,t){var r=t.def.fields.map(x);return e.slice().sort(function(e,t){e=r.indexOf(e),t=r.indexOf(t);return W(e=-1===e?Number.MAX_VALUE:e,t=-1===t?Number.MAX_VALUE:t)})}function Jr(e,t,r,n){var o,i,e=br(e,function(e,t,r){for(var n=!1,o=0,i=(r=Vr(r,e)).length;o<i;o++){var s=r[o];if(n||!function(e,t){for(var r=e.def.fields.map(x),n=0,o=r.length;n<o;n++)if(t===r[n])return 1}(e,s))return r.slice(o);o<i-1&&"$eq"!==x(t[s])&&(n=!0)}return[]}(t,r,n),(o=r,i=[],Object.keys(o).forEach(function(t){var e=o[t];Object.keys(e).forEach(function(e){"$ne"===e&&i.push(t)})}),i));return Vr(function(e){for(var t={},r=0;r<e.length;r++)t["$"+e[r]]=!0;return Object.keys(t).map(function(e){return e.substring(1)})}(e),t)}var Qr=["$eq","$gt","$gte","$lt","$lte"];function Gr(e){return-1===Qr.indexOf(e)}function Yr(e,t,r,n){e=e.def.fields.map(x);return!!function(e,t,r){var n;if(t)return t=!(t.length>e.length)&&kr(t,e),n=kr(r,e),t&&n;var o=r,i=e;o=o.slice();for(var s=0,u=i.length;s<u;s++){var a=i[s];if(!o.length)break;a=o.indexOf(a);if(-1===a)return;o.splice(a,1)}return 1}(e,t,r)&&(void 0===(t=n[e[0]])||!(1===Object.keys(t).length&&"$ne"===x(t)))}function Hr(e,t,r,n,o){i=e,s=t,u=r;var i,s,u,e=n.filter(function(e){return Yr(e,u,s,i)});if(0===e.length){if(o)throw{error:"no_usable_index",message:"There is no index available for this selector."};r=n[0];return r.defaultUsed=!0,r}if(1===e.length&&!o)return e[0];var a=function(e){for(var t={},r=0,n=e.length;r<n;r++)t[e[r]]=!0;return t}(t);if(o){var c="_design/"+o[0],f=2===o.length&&o[1],n=e.find(function(e){return!(!f||e.ddoc!==c||f!==e.name)||e.ddoc===c});if(n)return n;throw{error:"unknown_error",message:"Could not find that index or could not use that index for the query"}}for(var l=e,d=null,p=-1,h=0,v=l.length;h<v;h++){var y=l[h],g=function(e){for(var t=e.def.fields.map(x),r=0,n=0,o=t.length;n<o;n++){var i=t[n];a[i]&&r++}return r}(y);p<g&&(p=g,d=y)}return d}function Xr(e,t){{if(t.defaultUsed)return{queryOpts:{startkey:null},inMemoryFields:[Object.keys(e)]};if(1===t.def.fields.length)return b=e,k=x(t.def.fields[0]),j=b[k]||{},O=[],Object.keys(j).forEach(function(t){Gr(t)&&O.push(k);var e=function(e){switch(t){case"$eq":return{key:e};case"$lte":return{endkey:e};case"$gte":return{startkey:e};case"$lt":return{endkey:e,inclusive_end:!1};case"$gt":return{startkey:e,inclusive_start:!1}}return{startkey:Fr}}(j[t]);w=w?wr([w,e]):e}),{queryOpts:w,inMemoryFields:O};var r=e,n,o,i=t.def.fields.map(x),s=[],u=[],a=[];function c(e){!1!==n&&u.push(Fr),!1!==o&&a.push(Wr),s=i.slice(e)}for(var f=0,l=i.length;f<l;f++){var d=r[i[f]];if(!d||!Object.keys(d).length){c(f);break}if(Object.keys(d).some(Gr)){c(f);break}if(0<f){var p="$gt"in d||"$gte"in d||"$lt"in d||"$lte"in d,h=Object.keys(r[i[f-1]]),v=jr(h,["$eq"]),h=jr(h,Object.keys(d));if(p&&!v&&!h){c(f);break}}for(var y=Object.keys(d),g=null,m=0;m<y.length;m++)var _=y[m],_=function(e,t){switch(e){case"$eq":return{startkey:t,endkey:t};case"$lte":return{endkey:t};case"$gte":return{startkey:t};case"$lt":return{endkey:t,inclusive_end:!1};case"$gt":return{startkey:t,inclusive_start:!1}}}(_,d[_]),g=g?wr([g,_]):_;u.push("startkey"in g?g.startkey:Fr),a.push("endkey"in g?g.endkey:Wr),"inclusive_start"in g&&(n=g.inclusive_start),"inclusive_end"in g&&(o=g.inclusive_end)}return b={startkey:u,endkey:a},void 0!==n&&(b.inclusive_start=n),void 0!==o&&(b.inclusive_end=o),{queryOpts:b,inMemoryFields:s}}var b,w,k,j,O}function Zr(s,h,u){var e,t;if(h.selector&&(h.selector=Y(h.selector)),h.sort&&(h.sort=function(e){if(Array.isArray(e))return e.map(function(e){var t;return"string"==typeof e?((t={})[e]="asc",t):e});throw new Error("invalid sort json - should be an array")}(h.sort)),h.use_index&&(h.use_index=(t=[],"string"==typeof(e=h.use_index)?t.push(e):t=e,t.map(function(e){return e.replace("_design/","")}))),"object"!=typeof h.selector)throw new Error("you must provide a selector when you find()");return Nr(s).then(function(e){s.constructor.emit("debug",["find","planning query",h]);var t=function(e,t){var r,n=e.selector,o=e.sort;if(r=n,Object.keys(r).map(function(e){return r[e]}).some(function(e){return"object"==typeof e&&0===Object.keys(e).length}))return(0,k.f0)({},Kr,{index:t[0]});o=o,s=Object.keys(n),i=o?o.map(x):[],s=s.length>=i.length?s:i;var i,s=0===i.length?{fields:s}:{fields:s=s.sort(function(e,t){e=i.indexOf(e),-1===e&&(e=Number.MAX_VALUE),t=i.indexOf(t);return e<(t=-1===t?Number.MAX_VALUE:t)?-1:t<e?1:0}),sortOrder:o.map(x)},s=Hr(n,o=s.fields,s.sortOrder,t,e.use_index);return{queryOpts:(t=Xr(n,s)).queryOpts,index:s,inMemoryFields:Jr(t.inMemoryFields,s,n,o)}}(h,e.indexes),n=(s.constructor.emit("debug",["find","query plan",t]),t.index),r=h,o=n;if(o.defaultUsed&&r.sort){r=r.sort.filter(function(e){return"_id"!==Object.keys(e)[0]}).map(function(e){return Object.keys(e)[0]});if(0<r.length)throw new Error('Cannot sort on field(s) "'+r.join(",")+'" when using the default index')}o.defaultUsed;var i=(0,k.f0)({include_docs:!0,reduce:!1,indexes_count:e.total_rows},t.queryOpts);return"startkey"in i&&"endkey"in i&&0<p(i.startkey,i.endkey)?{docs:[]}:(h.sort&&"string"!=typeof h.sort[0]&&"desc"===Q(h.sort[0])&&(i.descending=!0,r=i,delete(o=(0,k.d9)(r)).startkey,delete o.endkey,delete o.inclusive_start,delete o.inclusive_end,"endkey"in r&&(o.startkey=r.endkey),"startkey"in r&&(o.endkey=r.startkey),"inclusive_start"in r&&(o.inclusive_end=r.inclusive_start),"inclusive_end"in r&&(o.inclusive_start=r.inclusive_end),i=o),t.inMemoryFields.length||("limit"in h&&(i.limit=h.limit),"skip"in h&&(i.skip=h.skip)),u?Promise.resolve(t,i):Promise.resolve().then(function(){if("_all_docs"===n.name)return r=s,e=i,(t=(0,k.d9)(e)).descending?("endkey"in t&&"string"!=typeof t.endkey&&(t.endkey=""),"startkey"in t&&"string"!=typeof t.startkey&&(t.limit=0)):("startkey"in t&&"string"!=typeof t.startkey&&(t.startkey=""),"endkey"in t&&"string"!=typeof t.endkey&&(t.limit=0)),"key"in t&&"string"!=typeof t.key&&(t.limit=0),0<t.limit&&t.indexes_count&&(t.original_limit=t.limit,t.limit+=t.indexes_count),r.allDocs(t).then(function(e){return e.rows=e.rows.filter(function(e){return!/^_design\//.test(e.id)}),t.original_limit&&(t.limit=t.original_limit),e.rows=e.rows.slice(0,t.limit),e});var t,e,r=(e=n).ddoc.substring(8)+"/"+e.name;return zr(s).query.call(s,r,i)}).then(function(e){!1===i.inclusive_start&&(e.rows=function(e,t,r){for(var n=r.def.fields,o=0,i=e.length;o<i;o++){var s=function(e,t){for(var r=[],n=0;n<t.def.fields.length;n++){var o=x(t.def.fields[n]);r.push(e[o])}return r}(e[o].doc,r);if(1===n.length)s=s[0];else for(;s.length>t.length;)s.pop();if(0<Math.abs(p(s,t)))break}return 0<o?e.slice(o):e}(e.rows,i.startkey,n)),t.inMemoryFields.length&&(e.rows=H(e.rows,h,t.inMemoryFields));e={docs:e.rows.map(function(e){e=e.doc;if(h.fields){for(var t=e,r=h.fields,n={},o=0,i=r.length;o<i;o++){var s=K(r[o]),u=F(t,s);if(void 0!==u){a=void 0;c=void 0;f=void 0;l=void 0;d=void 0;p=void 0;var a=n;var c=s;var f=u;for(var l=0,d=c.length;l<d-1;l++){var p=c[l];a=a[p]=a[p]||{}}a[c[d-1]]=f}}return n}return e})};return n.defaultUsed&&(e.warning="No matching index found, create an index to optimize query time."),e}))})}var en=_r(function(e,t){t=yr(t);var r,n=(0,k.d9)(t.index);function o(){return r=r||(0,Dt.$)(JSON.stringify(t))}t.index=Ur(t.index);var i=t.index,s=i.fields.filter(function(e){return"asc"===Q(e)});if(0!==s.length&&s.length!==i.fields.length)throw new Error("unsupported mixed sorting");var u=t.name||"idx-"+o(),a=t.ddoc||"idx-"+o(),c="_design/"+a,f=!1,l=!1;return e.constructor.emit("debug",["find","creating index",c]),(0,k.H)(e,c,function(e){return e._rev&&"query"!==e.language&&(f=!0),e.language="query",e.views=e.views||{},!(l=!!e.views[u])&&(e.views[u]={map:{fields:wr(t.index.fields)},reduce:"_count",options:{def:n}},e)}).then(function(){if(f)throw new Error('invalid language for ddoc with id "'+c+'" (should be "query")')}).then(function(){return zr(e).query.call(e,a+"/"+u,{limit:0,reduce:!1}).then(function(){return{id:c,name:u,result:l?"exists":"created"}})})}),tn=_r(Zr),rn=_r(function(t,r){return Zr(t,r,!0).then(function(e){return{dbname:t.name,index:e.index,selector:r.selector,range:{start_key:e.queryOpts.startkey,end_key:e.queryOpts.endkey},opts:{use_index:r.use_index||[],bookmark:"nil",limit:r.limit,skip:r.skip,sort:r.sort||{},fields:r.fields,conflicts:!1,r:[49]},limit:r.limit,skip:r.skip||0,fields:r.fields}})}),nn=_r(Nr),on=_r(function(e,t){if(!t.ddoc)throw new Error("you must supply an index.ddoc when deleting");if(!t.name)throw new Error("you must supply an index.name when deleting");var r=t.ddoc,n=t.name;return(0,k.H)(e,r,function(e){return 1===Object.keys(e.views).length&&e.views[n]?{_id:r,_deleted:!0}:(delete e.views[n],e)}).then(function(){return zr(e).viewCleanup.apply(e)}).then(function(){return{ok:!0}})}),e={};e.createIndex=(0,k.Vi)(function(e,t){if("object"!=typeof e)return t(new Error("you must provide an index to create"));((0,k.Q1)(this)?function(e,t,r){t=yr(t),gr(e,"_index",{method:"POST",body:JSON.stringify(t)},r)}:en)(this,e,t)}),e.find=(0,k.Vi)(function(e,t){if(void 0===t&&(t=e,e=void 0),"object"!=typeof e)return t(new Error("you must provide search parameters to find()"));((0,k.Q1)(this)?function(e,t,r){gr(e,"_find",{method:"POST",body:JSON.stringify(t)},r)}:tn)(this,e,t)}),e.explain=(0,k.Vi)(function(e,t){if(void 0===t&&(t=e,e=void 0),"object"!=typeof e)return t(new Error("you must provide search parameters to explain()"));((0,k.Q1)(this)?function(e,t,r){gr(e,"_explain",{method:"POST",body:JSON.stringify(t)},r)}:rn)(this,e,t)}),e.getIndexes=(0,k.Vi)(function(e){((0,k.Q1)(this)?function(e,t){gr(e,"_index",{method:"GET"},t)}:nn)(this,e)}),e.deleteIndex=(0,k.Vi)(function(e,t){if("object"!=typeof e)return t(new Error("you must provide an index to delete"));((0,k.Q1)(this)?function(e,t,r){var n=t.ddoc,o=t.type||"json",t=t.name;n?t?gr(e,"_index/"+[n,o,t].map(encodeURIComponent).join("/"),{method:"DELETE"},r):r(new Error("you must provide an index's name")):r(new Error("you must provide an index's ddoc"))}:on)(this,e,t)});const sn=e;(e=an.prototype).createPouch=function(e,t){try{var r={location:e,adapter:"string"==typeof(i=this.adapter)?{adapter:i,db:void 0}:{db:i},settings:t},n=Object.assign({},r.adapter,this.pouchSettings,r.settings),o=new Le(r.location,n);return Promise.resolve(o)}catch(e){return Promise.reject(e)}var i};var un=an;function an(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},t=(this.name="pouchdb",this.statics=qt,this.adapter=e,this.pouchSettings=t,e);if("string"==typeof t){if(!Le.adapters||!Le.adapters[t])throw g("DB9",{adapter:t})}else{e=t;if(!e||"function"!=typeof e.super_)throw g("UT4",{adapter:e});if(!Le.adapters||!Le.adapters.leveldb)throw g("DB10",{adapter:t})}}e.createStorageInstance=function(t){try{var r=this,e=(n=t.databaseName,o=t.collectionName,n=n+"-rxdb-"+t.schema.version+"-",o.includes("/")?(s=(i=o.split("/")).pop(),i.join("/")+"/"+n+s):n+o);return Promise.resolve(r.createPouch(e,t.options)).then(function(e){return Promise.resolve(function(o,t){try{if(!t.indexes)return Promise.resolve();var i=$t(t.primaryKey);return Promise.resolve(o.getIndexes()).then(function(e){var n=new Set(e.indexes.map(function(e){return e.name}));return Promise.resolve(Promise.all(t.indexes.map(function(e){try{var t=Se(e)?e:[e],r=Rt(t=t.map(function(e){return e===i?"_id":e}));return n.has(r)?Promise.resolve():Promise.resolve(o.createIndex({name:r,ddoc:r,index:{fields:t}}))}catch(e){return Promise.reject(e)}}))).then(function(){})})}catch(o){return Promise.reject(o)}}(e,t.schema)).then(function(){return new Yt(r,t.databaseName,t.collectionName,t.schema,{pouch:e},t.options)})})}catch(t){return Promise.reject(t)}var n,o,i,s};e=dn(1934);const cn=e.expose;e.registerSerializer,e.Transfer,Ce(dn(7857)),e={adapter:"idb"},Ce(sn),Kt();var fn={storage:new un(e,void 0)},ln=0,I=new Map;cn({createStorageInstance:function(e){try{var t=ln++;return Promise.resolve(fn.storage.createStorageInstance(e)).then(function(e){return I.set(t,e),t})}catch(e){return Promise.reject(e)}},bulkWrite:function(e,t){return y(I,e).bulkWrite(t)},findDocumentsById:function(e,t,r){return y(I,e).findDocumentsById(t,r)},query:function(e,t){return y(I,e).query(t)},getAttachmentData:function(e,t,r){return y(I,e).getAttachmentData(t,r)},getChangedDocumentsSince:function(e,t,r){return y(I,e).getChangedDocumentsSince(t,r)},changeStream:function(e){return y(I,e).changeStream()},cleanup:function(e,t){return y(I,e).cleanup(t)},close:function(e){return y(I,e).close()},remove:function(e){return y(I,e).remove()}})})()})();