(()=>{var r={7105:e=>{"use strict";e.exports=function(n){return function(){var e=arguments.length;if(e){for(var t=[],r=-1;++r<e;)t[r]=arguments[r];return n.call(this,t)}return n.call(this,[])}}},6313:e=>{var t=function(){"use strict";function b(e,t){return null!=t&&e instanceof t}var _,w,O;try{_=Map}catch(b){_=function(){}}try{w=Set}catch(b){w=function(){}}try{O=Promise}catch(b){O=function(){}}function x(e,d,t,p,y){"object"==typeof d&&(t=d.depth,p=d.prototype,y=d.includeNonEnumerable,d=d.circular);var v=[],m=[],g="undefined"!=typeof Buffer;return void 0===d&&(d=!0),function n(e,i){if(null===e)return null;if(0===i)return e;var r,t,o;if("object"!=typeof e)return e;if(b(e,_))r=new _;else if(b(e,w))r=new w;else if(b(e,O))r=new O(function(t,r){e.then(function(e){t(n(e,i-1))},function(e){r(n(e,i-1))})});else if(x.__isArray(e))r=[];else if(x.__isRegExp(e))r=new RegExp(e.source,j(e)),e.lastIndex&&(r.lastIndex=e.lastIndex);else if(x.__isDate(e))r=new Date(e.getTime());else{if(g&&Buffer.isBuffer(e))return r=Buffer.allocUnsafe?Buffer.allocUnsafe(e.length):new Buffer(e.length),e.copy(r),r;b(e,Error)?r=Object.create(e):void 0===p?(t=Object.getPrototypeOf(e),r=Object.create(t)):(r=Object.create(p),t=p)}if(d){var s=v.indexOf(e);if(-1!=s)return m[s];v.push(e),m.push(r)}for(u in b(e,_)&&e.forEach(function(e,t){t=n(t,i-1),e=n(e,i-1);r.set(t,e)}),b(e,w)&&e.forEach(function(e){e=n(e,i-1);r.add(e)}),e)(o=t?Object.getOwnPropertyDescriptor(t,u):o)&&null==o.set||(r[u]=n(e[u],i-1));if(Object.getOwnPropertySymbols)for(var a=Object.getOwnPropertySymbols(e),u=0;u<a.length;u++){var c=a[u];(f=Object.getOwnPropertyDescriptor(e,c))&&!f.enumerable&&!y||(r[c]=n(e[c],i-1),f.enumerable||Object.defineProperty(r,c,{enumerable:!1}))}if(y){var l=Object.getOwnPropertyNames(e);for(u=0;u<l.length;u++){var f,h=l[u];(f=Object.getOwnPropertyDescriptor(e,h))&&f.enumerable||(r[h]=n(e[h],i-1),Object.defineProperty(r,h,{enumerable:!1}))}}return r}(e,t=void 0===t?1/0:t)}function t(e){return Object.prototype.toString.call(e)}function j(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),t}return x.clonePrototype=function(e){if(null===e)return null;function t(){}return t.prototype=e,new t},x.__objToStr=t,x.__isDate=function(e){return"object"==typeof e&&"[object Date]"===t(e)},x.__isArray=function(e){return"object"==typeof e&&"[object Array]"===t(e)},x.__isRegExp=function(e){return"object"==typeof e&&"[object RegExp]"===t(e)},x.__getRegExpFlags=j,x}();e.exports&&(e.exports=t)},7187:e=>{"use strict";var t="object"==typeof Reflect?Reflect:null,u=t&&"function"==typeof t.apply?t.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)},r=t&&"function"==typeof t.ownKeys?t.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)},n=Number.isNaN||function(e){return e!=e};function i(){i.init.call(this)}e.exports=i,e.exports.once=function(i,o){return new Promise(function(e,t){function r(e){i.removeListener(o,n),t(e)}function n(){"function"==typeof i.removeListener&&i.removeListener("error",r),e([].slice.call(arguments))}p(i,o,n,{once:!0}),"error"!==o&&"function"==typeof i.on&&p(i,"error",r,{once:!0})})},(i.EventEmitter=i).prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var o=10;function c(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function s(e){return void 0===e._maxListeners?i.defaultMaxListeners:e._maxListeners}function a(e,t,r,n){var i,o;return c(r),void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,r.listener||r),i=e._events),o=i[t]),void 0===o?(o=i[t]=r,++e._eventsCount):("function"==typeof o?o=i[t]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),0<(i=s(e))&&o.length>i&&!o.warned&&(o.warned=!0,(n=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit")).name="MaxListenersExceededWarning",n.emitter=e,n.type=t,n.count=o.length,console&&console.warn&&console.warn(n))),e}function l(e,t,r){e={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},t=function(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}.bind(e);return t.listener=r,e.wrapFn=t}function f(e,t,r){e=e._events;if(void 0===e)return[];e=e[t];{if(void 0===e)return[];if("function"==typeof e)return r?[e.listener||e]:[e];if(r){for(var n=e,i=new Array(n.length),o=0;o<i.length;++o)i[o]=n[o].listener||n[o];return i}return d(e,e.length)}}function h(e){var t=this._events;if(void 0!==t){t=t[e];if("function"==typeof t)return 1;if(void 0!==t)return t.length}return 0}function d(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function p(r,n,i,o){if("function"==typeof r.on)o.once?r.once(n,i):r.on(n,i);else{if("function"!=typeof r.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof r);r.addEventListener(n,function e(t){o.once&&r.removeEventListener(n,e),i(t)})}}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(e){if("number"!=typeof e||e<0||n(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");o=e}}),i.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||n(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},i.prototype.getMaxListeners=function(){return s(this)},i.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n="error"===e,i=this._events;if(void 0!==i)n=n&&void 0===i.error;else if(!n)return!1;if(n){if((o=0<t.length?t[0]:o)instanceof Error)throw o;n=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw n.context=o,n}var o=i[e];if(void 0===o)return!1;if("function"==typeof o)u(o,this,t);else for(var s=o.length,a=d(o,s),r=0;r<s;++r)u(a[r],this,t);return!0},i.prototype.on=i.prototype.addListener=function(e,t){return a(this,e,t,!1)},i.prototype.prependListener=function(e,t){return a(this,e,t,!0)},i.prototype.once=function(e,t){return c(t),this.on(e,l(this,e,t)),this},i.prototype.prependOnceListener=function(e,t){return c(t),this.prependListener(e,l(this,e,t)),this},i.prototype.off=i.prototype.removeListener=function(e,t){var r,n,i,o,s;if(c(t),void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(i=-1,o=r.length-1;0<=o;o--)if(r[o]===t||r[o].listener===t){s=r[o].listener,i=o;break}if(i<0)return this;if(0===i)r.shift();else{var a=r;var u=i;for(;u+1<a.length;u++)a[u]=a[u+1];a.pop()}1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,s||t)}return this},i.prototype.removeAllListeners=function(e){var t,r;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){for(var n,i=Object.keys(r),o=0;o<i.length;++o)"removeListener"!==(n=i[o])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(o=t.length-1;0<=o;o--)this.removeListener(e,t[o]);return this},i.prototype.listeners=function(e){return f(this,e,!0)},i.prototype.rawListeners=function(e){return f(this,e,!1)},i.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):h.call(e,t)},i.prototype.listenerCount=h,i.prototype.eventNames=function(){return 0<this._eventsCount?r(this._events):[]}},1180:(e,t,r)=>{"use strict";var n,i,o,s=[r(5525),r(4785),r(8291),r(2709),r(2506),r(9176)],a=-1,u=[],c=!1;function l(){n&&i&&(n=!1,i.length?u=i.concat(u):a=-1,u.length&&f())}function f(){if(!n){n=!(c=!1);for(var e=u.length,t=setTimeout(l);e;){for(i=u,u=[];i&&++a<e;)i[a].run();a=-1,e=u.length}i=null,n=!(a=-1),clearTimeout(t)}}for(var h=-1,d=s.length;++h<d;)if(s[h]&&s[h].test&&s[h].test()){o=s[h].install(f);break}function p(e,t){this.fun=e,this.array=t}p.prototype.run=function(){var e=this.fun,t=this.array;switch(t.length){case 0:return e();case 1:return e(t[0]);case 2:return e(t[0],t[1]);case 3:return e(t[0],t[1],t[2]);default:return e.apply(null,t)}},e.exports=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];u.push(new p(e,t)),c||n||(c=!0,o())}},2709:(e,t,r)=>{"use strict";t.test=function(){return!r.g.setImmediate&&void 0!==r.g.MessageChannel},t.install=function(e){var t=new r.g.MessageChannel;return t.port1.onmessage=e,function(){t.port2.postMessage(0)}}},8291:(e,t,n)=>{"use strict";var i=n.g.MutationObserver||n.g.WebKitMutationObserver;t.test=function(){return i},t.install=function(e){var t=0,e=new i(e),r=n.g.document.createTextNode("");return e.observe(r,{characterData:!0}),function(){r.data=t=++t%2}}},4785:(e,t,r)=>{"use strict";t.test=function(){return"function"==typeof r.g.queueMicrotask},t.install=function(e){return function(){r.g.queueMicrotask(e)}}},2506:(e,t,r)=>{"use strict";t.test=function(){return"document"in r.g&&"onreadystatechange"in r.g.document.createElement("script")},t.install=function(t){return function(){var e=r.g.document.createElement("script");return e.onreadystatechange=function(){t(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},r.g.document.documentElement.appendChild(e),t}}},9176:(e,t)=>{"use strict";t.test=function(){return!0},t.install=function(e){return function(){setTimeout(e,0)}}},5717:e=>{"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){var r;t&&(e.super_=t,(r=function(){}).prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e)}},9134:e=>{e.exports=function(){return"undefined"!=typeof window&&"object"==typeof window.process&&"renderer"===window.process.type||!("undefined"==typeof process||"object"!=typeof process.versions||!process.versions.electron)||"object"==typeof navigator&&"string"==typeof navigator.userAgent&&0<=navigator.userAgent.indexOf("Electron")}},6898:e=>{"use strict";e.exports=e=>!!e&&("symbol"==typeof Symbol.observable&&"function"==typeof e[Symbol.observable]?e===e[Symbol.observable]():"function"==typeof e["@@observable"]&&e===e["@@observable"]())},8221:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Aggregator=void 0;var c=r(7424),l=r(1088),f=r(6588);function n(e,t){this.pipeline=e,this.options=t,this.options=(0,c.makeOptions)(t)}n.prototype.stream=function(e){var t=(0,l.Lazy)(e),e=this.options.processingMode,r=(e!=c.ProcessingMode.CLONE_ALL&&e!=c.ProcessingMode.CLONE_INPUT||t.map(f.cloneDeep),[]);if(!(0,f.isEmpty)(this.pipeline))for(var n=0,i=this.pipeline;n<i.length;n++){var o=i[n],s=Object.keys(o),a=s[0],u=(0,c.getOperator)(c.OperatorType.PIPELINE,a);(0,f.assert)(1===s.length&&!!u,"invalid aggregation operator "+a),r.push(a),t=u(t,o[a],this.options)}return(e==c.ProcessingMode.CLONE_OUTPUT||e==c.ProcessingMode.CLONE_ALL&&(0,f.intersection)(["$group","$unwind"],r).length)&&t.map(f.cloneDeep),t},n.prototype.run=function(e){return this.stream(e).value()},t.Aggregator=n},7424:function(e,t,r){"use strict";var m=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||((n=n||Array.prototype.slice.call(t,0,i))[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.redact=t.computeValue=t.addOperators=t.getOperator=t.useOperators=t.OperatorType=t.makeOptions=t.ProcessingMode=void 0;var n,g,b=r(6588);function c(e){return Object.assign({idKey:"_id",processingMode:n.CLONE_OFF},e||{})}(r=n=t.ProcessingMode||(t.ProcessingMode={})).CLONE_ALL="CLONE_ALL",r.CLONE_INPUT="CLONE_INPUT",r.CLONE_OUTPUT="CLONE_OUTPUT",r.CLONE_OFF="CLONE_OFF",t.makeOptions=c,(r=g=t.OperatorType||(t.OperatorType={})).ACCUMULATOR="accumulator",r.EXPRESSION="expression",r.PIPELINE="pipeline",r.PROJECTION="projection",r.QUERY="query";(r={})[g.ACCUMULATOR]={},r[g.EXPRESSION]={},r[g.PIPELINE]={},r[g.PROJECTION]={},r[g.QUERY]={};var l=r;function _(e){for(var t=0,r=Object.entries(e);t<r.length;t++){var n=r[t],i=n[0],n=n[1];(0,b.assert)(n instanceof Function&&(0,b.isOperator)(i),"invalid operator specified")}}function w(e,t){_(t),(0,b.into)(l[e],t)}function O(e,t){return(0,b.has)(l[e],t)?l[e][t]:null}t.useOperators=w,t.getOperator=O,t.addOperators=function(e,t){var r=t({computeValue:x,resolve:b.resolve});_(r);for(var n=0,i=Object.entries(r);n<i.length;n++){var o=i[n],s=o[0],o=(o[1],O(e,s));(0,b.assert)(!o,s+" already exists for '"+e+"' operators")}var a={};switch(e){case g.QUERY:for(var u=0,c=Object.entries(r);u<c.length;u++){var l=c[u];!function(e,t){var i=t;a[e]=function(t,r,n){return function(e){e=(0,b.resolve)(e,t,{unwrapArray:!0});return i(t,e,r,n)}}}(s=l[0],l[1])}break;case g.PROJECTION:for(var f=0,h=Object.entries(r);f<h.length;f++){var d=h[f];!function(e,t){var i=t;a[e]=function(e,t,r,n){e=(0,b.resolve)(e,r);return i(r,e,t,n)}}(s=d[0],d[1])}break;default:for(var p=0,y=Object.entries(r);p<y.length;p++){var v=y[p];!function(e,r){a[e]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.call.apply(r,m([null],e,!1))}}(s=v[0],v[1])}}w(e,a)};var f={$$ROOT:function(e,t,r){return r.root},$$CURRENT:function(e,t,r){return e},$$REMOVE:function(e,t,r){}},h={$$KEEP:function(e,t,r){return e},$$PRUNE:function(e,t,r){},$$DESCEND:function(e,t,r){if(!(0,b.has)(t,"$cond"))return e;for(var n,i=0,o=Object.entries(e);i<o.length;i++){var s=o[i],a=s[0],s=s[1];if((0,b.isObjectLike)(s)){if(s instanceof Array){for(var u=[],c=0,l=s;c<l.length;c++){var f=l[c];(0,b.isObject)(f)&&(f=d(f,t,r)),(0,b.isNil)(f)||u.push(f)}n=u}else n=d(s,t,r);(0,b.isNil)(n)?delete e[a]:e[a]=n}}return e}};function x(r,n,e,i){if(i=i||c(),(0,b.isOperator)(e)){var t=O(g.EXPRESSION,e);if(t)return t(r,n,i);if(t=O(g.ACCUMULATOR,e))return r instanceof Array||(r=x(r,n,null,i),n=null),(0,b.assert)(r instanceof Array,"'"+e+"' target must be an array."),t(r,n,i);throw new Error("operator '"+e+"' is not registered")}if((0,b.isString)(n)&&0<n.length&&"$"===n[0]){if((0,b.has)(h,n))return n;t=n.split(".");if((0,b.has)(f,t[0])){if(r=f[t[0]](r,null,(0,b.into)({root:r},i)),1==t.length)return r;n=n.substr(t[0].length)}return(0,b.resolve)(r,n.slice(1))}if(n instanceof Array)return n.map(function(e){return x(r,e,null,i)});if((0,b.isObject)(n)){for(var o={},s=0,a=Object.entries(n);s<a.length;s++){var u=a[s],u=function(t,e){if(o[t]=x(r,e,t,i),[g.EXPRESSION,g.ACCUMULATOR].some(function(e){return(0,b.has)(l[e],t)}))return(0,b.assert)(1===Object.keys(n).length,"Invalid aggregation expression '"+JSON.stringify(n)+"'"),{value:o[t]}}(u[0],u[1]);if("object"==typeof u)return u.value}return o}return n}function d(e,t,r){var n=x(e,t,null,r);return(0,b.has)(h,n)?h[n](e,t,(0,b.into)({root:e},r)):n}t.computeValue=x,t.redact=d},9537:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Cursor=void 0;var n=r(8221),i=r(1088),o=r(6588);function s(e,t,r,n){this.source=e,this.predicate=t,this.projection=r,this.options=n,this.operators=[],this.result=null,this.stack=[]}s.prototype.fetch=function(){return this.result||((0,o.isObject)(this.projection)&&this.operators.push({$project:this.projection}),this.result=(0,i.Lazy)(this.source).filter(this.predicate),0<this.operators.length&&(this.result=new n.Aggregator(this.operators,this.options).stream(this.result))),this.result},s.prototype.all=function(){return this.fetch().value()},s.prototype.count=function(){return this.all().length},s.prototype.skip=function(e){return this.operators.push({$skip:e}),this},s.prototype.limit=function(e){return this.operators.push({$limit:e}),this},s.prototype.sort=function(e){return this.operators.push({$sort:e}),this},s.prototype.collation=function(e){return(0,o.into)(this.options,{collation:e}),this},s.prototype.next=function(){var e;if(this.stack)return 0<this.stack.length?this.stack.pop():(e=this.fetch().next()).done?void(this.stack=null):e.value},s.prototype.hasNext=function(){if(!this.stack)return!1;if(0<this.stack.length)return!0;var e=this.fetch().next();return e.done?this.stack=null:this.stack.push(e.value),!!this.stack},s.prototype.map=function(e){return this.fetch().map(e).value()},s.prototype.forEach=function(e){this.fetch().each(e)},s.prototype[Symbol.iterator]=function(){return this.fetch()},t.Cursor=s},4406:(e,t,r)=>{"use strict";t.AE=void 0,r(7532);var n=r(8221),i=r(7732),o=(r(8221),r(7732));Object.defineProperty(t,"AE",{enumerable:!0,get:function(){return o.Query}}),t.ZP={Aggregator:n.Aggregator,Query:i.Query,aggregate:function(e,t,r){return new n.Aggregator(t,r).run(e)},find:function(e,t,r,n){return new i.Query(t,n).find(e,r)},remove:function(e,t,r){return new i.Query(t,r).remove(e)}}},7532:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},t=(Object.defineProperty(t,"__esModule",{value:!0}),r(7424)),s=o(r(5039)),a=o(r(4543)),u=r(1091),c=o(r(7086)),o=o(r(581)),r=r(6588);(0,t.useOperators)(t.OperatorType.EXPRESSION,(0,r.into)({},s,a)),(0,t.useOperators)(t.OperatorType.PIPELINE,{$project:u.$project,$skip:u.$skip,$limit:u.$limit,$sort:u.$sort}),(0,t.useOperators)(t.OperatorType.PROJECTION,c),(0,t.useOperators)(t.OperatorType.QUERY,o)},1088:(e,t)=>{"use strict";function n(e){return e instanceof i?e:new i(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.Iterator=t.Lazy=void 0,t.Lazy=n;var y,r,v=new Error,i=((r=y=y||{})[r.MAP=0]="MAP",r[r.FILTER=1]="FILTER",r[r.TAKE=2]="TAKE",r[r.DROP=3]="DROP",o.prototype.validate=function(){if(this.isSingle)throw new Error("Cannot add iteratee/transform after `first()`")},o.prototype.push=function(e,t){if(this.validate(),"function"==typeof t)this.iteratees.push({action:e,func:t});else{if("number"!=typeof t)throw Error("invalid value");this.iteratees.push({action:e,count:t})}return this},o.prototype.next=function(){return this.getNext()},o.prototype.map=function(e){return this.push(y.MAP,e)},o.prototype.filter=function(e){return this.push(y.FILTER,e)},o.prototype.take=function(e){return 0<e?this.push(y.TAKE,e):this},o.prototype.drop=function(e){return 0<e?this.push(y.DROP,e):this},o.prototype.transform=function(e){this.validate();var t,r=this;return n(function(){return(t=t||n(e(r.value()))).next()})},o.prototype.first=function(){return this.take(1),this.isSingle=!0,this},o.prototype.value=function(){return this.isDone||(this.isDone=this.getNext(!0).done),this.isSingle?this.yieldedValues[0]:this.yieldedValues},o.prototype.each=function(e){for(;;){var t=this.next();if(t.done)break;if(!1===e(t.value))return!1}return!0},o.prototype.reduce=function(e,t){var r=this.next(),n=0;for(void 0!==t||r.done||(t=r.value,r=this.next(),n++);!r.done;)t=e(t,r.value,n++),r=this.next();return t},o.prototype.size=function(){return this.reduce(function(e,t){return++e},0)},o.prototype[Symbol.iterator]=function(){return this},o);function o(e){var t,c,l,f,h,d,p;if(this.iteratees=new Array,this.yieldedValues=[],this.iteratees=[],this.isSingle=!1,this.isDone=!1,this.yieldedValues=[],(e=e instanceof Function?{next:e}:e)&&"object"==typeof e&&(null==(t=e)?void 0:t.next)instanceof Function)var r=e,n=function(){var e=r.next();if(e.done)throw v;return e.value};else if(e instanceof Array){var i=e,o=i.length,s=0;n=function(){if(s<o)return i[s++];throw v}}else if(!(e instanceof Function))throw new Error("Source is of type '"+typeof e+"'. Must be Array, Function, or Generator");this.getNext=(c=n,l=this.iteratees,f=this.yieldedValues,h=!1,d=-1,p=0,function(e){try{e:for(;!h;){var t=c();d++;for(var r=-1,n=l.length,i=!1;++r<n;){var o=l[r];switch(o.action){case y.MAP:t=o.func(t,d);break;case y.FILTER:if(o.func(t,d))break;continue e;case y.TAKE:--o.count,o.count||(i=!0);break;case y.DROP:--o.count,o.count||(a=r,u=void 0,u=(s=l).slice(a+1),s.splice(a),Array.prototype.push.apply(s,u));continue e;default:break e}}if(h=i,!e)return{value:t,done:!1};f[p++]=t}}catch(e){if(e!==v)throw e}var s,a,u;return{done:h=!0}})}t.Iterator=i},2344:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.$type=t.$elemMatch=t.$size=t.$all=t.$exists=t.$regex=t.$mod=t.$gte=t.$gt=t.$lte=t.$lt=t.$nin=t.$in=t.$ne=t.$eq=t.createExpressionOperator=t.createQueryOperator=void 0;var i=r(7424),u=r(7732),c=r(6588);function n(e,t,r){return!!(0,c.isEqual)(e,t)||(!(!(0,c.isNil)(e)||!(0,c.isNil)(t))||e instanceof Array&&(t=c.isEqual.bind(null,t),e.some(t)||(0,c.flatten)(e,1).some(t)))}function o(e,t,r){return(0,c.isNil)(e)?t.some(c.isNull):0<(0,c.intersection)((0,c.ensureArray)(e),t,null==r?void 0:r.hashFunction).length}function l(e){return(0,c.isOperator)(e)&&-1===["$and","$or","$nor"].indexOf(e)}function s(e,t,r){if((0,c.isArray)(e)&&!(0,c.isEmpty)(e)){var n=function(e){return e},i=t;Object.keys(t).every(l)&&(i={temp:t},n=function(e){return{temp:e}});for(var o=new u.Query(i,r),s=0,a=e.length;s<a;s++)if(o.test(n(e[s])))return!0}return!1}function a(e,t){switch(t){case 1:case 19:case c.BsonType.DOUBLE:case c.BsonType.DECIMAL:return(0,c.isNumber)(e);case 2:case c.JsType.STRING:return(0,c.isString)(e);case 3:case c.JsType.OBJECT:return(0,c.isObject)(e);case 4:case c.JsType.ARRAY:return(0,c.isArray)(e);case 6:case c.JsType.UNDEFINED:return(0,c.isNil)(e);case 8:case c.JsType.BOOLEAN:case c.BsonType.BOOL:return(0,c.isBoolean)(e);case 9:case c.JsType.DATE:return(0,c.isDate)(e);case 10:case c.JsType.NULL:return(0,c.isNull)(e);case 11:case c.JsType.REGEXP:case c.BsonType.REGEX:return(0,c.isRegExp)(e);case 16:case c.BsonType.INT:return(0,c.isNumber)(e)&&e>=c.MIN_INT&&e<=c.MAX_INT&&-1===e.toString().indexOf(".");case 18:case c.BsonType.LONG:return(0,c.isNumber)(e)&&e>=c.MIN_LONG&&e<=c.MAX_LONG&&-1===e.toString().indexOf(".");default:return!1}}function f(e,t,r){return(0,c.ensureArray)(e).some(function(e){return(0,c.getType)(e)===(0,c.getType)(t)&&r(e,t)})}t.createQueryOperator=function(o){return function(t,r,n){var i={unwrapArray:!0};return function(e){e=(0,c.resolve)(e,t,i);return o(e,r,n)}}},t.createExpressionOperator=function(n){return function(e,t,r){e=(0,i.computeValue)(e,t,null,r);return n.apply(void 0,e)}},t.$eq=n,t.$ne=function(e,t,r){return!n(e,t)},t.$in=o,t.$nin=function(e,t,r){return!o(e,t,r)},t.$lt=function(e,t,r){return f(e,t,function(e,t){return e<t})},t.$lte=function(e,t,r){return f(e,t,function(e,t){return e<=t})},t.$gt=function(e,t,r){return f(e,t,function(e,t){return t<e})},t.$gte=function(e,t,r){return f(e,t,function(e,t){return t<=e})},t.$mod=function(e,t,r){return(0,c.ensureArray)(e).some(function(e){return 2===t.length&&e%t[0]===t[1]})},t.$regex=function(e,t,r){function n(e){return(0,c.isString)(e)&&!!t.exec(e)}e=(0,c.ensureArray)(e);return e.some(n)||(0,c.flatten)(e,1).some(n)},t.$exists=function(e,t,r){return(!1===t||0===t)&&void 0===e||(!0===t||1===t)&&void 0!==e},t.$all=function(e,t,r){if(!((0,c.isArray)(e)&&(0,c.isArray)(t)&&e.length&&t.length))return!1;for(var n=!0,i=0,o=t;i<o.length&&"break"!==function(t){if(!n)return"break";n=(0,c.isObject)(t)&&(0,c.inArray)(Object.keys(t),"$elemMatch")?s(e,t.$elemMatch,r):t instanceof RegExp?e.some(function(e){return"string"==typeof e&&t.test(e)}):e.some(function(e){return(0,c.isEqual)(t,e)})}(o[i]);i++);return n},t.$size=function(e,t,r){return e.length===t},t.$elemMatch=s,t.$type=function(t,e,r){return Array.isArray(e)?0<=e.findIndex(function(e){return a(t,e)}):a(t,e)}},78:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.$slice=void 0;var n=r(7424),i=r(6588);t.$slice=function(e,t,r){e=(0,n.computeValue)(e,t,null,r),t=e[0],r=e[1],e=e[2];return(0,i.isNil)(e)?r<0?(r=Math.max(0,t.length+r),e=t.length-r+1):(e=r,r=0):(r<0&&(r=Math.max(0,t.length+r)),(0,i.assert)(0<e,"Invalid argument for $slice operator. Limit must be a positive number"),e+=r),t.slice(r,e)}},510:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.$and=void 0;var n=r(7424),i=r(6588);t.$and=function(e,t,r){e=(0,n.computeValue)(e,t,null,r);return(0,i.truthy)(e)&&e.every(i.truthy)}},5039:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(510),t),i(r(7846),t),i(r(7405),t)},7846:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.$not=void 0;var n=r(7424),i=r(6588);t.$not=function(e,t,r){t=(0,i.ensureArray)(t);if(0==t.length)return!1;if(1==t.length)return!(0,n.computeValue)(e,t[0],null,r);throw"Expression $not takes exactly 1 argument"}},7405:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.$or=void 0;var n=r(7424),i=r(6588);t.$or=function(e,t,r){e=(0,n.computeValue)(e,t,null,r);return(0,i.truthy)(e)&&e.some(i.truthy)}},4543:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.$cmp=t.$ne=t.$lte=t.$lt=t.$gte=t.$gt=t.$eq=void 0;var n=r(7424),r=r(2344);t.$eq=(0,r.createExpressionOperator)(r.$eq),t.$gt=(0,r.createExpressionOperator)(r.$gt),t.$gte=(0,r.createExpressionOperator)(r.$gte),t.$lt=(0,r.createExpressionOperator)(r.$lt),t.$lte=(0,r.createExpressionOperator)(r.$lte),t.$ne=(0,r.createExpressionOperator)(r.$ne),t.$cmp=function(e,t,r){e=(0,n.computeValue)(e,t,null,r);return e[0]>e[1]?1:e[0]<e[1]?-1:0}},5292:function(e,t,r){"use strict";var c=this&&this.__assign||function(){return(c=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},l=(Object.defineProperty(t,"__esModule",{value:!0}),t.$addFields=void 0,r(7424)),f=r(6588);t.$addFields=function(e,s,a){var u=Object.keys(s);return 0===u.length?e:e.map(function(e){for(var t=c({},e),r=0,n=u;r<n.length;r++){var i=n[r],o=(0,l.computeValue)(e,s[i],null,a);void 0!==o?(0,f.setValue)(t,i,o):(0,f.removeValue)(t,i)}return t})}},3743:function(e,t,r){"use strict";var v=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||((n=n||Array.prototype.slice.call(t,0,i))[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))},m=(Object.defineProperty(t,"__esModule",{value:!0}),t.$bucket=void 0,r(7424)),g=r(1088),b=r(6588);t.$bucket=function(e,r,n){var i=v([],r.boundaries,!0),o=r.default,s=i[0],a=i[i.length-1],u=r.output||{count:{$sum:1}};(0,b.assert)(2<r.boundaries.length,"$bucket 'boundaries' expression must have at least 3 elements");for(var t=(0,b.getType)(s),c=0,l=i.length-1;c<l;c++)(0,b.assert)(t===(0,b.getType)(i[c+1]),"$bucket 'boundaries' must all be of the same type"),(0,b.assert)(i[c]<i[c+1],"$bucket 'boundaries' must be sorted in ascending order");(0,b.isNil)(o)||(0,b.getType)(r.default)!==(0,b.getType)(s)||(0,b.assert)(r.default>=a||r.default<s,"$bucket 'default' expression must be out of boundaries range");for(var f={},h=0,d=i;h<d.length;h++){var p=d[h];f[p]=[]}(0,b.isNil)(o)||(f[o]=[]);var y=null;return(0,g.Lazy)(function(){return null===y&&(e.each(function(e){var t=(0,m.computeValue)(e,r.groupBy,null,n);(0,b.isNil)(t)||t<s||a<=t?((0,b.assert)(!(0,b.isNil)(o),"$bucket require a default for out of range values"),f[o].push(e)):((0,b.assert)(s<=t&&t<a,"$bucket 'groupBy' expression must resolve to a value in range of boundaries"),t=function(e,t){for(var r=0,n=e.length-1;r<=n;){var i=Math.round(r+(n-r)/2);if(t<e[i])n=i-1;else{if(!(t>e[i]))return i;r=i+1}}return r}(i,t),t=i[Math.max(0,t-1)],f[t].push(e))}),i.pop(),(0,b.isNil)(o)||i.push(o),y=(0,g.Lazy)(i).map(function(e){var t=(0,m.computeValue)(f[e],u,null,n);return(0,b.into)(t,{_id:e})})),y.next()})}},4943:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.$bucketAuto=void 0;var b=r(7424),_=r(6588);t.$bucketAuto=function(e,t,y){var v=t.output||{count:{$sum:1}},m=t.groupBy,g=t.buckets;return(0,_.assert)(0<g,"The $bucketAuto 'buckets' field must be greater than 0, but found: "+g),e.transform(function(e){for(var t=Math.max(1,Math.round(e.length/g)),r=(0,_.memoize)(b.computeValue,null==y?void 0:y.hashFunction),n={},i=[],o=(0,_.sortBy)(e,function(e){var t=r(e,m,null,y);return(0,_.isNil)(t)?i.push(e):(n[t]||(n[t]=[]),n[t].push(e)),t}),s=[],a=0,u=0,c=o.length;u<g&&a<c;u++){for(var l={},f=[],h=0;h<t&&a<c;h++){var d=r(o[a],m,null,y);(0,_.isNil)(d)&&(d=null),(0,_.into)(f,(0,_.isNil)(d)?i:n[d]),a+=((0,_.isNil)(d)?i:n[d]).length,(0,_.has)(l,"min")||(l.min=d),0<s.length&&(s[s.length-1]._id.max=l.min)}u==g-1&&(0,_.into)(f,o.slice(a));var p=(0,b.computeValue)(f,v,null,y);s.push((0,_.into)(p,{_id:l}))}return 0<s.length&&(s[s.length-1]._id.max=r(o[o.length-1],m,null,y)),s})}},1688:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.$count=void 0;var n=r(1088),i=r(6588);t.$count=function(t,r,e){return(0,i.assert)((0,i.isString)(r)&&""!==r.trim()&&-1===r.indexOf(".")&&"$"!==r.trim()[0],"Invalid expression value for $count"),(0,n.Lazy)(function(){var e={};return e[r]=t.size(),{value:e,done:!1}}).first()}},1129:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.$facet=void 0;var i=r(8221),o=r(6588);t.$facet=function(e,r,n){return e.transform(function(t){return[(0,o.objectMap)(r,function(e){return new i.Aggregator(e,n).run(t)})]})}},4285:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.$group=void 0;var f=r(7424),n=r(6588);t.$group=function(e,c,l){var t=c._id;return e.transform(function(e){var s=(0,n.groupBy)(e,function(e){return(0,f.computeValue)(e,t,null,l)},null==l?void 0:l.hashFunction),a=(delete(c=(0,n.into)({},c))._id,-1),u=s.keys.length;return function(){if(++a===u)return{done:!0};var e=s.keys[a],t={};void 0!==e&&(t._id=e);for(var r=0,n=Object.entries(c);r<n.length;r++){var i=n[r],o=i[0],i=i[1];t[o]=(0,f.computeValue)(s.groups[a],i,o,l)}return{value:t,done:!1}}})}},1091:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(5292),t),i(r(3743),t),i(r(4943),t),i(r(1688),t),i(r(1129),t),i(r(4285),t),i(r(854),t),i(r(7672),t),i(r(7533),t),i(r(2250),t),i(r(8203),t),i(r(1229),t),i(r(9251),t),i(r(3042),t),i(r(6486),t),i(r(5702),t),i(r(3500),t),i(r(3469),t),i(r(8734),t),i(r(49),t),i(r(8105),t)},854:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.$limit=void 0,t.$limit=function(e,t,r){return e.take(t)}},7672:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.$lookup=void 0;var c=r(6588);t.$lookup=function(e,r,n){var t=(0,c.isString)(r.from)?null==n?void 0:n.collectionResolver(r.from):r.from;(0,c.assert)(t instanceof Array,"'from' field must resolve to an array");for(var i={},o=0,s=t;o<s.length;o++){var a=s[o],u=(0,c.hashCode)((0,c.resolve)(a,r.foreignField),null==n?void 0:n.hashFunction);i[u]=i[u]||[],i[u].push(a)}return e.map(function(e){var t=(0,c.hashCode)((0,c.resolve)(e,r.localField),null==n?void 0:n.hashFunction),e=(0,c.into)({},e);return e[r.as]=i[t]||[],e})}},7533:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.$match=void 0;var i=r(7732);t.$match=function(e,t,r){var n=new i.Query(t,r);return e.filter(function(e){return n.test(e)})}},2250:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.$out=void 0;var i=r(6588);t.$out=function(e,t,r){var n=(0,i.isString)(t)?null==r?void 0:r.collectionResolver(t):t;return(0,i.assert)(n instanceof Array,"expression must resolve to an array"),e.map(function(e){return n.push((0,i.cloneDeep)(e)),e})}},8203:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.$project=void 0;var p=r(7424),y=r(6588);function v(a,u,c,e,t){var l={},f=!1,h=!1,d=[];t&&d.push(c.idKey);for(var r=0,n=e;r<n.length;r++)!function(e){var t=void 0,r=u[e];if(e!==c.idKey&&(0,y.inArray)([0,!1],r)&&(h=!0),e===c.idKey&&(0,y.isEmpty)(r))t=a[e];else if((0,y.isString)(r))t=(0,p.computeValue)(a,r,e,c);else if(!(0,y.inArray)([1,!0],r))if(r instanceof Array)t=r.map(function(e){e=(0,p.computeValue)(a,e,null,c);return(0,y.isNil)(e)?null:e});else{if(!(0,y.isObject)(r))return d.push(e);var n=r,i=Object.keys(r),o=1==i.length?i[0]:null,s=(0,p.getOperator)(p.OperatorType.PROJECTION,o);s?"$slice"===o?(0,y.ensureArray)(n[o]).every(y.isNumber)?(t=s(a,n[o],e),f=!0):t=(0,p.computeValue)(a,n,e,c):t=s(a,n[o],e,c):t=(0,y.isOperator)(o)?(0,p.computeValue)(a,n[o],o,c):(0,y.has)(a,e)?(m(n,c),(s=a[e])instanceof Array?s.map(function(e){return v(e,n,c,i,!1)}):v(s=(0,y.isObject)(s)?s:a,n,c,i,!1)):(0,p.computeValue)(a,r,null,c)}o=(0,y.resolveGraph)(a,e,{preserveMissing:!0});void 0!==o&&(0,y.merge)(l,o,{flatten:!0}),(0,y.notInArray)([0,1,!1,!0],r)&&(void 0===t?(0,y.removeValue)(l,e):(0,y.setValue)(l,e,t))}(n[r]);if((0,y.filterMissing)(l),(f||h||t)&&(l=(0,y.into)({},a,l),0<d.length))for(var i=0,o=d;i<o.length;i++){var s=o[i];(0,y.removeValue)(l,s)}return l}function m(e,t){for(var r=[!1,!1],n=0,i=Object.entries(e);n<i.length;n++){var o=i[n],s=o[0],o=o[1];if(s===t.idKey)return;0===o||!1===o?r[0]=!0:1!==o&&!0!==o||(r[1]=!0),(0,y.assert)(!(r[0]&&r[1]),"Projection cannot have a mix of inclusion and exclusion.")}}t.$project=function(e,t,r){if((0,y.isEmpty)(t))return e;var n,i=Object.keys(t),o=!1,s=(m(t,r),r.idKey);return(0,y.inArray)(i,s)?0!==(n=t[s])&&!1!==n||(i=i.filter(y.notInArray.bind(null,[s])),o=0==i.length):i.push(s),e.map(function(e){return v(e,t,r,i,o)})}},1229:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.$redact=void 0;var n=r(7424);t.$redact=function(e,t,r){return e.map(function(e){return(0,n.redact)(e,t,r)})}},9251:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.$replaceRoot=void 0;var n=r(7424),i=r(6588);t.$replaceRoot=function(e,t,r){return e.map(function(e){return e=(0,n.computeValue)(e,t.newRoot,null,r),(0,i.assert)((0,i.isObject)(e),"$replaceRoot expression must return an object"),e})}},3042:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.$replaceWith=void 0;r=r(9251);t.$replaceWith=r.$replaceRoot},6486:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.$sample=void 0,t.$sample=function(e,i,t){return e.transform(function(t){var r=t.length,n=-1;return function(){if(++n===i.size)return{done:!0};var e=Math.floor(Math.random()*r);return{value:t[e],done:!1}}})}},5702:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.$set=void 0;r=r(5292);t.$set=r.$addFields},3500:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.$skip=void 0,t.$skip=function(e,t,r){return e.drop(t)}},3469:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.$sort=void 0;var f=r(6588),i=(t.$sort=function(e,u,c){if((0,f.isEmpty)(u)||!(0,f.isObject)(u))return e;var t,r,l=f.compare,n=c.collation;return(0,f.isObject)(n)&&(0,f.isString)(n.locale)&&(t={sensitivity:i[(n=n).strength||3],caseFirst:"off"!==n.caseFirst&&n.caseFirst||"false",numeric:n.numericOrdering||!1,ignorePunctuation:"shifted"===n.alternate},!0===(n.caseLevel||!1)&&("base"===t.sensitivity&&(t.sensitivity="case"),"accent"===t.sensitivity&&(t.sensitivity="variant")),r=new Intl.Collator(n.locale,t),l=function(e,t){if(!(0,f.isString)(e)||!(0,f.isString)(t))return(0,f.compare)(e,t);e=r.compare(e,t);return e<0?-1:0<e?1:0}),e.transform(function(a){for(var e=0,t=Object.keys(u).reverse();e<t.length;e++)!function(t){var e=(0,f.groupBy)(a,function(e){return(0,f.resolve)(e,t)},null==c?void 0:c.hashFunction),r={},n=(0,f.sortBy)(e.keys,function(e,t){return r[e]=t,e},l);-1===u[t]&&n.reverse(),a=[];for(var i=0,o=n;i<o.length;i++){var s=o[i];(0,f.into)(a,e.groups[r[s]])}}(t[e]);return a})},{1:"base",2:"accent",3:"variant"})},8734:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.$sortByCount=void 0;var i=r(4285),o=r(3469);t.$sortByCount=function(e,t,r){var n={count:{$sum:1}};return n._id=t,(0,o.$sort)((0,i.$group)(e,n,r),{count:-1},r)}},49:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.$unset=void 0;var s=r(6588),a=r(8203);t.$unset=function(e,t,r){for(var n={},i=0,o=t=(0,s.ensureArray)(t);i<o.length;i++)n[o[i]]=0;return(0,a.$project)(e,n,r)}},8105:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.$unwind=void 0;var u=r(1088),c=r(6588);t.$unwind=function(t,e,r){function i(e,t){return!1!==n&&(e[n]=t),e}var o,s=(e=(0,c.isString)(e)?{path:e}:e).path.substr(1),n=(null==e?void 0:e.includeArrayIndex)||!1,a=e.preserveNullAndEmptyArrays||!1;return(0,u.Lazy)(function(){for(;;){var e=function(){if(o instanceof u.Iterator){var e=o.next();if(!e.done)return{value:e}}e=t.next();if(e.done)return{value:e};var n=e.value;if((o=(0,c.resolve)(n,s))instanceof Array){if(0===o.length&&!0===a)return(o=null,c.removeValue)(n,s),{value:{value:i(n,null),done:!1}};o=(0,u.Lazy)(o).map(function(e,t){var r=(0,c.resolveGraph)(n,s,{preserveKeys:!0});return(0,c.setValue)(r,s,e),i(r,t)})}else if(!(0,c.isEmpty)(o)||!0===a)return{value:{value:i(n,null),done:!1}}}();if("object"==typeof e)return e.value}})}},6842:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.$elemMatch=void 0;var a=r(7732),u=r(6588);t.$elemMatch=function(e,t,r,n){var i=(0,u.resolve)(e,r),o=new a.Query(t,n);(0,u.assert)(i instanceof Array,"$elemMatch: argument must resolve to array");for(var s=0;s<i.length;s++)if(o.test(i[s]))return[i[s]]}},7086:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(6842),t),i(r(3526),t)},3526:function(e,t,r){"use strict";var o=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||((n=n||Array.prototype.slice.call(t,0,i))[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))},s=(Object.defineProperty(t,"__esModule",{value:!0}),t.$slice=void 0,r(6588)),a=r(78);t.$slice=function(e,t,r,n){var r=(0,s.resolve)(e,r),i=t;return(0,s.isArray)(r)?(0,a.$slice)(e,t instanceof Array?o([r],i,!0):[r,t],n):r}},518:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.$all=void 0;r=r(2344);t.$all=(0,r.createQueryOperator)(r.$all)},9039:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.$elemMatch=void 0;r=r(2344);t.$elemMatch=(0,r.createQueryOperator)(r.$elemMatch)},844:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(518),t),i(r(9039),t),i(r(9159),t)},9159:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.$size=void 0;r=r(2344);t.$size=(0,r.createQueryOperator)(r.$size)},7012:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createBitwiseOperator=void 0;var n=r(2344);t.createBitwiseOperator=function(s){return(0,n.createQueryOperator)(function(e,t,r){var n=0;if(t instanceof Array)for(var i=0,o=t;i<o.length;i++)n|=1<<o[i];else n=t;return s(e&n,n)})}},2604:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.$bitsAllClear=void 0;r=r(7012);t.$bitsAllClear=(0,r.createBitwiseOperator)(function(e,t){return 0==e})},5051:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.$bitsAllSet=void 0;r=r(7012);t.$bitsAllSet=(0,r.createBitwiseOperator)(function(e,t){return e==t})},9904:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.$bitsAnyClear=void 0;r=r(7012);t.$bitsAnyClear=(0,r.createBitwiseOperator)(function(e,t){return e<t})},602:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.$bitsAnySet=void 0;r=r(7012);t.$bitsAnySet=(0,r.createBitwiseOperator)(function(e,t){return 0<e})},1246:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.$bitsAnySet=t.$bitsAnyClear=t.$bitsAllSet=t.$bitsAllClear=void 0;var n=r(2604),i=(Object.defineProperty(t,"$bitsAllClear",{enumerable:!0,get:function(){return n.$bitsAllClear}}),r(5051)),o=(Object.defineProperty(t,"$bitsAllSet",{enumerable:!0,get:function(){return i.$bitsAllSet}}),r(9904)),s=(Object.defineProperty(t,"$bitsAnyClear",{enumerable:!0,get:function(){return o.$bitsAnyClear}}),r(602));Object.defineProperty(t,"$bitsAnySet",{enumerable:!0,get:function(){return s.$bitsAnySet}})},3406:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.$nin=t.$ne=t.$lte=t.$lt=t.$in=t.$gte=t.$gt=t.$eq=void 0;r=r(2344);t.$eq=(0,r.createQueryOperator)(r.$eq),t.$gt=(0,r.createQueryOperator)(r.$gt),t.$gte=(0,r.createQueryOperator)(r.$gte),t.$in=(0,r.createQueryOperator)(r.$in),t.$lt=(0,r.createQueryOperator)(r.$lt),t.$lte=(0,r.createQueryOperator)(r.$lte),t.$ne=(0,r.createQueryOperator)(r.$ne),t.$nin=(0,r.createQueryOperator)(r.$nin)},7402:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.$exists=void 0;r=r(2344);t.$exists=(0,r.createQueryOperator)(r.$exists)},8252:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(7402),t),i(r(442),t)},442:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.$type=void 0;r=r(2344);t.$type=(0,r.createQueryOperator)(r.$type)},3597:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.$expr=void 0;var n=r(7424);t.$expr=function(e,t,r){return function(e){return(0,n.computeValue)(e,t,null,r)}}},5864:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(3597),t),i(r(5615),t),i(r(5971),t),i(r(9789),t)},5615:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.$jsonSchema=void 0,t.$jsonSchema=function(e,t,r){if(null==r||!r.jsonSchemaValidator)throw new Error("Missing option 'jsonSchemaValidator'. Configure to use '$jsonSchema' operator.");var n=null==r?void 0:r.jsonSchemaValidator(t);return function(e){return n(e)}}},5971:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.$mod=void 0;r=r(2344);t.$mod=(0,r.createQueryOperator)(r.$mod)},9789:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.$regex=void 0;r=r(2344);t.$regex=(0,r.createQueryOperator)(r.$regex)},581:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(844),t),i(r(1246),t),i(r(3406),t),i(r(8252),t),i(r(5864),t),i(r(7676),t)},7770:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.$and=void 0;var i=r(7732),o=r(6588);t.$and=function(e,t,r){(0,o.assert)((0,o.isArray)(t),"Invalid expression: $and expects value to be an Array");var n=new Array;return t.forEach(function(e){return n.push(new i.Query(e,r))}),function(e){for(var t=0;t<n.length;t++)if(!n[t].test(e))return!1;return!0}}},7676:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(7770),t),i(r(4538),t),i(r(5002),t),i(r(9967),t)},4538:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.$nor=void 0;var i=r(6588),o=r(9967);t.$nor=function(e,t,r){(0,i.assert)((0,i.isArray)(t),"Invalid expression. $nor expects value to be an Array");var n=(0,o.$or)("$or",t,r);return function(e){return!n(e)}}},5002:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.$not=void 0;var o=r(7732),s=r(6588);t.$not=function(e,t,r){var n={},i=(n[e]=(0,s.normalize)(t),new o.Query(n,r));return function(e){return!i.test(e)}}},9967:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.$or=void 0;var i=r(7732),o=r(6588);t.$or=function(e,t,r){(0,o.assert)((0,o.isArray)(t),"Invalid expression. $or expects value to be an Array");var n=t.map(function(e){return new i.Query(e,r)});return function(e){for(var t=0;t<n.length;t++)if(n[t].test(e))return!0;return!1}}},7732:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Query=void 0;var i=r(7424),n=r(9537),c=r(6588);function o(e,t){this.criteria=e,this.options=t,this.options=(0,i.makeOptions)(t),this.compiled=[],this.compile()}o.prototype.compile=function(){var e;(0,c.assert)((0,c.isObject)(this.criteria),"query criteria must be an object");for(var t=0,r=Object.entries(this.criteria);t<r.length;t++){var n=r[t],i=n[0],n=n[1];if("$where"===i)e={field:i,expr:n};else if((0,c.inArray)(["$and","$or","$nor","$expr","$jsonSchema"],i))this.processOperator(i,i,n);else{(0,c.assert)(!(0,c.isOperator)(i),"unknown top level operator: "+i);for(var o=0,s=Object.entries((0,c.normalize)(n));o<s.length;o++){var a=s[o],u=a[0],a=a[1];this.processOperator(i,u,a)}}(0,c.isObject)(e)&&this.processOperator(e.field,e.field,e.expr)}},o.prototype.processOperator=function(e,t,r){var n=(0,i.getOperator)(i.OperatorType.QUERY,t),t=((0,c.assert)(!!n,"unknown operator "+t),n(e,r,this.options));this.compiled.push(t)},o.prototype.test=function(e){for(var t=0,r=this.compiled.length;t<r;t++)if(!this.compiled[t](e))return!1;return!0},o.prototype.find=function(e,t){var r=this;return new n.Cursor(e,function(e){return r.test(e)},t||{},this.options)},o.prototype.remove=function(e){var r=this;return e.reduce(function(e,t){return r.test(t)||e.push(t),e},[])},t.Query=o},6588:function(e,c){"use strict";var h=this&&this.__assign||function(){return(h=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(c,"__esModule",{value:!0}),c.normalize=c.isOperator=c.removeValue=c.setValue=c.traverse=c.filterMissing=c.resolveGraph=c.resolve=c.memoize=c.into=c.groupBy=c.sortBy=c.compare=c.hashCode=c.unique=c.isEqual=c.flatten=c.union=c.intersection=c.merge=c.objectMap=c.has=c.ensureArray=c.isEmpty=c.truthy=c.notInArray=c.inArray=c.isUndefined=c.isNull=c.isNil=c.isFunction=c.isRegExp=c.isDate=c.isObjectLike=c.isObject=c.isArray=c.isNumber=c.isString=c.isBoolean=c.getType=c.cloneDeep=c.assert=c.BsonType=c.JsType=c.MIN_LONG=c.MAX_LONG=c.MIN_INT=c.MAX_INT=void 0,c.MAX_INT=2147483647,c.MIN_INT=-2147483648,c.MAX_LONG=Number.MAX_SAFE_INTEGER,c.MIN_LONG=Number.MIN_SAFE_INTEGER;var d,t,p={},r=function(e){for(var t=b(e),r=0,n=t.length;n;)r=(r<<5)-r^t.charCodeAt(--n);return(r>>>0).toString()},o=((t=d=c.JsType||(c.JsType={})).NULL="null",t.UNDEFINED="undefined",t.BOOLEAN="boolean",t.NUMBER="number",t.STRING="string",t.DATE="date",t.REGEXP="regexp",t.ARRAY="array",t.OBJECT="object",t.FUNCTION="function",(t=c.BsonType||(c.BsonType={})).BOOL="bool",t.INT="int",t.LONG="long",t.DOUBLE="double",t.DECIMAL="decimal",t.REGEX="regex",[d.NULL,d.UNDEFINED,d.BOOLEAN,d.NUMBER,d.STRING,d.DATE,d.REGEXP]),n=Object.getPrototypeOf({}),i=/^\[object ([a-zA-Z0-9]+)\]$/;function y(e){return i.exec(Object.prototype.toString.call(e))[1]}function l(e){return typeof e===d.STRING}function f(e){if(!e)return!1;var t=Object.getPrototypeOf(e);return(t===n||null===t)&&"[object Object]"===Object.prototype.toString.call(e)}function s(e){return e===Object(e)}function a(e){return e instanceof RegExp}function v(e){return null==e}function m(e){return v(e)||l(e)&&!e||e instanceof Array&&0===e.length||f(e)&&0===Object.keys(e).length}function g(e,t){return!!e&&Object.prototype.hasOwnProperty.call(e,t)}function u(e,t){for(var r={},n=Object.keys(e),i=0;i<n.length;i++){var o=n[i];r[o]=t(e[o],o)}return r}function b(t){var e=y(t).toLowerCase();switch(e){case d.BOOLEAN:case d.NUMBER:case d.REGEXP:return t.toString();case d.STRING:return JSON.stringify(t);case d.DATE:return t.toISOString();case d.NULL:case d.UNDEFINED:return e;case d.ARRAY:return"["+t.map(b).join(",")+"]"}var r=e===d.OBJECT?"":""+y(t),n=Object.keys(t);return n.sort(),r+"{"+n.map(function(e){return b(e)+":"+b(t[e])}).join(",")+"}"}function _(e,t){return void 0===t&&(t=r),v(e)?null:t(e)}function w(e,t){return e<t?-1:t<e?1:0}c.assert=function(e,t){if(!e)throw new Error(t)},c.cloneDeep=function e(t){return t instanceof Array?t.map(e):t instanceof Date?new Date(t):f(t)?u(t,e):t},c.getType=y,c.isBoolean=function(e){return typeof e===d.BOOLEAN},c.isString=l,c.isNumber=function(e){return!isNaN(e)&&typeof e===d.NUMBER},c.isArray=Array.isArray,c.isObject=f,c.isObjectLike=s,c.isDate=function(e){return e instanceof Date},c.isRegExp=a,c.isFunction=function(e){return typeof e===d.FUNCTION},c.isNil=v,c.isNull=function(e){return null===e},c.isUndefined=function(e){return void 0===e},c.inArray=Array.prototype.includes?function(e,t){return e.includes(t)}:function(e,t){return isNaN(t)&&!l(t)?e.some(function(e){return isNaN(e)&&!l(e)}):-1<e.indexOf(t)},c.notInArray=function(e,t){return!(0,c.inArray)(e,t)},c.truthy=function(e){return!!e},c.isEmpty=m,c.ensureArray=function(e){return e instanceof Array?e:[e]},c.has=g,c.objectMap=u,c.merge=function t(r,n,i){if(r===p)return n;if(n===p)return r;var e=[r,n];if(!e.every(f)&&!e.every(c.isArray))throw Error("mismatched types. must both be array or object");if(i=i||{flatten:!1},(0,c.isArray)(r)){var o=r,s=n;if(i.flatten){for(var a=0,u=0;a<o.length&&u<s.length;)o[a]=t(o[a++],s[u++],i);for(;u<s.length;)o.push(n[u++])}else Array.prototype.push.apply(o,s)}else Object.keys(n).forEach(function(e){g(n,e)&&(g(r,e)?r[e]=t(r[e],n[e],i):r[e]=n[e])});return r},c.intersection=function(t,e,n){var r,i=!1;t.length>e.length&&(r=t,t=e,e=r,i=!0);for(var o=Math.max(t.length,e.length),s=Math.min(t.length,e.length),a=t.reduce(function(e,t,r){return e[_(t,n)]=r,e},{}),u=new Array,c=0,l=0;c<o&&l<s;c++){var f=a[_(e[c],n)];void 0!==f&&(u.push(f),l++)}return i||u.sort(),u.map(function(e){return t[e]})},c.union=function(e,t,n){var i={};return e.concat(t).forEach(function(e,t){var r=_(e,n);i[r]||(i[r]=[e,t])}),Object.values(i).sort(function(e,t){return e[1]<t[1]?-1:e[1]>t[1]?1:0}).map(function(e){return e[0]})},c.flatten=function(e,t){var o=[];return function e(t,r){for(var n=0,i=t.length;n<i;n++)(0,c.isArray)(t[n])&&(0<r||r<0)?e(t[n],Math.max(-1,r-1)):o.push(t[n])}(e,t),o},c.isEqual=function(e,t){for(var r=[e],n=[t];0<r.length;)if((e=r.pop())!==(t=n.pop())){var i=y(e).toLowerCase();if(i!==y(t).toLowerCase()||i===d.FUNCTION)return!1;if(i===d.ARRAY){var o=e,s=t;if(o.length!==s.length)return!1;if(o.length===s.length&&0===o.length)continue;x(r,o),x(n,s)}else if(i===d.OBJECT){var a=Object.keys(e),u=Object.keys(t);if(a.length!==u.length)return!1;a.sort(),u.sort();for(var c=0,l=a.length;c<l;c++){var f=a[c];if(f!==u[c])return!1;r.push(e[f]),n.push(t[f])}}else if(b(e)!==b(t))return!1}return 0===r.length},c.unique=function(e,t){for(var r={},n=[],i=0,o=e;i<o.length;i++){var s=o[i],a=_(s,t);g(r,a)||(n.push(s),r[a]=0)}return n},c.hashCode=_,c.compare=w,c.sortBy=function(e,t,r){var n=new Array,i=new Array,o={};if(r=r||w,m(e))return e;for(var s=0;s<e.length;s++){var a=e[s],u=t(a,s);v(u)?i.push(a):(l(u)&&(u+="\0"),o[u]?o[u].push(a):o[u]=[a],n.push(u))}for(n.sort(r),s=0;s<n.length;s++)x(i,o[n[s]]);return i},c.groupBy=function(e,t,r){for(var n={keys:new Array,groups:new Array},i={},o=0,s=e;o<s.length;o++){var a=s[o],u=t(a),c=_(u,r),l=-1;void 0===i[c]&&(l=n.keys.length,i[c]=l,n.keys.push(u),n.groups.push([])),l=i[c],n.groups[l].push(a)}return n};var O=5e4;function x(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return e instanceof Array?t.reduce(function(e,t){for(var r=Math.ceil(t.length/O),n=0;0<r--;)Array.prototype.push.apply(e,t.slice(n,n+O)),n+=O;return e},e):f(e)?t.filter(s).reduce(function(e,t){return Object.assign(e,t),e},e):null}function j(e,t){return s(e)?e[t]:void 0}function A(e,t,r,n){var t=t.split("."),i=t[0],o=t.slice(1).join(".");1===t.length?r(e,i):(!0===n&&v(e[i])&&(e[i]={}),A(e[i],o,r,n))}c.into=x,c.memoize=function(n,i){var o=this,s={};return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=_(e,i);return g(s,r)||(s[r]=n.apply(o,e)),s[r]}},c.resolve=function(e,t,r){var s=0,e=(r=r||{unwrapArray:!1},(0,c.inArray)(o,y(e).toLowerCase())?e:function n(e,i){for(var o=e,t=0;t<i.length&&"break"!==function(e){var t=i[e];if(null===/^\d+$/.exec(t)&&o instanceof Array){if(0===e&&0<s)return"break";s+=1;var r=i.slice(e);return o=o.reduce(function(e,t){t=n(t,r);return void 0!==t&&e.push(t),e},[]),"break"}if(void 0===(o=j(o,t)))return"break"}(t);t++);return o}(e,t.split(".")));if(e instanceof Array&&r.unwrapArray){var n=e,i=s;if(i<1)return n;for(;i--&&1===n.length;)n=n[0];return n}return e},c.resolveGraph=function e(t,r,n){void 0===n&&(n={preserveMissing:!1});var i,o=r.split("."),s=o[0],a=o.slice(1).join("."),u=null!==/^\d+$/.exec(s),o=1<o.length;if(t instanceof Array)if(u)c=j(t,Number(s)),c=[c=o?e(c,a,n):c];else for(var c=[],l=0,f=t;l<f.length;l++)i=e(f[l],r,n),n.preserveMissing?c.push(i=void 0===i?p:i):void 0!==i&&c.push(i);else{if(i=j(t,s),void 0===(i=o?e(i,a,n):i))return;(c=n.preserveKeys?h({},t):{})[s]=i}return c},c.filterMissing=function e(t){if(t instanceof Array)for(var r=t.length-1;0<=r;r--)t[r]===p?t.splice(r,1):e(t[r]);else if(f(t))for(var n in t)g(t,n)&&e(t[n])},c.traverse=A,c.setValue=function(e,t,r){A(e,t,function(e,t){e[t]=r},!0)},c.removeValue=function(e,t){A(e,t,function(e,t){if(e instanceof Array)if(/^\d+$/.test(t))e.splice(parseInt(t),1);else for(var r=0,n=e;r<n.length;r++){var i=n[r];f(i)&&delete i[t]}else f(e)&&delete e[t]})};var E=/^\$[a-zA-Z0-9_]+$/;function k(e){return E.test(e)}c.isOperator=k,c.normalize=function(e){if((0,c.inArray)(o,y(e).toLowerCase()))return a(e)?{$regex:e}:{$eq:e};if(s(e)){if(!Object.keys(e).some(k))return{$eq:e};if(g(e,"$regex"))return{$regex:new RegExp(e.$regex,e.$options)}}return e}},1528:function(t,r){var n,i;!function(e){"use strict";"object"==typeof t.exports?t.exports=e():(i=[],void 0!==(i="function"==typeof(n=e)?n.apply(r,i):n)&&(t.exports=i))}(function(){"use strict";var t=Object.prototype.toString;function c(e,t){return null!=e&&Object.prototype.hasOwnProperty.call(e,t)}function l(e){if(!e)return 1;if(h(e)&&0===e.length)return 1;if("string"!=typeof e){for(var t in e)if(c(e,t))return;return 1}}function f(e){return t.call(e)}var h=Array.isArray||function(e){return"[object Array]"===t.call(e)};function d(e){var t=parseInt(e);return t.toString()===e?t:e}function e(i){function s(r){return Object.keys(s).reduce(function(e,t){return"create"!==t&&"function"==typeof s[t]&&(e[t]=s[t].bind(s,r)),e},{})}var o,a;function r(e,t){if(o(e,t))return e[t]}function u(e,t,r,n){if(!(t="number"==typeof t?[t]:t)||0===t.length)return e;if("string"==typeof t)return u(e,t.split(".").map(d),r,n);var i=t[0],o=a(e,i);return 1===t.length?(void 0!==o&&n||(e[i]=r),o):(void 0===o&&("number"==typeof t[1]?e[i]=[]:e[i]={}),u(e[i],t.slice(1),r,n))}return o=(i=i||{}).includeInheritedProps?function(){return!0}:function(e,t){return"number"==typeof t&&Array.isArray(e)||c(e,t)},a=i.includeInheritedProps?function(e,t){e=r(e,t="string"!=typeof t&&"number"!=typeof t?String(t):t);if("__proto__"===t||"prototype"===t||"constructor"===t&&"function"==typeof e)throw new Error("For security reasons, object's magic properties cannot be set");return e}:r,s.has=function(e,t){if("number"==typeof t?t=[t]:"string"==typeof t&&(t=t.split(".")),!t||0===t.length)return!!e;for(var r=0;r<t.length;r++){var n=d(t[r]);if(!("number"==typeof n&&h(e)&&n<e.length||(i.includeInheritedProps?n in Object(e):c(e,n))))return!1;e=e[n]}return!0},s.ensureExists=function(e,t,r){return u(e,t,r,!0)},s.set=u,s.insert=function(e,t,r,n){var i=s.get(e,t);n=~~n,h(i)||s.set(e,t,i=[]),i.splice(n,0,r)},s.empty=function(e,t){var r,n;if(!l(t)&&null!=e&&(r=s.get(e,t))){if("string"==typeof r)return s.set(e,t,"");if("boolean"==typeof r||"[object Boolean]"===f(r))return s.set(e,t,!1);if("number"==typeof r)return s.set(e,t,0);if(h(r))r.length=0;else{if("object"!=typeof r||"[object Object]"!==f(r))return s.set(e,t,null);for(n in r)o(r,n)&&delete r[n]}}},s.push=function(e,t){var r=s.get(e,t);h(r)||s.set(e,t,r=[]),r.push.apply(r,Array.prototype.slice.call(arguments,2))},s.coalesce=function(e,t,r){for(var n,i=0,o=t.length;i<o;i++)if(void 0!==(n=s.get(e,t[i])))return n;return r},s.get=function(e,t,r){if(!(t="number"==typeof t?[t]:t)||0===t.length)return e;if(null==e)return r;if("string"==typeof t)return s.get(e,t.split("."),r);var n=d(t[0]),i=a(e,n);return void 0===i?r:1===t.length?i:s.get(e[n],t.slice(1),r)},s.del=function(e,t){if(null==e)return e;if(l(t="number"==typeof t?[t]:t))return e;if("string"==typeof t)return s.del(e,t.split("."));var r=d(t[0]);return a(e,r),o(e,r)?1!==t.length?s.del(e[r],t.slice(1)):(h(e)?e.splice(r,1):delete e[r],e):e},s}var r=e();return r.create=e,r.withInheritedProps=e({includeInheritedProps:!0}),r})},1368:e=>{e.exports=function(){"use strict";var n=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function u(e,t){var r=e[0],n=e[1],i=e[2],o=e[3],n=((n+=((i=((i+=((o=((o+=((r=((r+=(n&i|~n&o)+t[0]-680876936|0)<<7|r>>>25)+n|0)&n|~r&i)+t[1]-389564586|0)<<12|o>>>20)+r|0)&r|~o&n)+t[2]+606105819|0)<<17|i>>>15)+o|0)&o|~i&r)+t[3]-1044525330|0)<<22|n>>>10)+i|0;n=((n+=((i=((i+=((o=((o+=((r=((r+=(n&i|~n&o)+t[4]-176418897|0)<<7|r>>>25)+n|0)&n|~r&i)+t[5]+1200080426|0)<<12|o>>>20)+r|0)&r|~o&n)+t[6]-1473231341|0)<<17|i>>>15)+o|0)&o|~i&r)+t[7]-45705983|0)<<22|n>>>10)+i|0,n=((n+=((i=((i+=((o=((o+=((r=((r+=(n&i|~n&o)+t[8]+1770035416|0)<<7|r>>>25)+n|0)&n|~r&i)+t[9]-1958414417|0)<<12|o>>>20)+r|0)&r|~o&n)+t[10]-42063|0)<<17|i>>>15)+o|0)&o|~i&r)+t[11]-1990404162|0)<<22|n>>>10)+i|0,n=((n+=((i=((i+=((o=((o+=((r=((r+=(n&i|~n&o)+t[12]+1804603682|0)<<7|r>>>25)+n|0)&n|~r&i)+t[13]-40341101|0)<<12|o>>>20)+r|0)&r|~o&n)+t[14]-1502002290|0)<<17|i>>>15)+o|0)&o|~i&r)+t[15]+1236535329|0)<<22|n>>>10)+i|0,n=((n+=((i=((i+=((o=((o+=((r=((r+=(n&o|i&~o)+t[1]-165796510|0)<<5|r>>>27)+n|0)&i|n&~i)+t[6]-1069501632|0)<<9|o>>>23)+r|0)&n|r&~n)+t[11]+643717713|0)<<14|i>>>18)+o|0)&r|o&~r)+t[0]-373897302|0)<<20|n>>>12)+i|0,n=((n+=((i=((i+=((o=((o+=((r=((r+=(n&o|i&~o)+t[5]-701558691|0)<<5|r>>>27)+n|0)&i|n&~i)+t[10]+38016083|0)<<9|o>>>23)+r|0)&n|r&~n)+t[15]-660478335|0)<<14|i>>>18)+o|0)&r|o&~r)+t[4]-405537848|0)<<20|n>>>12)+i|0,n=((n+=((i=((i+=((o=((o+=((r=((r+=(n&o|i&~o)+t[9]+568446438|0)<<5|r>>>27)+n|0)&i|n&~i)+t[14]-1019803690|0)<<9|o>>>23)+r|0)&n|r&~n)+t[3]-187363961|0)<<14|i>>>18)+o|0)&r|o&~r)+t[8]+1163531501|0)<<20|n>>>12)+i|0,n=((n+=((i=((i+=((o=((o+=((r=((r+=(n&o|i&~o)+t[13]-1444681467|0)<<5|r>>>27)+n|0)&i|n&~i)+t[2]-51403784|0)<<9|o>>>23)+r|0)&n|r&~n)+t[7]+1735328473|0)<<14|i>>>18)+o|0)&r|o&~r)+t[12]-1926607734|0)<<20|n>>>12)+i|0,n=((n+=((i=((i+=((o=((o+=((r=((r+=(n^i^o)+t[5]-378558|0)<<4|r>>>28)+n|0)^n^i)+t[8]-2022574463|0)<<11|o>>>21)+r|0)^r^n)+t[11]+1839030562|0)<<16|i>>>16)+o|0)^o^r)+t[14]-35309556|0)<<23|n>>>9)+i|0,n=((n+=((i=((i+=((o=((o+=((r=((r+=(n^i^o)+t[1]-1530992060|0)<<4|r>>>28)+n|0)^n^i)+t[4]+1272893353|0)<<11|o>>>21)+r|0)^r^n)+t[7]-155497632|0)<<16|i>>>16)+o|0)^o^r)+t[10]-1094730640|0)<<23|n>>>9)+i|0,n=((n+=((i=((i+=((o=((o+=((r=((r+=(n^i^o)+t[13]+681279174|0)<<4|r>>>28)+n|0)^n^i)+t[0]-358537222|0)<<11|o>>>21)+r|0)^r^n)+t[3]-722521979|0)<<16|i>>>16)+o|0)^o^r)+t[6]+76029189|0)<<23|n>>>9)+i|0,n=((n+=((i=((i+=((o=((o+=((r=((r+=(n^i^o)+t[9]-640364487|0)<<4|r>>>28)+n|0)^n^i)+t[12]-421815835|0)<<11|o>>>21)+r|0)^r^n)+t[15]+530742520|0)<<16|i>>>16)+o|0)^o^r)+t[2]-995338651|0)<<23|n>>>9)+i|0,n=((n+=((o=((o+=(n^((r=((r+=(i^(n|~o))+t[0]-198630844|0)<<6|r>>>26)+n|0)|~i))+t[7]+1126891415|0)<<10|o>>>22)+r|0)^((i=((i+=(r^(o|~n))+t[14]-1416354905|0)<<15|i>>>17)+o|0)|~r))+t[5]-57434055|0)<<21|n>>>11)+i|0,n=((n+=((o=((o+=(n^((r=((r+=(i^(n|~o))+t[12]+1700485571|0)<<6|r>>>26)+n|0)|~i))+t[3]-1894986606|0)<<10|o>>>22)+r|0)^((i=((i+=(r^(o|~n))+t[10]-1051523|0)<<15|i>>>17)+o|0)|~r))+t[1]-2054922799|0)<<21|n>>>11)+i|0,n=((n+=((o=((o+=(n^((r=((r+=(i^(n|~o))+t[8]+1873313359|0)<<6|r>>>26)+n|0)|~i))+t[15]-30611744|0)<<10|o>>>22)+r|0)^((i=((i+=(r^(o|~n))+t[6]-1560198380|0)<<15|i>>>17)+o|0)|~r))+t[13]+1309151649|0)<<21|n>>>11)+i|0,n=((n+=((o=((o+=(n^((r=((r+=(i^(n|~o))+t[4]-145523070|0)<<6|r>>>26)+n|0)|~i))+t[11]-1120210379|0)<<10|o>>>22)+r|0)^((i=((i+=(r^(o|~n))+t[2]+718787259|0)<<15|i>>>17)+o|0)|~r))+t[9]-343485551|0)<<21|n>>>11)+i|0,e[0]=r+e[0]|0,e[1]=n+e[1]|0,e[2]=i+e[2]|0,e[3]=o+e[3]|0}function c(e){for(var t=[],r=0;r<64;r+=4)t[r>>2]=e.charCodeAt(r)+(e.charCodeAt(r+1)<<8)+(e.charCodeAt(r+2)<<16)+(e.charCodeAt(r+3)<<24);return t}function l(e){for(var t=[],r=0;r<64;r+=4)t[r>>2]=e[r]+(e[r+1]<<8)+(e[r+2]<<16)+(e[r+3]<<24);return t}function r(e){for(var t,r,n,i,o=e.length,s=[1732584193,-271733879,-1732584194,271733878],a=64;a<=o;a+=64)u(s,c(e.substring(a-64,a)));for(t=(e=e.substring(a-64)).length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],a=0;a<t;a+=1)r[a>>2]|=e.charCodeAt(a)<<(a%4<<3);if(r[a>>2]|=128<<(a%4<<3),55<a)for(u(s,r),a=0;a<16;a+=1)r[a]=0;return i=(i=8*o).toString(16).match(/(.*?)(.{0,8})$/),n=parseInt(i[2],16),i=parseInt(i[1],16)||0,r[14]=n,r[15]=i,u(s,r),s}function s(e){for(var t=0;t<e.length;t+=1)e[t]=function(e){for(var t="",r=0;r<4;r+=1)t+=n[e>>8*r+4&15]+n[e>>8*r&15];return t}(e[t]);return e.join("")}function i(e){return e=/[\u0080-\uFFFF]/.test(e)?unescape(encodeURIComponent(e)):e}function a(e){for(var t=[],r=e.length,n=0;n<r-1;n+=2)t.push(parseInt(e.substr(n,2),16));return String.fromCharCode.apply(String,t)}function o(){this.reset()}return s(r("hello")),"undefined"==typeof ArrayBuffer||ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=function(e,t){var r=this.byteLength,e=f(e,r),n=r;return(n=void 0!==t?f(t,r):n)<e?new ArrayBuffer(0):(t=n-e,r=new ArrayBuffer(t),n=new Uint8Array(r),e=new Uint8Array(this,e,t),n.set(e),r)}),o.prototype.append=function(e){return this.appendBinary(i(e)),this},o.prototype.appendBinary=function(e){this._buff+=e,this._length+=e.length;for(var t=this._buff.length,r=64;r<=t;r+=64)u(this._hash,c(this._buff.substring(r-64,r)));return this._buff=this._buff.substring(r-64),this},o.prototype.end=function(e){for(var t,r=this._buff,n=r.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],o=0;o<n;o+=1)i[o>>2]|=r.charCodeAt(o)<<(o%4<<3);return this._finish(i,n),t=s(this._hash),e&&(t=a(t)),this.reset(),t},o.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},o.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},o.prototype.setState=function(e){return this._buff=e.buff,this._length=e.length,this._hash=e.hash,this},o.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},o.prototype._finish=function(e,t){var r,n=t;if(e[n>>2]|=128<<(n%4<<3),55<n)for(u(this._hash,e),n=0;n<16;n+=1)e[n]=0;t=(t=8*this._length).toString(16).match(/(.*?)(.{0,8})$/),r=parseInt(t[2],16),t=parseInt(t[1],16)||0,e[14]=r,e[15]=t,u(this._hash,e)},o.hash=function(e,t){return o.hashBinary(i(e),t)},o.hashBinary=function(e,t){e=s(r(e));return t?a(e):e},(o.ArrayBuffer=function(){this.reset()}).prototype.append=function(e){r=this._buff.buffer,n=e,i=!0,(o=new Uint8Array(r.byteLength+n.byteLength)).set(new Uint8Array(r)),o.set(new Uint8Array(n),r.byteLength);var t,r,n,i,o,s=i?o:o.buffer,a=s.length;for(this._length+=e.byteLength,t=64;t<=a;t+=64)u(this._hash,l(s.subarray(t-64,t)));return this._buff=t-64<a?new Uint8Array(s.buffer.slice(t-64)):new Uint8Array(0),this},o.ArrayBuffer.prototype.end=function(e){for(var t,r=this._buff,n=r.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],o=0;o<n;o+=1)i[o>>2]|=r[o]<<(o%4<<3);return this._finish(i,n),t=s(this._hash),e&&(t=a(t)),this.reset(),t},o.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},o.ArrayBuffer.prototype.getState=function(){var e,t=o.prototype.getState.call(this);return t.buff=(e=t.buff,String.fromCharCode.apply(null,new Uint8Array(e))),t},o.ArrayBuffer.prototype.setState=function(e){return e.buff=function(e,t){for(var r=e.length,n=new ArrayBuffer(r),i=new Uint8Array(n),o=0;o<r;o+=1)i[o]=e.charCodeAt(o);return t?i:n}(e.buff,!0),o.prototype.setState.call(this,e)},o.ArrayBuffer.prototype.destroy=o.prototype.destroy,o.ArrayBuffer.prototype._finish=o.prototype._finish,o.ArrayBuffer.hash=function(e,t){e=s(function(e){for(var t,r,n,i,o=e.length,s=[1732584193,-271733879,-1732584194,271733878],a=64;a<=o;a+=64)u(s,l(e.subarray(a-64,a)));for(t=(e=a-64<o?e.subarray(a-64):new Uint8Array(0)).length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],a=0;a<t;a+=1)r[a>>2]|=e[a]<<(a%4<<3);if(r[a>>2]|=128<<(a%4<<3),55<a)for(u(s,r),a=0;a<16;a+=1)r[a]=0;return i=(i=8*o).toString(16).match(/(.*?)(.{0,8})$/),n=parseInt(i[2],16),i=parseInt(i[1],16)||0,r[14]=n,r[15]=i,u(s,r),s}(new Uint8Array(e)));return t?a(e):e},o;function f(e,t){return(e=0|e||0)<0?Math.max(e+t,0):Math.min(e,t)}}()},5334:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const n=[];for(let e=0;e<256;++e)n.push((e+256).toString(16).substr(1));t.default=function(e,t){var t=t||0,r=n;return(r[e[t+0]]+r[e[t+1]]+r[e[t+2]]+r[e[t+3]]+"-"+r[e[t+4]]+r[e[t+5]]+"-"+r[e[t+6]]+r[e[t+7]]+"-"+r[e[t+8]]+r[e[t+9]]+"-"+r[e[t+10]]+r[e[t+11]]+r[e[t+12]]+r[e[t+13]]+r[e[t+14]]+r[e[t+15]]).toLowerCase()}},1074:(e,t,r)=>{"use strict";Object.defineProperty(t,"v1",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"v3",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"v4",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"v5",{enumerable:!0,get:function(){return s.default}});var n=a(r(8828)),i=a(r(2046)),o=a(r(6287)),s=a(r(7056));function a(e){return e&&e.__esModule?e:{default:e}}},2557:(e,t)=>{"use strict";function c(e){return 14+(e+64>>>9<<4)+1}function l(e,t){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function a(e,t,r,n,i,o){return l((t=l(l(t,e),l(n,o)))<<i|t>>>32-i,r)}function f(e,t,r,n,i,o,s){return a(t&r|~t&n,e,t,i,o,s)}function h(e,t,r,n,i,o,s){return a(t&n|r&~n,e,t,i,o,s)}function d(e,t,r,n,i,o,s){return a(t^r^n,e,t,i,o,s)}function p(e,t,r,n,i,o,s){return a(r^(t|~n),e,t,i,o,s)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=function(t){if("string"==typeof t){const n=unescape(encodeURIComponent(t));t=new Uint8Array(n.length);for(let e=0;e<n.length;++e)t[e]=n.charCodeAt(e)}{var r=function(t,e){t[e>>5]|=128<<e%32,t[c(e)-1]=e;let r=1732584193,n=-271733879,i=-1732584194,o=271733878;for(let e=0;e<t.length;e+=16){const c=r,s=n,a=i,u=o;r=f(r,n,i,o,t[e],7,-680876936),o=f(o,r,n,i,t[e+1],12,-389564586),i=f(i,o,r,n,t[e+2],17,606105819),n=f(n,i,o,r,t[e+3],22,-1044525330),r=f(r,n,i,o,t[e+4],7,-176418897),o=f(o,r,n,i,t[e+5],12,1200080426),i=f(i,o,r,n,t[e+6],17,-1473231341),n=f(n,i,o,r,t[e+7],22,-45705983),r=f(r,n,i,o,t[e+8],7,1770035416),o=f(o,r,n,i,t[e+9],12,-1958414417),i=f(i,o,r,n,t[e+10],17,-42063),n=f(n,i,o,r,t[e+11],22,-1990404162),r=f(r,n,i,o,t[e+12],7,1804603682),o=f(o,r,n,i,t[e+13],12,-40341101),i=f(i,o,r,n,t[e+14],17,-1502002290),n=f(n,i,o,r,t[e+15],22,1236535329),r=h(r,n,i,o,t[e+1],5,-165796510),o=h(o,r,n,i,t[e+6],9,-1069501632),i=h(i,o,r,n,t[e+11],14,643717713),n=h(n,i,o,r,t[e],20,-373897302),r=h(r,n,i,o,t[e+5],5,-701558691),o=h(o,r,n,i,t[e+10],9,38016083),i=h(i,o,r,n,t[e+15],14,-660478335),n=h(n,i,o,r,t[e+4],20,-405537848),r=h(r,n,i,o,t[e+9],5,568446438),o=h(o,r,n,i,t[e+14],9,-1019803690),i=h(i,o,r,n,t[e+3],14,-187363961),n=h(n,i,o,r,t[e+8],20,1163531501),r=h(r,n,i,o,t[e+13],5,-1444681467),o=h(o,r,n,i,t[e+2],9,-51403784),i=h(i,o,r,n,t[e+7],14,1735328473),n=h(n,i,o,r,t[e+12],20,-1926607734),r=d(r,n,i,o,t[e+5],4,-378558),o=d(o,r,n,i,t[e+8],11,-2022574463),i=d(i,o,r,n,t[e+11],16,1839030562),n=d(n,i,o,r,t[e+14],23,-35309556),r=d(r,n,i,o,t[e+1],4,-1530992060),o=d(o,r,n,i,t[e+4],11,1272893353),i=d(i,o,r,n,t[e+7],16,-155497632),n=d(n,i,o,r,t[e+10],23,-1094730640),r=d(r,n,i,o,t[e+13],4,681279174),o=d(o,r,n,i,t[e],11,-358537222),i=d(i,o,r,n,t[e+3],16,-722521979),n=d(n,i,o,r,t[e+6],23,76029189),r=d(r,n,i,o,t[e+9],4,-640364487),o=d(o,r,n,i,t[e+12],11,-421815835),i=d(i,o,r,n,t[e+15],16,530742520),n=d(n,i,o,r,t[e+2],23,-995338651),r=p(r,n,i,o,t[e],6,-198630844),o=p(o,r,n,i,t[e+7],10,1126891415),i=p(i,o,r,n,t[e+14],15,-1416354905),n=p(n,i,o,r,t[e+5],21,-57434055),r=p(r,n,i,o,t[e+12],6,1700485571),o=p(o,r,n,i,t[e+3],10,-1894986606),i=p(i,o,r,n,t[e+10],15,-1051523),n=p(n,i,o,r,t[e+1],21,-2054922799),r=p(r,n,i,o,t[e+8],6,1873313359),o=p(o,r,n,i,t[e+15],10,-30611744),i=p(i,o,r,n,t[e+6],15,-1560198380),n=p(n,i,o,r,t[e+13],21,1309151649),r=p(r,n,i,o,t[e+4],6,-145523070),o=p(o,r,n,i,t[e+11],10,-1120210379),i=p(i,o,r,n,t[e+2],15,718787259),n=p(n,i,o,r,t[e+9],21,-343485551),r=l(r,c),n=l(n,s),i=l(i,a),o=l(o,u)}return[r,n,i,o]}(function(t){if(0===t.length)return[];const r=8*t.length,n=new Uint32Array(c(r));for(let e=0;e<r;e+=8)n[e>>5]|=(255&t[e/8])<<e%32;return n}(t),8*t.length);const i=[],o=32*r.length,s="0123456789abcdef";for(let e=0;e<o;e+=8){const o=r[e>>5]>>>e%32&255,a=parseInt(s.charAt(o>>>4&15)+s.charAt(15&o),16);i.push(a)}return i}}},6041:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){if(r)return r(n);throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported")};const r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),n=new Uint8Array(16)},2751:(e,t)=>{"use strict";function f(e,t){return e<<t|e>>>32-t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=function(r){const a=[1518500249,1859775393,2400959708,3395469782],u=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof r){const a=unescape(encodeURIComponent(r));r=[];for(let e=0;e<a.length;++e)r.push(a.charCodeAt(e))}r.push(128);const c=r.length/4+2,e=Math.ceil(c/16),l=new Array(e);for(let t=0;t<e;++t){const n=new Uint32Array(16);for(let e=0;e<16;++e)n[e]=r[64*t+4*e]<<24|r[64*t+4*e+1]<<16|r[64*t+4*e+2]<<8|r[64*t+4*e+3];l[t]=n}l[e-1][14]=8*(r.length-1)/Math.pow(2,32),l[e-1][14]=Math.floor(l[e-1][14]),l[e-1][15]=8*(r.length-1)&4294967295;for(let s=0;s<e;++s){const c=new Uint32Array(80);for(let e=0;e<16;++e)c[e]=l[s][e];for(let e=16;e<80;++e)c[e]=f(c[e-3]^c[e-8]^c[e-14]^c[e-16],1);let t=u[0],r=u[1],n=u[2],i=u[3],o=u[4];for(let e=0;e<80;++e){const u=Math.floor(e/20),l=f(t,5)+function(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:case 3:return t^r^n;case 2:return t&r^t&n^r&n}}(u,r,n,i)+o+a[u]+c[e]>>>0;o=i,i=n,n=f(r,30)>>>0,r=t,t=l}u[0]=u[0]+t>>>0,u[1]=u[1]+r>>>0,u[2]=u[2]+n>>>0,u[3]=u[3]+i>>>0,u[4]=u[4]+o>>>0}return[u[0]>>24&255,u[0]>>16&255,u[0]>>8&255,255&u[0],u[1]>>24&255,u[1]>>16&255,u[1]>>8&255,255&u[1],u[2]>>24&255,u[2]>>16&255,u[2]>>8&255,255&u[2],u[3]>>24&255,u[3]>>16&255,u[3]>>8&255,255&u[3],u[4]>>24&255,u[4]>>16&255,u[4]>>8&255,255&u[4]]}},8828:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=n(r(6041)),l=n(r(5334));function n(e){return e&&e.__esModule?e:{default:e}}let f,h,d=0,p=0;t.default=function(e,t,r){var n=t&&r||0;const i=t||[];let o=(e=e||{}).node||f,s=void 0!==e.clockseq?e.clockseq:h;if(null==o||null==s){const t=e.random||(e.rng||c.default)();null==o&&(o=f=[1|t[0],t[1],t[2],t[3],t[4],t[5]]),null==s&&(s=h=16383&(t[6]<<8|t[7]))}let a=void 0!==e.msecs?e.msecs:Date.now(),u=void 0!==e.nsecs?e.nsecs:p+1;r=a-d+(u-p)/1e4;if(r<0&&void 0===e.clockseq&&(s=s+1&16383),1e4<=(u=(r<0||a>d)&&void 0===e.nsecs?0:u))throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");d=a,p=u,h=s;r=(1e4*(268435455&(a+=122192928e5))+u)%4294967296,i[n++]=r>>>24&255,i[n++]=r>>>16&255,i[n++]=r>>>8&255,i[n++]=255&r,e=a/4294967296*1e4&268435455;i[n++]=e>>>8&255,i[n++]=255&e,i[n++]=e>>>24&15|16,i[n++]=e>>>16&255,i[n++]=s>>>8|128,i[n++]=255&s;for(let e=0;e<6;++e)i[n+e]=o[e];return t||(0,l.default)(i)}},2046:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(r(7117)),r=i(r(2557));function i(e){return e&&e.__esModule?e:{default:e}}n=(0,n.default)("v3",48,r.default);t.default=n},7117:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,s,a){function t(e,r,t,n){var i=t&&n||0;if("string"==typeof e&&(e=function(t){t=unescape(encodeURIComponent(t));const r=[];for(let e=0;e<t.length;++e)r.push(t.charCodeAt(e));return r}(e)),"string"==typeof r&&(r=function(){const t=[];return r.replace(/[a-fA-F0-9]{2}/g,function(e){t.push(parseInt(e,16))}),t}()),!Array.isArray(e))throw TypeError("value must be an array of bytes");if(!Array.isArray(r)||16!==r.length)throw TypeError("namespace must be uuid string or an Array of 16 byte values");const o=a(r.concat(e));if(o[6]=15&o[6]|s,o[8]=63&o[8]|128,t)for(let e=0;e<16;++e)t[i+e]=o[e];return t||(0,u.default)(o)}try{t.name=e}catch(e){}return t.DNS=n,t.URL=i,t},t.URL=t.DNS=void 0;var u=(r=r(5334))&&r.__esModule?r:{default:r};const n="6ba7b810-9dad-11d1-80b4-00c04fd430c8",i=(t.DNS=n,"6ba7b811-9dad-11d1-80b4-00c04fd430c8");t.URL=i},6287:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(r(6041)),o=n(r(5334));function n(e){return e&&e.__esModule?e:{default:e}}t.default=function(t,r,e){"string"==typeof t&&(r="binary"===t?new Uint8Array(16):null,t=null);const n=(t=t||{}).random||(t.rng||i.default)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,r){const t=e||0;for(let e=0;e<16;++e)r[t+e]=n[e];return r}return(0,o.default)(n)}},7056:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(r(7117)),r=i(r(2751));function i(e){return e&&e.__esModule?e:{default:e}}n=(0,n.default)("v5",80,r.default);t.default=n},8322:e=>{e.exports=function(){"use strict";var n=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function u(e,t){var r=e[0],n=e[1],i=e[2],o=e[3],n=((n+=((i=((i+=((o=((o+=((r=((r+=(n&i|~n&o)+t[0]-680876936|0)<<7|r>>>25)+n|0)&n|~r&i)+t[1]-389564586|0)<<12|o>>>20)+r|0)&r|~o&n)+t[2]+606105819|0)<<17|i>>>15)+o|0)&o|~i&r)+t[3]-1044525330|0)<<22|n>>>10)+i|0;n=((n+=((i=((i+=((o=((o+=((r=((r+=(n&i|~n&o)+t[4]-176418897|0)<<7|r>>>25)+n|0)&n|~r&i)+t[5]+1200080426|0)<<12|o>>>20)+r|0)&r|~o&n)+t[6]-1473231341|0)<<17|i>>>15)+o|0)&o|~i&r)+t[7]-45705983|0)<<22|n>>>10)+i|0,n=((n+=((i=((i+=((o=((o+=((r=((r+=(n&i|~n&o)+t[8]+1770035416|0)<<7|r>>>25)+n|0)&n|~r&i)+t[9]-1958414417|0)<<12|o>>>20)+r|0)&r|~o&n)+t[10]-42063|0)<<17|i>>>15)+o|0)&o|~i&r)+t[11]-1990404162|0)<<22|n>>>10)+i|0,n=((n+=((i=((i+=((o=((o+=((r=((r+=(n&i|~n&o)+t[12]+1804603682|0)<<7|r>>>25)+n|0)&n|~r&i)+t[13]-40341101|0)<<12|o>>>20)+r|0)&r|~o&n)+t[14]-1502002290|0)<<17|i>>>15)+o|0)&o|~i&r)+t[15]+1236535329|0)<<22|n>>>10)+i|0,n=((n+=((i=((i+=((o=((o+=((r=((r+=(n&o|i&~o)+t[1]-165796510|0)<<5|r>>>27)+n|0)&i|n&~i)+t[6]-1069501632|0)<<9|o>>>23)+r|0)&n|r&~n)+t[11]+643717713|0)<<14|i>>>18)+o|0)&r|o&~r)+t[0]-373897302|0)<<20|n>>>12)+i|0,n=((n+=((i=((i+=((o=((o+=((r=((r+=(n&o|i&~o)+t[5]-701558691|0)<<5|r>>>27)+n|0)&i|n&~i)+t[10]+38016083|0)<<9|o>>>23)+r|0)&n|r&~n)+t[15]-660478335|0)<<14|i>>>18)+o|0)&r|o&~r)+t[4]-405537848|0)<<20|n>>>12)+i|0,n=((n+=((i=((i+=((o=((o+=((r=((r+=(n&o|i&~o)+t[9]+568446438|0)<<5|r>>>27)+n|0)&i|n&~i)+t[14]-1019803690|0)<<9|o>>>23)+r|0)&n|r&~n)+t[3]-187363961|0)<<14|i>>>18)+o|0)&r|o&~r)+t[8]+1163531501|0)<<20|n>>>12)+i|0,n=((n+=((i=((i+=((o=((o+=((r=((r+=(n&o|i&~o)+t[13]-1444681467|0)<<5|r>>>27)+n|0)&i|n&~i)+t[2]-51403784|0)<<9|o>>>23)+r|0)&n|r&~n)+t[7]+1735328473|0)<<14|i>>>18)+o|0)&r|o&~r)+t[12]-1926607734|0)<<20|n>>>12)+i|0,n=((n+=((i=((i+=((o=((o+=((r=((r+=(n^i^o)+t[5]-378558|0)<<4|r>>>28)+n|0)^n^i)+t[8]-2022574463|0)<<11|o>>>21)+r|0)^r^n)+t[11]+1839030562|0)<<16|i>>>16)+o|0)^o^r)+t[14]-35309556|0)<<23|n>>>9)+i|0,n=((n+=((i=((i+=((o=((o+=((r=((r+=(n^i^o)+t[1]-1530992060|0)<<4|r>>>28)+n|0)^n^i)+t[4]+1272893353|0)<<11|o>>>21)+r|0)^r^n)+t[7]-155497632|0)<<16|i>>>16)+o|0)^o^r)+t[10]-1094730640|0)<<23|n>>>9)+i|0,n=((n+=((i=((i+=((o=((o+=((r=((r+=(n^i^o)+t[13]+681279174|0)<<4|r>>>28)+n|0)^n^i)+t[0]-358537222|0)<<11|o>>>21)+r|0)^r^n)+t[3]-722521979|0)<<16|i>>>16)+o|0)^o^r)+t[6]+76029189|0)<<23|n>>>9)+i|0,n=((n+=((i=((i+=((o=((o+=((r=((r+=(n^i^o)+t[9]-640364487|0)<<4|r>>>28)+n|0)^n^i)+t[12]-421815835|0)<<11|o>>>21)+r|0)^r^n)+t[15]+530742520|0)<<16|i>>>16)+o|0)^o^r)+t[2]-995338651|0)<<23|n>>>9)+i|0,n=((n+=((o=((o+=(n^((r=((r+=(i^(n|~o))+t[0]-198630844|0)<<6|r>>>26)+n|0)|~i))+t[7]+1126891415|0)<<10|o>>>22)+r|0)^((i=((i+=(r^(o|~n))+t[14]-1416354905|0)<<15|i>>>17)+o|0)|~r))+t[5]-57434055|0)<<21|n>>>11)+i|0,n=((n+=((o=((o+=(n^((r=((r+=(i^(n|~o))+t[12]+1700485571|0)<<6|r>>>26)+n|0)|~i))+t[3]-1894986606|0)<<10|o>>>22)+r|0)^((i=((i+=(r^(o|~n))+t[10]-1051523|0)<<15|i>>>17)+o|0)|~r))+t[1]-2054922799|0)<<21|n>>>11)+i|0,n=((n+=((o=((o+=(n^((r=((r+=(i^(n|~o))+t[8]+1873313359|0)<<6|r>>>26)+n|0)|~i))+t[15]-30611744|0)<<10|o>>>22)+r|0)^((i=((i+=(r^(o|~n))+t[6]-1560198380|0)<<15|i>>>17)+o|0)|~r))+t[13]+1309151649|0)<<21|n>>>11)+i|0,n=((n+=((o=((o+=(n^((r=((r+=(i^(n|~o))+t[4]-145523070|0)<<6|r>>>26)+n|0)|~i))+t[11]-1120210379|0)<<10|o>>>22)+r|0)^((i=((i+=(r^(o|~n))+t[2]+718787259|0)<<15|i>>>17)+o|0)|~r))+t[9]-343485551|0)<<21|n>>>11)+i|0,e[0]=r+e[0]|0,e[1]=n+e[1]|0,e[2]=i+e[2]|0,e[3]=o+e[3]|0}function c(e){for(var t=[],r=0;r<64;r+=4)t[r>>2]=e.charCodeAt(r)+(e.charCodeAt(r+1)<<8)+(e.charCodeAt(r+2)<<16)+(e.charCodeAt(r+3)<<24);return t}function l(e){for(var t=[],r=0;r<64;r+=4)t[r>>2]=e[r]+(e[r+1]<<8)+(e[r+2]<<16)+(e[r+3]<<24);return t}function r(e){for(var t,r,n,i,o=e.length,s=[1732584193,-271733879,-1732584194,271733878],a=64;a<=o;a+=64)u(s,c(e.substring(a-64,a)));for(t=(e=e.substring(a-64)).length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],a=0;a<t;a+=1)r[a>>2]|=e.charCodeAt(a)<<(a%4<<3);if(r[a>>2]|=128<<(a%4<<3),55<a)for(u(s,r),a=0;a<16;a+=1)r[a]=0;return i=(i=8*o).toString(16).match(/(.*?)(.{0,8})$/),n=parseInt(i[2],16),i=parseInt(i[1],16)||0,r[14]=n,r[15]=i,u(s,r),s}function s(e){for(var t=0;t<e.length;t+=1)e[t]=function(e){for(var t="",r=0;r<4;r+=1)t+=n[e>>8*r+4&15]+n[e>>8*r&15];return t}(e[t]);return e.join("")}function i(e){return e=/[\u0080-\uFFFF]/.test(e)?unescape(encodeURIComponent(e)):e}function a(e){for(var t=[],r=e.length,n=0;n<r-1;n+=2)t.push(parseInt(e.substr(n,2),16));return String.fromCharCode.apply(String,t)}function o(){this.reset()}return s(r("hello")),"undefined"==typeof ArrayBuffer||ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=function(e,t){var r=this.byteLength,e=f(e,r),n=r;return(n=void 0!==t?f(t,r):n)<e?new ArrayBuffer(0):(t=n-e,r=new ArrayBuffer(t),n=new Uint8Array(r),e=new Uint8Array(this,e,t),n.set(e),r)}),o.prototype.append=function(e){return this.appendBinary(i(e)),this},o.prototype.appendBinary=function(e){this._buff+=e,this._length+=e.length;for(var t=this._buff.length,r=64;r<=t;r+=64)u(this._hash,c(this._buff.substring(r-64,r)));return this._buff=this._buff.substring(r-64),this},o.prototype.end=function(e){for(var t,r=this._buff,n=r.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],o=0;o<n;o+=1)i[o>>2]|=r.charCodeAt(o)<<(o%4<<3);return this._finish(i,n),t=s(this._hash),e&&(t=a(t)),this.reset(),t},o.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},o.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},o.prototype.setState=function(e){return this._buff=e.buff,this._length=e.length,this._hash=e.hash,this},o.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},o.prototype._finish=function(e,t){var r,n=t;if(e[n>>2]|=128<<(n%4<<3),55<n)for(u(this._hash,e),n=0;n<16;n+=1)e[n]=0;t=(t=8*this._length).toString(16).match(/(.*?)(.{0,8})$/),r=parseInt(t[2],16),t=parseInt(t[1],16)||0,e[14]=r,e[15]=t,u(this._hash,e)},o.hash=function(e,t){return o.hashBinary(i(e),t)},o.hashBinary=function(e,t){e=s(r(e));return t?a(e):e},(o.ArrayBuffer=function(){this.reset()}).prototype.append=function(e){r=this._buff.buffer,n=e,i=!0,(o=new Uint8Array(r.byteLength+n.byteLength)).set(new Uint8Array(r)),o.set(new Uint8Array(n),r.byteLength);var t,r,n,i,o,s=i?o:o.buffer,a=s.length;for(this._length+=e.byteLength,t=64;t<=a;t+=64)u(this._hash,l(s.subarray(t-64,t)));return this._buff=t-64<a?new Uint8Array(s.buffer.slice(t-64)):new Uint8Array(0),this},o.ArrayBuffer.prototype.end=function(e){for(var t,r=this._buff,n=r.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],o=0;o<n;o+=1)i[o>>2]|=r[o]<<(o%4<<3);return this._finish(i,n),t=s(this._hash),e&&(t=a(t)),this.reset(),t},o.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},o.ArrayBuffer.prototype.getState=function(){var e,t=o.prototype.getState.call(this);return t.buff=(e=t.buff,String.fromCharCode.apply(null,new Uint8Array(e))),t},o.ArrayBuffer.prototype.setState=function(e){return e.buff=function(e,t){for(var r=e.length,n=new ArrayBuffer(r),i=new Uint8Array(n),o=0;o<r;o+=1)i[o]=e.charCodeAt(o);return t?i:n}(e.buff,!0),o.prototype.setState.call(this,e)},o.ArrayBuffer.prototype.destroy=o.prototype.destroy,o.ArrayBuffer.prototype._finish=o.prototype._finish,o.ArrayBuffer.hash=function(e,t){e=s(function(e){for(var t,r,n,i,o=e.length,s=[1732584193,-271733879,-1732584194,271733878],a=64;a<=o;a+=64)u(s,l(e.subarray(a-64,a)));for(t=(e=a-64<o?e.subarray(a-64):new Uint8Array(0)).length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],a=0;a<t;a+=1)r[a>>2]|=e[a]<<(a%4<<3);if(r[a>>2]|=128<<(a%4<<3),55<a)for(u(s,r),a=0;a<16;a+=1)r[a]=0;return i=(i=8*o).toString(16).match(/(.*?)(.{0,8})$/),n=parseInt(i[2],16),i=parseInt(i[1],16)||0,r[14]=n,r[15]=i,u(s,r),s}(new Uint8Array(e)));return t?a(e):e},o;function f(e,t){return(e=0|e||0)<0?Math.max(e+t,0):Math.min(e,t)}}()},2467:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serialize=t.deserialize=t.registerSerializer=void 0;const n=r(7381);let i=n.DefaultSerializer;t.registerSerializer=function(e){i=n.extendSerializer(i,e)},t.deserialize=function(e){return i.deserialize(e)},t.serialize=function(e){return i.serialize(e)}},7381:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultSerializer=t.extendSerializer=void 0,t.extendSerializer=function(e,t){const r=e.deserialize.bind(e),n=e.serialize.bind(e);return{deserialize:e=>t.deserialize(e,r),serialize:e=>t.serialize(e,n)}};const r={deserialize:e=>Object.assign(Error(e.message),{name:e.name,stack:e.stack}),serialize:e=>({__error_marker:"$$error",message:e.message,name:e.name,stack:e.stack})};t.DefaultSerializer={deserialize(e){return(t=e)&&"object"==typeof t&&"__error_marker"in t&&"$$error"===t.__error_marker?r.deserialize(e):e;var t},serialize:e=>e instanceof Error?r.serialize(e):e}},8258:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.$worker=t.$transferable=t.$terminate=t.$events=t.$errors=void 0,t.$errors=Symbol("thread.errors"),t.$events=Symbol("thread.events"),t.$terminate=Symbol("thread.terminate"),t.$transferable=Symbol("thread.transferable"),t.$worker=Symbol("thread.worker")},8180:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Transfer=t.isTransferDescriptor=void 0;const n=r(8258);t.isTransferDescriptor=function(e){return e&&"object"==typeof e&&e[n.$transferable]},t.Transfer=function(e,t){if(!t){if(!e||"object"!=typeof e)throw Error();t=[e]}return{[n.$transferable]:!0,send:e,transferables:t}}},3229:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.WorkerMessageType=t.MasterMessageType=void 0,(r=t.MasterMessageType||(t.MasterMessageType={})).cancel="cancel",r.run="run",(r=t.WorkerMessageType||(t.WorkerMessageType={})).error="error",r.init="init",r.result="result",r.running="running",r.uncaughtError="uncaughtError"},3447:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={isWorkerRuntime:function(){var e="undefined"!=typeof self&&"undefined"!=typeof Window&&self instanceof Window;return!("undefined"==typeof self||!self.postMessage||e)},postMessageToMaster:function(e,t){self.postMessage(e,t)},subscribeToMasterMessages:function(t){const e=e=>{t(e.data)};return self.addEventListener("message",e),()=>{self.removeEventListener("message",e)}}}},1934:function(e,t,r){"use strict";var s=this&&this.__awaiter||function(e,s,a,u){return new(a=a||Promise)(function(r,t){function n(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?r(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(n,i)}o((u=u.apply(e,s||[])).next())})},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.expose=t.isWorkerRuntime=t.Transfer=t.registerSerializer=void 0;const i=n(r(6898)),a=r(2467),o=r(8180),u=r(3229),c=n(r(3447));var l=r(2467),f=(Object.defineProperty(t,"registerSerializer",{enumerable:!0,get:function(){return l.registerSerializer}}),r(8180));Object.defineProperty(t,"Transfer",{enumerable:!0,get:function(){return f.Transfer}}),t.isWorkerRuntime=c.default.isWorkerRuntime;let h=!1;const d=new Map,p=e=>e&&e.type===u.MasterMessageType.run,y=e=>i.default(e)||e&&"object"==typeof e&&"function"==typeof e.subscribe;function v(e){return o.isTransferDescriptor(e)?{payload:e.send,transferables:e.transferables}:{payload:e,transferables:void 0}}function m(e,t){var{payload:t,transferables:r}=v(t),e={type:u.WorkerMessageType.error,uid:e,error:a.serialize(t)};c.default.postMessageToMaster(e,r)}function g(e,t,r){var{payload:r,transferables:n}=v(r),e={type:u.WorkerMessageType.result,uid:e,complete:!!t||void 0,payload:r};c.default.postMessageToMaster(e,n)}function b(t){try{var e={type:u.WorkerMessageType.uncaughtError,error:a.serialize(t)};c.default.postMessageToMaster(e)}catch(e){console.error("Not reporting uncaught error back to master thread as it occured while reporting an uncaught error already.\nLatest error:",e,"\nOriginal error:",t)}}function _(n,i,o){s(this,void 0,void 0,function*(){let e;try{e=i(...o)}catch(e){return m(n,e)}var t=y(e)?"observable":"promise",r=n;if(r={type:u.WorkerMessageType.running,uid:r,resultType:t},c.default.postMessageToMaster(r),y(e)){const i=e.subscribe(e=>g(n,!1,a.serialize(e)),e=>{m(n,a.serialize(e)),d.delete(n)},()=>{g(n,!0),d.delete(n)});d.set(n,i)}else try{const i=yield e;g(n,!0,a.serialize(i))}catch(e){m(n,a.serialize(e))}})}t.expose=function(t){if(!c.default.isWorkerRuntime())throw Error("expose() called in the master thread.");if(h)throw Error("expose() called more than once. This is not possible. Pass an object to expose() if you want to expose multiple functions.");if(h=!0,"function"==typeof t)c.default.subscribeToMasterMessages(e=>{p(e)&&!e.method&&_(e.uid,t,e.args.map(a.deserialize))}),e={type:u.WorkerMessageType.init,exposed:{type:"function"}},c.default.postMessageToMaster(e);else{if("object"!=typeof t||!t)throw Error("Invalid argument passed to expose(). Expected a function or an object, got: "+t);c.default.subscribeToMasterMessages(e=>{p(e)&&e.method&&_(e.uid,t[e.method],e.args.map(a.deserialize))});e=Object.keys(t).filter(e=>"function"==typeof t[e]);e={type:u.WorkerMessageType.init,exposed:{type:"module",methods:e}},c.default.postMessageToMaster(e)}var e;c.default.subscribeToMasterMessages(e=>{if(e&&e.type===u.MasterMessageType.cancel){const t=e.uid,r=d.get(t);r&&(r.unsubscribe(),d.delete(t))}var t})},"undefined"!=typeof self&&"function"==typeof self.addEventListener&&c.default.isWorkerRuntime()&&(self.addEventListener("error",e=>{setTimeout(()=>b(e.error||e),250)}),self.addEventListener("unhandledrejection",e=>{const t=e.reason;t&&"string"==typeof t.message&&setTimeout(()=>b(t),250)})),"undefined"!=typeof process&&"function"==typeof process.on&&c.default.isWorkerRuntime()&&(process.on("uncaughtException",e=>{setTimeout(()=>b(e),250)}),process.on("unhandledRejection",e=>{e&&"string"==typeof e.message&&setTimeout(()=>b(e),250)}))},5525:()=>{}},n={};function Xi(e){var t=n[e];if(void 0!==t)return t.exports;t=n[e]={exports:{}};return r[e].call(t.exports,t,t.exports,Xi),t.exports}Xi.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return Xi.d(t,{a:t}),t},Xi.d=(e,t)=>{for(var r in t)Xi.o(t,r)&&!Xi.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},Xi.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),Xi.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var n=Xi(4406),e=Xi(1368),R=Xi.n(e),B=self.setImmediate||self.setTimeout;function D(t,e,r,n,i){var o;(0<r||n<e.size)&&(r=r,n=n,e=(o=e).webkitSlice?o.webkitSlice(r,n):o.slice(r,n)),o=e,(r=new FileReader).onloadend=function(e){e=e.target.result||new ArrayBuffer(0);t.append(e),i()},r.readAsArrayBuffer(o)}function L(e,t,r,n,i){(0<r||n<t.length)&&(t=t.substring(r,n)),e.appendBinary(t),i()}function K(t,r){var e="string"==typeof t,n=e?t.length:t.size,i=Math.min(32768,n),o=Math.ceil(n/i),s=0,a=new(e?R():R().ArrayBuffer),u=e?L:D;function c(){B(f)}function l(){e=a.end(!0);var e=btoa(e);r(e),a.destroy()}function f(){var e=s*i;u(a,t,e,e+i,++s<o?c:l)}f()}const u="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,b=Object.keys,_=Array.isArray;function a(t,r){return"object"==typeof r&&b(r).forEach(function(e){t[e]=r[e]}),t}"undefined"==typeof Promise||u.Promise||(u.Promise=Promise);const F=Object.getPrototypeOf,q={}.hasOwnProperty;function p(e,t){return q.call(e,t)}function U(t,r){"function"==typeof r&&(r=r(F(t))),("undefined"==typeof Reflect?b:Reflect.ownKeys)(r).forEach(e=>{o(t,e,r[e])})}const z=Object.defineProperty;function o(e,t,r,n){z(e,t,a(r&&p(r,"get")&&"function"==typeof r.get?{get:r.get,set:r.set,configurable:!0}:{value:r,configurable:!0,writable:!0},n))}function V(t){return{from:function(e){return t.prototype=Object.create(e.prototype),o(t.prototype,"constructor",t),{extend:U.bind(null,t.prototype)}}}}const Q=Object.getOwnPropertyDescriptor;function W(e,t){return Q(e,t)||(e=F(e))&&W(e,t)}const G=[].slice;function J(e,t,r){return G.call(e,t,r)}function X(e,t){return t(e)}function Y(e){if(!e)throw new Error("Assertion Failed")}function H(e){u.setImmediate?setImmediate(e):setTimeout(e,0)}function Z(e,n){return e.reduce((e,t,r)=>{t=n(t,r);return t&&(e[t[0]]=t[1]),e},{})}function c(e,t){if(p(e,t))return e[t];if(!t)return e;if("string"!=typeof t){for(var r=[],n=0,i=t.length;n<i;++n){var o=c(e,t[n]);r.push(o)}return r}var s,a=t.indexOf(".");return-1===a||void 0===(s=e[t.substr(0,a)])?void 0:c(s,t.substr(a+1))}function w(e,t,r){if(e&&void 0!==t&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if("string"!=typeof t&&"length"in t){Y("string"!=typeof r&&"length"in r);for(var n=0,i=t.length;n<i;++n)w(e,t[n],r[n])}else{var o,s=t.indexOf(".");-1!==s?(o=t.substr(0,s),""===(s=t.substr(s+1))?void 0===r?_(e)&&!isNaN(parseInt(o))?e.splice(o,1):delete e[o]:e[o]=r:w(e[o]||(e[o]={}),s,r)):void 0===r?_(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=r}}function ee(e){var t,r={};for(t in e)p(e,t)&&(r[t]=e[t]);return r}const te=[].concat;function re(e){return te.apply([],e)}const ne="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(re([8,16,32,64].map(t=>["Int","Uint","Float"].map(e=>e+t+"Array")))).filter(e=>u[e]),ie=ne.map(e=>u[e]);Z(ne,e=>[e,!0]);let oe=null;function se(e){oe="undefined"!=typeof WeakMap&&new WeakMap;e=function e(t){if(!t||"object"!=typeof t)return t;let r=oe&&oe.get(t);if(r)return r;if(_(t)){r=[],oe&&oe.set(t,r);for(var n=0,i=t.length;n<i;++n)r.push(e(t[n]))}else if(0<=ie.indexOf(t.constructor))r=t;else{const n=F(t);for(var o in r=n===Object.prototype?{}:Object.create(n),oe&&oe.set(t,r),t)p(t,o)&&(r[o]=e(t[o]))}return r}(e);return oe=null,e}const ae={}["toString"];function ue(e){return ae.call(e).slice(8,-1)}const ce="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator",le="symbol"==typeof ce?function(e){var t;return null!=e&&(t=e[ce])&&t.apply(e)}:function(){return null},fe={};function r(e){var t,r,n,i;if(1===arguments.length){if(_(e))return e.slice();if(this===fe&&"string"==typeof e)return[e];if(i=le(e)){for(r=[];!(n=i.next()).done;)r.push(n.value);return r}if(null==e)return[e];if("number"!=typeof(t=e.length))return[e];for(r=new Array(t);t--;)r[t]=e[t];return r}for(t=arguments.length,r=new Array(t);t--;)r[t]=arguments[t];return r}const he="undefined"!=typeof Symbol?e=>"AsyncFunction"===e[Symbol.toStringTag]:()=>!1;var h="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function de(e,t){h=e,pe=t}var pe=()=>!0;const ye=!new Error("").stack;function ve(){if(ye)try{throw new Error}catch(e){return e}return new Error}function me(e,t){var r=e.stack;return r?(t=t||0,0===r.indexOf(e.name)&&(t+=(e.name+e.message).split("\n").length),r.split("\n").slice(t).filter(pe).map(e=>"\n"+e).join("")):""}var e=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],t=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(e),ge={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function be(e,t){this._e=ve(),this.name=e,this.message=t}function _e(e,t){return e+". Errors: "+Object.keys(t).map(e=>t[e].toString()).filter((e,t,r)=>r.indexOf(e)===t).join("\n")}function we(e,t,r,n){this._e=ve(),this.failures=t,this.failedKeys=n,this.successCount=r,this.message=_e(e,t)}function Oe(e,t){this._e=ve(),this.name="BulkError",this.failures=Object.keys(t).map(e=>t[e]),this.failuresByPos=t,this.message=_e(e,t)}V(be).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+me(this._e,2))}},toString:function(){return this.name+": "+this.message}}),V(we).from(be),V(Oe).from(be);var xe=t.reduce((e,t)=>(e[t]=t+"Error",e),{});const je=be;var m=t.reduce((e,r)=>{var n=r+"Error";function t(e,t){this._e=ve(),this.name=n,e?"string"==typeof e?(this.message=e+(t?"\n "+t:""),this.inner=t||null):"object"==typeof e&&(this.message=e.name+" "+e.message,this.inner=e):(this.message=ge[r]||n,this.inner=null)}return V(t).from(je),e[r]=t,e},{}),Ae=(m.Syntax=SyntaxError,m.Type=TypeError,m.Range=RangeError,e.reduce((e,t)=>(e[t+"Error"]=m[t],e),{})),e=t.reduce((e,t)=>(-1===["Syntax","Type","Range"].indexOf(t)&&(e[t+"Error"]=m[t]),e),{});function y(){}function Ee(e){return e}function ke(t,r){return null==t||t===Ee?r:function(e){return r(t(e))}}function Pe(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function $e(i,o){return i===y?o:function(){var e=i.apply(this,arguments),t=(void 0!==e&&(arguments[0]=e),this.onsuccess),r=this.onerror,n=(this.onsuccess=null,this.onerror=null,o.apply(this,arguments));return t&&(this.onsuccess=this.onsuccess?Pe(t,this.onsuccess):t),r&&(this.onerror=this.onerror?Pe(r,this.onerror):r),void 0!==n?n:e}}function Se(r,n){return r===y?n:function(){r.apply(this,arguments);var e=this.onsuccess,t=this.onerror;this.onsuccess=this.onerror=null,n.apply(this,arguments),e&&(this.onsuccess=this.onsuccess?Pe(e,this.onsuccess):e),t&&(this.onerror=this.onerror?Pe(t,this.onerror):t)}}function Me(i,o){return i===y?o:function(e){var t=i.apply(this,arguments),e=(a(e,t),this.onsuccess),r=this.onerror,n=(this.onsuccess=null,this.onerror=null,o.apply(this,arguments));return e&&(this.onsuccess=this.onsuccess?Pe(e,this.onsuccess):e),r&&(this.onerror=this.onerror?Pe(r,this.onerror):r),void 0===t?void 0===n?void 0:n:a(t,n)}}function Te(e,t){return e===y?t:function(){return!1!==t.apply(this,arguments)&&e.apply(this,arguments)}}function Ce(i,o){return i===y?o:function(){var e=i.apply(this,arguments);if(e&&"function"==typeof e.then){for(var t=this,r=arguments.length,n=new Array(r);r--;)n[r]=arguments[r];return e.then(function(){return o.apply(t,n)})}return o.apply(this,arguments)}}e.ModifyError=we,e.DexieError=be,e.BulkError=Oe;var Ne={};const[Ie,Re,Be]="undefined"==typeof Promise?[]:(()=>{var e=Promise.resolve();if("undefined"==typeof crypto||!crypto.subtle)return[e,F(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,F(t),e]})(),De=Re&&Re.then,Le=Ie&&Ie.constructor,Ke=!!Be;var Fe=!1,qe=Be?()=>{Be.then(at)}:u.setImmediate?setImmediate.bind(null,at):u.MutationObserver?()=>{var e=document.createElement("div");new MutationObserver(()=>{at(),e=null}).observe(e,{attributes:!0}),e.setAttribute("i","1")}:()=>{setTimeout(at,0)},Ue=function(e,t){Ye.push([e,t]),Ve&&(qe(),Ve=!1)},ze=!0,Ve=!0,Qe=[],We=[],Ge=null,Je=Ee,Xe={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:kt,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(e=>{try{kt(e[0],e[1])}catch(e){}})}},g=Xe,Ye=[],He=0,Ze=[];function d(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=y,this._lib=!1;var t=this._PSD=g;if(h&&(this._stackHolder=ve(),this._prev=null,this._numPrev=0),"function"!=typeof e){if(e!==Ne)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&rt(this,this._value))}this._state=null,this._value=null,++t.ref,function t(n,e){try{e(r=>{if(null===n._state){if(r===n)throw new TypeError("A promise cannot be resolved with itself.");var e=n._lib&&ut();r&&"function"==typeof r.then?t(n,(e,t)=>{r instanceof d?r._then(e,t):r.then(e,t)}):(n._state=!0,n._value=r,nt(n)),e&&ct()}},rt.bind(null,n))}catch(e){rt(n,e)}}(this,e)}const et={get:function(){var s=g,t=yt;function e(r,n){var i=!s.global&&(s!==g||t!==yt);const o=i&&!v();var e=new d((e,t)=>{it(this,new tt(At(r,s,i,o),At(n,s,i,o),e,t,s))});return h&&st(e,this),e}return e.prototype=Ne,e},set:function(e){o(this,"then",e&&e.prototype===Ne?et:{get:function(){return e},set:et.set})}};function tt(e,t,r,n,i){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=r,this.reject=n,this.psd=i}function rt(t,r){if(We.push(r),null===t._state){var e=t._lib&&ut();if(r=Je(r),t._state=!1,t._value=r,h&&null!==r&&"object"==typeof r&&!r._promise)try{(()=>{var e=W(r,"stack");r._promise=t,o(r,"stack",{get:()=>Fe?e&&(e.get?e.get.apply(r):e.value):t.stack})}).apply(null,void 0)}catch(e){}n=t,Qe.some(e=>e._value===n._value)||Qe.push(n),nt(t),e&&ct()}var n}function nt(e){var t=e._listeners;e._listeners=[];for(var r=0,n=t.length;r<n;++r)it(e,t[r]);var i=e._PSD;--i.ref||i.finalize(),0===He&&(++He,Ue(()=>{0==--He&&lt()},[]))}function it(e,t){if(null!==e._state){var r=e._state?t.onFulfilled:t.onRejected;if(null===r)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++He,Ue(ot,[r,e,t])}else e._listeners.push(t)}function ot(e,t,r){try{var n,i=(Ge=t)._value;t._state?n=e(i):(We.length&&(We=[]),n=e(i),-1===We.indexOf(i)&&function(e){for(var t=Qe.length;t;)if(Qe[--t]._value===e._value)return Qe.splice(t,1)}(t)),r.resolve(n)}catch(e){r.reject(e)}finally{Ge=null,0==--He&&lt(),--r.psd.ref||r.psd.finalize()}}function st(e,t){var r=t?t._numPrev+1:0;r<100&&(e._prev=t,e._numPrev=r)}function at(){ut()&&ct()}function ut(){var e=ze;return Ve=ze=!1,e}function ct(){var e,t,r;do{for(;0<Ye.length;)for(e=Ye,Ye=[],r=e.length,t=0;t<r;++t){var n=e[t];n[0].apply(null,n[1])}}while(0<Ye.length);Ve=ze=!0}function lt(){var e=Qe;Qe=[],e.forEach(e=>{e._PSD.onunhandled.call(null,e._value,e)});for(var t=Ze.slice(0),r=t.length;r;)t[--r]()}function ft(e){return new d(Ne,!1,e)}function O(r,n){var i=g;return function(){var e=ut(),t=g;try{return wt(i,!0),r.apply(this,arguments)}catch(e){n&&n(e)}finally{wt(t,!1),e&&ct()}}}U(d.prototype,{then:et,_then:function(e,t){it(this,new tt(null,null,e,t,g))},catch:function(e){if(1===arguments.length)return this.then(null,e);var t=e,r=arguments[1];return"function"==typeof t?this.then(null,e=>(e instanceof t?r:ft)(e)):this.then(null,e=>(e&&e.name===t?r:ft)(e))},finally:function(t){return this.then(e=>(t(),e),e=>(t(),ft(e)))},stack:{get:function(){if(this._stack)return this._stack;try{Fe=!0;var e=function e(t,r,n){if(r.length===n)return r;var i,o,s,a="";return!1===t._state&&(null!=(s=t._value)?(i=s.name||"Error",o=s.message||s,a=me(s,0)):(i=s,o=""),r.push(i+(o?": "+o:"")+a)),h&&((a=me(t._stackHolder,2))&&-1===r.indexOf(a)&&r.push(a),t._prev&&e(t._prev,r,n)),r}(this,[],20).join("\nFrom previous: ");return null!==this._state&&(this._stack=e),e}finally{Fe=!1}}},timeout:function(n,i){return n<1/0?new d((e,t)=>{var r=setTimeout(()=>t(new m.Timeout(i)),n);this.then(e,t).finally(clearTimeout.bind(null,r))}):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&o(d.prototype,Symbol.toStringTag,"Dexie.Promise"),Xe.env=Ot(),U(d,{all:function(){var o=r.apply(null,arguments).map(bt);return new d(function(r,n){0===o.length&&r([]);var i=o.length;o.forEach((e,t)=>d.resolve(e).then(e=>{o[t]=e,--i||r(o)},n))})},resolve:r=>{if(r instanceof d)return r;if(r&&"function"==typeof r.then)return new d((e,t)=>{r.then(e,t)});var e=new d(Ne,!0,r);return st(e,Ge),e},reject:ft,race:function(){var e=r.apply(null,arguments).map(bt);return new d((t,r)=>{e.map(e=>d.resolve(e).then(t,r))})},PSD:{get:()=>g,set:e=>g=e},totalEchoes:{get:()=>yt},newPSD:mt,usePSD:xt,scheduler:{get:()=>Ue,set:e=>{Ue=e}},rejectionMapper:{get:()=>Je,set:e=>{Je=e}},follow:(n,r)=>new d((e,t)=>mt((e,r)=>{var t=g;t.unhandleds=[],t.onunhandled=r,t.finalize=Pe(function(){var t;t=()=>{0===this.unhandleds.length?e():r(this.unhandleds[0])},Ze.push(function e(){t(),Ze.splice(Ze.indexOf(e),1)}),++He,Ue(()=>{0==--He&&lt()},[])},t.finalize),n()},r,e,t))}),Le&&(Le.allSettled&&o(d,"allSettled",function(){const e=r.apply(null,arguments).map(bt);return new d(r=>{0===e.length&&r([]);let n=e.length;const i=new Array(n);e.forEach((e,t)=>d.resolve(e).then(e=>i[t]={status:"fulfilled",value:e},e=>i[t]={status:"rejected",reason:e}).then(()=>--n||r(i)))})}),Le.any&&"undefined"!=typeof AggregateError&&o(d,"any",function(){const e=r.apply(null,arguments).map(bt);return new d((r,n)=>{0===e.length&&n(new AggregateError([]));let i=e.length;const o=new Array(i);e.forEach((e,t)=>d.resolve(e).then(e=>r(e),e=>{o[t]=e,--i||n(new AggregateError(o))}))})}));const i={awaits:0,echoes:0,id:0};var ht=0,dt=[],pt=0,yt=0,vt=0;function mt(e,t,r,n){var i=g,o=Object.create(i),s=(o.parent=i,o.ref=0,o.global=!1,o.id=++vt,Xe.env),s=(o.env=Ke?{Promise:d,PromiseProp:{value:d,configurable:!0,writable:!0},all:d.all,race:d.race,allSettled:d.allSettled,any:d.any,resolve:d.resolve,reject:d.reject,nthen:Et(s.nthen,o),gthen:Et(s.gthen,o)}:{},t&&a(o,t),++i.ref,o.finalize=function(){--this.parent.ref||this.parent.finalize()},xt(o,e,r,n));return 0===o.ref&&o.finalize(),s}function gt(){return i.id||(i.id=++ht),++i.awaits,i.echoes+=100,i.id}function v(){return!!i.awaits&&(0==--i.awaits&&(i.id=0),i.echoes=100*i.awaits,!0)}function bt(e){return i.echoes&&e&&e.constructor===Le?(gt(),e.then(e=>(v(),e),e=>(v(),x(e)))):e}function _t(){var e=dt[dt.length-1];dt.pop(),wt(e,!1)}function wt(e,t){var r,n=g;(t?!i.echoes||pt++&&e===g:!pt||--pt&&e===g)||jt(t?function(e){++yt,i.echoes&&0!=--i.echoes||(i.echoes=i.id=0),dt.push(g),wt(e,!0)}.bind(null,e):_t),e!==g&&(g=e,n===Xe&&(Xe.env=Ot()),Ke)&&(t=Xe.env.Promise,r=e.env,Re.then=r.nthen,t.prototype.then=r.gthen,(n.global||e.global)&&(Object.defineProperty(u,"Promise",r.PromiseProp),t.all=r.all,t.race=r.race,t.resolve=r.resolve,t.reject=r.reject,r.allSettled&&(t.allSettled=r.allSettled),r.any&&(t.any=r.any)))}function Ot(){var e=u.Promise;return Ke?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(u,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:Re.then,gthen:e.prototype.then}:{}}function xt(e,t,r,n,i){var o=g;try{return wt(e,!0),t(r,n,i)}finally{wt(o,!1)}}function jt(e){De.call(Ie,e)}function At(t,r,n,i){return"function"!=typeof t?t:function(){var e=g;n&&gt(),wt(r,!0);try{return t.apply(this,arguments)}finally{wt(e,!1),i&&jt(v)}}}function Et(r,n){return function(e,t){return r.call(this,At(e,n),At(t,n))}}function kt(e,t){var r;try{r=t.onuncatched(e)}catch(e){}if(!1!==r)try{var n,i={promise:t,reason:e};if(u.document&&document.createEvent?((n=document.createEvent("Event")).initEvent("unhandledrejection",!0,!0),a(n,i)):u.CustomEvent&&a(n=new CustomEvent("unhandledrejection",{detail:i}),i),n&&u.dispatchEvent&&(dispatchEvent(n),!u.PromiseRejectionEvent&&u.onunhandledrejection))try{u.onunhandledrejection(n)}catch(e){}h&&n&&!n.defaultPrevented&&console.warn("Unhandled rejection: "+(e.stack||e))}catch(e){}}-1===(""+De).indexOf("[native code]")&&(gt=v=y);var x=d.reject;const Pt=String.fromCharCode(65535),j="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",$t=[],St="undefined"!=typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),Mt=St,Tt=St,Ct=e=>!/(dexie\.js|dexie\.min\.js)/.test(e);function Nt(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}const It={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Rt(t){return"string"!=typeof t||/\./.test(t)?e=>e:e=>(void 0===e[t]&&t in e&&delete(e=se(e))[t],e)}class Bt{_trans(e,n,t){const r=this._tx||g.trans,i=this.name;function o(e,t,r){if(r.schema[i])return n(r.idbtrans,r);throw new m.NotFound("Table "+i+" not part of transaction")}var s=ut();try{return r&&r.db===this.db?r===g.trans?r._promise(e,o,t):mt(()=>r._promise(e,o,t),{trans:r,transless:g.transless||g}):function e(t,r,n,i){if(t.idbdb&&(t._state.openComplete||g.letThrough||t._vip)){var o=t._createTransaction(r,n,t._dbSchema);try{o.create(),t._state.PR1398_maxLoop=3}catch(o){return o.name===xe.InvalidState&&t.isOpen()&&0<--t._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then(()=>e(t,r,n,i))):x(o)}return o._promise(r,(e,t)=>mt(()=>(g.trans=o,i(e,t,o)))).then(e=>o._completion.then(()=>e))}if(t._state.openComplete)return x(new m.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._options.autoOpen)return x(new m.DatabaseClosed);t.open().catch(y)}return t._state.dbReadyPromise.then(()=>e(t,r,n,i))}(this.db,e,[this.name],o)}finally{s&&ct()}}get(t,e){return t&&t.constructor===Object?this.where(t).first(e):this._trans("readonly",e=>this.core.get({trans:e,key:t}).then(e=>this.hook.reading.fire(e))).then(e)}where(o){if("string"==typeof o)return new this.db.WhereClause(this,o);if(_(o))return new this.db.WhereClause(this,`[${o.join("+")}]`);const r=b(o);if(1===r.length)return this.where(r[0]).equals(o[r[0]]);const e=this.schema.indexes.concat(this.schema.primKey).filter(t=>t.compound&&r.every(e=>0<=t.keyPath.indexOf(e))&&t.keyPath.every(e=>0<=r.indexOf(e)))[0];if(e&&this.db._maxKey!==Pt)return this.where(e.name).equals(e.keyPath.map(e=>o[e]));!e&&h&&console.warn(`The query ${JSON.stringify(o)} on ${this.name} would benefit of a compound index [${r.join("+")}]`);const s=this.schema["idxByName"],n=this.db._deps.indexedDB;function a(e,t){try{return 0===n.cmp(e,t)}catch(e){return!1}}var[t,i]=r.reduce(([e,t],r)=>{const n=s[r],i=o[r];return[e||n,e||!n?Nt(t,n&&n.multi?e=>{const t=c(e,r);return _(t)&&t.some(e=>a(i,e))}:e=>a(i,c(e,r))):t]},[null,null]);return t?this.where(t.name).equals(o[t.keyPath]).filter(i):e?this.filter(i):this.where(r).equals("")}filter(e){return this.toCollection().and(e)}count(e){return this.toCollection().count(e)}offset(e){return this.toCollection().offset(e)}limit(e){return this.toCollection().limit(e)}each(e){return this.toCollection().each(e)}toArray(e){return this.toCollection().toArray(e)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(e){return new this.db.Collection(new this.db.WhereClause(this,_(e)?`[${e.join("+")}]`:e))}reverse(){return this.toCollection().reverse()}mapToClass(n){const{db:e,name:t}=this,i=((this.schema.mappedClass=n).prototype instanceof function(){throw m.Type()}&&(n=class extends n{get db(){return e}table(){return t}}),new Set);for(let e=n.prototype;e;e=F(e))Object.getOwnPropertyNames(e).forEach(e=>i.add(e));var r=e=>{if(!e)return e;const t=Object.create(n.prototype);for(var r in e)if(!i.has(r))try{t[r]=e[r]}catch(e){}return t};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=r,this.hook("reading",r),n}defineClass(){return this.mapToClass(function(e){a(this,e)})}add(t,r){const{auto:e,keyPath:n}=this.schema.primKey;let i=t;return n&&e&&(i=Rt(n)(t)),this._trans("readwrite",e=>this.core.mutate({trans:e,type:"add",keys:null!=r?[r]:null,values:[i]})).then(e=>e.numFailures?d.reject(e.failures[0]):e.lastResult).then(e=>{if(n)try{w(t,n,e)}catch(e){}return e})}update(t,r){if("object"!=typeof t||_(t))return this.where(":id").equals(t).modify(r);var e=c(t,this.schema.primKey.keyPath);if(void 0===e)return x(new m.InvalidArgument("Given object does not contain its primary key"));try{"function"!=typeof r?b(r).forEach(e=>{w(t,e,r[e])}):r(t,{value:t,primKey:e})}catch(t){}return this.where(":id").equals(e).modify(r)}put(t,r){const{auto:e,keyPath:n}=this.schema.primKey;let i=t;return n&&e&&(i=Rt(n)(t)),this._trans("readwrite",e=>this.core.mutate({trans:e,type:"put",values:[i],keys:null!=r?[r]:null})).then(e=>e.numFailures?d.reject(e.failures[0]):e.lastResult).then(e=>{if(n)try{w(t,n,e)}catch(e){}return e})}delete(t){return this._trans("readwrite",e=>this.core.mutate({trans:e,type:"delete",keys:[t]})).then(e=>e.numFailures?d.reject(e.failures[0]):void 0)}clear(){return this._trans("readwrite",e=>this.core.mutate({trans:e,type:"deleteRange",range:It})).then(e=>e.numFailures?d.reject(e.failures[0]):void 0)}bulkGet(t){return this._trans("readonly",e=>this.core.getMany({keys:t,trans:e}).then(e=>e.map(e=>this.hook.reading.fire(e))))}bulkAdd(n,e,t){const o=Array.isArray(e)?e:void 0,s=(t=t||(o?void 0:e))?t.allKeys:void 0;return this._trans("readwrite",e=>{var{auto:t,keyPath:r}=this.schema.primKey;if(r&&o)throw new m.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(o&&o.length!==n.length)throw new m.InvalidArgument("Arguments objects and keys must have the same length");const i=n.length;t=r&&t?n.map(Rt(r)):n;return this.core.mutate({trans:e,type:"add",keys:o,values:t,wantResults:s}).then(({numFailures:e,results:t,lastResult:r,failures:n})=>{if(0===e)return s?t:r;throw new Oe(`${this.name}.bulkAdd(): ${e} of ${i} operations failed`,n)})})}bulkPut(n,e,t){const o=Array.isArray(e)?e:void 0,s=(t=t||(o?void 0:e))?t.allKeys:void 0;return this._trans("readwrite",e=>{var{auto:t,keyPath:r}=this.schema.primKey;if(r&&o)throw new m.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(o&&o.length!==n.length)throw new m.InvalidArgument("Arguments objects and keys must have the same length");const i=n.length;t=r&&t?n.map(Rt(r)):n;return this.core.mutate({trans:e,type:"put",keys:o,values:t,wantResults:s}).then(({numFailures:e,results:t,lastResult:r,failures:n})=>{if(0===e)return s?t:r;throw new Oe(`${this.name}.bulkPut(): ${e} of ${i} operations failed`,n)})})}bulkDelete(t){const n=t.length;return this._trans("readwrite",e=>this.core.mutate({trans:e,type:"delete",keys:t})).then(({numFailures:e,lastResult:t,failures:r})=>{if(0===e)return t;throw new Oe(`${this.name}.bulkDelete(): ${e} of ${n} operations failed`,r)})}}function Dt(i){function t(e,t){if(t){for(var r=arguments.length,n=new Array(r-1);--r;)n[r-1]=arguments[r];return s[e].subscribe.apply(null,n),i}if("string"==typeof e)return s[e]}var s={};t.addEventType=a;for(var e=1,r=arguments.length;e<r;++e)a(arguments[e]);return t;function a(e,r,n){if("object"==typeof e)return i=e,void b(i).forEach(function(e){var t=i[e];if(_(t))a(e,i[e][0],i[e][1]);else{if("asap"!==t)throw new m.InvalidArgument("Invalid event config");var r=a(e,Ee,function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];r.subscribers.forEach(function(e){H(function(){e.apply(null,t)})})})}});r=r||Te;var i,o={subscribers:[],fire:n=n||y,subscribe:function(e){-1===o.subscribers.indexOf(e)&&(o.subscribers.push(e),o.fire=r(o.fire,e))},unsubscribe:function(t){o.subscribers=o.subscribers.filter(function(e){return e!==t}),o.fire=o.subscribers.reduce(r,n)}};return s[e]=t[e]=o}}function Lt(e,t){return V(t).from({prototype:e}),t}function Kt(n){return Lt(Bt.prototype,function(e,t,r){this.db=n,this._tx=r,this.name=e,this.schema=t,this.hook=n._allTables[e]?n._allTables[e].hook:Dt(null,{creating:[$e,y],reading:[ke,Ee],updating:[Me,y],deleting:[Se,y]})})}function Ft(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function qt(e,t){e.filter=Nt(e.filter,t)}function Ut(e,t,r){var n=e.replayFilter;e.replayFilter=n?()=>Nt(n(),t()):t,e.justLimit=r&&!n}function zt(e,t){if(e.isPrimKey)return t.primaryKey;var r=t.getIndexByKeyPath(e.index);if(r)return r;throw new m.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed")}function Vt(e,t,r){var n=zt(e,t.schema);return t.openCursor({trans:r,values:!e.keysOnly,reverse:"prev"===e.dir,unique:!!e.unique,query:{index:n,range:e.range}})}function Qt(e,o,t,r){const s=e.replayFilter?Nt(e.filter,e.replayFilter()):e.filter;if(e.or){const a={},n=(e,t,r)=>{var n,i;s&&!s(t,r,e=>t.stop(e),e=>t.fail(e))||("[object ArrayBuffer]"===(i=""+(n=t.primaryKey))&&(i=""+new Uint8Array(n)),p(a,i)||(a[i]=!0,o(e,t,r)))};return Promise.all([e.or._iterate(n,t),Wt(Vt(e,r,t),e.algorithm,n,!e.keysOnly&&e.valueMapper)])}return Wt(Vt(e,r,t),Nt(e.algorithm,s),o,!e.keysOnly&&e.valueMapper)}function Wt(e,n,i,o){var s=O(o?(e,t,r)=>i(o(e),t,r):i);return e.then(r=>{if(r)return r.start(()=>{var t=()=>r.continue();n&&!n(r,e=>t=e,e=>{r.stop(e),t=y},e=>{r.fail(e),t=y})||s(r.value,r,e=>t=e),t()})})}function A(e,t){try{var r=Gt(e),n=Gt(t);if(r!==n)return"Array"===r?1:"Array"===n?-1:"binary"===r?1:"binary"===n?-1:"string"===r?1:"string"===n?-1:"Date"===r?1:"Date"!==n?NaN:-1;switch(r){case"number":case"Date":case"string":return t<e?1:e<t?-1:0;case"binary":var i=Jt(e),o=Jt(t),s=i.length,a=o.length,u=s<a?s:a;for(let e=0;e<u;++e)if(i[e]!==o[e])return i[e]<o[e]?-1:1;return s===a?0:s<a?-1:1;case"Array":{var c=e;var l=t;const f=c.length,h=l.length,d=f<h?f:h;for(let e=0;e<d;++e){const h=A(c[e],l[e]);if(0!==h)return h}return f===h?0:f<h?-1:1;return}}}catch(e){}return NaN}function Gt(e){var t=typeof e;if("object"!=t)return t;if(ArrayBuffer.isView(e))return"binary";t=ue(e);return"ArrayBuffer"===t?"binary":t}function Jt(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}class Xt{_read(e,t){var r=this._ctx;return r.error?r.table._trans(null,x.bind(null,r.error)):r.table._trans("readonly",e).then(t)}_write(e){var t=this._ctx;return t.error?t.table._trans(null,x.bind(null,t.error)):t.table._trans("readwrite",e,"locked")}_addAlgorithm(e){var t=this._ctx;t.algorithm=Nt(t.algorithm,e)}_iterate(e,t){return Qt(this._ctx,e,t,this._ctx.table.core)}clone(e){var t=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return e&&a(r,e),t._ctx=r,t}raw(){return this._ctx.valueMapper=null,this}each(t){var r=this._ctx;return this._read(e=>Qt(r,t,e,r.table.core))}count(e){return this._read(e=>{const t=this._ctx,r=t.table.core;if(Ft(t,!0))return r.count({trans:e,query:{index:zt(t,r.schema),range:t.range}}).then(e=>Math.min(e,t.limit));var n=0;return Qt(t,()=>(++n,!1),e,r).then(()=>n)}).then(e)}sortBy(e,t){const r=e.split(".").reverse(),n=r[0],i=r.length-1;function o(e,t){return t?o(e[r[t]],t-1):e[n]}var s="next"===this._ctx.dir?1:-1;function a(e,t){e=o(e,i),t=o(t,i);return e<t?-s:t<e?s:0}return this.toArray(function(e){return e.sort(a)}).then(t)}toArray(e){return this._read(e=>{var t=this._ctx;if("next"===t.dir&&Ft(t,!0)&&0<t.limit){const r=t["valueMapper"],n=zt(t,t.table.core.schema);return t.table.core.query({trans:e,limit:t.limit,values:!0,query:{index:n,range:t.range}}).then(({result:e})=>r?e.map(r):e)}{const i=[];return Qt(t,e=>i.push(e),e,t.table.core).then(()=>i)}},e)}offset(t){var e=this._ctx;return t<=0||(e.offset+=t,Ft(e)?Ut(e,()=>{var r=t;return(e,t)=>0===r||(1===r?--r:t(()=>{e.advance(r),r=0}),!1)}):Ut(e,()=>{var e=t;return()=>--e<0})),this}limit(e){return this._ctx.limit=Math.min(this._ctx.limit,e),Ut(this._ctx,()=>{var n=e;return function(e,t,r){return--n<=0&&t(r),0<=n}},!0),this}until(n,i){return qt(this._ctx,function(e,t,r){return!n(e.value)||(t(r),i)}),this}first(e){return this.limit(1).toArray(function(e){return e[0]}).then(e)}last(e){return this.reverse().first(e)}filter(t){var e;return qt(this._ctx,function(e){return t(e.value)}),(e=this._ctx).isMatch=Nt(e.isMatch,t),this}and(e){return this.filter(e)}or(e){return new this.db.WhereClause(this._ctx.table,e,this)}reverse(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(r){var e=this._ctx;return e.keysOnly=!e.isMatch,this.each(function(e,t){r(t.key,t)})}eachUniqueKey(e){return this._ctx.unique="unique",this.eachKey(e)}eachPrimaryKey(r){var e=this._ctx;return e.keysOnly=!e.isMatch,this.each(function(e,t){r(t.primaryKey,t)})}keys(e){var t=this._ctx,r=(t.keysOnly=!t.isMatch,[]);return this.each(function(e,t){r.push(t.key)}).then(function(){return r}).then(e)}primaryKeys(e){var r=this._ctx;if("next"===r.dir&&Ft(r,!0)&&0<r.limit)return this._read(e=>{var t=zt(r,r.table.core.schema);return r.table.core.query({trans:e,values:!1,limit:r.limit,query:{index:t,range:r.range}})}).then(({result:e})=>e).then(e);r.keysOnly=!r.isMatch;var n=[];return this.each(function(e,t){n.push(t.primaryKey)}).then(function(){return n}).then(e)}uniqueKeys(e){return this._ctx.unique="unique",this.keys(e)}firstKey(e){return this.limit(1).keys(function(e){return e[0]}).then(e)}lastKey(e){return this.reverse().firstKey(e)}distinct(){var e=this._ctx,e=e.index&&e.table.schema.idxByName[e.index];if(!e||!e.multi)return this;var r={};return qt(this._ctx,function(e){var e=e.primaryKey.toString(),t=p(r,e);return r[e]=!0,!t}),this}modify(m){var g=this._ctx;return this._write(l=>{var o,s,f;f="function"==typeof m?m:(o=b(m),s=o.length,function(e){for(var t=!1,r=0;r<s;++r){var n=o[r],i=m[n];c(e,n)!==i&&(w(e,n,i),t=!0)}return t});const h=g.table.core,{outbound:d,extractKey:p}=h.schema.primaryKey,y=this.db._options.modifyChunkSize||200,i=[];let a=0;const e=[],v=(e,t)=>{var r,{failures:n,numFailures:t}=t;a+=e-t;for(r of b(n))i.push(n[r])};return this.clone().primaryKeys().then(u=>{const c=s=>{const a=Math.min(y,u.length-s);return h.getMany({trans:l,keys:u.slice(s,s+a),cache:"immutable"}).then(t=>{const r=[],n=[],i=d?[]:null,o=[];for(let e=0;e<a;++e){const g=t[e],l={value:se(g),primKey:u[s+e]};!1!==f.call(l,l.value,l)&&(null==l.value?o.push(u[s+e]):d||0===A(p(g),p(l.value))?(n.push(l.value),d&&i.push(u[s+e])):(o.push(u[s+e]),r.push(l.value)))}const e=Ft(g)&&g.limit===1/0&&("function"!=typeof m||m===Yt)&&{index:g.index,range:g.range};return Promise.resolve(0<r.length&&h.mutate({trans:l,type:"add",values:r}).then(e=>{for(var t in e.failures)o.splice(parseInt(t),1);v(r.length,e)})).then(()=>(0<n.length||e&&"object"==typeof m)&&h.mutate({trans:l,type:"put",keys:i,values:n,criteria:e,changeSpec:"function"!=typeof m&&m}).then(e=>v(n.length,e))).then(()=>(0<o.length||e&&m===Yt)&&h.mutate({trans:l,type:"delete",keys:o,criteria:e}).then(e=>v(o.length,e))).then(()=>u.length>s+a&&c(s+y))})};return c(0).then(()=>{if(0<i.length)throw new we("Error modifying one or more objects",i,a,e);return u.length})})})}delete(){var i=this._ctx,r=i.range;return Ft(i)&&(i.isPrimKey&&!Tt||3===r.type)?this._write(e=>{const t=i.table.core.schema["primaryKey"],n=r;return i.table.core.count({trans:e,query:{index:t,range:n}}).then(r=>i.table.core.mutate({trans:e,type:"deleteRange",range:n}).then(({failures:t,numFailures:e})=>{if(e)throw new we("Could not delete some values",Object.keys(t).map(e=>t[e]),r-e);return r-e}))}):this.modify(Yt)}}const Yt=(e,t)=>t.value=null;function Ht(e,t){return e<t?-1:e===t?0:1}function Zt(e,t){return t<e?-1:e===t?0:1}function E(e,t,r){e=e instanceof ir?new e.Collection(e):e;return e._ctx.error=new(r||TypeError)(t),e}function er(e){return new e.Collection(e,()=>nr("")).limit(0)}function tr(e,u,r,n){var i,c,l,f,h,d,p,y=r.length;if(!r.every(e=>"string"==typeof e))return E(e,"String expected.");function t(e){i="next"===e?e=>e.toUpperCase():e=>e.toLowerCase(),c="next"===e?e=>e.toLowerCase():e=>e.toUpperCase(),l="next"===e?Ht:Zt;var t=r.map(function(e){return{lower:c(e),upper:i(e)}}).sort(function(e,t){return l(e.lower,t.lower)});f=t.map(function(e){return e.upper}),h=t.map(function(e){return e.lower}),p="next"===(d=e)?"":n}t("next");var e=new e.Collection(e,()=>rr(f[0],h[y-1]+n)),v=(e._ondirectionchange=function(e){t(e)},0);return e._addAlgorithm(function(e,t,r){var n=e.key;if("string"!=typeof n)return!1;var i=c(n);if(u(i,h,v))return!0;for(var o=null,s=v;s<y;++s){var a=function(e,t,r,n,i,o){for(var s=Math.min(e.length,n.length),a=-1,u=0;u<s;++u){var c=t[u];if(c!==n[u])return i(e[u],r[u])<0?e.substr(0,u)+r[u]+r.substr(u+1):i(e[u],n[u])<0?e.substr(0,u)+n[u]+r.substr(u+1):0<=a?e.substr(0,a)+t[a]+r.substr(a+1):null;i(e[u],c)<0&&(a=u)}return s<n.length&&"next"===o?e+r.substr(e.length):s<e.length&&"prev"===o?e.substr(0,r.length):a<0?null:e.substr(0,a)+n[a]+r.substr(a+1)}(n,i,f[s],h[s],l,d);null===a&&null===o?v=s+1:(null===o||0<l(o,a))&&(o=a)}return t(null!==o?function(){e.continue(o+p)}:r),!1}),e}function rr(e,t,r,n){return{type:2,lower:e,upper:t,lowerOpen:r,upperOpen:n}}function nr(e){return{type:1,lower:e,upper:e}}class ir{get Collection(){return this._ctx.table.db.Collection}between(e,t,r,n){r=!1!==r,n=!0===n;try{return 0<this._cmp(e,t)||0===this._cmp(e,t)&&(r||n)&&(!r||!n)?er(this):new this.Collection(this,()=>rr(e,t,!r,!n))}catch(e){return E(this,j)}}equals(e){return null==e?E(this,j):new this.Collection(this,()=>nr(e))}above(e){return null==e?E(this,j):new this.Collection(this,()=>rr(e,void 0,!0))}aboveOrEqual(e){return null==e?E(this,j):new this.Collection(this,()=>rr(e,void 0,!1))}below(e){return null==e?E(this,j):new this.Collection(this,()=>rr(void 0,e,!1,!0))}belowOrEqual(e){return null==e?E(this,j):new this.Collection(this,()=>rr(void 0,e))}startsWith(e){return"string"!=typeof e?E(this,"String expected."):this.between(e,e+Pt,!0,!0)}startsWithIgnoreCase(e){return""===e?this.startsWith(e):tr(this,(e,t)=>0===e.indexOf(t[0]),[e],Pt)}equalsIgnoreCase(e){return tr(this,(e,t)=>e===t[0],[e],"")}anyOfIgnoreCase(){var e=r.apply(fe,arguments);return 0===e.length?er(this):tr(this,(e,t)=>-1!==t.indexOf(e),e,"")}startsWithAnyOfIgnoreCase(){var e=r.apply(fe,arguments);return 0===e.length?er(this):tr(this,(t,e)=>e.some(e=>0===t.indexOf(e)),e,Pt)}anyOf(){const i=r.apply(fe,arguments);let o=this._cmp;try{i.sort(o)}catch(i){return E(this,j)}if(0===i.length)return er(this);const e=new this.Collection(this,()=>rr(i[0],i[i.length-1]));e._ondirectionchange=e=>{o="next"===e?this._ascending:this._descending,i.sort(o)};let s=0;return e._addAlgorithm((e,t,r)=>{for(var n=e.key;0<o(n,i[s]);)if(++s===i.length)return t(r),!1;return 0===o(n,i[s])||(t(()=>{e.continue(i[s])}),!1)}),e}notEqual(e){return this.inAnyRange([[-1/0,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const e=r.apply(fe,arguments);if(0===e.length)return new this.Collection(this);try{e.sort(this._ascending)}catch(e){return E(this,j)}const t=e.reduce((e,t)=>e?e.concat([[e[e.length-1][1],t]]):[[-1/0,t]],null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})}inAnyRange(e,t){const i=this._cmp,o=this._ascending,r=this._descending,s=this._min,a=this._max;if(0===e.length)return er(this);if(!e.every(e=>void 0!==e[0]&&void 0!==e[1]&&o(e[0],e[1])<=0))return E(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",m.InvalidArgument);const n=!t||!1!==t.includeLowers,u=t&&!0===t.includeUppers;let c,l=o;function f(e,t){return l(e[0],t[0])}try{(c=e.reduce(function(e,t){let r=0,n=e.length;for(;r<n;++r){const n=e[r];if(i(t[0],n[1])<0&&0<i(t[1],n[0])){n[0]=s(n[0],t[0]),n[1]=a(n[1],t[1]);break}}return r===n&&e.push(t),e},[])).sort(f)}catch(e){return E(this,j)}let h=0;const d=u?e=>0<o(e,c[h][1]):e=>0<=o(e,c[h][1]),p=n?e=>0<r(e,c[h][0]):e=>0<=r(e,c[h][0]);let y=d;const v=new this.Collection(this,()=>rr(c[0][0],c[c.length-1][1],!n,!u));return v._ondirectionchange=e=>{l="next"===e?(y=d,o):(y=p,r),c.sort(f)},v._addAlgorithm((e,t,r)=>{for(var n,i=e.key;y(i);)if(++h===c.length)return t(r),!1;return n=i,!(d(n)||p(n))||(0!==this._cmp(i,c[h][1])&&0!==this._cmp(i,c[h][0])&&t(()=>{l===o?e.continue(c[h][0]):e.continue(c[h][1])}),!1)}),v}startsWithAnyOf(){const e=r.apply(fe,arguments);return e.every(e=>"string"==typeof e)?0===e.length?er(this):this.inAnyRange(e.map(e=>[e,e+Pt])):E(this,"startsWithAnyOf() only works with strings")}}function k(t){return O(function(e){return or(e),t(e.target.error),!1})}function or(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}const sr=Dt(null,"storagemutated");class ar{_lock(){return Y(!g.global),++this._reculock,1!==this._reculock||g.global||(g.lockOwnerFor=this),this}_unlock(){if(Y(!g.global),0==--this._reculock)for(g.global||(g.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var e=this._blockedFuncs.shift();try{xt(e[1],e[0])}catch(e){}}return this}_locked(){return this._reculock&&g.lockOwnerFor!==this}create(t){if(!this.mode)return this;const e=this.db.idbdb,r=this.db._state.dbOpenError;if(Y(!this.idbtrans),!t&&!e)switch(r&&r.name){case"DatabaseClosedError":throw new m.DatabaseClosed(r);case"MissingAPIError":throw new m.MissingAPI(r.message,r);default:throw new m.OpenFailed(r)}if(this.active)return Y(null===this._completion._state),(t=this.idbtrans=t||(this.db.core||e).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=O(e=>{or(e),this._reject(t.error)}),t.onabort=O(e=>{or(e),this.active&&this._reject(new m.Abort(t.error)),this.active=!1,this.on("abort").fire(e)}),t.oncomplete=O(()=>{this.active=!1,this._resolve(),"mutatedParts"in t&&sr.storagemutated.fire(t.mutatedParts)}),this;throw new m.TransactionInactive}_promise(r,n,i){if("readwrite"===r&&"readwrite"!==this.mode)return x(new m.ReadOnly("Transaction is readonly"));if(!this.active)return x(new m.TransactionInactive);if(this._locked())return new d((e,t)=>{this._blockedFuncs.push([()=>{this._promise(r,n,i).then(e,t)},g])});if(i)return mt(()=>{var e=new d((e,t)=>{this._lock();const r=n(e,t,this);r&&r.then&&r.then(e,t)});return e.finally(()=>this._unlock()),e._lib=!0,e});var e=new d((e,t)=>{var r=n(e,t,this);r&&r.then&&r.then(e,t)});return e._lib=!0,e}_root(){return this.parent?this.parent._root():this}waitFor(e){var t,n=this._root();const i=d.resolve(e);n._waitingFor?n._waitingFor=n._waitingFor.then(()=>i):(n._waitingFor=i,n._waitingQueue=[],t=n.idbtrans.objectStore(n.storeNames[0]),function e(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(t.get(-1/0).onsuccess=e)}());var o=n._waitingFor;return new d((t,r)=>{i.then(e=>n._waitingQueue.push(O(t.bind(null,e))),e=>n._waitingQueue.push(O(r.bind(null,e)))).finally(()=>{n._waitingFor===o&&(n._waitingFor=null)})})}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new m.Abort))}table(e){const t=this._memoizedTables||(this._memoizedTables={});if(p(t,e))return t[e];var r=this.schema[e];if(!r)throw new m.NotFound("Table "+e+" not part of transaction");const n=new this.db.Table(e,r,this);return n.core=this.db.core.table(e),t[e]=n}}function ur(e,t,r,n,i,o,s){return{name:e,keyPath:t,unique:r,multi:n,auto:i,compound:o,src:(r&&!s?"&":"")+(n?"*":"")+(i?"++":"")+cr(t)}}function cr(e){return"string"==typeof e?e:e?"["+[].join.call(e,"+")+"]":""}function lr(e,t,r){return{name:e,primKey:t,indexes:r,mappedClass:null,idxByName:Z(r,e=>[e.name,e])}}let fr=e=>{try{return e.only([[]]),fr=()=>[[]],[[]]}catch(e){return fr=()=>Pt,Pt}};function hr(t){return null==t?()=>{}:"string"==typeof t?1===(r=t).split(".").length?e=>e[r]:e=>c(e,r):e=>c(e,t);var r}function dr(e){return[].slice.call(e)}let pr=0;function yr(e){return null==e?":id":"string"==typeof e?e:`[${e.join("+")}]`}function vr(e,i,t){function g(e){if(3===e.type)return null;if(4===e.type)throw new Error("Cannot convert never type to IDBKeyRange");var{lower:e,upper:t,lowerOpen:r,upperOpen:n}=e;return void 0===e?void 0===t?null:i.upperBound(t,!!n):void 0===t?i.lowerBound(e,!!r):i.bound(e,t,!!r,!!n)}const{schema:r,hasGetAll:n}=function(e,t){const r=dr(e.objectStoreNames);return{schema:{name:e.name,tables:r.map(e=>t.objectStore(e)).map(t=>{const{keyPath:e,autoIncrement:r}=t,n=_(e),i=null==e,o={},s={name:t.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:i,compound:n,keyPath:e,autoIncrement:r,unique:!0,extractKey:hr(e)},indexes:dr(t.indexNames).map(e=>t.index(e)).map(e=>{var{name:e,unique:t,multiEntry:r,keyPath:n}=e,e={name:e,compound:_(n),keyPath:n,unique:t,multiEntry:r,extractKey:hr(n)};return o[yr(n)]=e}),getIndexByKeyPath:e=>o[yr(e)]};return o[":id"]=s.primaryKey,null!=e&&(o[yr(e)]=s.primaryKey),s})},hasGetAll:0<r.length&&"getAll"in t.objectStore(r[0])&&!("undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(e,t),o=r.tables.map(e=>{{const m=e.name;return{name:m,schema:e,mutate:function({trans:h,type:d,keys:p,values:y,range:v}){return new Promise((t,e)=>{t=O(t);const r=h.objectStore(m),n=null==r.keyPath,i="put"===d||"add"===d;if(!i&&"delete"!==d&&"deleteRange"!==d)throw new Error("Invalid operation type: "+d);var o=(p||y||{length:1})["length"];if(p&&y&&p.length!==y.length)throw new Error("Given keys array must have same length as given values array.");if(0===o)return t({numFailures:0,failures:{},results:[],lastResult:void 0});let s;const a=[],u=[];let c=0;const l=e=>{++c,or(e)};if("deleteRange"===d){if(4===v.type)return t({numFailures:c,failures:u,results:[],lastResult:void 0});3===v.type?a.push(s=r.clear()):a.push(s=r.delete(g(v)))}else{const[h,m]=i?n?[y,p]:[y,null]:[p,null];if(i)for(let e=0;e<o;++e)a.push(s=m&&void 0!==m[e]?r[d](h[e],m[e]):r[d](h[e])),s.onerror=l;else for(let e=0;e<o;++e)a.push(s=r[d](h[e])),s.onerror=l}const f=e=>{e=e.target.result;a.forEach((e,t)=>null!=e.error&&(u[t]=e.error)),t({numFailures:c,failures:u,results:"delete"===d?p:a.map(e=>e.result),lastResult:e})};s.onerror=e=>{l(e),f(e)},s.onsuccess=f})},getMany:({trans:l,keys:f})=>new Promise((t,e)=>{t=O(t);const r=l.objectStore(m),n=f.length,i=new Array(n);let o,s=0,a=0;var u=e=>{e=e.target;i[e._pos]=e.result,++a===s&&t(i)},c=k(e);for(let e=0;e<n;++e)null!=f[e]&&((o=r.get(f[e]))._pos=e,o.onsuccess=u,o.onerror=c,++s);0===s&&t(i)}),get:({trans:n,key:i})=>new Promise((t,e)=>{t=O(t);const r=n.objectStore(m).get(i);r.onsuccess=e=>t(e.target.result),r.onerror=k(e)}),query:(d=n,h=>new Promise((n,e)=>{n=O(n);const{trans:t,values:i,limit:o,query:r}=h,s=o===1/0?void 0:o,{index:a,range:u}=r,c=t.objectStore(m),l=a.isPrimaryKey?c:c.index(a.name),f=g(u);if(0===o)return n({result:[]});if(d){const d=i?l.getAll(f,s):l.getAllKeys(f,s);d.onsuccess=e=>n({result:e.target.result}),d.onerror=k(e)}else{let r=0;const m=!i&&"openKeyCursor"in l?l.openKeyCursor(f):l.openCursor(f),h=[];m.onsuccess=e=>{const t=m.result;return t?(h.push(i?t.value:t.primaryKey),++r===o?n({result:h}):void t.continue()):n({result:h})},m.onerror=k(e)}})),openCursor:function({trans:c,values:a,query:l,reverse:f,unique:h}){return new Promise((t,r)=>{t=O(t);const{index:e,range:n}=l,i=c.objectStore(m),o=e.isPrimaryKey?i:i.index(e.name),s=f?h?"prevunique":"prev":h?"nextunique":"next",u=!a&&"openKeyCursor"in o?o.openKeyCursor(g(n),s):o.openCursor(g(n),s);u.onerror=k(r),u.onsuccess=O(e=>{const i=u.result;if(i){i.___id=++pr,i.done=!1;const o=i.continue.bind(i);let n=i.continuePrimaryKey;n=n&&n.bind(i);const s=i.advance.bind(i),a=()=>{throw new Error("Cursor not stopped")};i.trans=c,i.stop=i.continue=i.continuePrimaryKey=i.advance=()=>{throw new Error("Cursor not started")},i.fail=O(r),i.next=function(){let e=1;return this.start(()=>e--?this.continue():this.stop()).then(()=>this)},i.start=e=>{const t=new Promise((t,e)=>{t=O(t),u.onerror=k(e),i.fail=e,i.stop=e=>{i.stop=i.continue=i.continuePrimaryKey=i.advance=a,t(e)}}),r=()=>{if(u.result)try{e()}catch(e){i.fail(e)}else i.done=!0,i.start=()=>{throw new Error("Cursor behind last entry")},i.stop()};return u.onsuccess=O(e=>{(u.onsuccess=r)()}),i.continue=o,i.continuePrimaryKey=n,i.advance=s,r(),t},t(i)}else t(null)},r)})},count({query:e,trans:s}){const{index:a,range:u}=e;return new Promise((t,e)=>{const r=s.objectStore(m),n=a.isPrimaryKey?r:r.index(a.name),i=g(u),o=i?n.count(i):n.count();o.onsuccess=O(e=>t(e.target.result)),o.onerror=k(e)})}};var d}}),s={};return o.forEach(e=>s[e.name]=e),{stack:"dbcore",transaction:e.transaction.bind(e),table(e){if(s[e])return s[e];throw new Error(`Table '${e}' not found`)},MIN_KEY:-1/0,MAX_KEY:fr(i),schema:r}}function mr({_novip:r},e){var t,n=e.db,i=([n,e,i,t]=[r._middlewares,n,r._deps["IDBKeyRange"],e],e=vr(e,i,t),{dbcore:n.dbcore.reduce((e,{create:t})=>({...e,...t(e)}),e)});r.core=i.dbcore,r.tables.forEach(e=>{const t=e.name;r.core.schema.tables.some(e=>e.name===t)&&(e.core=r.core.table(t),r[t]instanceof r.Table&&(r[t].core=r.vip[t].core=e.core))})}function gr(e,t,i){t.forEach(r=>{const n=i[r];e.forEach(e=>{var t=W(e,r);(!t||"value"in t&&(void 0===t.value||t.value instanceof Bt))&&(e instanceof ar?o(e,r,{get(){return this.table(r)},set(e){z(this,r,{value:e,writable:!0,configurable:!0,enumerable:!0})}}):e instanceof Vr&&(e._allTables[r]=e[r]=new e.Table(r,n)))})})}function br(e){e.forEach(e=>{(e instanceof Vr?[e,e._allTables]:[e]).forEach(e=>{for(var t in e)e[t]instanceof Bt&&delete e[t]})})}function _r(e,t){return e._cfg.version-t._cfg.version}function wr(e,t,r,n){const i=e._dbSchema,o=e._createTransaction("readwrite",e._storeNames,i),s=(o.create(r),o._completion.catch(n),o._reject.bind(o)),a=g.transless||g;mt(()=>{g.trans=o,g.transless=a,0===t?(b(i).forEach(e=>{xr(r,e,i[e].primKey,i[e].indexes)}),mr(e,r),d.follow(()=>e.on.populate.fire(o)).catch(s)):function({_novip:u},t,c,l){const r=[],e=u._versions;let f=u._dbSchema=Ar(0,u.idbdb,l),h=!1;return e.filter(e=>e._cfg.version>=t).forEach(a=>{r.push(()=>{const n=f,e=a._cfg.dbschema,i=(Er(u,n,l),Er(u,e,l),f=u._dbSchema=e,Or(n,e)),o=(i.add.forEach(e=>{xr(l,e[0],e[1].primKey,e[1].indexes)}),i.change.forEach(e=>{if(e.recreate)throw new m.Upgrade("Not yet support for changing primary key");{const t=l.objectStore(e.name);e.add.forEach(e=>jr(t,e)),e.change.forEach(e=>{t.deleteIndex(e.name),jr(t,e)}),e.del.forEach(e=>t.deleteIndex(e))}}),a._cfg.contentUpgrade);if(o&&a._cfg.version>t){mr(u,l),c._memoizedTables={},h=!0;let t=ee(e);i.del.forEach(e=>{t[e]=n[e]}),br([u.Transaction.prototype]),gr([u.Transaction.prototype],b(t),t),c.schema=t;const a=he(o);let r;a&&gt();const s=d.follow(()=>{var e;(r=o(c))&&a&&(e=v.bind(null,null),r.then(e,e))});return r&&"function"==typeof r.then?d.resolve(r):s.then(()=>r)}}),r.push(e=>{var t,r;h&&Mt||(t=a._cfg.dbschema,r=e,[].slice.call(r.db.objectStoreNames).forEach(e=>null==t[e]&&r.db.deleteObjectStore(e))),br([u.Transaction.prototype]),gr([u.Transaction.prototype],u._storeNames,u._dbSchema),c.schema=u._dbSchema})}),function e(){return r.length?d.resolve(r.shift()(c.idbtrans)).then(e):d.resolve()}().then(()=>{var t,r=l;b(t=f).forEach(e=>{r.db.objectStoreNames.contains(e)||xr(r,e,t[e].primKey,t[e].indexes)})})}(e,t,o,r).catch(s)})}function Or(t,r){const n={del:[],add:[],change:[]};let i;for(i in t)r[i]||n.del.push(i);for(i in r){var o=t[i],s=r[i];if(o){const t={name:i,def:s,recreate:!1,del:[],add:[],change:[]};if(""+(o.primKey.keyPath||"")!=""+(s.primKey.keyPath||"")||o.primKey.auto!==s.primKey.auto&&!St)t.recreate=!0,n.change.push(t);else{const r=o.idxByName,i=s.idxByName;let e;for(e in r)i[e]||t.del.push(e);for(e in i){const n=r[e],a=i[e];n?n.src!==a.src&&t.change.push(a):t.add.push(a)}(0<t.del.length||0<t.add.length||0<t.change.length)&&n.change.push(t)}}else n.add.push([i,s])}return n}function xr(e,t,r,n){const i=e.db.createObjectStore(t,r.keyPath?{keyPath:r.keyPath,autoIncrement:r.auto}:{autoIncrement:r.auto});n.forEach(e=>jr(i,e)),i}function jr(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function Ar(e,t,s){const a={};return J(t.objectStoreNames,0).forEach(e=>{const t=s.objectStore(e);let r=t.keyPath;const n=ur(cr(r),r||"",!1,!1,!!t.autoIncrement,r&&"string"!=typeof r,!0),i=[];for(let e=0;e<t.indexNames.length;++e){const s=t.index(t.indexNames[e]);r=s.keyPath;var o=ur(s.name,r,!!s.unique,!!s.multiEntry,!1,r&&"string"!=typeof r,!1);i.push(o)}a[e]=lr(e,n,i)}),a}function Er({_novip:t},r,n){const i=n.db.objectStoreNames;for(let e=0;e<i.length;++e){const o=i[e],s=n.objectStore(o);t._hasGetAll="getAll"in s;for(let e=0;e<s.indexNames.length;++e){const n=s.indexNames[e],i=s.index(n).keyPath,a="string"==typeof i?i:"["+J(i).join("+")+"]";if(r[o]){const t=r[o].idxByName[a];t&&(t.name=n,delete r[o].idxByName[a],r[o].idxByName[n]=t)}}}"undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&u.WorkerGlobalScope&&u instanceof u.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(t._hasGetAll=!1)}class kr{_parseStoresSpec(n,i){b(n).forEach(e=>{if(null!==n[e]){var t=n[e].split(",").map((e,t)=>{const r=(e=e.trim()).replace(/([&*]|\+\+)/g,""),n=/^\[/.test(r)?r.match(/^\[(.*)\]$/)[1].split("+"):r;return ur(r,n||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),_(n),0===t)}),r=t.shift();if(r.multi)throw new m.Schema("Primary key cannot be multi-valued");t.forEach(e=>{if(e.auto)throw new m.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new m.Schema("Index must have a name and cannot be an empty string")}),i[e]=lr(e,r,t)}})}stores(e){const t=this.db._novip,r=(this._cfg.storesSource=this._cfg.storesSource?a(this._cfg.storesSource,e):e,t._versions),n={};let i={};return r.forEach(e=>{a(n,e._cfg.storesSource),i=e._cfg.dbschema={},e._parseStoresSpec(n,i)}),t._dbSchema=i,br([t,t.vip,t.Transaction.prototype]),gr([t,t.vip,t.Transaction.prototype],b(i),i),t._storeNames=b(i),this}upgrade(e){return this._cfg.contentUpgrade=Ce(this._cfg.contentUpgrade||y,e),this}}function Pr(e,t){let r=e._dbNamesDB;return r||(r=e._dbNamesDB=new Vr("__dbnames",{addons:[],indexedDB:e,IDBKeyRange:t})).version(1).stores({dbnames:"name"}),r.table("dbnames")}function $r(e){return e&&"function"==typeof e.databases}function Sr(e){return mt(function(){return g.letThrough=!0,e()})}function Mr(t){var e=e=>t.next(e),n=r(e),i=r(e=>t.throw(e));function r(r){return e=>{var e=r(e),t=e.value;return e.done?t:t&&"function"==typeof t.then?t.then(n,i):_(t)?Promise.all(t).then(n,i):n(t)}}return r(e)()}function Tr(e,t,r){const n=_(e)?e.slice():[e];for(let e=0;e<r;++e)n.push(t);return n}const Cr={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(s){return{...s,table(e){const r=s.table(e),t=r["schema"],u={},c=[];function l(e,t,r){const n=yr(e),i=u[n]=u[n]||[],o=null==e?0:"string"==typeof e?1:e.length,s=0<t,a={...r,isVirtual:s,keyTail:t,keyLength:o,extractKey:hr(e),unique:!s&&r.unique};return i.push(a),a.isPrimaryKey||c.push(a),1<o&&l(2===o?e[0]:e.slice(0,o-1),t+1,r),i.sort((e,t)=>e.keyTail-t.keyTail),a}e=l(t.primaryKey.keyPath,0,t.primaryKey);u[":id"]=[e];for(const s of t.indexes)l(s.keyPath,0,s);function o(e){var t,r=e.query.index;return r.isVirtual?{...e,query:{index:r,range:(t=e.query.range,r=r.keyTail,{type:1===t.type?2:t.type,lower:Tr(t.lower,t.lowerOpen?s.MAX_KEY:s.MIN_KEY,r),lowerOpen:!0,upper:Tr(t.upper,t.upperOpen?s.MIN_KEY:s.MAX_KEY,r),upperOpen:!0})}}:e}return{...r,schema:{...t,primaryKey:e,indexes:c,getIndexByKeyPath:function(e){e=u[yr(e)];return e&&e[0]}},count:e=>r.count(o(e)),query:e=>r.query(o(e)),openCursor(t){const{keyTail:n,isVirtual:e,keyLength:i}=t.query.index;return e?r.openCursor(o(t)).then(e=>e&&function(r){return Object.create(r,{continue:{value:function(e){null!=e?r.continue(Tr(e,t.reverse?s.MAX_KEY:s.MIN_KEY,n)):t.unique?r.continue(r.key.slice(0,i).concat(t.reverse?s.MIN_KEY:s.MAX_KEY,n)):r.continue()}},continuePrimaryKey:{value(e,t){r.continuePrimaryKey(Tr(e,s.MAX_KEY,n),t)}},primaryKey:{get:()=>r.primaryKey},key:{get(){const e=r.key;return 1===i?e[0]:e.slice(0,i)}},value:{get:()=>r.value}})}(e)):r.openCursor(t)}}}}}};function Nr(n,i,o,s){return o=o||{},s=s||"",b(n).forEach(e=>{if(p(i,e)){var t=n[e],r=i[e];if("object"==typeof t&&"object"==typeof r&&t&&r){const n=ue(t);n!==ue(r)?o[s+e]=i[e]:"Object"===n?Nr(t,r,o,s+e+"."):t!==r&&(o[s+e]=i[e])}else t!==r&&(o[s+e]=i[e])}else o[s+e]=void 0}),b(i).forEach(e=>{p(n,e)||(o[s+e]=i[e])}),o}const Ir={stack:"dbcore",name:"HooksMiddleware",level:2,create:t=>({...t,table(r){const h=t.table(r),d=h.schema["primaryKey"],e={...h,mutate(e){const t=g.trans,{deleting:c,creating:l,updating:f}=t.table(r).hook;switch(e.type){case"add":if(l.fire===y)break;return t._promise("readwrite",()=>s(e),!0);case"put":if(l.fire===y&&f.fire===y)break;return t._promise("readwrite",()=>s(e),!0);case"delete":if(c.fire===y)break;return t._promise("readwrite",()=>s(e),!0);case"deleteRange":if(c.fire===y)break;return t._promise("readwrite",()=>function r(n,i,o){return h.query({trans:n,values:!1,query:{index:d,range:i},limit:o}).then(({result:t})=>s({type:"delete",keys:t,trans:n}).then(e=>0<e.numFailures?Promise.reject(e.failures[0]):t.length<o?{failures:[],numFailures:0,lastResult:void 0}:r(n,{...i,lower:t[t.length-1],lowerOpen:!0},o)))}(e.trans,e.range,1e4),!0)}return h.mutate(e);function s(a){const i=g.trans,u=a.keys||(t=d,"delete"===(e=a).type?e.keys:e.keys||e.values.map(t.extractKey));var e,t,r;if(u)return"delete"!==(a="add"===a.type||"put"===a.type?{...a,keys:u}:{...a}).type&&(a.values=[...a.values]),a.keys&&(a.keys=[...a.keys]),e=h,t=a,r=u,("add"===t.type?Promise.resolve([]):e.getMany({trans:t.trans,keys:r,cache:"immutable"})).then(o=>{const s=u.map((e,t)=>{var r=o[t],n={onerror:null,onsuccess:null};if("delete"===a.type)c.fire.call(n,e,r,i);else if("add"===a.type||void 0===r){const c=l.fire.call(n,e,a.values[t],i);null==e&&null!=c&&(e=c,a.keys[t]=e,d.outbound||w(a.values[t],d.keyPath,e))}else{const d=Nr(r,a.values[t]),c=f.fire.call(n,d,e,r,i);if(c){const i=a.values[t];Object.keys(c).forEach(e=>{p(i,e)?i[e]=c[e]:w(i,e,c[e])})}}return n});return h.mutate(a).then(({failures:t,results:r,numFailures:e,lastResult:n})=>{for(let e=0;e<u.length;++e){const n=(r||u)[e],i=s[e];null==n?i.onerror&&i.onerror(t[e]):i.onsuccess&&i.onsuccess("put"===a.type&&o[e]?a.values[e]:n)}return{failures:t,results:r,numFailures:e,lastResult:n}}).catch(t=>(s.forEach(e=>e.onerror&&e.onerror(t)),Promise.reject(t)))});throw new Error("Keys missing")}}};return e}})};function Rr(r,n,i){try{if(!n)return null;if(n.keys.length<r.length)return null;const o=[];for(let e=0,t=0;e<n.keys.length&&t<r.length;++e)0===A(n.keys[e],r[t])&&(o.push(i?se(n.values[e]):n.values[e]),++t);return o.length===r.length?o:null}catch(r){return null}}const Br={stack:"dbcore",level:-1,create:t=>({table:e=>{const r=t.table(e);return{...r,getMany:t=>{if(!t.cache)return r.getMany(t);var e=Rr(t.keys,t.trans._cache,"clone"===t.cache);return e?d.resolve(e):r.getMany(t).then(e=>(t.trans._cache={keys:t.keys,values:"clone"===t.cache?se(e):e},e))},mutate:e=>("add"!==e.type&&(e.trans._cache=null),r.mutate(e))}}})};function Dr(e){return!("from"in e)}const P=function(e,t){if(!this){const t=new P;return e&&"d"in e&&a(t,e),t}a(this,arguments.length?{d:1,from:e,to:1<arguments.length?t:e}:{d:0})};function Lr(e,t,r){var n=A(t,r);if(!isNaN(n)){if(0<n)throw RangeError();if(Dr(e))return a(e,{from:t,to:r,d:1});var n=e.l,i=e.r;if(A(r,e.from)<0)return n?Lr(n,t,r):e.l={from:t,to:r,d:1,l:null,r:null},qr(e);if(0<A(t,e.to))return i?Lr(i,t,r):e.r={from:t,to:r,d:1,l:null,r:null},qr(e);A(t,e.from)<0&&(e.from=t,e.l=null,e.d=i?i.d+1:1),0<A(r,e.to)&&(e.to=r,e.r=null,e.d=e.l?e.l.d+1:1);t=!e.r;n&&!e.l&&Kr(e,n),i&&t&&Kr(e,i)}}function Kr(e,t){Dr(t)||function e(t,{from:r,to:n,l:i,r:o}){Lr(t,r,n),i&&e(t,i),o&&e(t,o)}(e,t)}function Fr(e){let r=Dr(e)?null:{s:0,n:e};return{next(e){for(var t=0<arguments.length;r;)switch(r.s){case 0:if(r.s=1,t)for(;r.n.l&&A(e,r.n.from)<0;)r={up:r,n:r.n.l,s:1};else for(;r.n.l;)r={up:r,n:r.n.l,s:1};case 1:if(r.s=2,!t||A(e,r.n.to)<=0)return{value:r.n,done:!1};case 2:if(r.n.r){r.s=3,r={up:r,n:r.n.r,s:0};continue}case 3:r=r.up}return{done:!0}}}}function qr(e){var t,r;const n=((null==(t=e.r)?void 0:t.d)||0)-((null==(r=e.l)?void 0:r.d)||0),i=1<n?"r":n<-1?"l":"";if(i){const t="r"==i?"l":"r",r={...e},n=e[i];e.from=n.from,e.to=n.to,e[i]=n[i],r[i]=n[t],(e[t]=r).d=Ur(r)}e.d=Ur(e)}function Ur({r:e,l:t}){return(e?t?Math.max(e.d,t.d):e.d:t?t.d:0)+1}U(P.prototype,{add(e){return Kr(this,e),this},addKey(e){return Lr(this,e,e),this},addKeys(e){return e.forEach(e=>Lr(this,e,e)),this},[ce](){return Fr(this)}});const zr={stack:"dbcore",level:0,create:n=>{const v=n.schema.name,m=new P(n.MIN_KEY,n.MAX_KEY);return{...n,table:d=>{const p=n.table(d),y=p["schema"],t=y["primaryKey"],{extractKey:u,outbound:c}=t,e={...p,mutate:e=>{const t=e.trans,r=t.mutatedParts||(t.mutatedParts={}),n=e=>{e=`idb://${v}/${d}/`+e;return r[e]||(r[e]=new P)},i=n(""),u=n(":dels"),c=e["type"];let[l,f]="deleteRange"===e.type?[e.range]:"delete"===e.type?[e.keys]:e.values.length<50?[[],e.values]:[];const h=e.trans._cache;return p.mutate(e).then(e=>{if(_(l)){"delete"!==c&&(l=e.results),i.addKeys(l);var t=Rr(l,h);t||"add"===c||u.addKeys(l),(t||f)&&(o=n,r=y,s=t,a=f,r.indexes.forEach(function(t){const r=o(t.name||"");function n(e){return null!=e?t.extractKey(e):null}const i=e=>t.multiEntry&&_(e)?e.forEach(e=>r.addKey(e)):r.addKey(e);(s||a).forEach((e,t)=>{var r=s&&n(s[t]),t=a&&n(a[t]);0!==A(r,t)&&(null!=r&&i(r),null!=t&&i(t))})}))}else if(l){const e={from:l.lower,to:l.upper};u.add(e),i.add(e)}else i.add(m),u.add(m),y.indexes.forEach(e=>n(e.name).add(m));var o,r,s,a;return e})}},r=({query:{index:e,range:t}})=>{return[e,new P(null!=(e=t.lower)?e:n.MIN_KEY,null!=(e=t.upper)?e:n.MAX_KEY)]},l={get:e=>[t,new P(e.key)],getMany:e=>[t,(new P).addKeys(e.keys)],count:r,query:r,openCursor:r};return b(l).forEach(a=>{e[a]=function(e){const t=g["subscr"];if(t){const r=e=>{e=`idb://${v}/${d}/`+e;return t[e]||(t[e]=new P)},n=r(""),i=r(":dels"),[o,s]=l[a](e);if(r(o.name||"").add(s),!o.isPrimaryKey){if("count"!==a){const v="query"===a&&c&&e.values&&p.query({...e,values:!1});return p[a].apply(this,arguments).then(t=>{if("query"===a){if(c&&e.values)return v.then(({result:e})=>(n.addKeys(e),t));const a=e.values?t.result.map(u):t.result;(e.values?n:i).addKeys(a)}else if("openCursor"===a){const a=t,v=e.values;return a&&Object.create(a,{key:{get:()=>(i.addKey(a.primaryKey),a.key)},primaryKey:{get(){var e=a.primaryKey;return i.addKey(e),e}},value:{get:()=>(v&&n.addKey(a.primaryKey),a.value)}})}return t})}i.add(m)}}return p[a].apply(this,arguments)}}),e}}}};class Vr{constructor(e,t){this._middlewares={},this.verno=0;var s,i,r,o,n=Vr.dependencies;this._options=t={addons:Vr.addons,autoOpen:!0,indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange,...t},this._deps={indexedDB:t.indexedDB,IDBKeyRange:t.IDBKeyRange};const a=t["addons"],u=(this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this,{dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:y,dbReadyPromise:null,cancelOpen:y,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3}),c=(u.dbReadyPromise=new d(e=>{u.dbReadyResolve=e}),u.openCanceller=new d((e,t)=>{u.cancelOpen=t}),this._state=u,this.name=e,this.on=Dt(this,"populate","blocked","versionchange","close",{ready:[Ce,y]}),this.on.ready.subscribe=X(this.on.ready.subscribe,n=>(r,e)=>{Vr.vip(()=>{const t=this._state;if(t.openComplete)t.dbOpenError||d.resolve().then(r),e&&n(r);else if(t.onReadyBeingFired)t.onReadyBeingFired.push(r),e&&n(r);else{n(r);const t=this;e||n(function e(){t.on.ready.unsubscribe(r),t.on.ready.unsubscribe(e)})}})}),this.Collection=(s=this,Lt(Xt.prototype,function(e,t){this.db=s;let r=It,n=null;if(t)try{r=t()}catch(e){n=e}var t=e._ctx,i=t.table,o=i.hook.reading.fire;this._ctx={table:i,index:t.index,isPrimKey:!t.index||i.schema.primKey.keyPath&&t.index===i.schema.primKey.name,range:r,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:n,or:t.or,valueMapper:o!==Ee?o:null}})),this.Table=Kt(this),this.Transaction=(o=this,Lt(ar.prototype,function(e,t,r,n,i){this.db=o,this.mode=e,this.storeNames=t,this.schema=r,this.chromeTransactionDurability=n,this.idbtrans=null,this.on=Dt(this,"complete","error","abort"),this.parent=i||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new d((e,t)=>{this._resolve=e,this._reject=t}),this._completion.then(()=>{this.active=!1,this.on.complete.fire()},e=>{var t=this.active;return this.active=!1,this.on.error.fire(e),this.parent?this.parent._reject(e):t&&this.idbtrans&&this.idbtrans.abort(),x(e)})})),this.Version=(r=this,Lt(kr.prototype,function(e){this.db=r,this._cfg={version:e,storesSource:null,dbschema:{},contentUpgrade:null}})),this.WhereClause=(i=this,Lt(ir.prototype,function(e,t,r){this.db=i,this._ctx={table:e,index:":id"===t?null:t,or:r};const n=i._deps.indexedDB;if(!n)throw new m.MissingAPI;this._cmp=this._ascending=n.cmp.bind(n),this._descending=(e,t)=>n.cmp(t,e),this._max=(e,t)=>0<n.cmp(e,t)?e:t,this._min=(e,t)=>n.cmp(e,t)<0?e:t,this._IDBKeyRange=i._deps.IDBKeyRange})),this.on("versionchange",e=>{0<e.newVersion?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()}),this.on("blocked",e=>{!e.newVersion||e.newVersion<e.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version `+e.oldVersion/10)}),this._maxKey=fr(t.IDBKeyRange),this._createTransaction=(e,t,r,n)=>new this.Transaction(e,t,r,this._options.chromeTransactionDurability,n),this._fireOnBlocked=t=>{this.on("blocked").fire(t),$t.filter(e=>e.name===this.name&&e!==this&&!e._state.vcFired).map(e=>e.on("versionchange").fire(t))},this.use(Cr),this.use(Ir),this.use(zr),this.use(Br),Object.create(this));c._vip=!0,c.Table=Kt(c),c._allTables={},this.vip=c,a.forEach(e=>e(this))}version(t){if(isNaN(t)||t<.1)throw new m.Type("Given version is not a positive number");if(t=Math.round(10*t)/10,this.idbdb||this._state.isBeingOpened)throw new m.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);const e=this._versions;var r=e.filter(e=>e._cfg.version===t)[0];return r||(r=new this.Version(t),e.push(r),e.sort(_r),r.stores({}),this._state.autoSchema=!1,r)}_whenReady(e){return this.idbdb&&(this._state.openComplete||g.letThrough||this._vip)?e():new d((e,t)=>{if(this._state.openComplete)return t(new m.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void t(new m.DatabaseClosed);this.open().catch(y)}this._state.dbReadyPromise.then(e,t)}).then(e)}use({stack:e,create:t,level:r,name:n}){n&&this.unuse({stack:e,name:n});const i=this._middlewares[e]||(this._middlewares[e]=[]);return i.push({stack:e,create:t,level:null==r?10:r,name:n}),i.sort((e,t)=>e.level-t.level),this}unuse({stack:e,name:t,create:r}){return e&&this._middlewares[e]&&(this._middlewares[e]=this._middlewares[e].filter(e=>r?e.create!==r:!!t&&e.name!==t)),this}open(){{var l=this,r;const f=l._state,i=l._deps["indexedDB"];if(f.isBeingOpened||l.idbdb)return f.dbReadyPromise.then(()=>f.dbOpenError?x(f.dbOpenError):l);h&&(f.openCanceller._stackHolder=ve()),f.isBeingOpened=!0,f.dbOpenError=null,f.openComplete=!1;const t=f.openCanceller;function n(){if(f.openCanceller!==t)throw new m.DatabaseClosed("db.open() was cancelled")}let e=f.dbReadyResolve,u=null,c=!1;return d.race([t,("undefined"==typeof navigator?d.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(e){function t(){return indexedDB.databases().finally(e)}r=setInterval(t,100),t()}).finally(function(){return clearInterval(r)}):Promise.resolve()).then(()=>new d((o,t)=>{if(n(),!i)throw new m.MissingAPI;const s=l.name,a=f.autoSchema?i.open(s):i.open(s,Math.round(10*l.verno));if(!a)throw new m.MissingAPI;a.onerror=k(t),a.onblocked=O(l._fireOnBlocked),a.onupgradeneeded=O(e=>{if(u=a.transaction,f.autoSchema&&!l._options.allowEmptyDB){a.onerror=or,u.abort(),a.result.close();const l=i.deleteDatabase(s);l.onsuccess=l.onerror=O(()=>{t(new m.NoSuchDatabase(`Database ${s} doesnt exist`))})}else{u.onerror=k(t);e=e.oldVersion>Math.pow(2,62)?0:e.oldVersion;c=e<1,l._novip.idbdb=a.result,wr(l,e/10,u,t)}},t),a.onsuccess=O(()=>{u=null;const e=l._novip.idbdb=a.result,t=J(e.objectStoreNames);if(0<t.length)try{const o=e.transaction(1===t.length?t[0]:t,"readonly");if(f.autoSchema){var[r,n,i]=[l["_novip"],e,o];r.verno=n.version/10;i=r._dbSchema=Ar(0,n,i);r._storeNames=J(n.objectStoreNames,0),gr([r,r.vip],b(i),i)}else Er(l,l._dbSchema,o),function(e,t){const r=Or(Ar(0,e.idbdb,t),e._dbSchema);return!r.add.length&&!r.change.some(e=>e.add.length||e.change.length)}(l,o)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.");mr(l,o)}catch(e){}$t.push(l),e.onversionchange=O(e=>{f.vcFired=!0,l.on("versionchange").fire(e)}),e.onclose=O(e=>{l.on("close").fire(e)}),c&&([{indexedDB:n,IDBKeyRange:r},i]=[l._deps,s],$r(n)||"__dbnames"===i||Pr(n,r).put({name:i}).catch(y)),o()},t)}))]).then(()=>(n(),f.onReadyBeingFired=[],d.resolve(Sr(()=>l.on.ready.fire(l.vip))).then(function t(){if(0<f.onReadyBeingFired.length){let e=f.onReadyBeingFired.reduce(Ce,y);return f.onReadyBeingFired=[],d.resolve(Sr(()=>e(l.vip))).then(t)}}))).finally(()=>{f.onReadyBeingFired=null,f.isBeingOpened=!1}).then(()=>l).catch(e=>{f.dbOpenError=e;try{u&&u.abort()}catch(e){}return t===f.openCanceller&&l._close(),x(e)}).finally(()=>{f.openComplete=!0,e()})}}_close(){const r=this._state,e=$t.indexOf(this);if(0<=e&&$t.splice(e,1),this.idbdb){try{this.idbdb.close()}catch(r){}this._novip.idbdb=null}r.dbReadyPromise=new d(e=>{r.dbReadyResolve=e}),r.openCanceller=new d((e,t)=>{r.cancelOpen=t})}close(){this._close();const e=this._state;this._options.autoOpen=!1,e.dbOpenError=new m.DatabaseClosed,e.isBeingOpened&&e.cancelOpen(e.dbOpenError)}delete(){const r=0<arguments.length,i=this._state;return new d((n,t)=>{var e=()=>{this.close();var e=this._deps.indexedDB.deleteDatabase(this.name);e.onsuccess=O(()=>{var e,t,r;[{indexedDB:e,IDBKeyRange:t},r]=[this._deps,this.name],$r(e)||"__dbnames"===r||Pr(e,t).delete(r).catch(y),n()}),e.onerror=k(t),e.onblocked=this._fireOnBlocked};if(r)throw new m.InvalidArgument("Arguments not allowed in db.delete()");i.isBeingOpened?i.dbReadyPromise.then(e):e()})}backendDB(){return this.idbdb}isOpen(){return null!==this.idbdb}hasBeenClosed(){var e=this._state.dbOpenError;return e&&"DatabaseClosed"===e.name}hasFailed(){return null!==this._state.dbOpenError}dynamicallyOpened(){return this._state.autoSchema}get tables(){return b(this._allTables).map(e=>this._allTables[e])}transaction(){var e=function(e,t,r){var n=arguments.length;if(n<2)throw new m.InvalidArgument("Too few arguments");for(var i=new Array(n-1);--n;)i[n-1]=arguments[n];return r=i.pop(),[e,re(i),r]}.apply(this,arguments);return this._transaction.apply(this,e)}_transaction(r,e,t){let n=g.trans;n&&n.db===this&&-1===r.indexOf("!")||(n=null);const i=-1!==r.indexOf("?");let o,s;r=r.replace("!","").replace("?","");try{if(s=e.map(e=>{e=e instanceof this.Table?e.name:e;if("string"!=typeof e)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return e}),"r"==r||"readonly"===r)o="readonly";else{if("rw"!=r&&"readwrite"!=r)throw new m.InvalidArgument("Invalid transaction mode: "+r);o="readwrite"}if(n){if("readonly"===n.mode&&"readwrite"===o){if(!i)throw new m.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");n=null}n&&s.forEach(e=>{if(n&&-1===n.storeNames.indexOf(e)){if(!i)throw new m.SubTransaction("Table "+e+" not included in parent transaction.");n=null}}),i&&n&&!n.active&&(n=null)}}catch(r){return n?n._promise(null,(e,t)=>{t(r)}):x(r)}const a=function s(a,u,c,l,f){return d.resolve().then(()=>{const e=g.transless||g,t=a._createTransaction(u,c,a._dbSchema,l),r={trans:t,transless:e};if(l)t.idbtrans=l.idbtrans;else try{t.create(),a._state.PR1398_maxLoop=3}catch(e){return e.name===xe.InvalidState&&a.isOpen()&&0<--a._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),a._close(),a.open().then(()=>s(a,u,c,null,f))):x(e)}const n=he(f);let i;n&&gt();const o=d.follow(()=>{var e;(i=f.call(t,t))&&(n?(e=v.bind(null,null),i.then(e,e)):"function"==typeof i.next&&"function"==typeof i.throw&&(i=Mr(i)))},r);return(i&&"function"==typeof i.then?d.resolve(i).then(e=>t.active?e:x(new m.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))):o.then(()=>i)).then(e=>(l&&t._resolve(),t._completion.then(()=>e))).catch(e=>(t._reject(e),x(e)))})}.bind(null,this,o,s,n,t);return n?n._promise(o,a,"lock"):g.trans?xt(g.transless,()=>this._whenReady(a)):this._whenReady(a)}table(e){if(p(this._allTables,e))return this._allTables[e];throw new m.InvalidTable(`Table ${e} does not exist`)}}class Qr{constructor(e){this._subscribe=e}subscribe(e,t,r){return this._subscribe(e&&"function"!=typeof e?e:{next:e,error:t,complete:r})}["undefined"!=typeof Symbol&&"observable"in Symbol?Symbol.observable:"@@observable"](){return this}}function Wr(t,r){return b(r).forEach(e=>{Kr(t[e]||(t[e]=new P),r[e])}),t}let Gr;try{Gr={indexedDB:u.indexedDB||u.mozIndexedDB||u.webkitIndexedDB||u.msIndexedDB,IDBKeyRange:u.IDBKeyRange||u.webkitIDBKeyRange}}catch(u){Gr={indexedDB:null,IDBKeyRange:null}}const Jr=Vr;function Xr(e){var t=s;try{s=!0,sr.storagemutated.fire(e)}finally{s=t}}U(Jr,{...e,delete:e=>new Jr(e,{addons:[]}).delete(),exists:e=>new Jr(e,{addons:[]}).open().then(e=>(e.close(),!0)).catch("NoSuchDatabaseError",()=>!1),getDatabaseNames(e){try{return{indexedDB:t,IDBKeyRange:r}=[Jr.dependencies][0],($r(t)?Promise.resolve(t.databases()).then(e=>e.map(e=>e.name).filter(e=>"__dbnames"!==e)):Pr(t,r).toCollection().primaryKeys()).then(e)}catch(e){return x(new m.MissingAPI)}var t,r},defineClass:()=>function(e){a(this,e)},ignoreTransaction:e=>g.trans?xt(g.transless,e):e(),vip:Sr,async:function(t){return function(){try{var e=Mr(t.apply(this,arguments));return e&&"function"==typeof e.then?e:d.resolve(e)}catch(e){return x(e)}}},spawn:function(e,t,r){try{var n=Mr(e.apply(r,t||[]));return n&&"function"==typeof n.then?n:d.resolve(n)}catch(e){return x(e)}},currentTransaction:{get:()=>g.trans||null},waitFor:function(e,t){e=d.resolve("function"==typeof e?Jr.ignoreTransaction(e):e).timeout(t||6e4);return g.trans?g.trans.waitFor(e):e},Promise:d,debug:{get:()=>h,set:e=>{de(e,"dexie"===e?()=>!0:Ct)}},derive:V,extend:a,props:U,override:X,Events:Dt,on:sr,liveQuery:function(d){return new Qr(r=>{const n=he(d);let i=!1,o={},u={};const s={get closed(){return i},unsubscribe:()=>{i=!0,sr.storagemutated.unsubscribe(f)}};r.start&&r.start(s);let a=!1,c=!1;function l(){return b(u).some(a=>o[a]&&function(e){const t=Fr(u[a]);let r=t.next();if(r.done)return!1;let n=r.value;const i=Fr(e);let o=i.next(n.from),s=o.value;for(;!r.done&&!o.done;){if(A(s.from,n.to)<=0&&0<=A(s.to,n.from))return!0;A(n.from,s.from)<0?n=(r=t.next(s.from)).value:s=(o=i.next(n.from)).value}return!1}(o[a]))}const f=e=>{Wr(o,e),l()&&h()},h=()=>{if(!a&&!i){o={};const t={},e=function(e){n&&gt();const t=()=>mt(d,{subscr:e,trans:null}),r=g.trans?xt(g.transless,t):t();return n&&r.then(v,v),r}(t);c||(sr("storagemutated",f),c=!0),a=!0,Promise.resolve(e).then(e=>{a=!1,i||(l()?h():(o={},u=t,r.next&&r.next(e)))},e=>{["DatabaseClosedError","AbortError"].includes(null==e?void 0:e.name)||(a=!1,r.error&&r.error(e),s.unsubscribe())})}};return h(),s})},extendObservabilitySet:Wr,getByKeyPath:c,setByKeyPath:w,delByKeyPath:function(t,e){"string"==typeof e?w(t,e,void 0):"length"in e&&[].map.call(e,function(e){w(t,e,void 0)})},shallowClone:ee,deepClone:se,getObjectDiff:Nr,cmp:A,asap:H,minKey:-1/0,addons:[],connections:$t,errnames:xe,dependencies:Gr,semVer:"4.0.0-alpha.2",version:"4.0.0-alpha.2".split(".").map(e=>parseInt(e)).reduce((e,t,r)=>e+t/Math.pow(10,2*r))}),Jr.maxKey=fr(Jr.dependencies.IDBKeyRange),"undefined"!=typeof dispatchEvent&&"undefined"!=typeof addEventListener&&(sr("storagemutated",t=>{if(!s){let e;St?(e=document.createEvent("CustomEvent")).initCustomEvent("x-storagemutated-1",!0,!0,t):e=new CustomEvent("x-storagemutated-1",{detail:t}),s=!0,dispatchEvent(e),s=!1}}),addEventListener("x-storagemutated-1",({detail:e})=>{s||Xr(e)}));let s=!1;if("undefined"!=typeof BroadcastChannel){const n=new BroadcastChannel("x-storagemutated-1");sr("storagemutated",e=>{s||n.postMessage(e)}),n.onmessage=e=>{e.data&&Xr(e.data)}}else if("undefined"!=typeof self&&"undefined"!=typeof navigator){sr("storagemutated",t=>{try{s||("undefined"!=typeof localStorage&&localStorage.setItem("x-storagemutated-1",JSON.stringify({trig:Math.random(),changedParts:t})),"object"==typeof self.clients&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach(e=>e.postMessage({type:"x-storagemutated-1",changedParts:t})))}catch(t){}}),addEventListener("storage",e=>{"x-storagemutated-1"===e.key&&(e=JSON.parse(e.newValue))&&Xr(e.changedParts)});const n=self.document&&navigator.serviceWorker;n&&n.addEventListener("message",function({data:e}){e&&"x-storagemutated-1"===e.type&&Xr(e.changedParts)})}d.rejectionMapper=function(e,t){if(!e||e instanceof be||e instanceof TypeError||e instanceof SyntaxError||!e.name||!Ae[e.name])return e;t=new Ae[e.name](t||e.message,e);return"stack"in e&&o(t,"stack",{get:function(){return this.inner.stack}}),t},de(h,Ct);var t=Xi(6313),Yr=Xi.n(t),e=(Xi(8322),Xi(9134)),t=Xi.n(e),Hr=0;function Zr(){var e=(new Date).getTime();return Hr=e=e<=Hr?Hr+1:e}Promise.resolve(!0),Promise.resolve(!1),Promise.resolve(null);var en=Promise.resolve();function tn(e){if(e)return e;throw new Error("ensureNotFalsy() is falsy")}function l(e,t){e=e.get(t);if(e)return e;throw new Error("missing value from map "+t)}function rn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function nn(e,t){return(nn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function on(e){return(on=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function sn(e,t,r){return(sn=function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),1}catch(e){return}}}()?Reflect.construct:function(e,t,r){var n=[null],t=(n.push.apply(n,t),new(Function.bind.apply(e,n)));return r&&nn(t,r.prototype),t}).apply(null,arguments)}function an(e){var r="function"==typeof Map?new Map:void 0;return function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(e))return r.get(e);r.set(e,t)}function t(){return sn(e,arguments,on(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),nn(t,e)}(e)}t()();un=an(Error),e=un,(t=ln).prototype=Object.create(e.prototype),nn(t.prototype.constructor=t,e),ln.prototype.toString=function(){return this.message},t=ln,(e=[{key:"name",get:function(){return"RxError ("+this.code+")"}},{key:"typeError",get:function(){return!1}}])&&rn(t.prototype,e),yi&&rn(t,yi),Object.defineProperty(t,"prototype",{writable:!1});var un,cn=ln;function ln(e,t){var r,n,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},t="RxError ("+(r=e)+"):\n"+t+"\n"+(n=i,r="",0===Object.keys(n).length?r:(r=(r+="Given parameters: {\n")+Object.keys(n).map(function(e){var t="[object Object]";try{t=JSON.stringify(n[e],function(e,t){return void 0===t?null:t},2)}catch(e){}return e+":"+t}).join("\n"))+"}");return(r=un.call(this,t)||this).code=e,r.message=t,r.parameters=i,r.rxdb=!0,r}function fn(e,t){return new cn(e,"RxDB Error-Code "+e+".\n        Error messages are not included in RxDB core to reduce build size.\n        - To find out what this error means, either use the dev-mode-plugin https://rxdb.info/dev-mode.html\n        - or search for the error code here: https://github.com/pubkey/rxdb/search?q="+e+"\n        ",t)}TypeError;var e=Xi(1528),hn=Xi.n(e);function dn(e){return"string"==typeof e?e:e.key}function pn(e,t){return Promise.resolve(e).then(function(e){return Promise.resolve(Promise.all([e.dexieTable.bulkGet(t),e.dexieDeletedTable.bulkGet(t)])).then(function(e){var t=e[0],r=e[1].slice(0);return t.forEach(function(e,t){e&&(r[t]=e)}),r})})}var yn=new Map,vn=new Map;function mn(e,t,s,a){var u=dn(a.primaryKey),c="rxdb-dexie-"+e+"--"+a.version+"--"+t,e=yn.get(c);return e||(e=function(){try{var e,t=Object.assign({},s),r=(t.autoOpen=!1,new Vr(c,t));return r.version(1).stores(((e={}).docs=(i=[],o=dn((n=a).primaryKey),i.push([o]),n.indexes&&n.indexes.forEach(function(e){e=Array.isArray(e)?e:[e];i.push(e)}),i.push(["_meta.lwt",o]),(i=i.map(function(e){return e.map(bn)})).map(function(e){return 1===e.length?e[0]:"["+e.join("+")+"]"}).join(", ")),e.changes="++sequence, id",e["deleted-docs"]=u+",_meta.lwt,[_meta.lwt+"+u+"]",e)),Promise.resolve(r.open()).then(function(){return{dexieDb:r,dexieTable:r.docs,dexieDeletedTable:r["deleted-docs"],dexieChangesTable:r.changes}})}catch(e){return Promise.reject(e)}var n,i,o}(),yn.set(c,e),vn.set(e,0)),e}var gn="__";function bn(e){var t;return e.startsWith("|")?(t=e.substring(1),gn+t):e}function _n(e){return e&&"string"!=typeof e&&"number"!=typeof e&&"boolean"!=typeof e?Array.isArray(e)?e.map(_n):"object"==typeof e?(r={},Object.entries(e).forEach(function(e){var t=e[0],e=e[1];"object"==typeof e&&(e=_n(e)),r[bn(t)]=e}),r):void 0:e;var r}function wn(r){return r&&"string"!=typeof r&&"number"!=typeof r&&"boolean"!=typeof r?Array.isArray(r)?r.map(wn):"object"==typeof r?(n={},Object.entries(r).forEach(function(e){var t=e[0],e=e[1];"object"!=typeof e&&!Array.isArray(r)||(e=wn(e)),n[(t=t).startsWith(gn)?"|"+t.substring(gn.length):t]=e}),n):void 0:r;var n}var On=function(e,t){return(On=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};function xn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}On(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}function jn(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function An(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(n=o.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s}function En(e,t,r){if(r||2===arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||((n=n||Array.prototype.slice.call(t,0,i))[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))}function f(e){return"function"==typeof e}function kn(e){e=e(function(e){Error.call(e),e.stack=(new Error).stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e}Object.create,Object.create;var Pn=kn(function(t){return function(e){t(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e}});function $n(e,t){e&&0<=(t=e.indexOf(t))&&e.splice(t,1)}$.prototype.unsubscribe=function(){var e,t,r,n,i;if(!this.closed){this.closed=!0;var o=this._parentage;if(o)if(this._parentage=null,Array.isArray(o))try{for(var s=jn(o),a=s.next();!a.done;a=s.next())a.value.remove(this)}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}else o.remove(this);o=this.initialTeardown;if(f(o))try{o()}catch(e){i=e instanceof Pn?e.errors:[e]}o=this._finalizers;if(o){this._finalizers=null;try{for(var u=jn(o),c=u.next();!c.done;c=u.next()){var l=c.value;try{Cn(l)}catch(e){i=null!=i?i:[],e instanceof Pn?i=En(En([],An(i)),An(e.errors)):i.push(e)}}}catch(e){r={error:e}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}}if(i)throw new Pn(i)}},$.prototype.add=function(e){var t;if(e&&e!==this)if(this.closed)Cn(e);else{if(e instanceof $){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!=(t=this._finalizers)?t:[]).push(e)}},$.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},$.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},$.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&$n(t,e)},$.prototype.remove=function(e){var t=this._finalizers;t&&$n(t,e),e instanceof $&&e._removeParent(this)},$.EMPTY=((yi=new $).closed=!0,yi);var Sn=$,Mn=Sn.EMPTY;function $(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}function Tn(e){return e instanceof Sn||e&&"closed"in e&&f(e.remove)&&f(e.add)&&f(e.unsubscribe)}function Cn(e){f(e)?e():e.unsubscribe()}var Nn=null,In=null,Rn=void 0,Bn=!1,Dn=!1,Ln={setTimeout:function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var i=Ln.delegate;return null!=i&&i.setTimeout?i.setTimeout.apply(i,En([e,t],An(r))):setTimeout.apply(void 0,En([e,t],An(r)))},clearTimeout:function(e){var t=Ln.delegate;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function Kn(){}var Fn=qn("C",void 0,void 0);function qn(e,t,r){return{kind:e,value:t,error:r}}var Un=null;function zn(e){if(Bn){var t=!Un;if(t&&(Un={errorThrown:!1,error:null}),e(),t){var t=Un,r=t.errorThrown,t=t.error;if(Un=null,r)throw t}}else e()}xn(S,Vn=Sn),S.create=function(e,t,r){return new Yn(e,t,r)},S.prototype.next=function(e){this.isStopped?ti(qn("N",e,void 0),this):this._next(e)},S.prototype.error=function(e){this.isStopped?ti(qn("E",void 0,e),this):(this.isStopped=!0,this._error(e))},S.prototype.complete=function(){this.isStopped?ti(Fn,this):(this.isStopped=!0,this._complete())},S.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,Vn.prototype.unsubscribe.call(this),this.destination=null)},S.prototype._next=function(e){this.destination.next(e)},S.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},S.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}};var Vn,Qn=S,Wn=Function.prototype.bind;function S(e){var t=Vn.call(this)||this;return t.isStopped=!1,e?Tn(t.destination=e)&&e.add(t):t.destination=ri,t}function Gn(e,t){return Wn.call(e,t)}Zn.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){ei(e)}},Zn.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){ei(e)}else ei(e)},Zn.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){ei(e)}};var Jn,Xn=Zn,Yn=(xn(Hn,Jn=Qn),Hn);function Hn(e,t,r){var n=Jn.call(this)||this,r=f(e)||!e?{next:null!=e?e:void 0,error:null!=t?t:void 0,complete:null!=r?r:void 0}:n&&Dn?((t=Object.create(e)).unsubscribe=function(){return n.unsubscribe()},{next:e.next&&Gn(e.next,t),error:e.error&&Gn(e.error,t),complete:e.complete&&Gn(e.complete,t)}):e;return n.destination=new Xn(r),n}function Zn(e){this.partialObserver=e}function ei(e){var t,r;Bn?(t=e,Bn&&Un&&(Un.errorThrown=!0,Un.error=t)):(r=e,Ln.setTimeout(function(){if(!Nn)throw r;Nn(r)}))}function ti(e,t){var r=In;r&&Ln.setTimeout(function(){return r(e,t)})}var ri={closed:!0,next:Kn,error:function(e){throw e},complete:Kn},t="function"==typeof Symbol&&Symbol.observable||"@@observable";function ni(e){return e}M.prototype.lift=function(e){var t=new M;return t.source=this,t.operator=e,t},M.prototype.subscribe=function(e,t,r){var n,i=this,o=(n=e)&&n instanceof Qn||n&&f(n.next)&&f(n.error)&&f(n.complete)&&Tn(n)?e:new Yn(e,t,r);return zn(function(){var e=i.operator,t=i.source;o.add(e?e.call(o,t):t?i._subscribe(o):i._trySubscribe(o))}),o},M.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){t.error(e)}},M.prototype.forEach=function(n,e){var i=this;return new(e=oi(e))(function(e,t){var r=new Yn({next:function(e){try{n(e)}catch(e){t(e),r.unsubscribe()}},error:t,complete:e});i.subscribe(r)})},M.prototype._subscribe=function(e){var t;return null==(t=this.source)?void 0:t.subscribe(e)},M.prototype[t]=function(){return this},M.prototype.pipe=function(){for(var t,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return(0===(t=e).length?ni:1===t.length?t[0]:function(e){return t.reduce(function(e,t){return t(e)},e)})(this)},M.prototype.toPromise=function(e){var n=this;return new(e=oi(e))(function(e,t){var r;n.subscribe(function(e){return r=e},function(e){return t(e)},function(){return e(r)})})},M.create=function(e){return new M(e)};var ii=M;function M(e){e&&(this._subscribe=e)}function oi(e){return null!=(e=null!=e?e:Rn)?e:Promise}var si,ai,ui=kn(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),ci=(xn(T,ai=ii),T.prototype.lift=function(e){var t=new li(this,this);return t.operator=e,t},T.prototype._throwIfClosed=function(){if(this.closed)throw new ui},T.prototype.next=function(i){var o=this;zn(function(){var t,e;if(o._throwIfClosed(),!o.isStopped){o.currentObservers||(o.currentObservers=Array.from(o.observers));try{for(var r=jn(o.currentObservers),n=r.next();!n.done;n=r.next())n.value.next(i)}catch(e){t={error:e}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}}})},T.prototype.error=function(t){var r=this;zn(function(){if(r._throwIfClosed(),!r.isStopped){r.hasError=r.isStopped=!0,r.thrownError=t;for(var e=r.observers;e.length;)e.shift().error(t)}})},T.prototype.complete=function(){var t=this;zn(function(){if(t._throwIfClosed(),!t.isStopped){t.isStopped=!0;for(var e=t.observers;e.length;)e.shift().complete()}})},T.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(T.prototype,"observed",{get:function(){var e;return 0<(null==(e=this.observers)?void 0:e.length)},enumerable:!1,configurable:!0}),T.prototype._trySubscribe=function(e){return this._throwIfClosed(),ai.prototype._trySubscribe.call(this,e)},T.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},T.prototype._innerSubscribe=function(e){var t=this,r=this.hasError,n=this.isStopped,i=this.observers;return r||n?Mn:(this.currentObservers=null,i.push(e),new Sn(function(){t.currentObservers=null,$n(i,e)}))},T.prototype._checkFinalizedStatuses=function(e){var t=this.hasError,r=this.thrownError,n=this.isStopped;t?e.error(r):n&&e.complete()},T.prototype.asObservable=function(){var e=new ii;return e.source=this,e},T.create=function(e,t){return new li(e,t)},T),li=(xn(fi,si=ci),fi.prototype.next=function(e){var t,r;null!=(r=null==(t=this.destination)?void 0:t.next)&&r.call(t,e)},fi.prototype.error=function(e){var t,r;null!=(r=null==(t=this.destination)?void 0:t.error)&&r.call(t,e)},fi.prototype.complete=function(){var e,t;null!=(t=null==(e=this.destination)?void 0:e.complete)&&t.call(e)},fi.prototype._subscribe=function(e){var t;return null!=(t=null==(t=this.source)?void 0:t.subscribe(e))?t:Mn},fi);function fi(e,t){var r=si.call(this)||this;return r.destination=e,r.source=t,r}function T(){var e=ai.call(this)||this;return e.closed=!1,e.currentObservers=null,e.observers=[],e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}function hi(e){return"idx-rxdb-index-"+e.join(",")}function di(){this._store={}}function pi(e){if(this._store=new di,e&&Array.isArray(e))for(var t=0,r=e.length;t<r;t++)this.add(e[t])}new Set,Xi(7105),di.prototype.get=function(e){return this._store["$"+e]},di.prototype.set=function(e,t){return this._store["$"+e]=t,!0},di.prototype.has=function(e){return"$"+e in this._store},di.prototype.delete=function(e){var e="$"+e,t=e in this._store;return delete this._store[e],t},di.prototype.forEach=function(e){for(var t=Object.keys(this._store),r=0,n=t.length;r<n;r++){var i=t[r];e(this._store[i],i.substring(1))}},Object.defineProperty(di.prototype,"size",{get:function(){return Object.keys(this._store).length}}),pi.prototype.add=function(e){return this._store.set(e,!0)},pi.prototype.has=function(e){return this._store.has(e)},pi.prototype.forEach=function(r){this._store.forEach(function(e,t){r(t)})},Object.defineProperty(pi.prototype,"size",{get:function(){return this._store.size}}),function(){var e;if("undefined"!=typeof Symbol&&"undefined"!=typeof Map&&"undefined"!=typeof Set)return e=Object.getOwnPropertyDescriptor(Map,Symbol.species),e&&"get"in e&&Map[Symbol.species]===Map}()&&(Set,Map);var e=Xi(5717),yi=Xi.n(e),t=Xi(1180),vi=Xi.n(t);function C(e,t,r){Error.call(this,r),this.status=e,this.name=t,this.message=r,this.error=!0}yi()(C,Error),C.prototype.toString=function(){return JSON.stringify({status:this.status,name:this.name,message:this.message,reason:this.reason})},new C(401,"unauthorized","Name or password is incorrect."),new C(400,"bad_request","Missing JSON list of 'docs'"),new C(404,"not_found","missing"),new C(409,"conflict","Document update conflict"),new C(400,"bad_request","_id field must contain a string"),new C(412,"missing_id","_id is required for puts"),new C(400,"bad_request","Only reserved document ids may start with underscore."),new C(412,"precondition_failed","Database not open"),new C(500,"unknown_error","Database encountered an unknown error"),new C(500,"badarg","Some query argument is invalid"),new C(400,"invalid_request","Request was invalid"),new C(400,"query_parse_error","Some query parameter is invalid"),new C(500,"doc_validation","Bad special document member"),new C(400,"bad_request","Something wrong with the request"),new C(400,"bad_request","Document must be a JSON object"),new C(404,"not_found","Database not found"),new C(500,"indexed_db_went_bad","unknown"),new C(500,"web_sql_went_bad","unknown"),new C(500,"levelDB_went_went_bad","unknown"),new C(403,"forbidden","Forbidden by design doc validate_doc_update function"),new C(400,"bad_request","Invalid rev format"),new C(412,"file_exists","The database could not be created, the file already exists."),new C(412,"missing_stub","A pre-existing attachment stub wasn't found"),new C(413,"invalid_url","Provided URL is invalid");var mi,e=Xi(7187),gi=Xi.n(e),t=Xi(1074);t.v1,t.v3,t.v4,t.v5,Function.prototype.toString.call(Object);try{localStorage.setItem("_pouch_check_localstorage",1),mi=!!localStorage.getItem("_pouch_check_localstorage")}catch(u){mi=!1}function bi(){var t;gi().call(this),this._listeners={},t=this,mi&&addEventListener("storage",function(e){t.emit(e.key)})}function N(e){return Object.keys(e)[0]}function _i(i,e){var t,n=dn(i.primaryKey),o=e;return o.sort&&o.sort.forEach(function(e){var t,r=Object.keys(e)[0],n=["$gt","$gte","$lt","$lte","$eq"];if(!(o.selector&&o.selector[r]&&Object.keys(o.selector[r]).some(function(e){return n.includes(e)}))){e=i,t=function(e){for(;"."===e.charAt(0);)e=e.substr(1);for(;"."===e.slice(-1);)e=e.slice(0,-1);return e}(t="properties."+(t=r).replace(/\./g,".properties."));e=hn().get(e,t);if(!e)throw fn("QU5",{query:o,key:r,schema:i});switch(o.selector||(o.selector={}),o.selector[r]||(o.selector[r]={}),e.type){case"number":case"integer":o.selector[r].$gt=-1e28;break;case"string":"string"!=typeof o.selector[r]&&(o.selector[r].$gt="");break;default:o.selector[r].$gt=null}}}),o.sort&&(t=o.sort.map(function(e){var t,r=Object.keys(e)[0],e=Object.values(e)[0];return(t={})[r===n?"_id":r]=e,t}),o.sort=t),Object.entries(tn(o.selector)).forEach(function(e){var t=e[0],e=e[1];"object"!=typeof e||null===e||Array.isArray(e)||0!==Object.keys(e).length||delete tn(o.selector)[t]}),e.index&&(t=e.index,t=hi((Array.isArray(t)?t:[t]).map(function(e){return e===n?"_id":e})),delete e.index,e.use_index=t),o.selector=function r(e,n){return"_id"===n?e:Array.isArray(e)?e.map(function(e){return r(e,n)}):"object"==typeof e?(i={},Object.entries(e).forEach(function(e){var t=e[0],e=e[1];t===n?i._id=e:t.startsWith("$")?i[t]=r(e,n):i[t]=e}),i):e;var i}(o.selector,n),o}yi()(bi,gi()),bi.prototype.addListener=function(e,t,r,n){var i,o;function s(){var e;i._listeners[t]&&(o?o="waiting":(o=!0,e=function(e,t){for(var r={},n=0,i=t.length;n<i;n++){var o=t[n];o in e&&(r[o]=e[o])}return r}(n,["style","include_docs","attachments","conflicts","filter","doc_ids","view","since","query_params","binary","return_docs"]),r.changes(e).on("change",function(e){e.seq>n.since&&!n.cancelled&&(n.since=e.seq,n.onChange(e))}).on("complete",function(){"waiting"===o&&vi()(s),o=!1}).on("error",function(){o=!1})))}this._listeners[t]||(o=!1,(i=this)._listeners[t]=s,this.on(e,s))},bi.prototype.removeListener=function(e,t){t in this._listeners&&(gi().prototype.removeListener.call(this,e,this._listeners[t]),delete this._listeners[t])},bi.prototype.notifyLocalWindows=function(e){mi&&(localStorage[e]="a"===localStorage[e]?"b":"a")},bi.prototype.notify=function(e){this.emit(e),this.notifyLocalWindows(e)},"function"==typeof Object.assign&&Object.assign;var wi,Oi=Number.MIN_SAFE_INTEGER,xi=Number.MIN_SAFE_INTEGER+1,ji=Number.MIN_SAFE_INTEGER+2,Ai=Number.NEGATIVE_INFINITY,Ei=[[[[[[[[[[[[]]]]]]]]]]]],ki=(wi=function(e){for(var t=[],r=0,n=e.length;r<n;r++){var i=e[r];Array.isArray(i)?t=t.concat(ki.apply(null,i)):t.push(i)}return t},function(){for(var e=arguments.length,t=new Array(e),r=-1;++r<e;)t[r]=arguments[r];return wi.call(void 0,t)});function Pi(e){for(var t={},r=0,n=e.length;r<n;r++)t=Object.assign(t,e[r]);return t}function $i(e,t){for(var r=0,n=Math.min(e.length,t.length);r<n;r++)if(e[r]!==t[r])return!1;return!0}function Si(e,t){if(e.length!==t.length)return!1;for(var r=0,n=e.length;r<n;r++)if(e[r]!==t[r])return!1;return!0}var Mi=null,Ti={queryOpts:{limit:0,startkey:"￿",endkey:Mi},inMemoryFields:[]};function Ci(e,t){var r=t.def.fields.map(N);return e.slice().sort(function(e,t){var e=r.indexOf(e),t=r.indexOf(t);return-1===e&&(e=Number.MAX_VALUE),-1===t&&(t=Number.MAX_VALUE),(e=e)<(t=t)?-1:t<e?1:0})}function Ni(e,t,r,n){var i,o,e=ki(e,function(e,t,r){for(var n=!1,i=0,o=(r=Ci(r,e)).length;i<o;i++){var s=r[i];if(n||!function(e,t){for(var r=e.def.fields.map(N),n=0,i=r.length;n<i;n++)if(t===r[n])return 1}(e,s))return r.slice(i);i<o-1&&"$eq"!==N(t[s])&&(n=!0)}return[]}(t,r,n),(i=r,o=[],Object.keys(i).forEach(function(t){var e=i[t];Object.keys(e).forEach(function(e){"$ne"===e&&o.push(t)})}),o));return Ci(function(e){for(var t={},r=0;r<e.length;r++)t["$"+e[r]]=!0;return Object.keys(t).map(function(e){return e.substring(1)})}(e),t)}var Ii=["$eq","$gt","$gte","$lt","$lte"];function Ri(e){return-1===Ii.indexOf(e)}function Bi(e,t,r,n){e=e.def.fields.map(N);return!!function(e,t,r){var n;if(t)return t=!(t.length>e.length)&&$i(t,e),n=$i(r,e),t&&n;var i=r,o=e;i=i.slice();for(var s=0,a=o.length;s<a;s++){var u=o[s];if(!i.length)break;u=i.indexOf(u);if(-1===u)return;i.splice(u,1)}return 1}(e,t,r)&&(void 0===(t=n[e[0]])||!(1===Object.keys(t).length&&"$ne"===N(t)))}function Di(e,t,r,n,i){o=e,s=t,a=r;var o,s,a,u=n.filter(function(e){return Bi(e,a,s,o)});if(0===u.length){if(i)throw new Error(JSON.stringify({error:"no_usable_index",message:"There is no index available for this selector.",selector:e,indexes:n,sortOrder:r,userFields:t,useIndex:i},null,4));r=n[0];return r.defaultUsed=!0,r}if(1===u.length&&!i)return u[0];var c=function(e){for(var t={},r=0,n=e.length;r<n;r++)t[e[r]]=!0;return t}(t);if(i){var l="_design/"+i,f=i,r=u.find(function(e){return!(!f||e.ddoc!==l||f!==e.name)||e.ddoc===l});if(r)return r;throw new Error(JSON.stringify({error:"unknown_error",message:"Could not find that index or could not use that index for the query",useIndex:i,indexes:n,selector:e},null,4))}for(var h=u,d=null,p=-1,y=0,v=h.length;y<v;y++){var m=h[y],g=function(e){for(var t=e.def.fields.map(N),r=0,n=0,i=t.length;n<i;n++){var o=t[n];c[o]&&r++}return r}(m);p<g&&(p=g,d=m)}return d}function Li(e,t){{if(t.defaultUsed)return{queryOpts:{startkey:null},inMemoryFields:[Object.keys(e)]};if(1===t.def.fields.length)return _=e,O=N(t.def.fields[0]),x=_[O]||{},j=[],Object.keys(x).forEach(function(t){Ri(t)&&j.push(O);var e=function(e){switch(t){case"$eq":return{key:e};case"$lte":return{endkey:e};case"$gte":return{startkey:e};case"$lt":return{endkey:e,inclusive_end:!1};case"$gt":return{startkey:e,inclusive_start:!1}}return{startkey:Mi}}(x[t]);w=w?Pi([w,e]):e}),{queryOpts:w,inMemoryFields:j};var r=e,n,i,o=t.def.fields.map(N),s=[],a=[],u=[];function c(e){!1!==n&&a.push(Mi),!1!==i&&u.push("￿"),s=o.slice(e)}for(var l=0,f=o.length;l<f;l++){var h=r[o[l]];if(!h||!Object.keys(h).length){c(l);break}if(Object.keys(h).some(Ri)){c(l);break}if(0<l){var d="$gt"in h||"$gte"in h||"$lt"in h||"$lte"in h,p=Object.keys(r[o[l-1]]),y=Si(p,["$eq"]),p=Si(p,Object.keys(h));if(d&&!y&&!p){c(l);break}}for(var v=Object.keys(h),m=null,g=0;g<v.length;g++)var b=v[g],b=function(e,t){switch(e){case"$eq":return{startkey:t,endkey:t};case"$lte":return{endkey:t};case"$gte":return{startkey:t};case"$lt":return{endkey:t,inclusive_end:!1};case"$gt":return{startkey:t,inclusive_start:!1}}}(b,h[b]),m=m?Pi([m,b]):b;a.push("startkey"in m?m.startkey:Mi),u.push("endkey"in m?m.endkey:"￿"),"inclusive_start"in m&&(n=m.inclusive_start),"inclusive_end"in m&&(i=m.inclusive_end)}return _={startkey:a,endkey:u},void 0!==n&&(_.inclusive_start=n),void 0!==i&&(_.inclusive_end=i),{queryOpts:_,inMemoryFields:s}}var _,w,O,x,j}function Ki(e,t,r){var t=r.document[t],n=[!!r.previous,r.previous&&r.previous._deleted,!!r.document._deleted].map(function(e){return e?"1":"0"}).join("");return e.databaseName+"|"+e.collectionName+"|"+t+"||"+n+"|"+r.document._rev}var Fi=Zr(),qi=((e=Qi.prototype).bulkWrite=function(r){try{var d=this;return Promise.resolve(d.internals).then(function(e){var f={success:{},error:{}},h={id:function(e){for(var t=0<arguments.length&&void 0!==e?e:10,r="",n="abcdefghijklmnopqrstuvwxyz",i=0;i<t;i++)r+=n.charAt(Math.floor(Math.random()*n.length));return r}(10),events:[]},t=r.map(function(e){return e.document[d.primaryPath]});return Promise.resolve(e.dexieDb.transaction("rw",e.dexieTable,e.dexieDeletedTable,function(){try{return Promise.resolve(pn(d.internals,t)).then(function(o){o=o.map(function(e){return e&&wn(e)});var s=[],a=[],u=[],c=[],l=[];return r.forEach(function(e,t){var r=e.document[d.primaryPath],n=Zr(),t=o[t];if(t){var i=t._rev;if(!e.previous&&t._deleted&&(e.previous=t),!e.previous&&!t._deleted||e.previous&&i!==e.previous._rev)f.error[r]={isError:!0,status:409,documentId:r,writeRow:e,documentInDb:t};else{i=!!e.document._deleted,t=Object.assign({},e.document,{_deleted:i,_attachments:{}}),i=(l.push(r),null);if(e.previous&&e.previous._deleted&&!t._deleted?(s.push(t),c.push(r),i={id:r,operation:"INSERT",previous:null,doc:t}):!e.previous||e.previous._deleted||t._deleted?e.previous&&!e.previous._deleted&&t._deleted?(u.push(t),a.push(r),i={id:r,operation:"DELETE",previous:e.previous,doc:null}):e.previous&&e.previous._deleted&&e.document._deleted&&u.push(t):(s.push(t),i={id:r,operation:"UPDATE",previous:e.previous,doc:t}),i)h.events.push({eventId:Ki(d,d.primaryPath,e),documentId:r,change:i,startTime:n,endTime:n});else if(!(e.previous&&e.previous._deleted&&e.document._deleted))throw fn("SNH",{args:{writeRow:e}});f.success[r]=t}}else{i=!!e.document._deleted,t=Object.assign({},e.document,{_deleted:i,_attachments:{}});l.push(r),i?u.push(t):(s.push(t),h.events.push({eventId:Ki(d,d.primaryPath,e),documentId:r,change:{doc:t,id:r,operation:"INSERT",previous:null},startTime:n,endTime:n})),f.success[r]=t}}),Promise.resolve(Promise.all([0<s.length?e.dexieTable.bulkPut(s.map(_n)):en,0<a.length?e.dexieTable.bulkDelete(a):en,0<u.length?e.dexieDeletedTable.bulkPut(u.map(_n)):en,0<c.length?e.dexieDeletedTable.bulkDelete(c):en])).then(function(){})})}catch(e){return Promise.reject(e)}})).then(function(){var t=Zr();return h.events.forEach(function(e){return e.endTime=t}),d.changes$.next(h),f})})}catch(r){return Promise.reject(r)}},e.findDocumentsById=function(o,s){try{var a=this;return Promise.resolve(a.internals).then(function(n){var i={};return Promise.resolve(n.dexieDb.transaction("r",n.dexieTable,n.dexieDeletedTable,function(){try{var r,e=function(){o.forEach(function(e,t){t=r[t];!t||t._deleted&&!s||(i[e]=wn(t))})},t=s?Promise.resolve(pn(a.internals,o)).then(function(e){r=e}):Promise.resolve(n.dexieTable.bulkGet(o)).then(function(e){r=e});return Promise.resolve(t&&t.then?t.then(e):e())}catch(e){return Promise.reject(e)}})).then(function(){return i})})}catch(o){return Promise.reject(o)}},e.query=function(e){var f=this,i=e;try{return Promise.resolve(f.internals).then(function(e){var o=Ui.getQueryMatcher(f.schema,i),t=Ui.getSortComparator(f.schema,i),r=i.skip||0,n=i.limit||1/0,s=r+n,n=i.pouchQueryPlan,a=function(e,t,r,n){if(!n){if("undefined"==typeof window)throw new Error("IDBKeyRange missing");n=window.IDBKeyRange}return function(e,t,r,n){var i=2<arguments.length&&void 0!==r?r:Ai,o=3<arguments.length&&void 0!==n?n:Ei;function s(e,t){return void 0!==e[t]}function a(e,t){e=(Array.isArray(e)?e:[e]).map(function(e){if(null===e&&t)return Oi;if(!0===e)return ji;if(!1===e)return xi;if(!t){if(null===e)return i;if(Object.prototype.hasOwnProperty.call(e,"￿"))return o}return e});return 1===e.length?e[0]:e}s(e,"inclusive_end")||(e.inclusive_end=!0),s(e,"inclusive_start")||(e.inclusive_start=!0),e.descending&&(r=e.startkey,n=e.inclusive_start,e.startkey=e.endkey,e.endkey=r,e.inclusive_start=e.inclusive_end,e.inclusive_end=n);try{return s(e,"key")?t.only(a(e.key,!0)):s(e,"startkey")&&!s(e,"endkey")?t.lowerBound(a(e.startkey),!e.inclusive_start):!s(e,"startkey")&&s(e,"endkey")?t.upperBound(a(e.endkey),!e.inclusive_end):s(e,"startkey")&&s(e,"endkey")?t.bound(a(e.startkey),a(e.endkey),!e.inclusive_start,!e.inclusive_end):t.only([0])}catch(i){throw console.dir(t),console.error("Could not generate keyRange",i,e),Error("Could not generate key range with "+JSON.stringify(e))}}(e.queryOpts,n,t,r)}(n,Number.NEGATIVE_INFINITY,e.dexieDb._maxKey,e.dexieDb._options.IDBKeyRange),u=n.index.def.fields.map(function(e){return Object.keys(e)[0]}).map(function(e){return t=f.primaryPath,"_id"===e?t:e;var t}),n=tn(i.sort).map(function(e){return Object.keys(e)[0]}),n=u.join(",")===n.join(","),c=i.sort.find(function(e){return"desc"===Object.values(e)[0]})||!n,l=[];return Promise.resolve(e.dexieDb.transaction("r",e.dexieTable,function(e){try{var t,r=e.idbtrans.objectStore("docs"),n=1===u.length&&u[0]===f.primaryPath?r:(t=1===u.length?bn(u[0]):"["+u.map(bn).join("+")+"]",r.index(t)),i=n.openCursor(a);return Promise.resolve(new Promise(function(r){i.onsuccess=function(e){var t,e=e.target.result;e?(t=wn(e.value),o(t)&&l.push(t),c||l.length!==s?e.continue():r()):r()}})).then(function(){})}catch(e){return Promise.reject(e)}})).then(function(){return{documents:l=(l=c?l.sort(t):l).slice(r,s)}})})}catch(f){return Promise.reject(f)}},e.getChangedDocumentsSince=function(n,e){try{var i=this,r=e?e.lwt:1,o=e?e.id:"";return Promise.resolve(i.internals).then(function(e){return Promise.resolve(Promise.all([e.dexieTable,e.dexieDeletedTable].map(function(e){try{var t=e.where("[_meta.lwt+"+i.primaryPath+"]").above([r,o]).limit(n);return Promise.resolve(t.toArray()).then(function(e){return e.map(wn)})}catch(e){return Promise.reject(e)}}))).then(function(e){var r,t=e[0],e=e[1],t=t.concat(e),e=i.primaryPath;return(t=(t=t.sort((r=e,function(e,t){return e._meta.lwt===t._meta.lwt?t[r]<e[r]?1:-1:e._meta.lwt-t._meta.lwt}))).slice(0,n)).map(function(e){return{document:e,checkpoint:{id:e[i.primaryPath],lwt:e._meta.lwt}}})})})}catch(n){return Promise.reject(n)}},e.remove=function(){try{var t=this;return Promise.resolve(t.internals).then(function(e){return Promise.resolve(Promise.all([e.dexieDeletedTable.clear(),e.dexieTable.clear()])).then(function(){return t.close()})})}catch(t){return Promise.reject(t)}},e.changeStream=function(){return this.changes$.asObservable()},e.cleanup=function(r){try{var n=this;return Promise.resolve(n.internals).then(function(t){return Promise.resolve(t.dexieDb.transaction("rw",t.dexieDeletedTable,function(){try{var e=Zr()-r;return Promise.resolve(t.dexieDeletedTable.where("_meta.lwt").below(e).toArray()).then(function(e){e=e.map(function(e){return e[n.primaryPath]});return Promise.resolve(t.dexieDeletedTable.bulkDelete(e)).then(function(){})})}catch(e){return Promise.reject(e)}})).then(function(){return!0})})}catch(r){return Promise.reject(r)}},e.getAttachmentData=function(e,t){throw new Error("Attachments are not implemented in the dexie RxStorage. Make a pull request.")},e.close=function(){try{if(this.closed)throw fn("SNH",{database:this.databaseName,collection:this.collectionName});return this.closed=!0,this.changes$.complete(),r=this.internals,Promise.resolve(r).then(function(e){var t=vn.get(r)-1;0==t?(e.dexieDb.close(),vn.delete(r)):vn.set(r,t)}),Promise.resolve()}catch(e){return Promise.reject(e)}var r},Qi),Ui={hash:function(e){return new Promise(function(t){K(e,function(e){t(e)})})},hashKey:"md5",doesBroadcastChangestream:function(){return!1},prepareQuery:function(e,t){if(t.sort)return t.pouchQueryPlan=(r=t,n=dn((e=e).primaryKey),i=[{ddoc:null,name:"_all_docs",type:"special",def:{fields:[{_id:"asc"}]}}],e.indexes&&e.indexes.forEach(function(e){var t=hi((e=Array.isArray(e)?e:[e]).map(function(e){return e===n?"_id":e}));i.push({ddoc:"_design/"+t,name:t,type:"json",def:{fields:e.map(function(e){var t;return(t={})[e===n?"_id":e]="asc",t})}})}),(r=function(e,t){var r=e.selector,n=e.sort;if(Object.values(r).some(function(e){return"object"==typeof e&&0===Object.keys(e).length}))return Object.assign({},Ti,{index:t[0]});n=n,o=Object.keys(r),i=n?n.map(N):[],o=o.length>=i.length?o:i;var i,o=0===i.length?{fields:o}:{fields:o=o.sort(function(e,t){e=i.indexOf(e),-1===e&&(e=Number.MAX_VALUE),t=i.indexOf(t);return e<(t=-1===t?Number.MAX_VALUE:t)?-1:t<e?1:0}),sortOrder:n.map(N)},o=Di(r,n=o.fields,o.sortOrder,t,e.use_index);return{queryOpts:(t=Li(r,o)).queryOpts,index:o,inMemoryFields:Ni(t.inMemoryFields,o,r,n)}}(_i(e,(e=r)&&Yr()(e,!1)),i)).index.def.fields=r.index.def.fields.map(function(e){var t,e=Object.entries(e)[0],r=e[0],e=e[1];return"_id"===r?((t={})[n]=e,t):((t={})[r]=e,t)}),r),t;throw fn("SNH",{query:t});var r,n,i},getSortComparator:function(e,t){var r={};if(t.sort)return t.sort.forEach(function(e){var t=Object.keys(e)[0],e=Object.values(e)[0];r[t]="asc"===e?1:-1}),function(e,t){return n.ZP.find([e,t],{}).sort(r).next()===e?-1:1};throw fn("SNH",{query:t})},getQueryMatcher:function(e,t){var r=new n.AE(t.selector||{});return function(e){return!e._deleted&&!!r.find([e]).next()}}},zi=(Vi.prototype.createStorageInstance=function(e){var t=this,r=this.settings;try{var n=mn(e.databaseName,e.collectionName,r,e.schema),i=new qi(t,e.databaseName,e.collectionName,e.schema,n,e.options,r);return Promise.resolve(i)}catch(t){return Promise.reject(t)}},Vi);function Vi(e){this.name="dexie",this.statics=Ui,this.settings=e}function Qi(e,t,r,n,i,o,s){this.changes$=new ci,this.instanceId=Fi++,this.closed=!1,this.storage=e,this.databaseName=t,this.collectionName=r,this.schema=n,this.internals=i,this.options=o,this.settings=s,this.primaryPath=dn(this.schema.primaryKey)}t=Xi(1934);const Wi=t.expose;t.registerSerializer,t.Transfer;var Gi={storage:function(e){return new zi(0<arguments.length&&void 0!==e?e:{})}()},Ji=0,I=new Map;Wi({createStorageInstance:function(e){try{var t=Ji++;return Promise.resolve(Gi.storage.createStorageInstance(e)).then(function(e){return I.set(t,e),t})}catch(e){return Promise.reject(e)}},bulkWrite:function(e,t){return l(I,e).bulkWrite(t)},findDocumentsById:function(e,t,r){return l(I,e).findDocumentsById(t,r)},query:function(e,t){return l(I,e).query(t)},getAttachmentData:function(e,t,r){return l(I,e).getAttachmentData(t,r)},getChangedDocumentsSince:function(e,t,r){return l(I,e).getChangedDocumentsSince(t,r)},changeStream:function(e){return l(I,e).changeStream()},cleanup:function(e,t){return l(I,e).cleanup(t)},close:function(e){return l(I,e).close()},remove:function(e){return l(I,e).remove()}})})()})();