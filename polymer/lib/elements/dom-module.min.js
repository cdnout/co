import"../utils/boot.js";import{resolveUrl,pathFromUrl}from"../utils/resolve-url.js";import{strictTemplatePolicy}from"../utils/settings.js";let modules={},lcModules={};function setModule(e,t){modules[e]=lcModules[e.toLowerCase()]=t}function findModule(e){return modules[e]||lcModules[e.toLowerCase()]}function styleOutsideTemplateCheck(e){e.querySelector("style")&&console.warn("dom-module %s has style outside template",e.id)}export class DomModule extends HTMLElement{static get observedAttributes(){return["id"]}static import(e,t){if(e){let s=findModule(e);return s&&t?s.querySelector(t):s}return null}attributeChangedCallback(e,t,s,o){t!==s&&this.register()}get assetpath(){if(!this.__assetpath){const e=window.HTMLImports&&HTMLImports.importForElement?HTMLImports.importForElement(this)||document:this.ownerDocument,t=resolveUrl(this.getAttribute("assetpath")||"",e.baseURI);this.__assetpath=pathFromUrl(t)}return this.__assetpath}register(e){if(e=e||this.id){if(strictTemplatePolicy&&void 0!==findModule(e))throw setModule(e,null),new Error(`strictTemplatePolicy: dom-module ${e} re-registered`);this.id=e,setModule(e,this),styleOutsideTemplateCheck(this)}}};DomModule.prototype.modules=modules,customElements.define("dom-module",DomModule);