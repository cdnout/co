define(function(e,t,n){function r(e,t){var n;for(n in t)e[n]=t[n];return e}function o(e,t,n){var i=n.ownerDocument.createEventObject();return r(i,t)}var u,c,s,i,a=window.syn?window.syn:{},l={msie:!(!window.attachEvent||window.opera)||-1<navigator.userAgent.indexOf("Trident/"),opera:!!window.opera,webkit:-1<navigator.userAgent.indexOf("AppleWebKit/"),safari:-1<navigator.userAgent.indexOf("AppleWebKit/")&&-1===navigator.userAgent.indexOf("Chrome/"),gecko:-1<navigator.userAgent.indexOf("Gecko"),mobilesafari:!!navigator.userAgent.match(/Apple.*Mobile.*Safari/),rhino:navigator.userAgent.match(/Rhino/)&&!0,chrome:!!window.chrome&&!!window.chrome.webstore},f={},p=1,d="_synthetic"+(new Date).getTime(),h=/keypress|keyup|keydown/,g=/load|unload|abort|error|select|change|submit|reset|focus|blur|resize|scroll/,m=function(e,t,n,i){return new m.init(e,t,n,i)};m.config=a,m.__tryFocus=function(e){try{e.focus()}catch(e){}},u=function(e,t,n){return e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)},c=function(e,t,n){return e.addEventListener?e.removeEventListener(t,n,!1):e.detachEvent("on"+t,n)},s=m.config.schedule||function(e,t){setTimeout(e,t)},r(m,{init:function(e,t,n,i){var r=m.args(n,t,i),o=this;this.queue=[],this.element=r.element,"function"==typeof this[e]?this[e](r.element,r.options,function(e,t){r.callback&&r.callback.apply(o,arguments),o.done.apply(o,arguments)}):(this.result=m.trigger(r.element,e,r.options),r.callback&&r.callback.call(this,r.element,this.result))},jquery:function(e,t){return window.FuncUnit&&window.FuncUnit.jQuery?window.FuncUnit.jQuery:e&&m.helpers.getWindow(e).jQuery||window.jQuery},args:function(){for(var e={},t=0;t<arguments.length;t++)"function"==typeof arguments[t]?e.callback=arguments[t]:arguments[t]&&arguments[t].jquery?e.element=arguments[t][0]:arguments[t]&&arguments[t].nodeName?e.element=arguments[t]:e.options&&"string"==typeof arguments[t]?e.element=document.getElementById(arguments[t]):arguments[t]&&(e.options=arguments[t]);return e},click:function(e,t,n){m("click!",e,t,n)},defaults:{focus:function(){var t,e;m.support.focusChanges||(e=(t=this).nodeName.toLowerCase(),m.data(t,"syntheticvalue",t.value),"input"!==e&&"textarea"!==e||u(t,"blur",function e(){m.data(t,"syntheticvalue")!==t.value&&m.trigger(t,"change",{}),c(t,"blur",e)}))},submit:function(){m.onParents(this,function(e){if("form"===e.nodeName.toLowerCase())return e.submit(),!1})}},changeOnBlur:function(t,n,i){u(t,"blur",function e(){i!==t[n]&&m.trigger(t,"change",{}),c(t,"blur",e)})},closest:function(e,t){for(;e&&e.nodeName.toLowerCase()!==t.toLowerCase();)e=e.parentNode;return e},data:function(e,t,n){if(e[d]||(e[d]=p++),f[e[d]]||(f[e[d]]={}),f[e[d]],!n)return f[e[d]][t];f[e[d]][t]=n},onParents:function(e,t){for(var n;e&&!1!==n;)n=t(e),e=e.parentNode;return e},focusable:/^(a|area|frame|iframe|label|input|select|textarea|button|html|object)$/i,isFocusable:function(e){var t;return e.getAttributeNode&&(t=e.getAttributeNode("tabIndex")),this.focusable.test(e.nodeName)||t&&t.specified&&m.isVisible(e)},isVisible:function(e){return e.offsetWidth&&e.offsetHeight||e.clientWidth&&e.clientHeight},tabIndex:function(e){var t=e.getAttributeNode("tabIndex");return t&&t.specified&&(parseInt(e.getAttribute("tabIndex"))||0)},bind:u,unbind:c,schedule:s,browser:l,helpers:{createEventObject:o,createBasicStandardEvent:function(e,t,n){var i;try{i=n.createEvent("Events")}catch(e){i=n.createEvent("UIEvents")}finally{i.initEvent(e,!0,!0),r(i,t)}return i},inArray:function(e,t){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1},getWindow:function(e){if(e.ownerDocument)return e.ownerDocument.defaultView||e.ownerDocument.parentWindow},extend:r,scrollOffset:function(e,t){var n=e.document.documentElement,i=e.document.body;if(!t)return{left:(n&&n.scrollLeft||i&&i.scrollLeft||0)+(n.clientLeft||0),top:(n&&n.scrollTop||i&&i.scrollTop||0)+(n.clientTop||0)};window.scrollTo(t.left,t.top)},scrollDimensions:function(e){var t=e.document.documentElement,n=e.document.body,i=t.clientWidth,r=t.clientHeight,o="CSS1Compat"===e.document.compatMode;return{height:o&&r||n.clientHeight||r,width:o&&i||n.clientWidth||i}},addOffset:function(e,t){var n,i=m.jquery(t);"object"==typeof e&&void 0===e.clientX&&void 0===e.clientY&&void 0===e.pageX&&void 0===e.pageY&&i&&(n=(t=i(t)).offset(),e.pageX=n.left+t.width()/2,e.pageY=n.top+t.height()/2)}},key:{ctrlKey:null,altKey:null,shiftKey:null,metaKey:null},dispatch:function(e,t,n,i){if(t.dispatchEvent&&e){var r=e.preventDefault,o=i?-1:0;return i&&u(t,n,function e(t){t.preventDefault(),c(this,n,e)}),e.preventDefault=function(){o++,0<++o&&r.apply(this,[])},t.dispatchEvent(e),o<=0}try{window.event=e}catch(e){}return t.sourceIndex<=0||t.fireEvent&&t.fireEvent("on"+n,e)},create:{page:{event:function(e,t,n){var i,r=m.helpers.getWindow(n).document||document;if(r.createEvent)return(i=r.createEvent("Events")).initEvent(e,!0,!0),i;try{i=o(0,t,n)}catch(e){}return i}},focus:{event:function(e,t,n){return m.onParents(n,function(e){if(m.isFocusable(e)){if("html"!==e.nodeName.toLowerCase())m.__tryFocus(e),i=e;else if(i){var t=m.helpers.getWindow(n).document;if(t!==window.document)return!1;i=(t.activeElement?t.activeElement.blur():i.blur(),null)}return!1}}),!0}}},support:{clickChanges:!1,clickSubmits:!1,keypressSubmits:!1,mouseupSubmits:!1,radioClickChanges:!1,focusChanges:!1,linkHrefJS:!1,keyCharacters:!1,backspaceWorks:!1,mouseDownUpClicks:!1,tabKeyTabs:!1,keypressOnAnchorClicks:!1,optionClickBubbles:!1,pointerEvents:!1,touchEvents:!1,ready:0},trigger:function(e,t,n){n=n||{};var i,r,o,u=m.create,c=u[t]&&u[t].setup,s=h.test(t)?"key":g.test(t)?"page":"mouse",a=u[t]||{},l=u[s],f=e;return 2===m.support.ready&&c&&c(t,n,e),o=n._autoPrevent,delete n._autoPrevent,(r=a.event?a.event(t,n,e):(n=l.options?l.options(t,n,e):n,!m.support.changeBubbles&&/option/i.test(e.nodeName)&&(f=e.parentNode),i=l.event(t,n,f),m.dispatch(i,f,t,o)))&&2===m.support.ready&&m.defaults[t]&&m.defaults[t].call(e,n,o),r},eventSupported:function(e){var t=document.createElement("div"),n=(e="on"+e)in t;return n||(t.setAttribute(e,"return;"),n="function"==typeof t[e]),t=null,n}}),r(m.init.prototype,{then:function(n,e,t,i){m.autoDelay&&this.delay();var r=m.args(t,e,i),o=this;return this.queue.unshift(function(e,t){if("function"!=typeof this[n])return this.result=m.trigger(r.element,n,r.options),r.callback&&r.callback.call(this,r.element,this.result),this;this.element=r.element||e,this[n](this.element,r.options,function(e,t){r.callback&&r.callback.apply(o,arguments),o.done.apply(o,arguments)})}),this},delay:function(e,t){"function"==typeof e&&(t=e,e=null),e=e||600;var n=this;return this.queue.unshift(function(){s(function(){t&&t.apply(n,[]),n.done.apply(n,arguments)},e)}),this},done:function(e,t){t&&(this.element=t),this.queue.length&&this.queue.pop().call(this,this.element,e)},_click:function(e,t,n,i){m.helpers.addOffset(t,e),m.support.pointerEvents&&m.trigger(e,"pointerdown",t),m.support.touchEvents&&m.trigger(e,"touchstart",t),m.trigger(e,"mousedown",t),s(function(){m.support.pointerEvents&&m.trigger(e,"pointerup",t),m.support.touchEvents&&m.trigger(e,"touchend",t),m.trigger(e,"mouseup",t),!m.support.mouseDownUpClicks||i?(m.trigger(e,"click",t),n(!0)):(m.create.click.setup("click",t,e),m.defaults.click.call(e),s(function(){n(!0)},1))},1)},_rightClick:function(e,t,n){m.helpers.addOffset(t,e);var i=r(r({},m.mouse.browser.right.mouseup),t);m.support.pointerEvents&&m.trigger(e,"pointerdown",i),m.trigger(e,"mousedown",i),s(function(){m.support.pointerEvents&&m.trigger(e,"pointerup",i),m.trigger(e,"mouseup",i),m.mouse.browser.right.contextmenu&&m.trigger(e,"contextmenu",r(r({},m.mouse.browser.right.contextmenu),t)),n(!0)},1)},_dblclick:function(e,t,n){m.helpers.addOffset(t,e);var i=this;this._click(e,t,function(){s(function(){i._click(e,t,function(){m.trigger(e,"dblclick",t),n(!0)},!0)},2)})}});function v(i){m[i]=function(e,t,n){return m("_"+i,e,t,n)},m.init.prototype[i]=function(e,t,n){return this.then("_"+i,e,t,n)}}for(var b=["click","dblclick","move","drag","key","type","rightClick"],w=0;w<b.length;w++)v(b[w]);n.exports=m});