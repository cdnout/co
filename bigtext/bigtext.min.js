!function(n,S){"use strict";var o=0,a=S("head"),t=n.BigText,i=S.fn.bigtext,h={DEBUG_MODE:!1,DEFAULT_MIN_FONT_SIZE_PX:null,DEFAULT_MAX_FONT_SIZE_PX:528,GLOBAL_STYLE_ID:"bigtext-style",STYLE_ID:"bigtext-id",LINE_CLASS_PREFIX:"bigtext-line",EXEMPT_CLASS:"bigtext-exempt",noConflict:function(e){return e&&(S.fn.bigtext=i,n.BigText=t),h},supports:{wholeNumberFontSizeOnly:function(){if(!("getComputedStyle"in n))return!0;var e=S("<div/>").css({position:"absolute","font-size":"14.1px"}).insertBefore(S("script").eq(0)),t=n.getComputedStyle(e[0],null),i=t&&"14px"===t.getPropertyValue("font-size");return e.remove(),i}()},init:function(){S("#"+h.GLOBAL_STYLE_ID).length||a.append(h.generateStyleTag(h.GLOBAL_STYLE_ID,[".bigtext * { white-space: nowrap; } .bigtext > * { display: block; }",".bigtext ."+h.EXEMPT_CLASS+", .bigtext ."+h.EXEMPT_CLASS+" * { white-space: normal; }"]))},bindResize:function(e,t){var i;S(n).unbind(e).bind(e,function(){i&&clearTimeout(i),i=setTimeout(t,100)})},getStyleId:function(e){return h.STYLE_ID+"-"+e},generateStyleTag:function(e,t){return S("<style>"+t.join("\n")+"</style>").attr("id",e)},clearCss:function(e){var t=h.getStyleId(e);S("#"+t).remove()},generateCss:function(e,t,i,n){var s=[];h.clearCss(e);for(var r=0,o=t.length;r<o;r++)s.push("#"+e+" ."+h.LINE_CLASS_PREFIX+r+" {"+(n[r]?" white-space: normal;":"")+(t[r]?" font-size: "+t[r]+"px;":"")+(i[r]?" word-spacing: "+i[r]+"px;":"")+"}");return h.generateStyleTag(h.getStyleId(e),s)},jQueryMethod:function(r){return h.init(),r=S.extend({minfontsize:h.DEFAULT_MIN_FONT_SIZE_PX,maxfontsize:h.DEFAULT_MAX_FONT_SIZE_PX,childSelector:"",resize:!0},r||{}),this.each(function(){var e=S(this).addClass("bigtext"),t=e.width(),i=e.attr("id"),n=r.childSelector?e.find(r.childSelector):e.children();i||(i="bigtext-id"+o++,e.attr("id",i)),r.resize&&h.bindResize("resize.bigtext-event-"+i,function(){h.jQueryMethod.call(S("#"+i),r)}),h.clearCss(i),n.addClass(function(e,t){return[t.replace(new RegExp("\\b"+h.LINE_CLASS_PREFIX+"\\d+\\b"),""),h.LINE_CLASS_PREFIX+e].join(" ")});var s=h.calculateSizes(e,n,t,r.maxfontsize,r.minfontsize);a.append(h.generateCss(i,s.fontSizes,s.wordSpacings,s.minFontSizes))}),this.trigger("bigtext:complete")},testLineDimensions:function(e,t,i,n,s,r,o){var a;if(o="number"==typeof o?o:0,e.css(i,n+r),t<=(a=e.width())){if(e.css(i,""),a===t)return{match:"exact",size:parseFloat((parseFloat(n)-.1).toFixed(3))};var c=t-o,l=a-t;return{match:"estimate",size:parseFloat((parseFloat(n)-("word-spacing"===i&&o&&l<c?0:s)).toFixed(3))}}return a},calculateSizes:function(e,t,l,u,p){var i=e.clone(!0).addClass("bigtext-cloned").css({fontFamily:e.css("font-family"),textTransform:e.css("text-transform"),wordSpacing:e.css("word-spacing"),letterSpacing:e.css("letter-spacing"),position:"absolute",left:h.DEBUG_MODE?0:-9999,top:h.DEBUG_MODE?0:-9999}).appendTo(document.body),f=[],r=[],d=[],g=[];return t.css("float","left").each(function(){var e,t,i=S(this),n=h.supports.wholeNumberFontSizeOnly?[8,4,1]:[8,4,1,.1];if(i.hasClass(h.EXEMPT_CLASS))return f.push(null),g.push(null),void d.push(!1);var s=parseFloat(i.css("font-size")),r=(i.width()/s).toFixed(6);t=parseInt(l/r,10)-32;e:for(var o=0,a=n.length;o<a;o++)t:for(var c=1;c<=10;c++){if(u<t+c*n[o]){t=u;break e}if("number"!=typeof(e=h.testLineDimensions(i,l,"font-size",t+c*n[o],n[o],"px",e))){if(t=e.size,"exact"===e.match)break e;break t}}g.push(l/t),u<t?(f.push(u),d.push(!1)):p&&t<p?(f.push(p),d.push(!0)):(f.push(t),d.push(!1))}).each(function(e){var t,i=S(this),n=0;if(i.hasClass(h.EXEMPT_CLASS))r.push(null);else{i.css("font-size",f[e]+"px");for(var s=1;s<3;s+=1)if("number"!=typeof(t=h.testLineDimensions(i,l,"word-spacing",s,1,"px",t))){n=t.size;break}i.css("font-size",""),r.push(n)}}).removeAttr("style"),h.DEBUG_MODE?i.css({"background-color":"rgba(255,255,255,.4)"}):i.remove(),{fontSizes:f,wordSpacings:r,ratios:g,minFontSizes:d}}};S.fn.bigtext=h.jQueryMethod,n.BigText=h}(this,jQuery);