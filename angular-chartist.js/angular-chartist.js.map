{"version":3,"file":"angular-chartist.js","sources":["../src/angular-chartist.js"],"sourcesContent":["import angular from 'angular';\nimport Chartist from 'chartist';\n\nconst angularChartistModule = angular.module('angular-chartist', []);\n\nclass AngularChartistCtrl {\n  constructor($scope, $element) {\n    'ngInject';\n    this.data = $scope.data;\n    this.chartType = $scope.chartType;\n\n    this.events = $scope.events() || {};\n    this.options = $scope.chartOptions() || null;\n    this.responsiveOptions = $scope.responsiveOptions() || null;\n\n    this.element = $element[0];\n\n    this.renderChart();\n\n    $scope.$watch(\n      () => {\n        return {\n          data: $scope.data,\n          chartType: $scope.chartType,\n          chartOptions: $scope.chartOptions() || null,\n          responsiveOptions: $scope.responsiveOptions() || null,\n          events: $scope.events() || {}\n        };\n      },\n      this.update.bind(this),\n      true\n    );\n\n    $scope.$on('$destroy', () => {\n      if (this.chart) {\n        this.chart.detach();\n      }\n    });\n  }\n\n  bindEvents() {\n    Object.keys(this.events).forEach(eventName => {\n      this.chart.on(eventName, this.events[eventName]);\n    });\n  }\n\n  unbindEvents(events) {\n    Object.keys(events).forEach(eventName => {\n      this.chart.off(eventName, events[eventName]);\n    });\n  }\n\n  renderChart() {\n    // ensure that the chart does not get created without data\n    if (this.data) {\n      this.chart = Chartist[this.chartType](this.element, this.data, this.options, this.responsiveOptions);\n\n      this.bindEvents();\n\n      return this.chart;\n    }\n  }\n\n  update(newConfig, oldConfig) {\n    // Update controller with new configuration\n    this.chartType = newConfig.chartType;\n    this.data = newConfig.data;\n    this.options = newConfig.chartOptions;\n    this.responsiveOptions = newConfig.responsiveOptions;\n    this.events = newConfig.events;\n\n    // If chart type changed we need to recreate whole chart, otherwise we can update\n    if (!this.chart || newConfig.chartType !== oldConfig.chartType) {\n      this.renderChart();\n    } else {\n      if (!angular.equals(newConfig.events, oldConfig.events)) {\n        this.unbindEvents(oldConfig.events);\n        this.bindEvents();\n      }\n      this.chart.update(this.data, this.options);\n    }\n  }\n}\n\nangularChartistModule.controller('AngularChartistCtrl', AngularChartistCtrl).directive('chartist', function() {\n  'ngInject';\n  return {\n    restrict: 'EA',\n    scope: {\n      // mandatory\n      data: '=chartistData',\n      chartType: '@chartistChartType',\n      // optional\n      events: '&chartistEvents',\n      chartOptions: '&chartistChartOptions',\n      responsiveOptions: '&chartistResponsiveOptions'\n    },\n    controller: 'AngularChartistCtrl'\n  };\n});\n\nexport default angularChartistModule.name;\n"],"names":["angularChartistModule","angular","module","AngularChartistCtrl","$scope","$element","data","chartType","events","options","chartOptions","responsiveOptions","element","renderChart","$watch","update","bind","$on","chart","detach","keys","forEach","on","eventName","off","Chartist","bindEvents","newConfig","oldConfig","equals","unbindEvents","controller","directive","name"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAGA,IAAMA,wBAAwBC,QAAQC,MAAR,CAAe,kBAAf,EAAmC,EAAnC,CAA9B;;IAEMC;+BACQC,MAAZ,EAAoBC,QAApB,EAA8B;;;;;;SAEvBC,IAAL,GAAYF,OAAOE,IAAnB;SACKC,SAAL,GAAiBH,OAAOG,SAAxB;;SAEKC,MAAL,GAAcJ,OAAOI,MAAP,MAAmB,EAAjC;SACKC,OAAL,GAAeL,OAAOM,YAAP,MAAyB,IAAxC;SACKC,iBAAL,GAAyBP,OAAOO,iBAAP,MAA8B,IAAvD;;SAEKC,OAAL,GAAeP,SAAS,CAAT,CAAf;;SAEKQ,WAAL;;WAEOC,MAAP,CACE,YAAM;aACG;cACCV,OAAOE,IADR;mBAEMF,OAAOG,SAFb;sBAGSH,OAAOM,YAAP,MAAyB,IAHlC;2BAIcN,OAAOO,iBAAP,MAA8B,IAJ5C;gBAKGP,OAAOI,MAAP,MAAmB;OAL7B;KAFJ,EAUE,KAAKO,MAAL,CAAYC,IAAZ,CAAiB,IAAjB,CAVF,EAWE,IAXF;;WAcOC,GAAP,CAAW,UAAX,EAAuB,YAAM;UACvB,MAAKC,KAAT,EAAgB;cACTA,KAAL,CAAWC,MAAX;;KAFJ;;;;;iCAOW;;;aACJC,IAAP,CAAY,KAAKZ,MAAjB,EAAyBa,OAAzB,CAAiC,qBAAa;eACvCH,KAAL,CAAWI,EAAX,CAAcC,SAAd,EAAyB,OAAKf,MAAL,CAAYe,SAAZ,CAAzB;OADF;;;;iCAKWf,QAAQ;;;aACZY,IAAP,CAAYZ,MAAZ,EAAoBa,OAApB,CAA4B,qBAAa;eAClCH,KAAL,CAAWM,GAAX,CAAeD,SAAf,EAA0Bf,OAAOe,SAAP,CAA1B;OADF;;;;kCAKY;;UAER,KAAKjB,IAAT,EAAe;aACRY,KAAL,GAAaO,SAAS,KAAKlB,SAAd,EAAyB,KAAKK,OAA9B,EAAuC,KAAKN,IAA5C,EAAkD,KAAKG,OAAvD,EAAgE,KAAKE,iBAArE,CAAb;;aAEKe,UAAL;;eAEO,KAAKR,KAAZ;;;;;2BAIGS,WAAWC,WAAW;;WAEtBrB,SAAL,GAAiBoB,UAAUpB,SAA3B;WACKD,IAAL,GAAYqB,UAAUrB,IAAtB;WACKG,OAAL,GAAekB,UAAUjB,YAAzB;WACKC,iBAAL,GAAyBgB,UAAUhB,iBAAnC;WACKH,MAAL,GAAcmB,UAAUnB,MAAxB;;;UAGI,CAAC,KAAKU,KAAN,IAAeS,UAAUpB,SAAV,KAAwBqB,UAAUrB,SAArD,EAAgE;aACzDM,WAAL;OADF,MAEO;YACD,CAACZ,QAAQ4B,MAAR,CAAeF,UAAUnB,MAAzB,EAAiCoB,UAAUpB,MAA3C,CAAL,EAAyD;eAClDsB,YAAL,CAAkBF,UAAUpB,MAA5B;eACKkB,UAAL;;aAEGR,KAAL,CAAWH,MAAX,CAAkB,KAAKT,IAAvB,EAA6B,KAAKG,OAAlC;;;;;;;AAKNT,sBAAsB+B,UAAtB,CAAiC,qBAAjC,EAAwD5B,mBAAxD,EAA6E6B,SAA7E,CAAuF,UAAvF,EAAmG,YAAW;;;SAErG;cACK,IADL;WAEE;;YAEC,eAFD;iBAGM,oBAHN;;cAKG,iBALH;oBAMS,uBANT;yBAOc;KAThB;gBAWO;GAXd;CAFF;;AAiBA,sBAAehC,sBAAsBiC,IAArC;;;;;;;;"}