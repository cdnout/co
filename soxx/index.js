!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.Soxx=e()}}(function(){return function e(t,n,s){function o(i,c){if(!n[i]){if(!t[i]){var _="function"==typeof require&&require;if(!c&&_)return _(i,!0);if(r)return r(i,!0);var f=new Error("Cannot find module '"+i+"'");throw f.code="MODULE_NOT_FOUND",f}var u=n[i]={exports:{}};t[i][0].call(u.exports,function(e){var n=t[i][1][e];return o(n?n:e)},u,u.exports,e,t,n,s)}return n[i].exports}for(var r="function"==typeof require&&require,i=0;i<s.length;i++)o(s[i]);return o}({1:[function(e,t,n){"use strict";var s=function(){},o=function r(e){var t=this;return t instanceof r?(t._settings=e,0===t._settings.url.indexOf("http")&&(t._settings.url=t._settings.url.replace("http","ws")),t._settings.onOpen=t._settings.onOpen||s,t._settings.onClose=t._settings.onClose||s,t._settings.onRetry=t._settings.onRetry||s,t._settings.onMessage=t._settings.onMessage||s,t._settings.onError=t._settings.onError||s,t._socket={},t._flags={closing:!1,retrying:!1,retriesLeft:0},t._settings.retry&&(t._flags.retriesLeft=t._settings.retry.count||0,t._settings.retry.delay=t._settings.retry.delay||1e3),t._events={},t._events.onOpen=function(e){t._flags.retrying||t._settings.onOpen(e),t._flags.retrying=!1},t._events.onRetry=function(e){console.warn("Attempting reconnection..."),t._flags.retriesLeft&&(t._flags.retrying=!0,t._flags.retries--,t._settings.onRetry(e),t._events.retryTimeout=setTimeout(function(){t.connect()},t._settings.retry.delay)),console.warn("Retries unsuccessful. Aborting.")},t._events.onClose=function(e){return!t._flags.closing&&(console.error("Soxx error:"),console.error("Socket closed prematurely."),t._settings.retry)?t._events.onRetry(e):(t._flags.closing=!1,void t._settings.onClose(e))},t._events.onMessage=function(e){t._settings.onMessage(e)},t._events.onError=function(e){return console.error("Soxx error:"),console.error(e),t._settings.retry?t._events.onRetry(e):void 0},t.connect=function(){t._socket=new WebSocket(t._settings.url),t._socket.onopen=t._events.onOpen,t._socket.onclose=t._events.onClose,t._socket.onmessage=t._events.onMessage,t._socket.onerror=t._events.onError},t.write=function(e){t._socket.send(e)},t.disconnect=function(){t._flags.closing=!0,t._events.retryTimeout&&(clearTimeout(t._events.retryTimeout),t._events.retryTimeout=!1),t._socket.close()},t.destroy=function(){t.disconnect(),delete t._socket,t._socket={}},t):new r(e)};t.exports=o},{}]},{},[1])(1)});
//# sourceMappingURL=soxx.min.js.map