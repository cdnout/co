!function(t,n){"function"==typeof define&&define.amd?define(n):"object"==typeof module&&module.exports?module.exports=n():t.Monet=n()}("undefined"!=typeof self?self:this,function(){"use strict";var t={apply2:M,assign:S(Object.assign)?Object.assign:function(t,n){for(var i in n)n.hasOwnProperty(i)&&void 0!==n[i]&&(t[i]=n[i]);return t},compose:L,curry:g(R(g),[])([]),idFunction:N,isFunction:S,noop:v,swap:R},i="@@type",r="monet.js",n="Identity",o="Maybe",e="Either",u="Validation",s="List",f="NEL",c="IO",a="MonadT",h="Reader",p="Free";function l(t,n){t[i]=r+"/"+n}function y(n){return function(t){return(t[i]||t.constructor[i])===r+"/"+n}}function d(n){return function(t){t=t[i]||t.constructor&&t.constructor[i];return Boolean(t)&&t.length>=n.length&&t.indexOf(n)===t.length-n.length}}function m(t){return null==t}function v(){}function g(n,i){return function(){var t,t=i.concat((t=arguments,Array.prototype.slice.call(t)));return t.length>=n.length?n.apply(null,t.slice(0,t.length)):g(n,t)}}function L(n,i){return function(t){return n(i(t))}}function S(t){return Boolean(t&&t.constructor&&t.call&&t.apply)}function N(t){return t}function w(t,n){return t===n||t!=t&&n!=n||!(!t||!n)&&(!(!S(t.equals)||!S(n.equals))&&t.equals(n))}function b(n){return function(t){return w(n,t)}}function E(){return!1}function R(i){return function(t,n){return i(n,t)}}function M(t,n,i){return n.ap(t.map(g(i,[])))}function T(t,n){for(var i=t,r=n;!i.isNil&&!r.isNil;){if(!b(i.head())(r.head()))return!1;i=i.tail(),r=r.tail()}return i.isNil&&r.isNil}function O(t,n){return function t(n,i){return i.isNil?et(i):ot(function(){return t(n,i.tail())}).map(g(F,[])(n(i.head())))}(t,n).run()}function A(t,i){return t.foldRight(J)(function(t,n){return i(t)?F(t,n):n})}function V(t,n){return function t(n,i){if(n.isNil)return et(H());var r=n.head();return i(r)?et(G(r)):ot(function(){return t(n.tail(),i)})}(t,n).run()}function _(t,n){return function t(n,i){return n.isNil?et(!1):w(n.head(),i)?et(!0):ot(function(){return t(n.tail(),i)})}(t,n).run()}function F(t,n){return n.cons(t)}function I(){switch(arguments.length){case 0:return new I.fn.init;case 1:return new I.fn.init(arguments[0]);default:return new I.fn.init(arguments[0],arguments[1])}}t.List=I;function q(t,n){n.isNil||(t(n.head()),q(t,n.tail()))}function z(r,t,n){return function t(n,i){return i.isNil?et(n):ot(function(){return t(r(n,i.head()),i.tail())})}(t,n).run()}function j(r,t,n){return function t(n,i){return n.isNil?et(i):ot(function(){return t(n.tail(),i)}).map(function(t){return r(n.head(),t)})}(t,n).run()}function C(t,n){return function t(n,i){return n.isNil?et(i):ot(function(){return t(n.tail(),i).map(function(t){return t.cons(n.head())})})}(t,n).run()}function P(t,n){return t.foldRight(n.of(J))(n.map2(F))}function k(t){return t.foldLeft(J)(R(F))}function x(t,i){return t.bind(function(n){return i.map(function(t){return t(n)})})}var J;function U(t){return new Error("Cannot create an empty Non-Empty List. Passed head is "+t+".")}function B(t,n){if(m(t))throw U(t);return new B.fn.init(t,n)}I.fn=I.prototype={init:function(){var t=arguments[0],n=arguments[1];0===arguments.length?(this.isNil=!0,this.size_=0):(this.isNil=!1,this.head_=t,this.tail_=n||J,this.size_=this.tail_.size()+1),l(this,s)},of:function(t){return new I(t)},size:function(){return this.size_},equals:function(t){return(I.isOfType(t)||B.isOfType(t))&&T(this,t)},cons:function(t){return I(t,this)},snoc:function(t){return this.concat(I(t))},map:function(t){return O(t,this)},toArray:function(){return z(function(t,n){return t.push(n),t},[],this)},toSet:function(){return new Set(this)},foldLeft:function(n){var i=this;return function(t){return z(t,n,i)}},foldRight:function(n){var i=this;return function(t){return j(t,i,n)}},append:function(t){return C(this,t)},filter:function(t){return A(this,t)},find:function(t){return V(this,t)},flatten:function(){return j(C,this,J)},flattenMaybe:function(){return this.flatMap(D.toList)},reverse:function(){return k(this)},bind:function(t){return this.map(t).flatten()},forEach:function(t){q(t,this)},contains:function(t){return _(this,t)},sequenceMaybe:function(){return P(this,D)},sequenceValidation:function(){return this.foldLeft(Q(J))(function(t,n){return t.ap(n.map(function(n){return function(t){return F(n,t)}}))}).map(k)},sequenceEither:function(){return P(this,$)},sequenceIO:function(){return P(this,Z)},sequenceReader:function(){return P(this,it)},sequence:function(t){return P(this,t)},head:function(){return this.head_},headMaybe:function(){return this.isNil?H():G(this.head_)},lookup:function(t){return this.isNil||t>=this.size()?H():D.fromNull(this.toArray()[t])},nth:function(t){return this.isNil||t>=this.size()?void 0:this.toArray()[t]},tail:function(){return this.isNil?J:this.tail_},tails:function(){return this.isNil?I(J,J):this.tail().tails().cons(this)},ap:function(t){return x(this,t)},apTo:function(t){return x(t,this)},isNEL:E,toString:function(){return this.isNil?"Nil":"List("+this.toArray().join(", ")+")"},inspect:function(){return this.toString()}},I.fn.init.prototype=I.fn,l(I,s),l(I.fn.init,s),I.isInstance=y(s),I.isOfType=d(s),I.prototype.empty=function(){return J},I.fromArray=function(t){return t.reduceRight(function(t,n){return t.cons(n)},J)},I.from=function(t){return I.fromArray(Array.from(t))},I.of=function(t){return new I(t,J)},I.prototype.each=I.prototype.forEach,J=t.Nil=new I.fn.init,(t.NEL=t.NonEmptyList=B).of=function(t){return B(t,J)},B.fn=B.prototype={init:function(t,n){if(m(t))throw U(t);this.isNil=!1,this.head_=t,this.tail_=m(n)?J:n,this.size_=this.tail_.size()+1,l(this,f)},equals:function(t){return I.isOfType(t)||B.isOfType(t)&&T(this,t)},cons:function(t){return B(t,this.toList())},snoc:function(t){return this.concat(B(t))},map:function(t){return B(t(this.head_),O(t,this.tail_))},bind:function(i){var t=i(this.head_);if(!t.isNEL())throw new Error("NEL.fn.bind: Passed function must return a NonEmptyList.");t=this.tail().foldLeft(J.snoc(t.head()).append(t.tail()))(function(t,n){n=i(n).toList();return t.snoc(n.head()).append(n.tail())});return new B(t.head(),t.tail())},head:function(){return this.head_},lookup:function(t){return t>=this.size()?H():D.fromNull(this.toArray()[t])},nth:function(t){return t>=this.size()?void 0:this.toArray()[t]},tail:function(){return this.tail_},tails:function(){var t=this.toList().tails().map(B.fromList).flattenMaybe();return B(t.head(),t.tail())},toList:function(){return I(this.head_,this.tail_)},reverse:function(){if(this.tail().isNil)return this;var t=this.tail().reverse();return B(t.head(),t.tail().append(I(this.head())))},foldLeft:function(t){return this.toList().foldLeft(t)},foldRight:function(t){return this.toList().foldRight(t)},reduceLeft:function(t){return this.tail().foldLeft(this.head())(t)},filter:function(t){return A(this.toList(),t)},find:function(t){return V(this.toList(),t)},flatten:function(){return j(C,this.toList().map(function(t){return t.isNEL()?t.toList():t}),J)},flattenMaybe:function(){return this.toList().flatMap(D.toList)},contains:function(t){return _(this.toList(),t)},append:function(t){return B.fromList(this.toList().append(t.toList())).some()},cobind:function(t){return this.cojoin().map(t)},size:function(){return this.size_},forEach:function(t){return this.toList().forEach(t)},isNEL:function(){return!0},toString:function(){return"NEL("+this.toArray().join(", ")+")"},inspect:function(){return this.toString()}},B.fromList=function(t){return t.isNil?H():G(B(t.head(),t.tail()))},B.fromArray=function(t){return B.fromList(I.fromArray(t))},B.from=function(t){return B.fromList(I.from(t))},B.fn.init.prototype=B.fn,l(B,f),l(B.fn.init,f),B.isInstance=y(f),B.isOfType=d(f),B.prototype.toArray=I.prototype.toArray,B.prototype.toSet=I.prototype.toSet,B.prototype.extract=B.prototype.copure=B.prototype.head,B.prototype.cojoin=B.prototype.tails,B.prototype.coflatMap=B.prototype.mapTails=B.prototype.cobind,B.prototype.ap=I.prototype.ap,B.prototype.apTo=I.prototype.apTo;var D=t.Maybe={};D.fromFalsy=function(t){return t?D.Some(t):D.None()},D.fromNull=function(t){return m(t)?D.None():D.Some(t)},D.fromUndefined=function(t){return void 0===t?D.None():D.Some(t)},D.fromEmpty=function(t){return m(n=t)||""===n||(Array.isArray(n)&&0===n.length||"object"==typeof n&&0===Object.keys(n).length)?D.None():D.Some(t);var n},D.of=function(t){return G(t)};var G=D.Just=D.Some=D.some=t.Some=t.Just=function(t){return new D.fn.init(!0,t)},H=D.Nothing=D.None=D.none=t.None=t.Nothing=function(){return new D.fn.init(!1,null)};D.toList=function(t){return t.toList()},D.fn=D.prototype={init:function(t,n){if((this.isValue=t)&&m(n))throw new Error("Can not create Some with illegal value: "+n+".");this.val=n,l(this,o)},isSome:function(){return this.isValue},isNone:function(){return!this.isSome()},bind:function(t){return this.isValue?t(this.val):this},some:function(){if(this.isValue)return this.val;throw new Error("Cannot call .some() on a None.")},orSome:function(t){return this.isValue?this.val:t},orLazy:function(t){return this.cata(t,N)},orNull:function(){return this.orSome(null)},orUndefined:function(){return this.orSome(void 0)},orElse:function(t){return this.catchMap(function(){return t})},ap:function(t){var n=this.val;return this.isValue?t.map(function(t){return t(n)}):this},apTo:function(t){return t.ap(this)},equals:function(n){return D.isOfType(n)&&this.cata(function(){return n.isNone()},function(t){return n.fold(!1)(b(t))})},toArray:function(){return this.map(function(t){return[t]}).orLazy(function(){return[]})},toSet:function(){return new Set(this)},toList:function(){return this.map(I).orLazy(function(){return J})},toEither:function(t){return this.isSome()?tt(this.val):nt(t)},toValidation:function(t){return this.isSome()?Q(this.val):W(t)},fold:function(n){var i=this;return function(t){return i.isSome()?t(i.val):n}},foldLeft:function(t){return this.toList().foldLeft(t)},foldRight:function(t){return this.toList().foldRight(t)},cata:function(t,n){return this.isSome()?n(this.val):t()},catchMap:function(t){return this.isSome()?this:t()},filter:function(n){var i=this;return i.flatMap(function(t){return n(t)?i:H()})},orNoneIf:function(t){return t?H():this},contains:function(t){return!!this.isSome()&&w(this.val,t)},forEach:function(t){this.cata(v,t)},orElseRun:function(t){this.cata(t,v)},toString:function(){return this.isSome()?"Just("+this.val+")":"Nothing"},inspect:function(){return this.toString()}},D.prototype.orJust=D.prototype.getOrElse=D.prototype.orSome,D.prototype.just=D.prototype.some,D.prototype.isJust=D.prototype.isSome,D.prototype.isNothing=D.prototype.isNone,D.prototype.orNothingIf=D.prototype.orNoneIf,D.fn.init.prototype=D.fn,l(D,o),l(D.fn.init,o),D.isInstance=y(o),D.isOfType=d(o);var K=t.Validation={},Q=K.Success=K.success=t.Success=function(t){return new K.fn.init(t,!0)},W=K.Fail=K.fail=t.Fail=function(t){return new K.fn.init(t,!1)};K.of=function(t){return Q(t)},K.fn=K.prototype={init:function(t,n){this.val=t,this.isSuccessValue=n,l(this,u)},success:function(){if(this.isSuccess())return this.val;throw new Error("Cannot call success() on a Fail.")},isSuccess:function(){return this.isSuccessValue},isFail:function(){return!this.isSuccessValue},fail:function(){if(this.isSuccess())throw new Error("Cannot call fail() on a Success.");return this.val},bind:function(t){return this.isSuccess()?t(this.val):this},ap:function(t){var n=this.val;return this.isSuccess()?t.map(function(t){return t(n)}):t.isFail()?K.Fail(X.append(n,t.fail())):this},apTo:function(t){return t.ap(this)},acc:function(){function t(){return t}return this.isSuccessValue?K.success(t):this},foldLeft:function(t){return this.toMaybe().toList().foldLeft(t)},foldRight:function(t){return this.toMaybe().toList().foldRight(t)},cata:function(t,n){return(this.isSuccessValue?n:t)(this.val)},catchMap:function(t){return this.isSuccess()?this:t(this.val)},swap:function(){return(this.isSuccess()?W:Q)(this.val)},failMap:function(t){return this.isFail()?W(t(this.val)):this},bimap:function(t,n){return this.isSuccessValue?this.map(n):this.failMap(t)},forEach:function(t){this.cata(v,t)},forEachFail:function(t){this.cata(t,v)},equals:function(n){return K.isOfType(n)&&this.cata(function(t){return n.cata(b(t),E)},function(t){return n.cata(E,b(t))})},toMaybe:function(){return this.isSuccess()?G(this.val):H()},toEither:function(){return(this.isSuccess()?tt:nt)(this.val)},toString:function(){return(this.isSuccess()?"Success(":"Fail(")+this.val+")"},inspect:function(){return this.toString()}},K.prototype.fold=K.prototype.cata,K.fn.init.prototype=K.fn,l(K,u),l(K.fn.init,u),K.isInstance=y(u),K.isOfType=d(u);var X=t.Semigroup={append:function(t,n){if(S(t.concat))return t.concat(n);throw new Error("Couldn't find a semigroup appender in the environment, please specify your own append function")}},Y=t.monadTransformer=t.MonadT=t.monadT=function(t){return new Y.fn.init(t)};Y.of=function(t){return Y(t)},Y.fn=Y.prototype={init:function(t){this.monad=t,l(K,a)},map:function(n){return Y(this.monad.map(function(t){return t.map(n)}))},bind:function(n){return Y(this.monad.map(function(t){return t.flatMap(n)}))},ap:function(t){return Y(this.monad.flatMap(function(n){return t.perform().map(function(t){return n.ap(t)})}))},perform:function(){return this.monad}},Y.fn.init.prototype=Y.fn;var Z=t.IO=t.io=function(t){return new Z.fn.init(t)};Z.of=function(t){return Z(function(){return t})},Z.fn=Z.prototype={init:function(t){if(!S(t))throw new Error("IO requires a function.");this.effectFn=t,l(this,c)},map:function(t){var n=this;return Z(function(){return t(n.effectFn())})},bind:function(t){var n=this;return Z(function(){return t(n.effectFn()).run()})},ap:function(t){var n=this;return t.map(function(t){return t(n.effectFn())})},apTo:function(t){return t.ap(this)},run:function(){return this.effectFn()}},Z.fn.init.prototype=Z.fn,l(Z,c),l(Z.fn.init,c),Z.isInstance=y(c),Z.isOfType=d(c),Z.prototype.perform=Z.prototype.performUnsafeIO=Z.prototype.run;var $=t.Either={};$.of=function(t){return tt(t)},$.fromTry=function(t){try{return $.right(t())}catch(t){return $.left(t)}},$.fromPromise=function(t){return t.then($.Right,$.Left)};var tt=$.Right=$.right=t.Right=function(t){return new $.fn.init(t,!0)},nt=$.Left=$.left=t.Left=function(t){return new $.fn.init(t,!1)};$.fn=$.prototype={init:function(t,n){this.isRightValue=n,this.value=t,l(this,e)},bind:function(t){return this.isRightValue?t(this.value):this},ap:function(t){var n=this;return this.isRightValue?t.map(function(t){return t(n.value)}):this},apTo:function(t){return t.ap(this)},leftMap:function(t){return this.isLeft()?nt(t(this.value)):this},isRight:function(){return this.isRightValue},isLeft:function(){return!this.isRight()},right:function(){if(this.isRightValue)return this.value;throw new Error("Cannot call right() on a Left.")},left:function(){if(this.isRightValue)throw new Error("Cannot call left() on a Right.");return this.value},foldLeft:function(t){return this.toMaybe().toList().foldLeft(t)},foldRight:function(t){return this.toMaybe().toList().foldRight(t)},cata:function(t,n){return(this.isRightValue?n:t)(this.value)},catchMap:function(t){return this.isRight()?this:t(this.value)},swap:function(){return(this.isRight()?nt:tt)(this.value)},forEach:function(t){this.cata(v,t)},forEachLeft:function(t){this.cata(t,v)},equals:function(n){return $.isOfType(n)&&this.cata(function(t){return n.cata(b(t),E)},function(t){return n.cata(E,b(t))})},bimap:function(t,n){return this.isRightValue?this.map(n):this.leftMap(t)},toMaybe:function(){return this.isRight()?G(this.value):H()},toValidation:function(){return(this.isRight()?Q:W)(this.value)},toString:function(){return this.cata(function(t){return"Left("+t+")"},function(t){return"Right("+t+")"})},toPromise:function(){return this.cata(function(t){return Promise.reject(t)},function(t){return Promise.resolve(t)})},inspect:function(){return this.toString()}},$.prototype.fold=$.prototype.cata,$.fn.init.prototype=$.fn,l($,e),l($.fn.init,e),$.isInstance=y(e),$.isOfType=d(e);var it=t.Reader=function(t){return new it.fn.init(t)};it.of=function(n){return it(function(t){return n})},it.ask=function(){return it(N)},it.fn=it.prototype={init:function(t){this.f=t,l(this,h)},run:function(t){return this.f(t)},bind:function(n){var i=this;return it(function(t){return n(i.run(t)).run(t)})},ap:function(t){var i=this;return t.bind(function(n){return it(function(t){return n(i.run(t))})})},apTo:function(t){return t.ap(this)},map:function(n){var i=this;return it(function(t){return n(i.run(t))})},local:function(n){var i=this;return it(function(t){return i.run(n(t))})}},it.fn.init.prototype=it.fn,l(it,h),l(it.fn.init,h),it.isInstance=y(h),it.isOfType=d(h);var rt=t.Free={},ot=rt.Suspend=t.Suspend=function(t){return new rt.fn.init(t,!0)},et=rt.Return=t.Return=function(t){return new rt.fn.init(t,!1)};function ut(t){return new ut.fn.init(t)}function st(t){var n,i;(i=t).prototype.flatMap=i.prototype.chain=i.prototype.bind,i.pure=i.unit=i.of,i.prototype.of=i.of,S(i.prototype.append)&&(i.prototype.concat=i.prototype.append),i.prototype.point=i.prototype.pure=i.prototype.unit=i.prototype.of,S((i=t).prototype.filter)&&(i.prototype.filterNot=function(n){return this.filter(function(t){return!n(t)})}),(i=t).prototype.join=function(){return this.flatMap(N)},i.map2=function(r){return function(t,i){return t.flatMap(function(n){return i.map(function(t){return r(n,t)})})}},S((i=t).prototype.map)||(i.prototype.map=function(t){return this.bind(L(this.of,t))}),(i=t).prototype.takeLeft=function(t){return M(this,t,function(t,n){return t})},i.prototype.takeRight=function(t){return M(this,t,function(t,n){return n})},S((i=t).prototype.toArray)&&(i.prototype.every=i.prototype.forall=function(t){return this.toArray().every(t)},i.prototype.exists=function(t){return this.toArray().some(t)}),n=t,["equals","map","ap","chain"].filter(function(t){return S(n.prototype[t])}).forEach(function(t){n.prototype["fantasy-land/"+t]=n.prototype[t]}),S((i=t).prototype.toArray)&&(i.prototype[Symbol.iterator]=function(){return this.toArray()[Symbol.iterator]()}),S((t=t).prototype.toArray)&&(t.prototype.to=function(t){return t(this)})}return rt.of=function(t){return et(t)},rt.liftF=function(t){return S(t)?ot(L(et,t)):ot(t.map(et))},rt.fn=rt.prototype={init:function(t,n){(this.isSuspend=n)?this.functor=t:this.val=t,l(this,p)},run:function(){return this.go(function(t){return t()})},bind:function(n){return this.isSuspend?S(this.functor)?ot(L(function(t){return t.bind(n)},this.functor)):ot(this.functor.map(function(t){return t.bind(n)})):n(this.val)},ap:function(t){return this.bind(function(n){return t.map(function(t){return t(n)})})},apTo:function(t){return t.ap(this)},resume:function(){return this.isSuspend?nt(this.functor):tt(this.val)},go1:function(i){return function n(t){return t.resume().cata(function(t){return n(i(t))},N)}(this)},go:function(t){for(var n=this.resume();n.isLeft();)n=t(n.left()).resume();return n.right()}},rt.fn.init.prototype=rt.fn,l(rt,p),l(rt.fn.init,p),rt.isInstance=y(p),rt.isOfType=d(p),(t.Identity=ut).of=function(t){return new ut(t)},(ut.fn=ut.prototype={init:function(t){this.val=t,l(this,n)},bind:function(t){return t(this.val)},get:function(){return this.val},forEach:function(t){t(this.val)},equals:function(t){return ut.isOfType(t)&&b(this.get())(t.get())},contains:function(t){return w(this.val,t)},toString:function(){return"Identity("+this.val+")"},inspect:function(){return this.toString()},ap:function(t){var n=this.val;return t.map(function(t){return t(n)})},apTo:function(t){return t.ap(this)},toArray:function(){return[this.get()]},toList:function(){return I(this.get(),J)},toSet:function(){return new Set(this)}}).init.prototype=ut.fn,l(ut,n),l(ut.fn.init,n),ut.isInstance=y(n),ut.isOfType=d(n),st(Y),st($),st(D),st(Z),st(B),st(I),st(K),st(it),st(rt),st(ut),t});