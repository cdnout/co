/*! kissui.scrollanim 2016-08-31 */
!function(a,b){"function"==typeof define&&define.amd?define([],function(){return a.kissuiPosition=b()}):a.kissuiPosition=b(a)}(this,function(){function a(a){if(a="Kissui.position: "+a,1!=q.safeMode)throw Error(a);console.log(a)}function b(){for(var a=document.querySelectorAll("*["+q.attribute+"]"),b=0;b<a.length;b++){var d=a[b],e=d.getAttribute(q.attribute);c(d,e)}}function c(b,c){for(var d=c.split(" "),e=!0,f=0;f<d.length;f++){var g=d[f];if(q.events.indexOf(g)==-1){e=!1;break}}e?m.push({element:b,event:c}):a("Invalid event name: `"+c+"`. Skipping "+b)}function d(){m=[]}function e(a,b){window.addEventListener?window.addEventListener(a,b,!1):window.attachEvent&&window.attachEvent("on"+a,b)}function f(a,b,c){if(c>0){if(b<a&&a<b+c)return!0}else if(b>a&&a>b+c)return!0;return!1}function g(a,b){var c=b.split(" "),d=!0,e=a.getBoundingClientRect().top,g=a.getBoundingClientRect().bottom,h=a.getBoundingClientRect().left,i=a.getBoundingClientRect().right,k=a.getBoundingClientRect().height,l=a.getBoundingClientRect().width,m=window.innerHeight||document.documentElement.clientHeight,n=document.body.clientWidth||document.documentElement.clientWidth,q=document.body.scrollTop-o,r=document.body.scrollLeft-p;c.indexOf("in")>-1&&(d=e>=0&&h>=0&&g<=m&&i<=n&&(d&&!0)),c.indexOf("out")>-1&&(d=(e+k<0||h+l<0||h>n||e>m)&&(d&&!0)),c.indexOf("top")>-1&&(d=!(0!=e&&!f(0,e,q))&&(d&&!0)),c.indexOf("left")>-1&&(d=!(0!=h&&!f(0,h,r))&&(d&&!0)),c.indexOf("right")>-1&&(d=!(i!=n&&!f(n,i,r))&&(d&&!0)),c.indexOf("bottom")>-1&&(d=!(g!=m&&!f(m,g,q))&&(d&&!0)),c.indexOf("middle")>-1&&(d=!(e+k/2!=m/2&&!f(m/2,e+k/2,q))&&(d&&!0)),c.indexOf("center")>-1&&(d=!(h+l/2!=n/2&&!f(n/2,h+l/2,r))&&(d&&!0)),d&&(a.getAttribute("id")&&j(a.getAttribute("id"),a),j(b,a),j("*",a,b))}function h(a){for(var b=0;b<a.length;b++)g.call(this,a[b].element,a[b].event);o=document.body.scrollTop,p=document.body.scrollLeft}function i(a,b){"object"!=typeof n[a]&&(n[a]=[]),n[a].push(b)}function j(a){var b,c,d,e=[].slice.call(arguments,1);if("object"==typeof n[a])for(c=n[a].slice(),d=c.length,b=0;b<d;b++)c[b].apply(this,e)}function k(a,b){i(a,function c(){_removeListener(a,c),b.apply(this,arguments)})}function l(){o=document.body.scrollTop,p=document.body.scrollLeft,b.call(this),1==q.triggerOnInit&&h.call(this,m),e("scroll",h.bind(this,m)),e("resize",h.bind(this,m))}var m=[],n=[],o=null,p=null,q={triggerOnInit:!0,attribute:"data-kui-position",safeMode:!1};return q.events=["in","out","middle","top","bottom","left","center","right"],_removeListener=function(a,b){var c;"object"==typeof n[a]&&(c=n[a].indexOf(b),c>-1&&n[a].splice(c,1))},{_options:q,_elements:m,on:i,once:k,removeListener:_removeListener,init:l,positions:h,add:c,reset:d}}),function(a,b){"function"==typeof define&&define.amd?define(["kissuiPosition"],function(c){return a.kissuiScrollAnim=b(c)}):a.kissuiScrollAnim=b(a.kissuiPosition)}(this,function(a){function b(a){return l.attributePrefix+a}function c(){m=[];for(var a=document.querySelectorAll("*["+b(l.animAttribute)+"]"),c=0;c<a.length;c++){var e={},f=a[c],g=f.getAttribute(b(l.animAttribute)),h=f.getAttribute(b(l.eventAttribute))||"in";e[h]=g,d(f,e)}}function d(b,c){var d={};for(var e in c)a.add(b,e),d[e]={animation:c[e],active:!1};a.add(b,"out"),b.style.opacity="0",m.push({element:b,event:d})}function e(a){for(var b=0;b<m.length;b++){var c=m[b];if(a===c.element)return c}return null}function f(a,b){for(var c in a.event)c==b&&a.event[c].active===!1&&(a.element.style.opacity="1",a.element.className+=" animated "+a.event[c].animation,function(a,b){g(a.element,["webkitAnimationEnd","mozAnimationEnd","MSAnimationEnd","oanimationend","animationend"],function(){a.element.className=a.element.className.replace("animated "+a.event[b].animation,""),a.event[b].active=!0})}(a,c))}function g(a,b,c){if("object"==typeof b)for(var d=0;d<b.length;d++)g(a,b[d],c);a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c)}function h(a){var b=e(a);for(var c in b.event)b.event[c].active=!1;a.style.opacity=0}function i(a,b){l[a]=b}function j(a){for(var b in a)i(b,a[b])}function k(){c.call(this),a.on("*",function(a,b){f(e(a),b)}),a.on("out",function(a){l.autoReset&&h(a)}),a.init()}var l={triggerOnInit:!0,attributePrefix:"data-kui-",animAttribute:"anim",eventAttribute:"event",defaultEvent:"in",autoReset:!0},m=[];return k(),{_options:l,_elements:m,init:k,add:d,setOption:i,setOptions:j}});