!function(t,o){"object"==typeof exports?module.exports=o(require("./wicket")):"function"==typeof define&&define.amd?define(["wicket"],o):o(t.Wkt)}(this,function(i){return i.Wkt.prototype.isRectangle=!1,i.Wkt.prototype.trunc=function(t){var o,n=[];for(o=0;o<t.length;o+=1)i.isArray(t[o])?n.push(this.trunc(t[o])):0!==o&&this.sameCoords(t[0],t[o])||n.push(t[o]);return n},i.Wkt.prototype.construct={point:function(t,o){var n=o||this.components;return n instanceof Array&&(n=n[0]),L.marker(this.coordsToLatLng(n),t)},multipoint:function(t){var o,n=[],r=this.components;for(o=0;o<r.length;o+=1)n.push(this.construct.point.call(this,t,r[o]));return L.featureGroup(n,t)},linestring:function(t,o){var n=o||this.components,r=this.coordsToLatLngs(n,0,this.coordsToLatLng);return L.polyline(r,t)},multilinestring:function(t){var o=this.components,n=this.coordsToLatLngs(o,1,this.coordsToLatLng);return L.multiPolyline?L.multiPolyline(n,t):L.polyline(n,t)},polygon:function(t){var o=this.trunc(this.components),n=this.coordsToLatLngs(o,1,this.coordsToLatLng);return L.polygon(n,t)},multipolygon:function(t){var o=this.trunc(this.components),n=this.coordsToLatLngs(o,2,this.coordsToLatLng);return L.multiPolygon?L.multiPolygon(n,t):L.polygon(n,t)},geometrycollection:function(t){var o,n,r;for(o=this.trunc(this.components),r=[],n=0;n<this.components.length;n+=1)r.push(this.construct[o[n].type].call(this,o[n]));return L.featureGroup(r,t)}},L.Util.extend(i.Wkt.prototype,{coordsToLatLngs:L.GeoJSON.coordsToLatLngs,coordsToLatLng:function(t,o){var n=o?t.x:t.y,r=o?t.y:t.x;return L.latLng(n,r,!0)}}),i.Wkt.prototype.deconstruct=function(e){var t,r,n,o,s,c,l,u;if(r=function(t){var o,n;for(n=[],o=0;o<t.length;o+=1)i.isArray(t[o])?n.push(r(t[o])):n.push({x:t[o].lng,y:t[o].lat});return n},e.constructor===L.Marker||e.constructor===L.marker)return{type:"point",components:[{x:e.getLatLng().lng,y:e.getLatLng().lat}]};if(e.constructor===L.Rectangle||e.constructor===L.rectangle)return{type:"polygon",isRectangle:!0,components:[[{x:(l=e.getBounds()).getSouthWest().lng,y:l.getNorthEast().lat},{x:l.getNorthEast().lng,y:l.getNorthEast().lat},{x:l.getNorthEast().lng,y:l.getSouthWest().lat},{x:l.getSouthWest().lng,y:l.getSouthWest().lat},{x:l.getSouthWest().lng,y:l.getNorthEast().lat}]]};if((e.constructor===L.Polyline||e.constructor===L.polyline)&&(s=[],!(l=e.getLatLngs())[0].equals(l[l.length-1]))){for(o=0;o<l.length;o+=1)s.push({x:l[o].lng,y:l[o].lat});return{type:"linestring",components:s}}if(e.constructor===L.Polygon||e.constructor===L.polygon){for(c=[],s=[],u=e.getLatLngs()[0],o=0;o<u.length;o+=1)s.push({x:u[o].lng,y:u[o].lat});if(s.push({x:u[0].lng,y:u[0].lat}),c.push(s),e._holes&&0<e._holes.length)for(s=r(e._holes),o=0;o<s.length;o++)s[o].push(s[o][0]),c.push(s[o]);return{type:"polygon",components:c}}if(e.constructor===L.MultiPolyline||e.constructor===L.MultiPolygon||e.constructor===L.LayerGroup||e.constructor===L.FeatureGroup){for(t in n=[],l=e._layers)l.hasOwnProperty(t)&&(l[t].getLatLngs||l[t].getLatLng)&&n.push(this.deconstruct(l[t]));return{type:function(){switch(e.constructor){case L.MultiPolyline:return"multilinestring";case L.MultiPolygon:return"multipolygon";case L.FeatureGroup:return function(){var t,o,n,r;for(t in r=n=o=!0,e._layers)e._layers.hasOwnProperty(t)&&(e._layers[t].constructor!==L.Marker&&(r=!1),e._layers[t].constructor!==L.Polyline&&(n=!1),e._layers[t].constructor!==L.Polygon&&(o=!1));return r?"multipoint":n?"multilinestring":o?"multipolygon":"geometrycollection"}();default:return"geometrycollection"}}(),components:function(){var t,o;for(o=[],t=0;t<n.length;t+=1)n[t].components&&o.push(n[t].components);return o}()}}e.constructor===L.Circle||e.constructor===L.circle?console.log("Deconstruction of L.Circle objects is not yet supported"):console.log("The passed object does not have any recognizable properties.")},i});