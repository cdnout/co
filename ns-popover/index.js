!function(e,t,n){"use strict";var o=t.module("nsPopover",[]),i=t.element,r=t.isDefined,c=[],p=0;o.provider("nsPopover",function(){var e={template:"",theme:"ns-popover-list-theme",plain:"false",trigger:"click",triggerPrevent:!0,angularEvent:"",scopeEvent:"",container:"body",placement:"bottom|left",timeout:1.5,hideOnInsideClick:!1,hideOnOutsideClick:!0,hideOnButtonClick:!0,mouseRelative:"",popupDelay:0};this.setDefaults=function(n){t.extend(e,n)},this.$get=function(){return{getDefaults:function(){return e}}}}),o.directive("nsPopover",["nsPopover","$rootScope","$timeout","$templateCache","$q","$http","$compile","$document","$parse",function(o,a,l,s,u,d,h,g,f){return{restrict:"A",scope:!0,link:function(v,m,O){function P(e,t,n,o,i){var r,c,p=b(e[0]),a=function(){return"center"===n?Math.round(o.left+o.width/2-p.width/2):"right"===n?o.right-p.width:o.left},l=function(){return"center"===n?Math.round(o.top+o.height/2-p.height/2):"bottom"===n?o.bottom-p.height:o.top};"top"===t?(r=o.top-p.height,c=a()):"right"===t?(r=l(),c=o.right):"bottom"===t?(r=o.bottom,c=a()):"left"===t&&(r=l(),c=o.left-p.width),e.css("top",r.toString()+"px").css("left",c.toString()+"px"),i&&("top"===t||"bottom"===t?(c=o.left+o.width/2-c,i.css("left",c.toString()+"px")):(r=o.top+o.height/2-r,i.css("top",r.toString()+"px")))}function k(e,t,n,o){var i={bottom:e.bottom,height:e.height,left:e.left,right:e.right,top:e.top,width:e.width};return t&&(i.left=o.pageX,i.right=o.pageX,i.width=0),n&&(i.top=o.pageY,i.bottom=o.pageY,i.height=0),i}function b(t){var n=e,o=document.documentElement||document.body.parentNode||document.body,i=r(n.pageXOffset)?n.pageXOffset:o.scrollLeft,c=r(n.pageYOffset)?n.pageYOffset:o.scrollTop,p=t.getBoundingClientRect();return i||c?{bottom:p.bottom+c,left:p.left+i,right:p.right+i,top:p.top+c,height:p.height,width:p.width}:p}function C(e){if(e&&0!==e.length){var t=(""+e).toLowerCase();e="true"==t}else e=!1;return e}function y(e,n){return e?t.isString(e)&&n?e:s.get(e)||d.get(e,{cache:!0}):""}function w(){Y.isOpen&&x.hide(0)}function $(e){function n(e){if(e.id===o)return!0;var i=t.element(e).parent()[0];return i?i.id===o?!0:n(i):!1}if(Y.isOpen&&e.target!==m[0]){var o=Y[0].id;n(e.target)||x.hide(0)}}function E(){Y.isOpen&&x.hide(0)}var D=o.getDefaults(),R={template:O.nsPopoverTemplate||D.template,theme:O.nsPopoverTheme||D.theme,plain:C(O.nsPopoverPlain||D.plain),trigger:O.nsPopoverTrigger||D.trigger,triggerPrevent:O.nsPopoverTriggerPrevent||D.triggerPrevent,angularEvent:O.nsPopoverAngularEvent||D.angularEvent,scopeEvent:O.nsPopoverScopeEvent||D.scopeEvent,container:O.nsPopoverContainer||D.container,placement:O.nsPopoverPlacement||D.placement,timeout:O.nsPopoverTimeout||D.timeout,hideOnInsideClick:C(O.nsPopoverHideOnInsideClick||D.hideOnInsideClick),hideOnOutsideClick:C(O.nsPopoverHideOnOutsideClick||D.hideOnOutsideClick),hideOnButtonClick:C(O.nsPopoverHideOnButtonClick||D.hideOnButtonClick),mouseRelative:O.nsPopoverMouseRelative,popupDelay:O.nsPopoverPopupDelay||D.popupDelay,group:O.nsPopoverGroup};R.mouseRelative&&(R.mouseRelativeX=-1!==R.mouseRelative.indexOf("x"),R.mouseRelativeY=-1!==R.mouseRelative.indexOf("y"));var S={id_:n,display:function(e,t){f(O.nsPopover)(v)!==!1&&(l.cancel(S.id_),r(e)||(e=0),R.group&&a.$broadcast("ns:popover:hide",R.group),S.id_=l(function(){Y.isOpen=!0,Y.css("display","block");var e=b(m[0]);R.mouseRelative&&(e=k(e,R.mouseRelativeX,R.mouseRelativeY,t)),P(Y,T,X,e,B),R.hideOnInsideClick&&Y.on("click",w),R.hideOnOutsideClick&&g.on("click",$),R.hideOnButtonClick&&m.on("click",E)},1e3*e))},cancel:function(){l.cancel(S.id_)}},x={id_:n,hide:function(e){l.cancel(x.id_),"-1"!==e&&(r(e)||(e=1.5),x.id_=l(function(){Y.off("click",w),g.off("click",$),m.off("click",E),Y.isOpen=!1,S.cancel(),Y.css("display","none")},1e3*e))},cancel:function(){l.cancel(x.id_)}},_=g.find(R.container);_.length||(_=g.find("body"));var B,T,X;p+=1;var Y=i('<div id="nspopover-'+p+'"></div>');c.push(Y);var I=R.placement.match(/^(top|bottom|left|right)$|((top|bottom)\|(center|left|right)+)|((left|right)\|(center|top|bottom)+)/);if(!I)throw new Error('"'+R.placement+'" is not a valid placement or has a invalid combination of placements.');T=I[6]||I[3]||I[1],X=I[7]||I[4]||I[2]||"center",u.when(y(R.template,R.plain)).then(function(e){e=t.isString(e)?e:e.data&&t.isString(e.data)?e.data:"",Y.html(e),R.theme&&Y.addClass(R.theme),Y.addClass("ns-popover-"+T+"-placement").addClass("ns-popover-"+X+"-align"),h(Y)(v),v.$on("$destroy",function(){Y.remove()}),v.hidePopover=function(){x.hide(0)},v.$on("ns:popover:hide",function(e,t){R.group===t&&v.hidePopover()}),Y.css("position","absolute").css("display","none"),B=Y[0].querySelectorAll(".triangle"),B.length&&(B=i(B)),_.append(Y)}),R.angularEvent?a.$on(R.angularEvent,function(){x.cancel(),S.display(R.popupDelay)}):R.scopeEvent?v.$on(R.scopeEvent,function(){x.cancel(),S.display(Y,R.popupDelay)}):m.on(R.trigger,function(e){!1!==R.triggerPrevent&&e.preventDefault(),x.cancel(),S.display(R.popupDelay,e)}),m.on("mouseout",function(){x.hide(R.timeout)}).on("mouseover",function(){x.cancel()}),Y.on("mouseout",function(e){x.hide(R.timeout)}).on("mouseover",function(){x.cancel()})}}}])}(window,window.angular);
//# sourceMappingURL=nsPopover.min.js.map