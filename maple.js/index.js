!function t(e,r,n){function o(a,u){if(!r[a]){if(!e[a]){var s="function"==typeof require&&require;if(!u&&s)return s(a,!0);if(i)return i(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=r[a]={exports:{}};e[a][0].call(c.exports,function(t){var r=e[a][1][t];return o(r?r:t)},c,c.exports,t,e,r,n)}return r[a].exports}for(var i="function"==typeof require&&require,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),a=t("./models/Module.js"),u=n(a),s=t("./models/Component.js"),l=n(s),c=t("./helpers/Selectors.js"),f=n(c),p=t("./helpers/Utility.js"),d=n(p),h=t("./helpers/Logger.js"),v=n(h),m=t("./helpers/Events.js"),y=n(m),g=t("./helpers/Options.js"),b=n(g);!function(t,e){"undefined"!=typeof System&&(System.transpiler="babel",System.babelOptions={blacklist:[]});var r=function(){function t(){o(this,t),this.findLinks(),this.findTemplates(),y["default"].setupDelegation(),this.observeMutations()}return i(t,[{key:"findLinks",value:function(){var t=this;f["default"].getImports(e).forEach(function(e){return t.waitForLinkElement(e)})}},{key:"findTemplates",value:function(){f["default"].getTemplates(e).forEach(function(t){var e=f["default"].getAllScripts(t.content),r=d["default"].resolver(t,null).production;e.forEach(function(e){r.isLocalPath(e.getAttribute("src"))&&new l["default"](r,t,e)})})}},{key:"waitForLinkElement",value:function(t){return t["import"]?void new u["default"](t):void new Promise(function(e,r){t.addEventListener("load",function(){return e(t)});var n=t.getAttribute("href"),o="Timeout of "+b["default"].RESOLVE_TIMEOUT/1e3+' seconds exceeded whilst waiting for HTML import: "'+n+'"';d["default"].resolveTimeout(o,r)}).then(function(t){return new u["default"](t)},function(t){return v["default"].error(t)})}},{key:"observeMutations",value:function(){var t=this,r=new MutationObserver(function(e){e.forEach(function(e){var r=d["default"].toArray(e.addedNodes);r.forEach(function(e){d["default"].isHTMLImport(e)&&t.waitForLinkElement(e)})})});r.observe(e.head,{childList:!0})}}]),t}(),n=function(){var t=!1;return function(){var n=e.readyState,o=["interactive","complete"];!t&&~o.indexOf(n)&&(t=!0,new r)}}();n(),e.addEventListener("DOMContentLoaded",n)}(window,document)},{"./helpers/Events.js":3,"./helpers/Logger.js":4,"./helpers/Options.js":5,"./helpers/Selectors.js":6,"./helpers/Utility.js":7,"./models/Component.js":8,"./models/Module.js":10}],2:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=function(t){var e={},r=null;return{getSass:function(){return r||"undefined"==typeof t.Sass||(r=new t.Sass),r},fetch:function(r){return e[r]?e[r]:(e[r]=new Promise(function(e){t.fetch(r).then(function(t){return t.text()}).then(function(t){e(t)})}),e[r])}}}(window),e.exports=r["default"]},{}],3:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(r,"__esModule",{value:!0});var o=t("./Utility.js"),i=n(o);!function(){var t=Event.prototype.stopPropagation;Event.prototype.stopPropagation=function(){this.isPropagationStopped=!0,t.apply(this,arguments)}}(),r["default"]=function(t){var e=[],r=null;return{findById:function(t){function r(e,o){return e._rootNodeID===t?void function(){n={properties:this._currentElement.props,component:o}}.bind(e)():void(e._renderedComponent&&!function(){var t=e._renderedComponent._renderedChildren;t&&Object.keys(t).forEach(function(e){r(t[e],o)})}())}var n=void 0;return e.forEach(function(t){r(t._reactInternalInstance._renderedComponent,t)}),n},transformKeys:function(t){var e=void 0===arguments[1]?"toLowerCase":arguments[1],r={};return Object.keys(t).forEach(function(n){r[n[e]()]=t[n]}),r},registerComponent:function(t){e.push(t)},setupDelegation:function(){var e=this,n=r||function(){var e=t.createElement("a"),r=/^on/i,n=[];for(var o in e)o.match(r)&&n.push(o.replace(r,""));return n}();n.forEach(function(r){t.addEventListener(r,function(t){var r="on"+t.type,n=[];i["default"].toArray(t.path).forEach(function(o){if(!t.isPropagationStopped&&o.getAttribute&&o.hasAttribute(i["default"].ATTRIBUTE_REACTID)){var a=e.findById(o.getAttribute(i["default"].ATTRIBUTE_REACTID));if(a&&a.properties){var u=e.transformKeys(a.properties);r in u&&n.push(u[r].bind(a.component,t))}}}),n.forEach(function(t){return t()})})})}}}(window.document),e.exports=r["default"]},{"./Utility.js":7}],4:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=function(t){return{warn:function(e){t.log("%cMaple.js: %c"+e+".","color: rgba(0, 0, 0, .5)","color: #5F9EA0")},info:function(e){t.log("%cMaple.js: %c"+e+".","color: rgba(0, 0, 0, .5)","color: #008DDB")},error:function(e){t.log("%cMaple.js: %c"+e+".","color: rgba(0, 0, 0, .5)","color: #CD6090")}}}(window.console),e.exports=r["default"]},{}],5:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=function(){return{RESOLVE_TIMEOUT:6e4,NAMESPACE_SEPARATOR:"-"}}(),e.exports=r["default"]},{}],6:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(r,"__esModule",{value:!0});var o=t("./Utility.js"),i=n(o),a=function(t){return t=Array.isArray(t)?t.join(","):t,i["default"].toArray(this.querySelectorAll(t))};r["default"]=function(){return{getCSSLinks:function(t){return a.call(t,'link[rel="stylesheet"]')},getCSSInlines:function(t){return a.call(t,['style[type="text/css"]',"style:not([type])"])},getImports:function(t){return a.call(t,'link[rel="import"]:not([data-ignore])')},getTemplates:function(t){return a.call(t,"template[ref]")},getScripts:function(t){var e=['script[type="text/javascript"]','script[type="application/javascript"]','script[type="text/ecmascript"]','script[type="application/ecmascript"]',"script:not([type])"];return a.call(t,e)},getAllScripts:function(t){var e=a.call(t,'script[type="text/jsx"]');return[].concat(i["default"].toArray(this.getScripts(t)),i["default"].toArray(e))}}}(),e.exports=r["default"]},{"./Utility.js":7}],7:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(r,"__esModule",{value:!0});var o=t("./Logger.js"),i=n(o),a=t("./Options.js"),u=n(a);r["default"]=function(t){return{ATTRIBUTE_REACTID:"data-reactid",resolver:function(e,r){function n(e){var r=void 0===arguments[1]?t:arguments[1],n=r.createElement("a");return n.href=e,n.href}var o=e.getAttribute("href")||e.getAttribute("ref"),i=this.getPath(o),a=this.getPath.bind(this),u=this.getName.bind(this),s=this.removeExtension.bind(this);return{production:{getImport:function(){return e},getPath:function(e){return this.isLocalPath(e)?""+this.getAbsolutePath()+"/"+u(e):n(e,t)},resolveComponent:function(t){return s(t)},getSrc:function(t){return u(t)},getAbsolutePath:function(){return n(o)},getRelativePath:function(){return o},isLocalPath:function(t){return!!~t.indexOf(o)}},development:{getImport:function(){return e},getPath:function(e){return this.isLocalPath(e)?""+this.getAbsolutePath()+"/"+e:n(e,t)},resolveComponent:function(t){return""+this.getRelativePath()+"/"+s(t)},getSrc:function(t){return t},getAbsolutePath:function(){return n(i)},getRelativePath:function(){return i},isLocalPath:function(t){return t=a(n(t,r)),!!~n(i).indexOf(t)}}}},toArray:function(t){return Array.from?Array.from(t):Array.prototype.slice.apply(t)},flattenArray:function(t){var e=this,r=void 0===arguments[1]?[]:arguments[1];return t.forEach(function(t){Array.isArray(t)&&e.flattenArray(t,r),!Array.isArray(t)&&r.push(t)}),r},toSnakeCase:function(t){var e=void 0===arguments[1]?"-":arguments[1];return t.split(/([A-Z][a-z]{0,})/g).filter(function(t){return t}).join(e).toLowerCase()},getName:function(t){return t.split("/").slice(-1)},getPath:function(t){return t.split("/").slice(0,-1).join("/")},removeExtension:function(t){return t.split(".").slice(0,-1).join(".")},isHTMLImport:function(t){var e=t instanceof HTMLLinkElement,r="import"===String(t.getAttribute("rel")).toLowerCase(),n=t.hasAttribute("href"),o="text/html"===String(t.getAttribute("type")).toLowerCase();return e&&r&&n&&o},resolveTimeout:function(t,e){setTimeout(function(){return e(t)},u["default"].RESOLVE_TIMEOUT)},typecastProperty:function(t){return String(t).match(/^\d+$/)&&(t=Number(t)),String(t).match(/^\d+\.\d+/i)&&(t=parseFloat(t)),~["true","false"].indexOf(t)&&(t="true"===t),t},tryRegisterElement:function(e,r){var n={"A type with that name is already registered":'Custom element "'+e+'" has already been registered',"The type name is invalid":"Element name "+e+" is invalid and must consist of at least one hyphen"};try{t.registerElement(e,r)}catch(o){var a=Object.keys(n).map(function(t){var e=new RegExp(t,"i");return o.message.match(e)?(i["default"].error(n[t]),!0):!1});if(!a.some(function(t){return t}))throw o}}}}(window.document),e.exports=r["default"]},{"./Logger.js":4,"./Options.js":5}],8:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=function(t,e,r){for(var n=!0;n;){var o=t,i=e,a=r;u=l=s=void 0,n=!1;var u=Object.getOwnPropertyDescriptor(o,i);if(void 0!==u){if("value"in u)return u.value;var s=u.get;return void 0===s?void 0:s.call(a)}var l=Object.getPrototypeOf(o);if(null===l)return void 0;t=l,e=i,r=a,n=!0}},s=t("./Element.js"),l=n(s),c=t("./../helpers/Utility.js"),f=n(c),p=t("./../helpers/Logger.js"),d=n(p),h=t("./../helpers/Options.js"),v=n(h),m=t("./../helpers/Selectors.js"),y=n(m),g=t("./StateManager.js"),b=function(t){function e(t,r,n){var i=this;o(this,e),u(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this.path=t,this.elements={script:n,template:r};var a=n.getAttribute("src");return this.setState(g.State.RESOLVING),"jsx"===a.split(".").pop().toLowerCase()?void d["default"].error("Use JS extension instead of JSX – JSX compilation will work as expected"):void System["import"](this.path.resolveComponent(a)).then(function(e){e["default"]&&Promise.all(i.loadThirdPartyScripts()).then(function(){new l["default"](t,r,n,e["default"]),i.setState(g.State.RESOLVED)},function(t){return d["default"].error(t)})})}return i(e,t),a(e,[{key:"loadThirdPartyScripts",value:function(){var t=this,e=y["default"].getScripts(this.elements.template.content),r=e.filter(function(e){return!t.path.isLocalPath(e.getAttribute("src"))});return r.map(function(t){var e=t.getAttribute("src");return t=document.createElement("script"),t.setAttribute("type","text/javascript"),t.setAttribute("src",e),new Promise(function(e,r){t.addEventListener("load",function(){return e()}),document.head.appendChild(t);var n=t.getAttribute("src"),o="Timeout of "+v["default"].RESOLVE_TIMEOUT/1e3+' seconds exceeded whilst waiting for third-party script: "'+n+'"';f["default"].resolveTimeout(o,r)})})}}]),e}(g.StateManager);r["default"]=b,e.exports=r["default"]},{"./../helpers/Logger.js":4,"./../helpers/Options.js":5,"./../helpers/Selectors.js":6,"./../helpers/Utility.js":7,"./Element.js":9,"./StateManager.js":11}],9:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=function(t,e,r){for(var n=!0;n;){var o=t,i=e,a=r;u=l=s=void 0,n=!1;var u=Object.getOwnPropertyDescriptor(o,i);if(void 0!==u){if("value"in u)return u.value;var s=u.get;return void 0===s?void 0:s.call(a)}var l=Object.getPrototypeOf(o);if(null===l)return void 0;t=l,e=i,r=a,n=!0}},s=t("./../helpers/Options.js"),l=n(s),c=t("./../helpers/Events.js"),f=n(c),p=t("./../helpers/Utility.js"),d=n(p),h=t("./../helpers/Logger.js"),v=n(h),m=t("./../helpers/CacheFactory.js"),y=n(m),g=t("./../helpers/Selectors.js"),b=n(g),E=t("./StateManager.js"),S=function(t){function e(t,r,n,i){o(this,e),u(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this.path=t,this.sass=y["default"].getSass(),this.elements={script:n,template:r},this.script=i;var a=this.getDescriptor();if(!a.extend){if(t.getImport().hasAttribute("data-namespace")){var s=t.getImport().getAttribute("data-namespace");a.name=""+s+l["default"].NAMESPACE_SEPARATOR+a.name}return void d["default"].tryRegisterElement(a.name,{prototype:this.getElementPrototype()})}v["default"].error("Extending native elements currently unsupported due to React – see pull request: https://github.com/facebook/react/pull/3930");var c="HTML"+a.extend+"Element";d["default"].tryRegisterElement(a.name,{prototype:this.getElementPrototype(window[c].prototype),"extends":a.extend.toLowerCase()})}return i(e,t),a(e,[{key:"loadStyles",value:function(t){function e(e){var r=document.createElement("style");r.setAttribute("type","text/css"),r.innerHTML=e,t.appendChild(r)}var r=this;this.setState(E.State.RESOLVING);var n=this.elements.template.content,o=b["default"].getCSSLinks(n),i=b["default"].getCSSInlines(n),a=[].concat(o,i).map(function(t){return new Promise(function(n){return"style"===t.nodeName.toLowerCase()?(e(t.innerHTML),void n(t.innerHTML)):void y["default"].fetch(r.path.getPath(t.getAttribute("href"))).then(function(o){return"text/scss"===t.getAttribute("type")?r.sass?(v["default"].warn("All of your SASS documents should be compiled to CSS for production via your build process"),void r.sass.compile(o,function(t){e(t.text),n(t.text)})):(v["default"].error('You should include "sass.js" for development runtime SASS compilation'),void reject()):(e(o),void n(o))})})});return Promise.all(a).then(function(){return r.setState(E.State.RESOLVED)}),a}},{key:"getDescriptor",value:function(){var t=this.script.name||this.script.toString().match(/(?:function|class)\s*([a-z_]+)/i)[1],e=null;if(~t.indexOf("_")){var r=t.split("_");t=r[0],e=r[1]}return{name:d["default"].toSnakeCase(t),extend:e}}},{key:"getElementPrototype",value:function(t){var e=this.loadStyles.bind(this),r=this.script,n=this.path;return Object.create(t||HTMLElement.prototype,{attachedCallback:{value:function(){function t(t){t=Array.prototype.slice.apply(t);var e=/^data-/i;t.forEach(function(t){if(t.name!==d["default"].ATTRIBUTE_REACTID){var n=t.name.replace(e,"");r.defaultProps[n]=d["default"].typecastProperty(t.value)}})}function o(){var t=this;Promise.all(e(u)).then(function(){t.removeAttribute("unresolved"),t.setAttribute("resolved","")})}r.defaultProps={path:n,element:this.cloneNode(!0)},t.call(this,this.attributes),this.innerHTML="";var i=React.createElement(r),a=document.createElement("content"),u=this.createShadowRoot();u.appendChild(a);var s=React.render(i,a);f["default"].registerComponent(s),o.apply(this)}}})}}]),e}(E.StateManager);r["default"]=S,e.exports=r["default"]},{"./../helpers/CacheFactory.js":2,"./../helpers/Events.js":3,"./../helpers/Logger.js":4,"./../helpers/Options.js":5,"./../helpers/Selectors.js":6,"./../helpers/Utility.js":7,"./StateManager.js":11}],10:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=function(t,e,r){for(var n=!0;n;){var o=t,i=e,a=r;u=l=s=void 0,n=!1;var u=Object.getOwnPropertyDescriptor(o,i);if(void 0!==u){if("value"in u)return u.value;var s=u.get;return void 0===s?void 0:s.call(a)}var l=Object.getPrototypeOf(o);if(null===l)return void 0;t=l,e=i,r=a,n=!0}},s=t("./Component.js"),l=n(s),c=t("./../helpers/Utility.js"),f=n(c),p=t("./../helpers/Logger.js"),d=n(p),h=t("./../helpers/Options.js"),v=n(h),m=t("./../helpers/Selectors.js"),y=n(m),g=t("./StateManager.js"),b=function(t){function e(t){var r=this;o(this,e),u(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this.path=f["default"].resolver(t,t["import"]).development,this.state=g.State.UNRESOLVED,this.elements={link:t},this.components=[],this.loadModule(t).then(function(){var e=r.getTemplates();return e.length>1?void d["default"].error('Component "'+t.getAttribute("href")+'" is attempting to register two components'):([r.getTemplates()[0]].forEach(function(t){var e=y["default"].getAllScripts(t.content),n=y["default"].getImports(t.content);e.map(function(e){var n=e.getAttribute("src");if(r.path.isLocalPath(n)){var o=new l["default"](r.path,t,e);r.components.push(o)}}),n.length&&(d["default"].warn("Components importing other components is an experimental feature which Mapleify does not yet support"),r.importDependencyLinks(n,t.ownerDocument))}),void r.setState(g.State.RESOLVED))},function(t){return d["default"].error(t)})}return i(e,t),a(e,[{key:"setState",value:function(t){this.state=t}},{key:"importDependencyLinks",value:function(t,e){t.forEach(function(t){var r=e.createElement("a");r.href=t.getAttribute("href");var n=r.pathname.substr(1);t.setAttribute("href",n),document.head.appendChild(t)})}},{key:"loadModule",value:function(t){return this.setState(g.State.RESOLVING),new Promise(function(e,r){if(t.hasAttribute("ref"))return void e(t);if(t["import"])return void e(t);t.addEventListener("load",function(){return e(t)});var n=t.getAttribute("href"),o="Timeout of "+v["default"].RESOLVE_TIMEOUT/1e3+' seconds exceeded whilst waiting for HTML import: "'+n+'"';f["default"].resolveTimeout(o,r)})}},{key:"getTemplates",value:function(){var t=this.elements.link["import"];return f["default"].toArray(t.querySelectorAll("template"))}}]),e}(g.StateManager);r["default"]=b,e.exports=r["default"]},{"./../helpers/Logger.js":4,"./../helpers/Options.js":5,"./../helpers/Selectors.js":6,"./../helpers/Utility.js":7,"./Component.js":8,"./StateManager.js":11}],11:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i={UNRESOLVED:0,RESOLVING:1,RESOLVED:2};r.State=i;var a=function(){function t(){n(this,t),this.state=i.UNRESOLVED}return o(t,[{key:"setState",value:function(t){this.state=t}}]),t}();r.StateManager=a},{}]},{},[1]);