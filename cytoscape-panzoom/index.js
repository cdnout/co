!function(){"use strict";var a=function(o,a){o&&a&&(a.fn.cyPanzoom=a.fn.cytoscapePanzoom=function(n){return e.apply(this,[n,o,a]),this},o("core","panzoom",function(n){return e.apply(this,[n,o,a]),this}))},t={zoomFactor:.05,zoomDelay:45,minZoom:.1,maxZoom:10,fitPadding:50,panSpeed:10,panDistance:10,panDragAreaSize:75,panMinPercentSpeed:.25,panInactiveArea:8,panIndicatorMinOpacity:.5,zoomOnly:!1,fitSelector:void 0,animateOnFit:function(){return!1},fitAnimationDuration:1e3,sliderHandleIcon:"fa fa-minus",zoomInIcon:"fa fa-plus",zoomOutIcon:"fa fa-minus",resetIcon:"fa fa-expand"},e=function(n,H,Q){var B=this,X=Q.extend(!0,{},t,n),o=n,a={destroy:function(){var n=Q(B.container()).find(".cy-panzoom");n.data("winbdgs").forEach(function(n){Q(window).unbind(n.evt,n.fn)}),n.data("cybdgs").forEach(function(n){B.off(n.evt,n.fn)}),n.remove()},init:function(){window;return Q(B.container()).each(function(){var n=Q(this);n.cytoscape=H;var e=[],i=Q(window),o=function(n,o){e.push({evt:n,fn:o}),i.bind(n,o)},c=function(n,o){for(var a=0;a<e.length;a++){var t=e[a];if(t.evt===n&&t.fn===o){e.splice(a,1);break}}i.unbind(n,o)},a=[],t=Q('<div class="cy-panzoom"></div>');n.prepend(t),t.css("position","absolute"),t.data("winbdgs",e),t.data("cybdgs",a),X.zoomOnly&&t.addClass("cy-panzoom-zoom-only");var p=Q('<div class="cy-panzoom-zoom-in cy-panzoom-zoom-button"><span class="icon '+X.zoomInIcon+'"></span></div>');t.append(p);var s=Q('<div class="cy-panzoom-zoom-out cy-panzoom-zoom-button"><span class="icon '+X.zoomOutIcon+'"></span></div>');t.append(s);var r=Q('<div class="cy-panzoom-reset cy-panzoom-zoom-button"><span class="icon '+X.resetIcon+'"></span></div>');t.append(r);var u=Q('<div class="cy-panzoom-slider"></div>');t.append(u),u.append('<div class="cy-panzoom-slider-background"></div>');var f=Q('<div class="cy-panzoom-slider-handle"><span class="icon '+X.sliderHandleIcon+'"></span></div>');u.append(f);var d=Q('<div class="cy-panzoom-no-zoom-tick"></div>');u.append(d);var y=Q('<div class="cy-panzoom-panner"></div>');t.append(y);var m=Q('<div class="cy-panzoom-panner-handle"></div>');y.append(m);var v=Q('<div class="cy-panzoom-pan-up cy-panzoom-pan-button"></div>'),l=Q('<div class="cy-panzoom-pan-down cy-panzoom-pan-button"></div>'),h=Q('<div class="cy-panzoom-pan-left cy-panzoom-pan-button"></div>'),z=Q('<div class="cy-panzoom-pan-right cy-panzoom-pan-button"></div>');y.append(v).append(l).append(h).append(z);var g=Q('<div class="cy-panzoom-pan-indicator"></div>');function b(){clearInterval(I),c("mousemove",N),g.hide()}function x(){B.pan(),B.zoom();w=n.width()/2,M=n.height()/2}y.append(g);var w,M,I,Z=!1;function D(){Z=!0,x()}function P(){Z=!1}function O(n){Z||x(),B.zoom({level:n,renderedPosition:{x:w,y:M}})}var N=function(n){n.stopPropagation(),n.preventDefault(),clearInterval(I);var o,a,t,e,i,c,p,s,r,d,m,u,f,v,l=(a={x:(o=n).originalEvent.pageX-y.offset().left-y.width()/2,y:o.originalEvent.pageY-y.offset().top-y.height()/2},t=X.panDragAreaSize,e=Math.sqrt(a.x*a.x+a.y*a.y),i=Math.min(e/t,1),e<X.panInactiveArea?{x:NaN,y:NaN}:(a={x:a.x/e,y:a.y/e},i=Math.max(X.panMinPercentSpeed,i),{x:-1*a.x*(i*X.panDistance),y:-1*a.y*(i*X.panDistance)}));isNaN(l.x)||isNaN(l.y)?g.hide():(c=l,p=Math.sqrt(c.x*c.x+c.y*c.y),s=-1*c.x/p,r=-1*c.y/p,d=y.width(),m=y.height(),u=p/X.panDistance,f=Math.max(X.panIndicatorMinOpacity,u),v=255-Math.round(255*f),g.show().css({left:d/2*s+d/2,top:m/2*r+m/2,background:"rgb("+v+", "+v+", "+v+")"}),I=setInterval(function(){B.panBy(l)},X.panSpeed))};m.bind("mousedown",function(n){N(n),o("mousemove",N)}),m.bind("mouseup",function(){b()}),o("mouseup blur",function(){b()}),u.bind("mousedown",function(){return!1});var S,A,F,j,q=!1,k=2;function E(n,o){void 0===o&&(o=0);var a=k,t=0+a,e=u.height()-f.height()-2*a,i=n.pageY-u.offset().top-o;i<t&&(i=t),e<i&&(i=e);var c=1-(i-t)/(e-t);f.css("top",i);var p=X.minZoom,s=X.maxZoom,r=Math.log(p)/Math.log(s),d=(1-r)*c+r,m=Math.pow(s,d);m<p?m=p:s<m&&(m=s),O(m)}function C(){var n=B.zoom(),o=X.minZoom,a=X.maxZoom,t=Math.log(o)/Math.log(a),e=1-(Math.log(n)/Math.log(a)-t)/(1-t),i=k,c=u.height()-f.height()-2*k,p=e*(c-i);p<i&&(p=i),c<p&&(p=c),f.css("top",p)}function Y(n,a){var t;n.bind("mousedown",function(n){if(n.preventDefault(),n.stopPropagation(),0==n.button){var o=function(){var n=B.zoom(),o=B.zoom()*a;o<X.minZoom&&(o=X.minZoom),o>X.maxZoom&&(o=X.maxZoom),o==X.maxZoom&&n==X.maxZoom||o==X.minZoom&&n==X.minZoom||O(o)};return D(),o(),t=setInterval(o,X.zoomDelay),!1}}),o("mouseup blur",function(){clearInterval(t),P()})}f.bind("mousedown",S=function(n){var a=n.target===f[0]?n.offsetY:0;q=!0,D(),f.addClass("active");var t=0;return o("mousemove",A=function(n){var o=+new Date;return t+10<o&&(t=o,E(n,a)),!1}),o("mouseup",function(){c("mousemove",A),q=!1,f.removeClass("active"),P()}),!1}),u.bind("mousedown",function(n){n.target!==f[0]&&(S(n),E(n))}),C(),F="zoom",j=function(){q||C()},a.push({evt:F,fn:j}),B.on(F,j),function(){var n=X.minZoom,o=X.maxZoom,a=Math.log(n)/Math.log(o),t=1-(Math.log(1)/Math.log(o)-a)/(1-a);if(1<t||t<0)d.hide();else{var e=k,i=u.height()-f.height()-2*k,c=t*(i-e);c<e&&(c=e),i<c&&(c=i),d.css("top",c)}}(),Y(p,1+X.zoomFactor),Y(s,1-X.zoomFactor),r.bind("mousedown",function(n){if(0==n.button){var o=X.fitSelector?B.elements(X.fitSelector):B.elements();if(0===o.size())B.reset();else("function"==typeof X.animateOnFit?X.animateOnFit.call():X.animateOnFit)?B.animate({fit:{eles:o,padding:X.fitPadding}},{duration:X.fitAnimationDuration}):B.fit(o,X.fitPadding);return!1}})})}};return a[o]?a[o].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof o&&o?(Q.error("No such function `"+o+"` for jquery.cytoscapePanzoom"),Q(this)):a.init.apply(this,arguments)};"undefined"!=typeof module&&module.exports?module.exports=function(n,o){a(n,o||require("jquery"))}:"undefined"!=typeof define&&define.amd&&define("cytoscape-panzoom",function(){return a}),"undefined"!=typeof cytoscape&&"undefined"!=typeof jQuery&&a(cytoscape,jQuery)}();