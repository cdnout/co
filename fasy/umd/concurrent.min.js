!function(e,n,t,r){"function"==typeof define&&define.amd?(t=Object.values(t),define(e,t,r)):"undefined"!=typeof module&&module.exports?(t=Object.keys(t).map(e=>require(e)),module.exports=r(...t)):(t=Object.values(t).map(e=>n[e]),n[e]=r(...t))}("FAConcurrent","undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:new Function("return this")(),{"./internals.js":"FAInternals"},function(e){"use strict";var{runner:n}=e,t={},r=new Promise(function(){});Object.assign(u,u(Number.MAX_SAFE_INTEGER));let i={};function u(e=5,i=e){if(e=Number(e),i=Number(i),!(e>=1))throw new Error("Batch size limit must be at least 1.");if(!(i>=1&&i<=e))throw new Error(`Minimum active threshold must be between 1 and ${e}.`);var u=`${e}:${i}`;if(!(u in t)){let e=function(e,t){return async function(e,i=[]){e=n(e);for(var u=i.entries(),o=0,f=[],a=[];;)if(o<t){let n=u.next();if(n.done)return Promise.all(f);{let[t,u]=n.value;o++,a[t]=f[t]=e(u,t,i).then(function(e){return o--,a[t]=r,e})}}else await Promise.race(a)}}(0,i),l=function(e){return async function(t,r=[]){return t=n(t),(await e(async function(e,n,r){return[e,await t(e,n,r)]},r)).reduce(function(e,[n,t]){return t?[...e,n]:e},[])}}(e);t[u]={forEach:function(e){return async function(n,t=[]){await e(n,t)}}(e),map:e,flatMap:function(e){return async function(n,t=[]){return(await e(n,t)).reduce(function(e,n){return e.concat(n)},[])}}(e),filter:l,filterIn:l,filterOut:function(e){return async function(t,r=[]){return t=n(t),e(async function(e,n,r){return!await t(e,n,r)},r)}}(l),reduce:o,reduceRight:f,pipe:a,compose:c}}return t[u]}async function o(e,t,r=[]){e=n(e);var i=t;for(let[n,t]of r.entries())i=await e(i,t,n,r);return i}async function f(e,t,r=[]){e=n(e);var i=t;for(let[n,t]of[...r.entries()].reverse())i=await e(i,t,n,r);return i}function a(e=[]){return 0==e.length&&(e=[e=>e]),function(...n){return o(function(e,t){return e===n?t(...e):t(e)},n,e)}}function c(e=[]){return 0==e.length&&(e=[e=>e]),function(...n){return f(function(e,t){return e===n?t(...e):t(e)},n,e)}}return(i=u).reduce=u.reduce,i.reduceRight=u.reduceRight,i.pipe=u.pipe,i.compose=u.compose,i.filter=u.filter,i.filterIn=u.filterIn,i.filterOut=u.filterOut,i.forEach=u.forEach,i.map=u.map,i.flatMap=u.flatMap,i});