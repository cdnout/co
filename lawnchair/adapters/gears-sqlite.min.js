!function(){if(!window.google||!google.gears){var t=null;if("undefined"!=typeof GearsFactory)t=new GearsFactory;else try{-1!=(t=new ActiveXObject("Gears.Factory")).getBuildInfo().indexOf("ie_mobile")&&t.privateSetGlobalObject(this)}catch(e){void 0!==navigator.mimeTypes&&navigator.mimeTypes["application/x-googlegears"]&&((t=document.createElement("object")).style.display="none",t.width=0,t.height=0,t.type="application/x-googlegears",document.documentElement.appendChild(t))}t&&(window.google||(google={}),google.gears||(google.gears={factory:t}))}}(),Lawnchair.adapter("gears-sqlite",{valid:function(){return window.google&&window.google.gears},init:function(e){var t=this.merge,i="string"==typeof e?{table:e}:e;this.name=t("Lawnchair",i.name),this.table=t("field",i.table),this.db=google.gears.factory.create("beta.database"),this.db.open(this.name),this.db.execute("create table if not exists "+this.table+" (id NVARCHAR(32) UNIQUE PRIMARY KEY, value TEXT, timestamp REAL)")},save:function(o,n){function s(e,t){var i=null==e.key?r.uuid():e.key;delete e.key,r.db.execute("INSERT INTO "+r.table+" (id, value, timestamp) VALUES (?,?,?)",[i,r.serialize(e),r.now()]),null!=t&&(e.key=i,t(e))}var r=this;null==o.key?s(o,n):this.get(o.key,function(e){var t,i,a,l;null!=e?(t=o.key,delete o.key,i=t,a=o,l=n,r.db.execute("UPDATE "+r.table+" SET value=?, timestamp=? WHERE id=?",[r.serialize(a),r.now(),i]),null!=l&&(a.key=i,l(a))):s(o,n)})},get:function(e,t){var i,a=this.db.execute("SELECT * FROM "+this.table+" WHERE id = ?",[e]);a.isValidRow()?((i=this.deserialize(a.field(1))).key=e,a.close(),t(i)):(a.close(),t(null))},all:function(e){for(var t,i=this.terseToVerboseCallback(e),a=this.db.execute("SELECT * FROM "+this.table),l=[];a.isValidRow();)(t=this.deserialize(a.field(1))).key=a.field(0),l.push(t),a.next();a.close(),i(l)},remove:function(e,t){this.db.execute("DELETE FROM "+this.table+" WHERE id = ?",["string"==typeof e?e:e.key]),t&&t()},nuke:function(e){return this.db.execute("DELETE FROM "+this.table),e&&e(),this}});