!function(n,e,t,i){"function"==typeof define&&define.amd?(t=Object.values(t),define(n,t,i)):"undefined"!=typeof module&&module.exports?(t=Object.keys(t).map(n=>require(n)),module.exports=i(...t)):(t=Object.values(t).map(n=>e[n]),e[n]=i(...t))}("IOHelpers","undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:new Function("return this")(),{"./lib/util.js":"MonioUtil","./io.js":"IO","./maybe.js":"Maybe","./either.js":"Either"},function(n,e,t,i){"use strict";var{isFunction:r,isPromise:u,isMonad:o}=n,f=new WeakSet;let a={};function c(n,t,...i){return e(r=>d(r,n).chain(function(n){return n?(Array.isArray(t)?t:[t]).reduce((n,t)=>n.chain(n=>d(r,n).chain(n=>f.has(n)?e.of(n):d(r,t))),e.of()).chain(t=>d(r,t).chain(t=>e.of(f.has(t)?t:n))):e.of(n)}).chain(function n(t){return i=>!i&&t.length>0?d(r,t[0]).chain(n(t.slice(1))):e.of(i)}(i)).run(r))}function d(n,u){if(o(u)){if(e.is(u))return u;if(i.Left.is(u)||t.Nothing.is(u)){let n={returned:u};return f.add(n),e.of(n)}{let n=u.chain(e.of);return e.is(n)?n:e.of(u)}}return r(u)?d(n,u(n)):u&&"object"==typeof u&&r(u.next)?e.do(u):e.of(u)}return a.applyIO=function(n,t){return e(()=>n.run(t))},a.doIO=function(n,...t){return t.length>0?e(i=>e.do(n(i,...t)).run(i)):e.do(n)},a.doIOBind=function(n,t){var i=e(()=>e.do(n).run(t));return(...r)=>r.length>0?e(()=>e.do(n(t,...r)).run(t)):i},a.filterIOList=function(n,t){return t.reduce((e,t)=>e.chain(e=>n(t).map(n=>n?[...e,t]:e)),e.of([]))},a.concatIOList=function(n){return n.reduce((n,e)=>n.map(n=>[...n,e]),e.of([]))},a.iif=c,a.elif=function(n,e){return c(n,e)},a.els=function(n){return c(!0,n)},a.iNot=function(n){return e(e=>d(e,n).map(n=>!n).run(e))},a.iReturn=function(n){return e(e=>d(e,n).map(n=>{var e={returned:n};return f.add(e),e}).run(e))},a.wasReturned=function(n){return f.has(n)},a});