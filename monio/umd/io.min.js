!function(n,t,e,r){"function"==typeof define&&define.amd?(e=Object.values(e),define(n,e,r)):"undefined"!=typeof module&&module.exports?(e=Object.keys(e).map(n=>require(n)),module.exports=r(...e)):(e=Object.values(e).map(n=>t[n]),t[n]=r(...e))}("IO","undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:new Function("return this")(),{"./lib/util.js":"MonioUtil","./nothing.js":"Nothing","./either.js":"Either"},function(n,t,e){"use strict";var{isFunction:r,isPromise:i,isMonad:u,getMonadFlatMap:o}=n,a={};let f={};function c(n){var t={map:function(t){return c(e=>{var r=n(e);return i(r)?r.then(t):t(r)})},chain:e,flatMap:e,bind:e,ap:function(t){return t.map(n)},concat:function(t){return c(e=>{var r=n(e),u=t.run(e);return i(r)||i(u)?Promise.all([r,u]).then(([n,t])=>n.concat(t)):r.concat(u)})},run:function(t){return n(t)},_inspect:function(){return`${t[Symbol.toStringTag]}(${r(n)?n.name||"anonymous function":n&&r(n._inspect)?n._inspect():val})`},_is:function(n){return n===a},[Symbol.toStringTag]:"IO"};return t;function e(t){return c(e=>{var r=n(e);return i(r)?r.then(t).then(n=>n.run(e)):t(r).run(e)})}}function s(n,r,a,f=!1){return new Promise(async function(s,l){try{let[d,h]=i(r)?await async function(n,t){try{if(n=i(n)?await n:n,t&&e.Left.is(n))throw n;return[n,"value"]}catch(n){return[n,"error"]}}(r,f):[r,f&&e.Left.is(r)?"error":"value"],v=t.is(d)?c(()=>s()):function(n,t){return o(n).call(n,t)}(f&&"error"==h&&e.Left.is(d)||!u(d)?c.of(d):d,t=>c(()=>n(t,h).then(s,l)));try{await v.run(a)}catch(t){s(await n(t,"error"))}}catch(n){l(n)}})}function l(n,t){return r(n)?n(t):n&&"object"==typeof n&&r(n.next)?n:void 0}return(f=Object.assign(c,{of:function(n){return c(()=>n)},is:function(n){return n&&r(n._is)&&n._is(a)},do:function(n){return c(t=>{var e=l(n,t);return async function n(r,u){var o="error"===u?e.throw(r):e.next(r);return(o=i(o)?await o:o).done?c.is(o.value)?o.value.run(t):o.value:s(n,o.value,t,!1)}()})},doEither:function(n){return c(t=>{var r=l(n,t);return async function n(u,o){u="error"!=o||e.Left.is(u)?"value"!=o||e.Right.is(u)?e.is(u)?u:e(u):e.Right(u):e.Left(u);try{let o=u.fold(n=>r.throw(n),n=>r.next(n));if((o=i(o)?await o:o).done){let n=i(o.value)?await o.value:o.value;if(n=c.is(n)?n.run(t):n,n=i(n)?await n:n,e.Left.is(n))throw n;return e.Right.is(n)?n:e.Right(n)}return s(n,o.value,t,!0)}catch(u){throw e.Left.is(u)?u:e.Left(u)}}()})}})).RIO=c,f.Reader=c,f});