/*! Monio: io.js
    v0.24.2 (c) 2021 Kyle Simpson
    MIT License: http://getify.mit-license.org
*/
!function UMD(t,n,e,r){"function"==typeof define&&define.amd?(e=Object.values(e),define(t,e,r)):"undefined"!=typeof module&&module.exports?(e=Object.keys(e).map((t=>require(t))),module.exports=r(...e)):(e=Object.values(e).map((t=>n[t])),n[t]=r(...e))}("IO","undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:new Function("return this")(),{"./lib/util.js":"MonioUtil","./nothing.js":"Nothing","./either.js":"Either"},(function DEF(t,n,e){"use strict";var{isFunction:r,isPromise:i,isMonad:o,getMonadFlatMap:a}=t,u={};let f={};function IO(t){var n={map:function map(n){return IO((e=>{var r=t(e);return i(r)?r.then(n):n(r)}))},chain:chain,flatMap:chain,bind:chain,ap:function ap(n){return n.map(t)},concat:function concat(n){return IO((e=>{var r=t(e),o=n.run(e);return i(r)||i(o)?Promise.all([r,o]).then((([t,n])=>t.concat(n))):r.concat(o)}))},run:function run(n){return t(n)},_inspect:function _inspect(){return`${n[Symbol.toStringTag]}(${r(t)?t.name||"anonymous function":t&&r(t._inspect)?t._inspect():val})`},_is:function _is(t){return t===u},[Symbol.toStringTag]:"IO"};return n;function chain(n){return IO((e=>{var r=t(e);return i(r)?r.then(n).then((t=>t.run(e))):n(r).run(e)}))}}function processNext(t,r,u,f=!1){return new Promise((async function c(s,l){try{let[d,h]=i(r)?await async function safeUnwrap(t,n){try{if(t=i(t)?await t:t,n&&e.Left.is(t))throw t;return[t,"value"]}catch(t){return[t,"error"]}}(r,f):[r,f&&e.Left.is(r)?"error":"value"],p=n.is(d)?IO((()=>s())):function monadFlatMap(t,n){return a(t).call(t,n)}(f&&"error"==h&&e.Left.is(d)||!o(d)?IO.of(d):d,(n=>IO((()=>t(n,h).then(s,l)))));try{await p.run(u)}catch(n){s(await t(n,"error"))}}catch(t){l(t)}}))}function getIterator(t,n){return r(t)?t(n):t&&"object"==typeof t&&r(t.next)?t:void 0}return f=Object.assign(IO,{of:function of(t){return IO((()=>t))},is:function is(t){return t&&r(t._is)&&t._is(u)},do:function $do(t){return IO((n=>{var e=getIterator(t,n);return async function next(t,r){var o="error"===r?e.throw(t):e.next(t);return(o=i(o)?await o:o).done?IO.is(o.value)?o.value.run(n):o.value:processNext(next,o.value,n,!1)}()}))},doEither:function doEither(t){return IO((n=>{var r=getIterator(t,n);return async function next(t,o){t="error"!=o||e.Left.is(t)?"value"!=o||e.Right.is(t)?e.is(t)?t:e(t):e.Right(t):e.Left(t);try{let o=t.fold((t=>r.throw(t)),(t=>r.next(t)));if(o=i(o)?await o:o,o.done){let t=i(o.value)?await o.value:o.value;if(t=IO.is(t)?t.run(n):t,t=i(t)?await t:t,e.Left.is(t))throw t;return e.Right.is(t)?t:e.Right(t)}return processNext(next,o.value,n,!0)}catch(t){throw e.Left.is(t)?t:e.Left(t)}}()}))}}),f.RIO=IO,f.Reader=IO,f}));