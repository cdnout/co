!function(n,t){for(let[r,e,i]of t)"function"==typeof define&&define.amd?(e=Object.values(e),define(r,e,i)):"undefined"!=typeof module&&module.exports?(e=Object.keys(e).map(n=>require(n)),module.exports[r]=i(...e)):(e=Object.values(e).map(t=>n[t]),n[r]=i(...e))}("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:new Function("return this")(),[["MonioUtil",{},function(){"use strict";let n={};(n={getMonadFlatMap:r,isMonad:e,liftM:i,isFunction:u,isPromise:o,curry:a}).getMonadFlatMap=r,n.isMonad=e,n.liftM=i,n.isFunction=u,n.isPromise=o,n.curry=a;var t=new Set([Function.prototype.bind,Array.prototype.flatMap,Set.prototype.flatMap,function*(){}().flatMap,async function*(){}().flatMap].filter(u));function r(n){var t=n.flatMap||n.chain||n.bind;return u(t)?t:void 0}function e(n){var e=n&&("object"==typeof n||u(n))?r(n):void 0;return!(!e||t.has(e)||(e.toString()||"").includes("[native code]")&&!(e.name||"").startsWith("bound"))}function i(n){return e(n)?n:Just(n)}function u(n){return!(!n||"function"!=typeof n)}function o(n){return!(!n||!u(n.then))}function a(n,t=n.length){return function r(e){return(...i)=>{var u=[...e,...i];return u.length>=t?n(...u):r(u)}}([])}return n}],["Nothing",{"./lib/util.js":"MonioUtil"},function(n){"use strict";var{isFunction:t}=n,r={};let e={};function i(){var n={map:t,chain:t,flatMap:t,bind:t,ap:t,concat:t,_inspect:function(){return`${n[Symbol.toStringTag]}()`},_is:function(n){return n===r},[Symbol.toStringTag]:"Nothing"};return n;function t(){return n}}return e=Object.assign(i,{of:i,pure:i,unit:i,is:function(n){return n&&t(n._is)&&n._is(r)},isEmpty:function(n){return null==n}})}],["Just",{"./lib/util.js":"MonioUtil"},function(n){"use strict";var{isFunction:t}=n,r={};let e={};function i(n){var e={map:function(t){return i(t(n))},chain:u,flatMap:u,bind:u,ap:function(t){return t.map(n)},concat:function(t){return t.map(t=>n.concat(t))},_inspect:function(){return`${e[Symbol.toStringTag]}(${function n(r){return"string"==typeof r?`"${r}"`:void 0===r?"":t(r)?r.name||"anonymous function":r&&t(r._inspect)?r._inspect():Array.isArray(r)?`[${r.map(t=>null==t?String(t):n(t))}]`:String(r)}(n)})`},_is:function(n){return n===r},[Symbol.toStringTag]:"Just"};return e;function u(t){return t(n)}}return e=Object.assign(i,{of:i,pure:i,unit:i,is:function(n){return n&&t(n._is)&&n._is(r)}})}],["Maybe",{"./lib/util.js":"MonioUtil","./just.js":"Just","./nothing.js":"Nothing"},function(n,t,r){"use strict";var{isFunction:e}=n,i={};Object.assign(o,t),Object.assign(a,r);let u={};function o(n){return c(n)}function a(){return c(r())}function c(n){var r=n,e=o.is(r)&&!s(r),u=a.is(r)&&!s(r);e||u?n=e?r.chain(n=>n):void 0:(r=t(n),e=!0);var f={map:function(n){return e?c(r.map(n)):f},chain:l,flatMap:l,bind:l,ap:function(t){return e?t.map(n):f},concat:function(t){return e?t.map(t=>n.concat(t)):f},fold:function(t,r){return e?r(n):t(n)},_inspect:function(){var n=e?r._inspect().match(/^Just\((.*)\)$/)[1]:"";return`${f[Symbol.toStringTag]}(${n})`},_is:function(n){return n===i||r._is(n)},get[Symbol.toStringTag](){return`Maybe:${r[Symbol.toStringTag]}`}};return f;function l(n){return e?r.chain(n):f}}function s(n){return n&&e(n._is)&&n._is(i)}return u=Object.assign(c,{Just:o,Nothing:a,of:c,pure:c,unit:c,is:s,from:function(n){return a.isEmpty(n)?a():c(n)}})}],["Either",{"./lib/util.js":"MonioUtil","./just.js":"Just"},function(n,t){"use strict";var{isFunction:r}=n,e={};u.is=function(n){return c(n)&&!n._is_right()},o.is=function(n){return c(n)&&n._is_right()};let i={};function u(n){return a(n,!1)}function o(n){return a(n,!0)}function a(n,r=!0){var i={map:function(t){return r?a(t(n),r):i},chain:u,flatMap:u,bind:u,ap:function(t){return r?t.map(n):i},concat:function(t){return r?t.map(t=>n.concat(t)):i},fold:function(t,e){return r?e(n):t(n)},_inspect:function(){var r=t(n)._inspect().match(/^Just\((.*)\)$/)[1];return`${i[Symbol.toStringTag]}(${r})`},_is:function(n){return n===e},_is_right:function(){return r},get[Symbol.toStringTag](){return"Either:"+(r?"Right":"Left")}};return i;function u(t){return r?t(n):i}}function c(n){return n&&r(n._is)&&n._is(e)}return i=Object.assign(function(n){return a(n,!0)},{Left:u,Right:o,of:o,pure:o,unit:o,is:c,fromFoldable:function(n){return n.fold(u,o)}})}],["IO",{"./lib/util.js":"MonioUtil","./nothing.js":"Nothing","./either.js":"Either"},function(n,t,r){"use strict";var{isFunction:e,isPromise:i,isMonad:u,getMonadFlatMap:o}=n,a={};let c={};function s(n){var t={map:function(t){return s(r=>{var e=n(r);return i(e)?e.then(t):t(e)})},chain:r,flatMap:r,bind:r,ap:function(t){return t.map(n)},concat:function(t){return s(r=>{var e=n(r),u=t.run(r);return i(e)||i(u)?Promise.all([e,u]).then(([n,t])=>n.concat(t)):e.concat(u)})},run:function(t){return n(t)},_inspect:function(){return`${t[Symbol.toStringTag]}(${e(n)?n.name||"anonymous function":n&&e(n._inspect)?n._inspect():val})`},_is:function(n){return n===a},[Symbol.toStringTag]:"IO"};return t;function r(t){return s(r=>{var e=n(r);return i(e)?e.then(t).then(n=>n.run(r)):t(e).run(r)})}}function f(n,e,a,c=!1){return new Promise(async function(f,l){try{let[h,d]=i(e)?await async function(n,t){try{if(n=i(n)?await n:n,t&&r.Left.is(n))throw n;return[n,"value"]}catch(n){return[n,"error"]}}(e,c):[e,c&&r.Left.is(e)?"error":"value"],p=t.is(h)?s(()=>f()):function(n,t){return o(n).call(n,t)}(c&&"error"==d&&r.Left.is(h)||!u(h)?s.of(h):h,t=>s(()=>n(t,d).then(f,l)));try{await p.run(a)}catch(t){f(await n(t,"error"))}}catch(n){l(n)}})}function l(n,t){return e(n)?n(t):n&&"object"==typeof n&&e(n.next)?n:void 0}return(c=Object.assign(s,{of:function(n){return s(()=>n)},is:function(n){return n&&e(n._is)&&n._is(a)},do:function(n){return s(t=>{var r=l(n,t);return async function n(e,u){var o="error"===u?r.throw(e):r.next(e);return(o=i(o)?await o:o).done?s.is(o.value)?o.value.run(t):o.value:f(n,o.value,t,!1)}()})},doEither:function(n){return s(t=>{var e=l(n,t);return async function n(u,o){u="error"!=o||r.Left.is(u)?"value"!=o||r.Right.is(u)?r.is(u)?u:r(u):r.Right(u):r.Left(u);try{let o=u.fold(n=>e.throw(n),n=>e.next(n));if((o=i(o)?await o:o).done){let n=i(o.value)?await o.value:o.value;if(n=s.is(n)?n.run(t):n,n=i(n)?await n:n,r.Left.is(n))throw n;return r.Right.is(n)?n:r.Right(n)}return f(n,o.value,t,!0)}catch(u){throw r.Left.is(u)?u:r.Left(u)}}()})}})).RIO=s,c.Reader=s,c}],["IOHelpers",{"./lib/util.js":"MonioUtil","./io.js":"IO","./maybe.js":"Maybe","./either.js":"Either"},function(n,t,r,e){"use strict";var{isFunction:i,isPromise:u,isMonad:o,liftM:a,curry:c}=n,s=new WeakSet;let f={};function l(...n){return t(()=>console.log(...n))}function h(){return t(n=>n)}function d(...n){return t(t=>Promise.all(n.map(n=>F(t,n).run(t))))}function p(n,r){return t(()=>n.run(r))}function g(n,...r){return r.length>0?t(e=>t.do(n(e,...r)).run(e)):t.do(n)}function m(n,...r){return r.length>0?t(e=>t.doEither(n(e,...r)).run(e)):t.doEither(n)}function v(n,r){var e=t(()=>t.do(n).run(r));return(...i)=>i.length>0?t(()=>t.do(n(r,...i)).run(r)):e}function y(n,r){var e=t(()=>t.doEither(n).run(r));return(...i)=>i.length>0?t(()=>t.doEither(n(r,...i)).run(r)):e}function b(n,t){return O(t.map(t=>n(t).map(n=>n?[t]:[])))}function j(n,t){return b(t=>I(n(t)),t)}function O(n){return n.reduce((n,t)=>n.concat(t),t.of([]))}function M(n,r,...e){return t(u=>F(u,n).chain(function(n){return n?(r=i(r)?r():r,(r=Array.isArray(r)?r:[r]).reduce((n,r)=>n.chain(n=>F(u,n).chain(n=>s.has(n)?t.of(n):F(u,r))),t.of()).chain(r=>F(u,r).chain(r=>t.of(s.has(r)?r:n)))):t.of(n)}).chain(function n(r){return e=>!e&&r.length>0?F(u,r[0]).chain(n(r.slice(1))):t.of(e)}(e)).run(u))}function w(n,t){return M(n,t)}function _(n){return M(!0,n)}function S(n){return t(t=>F(t,n).map(n=>{var t={returned:n};return s.add(t),t}).run(t))}function I(n){return t(t=>F(t,n).map(n=>!n).run(t))}function E(n){return s.has(n)}function P(n){return n.map(n=>E(n)?n.returned:void 0)}function L(n,r){return a(r).chain(r=>t(()=>r[n]))}function R(n,r,e){return a(r).chain(r=>a(e).chain(e=>t(()=>e[n]=r)))}function F(n,u){if(o(u)){if(t.is(u))return u;if(e.Left.is(u)||r.Nothing.is(u)){let n={returned:u};return s.add(n),t.of(n)}{let n=u.chain(t.of);return t.is(n)?n:t.of(u)}}return i(u)?F(n,u(n)):u&&"object"==typeof u&&i(u.next)?t.do(u):t.of(u)}return(f={log:l,getReader:h,waitAll:d,applyIO:p,doIO:g,doEIO:m,doIOBind:v,doEIOBind:y,listFilterInIO:b,listFilterOutIO:j,listConcatIO:O,iif:M,elif:w,els:_,iNot:I,iReturn:S,wasReturned:E,ifReturned:P,getPropIO:L,assignPropIO:R}).log=l,f.getReader=h,f.waitAll=d,f.applyIO=p,f.doIO=g,f.doEIO=m,f.doIOBind=v,f.doEIOBind=y,f.listFilterInIO=b,f.listFilterOutIO=j,f.listConcatIO=O,f.iif=M,f.elif=w,f.els=_,f.iNot=I,f.iReturn=S,f.wasReturned=E,f.ifReturned=P,f.getPropIO=L,f.assignPropIO=R,f}],["IOEventStream",{"./lib/util.js":"MonioUtil","./io.js":"IO"},function(n,t){"use strict";var{isFunction:r,curry:e}=n;let i={};function u(n,e,i={}){var{bufferSize:u=100,throwBufferOverflow:o=!1,evtOpts:a={}}=i;return t(()=>{var t,i,c=Symbol("force closed"),{pr:s,next:l}=f(),h=async function*(){t=[],i=[],r(n.addEventListener)?n.addEventListener(e,p,a):r(n.addListener)?n.addListener(e,p):r(n.on)&&n.on(e,p);try{for(;;){if(0==t.length){let{pr:n,next:r}=f();t.push(n),i.push(r)}let n=await Promise.race([s,t.shift()]);if(n==c)return;yield n}}finally{r(n.removeEventListener)?n.removeEventListener(e,p,a):r(n.removeListener)?n.removeListener(e,p):r(n.off)&&n.off(e,p),t.length=i.length=0}}(),d=h.return;return h.return=function(...n){var t=d.apply(h,n);return h.closed=!0,l(c),h.return=d,t},h.closed=!1,h;function p(n){if(i.length>0)i.shift()(n);else if(t.length<u){let{pr:r,next:e}=f();t.push(r),e(n)}else if(o){let t=new Error("Event stream buffer overflow");throw t.evt=n,t}}})}function o(...n){return t(()=>(async function*(){try{for(;;){let t=c(n);if(!(t.length>0))return;try{if(1==t.length){let[r,e,i]=await t[0];if(i.done)return void(n[r]=null);n[r]=e,yield i.value}else{let[r,e,i]=await Promise.race(t);n[r]=null,i.done||(n.push(e),yield i.value)}}catch(n){return Promise.reject(n)}}}finally{await s(n)}})())}function a(...n){return t(()=>(async function*(){try{for(;;){let t=c(n);if(!(t.length>0))return;try{let r=(await Promise.all(t)).reduce(function(t,r){var[e,i,u]=r;return u.done?(n[e]=null,t):(n[e]=i,[...t,u.value])},[]);if(!(r.length>0))return;yield r}catch(n){return Promise.reject(n)}}}finally{await s(...n).run()}})())}function c(n){return n.map(function(t,e){return t&&r(t.next)?(n[e]=async function(){var r=t.next();try{let i=await r;return n[e]=[e,t,i]}catch(t){return n[e]=null,r}}(),n[e]):t}).filter(Boolean)}function s(...n){return t(()=>Promise.all(n.map(async function(n){if(n&&r(n.return))try{return await n.return()}catch(n){}})))}function f(){var n;return{pr:new Promise(t=>n=t),next:n}}return(i=u=Object.assign(e(u,2),{merge:o,zip:a,close:s})).merge=o,i.zip=a,i.close=s,i}],["AsyncEither",{"./lib/util.js":"MonioUtil","./either.js":"Either"},function(n,t){"use strict";var{isFunction:r,isPromise:e}=n,i={};let u={};function o(n){return a(t.Right(n))}function a(n){return c(e(n)?n:t.Left.is(n)?Promise.reject(n):Promise.resolve(n))}function c(n){n=f(n);var r={map:function(t){var r=n=>{var r=t=>{var r=n.chain(t);return e(r)?f(r):n._is_right()?r:Promise.reject(r)};return e(t)?t.then(r):r(t)};return a(n.then(r,r))},chain:u,flatMap:u,bind:u,ap:function(t){return t.map(n)},concat:function(t){return t.map(t=>n.then(n=>n.concat(t)))},fold:function(t,r){var e=n=>t=>t.fold(t=>Promise.reject(n(t)),n);return n.then(e(r),e(t))},_inspect:function(){return`${r[Symbol.toStringTag]}(Promise)`},_is:function(n){return n===i},[Symbol.toStringTag]:"AsyncEither"};return r;function u(r){var i=n=>{var i=r=>{var e=n.chain(r);return s(e)?e.fold(n=>n,n=>n):t.is(e)?e.fold(n=>Promise.reject(n),n=>n):e};return e(r)?r.then(i):i(r)};return a(n.then(i,i))}}function s(n){return n&&r(n._is)&&n._is(i)}function f(n){return n.then(n=>t.is(n)?n:t.Right(n),n=>Promise.reject(t.is(n)?n:t.Left(n)))}return u=Object.assign(a,{Left:function(n){return a(t.Left(n))},Right:o,of:o,pure:o,unit:o,is:s,fromFoldable:function(n){return n.fold(a.Left,a.Right)},fromPromise:c})}],["Monio",{"./lib/util.js":"MonioUtil","./just.js":"Just","./nothing.js":"Nothing","./maybe.js":"Maybe","./either.js":"Either","./async-either.js":"AsyncEither","./io.js":"IO","./io-helpers.js":"IOHelpers","./io-event-stream.js":"IOEventStream"},function(n,t,r,e,i,u,o,a,c){"use strict";let s={};return s.MonioUtil=n,s.Just=t,s.Nothing=r,s.Maybe=e,s.Either=i,s.AsyncEither=u,s.IO=o,s.RIO=o,s.Reader=o,s.IOHelpers=a,s.IOEventStream=c,s}]]);