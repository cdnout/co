/*! Monio: io-helpers.js
    v0.24.2 (c) 2021 Kyle Simpson
    MIT License: http://getify.mit-license.org
*/
!function UMD(t,n,e,i){"function"==typeof define&&define.amd?(e=Object.values(e),define(t,e,i)):"undefined"!=typeof module&&module.exports?(e=Object.keys(e).map((t=>require(t))),module.exports=i(...e)):(e=Object.values(e).map((t=>n[t])),n[t]=i(...e))}("IOHelpers","undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:new Function("return this")(),{"./lib/util.js":"MonioUtil","./io.js":"IO","./maybe.js":"Maybe","./either.js":"Either"},(function DEF(t,n,e,i){"use strict";var{isFunction:r,isPromise:o,isMonad:u,liftM:l,curry:d}=t,f=new WeakSet;let a={};function log(...t){return n((()=>console.log(...t)))}function getReader(){return n((t=>t))}function waitAll(...t){return n((n=>Promise.all(t.map((t=>liftIO(n,t).run(n))))))}function applyIO(t,e){return n((()=>t.run(e)))}function doIO(t,...e){return e.length>0?n((i=>n.do(t(i,...e)).run(i))):n.do(t)}function doEIO(t,...e){return e.length>0?n((i=>n.doEither(t(i,...e)).run(i))):n.doEither(t)}function doIOBind(t,e){var i=n((()=>n.do(t).run(e)));return(...r)=>r.length>0?n((()=>n.do(t(e,...r)).run(e))):i}function doEIOBind(t,e){var i=n((()=>n.doEither(t).run(e)));return(...r)=>r.length>0?n((()=>n.doEither(t(e,...r)).run(e))):i}function listFilterInIO(t,n){return listConcatIO(n.map((n=>t(n).map((t=>t?[n]:[])))))}function listFilterOutIO(t,n){return listFilterInIO((n=>iNot(t(n))),n)}function listConcatIO(t){return t.reduce(((t,n)=>t.concat(n)),n.of([]))}function iif(t,e,...i){return n((o=>liftIO(o,t).chain((function doThens(t){return t?(e=r(e)?e():e,(e=Array.isArray(e)?e:[e]).reduce(((t,e)=>t.chain((t=>liftIO(o,t).chain((t=>f.has(t)?n.of(t):liftIO(o,e)))))),n.of()).chain((e=>liftIO(o,e).chain((e=>n.of(f.has(e)?e:t)))))):n.of(t)})).chain(function doNextElse(t){return e=>!e&&t.length>0?liftIO(o,t[0]).chain(doNextElse(t.slice(1))):n.of(e)}(i)).run(o)))}function elif(t,n){return iif(t,n)}function els(t){return iif(!0,t)}function iReturn(t){return n((n=>liftIO(n,t).map((t=>{var n={returned:t};return f.add(n),n})).run(n)))}function iNot(t){return n((n=>liftIO(n,t).map((t=>!t)).run(n)))}function wasReturned(t){return f.has(t)}function ifReturned(t){return t.map((t=>wasReturned(t)?t.returned:void 0))}function getPropIO(t,e){return l(e).chain((e=>n((()=>e[t]))))}function assignPropIO(t,e,i){return l(e).chain((e=>l(i).chain((i=>n((()=>i[t]=e))))))}function liftIO(t,o){if(u(o)){if(n.is(o))return o;if(i.Left.is(o)||e.Nothing.is(o)){let t={returned:o};return f.add(t),n.of(t)}{let t=o.chain(n.of);return n.is(t)?t:n.of(o)}}return r(o)?liftIO(t,o(t)):o&&"object"==typeof o&&r(o.next)?n.do(o):n.of(o)}return a={log:log,getReader:getReader,waitAll:waitAll,applyIO:applyIO,doIO:doIO,doEIO:doEIO,doIOBind:doIOBind,doEIOBind:doEIOBind,listFilterInIO:listFilterInIO,listFilterOutIO:listFilterOutIO,listConcatIO:listConcatIO,iif:iif,elif:elif,els:els,iNot:iNot,iReturn:iReturn,wasReturned:wasReturned,ifReturned:ifReturned,getPropIO:getPropIO,assignPropIO:assignPropIO},a.log=log,a.getReader=getReader,a.waitAll=waitAll,a.applyIO=applyIO,a.doIO=doIO,a.doEIO=doEIO,a.doIOBind=doIOBind,a.doEIOBind=doEIOBind,a.listFilterInIO=listFilterInIO,a.listFilterOutIO=listFilterOutIO,a.listConcatIO=listConcatIO,a.iif=iif,a.elif=elif,a.els=els,a.iNot=iNot,a.iReturn=iReturn,a.wasReturned=wasReturned,a.ifReturned=ifReturned,a.getPropIO=getPropIO,a.assignPropIO=assignPropIO,a}));