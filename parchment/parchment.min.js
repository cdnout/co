!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Parchment=e():t.Parchment=e()}(window,function(){return s=[function(t,e,s){t.exports=s(1)},function(t,e,s){"use strict";s.r(e),s.d(e,"ParentBlot",function(){return c}),s.d(e,"ContainerBlot",function(){return m}),s.d(e,"LeafBlot",function(){return f}),s.d(e,"EmbedBlot",function(){return C}),s.d(e,"ScrollBlot",function(){return w}),s.d(e,"BlockBlot",function(){return B}),s.d(e,"InlineBlot",function(){return E}),s.d(e,"TextBlot",function(){return k}),s.d(e,"Attributor",function(){return N}),s.d(e,"ClassAttributor",function(){return v}),s.d(e,"StyleAttributor",function(){return y}),s.d(e,"AttributorStore",function(){return A}),s.d(e,"Registry",function(){return l}),s.d(e,"Scope",function(){return o}),(e=n=n||{})[e.TYPE=3]="TYPE",e[e.LEVEL=12]="LEVEL",e[e.ATTRIBUTE=13]="ATTRIBUTE",e[e.BLOT=14]="BLOT",e[e.INLINE=7]="INLINE",e[e.BLOCK=11]="BLOCK",e[e.BLOCK_BLOT=10]="BLOCK_BLOT",e[e.INLINE_BLOT=6]="INLINE_BLOT",e[e.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",e[e.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",e[e.ANY=15]="ANY";var o=n,i=class{constructor(){this.head=null,this.tail=null,this.length=0}append(...t){this.insertBefore(t[0],null),1<t.length&&(t=t.slice(1),this.append(...t))}at(t){const e=this.iterator();let s=e();for(;s&&0<t;)--t,s=e();return s}contains(t){const e=this.iterator();let s=e();for(;s;){if(s===t)return!0;s=e()}return!1}indexOf(t){const e=this.iterator();let s=e(),i=0;for(;s;){if(s===t)return i;i+=1,s=e()}return-1}insertBefore(t,e){null!=t&&(this.remove(t),null!=(t.next=e)?(t.prev=e.prev,null!=e.prev&&(e.prev.next=t),e.prev=t,e===this.head&&(this.head=t)):null!=this.tail?((this.tail.next=t).prev=this.tail,this.tail=t):(t.prev=null,this.head=this.tail=t),this.length+=1)}offset(t){let e=0,s=this.head;for(;null!=s;){if(s===t)return e;e+=s.length(),s=s.next}return-1}remove(t){this.contains(t)&&(null!=t.prev&&(t.prev.next=t.next),null!=t.next&&(t.next.prev=t.prev),t===this.head&&(this.head=t.next),t===this.tail&&(this.tail=t.prev),--this.length)}iterator(e=this.head){return()=>{var t=e;return null!=e&&(e=e.next),t}}find(t,e=!1){const s=this.iterator();let i=s();for(;i;){var r=i.length();if(t<r||e&&t===r&&(null==i.next||0!==i.next.length()))return[i,t];t-=r,i=s()}return[null,0]}forEach(t){const e=this.iterator();let s=e();for(;s;)t(s),s=e()}forEachAt(s,i,r){if(!(i<=0)){const[o,n]=this.find(s);let t=s-n;const a=this.iterator(o);let e=a();for(;e&&t<s+i;){const o=e.length();s>t?r(e,s-t,Math.min(i,t+o-s)):r(e,0,Math.min(o,s+i-t)),t+=o,e=a()}}}map(s){return this.reduce((t,e)=>(t.push(s(e)),t),[])}reduce(t,e){const s=this.iterator();let i=s();for(;i;)e=t(e,i),i=s();return e}};class a extends Error{constructor(t){super(t="[Parchment] "+t),this.message=t,this.name=this.constructor.name}}class l{constructor(){this.attributes={},this.classes={},this.tags={},this.types={}}static find(t,e=!1){return null==t?null:this.blots.has(t)?this.blots.get(t)||null:e?this.find(t.parentNode,e):null}create(t,e,s){var i=this.query(e);if(null==i)throw new a(`Unable to create ${e} blot`);const r=i,o=e instanceof Node||e.nodeType===Node.TEXT_NODE?e:r.create(s),n=new r(t,o,s);return l.blots.set(n.domNode,n),n}find(t,e=!1){return l.find(t,e)}query(t,e=o.ANY){let s;return"string"==typeof t?s=this.types[t]||this.attributes[t]:t instanceof Text||t.nodeType===Node.TEXT_NODE?s=this.types.text:"number"==typeof t?t&o.LEVEL&o.BLOCK?s=this.types.block:t&o.LEVEL&o.INLINE&&(s=this.types.inline):t instanceof HTMLElement&&((t.getAttribute("class")||"").split(/\s+/).some(t=>(s=this.classes[t],!!s)),s=s||this.tags[t.tagName]),null!=s&&e&o.LEVEL&s.scope&&e&o.TYPE&s.scope?s:null}register(...t){if(1<t.length)return t.map(t=>this.register(t));const e=t[0];if("string"!=typeof e.blotName&&"string"!=typeof e.attrName)throw new a("Invalid definition");if("abstract"===e.blotName)throw new a("Cannot register abstract class");return this.types[e.blotName||e.attrName]=e,"string"==typeof e.keyName?this.attributes[e.keyName]=e:(null!=e.className&&(this.classes[e.className]=e),null!=e.tagName&&(Array.isArray(e.tagName)?e.tagName=e.tagName.map(t=>t.toUpperCase()):e.tagName=e.tagName.toUpperCase(),(Array.isArray(e.tagName)?e.tagName:[e.tagName]).forEach(t=>{null!=this.tags[t]&&null!=e.className||(this.tags[t]=e)}))),e}}l.blots=new WeakMap;class r{constructor(t,e){this.scroll=t,this.domNode=e,l.blots.set(e,this),this.prev=null,this.next=null}static create(t){if(null==this.tagName)throw new a("Blot definition missing tagName");let e;return e=Array.isArray(this.tagName)?("string"==typeof t&&(t=t.toUpperCase(),parseInt(t,10).toString()===t&&(t=parseInt(t,10))),"number"==typeof t?document.createElement(this.tagName[t-1]):-1<this.tagName.indexOf(t)?document.createElement(t):document.createElement(this.tagName[0])):document.createElement(this.tagName),this.className&&e.classList.add(this.className),e}get statics(){return this.constructor}attach(){}clone(){var t=this.domNode.cloneNode(!1);return this.scroll.create(t)}detach(){null!=this.parent&&this.parent.removeChild(this),l.blots.delete(this.domNode)}deleteAt(t,e){this.isolate(t,e).remove()}formatAt(t,e,s,i){const r=this.isolate(t,e);if(null!=this.scroll.query(s,o.BLOT)&&i)r.wrap(s,i);else if(null!=this.scroll.query(s,o.ATTRIBUTE)){const t=this.scroll.create(this.statics.scope);r.wrap(t),t.format(s,i)}}insertAt(t,e,s){s=null==s?this.scroll.create("text",e):this.scroll.create(e,s),t=this.split(t);this.parent.insertBefore(s,t||void 0)}isolate(t,e){const s=this.split(t);if(null==s)throw new Error("Attempt to isolate at end");return s.split(e),s}length(){return 1}offset(t=this.parent){return null==this.parent||this===t?0:this.parent.children.offset(this)+this.parent.offset(t)}optimize(t){!this.statics.requiredContainer||this.parent instanceof this.statics.requiredContainer||this.wrap(this.statics.requiredContainer.blotName)}remove(){null!=this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),this.detach()}replaceWith(t,e){t="string"==typeof t?this.scroll.create(t,e):t;return null!=this.parent&&(this.parent.insertBefore(t,this.next||void 0),this.remove()),t}split(t,e){return 0===t?this:this.next}update(t,e){}wrap(t,e){const s="string"==typeof t?this.scroll.create(t,e):t;if(null!=this.parent&&this.parent.insertBefore(s,this.next||void 0),"function"!=typeof s.appendChild)throw new a(`Cannot wrap ${t}`);return s.appendChild(this),s}}r.blotName="abstract";var n=r;function h(e,s){let i=s.find(e);if(null==i)try{i=s.create(e)}catch(t){i=s.create(o.INLINE),Array.from(e.childNodes).forEach(t=>{i.domNode.appendChild(t)}),e.parentNode&&e.parentNode.replaceChild(i.domNode,e),i.attach()}return i}class d extends n{constructor(t,e){super(t,e),this.uiNode=null,this.build()}appendChild(t){this.insertBefore(t)}attach(){super.attach(),this.children.forEach(t=>{t.attach()})}attachUI(t){null!=this.uiNode&&this.uiNode.remove(),this.uiNode=t,d.uiClass&&this.uiNode.classList.add(d.uiClass),this.uiNode.setAttribute("contenteditable","false"),this.domNode.insertBefore(this.uiNode,this.domNode.firstChild)}build(){this.children=new i,Array.from(this.domNode.childNodes).filter(t=>t!==this.uiNode).reverse().forEach(t=>{try{var e=h(t,this.scroll);this.insertBefore(e,this.children.head||void 0)}catch(t){if(t instanceof a)return;throw t}})}deleteAt(t,e){if(0===t&&e===this.length())return this.remove();this.children.forEachAt(t,e,(t,e,s)=>{t.deleteAt(e,s)})}descendant(t,e=0){const[s,i]=this.children.find(e);return null==t.blotName&&t(s)||null!=t.blotName&&s instanceof t?[s,i]:s instanceof d?s.descendant(t,i):[null,-1]}descendants(i,t=0,e=Number.MAX_VALUE){let r=[],o=e;return this.children.forEachAt(t,e,(t,e,s)=>{(null==i.blotName&&i(t)||null!=i.blotName&&t instanceof i)&&r.push(t),t instanceof d&&(r=r.concat(t.descendants(i,e,o))),o-=s}),r}detach(){this.children.forEach(t=>{t.detach()}),super.detach()}enforceAllowedChildren(){let t=!1;this.children.forEach(e=>{t||this.statics.allowedChildren.some(t=>e instanceof t)||(e.statics.scope===o.BLOCK_BLOT?(null!=e.next&&this.splitAfter(e),null!=e.prev&&this.splitAfter(e.prev),e.parent.unwrap(),t=!0):e instanceof d?e.unwrap():e.remove())})}formatAt(t,e,i,r){this.children.forEachAt(t,e,(t,e,s)=>{t.formatAt(e,s,i,r)})}insertAt(t,e,s){const[i,r]=this.children.find(t);if(i)i.insertAt(r,e,s);else{const t=null==s?this.scroll.create("text",e):this.scroll.create(e,s);this.appendChild(t)}}insertBefore(t,e){null!=t.parent&&t.parent.children.remove(t);let s=null;this.children.insertBefore(t,e||null),t.parent=this,null!=e&&(s=e.domNode),this.domNode.parentNode===t.domNode&&this.domNode.nextSibling===s||this.domNode.insertBefore(t.domNode,s),t.attach()}length(){return this.children.reduce((t,e)=>t+e.length(),0)}moveChildren(e,s){this.children.forEach(t=>{e.insertBefore(t,s)})}optimize(t){if(super.optimize(t),this.enforceAllowedChildren(),null!=this.uiNode&&this.uiNode!==this.domNode.firstChild&&this.domNode.insertBefore(this.uiNode,this.domNode.firstChild),0===this.children.length)if(null!=this.statics.defaultChild){const t=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(t)}else this.remove()}path(t,e=!1){const[s,i]=this.children.find(t,e),r=[[this,t]];return s instanceof d?r.concat(s.path(i,e)):(null!=s&&r.push([s,i]),r)}removeChild(t){this.children.remove(t)}replaceWith(t,e){t="string"==typeof t?this.scroll.create(t,e):t;return t instanceof d&&this.moveChildren(t),super.replaceWith(t)}split(t,i=!1){if(!i){if(0===t)return this;if(t===this.length())return this.next}const r=this.clone();return this.parent&&this.parent.insertBefore(r,this.next||void 0),this.children.forEachAt(t,this.length(),(t,e,s)=>{e=t.split(e,i);null!=e&&r.appendChild(e)}),r}splitAfter(t){const e=this.clone();for(;null!=t.next;)e.appendChild(t.next);return this.parent&&this.parent.insertBefore(e,this.next||void 0),e}unwrap(){this.parent&&this.moveChildren(this.parent,this.next||void 0),this.remove()}update(t,e){const s=[],i=[];t.forEach(t=>{t.target===this.domNode&&"childList"===t.type&&(s.push(...t.addedNodes),i.push(...t.removedNodes))}),i.forEach(t=>{if(!(null!=t.parentNode&&"IFRAME"!==t.tagName&&document.body.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)){const e=this.scroll.find(t);null!=e&&(null!=e.domNode.parentNode&&e.domNode.parentNode!==this.domNode||e.detach())}}),s.filter(t=>t.parentNode===this.domNode||t===this.uiNode).sort((t,e)=>t===e?0:t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1).forEach(t=>{let e=null;null!=t.nextSibling&&(e=this.scroll.find(t.nextSibling));const s=h(t,this.scroll);s.next===e&&null!=s.next||(null!=s.parent&&s.parent.removeChild(this),this.insertBefore(s,e||void 0))}),this.enforceAllowedChildren()}}d.uiClass="";var c=d;class u extends c{checkMerge(){return null!==this.next&&this.next.statics.blotName===this.statics.blotName}deleteAt(t,e){super.deleteAt(t,e),this.enforceAllowedChildren()}formatAt(t,e,s,i){super.formatAt(t,e,s,i),this.enforceAllowedChildren()}insertAt(t,e,s){super.insertAt(t,e,s),this.enforceAllowedChildren()}optimize(t){super.optimize(t),0<this.children.length&&null!=this.next&&this.checkMerge()&&(this.next.moveChildren(this),this.next.remove())}}u.blotName="container",u.scope=o.BLOCK_BLOT;var m=u;class p extends n{static value(t){return!0}index(t,e){return this.domNode===t||this.domNode.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(e,1):-1}position(t,e){let s=Array.from(this.parent.domNode.childNodes).indexOf(this.domNode);return 0<t&&(s+=1),[this.parent.domNode,s]}value(){return{[this.statics.blotName]:this.statics.value(this.domNode)||!0}}}p.scope=o.INLINE_BLOT;var f=p;class N{constructor(t,e,s={}){this.attrName=t,this.keyName=e;e=o.TYPE&o.ATTRIBUTE;this.scope=null!=s.scope?s.scope&o.LEVEL|e:o.ATTRIBUTE,null!=s.whitelist&&(this.whitelist=s.whitelist)}static keys(t){return Array.from(t.attributes).map(t=>t.name)}add(t,e){return!!this.canAdd(t,e)&&(t.setAttribute(this.keyName,e),!0)}canAdd(t,e){return null==this.whitelist||("string"==typeof e?-1<this.whitelist.indexOf(e.replace(/["']/g,"")):-1<this.whitelist.indexOf(e))}remove(t){t.removeAttribute(this.keyName)}value(t){var e=t.getAttribute(this.keyName);return this.canAdd(t,e)&&e?e:""}}function b(t,e){return(t.getAttribute("class")||"").split(/\s+/).filter(t=>0===t.indexOf(`${e}-`))}var v=class extends N{static keys(t){return(t.getAttribute("class")||"").split(/\s+/).map(t=>t.split("-").slice(0,-1).join("-"))}add(t,e){return!!this.canAdd(t,e)&&(this.remove(t),t.classList.add(`${this.keyName}-${e}`),!0)}remove(e){b(e,this.keyName).forEach(t=>{e.classList.remove(t)}),0===e.classList.length&&e.removeAttribute("class")}value(t){var e=(b(t,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(t,e)?e:""}};function g(t){const e=t.split("-"),s=e.slice(1).map(t=>t[0].toUpperCase()+t.slice(1)).join("");return e[0]+s}var y=class extends N{static keys(t){return(t.getAttribute("style")||"").split(";").map(t=>t.split(":")[0].trim())}add(t,e){return!!this.canAdd(t,e)&&(t.style[g(this.keyName)]=e,!0)}remove(t){t.style[g(this.keyName)]="",t.getAttribute("style")||t.removeAttribute("style")}value(t){var e=t.style[g(this.keyName)];return this.canAdd(t,e)?e:""}},A=class{constructor(t){this.attributes={},this.domNode=t,this.build()}attribute(t,e){e?t.add(this.domNode,e)&&(null!=t.value(this.domNode)?this.attributes[t.attrName]=t:delete this.attributes[t.attrName]):(t.remove(this.domNode),delete this.attributes[t.attrName])}build(){this.attributes={};const e=l.find(this.domNode);if(null!=e){const t=N.keys(this.domNode),s=v.keys(this.domNode),i=y.keys(this.domNode);t.concat(s).concat(i).forEach(t=>{t=e.scroll.query(t,o.ATTRIBUTE);t instanceof N&&(this.attributes[t.attrName]=t)})}}copy(s){Object.keys(this.attributes).forEach(t=>{var e=this.attributes[t].value(this.domNode);s.format(t,e)})}move(t){this.copy(t),Object.keys(this.attributes).forEach(t=>{this.attributes[t].remove(this.domNode)}),this.attributes={}}values(){return Object.keys(this.attributes).reduce((t,e)=>(t[e]=this.attributes[e].value(this.domNode),t),{})}};class x extends c{constructor(t,e){super(t,e),this.attributes=new A(this.domNode)}static formats(t,e){e=e.query(x.blotName);if(null==e||t.tagName!==e.tagName)return"string"==typeof this.tagName||(Array.isArray(this.tagName)?t.tagName.toLowerCase():void 0)}format(t,e){var s;t!==this.statics.blotName||e?null!=(s=this.scroll.query(t,o.INLINE))&&(s instanceof N?this.attributes.attribute(s,e):!e||t===this.statics.blotName&&this.formats()[t]===e||this.replaceWith(t,e)):(this.children.forEach(t=>{t instanceof x||(t=t.wrap(x.blotName,!0)),this.attributes.copy(t)}),this.unwrap())}formats(){const t=this.attributes.values(),e=this.statics.formats(this.domNode,this.scroll);return null!=e&&(t[this.statics.blotName]=e),t}formatAt(t,e,s,i){null!=this.formats()[s]||this.scroll.query(s,o.ATTRIBUTE)?this.isolate(t,e).format(s,i):super.formatAt(t,e,s,i)}optimize(t){super.optimize(t);t=this.formats();if(0===Object.keys(t).length)return this.unwrap();const e=this.next;e instanceof x&&e.prev===this&&function(t,e){if(Object.keys(t).length===Object.keys(e).length){for(const s in t)if(t[s]!==e[s])return;return 1}}(t,e.formats())&&(e.moveChildren(this),e.remove())}replaceWith(t,e){e=super.replaceWith(t,e);return this.attributes.copy(e),e}update(t,e){super.update(t,e),t.some(t=>t.target===this.domNode&&"attributes"===t.type)&&this.attributes.build()}wrap(t,e){e=super.wrap(t,e);return e instanceof x&&this.attributes.move(e),e}}x.allowedChildren=[x,f],x.blotName="inline",x.scope=o.INLINE_BLOT,x.tagName="SPAN";var E=x;class T extends c{constructor(t,e){super(t,e),this.attributes=new A(this.domNode)}static formats(t,e){e=e.query(T.blotName);if(null==e||t.tagName!==e.tagName)return"string"==typeof this.tagName||(Array.isArray(this.tagName)?t.tagName.toLowerCase():void 0)}format(t,e){var s=this.scroll.query(t,o.BLOCK);null!=s&&(s instanceof N?this.attributes.attribute(s,e):t!==this.statics.blotName||e?!e||t===this.statics.blotName&&this.formats()[t]===e||this.replaceWith(t,e):this.replaceWith(T.blotName))}formats(){const t=this.attributes.values(),e=this.statics.formats(this.domNode,this.scroll);return null!=e&&(t[this.statics.blotName]=e),t}formatAt(t,e,s,i){null!=this.scroll.query(s,o.BLOCK)?this.format(s,i):super.formatAt(t,e,s,i)}insertAt(t,e,s){if(null==s||null!=this.scroll.query(e,o.INLINE))super.insertAt(t,e,s);else{const i=this.split(t);if(null==i)throw new Error("Attempt to insertAt after block boundaries");{const t=this.scroll.create(e,s);i.parent.insertBefore(t,i)}}}replaceWith(t,e){e=super.replaceWith(t,e);return this.attributes.copy(e),e}update(t,e){super.update(t,e),t.some(t=>t.target===this.domNode&&"attributes"===t.type)&&this.attributes.build()}}T.blotName="block",T.scope=o.BLOCK_BLOT,T.tagName="P",T.allowedChildren=[E,T,f];var B=T,C=class extends f{static formats(t,e){}format(t,e){super.formatAt(0,this.length(),t,e)}formatAt(t,e,s,i){0===t&&e===this.length()?this.format(s,i):super.formatAt(t,e,s,i)}formats(){return this.statics.formats(this.domNode,this.scroll)}};const L={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0};class O extends c{constructor(t,e){super(null,e),this.registry=t,(this.scroll=this).build(),this.observer=new MutationObserver(t=>{this.update(t)}),this.observer.observe(this.domNode,L),this.attach()}create(t,e){return this.registry.create(this,t,e)}find(t,e=!1){t=this.registry.find(t,e);return t?t.scroll===this?t:e?this.find(t.scroll.domNode.parentNode,!0):null:null}query(t,e=o.ANY){return this.registry.query(t,e)}register(...t){return this.registry.register(...t)}build(){null!=this.scroll&&super.build()}detach(){super.detach(),this.observer.disconnect()}deleteAt(t,e){this.update(),0===t&&e===this.length()?this.children.forEach(t=>{t.remove()}):super.deleteAt(t,e)}formatAt(t,e,s,i){this.update(),super.formatAt(t,e,s,i)}insertAt(t,e,s){this.update(),super.insertAt(t,e,s)}optimize(e=[],s={}){super.optimize(s);const i=s.mutationsMap||new WeakMap;let r=Array.from(this.observer.takeRecords());for(;0<r.length;)e.push(r.pop());const o=(t,e=!0)=>{null!=t&&t!==this&&null!=t.domNode.parentNode&&(i.has(t.domNode)||i.set(t.domNode,[]),e&&o(t.parent))},n=t=>{i.has(t.domNode)&&(t instanceof c&&t.children.forEach(n),i.delete(t.domNode),t.optimize(s))};let a=e;for(let t=0;0<a.length;t+=1){if(100<=t)throw new Error("[Parchment] Maximum optimize iterations reached");for(a.forEach(t=>{var e=this.find(t.target,!0);null!=e&&(e.domNode===t.target&&("childList"===t.type?(o(this.find(t.previousSibling,!1)),Array.from(t.addedNodes).forEach(t=>{const e=this.find(t,!1);o(e,!1),e instanceof c&&e.children.forEach(t=>{o(t,!1)})})):"attributes"===t.type&&o(e.prev)),o(e))}),this.children.forEach(n),a=Array.from(this.observer.takeRecords()),r=a.slice();0<r.length;)e.push(r.pop())}}update(t,e={}){t=t||this.observer.takeRecords();const s=new WeakMap;t.map(t=>{var e=this.find(t.target,!0);return null==e?null:s.has(e.domNode)?(s.get(e.domNode).push(t),null):(s.set(e.domNode,[t]),e)}).forEach(t=>{null!=t&&t!==this&&s.has(t.domNode)&&t.update(s.get(t.domNode)||[],e)}),e.mutationsMap=s,s.has(this.domNode)&&super.update(s.get(this.domNode),e),this.optimize(t,e)}}O.blotName="scroll",O.defaultChild=B,O.allowedChildren=[B,m],O.scope=o.BLOCK_BLOT,O.tagName="DIV";var w=O;class I extends f{constructor(t,e){super(t,e),this.text=this.statics.value(this.domNode)}static create(t){return document.createTextNode(t)}static value(t){return t.data}deleteAt(t,e){this.domNode.data=this.text=this.text.slice(0,t)+this.text.slice(t+e)}index(t,e){return this.domNode===t?e:-1}insertAt(t,e,s){null==s?(this.text=this.text.slice(0,t)+e+this.text.slice(t),this.domNode.data=this.text):super.insertAt(t,e,s)}length(){return this.text.length}optimize(t){super.optimize(t),this.text=this.statics.value(this.domNode),0===this.text.length?this.remove():this.next instanceof I&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())}position(t,e=0){return[this.domNode,t]}split(t,e=!1){if(!e){if(0===t)return this;if(t===this.length())return this.next}t=this.scroll.create(this.domNode.splitText(t));return this.parent.insertBefore(t,this.next||void 0),this.text=this.statics.value(this.domNode),t}update(t,e){t.some(t=>"characterData"===t.type&&t.target===this.domNode)&&(this.text=this.statics.value(this.domNode))}value(){return this.text}}I.blotName="text",I.scope=o.INLINE_BLOT;var k=I}],i={},r.m=s,r.c=i,r.d=function(t,e,s){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(s,i,function(t){return e[t]}.bind(null,i));return s},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0);function r(t){if(i[t])return i[t].exports;var e=i[t]={i:t,l:!1,exports:{}};return s[t].call(e.exports,e,e.exports,r),e.l=!0,e.exports}var s,i});