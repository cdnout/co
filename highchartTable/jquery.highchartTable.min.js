!function(a){a.fn.highchartTable=function(){var i=["column","line","area","spline","pie"],r=function(e,t){var i=a(e).data(t);if("undefined"!=typeof i){for(var r=i.split("."),n=window[r[0]],d=1,l=r.length;l>d;d++)n=n[r[d]];return n}};return this.each(function(){var n,d=a(this),l=a(d),o=1,p=a("caption",d),s=p.length?a(p[0]).text():"";if(1!=l.data("graph-container-before")){var h=l.data("graph-container");if(!h)throw"graph-container data attribute is mandatory";if("#"===h[0]||-1===h.indexOf(".."))n=a(h);else{for(var g=d,f=h;-1!==f.indexOf("..");)f=f.replace(/^.. /,""),g=g.parent();n=a(f,g)}if(1!==n.length)throw"graph-container is not available in this DOM or available multiple times";n=n[0]}else l.before("<div></div>"),n=l.prev(),n=n[0];var u=l.data("graph-type");if(!u)throw"graph-type data attribute is mandatory";if(-1==a.inArray(u,i))throw"graph-container data attribute must be one of "+i.join(", ");var c=l.data("graph-stacking");c||(c="normal");var x=l.data("graph-datalabels-enabled"),b=1==l.data("graph-inverted"),m=a("thead th",d),y=[],v=[],k=0,T=!1;m.each(function(e,t){var r=a(t),n=r.data("graph-value-scale"),d=r.data("graph-type");-1==a.inArray(d,i)&&(d=u);var p=r.data("graph-stack-group");p&&(T=!0);var s=r.data("graph-datalabels-enabled");"undefined"==typeof s&&(s=x);var h=r.data("graph-yaxis");"undefined"!=typeof h&&"1"==h&&(o=2);var g=1==r.data("graph-skip");g&&(k+=1);var f={libelle:r.text(),skip:g,indexTd:e-k-1,color:r.data("graph-color"),visible:!r.data("graph-hidden"),yAxis:"undefined"!=typeof h?h:0,dashStyle:r.data("graph-dash-style")||"solid",dataLabelsEnabled:1==s,dataLabelsColor:r.data("graph-datalabels-color")||l.data("graph-datalabels-color")},c=r.data("graph-vline-x");"undefined"==typeof c?(f.scale="undefined"!=typeof n?parseFloat(n):1,f.graphType="column"==d&&b?"bar":d,f.stack=p,f.unit=r.data("graph-unit"),y[e]=f):(f.x=c,f.height=r.data("graph-vline-height"),f.name=r.data("graph-vline-name"),v[e]=f)});var w=[];a(y).each(function(a,e){if(0!=a&&!e.skip){var t={name:e.libelle+(e.unit?" ("+e.unit+")":""),data:[],type:e.graphType,stack:e.stack,color:e.color,visible:e.visible,yAxis:e.yAxis,dashStyle:e.dashStyle,marker:{enabled:!1},dataLabels:{enabled:e.dataLabelsEnabled,color:e.dataLabelsColor,align:l.data("graph-datalabels-align")||("column"==u&&1==b?void 0:"center")}};if(e.dataLabelsEnabled){var i=r(d,"graph-datalabels-formatter");i&&(t.dataLabels.formatter=function(){return i(this.y)})}w.push(t)}}),a(v).each(function(a,e){"undefined"==typeof e||e.skip||w.push({name:e.libelle,data:[{x:e.x,y:0,name:e.name},{x:e.x,y:e.height,name:e.name}],type:"spline",color:e.color,visible:e.visible,marker:{enabled:!1}})});var L=[],A=r(d,"graph-point-callback"),O="datetime"==l.data("graph-xaxis-type"),I=a("tbody:first tr",d);I.each(function(e,i){if(!a(i).data("graph-skip")){var r=a("td",i);r.each(function(r,n){var d,o=y[r];if(!o.skip){var p=a(n);if(0==r)d=p.text(),L.push(d);else{var s=p.text(),h=w[o.indexTd];if(0==s.length)O||h.data.push(null);else{var g=s.replace(/\s/g,"").replace(/,/,"."),f={value:g,rawValue:s,td:p,tr:a(i),indexTd:r,indexTr:e};l.trigger("highchartTable.cleanValue",f),d=Math.round(parseFloat(f.value)*o.scale*100)/100;var u=p.data("graph-x");if(O){u=a("td",a(i)).first().text();var c=t(u);u=c.getTime()-60*c.getTimezoneOffset()*1e3}var x=p.data("graph-name"),b={name:"undefined"!=typeof x?x:s,y:d,x:u};A&&(b.events={click:function(){return A(this)}}),"pie"===o.graphType&&p.data("graph-item-highlight")&&(b.sliced=1);var m=p.data("graph-item-color");"undefined"!=typeof m&&(b.color=m),h.data.push(b)}}}})}});var C,D=function(a,e,t){var i=a.data("graph-yaxis-"+e+"-"+t);return"undefined"!=typeof i?i:a.data("graph-yaxis"+e+"-"+t)},z=[];for(C=1;o>=C;C++){var S={title:{text:"undefined"!=typeof D(l,C,"title-text")?D(l,C,"title-text"):null},max:"undefined"!=typeof D(l,C,"max")?D(l,C,"max"):null,min:"undefined"!=typeof D(l,C,"min")?D(l,C,"min"):null,reversed:"1"==D(l,C,"reversed"),opposite:"1"==D(l,C,"opposite"),tickInterval:D(l,C,"tick-interval")||null,labels:{rotation:D(l,C,"rotation")||0},startOnTick:"0"!=D(l,C,"start-on-tick"),endOnTick:"0"!=D(l,C,"end-on-tick"),stackLabels:{enabled:"1"==D(l,C,"stacklabels-enabled")},gridLineInterpolation:D(l,C,"grid-line-interpolation")||null},B=r(d,"graph-yaxis-"+C+"-formatter-callback");B||(B=r(d,"graph-yaxis"+C+"-formatter-callback")),B&&(S.labels.formatter=function(){return B(this.value)}),z.push(S)}for(var E=["#4572A7","#AA4643","#89A54E","#80699B","#3D96AE","#DB843D","#92A8CD","#A47D7C","#B5CA92"],H=[],W="undefined"!=typeof Highcharts.theme&&"undefined"!=typeof Highcharts.theme.colors?Highcharts.theme.colors:[],F=l.data("graph-line-shadow"),M=l.data("graph-line-width")||2,P=Math.max(E.length,W.length),j=0;P>j;j++){var G="graph-color-"+(j+1);H.push("undefined"!=typeof l.data(G)?l.data(G):"undefined"!=typeof W[j]?W[j]:E[j])}var R=l.data("graph-margin-top"),V=l.data("graph-margin-right"),Q=l.data("graph-margin-bottom"),_=l.data("graph-margin-left"),q=l.data("graph-xaxis-labels-enabled"),J={},K=l.data("graph-xaxis-labels-font-size");"undefined"!=typeof K&&(J.fontSize=K);var N={colors:H,chart:{renderTo:n,inverted:b,marginTop:"undefined"!=typeof R?R:null,marginRight:"undefined"!=typeof V?V:null,marginBottom:"undefined"!=typeof Q?Q:null,marginLeft:"undefined"!=typeof _?_:null,spacingTop:l.data("graph-spacing-top")||10,height:l.data("graph-height")||null,zoomType:l.data("graph-zoom-type")||null,polar:l.data("graph-polar")||null},title:{text:s},subtitle:{text:l.data("graph-subtitle-text")||""},legend:{enabled:"1"!=l.data("graph-legend-disabled"),layout:l.data("graph-legend-layout")||"horizontal",symbolWidth:l.data("graph-legend-width")||30,x:l.data("graph-legend-x")||15,y:l.data("graph-legend-y")||0},xAxis:{categories:"datetime"!=l.data("graph-xaxis-type")?L:void 0,type:"datetime"==l.data("graph-xaxis-type")?"datetime":void 0,reversed:"1"==l.data("graph-xaxis-reversed"),opposite:"1"==l.data("graph-xaxis-opposite"),showLastLabel:"undefined"!=typeof l.data("graph-xaxis-show-last-label")?l.data("graph-xaxis-show-last-label"):!0,tickInterval:l.data("graph-xaxis-tick-interval")||null,dateTimeLabelFormats:{second:"%e. %b",minute:"%e. %b",hour:"%e. %b",day:"%e. %b",week:"%e. %b",month:"%e. %b",year:"%e. %b"},labels:{rotation:l.data("graph-xaxis-rotation")||void 0,align:l.data("graph-xaxis-align")||void 0,enabled:"undefined"!=typeof q?q:!0,style:J},startOnTick:l.data("graph-xaxis-start-on-tick"),endOnTick:l.data("graph-xaxis-end-on-tick"),min:e(d,"min"),max:e(d,"max"),alternateGridColor:l.data("graph-xaxis-alternateGridColor")||null,title:{text:l.data("graph-xaxis-title-text")||null},gridLineWidth:l.data("graph-xaxis-gridLine-width")||0,gridLineDashStyle:l.data("graph-xaxis-gridLine-style")||"ShortDot",tickmarkPlacement:l.data("graph-xaxis-tickmark-placement")||"between",lineWidth:l.data("graph-xaxis-line-width")||0},yAxis:z,tooltip:{formatter:function(){if("datetime"==l.data("graph-xaxis-type"))return"<b>"+this.series.name+"</b><br/>"+Highcharts.dateFormat("%e. %b",this.x)+" : "+this.y;var a="undefined"!=typeof L[this.point.x]?L[this.point.x]:this.point.x;return"pie"===u?"<strong>"+this.series.name+"</strong><br />"+a+" : "+this.point.y:"<strong>"+this.series.name+"</strong><br />"+a+" : "+this.point.name}},credits:{enabled:!1},plotOptions:{line:{dataLabels:{enabled:!0},lineWidth:M},area:{lineWidth:M,shadow:"undefined"!=typeof F?F:!0,fillOpacity:l.data("graph-area-fillOpacity")||.75},pie:{allowPointSelect:!0,dataLabels:{enabled:!0},showInLegend:"1"==l.data("graph-pie-show-in-legend"),size:"80%"},series:{animation:!1,stickyTracking:!1,stacking:T?c:null,groupPadding:l.data("graph-group-padding")||0}},series:w,exporting:{filename:s.replace(/ /g,"_"),buttons:{exportButton:{menuItems:null,onclick:function(){this.exportChart()}}}}};l.trigger("highchartTable.beforeRender",N),new Highcharts.Chart(N)}),this};var e=function(e,i){var r=a(e).data("graph-xaxis-"+i);if("undefined"!=typeof r){if("datetime"==a(e).data("graph-xaxis-type")){var n=t(r);return n.getTime()-60*n.getTimezoneOffset()*1e3}return r}return null},t=function(a){var e=a.split(" "),t=e[0].split("-"),i=null,r=null;if(e[1]){var n=e[1].split(":");i=parseInt(n[0],10),r=parseInt(n[1],10)}return new Date(parseInt(t[0],10),parseInt(t[1],10)-1,parseInt(t[2],10),i,r)}}(jQuery);
//# sourceMappingURL=jquery.highchartTable.min.js.map