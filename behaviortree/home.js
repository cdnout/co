/**
 * BehaviorTree.js
 * https://github.com/Calamari/BehaviorTree.js
 *
 * Copyright 2013-2104, Georg Tavonius
 * Licensed under the MIT license.
 *
 * Includes Dean Edward's Base.js, version 1.1a
 * Copyright 2006-2010, Dean Edwards
 * License: http://www.opensource.org/licenses/mit-license.php
 *
 * Version: 1.0.4
 */
!function(t){if("object"==typeof exports)module.exports=t();else if("function"==typeof define&&define.amd)define(t);else{var n;"undefined"!=typeof window?n=window:"undefined"!=typeof global?n=global:"undefined"!=typeof self&&(n=self),n.BehaviorTree=t()}}(function(){return function t(n,e,o){function i(r,c){if(!e[r]){if(!n[r]){var u="function"==typeof require&&require;if(!c&&u)return u(r,!0);if(s)return s(r,!0);throw new Error("Cannot find module '"+r+"'")}var a=e[r]={exports:{}};n[r][0].call(a.exports,function(t){var e=n[r][1][t];return i(e?e:t)},a,a.exports,t,n,e,o)}return e[r].exports}for(var s="function"==typeof require&&require,r=0;r<o.length;r++)i(o[r]);return i}({Base:[function(t,n,e){n.exports=t("3iKuuX")},{}],"3iKuuX":[function(t,n,e){(function(t){(function(t,n,e,o){var i=function(){};i.extend=function(t,n){var e=i.prototype.extend;i._prototyping=!0;var o=new this;e.call(o,t),o.base=function(){},delete i._prototyping;var s=o.constructor,r=o.constructor=function(){if(!i._prototyping)if(this._constructing||this.constructor==r)this._constructing=!0,s.apply(this,arguments),delete this._constructing;else if(null!=arguments[0])return(arguments[0].extend||e).call(arguments[0],o)};return r.ancestor=this,r.extend=this.extend,r.forEach=this.forEach,r.implement=this.implement,r.prototype=o,r.toString=this.toString,r.valueOf=function(t){return"object"==t?r:s.valueOf()},e.call(r,n),"function"==typeof r.init&&r.init(),r},i.prototype={extend:function(t,n){if(arguments.length>1){var e=this[t];if(e&&"function"==typeof n&&(!e.valueOf||e.valueOf()!=n.valueOf())&&/\bbase\b/.test(n)){var o=n.valueOf();n=function(){var t=this.base||i.prototype.base;this.base=e;var n=o.apply(this,arguments);return this.base=t,n},n.valueOf=function(t){return"object"==t?n:o},n.toString=i.toString}this[t]=n}else if(t){var s=i.prototype.extend;i._prototyping||"function"==typeof this||(s=this.extend||s);for(var r={toSource:null},c=["constructor","toString","valueOf"],u=i._prototyping?0:1;a=c[u++];)t[a]!=r[a]&&s.call(this,a,t[a]);for(var a in t)r[a]||s.call(this,a,t[a])}return this}},i=i.extend({constructor:function(){this.extend(arguments[0])}},{ancestor:Object,version:"1.1",forEach:function(t,n,e){for(var o in t)void 0===this.prototype[o]&&n.call(e,t[o],o,t)},implement:function(){for(var t=0;t<arguments.length;t++)"function"==typeof arguments[t]?arguments[t](this.prototype):this.prototype.extend(arguments[t]);return this},toString:function(){return String(this.valueOf())}}),o("undefined"!=typeof i?i:window.Base)}).call(t,void 0,void 0,void 0,function(t){n.exports=t})}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(t,n,e){n.exports=t("./decorator").extend({success:function(){this._control.fail()},fail:function(){this._control.fail()}})},{"./decorator":7}],4:[function(t,n,e){n.exports=t("./decorator").extend({success:function(){this._control.success()},fail:function(){this._control.success()}})},{"./decorator":7}],5:[function(t,n,e){var o,i=0;o=t("../lib/base").extend({constructor:function(t){i+=1,this.title=t.title||"btree"+i,this._rootNode=t.tree,this._object=t.object},setObject:function(t){this._object=t},step:function(){if(this._started)throw new Error('the BehaviorTree "'+this.title+'" did call step but one Task did not finish on last call of step.');this._started=!0;var t=o.getNode(this._rootNode);this._actualNode=t,t.setControl(this),t.start(this._object),t.run(this._object)},running:function(){this._started=!1},success:function(){this._actualNode.end(this._object),this._started=!1},fail:function(){this._actualNode.end(this._object),this._started=!1}}),o._registeredNodes={},o.register=function(t,n){"string"==typeof t?this._registeredNodes[t]=n:this._registeredNodes[t.title]=t},o.getNode=function(t){var n=t instanceof o.Node?t:this._registeredNodes[t];if(!n)throw new Error('The node "'+t+'" could not be looked up. Maybe it was never registered?');return n},n.exports=o},{"../lib/base":"3iKuuX"}],6:[function(t,n,e){var o=t("./behavior_tree");n.exports=t("./node").extend({constructor:function(t){this.base(t),this.children=this.nodes||[]},start:function(){this._actualTask=0},run:function(t){this._object=t,this.start(),this._actualTask<this.children.length&&this._run(),this.end()},_run:function(){var t=o.getNode(this.children[this._actualTask]);this._runningNode=t,t.setControl(this),t.start(this._object),t.run(this._object)},running:function(t){this._nodeRunning=t,this._control.running(t)},success:function(){this._nodeRunning=null,this._runningNode.end(this._object)},fail:function(){this._nodeRunning=null,this._runningNode.end(this._object)}})},{"./behavior_tree":5,"./node":10}],7:[function(t,n,e){var o=t("./behavior_tree");n.exports=t("./node").extend({constructor:function(t){this.base(t),this.node&&(this.node=o.getNode(this.node))},setNode:function(t){this.node=o.getNode(t)},start:function(){this.node.setControl(this),this.node.start()},end:function(){this.node.end()},run:function(t){this.node.run(t)}})},{"./behavior_tree":5,"./node":10}],8:[function(t,n,e){var o=t("./behavior_tree");o.Node=t("./node"),o.Task=t("./task"),o.BranchNode=t("./branch_node"),o.Priority=t("./priority"),o.Sequence=t("./sequence"),o.Random=t("./random"),o.Decorator=t("./decorator"),o.InvertDecorator=t("./invert_decorator"),o.AlwaysFailDecorator=t("./always_fail_decorator"),o.AlwaysSucceedDecorator=t("./always_succeed_decorator"),n.exports=o},{"./always_fail_decorator":3,"./always_succeed_decorator":4,"./behavior_tree":5,"./branch_node":6,"./decorator":7,"./invert_decorator":9,"./node":10,"./priority":11,"./random":12,"./sequence":13,"./task":14}],9:[function(t,n,e){n.exports=t("./decorator").extend({success:function(){this._control.fail()},fail:function(){this._control.success()}})},{"./decorator":7}],10:[function(t,n,e){n.exports=t("../lib/base").extend({constructor:function(t){this.base(t)},start:function(){},end:function(){},run:function(){throw new Error("Warning: run of "+this.title+" not implemented!")},setControl:function(t){this._control=t},running:function(){this._control.running(this)},success:function(){this._control.success()},fail:function(){this._control.fail()}})},{"../lib/base":"3iKuuX"}],11:[function(t,n,e){n.exports=t("./branch_node").extend({_run:function(){this._nodeRunning?this._nodeRunning.run(this._object):this.base()},success:function(){this.base(),this._control.success()},fail:function(){this.base(),this._actualTask+=1,this._actualTask<this.children.length?this._run(this._object):this._control.fail()}})},{"./branch_node":6}],12:[function(t,n,e){n.exports=t("./branch_node").extend({start:function(){this.base(),this._nodeRunning||(this._actualTask=Math.floor(Math.random()*this.children.length))},success:function(){this.base(),this._control.success()},fail:function(){this.base(),this._control.fail()},_run:function(){this._runningNode?this._runningNode.run(this._object):this.base()}})},{"./branch_node":6}],13:[function(t,n,e){n.exports=t("./branch_node").extend({_run:function(){this._nodeRunning?this._nodeRunning.run(this._object):this.base()},success:function(){this.base(),this._actualTask+=1,this._actualTask<this.children.length?this._run(this._object):this._control.success()},fail:function(){this.base(),this._control.fail()}})},{"./branch_node":6}],14:[function(t,n,e){n.exports=t("./node").extend({})},{"./node":10}]},{},[8])(8)});