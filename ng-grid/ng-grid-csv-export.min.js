function ngGridCsvExportPlugin(b){var a=this;a.grid=null;a.scope=null;a.services=null;a.init=function(e,d,c){a.grid=d;a.scope=e;a.services=c;function f(){var s=[];for(var j in d.config.columnDefs){if(d.config.columnDefs.hasOwnProperty(j)){s.push(d.config.columnDefs[j].field)}}var i="";function p(k){if(k==null){return""}if(typeof(k)==="number"){return""+k}if(typeof(k)==="boolean"){return(k?"TRUE":"FALSE")}if(typeof(k)==="string"){return k.replace(/"/g,'""')}return JSON.stringify(k).replace(/"/g,'""')}function m(t){var k=t.substr(0,t.length-1);return k+"\n"}for(var g in s){i+='"'+p(s[g])+'",'}i=m(i);var q=d.data;for(var r in q){for(g in s){var l;if(b!=null&&b.columnOverrides!=null&&b.columnOverrides[s[g]]!=null){l=b.columnOverrides[s[g]](a.services.UtilityService.evalProperty(q[r],s[g]))}else{l=a.services.UtilityService.evalProperty(q[r],s[g])}i+='"'+p(l)+'",'}i=m(i)}var n=d.$root.find(".ngFooterPanel");var o=d.$root.find(".ngFooterPanel .csv-data-link-span");if(o!=null){o.remove()}var h='<span class="csv-data-link-span">';h+='<br><a href="data:text/csv;charset=UTF-8,';h+=encodeURIComponent(i);h+='" download="Export.csv">CSV Export</a></br></span>';n.append(h)}setTimeout(f,0);e.catHashKeys=function(){var h="";for(var g in e.renderedRows){h+=e.renderedRows[g].$$hashKey}return h};if(b&&b.customDataWatcher){e.$watch(b.customDataWatcher,f)}else{e.$watch(e.catHashKeys,f)}}};