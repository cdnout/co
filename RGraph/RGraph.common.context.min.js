RGraph=window.RGraph||{isrgraph:!0,isRGraph:!0,rgraph:!0},function(){navigator.userAgent;RGraph.contextMenu=function(){var e=RGraph.getArgs(arguments,"object,menuitems,event"),n=e.object,o=e.menuitems,t=e.event,a=n.canvas;RGraph.fireCustomEvent(n,"onbeforecontextmenu"),RGraph.Registry.get("contextmenu")&&RGraph.hideContext(),RGraph.hidePalette(),n.set("mousedown",!1);var r=t.pageX,s=t.pageY,l=document.createElement("div"),e=document.createElement("div");for(l.className="RGraph_contextmenu",l.__canvas__=a,l.style.position="absolute",l.style.left=0,l.style.top=0,l.style.border="1px solid #666",l.style.backgroundColor="white",l.style.boxShadow="1px 1px 3px #ddd",l.style.MozBoxShadow="1px 1px 3px #ddd",l.style.WebkitBoxShadow="1px 1px 3px #ddd",l.style.opacity=0,l.style.lineHeight="initial",e.className="RGraph_contextmenu_background",e.style.position="absolute",e.style.backgroundColor="#ccc",e.style.borderRight="1px solid #aaa",e.style.top=0,e.style.left=0,e.style.width="18px",e.style.height="100%",e.style.opacity=0,e=(l=document.body.appendChild(l)).appendChild(e),i=0;i<o.length;++i){var p=document.createElement("div");p.__object__=n,p.__canvas__=a,p.__contextmenu__=l,p.className="RGraph_contextmenu_item",o[i]?(p.style.padding="2px 5px 2px 23px",p.style.fontFamily="Arial",p.style.fontSize="10pt",p.style.textAlign="left",p.style.fontWeight="normal",p.innerHTML=o[i][0],RGraph.isArray(o[i][1])&&(p.style.backgroundImage="url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAHCAYAAADEUlfTAAAAQUlEQVQImY3NoQ2AMABE0ZewABMyGQ6mqWODzlAclBSFO8HZl8uf0FFxCHtwYkt4Y6ChYE44cGH9/fyae2p2LAleW9oVTQuVf6gAAAAASUVORK5CYII=)",p.style.backgroundRepeat="no-repeat",p.style.backgroundPosition="97% center"),o[i][1]?p.addEventListener?(p.addEventListener("mouseover",function(e){RGraph.hideContextSubmenu(),e.target.style.backgroundColor="rgba(0,0,0,0.2)",e.target.style.cursor="pointer"},!1),p.addEventListener("mouseout",function(e){e.target.style.backgroundColor="inherit",e.target.style.cursor="default"},!1)):(p.attachEvent("onmouseover",function(){RGraph.hideContextSubmenu(),event.srcElement.style.backgroundColor="#eee",event.srcElement.style.cursor="pointer"},!1),p.attachEvent("onmouseout",function(){event.srcElement.style.backgroundColor="inherit",event.srcElement.style.cursor="default"},!1)):p.addEventListener?(p.addEventListener("mouseover",function(e){e.target.style.cursor="default"},!1),p.addEventListener("mouseout",function(e){e.target.style.cursor="default"},!1)):(p.attachEvent("onmouseover",function(){event.srcElement.style.cursor="default"},!1),p.attachEvent("onmouseout",function(){event.srcElement.style.cursor="default"},!1))):(p.style.borderBottom="1px solid #ddd",p.style.marginLeft="25px"),l.appendChild(p),o[i]&&o[i][1]&&"function"==typeof o[i][1]?p.addEventListener("click",o[i][1],!1):o[i]&&o[i][1]&&RGraph.isArray(o[i][1])&&function(){var t=o[i][1];p.addEventListener("mouseover",function(e){RGraph.contextMenu_submenu(n,t,e.target)},!1)}()}return l.style.width=l.offsetWidth+10+"px",l.style.height=l.offsetHeight-2+"px",r+l.offsetWidth>document.body.offsetWidth&&(r-=l.offsetWidth),l.style.left=r+"px",l.style.top=s+"px",setTimeout("if (obj = RGraph.Registry.get('contextmenu')) obj.style.opacity = 0.2",50),setTimeout("if (obj = RGraph.Registry.get('contextmenu')) obj.style.opacity = 0.4",100),setTimeout("if (obj = RGraph.Registry.get('contextmenu')) obj.style.opacity = 0.6",150),setTimeout("if (obj = RGraph.Registry.get('contextmenu')) obj.style.opacity = 0.8",200),setTimeout("if (obj = RGraph.Registry.get('contextmenu')) obj.style.opacity = 1",250),setTimeout("if (obj = RGraph.Registry.get('contextmenu.bg')) obj.style.opacity = 0.2",50),setTimeout("if (obj = RGraph.Registry.get('contextmenu.bg')) obj.style.opacity = 0.4",100),setTimeout("if (obj = RGraph.Registry.get('contextmenu.bg')) obj.style.opacity = 0.6",150),setTimeout("if (obj = RGraph.Registry.get('contextmenu.bg')) obj.style.opacity = 0.8",200),setTimeout("if (obj = RGraph.Registry.get('contextmenu.bg')) obj.style.opacity = 1",250),RGraph.Registry.set("contextmenu",l),RGraph.Registry.set("contextmenu.bg",e),RGraph.Registry.get("contextmenu").oncontextmenu=function(){return!1},RGraph.Registry.get("contextmenu.bg").oncontextmenu=function(){return!1},a.addEventListener("click",function(){RGraph.hideContext()},!1),window.addEventListener("click",function(){RGraph.hideContext()},!1),window.addEventListener("resize",function(){RGraph.hideContext()},!1),"function"==typeof n.getShape&&(RGraph.Registry.get("contextmenu").__shape__=n.getShape(t)),t.stopPropagation(),RGraph.fireCustomEvent(n,"oncontextmenu"),!1},RGraph.hideContext=function(){var e=RGraph.Registry.get("contextmenu"),t=RGraph.Registry.get("contextmenu.bg");RGraph.hideContextSubmenu(),e&&(e.parentNode.removeChild(e),t.parentNode.removeChild(t),e.style.visibility="hidden",e.style.display="none",RGraph.Registry.set("contextmenu",null),t.style.visibility="hidden",t.style.display="none",RGraph.Registry.set("contextmenu.bg",null))},RGraph.hideContextSubmenu=function(){var e=RGraph.Registry.get("contextmenu.submenu");e&&(e.style.visibility="none",e.style.display="none",RGraph.Registry.set("contextmenu.submenu",null))},RGraph.showContext=function(){var e,t,n,o,i=RGraph.getArgs(arguments,"object").object;RGraph.hidePalette(),i.get("contextmenu")&&i.get("contextmenu").length&&(e=0<=navigator.userAgent.indexOf("Opera"),t=0<=navigator.userAgent.indexOf("Safari"),n=0<=navigator.userAgent.indexOf("Chrome"),o=0<navigator.userAgent.indexOf("Firefox")&&0<navigator.userAgent.indexOf("Mac"),navigator.userAgent.indexOf("MSIE 9"),(e||t)&&!n||o?i.canvas.addEventListener("dblclick",function(e){return!!e.ctrlKey||void(RGraph.Registry.get("contextmenu")||RGraph.contextMenu(i,i.get("contextmenu"),e))},!1):i.canvas.oncontextmenu=function(e){return!!e.ctrlKey||(RGraph.contextMenu(i,i.get("contextmenu"),e),!1)})},RGraph.contextMenu_submenu=function(){var e=RGraph.getArgs(arguments,"object,menuitems,parentMenuItem"),t=e.object,n=e.menuitems,e=e.parentMenuItem;RGraph.hideContextSubmenu();var o=t.canvas,i=(t.context,e.parentNode),a=document.createElement("DIV");a.style.position="absolute",a.style.width="100px",a.style.top=i.offsetTop+e.offsetTop+"px",a.style.left=i.offsetLeft+i.offsetWidth-(RGraph.ISOLD?9:0)+"px",a.style.backgroundColor="white",a.style.border="1px solid black",a.className="RGraph_contextmenu",a.__contextmenu__=i,a.style.lineHeight="initial",a.style.boxShadow="3px 3px 3px rgba(96,96,96,0.5)",a.style.MozBoxShadow="3px 3px 3px rgba(96,96,96,0.5)",a.style.WebkitBoxShadow="3px 3px 3px rgba(96,96,96,0.5)",a.style.filter="progid:DXImageTransform.Microsoft.Shadow(color=#aaaaaa,direction=135)",document.body.appendChild(a);for(var r=0;r<n.length;++r){var s=document.createElement("DIV");s.__canvas__=o,s.__contextmenu__=i,s.className="RGraph_contextmenu_item",n[r]?(s.style.padding="2px 5px 2px 23px",s.style.fontFamily="Arial",s.style.fontSize="10pt",s.style.fontWeight="normal",s.style.textAlign="left",s.innerHTML=n[r][0],n[r][1]?s.addEventListener?(s.addEventListener("mouseover",function(e){e.target.style.backgroundColor="rgba(0,0,0,0.2)",e.target.style.cursor="pointer"},!1),s.addEventListener("mouseout",function(e){e.target.style.backgroundColor="inherit",e.target.style.cursor="default"},!1)):(s.attachEvent("onmouseover",function(){event.srcElement.style.backgroundColor="rgba(0,0,0,0.2)",event.srcElement.style.cursor="pointer"},!1),s.attachEvent("onmouseout",function(){event.srcElement.style.backgroundColor="inherit",event.srcElement.style.cursor="default"},!1)):s.addEventListener?(s.addEventListener("mouseover",function(e){e.target.style.cursor="default"},!1),s.addEventListener("mouseout",function(e){e.target.style.cursor="default"},!1)):(s.attachEvent("onmouseover",function(){event.srcElement.style.cursor="default"},!1),s.attachEvent("onmouseout",function(){event.srcElement.style.cursor="default"},!1))):(s.style.borderBottom="1px solid #ddd",s.style.marginLeft="25px"),a.appendChild(s),n[r]&&n[r][1]&&(document.all?s.attachEvent("onclick",n[r][1]):s.addEventListener("click",n[r][1],!1))}e=document.createElement("DIV");e.className="RGraph_contextmenu_background",e.style.position="absolute",e.style.backgroundColor="#ccc",e.style.borderRight="1px solid #aaa",e.style.top=0,e.style.left=0,e.style.width="18px",e.style.height="100%",e=a.appendChild(e),RGraph.Registry.set("contextmenu.submenu",a)},RGraph.showPNG=function(){var t,e,n,o,i,a;RGraph.ISIE8?alert("[RGRAPH PNG] Sorry, showing a PNG is not supported on MSIE8."):(arguments[0]&&arguments[0].id?(e=arguments[0],t=arguments[1]):RGraph.Registry.get("contextmenu")?e=RGraph.Registry.get("contextmenu").__canvas__:alert("[RGRAPH SHOWPNG] Could not find canvas!"),n=e.__object__,(o=document.createElement("DIV")).id="__rgraph_image_bg__",o.style.position="fixed",o.style.top="-10px",o.style.left="-10px",o.style.width="5000px",o.style.height="5000px",o.style.backgroundColor="rgb(204,204,204)",o.style.opacity=0,document.body.appendChild(o),(i=document.createElement("DIV")).style.backgroundColor="white",i.style.opacity=0,i.style.border="1px solid black",i.style.position="fixed",i.style.top="20%",i.style.width=e.width+"px",i.style.height=e.height+35+"px",i.style.left=document.body.clientWidth/2-e.width/2+"px",i.style.padding="5px",i.style.borderRadius="10px",i.style.MozBorderRadius="10px",i.style.WebkitBorderRadius="10px",i.style.boxShadow="0 0 15px rgba(96,96,96,0.5)",i.style.MozBoxShadow="0 0 15px rgba(96,96,96,0.5)",i.style.WebkitBoxShadow="rgba(96,96,96,0.5) 0 0 15px",i.__canvas__=e,i.__object__=n,i.id="__rgraph_image_div__",document.body.appendChild(i),i.innerHTML+='<div style="position: absolute; margin-left: 10px; top: '+e.height+"px; width: "+(e.width-50)+'px; height: 25px"><span style="font-size: 12pt;display: inline; display: inline-block; width: 65px; text-align: right">URL:</span><textarea style="float: right; overflow: hidden; height: 20px; width: '+(e.width-n.gutterLeft-n.gutterRight-80)+'px" onclick="this.select()" readonly="readonly" id="__rgraph_dataurl__">'+e.toDataURL()+"</textarea></div>",i.innerHTML+='<div style="position: absolute; top: '+(e.height+25)+"px; left: "+(n.gutterLeft-65+e.width/2)+"px; width: "+(e.width-n.gutterRight)+'px; font-size: 65%">A link using the URL: <a href="'+e.toDataURL()+'">View</a></div>',a=document.createElement("IMG"),RGraph.Registry.set("png",a),a.__canvas__=e,a.__object__=n,a.id="__rgraph_image_img__",a.className="RGraph_png",a.src=e.toDataURL(),i.appendChild(a),setTimeout(function(){document.getElementById("__rgraph_dataurl__").select()},50),window.addEventListener("resize",function(e){var t=RGraph.Registry.get("png");t.style.left=document.body.clientWidth/2-t.width/2+"px"},!1),o.onclick=function(e){var t=document.getElementById("__rgraph_image_div__"),n=document.getElementById("__rgraph_image_bg__");t&&(t.style.opacity=0,t.parentNode.removeChild(t),t.id="",t.style.display="none",t=null),n&&(n.style.opacity=0,n.id="",n.style.display="none")},window.addEventListener("resize",function(e){o.onclick(e)},!1),RGraph.showpng_image_bg=o,RGraph.showpng_image_div=i,setTimeout("RGraph.showpng_image_div.style.opacity = 0.2",50),setTimeout("RGraph.showpng_image_div.style.opacity = 0.4",100),setTimeout("RGraph.showpng_image_div.style.opacity = 0.6",150),setTimeout("RGraph.showpng_image_div.style.opacity = 0.8",200),setTimeout("RGraph.showpng_image_div.style.opacity = 1",250),setTimeout("RGraph.showpng_image_bg.style.opacity = 0.1",50),setTimeout("RGraph.showpng_image_bg.style.opacity = 0.2",100),setTimeout("RGraph.showpng_image_bg.style.opacity = 0.3",150),setTimeout("RGraph.showpng_image_bg.style.opacity = 0.4",200),setTimeout("RGraph.showpng_image_bg.style.opacity = 0.5",250),a.onclick=function(e){e.stopPropagation?e.stopPropagation():t.cancelBubble=!0},t&&t.stopPropagation&&t.stopPropagation())}}((window,document));