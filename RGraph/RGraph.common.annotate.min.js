RGraph=window.RGraph||{isrgraph:!0,isRGraph:!0,rgraph:!0},function(s,p){navigator.userAgent;RGraph.annotating_canvas_onmousedown=function(t){var e,a,o,n;return 0===t.button&&(t.target.__object__.set("mousedown",!0),a=(e=t.target.__object__).properties,e.context.beginPath(),e.context.strokeStyle=e.get("annotatableColor"),e.context.lineWidth=e.get("annotatableLinewidth"),n=(o=RGraph.getMouseXY(t))[0],t=o[1],"bar"===e.type&&"3d"===a.variant&&(t-=a.variantThreedAngle*o[0]),RGraph.Registry.set("annotatable.actions",[e.get("annotatableColor")]),e.context.moveTo(n,t),RGraph.Registry.set("annotatable.last.coordinates",[n,t]),RGraph.Registry.set("started.annotating",!1),RGraph.Registry.set("annotating",e),RGraph.fireCustomEvent(e,"onannotatebegin")),!1},RGraph.annotating_window_onmouseup=function(t){var e=RGraph.Registry.get("annotating"),a=window;if(0==t.button&&e){for(var o,n=p.getElementsByTagName("canvas"),r=0;r<n.length;++r)n[r].__object__&&n[r].__object__.set("mousedown",!1);RGraph.Registry.get("annotatable.actions")&&0<RGraph.Registry.get("annotatable.actions").length&&a.localStorage&&(o="__rgraph_annotations_"+t.target.id+"__",t=a.localStorage[o]?a.localStorage[o]+"|":"",t+=RGraph.Registry.get("annotatable.actions"),a.localStorage[o]=t),RGraph.Registry.set("annotatable.actions",[]),RGraph.fireCustomEvent(e,"onannotateend")}},RGraph.annotating_canvas_onmousemove=function(t){var e=t.target.__object__,a=e.properties,o=RGraph.getMouseXY(t),n=o[0],r=o[1],t=RGraph.Registry.get("annotatable.last.coordinates");e.get("mousedown")&&("bar"===e.type&&"3d"===a.variant&&(r-=a.variantThreedAngle*o[0]),e.context.beginPath(),t?(e.context.strokeStyle=e.properties.annotatableColor,e.context.moveTo(t[0],t[1]),e.context.lineTo(n,r)):e.context.moveTo(n,r),RGraph.Registry.set("annotatable.actions",RGraph.Registry.get("annotatable.actions")+"|"+n+","+r),RGraph.Registry.set("annotatable.last.coordinates",[n,r]),RGraph.fireCustomEvent(e,"onannotate"),e.context.stroke())},RGraph.showPalette=function(t){navigator.userAgent.indexOf("Safari");var e=t.target.parentNode.__canvas__,a=(e.getContext("2d"),e.__object__),o=document.createElement("DIV");RGraph.getMouseXY(t);o.__object__=a,o.className="RGraph_palette",o.style.position="absolute",o.style.backgroundColor="white",o.style.border="1px solid #999",o.style.left=0,o.style.top=0,o.style.padding="3px",o.style.paddingLeft="5px",o.style.opacity=0,o.style.boxShadow="rgba(48,48,48,0.25) 1px 1px 3px",o.style.WebkitBoxShadow="rgba(48,48,48,0.25) 1px 1px 3px",o.style.MozBoxShadow="rgba(48,48,48,0.25) 1px 1px 3px";for(var n=["Black","Red","Yellow","Green","Orange","White","Magenta","Pink"],r=0,i=n.length;r<i;r+=1){var s=p.createElement("DIV");s.cssClass="RGraph_palette_color",s.style.fontSize="12pt",s.style.cursor="pointer",s.style.padding="1px",s.style.paddingRight="10px",s.style.textAlign="left";var l=document.createElement("SPAN");l.style.display="inline-block",l.style.marginRight="9px",l.style.width="17px",l.style.height="17px",l.style.top="2px",l.style.position="relative",l.style.backgroundColor=n[r],s.appendChild(l),s.innerHTML+=n[r],s.onmouseover=function(){this.style.backgroundColor="#eee"},s.onmouseout=function(){this.style.backgroundColor=""},s.onclick=function(t){var e=this.childNodes[0].style.backgroundColor;a.set("annotatableColor",e)},o.appendChild(s)}return p.body.appendChild(o),o.style.left=t.pageX+"px",o.style.top=t.pageY+"px",t.pageX+(o.offsetWidth+5)>document.body.offsetWidth&&(o.style.left=t.pageX-o.offsetWidth+"px"),RGraph.Registry.set("palette",o),setTimeout(function(){o.style.opacity=.2},50),setTimeout(function(){o.style.opacity=.4},100),setTimeout(function(){o.style.opacity=.6},150),setTimeout(function(){o.style.opacity=.8},200),setTimeout(function(){o.style.opacity=1},250),RGraph.hideContext(),window.onclick=function(){RGraph.hidePalette()},t.stopPropagation(),!1},RGraph.clearAnnotations=function(t){var e;"string"==typeof t?(e=t,t=p.getElementById(e)):e=t.id;t=t.__object__;s.localStorage&&s.localStorage["__rgraph_annotations_"+e+"__"]&&s.localStorage["__rgraph_annotations_"+e+"__"].length&&(s.localStorage["__rgraph_annotations_"+e+"__"]=[],RGraph.fireCustomEvent(t,"onannotateclear"))},RGraph.replayAnnotations=function(t){if(s.localStorage){var e,a,o,n,r=t.context,i=s.localStorage["__rgraph_annotations_"+t.id+"__"];if(r.beginPath(),r.lineWidth=t.get("annotatable.linewidth"),i&&i.length){for(e=0,a=(i=i.split("|")).length;e<a;++e)i[e].match(/[a-z]+/)?(r.stroke(),r.beginPath(),r.strokeStyle=i[e],o=!0):((n=i[e].split(","))[0]=Number(n[0]),n[1]=Number(n[1]),o?(r.moveTo(n[0],n[1]),o=!1):r.lineTo(n[0],n[1]));r.stroke()}}},window.addEventListener("load",function(t){setTimeout(function(){for(var t=p.getElementsByTagName("canvas"),e=0;e<t.length;++e)t[e].__object__&&t[e].__object__.isRGraph&&t[e].__object__.get("annotatable")&&RGraph.replayAnnotations(t[e].__object__)},100)},!1)}(window,document);