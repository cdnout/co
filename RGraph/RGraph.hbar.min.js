RGraph=window.RGraph||{isrgraph:!0,isRGraph:!0,rgraph:!0},RGraph.HBar=function(t){var a=t.id,i=document.getElementById(a),b=t.data;if(this.id=a,this.canvas=i,this.context=this.canvas.getContext?this.canvas.getContext("2d",{alpha:"object"!=typeof a||!1!==a.alpha}):null,(this.canvas.__object__=this).data=b,this.type="hbar",this.isRGraph=!0,this.isrgraph=!0,this.rgraph=!0,this.uid=RGraph.createUID(),this.canvas.uid=this.canvas.uid||RGraph.createUID(),this.colorsParsed=!1,this.coords=[],this.coords2=[],this.coordsText=[],this.original_colors=[],this.firstDraw=!0,this.yaxisLabelsSize=0,this.yaxisTitleSize=0,this.max=0,this.stackedOrGrouped=!1,this.properties={marginLeft:75,marginLeftAuto:!0,marginRight:35,marginTop:35,marginBottom:35,marginInner:2,marginInnerGrouped:2,backgroundBarsCount:null,backgroundBarsColor1:"rgba(0,0,0,0)",backgroundBarsColor2:"rgba(0,0,0,0)",backgroundGrid:!0,backgroundGridColor:"#ddd",backgroundGridLinewidth:1,backgroundGridHsize:25,backgroundGridVsize:25,backgroundGridHlines:!0,backgroundGridVlines:!0,backgroundGridBorder:!0,backgroundGridAutofit:!0,backgroundGridAutofitAlign:!0,backgroundGridHlinesCount:null,backgroundGridVlinesCount:5,backgroundGridDashed:!1,backgroundGridDotted:!1,backgroundColor:null,linewidth:1,title:"",titleBackground:null,titleHpos:null,titleVpos:null,titleBold:null,titleItalic:null,titleFont:null,titleSize:null,titleColor:null,titleX:null,titleY:null,titleHalign:null,titleValign:null,titleOffsetx:0,titleOffsety:0,textSize:12,textColor:"black",textFont:"Arial, Verdana, sans-serif",textBold:!1,textItalic:!1,textAngle:0,textAccessible:!0,textAccessibleOverflow:"visible",textAccessiblePointerevents:!1,text:null,colors:["red","blue","green","pink","yellow","cyan","navy","gray","black"],colorsSequential:!1,colorsStroke:"rgba(0,0,0,0)",xaxis:!0,xaxisLinewidth:1,xaxisColor:"black",xaxisPosition:"bottom",xaxisTickmarks:!0,xaxisTickmarksLength:3,xaxisTickmarksLastLeft:null,xaxisTickmarksLastRight:null,xaxisTickmarksCount:null,xaxisLabels:!0,xaxisLabelsCount:5,xaxisLabelsBold:null,xaxisLabelsItalic:null,xaxisLabelsFont:null,xaxisLabelsSize:null,xaxisLabelsColor:null,xaxisLabelsSpecific:null,xaxisLabelsAngle:0,xaxisLabelsOffsetx:0,xaxisLabelsOffsety:0,xaxisLabelsHalign:null,xaxisLabelsValign:null,xaxisLabelsPosition:"edge",xaxisLabelsSpecificAlign:"left",xaxisScale:!0,xaxisScaleUnitsPre:"",xaxisScaleUnitsPost:"",xaxisScaleMin:0,xaxisScaleMax:0,xaxisScalePoint:".",xaxisScaleThousand:",",xaxisScaleDecimals:null,xaxisScaleZerostart:!0,xaxisTitle:"",xaxisTitleBold:null,xaxisTitleItalic:null,xaxisTitleSize:null,xaxisTitleFont:null,xaxisTitleColor:null,xaxisTitleX:null,xaxisTitleY:null,xaxisTitleOffsetx:null,xaxisTitleOffsety:null,xaxisTitlePos:null,xaxisTitleHalign:null,xaxisTitleValign:null,yaxis:!0,yaxisLinewidth:1,yaxisColor:"black",yaxisTickmarks:!0,yaxisTickmarksCount:null,yaxisTickmarksLastTop:null,yaxisTickmarksLastBottom:null,yaxisTickmarksLength:3,yaxisScale:!1,yaxisLabels:null,yaxisLabelsCount:null,yaxisLabelsOffsetx:0,yaxisLabelsOffsety:0,yaxisLabelsHalign:null,yaxisLabelsValign:null,yaxisLabelsFont:null,yaxisLabelsSize:null,yaxisLabelsColor:null,yaxisLabelsBold:null,yaxisLabelsItalic:null,yaxisLabelsPosition:"section",yaxisLabelsFormattedDecimals:0,yaxisLabelsFormattedPoint:".",yaxisLabelsFormattedThousand:",",yaxisLabelsFormattedUnitsPre:"",yaxisLabelsFormattedUnitsPost:"",yaxisPosition:"left",yaxisTitle:null,yaxisTitleBold:null,yaxisTitleSize:null,yaxisTitleFont:null,yaxisTitleColor:null,yaxisTitleItalic:null,yaxisTitlePos:null,yaxisTitleX:null,yaxisTitleY:null,yaxisTitleOffsetx:0,yaxisTitleOffsety:0,yaxisTitleHalign:null,yaxisTitleValign:null,yaxisTitleAccessible:null,labelsAbove:!1,labelsAboveDecimals:0,labelsAboveSpecific:null,labelsAboveUnitsPre:"",labelsAboveUnitsPost:"",labelsAboveColor:null,labelsAboveFont:null,labelsAboveSize:null,labelsAboveBold:null,labelsAboveItalic:null,labelsAboveOffsetx:0,labelsAboveOffsety:0,labelsInbar:!1,labelsInbarHalign:"center",labelsInbarValign:"center",labelsInbarFont:null,labelsInbarSize:null,labelsInbarBold:null,labelsInbarItalic:null,labelsInbarColor:null,labelsInbarBackground:null,labelsInbarBackgroundPadding:0,labelsInbarUnitsPre:null,labelsInbarUnitsPost:null,labelsInbarPoint:null,labelsInbarThousand:null,labelsInbarFormatter:null,labelsInbarDecimals:null,labelsInbarOffsetx:0,labelsInbarOffsety:0,labelsInbarSpecific:null,contextmenu:null,key:null,keyBackground:"white",keyPosition:"graph",keyHalign:"right",keyShadow:!1,keyShadowColor:"#666",keyShadowBlur:3,keyShadowOffsetx:2,keyShadowOffsety:2,keyPositionMarginBoxed:!1,keyPositionX:null,keyPositionY:null,keyColorShape:"square",keyRounded:!0,keyLinewidth:1,keyColors:null,keyInteractive:!1,keyInteractiveHighlightChartStroke:"black",keyInteractiveHighlightChartFill:"rgba(255,255,255,0.7)",keyInteractiveHighlightLabel:"rgba(255,0,0,0.2)",keyLabelsColor:null,keyLabelsFont:null,keyLabelsSize:null,keyLabelsBold:null,keyLabelsItalic:null,keyLabelsOffsetx:0,keyLabelsOffsety:0,unitsIngraph:!1,shadow:!1,shadowColor:"#666",shadowBlur:3,shadowOffsetx:3,shadowOffsety:3,grouping:"grouped",tooltips:null,tooltipsEvent:"onclick",tooltipsEffect:"slide",tooltipsCssClass:"RGraph_tooltip",tooltipsCss:null,tooltipsHighlight:!0,tooltipsFormattedThousand:",",tooltipsFormattedPoint:".",tooltipsFormattedDecimals:0,tooltipsFormattedUnitsPre:"",tooltipsFormattedUnitsPost:"",tooltipsFormattedKeyColors:null,tooltipsFormattedKeyColorsShape:"square",tooltipsFormattedKeyLabels:[],tooltipsFormattedListType:"ul",tooltipsFormattedListItems:null,tooltipsFormattedTableHeaders:null,tooltipsFormattedTableData:null,tooltipsPointer:!0,tooltipsPositionStatic:!0,tooltipsHotspotYonly:!1,highlightFill:"rgba(255,255,255,0.7)",highlightStroke:"rgba(0,0,0,0)",highlightStyle:null,annotatable:!1,annotatableColor:"black",annotatableLinewidth:1,resizable:!1,resizableHandleAdjust:[0,0],resizableHandleBackground:null,redraw:!0,variant:"hbar",variantThreedAngle:.1,variantThreedOffsetx:10,variantThreedOffsety:5,variantThreedXaxis:!0,variantThreedYaxis:!0,adjustable:!1,adjustableOnly:null,corners:"square",cornersRoundRadius:10,clearto:"rgba(0,0,0,0)"},this.canvas){for(this.data=RGraph.stringsToNumbers(this.data),s=0,C=this.data.length;s<C;++s)"object"!=typeof this.data[s]||RGraph.isNull(this.data[s])||(this.stackedOrGrouped=!0);for(var a=RGraph.arrayLinearize(b),s=0,C=a.length;s<C;++s)this["$"+s]={};this.data_arr=RGraph.arrayLinearize(this.data);var L=this.properties;this.path=RGraph.pathObjectFunction,RGraph.Effects&&"function"==typeof RGraph.Effects.decorate&&RGraph.Effects.decorate(this),this.responsive=RGraph.responsive,this.set=function(t){var a=void 0===arguments[1]?null:arguments[1];if(1!==arguments.length||"object"!=typeof t)return L[t]=a,this;for(s in t)"string"==typeof s&&this.set(s,t[s]);return this},this.get=function(t){return L[t]},this.draw=function(){if(RGraph.fireCustomEvent(this,"onbeforedraw"),this.canvas.__rgraph_aa_translated__||(this.context.translate(.5,.5),this.canvas.__rgraph_aa_translated__=!0),this.yaxisLabelSubstitution(),L.adjustable&&"stacked"===L.grouping&&alert("[RGRAPH] The HBar does not support stacked charts with adjusting"),RGraph.isNull(L.backgroundGridHlines.count)&&this.set("backgroundGridHlinesCount",this.data.length),"3d"===L.variant&&(L.textAccessible||this.context.setTransform(1,L.variantThreedAngle,0,1,.5,.5),25===L.marginBottom&&this.set("marginBottom",80)),this.colorsParsed||(this.parseColors(),this.colorsParsed=!0),this.yaxisTitleSize=0,L.yaxisLabels){for(var t,a=L.yaxisLabels,i="right"===L.yaxisPosition?"marginRight":"marginLeft",s=RGraph.getTextConf({object:this,prefix:"yaxisLabels"}),e=0,r=0;e<a.length;e+=1){var o=RGraph.measureText(a[e],s.bold,s.font,s.size)[0]||0;this.yaxisLabelsSize=Math.max(r,o),r=this.yaxisLabelsSize}L.yaxisTitle&&(s=RGraph.getTextConf({object:this,prefix:"yaxisTitle"}),t=RGraph.measureText(L.yaxisTitle,s.bold,s.font,s.size)||[],this.yaxisTitleSize+=t[1],L[i]+=this.yaxisTitleSize)}return L.marginLeftAuto&&(i="right"===L.yaxisPosition?"marginRight":"marginLeft",this.set(i,this.yaxisLabelsSize+this.yaxisTitleSize+10)),this.marginLeft=L.marginLeft,this.marginRight=L.marginRight,this.marginTop=L.marginTop,this.marginBottom=L.marginBottom,this.coords=[],this.coords2=[],this.coordsText=[],(this.max=0)<L.xaxisScaleMin&&"stacked"===L.grouping&&(alert("[HBAR] Using xaxisScaleMin is not supported with stacked charts, resetting xaxisScaleMin to zero"),this.set("xaxisScaleMin",0)),this.graphwidth=this.canvas.width-this.marginLeft-this.marginRight,this.graphheight=this.canvas.height-this.marginTop-this.marginBottom,this.halfgrapharea=this.grapharea/2,this.halfTextHeight=L.textSize/2,this.halfway=Math.round(this.graphwidth/2+this.marginLeft),RGraph.Background.draw(this),this.drawbars(),this.drawAxes(),this.drawLabels(),this.drawLabelsInbar(),L.key&&L.key.length&&RGraph.drawKey(this,L.key,L.colors),L.contextmenu&&RGraph.showContext(this),RGraph.drawInGraphLabels(this),RGraph.addCustomText(this),RGraph.installEventListeners(this),this.firstDraw&&(this.firstDraw=!1,RGraph.fireCustomEvent(this,"onfirstdraw"),this.firstDrawFunc()),RGraph.fireCustomEvent(this,"ondraw"),this},this.exec=function(t){return t(this),this},this.drawAxes=function(){RGraph.drawXAxis(this),RGraph.drawYAxis(this)},this.yaxisLabelSubstitution=function(){if(L.yaxisLabels&&L.yaxisLabels.length){"string"==typeof L.yaxisLabels&&(L.yaxisLabels=RGraph.arrayPad({array:[],length:this.data.length,value:L.yaxisLabels}));for(var t=0;t<L.yaxisLabels.length;++t)L.yaxisLabels[t]=RGraph.labelSubstitution({object:this,text:L.yaxisLabels[t],index:t,value:this.data[t],decimals:L.yaxisLabelsFormattedDecimals||0,unitsPre:L.yaxisLabelsFormattedUnitsPre||"",unitsPost:L.yaxisLabelsFormattedUnitsPost||"",thousand:L.yaxisLabelsFormattedThousand||",",point:L.yaxisLabelsFormattedPoint||"."})}},this.drawLabels=function(){},this.drawbars=function(){this.context.lineWidth=L.linewidth,this.context.strokeStyle=L.colorsStroke,this.context.fillStyle=L.colors[0];if(L.xaxisScaleMax)this.scale2=RGraph.getScale({object:this,options:{"scale.max":L.xaxisScaleMax,"scale.min":L.xaxisScaleMin,"scale.decimals":Number(L.xaxisScaleDecimals),"scale.point":L.xaxisScalePoint,"scale.thousand":L.xaxisScaleThousand,"scale.round":L.xaxisScaleRound,"scale.units.pre":L.xaxisScaleUnitsPre,"scale.units.post":L.xaxisScaleUnitsPost,"scale.labels.count":L.xaxisLabelsCount,"scale.strict":!0}}),this.max=this.scale2.max;else{for(var t=L.grouping,a=0;a<this.data.length;++a)v="object"==typeof this.data[a]?"grouped"==t?Number(RGraph.arrayMax(this.data[a],!0)):Number(RGraph.arraySum(this.data[a])):Number(Math.abs(this.data[a])),this.max=Math.max(Math.abs(this.max),Math.abs(v));this.scale2=RGraph.getScale({object:this,options:{"scale.max":this.max,"scale.min":L.xaxisScaleMin,"scale.decimals":Number(L.xaxisScaleDecimals),"scale.point":L.xaxisScalePoint,"scale.thousand":L.xaxisScaleThousand,"scale.round":L.xaxisScaleRound,"scale.units.pre":L.xaxisScaleUnitsPre,"scale.units.post":L.xaxisScaleUnitsPost,"scale.labels.count":L.xaxisLabelsCount}}),this.max=this.scale2.max,this.min=this.scale2.min}null==L.xaxisScaleDecimals&&1==Number(this.max)&&this.set("xaxisScaleDecimals",1);var i=0;this.numbars=RGraph.arrayLinearize(this.data).length,L.adjustable&&!L.xaxisScaleMax&&this.set("xaxisScaleMax",this.scale2.max),"3d"===L.variant&&RGraph.draw3DAxes(this);var s=this.canvas.width-this.marginLeft-this.marginRight,e=s/2;for(a=C=this.data.length-1;0<=a;--a){var r=Math.abs(this.data[a]/this.max*s),o=this.graphheight/this.data.length,l=this.getXCoord(0),n=this.marginTop+a*o,h=L.marginInner;if(0<L.xaxisScaleMin&&L.xaxisScaleMax>L.xaxisScaleMin&&(l=this.getXCoord(L.xaxisScaleMin)),"right"===L.yaxisPosition&&(l=this.canvas.width-this.marginRight-Math.abs(r)),r<0&&(l-=r,r=Math.abs(r)),L.shadow&&(this.context.shadowColor=L.shadowColor,this.context.shadowBlur=L.shadowBlur,this.context.shadowOffsetX=L.shadowOffsetx,this.context.shadowOffsetY=L.shadowOffsety),this.context.beginPath(),"number"==typeof this.data[a]||RGraph.isNull(this.data[a])){var c=o-2*h,d=(this.data[a]-L.xaxisScaleMin)/(this.max-L.xaxisScaleMin)*this.graphwidth,x=l;this.scale2.min<0&&0<this.scale2.max&&"left"===L.yaxisPosition&&(d=this.data[a]/(this.max-L.xaxisScaleMin)*this.graphwidth),"center"==L.yaxisPosition?(d/=2,x+=e,this.data[a]<0?(d=(Math.abs(this.data[a])-L.xaxisScaleMin)/(this.max-L.xaxisScaleMin),d*=this.graphwidth/2,x=this.graphwidth/2+this.marginLeft-d):0<this.data[a]&&(x=this.graphwidth/2+this.marginLeft)):"right"==L.yaxisPosition&&(d=Math.abs(d),x=this.canvas.width-this.marginRight-d),this.context.strokeStyle=L.colorsStroke,this.context.fillStyle=L.colors[0],++i,L.colorsSequential&&"number"==typeof i&&(L.colors[this.numbars-i]?this.context.fillStyle=L.colors[this.numbars-i]:this.context.fillStyle=L.colors[L.colors.length-1]),"round"===L.corners&&(this.context.rectOld=this.context.rect,this.context.rect=this.roundedCornersRect),this.context.beginPath(),this.context.lineJoin="miter",this.context.lineCap="square",this.context.rect(x,this.marginTop+a*o+L.marginInner,d,c),this.context.stroke(),this.context.fill(),"round"===L.corners&&(this.context.rect=this.context.rectOld,this.context.rectOld=null),this.coords.push([x,n+h,d,o-2*h,this.context.fillStyle,this.data[a],!0]),"3d"===L.variant&&"number"==typeof this.data[a]&&(p=this.context.strokeStyle,f=this.context.fillStyle,RGraph.noShadow(this),m=d,S=o-2*h,R=L.variantThreedOffsetx,G=L.variantThreedOffsety,v=this.data[a],this.path("b m % % l % % l % % l % % c s % f % f rgba(255,255,255,0.6)",x,y=n+h,x+R-("left"==L.yaxisPosition&&v<0?R:0),y-G,x+m+R-("center"==L.yaxisPosition&&v<0?R:0),y-G,x+m,y,this.context.strokeStyle,this.context.fillStyle),"right"===L.yaxisPosition||"center"===L.yaxisPosition&&v<0||!(0<=v)||RGraph.isNull(v)||this.path("b fs % m % % l % % l % % l % % c s % f % f rgba(0,0,0,0.25)",f,x+m,y,x+m+R,y-G,x+m+R,y-G+S,x+m,y+S,this.context.strokeStyle,f))}else if("object"==typeof this.data[a]&&"stacked"===L.grouping){"center"==L.yaxisPosition?alert("[HBAR] You can't have a stacked chart with the Y axis in the center, change it to grouped"):"right"==L.yaxisPosition&&(l=this.canvas.width-this.marginRight);c=o-2*h;for(void 0===this.coords2[a]&&(this.coords2[a]=[]),j=0;j<this.data[a].length;++j){L.shadow&&"3d"===L.variant&&(this.context.shadowColor=L.shadowColor,this.context.shadowBlur=L.shadowBlur,this.context.shadowOffsetX=L.shadowOffsetx,this.context.shadowOffsetY=L.shadowOffsety),RGraph.isNull(this.data[a][j])||(this.data[a][j]=Math.abs(this.data[a][j]));j,this.data[a].length;this.context.strokeStyle=L.colorsStroke,++i,L.colorsSequential&&"number"==typeof i?L.colors[this.numbars-i]?this.context.fillStyle=L.colors[this.numbars-i]:this.context.fillStyle=L.colors[L.colors.length-1]:L.colors[j]&&(this.context.fillStyle=L.colors[j]);r=this.data[a][j]/this.max*this.graphwidth,RGraph.arraySum(this.data[a]),this.max,this.graphwidth;"right"===L.yaxisPosition&&(l-=r),"round"===L.corners&&j===this.data[a].length-1&&(this.context.rectOld=this.context.rect,this.context.rect=this.roundedCornersRect),this.context.beginPath(),this.context.lineJoin="miter",this.context.lineCap="square",this.context.rect(l,this.marginTop+L.marginInner+this.graphheight/this.data.length*a,r,o-2*h),this.context.stroke(),this.context.fill(),this.context.beginPath(),"round"===L.corners&&j===this.data[a].length-1&&(this.context.rect=this.context.rectOld,this.context.rectOld=null),this.coords.push([l,n+h,r,o-2*h,this.context.fillStyle,RGraph.arraySum(this.data[a]),j==this.data[a].length-1]),this.coords2[a].push([l,n+h,r,o-2*h,this.context.fillStyle,RGraph.arraySum(this.data[a]),j==this.data[a].length-1]),"3d"===L.variant&&(RGraph.noShadow(this),p=this.context.strokeStyle,f=this.context.fillStyle,x=l,y=n+h,m=r,S=o-2*h,R=L.variantThreedOffsetx,G=L.variantThreedOffsety,v=this.data[a][j],RGraph.isNull(v)||this.path("b m % % l % % l % % l % % c s % f % f rgba(255,255,255,0.6)",x,y,x+R,y-G,x+m+R,y-G,x+m,y,this.context.strokeStyle,this.context.fillStyle),"right"===L.yaxisPosition||"center"===L.yaxisPosition&&v<0||RGraph.isNull(v)||this.path("fs % b m % % l % % l % % l % % c s % f % f rgba(0,0,0,0.25)",f,x+m,y,x+m+R,y-G,x+m+R,y-G+S,x+m,y+S,this.context.strokeStyle,f),this.context.beginPath(),this.context.strokeStyle=p,this.context.fillStyle=f),"right"!==L.yaxisPosition&&(l+=r)}}else if("object"==typeof this.data[a]&&"grouped"==L.grouping){var g=L.marginInnerGrouped,u=(o-2*h-(this.data[a].length-1)*g)/this.data[a].length;for(void 0===this.coords2[a]&&(this.coords2[a]=[]),j=this.data[a].length-1;0<=j;--j){L.shadow&&RGraph.setShadow(this,L.shadowColor,L.shadowOffsetx,L.shadowOffsety,L.shadowBlur),this.context.strokeStyle=L.colorsStroke,++i,L.colorsSequential&&"number"==typeof i?L.colors[this.numbars-i]?this.context.fillStyle=L.colors[this.numbars-i]:this.context.fillStyle=L.colors[L.colors.length-1]:L.colors[j]&&(this.context.fillStyle=L.colors[j]);var b,p,f,y,m,S,R,G,v,k=this.marginTop+o*a+u*j+h+g*j;b=0<L.xaxisScaleMin&&L.xaxisScaleMax>L.xaxisScaleMin?(r=(this.data[a][j]-L.xaxisScaleMin)/(this.max-L.xaxisScaleMin)*(this.canvas.width-this.marginLeft-this.marginRight),this.getXCoord(0<L.xaxisScaleMin&&L.xaxisScaleMax>L.xaxisScaleMin?L.xaxisScaleMin:0)):(r=this.data[a][j]/(this.max-L.xaxisScaleMin)*(this.canvas.width-this.marginLeft-this.marginRight),this.getXCoord(0)),"center"==L.yaxisPosition?r/=2:"right"==L.yaxisPosition&&(r=Math.abs(r),b=this.canvas.width-this.marginRight-Math.abs(r)),r<0&&(b+=r,r*=-1),"round"===L.corners&&(this.context.rectOld=this.context.rect,this.context.rect=this.roundedCornersRect),this.context.beginPath(),this.context.lineJoin="miter",this.context.lineCap="square",this.context.rect(b,k,r,u),this.context.stroke(),this.context.fill(),"round"===L.corners&&(this.context.rect=this.context.rectOld,this.context.rectOld=null),this.coords.push([b,k,r,u,this.context.fillStyle,this.data[a][j],!0]),this.coords2[a].push([b,k,r,u,this.context.fillStyle,this.data[a][j],!0]),"3d"===L.variant&&(RGraph.noShadow(this),p=this.context.strokeStyle,f=this.context.fillStyle,x=b,y=k,m=r,S=u,R=L.variantThreedOffsetx,G=L.variantThreedOffsety,v=this.data[a][j],this.path("b m % % l % % l % % l % % c s % f % f rgba(255,255,255,0.6)",x,y,x+R,y-G,x+m+R-(v<0?R:0),y-G,x+m,y,this.context.strokeStyle,this.context.fillStyle),"right"===L.yaxisPosition||"center"===L.yaxisPosition&&v<0||!(0<=v)||RGraph.isNull(v)||this.path("fs % b m % %  l % % l % % l % % c s % f % f rgba(0,0,0,0.25)",f,x+m,y,x+m+R,y-G,x+m+R,y-G+S,x+m,y+S,this.context.strokeStyle,f),this.context.beginPath(),this.context.strokeStyle=p,this.context.fillStyle=f)}k+=h}this.context.closePath()}if(this.context.stroke(),this.context.fill(),"right"===L.yaxisPosition&&this.path("cr % % % %",this.canvas.width-this.marginRight+L.variantThreedOffsetx,"0",this.marginRight,this.canvas.height),"right"===L.yaxisPosition&&"3d"===L.variant&&RGraph.draw3DYAxis(this),RGraph.noShadow(this),this.coords=RGraph.arrayReverse(this.coords),"grouped"===L.grouping)for(var a=0;a<this.coords2.length;++a)this.coords2[a]=RGraph.arrayReverse(this.coords2[a]);this.redrawBars()},this.redrawBars=function(){if(L.redraw){var t=this.coords;L.textFont,L.textSize,L.textColor;RGraph.noShadow(this),this.context.strokeStyle=L.colorsStroke;for(var a=0;a<t.length;++a){L.shadow&&this.path("b lw % r % % % % s % f %",L.linewidth,t[a][0],t[a][1],t[a][2],t[a][3],L.colorsStroke,t[a][4]);var i,s,e,r,o="left";L.labelsAbove&&t[a][6]&&(t[a][0],t[a][2],this.context.measureText(L.labelsAboveUnitsPre+this.coords[a][5]+L.labelsAboveUnitsPost).width,this.canvas.width,i=RGraph.numberFormat({object:this,number:this.coords[a][5].toFixed(L.labelsAboveDecimals),unitspre:L.labelsAboveUnitsPre,unitspost:L.labelsAboveUnitsPost,point:L.labelsAbovePoint,thousand:L.labelsAboveThousand}),RGraph.noShadow(this),"object"==typeof L.labelsAboveSpecific&&L.labelsAboveSpecific&&L.labelsAboveSpecific[a]&&(i=L.labelsAboveSpecific[a]),s=t[a][0]+t[a][2]+5,e=t[a][1]+t[a][3]/2,("right"===L.yaxisPosition||"center"===L.yaxisPosition&&this.data_arr[a]<0)&&(s=t[a][0]-5,o="right"),r=RGraph.getTextConf({object:this,prefix:"labelsAbove"}),RGraph.text({object:this,font:r.font,size:r.size,color:r.color,bold:r.bold,italic:r.italic,x:s+L.labelsAboveOffsetx,y:e+L.labelsAboveOffsety,text:i,valign:"center",halign:o,tag:"labels.above"}))}}},this.getShape=function(t){for(var a=RGraph.getMouseXY(t),i=0,s=this.coords.length;i<s;i++){var e,r,o,l=a[0],n=a[1],h=this.coords[i][0],c=this.coords[i][1],d=this.coords[i][2],x=this.coords[i][3],g=i,u=RGraph.sequentialIndexToGrouped(i,this.data);if("round"===L.corners&&(e=0===u[1],("stacked"===L.grouping&&e||"stacked"!==L.grouping)&&(this.context.rectOld=this.context.rect,this.context.rect=this.roundedCornersRect,r=!0)),L.tooltipsHotspotYonly?this.path("b r % % % % ",this.marginLeft,c,this.canvas.width-this.marginRight-this.marginLeft,x):this.path("b r % % % %",h,c,d,x),r&&(this.context.rect=this.context.rectOld,r=this.context.rectOld=null),this.context.isPointInPath(l,n)){RGraph.parseTooltipText&&(o=RGraph.parseTooltipText(L.tooltips,i));n=(u=RGraph.sequentialIndexToGrouped(g,this.data))[0];return{object:this,x:h,y:c,width:d,height:x,sequentialIndex:g,dataset:n,index:u[1],label:L.yaxisLabels&&"string"==typeof L.yaxisLabels[n]?L.yaxisLabels[n]:null,tooltip:"string"==typeof o?o:null}}}},this.getValue=function(t){var a,i,s;return(i=2==t.length?(a=t[0],t[1]):(a=(i=RGraph.getMouseXY(t))[0],i[1]))<this.marginTop||i>this.canvas.height-this.marginBottom||a<this.marginLeft||a>this.canvas.width-this.marginRight?null:("center"==L.yaxisPosition?(s=(a-this.marginLeft)/(this.graphwidth/2)*(this.max-L.xaxisScaleMin),s-=this.max,0<L.xaxisScaleMin&&(s=(a-this.marginLeft-this.graphwidth/2)/(this.graphwidth/2)*(this.max-L.xaxisScaleMin),s+=L.xaxisScaleMin,a<this.marginLeft+this.graphwidth/2&&(s-=2*L.xaxisScaleMin))):"right"==L.yaxisPosition?(s=(a-this.marginLeft)/this.graphwidth*(this.scale2.max-L.xaxisScaleMin),s=this.scale2.max-s):(s=(a-this.marginLeft)/this.graphwidth*(this.scale2.max-L.xaxisScaleMin),s+=L.xaxisScaleMin),s)},this.highlight=function(t){if("function"==typeof L.highlightStyle)L.highlightStyle(t);else if("string"==typeof L.highlightStyle&&"invert"===L.highlightStyle)for(var a=0;a<this.coords.length;++a)a!==t.sequentialIndex&&this.path("b r % % % % s % f %",this.coords[a][0]-.5,this.coords[a][1]-.5,this.coords[a][2]+1,this.coords[a][3]+1,L.highlightStroke,L.highlightFill);else RGraph.Highlight.rect(this,t)},this.getObjectByXY=function(t){var a=RGraph.getMouseXY(t);if("3d"!==L.variant||L.textAccessible||(t=L.variantThreedAngle*a[0],a[1]-=t),a[0]>=this.marginLeft&&a[0]<=this.canvas.width-this.marginRight&&a[1]>=this.marginTop&&a[1]<=this.canvas.height-this.marginBottom)return this},this.getXCoord=function(t){if("center"==L.yaxisPosition){if(t>this.max||t<-1*this.max)return null;var a=(this.canvas.width-L.marginLeft-L.marginRight)/2,i=(t-L.xaxisScaleMin)/(this.max-L.xaxisScaleMin)*a+a;i=L.marginLeft+i}else{if(t>this.max||t<0)return null;a=this.canvas.width-L.marginLeft-L.marginRight,i=(t-L.xaxisScaleMin)/(this.max-L.xaxisScaleMin)*a;i=L.marginLeft+i}return i},this.parseColors=function(){0===this.original_colors.length&&(this.original_colors.colors=RGraph.arrayClone(L.colors),this.original_colors.backgroundGridColor=RGraph.arrayClone(L.backgroundGridColor),this.original_colors.backgroundColor=RGraph.arrayClone(L.backgroundColor),this.original_colors.backgroundBarsColor1=RGraph.arrayClone(L.backgroundBarsColor1),this.original_colors.backgroundBarsColor2=RGraph.arrayClone(L.backgroundBarsColor2),this.original_colors.textColor=RGraph.arrayClone(L.textColor),this.original_colors.yaxisLabelsColor=RGraph.arrayClone(L.yaxisLabelsColor),this.original_colors.colorsStroke=RGraph.arrayClone(L.colorsStroke),this.original_colors.axesColor=RGraph.arrayClone(L.axesColor),this.original_colors.highlightFill=RGraph.arrayClone(L.highlightFill),this.original_colors.highlightStroke=RGraph.arrayClone(L.highlightStroke),this.original_colors.annotatableColor=RGraph.arrayClone(L.annotatableColor));for(var t=L.colors,a=0;a<t.length;++a)t[a]=this.parseSingleColorForGradient(t[a]);L.backgroundGridColor=this.parseSingleColorForGradient(L.backgroundGridColor),L.backgroundColor=this.parseSingleColorForGradient(L.backgroundColor),L.backgroundBarsColor1=this.parseSingleColorForGradient(L.backgroundBarsColor1),L.backgroundBarsColor2=this.parseSingleColorForGradient(L.backgroundBarsColor2),L.textColor=this.parseSingleColorForGradient(L.textColor),L.yaxisLabelsColor=this.parseSingleColorForGradient(L.yaxisLabelsColor),L.colorsStroke=this.parseSingleColorForGradient(L.colorsStroke),L.axesColor=this.parseSingleColorForGradient(L.axesColor),L.highlightFill=this.parseSingleColorForGradient(L.highlightFill),L.highlightStroke=this.parseSingleColorForGradient(L.highlightStroke),L.annotatableColor=this.parseSingleColorForGradient(L.annotatableColor)},this.reset=function(){},this.parseSingleColorForGradient=function(t){if(!t||"string"!=typeof t)return t;if(t.match(/^gradient\((.*)\)$/i)){if(t.match(/^gradient\(({.*})\)$/i))return RGraph.parseJSONGradient({object:this,def:RegExp.$1});var a=RegExp.$1.split(":");"right"===L.yaxisPosition&&(a=RGraph.arrayReverse(a));var i=this.context.createLinearGradient(L.marginLeft,0,this.canvas.width-L.marginRight,0),s=1/(a.length-1);i.addColorStop(0,RGraph.trim(a[0]));for(var e=1;e<a.length;++e)i.addColorStop(e*s,RGraph.trim(a[e]))}return i||t},this.interactiveKeyHighlight=function(e){var r=this;this.coords2.forEach(function(t,a,i){var s=r.coords2[a][e],a=r.context.lineWidth;r.path("b lw 2 r % % % % f % s % lw %",s[0]-.5,s[1]-.5,s[2]+1,s[3]+1,L.keyInteractiveHighlightChartFill,L.keyInteractiveHighlightChartStroke,a)})},this.on=function(t,a){return"function"!=typeof this[t="on"!==t.substr(0,2)?"on"+t:t]?this[t]=a:RGraph.addCustomEventListener(this,t,a),this},this.firstDrawFunc=function(){},this.getShapeByY=function(t){for(var a=RGraph.getMouseXY(t),i=arguments[1]||this,s=0,e=i.coords.length;s<e;s++)if(0!=i.coords[s].length){a[0];var r=a[1],o=i.coords[s][0],l=i.coords[s][1],n=i.coords[s][2],h=i.coords[s][3];if(l<=r&&r<=l+h){var c,r=RGraph.sequentialIndexToGrouped(s,this.data);return{object:i,x:o,y:l,width:n,height:h,dataset:r[0],index:r[1],sequentialIndex:s,tooltip:(c=L.tooltips?RGraph.parseTooltipText?RGraph.parseTooltipText(L.tooltips,s):L.tooltips[s]:c)||null}}}return null},this.adjusting_mousemove=function(t){var a,i,s;L.adjustable&&RGraph.Registry.get("adjusting")&&RGraph.Registry.get("adjusting").uid==this.uid&&(a=Number(this.getValue(t)),(i=RGraph.Registry.get("adjusting.shape"))&&(RGraph.Registry.set("adjusting.shape",i),this.stackedOrGrouped&&"grouped"==L.grouping?(s=RGraph.sequentialIndexToGrouped(i.sequentialIndex,this.data),"number"==typeof this.data[s[0]]?this.data[s[0]]=Number(a):RGraph.isNull(this.data[s[0]])||(this.data[s[0]][s[1]]=Number(a))):"number"==typeof this.data[i.dataset]&&(this.data[i.dataset]=Number(a)),RGraph.redrawCanvas(t.target),RGraph.fireCustomEvent(this,"onadjust")))},this.drawLabelsInbar=function(){if(L.labelsInbar){var t=L.labelsInbarValign,a=L.labelsInbarHalign,i=RGraph.getTextConf({object:this,prefix:"labelsInbar"});b="stacked"===L.grouping?function(t){for(var a=[],i=0;i<t.length;++i)if("number"==typeof t[i])a.push(t[i]);else if("object"==typeof t[i]&&!RGraph.isNull(t[i]))for(var s=t[i].length-1;0<=s;s--)a.push(t[i][s]);return a}(this.data):RGraph.arrayLinearize(this.data);for(var s,e,r,o,l=0;l<b.length;++l)RGraph.isNumber(b[l])&&!isNaN(b[l])&&0<this.coords[l][2]&&(o=b[l].toFixed(L.labelsInbarDecimals),RGraph.sequentialIndexToGrouped(l,this.data),s=RGraph.numberFormat({object:this,number:Number(o).toFixed(L.labelsInbarDecimals),unitspre:L.labelsInbarUnitsPre,unitspost:L.labelsInbarUnitsPost,point:L.labelsInbarPoint,thousand:L.labelsInbarThousand,formatter:L.labelsInbarFormatter}),e=RGraph.measureText({text:s,bold:i.bold,font:i.font,size:i.size}),r=this.coords[l][0]+this.coords[l][2]/2+L.labelsInbarOffsetx,o=this.coords[l][1]+this.coords[l][3]/2+L.labelsInbarOffsety,e[0],e[1],"left"===L.labelsInbarHalign?(a="left",r=this.coords[l][0]+5+L.labelsInbarOffsetx):"right"===L.labelsInbarHalign&&(a="right",r=this.coords[l][0]+this.coords[l][2]-5+L.labelsInbarOffsetx),"bottom"===L.labelsInbarValign?(t="bottom",o=this.coords[l][1]-5+this.coords[l][3]+L.labelsInbarOffsety):"top"===L.labelsInbarValign&&(t="top",o=this.coords[l][1]+5+L.labelsInbarOffsety),RGraph.isArray(L.labelsInbarSpecific)&&(RGraph.isString(L.labelsInbarSpecific[l])||RGraph.isNumber(L.labelsInbarSpecific[l]))&&(s=L.labelsInbarSpecific[l]),RGraph.text({object:this,font:i.font,size:i.size,color:i.color,bold:i.bold,italic:i.italic,x:r,y:o,text:s,valign:t,halign:a,tag:"labels.above",bounding:RGraph.isString(L.labelsInbarBackground),boundingFill:L.labelsInbarBackground,boundingStroke:"transparent"}))}},this.grow=function(){var n=arguments[0]||{},h=n.frames||120,c=0,d=arguments[1]||function(){},x=this,g=this.get("labelsAbove");if(this.original_data=RGraph.arrayClone(this.data),0==L.xaxisScaleMax){for(var t=0,a=0;a<x.data.length;++a)t=RGraph.isArray(x.data[a])&&"stacked"==L.grouping?Math.max(t,RGraph.arraySum(x.data[a])):RGraph.isArray(x.data[a])&&"grouped"==L.grouping?Math.max(t,RGraph.arrayMax(x.data[a])):Math.max(t,Math.abs(RGraph.arrayMax(x.data[a])));var i=RGraph.getScale({object:x,options:{"scale.max":t,"scale.round":x.properties.xaxisScaleRound}});x.set("xaxisScaleMax",i.max)}if(RGraph.isArray(n.data)){for(t=0,a=0;a<n.data.length;++a)if("object"==typeof n.data[a])for(var s=0;s<n.data[a].length;++s)"string"==typeof n.data[a][s]&&n.data[a][s].match(/(\+|\-)([0-9]+)/)&&("+"===RegExp.$1?n.data[a][s]=this.original_data[a][s]+parseInt(RegExp.$2):n.data[a][s]=this.original_data[a][s]-parseInt(RegExp.$2)),t=Math.max(t,n.data[a][s]);else t=("string"==typeof n.data[a]&&n.data[a].match(/(\+|\-)([0-9]+)/)&&("+"===RegExp.$1?n.data[a]=this.original_data[a]+parseFloat(RegExp.$2):n.data[a]=this.original_data[a]-parseFloat(RegExp.$2)),Math.max(t,n.data[a]));var e=RGraph.getScale({object:this,options:{"scale.max":t}});RGraph.isNull(this.get("xaxisScaleMax"))&&this.set("xaxisScaleMax",e.max)}if(this.set("labelsAbove",!1),RGraph.isNull(L.xaxisScaleMax)){for(t=0,a=0;a<x.data.length;++a)if(RGraph.isArray(this.data[a])&&"stacked"===L.grouping)t=Math.max(t,Math.abs(RGraph.arraySum(this.data[a])));else if(RGraph.isArray(this.data[a])&&"grouped"===L.grouping){for(var s=0,r=[];s<this.data[a].length;s++)r.push(Math.abs(this.data[a][s]));t=Math.max(t,Math.abs(RGraph.arrayMax(r)))}else t=Math.max(t,Math.abs(this.data[a]));e=RGraph.getScale({object:this,options:{"scale.max":t}});this.set("xaxisScaleMax",e.max)}"number"==typeof n.xmax&&x.set("xaxisScaleMax",n.xmax);var u=function(){for(var t=RGraph.Effects.getEasingMultiplier(h,c),a=0,i=x.original_data.length;a<i;++a)if("object"!=typeof x.data[a]||RGraph.isNull(x.data[a]))x.firstDraw||!n.data?0<L.xaxisScaleMin&&L.xaxisScaleMax>L.xaxisScaleMin?x.data[a]=t*(x.original_data[a]-L.xaxisScaleMin)+L.xaxisScaleMin:x.data[a]=t*x.original_data[a]:n.data&&n.data.length===x.original_data.length&&(s=n.data[a]-x.original_data[a],x.data[a]=t*s+x.original_data[a]);else for(var s,e=0,r=x.data[a].length;e<r;++e)x.firstDraw||!n.data?0<L.xaxisScaleMin&&L.xaxisScaleMax>L.xaxisScaleMin?x.data[a][e]=t*(x.original_data[a][e]-L.xaxisScaleMin)+L.xaxisScaleMin:x.data[a][e]=t*x.original_data[a][e]:n.data&&n.data.length===x.original_data.length&&(s=n.data[a][e]-x.original_data[a][e],x.data[a][e]=t*s+x.original_data[a][e]);if(RGraph.redrawCanvas(x.canvas),c<h)c+=1,RGraph.Effects.updateCanvas(u);else{if(RGraph.isArray(n.data))for(var o=RGraph.arrayLinearize(b),l=0;l<o.length;++l)x["$"+l]||(x["$"+l]={});x.data=b,x.original_data=RGraph.arrayClone(b),g&&(x.set("labelsAbove",!0),RGraph.redraw()),d(x)}};return u(),this},this.wave=function(){var r=this,o=arguments[0]||{};o.frames=o.frames||120,o.startFrames=[],o.counters=[];var l=o.frames/3,n=-1,h=arguments[1]||function(){},c=RGraph.arrayClone(r.data),d=L.labelsAbove;this.set("labelsAbove",!1);for(var t=0,a=r.data.length;t<a;t+=1)if(o.startFrames[t]=o.frames/2/(r.data.length-1)*t,"object"==typeof r.data[t]&&r.data[t]){o.counters[t]=[];for(var i=0;i<r.data[t].length;i++)o.counters[t][i]=0}else o.counters[t]=0;return r.draw(),r.set("xaxisScaleMax",r.scale2.max),RGraph.clear(r.canvas),function t(){++n;for(var a=0,i=r.data.length;a<i;a+=1)if(n>o.startFrames[a]){if("number"==typeof r.data[a])r.data[a]=Math.min(Math.abs(c[a]),Math.abs(c[a]*(o.counters[a]/l))),o.counters[a]+=1,c[a]<0&&(r.data[a]*=-1);else if(!RGraph.isNull(r.data[a]))for(var s=0,e=r.data[a].length;s<e;s+=1)0<L.xaxisScaleMin&&L.xaxisScaleMax>L.xaxisScaleMin?r.data[a][s]=Math.min(Math.abs(c[a][s]),Math.abs((c[a][s]-L.xaxisScaleMin)*(o.counters[a][s]/l)+L.xaxisScaleMin)):r.data[a][s]=Math.min(Math.abs(c[a][s]),Math.abs(c[a][s]*(o.counters[a][s]/l))),o.counters[a][s]+=1,c[a][s]<0&&(r.data[a][s]*=-1)}else r.data[a]="object"==typeof r.data[a]&&r.data[a]?RGraph.arrayPad([],r.data[a].length,0<L.xaxisScaleMin?L.xaxisScaleMin:0):RGraph.isNull(r.data[a])?null:0<L.xaxisScaleMin?L.xaxisScaleMin:0;n>=o.frames?(d&&(r.set("labelsAbove",!0),RGraph.redrawCanvas(r.canvas)),h(r)):(RGraph.redrawCanvas(r.canvas),RGraph.Effects.updateCanvas(t))}(),this},this.isAdjustable=function(t){return!!RGraph.isNull(L.adjustableOnly)||!(!RGraph.isArray(L.adjustableOnly)||!L.adjustableOnly[t.sequentialIndex])},this.roundedCornersRect=function(t,a,i,s){var e=L.cornersRoundRadius,e=Math.min(i/2,s/2,e);this.save(),this.translate(t,a),this.moveTo(i/2,0),this.arcTo(i,0,i,s,Math.min(s/2,e)),this.arcTo(i,s,0,s,e),this.arcTo(0,s,0,0,0),this.arcTo(0,0,e,0,Math.min(s/2,0)),this.lineTo(i/2,0),this.restore()},this.tooltipSubstitutions=function(t){var a,i=RGraph.sequentialIndexToGrouped(t.index,this.data);a="object"==typeof this.data[i[0]]?this.data[i[0]]:[this.data[i[0]]];var s=this.data_arr[t.index],e=i[1],t=t.index;return"object"==typeof this.data[i[0]]&&"stacked"===L.grouping&&(s=this.data[i[0]][this.data[i[0]].length-1-i[1]]),{index:e,dataset:i[0],sequentialIndex:t,value:s,values:a}},this.tooltipsFormattedCustom=function(t,a){return{label:this.stackedOrGrouped?!RGraph.isNull(L.tooltipsFormattedKeyLabels)&&"object"==typeof L.tooltipsFormattedKeyLabels&&L.tooltipsFormattedKeyLabels[a]?L.tooltipsFormattedKeyLabels[a]:"":!RGraph.isNull(L.tooltipsFormattedKeyLabels)&&"object"==typeof L.tooltipsFormattedKeyLabels&&L.tooltipsFormattedKeyLabels[t.index]?L.tooltipsFormattedKeyLabels[t.index]:""}},this.positionTooltipStatic=function(t){var a=t.object,i=(t.event,t.tooltip),s=(t.index,RGraph.getCanvasXY(a.canvas));coords=this.coords[t.index],t.tooltip.style.left=s[0]+coords[0]+coords[2]/2-i.offsetWidth/2+a.properties.tooltipsOffsetx+"px",t.tooltip.style.top=s[1]+coords[1]-i.offsetHeight-10+a.properties.tooltipsOffsety+"px","3d"===L.variant&&(i=parseInt(t.tooltip.style.left),coords[1],a=L.variantThreedAngle,i=Math.tan(a)*i,t.tooltip.style.top=parseInt(t.tooltip.style.top)+i+"px")},RGraph.register(this),RGraph.parseObjectStyleConfig(this,t.options)}else alert("[HBAR] No canvas support")};