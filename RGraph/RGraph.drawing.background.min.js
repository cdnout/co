RGraph=window.RGraph||{isrgraph:!0,isRGraph:!0,rgraph:!0},RGraph.Drawing=RGraph.Drawing||{},RGraph.Drawing.Background=function(t){var a,r=t.id;document.getElementById(r);this.id=r,this.canvas=document.getElementById(this.id),this.context=this.canvas.getContext("2d"),(this.canvas.__object__=this).original_colors=[],this.firstDraw=!0,this.type="drawing.background",this.isRGraph=!0,this.isrgraph=!0,this.rgraph=!0,this.uid=RGraph.createUID(),this.canvas.uid=this.canvas.uid||RGraph.createUID(),this.properties={backgroundBarsCount:null,backgroundBarsColor1:"rgba(0,0,0,0)",backgroundBarsColor2:"rgba(0,0,0,0)",backgroundGrid:!0,backgroundGridColor:"#ddd",backgroundGridLinewidth:1,backgroundGridVlines:!0,backgroundGridHlines:!0,backgroundGridBorder:!0,backgroundGridAutofit:!0,backgroundGridHlinesCount:5,backgroundGridVlinesCount:20,backgroundGridDashed:!1,backgroundGridDotted:!1,backgroundImage:null,backgroundImageStretch:!0,backgroundImageX:null,backgroundImageY:null,backgroundImageW:null,backgroundImageH:null,backgroundImageAlign:null,backgroundColor:null,marginLeft:35,marginRight:35,marginTop:35,marginBottom:35,textColor:"black",textSize:12,textFont:"Arial, Verdana, sans-serif",textBold:!1,textItalic:!1,textAccessible:!0,textAccessibleOverflow:"visible",textAccessiblePointerevents:!1,text:null,tooltips:null,tooltipsHighlight:!0,tooltipsCssClass:"RGraph_tooltip",tooltipsCss:null,tooltipsEffect:"slide",tooltipsEvent:"onclick",tooltipsFormattedThousand:",",tooltipsFormattedPoint:".",tooltipsFormattedDecimals:0,tooltipsFormattedUnitsPre:"",tooltipsFormattedUnitsPost:"",tooltipsFormattedListType:"ul",tooltipsFormattedListItems:null,tooltipsPointer:!0,tooltipsPositionStatic:!0,highlightStroke:"rgba(0,0,0,0)",highlightFill:"rgba(255,255,255,0.7)",linewidth:1,title:"",titleBackground:null,titleHpos:null,titleVpos:null,titleFont:null,titleSize:null,titleColor:null,titleBold:null,titleItalic:null,titleX:null,titleY:null,titleHalign:null,titleValign:null,titleOffsetx:0,titleOffsety:0,xaxisTitle:"",xaxisTitleBold:null,xaxisTitleItalic:null,xaxisTitleSize:null,xaxisTitleFont:null,xaxisTitleColor:null,xaxisTitleX:null,xaxisTitleY:null,xaxisTitlePos:null,yaxisTitle:"",yaxisTitleBold:null,yaxisTitleSize:null,yaxisTitleFont:null,yaxisTitleColor:null,yaxisTitleItalic:null,yaxisTitleX:null,yaxisTitleY:null,yaxisTitlePos:null,clearto:"rgba(0,0,0,0)"},this.canvas?(this.$0={},a=this.properties,this.path=RGraph.pathObjectFunction,RGraph.Effects&&"function"==typeof RGraph.Effects.decorate&&RGraph.Effects.decorate(this),this.set=function(t){var r=void 0===arguments[1]?null:arguments[1];if(1!==arguments.length||"object"!=typeof t)return a[t]=r,this;for(i in t)"string"==typeof i&&this.set(i,t[i]);return this},this.get=function(t){return a[t]},this.draw=function(){return RGraph.fireCustomEvent(this,"onbeforedraw"),this.canvas.__rgraph_aa_translated__||(this.context.translate(.5,.5),this.canvas.__rgraph_aa_translated__=!0),this.marginLeft=a.marginLeft,this.marginRight=a.marginRight,this.marginTop=a.marginTop,this.marginBottom=a.marginBottom,this.colorsParsed||(this.parseColors(),this.colorsParsed=!0),RGraph.drawBackgroundImage(this),RGraph.Background.draw(this),RGraph.addCustomText(this),RGraph.installEventListeners(this),this.firstDraw&&(this.firstDraw=!1,RGraph.fireCustomEvent(this,"onfirstdraw"),this.firstDrawFunc()),RGraph.fireCustomEvent(this,"ondraw"),this},this.exec=function(t){return t(this),this},this.getObjectByXY=function(t){if(this.getShape(t))return this},this.getShape=function(t){var i,r=RGraph.getMouseXY(t),t=r[0],r=r[1];return t>=this.marginLeft&&t<=this.canvas.width-this.marginRight&&r>=this.marginTop&&r<=this.canvas.height-this.marginBottom?{object:this,dataset:0,index:0,sequentialIndex:0,tooltip:"string"==typeof(i=RGraph.parseTooltipText&&a.tooltips?RGraph.parseTooltipText(a.tooltips,0):i)?i:null}:null},this.highlight=function(t){a.tooltipsHighlight&&("function"==typeof a.highlightStyle?a.highlightStyle(t):this.path("b r % % % % f % s %",a.marginLeft,a.marginTop,this.canvas.width-a.marginLeft-a.marginRight,this.canvas.height-a.marginTop-a.marginBottom,a.highlightFill,a.highlightStroke))},this.parseColors=function(){0===this.original_colors.length&&(this.original_colors.backgroundColor=RGraph.arrayClone(a.backgroundColor),this.original_colors.backgroundGridColor=RGraph.arrayClone(a.backgroundGridColor),this.original_colors.highlightStroke=RGraph.arrayClone(a.highlightStroke),this.original_colors.highlightFill=RGraph.arrayClone(a.highlightFill)),a.backgroundColor=this.parseSingleColorForGradient(a.backgroundColor),a.backgroundGridColor=this.parseSingleColorForGradient(a.backgroundGridColor),a.highlightStroke=this.parseSingleColorForGradient(a.highlightStroke),a.highlightFill=this.parseSingleColorForGradient(a.highlightFill)},this.reset=function(){},this.parseSingleColorForGradient=function(t){if(!t)return t;if("string"==typeof t&&t.match(/^gradient\((.*)\)$/i)){if(t.match(/^gradient\(({.*})\)$/i))return RGraph.parseJSONGradient({object:this,def:RegExp.$1});for(var i=RegExp.$1.split(":"),r=this.context.createLinearGradient(this.marginLeft,this.marginTop,this.canvas.width-this.marginRight,this.canvas.height-this.marginBottom),o=1/(i.length-1),a=0;a<i.length;a+=1)r.addColorStop(a*o,RGraph.trim(i[a]))}return r||t},this.on=function(t,i){return"function"!=typeof this[t="on"!==t.substr(0,2)?"on"+t:t]?this[t]=i:RGraph.addCustomEventListener(this,t,i),this},this.firstDrawFunc=function(){},this.tooltipSubstitutions=function(t){return{index:0,dataset:0,sequentialIndex:0,value:null}},this.positionTooltipStatic=function(t){var i=t.object,r=(t.event,t.tooltip),o=(t.index,RGraph.getCanvasXY(i.canvas));t.tooltip.style.left=o[0]+(this.canvas.width-a.marginLeft-a.marginRight)/2+a.marginLeft-r.offsetWidth/2+i.properties.tooltipsOffsetx+"px",t.tooltip.style.top=o[1]-r.offsetHeight+i.properties.tooltipsOffsety+(this.canvas.height-a.marginTop-a.marginBottom)/2+a.marginTop-10+"px"},RGraph.register(this),RGraph.parseObjectStyleConfig(this,t.options)):alert("[DRAWING.BACKGROUND] No canvas support")};