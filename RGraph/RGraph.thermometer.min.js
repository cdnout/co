RGraph=window.RGraph||{isrgraph:!0,isRGraph:!0,rgraph:!0},RGraph.Thermometer=function(t){var h;this.id=t.id,this.canvas=document.getElementById(this.id),this.context=this.canvas.getContext?this.canvas.getContext("2d"):null,(this.canvas.__object__=this).uid=RGraph.createUID(),this.canvas.uid=this.canvas.uid||RGraph.createUID(),this.colorsParsed=!1,this.type="thermometer",this.isRGraph=!0,this.isrgraph=!0,this.rgraph=!0,this.min=RGraph.stringsToNumbers(t.min),this.max=RGraph.stringsToNumbers(t.max),this.value=RGraph.stringsToNumbers(t.value),this.coords=[],this.graphArea=[],this.currentValue=null,this.coordsText=[],this.original_colors=[],this.firstDraw=!0,this.properties={linewidth:1,backgroundColor:"white",colorsStroke:"black",colors:["red"],marginLeft:35,marginRight:35,marginTop:35,marginBottom:35,tickmarksSize:2,tickmarksCount:10,textColor:"black",textFont:"Arial, Verdana, sans-serif",textSize:12,textBold:!1,textItalic:!1,textAccessible:!0,textAccessibleOverflow:"visible",textAccessiblePointerevents:!1,text:null,scaleVisible:!1,scaleUnitsPre:"",scaleUnitsPost:"",scaleDecimals:0,scaleThousand:",",scalePoint:".",title:"",titleFont:null,titleSize:null,titleColor:null,titleBold:null,titleItalic:null,titleOffsetx:0,titleOffsety:0,titleSide:"",titleSideBold:null,titleSideFont:null,titleSideSize:null,titleSideColor:null,titleSideItalic:null,titleSideOffsetx:0,titleSideOffsety:0,shadow:!0,shadowOffsetx:0,shadowOffsety:0,shadowBlur:15,shadowColor:"#ddd",resizable:!1,resizableHandleBackground:null,contextmenu:null,adjustable:!1,labelsValue:!0,labelsValueColor:null,labelsValueFont:null,labelsValueSize:null,labelsValueBold:null,labelsValueItalic:null,labelsValueDecimals:null,labelsValueThousand:null,labelsValuePoint:null,labelsValueUnitsPre:null,labelsValueUnitsPost:null,labelsValueOffsetx:0,labelsValueOffsety:0,labelsCount:5,labelsDecimals:null,labelsUnitsPre:null,labelsUnitsPost:null,labelsPoint:null,labelsThousand:null,labelsColor:null,labelsFont:null,labelsSize:null,labelsBold:null,labelsItalic:null,labelsOffsetx:0,labelsOffsety:0,annotatable:!1,annotatableColor:"black",annotatableLinewidth:1,tooltips:null,tooltipsHighlight:!0,tooltipsEffect:"slide",tooltipsEvent:"click",tooltipsCssClass:"RGraph_tooltip",tooltipsCss:null,tooltipsFormattedThousand:",",tooltipsFormattedPoint:".",tooltipsFormattedDecimals:0,tooltipsFormattedUnitsPre:"",tooltipsFormattedUnitsPost:"",tooltipsFormattedKeyColors:null,tooltipsFormattedKeyColorsShape:"square",tooltipsFormattedKeyLabels:[],tooltipsFormattedListType:"ul",tooltipsFormattedListItems:null,tooltipsFormattedTableHeaders:null,tooltipsFormattedTableData:null,tooltipsPointer:!0,tooltipsPositionStatic:!0,highlightStroke:"rgba(0,0,0,0)",highlightFill:"rgba(255,255,255,0.7)",clearto:"rgba(0,0,0,0)",bulbBottomRadiusAdjust:0,bulbBottomRadius:null},this.canvas?(this.$0={},h=this.properties,this.path=RGraph.pathObjectFunction,RGraph.Effects&&"function"==typeof RGraph.Effects.decorate&&RGraph.Effects.decorate(this),this.responsive=RGraph.responsive,this.set=function(t){var s=void 0===arguments[1]?null:arguments[1];if(1!==arguments.length||"object"!=typeof t)return h[t]=s,this;for(i in t)"string"==typeof i&&this.set(i,t[i]);return this},this.get=function(t){return h[t]},this.draw=function(){return RGraph.fireCustomEvent(this,"onbeforedraw"),this.canvas.__rgraph_aa_translated__||(this.context.translate(.5,.5),this.canvas.__rgraph_aa_translated__=!0),this.value=Math.min(this.max,this.value),this.value=Math.max(this.min,this.value),this.colorsParsed||(this.parseColors(),this.colorsParsed=!0),this.currentValue=this.value,this.coordsText=[],this.marginLeft=h.marginLeft,this.marginRight=h.marginRight,this.marginTop=h.marginTop,this.marginBottom=h.marginBottom,this.scale2=RGraph.getScale({object:this,options:{"scale.max":this.max,"scale.min":this.min,"scale.strict":!0,"scale.thousand":h.scaleThousand,"scale.point":h.scalePoint,"scale.decimals":h.scaleDecimals,"ylabels.count":h.labelsCount,"scale.round":h.scaleRound,"scale.units.pre":h.scaleUnitsPre,"scale.units.post":h.scaleUnitsPost}}),this.x=this.marginLeft,this.width=this.canvas.width-this.marginLeft-this.marginRight,this.y=this.marginTop+this.width/2,this.halfWidth=this.width/2,this.bulbTopCenterx=this.marginLeft+this.width/2,this.bulbTopCentery=this.marginTop+this.width/2,this.bulbTopRadius=this.width/2,this.bulbBottomCenterx=this.marginLeft+this.width/2,this.bulbBottomRadius="number"==typeof h.bulbBottomRadius?h.bulbBottomRadius:.75*this.width+h.bulbBottomRadiusAdjust,this.bulbBottomCentery=this.canvas.height-this.marginBottom-this.bulbBottomRadius,this.scaleTopY=this.bulbTopCentery,this.scaleBottomY=this.bulbBottomCentery-this.bulbBottomRadius,this.scaleHeight=this.scaleBottomY-this.scaleTopY,this.height=this.getYCoord(this.min)-this.getYCoord(this.value),this.coords[0]=[this.x,this.getYCoord(this.value),this.width,this.height],this.drawBackground(),this.drawBar(),this.drawTickMarks(),this.drawLabels(),h.title&&this.drawTitle(),h.titleSide&&this.drawSideTitle(),h.contextmenu&&RGraph.showContext(this),RGraph.addCustomText(this),RGraph.installEventListeners(this),this.firstDraw&&(this.firstDraw=!1,RGraph.fireCustomEvent(this,"onfirstdraw"),this.firstDrawFunc()),RGraph.fireCustomEvent(this,"ondraw"),this},this.drawBackground=function(){h.shadow&&RGraph.setShadow(this,h.shadowColor,h.shadowOffsetx,h.shadowOffsety,h.shadowBlur),this.pathBackground(),this.context.strokeStyle=h.colorsStroke,this.context.fillStyle=h.backgroundColor,this.context.lineWidth=1+h.linewidth,this.context.stroke(),this.context.fill(),this.context.lineWidth=1},this.drawBar=function(){this.pathBar(),this.path("f %",h.colors[0])},this.pathBar=function(){var t=this.coords[0][3],t=this.coords[0][1]+this.coords[0][3]-t;RGraph.noShadow(this),this.path("b ss transparent r % % % %         m % %           a % % % 0 6.28 false",this.coords[0][0],t,this.coords[0][2],this.bulbBottomCentery-t,this.bulbBottomCenterx+this.bulbBottomRadius,this.bulbBottomCentery,this.bulbBottomCenterx,this.bulbBottomCentery,this.bulbBottomRadius)},this.pathBackground=function(){this.path("b    r % % % %   a % % % 3.1415927 6.28 false   m % %   a % % % 0 6.2830 false c",this.x,this.scaleTopY,this.coords[0][2],this.bulbBottomCentery-this.scaleTopY,this.bulbTopCenterx,this.bulbTopCentery,this.bulbTopRadius,this.bulbBottomCenterx,this.bulbBottomCentery,this.bulbBottomCenterx,this.bulbBottomCentery,this.bulbBottomRadius)},this.drawTickMarks=function(){if(h.tickmarksCount){var t=h.tickmarksSize;this.context.strokeStyle=h.colorsStroke,this.context.lineWidth=h.linewidth/2,this.context.beginPath();for(var i=0;i<=h.tickmarksCount;++i){var s=this.scaleBottomY-this.scaleHeight/h.tickmarksCount*i;this.context.moveTo(this.marginLeft,Math.round(s)),this.context.lineTo(this.marginLeft+t,Math.round(s)),this.context.moveTo(this.canvas.width-this.marginRight,Math.round(s)),this.context.lineTo(this.canvas.width-this.marginRight-t,Math.round(s))}this.context.stroke(),this.context.lineWidth=1}},this.drawLabels=function(){var t,i;h.labelsValue&&(h.scaleVisible,t=RGraph.numberFormat({object:this,number:this.value.toFixed("number"==typeof h.labelsValueDecimals?h.labelsValueDecimals:h.scaleDecimals),unitspre:"string"==typeof h.labelsValueUnitsPre?h.labelsValueUnitsPre:h.scaleUnitsPre,unitspost:"string"==typeof h.labelsValueUnitsPost?h.labelsValueUnitsPost:h.scaleUnitsPost,point:"string"==typeof h.labelsValuePoint?h.labelsValuePoint:h.scalePoint,thousand:"string"==typeof h.labelsValueThousand?h.labelsValueThousand:h.scaleThousand}),i=RGraph.getTextConf({object:this,prefix:"labelsValue"}),RGraph.text({object:this,font:i.font,size:i.size,color:i.color,bold:i.bold,italic:i.italic,x:this.coords[0][0]+this.coords[0][2]/2+h.labelsValueOffsetx,y:this.coords[0][1]+7+h.labelsValueOffsety,text:t,valign:"top",halign:"center",bounding:!0,boundingFill:"white",tag:"labels.value"})),h.scaleVisible&&this.drawScale()},this.drawTitle=function(){var t=RGraph.getTextConf({object:this,prefix:"title"});RGraph.text({object:this,font:t.font,size:t.size,color:t.color,bold:t.bold,italic:t.italic,x:this.marginLeft+this.width/2+h.titleOffsetx,y:this.marginTop-3+h.titleOffsety,text:String(h.title),valign:"bottom",halign:"center",bold:!0,tag:"title"})},this.drawSideTitle=function(){var t=RGraph.getTextConf({object:this,prefix:"titleSide"}),i=this.marginLeft-3,s=this.scaleHeight/2+this.marginTop+this.bulbTopRadius;"number"==typeof h.titleSideOffsetx&&(i+=h.titleSideOffsetx),"number"==typeof h.titleSideOffsety&&(s+=h.titleSideOffsety),this.context.fillStyle=h.textColor,RGraph.text({object:this,font:t.font,size:t.size,color:t.color,bold:t.bold,italic:t.italic,x:i,y:s,text:String(h.titleSide),valign:"bottom",halign:"center",angle:270,tag:"title.side",accessible:!1})},this.drawScale=function(){this.context.fillStyle=h.textColor;h.scaleUnitsPre,h.scaleUnitsPost;for(var t="number"==typeof h.labelsDecimals?h.labelsDecimals:h.scaleDecimals,i=h.labelsCount,s=(this.max-this.min)/i,e=1;e<=i;++e){var o=this.canvas.width-this.marginRight+h.linewidth/2,a=this.canvas.height-this.marginBottom-2*this.bulbBottomRadius-this.scaleHeight/i*e,l=RGraph.numberFormat({object:this,number:String((this.min+e*s).toFixed(t)),unitspre:"string"==typeof h.labelsUnitsPre?h.labelsUnitsPre:h.scaleUnitsPre,unitspost:"string"==typeof h.labelsUnitsPost?h.labelsUnitsPost:h.scaleUnitsPost,point:"string"==typeof h.labelsPoint?h.labelsPoint:h.scalePoint,thousand:"string"==typeof h.labelsThousand?h.labelsThousand:h.scaleThousand}),n=RGraph.getTextConf({object:this,prefix:"labels"});RGraph.text({object:this,font:n.font,size:n.size,color:n.color,bold:n.bold,italic:n.italic,x:o+5+h.labelsOffsetx,y:a+h.labelsOffsety,text:l,valign:"center",tag:"scale"})}RGraph.text({object:this,font:n.font,size:n.size,color:n.color,bold:n.bold,italic:n.italic,x:o+6+h.labelsOffsetx,y:this.bulbBottomCentery-this.bulbBottomRadius+h.labelsOffsety,text:RGraph.numberFormat({object:this,number:this.min.toFixed(t),unitspre:"string"==typeof h.labelsUnitsPre?h.labelsUnitsPre:h.scaleUnitsPre,unitspost:"string"==typeof h.labelsUnitsPost?h.labelsUnitsPost:h.scaleUnitsPost,point:"string"==typeof h.labelsPoint?h.labelsPoint:h.scalePoint,thousand:"string"==typeof h.labelsThousand?h.labelsThousand:h.scaleThousand}),valign:"center",tag:"scale"})},this.getShape=function(t){for(var t=RGraph.getMouseXY(t),i=t[0],s=t[1],e=0;e<this.coords.length;e++){var o=this.coords[e],a=o[0],l=o[1],n=o[2],r=o[3];if(this.pathBar(),this.context.isPointInPath(i,s)){o=RGraph.parseTooltipText?RGraph.parseTooltipText(h.tooltips,e):"";return{object:this,x:a,y:l,width:n,height:r,index:0,dataset:0,sequentialIndex:0,tooltip:"string"==typeof o?o:null}}}return null},this.getValue=function(t){i=2===t.length?(t[0],t[1]):((i=RGraph.getMouseXY(t))[0],i[1]);var i=(this.scaleHeight-(i-this.scaleTopY))/this.scaleHeight;return i*=this.max-this.min,i+=this.min,i=Math.max(i,this.min),i=Math.min(i,this.max)},this.highlight=function(t){h.tooltipsHighlight&&("function"!=typeof h.highlightStyle?(this.pathBar(),this.path("s % f %",h.highlightStroke,h.highlightFill)):h.highlightStyle(t))},this.getObjectByXY=function(t){var i=RGraph.getMouseXY(t),t=i[0],i=i[1];if(this.pathBackground(),this.context.isPointInPath(t,i))return this},this.adjusting_mousemove=function(t){h.adjustable&&RGraph.Registry.get("adjusting")&&RGraph.Registry.get("adjusting").uid==this.uid&&(RGraph.getMouseXY(t),"number"==typeof(t=this.getValue(t))&&(RGraph.fireCustomEvent(this,"onadjust"),this.value=Number(t.toFixed(h.scaleDecimals)),RGraph.redrawCanvas(this.canvas)))},this.getYCoord=function(t){if(t>this.max||t<this.min)return null;t=Math.abs(t-this.min)/Math.abs(this.max-this.min);return t*=this.scaleBottomY-this.scaleTopY,this.scaleBottomY-t},this.overChartArea=function(t){var i=RGraph.getMouseXY(t),t=i[0],i=i[1];return this.pathBackground(),this.context.isPointInPath(t,i)},this.parseColors=function(){0===this.original_colors.length&&(this.original_colors.colors=RGraph.arrayClone(h.colors));for(var t=h.colors,i=0;i<t.length;++i)t[i]=this.parseSingleColorForGradient(t[i])},this.reset=function(){},this.parseSingleColorForGradient=function(t){if(!t)return t;if("string"==typeof t&&t.match(/^gradient\((.*)\)$/i)){if(t.match(/^gradient\(({.*})\)$/i))return RGraph.parseJSONGradient({object:this,def:RegExp.$1});var i=RegExp.$1.split(":"),s=this.context.createLinearGradient(h.marginLeft,0,this.canvas.width-h.marginRight,0),e=1/(i.length-1);s.addColorStop(0,RGraph.trim(i[0]));for(var o=1;o<i.length;++o)s.addColorStop(o*e,RGraph.trim(i[o]))}return s||t},this.on=function(t,i){return"function"!=typeof this[t="on"!==t.substr(0,2)?"on"+t:t]?this[t]=i:RGraph.addCustomEventListener(this,t,i),this},this.exec=function(t){return t(this),this},this.firstDrawFunc=function(){},this.grow=function(){var i=this,s=arguments[1]||function(){},t=arguments[0]||{},e=t.frames||30,o=Number(i.currentValue),t=i.value,t=Math.min(t,this.max),a=(Math.max(t,this.min)-o)/e,l=0;return function t(){i.value=a*l+o,RGraph.clear(i.canvas),RGraph.redrawCanvas(i.canvas),l<e?(l++,RGraph.Effects.updateCanvas(t)):s(i)}(),this},this.tooltipSubstitutions=function(t){return{index:0,dataset:0,sequentialIndex:0,value:this.value,values:[this.value]}},this.tooltipsFormattedCustom=function(t,i){var s=(h.tooltipsFormattedKeyColors&&h.tooltipsFormattedKeyColors[0]?h.tooltipsFormattedKeyColors:h.colors)[0];return{label:h.tooltipsFormattedKeyLabels&&h.tooltipsFormattedKeyLabels[0]?h.tooltipsFormattedKeyLabels[0]:"",color:s}},this.positionTooltipStatic=function(t){var i=t.object,s=(t.event,t.tooltip),e=(t.index,RGraph.getCanvasXY(i.canvas));coords=this.coords[t.index],t.tooltip.style.left=e[0]+coords[0]+coords[2]/2-s.offsetWidth/2+i.properties.tooltipsOffsetx+"px",t.tooltip.style.top=e[1]+coords[1]-s.offsetHeight-10+i.properties.tooltipsOffsety+"px",parseFloat(t.tooltip.style.top)<0&&(t.tooltip.style.top=parseFloat(t.tooltip.style.top)+coords[3]/2+5+"px")},RGraph.register(this),RGraph.parseObjectStyleConfig(this,t.options)):alert("[THERMOMETER] No canvas support")};