RGraph=window.RGraph||{isrgraph:!0,isRGraph:!0,rgraph:!0},RGraph.SVG=RGraph.SVG||{},window,document,RGraph.SVG.Horseshoe=function(t){this.set=function(t,e){if(1===arguments.length&&"object"==typeof t)for(i in arguments[0])"string"==typeof i&&(t=r.name,e=r.value,this.set(t,e));else{var r=RGraph.SVG.commonSetter({object:this,name:t,value:e});t=r.name,e=r.value,this.properties[t]=e}return this},this.get=function(t){return this.properties[t]},this.min=RGraph.SVG.stringsToNumbers(t.min),this.max=RGraph.SVG.stringsToNumbers(t.max),this.value=RGraph.SVG.stringsToNumbers(t.value),this.currentValue=null,this.id=t.id,this.uid=RGraph.SVG.createUID(),this.container=document.getElementById(this.id),this.layers={},this.svg=RGraph.SVG.createSVG({object:this,container:this.container}),this.isRGraph=!0,this.isrgraph=!0,this.rgraph=!0,this.width=Number(this.svg.getAttribute("width")),this.height=Number(this.svg.getAttribute("height")),this.type="horseshoe",this.colorsParsed=!1,this.originalColors={},this.gradientCounter=1,this.nodes={},this.firstDraw=!0,this.value>this.max&&(this.value=this.max),this.value<this.min&&(this.value=this.min),RGraph.SVG.OR.add(this),this.container.style.display="inline-block",this.properties={radius:null,centerx:null,centery:null,width:10,marginLeft:15,marginRight:15,marginTop:15,marginBottom:15,backgroundColor:null,colors:["black","#eee"],textFont:"Arial, Verdana, sans-serif",textSize:70,textColor:"black",textBold:!1,textItalic:!1,text:null,labelsCenter:!0,labelsCenterFont:null,labelsCenterSize:null,labelsCenterColor:null,labelsCenterBold:null,labelsCenterItalic:null,labelsCenterUnitsPre:"",labelsCenterUnitsPost:"",labelsCenterDecimals:0,labelsCenterPoint:".",labelsCenterThousand:",",labelsCenterSpecific:null,labelsCenterSpecificFormattedDecimals:0,labelsCenterSpecificFormattedPoint:".",labelsCenterSpecificFormattedThousand:",",labelsCenterSpecificFormattedUnitsPre:"",labelsCenterSpecificFormattedUnitsPost:"",labelsCenterOffsetx:0,labelsCenterOffsety:0,ends:!0,endsRadius:null,endsStroke:null,endsColor:null,adjustable:!1},RGraph.SVG.getGlobals(this),RGraph.SVG.FX&&"function"==typeof RGraph.SVG.FX.decorate&&RGraph.SVG.FX.decorate(this),this.responsive=RGraph.SVG.responsive,RGraph.SVG.addCreateFunction(this);var s=this.properties;for(i in this.draw=function(){var r,e;return RGraph.SVG.fireCustomEvent(this,"onbeforedraw"),this.nodes={},this.width=Number(this.svg.getAttribute("width")),this.height=Number(this.svg.getAttribute("height")),RGraph.SVG.createDefs(this),this.graphWidth=this.width-s.marginLeft-s.marginRight,this.graphHeight=this.height-s.marginTop-s.marginBottom,this.centerx=this.graphWidth/2+s.marginLeft,this.centery=this.graphHeight/2+s.marginTop,this.radius=Math.min(this.graphWidth/2,this.graphHeight/2),this.centerx=("number"==typeof s.centerx?s:this).centerx,this.centery=("number"==typeof s.centery?s:this).centery,this.radius=("number"==typeof s.radius?s:this).radius,"string"==typeof s.radius&&s.radius.match(/^\+|-\d+$/)&&(this.radius+=parseFloat(s.radius)),"string"==typeof s.centerx&&s.centerx.match(/^\+|-\d+$/)&&(this.centerx+=parseFloat(s.centerx)),"string"==typeof s.centery&&s.centery.match(/^\+|-\d+$/)&&(this.centery+=parseFloat(s.centery)),RGraph.SVG.resetColorsToOriginalValues({object:this}),this.parseColors(),this.drawMeter(),this.drawLabels(),s.adjustable&&!this.adjusting_event_listeners_installed&&(this.adjusting_mousedown=!1,e=function(t){t.currentTarget;var e=t.offsetX,i=t.offsetY;RGraph.SVG.ISFF&&(e=t.pageX-t.currentTarget.offsetLeft,i=t.pageY-t.currentTarget.offsetTop),RGraph.SVG.TRIG.getHypLength({x1:e,y1:i,x2:r.centerx,y2:r.centery,object:r})>r.radius||(t=r.getValue(t),r.value=t,r.currentValue=t,RGraph.SVG.clear(r.svg),r.draw())},(r=this).container.addEventListener("mousedown",function(t){r.adjusting_mousedown=!0,e(t),RGraph.SVG.fireCustomEvent(r,"onadjustbegin")},!1),this.container.addEventListener("mousemove",function(t){r.adjusting_mousedown&&(e(t),RGraph.SVG.fireCustomEvent(r,"onadjust"))},!1),window.addEventListener("mouseup",function(t){r.adjusting_mousedown=!1,RGraph.SVG.fireCustomEvent(r,"onadjustend")},!1),this.adjusting_event_listeners_installed=!0),RGraph.SVG.addCustomText(this),this.firstDraw&&(this.firstDraw=!1,RGraph.SVG.fireCustomEvent(this,"onfirstdraw")),RGraph.SVG.fireCustomEvent(this,"ondraw"),this},this.drawMeter=function(){var t="number"==typeof s.width?s.width:this.radius/2;"string"==typeof s.width&&(t+=Number(s.width)),s.backgroundColor&&RGraph.SVG.create({svg:this.svg,type:"rect",parent:this.svg.all,attr:{fill:s.backgroundColor,x:0,y:0,width:this.width,height:this.height}});var e=RGraph.SVG.TRIG.getArcPath3({cx:this.centerx,cy:this.centery,radius:this.radius,start:0,end:RGraph.SVG.TRIG.TWOPI,lineto:!1}),i=RGraph.SVG.TRIG.getArcPath3({cx:this.centerx,cy:this.centery,radius:this.radius-s.width,start:RGraph.SVG.TRIG.TWOPI,end:0,anticlockwise:!0});RGraph.SVG.create({svg:this.svg,parent:this.svg.all,type:"path",attr:{d:e+" "+i+" z",fill:s.colors[1]}});t=(this.value-this.min)/(this.max-this.min)*RGraph.SVG.TRIG.TWOPI,e=RGraph.SVG.TRIG.getArcPath3({cx:this.centerx,cy:this.centery,radius:this.radius,start:0,end:t,lineto:!1}),i=RGraph.SVG.TRIG.getArcPath3({cx:this.centerx,cy:this.centery,radius:this.radius-s.width,start:t,end:0,anticlockwise:!0});RGraph.SVG.create({svg:this.svg,parent:this.svg.all,type:"path",attr:{d:e+" "+i+" z",fill:s.colors[0]}}),s.ends&&(RGraph.SVG.create({svg:this.svg,parent:this.svg.all,type:"circle",attr:{cx:this.centerx,cy:this.centery-this.radius+s.width/2,r:"number"==typeof s.endsRadius?s.endsRadius:1.5*s.width,fill:s.endsColor||s.colors[0],stroke:"string"==typeof s.endsStroke?s.endsStroke:s.backgroundColor||"white","stroke-width":3}}),(t=RGraph.SVG.TRIG.getRadiusEndPoint({angle:t-RGraph.SVG.TRIG.HALFPI,radius:this.radius-s.width/2}))[0]+=this.centerx,t[1]+=this.centery,RGraph.SVG.create({svg:this.svg,parent:this.svg.all,type:"circle",attr:{cx:t[0],cy:t[1],r:"number"==typeof s.endsRadius?s.endsRadius:1.5*s.width,fill:s.endsColor||s.colors[0],stroke:"string"==typeof s.endsStroke?s.endsStroke:s.backgroundColor||"white","stroke-width":3}})),this.currentValue=this.value},this.drawLabels=function(){var t,e;s.labelsCenter&&(t=RGraph.SVG.numberFormat({object:this,num:this.value.toFixed(s.labelsCenterDecimals),prepend:s.labelsCenterUnitsPre,append:s.labelsCenterUnitsPost,point:s.labelsCenterPoint,thousand:s.labelsCenterThousand,formatter:s.labelsCenterFormatter}),s.labelsCenterSpecific&&(s.labelsCenterSpecific=RGraph.SVG.labelSubstitution({object:this,text:s.labelsCenterSpecific,index:0,value:this.value,decimals:s.labelsCenterSpecificFormattedDecimals||0,unitsPre:s.labelsCenterSpecificFormattedUnitsPre||"",unitsPost:s.labelsCenterSpecificFormattedUnitsPost||"",thousand:s.labelsCenterSpecificFormattedThousand||",",point:s.labelsCenterSpecificFormattedPoint||"."})),e=RGraph.SVG.getTextConf({object:this,prefix:"labelsCenter"}),e=RGraph.SVG.text({object:this,parent:this.svg.all,tag:"labels.center",text:"string"==typeof s.labelsCenterSpecific?s.labelsCenterSpecific:t,x:this.centerx+s.labelsCenterOffsetx,y:this.centery+s.labelsCenterOffsety,valign:"center",halign:"center",font:e.font,size:e.size,bold:e.bold,italic:e.italic,color:e.color}),this.nodes.labelsCenter=e)},this.parseColors=function(){Object.keys(this.originalColors).length||(this.originalColors={colors:RGraph.SVG.arrayClone(s.colors),backgroundColor:RGraph.SVG.arrayClone(s.backgroundColor)});var t=s.colors;if(t)for(var e=0;e<t.length;++e)t[e]=RGraph.SVG.parseColorLinear({object:this,color:t[e],start:this.centerx-this.radius,end:this.centerx+this.radius,direction:"horizontal"});s.backgroundColor=RGraph.SVG.parseColorLinear({object:this,color:s.backgroundColor,start:s.marginLeft,end:this.width-s.marginRight,direction:"horizontal"})},this.on=function(t,e){return"on"!==t.substr(0,2)&&(t="on"+t),RGraph.SVG.addCustomEventListener(this,t,e),this},this.exec=function(t){return t(this),this},this.getAngle=function(t){var e,i;return i="number"==typeof t?(t-this.min)/(this.max-this.min)*RGraph.SVG.TRIG.TWOPI:(e=t.offsetX,i=t.offsetY,RGraph.SVG.TRIG.getAngleByXY({cx:this.centerx,cy:this.centery,x:e,y:i})),i-=RGraph.SVG.TRIG.HALFPI},this.getValue=function(t){t=(("number"==typeof t?t:this.getAngle(t))+RGraph.SVG.TRIG.HALFPI)/RGraph.SVG.TRIG.TWOPI*(this.max-this.min)+this.min,t=Math.max(t,this.min);return t=Math.min(t,this.max)},this.getRadius=function(t){var e=t.offsetX,t=t.offsetY;return RGraph.SVG.TRIG.getHypLength({x1:e,y1:t,x2:this.centerx,y2:this.centery})},this.grow=function(){var e=this;this.currentValue="number"==typeof this.currentValue?this.currentValue:this.min,this.value=Math.min(this.value,this.max),this.value=Math.max(this.value,this.min);var i=(arguments[0]||{}).frames||60,r=0,s=(this.value-this.currentValue)/i,a=arguments[1]||function(){},n=this.currentValue;return function t(){e.value=n+r++*s,RGraph.SVG.redraw(e.svg),r++>=i?(this.currentValue=this.value,a(e)):RGraph.SVG.FX.update(t)}(),this},t.options)"string"==typeof i&&this.set(i,t.options[i]);return this};