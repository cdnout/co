RGraph=window.RGraph||{isrgraph:!0,isRGraph:!0,rgraph:!0},RGraph.Effects=RGraph.Effects||{},RGraph.Effects.Rose=RGraph.Effects.Rose||{},RGraph.Rose=function(t){this.id=t.id,this.canvas=document.getElementById(this.id),this.context=this.canvas.getContext?this.canvas.getContext("2d"):null,this.data=t.data,(this.canvas.__object__=this).type="rose",this.isRGraph=!0,this.isrgraph=!0,this.rgraph=!0,this.uid=RGraph.createUID(),this.canvas.uid=this.canvas.uid||RGraph.createUID(),this.colorsParsed=!1,this.coordsText=[],this.original_colors=[],this.firstDraw=!0,this.centerx=0,this.centery=0,this.radius=0,this.max=0,this.angles=[],this.angles2=[],this.properties={axes:!1,axesColor:"black",axesLinewidth:1,axesTickmarks:!0,backgroundGrid:!0,backgroundGridColor:"#ccc",backgroundGridSize:null,backgroundGridRadialsCount:null,backgroundGridRadialsOffset:0,backgroundGridCirclesCount:5,centerx:null,centery:null,radius:null,anglesStart:0,linewidth:1,colors:["rgba(255,0,0,0.5)","rgba(255,255,0,0.5)","rgba(0,255,255,0.5)","rgb(0,255,0)","gray","blue","rgb(255,128,255)","green","pink","gray","aqua"],colorsSequential:!1,colorsAlpha:null,colorsStroke:"rgba(0,0,0,0)",margin:5,marginLeft:35,marginRight:35,marginTop:35,marginBottom:35,shadow:!1,shadowColor:"#aaa",shadowOffsetx:0,shadowOffsety:0,shadowBlur:15,title:"",titleBackground:null,titleHpos:null,titleVpos:null,titleBold:null,titleFont:null,titleSize:null,titleItalic:null,titleColor:null,titleX:null,titleY:null,titleHalign:null,titleValign:null,titleOffsetx:0,titleOffsety:0,labels:null,labelsFormattedDecimals:0,labelsFormattedPoint:".",labelsFormattedThousand:",",labelsFormattedUnitsPre:"",labelsFormattedUnitsPost:"",labelsColor:null,labelsFont:null,labelsSize:null,labelsBold:null,labelsItalic:null,labelsPosition:"center",labelsBoxed:!1,labelsOffsetRadius:0,labelsAxes:"n",labelsAxesFont:null,labelsAxesSize:null,labelsAxesColor:null,labelsAxesBold:null,labelsAxesItalic:null,labelsAxesCount:5,labelsAxesOffsetx:0,labelsAxesOffsety:0,textColor:"black",textFont:"Arial, Verdana, sans-serif",textSize:12,textBold:!1,textItalic:!1,textAccessible:!0,textAccessibleOverflow:"visible",textAccessiblePointerevents:!1,text:null,key:null,keyBackground:"white",keyPosition:"graph",keyHalign:"right",keyShadow:!1,keyShadowColor:"#666",keyShadowBlur:3,keyShadowOffsetx:2,keyShadowOffsety:2,keyPositionGutterBoxed:!1,keyPositionX:null,keyPositionY:null,keyColorShape:"square",keyRounded:!0,keyLinewidth:1,keyColors:null,keyInteractive:!1,keyInteractiveHighlightChartStroke:"black",keyInteractiveHighlightChartFill:"rgba(255,255,255,0.7)",keyInteractiveHighlightLabel:"rgba(255,0,0,0.2)",keyLabelsColor:null,keyLabelsFont:null,keyLabelsSize:null,keyLabelsBold:null,keyLabelsItalic:null,keyLabelsOffsetx:0,keyLabelsOffsety:0,contextmenu:null,tooltips:null,tooltipsEvent:"onclick",tooltipsEffect:"slide",tooltipsCssClass:"RGraph_tooltip",tooltipsCss:null,tooltipsHighlight:!0,tooltipsFormattedThousand:",",tooltipsFormattedPoint:".",tooltipsFormattedDecimals:0,tooltipsFormattedUnitsPre:"",tooltipsFormattedUnitsPost:"",tooltipsFormattedKeyColors:null,tooltipsFormattedKeyColorsShape:"square",tooltipsFormattedKeyLabels:[],tooltipsFormattedListType:"ul",tooltipsFormattedListItems:null,tooltipsFormattedTableHeaders:null,tooltipsFormattedTableData:null,tooltipsPointer:!0,tooltipsPositionStatic:!0,highlightStroke:"rgba(0,0,0,0)",highlightFill:"rgba(255,255,255,0.7)",annotatable:!1,annotatableColor:"black",annotatableLinewidth:1,resizable:!1,resizableHandleAdjust:[0,0],resizableHandleBackground:null,adjustable:!1,scaleMax:null,scaleMin:0,scaleDecimals:null,scalePoint:".",scaleThousand:",",scaleUnitsPre:"",scaleUnitsPost:"",variant:"stacked",variantThreedDepth:10,exploded:0,animationRoundrobinFactor:1,animationRoundrobinRadius:!0,animationGrowMultiplier:1,segmentHighlight:!1,segmentHighlightCount:null,segmentHighlightFill:"rgba(0,255,0,0.5)",segmentHighlightStroke:"rgba(0,0,0,0)",clearto:"rgba(0,0,0,0)"},this.data=RGraph.stringsToNumbers(this.data);var e=RGraph.arrayLinearize(this.data);this.data_seq=e,this.data_arr=e;for(var i=0;i<e.length;++i)this["$"+i]={};var m=this.properties;this.path=RGraph.pathObjectFunction,RGraph.Effects&&"function"==typeof RGraph.Effects.decorate&&RGraph.Effects.decorate(this),this.responsive=RGraph.responsive,this.set=function(t){var e=void 0===arguments[1]?null:arguments[1];if("labelsOffset"===t&&(t="labelsOffsetRadius"),1!==arguments.length||"object"!=typeof arguments[0])return m[t]=e,this;for(i in arguments[0])"string"==typeof i&&this.set(i,arguments[0][i]);return this},this.get=function(t){return m[t="labelsOffset"===t?"labelsOffsetRadius":t]},this.draw=function(){if(RGraph.fireCustomEvent(this,"onbeforedraw"),this.canvas.__rgraph_aa_translated__||(this.context.translate(.5,.5),this.canvas.__rgraph_aa_translated__=!0),this.marginLeft=m.marginLeft,this.marginRight=m.marginRight,this.marginTop=m.marginTop,this.marginBottom=m.marginBottom,this.radius=Math.min(this.canvas.width-this.marginLeft-this.marginRight,this.canvas.height-this.marginTop-this.marginBottom)/2,this.centerx=(this.canvas.width-this.marginLeft-this.marginRight)/2+this.marginLeft,this.centery=(this.canvas.height-this.marginTop-this.marginBottom)/2+this.marginTop,this.angles=[],this.angles2=[],this.total=0,this.startRadians=m.anglesStart,this.coordsText=[],m.key&&0<m.key.length&&3<=m.key.length&&(this.centerx=this.centerx-this.marginRight+5),"number"==typeof m.centerx&&(this.centerx=m.centerx),"number"==typeof m.centery&&(this.centery=m.centery),"number"==typeof m.radius&&(this.radius=m.radius),this.colorsParsed||(this.parseColors(),this.colorsParsed=!0),-1!==m.variant.indexOf("3d")&&this.context.setTransform(1.5,0,0,1,-.5*(1.5*this.canvas.width-this.canvas.width),0),this.drawBackground(),-1!==m.variant.indexOf("3d")){RGraph.setShadow(this,"rgba(0,0,0,0.35)",0,15,25);for(var t=m.variantThreedDepth;0<t;--t){--this.centery,this.drawRose({storeAngles:!1}),RGraph.noShadow(this);for(var e=0,i=this.angles.length;e<i;e+=1){var s=this.angles[e];this.path("b m % % a % % % % % false c f rgba(0,0,0,0.1) c f rgba(0,0,0,0.1)",s[4],s[5],s[4],s[5],s[3]+1.5,s[0]-.01,s[1]+.01,!1)}}}return this.drawRose(),this.drawLabels(),this.context.strokeStyle="rgba(0,0,0,0)",m.contextmenu&&RGraph.showContext(this),m.adjustable&&RGraph.allowAdjusting(this),RGraph.addCustomText(this),RGraph.installEventListeners(this),m.segmentHighlight&&(RGraph.allowSegmentHighlight||alert("[WARNING] The segment highlight function does not exist - have you included the dynamic library?"),RGraph.allowSegmentHighlight({object:this,count:"number"==typeof m.segmentHighlightCount?m.segmentHighlightCount:this.data.length,fill:m.segmentHighlightFill,stroke:m.segmentHighlightStroke})),this.firstDraw&&(this.firstDraw=!1,RGraph.fireCustomEvent(this,"onfirstdraw"),this.firstDrawFunc()),RGraph.fireCustomEvent(this,"ondraw"),this},this.exec=function(t){return t(this),this},this.drawBackground=function(){if(this.context.lineWidth=1,m.backgroundGridCirclesCount){"number"==typeof m.backgroundGridCirclesCount&&(m.backgroundGridCirclesSize=this.radius/m.backgroundGridCirclesCount),this.context.beginPath(),this.context.strokeStyle=m.backgroundGridColor;for(var t=m.backgroundGridCirclesSize;t<=this.radius;t+=m.backgroundGridCirclesSize)this.context.moveTo(this.centerx+t,this.centery),this.context.arc(this.centerx,this.centery,t,0,RGraph.TWOPI,!1);if(this.context.stroke(),this.context.beginPath(),"number"!=typeof m.backgroundGridRadialsCount&&(m.backgroundGridRadialsCount=this.data.length),0<m.backgroundGridRadialsCount){for(var e=360/m.backgroundGridRadialsCount,i=m.backgroundGridRadialsOffset,t=0;t<=360;t+=e)this.context.arc(this.centerx,this.centery,this.radius,t/(180/RGraph.PI)-RGraph.HALFPI+this.startRadians+i,(t+1e-4)/(180/RGraph.PI)-RGraph.HALFPI+this.startRadians+i,!1),this.context.lineTo(this.centerx,this.centery);this.context.stroke()}}if(m.axes){if(this.context.beginPath(),this.context.strokeStyle=m.axesColor,this.context.lineWidth=m.axesLinewidth,this.context.moveTo(this.centerx-this.radius,Math.round(this.centery)),this.context.lineTo(this.centerx+this.radius,Math.round(this.centery)),m.axesTickmarks){this.context.moveTo(Math.round(this.centerx-this.radius),this.centery-5),this.context.lineTo(Math.round(this.centerx-this.radius),this.centery+5),this.context.moveTo(Math.round(this.centerx+this.radius),this.centery-5),this.context.lineTo(Math.round(this.centerx+this.radius),this.centery+5);for(t=this.centerx-this.radius;t<this.centerx+this.radius;t+=this.radius/5)this.context.moveTo(Math.round(t),this.centery-3),this.context.lineTo(Math.round(t),this.centery+3.5);for(t=this.centery-this.radius;t<this.centery+this.radius;t+=this.radius/5)this.context.moveTo(this.centerx-3,Math.round(t)),this.context.lineTo(this.centerx+3,Math.round(t))}this.context.moveTo(Math.round(this.centerx),this.centery-this.radius),this.context.lineTo(Math.round(this.centerx),this.centery+this.radius),m.axesTickmarks&&(this.context.moveTo(this.centerx-5,Math.round(this.centery-this.radius)),this.context.lineTo(this.centerx+5,Math.round(this.centery-this.radius)),this.context.moveTo(this.centerx-5,Math.round(this.centery+this.radius)),this.context.lineTo(this.centerx+5,Math.round(this.centery+this.radius))),this.context.closePath(),this.context.stroke()}this.path("b c")},this.drawRose=function(){var t=0,e=this.data,i=RGraph.toRadians(m.margin);if(this.context.lineWidth=m.linewidth,RGraph.isNull(m.scaleMax)){for(var s=0;s<e.length;++s)t="number"==typeof e[s]?Math.max(t,e[s]):"object"==typeof e[s]&&-1!==m.variant.indexOf("non-equi-angular")?Math.max(t,e[s][0]):Math.max(t,RGraph.arraySum(e[s]));this.scale2=RGraph.getScale({object:this,options:{"scale.max":t,"scale.min":0,"scale.thousand":m.scaleThousand,"scale.point":m.scalePoint,"scale.decimals":m.scaleDecimals,"scale.labels.count":m.labelsAxesCount,"scale.round":m.scaleRound,"scale.units.pre":m.scaleUnitsPre,"scale.units.post":m.scaleUnitsPost}}),this.max=this.scale2.max}else{var a=m.scaleMax;this.scale2=RGraph.getScale({object:this,options:{"scale.max":a,"scale.strict":!0,"scale.thousand":m.scaleThousand,"scale.point":m.scalePoint,"scale.decimals":m.scaleDecimals,"scale.labels.count":m.labelsAxesCount,"scale.round":m.scaleRound,"scale.units.pre":m.scaleUnitsPre,"scale.units.post":m.scaleUnitsPost}}),this.max=this.scale2.max}this.sum=RGraph.arraySum(e),this.context.moveTo(this.centerx,this.centery),this.context.stroke(),m.colorsAlpha&&(this.context.globalAlpha=m.colorsAlpha);var n=0;if("string"==typeof m.variant&&-1!==m.variant.indexOf("non-equi-angular")){for(var o=0,s=0;s<e.length;++s)o+=e[s][1];m.shadow&&RGraph.setShadow(this,m.shadowColor,m.shadowOffsetx,m.shadowOffsety,m.shadowBlur);for(s=0;s<this.data.length;++s){var r=this.data[s][1]/o*RGraph.TWOPI,l=(this.data[s][0]-m.scaleMin)/(this.max-m.scaleMin)*this.radius;l*=m.animationGrowMultiplier,this.context.strokeStyle=m.colorsStroke,this.context.fillStyle=m.colors[0],m.colorsSequential&&(this.context.fillStyle=m.colors[s]),this.context.beginPath();var h=this.startRadians*m.animationRoundrobinFactor-RGraph.HALFPI+i,c=(this.startRadians+r)*m.animationRoundrobinFactor-RGraph.HALFPI-i,d=(p=this.getExploded(s,h,c,m.exploded))[0],u=p[1];this.context.arc(this.centerx+d,this.centery+u,m.animationRoundrobinRadius?l*m.animationRoundrobinFactor:l,h,c,0),this.context.lineTo(this.centerx+d,this.centery+u),this.context.closePath(),this.context.stroke(),this.context.fill(),this.angles[s]=[h,c,0,m.animationRoundrobinRadius?l*m.animationRoundrobinFactor:l,this.centerx+d,this.centery+u,this.context.strokeStyle,this.context.fillStyle],n++,this.startRadians+=r}m.shadow&&(RGraph.noShadow(this),this.redrawRose()),1<m.linewidth&&this.restrokeRose()}else{var g=0;m.shadow&&RGraph.setShadow(this,m.shadowColor,m.shadowOffsetx,m.shadowOffsety,m.shadowBlur);for(s=0;s<this.data.length;++s){r=1/this.data.length*RGraph.TWOPI;if("number"==typeof this.data[s]){this.context.beginPath(),this.context.strokeStyle=m.colorsStroke,this.context.fillStyle=m.colors[0],m.colorsSequential&&(this.context.fillStyle=m.colors[s]);l=(this.data[s]-m.scaleMin)/(this.max-m.scaleMin)*this.radius;l*=m.animationGrowMultiplier;h=this.startRadians*m.animationRoundrobinFactor-RGraph.HALFPI+i,c=this.startRadians*m.animationRoundrobinFactor+r*m.animationRoundrobinFactor-RGraph.HALFPI-i,d=(p=this.getExploded(s,h,c,m.exploded))[0],u=p[1];this.context.arc(this.centerx+d,this.centery+u,m.animationRoundrobinRadius?l*m.animationRoundrobinFactor:l,h,c,0),this.context.lineTo(this.centerx+d,this.centery+u),this.context.closePath(),this.context.fill(),this.context.stroke(),this.context.beginPath(),this.angles[s]=[h,c,0,l*m.animationRoundrobinFactor,this.centerx+d,this.centery+u,this.context.strokeStyle,this.context.fillStyle],n++}else if("object"==typeof this.data[s]){i=m.margin/(180/RGraph.PI);this.angles2[s]||(this.angles2[s]=[]);for(var x=0;x<this.data[s].length;++x){var p,f,b,h=this.startRadians*m.animationRoundrobinFactor-RGraph.HALFPI+i,c=this.startRadians*m.animationRoundrobinFactor+r*m.animationRoundrobinFactor-RGraph.HALFPI-i,d=(p=this.getExploded(s,h,c,m.exploded))[0],u=p[1];this.context.strokeStyle=m.colorsStroke,this.context.fillStyle=m.colors[x],m.colorsSequential&&(this.context.fillStyle=m.colors[g++]),0==x?(this.context.beginPath(),b=(this.data[s][x]-m.scaleMin)/(this.max-m.scaleMin)*this.radius,b*=m.animationGrowMultiplier,this.context.arc(this.centerx+d,this.centery+u,m.animationRoundrobinRadius?b*m.animationRoundrobinFactor:b,h,c,f=0),this.context.lineTo(this.centerx+d,this.centery+u),this.context.closePath(),this.context.stroke(),this.context.fill(),this.angles[n++]=[h,c,0,b*m.animationRoundrobinFactor,this.centerx+d,this.centery+u,this.context.strokeStyle,this.context.fillStyle],this.angles2[s][x]=[h,c,0,b*m.animationRoundrobinFactor,this.centerx+d,this.centery+u,this.context.strokeStyle,this.context.fillStyle]):(this.context.beginPath(),f=b,b=(this.data[s][x]-m.scaleMin)/(this.max-m.scaleMin)*this.radius+f,b*=m.animationGrowMultiplier,this.context.arc(this.centerx+d,this.centery+u,f*m.animationRoundrobinFactor,h,c,0),this.context.arc(this.centerx+d,this.centery+u,b*m.animationRoundrobinFactor,c,h,!0),this.context.closePath(),this.context.stroke(),this.context.fill(),this.angles[n++]=[h,c,f*m.animationRoundrobinFactor,b*m.animationRoundrobinFactor,this.centerx+d,this.centery+u,this.context.strokeStyle,this.context.fillStyle],this.angles2[s][x]=[h,c,f*m.animationRoundrobinFactor,b*m.animationRoundrobinFactor,this.centerx+d,this.centery+u,this.context.strokeStyle,this.context.fillStyle])}}this.startRadians+=r}m.shadow&&RGraph.noShadow(this),m.shadow&&this.redrawRose(),1<m.linewidth&&this.restrokeRose(),m.shadow&&this.redrawRose()}m.colorsAlpha&&(this.context.globalAlpha=1),m.title&&RGraph.drawTitle(this,m.title,this.canvas.height/2-this.radius,this.centerx,m.titleSize||m.textSize)},this.restrokeRose=function(){for(var t=this.angles,e=0;e<t.length;++e)this.path("b a % % % % % false a % % % % % true c s %",t[e][4],t[e][5],t[e][2],t[e][0],t[e][1],t[e][4],t[e][5],t[e][3],t[e][1],t[e][0],t[e][6])},this.redrawRose=function(){for(var t=this.angles,e=0;e<t.length;++e)this.path("b a % % % % % false a % % % % % true c f % f % ",t[e][4],t[e][5],t[e][2],t[e][0],t[e][1],t[e][4],t[e][5],t[e][3],t[e][1],t[e][0],t[e][6],t[e][7])},this.drawLabels=function(){if(m.labels&&m.labels.length){"string"==typeof m.labels&&(m.labels=RGraph.arrayPad({array:[],length:this.data.length,value:m.labels}));for(var t=0;t<m.labels.length;++t)m.labels[t]=RGraph.labelSubstitution({object:this,text:m.labels[t],index:t,value:this.data[t],decimals:m.labelsFormattedDecimals||0,unitsPre:m.labelsFormattedUnitsPre||"",unitsPost:m.labelsFormattedUnitsPost||"",thousand:m.labelsFormattedThousand||",",point:m.labelsFormattedPoint||"."})}this.context.lineWidth=1;var e=m.key;e&&e.length&&RGraph.drawKey(this,e,m.colors),this.context.fillStyle=m.textColor,this.context.strokeStyle="black";var i=this.radius,s=m.textFont,a=m.textSize,n=m.labelsAxes.toLowerCase(),o=(m.scaleDecimals,m.scaleUnitsPre),e=m.scaleUnitsPost,r=this.centerx,l=this.centery+(-1!==m.variant.indexOf("3d")?m.variantThreedDepth:0);"object"==typeof m.labels&&m.labels&&this.drawCircularLabels(this.context,m.labels,s,a,i+10),"number"==typeof m.textSize&&(a=m.textSize);var h,c="rgba(255,255,255,0.8)";if(-1<n.indexOf("n")){h=m.backgroundAxes?(u=-10,"right"):(u=0,"center");for(var d=RGraph.getTextConf({object:this,prefix:"labelsAxes"}),t=0;t<m.labelsAxesCount;++t)RGraph.text({object:this,font:d.font,size:d.size,color:d.color,bold:d.bold,italic:d.italic,x:r+u+m.labelsAxesOffsetx,y:l-i*((t+1)/m.labelsAxesCount)+m.labelsAxesOffsety,text:this.scale2.labels[t],valign:"center",halign:h,bounding:!0,boundingFill:c,boundingStroke:"rgba(0,0,0,0)",tag:"scale"})}if(-1<n.indexOf("s")){h=m.backgroundAxes?(u=-10,"right"):(u=0,"center");for(t=0;t<m.labelsAxesCount;++t)RGraph.text({object:this,font:d.font,size:d.size,color:d.color,bold:d.bold,italic:d.italic,x:r+u+m.labelsAxesOffsetx,y:l+i*((t+1)/m.labelsAxesCount)+m.labelsAxesOffsety,text:this.scale2.labels[t],valign:"center",halign:h,bounding:!0,"bounding.fill":c,"bounding.stroke":"rgba(0,0,0,0)",tag:"scale"})}if(-1<n.indexOf("e"))for(t=0;t<m.labelsAxesCount;++t)g=m.backgroundAxes?(u=10,"top"):(u=0,"center"),RGraph.text({object:this,font:d.font,size:d.size,color:d.color,bold:d.bold,italic:d.italic,x:r+i*((t+1)/m.labelsAxesCount)+m.labelsAxesOffsetx,y:l+u+m.labelsAxesOffsety,text:this.scale2.labels[t],valign:g,halign:"center",bounding:!0,"bounding.fill":c,"bounding.stroke":"rgba(0,0,0,0)",tag:"scale"});if(-1<n.indexOf("w"))for(var u,g,t=0;t<m.labelsAxesCount;++t)g=m.backgroundAxes?(u=10,"top"):(u=0,"center"),RGraph.text({object:this,font:d.font,size:d.size,color:d.color,bold:d.bold,italic:d.italic,x:r-i*((t+1)/m.labelsAxesCount)+m.labelsAxesOffsetx,y:l+u+m.labelsAxesOffsety,text:this.scale2.labels[t],valign:g,halign:"center",bounding:!0,"bounding.fill":c,"bounding.stroke":"rgba(0,0,0,0)",tag:"scale"});0<RGraph.trim(n).length&&RGraph.text({object:this,font:d.font,size:d.size,color:d.color,bold:d.bold,italic:d.italic,x:r+m.labelsAxesOffsetx,y:l+m.labelsAxesOffsety,text:"number"==typeof m.scaleMin?RGraph.numberFormat({object:this,number:Number(m.scaleMin).toFixed(0===m.scaleMin?"0":m.scaleDecimals),unitspre:o,unitspost:e}):"0",valign:"center",halign:"center",bounding:!0,"bounding.fill":c,"bounding.stroke":"rgba(0,0,0,0)",tag:"scale"})},this.drawCircularLabels=function(t,e,i,s,a){for(var n,o=m.variant,a=(m.labelsPosition,a+5+m.labelsOffsetRadius),r=this.centerx,l=this.centery+(-1!==m.variant.indexOf("3d")?m.variantThreedDepth:0),h=(m.labelsColor||m.textColor,this.angles),c=RGraph.getTextConf({object:this,prefix:"labels"}),d=0;d<this.data.length;++d){"string"==typeof o&&-1!==o.indexOf("non-equi-angular")?n=Number(h[d][0])+(h[d][1]-h[d][0])/2:(n=(n=RGraph.TWOPI/this.data.length*(d+1)-RGraph.TWOPI/(2*this.data.length))-RGraph.HALFPI+("edge"==m.labelsPosition?RGraph.TWOPI/this.data.length/2:0),n+=m.anglesStart);var u=r+Math.cos(n)*a,g=l+Math.sin(n)*a;halign=r<u?"left":Math.round(u)==r?"center":"right",RGraph.text({object:this,font:c.font,size:c.size,color:c.color,bold:c.bold,italic:c.italic,x:u,y:g,text:String(e[d]||""),halign:halign,valign:"center",tag:"labels",cssClass:RGraph.getLabelsCSSClassName({object:this,name:"labelsClass",index:d})})}},this.getShape=function(t){for(var e=this.angles,i=arguments[1]||{radius:!0},s=0;s<e.length;++s){var a,n=e[s][0],o=e[s][1],r=!1===i.radius?0:e[s][2],l=!1===i.radius?this.radius:e[s][3],h=e[s][4],c=e[s][5],d=RGraph.getMouseXY(t);d[0],d[1];if(this.path("b a % % % % % % a % % % % % % c",h,c,r||.01,n,o,!1,h,c,l,o,n,!0),this.context.isPointInPath(d[0],d[1])){e[s][6]=s,RGraph.parseTooltipText&&(a=RGraph.parseTooltipText(m.tooltips,e[s][6]));d=RGraph.sequentialIndexToGrouped(s,this.data);return e[s].object=this,e[s].x=e[s][4],e[s].y=e[s][5],e[s]["angle.start"]=e[s][0],e[s]["angle.end"]=e[s][1],e[s]["radius.start"]=e[s][2],e[s]["radius.end"]=e[s][3],e[s].index=d[1],e[s].dataset=d[0],e[s].sequentialIndex=e[s][6],e[s].tooltip=a||null,e[s].label="object"!=typeof m.labels||RGraph.isNull(m.labels)||"string"!=typeof m.labels[d[0]]?null:m.labels[e[s].dataset],"non-equi-angular"===m.variant&&(e[s].dataset=e[s].sequentialIndex,e[s].index=0,e[s].label=RGraph.isArray(m.labels)&&"string"==typeof m.labels[e[s].dataset]?m.labels[e[s].dataset]:null),{object:this,x:e[s][4],y:e[s][5],angleStart:e[s][0],angleEnd:e[s][1],radiusStart:e[s][2],radiusEnd:e[s][3],dataset:e[s].dataset,index:e[s].index,sequentialIndex:e[s][6],label:e[s].label,tooltip:"string"==typeof a?a:null}}}return null},this.getExploded=function(t,e,i,s){var a,s="object"==typeof s&&"number"==typeof s[t]?(a=Math.cos((i-e)/2+e)*s[t],Math.sin((i-e)/2+e)*s[t]):"number"==typeof s?(a=Math.cos((i-e)/2+e)*s,Math.sin((i-e)/2+e)*s):a=0;return[a,s]},this.allowTooltips=function(){RGraph.preLoadTooltipImages(this),RGraph.installWindowMousedownTooltipListener(this),RGraph.installCanvasMousemoveTooltipListener(this),RGraph.installCanvasMouseupTooltipListener(this)},this.highlight=function(t){if(m.tooltipsHighlight)if("function"!=typeof m.highlightStyle)if("string"!=typeof m.highlightStyle||"invert"!==m.highlightStyle)this.path("b a % % % % % false",t.x,t.y,t.radiusEnd,t.angleStart,t.angleEnd),0<t.radiusStart?this.path("a % % % % % true",t.x,t.y,t.radiusStart,t.angleEnd,t.angleStart):this.path("l % %",t.x,t.y),this.path("c s % f %",m.highlightStroke,m.highlightFill);else for(var e=0;e<this.angles.length;++e)e!==t.sequentialIndex&&(this.path("b m % % a % % % % % false",this.angles[e][4],this.angles[e][5],this.angles[e][4],this.angles[e][5],this.angles[e][3],this.angles[e][0],this.angles[e][1]),0<this.angles[e][2]?this.path("a % % % % % true",this.angles[e][4],this.angles[e][5],this.angles[e][2],this.angles[e][1],this.angles[e][0]):this.path("l % %",this.angles[e][4],this.angles[e][5]),this.path("c s % f %",m.highlightStroke,m.highlightFill));else m.highlightStyle(t)},this.getObjectByXY=function(t){var e=RGraph.getMouseXY(t),i=RGraph.getHypLength(this.centerx,this.centery,e[0],e[1]);if(t=-1!==m.variant.indexOf("3d")?(i/=-1,100):0,e[0]>this.centerx-this.radius-t&&e[0]<this.centerx+this.radius+t&&e[1]>this.centery-this.radius&&e[1]<this.centery+this.radius&&i<=this.radius)return this},this.getRadius=function(t){return t<0||t>this.max?null:t/this.max*this.radius},this.parseColors=function(){0===this.original_colors.length&&(this.original_colors.colors=RGraph.arrayClone(m.colors),this.original_colors.keyColors=RGraph.arrayClone(m.keyColors),this.original_colors.highlightStroke=RGraph.arrayClone(m.highlightStroke),this.original_colors.highlightFill=RGraph.arrayClone(m.highlightFill));for(var t=0;t<m.colors.length;++t)m.colors[t]=this.parseSingleColorForGradient(m.colors[t]);if(!RGraph.isNull(m.keyColors))for(t=0;t<m.keyColors.length;++t)m.keyColors[t]=this.parseSingleColorForGradient(m.keyColors[t]);m.highlightFill=this.parseSingleColorForGradient(m.highlightFill),m.highlightStroke=this.parseSingleColorForGradient(m.highlightStroke),m.segmentHighlightStroke=this.parseSingleColorForGradient(m.segmentHighlightStroke),m.segmentHighlightFill=this.parseSingleColorForGradient(m.segmentHighlightFill)},this.reset=function(){},this.parseSingleColorForGradient=function(t){if(!t||"string"!=typeof t)return t;if(t.match(/^gradient\((.*)\)$/i)){if(t.match(/^gradient\(({.*})\)$/i))return RGraph.parseJSONGradient({object:this,def:RegExp.$1});var e=RegExp.$1.split(":"),i=this.context.createRadialGradient(this.centerx,this.centery,0,this.centerx,this.centery,this.radius),s=1/(e.length-1);i.addColorStop(0,RGraph.trim(e[0]));for(var a=1;a<e.length;++a)i.addColorStop(a*s,RGraph.trim(e[a]))}return i||t},this.interactiveKeyHighlight=function(t){for(var e=this.angles2,i=0;i<this.angles2.length;i+=1)this.context.beginPath(),this.context.lineWidth=2,this.context.fillStyle=m.keyInteractiveHighlightChartFill,this.context.strokeStyle=m.keyInteractiveHighlightChartStroke,this.context.arc(e[i][t][4],e[i][t][5],e[i][t][2],e[i][t][0],e[i][t][1],!1),this.context.arc(e[i][t][4],e[i][t][5],e[i][t][3],e[i][t][1],e[i][t][0],!0),this.context.closePath(),this.context.fill(),this.context.stroke()},this.on=function(t,e){return"function"!=typeof this[t="on"!==t.substr(0,2)?"on"+t:t]?this[t]=e:RGraph.addCustomEventListener(this,t,e),this},this.firstDrawFunc=function(){},this.explode=function(){var e=this,t=arguments[0]||{},i=arguments[1]||function(){},s=t.frames||30,a=0,n=Math.max(this.canvas.width,this.canvas.height),o=Number(this.get("exploded"));return function t(){o=a/s*n,e.set("exploded",o),RGraph.clear(e.canvas),RGraph.redrawCanvas(e.canvas),a++<s?RGraph.Effects.updateCanvas(t):i(e)}(),this},this.roundrobin=this.roundRobin=function(){var e=this,i=(arguments[0]||{}).frames||30,s=0,a=m.margin,t=360/this.data.length/2,n=arguments[1]||function(){};return this.set("margin",t),this.set("animationRoundrobinFactor",0),function t(){RGraph.clear(e.canvas),RGraph.redrawCanvas(e.canvas),s++<i?(e.set("animationRoundrobinFactor",s/i),e.set("margin",s/i*a),RGraph.Effects.updateCanvas(t)):(e.set("animationRoundrobinFactor",1),e.set("margin",a),n(e))}(),this},this.implode=function(){var e=this,t=arguments[0]||{},i=arguments[1]||function(){},s=t.frames||30,a=0,n=Math.max(this.canvas.width,this.canvas.height),o=n;return function t(){o=n-a/s*n,e.set("exploded",o),RGraph.clear(e.canvas),RGraph.redrawCanvas(e.canvas),a++<s?RGraph.Effects.updateCanvas(t):(RGraph.clear(e.canvas),RGraph.redrawCanvas(e.canvas),i(e))}(),this},this.grow=function(){var e=this,t=arguments[0]||{},i=arguments[1]||function(){},s=t.frames||30,a=0;return function t(){e.set("animationGrowMultiplier",a/s),RGraph.clear(e.canvas),RGraph.redrawCanvas(e.canvas),a<s?(a++,RGraph.Effects.updateCanvas(t)):i(e)}(),this},this.tooltipSubstitutions=function(t){var e=RGraph.sequentialIndexToGrouped(t.index,this.data),i=this.data_arr[t.index],s="number"==typeof this.data[e[0]]?[this.data[e[0]]]:this.data[e[0]];return"non-equi-angular"===m.variant&&RGraph.isArray(this.data[e[0]])&&(i=this.data[t.index][0],value2=this.data[t.index][1],e=[t.index,0]),{index:e[1],dataset:e[0],sequentialIndex:t.index,value:i,value2:"number"==typeof value2?value2:null,values:s}},this.tooltipsFormattedCustom=function(t,e,i){var s,a,n,o=m.colors[e];return m.colorsSequential&&(o=i[t.sequential]),"number"==typeof this.data[t.dataset]?(s=m.tooltipsFormattedKeyLabels[0]||"",o=m.colors[0],m.tooltipsFormattedKeyColors&&m.tooltipsFormattedKeyColors[0]&&(o=m.tooltipsFormattedKeyColors[0])):"object"==typeof this.data[t.dataset]&&"non-equi-angular"===m.variant?0===e?(o=i[0],a=this.data[t.dataset][0],m.tooltipsFormattedKeyColors&&m.tooltipsFormattedKeyColors[t.index]&&(o=m.tooltipsFormattedKeyColors[t.index])):n=!0:"object"==typeof this.data[t.dataset]&&"non-equi-angular"!==m.variant&&m.tooltipsFormattedKeyColors&&m.tooltipsFormattedKeyColors[e]&&(o=m.tooltipsFormattedKeyColors[e]),{continue:n,label:s,color:o,value:a}},this.positionTooltipStatic=function(t){var e=t.object,i=t.event,s=t.tooltip,a=(t.index,RGraph.getCanvasXY(e.canvas));segment=this.angles[t.index],shape=this.getShape(i),angle=(shape.angleEnd-shape.angleStart)/2+shape.angleStart,multiplier=.5;i=RGraph.getRadiusEndPoint(shape.x,shape.y,angle,(shape.radiusEnd-shape.radiusStart)/2+shape.radiusStart);-1!==m.variant.indexOf("3d")&&(this.radius,i[0]=1.5*(i[0]-this.centerx)+this.centerx),t.tooltip.style.left=a[0]+i[0]-s.offsetWidth/2+e.properties.tooltipsOffsetx+"px",t.tooltip.style.top=a[1]+i[1]-s.offsetHeight+e.properties.tooltipsOffsety-10+"px"},RGraph.register(this),RGraph.parseObjectStyleConfig(this,t.options)};