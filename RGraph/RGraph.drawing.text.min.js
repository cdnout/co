RGraph=window.RGraph||{isrgraph:!0,isRGraph:!0,rgraph:!0},RGraph.Drawing=RGraph.Drawing||{},RGraph.Drawing.Text=function(t){var c,o=t.id,s=t.x,r=t.y,e=String(t.text);this.id=o,this.canvas=document.getElementById(o),this.context=this.canvas.getContext("2d"),this.colorsParsed=!1,(this.canvas.__object__=this).x=s,this.y=r,this.text=String(e),this.coords=[],this.coordsText=[],this.original_colors=[],this.firstDraw=!0,this.type="drawing.text",this.isRGraph=!0,this.isrgraph=!0,this.rgraph=!0,this.uid=RGraph.createUID(),this.canvas.uid=this.canvas.uid||RGraph.createUID(),this.properties={textSize:12,textFont:"Arial, Verdana, sans-serif",textBold:!1,textItalic:!1,text:null,angle:0,colors:["black"],highlightStroke:"#ccc",highlightFill:"rgba(255,255,255,0.5)",tooltips:null,tooltipsEffect:"slide",tooltipsCssClass:"RGraph_tooltip",tooltipsCss:null,tooltipsEvent:"onclick",tooltipsHighlight:!0,tooltipsCoordsPage:!1,tooltipsFormattedPoint:".",tooltipsFormattedThousand:",",tooltipsFormattedDecimals:0,tooltipsFormattedUnitsPre:"",tooltipsFormattedUnitsPost:"",tooltipsFormattedListType:"ul",tooltipsFormattedListItems:null,tooltipsPointer:!0,tooltipsPositionStatic:!0,bounding:!1,boundingFill:"rgba(255,255,255,0.7)",boundingStroke:"#777",boundingShadow:!1,boundingShadowColor:"#ccc",boundingShadowBlur:3,boundingShadowOffsetx:3,boundingShadowOffsety:3,marker:!1,halign:"left",valign:"bottom",link:null,linkTarget:"_self",linkOptions:"",textAccessible:!0,textAccessibleOverflow:"visible",textAccessiblePointerevents:!1,shadow:!1,shadowColor:"#ccc",shadowOffsetx:2,shadowOffsety:2,shadowBlur:3,clearto:"rgba(0,0,0,0)"},this.canvas?(this.$0={},c=this.properties,this.path=RGraph.pathObjectFunction,RGraph.Effects&&"function"==typeof RGraph.Effects.decorate&&RGraph.Effects.decorate(this),this.set=function(t){var o=void 0===arguments[1]?null:arguments[1];if(1!==arguments.length||"object"!=typeof t)return c[t]=o,this;for(i in t)"string"==typeof i&&this.set(i,t[i]);return this},this.get=function(t){return c[t]},this.draw=function(){RGraph.fireCustomEvent(this,"onbeforedraw"),this.canvas.__rgraph_aa_translated__||(this.context.translate(.5,.5),this.canvas.__rgraph_aa_translated__=!0),this.colorsParsed||(this.parseColors(),this.colorsParsed=!0),this.coords=[],this.coordsText=[];RGraph.measureText(this.text,c.textBold,c.textFont,c.textSize);this.context.fillStyle=c.colors[0],c.shadow&&RGraph.setShadow(this,c.shadowColor,c.shadowOffsetx,c.shadowOffsety,c.shadowBlur);var t=RGraph.text({object:this,font:c.textFont,size:c.textSize,bold:c.textBold,italic:c.textItalic,color:c.colors[0],x:this.x,y:this.y,text:this.text,angle:c.angle,bounding:c.bounding,"bounding.fill":c.boundingFill,"bounding.stroke":c.boundingStroke,"bounding.shadow":c.boundingShadow,"bounding.shadow.color":c.boundingShadowColor,"bounding.shadow.blur":c.boundingShadowBlur,"bounding.shadow.offsetx":c.boundingShadowOffsetx,"bounding.shadow.offsety":c.boundingShadowOffsety,marker:c.marker,halign:c.halign,valign:c.valign});return c.shadow&&RGraph.noShadow(this),this.coords.push({0:t.x,x:t.x,1:t.y,y:t.y,2:t.width,width:t.width,3:t.height,height:t.height}),RGraph.addCustomText(this),RGraph.installEventListeners(this),this.firstDraw&&(this.firstDraw=!1,RGraph.fireCustomEvent(this,"onfirstdraw"),this.firstDrawFunc()),RGraph.fireCustomEvent(this,"ondraw"),this},this.exec=function(t){return t(this),this},this.getObjectByXY=function(t){if(this.getShape(t))return this},this.getShape=function(t){for(var i=this.coords,t=RGraph.getMouseXY(t),o=t[0],s=t[1],r=0,e=this.coords.length;r<e;r++){var h,a=i[r].x,n=i[r].y,l=i[r].width,d=i[r].height;if(a<=o&&o<=a+l&&n<=s&&s<=n+d)return{object:this,x:a,y:n,width:l,height:d,dataset:0,index:0,sequentialIndex:0,tooltip:"string"==typeof(h=RGraph.parseTooltipText&&c.tooltips?RGraph.parseTooltipText(c.tooltips,0):h)?h:null}}return null},this.highlight=function(t){"function"==typeof c.highlightStyle?c.highlightStyle(t):RGraph.Highlight.rect(this,t)},this.parseColors=function(){0===this.original_colors.length&&(this.original_colors.colors=RGraph.arrayClone(c.colors)[0],this.original_colors.colorsFill=RGraph.arrayClone(c.colorsFill),this.original_colors.colorsStroke=RGraph.arrayClone(c.colorsStroke),this.original_colors.highlightStroke=RGraph.arrayClone(c.highlightStroke),this.original_colors.highlightFill=RGraph.arrayClone(c.highlightFill)),c.colors[0]=this.parseSingleColorForGradient(c.colors[0]),c.colorsFill=this.parseSingleColorForGradient(c.colorsFill),c.colorsStroke=this.parseSingleColorForGradient(c.colorsStroke),c.highlightStroke=this.parseSingleColorForGradient(c.highlightStroke),c.highlightFill=this.parseSingleColorForGradient(c.highlightFill)},this.reset=function(){},this.parseSingleColorForGradient=function(t){if(!t)return t;if("string"==typeof t&&t.match(/^gradient\((.*)\)$/i)){if(t.match(/^gradient\(({.*})\)$/i))return RGraph.parseJSONGradient({object:this,def:RegExp.$1});var i=RegExp.$1.split(":"),o=this.context.createLinearGradient(0,0,this.canvas.width,0),s=1/(i.length-1);o.addColorStop(0,RGraph.trim(i[0]));for(var r=1,e=i.length;r<e;++r)o.addColorStop(r*s,RGraph.trim(i[r]))}return o||t},this.on=function(t,i){return"function"!=typeof this[t="on"!==t.substr(0,2)?"on"+t:t]?this[t]=i:RGraph.addCustomEventListener(this,t,i),this},this.firstDrawFunc=function(){},this.tooltipSubstitutions=function(t){return{index:0,dataset:0,sequentialIndex:0,value:null}},this.positionTooltipStatic=function(t){var i=t.object,o=(t.event,t.tooltip),s=(t.index,RGraph.getCanvasXY(i.canvas));t.tooltip.style.left=s[0]+this.coords[0][0]+this.coords[0][2]/2-o.offsetWidth/2+i.properties.tooltipsOffsetx+"px",t.tooltip.style.top=s[1]-o.offsetHeight+i.properties.tooltipsOffsety+this.coords[0][1]-10+"px"},RGraph.register(this),RGraph.parseObjectStyleConfig(this,t.options)):alert("[DRAWING.TEXT] No canvas support")};