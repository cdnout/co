RGraph=window.RGraph||{isrgraph:!0,isRGraph:!0,rgraph:!0},RGraph.SVG=RGraph.SVG||{},window,document,RGraph.SVG.Radar=function(t){this.set=function(t,e){if(1===arguments.length&&"object"==typeof t)for(i in arguments[0])"string"==typeof i&&(t=a.name,e=a.value,this.set(t,e));else{var a=RGraph.SVG.commonSetter({object:this,name:t,value:e});t=a.name,e=a.value,this.properties[t]=e,"colors"===t&&(this.originalColors=RGraph.SVG.arrayClone(e),this.colorsParsed=!1)}return this},this.get=function(t){return this.properties[t]},this.id=t.id,this.uid=RGraph.SVG.createUID(),this.container=document.getElementById(this.id),this.layers={},this.svg=RGraph.SVG.createSVG({object:this,container:this.container}),this.isRGraph=!0,this.isrgraph=!0,this.rgraph=!0,this.width=Number(this.svg.getAttribute("width")),this.height=Number(this.svg.getAttribute("height")),this.data=RGraph.SVG.arrayClone(t.data),this.originalData=RGraph.SVG.arrayClone(t.data),this.type="radar",this.coords=[],this.coords2=[],this.angles=[],this.angles2=[],this.colorsParsed=!1,this.originalColors={},this.gradientCounter=1,this.nodes=[],this.shadowNodes=[],this.max=0,this.redraw=!1,this.highlight_node=null,this.firstDraw=!0,this.originalData=RGraph.SVG.stringsToNumbers(this.originalData),"number"==typeof this.originalData[0]&&(this.originalData=[this.originalData]),RGraph.SVG.OR.add(this),this.container.style.display="inline-block",this.properties={centerx:null,centery:null,radius:null,marginLeft:35,marginRight:35,marginTop:35,marginBottom:35,backgroundGrid:!0,backgroundGridColor:"#ddd",backgroundGridRadialsCount:null,backgroundGridConcentricsCount:5,backgroundGridLinewidth:1,backgroundGridPoly:!0,colors:["red","black","orange","green","#6ff","#ccc","pink","orange","cyan","maroon","olive","teal"],filled:!1,filledOpacity:.25,filledAccumulative:!0,textColor:"black",textFont:"Arial, Verdana, sans-serif",textSize:12,textBold:!1,textItalic:!1,text:null,labels:[],labelsFont:null,labelsColor:null,labelsSize:null,labelsBold:null,labelsItalic:null,labelsOffset:0,labelsFormattedDecimals:0,labelsFormattedPoint:".",labelsFormattedThousand:",",labelsFormattedUnitsPre:"",labelsFormattedUnitsPost:"",scaleVisible:!0,scaleUnitsPre:"",scaleUnitsPost:"",scaleMax:null,scaleMin:0,scalePoint:".",scaleThousand:",",scaleRound:!1,scaleDecimals:0,scaleFormatter:null,scaleBold:null,scaleItalic:null,scaleColor:null,scaleSize:null,scaleFont:null,scaleLabelsCount:5,linewidth:1,tooltips:null,tooltipsOverride:null,tooltipsEffect:"fade",tooltipsCssClass:"RGraph_tooltip",tooltipsCss:null,tooltipsEvent:"mousemove",tooltipsFormattedThousand:",",tooltipsFormattedPoint:".",tooltipsFormattedDecimals:0,tooltipsFormattedUnitsPre:"",tooltipsFormattedUnitsPost:"",tooltipsFormattedKeyColors:null,tooltipsFormattedKeyColorsShape:"square",tooltipsFormattedKeyLabels:[],tooltipsFormattedTableHeaders:null,tooltipsFormattedTableData:null,tooltipsPointer:!0,tooltipsPositionStatic:!0,highlightStroke:"rgba(0,0,0,0)",highlightFill:"rgba(255,255,255,0.7)",highlightLinewidth:1,tickmarksStyle:"circle",tickmarksLinewidth:1,tickmarksSize:6,tickmarksFill:"white",title:"",titleX:null,titleY:null,titleHalign:"center",titleValign:null,titleSize:null,titleColor:null,titleFont:null,titleBold:null,titleItalic:null,titleSubtitle:null,titleSubtitleSize:null,titleSubtitleColor:"#aaa",titleSubtitleFont:null,titleSubtitleBold:null,titleSubtitleItalic:null,shadow:!1,shadowOffsetx:2,shadowOffsety:2,shadowBlur:2,shadowOpacity:.25,key:null,keyColors:null,keyOffsetx:0,keyOffsety:0,keyLabelsOffsetx:0,keyLabelsOffsety:-1,keyLabelsSize:null,keyLabelsBold:null,keyLabelsItalic:null,keyLabelsFont:null,keyLabelsColor:null},RGraph.SVG.getGlobals(this),RGraph.SVG.FX&&"function"==typeof RGraph.SVG.FX.decorate&&RGraph.SVG.FX.decorate(this),this.responsive=RGraph.SVG.responsive,RGraph.SVG.addCreateFunction(this);var d=this.properties;for(i in this.draw=function(){if(RGraph.SVG.fireCustomEvent(this,"onbeforedraw"),this.width=Number(this.svg.getAttribute("width")),this.height=Number(this.svg.getAttribute("height")),this.data=RGraph.SVG.arrayClone(this.originalData),1<this.data.length)for(var t=this.data[0].length,e=1;e<this.data.length;++e)this.data[e].length!==t&&alert("[ERROR] The Radar chart datasets must have the same number of elements!");this.angles=[],this.angles2=[],this.coords=[],this.coords2=[],RGraph.SVG.createDefs(this),this.graphWidth=this.width-d.marginLeft-d.marginRight,this.graphHeight=this.height-d.marginTop-d.marginBottom,this.centerx=this.graphWidth/2+d.marginLeft,this.centery=this.graphHeight/2+d.marginTop,this.radius=Math.min(this.graphWidth,this.graphHeight)/2,this.centerx=("number"==typeof d.centerx?d:this).centerx,this.centery=("number"==typeof d.centery?d:this).centery,this.radius=("number"==typeof d.radius?d:this).radius,"string"==typeof d.radius&&d.radius.match(/^\+|-\d+$/)&&(this.radius+=parseFloat(d.radius)),"string"==typeof d.centerx&&d.centerx.match(/^\+|-\d+$/)&&(this.centery+=parseFloat(d.centerx)),"string"==typeof d.centery&&d.centery.match(/^\+|-\d+$/)&&(this.centerx+=parseFloat(d.centery)),!RGraph.SVG.isArray(this.data)||"number"!=typeof this.data[0]&&"string"!=typeof this.data[0]||(this.data=[this.data]);for(e=0;e<this.data.length;++e)for(var i=0;i<this.data[e].length;++i)"string"==typeof this.data[e][i]&&(this.data[e][i]=RGraph.SVG.stringsToNumbers(this.data[e][i]));if(d.filled&&d.filledAccumulative)for(var a=1;a<this.data.length;++a)for(e=0;e<this.data[a].length;++e)this.data[a][e]+=this.data[a-1][e];this.getMaxValue(),RGraph.SVG.resetColorsToOriginalValues({object:this}),this.parseColors(),this.scale=RGraph.SVG.getScale({object:this,numlabels:"number"==typeof d.scaleLabelsCount?d.scaleLabelsCount:d.backgroundGridConcentricCount,unitsPre:d.scaleUnitsPre,unitsPost:d.scaleUnitsPost,max:"number"==typeof d.scaleMax?d.scaleMax:this.max,min:d.scaleMin,point:d.scalePoint,round:d.scaleRound,thousand:d.scaleThousand,decimals:d.scaleDecimals,strict:"number"==typeof d.scaleMax,formatter:d.scaleFormatter}),this.max=this.scale.max,this.drawBackground(),this.drawRadar(),this.drawTickmarks(),this.drawLabels(),RGraph.SVG.drawTitle(this),this.addTooltipHotspots(),null!==typeof d.key&&RGraph.SVG.drawKey?RGraph.SVG.drawKey(this):RGraph.SVG.isNull(d.key)||alert("The drawKey() function does not exist - have you forgotten to include the key library?"),RGraph.SVG.attribution(this),d.shadow&&RGraph.SVG.setShadow({object:this,offsetx:d.shadowOffsetx,offsety:d.shadowOffsety,blur:d.shadowBlur,opacity:d.shadowOpacity,id:"dropShadow"});var s=this;return document.body.addEventListener("mousedown",function(t){s.hideHighlight(s)},!1),RGraph.SVG.addCustomText(this),this.firstDraw&&(this.firstDraw=!1,RGraph.SVG.fireCustomEvent(this,"onfirstdraw")),RGraph.SVG.fireCustomEvent(this,"ondraw"),this},this.drawBackground=function(){if(d.backgroundGrid){var t=RGraph.SVG.create({svg:this.svg,parent:this.svg.all,type:"g",attr:{className:"rgraph_radar_grid",fill:"rgba(0,0,0,0)",stroke:d.backgroundGridColor}}),e=0-RGraph.SVG.TRIG.PI/2,i="number"==typeof d.backgroundGridRadialsCount?d.backgroundGridRadialsCount:this.data[0].length,a=d.backgroundGridConcentricsCount,s=RGraph.SVG.TRIG.TWOPI/i;if(0<i)for(var r=0,l=i;r<l;++r){var o=RGraph.SVG.TRIG.toCartesian({cx:this.centerx,cy:this.centery,r:this.radius,angle:e+r*s}),h="M {1} {2} L {3} {4}".format(this.centerx,this.centery,o.x,o.y);RGraph.SVG.create({svg:this.svg,type:"path",parent:t,attr:{d:h,stroke:d.backgroundGridColor,"stroke-width":d.backgroundGridLinewidth}})}if(0<a)if(d.backgroundGridPoly)for(var n=1;n<=a;n++){for(var r=0,l=i,c=[];r<l;++r){o=RGraph.SVG.TRIG.toCartesian({cx:this.centerx,cy:this.centery,r:this.radius*(n/a),angle:e+r*s});c.push("{1} {2} {3}".format(0===r?"M":"L",o.x,o.y))}RGraph.SVG.create({svg:this.svg,type:"path",parent:t,attr:{d:c.join(" ")+" z",fill:"transparent",stroke:d.backgroundGridColor,"stroke-width":d.backgroundGridLinewidth}})}else for(n=1;n<=a;n++)RGraph.SVG.create({svg:this.svg,type:"circle",parent:t,attr:{cx:this.centerx,cy:this.centery,r:this.radius*(n/a),fill:"transparent",stroke:d.backgroundGridColor,"stroke-width":d.backgroundGridLinewidth}})}},this.drawRadar=function(t){for(var e=0,i=this.data.length;e<i;++e){this.coords2[e]=[],this.angles2[e]=[];for(var a=[],s=0,r=this.data[e].length;s<r;++s){var l=this.data[e][s],o=RGraph.SVG.TRIG.toCartesian({cx:this.centerx,cy:this.centery,r:this.getRadius(this.data[e][s]),angle:RGraph.SVG.TRIG.TWOPI/r*s-RGraph.SVG.TRIG.HALFPI});o.r=(l-d.scaleMin)/(this.max-d.scaleMin)*this.radius,o.angle=RGraph.SVG.TRIG.TWOPI/r*s-RGraph.SVG.TRIG.HALFPI,a.push("{1}{2} {3}".format(0===s?"M":"L",o.x,o.y)),this.angles.push({object:this,dataset:e,index:s,x:o.x,y:o.y,cx:this.centerx,cy:this.centery,r:o.r,angle:o.angle}),this.angles2[e].push({object:this,dataset:e,index:s,x:o.x,y:o.y,cx:this.centerx,cy:this.centery,r:o.r,angle:o.angle}),this.coords.push([o.x,o.y]),this.coords2[e].push([o.x,o.y])}if(0<e&&d.filled&&d.filledAccumulative){a.push("L {1} {2}".format(this.coords2[e][0][0],this.coords2[e][0][1])),a.push("M {1} {2}".format(this.coords2[e-1][0][0],this.coords2[e-1][0][1]));for(s=this.coords2[e-1].length-1;0<=s;--s)a.push("L {1} {2}".format(this.coords2[e-1][s][0],this.coords2[e-1][s][1]));this.redraw=!0}else a.push("z");(a=RGraph.SVG.create({svg:this.svg,type:"path",parent:this.svg.all,attr:{d:a.join(" "),stroke:d.colors[e],fill:d.filled?d.colors[e]:"transparent","fill-opacity":d.filledOpacity,"stroke-width":d.linewidth,"clip-path":this.isTrace?"url(#trace-effect-clip)":"",filter:d.shadow?"url(#dropShadow)":""}})).setAttribute("data-dataset",e)}this.redrawRadar()},this.redrawRadar=function(){if(this.redraw){this.redraw=!1;for(var t=0;t<this.coords2.length;++t){for(var e=[],i=0;i<this.coords2[t].length;++i)0===i?e.push("M {1} {2}".format(this.coords2[t][i][0],this.coords2[t][i][1])):e.push("L {1} {2}".format(this.coords2[t][i][0],this.coords2[t][i][1]));e.push("z"),RGraph.SVG.create({svg:this.svg,type:"path",parent:this.svg.all,attr:{d:e.join(" "),stroke:d.colors[t],fill:"transparent","stroke-width":d.linewidth}})}}},this.drawTickmarks=function(){for(var t=RGraph.SVG.create({svg:this.svg,parent:this.svg.all,type:"g",attr:{className:"rgraph_radar_tickmarks"}}),e=0;e<this.coords2.length;++e)for(var i,a,s=0;s<this.coords2[e].length;++s)"circle"===d.tickmarksStyle||"filledcircle"===d.tickmarksStyle?((a=RGraph.SVG.create({svg:this.svg,type:"circle",parent:t,attr:{cx:this.coords2[e][s][0],cy:this.coords2[e][s][1],r:d.tickmarksSize,fill:"filledcircle"===d.tickmarksStyle?d.colors[e]:d.tickmarksFill,stroke:d.colors[e],"stroke-width":d.tickmarksLinewidth,"clip-path":this.isTrace?"url(#trace-effect-clip)":""}})).setAttribute("data-dataset",e),a.setAttribute("data-index",s)):"rect"!==d.tickmarksStyle&&"filledrect"!==d.tickmarksStyle||(i=d.tickmarksSize/2,a="object"==typeof d.tickmarksFill&&d.tickmarksFill[e]?d.tickmarksFill[e]:d.tickmarksFill,(a=RGraph.SVG.create({svg:this.svg,type:"rect",parent:t,attr:{x:this.coords2[e][s][0]-i,y:this.coords2[e][s][1]-i,width:d.tickmarksSize,height:d.tickmarksSize,fill:"filledrect"===d.tickmarksStyle?d.colors[e]:a,stroke:d.colors[e],"stroke-width":d.tickmarksLinewidth}})).setAttribute("data-dataset",e),a.setAttribute("data-index",s))},this.drawLabels=function(){if(d.labels&&d.labels.length){"string"==typeof d.labels&&(d.labels=RGraph.SVG.arrayPad({array:[],length:this.data[0].length,value:d.labels}));for(var t=0;t<d.labels.length;++t)d.labels[t]=RGraph.SVG.labelSubstitution({object:this,text:d.labels[t],index:t,value:this.data[0][t],decimals:d.labelsFormattedDecimals||0,unitsPre:d.labelsFormattedUnitsPre||"",unitsPost:d.labelsFormattedUnitsPost||"",thousand:d.labelsFormattedThousand||",",point:d.labelsFormattedPoint||"."})}this.angles2;for(var e,i=d.labels,a=RGraph.SVG.getTextConf({object:this,prefix:"labels"}),t=0,s=i.length;t<s;++t)i[t]&&(r=(e=RGraph.SVG.TRIG.getRadiusEndPoint({angle:RGraph.SVG.TRIG.TWOPI/i.length*t-RGraph.SVG.TRIG.HALFPI,r:this.radius+20+d.labelsOffset}))[0]+this.centerx,l=e[1]+this.centery,halign=t/s<.5?"left":"right",valign=t/s<.25||.75<t/s?"bottom":"top",t/s==0&&(halign="center"),t/s==.25&&(valign="center"),t/s==.5&&(halign="center"),t/s==.75&&(valign="center"),RGraph.SVG.text({object:this,svg:this.svg,parent:this.svg.all,tag:"labels",text:i[t],x:r,y:l,halign:halign,valign:"center",size:a.size,color:a.color,bold:a.bold,italic:a.italic,font:a.font}));if(d.scaleVisible){for(a=RGraph.SVG.getTextConf({object:this,prefix:"scale"}),t=0;t<this.scale.labels.length;++t){var r=this.centerx,l=this.centery-this.radius/this.scale.labels.length*(t+1);RGraph.SVG.text({object:this,parent:this.svg.all,tag:"labels.scale",text:this.scale.labels[t],x:r,y:l,halign:"center",valign:"center",background:"rgba(255,255,255,0.7)",padding:2,size:a.size,color:a.color,bold:a.bold,italic:a.italic,font:a.font})}var o=RGraph.SVG.numberFormat({object:this,num:this.scale.min.toFixed(d.scaleDecimals),prepend:d.scaleUnitsPre,append:d.scaleUnitsPost,point:d.scalePoint,thousand:d.scaleThousand,formatter:d.scaleFormatter});RGraph.SVG.text({object:this,parent:this.svg.all,tag:"labels.scale",text:o,x:this.centerx,y:this.centery,halign:"center",valign:"center",background:"rgba(255,255,255,0.7)",padding:2,size:a.size,color:a.color,bold:a.bold,italic:a.italic,font:a.font})}},this.highlight=function(t){t.setAttribute("fill",d.highlightFill),t.setAttribute("stroke",d.highlightStroke),t.setAttribute("stroke-width",d.highlightLinewidth),this.highlight_node=t,RGraph.SVG.REG.set("highlight",t)},this.parseColors=function(){Object.keys(this.originalColors).length||(this.originalColors={colors:RGraph.SVG.arrayClone(d.colors),highlightFill:RGraph.SVG.arrayClone(d.highlightFill)});var t=d.colors;if(t)for(var e=0;e<t.length;++e)t[e]=RGraph.SVG.parseColorRadial({object:this,color:t[e]});d.highlightFill=RGraph.SVG.parseColorRadial({object:this,color:d.highlightFill})},this.getMaxValue=function(){if(d.filled&&d.filledAccumulative)this.max=RGraph.SVG.arrayMax(this.data[this.data.length-1]);else for(var t=0;t<this.data.length;++t)this.max=Math.max(this.max,RGraph.SVG.arrayMax(this.data[t]))},this.getRadius=function(t){return(t-d.scaleMin)/(this.scale.max-d.scaleMin)*this.radius},this.addTooltipHotspots=function(){if(d.tooltips&&0<d.tooltips.length){"mousemove"!==d.tooltipsEvent&&(d.tooltipsEvent="click");for(var t=RGraph.SVG.create({svg:this.svg,type:"g",parent:this.svg.all,attr:{className:"rgraph-radar-tooltip-hotspots"}}),e=0,i=0;e<this.coords2.length;++e)for(var a=0;a<this.coords2[e].length;++a){var l=RGraph.SVG.create({svg:this.svg,type:"circle",parent:t,attr:{cx:this.coords2[e][a][0],cy:this.coords2[e][a][1],r:d.tickmarksSize,fill:"transparent",stroke:"transparent","stroke-width":0,"data-sequential-index":i},style:{cursor:d.tooltips[i]?"pointer":"default"}});!function(i,a,s,r){!d.tooltips[s]&&"string"!=typeof d.tooltips||(l.addEventListener(d.tooltipsEvent,function(t){var e=RGraph.SVG.REG.get("tooltip");e&&e.__sequentialIndex__===s||(RGraph.SVG.tooltip({object:r,dataset:i,index:a,sequentialIndex:s,text:"string"==typeof d.tooltips?d.tooltips:d.tooltips[s],event:t}),r.highlight(this))},!1),"click"===d.tooltipsEvent&&l.addEventListener("mousemove",function(t){t.target.style.cursor="pointer"},!1))}(e,a,i++,this)}}},this.on=function(t,e){return"on"!==t.substr(0,2)&&(t="on"+t),RGraph.SVG.addCustomEventListener(this,t,e),this},this.exec=function(t){return t(this),this},this.removeHighlight=this.hideHighlight=function(){RGraph.SVG.REG.get("highlight")&&this.highlight_node&&(this.highlight_node.setAttribute("fill","transparent"),this.highlight_node.setAttribute("stroke","transparent"),RGraph.SVG.REG.set("highlight",null))},this.trace=function(){var e=arguments[0]||{},i=1,a=e.frames||120,s=this;step=360/a,this.isTrace=!0,this.draw();var t=RGraph.SVG.create({svg:this.svg,parent:this.svg.defs,type:"clipPath",attr:{id:"trace-effect-clip"}});clipPathArcPath=RGraph.SVG.TRIG.getArcPath2({cx:this.angles[0].cx,cy:this.angles[0].cy,r:2*this.angles[0].r,start:0,end:0});var r=RGraph.SVG.create({svg:this.svg,parent:t,type:"path",attr:{d:clipPathArcPath}}),l=function(){i++,s.width;var t=360/a*i++,t=RGraph.SVG.TRIG.TWOPI/360*t;r.setAttribute("d",RGraph.SVG.TRIG.getArcPath2({cx:s.angles[0].cx,cy:s.angles[0].cy,r:2*s.angles[0].r,start:0,end:t})),i<=a?RGraph.SVG.FX.update(l):e.callback&&e.callback(s)};return l(),this},this.tooltipSubstitutions=function(t){for(var e=RGraph.SVG.sequentialIndexToGrouped(t.index,this.data),i=0,a=[];i<this.originalData.length;++i)a.push(this.originalData[i][e[1]]);return{index:e[1],dataset:e[0],sequentialIndex:t.index,value:"number"==typeof this.data[e[0]]?this.data[e[0]]:this.data[e[0]][e[1]],values:a}},this.tooltipsFormattedCustom=function(t,e,i){i=i[t.index];return{label:"object"==typeof d.tooltipsFormattedKeyLabels&&"string"==typeof d.tooltipsFormattedKeyLabels[t.index]?d.tooltipsFormattedKeyLabels[t.index]:"",color:i}},this.tooltipsFormattedCustom=function(t,e,i){return{color:!RGraph.SVG.isNull(d.tooltipsFormattedKeyColors)&&"object"==typeof d.tooltipsFormattedKeyColors&&d.tooltipsFormattedKeyColors[e]?d.tooltipsFormattedKeyColors[e]:""}},this.positionTooltipStatic=function(t){var e=t.object,i=(t.event,t.tooltip),a=(t.index,RGraph.SVG.getSVGXY(e.svg)),e=this.coords[t.index];t.tooltip.style.left=a[0]+e[0]-i.offsetWidth/2+"px",t.tooltip.style.top=a[1]+e[1]-i.offsetHeight-15+"px"},t.options)"string"==typeof i&&this.set(i,t.options[i])};