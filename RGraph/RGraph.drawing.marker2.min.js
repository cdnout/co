RGraph=window.RGraph||{isrgraph:!0,isRGraph:!0,rgraph:!0},RGraph.Drawing=RGraph.Drawing||{},RGraph.Drawing.Marker2=function(t){var r,s=t.id,o=(document.getElementById(s),t.x),e=t.y,h=t.text;this.id=s,this.canvas=document.getElementById(this.id),this.context=this.canvas.getContext("2d"),this.colorsParsed=!1,(this.canvas.__object__=this).original_colors=[],this.firstDraw=!0,this.x=o,this.y=e,this.text=h,this.type="drawing.marker2",this.isRGraph=!0,this.isrgraph=!0,this.rgraph=!0,this.uid=RGraph.createUID(),this.canvas.uid=this.canvas.uid||RGraph.createUID(),this.properties={colorsStroke:"black",colorsFill:"white",textColor:"black",textSize:12,textFont:"Arial, Verdana, sans-serif",textBold:!1,textItalic:!1,textAccessible:!0,textAccessibleOverflow:"visible",textAccessiblePointerevents:!1,text:null,shadow:!0,shadowColor:"gray",shadowOffsetx:3,shadowOffsety:3,shadowBlur:5,highlightStyle:null,highlightStroke:"rgba(0,0,0,0)",highlightFill:"#fcc",tooltips:null,tooltipsHighlight:!0,tooltipsCssClass:"RGraph_tooltip",tooltipsCss:null,tooltipsEffect:"slide",tooltipsEvent:"onclick",tooltipsFormattedPoint:".",tooltipsFormattedThousand:",",tooltipsFormattedDecimals:0,tooltipsFormattedUnitsPre:"",tooltipsFormattedUnitsPost:"",tooltipsFormattedListType:"ul",tooltipsFormattedListItems:null,tooltipsPointer:!0,tooltipsPositionStatic:!0,voffset:20,clearto:"rgba(0,0,0,0)"},this.canvas?(this.coords=[],this.coordsText=[],this.$0={},r=this.properties,this.path=RGraph.pathObjectFunction,RGraph.Effects&&"function"==typeof RGraph.Effects.decorate&&RGraph.Effects.decorate(this),this.set=function(t){var s=void 0===arguments[1]?null:arguments[1];if(1!==arguments.length||"object"!=typeof t)return r[t]=s,this;for(i in t)"string"==typeof i&&this.set(i,t[i]);return this},this.get=function(t){return r[t]},this.draw=function(){RGraph.fireCustomEvent(this,"onbeforedraw"),this.canvas.__rgraph_aa_translated__||(this.context.translate(.5,.5),this.canvas.__rgraph_aa_translated__=!0),this.context.lineWidth=1,this.metrics=RGraph.measureText(this.text,r.textBold,r.textFont,r.textSize),this.x+this.metrics[0]>=this.canvas.width&&(this.alignRight=!0),this.colorsParsed||(this.parseColors(),this.colorsParsed=!0);var t=this.alignRight?this.x-this.metrics[0]-6:this.x,i=this.y-6-r.voffset-this.metrics[1],s=this.metrics[0]+6,o=this.metrics[1];return this.coords[0]=[t,i,s,o],this.coordsText=[],this.context.lineWidth=r.linewidth,r.shadow&&RGraph.setShadow(this,r.shadowColor,r.shadowOffsetx,r.shadowOffsety,r.shadowBlur),this.context.strokeStyle=r.colorsStroke,this.context.fillStyle=r.colorsFill,this.context.strokeRect(t+(this.alignRight?s:0),i,0,o+r.voffset-6),this.context.strokeRect(t,i,s,o),this.context.fillRect(t,i,s,o),RGraph.noShadow(this),this.context.fillStyle=r.textColor,RGraph.text({object:this,font:r.textFont,size:r.textSize,color:r.textColor,bold:r.textBold,italic:r.textItalic,x:Math.round(this.x)-(this.alignRight?this.metrics[0]+3:-3),y:i+o/2,text:this.text,valign:"center",halign:"left",tag:"labels"}),this.coords[0].push([t,i,s,o]),RGraph.noShadow(this),this.context.textBaseline="alphabetic",RGraph.addCustomText(this),RGraph.installEventListeners(this),this.firstDraw&&(this.firstDraw=!1,RGraph.fireCustomEvent(this,"onfirstdraw"),this.firstDrawFunc()),RGraph.fireCustomEvent(this,"ondraw"),this},this.exec=function(t){return t(this),this},this.getObjectByXY=function(t){if(this.getShape(t))return this},this.getShape=function(t){var i,s=RGraph.getMouseXY(t),t=s[0],s=s[1];if(t>=this.coords[0][0]&&t<=this.coords[0][0]+this.coords[0][2]&&(s>=this.coords[0][1]&&s<=this.coords[0][1]+this.coords[0][3]))return RGraph.parseTooltipText&&r.tooltips&&(i=RGraph.parseTooltipText(r.tooltips,0)),{object:this,x:this.coords[0][0],y:this.coords[0][1],width:this.coords[0][2],height:this.coords[0][3],dataset:0,index:0,sequentialIndex:0,tooltip:"string"==typeof i?i:null};return null},this.highlight=function(t){r.tooltipsHighlight&&("function"==typeof r.highlightStyle?r.highlightStyle(t):(this.path("b r % % % % f % s %",this.coords[0][0],this.coords[0][1],this.coords[0][2],this.coords[0][3],r.highlightFill,r.highlightStroke),this.path("b r % % % % f % s %",this.coords[0][0],this.coords[0][1],this.coords[0][2],this.coords[0][3],r.highlightFill,r.highlightStroke)))},this.parseColors=function(){0===this.original_colors.length&&(this.original_colors.colorsFill=RGraph.arrayClone(r.colorsFill),this.original_colors.colorsStroke=RGraph.arrayClone(r.colorsStroke),this.original_colors.highlightFill=RGraph.arrayClone(r.highlightFill),this.original_colors.highlightStroke=RGraph.arrayClone(r.highlightStroke),this.original_colors.textColor=RGraph.arrayClone(r.textColor)),r.colorsFill=this.parseSingleColorForGradient(r.colorsFill),r.colorsStroke=this.parseSingleColorForGradient(r.colorsStroke),r.highlightStroke=this.parseSingleColorForGradient(r.highlightStroke),r.highlightFill=this.parseSingleColorForGradient(r.highlightFill),r.textColor=this.parseSingleColorForGradient(r.textColor)},this.reset=function(){},this.parseSingleColorForGradient=function(t){if(!t)return t;if("string"==typeof t&&t.match(/^gradient\((.*)\)$/i)){if(t.match(/^gradient\(({.*})\)$/i))return RGraph.parseJSONGradient({object:this,def:RegExp.$1});var i=RegExp.$1.split(":"),s=this.context.createLinearGradient(this.x,this.y,this.x+this.metrics[0],this.y),o=1/(i.length-1);s.addColorStop(0,RGraph.trim(i[0]));for(var r=1;r<i.length;++r)s.addColorStop(r*o,RGraph.trim(i[r]))}return s||t},this.on=function(t,i){return"function"!=typeof this[t="on"!==t.substr(0,2)?"on"+t:t]?this[t]=i:RGraph.addCustomEventListener(this,t,i),this},this.firstDrawFunc=function(){},this.tooltipSubstitutions=function(t){return{index:0,dataset:0,sequentialIndex:0,value:null}},this.positionTooltipStatic=function(t){var i=t.object,s=(t.event,t.tooltip),o=(t.index,RGraph.getCanvasXY(i.canvas));t.tooltip.style.left=o[0]-s.offsetWidth/2+i.properties.tooltipsOffsetx+this.coords[0][0]+this.coords[0][2]/2+"px",t.tooltip.style.top=o[1]-s.offsetHeight+i.properties.tooltipsOffsety+this.coords[0][1]-10+"px"},RGraph.register(this),RGraph.parseObjectStyleConfig(this,t.options)):alert("[DRAWING.MARKER2] No canvas support")};