RGraph=window.RGraph||{isrgraph:!0,isRGraph:!0,rgraph:!0},RGraph.SemiCircularProgress=function(t){var n;this.id=t.id,this.canvas=document.getElementById(this.id),this.context=this.canvas.getContext("2d"),(this.canvas.__object__=this).min=RGraph.stringsToNumbers(t.min),this.max=RGraph.stringsToNumbers(t.max),this.value=RGraph.stringsToNumbers(t.value),this.type="semicircularprogress",this.coords=[],this.isRGraph=!0,this.isrgraph=!0,this.rgraph=!0,this.currentValue=null,this.uid=RGraph.createUID(),this.canvas.uid=this.canvas.uid||RGraph.createUID(),this.colorsParsed=!1,this.coordsText=[],this.original_colors=[],this.firstDraw=!0,this.properties={backgroundColor:"rgba(0,0,0,0)",backgroundGrid:!1,backgroundGridMargin:20,backgroundGridColor:"#ddd",backgroundGridLinewidth:1,backgroundGridCircles:!0,backgroundGridRadials:!0,backgroundGridRadialsCount:10,colors:["#0c0","#f66","#66f","yellow","pink","#ccc","#cc0","#0cc","#c0c"],linewidth:2,colorsStroke:"#666",marginLeft:35,marginRight:35,marginTop:35,marginBottom:35,radius:null,centerx:null,centery:null,width:null,anglesStart:Math.PI,anglesEnd:2*Math.PI,scale:!1,scaleMin:0,scaleMax:null,scaleDecimals:0,scalePoint:".",scaleThousand:",",scaleFormatter:null,scaleUnitsPre:"",scaleUnitsPost:"",scaleLabelsCount:10,scaleLabelsFont:null,scaleLabelsSize:null,scaleLabelsColor:null,scaleLabelsBold:null,scaleLabelsItalic:null,scaleLabelsOffsetr:0,scaleLabelsOffsetx:0,scaleLabelsOffsety:0,shadow:!1,shadowColor:"rgba(220,220,220,1)",shadowBlur:2,shadowOffsetx:2,shadowOffsety:2,labelsCenter:!0,labelsCenterIndex:0,labelsCenterFade:!1,labelsCenterSize:40,labelsCenterColor:null,labelsCenterBold:null,labelsCenterItalic:null,labelsCenterFont:null,labelsCenterValign:"bottom",labelsCenterOffsetx:0,labelsCenterOffsety:0,labelsCenterThousand:",",labelsCenterPoint:".",labelsCenterDecimals:0,labelsCenterUnitsPost:"",labelsCenterUnitsPre:"",labelsCenterSpecific:null,labelsMin:!0,labelsMinColor:null,labelsMinFont:null,labelsMinBold:null,labelsMinSize:null,labelsMinItalic:null,labelsMinOffsetAngle:0,labelsMinOffsetx:0,labelsMinOffsety:5,labelsMinThousand:",",labelsMinPoint:".",labelsMinDecimals:0,labelsMinUnitsPost:"",labelsMinUnitsPre:"",labelsMinSpecific:null,labelsMax:!0,labelsMaxColor:null,labelsMaxFont:null,labelsMaxBold:null,labelsMaxSize:null,labelsMaxItalic:null,labelsMaxOffsetAngle:0,labelsMaxOffsetx:0,labelsMaxOffsety:5,labelsMaxThousand:",",labelsMaxPoint:".",labelsMaxDecimals:0,labelsMaxUnitsPost:"",labelsMaxUnitsPre:"",labelsMaxSpecific:null,title:"",titleBold:null,titleItalic:null,titleFont:null,titleSize:null,titleColor:null,titleOffsetx:0,titleOffsety:0,textSize:12,textColor:"black",textFont:"Arial, Verdana, sans-serif",textBold:!1,textItalic:!1,textAccessible:!0,textAccessibleOverflow:"visible",textAccessiblePointerevents:!1,text:null,contextmenu:null,tooltips:null,tooltipsEffect:"slide",tooltipsOverride:null,tooltipsCssClass:"RGraph_tooltip",tooltipsCss:null,tooltipsEvent:"onclick",tooltipsHighlight:!0,tooltipsHotspotXonly:!1,tooltipsFormattedThousand:",",tooltipsFormattedPoint:".",tooltipsFormattedDecimals:0,tooltipsFormattedUnitsPre:"",tooltipsFormattedUnitsPost:"",tooltipsFormattedKeyColors:null,tooltipsFormattedKeyColorsShape:"square",tooltipsFormattedKeyColorsCss:null,tooltipsFormattedKeyLabels:[],tooltipsFormattedListType:"ul",tooltipsFormattedListItems:null,tooltipsFormattedTableHeaders:null,tooltipsFormattedTableData:null,tooltipsPointer:!0,tooltipsPointerCss:null,tooltipsPositionStatic:!0,tooltipsOffsetx:0,tooltipsOffsety:0,highlightStyle:null,highlightStroke:"rgba(0,0,0,0)",highlightFill:"rgba(255,255,255,0.7)",annotatable:!1,annotatebleColor:"black",annotatebleLinewidth:1,adjustable:!1,clearto:"rgba(0,0,0,0)"},this.canvas?(n=this.properties,this.path=RGraph.pathObjectFunction,RGraph.Effects&&"function"==typeof RGraph.Effects.decorate&&RGraph.Effects.decorate(this),this.responsive=RGraph.responsive,this.set=function(t){var e=void 0===arguments[1]?null:arguments[1];if(1!==arguments.length||"object"!=typeof t)return n[t]=e,this;for(i in t)"string"==typeof i&&this.set(i,t[i]);return this},this.get=function(t){return n[t]},this.draw=function(){return RGraph.fireCustomEvent(this,"onbeforedraw"),this.canvas.__rgraph_aa_translated__||(this.context.translate(.5,.5),this.canvas.__rgraph_aa_translated__=!0),this.colorsParsed||(this.parseColors(),this.colorsParsed=!0),this.currentValue=this.value,this.marginLeft=n.marginLeft,this.marginRight=n.marginRight,this.marginTop=n.marginTop,this.marginBottom=n.marginBottom,this.radius=Math.min((this.canvas.width-n.marginLeft-n.marginRight)/2,this.canvas.height-n.marginTop-n.marginBottom),this.centerx=(this.canvas.width-this.marginLeft-this.marginRight)/2+this.marginLeft,this.centery=this.canvas.height-this.marginBottom,this.width=this.radius/3,"number"==typeof n.radius&&(this.radius=n.radius),"number"==typeof n.centerx&&(this.centerx=n.centerx),"number"==typeof n.centery&&(this.centery=n.centery),"number"==typeof n.width&&(this.width=n.width),RGraph.isString(n.centerx)&&(this.centerx+=Number(n.centerx)),RGraph.isString(n.centery)&&(this.centery+=Number(n.centery)),RGraph.isString(n.radius)&&(this.radius+=Number(n.radius)),this.coords=[],this.coordsText=[],this.drawBackgroundGrid(),this.drawMeter(),this.drawLabels(),this.drawScale(),n.contextmenu&&RGraph.showContext(this),RGraph.addCustomText(this),RGraph.installEventListeners(this),this.allowAdjusting(),this.firstDraw&&(this.firstDraw=!1,RGraph.fireCustomEvent(this,"onfirstdraw"),this.firstDrawFunc()),RGraph.fireCustomEvent(this,"ondraw"),this},this.drawMeter=function(){this.coords=[];var t=n.anglesStart,e=n.anglesEnd;if(this.scale2=RGraph.getScale({object:this,options:{"scale.max":this.max,"scale.strict":!0,"scale.min":this.min,"scale.thousand":n.scaleThousand,"scale.point":n.scalePoint,"scale.decimals":n.scaleDecimals,"scale.labels.count":5,"scale.units.pre":n.scaleUnitsPre,"scale.units.post":n.scaleUnitsPost}}),"rgba(0,0,0,0)"!==n.backgroundColor&&this.path("fs % fr % % % %",n.backgroundColor,0,0,this.canvas.width,this.canvas.height),this.path("lw % b a % % % % % false a % % % % % true c s % f % sx % sy % sc % sb % f % sx 0 sy 0 sb 0 sc rgba(0,0,0,0) lw 1",n.linewidth,this.centerx,this.centery,this.radius,t,e,this.centerx,this.centery,this.radius-this.width,e,t,n.colorsStroke,n.colors[0],n.shadowOffsetx,n.shadowOffsety,n.shadow?n.shadowColor:"rgba(0,0,0,0)",n.shadowBlur,"rgba(255,255,255,0.85)"),RGraph.isNumber(this.value)){var s=(e-t)*((this.value-this.scale2.min)/(this.max-this.scale2.min));this.path("b a % % % % % false a % % % % % true c f %",this.centerx,this.centery,this.radius,t,t+s,this.centerx,this.centery,this.radius-this.width,t+s,t,n.colors[0]),this.coords=[[this.centerx,this.centery,this.radius,t,t+s,this.width,s]]}else if(RGraph.isArray(this.value))for(var a=0;a<this.value.length;++a){s=(n.anglesEnd-n.anglesStart)*((this.value[a]-this.scale2.min)/(this.max-this.scale2.min));this.path("b a % % % % % false a % % % % % true c f %",this.centerx,this.centery,this.radius,t,t+s,this.centerx,this.centery,this.radius-this.width,t+s,t,n.colors[a]),this.coords.push([this.centerx,this.centery,this.radius,t,t+s,this.width,s]),t+=s}},this.drawLabels=function(){var t,e,s;if(n.labelsMin&&(a=RGraph.isNull(n.labelsMinSpecific)?RGraph.numberFormat({object:this,number:this.scale2.min.toFixed("number"==typeof n.labelsMinDecimals?n.labelsMinDecimals:n.scaleDecimals),unitspre:n.labelsMinUnitsPre,unitspost:n.labelsMinUnitsPost,point:n.labelsMinPoint,thousand:n.labelsMinThousand}):n.labelsMinSpecific,n.anglesStart===RGraph.PI?(t="center",e="top"):n.anglesStart<=RGraph.PI?(t="left",e="center"):n.anglesStart>=RGraph.PI&&(t="right",e="center"),s=RGraph.getRadiusEndPoint(this.centerx,this.centery,n.anglesStart+n.labelsMinOffsetAngle,this.radius-this.width/2),i=RGraph.getTextConf({object:this,prefix:"labelsMin"}),RGraph.text({object:this,font:i.font,size:i.size,color:i.color,bold:i.bold,italic:i.italic,x:s[0]+n.labelsMinOffsetx,y:s[1]+n.labelsMinOffsety,valign:e,halign:t,text:a})),n.labelsMax&&(n.anglesEnd===RGraph.TWOPI?(t="center",e="top"):n.anglesEnd>=RGraph.TWOPI?(t="right",e="center"):n.anglesEnd<=RGraph.TWOPI&&(t="left",e="center"),a=RGraph.isNull(n.labelsMaxSpecific)?RGraph.numberFormat({object:this,number:this.scale2.max.toFixed("number"==typeof n.labelsMaxDecimals?n.labelsMaxDecimals:n.scaleDecimals),unitspre:n.labelsMaxUnitsPre,unitspost:n.labelsMaxUnitsPost,point:n.labelsMaxPoint,thousand:n.labelsMaxThousand}):n.labelsMaxSpecific,s=RGraph.getRadiusEndPoint(this.centerx,this.centery,n.anglesEnd+n.labelsMaxOffsetAngle,this.radius-this.width/2),i=RGraph.getTextConf({object:this,prefix:"labelsMax"}),RGraph.text({object:this,font:i.font,size:i.size,color:i.color,bold:i.bold,italic:i.italic,x:s[0]+n.labelsMaxOffsetx,y:s[1]+n.labelsMaxOffsety,valign:e,halign:t,text:a})),n.labelsCenter){var a,i=RGraph.getTextConf({object:this,prefix:"labelsCenter"});a=RGraph.isNull(n.labelsCenterSpecific)?RGraph.numberFormat({object:this,number:(RGraph.isNumber(this.value)?this.value:this.value[n.labelsCenterIndex]).toFixed(RGraph.isNumber(n.labelsCenterDecimals)?n.labelsCenterDecimals:n.scaleDecimals),unitspre:n.labelsCenterUnitsPre,unitspost:n.labelsCenterUnitsPost,point:n.labelsCenterPoint,thousand:n.labelsCenterThousand}):n.labelsCenterSpecific;var l=RGraph.text({object:this,font:i.font,size:i.size,color:i.color,bold:i.bold,italic:i.italic,x:this.centerx+n.labelsCenterOffsetx,y:this.centery+n.labelsCenterOffsety,valign:n.labelsCenterValign,halign:"center",text:a});if(n.labelsCenterFade&&l.node){l.node.style.opacity=0;for(var r=0;r<20;++r)!function(t){setTimeout(function(){l.node.style.opacity=.05*t},25*(t+1))}(r)}}RGraph.drawTitle(this,n.title,this.marginTop,null,n.titleSize)},this.drawBackgroundGrid=function(){if(n.backgroundGrid){var t=n.backgroundGridMargin,e=this.radius+t,s=this.radius-this.width-t;if(n.backgroundGridCircles&&(this.path("b lw % a % % % % % false",n.backgroundGridLinewidth,this.centerx,this.centery,e,n.anglesStart,n.anglesEnd),this.path(p="a % % % % % true c s %",this.centerx,this.centery,s,n.anglesEnd,n.anglesStart,n.backgroundGridColor)),n.backgroundGridRadials)for(var a=(n.anglesEnd-n.anglesStart)/n.backgroundGridRadialsCount,i=n.anglesStart,l=0;l<n.backgroundGridRadialsCount;++l)this.path(" b a % % % % % false a % % % % % false s %",this.centerx,this.centery,s,i,i,this.centerx,this.centery,e,i,i,n.backgroundGridColor),i+=a}},this.drawScale=function(){if(n.scale){this.scale2=RGraph.getScale({object:this,options:{"scale.max":n.scaleMax||this.max,"scale.strict":!0,"scale.min":n.scaleMin,"scale.thousand":n.scaleThousand,"scale.point":n.scalePoint,"scale.decimals":n.scaleDecimals,"scale.labels.count":n.scaleLabelsCount,"scale.round":!1,"scale.units.pre":n.scaleUnitsPre,"scale.units.post":n.scaleUnitsPost,"scale.formatter":n.scaleFormatter}});for(var t=0;t<this.scale2.labels.length;++t){var e=RGraph.getTextConf({object:this,prefix:"scaleLabels"}),s=RGraph.getRadiusEndPoint({cx:this.centerx,cy:this.centery,angle:n.anglesStart+(t+1)/this.scale2.labels.length*(n.anglesEnd-n.anglesStart),radius:this.radius+(n.backgroundGrid?n.backgroundGridMargin:0)+e.size+n.scaleLabelsOffsetr+5});RGraph.text({object:this,tag:"scale",font:e.font,size:e.size,color:e.color,bold:e.bold,italic:e.italic,x:s[0]+(n.scaleLabelsOffsetx||0),y:s[1]+(n.scaleLabelsOffsety||0),valign:"center",halign:"center",text:this.scale2.labels[t]})}s=RGraph.getRadiusEndPoint({cx:this.centerx,cy:this.centery,angle:n.anglesStart,radius:this.radius+(n.backgroundGrid?n.backgroundGridMargin:0)+e.size+n.scaleLabelsOffsetr+5});RGraph.text({object:this,font:e.font,size:e.size,color:e.color,bold:e.bold,italic:e.italic,x:s[0]+(n.scaleLabelsOffsetx||0),y:s[1]+(n.scaleLabelsOffsety||0),valign:"center",halign:"center",text:"function"==typeof n.scaleFormatter?n.scaleFormatter({object:this,number:0,unitspre:n.scaleUnitsPre,unitspost:n.scaleUnitsPost,point:n.scalePoint,thousand:n.scaleThousand,formatter:n.scaleFormatter}):(n.scaleUnitsPre||"")+n.scaleMin.toFixed(n.scaleDecimals).replace(/\./,n.scalePoint)+(n.scaleUnitsPost||"")})}},this.getShape=function(t){for(var e,t=RGraph.getMouseXY(t),s=t[0],a=t[1],i=0;i<this.coords.length;++i)if(this.path("b a % % % % % false a % % % % % true",this.coords[i][0],this.coords[i][1],this.coords[i][2],this.coords[i][3],this.coords[i][4],this.coords[i][0],this.coords[i][1],this.coords[i][2]-this.coords[i][5],this.coords[i][4],this.coords[i][3]),this.context.isPointInPath(s,a))return RGraph.parseTooltipText&&(e=RGraph.parseTooltipText(n.tooltips,i)),{object:this,x:this.coords[i][0],y:this.coords[i][1],radiusOuter:this.coords[i][2],radiusInner:this.coords[i][2]-this.coords[i][5],width:this.coords[i][5],angleStart:this.coords[i][3],angleEnd:this.coords[i][4],index:i,dataset:0,sequentialIndex:i,tooltip:"string"==typeof e?e:null}},this.getValue=function(t){var e=RGraph.getMouseXY(t),s=e[0],t=e[1],e=RGraph.getAngleByXY(this.centerx,this.centery,s,t);e&&s>=this.centerx&&t>this.centery&&(e+=RGraph.TWOPI);e=((e=(e=e<n.anglesStart&&s>this.centerx?n.anglesEnd:e)<n.anglesStart?n.anglesStart:e)-n.anglesStart)/(n.anglesEnd-n.anglesStart)*(this.max-this.min)+this.min,e=Math.max(e,this.min);return e=Math.min(e,this.max)},this.highlight=function(t){"function"==typeof n.highlightStyle?n.highlightStyle(t):this.path("lw 5 b a % % % % % false a % % % % % true c f % s % lw 1",t.x,t.y,t.radiusOuter,t.angleStart,t.angleEnd,t.x,t.y,t.radiusInner,t.angleEnd,t.angleStart,n.highlightFill,n.highlightStroke)},this.getObjectByXY=function(t){t=RGraph.getMouseXY(t);return this.path("b a % % % % % false",this.centerx,this.centery,this.radius,n.anglesStart,n.anglesEnd),this.path("a % % % % % true",this.centerx,this.centery,this.radius-this.width,n.anglesEnd,n.anglesStart),this.context.isPointInPath(t[0],t[1])?this:null},this.allowAdjusting=function(){},this.adjusting_mousemove=function(t){n.adjustable&&RGraph.Registry.get("adjusting")&&RGraph.Registry.get("adjusting").uid==this.uid&&("number"==typeof(t=this.getValue(t))&&(RGraph.fireCustomEvent(this,"onadjust"),this.value=Number(t.toFixed(n.scaleDecimals)),RGraph.redrawCanvas(this.canvas)))},this.getAngle=function(t){if(t>this.max||t<this.min)return null;t=t/this.max*(n.anglesEnd-n.anglesStart);return t+=n.anglesStart},this.overChartArea=function(t){var e=RGraph.getMouseXY(t),t=e[0],e=e[1];return this.path("b a % % % % % false a % % % % % true",this.coords[0][0],this.coords[0][1],this.coords[0][2],n.anglesStart,n.anglesEnd,this.coords[0][0],this.coords[0][1],this.coords[0][2]-this.coords[0][5],n.anglesEnd,n.anglesStart),this.context.isPointInPath(t,e)},this.parseColors=function(){0===this.original_colors.length&&(this.original_colors.backgroundColor=RGraph.arrayClone(n.backgroundColor),this.original_colors.colors=RGraph.arrayClone(n.colors)),n.colors[0]=this.parseSingleColorForGradient(n.colors[0]),n.colors[1]=this.parseSingleColorForGradient(n.colors[1]),n.colorsStroke=this.parseSingleColorForGradient(n.colorsStroke),n.backgroundColor=this.parseSingleColorForGradient(n.backgroundColor)},this.reset=function(){},this.parseSingleColorForGradient=function(t){if(!t||"string"!=typeof t)return t;if(t.match(/^gradient\((.*)\)$/i)){if(t.match(/^gradient\(({.*})\)$/i))return RGraph.parseJSONGradient({object:this,def:RegExp.$1});var e=RegExp.$1.split(":"),s=this.context.createLinearGradient(n.marginLeft,0,this.canvas.width-n.marginRight,0),a=1/(e.length-1);s.addColorStop(0,RGraph.trim(e[0]));for(var i=1,l=e.length;i<l;++i)s.addColorStop(i*a,RGraph.trim(e[i]));return s||t}return s||t},this.on=function(t,e){return"function"!=typeof this[t="on"!==t.substr(0,2)?"on"+t:t]?this[t]=e:RGraph.addCustomEventListener(this,t,e),this},this.exec=function(t){return t(this),this},this.firstDrawFunc=function(){},this.grow=function(){var s=this,a=(arguments[0]||{}).frames||30,i=0,l=arguments[1]||function(){};if(RGraph.isNumber(this.value))var r=this.currentValue,n=(t=this.value-Number(this.currentValue))/a;else for(var r=[],t=[],n=[],e=0;e<this.value.length;++e)r[e]=RGraph.isNull(this.currentValue)?0:this.currentValue[e],t[e]=this.value[e]-Number(RGraph.isNull(this.currentValue)?0:this.currentValue[e]),n[e]=t[e]/a;return function t(){if(++i<=a){if(RGraph.isNumber(s.value))s.value=r+n*i;else for(var e=0;e<s.value.length;++e)s.value[e]=r[e]+n[e]*i;RGraph.clear(s.canvas),RGraph.redrawCanvas(s.canvas),RGraph.Effects.updateCanvas(t)}else l()}(),this},this.tooltipSubstitutions=function(t){return{index:t.index,dataset:0,sequentialIndex:t.index,value:this.value,values:[this.value]}},this.tooltipsFormattedCustom=function(t,e){var s=(n.tooltipsFormattedKeyColors&&n.tooltipsFormattedKeyColors[t.index]?n.tooltipsFormattedKeyColors:n.colors)[t.index];return{label:n.tooltipsFormattedKeyLabels&&n.tooltipsFormattedKeyLabels[t.index]?n.tooltipsFormattedKeyLabels[t.index]:"",color:s,value:t.values[0][t.index]}},this.positionTooltipStatic=function(t){var e=t.object,s=t.event,a=t.tooltip,i=(t.index,RGraph.getCanvasXY(e.canvas));shape=this.getShape(s),angle=(shape.angleEnd-shape.angleStart)/2+shape.angleStart;s=RGraph.getRadiusEndPoint(shape.x,shape.y,angle,(shape.radiusOuter-shape.radiusInner)/2+shape.radiusInner);t.tooltip.style.left=i[0]+s[0]-a.offsetWidth/2+e.properties.tooltipsOffsetx+"px",t.tooltip.style.top=i[1]+s[1]-a.offsetHeight+e.properties.tooltipsOffsety-10+"px"},RGraph.register(this),RGraph.parseObjectStyleConfig(this,t.options)):alert("[SEMICIRCULARPROGRESS] No canvas support")};