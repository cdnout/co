RGraph=window.RGraph||{isrgraph:!0,isRGraph:!0,rgraph:!0},RGraph.SVG=RGraph.SVG||{},window,document,RGraph.SVG.Segmented=function(t){this.set=function(t,e){if(1===arguments.length&&"object"==typeof t)for(i in arguments[0])"string"==typeof i&&(t=r.name,e=r.value,this.set(t,e));else{var r=RGraph.SVG.commonSetter({object:this,name:t,value:e});t=r.name,e=r.value,this.properties[t]=e}return this},this.get=function(t){return this.properties[t]},this.min=RGraph.SVG.stringsToNumbers(t.min),this.max=RGraph.SVG.stringsToNumbers(t.max),this.value=RGraph.SVG.stringsToNumbers(t.value),this.currentValue=null,this.id=t.id,this.uid=RGraph.SVG.createUID(),this.container=document.getElementById(this.id),this.layers={},this.svg=RGraph.SVG.createSVG({object:this,container:this.container}),this.isRGraph=!0,this.isrgraph=!0,this.rgraph=!0,this.width=Number(this.svg.getAttribute("width")),this.height=Number(this.svg.getAttribute("height")),this.type="segmented",this.colorsParsed=!1,this.originalColors={},this.gradientCounter=1,this.nodes={},this.shadowNodes=[],this.firstDraw=!0,this.value>this.max&&(this.value=this.max),this.value<this.min&&(this.value=this.min),RGraph.SVG.OR.add(this),this.container.style.display="inline-block",this.properties={radius:null,centerx:null,centery:null,width:null,marginLeft:15,marginRight:15,marginTop:15,marginBottom:15,backgroundColor:"black",colors:["red","white"],textFont:"Arial, Verdana, sans-serif",textSize:60,textColor:"gray",textBold:!1,textItalic:!1,text:null,labelsCenter:!0,labelsCenterSpecificFormattedDecimals:0,labelsCenterSpecificFormattedPoint:".",labelsCenterSpecificFormattedThousand:",",labelsCenterSpecificFormattedUnitsPre:"",labelsCenterSpecificFormattedUnitsPost:"",labelsCenterFont:null,labelsCenterSize:null,labelsCenterColor:null,labelsCenterBold:null,labelsCenterItalic:null,labelsCenterUnitsPre:null,labelsCenterUnitsPost:null,labelsCenterDecimals:null,labelsCenterPoint:null,labelsCenterThousand:null,labelsCenterSpecific:null,labelsCenterOffsetx:0,labelsCenterOffsety:0,radialsCount:36,adjustable:!1,effectRoundrobinMultiplier:1},RGraph.SVG.getGlobals(this),RGraph.SVG.FX&&"function"==typeof RGraph.SVG.FX.decorate&&RGraph.SVG.FX.decorate(this),this.responsive=RGraph.SVG.responsive,RGraph.SVG.addCreateFunction(this);var n=this.properties;for(i in this.draw=function(){var r,e;return RGraph.SVG.fireCustomEvent(this,"onbeforedraw"),this.nodes={},this.width=Number(this.svg.getAttribute("width")),this.height=Number(this.svg.getAttribute("height")),RGraph.SVG.createDefs(this),this.graphWidth=this.width-n.marginLeft-n.marginRight,this.graphHeight=this.height-n.marginTop-n.marginBottom,this.centerx=this.graphWidth/2+n.marginLeft,this.centery=this.graphHeight/2+n.marginTop,this.radius=Math.min(this.graphWidth/2,this.graphHeight/2),this.centerx=("number"==typeof n.centerx?n:this).centerx,this.centery=("number"==typeof n.centery?n:this).centery,this.radius=("number"==typeof n.radius?n:this).radius,"string"==typeof n.radius&&n.radius.match(/^\+|-\d+$/)&&(this.radius+=parseFloat(n.radius)),"string"==typeof n.centerx&&n.centerx.match(/^\+|-\d+$/)&&(this.centerx+=parseFloat(n.centerx)),"string"==typeof n.centery&&n.centery.match(/^\+|-\d+$/)&&(this.centery+=parseFloat(n.centery)),RGraph.SVG.resetColorsToOriginalValues({object:this}),this.parseColors(),this.path=this.drawMeter(),this.currentValue=this.value,this.drawLabels(),n.adjustable&&!this.adjusting_event_listeners_installed&&(this.adjusting_mousedown=!1,e=function(t){t.currentTarget;var e=t.offsetX,i=t.offsetY;RGraph.SVG.ISFF&&(e=t.pageX-t.currentTarget.offsetLeft,i=t.pageY-t.currentTarget.offsetTop),RGraph.SVG.TRIG.getHypLength({x1:e,y1:i,x2:r.centerx,y2:r.centery,object:r})>r.radius||(t=r.getValue(t),r.value=t,r.currentValue=t,RGraph.SVG.clear(r.svg),r.draw())},(r=this).container.addEventListener("mousedown",function(t){r.adjusting_mousedown=!0,e(t),RGraph.SVG.fireCustomEvent(r,"onadjustbegin")},!1),this.container.addEventListener("mousemove",function(t){r.adjusting_mousedown&&(e(t),RGraph.SVG.fireCustomEvent(r,"onadjust"))},!1),window.addEventListener("mouseup",function(t){r.adjusting_mousedown=!1,RGraph.SVG.fireCustomEvent(r,"onadjustend")},!1),this.adjusting_event_listeners_installed=!0),RGraph.SVG.addCustomText(this),this.firstDraw&&(this.firstDraw=!1,RGraph.SVG.fireCustomEvent(this,"onfirstdraw")),RGraph.SVG.fireCustomEvent(this,"ondraw"),this},this.drawMeter=function(){var t="number"==typeof n.width?n.width:this.radius/2;"string"==typeof n.width&&(t+=Number(n.width)),n.backgroundColor&&RGraph.SVG.create({svg:this.svg,type:"rect",parent:this.svg.all,attr:{fill:n.backgroundColor,x:0,y:0,width:this.width,height:this.height}});var e=360/n.radialsCount;e/=2,colored=Math.round((this.value-this.min)/(this.max-this.min)*(2*n.radialsCount));RGraph.SVG.TRIG.TWOPI,n.radialsCount;for(var i=1;i<2*n.radialsCount;i+=2){var r=RGraph.SVG.TRIG.toRadians({degrees:i*e-e/2})*n.effectRoundrobinMultiplier,s=RGraph.SVG.TRIG.toRadians({degrees:i*e+e/2})*n.effectRoundrobinMultiplier,a=RGraph.SVG.TRIG.getArcPath3({cx:this.centerx,cy:this.centery,radius:this.radius,start:r,end:s,lineto:!1}),r=RGraph.SVG.TRIG.getArcPath3({cx:this.centerx,cy:this.centery,radius:this.radius-t,start:s,end:r,anticlockwise:!0});RGraph.SVG.create({svg:this.svg,parent:this.svg.all,type:"path",attr:{d:a+" "+r+" z",fill:i>colored?n.colors[1]:n.colors[0]}})}},this.drawLabels=function(){var t,e;n.labelsCenter&&(t=RGraph.SVG.numberFormat({object:this,num:(this.value*this.properties.effectRoundrobinMultiplier).toFixed(n.labelsCenterDecimals),prepend:n.labelsCenterUnitsPre,append:n.labelsCenterUnitsPost,point:n.labelsCenterPoint,thousand:n.labelsCenterThousand,formatter:n.labelsCenterFormatter}),n.labelsCenterSpecific&&(n.labelsCenterSpecific=RGraph.SVG.labelSubstitution({object:this,text:n.labelsCenterSpecific,index:0,value:this.value,decimals:n.labelsCenterSpecificFormattedDecimals||0,unitsPre:n.labelsCenterSpecificFormattedUnitsPre||"",unitsPost:n.labelsCenterSpecificFormattedUnitsPost||"",thousand:n.labelsCenterSpecificFormattedThousand||",",point:n.labelsCenterSpecificFormattedPoint||"."})),e=RGraph.SVG.getTextConf({object:this,prefix:"labelsCenter"}),e=RGraph.SVG.text({object:this,parent:this.svg.all,tag:"labels.center",text:"string"==typeof n.labelsCenterSpecific?n.labelsCenterSpecific:t,x:this.centerx+n.labelsCenterOffsetx,y:this.centery+n.labelsCenterOffsety,valign:"center",halign:"center",font:e.font,size:e.size,bold:e.bold,italic:e.italic,color:e.color}),this.nodes.labelsCenter=e)},this.parseColors=function(){Object.keys(this.originalColors).length||(this.originalColors={colors:RGraph.SVG.arrayClone(n.colors),backgroundColor:RGraph.SVG.arrayClone(n.backgroundColor)});var t=n.colors;if(t)for(var e=0;e<t.length;++e)t[e]=RGraph.SVG.parseColorLinear({object:this,color:t[e],start:this.centerx-this.radius,end:this.centerx+this.radius,direction:"horizontal"});n.backgroundColor=RGraph.SVG.parseColorLinear({object:this,color:n.backgroundColor,start:n.marginLeft,end:this.width-n.marginRight,direction:"horizontal"})},this.on=function(t,e){return"on"!==t.substr(0,2)&&(t="on"+t),RGraph.SVG.addCustomEventListener(this,t,e),this},this.exec=function(t){return t(this),this},this.getAngle=function(t){var e,i;return i="number"==typeof t?(t-this.min)/(this.max-this.min)*RGraph.SVG.TRIG.TWOPI:(e=t.offsetX,i=t.offsetY,RGraph.SVG.TRIG.getAngleByXY({cx:this.centerx,cy:this.centery,x:e,y:i})),i-=RGraph.SVG.TRIG.HALFPI},this.getValue=function(t){t=(("number"==typeof t?t:this.getAngle(t))+RGraph.SVG.TRIG.HALFPI)/RGraph.SVG.TRIG.TWOPI*(this.max-this.min)+this.min,t=Math.max(t,this.min);return t=Math.min(t,this.max)},this.getRadius=function(t){var e=t.offsetX,t=t.offsetY;return RGraph.SVG.TRIG.getHypLength({x1:e,y1:t,x2:this.centerx,y2:this.centery})},this.grow=function(){var e=this;this.currentValue="number"==typeof this.currentValue?this.currentValue:this.min,this.value=Math.min(this.value,this.max),this.value=Math.max(this.value,this.min);var i=(arguments[0]||{}).frames||60,r=0,s=(this.value-this.currentValue)/i,a=arguments[1]||function(){},n=this.currentValue;return function t(){e.value=n+r++*s,RGraph.SVG.redraw(e.svg),r++>=i?(this.currentValue=this.value,a(e)):RGraph.SVG.FX.update(t)}(),this},this.roundrobin=this.roundRobin=function(){function e(){var t=Math.sin(s/a*RGraph.SVG.TRIG.HALFPI);i.set("effectRoundrobinMultiplier",t),RGraph.SVG.redraw(),s++>=a?(this.currentValue=this.value,r(i)):RGraph.SVG.FX.update(e)}var i=this,t=arguments[0]||{},r=arguments[1]||function(){},s=0,a=t.frames||60;this.radius;return e(),this},t.options)"string"==typeof i&&this.set(i,t.options[i]);return this};