RGraph=window.RGraph||{isrgraph:!0,isRGraph:!0,rgraph:!0},RGraph.SVG=RGraph.SVG||{},window,document,RGraph.SVG.SemiCircularProgress=function(t){this.set=function(t,e){if(1===arguments.length&&"object"==typeof t)for(i in arguments[0])"string"==typeof i&&(t=s.name,e=s.value,"backgroundColorOpacity"===(t="backgroundColor"===t?"backgroundFill":t)&&(t="backgroundFillOpacity"),this.set(t,e));else{"backgroundColorOpacity"===(t="backgroundColor"===t?"backgroundFill":t)&&(t="backgroundFillOpacity");var s=RGraph.SVG.commonSetter({object:this,name:t,value:e});t=s.name,e=s.value,this.properties[t]=e,"colors"===t&&(this.originalColors=RGraph.SVG.arrayClone(e),this.colorsParsed=!1)}return this},this.get=function(t){return this.properties[t]},this.min=RGraph.SVG.stringsToNumbers(t.min),this.max=RGraph.SVG.stringsToNumbers(t.max),this.value=RGraph.SVG.stringsToNumbers(t.value),this.id=t.id,this.uid=RGraph.SVG.createUID(),this.container=document.getElementById(this.id),this.layers={},this.svg=RGraph.SVG.createSVG({object:this,container:this.container}),this.isRGraph=!0,this.isrgraph=!0,this.rgraph=!0,this.width=Number(this.svg.getAttribute("width")),this.height=Number(this.svg.getAttribute("height")),this.data=t.data,this.type="semicircularprogress",this.colorsParsed=!1,this.originalColors={},this.gradientCounter=1,this.nodes={},this.coords=[],this.shadowNodes=[],this.firstDraw=!0,this.value>this.max&&(this.value=this.max),this.value<this.min&&(this.value=this.min),RGraph.SVG.OR.add(this),this.container.style.display="inline-block",this.properties={centerx:null,centery:null,radius:null,width:60,marginLeft:35,marginRight:35,marginTop:35,marginBottom:35,backgroundStrokeLinewidth:.25,backgroundStroke:"gray",backgroundFill:null,backgroundFillOpacity:.15,backgroundGrid:!1,backgroundGridMargin:20,backgroundGridColor:"#ddd",backgroundGridLinewidth:1,backgroundGridCircles:!0,backgroundGridRadials:!0,backgroundGridRadialsCount:10,colors:["#6d6","#FFA5A5","#A0A2F8","yellow","gray","pink","orange","cyan","green"],colorsStroke:"transparent",textColor:"black",textFont:"Arial, Verdana, sans-serif",textSize:12,textBold:!1,textItalic:!1,text:null,scale:!1,scaleMin:null,scaleMax:null,scaleDecimals:0,scalePoint:".",scaleThousand:",",scaleFormatter:null,scaleUnitsPre:"",scaleUnitsPost:"",scaleLabelsCount:10,scaleLabelsFont:null,scaleLabelsSize:null,scaleLabelsColor:null,scaleLabelsBold:null,scaleLabelsItalic:null,scaleLabelsOffsetr:0,scaleLabelsOffsetx:0,scaleLabelsOffsety:0,labelsMin:!0,labelsMinSpecific:null,labelsMinPoint:null,labelsMinThousand:null,labelsMinDecimals:null,labelsMinFormatter:null,labelsMinFont:null,labelsMinSize:null,labelsMinBold:null,labelsMinItalic:null,labelsMinColor:null,labelsMinUnitsPre:null,labelsMinUnitsPost:null,labelsMax:!0,labelsMaxSpecific:null,labelsMaxPoint:null,labelsMaxThousand:null,labelsMaxFormatter:null,labelsMaxFont:null,labelsMaxSize:null,labelsMaxBold:null,labelsMaxItalic:null,labelsMaxColor:null,labelsMaxDecimals:null,labelsMaxUnitsPre:null,labelsMaxUnitsPost:null,labelsCenter:!0,labelsCenterIndex:0,labelsCenterSpecific:null,labelsCenterPoint:null,labelsCenterThousand:null,labelsCenterFormatter:null,labelsCenterFont:null,labelsCenterSize:40,labelsCenterBold:!0,labelsCenterItalic:null,labelsCenterColor:null,labelsCenterDecimals:null,labelsCenterUnitsPre:null,labelsCenterUnitsPost:null,linewidth:1,tooltips:null,tooltipsOverride:null,tooltipsEffect:"fade",tooltipsCssClass:"RGraph_tooltip",tooltipsCss:null,tooltipsEvent:"click",tooltipsFormattedThousand:",",tooltipsFormattedPoint:".",tooltipsFormattedDecimals:0,tooltipsFormattedUnitsPre:"",tooltipsFormattedUnitsPost:"",tooltipsFormattedKeyColors:null,tooltipsFormattedKeyColorsShape:"square",tooltipsFormattedKeyLabels:[],tooltipsFormattedTableHeaders:null,tooltipsFormattedTableData:null,tooltipsPointer:!0,tooltipsPositionStatic:!0,highlightStroke:"rgba(0,0,0,0)",highlightFill:"rgba(255,255,255,0.7)",highlightLinewidth:1,title:"",titleX:null,titleY:null,titleHalign:"center",titleValign:null,titleFont:null,titleSize:null,titleColor:null,titleBold:null,titleItalic:null,titleSubtitle:null,titleSubtitleSize:null,titleSubtitleColor:"#aaa",titleSubtitleFont:null,titleSubtitleBold:null,titleSubtitleItalic:null},RGraph.SVG.getGlobals(this),RGraph.SVG.FX&&"function"==typeof RGraph.SVG.FX.decorate&&RGraph.SVG.FX.decorate(this),this.responsive=RGraph.SVG.responsive,RGraph.SVG.addCreateFunction(this);var o=this.properties;for(i in this.draw=function(){RGraph.SVG.fireCustomEvent(this,"onbeforedraw"),this.nodes={},this.width=Number(this.svg.getAttribute("width")),this.height=Number(this.svg.getAttribute("height")),RGraph.SVG.createDefs(this),this.graphWidth=this.width-o.marginLeft-o.marginRight,this.graphHeight=this.height-o.marginTop-o.marginBottom,this.centerx=this.graphWidth/2+o.marginLeft,this.centery=this.height-o.marginBottom,this.radius=Math.min(this.graphWidth/2,this.graphHeight),this.centerx=("number"==typeof o.centerx?o:this).centerx,this.centery=("number"==typeof o.centery?o:this).centery,this.radius=("number"==typeof o.radius?o:this).radius,"string"==typeof o.radius&&o.radius.match(/^\+|-\d+$/)&&(this.radius+=parseFloat(o.radius)),"string"==typeof o.centerx&&o.centerx.match(/^\+|-\d+$/)&&(this.centerx+=parseFloat(o.centerx)),"string"==typeof o.centery&&o.centery.match(/^\+|-\d+$/)&&(this.centery+=parseFloat(o.centery)),this.progressWidth=o.width||this.radius/3,RGraph.SVG.resetColorsToOriginalValues({object:this}),this.parseColors(),this.drawBackground(),this.drawMeter(),RGraph.SVG.drawTitle(this),this.drawLabels(),this.drawScale();var i=this;if(!RGraph.SVG.isNull(o.tooltips)&&(o.tooltips.length||RGraph.SVG.isString(o.tooltips)))for(var t=0;t<this.coords.length;++t)!function(e){(RGraph.SVG.isString(o.tooltips)||RGraph.SVG.isArray(o.tooltips)&&o.tooltips[e])&&(i.coords[e].element.addEventListener(o.tooltipsEvent.replace(/^on/,""),function(t){i.removeHighlight(),RGraph.SVG.tooltip({object:i,index:e,group:null,sequentialIndex:e,text:RGraph.SVG.isString(o.tooltips)?o.tooltips:o.tooltips[e],event:t}),i.highlight(t.target)},!1),i.coords[e].element.addEventListener("mousemove",function(t){t.target.style.cursor="pointer"},!1))}(t);return document.body.addEventListener("mousedown",function(t){i.removeHighlight()},!1),RGraph.SVG.addCustomText(this),this.firstDraw&&(this.firstDraw=!1,RGraph.SVG.fireCustomEvent(this,"onfirstdraw")),RGraph.SVG.fireCustomEvent(this,"ondraw"),this},this.drawBackground=function(){if(o.backgroundGrid){var t,e=o.backgroundGridMargin,i=this.radius+e,s=this.radius-o.width-e;if(o.backgroundGridCircles&&(t=this.create("arcPath3",null,{cx:this.centerx,cy:this.centery,r:i,start:-RGraph.SVG.TRIG.HALFPI,end:RGraph.SVG.TRIG.HALFPI,anticlockwise:!1,lineto:!1,moveto:!0}),e=this.create("arcPath3",null,{cx:this.centerx,cy:this.centery,r:s,start:RGraph.SVG.TRIG.HALFPI,end:-RGraph.SVG.TRIG.HALFPI,anticlockwise:!0,lineto:!0}),this.create("path",this.svg.all,{d:t+" "+e+" z",stroke:o.backgroundGridColor,fill:"transparent"})),o.backgroundGridRadials){for(var r=(RGraph.SVG.TRIG.HALFPI-(0-RGraph.SVG.TRIG.HALFPI))/o.backgroundGridRadialsCount,a=(RGraph.SVG.TRIG.HALFPI,0),l="";a<o.backgroundGridRadialsCount;++a)l+=this.create("arcPath3",null,{cx:this.centerx,cy:this.centery,r:i,start:-RGraph.SVG.TRIG.HALFPI+a*r,end:-RGraph.SVG.TRIG.HALFPI+a*r,anticlockwise:!0,lineto:!1,moveto:!0}),l+=this.create("arcPath3",null,{cx:this.centerx,cy:this.centery,r:s,start:-RGraph.SVG.TRIG.HALFPI+a*r,end:-RGraph.SVG.TRIG.HALFPI+a*r,anticlockwise:!0,lineto:!0}),l+=" ",0;this.create("path",this.svg.all,{d:l+" z",stroke:o.backgroundGridColor,fill:"transparent","stroke-width":o.backgroundGridLinewidth})}}},this.drawMeter=function(){this.coords=[];var t=this.create("arcPath",null,{cx:this.centerx,cy:this.centery,r:this.radius,start:RGraph.SVG.TRIG.PI+RGraph.SVG.TRIG.HALFPI,end:RGraph.SVG.TRIG.HALFPI,anticlockwise:!1}),e=this.create("arcPath",null,{cx:this.centerx,cy:this.centery,r:this.radius-this.progressWidth,end:RGraph.SVG.TRIG.PI+RGraph.SVG.TRIG.HALFPI,start:RGraph.SVG.TRIG.HALFPI,anticlockwise:!0,moveto:!1}),i=this.create("path",this.svg.all,{d:t+" L "+(this.centerx+this.radius-this.progressWidth)+" "+this.centery+e+" L "+(this.centerx-this.radius)+" "+this.centery,fill:o.backgroundFill||o.colors[0],"stroke-width":0,"fill-opacity":o.backgroundFillOpacity});if(this.nodes.background=i,"number"==typeof this.value){var s=(this.value-this.min)/(this.max-this.min)*RGraph.SVG.TRIG.PI;s-=RGraph.SVG.TRIG.HALFPI,this.angle=s;var t=RGraph.SVG.TRIG.getArcPath({cx:this.centerx,cy:this.centery,r:this.radius,start:RGraph.SVG.TRIG.PI+RGraph.SVG.TRIG.HALFPI,end:s,anticlockwise:!1}),e=RGraph.SVG.TRIG.getArcPath({cx:this.centerx,cy:this.centery,r:this.radius-this.progressWidth,start:s,end:s,anticlockwise:!1,array:!0}),i=RGraph.SVG.TRIG.getArcPath({cx:this.centerx,cy:this.centery,r:this.radius-this.progressWidth,start:s,end:RGraph.SVG.TRIG.PI+RGraph.SVG.TRIG.HALFPI,anticlockwise:!0,moveto:!1}),r=RGraph.SVG.create({svg:this.svg,type:"g",parent:this.svg.all,attr:{id:"indicator-bar-group"}}),t=this.create("path",r,{d:t+" L{1} {2} ".format(e[1],e[2])+i+" z",fill:o.colors[0],stroke:o.colorsStroke,"stroke-width":o.linewidth});this.nodes.barGroup=r,this.nodes.bar=t,this.coords.push({cx:this.centerx,cy:this.centery,radiusOuter:this.radius,radiusInner:this.radius-this.progressWidth,start:-RGraph.SVG.TRIG.HALFPI,end:s,element:t})}else if(RGraph.SVG.isArray(this.value))for(var r=this.create("g",this.svg.all,{id:"indicator-bar-group"}),a=0,l=-RGraph.SVG.TRIG.HALFPI;a<this.value.length;++a){var s=(this.value[a]-this.min)/(this.max-this.min)*RGraph.SVG.TRIG.PI,n=this.create("arcPath",null,{cx:this.centerx,cy:this.centery,r:this.radius,start:l,end:l+s,anticlockwise:!1,lineto:!1,moveto:!0}),e=this.create("arcPath3",null,{cx:this.centerx,cy:this.centery,r:this.radius-this.progressWidth,start:l+s,end:l,anticlockwise:!0}),n=this.create("path",r,{d:"{1} {2} z".format(n,e),stroke:o.colorsStroke,"stroke-width":o.linewidth,fill:o.colors[a]});this.coords.push({cx:this.centerx,cy:this.centery,radiusOuter:this.radius,radiusInner:this.radius-this.progressWidth,start:l,end:l+s,element:n}),l+=s}},this.drawLabels=function(){var t,e,i;o.labelsMin&&(i=RGraph.SVG.numberFormat({object:this,num:this.min.toFixed(o.labelsMinDecimals),prepend:o.labelsMinUnitsPre,append:o.labelsMinUnitsPost,point:o.labelsMinPoint,thousand:o.labelsMinThousand,formatter:o.labelsMinFormatter}),e=RGraph.SVG.getTextConf({object:this,prefix:"labelsMin"}),i=RGraph.SVG.text({object:this,parent:this.svg.all,tag:"labels.min",text:"string"==typeof o.labelsMinSpecific?o.labelsMinSpecific:i,x:this.centerx-this.radius+this.progressWidth/2,y:this.centery+5+o.backgroundStrokeLinewidth,valign:"top",halign:"center",font:e.font,size:e.size,bold:e.bold,italic:e.italic,color:e.color}),this.nodes.labelsMin=i),o.labelsMax&&(t=RGraph.SVG.numberFormat({object:this,num:this.max.toFixed(o.labelsMaxDecimals),prepend:o.labelsMaxUnitsPre,append:o.labelsMaxUnitsPost,point:o.labelsMaxPoint,thousand:o.labelsMaxThousand,formatter:o.labelsMaxFormatter}),e=RGraph.SVG.getTextConf({object:this,prefix:"labelsMax"}),i=RGraph.SVG.text({object:this,parent:this.svg.all,tag:"labels.max",text:"string"==typeof o.labelsMaxSpecific?o.labelsMaxSpecific:t,x:this.centerx+this.radius-this.progressWidth/2,y:this.centery+5+o.backgroundStrokeLinewidth,valign:"top",halign:"center",font:e.font,size:e.size,bold:e.bold,italic:e.italic,color:e.color}),this.nodes.labelsMax=i),o.labelsCenter&&(t=RGraph.SVG.numberFormat({object:this,num:("number"==typeof this.value?this.value:this.value[o.labelsCenterIndex]).toFixed(o.labelsCenterDecimals),prepend:o.labelsCenterUnitsPre,append:o.labelsCenterUnitsPost,point:o.labelsCenterPoint,thousand:o.labelsCenterThousand,formatter:o.labelsCenterFormatter}),e=RGraph.SVG.getTextConf({object:this,prefix:"labelsCenter"}),i=RGraph.SVG.text({object:this,parent:this.svg.all,tag:"labels.center",text:"string"==typeof o.labelsCenterSpecific?o.labelsCenterSpecific:t,x:this.centerx,y:this.centery,valign:"bottom",halign:"center",font:e.font,size:e.size,bold:e.bold,italic:e.italic,color:e.color}),this.nodes.labelsCenter=i)},this.drawScale=function(){if(o.scale){this.scale=RGraph.SVG.getScale({object:this,numlabels:o.scaleLabelsCount,unitsPre:o.scaleUnitsPre,unitsPost:o.scaleUnitsPost,max:"number"==typeof o.scaleMax?o.scaleMax:this.max,min:"number"==typeof o.scaleMin?o.scaleMin:this.min,point:o.scalePoint,round:!1,thousand:o.scaleThousand,decimals:o.scaleDecimals,strict:!0,formatter:o.scaleFormatter});for(var t=RGraph.SVG.getTextConf({object:this,prefix:"scaleLabels"}),e=0;e<this.scale.labels.length;++e){var i=RGraph.SVG.TRIG.getRadiusEndPoint({angle:-RGraph.SVG.TRIG.PI+(e+1)/this.scale.labels.length*(RGraph.SVG.TRIG.HALFPI- -RGraph.SVG.TRIG.HALFPI),r:this.radius+(o.backgroundGrid?o.backgroundGridMargin:0)+t.size+o.scaleLabelsOffsetr+5});RGraph.SVG.text({object:this,parent:this.svg.all,tag:"scale",font:t.font,size:t.size,color:t.color,bold:t.bold,italic:t.italic,x:i[0]+this.centerx+(o.scaleLabelsOffsetx||0),y:i[1]+this.centery+(o.scaleLabelsOffsety||0),valign:"center",halign:(e+1)/this.scale.labels.length==.5?"center":e+1>this.scale.labels.length/2?"left":"right",text:this.scale.labels[e]})}i=RGraph.SVG.TRIG.getRadiusEndPoint({angle:-RGraph.SVG.TRIG.PI,r:this.radius+(o.backgroundGrid?o.backgroundGridMargin:0)+t.size+o.scaleLabelsOffsetr+5});RGraph.SVG.text({object:this,parent:this.svg.all,tag:"scale",font:t.font,size:t.size,color:t.color,bold:t.bold,italic:t.italic,x:i[0]+this.centerx+(o.scaleLabelsOffsetx||0),y:i[1]+this.centery+(o.scaleLabelsOffsety||0),valign:"center",halign:"right",text:"function"==typeof o.scaleFormatter?o.scaleFormatter(this,this.min):o.scaleUnitsPre+("number"==typeof o.scaleMin?o.scaleMin:this.min).toFixed(o.scaleDecimals).replace(/\./,o.scalePoint)+o.scaleUnitsPost})}},this.highlight=function(t){this.removeHighlight();t=RGraph.SVG.create({svg:this.svg,type:"path",parent:this.nodes.barGroup,attr:{d:t.getAttribute("d"),fill:o.highlightFill,stroke:o.highlightStroke,"stroke-width":o.highlightLinewidth},style:{pointerEvents:"none"}});RGraph.SVG.REG.set("highlight",t);var e=this;document.body.addEventListener("mousedown",function(t){e.removeHighlight()},!1)},this.removeHighlight=function(){var t=RGraph.SVG.REG.get("highlight");t&&t.parentNode.removeChild(t)},this.parseColors=function(){Object.keys(this.originalColors).length||(this.originalColors={colors:RGraph.SVG.arrayClone(o.colors),highlightFill:RGraph.SVG.arrayClone(o.highlightFill),backgroundFill:RGraph.SVG.arrayClone(o.backgroundFill)});var t=o.colors;if(t)for(var e=0;e<t.length;++e)t[e]=RGraph.SVG.parseColorLinear({object:this,color:t[e],start:this.centerx-this.radius,end:this.centerx+this.radius,direction:"horizontal"});o.highlightFill=RGraph.SVG.parseColorLinear({object:this,color:o.highlightFill,start:o.marginLeft,end:this.width-o.marginRight,direction:"horizontal"}),o.backgroundFill=RGraph.SVG.parseColorLinear({object:this,color:o.backgroundFill,start:o.marginLeft,end:this.width-o.marginRight,direction:"horizontal"})},this.grow=function(){var i=arguments[0]||{},s=i.frames||30,r=0,a=this,l=RGraph.SVG.arrayClone(this.value);this.draw();var n=function(){var t=r/s;if("object"==typeof a.value)for(var e=0;e<a.value.length;++e)a.value[e]=l[e]*t;else a.value=l*t;RGraph.SVG.redraw(),r++<s?RGraph.SVG.FX.update(n):i.callback&&(a.value=l,RGraph.SVG.redraw(),i.callback(a))};return n(),this},this.on=function(t,e){return"on"!==t.substr(0,2)&&(t="on"+t),RGraph.SVG.addCustomEventListener(this,t,e),this},this.exec=function(t){return t(this),this},this.removeHighlight=function(){var t=RGraph.SVG.REG.get("highlight");t&&t.parentNode&&t.parentNode.removeChild(t),RGraph.SVG.REG.set("highlight",null)},this.tooltipSubstitutions=function(t){var e=RGraph.SVG.isArray(this.value)?this.value[t.index]:this.value,i=RGraph.SVG.isArray(this.value)?this.value:[this.value];return{index:t.index,dataset:0,sequentialIndex:t.index,value:e,values:i}},this.tooltipsFormattedCustom=function(t,e,i){i=i[e];return{label:"object"==typeof o.tooltipsFormattedKeyLabels&&"string"==typeof o.tooltipsFormattedKeyLabels[0]?o.tooltipsFormattedKeyLabels[e]:"",color:i}},this.positionTooltipStatic=function(t){var e=t.object,i=(t.event,t.tooltip),s=t.index,e=RGraph.SVG.getSVGXY(e.svg),s=RGraph.SVG.TRIG.toCartesian({cx:this.centerx,cy:this.centery,angle:this.coords[s].start-RGraph.SVG.TRIG.HALFPI+(this.coords[s].end-this.coords[s].start)/2,r:this.radius-this.progressWidth/2});t.tooltip.style.left=e[0]+s.x-i.offsetWidth/2+"px",t.tooltip.style.top=e[1]+s.y-i.offsetHeight-10+"px"},t.options)"string"==typeof i&&this.set(i,t.options[i]);return this};