RGraph=window.RGraph||{isrgraph:!0,isRGraph:!0,rgraph:!0},RGraph.SVG=RGraph.SVG||{},window,document,RGraph.SVG.Bar=function(t){this.set=function(t,e){if(1===arguments.length&&"object"==typeof t)for(i in arguments[0])"string"==typeof i&&(t=a.name,e=a.value,this.set(t,e));else{var a=RGraph.SVG.commonSetter({object:this,name:t,value:e});t=a.name,e=a.value,this.properties[t]=e,"colors"===t&&(this.originalColors=RGraph.SVG.arrayClone(e),this.colorsParsed=!1)}return this},this.get=function(t){return this.properties[t]},this.id=t.id,this.uid=RGraph.SVG.createUID(),this.container=document.getElementById(this.id),this.layers={},this.svg=RGraph.SVG.createSVG({object:this,container:this.container}),this.isRGraph=!0,this.isrgraph=!0,this.rgraph=!0,this.data=t.data,this.type="bar",this.coords=[],this.coords2=[],this.stackedBackfaces=[],this.originalColors={},this.gradientCounter=1,this.firstDraw=!0,this.data=RGraph.SVG.stringsToNumbers(this.data),RGraph.SVG.OR.add(this),this.container.style.display="inline-block",this.properties={marginLeft:35,marginRight:35,marginTop:35,marginBottom:35,variant:null,variant3dOffsetx:10,variant3dOffsety:5,backgroundColor:null,backgroundImage:null,backgroundImageAspect:"none",backgroundImageStretch:!0,backgroundImageOpacity:null,backgroundImageX:null,backgroundImageY:null,backgroundImageW:null,backgroundImageH:null,backgroundGrid:!0,backgroundGridColor:"#ddd",backgroundGridLinewidth:1,backgroundGridHlines:!0,backgroundGridHlinesCount:null,backgroundGridVlines:!0,backgroundGridVlinesCount:null,backgroundGridBorder:!0,backgroundGridDashed:!1,backgroundGridDotted:!1,backgroundGridDashArray:null,colors:["red","#0f0","#00f","#ff0","#0ff","#0f0","pink","orange","gray","black","red","#0f0","#00f","#ff0","#0ff","#0f0","pink","orange","gray","black"],colorsSequential:!1,colorsStroke:"rgba(0,0,0,0)",errorbars:null,marginInner:3,marginInnerGrouped:2,marginInnerLeft:0,marginInnerRight:0,yaxis:!0,yaxisTickmarks:!0,yaxisTickmarksLength:3,yaxisColor:"black",yaxisScale:!0,yaxisLabels:null,yaxisLabelsFont:null,yaxisLabelsSize:null,yaxisLabelsColor:null,yaxisLabelsBold:null,yaxisLabelsItalic:null,yaxisLabelsOffsetx:0,yaxisLabelsOffsety:0,yaxisLabelsCount:5,yaxisScaleUnitsPre:"",yaxisScaleUnitsPost:"",yaxisScaleStrict:!1,yaxisScaleDecimals:0,yaxisScalePoint:".",yaxisScaleThousand:",",yaxisScaleRound:!1,yaxisScaleMax:null,yaxisScaleMin:0,yaxisScaleFormatter:null,yaxisTitle:"",yaxisTitleBold:null,yaxisTitleSize:null,yaxisTitleFont:null,yaxisTitleColor:null,yaxisTitleItalic:null,yaxisTitleOffsetx:0,yaxisTitleOffsety:0,yaxisTitleX:null,yaxisTitleY:null,yaxisTitleHalign:null,yaxisTitleValign:null,xaxis:!0,xaxisTickmarks:!0,xaxisTickmarksLength:5,xaxisLabels:null,xaxisLabelsFont:null,xaxisLabelsSize:null,xaxisLabelsColor:null,xaxisLabelsBold:null,xaxisLabelsItalic:null,xaxisLabelsPosition:"section",xaxisLabelsPositionSectionTickmarksCount:null,xaxisLabelsOffsetx:0,xaxisLabelsOffsety:0,xaxisLabelsFormattedDecimals:0,xaxisLabelsFormattedPoint:".",xaxisLabelsFormattedThousand:",",xaxisLabelsFormattedUnitsPre:"",xaxisLabelsFormattedUnitsPost:"",xaxisColor:"black",xaxisTitle:"",xaxisTitleBold:null,xaxisTitleSize:null,xaxisTitleFont:null,xaxisTitleColor:null,xaxisTitleItalic:null,xaxisTitleOffsetx:0,xaxisTitleOffsety:0,xaxisTitleX:null,xaxisTitleY:null,xaxisTitleHalign:null,xaxisTitleValign:null,labelsAbove:!1,labelsAboveFont:null,labelsAboveSize:null,labelsAboveBold:null,labelsAboveItalic:null,labelsAboveColor:null,labelsAboveBackground:null,labelsAboveBackgroundPadding:0,labelsAboveUnitsPre:null,labelsAboveUnitsPost:null,labelsAbovePoint:null,labelsAboveThousand:null,labelsAboveFormatter:null,labelsAboveDecimals:null,labelsAboveOffsetx:0,labelsAboveOffsety:0,labelsAboveHalign:"center",labelsAboveValign:"bottom",labelsAboveSpecific:null,textColor:"black",textFont:"Arial, Verdana, sans-serif",textSize:12,textBold:!1,textItalic:!1,text:null,linewidth:1,grouping:"grouped",tooltips:null,tooltipsOverride:null,tooltipsEffect:"fade",tooltipsCssClass:"RGraph_tooltip",tooltipsCss:null,tooltipsEvent:"click",tooltipsFormattedThousand:",",tooltipsFormattedPoint:".",tooltipsFormattedDecimals:0,tooltipsFormattedUnitsPre:"",tooltipsFormattedUnitsPost:"",tooltipsFormattedKeyColors:null,tooltipsFormattedKeyColorsShape:"square",tooltipsFormattedKeyLabels:[],tooltipsFormattedTableHeaders:null,tooltipsFormattedTableData:null,tooltipsPointer:!0,tooltipsPositionStatic:!0,highlightStroke:"rgba(0,0,0,0)",highlightFill:"rgba(255,255,255,0.7)",highlightLinewidth:1,title:"",titleX:null,titleY:null,titleHalign:"center",titleSize:null,titleColor:null,titleFont:null,titleBold:null,titleItalic:null,titleSubtitle:null,titleSubtitleSize:null,titleSubtitleColor:"#aaa",titleSubtitleFont:null,titleSubtitleBold:null,titleSubtitleItalic:null,shadow:!1,shadowOffsetx:2,shadowOffsety:2,shadowBlur:2,shadowOpacity:.25,errorbarsColor:"black",errorbarsLinewidth:1,errorbarsCapwidth:10,key:null,keyColors:null,keyOffsetx:0,keyOffsety:0,keyLabelsOffsetx:0,keyLabelsOffsety:-1,keyLabelsColor:null,keyLabelsSize:null,keyLabelsBold:null,keyLabelsItalic:null,keyLabelsFont:null},RGraph.SVG.getGlobals(this),RGraph.SVG.FX&&"function"==typeof RGraph.SVG.FX.decorate&&RGraph.SVG.FX.decorate(this),this.responsive=RGraph.SVG.responsive,RGraph.SVG.addCreateFunction(this);var m=this.properties;for(i in this.draw=function(){if(RGraph.SVG.fireCustomEvent(this,"onbeforedraw"),this.width=Number(this.svg.getAttribute("width")),this.height=Number(this.svg.getAttribute("height")),"3d"!==m.variant?(m.variant3dOffsetx=0,m.variant3dOffsety=0):this.svg.all.setAttribute("transform","skewY(5)"),RGraph.SVG.createDefs(this),this.coords=[],this.coords2=[],this.graphWidth=this.width-m.marginLeft-m.marginRight,this.graphHeight=this.height-m.marginTop-m.marginBottom,this.data_seq=RGraph.SVG.arrayLinearize(this.data),m.errorbars)for(var t=0;t<this.data_seq.length;++t)void 0===m.errorbars[t]||RGraph.SVG.isNull(m.errorbars[t])?m.errorbars[t]={max:null,min:null}:"number"==typeof m.errorbars[t]?m.errorbars[t]={min:m.errorbars[t],max:m.errorbars[t]}:"object"==typeof m.errorbars[t]&&void 0===m.errorbars[t].max?m.errorbars[t].max=null:"object"==typeof m.errorbars[t]&&void 0===m.errorbars[t].min&&(m.errorbars[t].min=null);RGraph.SVG.resetColorsToOriginalValues({object:this}),this.parseColors();for(var e,a=[],t=0,i=0;t<this.data.length;++t)e=m.errorbars&&"number"==typeof m.errorbars[t]?m.errorbars[t]:m.errorbars&&"object"==typeof m.errorbars[t]&&"number"==typeof m.errorbars[t].max?m.errorbars[t].max:0,"number"==typeof this.data[t]?a.push(this.data[t]+e):RGraph.SVG.isArray(this.data[t])&&"grouped"===m.grouping?a.push(RGraph.SVG.arrayMax(this.data[t])+e):RGraph.SVG.isArray(this.data[t])&&"stacked"===m.grouping&&a.push(RGraph.SVG.arraySum(this.data[t])+e);var r,i=RGraph.SVG.arrayMax(a);if("number"==typeof m.yaxisScaleMax&&(i=m.yaxisScaleMax),"mirror"!==m.yaxisScaleMin&&"middle"!==m.yaxisScaleMin&&"center"!==m.yaxisScaleMin||(r=this.mirrorScale=!0,m.yaxisScaleMin=0),this.scale=RGraph.SVG.getScale({object:this,numlabels:m.yaxisLabelsCount,unitsPre:m.yaxisScaleUnitsPre,unitsPost:m.yaxisScaleUnitsPost,max:i,min:m.yaxisScaleMin,point:m.yaxisScalePoint,round:m.yaxisScaleRound,thousand:m.yaxisScaleThousand,decimals:m.yaxisScaleDecimals,strict:"number"==typeof m.yaxisScaleMax,formatter:m.yaxisScaleFormatter}),r&&(this.scale=RGraph.SVG.getScale({object:this,numlabels:m.yaxisLabelsCount,unitsPre:m.yaxisScaleUnitsPre,unitsPost:m.yaxisScaleUnitsPost,max:this.scale.max,min:-1*this.scale.max,point:m.yaxisScalePoint,round:!1,thousand:m.yaxisScaleThousand,decimals:m.yaxisScaleDecimals,strict:"number"==typeof m.yaxisScaleMax,formatter:m.yaxisScaleFormatter})),this.max=this.scale.max,this.min=this.scale.min,RGraph.SVG.drawBackground(this),"3d"===m.variant&&(RGraph.SVG.create({svg:this.svg,parent:this.svg.all,type:"path",attr:{d:"M {1} {2} L {3} {4} L {5} {6} L {7} {8}".format(m.marginLeft,m.marginTop,m.marginLeft+m.variant3dOffsetx,m.marginTop-m.variant3dOffsety,m.marginLeft+m.variant3dOffsetx,this.height-m.marginBottom-m.variant3dOffsety,m.marginLeft,this.height-m.marginBottom,m.marginLeft,m.marginTop),fill:"#ddd",stroke:"#ccc"}}),this.threed_xaxis_group=RGraph.SVG.create({svg:this.svg,type:"g",parent:this.svg.all,attr:{className:"rgraph_3d_bar_xaxis_negative"}}),RGraph.SVG.create({svg:this.svg,parent:this.svg.all,type:"path",attr:{d:"M {1} {2} L {3} {4} L {5} {6} L {7} {8}".format(m.marginLeft,this.getYCoord(0),m.marginLeft+m.variant3dOffsetx,this.getYCoord(0)-m.variant3dOffsety,this.width-m.marginRight+m.variant3dOffsetx,this.getYCoord(0)-m.variant3dOffsety,this.width-m.marginRight,this.getYCoord(0),m.marginLeft,this.getYCoord(0)),fill:"#ddd",stroke:"#ccc"}})),this.drawBars(),m.xaxisLabels&&m.xaxisLabels.length){"string"==typeof m.xaxisLabels&&(m.xaxisLabels=RGraph.SVG.arrayPad({array:[],length:this.data.length,value:m.xaxisLabels}));for(t=0;t<m.xaxisLabels.length;++t)m.xaxisLabels[t]=RGraph.SVG.labelSubstitution({object:this,text:m.xaxisLabels[t],index:t,value:this.data[t],decimals:m.xaxisLabelsFormattedDecimals||0,unitsPre:m.xaxisLabelsFormattedUnitsPre||"",unitsPost:m.xaxisLabelsFormattedUnitsPost||"",thousand:m.xaxisLabelsFormattedThousand||",",point:m.xaxisLabelsFormattedPoint||"."})}return RGraph.SVG.drawXAxis(this),RGraph.SVG.drawYAxis(this),this.drawLabelsAbove(),null!==typeof m.key&&RGraph.SVG.drawKey?RGraph.SVG.drawKey(this):RGraph.SVG.isNull(m.key)||alert("The drawKey() function does not exist - have you forgotten to include the key library?"),RGraph.SVG.addCustomText(this),this.firstDraw&&(this.firstDraw=!1,RGraph.SVG.fireCustomEvent(this,"onfirstdraw")),RGraph.SVG.fireCustomEvent(this,"ondraw"),this},this.drawBars=function(){var t=this.getYCoord(0);m.shadow&&RGraph.SVG.setShadow({object:this,offsetx:m.shadowOffsetx,offsety:m.shadowOffsety,blur:m.shadowBlur,opacity:m.shadowOpacity,id:"dropShadow"});for(var e=0,a=0;e<this.data.length;++e,++a)if("number"==typeof this.data[e]){var i=(this.graphWidth-m.marginInnerLeft-m.marginInnerRight)/this.data.length,r=(Math.abs(this.data[e])-Math.abs(this.scale.min))/(Math.abs(this.scale.max)-Math.abs(this.scale.min))*this.graphHeight,s=(this.graphWidth-m.marginInnerLeft-m.marginInnerRight)/this.data.length-m.marginInner-m.marginInner,o=m.marginLeft+m.marginInner+m.marginInnerLeft+i*e;0<=this.scale.min&&0<this.scale.max?t=this.getYCoord(this.scale.min)-r:this.scale.min<0&&0<this.scale.max?(r=Math.abs(this.data[e])/(this.scale.max-this.scale.min)*this.graphHeight,t=this.getYCoord(0)-r,this.data[e]<0&&(t=this.getYCoord(0))):this.scale.min<0&&this.scale.max<0&&(r=(Math.abs(this.data[e])-Math.abs(this.scale.max))/(Math.abs(this.scale.min)-Math.abs(this.scale.max))*this.graphHeight,t=m.marginTop);var l=RGraph.SVG.create({svg:this.svg,type:"rect",parent:"3d"===m.variant&&this.data[e]<0?this.threed_xaxis_group:this.svg.all,attr:{stroke:m.colorsStroke,fill:m.colorsSequential?m.colors[a]||m.colors[m.colors.length-1]:m.colors[0],x:o,y:t,width:s<0?0:s,height:r,"stroke-width":m.linewidth,"data-original-x":o,"data-original-y":t,"data-original-width":s,"data-original-height":r,"data-tooltip":!RGraph.SVG.isNull(m.tooltips)&&m.tooltips.length?m.tooltips[e]:"","data-index":e,"data-sequential-index":a,"data-value":this.data[e],filter:m.shadow?"url(#dropShadow)":""}});this.drawErrorbar({object:this,element:l,index:e,value:this.data[e],type:"normal"}),this.coords.push({object:this,element:l,x:parseFloat(l.getAttribute("x")),y:parseFloat(l.getAttribute("y")),width:parseFloat(l.getAttribute("width")),height:parseFloat(l.getAttribute("height"))}),this.coords2[0]||(this.coords2[0]=[]),this.coords2[0].push({object:this,element:l,x:parseFloat(l.getAttribute("x")),y:parseFloat(l.getAttribute("y")),width:parseFloat(l.getAttribute("width")),height:parseFloat(l.getAttribute("height"))}),"3d"===m.variant&&(this.drawTop3dFace({rect:l,value:this.data[e]}),this.drawSide3dFace({rect:l,value:this.data[e]})),RGraph.SVG.isNull(m.tooltips)||RGraph.SVG.isNull(m.tooltips[a])&&"string"!=typeof m.tooltips||(p=this,function(e,a){l.addEventListener(m.tooltipsEvent.replace(/^on/,""),function(t){p.removeHighlight(),RGraph.SVG.tooltip({object:p,index:e,group:null,sequentialIndex:a,text:"string"==typeof m.tooltips?m.tooltips:m.tooltips[a],event:t}),p.highlight(t.target)},!1),l.addEventListener("mousemove",function(t){t.target.style.cursor="pointer"},!1)}(e,a))}else if(RGraph.SVG.isArray(this.data[e])&&"grouped"===m.grouping){for(var n=(i=(this.graphWidth-m.marginInnerLeft-m.marginInnerRight)/this.data.length)-2*m.marginInner,h=0;h<this.data[e].length;++h,++a){s=(n-(this.data[e].length-1)*m.marginInnerGrouped)/this.data[e].length,o=i*e+m.marginInner+m.marginLeft+m.marginInnerLeft+h*s+(h-1)*m.marginInnerGrouped;o=m.marginLeft+m.marginInnerLeft+i*e+s*h+m.marginInner+h*m.marginInnerGrouped,0===this.scale.min&&this.scale.max>this.scale.min?(r=(this.data[e][h]-this.scale.min)/(this.scale.max-this.scale.min)*this.graphHeight,t=this.getYCoord(0)-r):this.scale.max<=0&&this.scale.min<this.scale.max?(r=(this.data[e][h]-this.scale.max)/(this.scale.max-this.scale.min)*this.graphHeight,t=this.getYCoord(this.scale.max),r=Math.abs(r)):0<this.scale.max&&this.scale.min<0?(r=Math.abs(this.data[e][h])/(this.scale.max-this.scale.min)*this.graphHeight,t=this.data[e][h]<0?this.getYCoord(0):this.getYCoord(this.data[e][h])):0<this.scale.min&&this.scale.max>this.scale.min&&(r=Math.abs(this.data[e][h]-this.scale.min)/(this.scale.max-this.scale.min)*this.graphHeight,t=this.getYCoord(this.scale.min)-r);l=RGraph.SVG.create({svg:this.svg,parent:"3d"===m.variant&&this.data[e][h]<0?this.threed_xaxis_group:this.svg.all,type:"rect",attr:{stroke:m.colorsStroke,fill:m.colorsSequential&&m.colors[a]?m.colors[a]:m.colors[h],x:o,y:t,width:s,height:r,"stroke-width":m.linewidth,"data-original-x":o,"data-original-y":t,"data-original-width":s,"data-original-height":r,"data-index":e,"data-subindex":h,"data-sequential-index":a,"data-tooltip":!RGraph.SVG.isNull(m.tooltips)&&m.tooltips.length?m.tooltips[a]:"","data-value":this.data[e][h],filter:m.shadow?"url(#dropShadow)":""}});this.drawErrorbar({object:this,element:l,index:a,value:this.data[e][h],type:"grouped"}),this.coords.push({object:this,element:l,x:parseFloat(l.getAttribute("x")),y:parseFloat(l.getAttribute("y")),width:parseFloat(l.getAttribute("width")),height:parseFloat(l.getAttribute("height"))}),this.coords2[e]||(this.coords2[e]=[]),this.coords2[e].push({object:this,element:l,x:parseFloat(l.getAttribute("x")),y:parseFloat(l.getAttribute("y")),width:parseFloat(l.getAttribute("width")),height:parseFloat(l.getAttribute("height"))}),"3d"===m.variant&&(this.drawTop3dFace({rect:l,value:this.data[e][h]}),this.drawSide3dFace({rect:l,value:this.data[e][h]})),RGraph.SVG.isNull(m.tooltips)||!m.tooltips[a]&&"string"!=typeof m.tooltips||(p=this,function(e,a){p.removeHighlight();var i=RGraph.SVG.sequentialIndexToGrouped(a,p.data);l.addEventListener(m.tooltipsEvent.replace(/^on/,""),function(t){RGraph.SVG.tooltip({object:p,group:e,index:i[1],sequentialIndex:a,text:"string"==typeof m.tooltips?m.tooltips:m.tooltips[a],event:t}),p.highlight(t.target)},!1),l.addEventListener("mousemove",function(t){t.target.style.cursor="pointer"},!1)}(e,a))}--a}else if(RGraph.SVG.isArray(this.data[e])&&"stacked"===m.grouping){for(var d=(this.graphWidth-m.marginInnerLeft-m.marginInnerRight)/this.data.length,t=this.getYCoord(0),h=0;h<this.data[e].length;++h,++a){var g,r=this.data[e][h]/(this.max-this.min)*this.graphHeight,s=d-2*m.marginInner,o=m.marginLeft+m.marginInnerLeft+e*d+m.marginInner,t=t-r;0===h&&m.shadow&&(g=RGraph.SVG.arraySum(this.data[e])/(this.max-this.min)*this.graphHeight,l=RGraph.SVG.create({svg:this.svg,parent:this.svg.all,type:"rect",attr:{fill:"white",x:o,y:this.height-m.marginBottom-g,width:s,height:g,"stroke-width":0,"data-index":e,filter:"url(#dropShadow)"}}),this.stackedBackfaces[e]=l);var p,l=RGraph.SVG.create({svg:this.svg,parent:this.svg.all,type:"rect",attr:{stroke:m.colorsStroke,fill:m.colorsSequential?m.colors[a]||m.colors[m.colors.length-1]:m.colors[h],x:o,y:t,width:s,height:r,"stroke-width":m.linewidth,"data-original-x":o,"data-original-y":t,"data-original-width":s,"data-original-height":r,"data-index":e,"data-subindex":h,"data-sequential-index":a,"data-tooltip":!RGraph.SVG.isNull(m.tooltips)&&m.tooltips.length?m.tooltips[a]:"","data-value":this.data[e][h]}});h===this.data[e].length-1&&this.drawErrorbar({object:this,element:l,index:e,value:this.data[e][h],type:"stacked"}),this.coords.push({object:this,element:l,x:parseFloat(l.getAttribute("x")),y:parseFloat(l.getAttribute("y")),width:parseFloat(l.getAttribute("width")),height:parseFloat(l.getAttribute("height"))}),this.coords2[e]||(this.coords2[e]=[]),this.coords2[e].push({object:this,element:l,x:parseFloat(l.getAttribute("x")),y:parseFloat(l.getAttribute("y")),width:parseFloat(l.getAttribute("width")),height:parseFloat(l.getAttribute("height"))}),"3d"===m.variant&&(this.drawTop3dFace({rect:l,value:this.data[e][h]}),this.drawSide3dFace({rect:l,value:this.data[e][h]})),RGraph.SVG.isNull(m.tooltips)||!m.tooltips[a]&&"string"!=typeof m.tooltips||(p=this,function(a,i){l.addEventListener(m.tooltipsEvent.replace(/^on/,""),function(t){p.removeHighlight();var e=RGraph.SVG.sequentialIndexToGrouped(i,p.data);RGraph.SVG.tooltip({object:p,index:e[1],group:a,sequentialIndex:i,text:"string"==typeof m.tooltips?m.tooltips:m.tooltips[i],event:t}),p.highlight(t.target)},!1),l.addEventListener("mousemove",function(t){t.target.style.cursor="pointer"},!1)}(e,a))}--a}},this.getYCoord=function(t){if(t>this.scale.max)return null;m.xaxispos;return t<this.scale.min?null:(t=(t-this.scale.min)/(this.scale.max-this.scale.min),t*=this.height-m.marginTop-m.marginBottom,t=this.height-m.marginBottom-t)},this.highlight=function(t){var e=parseFloat(t.getAttribute("x"))-.5,a=parseFloat(t.getAttribute("y"))-.5,i=parseFloat(t.getAttribute("width"))+1,t=parseFloat(t.getAttribute("height"))+1,t=RGraph.SVG.create({svg:this.svg,parent:this.svg.all,type:"rect",attr:{stroke:m.highlightStroke,fill:m.highlightFill,x:e,y:a,width:i,height:t,"stroke-width":m.highlightLinewidth},style:{pointerEvents:"none"}});m.tooltipsEvent,RGraph.SVG.REG.set("highlight",t)},this.parseColors=function(){Object.keys(this.originalColors).length||(this.originalColors={colors:RGraph.SVG.arrayClone(m.colors),backgroundGridColor:RGraph.SVG.arrayClone(m.backgroundGridColor),highlightFill:RGraph.SVG.arrayClone(m.highlightFill),backgroundColor:RGraph.SVG.arrayClone(m.backgroundColor)});var t=m.colors;if(t)for(var e=0;e<t.length;++e)t[e]=RGraph.SVG.parseColorLinear({object:this,color:t[e]});m.backgroundGridColor=RGraph.SVG.parseColorLinear({object:this,color:m.backgroundGridColor}),m.highlightFill=RGraph.SVG.parseColorLinear({object:this,color:m.highlightFill}),m.backgroundColor=RGraph.SVG.parseColorLinear({object:this,color:m.backgroundColor})},this.drawLabelsAbove=function(){if(m.labelsAbove)for(var t=RGraph.SVG.arrayLinearize(this.data),e=0,a=0;a<this.coords.length;++a,e++){var i="number"==typeof this.data[a]?this.data[a]:t[e];if("stacked"===m.grouping){var r=RGraph.SVG.sequentialIndexToGrouped(a,this.data),s=r[0];if(r[1]!==this.data[s].length-1)continue;i=RGraph.SVG.arraySum(this.data[s])}var o=RGraph.SVG.numberFormat({object:this,num:i.toFixed(m.labelsAboveDecimals),prepend:"string"==typeof m.labelsAboveUnitsPre?m.labelsAboveUnitsPre:null,append:"string"==typeof m.labelsAboveUnitsPost?m.labelsAboveUnitsPost:null,point:"string"==typeof m.labelsAbovePoint?m.labelsAbovePoint:null,thousand:"string"==typeof m.labelsAboveThousand?m.labelsAboveThousand:null,formatter:"function"==typeof m.labelsAboveFormatter?m.labelsAboveFormatter:null});if(m.labelsAboveSpecific&&m.labelsAboveSpecific.length&&("string"==typeof m.labelsAboveSpecific[e]||"number"==typeof m.labelsAboveSpecific[e]))o=m.labelsAboveSpecific[e];else if(m.labelsAboveSpecific&&m.labelsAboveSpecific.length&&"string"!=typeof m.labelsAboveSpecific[e]&&"number"!=typeof m.labelsAboveSpecific[e])continue;var l,r=parseFloat(this.coords[a].element.getAttribute("x"))+parseFloat(this.coords[a].element.getAttribute("width")/2)+m.labelsAboveOffsetx;s=0<=t[a]?(l=parseFloat(this.coords[a].element.getAttribute("y"))-7+m.labelsAboveOffsety,m.labelsAboveValign):(l=parseFloat(this.coords[a].element.getAttribute("y"))+parseFloat(this.coords[a].element.getAttribute("height"))+7-m.labelsAboveOffsety,"top"===m.labelsAboveValign?"bottom":"top");i=RGraph.SVG.getTextConf({object:this,prefix:"labelsAbove"});RGraph.SVG.text({object:this,parent:this.svg.all,tag:"labels.above",text:o,x:r,y:l,halign:m.labelsAboveHalign,valign:s,font:i.font,size:i.size,bold:i.bold,italic:i.italic,color:i.color,background:m.labelsAboveBackground||null,padding:m.labelsAboveBackgroundPadding||0})}},this.on=function(t,e){return"on"!==t.substr(0,2)&&(t="on"+t),RGraph.SVG.addCustomEventListener(this,t,e),this},this.exec=function(t){return t(this),this},this.removeHighlight=function(){var t=RGraph.SVG.REG.get("highlight");t&&t.parentNode&&t.parentNode.removeChild(t),RGraph.SVG.REG.set("highlight",null)},this.drawTop3dFace=function(t){var e=t.rect,a=(parseInt(e.getAttribute("fill")),parseInt(e.getAttribute("x"))),i=parseInt(e.getAttribute("y")),r=parseInt(e.getAttribute("width"));parseInt(e.getAttribute("height")),parseFloat(e.getAttribute("data-value"));e.rgraph_3d_top_face=[];for(var s=0;s<2;++s){var o=0===s?e.getAttribute("fill"):"rgba(255,255,255,0.7)",o=RGraph.SVG.create({svg:this.svg,type:"path",parent:"3d"===m.variant&&t.value<0?this.threed_xaxis_group:this.svg.all,attr:{stroke:m.colorsStroke,fill:o,"stroke-width":m.linewidth,d:"M {1} {2} L {3} {4} L {5} {6} L {7} {8}".format(a,i,a+m.variant3dOffsetx,i-m.variant3dOffsety,a+r+m.variant3dOffsetx,i-m.variant3dOffsety,a+r,i)}});e.rgraph_3d_top_face[s]=o}},this.drawSide3dFace=function(t){var e=t.rect,a=(parseInt(e.getAttribute("fill")),parseInt(e.getAttribute("x"))),i=parseInt(e.getAttribute("y")),r=parseInt(e.getAttribute("width")),s=parseInt(e.getAttribute("height"));e.rgraph_3d_side_face=[];for(var o=0;o<2;++o){var l=0===o?e.getAttribute("fill"):"rgba(0,0,0,0.3)",l=RGraph.SVG.create({svg:this.svg,type:"path",parent:"3d"===m.variant&&t.value<0?this.threed_xaxis_group:this.svg.all,attr:{stroke:m.colorsStroke,fill:l,"stroke-width":m.linewidth,d:"M {1} {2} L {3} {4} L {5} {6} L {7} {8}".format(a+r,i,a+r+m.variant3dOffsetx,i-m.variant3dOffsety,a+r+m.variant3dOffsetx,i+s-m.variant3dOffsety,a+r,i+s)}});e.rgraph_3d_side_face[o]=l}},this.drawErrorbar=function(t){var e,a,i=t.index,r=t.value,s=RGraph.SVG.getErrorbarsLinewidth({object:this,index:i}),o=RGraph.SVG.getErrorbarsColor({object:this,index:i}),l=RGraph.SVG.getErrorbarsCapWidth({object:this,index:i}),n=t.element,h=t.type,d=RGraph.SVG.getErrorbarsMaxValue({object:this,index:i}),t=RGraph.SVG.getErrorbarsMinValue({object:this,index:i});(d||t)&&(0<=(r="stacked"===h?RGraph.SVG.arraySum(this.data[i]):r)?(e=parseFloat(n.getAttribute("x"))+parseFloat(n.getAttribute("width"))/2,a=RGraph.SVG.create({svg:this.svg,type:"line",parent:this.svg.all,attr:{x1:e,y1:parseFloat(n.getAttribute("y")),x2:e,y2:this.getYCoord(parseFloat(r+d)),stroke:o,"stroke-width":s}}),RGraph.SVG.create({svg:this.svg,type:"line",parent:this.svg.all,attr:{x1:parseFloat(a.getAttribute("x1"))-l/2,y1:a.getAttribute("y2"),x2:parseFloat(a.getAttribute("x1"))+l/2,y2:a.getAttribute("y2"),stroke:o,"stroke-width":s}}),"number"==typeof t&&(a=RGraph.SVG.create({svg:this.svg,type:"line",parent:this.svg.all,attr:{x1:e,y1:parseFloat(n.getAttribute("y")),x2:e,y2:this.getYCoord(parseFloat(r-t)),stroke:o,"stroke-width":s}}),RGraph.SVG.create({svg:this.svg,type:"line",parent:this.svg.all,attr:{x1:parseFloat(a.getAttribute("x1"))-l/2,y1:a.getAttribute("y2"),x2:parseFloat(a.getAttribute("x1"))+l/2,y2:a.getAttribute("y2"),stroke:o,"stroke-width":s}}))):r<0&&(e=parseFloat(n.getAttribute("x"))+parseFloat(n.getAttribute("width"))/2,i=parseFloat(n.getAttribute("y"))+parseFloat(n.getAttribute("height")),d=this.getYCoord(parseFloat(r-Math.abs(d))),a=RGraph.SVG.create({svg:this.svg,type:"line",parent:this.svg.all,attr:{x1:e,y1:i,x2:e,y2:d,stroke:o,"stroke-width":s}}),RGraph.SVG.create({svg:this.svg,type:"line",parent:this.svg.all,attr:{x1:parseFloat(a.getAttribute("x1"))-l/2,y1:a.getAttribute("y2"),x2:parseFloat(a.getAttribute("x1"))+l/2,y2:a.getAttribute("y2"),stroke:o,"stroke-width":s}}),"number"==typeof t&&(e=parseFloat(n.getAttribute("x"))+parseFloat(n.getAttribute("width"))/2,a=RGraph.SVG.create({svg:this.svg,type:"line",parent:this.svg.all,attr:{x1:e,y1:this.getYCoord(parseFloat(r+t)),x2:e,y2:this.getYCoord(parseFloat(r)),stroke:o,"stroke-width":s}}),RGraph.SVG.create({svg:this.svg,type:"line",parent:this.svg.all,attr:{x1:parseFloat(a.getAttribute("x1"))-l/2,y1:a.getAttribute("y1"),x2:parseFloat(a.getAttribute("x1"))+l/2,y2:a.getAttribute("y1"),stroke:o,"stroke-width":s}}))))},this.grow=function(){var h=arguments[0]||{},d=h.frames||30,g=0,p=this,c=[],u=null,c=RGraph.SVG.arrayClone(this.data);this.draw();var b=function(){for(var t=0,e=0,a=p.coords.length;t<a;++t,++e){var i=g/d;if("number"==typeof c[t])u=Math.abs(p.getYCoord(c[t])-p.getYCoord(0)),p.data[t]=c[t]*i,u*=i,p.coords[e].element.setAttribute("height",u),p.coords[e].element.setAttribute("y",c[t]<0?p.getYCoord(0):p.getYCoord(0)-u),"3d"===m.variant&&(p.coords[t].element.rgraph_3d_side_face[0].parentNode&&p.coords[t].element.rgraph_3d_side_face[0].parentNode.removeChild(p.coords[t].element.rgraph_3d_side_face[0]),p.coords[t].element.rgraph_3d_side_face[1].parentNode&&p.coords[t].element.rgraph_3d_side_face[1].parentNode.removeChild(p.coords[t].element.rgraph_3d_side_face[1]),p.coords[t].element.rgraph_3d_top_face[0].parentNode&&p.coords[t].element.rgraph_3d_top_face[0].parentNode.removeChild(p.coords[t].element.rgraph_3d_top_face[0]),p.coords[t].element.rgraph_3d_top_face[1].parentNode&&p.coords[t].element.rgraph_3d_top_face[1].parentNode.removeChild(p.coords[t].element.rgraph_3d_top_face[1]),p.drawSide3dFace({rect:p.coords[t].element}),"grouped"===m.grouping&&p.drawTop3dFace({rect:p.coords[t].element}),p.coords[t].element.parentNode&&(s=(r=p.coords[t].element.parentNode).removeChild(p.coords[t].element),r.appendChild(s)));else if("object"==typeof c[t]){for(var r,s,o=0,l=0,n=c[t].length;l<n;++l,++e)u=Math.abs(p.getYCoord(c[t][l])-p.getYCoord(0)),u*=i,p.data[t][l]=c[t][l]*i,u=Math.round(u),p.coords[e].element.setAttribute("height",u),p.coords[e].element.setAttribute("y",c[t][l]<0?p.getYCoord(0)+o:p.getYCoord(0)-u-o),"3d"===m.variant&&(p.coords[e].element.rgraph_3d_side_face[0].parentNode&&p.coords[e].element.rgraph_3d_side_face[0].parentNode.removeChild(p.coords[e].element.rgraph_3d_side_face[0]),p.coords[e].element.rgraph_3d_side_face[1].parentNode&&p.coords[e].element.rgraph_3d_side_face[1].parentNode.removeChild(p.coords[e].element.rgraph_3d_side_face[1]),p.coords[e].element.rgraph_3d_top_face[0].parentNode&&p.coords[e].element.rgraph_3d_top_face[0].parentNode.removeChild(p.coords[e].element.rgraph_3d_top_face[0]),p.coords[e].element.rgraph_3d_top_face[1].parentNode&&p.coords[e].element.rgraph_3d_top_face[1].parentNode.removeChild(p.coords[e].element.rgraph_3d_top_face[1]),p.drawSide3dFace({rect:p.coords[e].element}),p.drawTop3dFace({rect:p.coords[e].element}),p.coords[e].element.parentNode&&(s=(r=p.coords[e].element.parentNode).removeChild(p.coords[e].element),r.appendChild(s))),o+="stacked"===m.grouping?u:0;p.stackedBackfaces[t]&&(p.stackedBackfaces[t].setAttribute("height",o),p.stackedBackfaces[t].setAttribute("y",p.height-m.marginBottom-o)),--e}}g++<d?RGraph.SVG.FX.update(b):h.callback&&h.callback(p)};return b(),this},this.wave=function(){this.draw();var n=this,h=arguments[0]||{};h.frames=h.frames||60,h.startFrames=[],h.counters=[];for(var t,d=h.frames/3,g=-1,p=h.callback||function(){},e=0,a=this.coords.length;e<a;++e)h.startFrames[e]=h.frames/2/(n.coords.length-1)*e,h.counters[e]=0,this.coords[e].element.setAttribute("height",0),this.coords[e].element.rgraph_3d_side_face&&((t=this.coords[e].element.rgraph_3d_side_face[0].parentNode).removeChild(this.coords[e].element.rgraph_3d_side_face[0]),t.removeChild(this.coords[e].element.rgraph_3d_side_face[1]),t.removeChild(this.coords[e].element.rgraph_3d_top_face[0]),t.removeChild(this.coords[e].element.rgraph_3d_top_face[1]));return function t(){++g;for(var e=0,a=n.coords.length;e<a;++e){var i,r,s,o,l=n.coords[e].element;g>h.startFrames[e]&&(r=l.getAttribute("data-original-height"),s=parseFloat(l.getAttribute("data-value")),i=Math.min((g-h.startFrames[e])/d*r,r),l.setAttribute("height",i<0?0:i),l.setAttribute("y",0<=s?n.getYCoord(0)-i:n.getYCoord(0)),"3d"===m.variant&&((r=l.rgraph_3d_side_face[0].parentNode)&&r.removeChild(l.rgraph_3d_side_face[0]),r&&r.removeChild(l.rgraph_3d_side_face[1]),(r=l.rgraph_3d_top_face[0].parentNode)&&r.removeChild(l.rgraph_3d_top_face[0]),r&&r.removeChild(l.rgraph_3d_top_face[1]),l.parentNode&&(s=(r=l.parentNode).removeChild(l),r.appendChild(s))),"stacked"===m.grouping&&(o=l.getAttribute("data-sequential-index"),0<(o=RGraph.SVG.sequentialIndexToGrouped(o,n.data))[1]&&l.setAttribute("y",parseInt(n.coords[e-1].element.getAttribute("y"))-i)),"3d"===m.variant&&(n.drawSide3dFace({rect:l,value:l.getAttribute("data-value")}),("grouped"===m.grouping||"stacked"===m.grouping&&o[1]+1===n.data[o[0]].length)&&n.drawTop3dFace({rect:l,value:l.getAttribute("data-value")})))}g>=h.frames?p(n):RGraph.SVG.FX.update(t)}(),this},this.tooltipSubstitutions=function(t){var e=RGraph.SVG.sequentialIndexToGrouped(t.index,this.data);return{index:e[1],dataset:e[0],sequentialIndex:t.index,value:"number"==typeof this.data[e[0]]?this.data[e[0]]:this.data[e[0]][e[1]],values:"number"==typeof this.data[e[0]]?[this.data[e[0]]]:this.data[e[0]]}},this.tooltipsFormattedCustom=function(t,e){return{label:"object"==typeof this.data[0]?!RGraph.SVG.isNull(m.tooltipsFormattedKeyLabels)&&"object"==typeof m.tooltipsFormattedKeyLabels&&m.tooltipsFormattedKeyLabels[e]?m.tooltipsFormattedKeyLabels[e]:"":!RGraph.SVG.isNull(m.tooltipsFormattedKeyLabels)&&"object"==typeof m.tooltipsFormattedKeyLabels&&m.tooltipsFormattedKeyLabels[t.index]?m.tooltipsFormattedKeyLabels[t.index]:""}},this.positionTooltipStatic=function(t){var e=t.object,a=(t.event,t.tooltip),i=t.index,r=RGraph.SVG.getSVGXY(e.svg),s=this.coords[t.index];t.tooltip.style.left=r[0]+s.x-a.offsetWidth/2+s.width/2+"px";var o,l=0;"3d"===m.variant&&(o=s.x,s.y,e=5/(180/Math.PI),l=Math.tan(e)*o),t.tooltip.style.top=r[1]+s.y-a.offsetHeight-15+l+"px",RGraph.SVG.arrayLinearize(this.data)[i]<0&&(t.tooltip.style.top=parseFloat(t.tooltip.style.top)+s.height/2+"px"),parseFloat(t.tooltip.style.top)<0&&(t.tooltip.style.top=parseFloat(t.tooltip.style.top)+20+"px")},t.options)"string"==typeof i&&this.set(i,t.options[i])};