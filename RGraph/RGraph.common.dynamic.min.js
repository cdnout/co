RGraph=window.RGraph||{isrgraph:!0,isRGraph:!0,rgraph:!0},function(o){navigator.userAgent;RGraph.installWindowMousedownListener=function(e){RGraph.window_mousedown_event_listener||(RGraph.window_mousedown_event_listener=function(e){0<=navigator.userAgent.indexOf("Firefox")&&(o.event=e);e=RGraph.Registry.get("tooltip");RGraph.hideTooltip&&e&&"slide"!==e.__object__.get("tooltipsEffect")&&(RGraph.clear(RGraph.Registry.get("tooltip").__canvas__),RGraph.redraw(),RGraph.hideTooltip())},o.addEventListener("mousedown",RGraph.window_mousedown_event_listener,!1))},RGraph.installWindowMouseupListener=function(e){RGraph.window_mouseup_event_listener||(RGraph.window_mouseup_event_listener=function(e){if(0<=navigator.userAgent.indexOf("Firefox")&&(o.event=e),RGraph.annotating_window_onmouseup)RGraph.annotating_window_onmouseup(e);else{(RGraph.Registry.get("adjusting")||RGraph.Registry.get("adjusting.gantt"))&&((e=RGraph.Registry.get("adjusting"))&&"line"===e.type&&(e.data_arr=RGraph.arrayLinearize(e.data)),RGraph.fireCustomEvent(RGraph.Registry.get("adjusting"),"onadjustend")),RGraph.Registry.set("adjusting",null),RGraph.Registry.set("adjusting.shape",null),RGraph.Registry.set("adjusting.gantt",null);for(var t,r=document.getElementsByTagName("canvas"),a=0;a<r.length;++a)r[a].__object__&&r[a].__object__.isRGraph&&(r[a].__object__.get("annotatable")||(r[a].__rgraph_trace_cover__||t?t=!0:RGraph.clear(r[a])));t||RGraph.redraw()}},o.addEventListener("mouseup",RGraph.window_mouseup_event_listener,!1))},RGraph.installCanvasMouseupListener=function(e){e.canvas.rgraph_mouseup_event_listener||(e.canvas.rgraph_mouseup_event_listener=function(e){0<=navigator.userAgent.indexOf("Firefox")&&(window.event=e);var t=RGraph.ObjectRegistry.getObjectsByXY(e);if(t)for(var r=0,a=t.length;r<a;r+=1){var o,s=t[r],n=(t[r].id,s.get("link"));if("drawing.text"==s.type&&"string"==typeof n&&(o=s.get("linkTarget"),p=s.get("linkOptions"),window.open(n,o||null,p)),!RGraph.isNull(s)&&RGraph.tooltip){var i=s.getShape(e);if(i&&i.tooltip){var p=i.tooltip;if(p){i.object.type;return RGraph.clear(s.canvas),RGraph.redraw(),RGraph.Registry.set("tooltip.shape",i),RGraph.tooltip(s,p,0,0,i.sequentialIndex,e),s.highlight(i),RGraph.Registry.get("tooltip")&&(RGraph.Registry.get("tooltip").__shape__=i,RGraph.evaluateCursor(e)),e.cancelBubble=!0,e.stopPropagation(),!1}}}if((RGraph.Registry.get("adjusting")||RGraph.Registry.get("adjusting.gantt"))&&(s&&"line"===s.type&&(s.data_arr=RGraph.arrayLinearize(s.data)),RGraph.fireCustomEvent(RGraph.Registry.get("adjusting"),"onadjustend")),RGraph.Registry.set("adjusting",null),RGraph.Registry.set("adjusting.shape",null),RGraph.Registry.set("adjusting.gantt",null),i||s.overChartArea&&s.overChartArea(e))break}},e.canvas.addEventListener("mouseup",e.canvas.rgraph_mouseup_event_listener,!1))},RGraph.installCanvasMousemoveListener=function(e){e.canvas.rgraph_mousemove_event_listener||(e.canvas.rgraph_mousemove_event_listener=function(e){0<=navigator.userAgent.indexOf("Firefox")&&(window.event=e);var t=[];if((c=RGraph.OR.getObjectsByXY(e))&&0<c.length){for(var r=0,a=c.length;r<a;r+=1){var o=c[r];o.id;if(t[o.uid]=!0,o.getShape){var s=o.getShape(e);if(RGraph.last_mouseover_uid&&RGraph.last_mouseover_uid!==o.uid&&(RGraph.fireCustomEvent(RGraph.last_mouseover_object,"onmouseout"),RGraph.last_mouseover_object.__mouseover_shape_index__=null,RGraph.last_mouseover_object.__mouseover_shape__=null,RGraph.last_mouseover_object=null,RGraph.last_mouseover_uid=null),(!s&&"number"==typeof o.__mouseover_shape_index__||s&&"number"==typeof o.__mouseover_shape_index__&&s.index!==o.__mouseover_shape_index__)&&RGraph.fireCustomEvent(o,"onmouseout"),o.coords&&o.coords.key&&o.coords.key.length)for(var n=RGraph.getMouseXY(e),r=0,i=!1;r<o.coords.key.length;++r)n[0]>=o.coords.key[r][0]&&n[0]<=o.coords.key[r][0]+o.coords.key[r][2]&&n[1]>=o.coords.key[r][1]&&n[1]<=o.coords.key[r][1]+o.coords.key[r][3]&&(RGraph.Registry.set("key-element",o.coords.key[r]),i=!0),i||RGraph.Registry.set("key-element",null);var p,u,_=null;if(_||"function"!=typeof o.onmousemove||(_=o.onmousemove),s&&"object"==typeof o["$"+(p=s.sequentialIndex)]&&"function"==typeof o["$"+p].onmousemove&&(u=o["$"+p].onmousemove),!s||"function"!=typeof _&&"function"!=typeof u&&"string"!=typeof o.get("link"))"string"==typeof o.get("eventsMousemoveRevertto")&&(RGraph.cursor.push("default"),o.set("eventsMousemoveRevertto",null));else if(null==o.get("eventsMousemoveRevertto")&&o.set("eventsMousemoveRevertto",e.target.style.cursor),"function"==typeof _&&(RGraph.custom_events_mousemove_pointer=_(e,s)),"function"==typeof u&&(RGraph.custom_events_mousemove_pointer=RGraph.custom_events_mousemove_pointer||u(e,s)),"object"==typeof RGraph.events&&"object"==typeof RGraph.events[o.uid])for(r in RGraph.events[o.uid])"string"==typeof r&&"object"==typeof RGraph.events[o.uid][r]&&"onmousemove"===RGraph.events[o.uid][r][1]&&"function"==typeof RGraph.events[o.uid][r][2]&&RGraph.events[o.uid][r][2](o);if((_=null)||"function"!=typeof o.onmouseover||(_=o.onmouseover),s?"object"==typeof o["$"+(p=s.sequentialIndex)]&&"function"==typeof o["$"+p].onmouseover&&(u=o["$"+p].onmouseover):(o.__mouseover_shape_index__=null,RGraph.__mouseover_objects__=[],RGraph.last_mouseover_uid=null,RGraph.last_mouseover_object=null),void 0===RGraph.__mouseover_objects__&&(RGraph.__mouseover_objects__=[],RGraph.last_mouseover_uid=null,RGraph.last_mouseover_object=null),s){if(o.__mouseover_shape_index__===s.index==!1&&(o.__mouseover_shape__=s,o.__mouseover_shape_index__=s.index,RGraph.last_mouseover_uid=o.uid,RGraph.last_mouseover_object=o,RGraph.__mouseover_objects__.push(o),_&&_(e,s),u&&u(e,s),"object"==typeof RGraph.events&&"object"==typeof RGraph.events[o.uid]))for(r in RGraph.events[o.uid])"string"==typeof r&&"object"==typeof RGraph.events[o.uid][r]&&"onmouseover"===RGraph.events[o.uid][r][1]&&"function"==typeof RGraph.events[o.uid][r][2]&&RGraph.events[o.uid][r][2](o)}else o.__mouseover_shape_index__=null,RGraph.__mouseover_objects__=[],RGraph.last_mouseover_uid=null,RGraph.last_mouseover_object=null;var h=RGraph.Registry.get("tooltip"),l=o.get("tooltips"),_=o.get("tooltipsEvent");if(s&&(l&&l[s.index]||s.tooltip)&&-1!==_.indexOf("mousemove")&&(RGraph.isNull(h)||o.uid!=h.__object__.uid||h.__index__!=s.sequentialIndex||"number"==typeof s.dataset&&s.dataset!=h.__shape__.dataset))return RGraph.clear(o.canvas),RGraph.hideTooltip(),RGraph.redraw(),void o.canvas.rgraph_mouseup_event_listener(e);if(o&&o.get("adjustable")&&o.adjusting_mousemove(e),s||o.overChartArea&&o.overChartArea(e))break}}for(var c=RGraph.OR.getObjectsByCanvasID(e.target.id),r=0;r<c.length;++r)t[c[r].uid]||(c[r].__mouseover_shape_index__=null)}else{for(c=RGraph.OR.getObjectsByCanvasID(e.target.id),r=0;r<c.length;r++)"number"==typeof c[r].__mouseover_shape_index__&&RGraph.fireCustomEvent(c[r],"onmouseout"),c[r].__mouseover_shape_index__=null;RGraph.__mouseover_objects__=[],RGraph.last_mouseover_uid=null,RGraph.last_mouseover_object=null}e.target&&e.target.__object__&&e.target.__object__.get("crosshairs")&&RGraph.drawCrosshairs(e,e.target.__object__),e.target.__object__&&e.target.__object__.get("annotatable")&&RGraph.annotating_canvas_onmousemove&&RGraph.annotating_canvas_onmousemove(e),RGraph.evaluateCursor(e)},e.canvas.addEventListener("mousemove",e.canvas.rgraph_mousemove_event_listener,!1))},RGraph.installCanvasMousedownListener=function(e){e.canvas.rgraph_mousedown_event_listener||(e.canvas.rgraph_mousedown_event_listener=function(e){if(0<=navigator.userAgent.indexOf("Firefox")&&(window.event=e),e.target.__object__&&e.target.__object__.get("annotatable")&&RGraph.annotating_canvas_onmousedown)RGraph.annotating_canvas_onmousedown(e);else if(t=RGraph.ObjectRegistry.getObjectByXY(e)){var t,r,a;t.id;if(t&&t.isRGraph&&t.get("adjustable"))if((t=RGraph.OR.getObjectByXY(e))&&t.isRGraph){switch(t.type){case"bar":var o=t.getShapeByX(e);break;case"gantt":(o=t.getShape(e))&&(r="object"==typeof t.data[o.dataset]&&t.data[o.dataset][o.index]&&t.data[o.dataset][o.index].start?t.data[o.dataset][o.index]:t.data[o.dataset],a=RGraph.getMouseXY(e),RGraph.Registry.set("adjusting.gantt",{dataset:o.dataset,index:o.index,object:t,mousex:a[0],mousey:a[1],event:r,event_start:r.start,event_duration:r.duration,mode:a[0]>o.x+o.width-5?"resize":"move",shape:o}));break;case"line":var o=t.getShape(e);break;case"hbar":o=t.getShapeByY(e);break;case"activity":o=t.getShape(e);break;default:o=null}"line"===t.type&&t.properties.adjustableXonly&&(o=t.getShapeByX(e)),(RGraph.isNull(t.properties.adjustableOnly)||void 0===t.properties.adjustableOnly||RGraph.isArray(t.properties.adjustableOnly)&&t.isAdjustable&&t.isAdjustable(o))&&(RGraph.Registry.set("adjusting.shape",o),RGraph.fireCustomEvent(t,"onadjustbegin"),RGraph.Registry.set("adjusting",t),RGraph.clear(t.canvas),RGraph.redraw(),t.canvas.rgraph_mousemove_event_listener(e))}"slide"!==t.properties.tooltipsEffect&&(RGraph.clear(t.canvas),RGraph.redraw())}},e.canvas.addEventListener("mousedown",e.canvas.rgraph_mousedown_event_listener,!1))},RGraph.installCanvasClickListener=function(e){e.canvas.rgraph_click_event_listener||(e.canvas.rgraph_click_event_listener=function(e){0<=navigator.userAgent.indexOf("Firefox")&&(window.event=e);for(var t=RGraph.ObjectRegistry.getObjectsByXY(e),r=0,a=t.length;r<a;r+=1){var o=t[r],s=(o.id,o.getShape(e));if((n=null)||"function"!=typeof o.onclick||(n=o.onclick),s&&"function"==typeof n){if(n(e,s),"object"==typeof RGraph.events&&"object"==typeof RGraph.events[o.uid])for(r in RGraph.events[o.uid])"string"==typeof r&&"object"==typeof RGraph.events[o.uid][r]&&"onclick"===RGraph.events[o.uid][r][1]&&"function"==typeof RGraph.events[o.uid][r][2]&&RGraph.events[o.uid][r][2](o);return}if(RGraph.Registry.get("key-element")&&RGraph.fireCustomEvent(o,"onkeyclick"),s){var n,i=s.sequentialIndex;if("number"==typeof i&&o["$"+i])if("function"==typeof(n=o["$"+i].onclick))return void n(e,s)}if(s||o.overChartArea&&o.overChartArea(e))break}},e.canvas.addEventListener("click",e.canvas.rgraph_click_event_listener,!1))},RGraph.evaluateCursor=function(e){if(!1!==e.rgraph_evaluateCursor){for(var t=null,r=RGraph.getMouseXY(e),a=r[0],o=r[1],r=e.target,s=RGraph.OR.getObjectsByCanvasID(r.id),n=0,i=s.length;n<i;n+=1)(s[n].getShape&&s[n].getShape(e)||s[n].overChartArea&&s[n].overChartArea(e))&&(t=s[n]).id;if(!RGraph.isNull(t))if(t.getShape&&t.getShape(e)&&(h=t.getShape(e),!t.get("tooltips")||(r=!(r=RGraph.parseTooltipText(t.get("tooltips"),h.sequentialIndex))&&"scatter"==h.object.type&&h.index?RGraph.parseTooltipText(t.get("tooltips"),h.index):r)&&(p=!0)),!RGraph.isNull(t)&&t.get("keyInteractive"))for(var p,u=0;u<t.coords.key.length;++u)a>t.coords.key[u][0]&&a<t.coords.key[u][0]+t.coords.key[u][2]&&o>t.coords.key[u][1]&&o<t.coords.key[u][1]+t.coords.key[u][3]&&(p=!0);RGraph.custom_events_mousemove_pointer&&(p=!0,RGraph.custom_events_mousemove_pointer=!1);for(var _,h,n=0,i=(s=RGraph.OR.objects.byCanvasID).length;n<i;n+=1)s[n]&&s[n][1].get("resizable")&&(_=!0);(p=_&&a>e.target.width-32&&o>e.target.height-16?!0:p)?e.target.style.cursor="pointer":"pointer"==e.target.style.cursor?e.target.style.cursor="default":e.target.style.cursor=null,_&&a>=e.target.width-15&&o>=e.target.height-15?e.target.style.cursor="move":"move"===e.target.style.cursor&&(e.target.style.cursor="default"),"boolean"==typeof mouse_over_key&&mouse_over_key&&(e.target.style.cursor="pointer"),t&&"line"==t.type&&t.get("adjustable")&&(t.getShape?(h=t.getShape(e))&&t.isAdjustable(h)&&(e.target.style.cursor="ns-resize"):e.target.style.cursor="default"),e.target.__object__&&e.target.__object__.get("annotatable")&&(e.target.style.cursor="crosshair"),t&&"drawing.text"===t.type&&h&&"string"==typeof t.get("link")&&(e.target.style.cursor="pointer")}},RGraph.parseTooltipText=function(e,t){if(!e)return null;if("function"==typeof e)var r=e(t);else if("string"==typeof e)r=e;else if("object"==typeof e&&"function"==typeof e[t])r=e[t](t);else{if("object"==typeof e&&(RGraph.isNull(e[t])||void 0===e[t]))return null;r="string"==typeof e[t]&&e[t]?e[t]:""}return void 0!==r&&"null"!=typeof r||(r=""),RGraph.getTooltipTextFromDIV?RGraph.getTooltipTextFromDIV(r):r},RGraph.drawCrosshairs=function(e,t){var r=t.canvas.width,a=t.canvas.height,o=(h=RGraph.getMouseXY(e))[0],s=h[1],n=t.marginLeft,i=t.marginRight,p=t.marginTop,u=t.marginBottom,_=(t.properties,t.properties);if(RGraph.redrawCanvas(t.canvas),n<=o&&p<=s&&o<=r-i&&s<=a-u){var h,l=_.crosshairsLinewidth||1;if(t.context.lineWidth=l||1,t.context.beginPath(),t.context.strokeStyle=_.crosshairsColor,_.crosshairsSnap){var c=null,d=null;if("line"==t.type){for(var v=0;v<t.coords.length;++v){var g=RGraph.getHypLength(t.coords[v][0],t.coords[v][1],o,s);("number"!=typeof d||g<d)&&(c=v,d=g)}for(var o=t.coords[c][0],s=t.coords[c][1],R=0;R<t.coords2.length;++R)for(c=0;c<t.coords2[R].length;++c)t.coords2[R][c][0]==o&&t.coords2[R][c][1]==s&&(t.canvas.__crosshairs_snap_dataset__=R,t.canvas.__crosshairs_snap_point__=c)}else{for(v=0;v<t.coords.length;++v)for(var y=0;y<t.coords[v].length;++y){var f=RGraph.getHypLength(t.coords[v][y][0],t.coords[v][y][1],o,s);("number"!=typeof d||f<d)&&(R=v,c=y,d=f)}t.canvas.__crosshairs_snap_dataset__=R,t.canvas.__crosshairs_snap_point__=c,o=t.coords[R][c][0],s=t.coords[R][c][1]}}_.crosshairsVline&&(t.context.moveTo(Math.round(o),Math.round(p)),t.context.lineTo(Math.round(o),Math.round(a-u))),_.crosshairsHline&&(t.context.moveTo(Math.round(n),Math.round(s)),t.context.lineTo(Math.round(r-i),Math.round(s))),t.context.stroke(),"scatter"==t.type&&_.crosshairsCoords?(i=(i=(o-n)/(r-n-i)*(_.xaxisScaleMax-_.xaxisScaleMin)+_.xaxisScaleMin).toFixed(_.yaxisScaleDecimals),a=t.max-(s-_.marginTop)/(a-p-u)*(t.max-t.scale2.min),a=(a="scatter"==t.type&&"center"===t.properties.xaxisPosition?2*(a-t.max/2):a).toFixed(_.yaxisScaleDecimals),u=RGraph.Registry.get("coordinates.coords.div"),h=RGraph.getMouseXY(e),h=RGraph.getCanvasXY(t.canvas),u||((u=document.createElement("DIV")).__object__=t,u.style.position="absolute",u.style.backgroundColor="white",u.style.border="1px solid gray",u.style.fontFamily="Arial, Verdana, sans-serif",u.style.fontSize="10pt",u.style.padding="2px",u.style.opacity=1,u.style.WebkitBorderRadius="3px",u.style.borderRadius="3px",u.style.MozBorderRadius="3px",u.style.lineHeight=RGraph.ISIE?"normal":"initial",document.body.appendChild(u),RGraph.Registry.set("coordinates.coords.div",u)),u.style.opacity=1,u.style.display="inline",_.crosshairsCoordsFixed?(u.style.left=h[0]+n+3+"px",u.style.top=h[1]+p+3+"px"):(u.style.left=Math.max(2,e.pageX-u.offsetWidth-3)+"px",u.style.top=Math.max(2,e.pageY-u.offsetHeight-3)+"px"),"function"==typeof _.crosshairsCoordsFormatterX&&(i=_.crosshairsCoordsFormatterX({object:t,value:parseInt(i)})),"function"==typeof _.crosshairsCoordsFormatterY&&(a=_.crosshairsCoordsFormatterY({object:t,value:parseInt(a)})),u.innerHTML='<span style="color: #666">'+_.crosshairsCoordsLabelsX+":</span> "+i+'<br><span style="color: #666">'+_.crosshairsCoordsLabelsY+":</span> "+a,t.canvas.addEventListener("mouseout",RGraph.hideCrosshairCoords,!1),t.canvas.__crosshairs_labels__=u,t.canvas.__crosshairs_x__=i,t.canvas.__crosshairs_y__=a):_.crosshairsCoords&&alert("[RGRAPH] Showing crosshair coordinates is only supported on the Scatter chart"),RGraph.fireCustomEvent(t,"oncrosshairs")}else RGraph.hideCrosshairCoords()},RGraph.allowSegmentHighlight=function(e){var s=e.object,n=e.count,p=e.fill,u=e.stroke;RGraph.segmentHighlightFunction||(RGraph.segmentHighlightFunction=function(e){var e=RGraph.getMouseXY(e),t=RGraph.getAngleByXY(s.centerx,s.centery,e[0],e[1]);(t+=RGraph.HALFPI)>RGraph.TWOPI&&(t-=RGraph.TWOPI),RGraph.redraw();var r=0,a=0,o=2*Math.PI/n,e=s.radius;!function(){for(i=0;i<n;i+=1)if(t<o*(i+1))return r=i*o,a=(i+1)*o}(),r-=RGraph.HALFPI,a-=RGraph.HALFPI,s.path("b m % % a % % % % % false c s % f %",s.centerx,s.centery,s.centerx,s.centery,e,r,a,u,p)},s.canvas.addEventListener("mousemove",RGraph.segmentHighlightFunction,!1))}}(window,document);