RGraph=window.RGraph||{isrgraph:!0,isRGraph:!0,rgraph:!0},RGraph.SVG=RGraph.SVG||{},window,document,RGraph.SVG.Scatter=function(t){for(i in this.set=function(t,e){if(1===arguments.length&&"object"==typeof t)for(i in arguments[0])"string"==typeof i&&(t=a.name,e=a.value,this.set(t,e));else{var a=RGraph.SVG.commonSetter({object:this,name:t,value:e});t=a.name,e=a.value,"colors"===t&&(this.originalColors=RGraph.SVG.arrayClone(e),this.colorsParsed=!1),"labelsAboveSeperator"===t&&(t=labelsAboveSeparator),this.properties[t]=e}return this},this.get=function(t){return this.properties[t]},this.id=t.id,this.uid=RGraph.SVG.createUID(),this.container=document.getElementById(this.id),this.layers={},this.svg=RGraph.SVG.createSVG({object:this,container:this.container}),this.isRGraph=!0,this.isrgraph=!0,this.rgraph=!0,this.width=Number(this.svg.getAttribute("width")),this.height=Number(this.svg.getAttribute("height")),this.data=t.data,this.type="scatter",this.coords=[],this.coords2=[],this.colorsParsed=!1,this.originalColors={},this.gradientCounter=1,this.sequential=0,this.line_groups=[],this.firstDraw=!0,RGraph.SVG.OR.add(this),this.container.style.display="inline-block",this.properties={marginLeft:35,marginRight:35,marginTop:35,marginBottom:35,backgroundColor:null,backgroundImage:null,backgroundImageAspect:"none",backgroundImageStretch:!0,backgroundImageOpacity:null,backgroundImageX:null,backgroundImageY:null,backgroundImageW:null,backgroundImageH:null,backgroundGrid:!0,backgroundGridColor:"#ddd",backgroundGridLinewidth:1,backgroundGridHlines:!0,backgroundGridHlinesCount:null,backgroundGridVlines:!0,backgroundGridVlinesCount:null,backgroundGridBorder:!0,backgroundGridDashed:!1,backgroundGridDotted:!1,backgroundGridDashArray:null,tickmarksStyle:"cross",tickmarksSize:7,colors:["black"],line:!1,lineColors:null,lineLinewidth:1,errorbarsColor:"black",errorbarsLinewidth:1,errorbarsCapwidth:10,yaxis:!0,yaxisTickmarks:!0,yaxisTickmarksLength:3,yaxisColor:"black",yaxisScale:!0,yaxisLabels:null,yaxisLabelsOffsetx:0,yaxisLabelsOffsety:0,yaxisLabelsCount:5,yaxisScaleUnitsPre:"",yaxisScaleUnitsPost:"",yaxisScaleStrict:!1,yaxisScaleDecimals:0,yaxisScalePoint:".",yaxisScaleThousand:",",yaxisScaleRound:!1,yaxisScaleMax:null,yaxisScaleMin:0,yaxisScaleFormatter:null,yaxisTitle:"",yaxisTitleBold:null,yaxisTitleSize:null,yaxisTitleFont:null,yaxisTitleColor:null,yaxisTitleItalic:null,yaxisTitleOffsetx:0,yaxisTitleOffsety:0,yaxisTitleX:null,yaxisTitleY:null,yaxisTitleHalign:null,yaxisTitleValign:null,xaxis:!0,xaxisTickmarks:!0,xaxisTickmarksLength:5,xaxisLabels:null,xaxisLabelsPosition:"section",xaxisLabelsPositionEdgeTickmarksCount:10,xaxisColor:"black",xaxisLabelsOffsetx:0,xaxisLabelsOffsety:0,xaxisLabelsCount:10,xaxisLabelsFont:null,xaxisLabelsSize:null,xaxisLabelsColor:null,xaxisLabelsBold:null,xaxisLabelsItalic:null,xaxisScaleUnitsPre:"",xaxisScaleUnitsPost:"",xaxisScaleMax:null,xaxisScaleMin:0,xaxisScalePoint:".",xaxisRound:!1,xaxisScaleThousand:",",xaxisScaleDecimals:0,xaxisScaleFormatter:null,xaxisTitle:"",xaxisTitleBold:null,xaxisTitleSize:null,xaxisTitleFont:null,xaxisTitleColor:null,xaxisTitleItalic:null,xaxisTitleOffsetx:0,xaxisTitleOffsety:0,xaxisTitleX:null,xaxisTitleY:null,xaxisTitleHalign:null,xaxisTitleValign:null,textColor:"black",textFont:"Arial, Verdana, sans-serif",textSize:12,textBold:!1,textItalic:!1,text:null,labelsAboveFont:null,labelsAboveSize:null,labelsAboveBold:null,labelsAboveItalic:null,labelsAboveColor:null,labelsAboveBackground:"rgba(255,255,255,0.7)",labelsAboveBackgroundPadding:2,labelsAboveXUnitsPre:null,labelsAboveXUnitsPost:null,labelsAboveXPoint:null,labelsAboveXThousand:null,labelsAboveXFormatter:null,labelsAboveXDecimals:null,labelsAboveYUnitsPre:null,labelsAboveYUnitsPost:null,labelsAboveYPoint:null,labelsAboveYThousand:null,labelsAboveYFormatter:null,labelsAboveYDecimals:null,labelsAboveOffsetx:0,labelsAboveOffsety:-10,labelsAboveHalign:"center",labelsAboveValign:"bottom",labelsAboveSeparator:",",tooltipsOverride:null,tooltipsEffect:"fade",tooltipsCssClass:"RGraph_tooltip",tooltipsCss:null,tooltipsEvent:"mousemove",tooltipsFormattedThousand:",",tooltipsFormattedPoint:".",tooltipsFormattedDecimals:0,tooltipsFormattedUnitsPre:"",tooltipsFormattedUnitsPost:"",tooltipsFormattedKeyColors:null,tooltipsFormattedKeyColorsShape:"square",tooltipsFormattedKeyLabels:[],tooltipsFormattedTableHeaders:null,tooltipsFormattedTableData:null,tooltipsPointer:!0,tooltipsPositionStatic:!0,highlightStroke:"rgba(0,0,0,0)",highlightFill:"rgba(255,255,255,0.7)",highlightLinewidth:1,title:"",titleX:null,titleY:null,titleHalign:"center",titleValign:null,titleSize:null,titleColor:null,titleFont:null,titleBold:null,titleItalic:null,titleSubtitle:null,titleSubtitleSize:null,titleSubtitleColor:"#aaa",titleSubtitleFont:null,titleSubtitleBold:null,titleSubtitleItalic:null,key:null,keyColors:null,keyOffsetx:0,keyOffsety:0,keyLabelsOffsetx:0,keyLabelsOffsety:-1,keyLabelsFont:null,keyLabelsSize:null,keyLabelsColor:null,keyLabelsBold:null,keyLabelsItalic:null,bubble:!1,bubbleMaxValue:null,bubbleMaxRadius:null,bubbleColorsSolid:!1,errorbars:null,trendline:!1,trendlineColors:["gray"],trendlineLinewidth:1,trendlineMargin:15,trendlineDashed:!0,trendlineDotted:!1,trendlineDashArray:null,trendlineClipping:null,outofbounds:!0},RGraph.SVG.getGlobals(this),t.options)"string"==typeof i&&this.set(i,t.options[i]);this.data[0]&&!RGraph.SVG.isArray(this.data[0])&&(this.data=[],this.data[0]=t.data),RGraph.SVG.FX&&"function"==typeof RGraph.SVG.FX.decorate&&RGraph.SVG.FX.decorate(this),this.responsive=RGraph.SVG.responsive,RGraph.SVG.addCreateFunction(this);var S=this.properties;"string"==typeof S.xaxisScaleMin&&(S.xaxisScaleMin=RGraph.SVG.parseDate(S.xaxisScaleMin)),"string"==typeof S.xaxisScaleMax&&(S.xaxisScaleMax=RGraph.SVG.parseDate(S.xaxisScaleMax));for(var i=0;i<this.data.length;++i)for(var e=0;e<this.data[i].length;++e)"string"==typeof this.data[i][e].x&&(this.data[i][e].x=RGraph.SVG.parseDate(this.data[i][e].x));return this.draw=function(){if(RGraph.SVG.fireCustomEvent(this,"onbeforedraw"),this.sequential=0,this.width=Number(this.svg.getAttribute("width")),this.height=Number(this.svg.getAttribute("height")),S.xaxisLabels&&S.xaxisLabels.length){"string"==typeof S.xaxisLabels&&(S.xaxisLabels=RGraph.SVG.arrayPad({array:[],length:S.xaxisLabelsCount,value:S.xaxisLabels}));for(var t=0;t<S.xaxisLabels.length;++t)S.xaxisLabels[t]=RGraph.SVG.labelSubstitution({object:this,text:S.xaxisLabels[t],index:t,value:this.data[0][t],decimals:S.xaxisLabelsFormattedDecimals||0,unitsPre:S.xaxisLabelsFormattedUnitsPre||"",unitsPost:S.xaxisLabelsFormattedUnitsPost||"",thousand:S.xaxisLabelsFormattedThousand||",",point:S.xaxisLabelsFormattedPoint||"."})}RGraph.SVG.createDefs(this),this.graphWidth=this.width-S.marginLeft-S.marginRight,this.graphHeight=this.height-S.marginTop-S.marginBottom,this.coords=[],this.coords2=[],RGraph.SVG.resetColorsToOriginalValues({object:this}),this.parseColors();for(var e,a=0,i=0;a<this.data.length;++a)for(var s=0;s<this.data[a].length;++s)i=Math.max(i,this.data[a][s].y+(this.data[a][s].errorbar?"number"==typeof this.data[a][s].errorbar?this.data[a][s].errorbar:this.data[a][s].errorbar.max:0));"number"==typeof S.yaxisScaleMax&&(i=S.yaxisScaleMax),"mirror"!==S.yaxisScaleMin&&"middle"!==S.yaxisScaleMin&&"center"!==S.yaxisScaleMin||(e=!0,S.yaxisScaleMin=0),this.scale=RGraph.SVG.getScale({object:this,numlabels:S.yaxisLabelsCount,unitsPre:S.yaxisScaleUnitsPre,unitsPost:S.yaxisScaleUnitsPost,max:i,min:S.yaxisScaleMin,point:S.yaxisScalePoint,round:S.yaxisScaleRound,thousand:S.yaxisScaleThousand,decimals:S.yaxisScaleDecimals,strict:"number"==typeof S.yaxisScaleMax,formatter:S.yaxisScaleFormatter}),e&&(this.scale=RGraph.SVG.getScale({object:this,numlabels:S.yaxisLabelsCount,unitsPre:S.yaxisScaleUnitsPre,unitsPost:S.yaxisScaleUnitsPost,max:this.scale.max,min:-1*this.scale.max,point:S.yaxisScalePoint,round:!1,thousand:S.yaxisScaleThousand,decimals:S.yaxisScaleDecimals,strict:"number"==typeof S.yaxisScaleMax,formatter:S.yaxisScaleFormatter})),this.max=this.scale.max,this.min=this.scale.min,S.yaxisScaleMax=this.scale.max,S.yaxisScaleMin=this.scale.min,RGraph.SVG.drawBackground(this),RGraph.SVG.drawXAxis(this),RGraph.SVG.drawYAxis(this);for(var r=RGraph.SVG.create({svg:this.svg,type:"g",parent:this.svg.all,attr:{className:"scatter_datasets_"+this.uid}}),t=0;t<this.data.length;++t){var o=RGraph.SVG.create({svg:this.svg,type:"g",parent:this.svg.all,attr:{id:"scatter_line_"+t+this.uid}});this.line_groups[t]=o,this.drawPoints({index:t,data:this.data[t],group:r}),(!0===S.line||"object"==typeof S.line&&!0===S.line[t])&&this.drawLine({index:t,coords:this.coords2[t]})}if(S.trendline)for(t=0;t<this.data.length;++t)(!0===S.trendline||"object"==typeof S.trendline&&!0===S.trendline[t])&&this.drawTrendline(t);return null!==typeof S.key&&RGraph.SVG.drawKey?RGraph.SVG.drawKey(this):RGraph.SVG.isNull(S.key)||alert("The drawKey() function does not exist - have you forgotten to include the key library?"),RGraph.SVG.addCustomText(this),this.firstDraw&&(this.firstDraw=!1,RGraph.SVG.fireCustomEvent(this,"onfirstdraw")),RGraph.SVG.fireCustomEvent(this,"ondraw"),this},this.drawPoints=function(t){var e=t.index,a=t.data,i=t.group;this.coords2[e]||(this.coords2[e]=[]);for(var i=RGraph.SVG.create({svg:this.svg,type:"g",parent:i,attr:{className:"scatter_dataset_"+e+"_"+this.uid}}),s=0;s<a.length;++s){var r,o,l,n=a[s];"number"==typeof n.x&&"number"==typeof n.y&&(r=this.drawSinglePoint({dataset:a,datasetIdx:e,point:n,index:s,group:i,sequential:this.sequential}),this.coords.push({x:r.x,y:r.y,z:r.size,type:r.type,element:r.mark,object:this}),this.coords2[e][s]={x:r.x,y:r.y,z:r.size,type:r.type,element:r.mark,object:this},this.sequential++),("string"==typeof a[s].tooltip&&a[s].tooltip||"number"==typeof a[s].tooltip||"string"==typeof S.tooltips)&&(a[s].tooltip=String(a[s].tooltip),"mousemove"!==S.tooltipsEvent&&(S.tooltipsEvent="click"),o=o||RGraph.SVG.create({svg:this.svg,parent:this.svg.all,type:"g",attr:{className:"rgraph-scatter-tooltip-hotspots"}}),l=RGraph.SVG.create({svg:this.svg,parent:(this.svg.all,o),type:"rect",attr:{x:r.x-r.size/2,y:r.y-r.size/2,width:r.size,height:r.size,fill:"transparent",stroke:"transparent","stroke-width":0},style:{cursor:"pointer"}}),r.mark.hotspot=l,function(a,i,s,r){l.addEventListener(S.tooltipsEvent,function(t){var e=RGraph.SVG.REG.get("tooltip");e&&e.__dataset__===a&&e.__index__===i||(r.removeHighlight(),RGraph.SVG.tooltip({object:r,dataset:a,index:i,sequentialIndex:s,text:"string"==typeof S.tooltips?S.tooltips:r.data[a][i].tooltip,event:t}),RGraph.SVG.REG.get("tooltip")&&r.highlight(this))},!1),"click"===S.tooltipsEvent&&l.addEventListener("mousemove",function(t){t.target.style.cursor="pointer"},!1)}(e,s,this.sequential-1,this))}},this.drawSinglePoint=function(t){t.dataset;var e=t.datasetIdx,a=t.sequential,i=(t.point,t.index),s=t.point.x,r=t.point.y,o=t.point||{},l=t.group,n=t.coordx=this.getXCoord(s),h=t.coordy=this.getYCoord(r);o.labelsAbove||o.labelAbove||o.above,void 0===o.type&&void 0!==o.shape&&(o.type=o.shape),"string"!=typeof o.type&&("string"==typeof S.tickmarksStyle?o.type=S.tickmarksStyle:"object"==typeof S.tickmarksStyle&&"string"==typeof S.tickmarksStyle[e]?o.type=S.tickmarksStyle[e]:o.type="cross"),"number"!=typeof o.size&&"number"==typeof S.tickmarksSize?o.size=S.tickmarksSize:"number"!=typeof o.size&&"object"==typeof S.tickmarksSize&&"number"==typeof S.tickmarksSize[e]&&(o.size=S.tickmarksSize[e]),"string"==typeof o.color||("string"==typeof S.colors[e]?o.color=S.colors[e]:o.color="black"),void 0===o.opacity?o.opacity=1:o.opacity,S.errorbars=[];for(var d=0;d<this.data.length;++d)for(var c=0;c<this.data[d].length;++c)S.errorbars.push(this.data[d][c].errorbar);switch(this.drawErrorbar({object:this,dataset:e,index:i,group:l,sequential:a,x:n,y:h,valueX:s,valueY:r,parent:l}),S.bubble&&this.drawBubble(t,o),o.type){case"image:"+o.type.substr(6):var p=o.type.substr(6),u=new Image;u.src=p;var b=RGraph.SVG.create({svg:this.svg,type:"image",parent:l,attr:{preserveAspectRatio:"xMidYMid meet","xlink:href":p}});u.onload=function(){var t=n-u.width/2,e=h-u.height/2,a=u.width,i=u.height;b.setAttribute("x",t),b.setAttribute("y",e),b.setAttribute("width",a),b.setAttribute("height",i),b&&b.hotspot&&(b.hotspot.setAttribute("x",t),b.hotspot.setAttribute("y",e),b.hotspot.setAttribute("width",a),b.hotspot.setAttribute("height",i))};break;case"triangle":b=RGraph.SVG.create({svg:this.svg,type:"path",parent:l,attr:{d:"M {1} {2} L {3} {4} L {5} {6}".format(n-o.size/2,h+o.size/2,n,h-o.size/2,n+o.size/2,h+o.size/2),fill:o.color,"fill-opacity":o.opacity}});break;case"plus":b=RGraph.SVG.create({svg:this.svg,type:"path",parent:l,attr:{d:"M {1} {2} L {3} {4} M {5} {6} L {7} {8}".format(n-o.size/2,h,n+o.size/2,h,n,h-o.size/2,n,h+o.size/2),stroke:o.color,"stroke-opacity":o.opacity}});break;case"square":case"rect":b=RGraph.SVG.create({svg:this.svg,type:"rect",parent:l,attr:{x:n-o.size/2,y:h-o.size/2,width:o.size,height:o.size,fill:o.color,"fill-opacity":o.opacity}});break;case"dot":case"circle":b=RGraph.SVG.create({svg:this.svg,type:"circle",parent:l,attr:{cx:n,cy:h,r:o.size/2,fill:o.color,"fill-opacity":o.opacity}});break;default:b=RGraph.SVG.create({svg:this.svg,type:"path",parent:l,attr:{d:"M {1} {2} L {3} {4} M {5} {6} L {7} {8}".format(n-o.size/2,h-o.size/2,n+o.size/2,h+o.size/2,n-o.size/2,h+o.size/2,n+o.size/2,h-o.size/2),stroke:o.color,"stroke-opacity":o.opacity}})}return("string"==typeof o.above||"string"!=typeof o.above&&o.above)&&this.drawLabelsAbove({point:o,coordX:n,coordY:h}),b.setAttribute("data-index",i),b.setAttribute("data-dataset",e),b.setAttribute("data-original-opacity",o.opacity),b.setAttribute("data-original-color",o.color),b.setAttribute("data-original-coordx",n),b.setAttribute("data-original-coordy",h),b.setAttribute("data-size",o.size),b.setAttribute("data-sequential",a),b.setAttribute("data-type",o.type),{x:n,y:h,size:"image:"===o.type.substr(0,6)?u.width:o.size,mark:b,type:o.type}},this.drawBubble=function(t,e){var a=e.z/S.bubbleMaxValue*S.bubbleMaxRadius,i=RGraph.SVG.parseColorRadial({object:this,color:S.bubbleColorsSolid?e.color:"Gradient(white:"+e.color+")",cx:t.coordx+a/4,cy:t.coordy-a/4,fx:t.coordx+a/4,fy:t.coordy-a/4,r:1.5*a}),i=RGraph.SVG.create({svg:this.svg,type:"circle",attr:{cx:t.coordx,cy:t.coordy,r:a,fill:i,"fill-opacity":e.opacity}});return i.setAttribute("data-index",t.index),i.setAttribute("data-dataset",t.datasetIdx),i.setAttribute("data-original-opacity",e.opacity),i.setAttribute("data-original-color",e.color),i.setAttribute("data-original-coordx",t.coordx),i.setAttribute("data-original-coordy",t.coordy),i.setAttribute("data-size",a),i.setAttribute("data-sequential",t.sequential),i.setAttribute("data-type","bubble"),{x:t.coordx,y:t.coordy,z:t.coordz}},this.drawLine=function(t){for(var e=1,a="black",e="object"==typeof S.lineLinewidth&&"number"==typeof S.lineLinewidth[t.index]?S.lineLinewidth[t.index]:"number"==typeof S.lineLinewidth?S.lineLinewidth:1,a=!RGraph.SVG.isNull(S.lineColors)&&S.lineColors&&S.lineColors[t.index]?S.lineColors[t.index]:!RGraph.SVG.isNull(S.colors)&&S.colors.length&&"string"==typeof S.colors[t.index]?S.colors[t.index]:"string"==typeof S.lineColors?S.lineColors:"black",i=0,s="";i<this.coords2[t.index].length;++i)s+="{1} {2} {3} ".format(0===i?"M":"L",this.coords2[t.index][i].x,this.coords2[t.index][i].y);RGraph.SVG.create({svg:this.svg,type:"path",parent:this.line_groups[t.index],attr:{d:s,fill:"transparent",stroke:a,"stroke-width":e,"stroke-linecap":"round","stroke-linejoin":"round"}})},this.getXCoord=function(t){return t>S.xaxisScaleMax||t<S.xaxisScaleMin?null:(t=(t-S.xaxisScaleMin)/(S.xaxisScaleMax-S.xaxisScaleMin),t*=this.width-S.marginLeft-S.marginRight,t=S.marginLeft+t)},this.getYCoord=function(t){if(t>this.scale.max&&!1===S.outofbounds)return null;S.xaxispos;return t<this.scale.min&&!1===S.outofbounds?null:(t=(t-this.scale.min)/(this.scale.max-this.scale.min),t*=this.height-S.marginTop-S.marginBottom,t=this.height-S.marginBottom-t)},this.highlight=function(t){t.setAttribute("stroke",S.highlightStroke),t.setAttribute("stroke-width",S.highlightLinewidth),t.setAttribute("fill",S.highlightFill),RGraph.SVG.REG.set("highlight",t)},this.drawLabelsAbove=function(t){var e=t.point,a=t.coordX,i=t.coordY;t="string"==typeof e.above?e.above:(e.x=RGraph.SVG.numberFormat({object:this,num:e.x.toFixed(S.labelsAboveXDecimals),prepend:"string"==typeof S.labelsAboveXUnitsPre?S.labelsAboveXUnitsPre:null,append:"string"==typeof S.labelsAboveXUnitsPost?S.labelsAboveXUnitsPost:null,point:"string"==typeof S.labelsAboveXPoint?S.labelsAboveXPoint:null,thousand:"string"==typeof S.labelsAboveXThousand?S.labelsAboveXThousand:null,formatter:"function"==typeof S.labelsAboveXFormatter?S.labelsAboveXFormatter:null}),e.y=RGraph.SVG.numberFormat({object:this,num:e.y.toFixed(S.labelsAboveYDecimals),prepend:"string"==typeof S.labelsAboveYUnitsPre?S.labelsAboveYUnitsPre:null,append:"string"==typeof S.labelsAboveYUnitsPost?S.labelsAboveYUnitsPost:null,point:"string"==typeof S.labelsAboveYPoint?S.labelsAboveYPoint:null,thousand:"string"==typeof S.labelsAboveYThousand?S.labelsAboveYThousand:null,formatter:"function"==typeof S.labelsAboveYFormatter?S.labelsAboveYFormatter:null}),"{1}{2}{3}".format(e.x,S.labelsAboveSeparator,e.y));e=RGraph.SVG.getTextConf({object:this,prefix:"labelsAbove"});RGraph.SVG.text({object:this,parent:this.svg.all,tag:"labels.above",text:t,x:parseFloat(a)+S.labelsAboveOffsetx,y:parseFloat(i)+S.labelsAboveOffsety,halign:S.labelsAboveHalign,valign:S.labelsAboveValign,font:e.font,size:e.size,bold:e.bold,italic:e.italic,color:e.color,background:S.labelsAboveBackground||null,padding:S.labelsAboveBackgroundPadding||0})},this.parseColors=function(){Object.keys(this.originalColors).length||(this.originalColors={colors:RGraph.SVG.arrayClone(S.colors),backgroundGridColor:RGraph.SVG.arrayClone(S.backgroundGridColor),highlightFill:RGraph.SVG.arrayClone(S.highlightFill),backgroundColor:RGraph.SVG.arrayClone(S.backgroundColor)});var t=S.colors;if(t&&!S.bubble)for(var e=0;e<t.length;++e)t[e]=RGraph.SVG.parseColorLinear({object:this,color:t[e]});S.backgroundGridColor=RGraph.SVG.parseColorLinear({object:this,color:S.backgroundGridColor}),S.highlightFill=RGraph.SVG.parseColorLinear({object:this,color:S.highlightFill}),S.backgroundColor=RGraph.SVG.parseColorLinear({object:this,color:S.backgroundColor})},this.on=function(t,e){return"on"!==t.substr(0,2)&&(t="on"+t),RGraph.SVG.addCustomEventListener(this,t,e),this},this.exec=function(t){return t(this),this},this.removeHighlight=function(){var t=RGraph.SVG.REG.get("highlight");t&&(t.setAttribute("fill","transparent"),RGraph.SVG.REG.set("highlight",null))},this.drawErrorbar=function(t){var e,a,i,s=RGraph.SVG.getErrorbarsMaxValue({object:this,index:t.sequential}),r=RGraph.SVG.getErrorbarsMinValue({object:this,index:t.sequential});(s||r)&&(e=RGraph.SVG.getErrorbarsLinewidth({object:this,index:t.sequential}),a=RGraph.SVG.getErrorbarsColor({object:this,index:t.sequential}),i=RGraph.SVG.getErrorbarsCapWidth({object:this,index:t.sequential})/2,0===s&&0===r||(s=this.getYCoord(t.valueY+s),y2=this.getYCoord(t.valueY-r),RGraph.SVG.create({svg:this.svg,type:"line",parent:t.parent,attr:{x1:t.x,y1:t.y,x2:t.x,y2:s,stroke:a,"stroke-width":e}}),RGraph.SVG.create({svg:this.svg,type:"line",parent:t.parent,attr:{x1:t.x-i,y1:s,x2:t.x+i,y2:s,stroke:a,"stroke-width":e}})),"number"==typeof r&&(RGraph.SVG.create({svg:this.svg,type:"line",parent:t.parent,attr:{x1:t.x,y1:t.y,x2:t.x,y2:y2,stroke:a,"stroke-width":e}}),RGraph.SVG.create({svg:this.svg,type:"line",parent:t.parent,attr:{x1:t.x-i,y1:y2,x2:t.x+i,y2:y2,stroke:a,"stroke-width":e}})))},this.tooltipSubstitutions=function(t){var e=RGraph.SVG.sequentialIndexToGrouped(t.index,this.data),a=e[0],e=e[1];return{index:e,dataset:a,sequentialIndex:t.index,value:this.data[a][e].y,values:[this.data[a][e].y]}},this.tooltipsFormattedCustom=function(t,e,a){var i=this.data[t.dataset][t.index].color||S.colorsDefault;return S.tooltipsFormattedKeyColors&&S.tooltipsFormattedKeyColors[t.dataset]&&(i=S.tooltipsFormattedKeyColors[t.dataset]),{label:S.tooltipsFormattedKeyLabels[t.dataset]||"",color:i}},this.positionTooltipStatic=function(t){var e=t.object,a=(t.event,t.tooltip),i=(t.index,RGraph.SVG.getSVGXY(e.svg)),e=this.coords[t.index];t.tooltip.style.left=i[0]+e.x-a.offsetWidth/2+"px",t.tooltip.style.top=i[1]+e.y-a.offsetHeight-15+"px"},this.drawTrendline=function(t){var e=S.trendlineColors,a=S.trendlineLinewidth,i=S.trendlineMargin;"object"==typeof(e=RGraph.SVG.isString(S.trendlineColor)?[S.trendlineColor]:e)&&e[t]?color=e[t]:"object"==typeof color&&(color="gray"),"object"==typeof a&&"number"==typeof a[t]?a=a[t]:"object"==typeof a&&(a=1),"object"==typeof i&&"number"==typeof i[t]?i=i[t]:"object"==typeof i&&(i=25);for(var s=0,r=0,o=0;s<this.data[t].length;++s)r+=this.data[t][s].x,o+=this.data[t][s].y;for(var l=r/this.data[t].length,n=o/this.data[t].length,s=0,h=[],d=[],c=[],p=[];s<this.data[t].length;++s)h[s]=this.data[t][s].x-l,d[s]=this.data[t][s].y-n,c[s]=h[s]*d[s],p[s]=h[s]*h[s];var u=RGraph.SVG.arraySum(c)/RGraph.SVG.arraySum(p),b=n-u*l;coords=[[S.xaxisScaleMin,u*S.xaxisScaleMin+b],[S.xaxisScaleMax,u*S.xaxisScaleMax+b]];var x="";S.trendlineDashed&&(x="4,4"),S.trendlineDotted&&(x="1, 4"),RGraph.SVG.isNull(S.trendlineDashArray)||"object"!=typeof S.trendlineDashArray||(x=String(S.trendlineDashArray).replace(/[|]/,""));for(var s=0,g=[],y=[];s<this.data[t].length;++s)"number"==typeof this.data[t][s].x&&g.push(this.data[t][s].x),"number"==typeof this.data[t][s].y&&y.push(this.data[t][s].y);var G=RGraph.SVG.arrayMin(g),f=RGraph.SVG.arrayMin(y),e=RGraph.SVG.arrayMax(g),u=RGraph.SVG.arrayMax(y),G=this.getXCoord(G),f=this.getYCoord(f,S.outofbounds),e=this.getXCoord(e),u=this.getYCoord(u,S.outofbounds),b=RGraph.SVG.create({svg:this.svg,parent:this.svg.defs,type:"clipPath",attr:{id:"trendline-clippath-dataset-"+t}});RGraph.SVG.create({svg:this.svg,parent:b,type:"rect",attr:{x:!1===S.trendlineClipping?S.marginLeft:G-i,y:!1===S.trendlineClipping?S.marginTop:u-i,width:!1===S.trendlineClipping?this.width-S.marginLeft-S.marginRight:e-G+i+i,height:!1===S.trendlineClipping?this.height-S.marginTop-S.marginBottom:f-u+i+i}});RGraph.SVG.create({svg:this.svg,parent:this.svg.all,type:"path",attr:{d:"M{1} {2} L{3} {4}".format(this.getXCoord(coords[0][0]),this.getYCoord(coords[0][1]),this.getXCoord(coords[1][0]),this.getYCoord(coords[1][1])),stroke:color,fill:"none","stroke-width":a,"stroke-dasharray":x,"stroke-linecap":"round","clip-path":"url(#trendline-clippath-dataset-"+t+")"}})},this};