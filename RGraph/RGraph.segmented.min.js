RGraph=window.RGraph||{isrgraph:!0,isRGraph:!0,rgraph:!0},RGraph.Segmented=function(t){var n,e=t.id,r=document.getElementById(e),s=t.min,a=t.max,h=t.value;this.id=e,this.canvas=r,this.context=this.canvas.getContext?this.canvas.getContext("2d",{alpha:"object"!=typeof e||!1!==e.alpha}):null,(this.canvas.__object__=this).type="segmented",this.min=RGraph.stringsToNumbers(s),this.max=RGraph.stringsToNumbers(a),this.value=RGraph.stringsToNumbers(h),this.centerx=null,this.centery=null,this.radius=null,this.isRGraph=!0,this.isrgraph=!0,this.rgraph=!0,this.currentValue=null,this.uid=RGraph.createUID(),this.canvas.uid=this.canvas.uid||RGraph.createUID(),this.colorsParsed=!1,this.coordsText=[],this.original_colors=[],this.firstDraw=!0,this.value<=1e-7&&(this.value=1e-7),this.properties={radius:null,centerx:null,centery:null,width:null,marginLeft:15,marginRight:15,marginTop:15,marginBottom:15,backgroundColor:"black",colors:["red","#ddd"],textFont:"Arial, Verdana, sans-serif",textSize:null,textColor:"gray",textBold:!1,textItalic:!1,textAccessible:!0,textAccessibleOverflow:"visible",textAccessiblePointerevents:!1,text:null,labelsCenterFont:null,labelsCenterSize:null,labelsCenterColor:null,labelsCenterBold:null,labelsCenterItalic:null,labelsCenterUnitsPre:"",labelsCenterUnitsPost:"",labelsCenterDecimals:0,labelsCenterPoint:".",labelsCenterThousand:",",labelsCenterSpecific:"",labelsCenterSpecificFormattedDecimals:0,labelsCenterSpecificFormattedPoint:".",labelsCenterSpecificFormattedThousand:",",labelsCenterSpecificFormattedUnitsPre:"",labelsCenterSpecificFormattedUnitsPost:"",labelsCenterOffsetx:0,labelsCenterOffsety:0,radialsCount:36,contextmenu:null,annotatable:!1,annotatableColor:"black",adjustable:!1,effectRoundrobinMultiplier:1,clearto:"rgba(0,0,0,0)"},this.canvas?(n=this.properties,this.path=RGraph.pathObjectFunction,RGraph.Effects&&"function"==typeof RGraph.Effects.decorate&&RGraph.Effects.decorate(this),this.responsive=RGraph.responsive,this.set=function(t){var e=void 0===arguments[1]?null:arguments[1];if(1!==arguments.length||"object"!=typeof t)return n[t]=e,this;for(i in t)"string"==typeof i&&this.set(i,t[i]);return this},this.get=function(t){return n[t]},this.draw=function(){return RGraph.fireCustomEvent(this,"onbeforedraw"),this.canvas.__rgraph_aa_translated__||(this.context.translate(.5,.5),this.canvas.__rgraph_aa_translated__=!0),this.value>this.max&&(this.value=this.max),this.value<this.min&&(this.value=this.min),this.currentValue=this.value,this.marginLeft=n.marginLeft,this.marginRight=n.marginRight,this.marginTop=n.marginTop,this.marginBottom=n.marginBottom,this.centerx=(this.canvas.width-this.marginLeft-this.marginRight)/2+this.marginLeft,this.centery=(this.canvas.height-this.marginBottom-this.marginTop)/2+this.marginTop,this.radius=Math.min((this.canvas.width-this.marginLeft-this.marginRight)/2,(this.canvas.height-this.marginTop-this.marginBottom)/2),this.coordsText=[],"number"==typeof n.centerx&&(this.centerx=n.centerx),"number"==typeof n.centery&&(this.centery=n.centery),"number"==typeof n.radius&&(this.radius=n.radius),this.colorsParsed||(this.parseColors(),this.colorsParsed=!0),this.drawMeter(),this.drawLabel(),n.contextmenu&&RGraph.showContext(this),RGraph.addCustomText(this),RGraph.installEventListeners(this),this.firstDraw&&(this.firstDraw=!1,RGraph.fireCustomEvent(this,"onfirstdraw"),this.firstDrawFunc()),RGraph.fireCustomEvent(this,"ondraw"),this},this.exec=function(t){return t(this),this},this.drawMeter=function(){var t="number"==typeof n.width?n.width:this.radius/2;"string"==typeof n.width&&(t+=Number(n.width)),n.backgroundColor&&this.path("fs % fr -5 -5 % %",n.backgroundColor,this.canvas.width+10,this.canvas.height+10);var e=360/n.radialsCount;e/=2,colored=Math.round((this.value-this.min)/(this.max-this.min)*(2*n.radialsCount));for(var i=1;i<2*n.radialsCount;i+=2){var r=RGraph.toRadians(i*e-e/2)*n.effectRoundrobinMultiplier-RGraph.HALFPI,s=RGraph.toRadians(i*e+e/2)*n.effectRoundrobinMultiplier-RGraph.HALFPI;this.path("b a % % % % % false a % % % % % true f % ",this.centerx,this.centery,this.radius,r,s,this.centerx,this.centery,this.radius-t,s,r,i>=colored?n.colors[1]:n.colors[0])}this.context.lineWidth=1},this.drawLabel=function(){RGraph.isNull(n.textSize)&&(n.textSize=this.radius/2.5);var t=RGraph.getTextConf({object:this,prefix:"labelsCenter"});n.labelsCenterSpecific&&n.labelsCenterSpecific.length&&(n.labelsCenterSpecific=RGraph.labelSubstitution({object:this,text:n.labelsCenterSpecific,index:0,value:this.value,decimals:n.labelsCenterSpecificFormattedDecimals||0,unitsPre:n.labelsCenterSpecificFormattedUnitsPre||"",unitsPost:n.labelsCenterSpecificFormattedUnitsPost||"",thousand:n.labelsCenterSpecificFormattedThousand||",",point:n.labelsCenterSpecificFormattedPoint||"."})),RGraph.text({object:this,font:t.font,italic:t.italic,bold:t.bold,size:t.size,color:t.color,x:this.centerx+n.labelsCenterOffsetx,y:this.centery+n.labelsCenterOffsety,text:n.labelsCenterSpecific||RGraph.numberFormat({object:this,number:(this.value*n.effectRoundrobinMultiplier).toFixed(n.labelsCenterDecimals),unitspre:n.labelsCenterUnitsPre,unitspost:n.labelsCenterUnitsPost,point:n.labelsCenterPoint,thousand:n.labelsCenterThousand}),halign:"center",valign:"center",accessible:n.textAccessible})},this.getShape=function(t){},this.getValue=function(t){var e="number"==typeof t?t:(e=RGraph.getMouseXY(t),RGraph.getAngleByXY(this.centerx,this.centery,e[0],e[1]));(e+=RGraph.HALFPI)>RGraph.TWOPI&&(e-=RGraph.TWOPI);e=e/RGraph.TWOPI*(this.max-this.min)+this.min,e=Math.max(e,this.min);return e=Math.min(e,this.max)},this.getObjectByXY=function(t){var e=RGraph.getMouseXY(t),t=n.width,e=RGraph.getHypLength(this.centerx,this.centery,e[0],e[1]);return"string"==typeof t?t=this.radius/2+parseFloat(t):RGraph.isNull(t)&&(t=this.radius/2),e>this.radius||e<this.radius-t?null:this},this.adjusting_mousemove=function(t){n.adjustable&&RGraph.Registry.get("adjusting")&&RGraph.Registry.get("adjusting").uid==this.uid&&(this.value=this.getValue(t),RGraph.clear(this.canvas),RGraph.redrawCanvas(this.canvas),RGraph.fireCustomEvent(this,"onadjust"))},this.getAngle=function(t){if("number"==typeof t){if(t>this.max||t<this.min)return null;var e=(t-this.min)/(this.max-this.min)*RGraph.TWOPI-RGraph.HALFPI;t===this.max&&(e-=1e-5),t===this.min&&(e+=1e-5)}else{var i=t.offsetX,t=t.offsetY;(e=RGraph.getAngleByXY({cx:this.centerx,cy:this.centery,x:i,y:t}))>RGraph.PI+RGraph.HALFPI&&(e-=RGraph.TWOPI)}return e},this.parseColors=function(){0===this.original_colors.length&&(this.original_colors.backgroundColor=RGraph.arrayClone(n.backgroundColor),this.original_colors.colors=RGraph.arrayClone(n.colors)),n.backgroundColor=this.parseSingleColorForGradient(n.backgroundColor);var t=n.colors;if(t&&t.length)for(var e=0;e<t.length;++e)t[e]=this.parseSingleColorForGradient(t[e])},this.reset=function(){},this.parseSingleColorForGradient=function(t){if(!t||"string"!=typeof t)return t;if(t.match(/^gradient\((.*)\)$/i)){if(t.match(/^gradient\(({.*})\)$/i))return RGraph.parseJSONGradient({object:this,def:RegExp.$1,radial:!0});var e=RegExp.$1.split(":"),i=this.context.createLinearGradient(n.marginLeft,0,this.canvas.width-n.marginLeft-n.marginRight,0),r=1/(e.length-1);i.addColorStop(0,RGraph.trim(e[0]));for(var s=1,a=e.length;s<a;++s)i.addColorStop(s*r,RGraph.trim(e[s]))}return i||t},this.on=function(t,e){return"function"!=typeof this[t="on"!==t.substr(0,2)?"on"+t:t]?this[t]=e:RGraph.addCustomEventListener(this,t,e),this},this.firstDrawFunc=function(){},this.grow=function(){var e=this;e.currentValue=e.currentValue||e.min;var i=(arguments[0]||{}).frames||30,r=0,s=(e.value-e.currentValue)/i,a=arguments[1]||function(){},n=e.currentValue;return function t(){e.value=n+r++*s,RGraph.clear(e.canvas),RGraph.redrawCanvas(e.canvas),r<=i?RGraph.Effects.updateCanvas(t):a(e)}(),this},this.roundrobin=this.roundRobin=function(){function t(){e.set({effectRoundrobinMultiplier:RGraph.Effects.getEasingMultiplier(a,s)}),RGraph.redrawCanvas(e.canvas),s<a?(RGraph.Effects.updateCanvas(t),s++):(RGraph.redrawCanvas(e.canvas),r(e))}var e=this,i=arguments[0]||{},r=arguments[1]||function(){},s=0,a=i.frames||30;this.radius;return t(),this},RGraph.register(this),RGraph.parseObjectStyleConfig(this,t.options)):alert("[SDONUT] No canvas support")};