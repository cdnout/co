RGraph=window.RGraph||{isrgraph:!0,isRGraph:!0,rgraph:!0},RGraph.Line=function(t){var i=t.id,e=document.getElementById(i);t.data;if(this.id=i,this.canvas=e,this.context=this.canvas.getContext("2d"),(this.canvas.__object__=this).type="line",this.max=0,this.coords=[],this.coords2=[],this.coords.key=[],this.coordsText=[],this.coordsSpline=[],this.coordsAxes={xaxis:[],yaxis:[]},this.hasnegativevalues=!1,this.isRGraph=!0,this.isrgraph=!0,this.rgraph=!0,this.uid=RGraph.createUID(),this.canvas.uid=this.canvas.uid||RGraph.createUID(),this.colorsParsed=!1,this.original_colors=[],this.firstDraw=!0,this.properties={backgroundBarsCount:null,backgroundBarsColor1:"rgba(0,0,0,0)",backgroundBarsColor2:"rgba(0,0,0,0)",backgroundGrid:1,backgroundGridLinewidth:1,backgroundGridHsize:25,backgroundGridVsize:25,backgroundGridColor:"#ddd",backgroundGridVlines:!0,backgroundGridHlines:!0,backgroundGridBorder:!0,backgroundGridAutofit:!0,backgroundGridAutofitAlign:!0,backgroundGridHlinesCount:5,backgroundGridVlinesCount:null,backgroundGridDashed:!1,backgroundGridDotted:!1,backgroundHbars:null,backgroundImage:null,backgroundImageStretch:!0,backgroundImageX:null,backgroundImageY:null,backgroundImageW:null,backgroundImageH:null,backgroundImageAlign:null,backgroundColor:null,xaxis:!0,xaxisLinewidth:1,xaxisColor:"black",xaxisTickmarks:!0,xaxisTickmarksLength:3,xaxisTickmarksLastLeft:null,xaxisTickmarksLastRight:null,xaxisTickmarksCount:null,xaxisLabels:null,xaxisLabelsFormattedDecimals:0,xaxisLabelsFormattedPoint:".",xaxisLabelsFormattedThousand:",",xaxisLabelsFormattedUnitsPre:"",xaxisLabelsFormattedUnitsPost:"",xaxisLabelsSize:null,xaxisLabelsFont:null,xaxisLabelsItalic:null,xaxisLabelsBold:null,xaxisLabelsColor:null,xaxisLabelsOffsetx:0,xaxisLabelsOffsety:0,xaxisLabelsHalign:null,xaxisLabelsValign:null,xaxisLabelsPosition:"edge",xaxisLabelsSpecificAlign:"left",xaxisPosition:"bottom",xaxisLabelsAngle:0,xaxisTitle:"",xaxisTitleBold:null,xaxisTitleSize:null,xaxisTitleFont:null,xaxisTitleColor:null,xaxisTitleItalic:null,xaxisTitlePos:null,xaxisTitleOffsetx:0,xaxisTitleOffsety:0,xaxisTitleX:null,xaxisTitleY:null,xaxisTitleHalign:"center",xaxisTitleValign:"top",yaxis:!0,yaxisLinewidth:1,yaxisColor:"black",yaxisTickmarks:!0,yaxisTickmarksCount:null,yaxisTickmarksLastTop:null,yaxisTickmarksLastBottom:null,yaxisTickmarksLength:3,yaxisScale:!0,yaxisScaleMin:0,yaxisScaleMax:null,yaxisScaleUnitsPre:"",yaxisScaleUnitsPost:"",yaxisScaleDecimals:0,yaxisScalePoint:".",yaxisScaleThousand:",",yaxisScaleRound:!1,yaxisScaleFormatter:null,yaxisScaleInvert:!1,yaxisLabelsSpecific:null,yaxisLabelsCount:5,yaxisLabelsOffsetx:0,yaxisLabelsOffsety:0,yaxisLabelsHalign:null,yaxisLabelsValign:null,yaxisLabelsFont:null,yaxisLabelsSize:null,yaxisLabelsColor:null,yaxisLabelsBold:null,yaxisLabelsItalic:null,yaxisLabelsPosition:"edge",yaxisPosition:"left",yaxisTitle:"",yaxisTitleBold:null,yaxisTitleSize:null,yaxisTitleFont:null,yaxisTitleColor:null,yaxisTitleItalic:null,yaxisTitlePos:null,yaxisTitleX:null,yaxisTitleY:null,yaxisTitleOffsetx:0,yaxisTitleOffsety:0,yaxisTitleHalign:null,yaxisTitleValign:null,yaxisTitleAccessible:null,labelsAbove:!1,labelsAboveDecimals:null,labelsAboveSize:null,labelsAboveColor:null,labelsAboveFont:null,labelsAboveBold:null,labelsAboveItalic:null,labelsAboveBackground:"rgba(255,255,255,0.7)",labelsAboveBorder:!1,labelsAboveUnitsPre:"",labelsAboveUnitsPost:"",labelsAboveSpecific:null,labelsAboveOffsetx:0,labelsAboveOffsety:0,labelsAboveFormatter:null,linewidth:2.001,linecap:"round",linejoin:"round",colors:["red","#0f0","#00f","#f0f","#ff0","#0ff","green","pink","blue","black"],tickmarksStyle:"none",tickmarksLinewidth:null,tickmarksSize:3,tickmarksColor:null,tickmarksStyleDotStroke:"white",tickmarksStyleDotFill:null,tickmarksStyleDotLinewidth:3,tickmarksStyleImage:null,tickmarksStyleImageHalign:"center",tickmarksStyleImageValign:"center",tickmarksStyleImageOffsetx:0,tickmarksStyleImageOffsety:0,marginLeft:35,marginRight:35,marginTop:35,marginBottom:35,marginInner:0,filledColors:null,textBold:!1,textItalic:!1,textSize:12,textColor:"black",textFont:"Arial, Verdana, sans-serif",textAccessible:!0,textAccessibleOverflow:"visible",textAccessiblePointerevents:!1,text:null,title:"",titleBackground:null,titleHpos:null,titleVpos:null,titleFont:null,titleSize:null,titleColor:null,titleBold:null,titleItalic:null,titleX:null,titleY:null,titleHalign:null,titleValign:null,titleOffsetx:0,titleOffsety:0,shadow:!0,shadowOffsetx:2,shadowOffsety:2,shadowBlur:3,shadowColor:"rgba(128,128,128,0.5)",tooltips:null,tooltipsHotspotXonly:!1,tooltipsHotspotSize:5,tooltipsEffect:"slide",tooltipsCssClass:"RGraph_tooltip",tooltipsCss:null,tooltipsEvent:"onmousemove",tooltipsHighlight:!0,tooltipsCoordsPage:!1,tooltipsFormattedThousand:",",tooltipsFormattedPoint:".",tooltipsFormattedDecimals:0,tooltipsFormattedUnitsPre:"",tooltipsFormattedUnitsPost:"",tooltipsFormattedKeyColors:null,tooltipsFormattedKeyColorsShape:"square",tooltipsFormattedKeyLabels:[],tooltipsFormattedListType:"ul",tooltipsFormattedListItems:null,tooltipsFormattedTableHeaders:null,tooltipsFormattedTableData:null,tooltipsDataset:null,tooltipsDatasetEvent:"click",tooltipsPointer:!0,tooltipsPositionStatic:!0,highlightStyle:null,highlightStroke:"gray",highlightFill:"white",highlightPointRadius:2,stepped:!1,key:null,keyBackground:"white",keyPosition:"graph",keyHalign:null,keyShadow:!1,keyShadowColor:"#666",keyShadowBlur:3,keyShadowOffsetx:2,keyShadowOffsety:2,keyPositionMarginBoxed:!1,keyPositionX:null,keyPositionY:null,keyColorShape:"square",keyRounded:!0,keyLinewidth:1,keyColors:null,keyInteractive:!1,keyInteractiveHighlightChartStroke:"rgba(255,0,0,0.3)",keyInteractiveHighlightLabel:"rgba(255,0,0,0.2)",keyLabelsFont:null,keyLabelsSize:null,keyLabelsColor:null,keyLabelsBold:null,keyLabelsItalic:null,keyLabelsOffsetx:0,keyLabelsOffsety:0,contextmenu:null,crosshairs:!1,crosshairsColor:"#333",crosshairsHline:!0,crosshairsVline:!0,annotatable:!1,annotatableColor:"black",annotatableLinewidth:1,filled:!1,filledRange:!1,filledRangeThreshold:null,filledRangeThresholdColors:["red","green"],filledAccumulative:!0,variant:null,axesAbove:!1,backdrop:!1,backdropSize:30,backdropAlpha:.2,adjustable:!1,adjustableOnly:null,adjustableXonly:!1,redraw:!0,outofbounds:!1,outofboundsClip:!1,animationFactor:1,animationUnfoldX:!1,animationUnfoldY:!0,animationUnfoldInitial:2,animationTraceClip:1,animationTraceCenter:!1,spline:!1,lineVisible:[],errorbars:!1,errorbarsColor:"black",errorbarsCapped:!0,errorbarsCappedWidth:12,errorbarsLinewidth:1,combinedEffect:null,combinedEffectOptions:null,combinedEffectCallback:null,clearto:"rgba(0,0,0,0)",dotted:!1,dashed:!1,trendline:!1,trendlineColors:["#666"],trendlineLinewidth:1,trendlineMargin:25,trendlineDashed:!1,trendlineDotted:!1,trendlineDashArray:null,trendlineClip:!0,nullBridge:!1,nullBridgeLinewidth:null,nullBridgeColors:null,nullBridgeDashArray:[5,5],labelsAngled:!1,labelsAngledSpecific:null,labelsAngledAccessible:null,labelsAngledFont:null,labelsAngledColor:null,labelsAngledSize:null,labelsAngledBold:null,labelsAngledItalic:null,labelsAngledUpFont:null,labelsAngledUpColor:null,labelsAngledUpSize:null,labelsAngledUpBold:null,labelsAngledUpItalic:null,labelsAngledDownFont:null,labelsAngledDownColor:null,labelsAngledDownSize:null,labelsAngledDownBold:null,labelsAngledDownItalic:null,labelsAngledLevelFont:null,labelsAngledLevelColor:null,labelsAngledLevelSize:null,labelsAngledLevelBold:null,labelsAngledILeveltalic:null},this.original_data=RGraph.stringsToNumbers(t.data),"number"!=typeof this.original_data[0]&&!RGraph.isNull(this.original_data[0])||(this.original_data=[RGraph.arrayClone(this.original_data)]),this.canvas){this.data_arr=RGraph.arrayLinearize(this.original_data);for(var a=0;a<this.data_arr.length;++a)this["$"+a]={};var C=this.properties;this.path=RGraph.pathObjectFunction,RGraph.Effects&&"function"==typeof RGraph.Effects.decorate&&RGraph.Effects.decorate(this),this.responsive=RGraph.responsive,this.set=function(t){var i=void 0===arguments[1]?null:arguments[1];if(1!==arguments.length||"object"!=typeof t)return C[t]=i,this;for(a in t)"string"==typeof a&&this.set(a,t[a]);return this},this.get=function(t){return C[t]},this.draw=function(){if("string"==typeof C.backgroundImage&&RGraph.drawBackgroundImage(this),RGraph.fireCustomEvent(this,"onbeforedraw"),this.canvas.__rgraph_aa_translated__||(this.context.translate(.5,.5),this.canvas.__rgraph_aa_translated__=!0),this.colorsParsed||(this.parseColors(),this.colorsParsed=!0),this.marginLeft=C.marginLeft,this.marginRight=C.marginRight,this.marginTop=C.marginTop,this.marginBottom=C.marginBottom,C.xaxisLabels&&C.xaxisLabels.length){"string"==typeof C.xaxisLabels&&(C.xaxisLabels=RGraph.arrayPad({array:[],length:this.original_data[0].length,value:C.xaxisLabels}));for(var t=0;t<C.xaxisLabels.length;++t)C.xaxisLabels[t]=RGraph.labelSubstitution({object:this,text:C.xaxisLabels[t],index:t,value:this.original_data[0][t],decimals:C.xaxisLabelsFormattedDecimals||0,unitsPre:C.xaxisLabelsFormattedUnitsPre||"",unitsPost:C.xaxisLabelsFormattedUnitsPost||"",thousand:C.xaxisLabelsFormattedThousand||",",point:C.xaxisLabelsFormattedPoint||"."})}if(this.data=RGraph.arrayClone(this.original_data),this.max=0,C.filled&&!C.filledRange&&1<this.data.length&&C.filledAccumulative)for(var i=[],e=0;e<this.data.length;++e)for(var a=0;a<this.data[e].length;++a)this.data[e][a]=Number(i[a]||0)+this.data[e][a],i[a]=this.data[e][a];if(C.yaxisScaleMax){if(this.max=C.yaxisScaleMax,this.min=C.yaxisScaleMin||0,this.scale2=RGraph.getScale({object:this,options:{"scale.max":this.max,"scale.min":C.yaxisScaleMin,"scale.strict":!0,"scale.thousand":C.yaxisScaleThousand,"scale.point":C.yaxisScalePoint,"scale.decimals":C.yaxisScaleDecimals,"scale.labels.count":C.yaxisLabelsCount,"scale.round":C.yaxisScaleRound,"scale.units.pre":C.yaxisScaleUnitsPre,"scale.units.post":C.yaxisScaleUnitsPost}}),this.max=this.scale2.max||0,!C.outofbounds)for(dataset=0;dataset<this.data.length;++dataset)if(RGraph.isArray(this.data[dataset]))for(var s=0;s<this.data[dataset].length;s++)this.hasnegativevalues=this.data[dataset][s]<0||this.hasnegativevalues}else{for(this.min=C.yaxisScaleMin||0,dataset=0;dataset<this.data.length;++dataset)for(s=0;s<this.data[dataset].length;s++)this.max=Math.max(this.max,this.data[dataset][s]?Math.abs(parseFloat(this.data[dataset][s])):0),C.outofbounds||(this.hasnegativevalues=this.data[dataset][s]<0||this.hasnegativevalues);this.scale2=RGraph.getScale({object:this,options:{"scale.max":this.max,"scale.min":C.yaxisScaleMin,"scale.thousand":C.yaxisScaleThousand,"scale.point":C.yaxisScalePoint,"scale.decimals":C.yaxisScaleDecimals,"scale.labels.count":C.yaxisLabelsCount,"scale.round":C.yaxisScaleRound,"scale.units.pre":C.yaxisScaleUnitsPre,"scale.units.post":C.yaxisScaleUnitsPost,"scale.formatter":C.yaxisScaleFormatter}}),this.max=this.scale2.max||0}C.contextmenu&&RGraph.showContext(this),this.coords=[],this.coordsText=[],this.grapharea=this.canvas.height-this.marginTop-this.marginBottom,this.halfgrapharea=this.grapharea/2,this.halfTextHeight=C.textSize/2,"3d"==C.variant&&RGraph.draw3DAxes(this),RGraph.Background.draw(this),C.backgroundHbars&&0<C.backgroundHbars.length&&RGraph.drawBars(this),C.axesAbove||this.drawAxes(),this.context.save(),this.context.beginPath(),C.animationTraceCenter?this.context.rect(this.canvas.width/2*(1-C.animationTraceClip),0,this.canvas.width*C.animationTraceClip,this.canvas.height):this.context.rect(0,0,this.canvas.width*C.animationTraceClip,this.canvas.height),this.context.clip();for(var o,t=0,l=0,r=this.data.length;t<r;t++,l++)this.context.beginPath(),C.filled||this.setShadow(t),C.filledColors?"object"==typeof C.filledColors&&C.filledColors[l]?o=C.filledColors[l]:("object"==typeof C.filledColors&&0<C.filledColors.toString().indexOf("Gradient")||"string"==typeof C.filledColors)&&(o=C.filledColors):o=C.filled?C.colors[l]:null,n=C.tickmarksStyle&&"object"==typeof C.tickmarksStyle?C.tickmarksStyle[t]:C.tickmarksStyle&&"string"==typeof C.tickmarksStyle||C.tickmarksStyle&&"function"==typeof C.tickmarksStyle?C.tickmarksStyle:null,C.outofboundsClip&&this.path("sa b r % % % % cl b",0,this.marginTop,this.canvas.width,this.canvas.height-this.marginTop-this.marginBottom),this.drawLine(this.data[t],C.colors[l],o,this.getLineWidth(l),n,t),C.outofboundsClip&&this.context.restore(),this.context.stroke();if(C.outofboundsClip&&this.path("sa b r % % % % cl b",0,this.marginTop,this.canvas.width,this.canvas.height-this.marginTop-this.marginBottom),C.filled&&C.filledAccumulative&&!C.spline){for(t=0;t<this.coords2.length;++t){this.context.beginPath(),this.context.lineWidth=this.getLineWidth(t),this.context.strokeStyle=this.hidden(t)?"rgba(0,0,0,0)":C.colors[t];for(l=0,r=this.coords2[t].length;l<r;++l)0==l||null==this.coords2[t][l][1]||this.coords2[t][l-1]&&null==this.coords2[t][l-1][1]?this.context.moveTo(this.coords2[t][l][0],this.coords2[t][l][1]):(C.stepped&&this.context.lineTo(this.coords2[t][l][0],this.coords2[t][l-1][1]),this.context.lineTo(this.coords2[t][l][0],this.coords2[t][l][1]));this.context.stroke()}if(C.tickmarksStyle){this.context.beginPath(),this.context.fillStyle="white";for(t=0,r=this.coords2.length;t<r;++t){this.context.beginPath(),this.context.strokeStyle=C.colors[t];for(l=0;l<this.coords2[t].length;++l)"object"==typeof this.coords2[t][l]&&"number"==typeof this.coords2[t][l][0]&&"number"==typeof this.coords2[t][l][1]&&(n="object"==typeof C.tickmarksStyle?C.tickmarksStyle[t]:C.tickmarksStyle,this.drawTick(this.coords2[t],this.coords2[t][l][0],this.coords2[t][l][1],this.context.strokeStyle,!1,0==l?0:this.coords2[t][l-1][0],0==l?0:this.coords2[t][l-1][1],n,l,t))}this.context.stroke(),this.context.fill()}}else if(C.filled&&C.filledAccumulative&&C.spline){for(t=0;t<this.coordsSpline.length;t+=1){this.context.beginPath(),this.context.strokeStyle=C.colors[t],this.context.lineWidth=this.getLineWidth(t);for(l=0,r=this.coordsSpline[t].length;l<r;l+=1){a=this.coordsSpline[t][l];0==l?this.context.moveTo(a[0],a[1]):this.context.lineTo(a[0],a[1])}this.context.stroke()}for(t=0,r=this.coords2.length;t<r;t+=1)for(var n,l=0,h=this.coords2[t].length;l<h;++l)"object"==typeof this.coords2[t][l]&&"number"==typeof this.coords2[t][l][0]&&"number"==typeof this.coords2[t][l][1]&&(n="object"!=typeof C.tickmarksStyle||RGraph.isNull(C.tickmarksStyle)?C.tickmarksStyle:C.tickmarksStyle[t],this.context.strokeStyle=C.colors[t],this.drawTick(this.coords2[t],this.coords2[t][l][0],this.coords2[t][l][1],C.colors[t],!1,0==l?0:this.coords2[t][l-1][0],0==l?0:this.coords2[t][l-1][1],n,l,t))}if(C.nullBridge)for(t=0;t<this.data.length;++t)this.nullBridge(t,this.data[t]);if(C.outofboundsClip&&this.context.restore(),this.context.restore(),this.context.beginPath(),C.axesAbove&&this.drawAxes(),this.drawLabels(),this.drawRange(),C.key&&C.key.length&&RGraph.drawKey&&RGraph.drawKey(this,C.key,C.colors),C.labelsAbove&&this.drawAboveLabels(),RGraph.drawInGraphLabels(this),C.filled&&C.filledRange&&2==this.data.length){this.context.beginPath();r=this.coords.length/2;this.context.lineWidth=C.linewidth,this.context.strokeStyle=this.hidden(0)?"rgba(0,0,0,0)":C.colors[0];for(t=0;t<r;++t)RGraph.isNull(this.coords[t][1])||(0==t?this.context.moveTo(this.coords[t][0],this.coords[t][1]):this.context.lineTo(this.coords[t][0],this.coords[t][1]));this.context.stroke(),this.context.beginPath(),C.colors[1]&&(this.context.strokeStyle=this.hidden(1)?"rgba(0,0,0,0)":C.colors[1]);for(t=this.coords.length-1;r<=t;--t)RGraph.isNull(this.coords[t][1])||(t==this.coords.length-1?this.context.moveTo(this.coords[t][0],this.coords[t][1]):this.context.lineTo(this.coords[t][0],this.coords[t][1]));this.context.stroke()}else C.filled&&C.filledRange&&alert("[LINE] You must have only two sets of data for a filled range chart");for(t=0;t<this.data.length;++t)(RGraph.isArray(C.trendline)&&C.trendline[t]||!RGraph.isArray(C.trendline)&&C.trendline)&&this.drawTrendline(t);return RGraph.addCustomText(this),RGraph.installEventListeners(this),C.tooltipsDataset&&this.addDatasetTooltip(),this.firstDraw&&(this.firstDraw=!1,RGraph.fireCustomEvent(this,"onfirstdraw"),this.firstDrawFunc()),RGraph.fireCustomEvent(this,"ondraw"),this},this.exec=function(t){return t(this),this},this.drawAxes=function(){this.context.beginPath(),RGraph.drawXAxis(this),RGraph.drawYAxis(this),this.context.beginPath()},this.drawLabels=function(){},this.drawLine=function(t,i,e,a,s,o){if(C.animationUnfoldY&&1!=C.animationFactor)for(var l=0;l<t.length;++l)t[l]*=C.animationFactor;var r=!1,n=null,h=0;this.context.lineWidth=1;var d,c=[];0<o&&(d=this.coords2[o-1]),this.setLinecap({index:o}),this.setLinejoin({index:o});var g=(this.canvas.width-2*C.marginInner-this.marginLeft-this.marginRight)/(t.length-1);for(l=0,b=t.length;l<b;l+=1){var u=t[l],n=this.getYCoord(u);(null==t[l]||"bottom"==C.xaxisPosition&&t[l]<this.min&&!C.outofbounds||"center"==C.xaxisPosition&&t[l]<-1*this.max&&!C.outofbounds||(t[l]<this.min&&"center"!==C.xaxisPosition||t[l]>this.max)&&!C.outofbounds)&&(n=null),0<l?h+=g:h=C.marginInner+this.marginLeft,C.animationUnfoldX&&(h*=C.animationFactor)<C.marginLeft&&(h=C.marginLeft),this.coords.push([h,n]),c.push([h,n])}this.context.stroke(),this.coords2[o]=c,this.context.beginPath(),this.context.strokeStyle="rgba(0,0,0,0)",e&&(this.context.fillStyle=e);var p,f=C.stepped,x=C.filled;"top"==C.xaxisPosition?p=this.marginTop:"center"==C.xaxisPosition?p=this.marginTop+this.grapharea/2:"bottom"==C.xaxisPosition&&(p=this.getYCoord(C.yaxisScaleMin));for(var l=0,b=c.length;l<b;l+=1){h=c[l][0],n=c[l][1];var m=c[l-1]?c[l-1][1]:null,y=l+1==c.length;!C.outofbounds&&(m<this.marginTop||m>this.canvas.height-this.marginBottom)&&(r=!0),r=0==l||r||!n||!m||m<this.marginTop?(C.filled&&!C.filledRange?(C.outofbounds&&null!==m&&null!==n||this.context.moveTo(h+1,p),"top"==C.xaxisPosition&&this.context.moveTo(h+1,p),f&&0<l&&this.context.lineTo(h,c[l-1][1]),this.context.lineTo(h,n)):RGraph.ISOLD&&null==n||this.context.moveTo(h+1,n),null==n):(f&&this.context.lineTo(h,c[l-1][1]),!(n>=this.marginTop&&n<=this.canvas.height-this.marginBottom||C.outofbounds)||(y&&C.filled&&!C.filledRange&&"right"==C.yaxisPosition&&--h,f&&y?f&&y&&this.context.lineTo(h,n):(this.context.lineTo(h,n),x&&c[l+1]&&null==c[l+1][1]&&this.context.lineTo(h,p)),!1))}if(C.filled&&!C.filledRange&&!C.spline){var v;C.filledColors;if(0<o&&C.filledAccumulative){this.context.lineTo(h,d?d[l-1][1]:this.canvas.height-this.marginBottom-1+("center"==C.xaxisPosition?(this.canvas.height-this.marginTop-this.marginBottom)/2:0));for(var k=l-1;0<=k;--k)this.context.lineTo(0==k?d[k][0]+1:d[k][0],d[k][1])}else"top"==C.xaxisPosition?(this.context.lineTo(h,C.marginTop+1),this.context.lineTo(c[0][0],C.marginTop+1)):"number"==typeof c[l-1][1]&&(v=this.getYCoord(0),this.context.lineTo(h,v),this.context.lineTo(c[0][0],v));this.context.fillStyle=this.hidden(o)?"rgba(0,0,0,0)":e,this.context.fill(),this.context.beginPath()}this.context.stroke(),C.backdrop&&this.drawBackdrop(c,i),this.context.save(),this.context.beginPath(),C.animationTraceCenter?this.context.rect(this.canvas.width/2*(1-C.animationTraceClip),0,this.canvas.width*C.animationTraceClip,this.canvas.height):this.context.rect(0,0,this.canvas.width*C.animationTraceClip,this.canvas.height),this.context.clip(),"null"!=typeof C.errorbars&&this.drawErrorbars(),this.setShadow(o),this.redrawLine(c,i,a,o),this.context.stroke(),RGraph.noShadow(this);for(var S,l=0;l<c.length;++l)l=Number(l),this.context.strokeStyle=i,f&&l==c.length-1&&this.context.beginPath(),("endcircle"!=s&&"endsquare"!=s&&"filledendsquare"!=s&&"endtick"!=s&&"endtriangle"!=s&&"arrow"!=s&&"filledarrow"!=s||0==l&&"arrow"!=s&&"filledarrow"!=s||l==c.length-1)&&(S=l<=0?null:c[l-1][0],m=l<=0?null:c[l-1][1],this.drawTick(t,c[l][0],c[l][1],i,!1,S,m,s,l,o));this.context.restore(),this.drawAngledLabels(),this.context.beginPath(),this.context.arc(this.canvas.width+5e4,this.canvas.height+5e4,2,0,6.38,1)},this.drawTick=function(t,i,e,a,s,o,l,r,n,h){if(C.tickmarksColor&&(a=C.tickmarksColor),!this.hidden(h)){if(RGraph.isNull(e))return!1;var d,c,g,u,p;e>this.canvas.height-this.marginBottom&&!C.outofbounds||e<this.marginTop&&!C.outofbounds||(this.context.beginPath(),this.path("lw % ss % fs %",C.tickmarksLinewidth||C.linewidth,s?C.shadowColor:a,s?C.shadowColor:a),"circle"==r||"round"==r||"filledcircle"==r||"endcircle"==r||"filledendcircle"===r?"round"!=r&&"circle"!=r&&"filledcircle"!=r&&("endcircle"!=r&&"filledendcircle"!==r||0!=n&&n!=t.length-1)||(this.path("b a % % % % % %",i+0,e+0,C.tickmarksSize,0,360/(180/RGraph.PI),!1),-1!==r.indexOf("filled")?this.path("fs %",s?C.shadowColor:a):this.path("fs %",s?C.shadowColor:"white"),this.context.fill(),this.context.stroke()):"halftick"==r?this.path("b m % % l % % s null",Math.round(i),e,Math.round(i),e+C.tickmarksSize):"tick"!=r&&("endtick"!=r||0!=n&&n!=t.length-1)?"cross"==r?(d=C.tickmarksSize,this.path("b m % % l % % m % % l % % s %",i-d,e-d,i+d,e+d,i+d,e-d,i-d,e+d,a)):"triangle"==r||"filledtriangle"==r||"endtriangle"==r&&(0==n||n==t.length-1)?this.path("b m % % l % % l % % c f % s null",Math.round(i-C.tickmarksSize),e+C.tickmarksSize,Math.round(i),e-C.tickmarksSize,Math.round(i+C.tickmarksSize),e+C.tickmarksSize,"filledtriangle"===r?s?C.shadowColor:this.context.strokeStyle:"white"):"borderedcircle"==r||"dot"==r?this.path("lw % b a % % % % % false c f % s %",C.tickmarksStyleDotLinewidth||1e-8,i,e,C.tickmarksSize,0,360/(180/RGraph.PI),C.tickmarksStyleDotFill||a,C.tickmarksStyleDotStroke||a):"square"==r||"rect"==r||"filledsquare"==r||"endsquare"==r&&(0==n||n==t.length-1)||"filledendsquare"==r&&(0==n||n==t.length-1)?(this.path("b r % % % % f % s %",Math.round(i-C.tickmarksSize),Math.round(e-C.tickmarksSize),2*C.tickmarksSize,2*C.tickmarksSize,"white",this.context.strokeStyle),"filledsquare"!=r&&"filledendsquare"!=r||this.path("b r % % % % f %",Math.round(i-C.tickmarksSize),Math.round(e-C.tickmarksSize),2*C.tickmarksSize,2*C.tickmarksSize,s?C.shadowColor:this.context.strokeStyle),this.path("f null s null")):"diamond"===r||"filleddiamond"===r||"enddiamond"===r&&(0==n||n==t.length-1)||"filledenddiamond"===r&&(0==n||n==t.length-1)?this.path("b m % % l % % l % % l % % c f % s",i-C.tickmarksSize,e,i,e-C.tickmarksSize,i+C.tickmarksSize,e,i,e+C.tickmarksSize,"filled"===r.substr(0,6)?s?C.shadowColor:this.context.strokeStyle:"white"):"filledarrow"==r?(C.spline&&(i=this.coordsSpline[h][this.coordsSpline[h].length-1][0],e=this.coordsSpline[h][this.coordsSpline[h].length-1][1],o=this.coordsSpline[h][this.coordsSpline[h].length-3][0],l=this.coordsSpline[h][this.coordsSpline[h].length-3][1]),c=Math.abs(i-o),g=Math.abs(e-l),u=e<l?Math.atan(c/g)+1.57:Math.atan(g/c)+3.14,this.path("b lj miter m % % a % % % % % false a % % % % % false c s % f %",i,e,i,e,C.tickmarksSize,u-.3,u-.3,i,e,C.tickmarksSize,u+.3,u+.3,this.context.strokeStyle,this.context.fillStyle)):"arrow"===r?(C.spline&&(i=this.coordsSpline[h][this.coordsSpline[h].length-1][0],e=this.coordsSpline[h][this.coordsSpline[h].length-1][1],o=this.coordsSpline[h][this.coordsSpline[h].length-2][0],l=this.coordsSpline[h][this.coordsSpline[h].length-2][1]),h=this.context.lineWidth,c=Math.abs(i-o),g=Math.abs(e-l),this.context.lineWidth,u=e<l?Math.atan(c/g)+1.57:Math.atan(g/c)+3.14,this.path("b lj miter m % % a % % % % % false m % % a % % % % % false s % lw %",i,e,i,e,C.tickmarksSize,u-.3,u-.3,i,e,i,e,C.tickmarksSize,u+.3,u+.3,this.context.strokeStyle,h)):"string"!=typeof r||"image:"!==r.substr(0,6)&&"data:"!==r.substr(0,5)&&"/"!==r.substr(0,1)&&"../"!==r.substr(0,3)&&"images/"!==r.substr(0,7)&&"src:"!==r.substr(0,4)?"function"==typeof r&&r(this,t,t[n],n,i,e,a,o,l):(l=new Image,"image:"===r.substr(0,6)?l.src=r.substr(6):"src:"===r.substr(0,4)?l.src=r.substr(4):l.src=r,p=this,l.onload=function(){"center"===C.tickmarksStyleImageHalign&&(i-=this.width/2),"right"===C.tickmarksStyleImageHalign&&(i-=this.width),"center"===C.tickmarksStyleImageValign&&(e-=this.height/2),"bottom"===C.tickmarksStyleImageValign&&(e-=this.height),i+=C.tickmarksStyleImageOffsetx,e+=C.tickmarksStyleImageOffsety,p.context.drawImage(this,i,e)}):this.path("b m % % l % % s",Math.round(i),e-C.tickmarksSize,Math.round(i),e+C.tickmarksSize))}},this.drawRange=function(){if(C.filledRange&&C.filled){RGraph.isNull(C.filledRangeThreshold)&&(C.filledRangeThreshold=this.ymin,C.filledRangeThresholdColors=[C.filledColors,C.filledColors]);for(var t=0;t<2;++t){C.filledRangeThresholdColors;var i=this.getYCoord(C.filledRangeThreshold);this.context.save(),0==t?(this.context.beginPath(),this.context.rect(0,0,this.canvas.width,i)):(this.context.beginPath(),this.context.rect(0,i,this.canvas.width,this.canvas.height)),this.context.clip(),this.context.beginPath(),this.context.fillStyle=1==t?C.filledRangeThresholdColors[1]:C.filledRangeThresholdColors[0],this.context.lineWidth=this.hidden(t)?0:1;for(var e=this.coords.length/2,a=0;a<e;++a)RGraph.isNull(this.coords[a][1])||(0==a?this.context.moveTo(this.coords[a][0],this.coords[a][1]):this.context.lineTo(this.coords[a][0],this.coords[a][1]));for(a=this.coords.length-1;e<=a;--a)RGraph.isNull(this.coords[a][1])?this.context.moveTo(this.coords[a][0],this.coords[a][1]):this.context.lineTo(this.coords[a][0],this.coords[a][1]);this.context.fill(),this.context.restore()}}},this.redrawLine=function(t,i,e,a){if(C.redraw&&!C.filledRange)if(this.context.strokeStyle="object"==typeof i&&i&&-1==i.toString().indexOf("CanvasGradient")?i[0]:i,this.context.lineWidth=e,(C.dotted||C.dashed)&&(C.dashed?this.context.setLineDash([2,6]):C.dotted&&this.context.setLineDash([1,5])),this.hidden(a)&&(this.context.strokeStyle="rgba(0,0,0,0)"),C.spline)this.drawCurvyLine(t,this.hidden(a)?"rgba(0,0,0,0)":i,e,a);else{this.setLinejoin({index:a}),this.setLinecap({index:a}),this.context.beginPath();for(var s=t.length,o=this.canvas.width,l=this.canvas.height,r=!1,n=0;n<s;++n){t[n][0];var h=t[n][1];0<n&&(c=t[n-1][0],d=t[n-1][1]),r=(!(0==n&&t[n]||h<this.marginTop||d<this.marginTop||h>l-this.marginBottom||0<n&&c>o-this.marginRight||0<n&&d>l-this.marginBottom||null==d||1==r)||C.outofbounds&&null!=h&&null!=d?(C.stepped&&0<n&&this.context.lineTo(t[n][0],t[n-1][1]),this.context.lineTo(t[n][0],t[n][1])):RGraph.ISOLD&&null==h||this.context.moveTo(t[n][0],t[n][1]),!1)}if(C.colorsAlternate&&"object"==typeof i&&i[0]&&i[1])for(n=1;n<s;++n){var d,c=t[n-1][0];null!=(d=t[n-1][1])&&null!=t[n][1]&&(this.context.beginPath(),this.context.strokeStyle=i[t[n][1]<d?0:1],this.context.lineWidth=C.linewidth,this.context.moveTo(c,d),this.context.lineTo(t[n][0],t[n][1]),this.context.stroke())}this.context.stroke(),this.context.beginPath(),(C.dashed||C.dotted)&&this.context.setLineDash([1,0])}},this.drawBackdrop=function(t,i){var e=C.backdropSize;this.context.lineWidth=e,this.context.globalAlpha=C.backdropAlpha,this.context.strokeStyle=i;var a=[];if(this.context.beginPath(),C.spline&&!RGraph.ISOLD){for(var s=0;s<t.length;++s)a.push(t[s][1]);this.drawSpline(this.context,a,i,null)}else{this.context.moveTo(t[0][0],t[0][1]);for(var o=1;o<t.length;++o)this.context.lineTo(t[o][0],t[o][1])}this.context.stroke(),this.context.globalAlpha=1,RGraph.noShadow(this)},this.getLineWidth=function(t){var i=C.linewidth;return"number"==typeof i?i:"object"==typeof i?i[t]||i[0]:void 0},this.getShape=function(t){var i=this,e=RGraph.getMouseXY(t),a=e[0],s=e[1];arguments[1]&&(i=arguments[1]);for(var o=0;o<i.coords.length;++o){for(var l=i.coords[o][0],r=i.coords[o][1],n=0,h=o;h+1>this.data[n].length;)h-=this.data[n].length,n++;if(a<=l+C.tooltipsHotspotSize&&a>=l-C.tooltipsHotspotSize&&s<=r+C.tooltipsHotspotSize&&s>=r-C.tooltipsHotspotSize){if(RGraph.parseTooltipText&&(d=RGraph.parseTooltipText(C.tooltips,o)),!this.hidden(n))return{object:i,x:l,y:r,dataset:n,index:h,sequentialIndex:o,label:C.xaxisLabels&&"string"==typeof C.xaxisLabels[h]?C.xaxisLabels[h]:null,tooltip:"string"==typeof d?d:null}}else if(1==C.tooltipsHotspotXonly&&a<=l+C.tooltipsHotspotSize&&a>=l-C.tooltipsHotspotSize){var d=RGraph.parseTooltipText(C.tooltips,o);return{object:i,x:l,y:r,dataset:n,index:h,sequentialIndex:o,label:C.xaxisLabels&&"string"==typeof C.xaxisLabels[h]?C.xaxisLabels[h]:null,tooltip:d}}}},this.getShapeByX=function(t){var i=this,e=RGraph.getMouseXY(t),a=e[0];e[1];arguments[1]&&(i=arguments[1]);for(var s=0;s<i.coords.length;++s){for(var o=i.coords[s][0],l=i.coords[s][1],r=0,n=s;n+1>this.data[r].length;)n-=this.data[r].length,r++;if(a<=o+C.tooltipsHotspotSize&&a>=o-C.tooltipsHotspotSize)return{object:i,x:o,y:l,dataset:r,index:n,sequentialIndex:s,label:C.xaxisLabels&&"string"==typeof C.xaxisLabels[n]?C.xaxisLabels[n]:null}}},this.drawAboveLabels=function(){var t=C.labelsAboveUnitsPre,i=C.labelsAboveUnitsPost,e=C.labelsAboveDecimals,a=C.labelsAbovePoint,s=C.labelsAboveThousand,o=C.labelsAboveBackground||"white",l="boolean"!=typeof C.labelsAboveBorder&&"number"!=typeof C.labelsAboveBorder||C.labelsAboveBorder,r=C.labelsAboveOffsety,n=C.labelsAboveSpecific,h=C.labelsAboveFormatter,d=RGraph.getTextConf({object:this,prefix:"labelsAbove"});r-=d.size,this.context.beginPath();for(var c=0,g=this.coords.length;c<g;c+=1){var u=RGraph.sequentialIndexToGrouped(c,this.data),p=u[0],f=u[1],u=this.coords[c];RGraph.isNull(u[1])||this.hidden(p)||RGraph.text({object:this,font:d.font,size:d.size,color:d.color,bold:d.bold,italic:d.italic,x:u[0]+C.labelsAboveOffsetx,y:u[1]+r,text:n&&n[c]?n[c]:n?"":RGraph.numberFormat({object:this,number:"number"==typeof e?this.data_arr[c].toFixed(e):this.data_arr[c],value:"number"==typeof e?this.data_arr[c].toFixed(e):this.data_arr[c],unitspre:t,unitspost:i,point:a,thousand:s,formatter:h,index:f,dataset:p}),valign:"center",halign:"center",bounding:!0,boundingFill:o,boundingStroke:l?"black":"rgba(0,0,0,0)",tag:"labels.above"})}},this.drawCurvyLine=function(t,i,e,a){for(var s=[],o=0;o<t.length;++o)s.push(t[o][1]);if(C.filled){this.context.beginPath();var l=this.getYCoord(C.yaxisScaleMin);if(this.context.moveTo(t[0][0],l),this.drawSpline(this.context,s,i,a),C.filledAccumulative&&0<a)for(o=this.coordsSpline[a-1].length-1;0<=o;--o)this.context.lineTo(this.coordsSpline[a-1][o][0],this.coordsSpline[a-1][o][1]);else this.context.lineTo(t[t.length-1][0],l);this.context.fill()}this.context.beginPath(),this.drawSpline(this.context,s,i,a),this.context.stroke()},this.getValue=function(t){var i;i=2==t.length?(t[0],t[1]):((e=RGraph.getMouseXY(t))[0],e[1]);var t=this,e=C.xaxisPosition;if(i<C.marginTop)return"bottom"==e||"center"==e?this.max:this.min;if(i>this.canvas.height-C.marginBottom)return"bottom"==e?this.min:this.max;if("center"==C.xaxisPosition){var a=(t.grapharea/2-(i-C.marginTop))/t.grapharea*(t.max-t.min);return 0<(a*=2)?a+=this.min:a-=this.min,a}if("top"==C.xaxisPosition){a=(t.grapharea-(i-C.marginTop))/t.grapharea*(t.max-t.min);return a=-1*Math.abs(t.max-a)}a=(t.grapharea-(i-C.marginTop))/t.grapharea*(t.max-t.min);return a+=t.min},this.highlight=function(t){var i,e;C.tooltipsHighlight&&("function"==typeof C.highlightStyle?C.highlightStyle(t):"invert"===C.highlightStyle?(this.path("sa b r % % % % cl",C.marginLeft,C.marginTop,this.canvas.width-C.marginLeft-C.marginRight,this.canvas.height-C.marginTop-C.marginBottom),this.path("b m % % a % % 25 4.71 4.72 true l % % l % % l % % l % % l % % c f %",t.x,C.marginTop,t.x,t.y,t.x,C.marginTop,this.canvas.width-C.marginRight,C.marginTop,this.canvas.width-C.marginRight,this.canvas.height-C.marginBottom,C.marginLeft,this.canvas.height-C.marginBottom,C.marginLeft,C.marginTop,C.highlightFill),this.path("b a % % 25 0 6.29 false s % rs",t.x,t.y,C.highlightStroke)):"halo"===C.highlightStyle?(i=t.object,e=C.colors[t.dataset],i.path("b a % % 13 0 6.2830 false f rgba(255,255,255,0.75)",t.x,t.y),i.path("ga 0.15 b a % % 13 0 6.2830 false f % ga 1",t.x,t.y,e),i.path("b a % % 7 0 6.2830 false f white",t.x,t.y),i.path("b a % % 5 0 6.2830 false f %",t.x,t.y,e)):RGraph.Highlight.point(this,t))},this.getObjectByXY=function(t){t=RGraph.getMouseXY(t);if(t[0]>C.marginLeft-5&&t[0]<this.canvas.width-C.marginRight+5&&t[1]>C.marginTop-5&&t[1]<this.canvas.height-C.marginBottom+5)return this},this.adjusting_mousemove=function(t){var i,e;C.adjustable&&RGraph.Registry.get("adjusting")&&RGraph.Registry.get("adjusting").uid==this.uid&&(i=Number(this.getValue(t)),(e=RGraph.Registry.get("adjusting.shape"))&&(RGraph.Registry.set("adjusting.shape",e),this.original_data[e.dataset][e.index]=Number(i),RGraph.redrawCanvas(t.target),RGraph.fireCustomEvent(this,"onadjust")))},this.getYCoord=function(t){var i,e;if(!0===arguments[1]&&(i=!0),"number"!=typeof t)return null;var a=C.xaxisPosition;if("top"==a)e=(t-this.min)/(this.max-this.min)*this.grapharea,C.yaxisScaleInvert&&(e=this.grapharea-e),e+=this.marginTop;else if("center"==a)e=(t-this.min)/(this.max-this.min)*(this.grapharea/2),e=this.grapharea/2-e,e+=this.marginTop;else{if(!i&&(t<this.min||t>this.max)&&0==C.outofbounds)return null;e=(t-this.min)/(this.max-this.min)*this.grapharea,C.yaxisScaleInvert&&(e=this.grapharea-e),e=this.canvas.height-this.marginBottom-e}return e},this.drawSpline=function(t,i,e,a){this.coordsSpline[a]=[];var s=[],o=C.marginLeft,l=C.marginRight,r=C.marginInner,n=(this.canvas.width-(o+l)-2*r)/(i.length-1);this.context.strokeStyle=e;for(var h=0,d=i.length;h<d;h+=1)"object"==typeof i[h]&&i[h]&&2==i[h].length&&(i[h]=Number(i[h][1]));for(var c=[i[0]],h=0;h<i.length;++h)c.push(i[h]);c.push(i[i.length-1]+(i[i.length-1]-i[i.length-2]));for(var g,u,p,f,x,b=1;b<c.length-2;++b)for(var m=0;m<10;++m){var y=(g=m/10,u=c[b-1],p=c[b],f=c[b+1],x=c[b+2],.5*(2*p+(0-u+f)*g+(g*g*(2*u-5*p+4*f-x)+(0-u+3*p-3*f+x)*(g*g*g))));s.push((b-1)*n+m*(n/10)+o+r),this.context.lineTo(s[s.length-1],y),"number"==typeof a&&this.coordsSpline[a].push([s[s.length-1],y])}this.context.lineTo((b-1)*n+o+r,c[b]),"number"==typeof a&&this.coordsSpline[a].push([(b-1)*n+o+r,c[b]])},this.parseColors=function(){0===this.original_colors.length&&(this.original_colors.colors=RGraph.arrayClone(C.colors),this.original_colors.fillledColors=RGraph.arrayClone(C.filledColors),this.original_colors.keyColors=RGraph.arrayClone(C.keyColors),this.original_colors.backgroundBarsColor1=C.backgroundBarsColor1,this.original_colors.backgroundBarsColor2=C.backgroundBarsColor2,this.original_colors.backgroundGridColor=C.backgroundGridColor,this.original_colors.backgroundColor=C.backgroundColor,this.original_colors.textColor=C.textColor,this.original_colors.crosshairsColor=C.crosshairsColor,this.original_colors.annotatableColor=C.annotatableColor,this.original_colors.titleColor=C.titleColor,this.original_colors.xaxisTitleColor=C.xaxisTitleColor,this.original_colors.yaxisTitleColor=C.yaxisTitleColor,this.original_colors.keyBackground=C.keyBackground,this.original_colors.axesColor=C.axesColor,this.original_colors.highlightFill=C.highlightFill);for(var t=0;t<C.colors.length;++t)"object"==typeof C.colors[t]&&C.colors[t][0]&&C.colors[t][1]?(C.colors[t][0]=this.parseSingleColorForGradient(C.colors[t][0]),C.colors[t][1]=this.parseSingleColorForGradient(C.colors[t][1])):C.colors[t]=this.parseSingleColorForGradient(C.colors[t]);if(C.filledColors)if("string"==typeof C.filledColors)C.filledColors=this.parseSingleColorForGradient(C.filledColors,"vertical");else for(t=0;t<C.filledColors.length;++t)C.filledColors[t]=this.parseSingleColorForGradient(C.filledColors[t],"vertical");if(!RGraph.isNull(C.keyColors))for(t=0;t<C.keyColors.length;++t)C.keyColors[t]=this.parseSingleColorForGradient(C.keyColors[t]);for(var i=["backgroundBarsColor1","backgroundBarsColor2","backgroundGridColor","backgroundColor","crosshairsColor","annotatableColor","textColor","titleColor","xaxisTitleColor","yaxisTitleColor","keyBackground","axesColor","highlightFill"],t=0;t<i.length;++t)C[i[t]]=this.parseSingleColorForGradient(C[i[t]])},this.reset=function(){},this.parseSingleColorForGradient=function(t){if(!t||"string"!=typeof t)return t;var i="string"==typeof arguments[1]?arguments[1]:"vertical";if("string"==typeof t&&t.match(/^gradient\((.*)\)$/i)){if(t.match(/^gradient\(({.*})\)$/i))return RGraph.parseJSONGradient({object:this,def:RegExp.$1});var e,a=RegExp.$1.split(":");e="horizontal"==i?this.context.createLinearGradient(0,0,this.canvas.width,0):this.context.createLinearGradient(0,this.canvas.height-C.marginBottom,0,C.marginTop);var s=1/(a.length-1);e.addColorStop(0,RGraph.trim(a[0]));for(var o=1;o<a.length;++o)e.addColorStop(o*s,RGraph.trim(a[o]))}return e||t},this.setShadow=function(t){var i;C.shadow&&("object"==typeof(i=C.shadowColor)&&i[t-1]?this.context.shadowColor=i[t]:"object"==typeof i?this.context.shadowColor=i[0]:"string"==typeof i&&(this.context.shadowColor=i),this.context.shadowBlur=C.shadowBlur,this.context.shadowOffsetX=C.shadowOffsetx,this.context.shadowOffsetY=C.shadowOffsety)},this.interactiveKeyHighlight=function(t){var i=this.coords2[t];if(i){var e=this.context.lineWidth,t=this.context.lineCap;if(this.context.lineWidth=C.linewidth+10,this.context.lineCap="round",this.context.strokeStyle=C.keyInteractiveHighlightChartStroke,this.context.beginPath(),C.spline)this.drawSpline(this.context,i,C.keyInteractiveHighlightChart,null);else for(var a=0,s=i.length;a<s;a+=1)0==a||RGraph.isNull(i[a][1])||null!=typeof i[a-1][1]&&RGraph.isNull(i[a-1][1])?this.context.moveTo(i[a][0],i[a][1]):this.context.lineTo(i[a][0],i[a][1]);this.context.stroke(),this.context.lineWidth=e,this.context.lineCap=t}},this.on=function(t,i){return"function"!=typeof this[t="on"!==t.substr(0,2)?"on"+t:t]?this[t]=i:RGraph.addCustomEventListener(this,t,i),this},this.firstDrawFunc=function(){},this.drawErrorbars=function(){this.context.save(),RGraph.noShadow(this);var t=this.coords,i=C.errorbars;C.errorbarsCapped||(C.errorbarsCappedWidth=.001,o=5e-4),this.context.lineWidth=C.errorbarsLinewidth;for(var e=0;e<t.length;++e){var a,s,o=C.errorbarsCappedWidth/2||5,l=C.errorbarsColor||"black";i[e]&&"number"==typeof i[e][3]?this.context.lineWidth=i[e][3]:"number"==typeof C.errorbarsLinewidth?this.context.lineWidth=C.errorbarsLinewidth:this.context.lineWidth=1,"number"==typeof i||"number"==typeof i[e]?(s=a="number"==typeof i?this.getYCoord(this.min)-this.getYCoord(this.min+i):this.getYCoord(this.min)-this.getYCoord(this.min+i[e]),(a||s)&&(this.path("lj miter lc square b m % % l % % m % % l % % l % % m % % l % % s %",t[e][0]-o,t[e][1]+s,t[e][0]+o,t[e][1]+s,t[e][0],t[e][1]+s,t[e][0],t[e][1]-a,t[e][0]-o,t[e][1]-a,t[e][0],t[e][1]-a,t[e][0]+o,t[e][1]-a,l),this.path("lj miter lc square b m % % l % % s %",t[e][0]-o,t[e][1]+s,t[e][0]+o,t[e][1]+s,l))):"object"!=typeof i[e]||RGraph.isNull(i[e])||(a=this.getYCoord(this.min)-this.getYCoord(this.min+i[e][0]),s=this.getYCoord(this.min)-this.getYCoord(this.min+i[e][1]),"string"==typeof i[e][2]&&(l=i[e][2]),o="number"==typeof i[e][4]?i[e][4]/2:o,"object"==typeof i[e]&&"number"==typeof i[e][3]?this.context.lineWidth=i[e][3]:"number"==typeof C.errorbarsLinewidth?this.context.lineWidth=C.errorbarsLinewidth:this.context.lineWidth=1,RGraph.isNull(i[e][0])||this.path("lc square b  m % % l % % l % % m % % l % % s %",t[e][0],t[e][1],t[e][0],t[e][1]-a,t[e][0]-o,Math.round(t[e][1]-a),t[e][0],Math.round(t[e][1]-a),t[e][0]+o,Math.round(t[e][1]-a),l),"number"==typeof i[e][1]&&(s=Math.abs(this.getYCoord(i[e][1])-this.getYCoord(0)),this.path("b m % % l % % l % % m % % l % % s %",t[e][0],t[e][1],t[e][0],t[e][1]+s,t[e][0]-o,Math.round(t[e][1]+s),t[e][0],Math.round(t[e][1]+s),t[e][0]+o,Math.round(t[e][1]+s),l)))}this.context.restore()},this.hide=function(){if("number"==typeof arguments[0])C.lineVisible[arguments[0]]=!1;else if("object"==typeof arguments[0])for(var t=0;t<arguments[0].length;++t)C.lineVisible[arguments[0][t]]=!1;else for(t=0;t<this.original_data.length;++t)C.lineVisible[t]=!1;return RGraph.redraw(),this},this.show=function(){if("number"==typeof arguments[0])C.lineVisible[arguments[0]]=!0;else if("object"==typeof arguments[0])for(var t=0;t<arguments[0].length;++t)C.lineVisible[arguments[0][t]]=!0;else for(t=0;t<this.original_data.length;++t)C.lineVisible[t]=!0;return RGraph.redraw(),this},this.hidden=function(t){return!C.lineVisible[t]},this.unfold=function(){var i=this,t=arguments[0]||{},e=t.frames||30,a=0,s=arguments[1]||function(){},o=C.animationUnfoldInitial;return C.animationFactor=C.animationUnfoldInitial,function t(){C.animationFactor=a/e*(1-o)+o,RGraph.clear(i.canvas),RGraph.redrawCanvas(i.canvas),a<e?(a++,RGraph.Effects.updateCanvas(t)):s(i)}(),this},this.trace=function(){var i=this,e=arguments[2],a=(arguments[0]||{}).frames||30,s=0,e=arguments[1]||function(){};return i.set("animationTraceClip",0),function t(){RGraph.clear(i.canvas),RGraph.redrawCanvas(i.canvas),s++<a?(i.set("animationTraceClip",s/a),RGraph.Effects.updateCanvas(t)):e(i)}(),this},this.foldtocenter=function(){var l=this,r=(arguments[0]||{}).frames||30,n=0,h=arguments[1]||function(){},d=l.scale2.max/2;l.set("yaxisScaleMax",l.scale2.max);var c=RGraph.arrayClone(l.original_data);return function t(){for(var i=0,e=l.data.length;i<e;++i)if(l.data[i].length)for(var a=0,s=l.data[i].length;a<s;++a){var o=l.original_data[i];o[a]>d?o[a]=c[i][a]-(c[i][a]-d)*(n/r):o[a]=c[i][a]+(d-c[i][a])/r*n}RGraph.clear(l.canvas),RGraph.redrawCanvas(l.canvas),n++<r?RGraph.Effects.updateCanvas(t):h(l)}(),this},this.unfoldfromcentertrace=this.unfoldFromCenterTrace=function(){var t=this,i=(arguments[0]||{}).frames||30,e=RGraph.arrayClone(t.original_data),a=arguments[1]||function(){};t.canvas.style.visibility="hidden",t.draw();t.scale2.max;RGraph.clear(t.canvas),t.canvas.style.visibility="visible";var s="center"==t.get("xaxisPosition")?t.min:(t.max-t.min)/2+t.min;t.set("yaxisScaleMax",t.max);for(var o=0,l=t.original_data.length;o<l;++o)for(var r=0;r<t.original_data[o].length;++r)t.original_data[o][r]=t.get("filled")&&t.get("filledAccumulative")&&0<o?0:s;return RGraph.clear(t.canvas),t.trace({frames:i/2},function(){t.original_data=e,t.unfoldFromCenter({frames:i/2},a)}),t},this.unfoldfromcenter=this.unfoldFromCenter=function(){var a=this,s=(arguments[0]||{}).frames||30,o=arguments[1]||function(){};a.canvas.style.visibility="hidden",a.draw();var t=a.scale2.max;RGraph.clear(a.canvas),a.canvas.style.visibility="visible";var i="center"===a.get("xaxisPosition")?C.yaxisScaleMin:(a.max-a.min)/2+a.min,l=RGraph.arrayClone(a.original_data),r=null;if(a.set("yaxisScaleMax",t),!r)for(var r=[],e=0,n=l.length;e<n;++e){r[e]=[];for(var h=0,d=l[e].length;h<d;++h)C.filled&&C.filledAccumulative&&0<e?r[e][h]=l[e][h]/s:r[e][h]=(l[e][h]-i)/s,a.original_data[e][h]=i}return function t(){for(var i=0;i<l.length;++i)for(var e=0;e<l[i].length;++e)a.original_data[i][e]+=r[i][e];RGraph.clear(a.canvas),RGraph.redrawCanvas(a.canvas),0<--s?RGraph.Effects.updateCanvas(t):(a.original_data=RGraph.arrayClone(l),RGraph.clear(a.canvas),RGraph.redrawCanvas(a.canvas),o(a))}(),this},this.isAdjustable=function(t){return!!RGraph.isNull(C.adjustableOnly)||!(!RGraph.isArray(C.adjustableOnly)||!C.adjustableOnly[t.sequentialIndex])},this.tooltipSubstitutions=function(t){var i=RGraph.sequentialIndexToGrouped(t.index,this.data);if(C.tooltipsDataset)return{dataset:i[1],index:i[0],sequentialIndex:t.index,values:this.data[i[1]]};for(var e=0,a=[];e<this.original_data.length;++e)a.push(this.original_data[e][i[1]]);return{index:i[1],dataset:i[0],sequentialIndex:t.index,value:this.data_arr[t.index],values:a}},this.tooltipsFormattedCustom=function(t,i){return{}},this.addDatasetTooltip=function(){var r=this;this.datasetTooltipsListener=function(t){var i,e=RGraph.getMouseXY(t);r.properties.tooltipsDatasetEvent||(r.properties.tooltipsDatasetEvent="click"),i=r.properties.spline?r.coordsSpline:r.coords2;for(var a=0;a<i.length;++a){for(var s="b lc round lw 10 m {1} {2}".format(i[a][0][0],i[a][0][1]),o=0;o<i[a].length;++o)s+=" l {1} {2}".format(i[a][o][0],i[a][o][1]);if(r.path(s),r.context.isPointInStroke(e[0],e[1])){var l=!0;if("click"===t.type||"mousemove"===t.type&&"mousemove"===r.properties.tooltipsDatasetEvent&&(!RGraph.Registry.get("tooltip")||a!=RGraph.Registry.get("tooltip").__dataset__)){RGraph.hideTooltip(),RGraph.redraw(),RGraph.tooltip({object:r,text:"string"==typeof r.properties.tooltipsDataset?r.properties.tooltipsDataset:r.properties.tooltipsDataset[a],x:e[0],y:e[1],index:a,event:t}),RGraph.Registry.get("tooltip").__index__=0,RGraph.Registry.get("tooltip").__index2__=0,RGraph.Registry.get("tooltip").__dataset__=a;for(s="b lw %1 m %2 %3".format(C.linewidth+10,i[a][0][0],i[a][0][1]),o=0;o<i[a].length;++o)s+=" l {1} {2}".format(i[a][o][0],i[a][o][1]);s+=" ga 0.2 s "+C.colors[a]+" ga 1",r.path(s)}"mousemove"===t.type&&(t.target.style.cursor="pointer")}l||("click"===t.type&&(RGraph.hideTooltip(),RGraph.redraw()),r.canvas.style.cursor="default")}t.stopPropagation()},this.datasetTooltipsListenerAdded||(this.canvas.addEventListener("click",this.datasetTooltipsListener,!1),this.canvas.addEventListener("mousemove",this.datasetTooltipsListener,!1),window.addEventListener("click",function(t){RGraph.redraw()},!1),this.datasetTooltipsListenerAdded=!0)},this.positionTooltipStatic=function(t){var i=t.object,e=(t.event,t.tooltip),a=(t.index,RGraph.getCanvasXY(i.canvas));coords=this.coords[t.index],t.tooltip.style.left=a[0]+coords[0]-e.offsetWidth/2+i.properties.tooltipsOffsetx+"px",t.tooltip.style.top=a[1]+coords[1]-e.offsetHeight-15+i.properties.tooltipsOffsety+"px"},this.drawTrendline=function(){var t=RGraph.getArgs(arguments,"dataset"),i=C.trendlineColor,e=C.trendlineLinewidth,a=C.trendlineMargin;C.trendlineClip&&this.path("b sa r % % % % cl",C.marginLeft,C.marginTop,this.canvas.width-C.marginLeft-C.marginRight,this.canvas.height-C.marginTop-C.marginBottom);for(var s=[],o=0;o<this.data.length;++o){s[o]=[];for(var l=0;l<this.data[o].length;++l)s[o].push([l,this.data[o][l]])}"object"==typeof(i=RGraph.isArray(C.trendlineColors)?C.trendlineColors:i)&&i[t.dataset]?i=i[t.dataset]:"object"==typeof i&&(i="gray"),"object"==typeof e&&"number"==typeof e[t.dataset]?e=e[t.dataset]:"object"==typeof e&&(e=1),"object"==typeof a&&"number"==typeof a[t.dataset]?a=a[t.dataset]:"object"==typeof a&&(a=25);for(var o=0,r=0,n=0;o<this.data[t.dataset].length;++o)r+=s[t.dataset][o][0],n+=s[t.dataset][o][1];for(var h=r/s[t.dataset].length,d=n/s[t.dataset].length,o=0,c=[],g=[],u=[],p=[];o<this.data[t.dataset].length;++o)c[o]=s[t.dataset][o][0]-h,g[o]=s[t.dataset][o][1]-d,u[o]=c[o]*g[o],p[o]=c[o]*c[o];var f=RGraph.arraySum(u)/RGraph.arraySum(p),x=d-f*h,x=[[0,0*f+x],[s[0].length-1,f*(s[0].length-1)+x]];x[0][0]=this.marginLeft,x[0][1]=this.getYCoord(x[0][1],!0),x[1][0]=this.canvas.width-this.marginRight,x[1][1]=this.getYCoord(x[1][1],!0),(!0===C.trendlineDashed||RGraph.isArray(C.trendlineDashed)&&C.trendlineDashed[t.dataset])&&this.context.setLineDash([4,4]),(!0===C.trendlineDotted||RGraph.isArray(C.trendlineDotted)&&C.trendlineDotted[t.dataset])&&this.context.setLineDash([1,4]),RGraph.isArray(C.trendlineDashArray)&&(2===C.trendlineDashArray.length&&"number"==typeof C.trendlineDashArray[0]&&"number"==typeof C.trendlineDashArray[1]?this.context.setLineDash(C.trendlineDashArray):RGraph.isArray(C.trendlineDashArray)&&RGraph.isArray(C.trendlineDashArray[t.dataset])&&this.context.setLineDash(C.trendlineDashArray[t.dataset])),this.path(" lc round lw % b m % % l % % s %",e,Math.max(x[0][0],this.coords2[t.dataset][0][0]-a),x[0][1],Math.min(x[1][0],this.coords2[t.dataset][this.coords2[t.dataset].length-1][0]+a),x[1][1],i),this.context.setLineDash([5,0]),C.trendlineClip&&this.context.restore()},this.nullBridge=function(t,i){for(var e=!1,a=0;a<i.length;a++){var s=null,o=null;if(!1===e&&RGraph.isNumber(i[a])&&(e=!0),RGraph.isNull(i[a])&&e)for(var s=a-1,l=a+1;l<i.length;++l)if(!RGraph.isNull(i[l])){o=l,this.context.setLineDash(C.nullBridgeDashArray),this.path("b lw % m % % l % % s %","number"==typeof C.nullBridgeLinewidth?C.nullBridgeLinewidth:this.getLineWidth(t),this.coords2[t][s][0],this.coords2[t][s][1],this.coords2[t][o][0],this.coords2[t][o][1],"string"==typeof C.nullBridgeColors?C.nullBridgeColors:("object"==typeof C.nullBridgeColors&&!RGraph.isNull(C.nullBridgeColors)&&C.nullBridgeColors[t]?C.nullBridgeColors:C.colors)[t]),o=s=null;break}}},this.drawAngledLabels=function(){if(C.labelsAngled){RGraph.noShadow(this);function t(t){var i,e={},a=["text","labelsAngled","labelsAngled"+t],s=["Font","Color","Size","Bold","Italic"];for(i in a)for(var o in s){var l=a[i]+s[o];l&&(RGraph.isString(C[l])||RGraph.isNumber(C[l])||RGraph.isBoolean(C[l]))&&(e[s[o].toLowerCase()]=C[l])}return e}for(var i=this.coords,e=0;e<i.length-1;++e){var a,s,o=(i[e+1][0]-i[e][0])/2,l=(i[e+1][1]-i[e][1])/2;s=i[e+1][1]<i[e][1]?(a=0,t("Up")):i[e+1][1]>i[e][1]?(a=1,t("Down")):(a=2,t("Level"));var r=RGraph.getAngleByXY({cx:i[e][0],cy:i[e][1],x:i[e+1][0],y:i[e+1][1]});RGraph.text({object:this,accessible:!C.adjustable&&(!RGraph.isBoolean(C.labelsAngledAccessible)||C.labelsAngledAccessible),font:s.font,color:s.color,size:s.size,bold:s.bold,italic:s.italic,x:i[e][0]+o,y:i[e][1]+l-5,text:C.labelsAngledSpecific&&(RGraph.isString(C.labelsAngledSpecific[e])||RGraph.isNumber(C.labelsAngledSpecific[e]))?C.labelsAngledSpecific[e]:C.labelsAngled[a],halign:"center",valign:"bottom",angle:r*(180/Math.PI)})}}},this.setLinecap=function(){var t=RGraph.getArgs(arguments,"index");RGraph.isArray(C.linecap)&&RGraph.isString(C.linecap[t.index])?this.context.lineCap=C.linecap[t.index]:RGraph.isString(C.linecap)?this.context.lineCap=C.linecap:this.context.lineCap="round"},this.setLinejoin=function(){var t=RGraph.getArgs(arguments,"index");RGraph.isArray(C.linejoin)&&RGraph.isString(C.linejoin[t.index])?this.context.lineJoin=C.linejoin[t.index]:RGraph.isString(C.linejoin)?this.context.lineJoin=C.linejoin:this.context.lineJoin="round"},RGraph.register(this);for(a=0;a<this.original_data.length;++a)C.lineVisible[a]=!0;RGraph.parseObjectStyleConfig(this,t.options)}else alert("[LINE] Fatal error: no canvas support")};