RGraph=window.RGraph||{isrgraph:!0,isRGraph:!0,rgraph:!0},RGraph.SVG=RGraph.SVG||{},window,document,RGraph.SVG.Gauge=function(t){this.set=function(t,e){if(1===arguments.length&&"object"==typeof t)for(i in arguments[0])"string"==typeof i&&(t=r.name,e=r.value,this.set(t,e));else{var r=RGraph.SVG.commonSetter({object:this,name:t,value:e});t=r.name,e=r.value,this.properties[t]=e}return this},this.get=function(t){return this.properties[t]},this.type="gauge",this.innerMin=RGraph.SVG.stringsToNumbers(t.innerMin),this.innerMax=RGraph.SVG.stringsToNumbers(t.innerMax),this.outerMin=RGraph.SVG.stringsToNumbers(t.outerMin),this.outerMax=RGraph.SVG.stringsToNumbers(t.outerMax),this.value=RGraph.SVG.stringsToNumbers(t.value),this.angleStart=0-RGraph.SVG.TRIG.HALFPI-RGraph.SVG.TRIG.HALFPI/2,this.angleEnd=0+RGraph.SVG.TRIG.HALFPI+RGraph.SVG.TRIG.HALFPI/2,this.angleSpan=this.angleEnd-this.angleStart,this.id=t.id,this.uid=RGraph.SVG.createUID(),this.container=document.getElementById(this.id),this.layers={},this.svg=RGraph.SVG.createSVG({object:this,container:this.container}),this.isRGraph=!0,this.isrgraph=!0,this.rgraph=!0,this.width=Number(this.svg.getAttribute("width")),this.height=Number(this.svg.getAttribute("height")),this.colorsParsed=!1,this.originalColors={},this.gradientCounter=1,this.nodes={},this.shadowNodes=[],this.firstDraw=!0,this.value>this.innerMax&&(this.value=this.innerMax),this.value<this.innerMin&&(this.value=this.innerMin),RGraph.SVG.OR.add(this),this.container.style.display="inline-block",this.properties={centerx:null,centery:null,radius:null,marginLeft:35,marginRight:35,marginTop:35,marginBottom:35,rmargin:null,backgroundFill:"Gradient(white:#FEFEFE:#E6E6E6:#dedede)",backgroundStroke:"#ddd",linewidth:1,colors:["black","black"],innerGap:5,tickmarksOuterSize:3,tickmarksInnerSize:3,tickmarksCount:10,textColor:"black",textFont:"Arial, Verdana, sans-serif",textSize:12,textBold:!1,textItalic:!1,text:null,labelsIngraph:!0,labelsIngraphFont:null,labelsIngraphSize:null,labelsIngraphBold:null,labelsIngraphItalic:null,labelsIngraphColor:null,labelsIngraphUnitsPre:"",labelsIngraphUnitsPost:"",labelsIngraphThousand:",",labelsIngraphPoint:".",labelsIngraphFormatter:null,labelsIngraphDecimals:0,labelsIngraphPadding:3,labelsIngraphBackground:"Gradient(#ddd:#eee)",labelsIngraphRounded:2,scaleInnerFont:null,scaleInnerSize:null,scaleInnerBold:null,scaleInnerItalic:null,scaleInnerColor:null,scaleInnerUnitsPre:"",scaleInnerUnitsPost:"",scaleInnerPoint:".",scaleInnerThousand:",",scaleInnerDecimals:0,scaleInnerFormatter:null,scaleInnerLabelsCount:10,scaleInnerRound:!1,scaleOuter:!0,scaleOuterFont:null,scaleOuterSize:null,scaleOuterBold:null,scaleOuterItalic:null,scaleOuterColor:null,scaleOuterUnitsPre:"",scaleOuterUnitsPost:"",scaleOuterPoint:".",scaleOuterThousand:",",scaleOuterDecimals:0,scaleOuterFormatter:null,scaleOuterLabelsCount:10,scaleOuterRound:!1,shadow:!1,shadowOffsetx:2,shadowOffsety:2,shadowOpacity:.25,shadowBlur:2,title:"",titleX:null,titleY:null,titleHalign:"center",titleValign:"bottom",titleSize:null,titleColor:null,titleFont:null,titleBold:null,titleItalic:null,titleSubtitle:null,titleSubtitleSize:null,titleSubtitleColor:"#aaa",titleSubtitleFont:null,titleSubtitleBold:null,titleSubtitleItalic:null,needleColor:"#666",centerpinRadius:15,adjustable:!1},RGraph.SVG.getGlobals(this),RGraph.SVG.FX&&"function"==typeof RGraph.SVG.FX.decorate&&RGraph.SVG.FX.decorate(this),this.responsive=RGraph.SVG.responsive,RGraph.SVG.addCreateFunction(this);var g=this.properties;for(i in this.draw=function(){var n,e;return RGraph.SVG.fireCustomEvent(this,"onbeforedraw"),this.nodes={},this.width=Number(this.svg.getAttribute("width")),this.height=Number(this.svg.getAttribute("height")),RGraph.SVG.createDefs(this),this.graphWidth=this.width-g.marginLeft-g.marginRight,this.graphHeight=this.height-g.marginTop-g.marginBottom,this.centerx=this.graphWidth/2+g.marginLeft,this.centery=this.graphHeight/2+g.marginTop,this.radius=Math.min(this.graphWidth/2,this.graphHeight/2),this.centerx=("number"==typeof g.centerx?g:this).centerx,this.centery=("number"==typeof g.centery?g:this).centery,this.radius=("number"==typeof g.radius?g:this).radius,"string"==typeof g.radius&&g.radius.match(/^\+|-\d+$/)&&(this.radius+=parseFloat(g.radius)),"string"==typeof g.centerx&&g.centerx.match(/^\+|-\d+$/)&&(this.centery+=parseFloat(g.centerx)),"string"==typeof g.centery&&g.centery.match(/^\+|-\d+$/)&&(this.centerx+=parseFloat(g.centery)),RGraph.SVG.resetColorsToOriginalValues({object:this}),this.parseColors(),null===g.rmargin&&(g.scaleOuter?g.rmargin=40:g.rmargin=25),this.drawMeter(),this.drawNeedle(),g.labelsIngraph&&this.drawIngraph(),RGraph.SVG.drawTitle(this),g.adjustable&&(this.adjusting_mousedown=!1,e=function(t){t.currentTarget;var e=t.offsetX,r=t.offsetY;RGraph.SVG.ISFF&&(e=t.pageX-t.currentTarget.offsetLeft,r=t.pageY-t.currentTarget.offsetTop),RGraph.SVG.TRIG.getHypLength({x1:e,y1:r,x2:n.centerx,y2:n.centery,object:n})>n.radius||(t=n.getValue(t),n.value=t,n.drawNeedle())},(n=this).container.addEventListener("mousedown",function(t){n.adjusting_mousedown=!0,e(t),RGraph.SVG.fireCustomEvent(n,"onadjustbegin")},!1),this.container.addEventListener("mousemove",function(t){n.adjusting_mousedown&&(e(t),RGraph.SVG.fireCustomEvent(n,"onadjust"))},!1),window.addEventListener("mouseup",function(t){n.adjusting_mousedown=!1,RGraph.SVG.fireCustomEvent(n,"onadjustend")},!1)),RGraph.SVG.addCustomText(this),this.firstDraw&&(this.firstDraw=!1,RGraph.SVG.fireCustomEvent(this,"onfirstdraw")),RGraph.SVG.fireCustomEvent(this,"ondraw"),this},this.drawMeter=function(){this.scaleInner=RGraph.SVG.getScale({object:this,numlabels:g.scaleInnerLabelsCount,unitsPre:g.scaleInnerUnitsPre,unitsPost:g.scaleInnerUnitsPost,max:this.innerMax,min:this.innerMin,point:g.scaleInnerPoint,round:g.scaleInnerRound,thousand:g.scaleInnerThousand,decimals:g.scaleInnerDecimals,strict:!0,formatter:g.scaleInnerFormatter}),this.scaleOuter=RGraph.SVG.getScale({object:this,numlabels:g.scaleOuterLabelsCount,unitsPre:g.scaleOuterUnitsPre,unitsPost:g.scaleOuterUnitsPost,max:this.outerMax,min:this.outerMin,point:g.scaleOuterPoint,round:g.scaleOuterRound,thousand:g.scaleOuterThousand,decimals:g.scaleOuterDecimals,strict:!0,formatter:g.scaleOuterFormatter}),g.shadow&&RGraph.SVG.setShadow({object:this,offsetx:g.shadowOffsetx,offsety:g.shadowOffsety,blur:g.shadowBlur,opacity:g.shadowOpacity,id:"dropShadow"}),this.nodes.background=RGraph.SVG.create({svg:this.svg,type:"circle",parent:this.svg.all,attr:{cx:this.centerx,cy:this.centery,r:this.radius,stroke:g.backgroundStroke,fill:g.backgroundFill,filter:g.shadow?"url(#dropShadow)":""}}),this.nodes.innerAxisGroup=RGraph.SVG.create({svg:this.svg,type:"g",parent:this.svg.all,attr:{id:"innerAxisGroup"}}),this.nodes.outerAxisGroup=RGraph.SVG.create({svg:this.svg,type:"g",parent:this.svg.all,attr:{id:"outerAxisGroup"}});var t=RGraph.SVG.TRIG.getArcPath3({cx:this.centerx,cy:this.centery,r:this.radius-g.innerGap-g.rmargin,start:this.angleStart,end:this.angleEnd,anticlockwise:!1,lineto:!1}),e=(RGraph.SVG.create({svg:this.svg,type:"path",parent:this.nodes.innerAxisGroup,attr:{d:t,stroke:g.colors[1],fill:"transparent","stroke-width":g.linewidth}}),RGraph.SVG.TRIG.getArcPath3({cx:this.centerx,cy:this.centery,r:this.radius-g.rmargin,start:this.angleStart,end:this.angleEnd,anticlockwise:!1,lineto:!1}));RGraph.SVG.create({svg:this.svg,type:"path",parent:this.nodes.outerAxisGroup,attr:{d:e,stroke:g.colors[0],fill:"transparent","stroke-width":g.linewidth}});this.nodes.outerAxis=e,this.nodes.innerAxis=t;for(var r,t=g.tickmarksCount,n=this.angleSpan/t,a=g.tickmarksCount,s=RGraph.SVG.getTextConf({object:this,prefix:"scaleOuter"}),i=RGraph.SVG.getTextConf({object:this,prefix:"scaleInner"}),h=0;h<=g.scaleOuterLabelsCount;++h)g.scaleOuter?(l=RGraph.SVG.TRIG.getArcPath3({cx:this.centerx,cy:this.centery,r:this.radius-g.rmargin,start:this.angleStart+h*n,end:this.angleStart+h*n,anticlockwise:!1,lineto:!1}),o=RGraph.SVG.TRIG.getArcPath3({cx:this.centerx,cy:this.centery,r:this.radius+g.tickmarksOuterSize-g.rmargin,start:this.angleStart+h*n,end:this.angleStart+h*n,anticlockwise:!1,lineto:!0}),RGraph.SVG.create({svg:this.svg,type:"path",parent:this.nodes.outerAxisGroup,attr:{d:l+" "+o,stroke:g.colors[0],fill:"transparent","stroke-width":g.linewidth,"stroke-linecap":"square"}}),r=(this.angleEnd-this.angleStart)/g.scaleOuterLabelsCount,p=(c=RGraph.SVG.TRIG.toCartesian({cx:this.centerx,cy:this.centery,r:this.radius+g.tickmarksOuterSize+10-g.rmargin,angle:this.angleStart-RGraph.SVG.TRIG.HALFPI+h*r})).x>this.centerx?"left":"right",h/a==.5&&(p="center"),d=RGraph.SVG.numberFormat({object:this,prepend:g.scaleOuterUnitsPre,append:g.scaleOuterUnitsPost,num:this.outerMin.toFixed(g.scaleOuterDecimals),point:g.scaleOuterPoint,thousand:g.scaleOuterThousand}),"function"==typeof g.scaleOuterFormatter&&(d=g.scaleOuterFormatter(d)),RGraph.SVG.text({object:this,svg:this.svg,parent:this.nodes.outerAxisGroup,tag:"scale.outer",text:0===h?d:this.scaleOuter.labels[h-1],x:c.x,y:c.y,halign:p,valign:"center",padding:2,size:s.size,color:s.color,bold:s.bold,italic:s.italic,font:s.font}).style.pointerEvents="none"):(l=RGraph.SVG.TRIG.getArcPath3({cx:this.centerx,cy:this.centery,r:this.radius-g.rmargin,start:this.angleStart,end:this.angleStart,anticlockwise:!1,lineto:!1}),o=RGraph.SVG.TRIG.getArcPath3({cx:this.centerx,cy:this.centery,r:this.radius-g.innerGap-g.rmargin,start:this.angleStart,end:this.angleStart,anticlockwise:!1,lineto:!0}),RGraph.SVG.create({svg:this.svg,type:"path",parent:this.nodes.innerAxisGroup,attr:{d:l+o,stroke:g.colors[1],fill:"transparent","stroke-width":g.linewidth,"stroke-linecap":"square"}}),l=RGraph.SVG.TRIG.getArcPath3({cx:this.centerx,cy:this.centery,r:this.radius-g.rmargin,start:this.angleEnd,end:this.angleEnd,anticlockwise:!1,lineto:!1}),o=RGraph.SVG.TRIG.getArcPath3({cx:this.centerx,cy:this.centery,r:this.radius-g.innerGap-g.rmargin,start:this.angleEnd,end:this.angleEnd,anticlockwise:!1,lineto:!0}),RGraph.SVG.create({svg:this.svg,type:"path",parent:this.nodes.innerAxisGroup,attr:{d:l+o,stroke:g.colors[1],fill:"transparent","stroke-width":g.linewidth,"stroke-linecap":"square"}}));for(h=0;h<=g.scaleInnerLabelsCount;++h){var l=RGraph.SVG.TRIG.getArcPath3({cx:this.centerx,cy:this.centery,r:this.radius-g.rmargin-g.innerGap,start:this.angleStart+h*n,end:this.angleStart+h*n,anticlockwise:!1,lineto:!1}),o=RGraph.SVG.TRIG.getArcPath3({cx:this.centerx,cy:this.centery,r:this.radius-g.innerGap-g.tickmarksOuterSize-g.rmargin,start:this.angleStart+h*n,end:this.angleStart+h*n,anticlockwise:!1,lineto:!0});RGraph.SVG.create({svg:this.svg,type:"path",parent:this.nodes.innerAxisGroup,attr:{d:l+" "+o,stroke:g.colors[1],fill:"transparent","stroke-width":g.linewidth,"stroke-linecap":"square"}});var c,u=(this.angleEnd-this.angleStart)/g.scaleInnerLabelsCount,p=(c=RGraph.SVG.TRIG.toCartesian({cx:this.centerx,cy:this.centery,r:this.radius-g.innerGap-g.tickmarksInnerSize-10-g.rmargin,angle:this.angleStart-RGraph.SVG.TRIG.HALFPI+h*u})).x>this.centerx?"right":"left",d=RGraph.SVG.numberFormat({object:this,prepend:g.scaleInnerUnitsPre,append:g.scaleInnerUnitsPost,num:this.innerMin.toFixed(g.scaleInnerDecimals),point:g.scaleInnerPoint,thousand:g.scaleInnerThousand});"function"==typeof g.scaleInnerFormatter&&(d=g.scaleInnerFormatter(d)),c.x>this.centerx-2&&c.x<this.centerx+2&&(p="center"),RGraph.SVG.text({object:this,svg:this.svg,parent:this.nodes.innerAxisGroup,tag:"scale.inner",text:0===h?d:this.scaleInner.labels[h-1],x:c.x,y:c.y,halign:p,valign:"center",padding:2,size:i.size,color:i.color,bold:i.bold,italic:i.italic,font:i.font})}},this.drawIngraph=function(){this.nodes.labelsIngraphGroup&&this.nodes.labelsIngraphGroup.parentNode.removeChild(this.nodes.labelsIngraphGroup),this.nodes.labelsIngraphGroup=RGraph.SVG.create({svg:this.svg,type:"g",parent:this.svg.all,attr:{id:"labelsIngraphGroup"}});var t=RGraph.SVG.getTextConf({object:this,prefix:"labelsIngraph"});this.nodes.labelsIngraph=RGraph.SVG.text({object:this,parent:this.nodes.labelsIngraphGroup,text:RGraph.SVG.numberFormat({prepend:g.labelsIngraphUnitsPre,append:g.labelsIngraphUnitsPost,point:g.labelsIngraphPoint,thousand:g.labelsIngraphThousand,formatter:g.labelsIngraphFormatter,num:this.value.toFixed(g.labelsIngraphDecimals)}),x:this.centerx,y:this.centery+this.radius-g.rmargin-30,background:g.labelsIngraphBackground,backgroundRounded:g.labelsIngraphRounded,padding:g.labelsIngraphPadding,halign:"center",valign:"center",size:t.size,bold:t.bold,italic:t.italic,font:t.font,color:t.color});var e=this.nodes.labelsIngraph.previousSibling;e.setAttribute("stroke","#aaa");t=function(t){t.stopPropagation()};e.addEventListener("mousedown",t,!1),this.nodes.labelsIngraph.addEventListener("mousedown",t,!1)},this.drawNeedle=function(){this.nodes.needleGroup&&this.nodes.needleGroup.parentNode.removeChild(this.nodes.needleGroup),this.nodes.needleGroup=RGraph.SVG.create({svg:this.svg,type:"g",parent:this.svg.all,attr:{id:"needle-group",fill:g.needleColor,stroke:g.needleColor}});var t=(this.value-this.innerMin)/(this.innerMax-this.innerMin)*this.angleSpan;t+=RGraph.SVG.TRIG.HALFPI+RGraph.SVG.TRIG.HALFPI/2;var e=RGraph.SVG.TRIG.toCartesian({cx:this.centerx,cy:this.centery,r:this.radius-60,angle:t}),r=RGraph.SVG.TRIG.toCartesian({cx:this.centerx,cy:this.centery,r:g.centerpinRadius,angle:t-RGraph.SVG.TRIG.HALFPI}),t=RGraph.SVG.TRIG.toCartesian({cx:this.centerx,cy:this.centery,r:g.centerpinRadius,angle:t+RGraph.SVG.TRIG.HALFPI});RGraph.SVG.create({svg:this.svg,type:"path",parent:this.nodes.needleGroup,attr:{"stroke-width":1,"stroke-linecap":"round",d:"M{1} {2} L{3} {4} L{5} {6} z".format(e.x,e.y,r.x,r.y,t.x,t.y)}}),RGraph.SVG.create({svg:this.svg,type:"circle",parent:this.nodes.needleGroup,attr:{cx:this.centerx,cy:this.centery,r:g.centerpinRadius}}),g.labelsIngraph&&this.drawIngraph()},this.parseColors=function(){Object.keys(this.originalColors).length||(this.originalColors={colors:RGraph.SVG.arrayClone(g.colors),backgroundFill:RGraph.SVG.arrayClone(g.backgroundFill),backgroundStroke:RGraph.SVG.arrayClone(g.backgroundStroke),labelsIngraphBackground:RGraph.SVG.arrayClone(g.labelsIngraphBackground)}),g.backgroundFill=RGraph.SVG.parseColorLinear({object:this,color:g.backgroundFill,start:g.marginTop,end:this.height-g.marginBottom,direction:"vertical"}),g.backgroundStroke=RGraph.SVG.parseColorLinear({object:this,color:g.backgroundStroke,start:g.marginTop,end:this.height-g.marginBottom,direction:"vertical"}),g.labelsIngraphBackground=RGraph.SVG.parseColorLinear({object:this,color:g.labelsIngraphBackground,direction:"vertical",gradientUnits:"objectBoundingBox"})},this.getValue=function(t){var e=t.offsetX,r=t.offsetY;RGraph.SVG.ISFF&&(e=t.pageX-t.currentTarget.offsetLeft,r=t.pageY-t.currentTarget.offsetTop);r=RGraph.SVG.TRIG.getAngleByXY({cx:this.centerx,cy:this.centery,x:e,y:r});e<this.centerx&&(r-=RGraph.SVG.TRIG.TWOPI);r=(r-this.angleStart)/(this.angleEnd-this.angleStart);return r*=this.innerMax-this.innerMin,r=(r=(r+=this.innerMin)<this.innerMin?this.innerMin:r)>this.innerMax?this.innerMax:r},this.on=function(t,e){return"on"!==t.substr(0,2)&&(t="on"+t),RGraph.SVG.addCustomEventListener(this,t,e),this},this.exec=function(t){return t(this),this},t.options)"string"==typeof i&&this.set(i,t.options[i])};