RGraph=window.RGraph||{isrgraph:!0,isRGraph:!0,rgraph:!0},RGraph.Drawing=RGraph.Drawing||{},RGraph.Drawing.Poly=function(t){var h,o=t.id,s=t.coords;this.id=o,this.canvas=document.getElementById(this.id),this.context=this.canvas.getContext("2d"),this.colorsParsed=!1,(this.canvas.__object__=this).coords=s,this.coordsText=[],this.original_colors=[],this.firstDraw=!0,this.type="drawing.poly",this.isRGraph=!0,this.isrgraph=!0,this.rgraph=!0,this.uid=RGraph.createUID(),this.canvas.uid=this.canvas.uid||RGraph.createUID(),this.properties={linewidth:1,colorsStroke:"black",colorsFill:"red",tooltips:null,tooltipsOverride:null,tooltipsEffect:"slide",tooltipsCssClass:"RGraph_tooltip",tooltipsCss:null,tooltipsEvent:"onclick",tooltipsHighlight:!0,tooltipsFormattedPoint:".",tooltipsFormattedThousand:",",tooltipsFormattedDecimals:0,tooltipsFormattedUnitsPre:"",tooltipsFormattedUnitsPost:"",tooltipsFormattedListType:"ul",tooltipsFormattedListItems:null,tooltipsPointer:!0,tooltipsPositionStatic:!0,highlightStroke:"rgba(0,0,0,0)",highlightFill:"rgba(255,255,255,0.7)",shadow:!1,shadowColor:"rgba(0,0,0,0.2)",shadowOffsetx:3,shadowOffsety:3,shadowBlur:5,text:null,clearto:"rgba(0,0,0,0)"},this.canvas?(this.$0={},h=this.properties,this.path=RGraph.pathObjectFunction,RGraph.Effects&&"function"==typeof RGraph.Effects.decorate&&RGraph.Effects.decorate(this),this.set=function(t){var o=void 0===arguments[1]?null:arguments[1];if(1!==arguments.length||"object"!=typeof t)return h[t]=o,this;for(i in t)"string"==typeof i&&this.set(i,t[i]);return this},this.get=function(t){return h[t]},this.draw=function(){return RGraph.fireCustomEvent(this,"onbeforedraw"),this.canvas.__rgraph_aa_translated__||(this.context.translate(.5,.5),this.canvas.__rgraph_aa_translated__=!0),this.colorsParsed||(this.parseColors(),this.colorsParsed=!0),this.coordsText=[],h.shadow&&(this.context.shadowColor=h.shadowColor,this.context.shadowOffsetX=h.shadowOffsetx,this.context.shadowOffsetY=h.shadowOffsety,this.context.shadowBlur=h.shadowBlur),this.context.strokeStyle=h.colorsStroke,this.context.fillStyle=h.colorsFill,this.drawPoly(),this.context.lineWidth=h.linewidth,RGraph.noShadow(this),RGraph.addCustomText(this),RGraph.installEventListeners(this),this.firstDraw&&(this.firstDraw=!1,RGraph.fireCustomEvent(this,"onfirstdraw"),this.firstDrawFunc()),RGraph.fireCustomEvent(this,"ondraw"),this},this.exec=function(t){return t(this),this},this.getObjectByXY=function(t){if(this.getShape(t))return this},this.drawPoly=function(){var t=this.coords;this.path("b m % %",t[0][0],t[0][1]);for(var i=1,o=t.length;i<o;++i)this.context.lineTo(t[i][0],t[i][1]);this.path("lw % c f % s %",h.linewidth,this.context.fillStyle,this.context.strokeStyle)},this.getShape=function(t){this.coords;var i,o=RGraph.getMouseXY(t),s=o[0],r=o[1],t=this.context.strokeStyle,o=this.context.fillStyle;return this.context.beginPath(),this.context.strokeStyle="rgba(0,0,0,0)",this.context.fillStyle="rgba(0,0,0,0)",this.drawPoly(),this.context.strokeStyle=t,this.context.fillStyle=o,this.context.isPointInPath(s,r)?(RGraph.parseTooltipText&&h.tooltips&&(i=RGraph.parseTooltipText(h.tooltips,0)),{object:this,coords:this.coords,dataset:0,index:0,sequentialIndex:0,tooltip:"string"==typeof i?i:null}):null},this.highlight=function(t){this.context.fillStyle=h.colorsFill,h.tooltipsHighlight&&("function"==typeof h.highlightStyle?h.highlightStyle(t):(this.path("b"),this.drawPoly(),this.path("f % s %",h.highlightFill,h.highlightStroke)))},this.parseColors=function(){0===this.original_colors.length&&(this.original_colors.colorsFill=RGraph.arrayClone(h.colorsFill),this.original_colors.colorsStroke=RGraph.arrayClone(h.colorsStroke),this.original_colors.highlightStroke=RGraph.arrayClone(h.highlightStroke),this.original_colors.highlightFill=RGraph.arrayClone(h.highlightFill));var t=this.parseSingleColorForGradient;h.colorsFill=t(h.colorsFill),h.colorsStroke=t(h.colorsStroke),h.highlightStroke=t(h.highlightStroke),h.highlightFill=t(h.highlightFill)},this.reset=function(){},this.parseSingleColorForGradient=function(t){if(!t)return t;if("string"==typeof t&&t.match(/^gradient\((.*)\)$/i)){if(t.match(/^gradient\(({.*})\)$/i))return RGraph.parseJSONGradient({object:this,def:RegExp.$1});var i=RegExp.$1.split(":"),o=this.context.createLinearGradient(0,0,this.canvas.width,0),s=1/(i.length-1);o.addColorStop(0,RGraph.trim(i[0]));for(var r=1,h=i.length;r<h;++r)o.addColorStop(r*s,RGraph.trim(i[r]))}return o||t},this.on=function(t,i){return"function"!=typeof this[t="on"!==t.substr(0,2)?"on"+t:t]?this[t]=i:RGraph.addCustomEventListener(this,t,i),this},this.firstDrawFunc=function(){},this.tooltipSubstitutions=function(t){return{index:0,dataset:0,sequentialIndex:0,value:null}},this.positionTooltipStatic=function(t){for(var i=t.object,o=(t.event,t.tooltip),s=(t.index,RGraph.getCanvasXY(i.canvas)),r=0,h=this.coords[0][0],e=0,a=this.coords[0][1],l=0;r<this.coords.length;++r)h=Math.min(h,this.coords[r][0]),e=Math.max(e,this.coords[r][0]),a=Math.min(a,this.coords[r][1]),l=Math.max(l,this.coords[r][1]);var n=(l-a)/2+a;t.tooltip.style.left=s[0]-o.offsetWidth/2+i.properties.tooltipsOffsetx+((e-h)/2+h)+"px",t.tooltip.style.top=s[1]-o.offsetHeight+i.properties.tooltipsOffsety+n-10+"px"},RGraph.register(this),RGraph.parseObjectStyleConfig(this,t.options)):alert("[DRAWING.POLY] No canvas support")};