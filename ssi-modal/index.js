!function (t, o) { "object" == typeof module && module.exports ? module.exports = o(require("jquery")) : t.ssi_modal = o(t.jQuery) }(this, function (t) { var o = function () { var t = !1, o = "Webkit Moz O ms Khtml".split(" "), i = "", s = document.createElement("div"); void 0 !== s.style.animationName && (t = !0); if (!1 === t) for (var e = 0; e < o.length; e++)if (void 0 !== s.style[o[e] + "AnimationName"]) { i = o[e], i + "Animation", "-" + i.toLowerCase() + "-", t = !0; break } return t }(), i = 0, s = 0, e = { stackModal: 0, normalModal: 0 }, n = 0, a = !1, r = function (t) { this.numberId = n, t.stack ? this.pluginName = "stackModal" : this.pluginName = "normalModal", this.backdropId = "", this.showbd = !0, this.setOptions(t) }; r.prototype.setOptions = function (o, i) { if ("object" == typeof o) { var s = { content: "", bodyScroll: !1, keepContent: !1, position: "", backdrop: !0, stack: !1, onClickClose: !1, bodyElement: !1, className: "", backdropClassName: "", preview: { icon: !1, hideIcons: !1, state: "normal" }, closeAfter: !1, outSideClose: !0, onClose: "", onShow: "", beforeClose: "", beforeShow: "", iframe: { allowFullScreen: !0, className: "" }, center: !1, closeIcon: !0, navigation: !1, sizeClass: "medium", animation: !1, modalAnimation: void 0, backdropAnimation: void 0, animationSpeed: 300, buttons: [], iconButtons: [], title: "", fixedHeight: !1, fitScreen: !1 }, e = this; this.options = t.extend(!0, s, o), this.options.iconButtons = k(this.options.iconButtons), this.options.preview.icon && this.options.iconButtons.push({ className: "ssi-displayIcon", method: function () { e.changePreviewState() } }), this.options.closeIcon && this.options.iconButtons.push({ className: "ssi-closeIcon", method: function () { e.close() } }), c(this) } else this.options[o] = i, c(this); return this }, r.prototype.init = function () { return this.options.backdrop && this.backdropInit(), this.modalInit(), n++ , this }, r.prototype.get$content = function () { return this.get$modal().find("#ssi-modalContent") }, r.prototype.get$modal = function (o) { return o = o || this.modalId, this.$modal || o && t("#" + o) }, r.prototype.get$title = function () { return this.get$modal().find("#ssi-modalTitle") }, r.prototype.destroyTitle = function () { return this.get$title().remove(), this.options.title = "", this }, r.prototype.destroyContent = function () { return this.get$content().remove(), this.options.content = "", this }, r.prototype.destroyButtons = function (t) { return this.get$buttons(t).remove(), this.options.buttons = [], this }, r.prototype.destroyIcons = function () { return this.get$icons().remove(), this.options.icons = [], this }, r.prototype.get$icons = function () { return this.get$modal().find(".ssi-topIcons") }, r.prototype.get$buttons = function (t) { return t = t || "buttons", this.get$modal().find("#ssi-" + t) }, r.prototype.get$window = function () { return this.get$modal().find("#ssi-modalWindow") }, r.prototype.get$wrapper = function () { return this.options.stack ? this.get$modal().parent() : this.get$modal().find("#ssi-modalWrapper") }, r.prototype.get$backdrop = function () { return this.$backdrop || this.$backdrop && t("#" + this.backdropId) }; var d = null; r.prototype.changePreviewState = function () { var t = this.get$modal(); if ("fullScreen" === this.options.preview.state) t.removeClass("ssi-fullScreen"), this.options.preview.state = "normal", t.find("#ssi-modalContent").css("height", ""), (this.options.fixedHeight || this.options.fitScreen) && this.setModalHeight(), clearTimeout(d), t.off("mousemove.ssi-modal"); else { if (this.options.preview.hideIcons) { var o = t.find(".ssi-topIcons"); if (this.options.buttons) var i = t.find("#ssi-buttons"); t.on("mousemove.ssi-modal", function () { clearTimeout(d), o.fadeIn(), i.slideDown(), d = setTimeout(function () { i.slideUp(), o.fadeOut() }, 2e3) }) } this.setModalHeight(40, "height"), t.addClass("ssi-fullScreen"), this.options.preview.state = "fullScreen" } return this }, r.prototype.setPluginName = function (t) { return this.pluginName = t, e[t] = 0, this }, r.prototype.setContent = function (o, i) { var s; i = i || "html", !0 !== this.options.content ? (s = t('<div id="ssi-modalContent" class="ssi-modalContent ' + (this.options.fixedHeight ? "ssi-overflow " : "") + '"></div>'), "" === this.options.content && (!0 === this.options.title ? this.get$title().after(s) : this.get$window().prepend(s), this.setModalHeight()), this.options.content = !0) : s = this.get$content(); var e = o; if (o instanceof t && !0 === this.options.bodyElement) { if (!0 === this.options.extendOriginalContent) { var n = this.options.beforeClose; this.options.beforeClose = function (t) { var i; if ("function" == typeof n && (i = n(t)), !1 === i) return i; o.eq(0).after(t.get$content().contents().unwrap().css("display", "")).remove() } } (e = o.eq(0).clone()).is(":visible") || e.show() } return s[i](e), s }, r.prototype.setButtons = function (o, i) { var s, e = !1; o = k(o), !1 !== i && (s = (s = (i = void 0 !== i ? t(i) : this.get$window()).find("#ssi-buttons"))[0]), s || (s = t('<div id="ssi-buttons" class="ssi-buttons"><div  id="ssi-leftButtons" class="ssi-leftButtons"></div><div id="ssi-rightButtons" class="ssi-rightButtons"></div></div>'), i && (e = !0, i.append(s)), this.options.buttons = !0); for (var n, a = o.length, r = s.find("#ssi-leftButtons"), d = s.find("#ssi-rightButtons"), l = [], c = [], p = 0; p < a; p++)n = this.generateButton(o[p]), "left" === o[p].side ? l.push(n) : c.push(n); return r.append(l), d.append(c), e && this.setModalHeight(), s }; var l = function (t, o) { switch (typeof t) { case "boolean": t = "show" === o ? t ? "anim ssi-fadeIn" : "ssi-show" : t ? "anim ssi-fadeOut" : "ssi-hidden"; break; case "undefined": t = "show" === o ? "ssi-show" : "ssi-hidden" }return t }, c = function (t) { var i, s, e = t.options.modalAnimation || t.options.animation || !1, n = t.options.backdropAnimation || t.options.animation || !1; i = l(void 0 !== e.show ? e.show : e, "show"), s = l(void 0 !== e.hide ? e.hide : e, "hide"), t.options.modalAnimation = { show: i, hide: s }, i = l(void 0 !== n.show ? n.show : n, "show"), s = l(void 0 !== n.hide ? n.hide : n, "hide"), t.options.backdropAnimation = { show: i, hide: s }, !1 === o && (t.options.modalAnimation = { show: "ssi-show" !== t.options.modalAnimation.show ? "anim ssi-fadeIn" : "ssi-show", hide: "ssi-hidden" !== t.options.modalAnimation.hide ? "anim ssi-fadeOut" : "ssi-hidden" }, t.options.backdropAnimation = { show: "ssi-show" !== t.options.backdropAnimation.show ? "anim ssi-fadeIn" : "ssi-show", hide: "ssi-hidden" !== t.options.backdropAnimation.hide ? "anim ssi-fadeOut" : "ssi-hidden" }) }; r.prototype.backdropInit = function () { var o; if ("string" == typeof a) { var i = t("#" + a); this.backdropId = a, o = i.attr("class", "ssi-backdrop " + this.pluginName + " " + this.options.backdropClassName), this.showbd = !1, a = !0 } else { var s; if (o = t('<div id="ssi-backdrop' + this.numberId + '" class="ssi-backdrop ssi-hidden ' + this.options.backdropClassName + " " + this.pluginName + '"></div>'), "shared" === this.options.backdrop || "byKindShared" === this.options.backdrop) (s = "byKindShared" === this.options.backdrop ? t(".ssi-backdrop.ssi-openedDialog." + this.pluginName) : t(".ssi-backdrop.ssi-openedDialog"))[0] ? (this.backdropId = s.attr("id"), this.showbd = !1, o = s) : (t("body").append(o), this.backdropId = "ssi-backdrop" + this.numberId, this.showbd = !0); else !0 === this.options.backdrop && (t("body").append(o), this.backdropId = "ssi-backdrop" + this.numberId, this.showbd = !0); this.$backdrop = o } if (this.options.outSideClose && this.options.position) { var e = this; o.on("click.ssi-modal" + this.numberId, function (t) { t.preventDefault(), e.close() }) } return o }; r.prototype.setIcons = function (o) { var i, s = []; !0 !== this.options.iconButtons ? (i = t('<div class="ssi-topIcons"></div>'), this.options.iconButtons = !0) : i = this.get$icons(); for (var e = this, n = o.length, a = 0; a < n; a++)!function (o) { s.push(t('<a class="' + o.className + '"></a>').click(function (i) { i.preventDefault(), "function" == typeof o.method && t.proxy(o.method, this)(i, e) })) }(o[a]); return i.append(s), i }; r.prototype.generateButton = function (o) { o = t.extend({}, { className: "", enableAfter: !1, method: function () { }, type: "button", focused: !1, id: "", label: "", modalAnimation: "", backdropAnimation: "" }, o); var i, s = "button", e = "", n = this; "link" === o.type && (s = "a", e = ' href="#"'); var a = t("<" + s + e + (o.id ? ' id="' + o.id + '"' : " ") + (o.enableAfter ? "disabled " : "") + ' class="ssi-modalBtn ' + (o.className || "") + '">' + o.label + "</" + s + ">"); if ("number" == typeof o.enableAfter) { var r = t('<span class="ssi-countDown">' + o.enableAfter + "</span>"); h(n, r, function () { a.removeClass("disabled"), a.removeAttr("disabled"), r.remove() }), a.append(r) } return o.keyPress && t("body").on("keydown.ssi_modal", function (t) { t.keyCode != o.keyPress || a.is(":disabled") || a.trigger("click") }), o.focused && setTimeout(function () { a.focus() }, 100), a.click(function (s) { s.preventDefault(), o.clearTimeOut && p(n), "function" == typeof o.method && (i = t.proxy(o.method, this)(s, n)), !1 !== i && ("boolean" == typeof o.keepContent && o.keepContent !== n.options.keepContent && (n.options.keepContent = o.keepContent), o.closeAfter && n.close()) }) }, r.prototype.modalInit = function () { var o = function (o) { var i = t('<div id="ssi-modalWindow" class="ssi-modalWindow ' + (o.options.center ? o.options.sizeClass : "") + (o.options.stack ? " " + o.options.sizeClass + " " + o.options.className + " " : "") + '"></div>'), s = "", e = []; return o.options.content && (s = o.setContent(o.options.content, "html")), o.options.title && e.push(o.setTitle(o.options.title)), o.options.onClickClose && i.addClass("ssi-hover").click(function (i) { var s = t(i.target); s.is("a") || s.is("button") || o.close() }), o.options.iconButtons.length > 0 && e.push(o.setIcons(o.options.iconButtons, !0)), e.push(s), void 0 === o.options.buttons || t.isEmptyObject(o.options.buttons) || e.push(o.setButtons(o.options.buttons, !1)), i.append(e), i }(this), i = this; if (this.options.position && this.options.stack) { var s = "append"; this.options.position.indexOf("bottom") > -1 && (s = "prepend"); var e = this.options.position.replace(" ", "."), n = t("div.ssi-modalOuter.ssi-stack." + e); n[0] && n.find("#ssi-modalWrapper")[s](o), this.$modal = o } if (!this.options.stack || !n[0]) { var r = function (o) { return t('<div id="ssi-modalWrapper" class=" ssi-modalWrapper ' + o.options.sizeClass + '"></div>') }(this), d = function (o) { return t('<div class="ssi-modalOuter ' + (o.options.stack ? " ssi-stack" : "" + o.options.className) + (o.options.center ? " ssi-center " : " ") + " " + (o.options.position ? " ssi-modalPositioned " + o.options.position : "") + '"></div>') }(this).append(r.append(o)).appendTo(t("body")); this.options.stack || (this.$modal = d, d.one("onShow.ssi-modal", function () { !0 === i.options.outSideClose && (d.click(function (t) { t.target === this && (t.preventDefault(), i.close()) }), r.click(function (t) { t.target === this && (t.preventDefault(), i.close()) })) })) } return this.modalId = "ssi-" + this.pluginName + this.numberId, this.$modal.attr("id", "ssi-" + this.pluginName + this.numberId), this.$modal.addClass(this.pluginName + " ssi-modal"), this.$modal.data("ssi-modal", this).addClass("ssi-hidden"), "string" == typeof a && this.backdropInit(), this.$modal }, r.prototype.setTitle = function (o) { var i, s = !1; return !0 !== this.options.title ? (i = t('<div id="ssi-modalTitle" class="ssi-modalTitle ' + (this.options.content ? "" : "ssi-borderOut ") + '">' + this.options.title + "</div>"), "" === this.options.title && (this.get$window().prepend(i), s = !0), this.options.title = !0) : i = this.get$title(), i.html(o), s && this.setModalHeight(), i }, r.prototype.showModal = function () { var o = this.get$modal(), n = this; setTimeout(function () { o.trigger("beforeShow.ssi-modal") }, 0), !1 === this.options.bodyScroll && (t("body").addClass("ssi-modalOpen"), i++), "shared" === this.options.backdrop ? s++ : "byKindShared" === this.options.backdrop && e[this.pluginName]++ , o.addClass("ssi-openedDialog"); o.addAnimation(this.options.modalAnimation.show, function () { !function () { t(this).removeClass("ssi-hidden"), "function" == typeof n.options.onShow && n.options.onShow(n), setTimeout(function () { o.trigger("onShow.ssi-modal") }, 0) }() }).removeClass("ssi-hidden"), this.options.center && o.css("display", ""), "fullScreen" === n.options.preview.state && (n.options.preview.state = "normal", n.changePreviewState()), this.setModalHeight(), "number" == typeof this.options.closeAfter.time && function (t) { var o = t.get$modal(); if (t.time = setTimeout(function () { t.close() }, 1e3 * t.options.closeAfter.time), t.options.closeAfter.displayTime && t.options.title) { var i = o.find("span.ssi-displayTime").html(t.options.closeAfter.time); h(t, i, function () { t.$displayTime.remove() }) } t.options.closeAfter.resetOnHover && (o.on("mouseenter.ssi-modal", function () { clearTimeout(t.time), i && (i.html(t.options.closeAfter.time), clearInterval(t.countDown)) }), o.on("mouseleave.ssi-modal", function () { t.time = setTimeout(function () { t.close() }, 1e3 * t.options.closeAfter.time), t.options.closeAfter.displayTime && t.options.title && h(t, i, function () { i.parent().remove() }) })) }(this), delete this.$modal }, r.prototype.showBackdrop = function () { this.get$backdrop().addClass("ssi-openedDialog").addAnimation(this.options.backdropAnimation.show).removeClass("ssi-hidden"), delete this.$backdrop }, r.prototype.show = function () { if ("function" == typeof this.options.beforeShow && !1 === this.options.beforeShow(this)) return this; return this.showModal(), !1 === a && this.options.backdrop && !0 === this.showbd && this.showBackdrop(), this }, r.prototype.destroyBackdrop = function () { var t = this.get$backdrop(), o = this; t && !0 !== this.options.keepContent && t.off("click.ssi-modal" + this.numberId); var i = this, n = function () { if (t && (!0 === i.options.backdrop || ("shared" === i.options.backdrop && s < 1 || "byKindShared" === i.options.backdrop && e[i.pluginName] < 1) && (!i.get$modal(i.modalId.replace(i.numberId.toString(), i.backdropId.replace("ssi-backdrop", "")))[0] || i.backdropId.replace("ssi-backdrop", "") == i.numberId))) { t.addAnimation(i.options.backdropAnimation.hide, function () { t.addClass("ssi-hidden").removeClass("ssi-openedDialog"), t.trigger("backdropClose.ssi-modal"), !0 !== o.options.keepContent && t.remove() }) } a === i.backdropId && (a = !1) }; return this.options.stack && this.options.outSideClose ? setTimeout(n, 10) : n(), this }, r.prototype.destroyModal = function () { var t = this.get$modal(), o = this; t.off(".ssi_modal"), t.trigger("beforeClose.ssi-modal"), "shared" === this.options.backdrop ? s-- : "byKindShared" === this.options.backdrop && e[this.pluginName]-- , t.hasClass("ssi-openedDialog") && (t.removeClass("ssi-openedDialog"), !1 === this.options.bodyScroll && i--); return t.addAnimation(this.options.modalAnimation.hide, function () { t.addClass("ssi-hidden"), o.options.stack ? t.addClass("ssi-smoothSlide").slideUp("500", function () { t.removeClass("ssi-smoothSlide"), t.trigger("onClose.ssi-modal"), !0 !== o.options.keepContent && t.remove() }) : (t.trigger("onClose.ssi-modal"), !0 !== o.options.keepContent && t.remove()), "function" == typeof o.options.onClose && o.options.onClose(o), !0 !== o.options.keepContent && t.off(".ssi-modal").find("#ssi-modalWrapper").off(".ssi-modal") }), this.options.icons = [], this.options.buttons = [], this.options.content = "", this.options.title = "", a = this.backdropId, this }, r.prototype.close = function () { if ("function" == typeof this.options.beforeClose && !1 === this.options.beforeClose(this)) return this; var o = t("body"); return o.off(".ssi_modal"), this.destroyModal(), this.destroyBackdrop(), i < 1 && o.removeClass("ssi-modalOpen"), p(this), this }, r.prototype.setModalHeight = function (o, i) { if (!this.options.fitScreen && !this.options.fixedHeight && !i) return this; "number" != typeof o && (o = 100); var s = this.get$content(), e = t(window).height(), n = 0, a = 0; this.options.buttons && (n = s.next().innerHeight()), this.options.title && (a = this.get$title().innerHeight()); var r = n + a + o, d = 0; return i ? "string" == typeof i && s.css(i, e - r) : this.options.fitScreen && this.options.fixedHeight ? ("number" == typeof this.options.fitScreen && (d = Math.abs((this.options.fitScreen + this.options.fixedHeight) / 2 - o)), s.css("height", e - r - d)) : (this.options.fitScreen && ("number" == typeof this.options.fitScreen && (d = Math.abs(this.options.fitScreen - o)), s.css("min-height", e - r - d)), this.options.fixedHeight && (d = 0, "number" == typeof this.options.fixedHeight && (d = Math.abs(this.options.fixedHeight - o)), s.css("max-height", e - r - d))), r }; var p = function (t) { clearTimeout(t.time), t.time = null, clearInterval(t.countDown) }, h = function (t, o, i) { t.countDown = setInterval(function () { var s = parseInt(o.html()); s - 1 != 0 ? o.html(s - 1) : (i && i(), clearInterval(t.countDown)) }, 1e3) }; t.fn.extend({ hasClasses: function (o) { for (var i in o) if (t(this).hasClass(o[i])) return !0; return !1 } }); var m = { checkElement: function (o) { var i = t(o); if (i[0]) { var s = i.data("ssi-modal"); if (s && !t("#" + s.modalId)[0]) return i.data("ssi-modal", ""), !1 } return s || !1 }, createObject: function (o, i) { var s, e, n; return void 0 !== i ? n = (s = t(i)).data("ssi-modal") : o.keepContent = !1, n ? e = n : (e = new r(o), void 0 !== i && s.data("ssi-modal", e)), e }, show: function (t, o) { var i = !1; return o && (i = this.checkElement(o)), !1 === i ? this.createObject(t, o).init().show() : "object" == typeof i ? i.show() : void 0 }, close: function (o) { if (!o) { var i = t(".ssi-modalOuter"); o = i.eq(i.length - 1) } return o.data("ssi-modal").close() }, proto: r.prototype, closeAll: function (o, i) { i = k(i); var s = typeof o; if ("string" === s && "" !== o || "array" === s) for (var e = (o = k(o)).length, n = 0; n < e; n++)a(t(".ssi-modal.ssi-openedDialog." + o[n])); else a(t(".ssi-modal.ssi-openedDialog")); function a(t) { for (var o = t.length - 1; o >= 0; o--) { var s = t.eq(o); s.hasClasses(i) || s.data("ssi-modal").close() } } }, removeAll: function () { t(".ssi-modalOuter").addClass("ssi-hidden").remove(), t(".ssi-backdrop").addClass("ssi-hidden").remove(), t("body").removeClass("ssi-modalOpen"), i = 0, s = 0, e = { stackModal: 0, normalModal: 0 }, n = 0 } }; function u(t) { return !!t.match(u.regex) } m.dialog = function (o, i) { var s = { sizeClass: "dialog", okBtn: { className: "", label: "Ok" }, title: "", closeIcon: !1, outSideClose: !1 }; return o.okBtn = t.extend({}, s.okBtn, o.okBtn), (o = t.extend({}, s, o)).buttons = [{ className: o.okBtn.className, label: o.okBtn.label, closeAfter: !0, method: i }], new r(o).init().show() }, m.confirm = function (o, i) { var s = { okBtn: { className: "", label: "Ok" }, cancelBtn: { className: "", label: "Cancel" }, closeIcon: !1, sizeClass: "dialog", title: "", outSideClose: !1 }; return o.okBtn = t.extend({}, s.okBtn, o.okBtn), o.cancelBtn = t.extend({}, s.cancelBtn, o.cancelBtn), (o = t.extend({}, s, o)).buttons = [{ className: o.okBtn.className, label: o.okBtn.label, closeAfter: !0, method: function (t, o) { "function" == typeof i && i(!0, t, o) } }, { className: o.cancelBtn.className, label: o.cancelBtn.label, closeAfter: !0, method: function (t, o) { "function" == typeof i && i(!1, t, o) } }], new r(o).init().show() }, u.regex = /^\s*data:([a-z]+\/[a-z0-9\-\+]+(;[a-z\-]+\=[a-z0-9\-]+)?)?(;base64)?,[a-z0-9\!\$\&\'\,\(\)\*\+\,\;\=\-\.\_\~\:\@\/\?\%\s]*\s*$/i; var f, v, b, g = { "ssi-mainOption": {} }; function k(t) { return t instanceof Array || (t = [t]), t } return m.imgBox = function (o, i) { g[i = i || "ssi-mainOption"] = t.extend({}, g["ssi-mainOption"], o) }, m.proto.navigate = function (o) { var i = t('a[data-ssi_imgGroup="' + b.attr("data-ssi_imgGroup") + '"]'); return f || (f = i.index(b)), v || (v = i.length), "next" === o && f + 1 >= v || "prev" === o && f < 0 ? this : (this.destroyModal(), "next" === o ? f++ : "prev" === o && f-- , i.eq(f).trigger("click.ssi-imgBox"), this) }, m.imgBox.show = function (o, i) { i = t.extend(!0, { backdrop: "byKindShared", fixedHeight: !0, navigation: !0, closeIcon: !0, title: !1, allowIframe: !0, hideImgButtons: !0 }, i), t.extend(i, { img: !0, content: '<div class="ssi-loader"></div>', sizeClass: "" }); var s = m.createObject(i).setPluginName("imgBox"); s.imgUrl = o, s.imgTitle = i.title, s.init(), i.title && s.get$icons().addClass("inTitle"), s.show(), function (o, i) { var s = o.get$wrapper(), e = s.find("#ssi-modalContent"); if (!i || "#" == i) { var n = b ? b.attr("data-alt") : ""; return p = "<h3>Image not found</h3><br>" + (void 0 !== n ? "<h4>" + n + "</h4>" : ""), void m(!0) } var a, r, d = "naturalWidth" in new Image, l = t(window).height(), c = t(window).width(), p = [""], h = 0; o.options.navigation && b && e.append(function () { var i = t('a[data-ssi_imgGroup="' + b.attr("data-ssi_imgGroup") + '"]'); if (!i.length) return; var s = i.index(b), e = i.length; if (s + 1 >= e && s < 1) return; var n = t('<div class="ssi-modalNavigation"></divid>').mouseover(function () { n.addClass("ssi-navFadeIn") }).mouseleave(function () { n.removeClass("ssi-navFadeIn") }), a = t('<div class="ssi-modalNext ' + (s + 1 >= e ? "ssi-hidden" : "") + '"><span></span></div>'), r = t('<div class="ssi-modalPrev ' + (s < 1 ? "ssi-hidden" : "") + '"><span></span></div>'); return n.append(a, r), o.get$backdrop().one("backdropClose.ssi-modal", function () { v = "", f = "" }), o.get$modal().one("beforeClose.ssi-modal", function () { n.remove() }).one("onShow.ssi-modal", function () { a.one("click", function (i) { i.preventDefault(), o.navigate("next"), t(this).off("click.ssi_modal") }), r.one("click", function (i) { i.preventDefault(), o.navigate("prev"), t(this).off("click.ssi_modal") }) }), n }); !o.options.allowIframe || -1 !== t.inArray(i.split(".").pop().toLowerCase(), ["jpg", "jpeg", "png", "gif", "bmp"]) || u(i) ? (p = t('<img src="' + i + '" class="ssi-modalImg"/>').on("load", function () { if (!d) { var t = new Image; t.src = p.attr("src"); var o = t.width, i = t.height; g(o, i) } }).error(function () { var t = b ? b.attr("data-alt") : ""; p = "<h3>Image not found</h3><br>" + (void 0 !== t ? "<h4>" + t + "</h4>" : ""), m(!0) }), k(), r && (a = setInterval(function () { s.addClass("ssi-imgBorder"), k(), h++ }, 50))) : ("boolean" != typeof o.options.iframe.allowFullScreen && (o.options.iframe.allowFullScreen = !0), o.options.iframe.className = o.options.iframe.className || "", p = t('<iframe src="' + i + '" frameborder="0" ' + (o.options.iframe.allowFullScreen ? "allowfullscreen" : "") + "></iframe>"), o.options.center ? s.addClass("ssi-iframe ").find("#ssi-modalWindow" + o.numberId).addClass(o.options.iframe.className) : s.addClass("ssi-iframe " + o.options.iframe.className), m()); function m(i) { e.find(".ssi-loader").remove(); var s = []; if (!i && "" !== o.options.imgButtons && !t.isEmptyObject(o.options.imgButtons)) { var n = o.setButtons(o.options.imgButtons, o.get$content()).addClass("ssi-imgButtons"); !0 === o.options.hideImgButtons && (n.addClass("ssi-navFade ssi-navFadeOut"), o.get$wrapper().mouseover(function () { n.addClass("ssi-navFadeIn") }).mouseleave(function () { n.removeClass("ssi-navFadeIn") })), s.push(n) } s.push(p), e.append(s) } function g(t, i) { clearInterval(a); var n, r, u, f, v, b = t || (d ? p[0].naturalWidth : p.width()), g = i || (d ? p[0].naturalHeight : p.height()), k = o.setModalHeight(120, !0); if ((g > l - k || b > c) && !0 === o.options.fixedHeight) { var w = (n = b, r = g, u = c - 100, f = l - k, v = Math.min(u / n, f / r), { width: n * v, height: r * v }); b = w.width, g = w.height, h > 2 && s.addClass("ssi-overHeight") } e.css("height", g), o.options.center && e.parent().css({ width: b, height: g }), s.css("width", b), m(), s.addClass("ssi-imgBorder") } function k() { if (d) { if (p[0].naturalWidth > 0) return void g() } else if (clearInterval(a), p.width() > 50) return void g(); r = !0 } }(s, o) }, t("body").on("click.ssi-imgBox", "a.ssi-imgBox", function (o) { o.preventDefault(), o.stopPropagation(); var i = (b = t(o.currentTarget)).attr("data-ssi_imgGroup") || "ssi-mainOption", s = g[i] || g["ssi-mainOption"], e = b.attr("href"); if ("" !== s.imgButtons && !t.isEmptyObject(s.imgButtons)) for (var n = 0; n < s.imgButtons.length; n++)if (s.imgButtons[n].exclude) for (var a = s.imgButtons[n].exclude.split(","), r = 0; r < a.length; r++)if (b.hasClass(a[r])) { s.imgButtons.splice(n, 1); break } s.title && !0 === s.title && (s.title = b.attr("title")), m.imgBox.show(e, s, b) }), m.notify = function (o, i, s) { var e = { closeIcon: !1, overrideOther: !1, sizeClass: "dialog", onClickClose: !0, bodyScroll: !0, animation: !0, className: "", backdrop: !1, outSideClose: !1, position: "right top", topZIndex: !0, okBtn: { className: "", label: "Ok" }, cancelBtn: { className: "", label: "Cancel" }, stack: !0, closeAfter: { time: 4, resetOnHover: !0 } }; i.okBtn = t.extend({}, e.okBtn, i.okBtn), i.cancelBtn = t.extend({}, e.cancelBtn, i.cancelBtn); var n, a = "", r = ""; switch (o) { case "success": e.className = " ssi-success"; break; case "error": e.className = " ssi-error"; break; case "info": e.className = " ssi-info"; break; case "warning": e.className = " ssi-warning"; break; case "confirm": e.closeAfter = !1, e.onClickClose = !1, e.outSideClose = !1, e.icon = !1, e.title = !1, e.buttons = [{ className: i.okBtn.className, label: i.okBtn.label, closeAfter: !0, method: function () { "function" == typeof s && s(!0) } }, { className: i.cancelBtn.className, label: i.cancelBtn.label, closeAfter: !0, method: function () { "function" == typeof s && s(!1) } }]; break; case "dialog": e.onClickClose = !1, e.closeAfter = !1, e.outSideClose = !1, e.title = !1, e.icon = !1, e.buttons = [{ className: i.okBtn.className, label: i.okBtn.label, closeAfter: !0, method: s }]; break; default: e.className = o }if (i.className && (i.className += e.className || ""), 0 != (i = t.extend(!0, e, i)).icon && (a = i.icon || o || ""), 0 != i.title && (r = i.title || o), 0 != i.icon && 0 != i.title && "" != a && (i.title = ("" === (n = a) ? "" : '<span class="ssi-icon ' + n + '"></span>') + " " + r), !0 === i.backdrop && (i.backdrop = "byKndShared"), i.keepContent = !1, i.overrideOther) { var d = i.position.split(" "); t("body").find("div." + d[0] + "." + d[1]).children().empty() } return m.createObject(i).setPluginName("notify").init().show() }, t.fn.ssi_modal = function () { var o; if ("object" == typeof arguments[1]) { var i = arguments[0]; o = arguments[1] || {}; var s = arguments[2] } else o = arguments[0] || {}; return this.each(function () { var e, n = t(this); if (o.content) n.click(function () { switch (i) { case "show": m.show(o, n); break; default: m[i](o, s) } }); else { var a, r, d = n.attr("data-ssi_modal"); d ? n.click(function () { a = t(d), r = { content: a }, e = t.extend({}, o, r), m.createObject(e).init().show() }) : (r = { content: n }, e = t.extend({}, o, r), m.createObject(e).init().show()) } }) }, t.fn.addAnimation = function (i, s) { return -1 !== i.indexOf("ssi-fade") && !1 === o ? t(this)[i.replace("anim ssi-", "")](300, function () { "function" == typeof s && s() }) : (t(this).addClass(i).one("mozAnimationEnd webkitAnimationEnd  MSAnimationEnd oanimationend animationend", function () { t(this).removeClass(i), "function" == typeof s && s() }), "ssi-show" !== i && "ssi-hidden" !== i && "" !== i || t(this).trigger("animationend"), this.each(function () { t(this) })) }, m });