!function(e,t){function n(t){if("function"!=typeof require||"undefined"==typeof module||!module.exports)return e[t];try{return require(t.toLowerCase())}catch(n){}}function r(e,t){return null===e?"null"===t:void 0===e?"undefined"===t:e.is&&e instanceof l?"element"===t:Object.prototype.toString.call(e).toLowerCase().indexOf(t)>7}function o(e){var t,n,i,a,u,s,f,l,c;if(e instanceof o)return e;for(r(e,"array")||(e=String(e).replace(/\s/g,"").toLowerCase().match(/(?:\+,|[^,])+/g)),t=0,n=e.length;n>t;++t){for(r(e[t],"array")||(e[t]=String(e[t]).match(/(?:\+\/|[^\/])+/g)),s=[],i=e[t].length;i--;){for(f=e[t][i],u={jwertyCombo:String(f),shiftKey:!1,ctrlKey:!1,altKey:!1,metaKey:!1},r(f,"array")||(f=String(f).toLowerCase().match(/(?:(?:[^\+])+|\+\+|^\+$)/g)),a=f.length;a--;)"++"===f[a]&&(f[a]="+"),f[a]in d.mods?u[y[d.mods[f[a]]]]=!0:f[a]in d.keys?u.keyCode=d.keys[f[a]]:l=f[a].match(/^\[([^-]+\-?[^-]*)-([^-]+\-?[^-]*)\]$/);if(r(u.keyCode,"undefined"))if(l&&l[1]in d.keys&&l[2]in d.keys){for(l[2]=d.keys[l[2]],l[1]=d.keys[l[1]],c=l[1];c<l[2];++c)s.push({altKey:u.altKey,shiftKey:u.shiftKey,metaKey:u.metaKey,ctrlKey:u.ctrlKey,keyCode:c,jwertyCombo:String(f)});u.keyCode=c}else u.keyCode=0;s.push(u)}this[t]=s}return this.length=t,this}var i,a,u,s,f=e.document,l=n("jquery")||n("zepto")||n("ender")||f,c="keydown";l===f?(i=function(e,t){return e?l.querySelector(e,t||l):l},a=function(e,t){e.addEventListener(c,t,!1)},u=function(e,t){e.removeEventListener(c,t,!1)},s=function(e,t){var n,r=f.createEvent("Event");r.initEvent(c,!0,!0);for(n in t)r[n]=t[n];return(e||l).dispatchEvent(r)}):(i=function(e,t){return l(e||f,t)},a=function(e,t){l(e).bind(c+".jwerty",t)},u=function(e,t){l(e).unbind(c+".jwerty",t)},s=function(e,t){l(e||f).trigger(l.Event(c,t))});for(var y={16:"shiftKey",17:"ctrlKey",18:"altKey",91:"metaKey"},d={mods:{"⇧":16,shift:16,"⌃":17,ctrl:17,"⌥":18,alt:18,option:18,"⌘":91,meta:91,cmd:91,"super":91,win:91},keys:{"⌫":8,backspace:8,"⇥":9,"⇆":9,tab:9,"↩":13,"return":13,enter:13,"⌅":13,pause:19,"pause-break":19,"⇪":20,caps:20,"caps-lock":20,"⎋":27,escape:27,esc:27,space:32,"↖":33,pgup:33,"page-up":33,"↘":34,pgdown:34,"page-down":34,"⇟":35,end:35,"⇞":36,home:36,ins:45,insert:45,del:46,"delete":46,"←":37,left:37,"arrow-left":37,"↑":38,up:38,"arrow-up":38,"→":39,right:39,"arrow-right":39,"↓":40,down:40,"arrow-down":40,"*":106,star:106,asterisk:106,multiply:106,"+":107,plus:107,"-":109,subtract:109,"num-.":110,"num-period":110,"num-dot":110,"num-full-stop":110,"num-delete":110,";":186,semicolon:186,"=":187,equals:187,",":188,comma:188,".":190,period:190,"full-stop":190,"/":191,slash:191,"forward-slash":191,"`":192,tick:192,"back-quote":192,"[":219,"open-bracket":219,"\\":220,"back-slash":220,"]":221,"close-bracket":221,"'":222,quote:222,apostraphe:222}},m=47,p=0;++m<106;)d.keys[p]=m,d.keys["num-"+p]=m+48,++p;for(m=111,p=1;++m<136;)d.keys["f"+p]=m,++p;for(m=64;++m<91;)d.keys[String.fromCharCode(m).toLowerCase()]=m;var h=t.jwerty={event:function(e,t,n){if(r(t,"boolean")){var i=t;t=function(){return i}}e=new o(e);var a,u,s=0,f=e.length-1;return function(r){return(u=h.is(e,r,s))?f>s?void++s:(a=t.call(n||this,r,u),a===!1&&r.preventDefault(),void(s=0)):void(s=h.is(e,r)?1:0)}},is:function(e,t,n){e=new o(e),n=n||0,e=e[n],t=t.originalEvent||t;for(var r=e.length,i=!1;r--;){i=e[r].jwertyCombo;for(var a in e[r])"jwertyCombo"!==a&&t[a]!=e[r][a]&&(i=!1);if(i!==!1)return i}return i},key:function(t,n,o,s,f){var l=r(o,"element")||r(o,"string")?o:s,c=l===o?e:o,y=l===o?s:f,d=r(l,"element")?l:i(l,y),m=h.event(t,n,c);return a(d,m),{unbind:function(){u(d,m)}}},fire:function(e,t,n,a){e=new o(e);var u=r(n,"number")?n:a;s(r(t,"element")?t:i(t,n),e[u||0][0])},KEYS:d}}("undefined"!=typeof global&&global.window||this,"undefined"!=typeof module&&module.exports?module.exports:this);