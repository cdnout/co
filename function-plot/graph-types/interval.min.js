"use strict";var __importDefault=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});const d3_selection_1=require("d3-selection"),evaluate_1=__importDefault(require("../evaluate")),utils_1=__importDefault(require("../utils"));function interval(t){let e;const a=t.meta.xScale,n=t.meta.yScale;function r(t,a,n,r){if(n>r){const t=n;n=r,r=t}const i=Math.min(a,r),l=Math.max(t,n);return l>i?[-e,0]:[l,i]}const i=function(t,i){let l="";const o=n.range(),s=Math.min.apply(Math,o),c=Math.max.apply(Math,o);for(let o=0,u=t.length;o<u;o+=1)if(t[o]){const u=t[o][0],f=t[o][1];let h=f.lo,_=f.hi;i&&(h=Math.min(h,0),_=Math.max(_,0));const d=a(u.lo)+t.scaledDx/2,p=r(s,c,isFinite(_)?n(_):-1/0,isFinite(h)?n(h):1/0),m=p[0],M=p[1];l+=" M "+d+" "+m,l+=" v "+Math.max(M-m,e)}return l};return function a(n){n.each(function(n){const r=a.el=d3_selection_1.select(this),l=n.index,o=n.closed,s=evaluate_1.default(t,n),c=r.selectAll(":scope > path.line").data(s);e=Math.max(s[0].scaledDx,1);const u=c.enter().append("path").attr("class","line line-"+l).attr("fill","none"),f=c.merge(u).attr("stroke-width",e).attr("stroke",utils_1.default.color(n,l)).attr("opacity",o?.5:1).attr("d",function(t){return i(t,o)});if(n.attr)for(let t in n.attr)n.attr.hasOwnProperty(t)&&f.attr(t,n.attr[t]);c.exit().remove()})}}exports.default=interval;