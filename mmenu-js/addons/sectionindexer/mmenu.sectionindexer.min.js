import Mmenu from"../../core/oncanvas/mmenu.oncanvas";import options from"./_options";import{extendShorthandOptions}from"./_options";import*as DOM from"../../_modules/dom";import*as support from"../../_modules/support";import{extend}from"../../_modules/helpers";Mmenu.options.sectionIndexer=options;export default function(){var e=this,n=extendShorthandOptions(this.opts.sectionIndexer);this.opts.sectionIndexer=extend(n,Mmenu.options.sectionIndexer),n.add&&this.bind("initPanels:after",function(){if(!e.node.indx){var n="";"abcdefghijklmnopqrstuvwxyz".split("").forEach(function(e){n+='<a href="#">'+e+"</a>"});var t=DOM.create("div.mm-sectionindexer");t.innerHTML=n,e.node.pnls.prepend(t),e.node.indx=t,e.node.indx.addEventListener("click",function(e){e.target.matches("a")&&e.preventDefault()});var o=function(n){if(n.target.matches("a")){var t=n.target.textContent,o=DOM.children(e.node.pnls,".mm-panel_opened")[0],i=-1,r=o.scrollTop;o.scrollTop=0,DOM.find(o,".mm-divider").filter(function(e){return!e.matches(".mm-hidden")}).forEach(function(e){i<0&&t==e.textContent.trim().slice(0,1).toLowerCase()&&(i=e.offsetTop)}),o.scrollTop=i>-1?i:r}};support.touch?(e.node.indx.addEventListener("touchstart",o),e.node.indx.addEventListener("touchmove",o)):e.node.indx.addEventListener("mouseover",o)}e.bind("openPanel:start",function(n){var t=DOM.find(n,".mm-divider").filter(function(e){return!e.matches(".mm-hidden")}).length;e.node.indx.classList[t?"add":"remove"]("mm-sectionindexer_active")})})};