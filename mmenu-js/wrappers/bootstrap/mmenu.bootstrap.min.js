import*as DOM from"../../_modules/dom";export default function(){var e=this;if(this.node.menu.matches(".navbar-collapse")){this.conf.offCanvas&&(this.conf.offCanvas.clone=!1);var t=DOM.create("nav"),n=DOM.create("div");t.append(n),DOM.children(this.node.menu).forEach(function(t){switch(!0){case t.matches(".navbar-nav"):n.append((a=t,r=DOM.create("ul"),DOM.find(a,".nav-item").forEach(function(e){var t=DOM.create("li");if(e.matches(".active")&&t.classList.add("Selected"),!e.matches(".nav-link")){var n=DOM.children(e,".dropdown-menu")[0];n&&t.append(o(n)),e=DOM.children(e,".nav-link")[0]}t.prepend(i(e)),r.append(t)}),r));break;case t.matches(".dropdown-menu"):n.append(o(t));break;case t.matches(".form-inline"):e.conf.searchfield.form={action:t.getAttribute("action")||null,method:t.getAttribute("method")||null},e.conf.searchfield.input={name:t.querySelector("input").getAttribute("name")||null},e.conf.searchfield.clear=!1,e.conf.searchfield.submit=!0;break;default:n.append(t.cloneNode(!0))}var a,r}),this.bind("initMenu:before",function(){document.body.prepend(t),e.node.menu=t});var a=this.node.menu.parentElement;if(a){var r=a.querySelector(".navbar-toggler");r&&(r.removeAttribute("data-target"),r.removeAttribute("aria-controls"),r.outerHTML=r.outerHTML,(r=a.querySelector(".navbar-toggler")).addEventListener("click",function(t){t.preventDefault(),t.stopImmediatePropagation(),e[e.vars.opened?"close":"open"]()}))}}function i(e){for(var t=DOM.create(e.matches("a")?"a":"span"),n=["href","title","target"],a=0;a<n.length;a++)e.getAttribute(n[a])&&t.setAttribute(n[a],e.getAttribute(n[a]));return t.innerHTML=e.innerHTML,DOM.find(t,".sr-only").forEach(function(e){e.remove()}),t}function o(e){var t=DOM.create("ul");return DOM.children(e).forEach(function(e){var n=DOM.create("li");e.matches(".dropdown-divider")?n.classList.add("Divider"):e.matches(".dropdown-item")&&n.append(i(e)),t.append(n)}),t}};