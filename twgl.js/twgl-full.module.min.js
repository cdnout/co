let VecType=Float32Array;function setDefaultType(e){var t=VecType;return VecType=e,t}function create(e,t,r){const n=new VecType(3);return e&&(n[0]=e),t&&(n[1]=t),r&&(n[2]=r),n}function add(e,t,r){return(r=r||new VecType(3))[0]=e[0]+t[0],r[1]=e[1]+t[1],r[2]=e[2]+t[2],r}function subtract(e,t,r){return(r=r||new VecType(3))[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],r}function lerp(e,t,r,n){return(n=n||new VecType(3))[0]=e[0]+r*(t[0]-e[0]),n[1]=e[1]+r*(t[1]-e[1]),n[2]=e[2]+r*(t[2]-e[2]),n}function lerpV(e,t,r,n){return(n=n||new VecType(3))[0]=e[0]+r[0]*(t[0]-e[0]),n[1]=e[1]+r[1]*(t[1]-e[1]),n[2]=e[2]+r[2]*(t[2]-e[2]),n}function max(e,t,r){return(r=r||new VecType(3))[0]=Math.max(e[0],t[0]),r[1]=Math.max(e[1],t[1]),r[2]=Math.max(e[2],t[2]),r}function min(e,t,r){return(r=r||new VecType(3))[0]=Math.min(e[0],t[0]),r[1]=Math.min(e[1],t[1]),r[2]=Math.min(e[2],t[2]),r}function mulScalar(e,t,r){return(r=r||new VecType(3))[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r}function divScalar(e,t,r){return(r=r||new VecType(3))[0]=e[0]/t,r[1]=e[1]/t,r[2]=e[2]/t,r}function cross(e,t,r){r=r||new VecType(3);var n=e[2]*t[0]-e[0]*t[2],a=e[0]*t[1]-e[1]*t[0];return r[0]=e[1]*t[2]-e[2]*t[1],r[1]=n,r[2]=a,r}function dot(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function length$1(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2])}function lengthSq(e){return e[0]*e[0]+e[1]*e[1]+e[2]*e[2]}function distance(e,t){var r=e[0]-t[0],n=e[1]-t[1],t=e[2]-t[2];return Math.sqrt(r*r+n*n+t*t)}function distanceSq(e,t){var r=e[0]-t[0],n=e[1]-t[1],t=e[2]-t[2];return r*r+n*n+t*t}function normalize(e,t){t=t||new VecType(3);var r=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=Math.sqrt(r);return 1e-5<r?(t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r):(t[0]=0,t[1]=0,t[2]=0),t}function negate(e,t){return(t=t||new VecType(3))[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function copy(e,t){return(t=t||new VecType(3))[0]=e[0],t[1]=e[1],t[2]=e[2],t}function multiply(e,t,r){return(r=r||new VecType(3))[0]=e[0]*t[0],r[1]=e[1]*t[1],r[2]=e[2]*t[2],r}function divide(e,t,r){return(r=r||new VecType(3))[0]=e[0]/t[0],r[1]=e[1]/t[1],r[2]=e[2]/t[2],r}var v3=Object.freeze({__proto__:null,add:add,copy:copy,create:create,cross:cross,distance:distance,distanceSq:distanceSq,divide:divide,divScalar:divScalar,dot:dot,lerp:lerp,lerpV:lerpV,length:length$1,lengthSq:lengthSq,max:max,min:min,mulScalar:mulScalar,multiply:multiply,negate:negate,normalize:normalize,setDefaultType:setDefaultType,subtract:subtract});let MatType=Float32Array;function setDefaultType$1(e){var t=MatType;return MatType=e,t}function negate$1(e,t){return(t=t||new MatType(16))[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=-e[7],t[8]=-e[8],t[9]=-e[9],t[10]=-e[10],t[11]=-e[11],t[12]=-e[12],t[13]=-e[13],t[14]=-e[14],t[15]=-e[15],t}function copy$1(e,t){return(t=t||new MatType(16))[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function identity(e){return(e=e||new MatType(16))[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function transpose(e,t){if((t=t||new MatType(16))===e){var r=e[1];return e[1]=e[4],e[4]=r,r=e[2],e[2]=e[8],e[8]=r,r=e[3],e[3]=e[12],e[12]=r,r=e[6],e[6]=e[9],e[9]=r,r=e[7],e[7]=e[13],e[13]=r,r=e[11],e[11]=e[14],e[14]=r,t}var n=e[0],a=e[1],o=e[2],i=e[3],s=e[4],u=e[5],f=e[6],c=e[7],l=e[8],T=e[9],E=e[10],m=e[11],A=e[12],_=e[13],r=e[14],e=e[15];return t[0]=n,t[1]=s,t[2]=l,t[3]=A,t[4]=a,t[5]=u,t[6]=T,t[7]=_,t[8]=o,t[9]=f,t[10]=E,t[11]=r,t[12]=i,t[13]=c,t[14]=m,t[15]=e,t}function inverse(e,t){t=t||new MatType(16);var r=e[0],n=e[1],a=e[2],o=e[3],i=e[4],s=e[5],u=e[6],f=e[7],c=e[8],l=e[9],T=e[10],E=e[11],m=e[12],A=e[13],_=e[14],y=e[15],p=T*y,d=_*E,R=u*y,F=_*f,I=u*E,S=T*f,N=a*y,b=_*o,B=a*E,g=T*o,x=a*f,U=u*o,h=c*A,P=m*l,D=i*A,C=m*s,M=i*l,G=c*s,O=r*A,v=m*n,L=r*l,$=c*n,w=r*s,V=i*n,H=p*s+F*l+I*A-(d*s+R*l+S*A),e=d*n+N*l+g*A-(p*n+b*l+B*A),A=R*n+b*s+x*A-(F*n+N*s+U*A),s=S*n+B*s+U*l-(I*n+g*s+x*l),l=1/(r*H+i*e+c*A+m*s);return t[0]=l*H,t[1]=l*e,t[2]=l*A,t[3]=l*s,t[4]=l*(d*i+R*c+S*m-(p*i+F*c+I*m)),t[5]=l*(p*r+b*c+B*m-(d*r+N*c+g*m)),t[6]=l*(F*r+N*i+U*m-(R*r+b*i+x*m)),t[7]=l*(I*r+g*i+x*c-(S*r+B*i+U*c)),t[8]=l*(h*f+C*E+M*y-(P*f+D*E+G*y)),t[9]=l*(P*o+O*E+$*y-(h*o+v*E+L*y)),t[10]=l*(D*o+v*f+w*y-(C*o+O*f+V*y)),t[11]=l*(G*o+L*f+V*E-(M*o+$*f+w*E)),t[12]=l*(D*T+G*_+P*u-(M*_+h*u+C*T)),t[13]=l*(L*_+h*a+v*T-(O*T+$*_+P*a)),t[14]=l*(O*u+V*_+C*a-(w*_+D*a+v*u)),t[15]=l*(w*T+M*a+$*u-(L*u+V*T+G*a)),t}function multiply$1(e,t,r){r=r||new MatType(16);var n=e[0],a=e[1],o=e[2],i=e[3],s=e[4],u=e[5],f=e[6],c=e[7],l=e[8],T=e[9],E=e[10],m=e[11],A=e[12],_=e[13],y=e[14],p=e[15],d=t[0],R=t[1],F=t[2],I=t[3],S=t[4],N=t[5],b=t[6],B=t[7],g=t[8],x=t[9],U=t[10],h=t[11],P=t[12],D=t[13],e=t[14],t=t[15];return r[0]=n*d+s*R+l*F+A*I,r[1]=a*d+u*R+T*F+_*I,r[2]=o*d+f*R+E*F+y*I,r[3]=i*d+c*R+m*F+p*I,r[4]=n*S+s*N+l*b+A*B,r[5]=a*S+u*N+T*b+_*B,r[6]=o*S+f*N+E*b+y*B,r[7]=i*S+c*N+m*b+p*B,r[8]=n*g+s*x+l*U+A*h,r[9]=a*g+u*x+T*U+_*h,r[10]=o*g+f*x+E*U+y*h,r[11]=i*g+c*x+m*U+p*h,r[12]=n*P+s*D+l*e+A*t,r[13]=a*P+u*D+T*e+_*t,r[14]=o*P+f*D+E*e+y*t,r[15]=i*P+c*D+m*e+p*t,r}function setTranslation(e,t,r){return e!==(r=r||identity())&&(r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11]),r[12]=t[0],r[13]=t[1],r[14]=t[2],r[15]=1,r}function getTranslation(e,t){return(t=t||create())[0]=e[12],t[1]=e[13],t[2]=e[14],t}function getAxis(e,t,r){t*=4;return(r=r||create())[0]=e[0+t],r[1]=e[1+t],r[2]=e[2+t],r}function setAxis(e,t,r,n){r*=4;return(n=n!==e?copy$1(e,n):n)[0+r]=t[0],n[1+r]=t[1],n[2+r]=t[2],n}function perspective(e,t,r,n,a){a=a||new MatType(16);var o=Math.tan(.5*Math.PI-.5*e),e=1/(r-n);return a[0]=o/t,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=o,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=(r+n)*e,a[11]=-1,a[12]=0,a[13]=0,a[14]=r*n*e*2,a[15]=0,a}function ortho(e,t,r,n,a,o,i){return(i=i||new MatType(16))[0]=2/(t-e),i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=2/(n-r),i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=2/(a-o),i[11]=0,i[12]=(t+e)/(e-t),i[13]=(n+r)/(r-n),i[14]=(o+a)/(a-o),i[15]=1,i}function frustum(e,t,r,n,a,o,i){var s=t-e,u=n-r,f=a-o;return(i=i||new MatType(16))[0]=2*a/s,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=2*a/u,i[6]=0,i[7]=0,i[8]=(e+t)/s,i[9]=(n+r)/u,i[10]=o/f,i[11]=-1,i[12]=0,i[13]=0,i[14]=a*o/f,i[15]=0,i}let xAxis,yAxis,zAxis;function lookAt(e,t,r,n){return n=n||new MatType(16),xAxis=xAxis||create(),yAxis=yAxis||create(),zAxis=zAxis||create(),normalize(subtract(e,t,zAxis),zAxis),normalize(cross(r,zAxis,xAxis),xAxis),normalize(cross(zAxis,xAxis,yAxis),yAxis),n[0]=xAxis[0],n[1]=xAxis[1],n[2]=xAxis[2],n[3]=0,n[4]=yAxis[0],n[5]=yAxis[1],n[6]=yAxis[2],n[7]=0,n[8]=zAxis[0],n[9]=zAxis[1],n[10]=zAxis[2],n[11]=0,n[12]=e[0],n[13]=e[1],n[14]=e[2],n[15]=1,n}function translation(e,t){return(t=t||new MatType(16))[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function translate(e,t,r){r=r||new MatType(16);var n=t[0],a=t[1],o=t[2],i=e[0],s=e[1],u=e[2],f=e[3],c=e[4],l=e[5],T=e[6],E=e[7],m=e[8],A=e[9],_=e[10],y=e[11],p=e[12],d=e[13],R=e[14],t=e[15];return e!==r&&(r[0]=i,r[1]=s,r[2]=u,r[3]=f,r[4]=c,r[5]=l,r[6]=T,r[7]=E,r[8]=m,r[9]=A,r[10]=_,r[11]=y),r[12]=i*n+c*a+m*o+p,r[13]=s*n+l*a+A*o+d,r[14]=u*n+T*a+_*o+R,r[15]=f*n+E*a+y*o+t,r}function rotationX(e,t){t=t||new MatType(16);var r=Math.cos(e),e=Math.sin(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=e,t[7]=0,t[8]=0,t[9]=-e,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function rotateX(e,t,r){r=r||new MatType(16);var n=e[4],a=e[5],o=e[6],i=e[7],s=e[8],u=e[9],f=e[10],c=e[11],l=Math.cos(t),t=Math.sin(t);return r[4]=l*n+t*s,r[5]=l*a+t*u,r[6]=l*o+t*f,r[7]=l*i+t*c,r[8]=l*s-t*n,r[9]=l*u-t*a,r[10]=l*f-t*o,r[11]=l*c-t*i,e!==r&&(r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r}function rotationY(e,t){t=t||new MatType(16);var r=Math.cos(e),e=Math.sin(e);return t[0]=r,t[1]=0,t[2]=-e,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=e,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function rotateY(e,t,r){r=r||new MatType(16);var n=e[0],a=e[1],o=e[2],i=e[3],s=e[8],u=e[9],f=e[10],c=e[11],l=Math.cos(t),t=Math.sin(t);return r[0]=l*n-t*s,r[1]=l*a-t*u,r[2]=l*o-t*f,r[3]=l*i-t*c,r[8]=l*s+t*n,r[9]=l*u+t*a,r[10]=l*f+t*o,r[11]=l*c+t*i,e!==r&&(r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r}function rotationZ(e,t){t=t||new MatType(16);var r=Math.cos(e),e=Math.sin(e);return t[0]=r,t[1]=e,t[2]=0,t[3]=0,t[4]=-e,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function rotateZ(e,t,r){r=r||new MatType(16);var n=e[0],a=e[1],o=e[2],i=e[3],s=e[4],u=e[5],f=e[6],c=e[7],l=Math.cos(t),t=Math.sin(t);return r[0]=l*n+t*s,r[1]=l*a+t*u,r[2]=l*o+t*f,r[3]=l*i+t*c,r[4]=l*s-t*n,r[5]=l*u-t*a,r[6]=l*f-t*o,r[7]=l*c-t*i,e!==r&&(r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r}function axisRotation(e,t,r){r=r||new MatType(16);var n=e[0],a=e[1],o=e[2],i=Math.sqrt(n*n+a*a+o*o),s=(n/=i)*n,u=(a/=i)*a,f=(o/=i)*o,e=Math.cos(t),i=Math.sin(t),t=1-e;return r[0]=s+(1-s)*e,r[1]=n*a*t+o*i,r[2]=n*o*t-a*i,r[3]=0,r[4]=n*a*t-o*i,r[5]=u+(1-u)*e,r[6]=a*o*t+n*i,r[7]=0,r[8]=n*o*t+a*i,r[9]=a*o*t-n*i,r[10]=f+(1-f)*e,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function axisRotate(e,t,r,n){n=n||new MatType(16);var a=t[0],o=t[1],i=t[2],s=Math.sqrt(a*a+o*o+i*i),u=(a/=s)*a,f=(o/=s)*o,c=(i/=s)*i,l=Math.cos(r),T=Math.sin(r),E=1-l,m=u+(1-u)*l,A=a*o*E+i*T,_=a*i*E-o*T,y=a*o*E-i*T,p=f+(1-f)*l,d=o*i*E+a*T,R=a*i*E+o*T,F=o*i*E-a*T,I=c+(1-c)*l,t=e[0],s=e[1],r=e[2],u=e[3],f=e[4],o=e[5],i=e[6],E=e[7],a=e[8],T=e[9],c=e[10],l=e[11];return n[0]=m*t+A*f+_*a,n[1]=m*s+A*o+_*T,n[2]=m*r+A*i+_*c,n[3]=m*u+A*E+_*l,n[4]=y*t+p*f+d*a,n[5]=y*s+p*o+d*T,n[6]=y*r+p*i+d*c,n[7]=y*u+p*E+d*l,n[8]=R*t+F*f+I*a,n[9]=R*s+F*o+I*T,n[10]=R*r+F*i+I*c,n[11]=R*u+F*E+I*l,e!==n&&(n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n}function scaling(e,t){return(t=t||new MatType(16))[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function scale(e,t,r){r=r||new MatType(16);var n=t[0],a=t[1],t=t[2];return r[0]=n*e[0],r[1]=n*e[1],r[2]=n*e[2],r[3]=n*e[3],r[4]=a*e[4],r[5]=a*e[5],r[6]=a*e[6],r[7]=a*e[7],r[8]=t*e[8],r[9]=t*e[9],r[10]=t*e[10],r[11]=t*e[11],e!==r&&(r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r}function transformPoint(e,t,r){r=r||create();var n=t[0],a=t[1],o=t[2],t=n*e[3]+a*e[7]+o*e[11]+e[15];return r[0]=(n*e[0]+a*e[4]+o*e[8]+e[12])/t,r[1]=(n*e[1]+a*e[5]+o*e[9]+e[13])/t,r[2]=(n*e[2]+a*e[6]+o*e[10]+e[14])/t,r}function transformDirection(e,t,r){r=r||create();var n=t[0],a=t[1],t=t[2];return r[0]=n*e[0]+a*e[4]+t*e[8],r[1]=n*e[1]+a*e[5]+t*e[9],r[2]=n*e[2]+a*e[6]+t*e[10],r}function transformNormal(e,t,r){r=r||create();var n=inverse(e),a=t[0],e=t[1],t=t[2];return r[0]=a*n[0]+e*n[1]+t*n[2],r[1]=a*n[4]+e*n[5]+t*n[6],r[2]=a*n[8]+e*n[9]+t*n[10],r}var m4=Object.freeze({__proto__:null,axisRotate:axisRotate,axisRotation:axisRotation,copy:copy$1,frustum:frustum,getAxis:getAxis,getTranslation:getTranslation,identity:identity,inverse:inverse,lookAt:lookAt,multiply:multiply$1,negate:negate$1,ortho:ortho,perspective:perspective,rotateX:rotateX,rotateY:rotateY,rotateZ:rotateZ,rotationX:rotationX,rotationY:rotationY,rotationZ:rotationZ,scale:scale,scaling:scaling,setAxis:setAxis,setDefaultType:setDefaultType$1,setTranslation:setTranslation,transformDirection:transformDirection,transformNormal:transformNormal,transformPoint:transformPoint,translate:translate,translation:translation,transpose:transpose});const BYTE=5120,UNSIGNED_BYTE=5121,SHORT=5122,UNSIGNED_SHORT=5123,INT=5124,UNSIGNED_INT=5125,FLOAT=5126,UNSIGNED_SHORT_4_4_4_4=32819,UNSIGNED_SHORT_5_5_5_1=32820,UNSIGNED_SHORT_5_6_5=33635,HALF_FLOAT=5131,UNSIGNED_INT_2_10_10_10_REV=33640,UNSIGNED_INT_10F_11F_11F_REV=35899,UNSIGNED_INT_5_9_9_9_REV=35902,FLOAT_32_UNSIGNED_INT_24_8_REV=36269,UNSIGNED_INT_24_8=34042,glTypeToTypedArray={};{const Q2=glTypeToTypedArray;Q2[BYTE]=Int8Array,Q2[UNSIGNED_BYTE]=Uint8Array,Q2[SHORT]=Int16Array,Q2[UNSIGNED_SHORT]=Uint16Array,Q2[INT]=Int32Array,Q2[UNSIGNED_INT]=Uint32Array,Q2[FLOAT]=Float32Array,Q2[UNSIGNED_SHORT_4_4_4_4]=Uint16Array,Q2[UNSIGNED_SHORT_5_5_5_1]=Uint16Array,Q2[UNSIGNED_SHORT_5_6_5]=Uint16Array,Q2[HALF_FLOAT]=Uint16Array,Q2[UNSIGNED_INT_2_10_10_10_REV]=Uint32Array,Q2[UNSIGNED_INT_10F_11F_11F_REV]=Uint32Array,Q2[UNSIGNED_INT_5_9_9_9_REV]=Uint32Array,Q2[FLOAT_32_UNSIGNED_INT_24_8_REV]=Uint32Array,Q2[UNSIGNED_INT_24_8]=Uint32Array}function getGLTypeForTypedArray(e){if(e instanceof Int8Array)return BYTE;if(e instanceof Uint8Array)return UNSIGNED_BYTE;if(e instanceof Uint8ClampedArray)return UNSIGNED_BYTE;if(e instanceof Int16Array)return SHORT;if(e instanceof Uint16Array)return UNSIGNED_SHORT;if(e instanceof Int32Array)return INT;if(e instanceof Uint32Array)return UNSIGNED_INT;if(e instanceof Float32Array)return FLOAT;throw new Error("unsupported typed array type")}function getGLTypeForTypedArrayType(e){if(e===Int8Array)return BYTE;if(e===Uint8Array)return UNSIGNED_BYTE;if(e===Uint8ClampedArray)return UNSIGNED_BYTE;if(e===Int16Array)return SHORT;if(e===Uint16Array)return UNSIGNED_SHORT;if(e===Int32Array)return INT;if(e===Uint32Array)return UNSIGNED_INT;if(e===Float32Array)return FLOAT;throw new Error("unsupported typed array type")}function getTypedArrayTypeForGLType(e){e=glTypeToTypedArray[e];if(!e)throw new Error("unknown gl type");return e}const isArrayBuffer="undefined"!=typeof SharedArrayBuffer?function(e){return e&&e.buffer&&(e.buffer instanceof ArrayBuffer||e.buffer instanceof SharedArrayBuffer)}:function(e){return e&&e.buffer&&e.buffer instanceof ArrayBuffer};var typedarrays=Object.freeze({__proto__:null,getGLTypeForTypedArray:getGLTypeForTypedArray,getGLTypeForTypedArrayType:getGLTypeForTypedArrayType,getTypedArrayTypeForGLType:getTypedArrayTypeForGLType,isArrayBuffer:isArrayBuffer});function copyNamedProperties(e,r,n){e.forEach(function(e){var t=r[e];void 0!==t&&(n[e]=t)})}function copyExistingProperties(t,r){Object.keys(r).forEach(function(e){r.hasOwnProperty(e)&&t.hasOwnProperty(e)&&(r[e]=t[e])})}function error(...e){console.error(...e)}function warn(...e){console.warn(...e)}function isBuffer(e,t){return"undefined"!=typeof WebGLBuffer&&t instanceof WebGLBuffer}function isRenderbuffer(e,t){return"undefined"!=typeof WebGLRenderbuffer&&t instanceof WebGLRenderbuffer}function isShader(e,t){return"undefined"!=typeof WebGLShader&&t instanceof WebGLShader}function isTexture(e,t){return"undefined"!=typeof WebGLTexture&&t instanceof WebGLTexture}function isSampler(e,t){return"undefined"!=typeof WebGLSampler&&t instanceof WebGLSampler}const STATIC_DRAW=35044,ARRAY_BUFFER=34962,ELEMENT_ARRAY_BUFFER=34963,BUFFER_SIZE=34660,BYTE$1=5120,UNSIGNED_BYTE$1=5121,SHORT$1=5122,UNSIGNED_SHORT$1=5123,INT$1=5124,UNSIGNED_INT$1=5125,FLOAT$1=5126,defaults={attribPrefix:""};function setAttributePrefix(e){defaults.attribPrefix=e}function setDefaults(e){copyExistingProperties(e,defaults)}function setBufferFromTypedArray(e,t,r,n,a){e.bindBuffer(t,r),e.bufferData(t,n,a||STATIC_DRAW)}function createBufferFromTypedArray(e,t,r,n){if(isBuffer(e,t))return t;r=r||ARRAY_BUFFER;var a=e.createBuffer();return setBufferFromTypedArray(e,r,a,t,n),a}function isIndices(e){return"indices"===e}function getNormalizationForTypedArray(e){return e instanceof Int8Array||e instanceof Uint8Array}function getNormalizationForTypedArrayType(e){return e===Int8Array||e===Uint8Array}function getArray(e){return e.length?e:e.data}const texcoordRE=/coord|texture/i,colorRE=/color|colour/i;function guessNumComponentsFromName(e,t){let r;if(r=texcoordRE.test(e)?2:colorRE.test(e)?4:3,0<t%r)throw new Error(`Can not guess numComponents for attribute '${e}'. Tried ${r} but ${t} values is not evenly divisible by ${r}. You should specify it.`);return r}function getNumComponents(e,t){return e.numComponents||e.size||guessNumComponentsFromName(t,getArray(e).length)}function makeTypedArray(e,t){if(isArrayBuffer(e))return e;if(isArrayBuffer(e.data))return e.data;let r=(e=Array.isArray(e)?{data:e}:e).type;return r=r||(isIndices(t)?Uint16Array:Float32Array),new r(e.data)}function createAttribsFromArrays(c,e){const l={};return Object.keys(e).forEach(function(a){if(!isIndices(a)){var o,i,s,u=e[a],f=u.attrib||u.name||u.attribName||defaults.attribPrefix+a;if(u.value){if(!Array.isArray(u.value)&&!isArrayBuffer(u.value))throw new Error("array.value is not array or typedarray");l[f]={value:u.value}}else{let e,t,r,n;u.buffer&&u.buffer instanceof WebGLBuffer?(e=u.buffer,n=u.numComponents||u.size,t=u.type,r=u.normalize):"number"==typeof u||"number"==typeof u.data?(s=(o=u.data||u)*(i=u.type||Float32Array).BYTES_PER_ELEMENT,t=getGLTypeForTypedArrayType(i),r=void 0!==u.normalize?u.normalize:getNormalizationForTypedArrayType(i),n=u.numComponents||u.size||guessNumComponentsFromName(a,o),e=c.createBuffer(),c.bindBuffer(ARRAY_BUFFER,e),c.bufferData(ARRAY_BUFFER,s,u.drawType||STATIC_DRAW)):(s=makeTypedArray(u,a),e=createBufferFromTypedArray(c,s,void 0,u.drawType),t=getGLTypeForTypedArray(s),r=void 0!==u.normalize?u.normalize:getNormalizationForTypedArray(s),n=getNumComponents(u,a)),l[f]={buffer:e,numComponents:n,type:t,normalize:r,stride:u.stride||0,offset:u.offset||0,divisor:void 0===u.divisor?void 0:u.divisor,drawType:u.drawType}}}}),c.bindBuffer(ARRAY_BUFFER,null),l}function setAttribInfoBufferFromArray(e,t,r,n){r=makeTypedArray(r),void 0!==n?(e.bindBuffer(ARRAY_BUFFER,t.buffer),e.bufferSubData(ARRAY_BUFFER,n,r)):setBufferFromTypedArray(e,ARRAY_BUFFER,t.buffer,r,t.drawType)}function getBytesPerValueForGLType(e,t){return t===BYTE$1||t===UNSIGNED_BYTE$1?1:t===SHORT$1||t===UNSIGNED_SHORT$1?2:t===INT$1||t===UNSIGNED_INT$1||t===FLOAT$1?4:0}const positionKeys=["position","positions","a_position"];function getNumElementsFromNonIndexedArrays(e){let t,r;for(r=0;r<positionKeys.length&&(t=positionKeys[r],!(t in e));++r);r===positionKeys.length&&(t=Object.keys(e)[0]);var n=e[t],a=getArray(n).length,o=getNumComponents(n,t),n=a/o;if(0<a%o)throw new Error(`numComponents ${o} not correct for length ${a}`);return n}function getNumElementsFromAttributes(e,t){let r,n;for(n=0;n<positionKeys.length&&(r=positionKeys[n],!(r in t))&&(r=defaults.attribPrefix+r,!(r in t));++n);n===positionKeys.length&&(r=Object.keys(t)[0]);var a=t[r];e.bindBuffer(ARRAY_BUFFER,a.buffer);var o=e.getBufferParameter(ARRAY_BUFFER,BUFFER_SIZE);e.bindBuffer(ARRAY_BUFFER,null);e=getBytesPerValueForGLType(e,a.type),a=a.numComponents||a.size,e=o/e/a;if(e%1!=0)throw new Error(`numComponents ${a} not correct for length ${length}`);return e}function createBufferInfoFromArrays(e,t,r){var n=createAttribsFromArrays(e,t);const a=Object.assign({},r||{});a.attribs=Object.assign({},r?r.attribs:{},n);t=t.indices;return t?(t=makeTypedArray(t,"indices"),a.indices=createBufferFromTypedArray(e,t,ELEMENT_ARRAY_BUFFER),a.numElements=t.length,a.elementType=getGLTypeForTypedArray(t)):a.numElements||(a.numElements=getNumElementsFromAttributes(e,a.attribs)),a}function createBufferFromArray(e,t,r){var n="indices"===r?ELEMENT_ARRAY_BUFFER:ARRAY_BUFFER;return createBufferFromTypedArray(e,makeTypedArray(t,r),n)}function createBuffersFromArrays(t,r){const n={};return Object.keys(r).forEach(function(e){n[e]=createBufferFromArray(t,r[e],e)}),r.indices?(n.numElements=r.indices.length,n.elementType=getGLTypeForTypedArray(makeTypedArray(r.indices))):n.numElements=getNumElementsFromNonIndexedArrays(r),n}var attributes=Object.freeze({__proto__:null,createAttribsFromArrays:createAttribsFromArrays,createBuffersFromArrays:createBuffersFromArrays,createBufferFromArray:createBufferFromArray,createBufferFromTypedArray:createBufferFromTypedArray,createBufferInfoFromArrays:createBufferInfoFromArrays,setAttribInfoBufferFromArray:setAttribInfoBufferFromArray,setAttributePrefix:setAttributePrefix,setAttributeDefaults_:setDefaults,getNumComponents_:getNumComponents,getArray_:getArray});const getArray$1=getArray,getNumComponents$1=getNumComponents;function augmentTypedArray(r,e){let n=0;return r.push=function(){for(let e=0;e<arguments.length;++e){var t=arguments[e];if(t instanceof Array||isArrayBuffer(t))for(let e=0;e<t.length;++e)r[n++]=t[e];else r[n++]=t}},r.reset=function(e){n=e||0},r.numComponents=e,Object.defineProperty(r,"numElements",{get:function(){return this.length/this.numComponents|0}}),r}function createAugmentedTypedArray(e,t,r){const n=r||Float32Array;return augmentTypedArray(new n(e*t),e)}function allButIndices(e){return"indices"!==e}function deindexVertices(o){const i=o.indices,s={},u=i.length;return Object.keys(o).filter(allButIndices).forEach(function(e){var t=o[e],r=t.numComponents;const n=createAugmentedTypedArray(r,u,t.constructor);for(let e=0;e<u;++e){var a=i[e]*r;for(let e=0;e<r;++e)n.push(t[a+e])}s[e]=n}),s}function flattenNormals(e){if(e.indices)throw new Error("can not flatten normals of indexed vertices. deindex them first");const t=e.normal;var r=t.length;for(let e=0;e<r;e+=9){var n=t[e+0],a=t[e+1],o=t[e+2],i=t[e+3],s=t[e+4],u=t[e+5],i=n+i+t[e+6],s=a+s+t[e+7],o=o+u+t[e+8],u=Math.sqrt(i*i+s*s+o*o);i/=u,s/=u,o/=u,t[e+0]=i,t[e+1]=s,t[e+2]=o,t[e+3]=i,t[e+4]=s,t[e+5]=o,t[e+6]=i,t[e+7]=s,t[e+8]=o}return e}function applyFuncToV3Array(t,r,n){var a=t.length,o=new Float32Array(3);for(let e=0;e<a;e+=3)n(r,[t[e],t[e+1],t[e+2]],o),t[e]=o[0],t[e+1]=o[1],t[e+2]=o[2]}function transformNormal$1(e,t,r){r=r||create();var n=t[0],a=t[1],t=t[2];return r[0]=n*e[0]+a*e[1]+t*e[2],r[1]=n*e[4]+a*e[5]+t*e[6],r[2]=n*e[8]+a*e[9]+t*e[10],r}function reorientDirections(e,t){return applyFuncToV3Array(e,t,transformDirection),e}function reorientNormals(e,t){return applyFuncToV3Array(e,inverse(t),transformNormal$1),e}function reorientPositions(e,t){return applyFuncToV3Array(e,t,transformPoint),e}function reorientVertices(r,n){return Object.keys(r).forEach(function(e){var t=r[e];0<=e.indexOf("pos")?reorientPositions(t,n):0<=e.indexOf("tan")||0<=e.indexOf("binorm")?reorientDirections(t,n):0<=e.indexOf("norm")&&reorientNormals(t,n)}),r}function createXYQuadVertices(e,t,r){return e=e||2,{position:{numComponents:2,data:[(t=t||0)+-1*(e*=.5),(r=r||0)+-1*e,t+ +e,r+-1*e,t+-1*e,r+ +e,t+ +e,r+ +e]},normal:[0,0,1,0,0,1,0,0,1,0,0,1],texcoord:[0,0,1,0,0,1,1,1],indices:[0,1,2,2,1,3]}}function createPlaneVertices(r,n,a,o,e){r=r||1,n=n||1,a=a||1,o=o||1,e=e||identity();var t=(a+1)*(o+1);const i=createAugmentedTypedArray(3,t),s=createAugmentedTypedArray(3,t),u=createAugmentedTypedArray(2,t);for(let t=0;t<=o;t++)for(let e=0;e<=a;e++){var f=e/a,c=t/o;i.push(r*f-.5*r,0,n*c-.5*n),s.push(0,1,0),u.push(f,c)}var l=a+1;const T=createAugmentedTypedArray(3,a*o*2,Uint16Array);for(let t=0;t<o;t++)for(let e=0;e<a;e++)T.push((t+0)*l+e,(t+1)*l+e,(t+0)*l+e+1),T.push((t+1)*l+e,(t+1)*l+e+1,(t+0)*l+e+1);return reorientVertices({position:i,normal:s,texcoord:u,indices:T},e)}function createSphereVertices(r,n,a,o,e,i,t){if(n<=0||a<=0)throw new Error("subdivisionAxis and subdivisionHeight must be > 0");o=o||0,i=i||0;var s=(e=e||Math.PI)-o,u=(t=t||2*Math.PI)-i,t=(n+1)*(a+1);const f=createAugmentedTypedArray(3,t),c=createAugmentedTypedArray(3,t),l=createAugmentedTypedArray(2,t);for(let t=0;t<=a;t++)for(let e=0;e<=n;e++){var T=e/n,E=t/a,m=u*T+i,A=s*E+o,_=Math.sin(m),y=Math.cos(m),m=Math.sin(A),y=y*m,A=Math.cos(A),m=_*m;f.push(r*y,r*A,r*m),c.push(y,A,m),l.push(1-T,E)}var p=n+1;const d=createAugmentedTypedArray(3,n*a*2,Uint16Array);for(let t=0;t<n;t++)for(let e=0;e<a;e++)d.push((e+0)*p+t,(e+0)*p+t+1,(e+1)*p+t),d.push((e+1)*p+t,(e+0)*p+t+1,(e+1)*p+t+1);return{position:f,normal:c,texcoord:l,indices:d}}const CUBE_FACE_INDICES=[[3,7,5,1],[6,2,0,4],[6,7,3,2],[0,1,5,4],[7,6,4,5],[2,3,1,0]];function createCubeVertices(e){var e=(e=e||1)/2,r=[[-e,-e,-e],[+e,-e,-e],[-e,+e,-e],[+e,+e,-e],[-e,-e,+e],[+e,-e,+e],[-e,+e,+e],[+e,+e,+e]],n=[[1,0,0],[-1,0,0],[0,1,0],[0,-1,0],[0,0,1],[0,0,-1]],a=[[1,0],[0,0],[0,1],[1,1]];const o=createAugmentedTypedArray(3,24),i=createAugmentedTypedArray(3,24),s=createAugmentedTypedArray(2,24),u=createAugmentedTypedArray(3,12,Uint16Array);for(let t=0;t<6;++t){var f=CUBE_FACE_INDICES[t];for(let e=0;e<4;++e){var c=r[f[e]],l=n[t],T=a[e];o.push(c),i.push(l),s.push(T)}var E=4*t;u.push(0+E,1+E,2+E),u.push(0+E,2+E,3+E)}return{position:o,normal:i,texcoord:s,indices:u}}function createTruncatedConeVertices(e,o,i,s,u,t,r){if(s<3)throw new Error("radialSubdivisions must be 3 or greater");if(u<1)throw new Error("verticalSubdivisions must be 1 or greater");var n=void 0===t||t,a=void 0===r||r,f=(n?2:0)+(a?2:0),r=(s+1)*(u+1+f);const c=createAugmentedTypedArray(3,r),l=createAugmentedTypedArray(3,r),T=createAugmentedTypedArray(2,r),E=createAugmentedTypedArray(3,s*(u+f/2)*2,Uint16Array);var m=s+1,r=Math.atan2(e-o,i),A=Math.cos(r),_=Math.sin(r),y=u+(a?2:0);for(let a=n?-2:0;a<=y;++a){let t=a/u,r=i*t,n;n=a<0?(r=0,t=1,e):a>u?(r=i,t=1,o):e+(o-e)*(a/u),-2!==a&&a!==u+2||(n=0,t=0),r-=i/2;for(let e=0;e<m;++e){var p=Math.sin(e*Math.PI*2/s),d=Math.cos(e*Math.PI*2/s);c.push(p*n,r,d*n),a<0?l.push(0,-1,0):a>u?l.push(0,1,0):0===n?l.push(0,0,0):l.push(p*A,_,d*A),T.push(e/s,1-t)}}for(let t=0;t<u+f;++t)if(!(1===t&&n||t===u+f-2&&a))for(let e=0;e<s;++e)E.push(m*(t+0)+0+e,m*(t+0)+1+e,m*(t+1)+1+e),E.push(m*(t+0)+0+e,m*(t+1)+1+e,m*(t+1)+0+e);return{position:c,normal:l,texcoord:T,indices:E}}function expandRLEData(t,r){r=r||[];const n=[];for(let e=0;e<t.length;e+=4){var a=t[e];const o=t.slice(e+1,e+4);o.push.apply(o,r);for(let e=0;e<a;++e)n.push.apply(n,o)}return n}function create3DFVertices(){var e=[0,0,0,0,150,0,30,0,0,0,150,0,30,150,0,30,0,0,30,0,0,30,30,0,100,0,0,30,30,0,100,30,0,100,0,0,30,60,0,30,90,0,67,60,0,30,90,0,67,90,0,67,60,0,0,0,30,30,0,30,0,150,30,0,150,30,30,0,30,30,150,30,30,0,30,100,0,30,30,30,30,30,30,30,100,0,30,100,30,30,30,60,30,67,60,30,30,90,30,30,90,30,67,60,30,67,90,30,0,0,0,100,0,0,100,0,30,0,0,0,100,0,30,0,0,30,100,0,0,100,30,0,100,30,30,100,0,0,100,30,30,100,0,30,30,30,0,30,30,30,100,30,30,30,30,0,100,30,30,100,30,0,30,30,0,30,60,30,30,30,30,30,30,0,30,60,0,30,60,30,30,60,0,67,60,30,30,60,30,30,60,0,67,60,0,67,60,30,67,60,0,67,90,30,67,60,30,67,60,0,67,90,0,67,90,30,30,90,0,30,90,30,67,90,30,30,90,0,67,90,30,67,90,0,30,90,0,30,150,30,30,90,30,30,90,0,30,150,0,30,150,30,0,150,0,0,150,30,30,150,30,0,150,0,30,150,30,30,150,0,0,0,0,0,0,30,0,150,30,0,0,0,0,150,30,0,150,0],t=expandRLEData([18,0,0,1,18,0,0,-1,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,-1,0,6,-1,0,0]),r=expandRLEData([18,200,70,120,18,80,70,200,6,70,200,210,6,200,200,70,6,210,100,70,6,210,160,70,6,70,180,210,6,100,70,210,6,76,210,100,6,140,210,80,6,90,130,110,6,160,160,220],[255]),n=e.length/3;const a={position:createAugmentedTypedArray(3,n),texcoord:createAugmentedTypedArray(2,n),normal:createAugmentedTypedArray(3,n),color:createAugmentedTypedArray(4,n,Uint8Array),indices:createAugmentedTypedArray(3,n/3,Uint16Array)};a.position.push(e),a.texcoord.push([.22,.19,.22,.79,.34,.19,.22,.79,.34,.79,.34,.19,.34,.19,.34,.31,.62,.19,.34,.31,.62,.31,.62,.19,.34,.43,.34,.55,.49,.43,.34,.55,.49,.55,.49,.43,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,0,1,1,1,0,0,1,1,1,0]),a.normal.push(t),a.color.push(r);for(let e=0;e<n;++e)a.indices.push(e);return a}function createCrescentVertices(m,t,r,A,_,y,e){if(_<=0)throw new Error("subdivisionDown must be > 0");const p=(e=e||1)-(y=y||0);e=2*(_+1)*4;const d=createAugmentedTypedArray(3,e),R=createAugmentedTypedArray(3,e),F=createAugmentedTypedArray(2,e);function n(t,r,n,a,o,i){for(let e=0;e<=_;e++){var s=+r,u=e/_,f=2*(s-.5),c=(y+u*p)*Math.PI,l=Math.sin(c),T=Math.cos(c),E=m+(t-m)*l,c=f*A,f=T*m,E=l*E;d.push(c,f,E);T=add(multiply([0,l,T],n),a);R.push(T),F.push(s*o+i,u)}}for(let e=0;e<2;e++){var a=2*(+e-.5);n(t,e,[1,1,1],[0,0,0],1,0),n(t,e,[0,0,0],[a,0,0],0,0),n(r,e,[1,1,1],[0,0,0],1,0),n(r,e,[0,0,0],[a,0,0],0,1)}const o=createAugmentedTypedArray(3,2*_*4,Uint16Array);function i(t,r){for(let e=0;e<_;++e)o.push(t+e+0,t+e+1,r+e+0),o.push(t+e+1,r+e+1,r+e+0)}e=_+1;return i(0*e,4*e),i(5*e,7*e),i(6*e,2*e),i(3*e,+e),{position:d,normal:R,texcoord:F,indices:o}}function createCylinderVertices(e,t,r,n,a,o){return createTruncatedConeVertices(e,e,t,r,n,a,o)}function createTorusVertices(t,r,n,a,o,e){if(n<3)throw new Error("radialSubdivisions must be 3 or greater");if(a<3)throw new Error("verticalSubdivisions must be 3 or greater");o=o||0;var i=(e=e||2*Math.PI)-o,s=n+1,u=a+1,e=s*u;const f=createAugmentedTypedArray(3,e),c=createAugmentedTypedArray(3,e),l=createAugmentedTypedArray(2,e),T=createAugmentedTypedArray(3,n*a*2,Uint16Array);for(let e=0;e<u;++e){var E=e/a,m=E*Math.PI*2,A=Math.sin(m),_=t+A*r,y=Math.cos(m),p=y*r;for(let e=0;e<s;++e){var d=e/n,R=o+d*i,F=Math.sin(R),I=Math.cos(R),S=F*A,R=I*A;f.push(F*_,p,I*_),c.push(S,y,R),l.push(d,1-E)}}for(let t=0;t<a;++t)for(let e=0;e<n;++e){var N=1+e,b=1+t;T.push(s*t+e,s*b+e,s*t+N),T.push(s*b+e,s*b+N,s*t+N)}return{position:f,normal:c,texcoord:l,indices:T}}function createDiscVertices(e,r,n,a,o){if(r<3)throw new Error("divisions must be at least 3");o=o||1,a=a||0;var t=(r+1)*((n=n||1)+1);const i=createAugmentedTypedArray(3,t),s=createAugmentedTypedArray(3,t),u=createAugmentedTypedArray(2,t),f=createAugmentedTypedArray(3,n*r*2,Uint16Array);let c=0;var l=e-a,T=r+1;for(let t=0;t<=n;++t){var E=a+l*Math.pow(t/n,o);for(let e=0;e<=r;++e){var m,A=2*Math.PI*e/r,_=E*Math.cos(A),y=E*Math.sin(A);i.push(_,0,y),s.push(0,1,0),u.push(1-e/r,t/n),0<t&&e!==r&&(m=c+(e+1),A=c+e,_=c+e-T,y=c+(e+1)-T,f.push(m,A,_),f.push(m,_,y))}c+=r+1}return{position:i,normal:s,texcoord:u,indices:f}}function randInt(e){return Math.random()*e|0}function makeRandomVertexColors(e,t){t=t||{};var r=e.position.numElements;const n=createAugmentedTypedArray(4,r,Uint8Array),a=t.rand||function(e,t){return t<3?randInt(256):255};if(e.color=n,e.indices)for(let e=0;e<r;++e)n.push(a(e,0),a(e,1),a(e,2),a(e,3));else{var o=t.vertsPerColor||3,i=r/o;for(let e=0;e<i;++e){var s=[a(e,0),a(e,1),a(e,2),a(e,3)];for(let e=0;e<o;++e)n.push(s)}}return e}function createBufferFunc(t){return function(e){return createBuffersFromArrays(e,t.apply(this,Array.prototype.slice.call(arguments,1)))}}function createBufferInfoFunc(t){return function(e){return createBufferInfoFromArrays(e,t.apply(null,Array.prototype.slice.call(arguments,1)))}}const arraySpecPropertyNames=["numComponents","size","type","normalize","stride","offset","attrib","name","attribName"];function copyElements(t,r,n,a){a=a||0;var o=t.length;for(let e=0;e<o;++e)r[n+e]=t[e]+a}function createArrayOfSameType(e,t){const r=getArray$1(e);t=new r.constructor(t);let n=t;return r.numComponents&&r.numElements&&augmentTypedArray(t,r.numComponents),e.data&&(n={data:t},copyNamedProperties(arraySpecPropertyNames,e,n)),n}function concatVertices(s){const n={};let a;for(let e=0;e<s.length;++e){const i=s[e];Object.keys(i).forEach(function(e){n[e]||(n[e]=[]),a||"indices"===e||(a=e);var t=i[e],r=getNumComponents$1(t,e),r=getArray$1(t).length/r;n[e].push(r)})}const r=n[a],o={};return Object.keys(n).forEach(function(e){var t=function(t){let r=0,n;for(let e=0;e<s.length;++e){var a=s[e][t],o=getArray$1(a);r+=o.length,n&&!a.data||(n=a)}return{length:r,spec:n}}(e),t=createArrayOfSameType(t.spec,t.length);!function(t,r,n){let a=0,o=0;for(let e=0;e<s.length;++e){var i=s[e][t],i=getArray$1(i);"indices"===t?(copyElements(i,n,o,a),a+=r[e]):copyElements(i,n,o),o+=i.length}}(e,r,getArray$1(t)),o[e]=t}),o}function duplicateVertices(n){const a={};return Object.keys(n).forEach(function(e){var t=n[e],r=getArray$1(t),t=createArrayOfSameType(t,r.length);copyElements(r,getArray$1(t),0),a[e]=t}),a}const create3DFBufferInfo=createBufferInfoFunc(create3DFVertices),create3DFBuffers=createBufferFunc(create3DFVertices),createCubeBufferInfo=createBufferInfoFunc(createCubeVertices),createCubeBuffers=createBufferFunc(createCubeVertices),createPlaneBufferInfo=createBufferInfoFunc(createPlaneVertices),createPlaneBuffers=createBufferFunc(createPlaneVertices),createSphereBufferInfo=createBufferInfoFunc(createSphereVertices),createSphereBuffers=createBufferFunc(createSphereVertices),createTruncatedConeBufferInfo=createBufferInfoFunc(createTruncatedConeVertices),createTruncatedConeBuffers=createBufferFunc(createTruncatedConeVertices),createXYQuadBufferInfo=createBufferInfoFunc(createXYQuadVertices),createXYQuadBuffers=createBufferFunc(createXYQuadVertices),createCrescentBufferInfo=createBufferInfoFunc(createCrescentVertices),createCrescentBuffers=createBufferFunc(createCrescentVertices),createCylinderBufferInfo=createBufferInfoFunc(createCylinderVertices),createCylinderBuffers=createBufferFunc(createCylinderVertices),createTorusBufferInfo=createBufferInfoFunc(createTorusVertices),createTorusBuffers=createBufferFunc(createTorusVertices),createDiscBufferInfo=createBufferInfoFunc(createDiscVertices),createDiscBuffers=createBufferFunc(createDiscVertices),createCresentBufferInfo=createCrescentBufferInfo,createCresentBuffers=createCrescentBuffers,createCresentVertices=createCrescentVertices;var primitives=Object.freeze({__proto__:null,create3DFBufferInfo:create3DFBufferInfo,create3DFBuffers:create3DFBuffers,create3DFVertices:create3DFVertices,createAugmentedTypedArray:createAugmentedTypedArray,createCubeBufferInfo:createCubeBufferInfo,createCubeBuffers:createCubeBuffers,createCubeVertices:createCubeVertices,createPlaneBufferInfo:createPlaneBufferInfo,createPlaneBuffers:createPlaneBuffers,createPlaneVertices:createPlaneVertices,createSphereBufferInfo:createSphereBufferInfo,createSphereBuffers:createSphereBuffers,createSphereVertices:createSphereVertices,createTruncatedConeBufferInfo:createTruncatedConeBufferInfo,createTruncatedConeBuffers:createTruncatedConeBuffers,createTruncatedConeVertices:createTruncatedConeVertices,createXYQuadBufferInfo:createXYQuadBufferInfo,createXYQuadBuffers:createXYQuadBuffers,createXYQuadVertices:createXYQuadVertices,createCresentBufferInfo:createCresentBufferInfo,createCresentBuffers:createCresentBuffers,createCresentVertices:createCresentVertices,createCrescentBufferInfo:createCrescentBufferInfo,createCrescentBuffers:createCrescentBuffers,createCrescentVertices:createCrescentVertices,createCylinderBufferInfo:createCylinderBufferInfo,createCylinderBuffers:createCylinderBuffers,createCylinderVertices:createCylinderVertices,createTorusBufferInfo:createTorusBufferInfo,createTorusBuffers:createTorusBuffers,createTorusVertices:createTorusVertices,createDiscBufferInfo:createDiscBufferInfo,createDiscBuffers:createDiscBuffers,createDiscVertices:createDiscVertices,deindexVertices:deindexVertices,flattenNormals:flattenNormals,makeRandomVertexColors:makeRandomVertexColors,reorientDirections:reorientDirections,reorientNormals:reorientNormals,reorientPositions:reorientPositions,reorientVertices:reorientVertices,concatVertices:concatVertices,duplicateVertices:duplicateVertices});function isWebGL2(e){return!!e.texStorage2D}function isWebGL1(e){return!e.texStorage2D}const glEnumToString=function(){const a={},o={};return function(e,t){return function(e){var t,r=e.constructor.name;if(!a[r]){for(const n in e)"number"==typeof e[n]&&(t=o[e[n]],o[e[n]]=t?`${t} | ${n}`:n);a[r]=!0}}(e),o[t]||("number"==typeof t?`0x${t.toString(16)}`:t)}}();var utils=Object.freeze({__proto__:null,glEnumToString:glEnumToString,isWebGL1:isWebGL1,isWebGL2:isWebGL2});const defaults$1={textureColor:new Uint8Array([128,192,255,255]),textureOptions:{},crossOrigin:void 0},isArrayBuffer$1=isArrayBuffer,getShared2DContext=function(){let e;return function(){return e=e||("undefined"!=typeof document&&document.createElement?document.createElement("canvas").getContext("2d"):null),e}}(),ALPHA=6406,RGB=6407,RGBA=6408,LUMINANCE=6409,LUMINANCE_ALPHA=6410,DEPTH_COMPONENT=6402,DEPTH_STENCIL=34041,CLAMP_TO_EDGE=33071,NEAREST=9728,LINEAR=9729,TEXTURE_2D=3553,TEXTURE_CUBE_MAP=34067,TEXTURE_3D=32879,TEXTURE_2D_ARRAY=35866,TEXTURE_CUBE_MAP_POSITIVE_X=34069,TEXTURE_CUBE_MAP_NEGATIVE_X=34070,TEXTURE_CUBE_MAP_POSITIVE_Y=34071,TEXTURE_CUBE_MAP_NEGATIVE_Y=34072,TEXTURE_CUBE_MAP_POSITIVE_Z=34073,TEXTURE_CUBE_MAP_NEGATIVE_Z=34074,TEXTURE_MIN_FILTER=10241,TEXTURE_MAG_FILTER=10240,TEXTURE_WRAP_S=10242,TEXTURE_WRAP_T=10243,TEXTURE_WRAP_R=32882,TEXTURE_MIN_LOD=33082,TEXTURE_MAX_LOD=33083,TEXTURE_BASE_LEVEL=33084,TEXTURE_MAX_LEVEL=33085,UNPACK_ALIGNMENT=3317,UNPACK_ROW_LENGTH=3314,UNPACK_IMAGE_HEIGHT=32878,UNPACK_SKIP_PIXELS=3316,UNPACK_SKIP_ROWS=3315,UNPACK_SKIP_IMAGES=32877,UNPACK_COLORSPACE_CONVERSION_WEBGL=37443,UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441,UNPACK_FLIP_Y_WEBGL=37440,R8=33321,R8_SNORM=36756,R16F=33325,R32F=33326,R8UI=33330,R8I=33329,RG16UI=33338,RG16I=33337,RG32UI=33340,RG32I=33339,RG8=33323,RG8_SNORM=36757,RG16F=33327,RG32F=33328,RG8UI=33336,RG8I=33335,R16UI=33332,R16I=33331,R32UI=33334,R32I=33333,RGB8=32849,SRGB8=35905,RGB565=36194,RGB8_SNORM=36758,R11F_G11F_B10F=35898,RGB9_E5=35901,RGB16F=34843,RGB32F=34837,RGB8UI=36221,RGB8I=36239,RGB16UI=36215,RGB16I=36233,RGB32UI=36209,RGB32I=36227,RGBA8=32856,SRGB8_ALPHA8=35907,RGBA8_SNORM=36759,RGB5_A1=32855,RGBA4=32854,RGB10_A2=32857,RGBA16F=34842,RGBA32F=34836,RGBA8UI=36220,RGBA8I=36238,RGB10_A2UI=36975,RGBA16UI=36214,RGBA16I=36232,RGBA32I=36226,RGBA32UI=36208,DEPTH_COMPONENT16=33189,DEPTH_COMPONENT24=33190,DEPTH_COMPONENT32F=36012,DEPTH32F_STENCIL8=36013,DEPTH24_STENCIL8=35056,BYTE$2=5120,UNSIGNED_BYTE$2=5121,SHORT$2=5122,UNSIGNED_SHORT$2=5123,INT$2=5124,UNSIGNED_INT$2=5125,FLOAT$2=5126,UNSIGNED_SHORT_4_4_4_4$1=32819,UNSIGNED_SHORT_5_5_5_1$1=32820,UNSIGNED_SHORT_5_6_5$1=33635,HALF_FLOAT$1=5131,HALF_FLOAT_OES=36193,UNSIGNED_INT_2_10_10_10_REV$1=33640,UNSIGNED_INT_10F_11F_11F_REV$1=35899,UNSIGNED_INT_5_9_9_9_REV$1=35902,FLOAT_32_UNSIGNED_INT_24_8_REV$1=36269,UNSIGNED_INT_24_8$1=34042,RG=33319,RG_INTEGER=33320,RED=6403,RED_INTEGER=36244,RGB_INTEGER=36248,RGBA_INTEGER=36249,formatInfo={};{const Gh=formatInfo;Gh[ALPHA]={numColorComponents:1},Gh[LUMINANCE]={numColorComponents:1},Gh[LUMINANCE_ALPHA]={numColorComponents:2},Gh[RGB]={numColorComponents:3},Gh[RGBA]={numColorComponents:4},Gh[RED]={numColorComponents:1},Gh[RED_INTEGER]={numColorComponents:1},Gh[RG]={numColorComponents:2},Gh[RG_INTEGER]={numColorComponents:2},Gh[RGB]={numColorComponents:3},Gh[RGB_INTEGER]={numColorComponents:3},Gh[RGBA]={numColorComponents:4},Gh[RGBA_INTEGER]={numColorComponents:4},Gh[DEPTH_COMPONENT]={numColorComponents:1},Gh[DEPTH_STENCIL]={numColorComponents:2}}let s_textureInternalFormatInfo;function getTextureInternalFormatInfo(e){if(!s_textureInternalFormatInfo){const t={};t[ALPHA]={textureFormat:ALPHA,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[UNSIGNED_BYTE$2,HALF_FLOAT$1,HALF_FLOAT_OES,FLOAT$2]},t[LUMINANCE]={textureFormat:LUMINANCE,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[UNSIGNED_BYTE$2,HALF_FLOAT$1,HALF_FLOAT_OES,FLOAT$2]},t[LUMINANCE_ALPHA]={textureFormat:LUMINANCE_ALPHA,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2,4,4,8],type:[UNSIGNED_BYTE$2,HALF_FLOAT$1,HALF_FLOAT_OES,FLOAT$2]},t[RGB]={textureFormat:RGB,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,6,6,12,2],type:[UNSIGNED_BYTE$2,HALF_FLOAT$1,HALF_FLOAT_OES,FLOAT$2,UNSIGNED_SHORT_5_6_5$1]},t[RGBA]={textureFormat:RGBA,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,8,8,16,2,2],type:[UNSIGNED_BYTE$2,HALF_FLOAT$1,HALF_FLOAT_OES,FLOAT$2,UNSIGNED_SHORT_4_4_4_4$1,UNSIGNED_SHORT_5_5_5_1$1]},t[DEPTH_COMPONENT]={textureFormat:DEPTH_COMPONENT,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[UNSIGNED_INT$2,UNSIGNED_SHORT$2]},t[R8]={textureFormat:RED,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1],type:[UNSIGNED_BYTE$2]},t[R8_SNORM]={textureFormat:RED,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[1],type:[BYTE$2]},t[R16F]={textureFormat:RED,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4,2],type:[FLOAT$2,HALF_FLOAT$1]},t[R32F]={textureFormat:RED,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[4],type:[FLOAT$2]},t[R8UI]={textureFormat:RED_INTEGER,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[UNSIGNED_BYTE$2]},t[R8I]={textureFormat:RED_INTEGER,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[BYTE$2]},t[R16UI]={textureFormat:RED_INTEGER,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[UNSIGNED_SHORT$2]},t[R16I]={textureFormat:RED_INTEGER,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[SHORT$2]},t[R32UI]={textureFormat:RED_INTEGER,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[UNSIGNED_INT$2]},t[R32I]={textureFormat:RED_INTEGER,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[INT$2]},t[RG8]={textureFormat:RG,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2],type:[UNSIGNED_BYTE$2]},t[RG8_SNORM]={textureFormat:RG,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[2],type:[BYTE$2]},t[RG16F]={textureFormat:RG,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[8,4],type:[FLOAT$2,HALF_FLOAT$1]},t[RG32F]={textureFormat:RG,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[8],type:[FLOAT$2]},t[RG8UI]={textureFormat:RG_INTEGER,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[UNSIGNED_BYTE$2]},t[RG8I]={textureFormat:RG_INTEGER,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[BYTE$2]},t[RG16UI]={textureFormat:RG_INTEGER,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[UNSIGNED_SHORT$2]},t[RG16I]={textureFormat:RG_INTEGER,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[SHORT$2]},t[RG32UI]={textureFormat:RG_INTEGER,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[UNSIGNED_INT$2]},t[RG32I]={textureFormat:RG_INTEGER,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[INT$2]},t[RGB8]={textureFormat:RGB,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3],type:[UNSIGNED_BYTE$2]},t[SRGB8]={textureFormat:RGB,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[UNSIGNED_BYTE$2]},t[RGB565]={textureFormat:RGB,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,2],type:[UNSIGNED_BYTE$2,UNSIGNED_SHORT_5_6_5$1]},t[RGB8_SNORM]={textureFormat:RGB,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[BYTE$2]},t[R11F_G11F_B10F]={textureFormat:RGB,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[FLOAT$2,HALF_FLOAT$1,UNSIGNED_INT_10F_11F_11F_REV$1]},t[RGB9_E5]={textureFormat:RGB,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[FLOAT$2,HALF_FLOAT$1,UNSIGNED_INT_5_9_9_9_REV$1]},t[RGB16F]={textureFormat:RGB,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6],type:[FLOAT$2,HALF_FLOAT$1]},t[RGB32F]={textureFormat:RGB,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[FLOAT$2]},t[RGB8UI]={textureFormat:RGB_INTEGER,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[UNSIGNED_BYTE$2]},t[RGB8I]={textureFormat:RGB_INTEGER,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[BYTE$2]},t[RGB16UI]={textureFormat:RGB_INTEGER,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[UNSIGNED_SHORT$2]},t[RGB16I]={textureFormat:RGB_INTEGER,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[SHORT$2]},t[RGB32UI]={textureFormat:RGB_INTEGER,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[UNSIGNED_INT$2]},t[RGB32I]={textureFormat:RGB_INTEGER,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[INT$2]},t[RGBA8]={textureFormat:RGBA,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[UNSIGNED_BYTE$2]},t[SRGB8_ALPHA8]={textureFormat:RGBA,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[UNSIGNED_BYTE$2]},t[RGBA8_SNORM]={textureFormat:RGBA,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4],type:[BYTE$2]},t[RGB5_A1]={textureFormat:RGBA,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2,4],type:[UNSIGNED_BYTE$2,UNSIGNED_SHORT_5_5_5_1$1,UNSIGNED_INT_2_10_10_10_REV$1]},t[RGBA4]={textureFormat:RGBA,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2],type:[UNSIGNED_BYTE$2,UNSIGNED_SHORT_4_4_4_4$1]},t[RGB10_A2]={textureFormat:RGBA,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[UNSIGNED_INT_2_10_10_10_REV$1]},t[RGBA16F]={textureFormat:RGBA,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[16,8],type:[FLOAT$2,HALF_FLOAT$1]},t[RGBA32F]={textureFormat:RGBA,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[16],type:[FLOAT$2]},t[RGBA8UI]={textureFormat:RGBA_INTEGER,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[UNSIGNED_BYTE$2]},t[RGBA8I]={textureFormat:RGBA_INTEGER,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[BYTE$2]},t[RGB10_A2UI]={textureFormat:RGBA_INTEGER,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[UNSIGNED_INT_2_10_10_10_REV$1]},t[RGBA16UI]={textureFormat:RGBA_INTEGER,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[UNSIGNED_SHORT$2]},t[RGBA16I]={textureFormat:RGBA_INTEGER,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[SHORT$2]},t[RGBA32I]={textureFormat:RGBA_INTEGER,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[INT$2]},t[RGBA32UI]={textureFormat:RGBA_INTEGER,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[UNSIGNED_INT$2]},t[DEPTH_COMPONENT16]={textureFormat:DEPTH_COMPONENT,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[UNSIGNED_SHORT$2,UNSIGNED_INT$2]},t[DEPTH_COMPONENT24]={textureFormat:DEPTH_COMPONENT,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[UNSIGNED_INT$2]},t[DEPTH_COMPONENT32F]={textureFormat:DEPTH_COMPONENT,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[FLOAT$2]},t[DEPTH24_STENCIL8]={textureFormat:DEPTH_STENCIL,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[UNSIGNED_INT_24_8$1]},t[DEPTH32F_STENCIL8]={textureFormat:DEPTH_STENCIL,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[FLOAT_32_UNSIGNED_INT_24_8_REV$1]},Object.keys(t).forEach(function(e){const r=t[e];r.bytesPerElementMap={},r.bytesPerElement.forEach(function(e,t){t=r.type[t];r.bytesPerElementMap[t]=e})}),s_textureInternalFormatInfo=t}return s_textureInternalFormatInfo[e]}function getBytesPerElementForInternalFormat(e,t){e=getTextureInternalFormatInfo(e);if(!e)throw"unknown internal format";t=e.bytesPerElementMap[t];if(void 0===t)throw"unknown internal format";return t}function getFormatAndTypeForInternalFormat(e){e=getTextureInternalFormatInfo(e);if(!e)throw"unknown internal format";return{format:e.textureFormat,type:e.type[0]}}function isPowerOf2(e){return 0==(e&e-1)}function canGenerateMipmap(e,t,r,n){if(!isWebGL2(e))return isPowerOf2(t)&&isPowerOf2(r);n=getTextureInternalFormatInfo(n);if(!n)throw"unknown internal format";return n.colorRenderable&&n.textureFilterable}function canFilter(e){e=getTextureInternalFormatInfo(e);if(!e)throw"unknown internal format";return e.textureFilterable}function getNumComponentsForFormat(e){var t=formatInfo[e];if(!t)throw"unknown format: "+e;return t.numColorComponents}function getTextureTypeForArrayType(e,t,r){return isArrayBuffer$1(t)?getGLTypeForTypedArray(t):r||UNSIGNED_BYTE$2}function guessDimensions(e,t,r,n,a){if(a%1!=0)throw"can't guess dimensions";if(r||n){if(n){if(!r&&(r=a/n)%1)throw"can't guess dimensions"}else if((n=a/r)%1)throw"can't guess dimensions"}else{t=Math.sqrt(a/(t===TEXTURE_CUBE_MAP?6:1));n=t%1==0?r=t:(r=a,1)}return{width:r,height:n}}function setDefaultTextureColor(e){defaults$1.textureColor=new Uint8Array([255*e[0],255*e[1],255*e[2],255*e[3]])}function setDefaults$1(e){copyExistingProperties(e,defaults$1),e.textureColor&&setDefaultTextureColor(e.textureColor)}function setPackState(e,t){void 0!==t.colorspaceConversion&&e.pixelStorei(UNPACK_COLORSPACE_CONVERSION_WEBGL,t.colorspaceConversion),void 0!==t.premultiplyAlpha&&e.pixelStorei(UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),void 0!==t.flipY&&e.pixelStorei(UNPACK_FLIP_Y_WEBGL,t.flipY)}function setSkipStateToDefault(e){e.pixelStorei(UNPACK_ALIGNMENT,4),isWebGL2(e)&&(e.pixelStorei(UNPACK_ROW_LENGTH,0),e.pixelStorei(UNPACK_IMAGE_HEIGHT,0),e.pixelStorei(UNPACK_SKIP_PIXELS,0),e.pixelStorei(UNPACK_SKIP_ROWS,0),e.pixelStorei(UNPACK_SKIP_IMAGES,0))}function setTextureSamplerParameters(e,t,r,n){n.minMag&&(r.call(e,t,TEXTURE_MIN_FILTER,n.minMag),r.call(e,t,TEXTURE_MAG_FILTER,n.minMag)),n.min&&r.call(e,t,TEXTURE_MIN_FILTER,n.min),n.mag&&r.call(e,t,TEXTURE_MAG_FILTER,n.mag),n.wrap&&(r.call(e,t,TEXTURE_WRAP_S,n.wrap),r.call(e,t,TEXTURE_WRAP_T,n.wrap),t!==TEXTURE_3D&&!isSampler(e,t)||r.call(e,t,TEXTURE_WRAP_R,n.wrap)),n.wrapR&&r.call(e,t,TEXTURE_WRAP_R,n.wrapR),n.wrapS&&r.call(e,t,TEXTURE_WRAP_S,n.wrapS),n.wrapT&&r.call(e,t,TEXTURE_WRAP_T,n.wrapT),n.minLod&&r.call(e,t,TEXTURE_MIN_LOD,n.minLod),n.maxLod&&r.call(e,t,TEXTURE_MAX_LOD,n.maxLod),n.baseLevel&&r.call(e,t,TEXTURE_BASE_LEVEL,n.baseLevel),n.maxLevel&&r.call(e,t,TEXTURE_MAX_LEVEL,n.maxLevel)}function setTextureParameters(e,t,r){var n=r.target||TEXTURE_2D;e.bindTexture(n,t),setTextureSamplerParameters(e,n,e.texParameteri,r)}function setSamplerParameters(e,t,r){setTextureSamplerParameters(e,t,e.samplerParameteri,r)}function createSampler(e,t){var r=e.createSampler();return setSamplerParameters(e,r,t),r}function createSamplers(t,r){const n={};return Object.keys(r).forEach(function(e){n[e]=createSampler(t,r[e])}),n}function make1Pixel(e){return e=e||defaults$1.textureColor,isArrayBuffer$1(e)?e:new Uint8Array([255*e[0],255*e[1],255*e[2],255*e[3]])}function setTextureFilteringForSize(e,t,r,n,a,o){r=r||defaults$1.textureOptions,o=o||RGBA;var i=r.target||TEXTURE_2D;n=n||r.width,a=a||r.height,e.bindTexture(i,t),canGenerateMipmap(e,n,a,o)?e.generateMipmap(i):(o=canFilter(o)?LINEAR:NEAREST,e.texParameteri(i,TEXTURE_MIN_FILTER,o),e.texParameteri(i,TEXTURE_MAG_FILTER,o),e.texParameteri(i,TEXTURE_WRAP_S,CLAMP_TO_EDGE),e.texParameteri(i,TEXTURE_WRAP_T,CLAMP_TO_EDGE))}function shouldAutomaticallySetTextureFilteringForSize(e){return!0===e.auto||void 0===e.auto&&void 0===e.level}function getCubeFaceOrder(e,t){return(t=t||{}).cubeFaceOrder||[TEXTURE_CUBE_MAP_POSITIVE_X,TEXTURE_CUBE_MAP_NEGATIVE_X,TEXTURE_CUBE_MAP_POSITIVE_Y,TEXTURE_CUBE_MAP_NEGATIVE_Y,TEXTURE_CUBE_MAP_POSITIVE_Z,TEXTURE_CUBE_MAP_NEGATIVE_Z]}function getCubeFacesWithNdx(e,t){const r=getCubeFaceOrder(e,t),n=r.map(function(e,t){return{face:e,ndx:t}});return n.sort(function(e,t){return e.face-t.face}),n}function setTextureFromElement(o,i,s,u){const f=(u=u||defaults$1.textureOptions).target||TEXTURE_2D,c=u.level||0;let l=s.width,T=s.height;const E=u.internalFormat||u.format||RGBA;var e=getFormatAndTypeForInternalFormat(E);const m=u.format||e.format,A=u.type||e.type;if(setPackState(o,u),o.bindTexture(f,i),f===TEXTURE_CUBE_MAP){var t=s.width,e=s.height;let n,a;if(t/6===e)n=e,a=[0,0,1,0,2,0,3,0,4,0,5,0];else if(e/6===t)n=t,a=[0,0,0,1,0,2,0,3,0,4,0,5];else if(t/3==e/2)n=t/3,a=[0,0,1,0,2,0,0,1,1,1,2,1];else{if(t/2!=e/3)throw"can't figure out cube map from element: "+(s.src||s.nodeName);n=t/2,a=[0,0,1,0,0,1,1,1,0,2,1,2]}const d=getShared2DContext();d?(d.canvas.width=n,d.canvas.height=n,l=n,T=n,getCubeFacesWithNdx(o,u).forEach(function(e){var t=a[2*e.ndx+0]*n,r=a[2*e.ndx+1]*n;d.drawImage(s,t,r,n,n,0,0,n,n),o.texImage2D(e.face,c,E,m,A,d.canvas)}),d.canvas.width=1,d.canvas.height=1):"undefined"!=typeof createImageBitmap&&(l=n,T=n,getCubeFacesWithNdx(o,u).forEach(function(t){var e=a[2*t.ndx+0]*n,r=a[2*t.ndx+1]*n;o.texImage2D(t.face,c,E,n,n,0,m,A,null),createImageBitmap(s,e,r,n,n,{premultiplyAlpha:"none",colorSpaceConversion:"none"}).then(function(e){setPackState(o,u),o.bindTexture(f,i),o.texImage2D(t.face,c,E,m,A,e),shouldAutomaticallySetTextureFilteringForSize(u)&&setTextureFilteringForSize(o,i,u,l,T,E)})}))}else if(f===TEXTURE_3D||f===TEXTURE_2D_ARRAY){var r=Math.min(s.width,s.height),t=Math.max(s.width,s.height),n=t/r;if(n%1!=0)throw"can not compute 3D dimensions of element";var a=s.width===t?1:0,_=s.height===t?1:0;o.pixelStorei(UNPACK_ALIGNMENT,1),o.pixelStorei(UNPACK_ROW_LENGTH,s.width),o.pixelStorei(UNPACK_IMAGE_HEIGHT,0),o.pixelStorei(UNPACK_SKIP_IMAGES,0),o.texImage3D(f,c,E,r,r,r,0,m,A,null);for(let e=0;e<n;++e){var y=e*r*a,p=e*r*_;o.pixelStorei(UNPACK_SKIP_PIXELS,y),o.pixelStorei(UNPACK_SKIP_ROWS,p),o.texSubImage3D(f,c,0,0,e,r,r,1,m,A,s)}setSkipStateToDefault(o)}else o.texImage2D(f,c,E,m,A,s);shouldAutomaticallySetTextureFilteringForSize(u)&&setTextureFilteringForSize(o,i,u,l,T,E),setTextureParameters(o,i,u)}function noop(){}function urlIsSameOrigin(e){if("undefined"!=typeof document){const r=document.createElement("a");return r.href=e,r.hostname===location.hostname&&r.port===location.port&&r.protocol===location.protocol}var t=new URL(location.href).origin;return new URL(e,location.href).origin===t}function setToAnonymousIfUndefinedAndURLIsNotSameOrigin(e,t){return void 0!==t||urlIsSameOrigin(e)?t:"anonymous"}function loadImage(n,e,a){a=a||noop;let o;if(e=void 0!==e?e:defaults$1.crossOrigin,e=setToAnonymousIfUndefinedAndURLIsNotSameOrigin(n,e),"undefined"!=typeof Image){o=new Image,void 0!==e&&(o.crossOrigin=e);const t=function(){o.removeEventListener("error",r),o.removeEventListener("load",i),o=null},r=function(){var e="couldn't load image: "+n;error(e),a(e,o),t()},i=function(){a(null,o),t()};return o.addEventListener("error",r),o.addEventListener("load",i),o.src=n,o}if("undefined"!=typeof ImageBitmap){let t,r;const s=function(){a(t,r)},u={};e&&(u.mode="cors"),fetch(n,u).then(function(e){if(!e.ok)throw e;return e.blob()}).then(function(e){return createImageBitmap(e,{premultiplyAlpha:"none",colorSpaceConversion:"none"})}).then(function(e){r=e,setTimeout(s)}).catch(function(e){t=e,setTimeout(s)}),o=null}return o}function isTexImageSource(e){return"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap||"undefined"!=typeof ImageData&&e instanceof ImageData||"undefined"!=typeof HTMLElement&&e instanceof HTMLElement}function loadAndUseImage(e,t,r){return isTexImageSource(e)?(setTimeout(function(){r(null,e)}),e):loadImage(e,t,r)}function setTextureTo1PixelColor(t,e,r){var n=(r=r||defaults$1.textureOptions).target||TEXTURE_2D;if(t.bindTexture(n,e),!1!==r.color){var a=make1Pixel(r.color);if(n===TEXTURE_CUBE_MAP)for(let e=0;e<6;++e)t.texImage2D(TEXTURE_CUBE_MAP_POSITIVE_X+e,0,RGBA,1,1,0,RGBA,UNSIGNED_BYTE$2,a);else n===TEXTURE_3D||n===TEXTURE_2D_ARRAY?t.texImage3D(n,0,RGBA,1,1,1,0,RGBA,UNSIGNED_BYTE$2,a):t.texImage2D(n,0,RGBA,1,1,0,RGBA,UNSIGNED_BYTE$2,a)}}function loadTextureFromUrl(r,n,a,o){return o=o||noop,a=a||defaults$1.textureOptions,setTextureTo1PixelColor(r,n,a),loadAndUseImage((a=Object.assign({},a)).src,a.crossOrigin,function(e,t){e?o(e,n,t):(setTextureFromElement(r,n,t,a),o(null,n,t))})}function loadCubemapFromUrls(n,a,o,i){i=i||noop;const e=o.src;if(6!==e.length)throw"there must be 6 urls for a cubemap";const s=o.level||0,u=o.internalFormat||o.format||RGBA;var t=getFormatAndTypeForInternalFormat(u);const f=o.format||t.format,c=o.type||UNSIGNED_BYTE$2,l=o.target||TEXTURE_2D;if(l!==TEXTURE_CUBE_MAP)throw"target must be TEXTURE_CUBE_MAP";setTextureTo1PixelColor(n,a,o),o=Object.assign({},o);let T=6;const E=[],m=getCubeFaceOrder(n,o);let A;A=e.map(function(e,t){return loadAndUseImage(e,o.crossOrigin,(r=m[t],function(e,t){--T,e?E.push(e):t.width!==t.height?E.push("cubemap face img is not a square: "+t.src):(setPackState(n,o),n.bindTexture(l,a),5===T?getCubeFaceOrder().forEach(function(e){n.texImage2D(e,s,u,f,c,t)}):n.texImage2D(r,s,u,f,c,t),shouldAutomaticallySetTextureFilteringForSize(o)&&n.generateMipmap(l)),0===T&&i(E.length?E:void 0,a,A)}));var r})}function loadSlicesFromUrls(a,o,i,s){s=s||noop;const e=i.src,u=i.internalFormat||i.format||RGBA;var t=getFormatAndTypeForInternalFormat(u);const f=i.format||t.format,c=i.type||UNSIGNED_BYTE$2,l=i.target||TEXTURE_2D_ARRAY;if(l!==TEXTURE_3D&&l!==TEXTURE_2D_ARRAY)throw"target must be TEXTURE_3D or TEXTURE_2D_ARRAY";setTextureTo1PixelColor(a,o,i),i=Object.assign({},i);let T=e.length;const E=[];let m;const A=i.level||0;let _=i.width,y=i.height;const p=e.length;let d=!0;m=e.map(function(e,t){return loadAndUseImage(e,i.crossOrigin,(n=t,function(e,r){if(--T,e)E.push(e);else{if(setPackState(a,i),a.bindTexture(l,o),d){d=!1,_=i.width||r.width,y=i.height||r.height,a.texImage3D(l,A,u,_,y,p,0,f,c,null);for(let e=0;e<p;++e)a.texSubImage3D(l,A,0,0,e,_,y,1,f,c,r)}else{let e=r,t;r.width===_&&r.height===y||(t=getShared2DContext(),e=t.canvas,t.canvas.width=_,t.canvas.height=y,t.drawImage(r,0,0,_,y)),a.texSubImage3D(l,A,0,0,n,_,y,1,f,c,e),t&&e===t.canvas&&(t.canvas.width=0,t.canvas.height=0)}shouldAutomaticallySetTextureFilteringForSize(i)&&a.generateMipmap(l)}0===T&&s(E.length?E:void 0,o,m)}));var n})}function setTextureFromArray(r,e,n,t){var a=(t=t||defaults$1.textureOptions).target||TEXTURE_2D;r.bindTexture(a,e);let o=t.width,i=t.height,s=t.depth;const u=t.level||0,f=t.internalFormat||t.format||RGBA;var c=getFormatAndTypeForInternalFormat(f);const l=t.format||c.format,T=t.type||getTextureTypeForArrayType(r,n,c.type);if(isArrayBuffer$1(n))n instanceof Uint8ClampedArray&&(n=new Uint8Array(n.buffer));else{const A=getTypedArrayTypeForGLType(T);n=new A(n)}var E=getBytesPerElementForInternalFormat(f,T),e=n.byteLength/E;if(e%1)throw"length wrong size for format: "+glEnumToString(r,l);let m;if(a===TEXTURE_3D||a===TEXTURE_2D_ARRAY)if(o||i||s)!o||i&&s?!i||o&&s?(m=guessDimensions(r,a,o,i,e/s),o=m.width,i=m.height):(m=guessDimensions(r,a,o,s,e/i),o=m.width,s=m.height):(m=guessDimensions(r,a,i,s,e/o),i=m.width,s=m.height);else{c=Math.cbrt(e);if(c%1!=0)throw"can't guess cube size of array of numElements: "+e;o=c,i=c,s=c}else m=guessDimensions(r,a,o,i,e),o=m.width,i=m.height;if(setSkipStateToDefault(r),r.pixelStorei(UNPACK_ALIGNMENT,t.unpackAlignment||1),setPackState(r,t),a===TEXTURE_CUBE_MAP){const _=e/6*(E/n.BYTES_PER_ELEMENT);getCubeFacesWithNdx(r,t).forEach(e=>{var t=_*e.ndx,t=n.subarray(t,t+_);r.texImage2D(e.face,u,f,o,i,0,l,T,t)})}else a===TEXTURE_3D||a===TEXTURE_2D_ARRAY?r.texImage3D(a,u,f,o,i,s,0,l,T,n):r.texImage2D(a,u,f,o,i,0,l,T,n);return{width:o,height:i,depth:s,type:T}}function setEmptyTexture(t,e,r){var n=r.target||TEXTURE_2D;t.bindTexture(n,e);var a=r.level||0,o=r.internalFormat||r.format||RGBA,e=getFormatAndTypeForInternalFormat(o),i=r.format||e.format,s=r.type||e.type;if(setPackState(t,r),n===TEXTURE_CUBE_MAP)for(let e=0;e<6;++e)t.texImage2D(TEXTURE_CUBE_MAP_POSITIVE_X+e,a,o,r.width,r.height,0,i,s,null);else n===TEXTURE_3D||n===TEXTURE_2D_ARRAY?t.texImage3D(n,a,o,r.width,r.height,r.depth,0,i,s,null):t.texImage2D(n,a,o,r.width,r.height,0,i,s,null)}function createTexture(e,t,r){r=r||noop,t=t||defaults$1.textureOptions;var n=e.createTexture(),a=t.target||TEXTURE_2D;let o=t.width||1,i=t.height||1;var s,u=t.internalFormat||RGBA;e.bindTexture(a,n),a===TEXTURE_CUBE_MAP&&(e.texParameteri(a,TEXTURE_WRAP_S,CLAMP_TO_EDGE),e.texParameteri(a,TEXTURE_WRAP_T,CLAMP_TO_EDGE));let f=t.src;return f?("function"==typeof f&&(f=f(e,t)),"string"==typeof f?loadTextureFromUrl(e,n,t,r):isArrayBuffer$1(f)||Array.isArray(f)&&("number"==typeof f[0]||Array.isArray(f[0])||isArrayBuffer$1(f[0]))?(s=setTextureFromArray(e,n,f,t),o=s.width,i=s.height):Array.isArray(f)&&("string"==typeof f[0]||isTexImageSource(f[0]))?(a===TEXTURE_CUBE_MAP?loadCubemapFromUrls:loadSlicesFromUrls)(e,n,t,r):(setTextureFromElement(e,n,f,t),o=f.width,i=f.height)):setEmptyTexture(e,n,t),shouldAutomaticallySetTextureFilteringForSize(t)&&setTextureFilteringForSize(e,n,t,o,i,u),setTextureParameters(e,n,t),n}function resizeTexture(t,e,r,n,a,o){n=n||r.width,a=a||r.height,o=o||r.depth;var i=r.target||TEXTURE_2D;t.bindTexture(i,e);var s=r.level||0,u=r.internalFormat||r.format||RGBA,f=getFormatAndTypeForInternalFormat(u),c=r.format||f.format;let l;e=r.src;if(l=e&&(isArrayBuffer$1(e)||Array.isArray(e)&&"number"==typeof e[0])?r.type||getTextureTypeForArrayType(t,e,f.type):r.type||f.type,i===TEXTURE_CUBE_MAP)for(let e=0;e<6;++e)t.texImage2D(TEXTURE_CUBE_MAP_POSITIVE_X+e,s,u,n,a,0,c,l,null);else i===TEXTURE_3D||i===TEXTURE_2D_ARRAY?t.texImage3D(i,s,u,n,a,o,0,c,l,null):t.texImage2D(i,s,u,n,a,0,c,l,null)}function isAsyncSrc(e){return"string"==typeof e||Array.isArray(e)&&"string"==typeof e[0]}function createTextures(r,a,e){e=e||noop;let o=0;const i=[],s={},u={};function f(){0===o&&setTimeout(function(){e(i.length?i:void 0,s,u)},0)}return Object.keys(a).forEach(function(n){var e=a[n];let t;isAsyncSrc(e.src)&&(t=function(e,t,r){u[n]=r,--o,e&&i.push(e),f()},++o),s[n]=createTexture(r,e,t)}),f(),s}var textures=Object.freeze({__proto__:null,setTextureDefaults_:setDefaults$1,createSampler:createSampler,createSamplers:createSamplers,setSamplerParameters:setSamplerParameters,createTexture:createTexture,setEmptyTexture:setEmptyTexture,setTextureFromArray:setTextureFromArray,loadTextureFromUrl:loadTextureFromUrl,setTextureFromElement:setTextureFromElement,setTextureFilteringForSize:setTextureFilteringForSize,setTextureParameters:setTextureParameters,setDefaultTextureColor:setDefaultTextureColor,createTextures:createTextures,resizeTexture:resizeTexture,canGenerateMipmap:canGenerateMipmap,canFilter:canFilter,getNumComponentsForFormat:getNumComponentsForFormat,getBytesPerElementForInternalFormat:getBytesPerElementForInternalFormat,getFormatAndTypeForInternalFormat:getFormatAndTypeForInternalFormat});const error$1=error,warn$1=warn;function getElementById(e){return"undefined"!=typeof document&&document.getElementById?document.getElementById(e):null}const TEXTURE0=33984,DYNAMIC_DRAW=35048,ARRAY_BUFFER$1=34962,ELEMENT_ARRAY_BUFFER$1=34963,UNIFORM_BUFFER=35345,TRANSFORM_FEEDBACK_BUFFER=35982,TRANSFORM_FEEDBACK=36386,COMPILE_STATUS=35713,LINK_STATUS=35714,FRAGMENT_SHADER=35632,VERTEX_SHADER=35633,SEPARATE_ATTRIBS=35981,ACTIVE_UNIFORMS=35718,ACTIVE_ATTRIBUTES=35721,TRANSFORM_FEEDBACK_VARYINGS=35971,ACTIVE_UNIFORM_BLOCKS=35382,UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER=35396,UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER=35398,UNIFORM_BLOCK_DATA_SIZE=35392,UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES=35395,FLOAT$3=5126,FLOAT_VEC2=35664,FLOAT_VEC3=35665,FLOAT_VEC4=35666,INT$3=5124,INT_VEC2=35667,INT_VEC3=35668,INT_VEC4=35669,BOOL=35670,BOOL_VEC2=35671,BOOL_VEC3=35672,BOOL_VEC4=35673,FLOAT_MAT2=35674,FLOAT_MAT3=35675,FLOAT_MAT4=35676,SAMPLER_2D=35678,SAMPLER_CUBE=35680,SAMPLER_3D=35679,SAMPLER_2D_SHADOW=35682,FLOAT_MAT2x3=35685,FLOAT_MAT2x4=35686,FLOAT_MAT3x2=35687,FLOAT_MAT3x4=35688,FLOAT_MAT4x2=35689,FLOAT_MAT4x3=35690,SAMPLER_2D_ARRAY=36289,SAMPLER_2D_ARRAY_SHADOW=36292,SAMPLER_CUBE_SHADOW=36293,UNSIGNED_INT$3=5125,UNSIGNED_INT_VEC2=36294,UNSIGNED_INT_VEC3=36295,UNSIGNED_INT_VEC4=36296,INT_SAMPLER_2D=36298,INT_SAMPLER_3D=36299,INT_SAMPLER_CUBE=36300,INT_SAMPLER_2D_ARRAY=36303,UNSIGNED_INT_SAMPLER_2D=36306,UNSIGNED_INT_SAMPLER_3D=36307,UNSIGNED_INT_SAMPLER_CUBE=36308,UNSIGNED_INT_SAMPLER_2D_ARRAY=36311,TEXTURE_2D$1=3553,TEXTURE_CUBE_MAP$1=34067,TEXTURE_3D$1=32879,TEXTURE_2D_ARRAY$1=35866,typeMap={};function getBindPointForSamplerType(e,t){return typeMap[t].bindPoint}function floatSetter(t,r){return function(e){t.uniform1f(r,e)}}function floatArraySetter(t,r){return function(e){t.uniform1fv(r,e)}}function floatVec2Setter(t,r){return function(e){t.uniform2fv(r,e)}}function floatVec3Setter(t,r){return function(e){t.uniform3fv(r,e)}}function floatVec4Setter(t,r){return function(e){t.uniform4fv(r,e)}}function intSetter(t,r){return function(e){t.uniform1i(r,e)}}function intArraySetter(t,r){return function(e){t.uniform1iv(r,e)}}function intVec2Setter(t,r){return function(e){t.uniform2iv(r,e)}}function intVec3Setter(t,r){return function(e){t.uniform3iv(r,e)}}function intVec4Setter(t,r){return function(e){t.uniform4iv(r,e)}}function uintSetter(t,r){return function(e){t.uniform1ui(r,e)}}function uintArraySetter(t,r){return function(e){t.uniform1uiv(r,e)}}function uintVec2Setter(t,r){return function(e){t.uniform2uiv(r,e)}}function uintVec3Setter(t,r){return function(e){t.uniform3uiv(r,e)}}function uintVec4Setter(t,r){return function(e){t.uniform4uiv(r,e)}}function floatMat2Setter(t,r){return function(e){t.uniformMatrix2fv(r,!1,e)}}function floatMat3Setter(t,r){return function(e){t.uniformMatrix3fv(r,!1,e)}}function floatMat4Setter(t,r){return function(e){t.uniformMatrix4fv(r,!1,e)}}function floatMat23Setter(t,r){return function(e){t.uniformMatrix2x3fv(r,!1,e)}}function floatMat32Setter(t,r){return function(e){t.uniformMatrix3x2fv(r,!1,e)}}function floatMat24Setter(t,r){return function(e){t.uniformMatrix2x4fv(r,!1,e)}}function floatMat42Setter(t,r){return function(e){t.uniformMatrix4x2fv(r,!1,e)}}function floatMat34Setter(t,r){return function(e){t.uniformMatrix3x4fv(r,!1,e)}}function floatMat43Setter(t,r){return function(e){t.uniformMatrix4x3fv(r,!1,e)}}function samplerSetter(n,e,a,o){const i=getBindPointForSamplerType(n,e);return isWebGL2(n)?function(e){let t,r;r=isTexture(n,e)?(t=e,null):(t=e.texture,e.sampler),n.uniform1i(o,a),n.activeTexture(TEXTURE0+a),n.bindTexture(i,t),n.bindSampler(a,r)}:function(e){n.uniform1i(o,a),n.activeTexture(TEXTURE0+a),n.bindTexture(i,e)}}function samplerArraySetter(a,e,o,t,r){const i=getBindPointForSamplerType(a,e),s=new Int32Array(r);for(let e=0;e<r;++e)s[e]=o+e;return isWebGL2(a)?function(e){a.uniform1iv(t,s),e.forEach(function(e,t){a.activeTexture(TEXTURE0+s[t]);let r,n;n=isTexture(a,e)?(r=e,null):(r=e.texture,e.sampler),a.bindSampler(o,n),a.bindTexture(i,r)})}:function(e){a.uniform1iv(t,s),e.forEach(function(e,t){a.activeTexture(TEXTURE0+s[t]),a.bindTexture(i,e)})}}function floatAttribSetter(t,r){return function(e){if(e.value)switch(t.disableVertexAttribArray(r),e.value.length){case 4:t.vertexAttrib4fv(r,e.value);break;case 3:t.vertexAttrib3fv(r,e.value);break;case 2:t.vertexAttrib2fv(r,e.value);break;case 1:t.vertexAttrib1fv(r,e.value);break;default:throw new Error("the length of a float constant value must be between 1 and 4!")}else t.bindBuffer(ARRAY_BUFFER$1,e.buffer),t.enableVertexAttribArray(r),t.vertexAttribPointer(r,e.numComponents||e.size,e.type||FLOAT$3,e.normalize||!1,e.stride||0,e.offset||0),void 0!==e.divisor&&t.vertexAttribDivisor(r,e.divisor)}}function intAttribSetter(t,r){return function(e){if(e.value){if(t.disableVertexAttribArray(r),4!==e.value.length)throw new Error("The length of an integer constant value must be 4!");t.vertexAttrib4iv(r,e.value)}else t.bindBuffer(ARRAY_BUFFER$1,e.buffer),t.enableVertexAttribArray(r),t.vertexAttribIPointer(r,e.numComponents||e.size,e.type||INT$3,e.stride||0,e.offset||0),void 0!==e.divisor&&t.vertexAttribDivisor(r,e.divisor)}}function uintAttribSetter(t,r){return function(e){if(e.value){if(t.disableVertexAttribArray(r),4!==e.value.length)throw new Error("The length of an unsigned integer constant value must be 4!");t.vertexAttrib4uiv(r,e.value)}else t.bindBuffer(ARRAY_BUFFER$1,e.buffer),t.enableVertexAttribArray(r),t.vertexAttribIPointer(r,e.numComponents||e.size,e.type||UNSIGNED_INT$3,e.stride||0,e.offset||0),void 0!==e.divisor&&t.vertexAttribDivisor(r,e.divisor)}}function matAttribSetter(u,f,e){const c=e.size,l=e.count;return function(t){u.bindBuffer(ARRAY_BUFFER$1,t.buffer);var e=t.size||t.numComponents||c,r=e/l,n=t.type||FLOAT$3,a=typeMap[n].size*e,o=t.normalize||!1,i=t.offset||0,s=a/l;for(let e=0;e<l;++e)u.enableVertexAttribArray(f+e),u.vertexAttribPointer(f+e,r,n,o,a,i+s*e),void 0!==t.divisor&&u.vertexAttribDivisor(f+e,t.divisor)}}typeMap[FLOAT$3]={Type:Float32Array,size:4,setter:floatSetter,arraySetter:floatArraySetter},typeMap[FLOAT_VEC2]={Type:Float32Array,size:8,setter:floatVec2Setter,cols:2},typeMap[FLOAT_VEC3]={Type:Float32Array,size:12,setter:floatVec3Setter,cols:3},typeMap[FLOAT_VEC4]={Type:Float32Array,size:16,setter:floatVec4Setter,cols:4},typeMap[INT$3]={Type:Int32Array,size:4,setter:intSetter,arraySetter:intArraySetter},typeMap[INT_VEC2]={Type:Int32Array,size:8,setter:intVec2Setter,cols:2},typeMap[INT_VEC3]={Type:Int32Array,size:12,setter:intVec3Setter,cols:3},typeMap[INT_VEC4]={Type:Int32Array,size:16,setter:intVec4Setter,cols:4},typeMap[UNSIGNED_INT$3]={Type:Uint32Array,size:4,setter:uintSetter,arraySetter:uintArraySetter},typeMap[UNSIGNED_INT_VEC2]={Type:Uint32Array,size:8,setter:uintVec2Setter,cols:2},typeMap[UNSIGNED_INT_VEC3]={Type:Uint32Array,size:12,setter:uintVec3Setter,cols:3},typeMap[UNSIGNED_INT_VEC4]={Type:Uint32Array,size:16,setter:uintVec4Setter,cols:4},typeMap[BOOL]={Type:Uint32Array,size:4,setter:intSetter,arraySetter:intArraySetter},typeMap[BOOL_VEC2]={Type:Uint32Array,size:8,setter:intVec2Setter,cols:2},typeMap[BOOL_VEC3]={Type:Uint32Array,size:12,setter:intVec3Setter,cols:3},typeMap[BOOL_VEC4]={Type:Uint32Array,size:16,setter:intVec4Setter,cols:4},typeMap[FLOAT_MAT2]={Type:Float32Array,size:32,setter:floatMat2Setter,rows:2,cols:2},typeMap[FLOAT_MAT3]={Type:Float32Array,size:48,setter:floatMat3Setter,rows:3,cols:3},typeMap[FLOAT_MAT4]={Type:Float32Array,size:64,setter:floatMat4Setter,rows:4,cols:4},typeMap[FLOAT_MAT2x3]={Type:Float32Array,size:32,setter:floatMat23Setter,rows:2,cols:3},typeMap[FLOAT_MAT2x4]={Type:Float32Array,size:32,setter:floatMat24Setter,rows:2,cols:4},typeMap[FLOAT_MAT3x2]={Type:Float32Array,size:48,setter:floatMat32Setter,rows:3,cols:2},typeMap[FLOAT_MAT3x4]={Type:Float32Array,size:48,setter:floatMat34Setter,rows:3,cols:4},typeMap[FLOAT_MAT4x2]={Type:Float32Array,size:64,setter:floatMat42Setter,rows:4,cols:2},typeMap[FLOAT_MAT4x3]={Type:Float32Array,size:64,setter:floatMat43Setter,rows:4,cols:3},typeMap[SAMPLER_2D]={Type:null,size:0,setter:samplerSetter,arraySetter:samplerArraySetter,bindPoint:TEXTURE_2D$1},typeMap[SAMPLER_CUBE]={Type:null,size:0,setter:samplerSetter,arraySetter:samplerArraySetter,bindPoint:TEXTURE_CUBE_MAP$1},typeMap[SAMPLER_3D]={Type:null,size:0,setter:samplerSetter,arraySetter:samplerArraySetter,bindPoint:TEXTURE_3D$1},typeMap[SAMPLER_2D_SHADOW]={Type:null,size:0,setter:samplerSetter,arraySetter:samplerArraySetter,bindPoint:TEXTURE_2D$1},typeMap[SAMPLER_2D_ARRAY]={Type:null,size:0,setter:samplerSetter,arraySetter:samplerArraySetter,bindPoint:TEXTURE_2D_ARRAY$1},typeMap[SAMPLER_2D_ARRAY_SHADOW]={Type:null,size:0,setter:samplerSetter,arraySetter:samplerArraySetter,bindPoint:TEXTURE_2D_ARRAY$1},typeMap[SAMPLER_CUBE_SHADOW]={Type:null,size:0,setter:samplerSetter,arraySetter:samplerArraySetter,bindPoint:TEXTURE_CUBE_MAP$1},typeMap[INT_SAMPLER_2D]={Type:null,size:0,setter:samplerSetter,arraySetter:samplerArraySetter,bindPoint:TEXTURE_2D$1},typeMap[INT_SAMPLER_3D]={Type:null,size:0,setter:samplerSetter,arraySetter:samplerArraySetter,bindPoint:TEXTURE_3D$1},typeMap[INT_SAMPLER_CUBE]={Type:null,size:0,setter:samplerSetter,arraySetter:samplerArraySetter,bindPoint:TEXTURE_CUBE_MAP$1},typeMap[INT_SAMPLER_2D_ARRAY]={Type:null,size:0,setter:samplerSetter,arraySetter:samplerArraySetter,bindPoint:TEXTURE_2D_ARRAY$1},typeMap[UNSIGNED_INT_SAMPLER_2D]={Type:null,size:0,setter:samplerSetter,arraySetter:samplerArraySetter,bindPoint:TEXTURE_2D$1},typeMap[UNSIGNED_INT_SAMPLER_3D]={Type:null,size:0,setter:samplerSetter,arraySetter:samplerArraySetter,bindPoint:TEXTURE_3D$1},typeMap[UNSIGNED_INT_SAMPLER_CUBE]={Type:null,size:0,setter:samplerSetter,arraySetter:samplerArraySetter,bindPoint:TEXTURE_CUBE_MAP$1},typeMap[UNSIGNED_INT_SAMPLER_2D_ARRAY]={Type:null,size:0,setter:samplerSetter,arraySetter:samplerArraySetter,bindPoint:TEXTURE_2D_ARRAY$1};const attrTypeMap={};attrTypeMap[FLOAT$3]={size:4,setter:floatAttribSetter},attrTypeMap[FLOAT_VEC2]={size:8,setter:floatAttribSetter},attrTypeMap[FLOAT_VEC3]={size:12,setter:floatAttribSetter},attrTypeMap[FLOAT_VEC4]={size:16,setter:floatAttribSetter},attrTypeMap[INT$3]={size:4,setter:intAttribSetter},attrTypeMap[INT_VEC2]={size:8,setter:intAttribSetter},attrTypeMap[INT_VEC3]={size:12,setter:intAttribSetter},attrTypeMap[INT_VEC4]={size:16,setter:intAttribSetter},attrTypeMap[UNSIGNED_INT$3]={size:4,setter:uintAttribSetter},attrTypeMap[UNSIGNED_INT_VEC2]={size:8,setter:uintAttribSetter},attrTypeMap[UNSIGNED_INT_VEC3]={size:12,setter:uintAttribSetter},attrTypeMap[UNSIGNED_INT_VEC4]={size:16,setter:uintAttribSetter},attrTypeMap[BOOL]={size:4,setter:intAttribSetter},attrTypeMap[BOOL_VEC2]={size:8,setter:intAttribSetter},attrTypeMap[BOOL_VEC3]={size:12,setter:intAttribSetter},attrTypeMap[BOOL_VEC4]={size:16,setter:intAttribSetter},attrTypeMap[FLOAT_MAT2]={size:4,setter:matAttribSetter,count:2},attrTypeMap[FLOAT_MAT3]={size:9,setter:matAttribSetter,count:3},attrTypeMap[FLOAT_MAT4]={size:16,setter:matAttribSetter,count:4};const errorRE=/ERROR:\s*\d+:(\d+)/gi;function addLineNumbersWithError(e,n="",a=0){const o=[...n.matchAll(errorRE)],i=new Map(o.map((e,t)=>{var r=parseInt(e[1]),t=o[t+1],t=t?t.index:n.length;return[r-1,n.substring(e.index,t)]}));return e.split("\n").map((e,t)=>{var r=i.get(t);return`${t+1+a}: ${e}${r?`\n\n^^^ ${r}`:""}`}).join("\n")}const spaceRE=/^[ \t]*\n/;function loadShader(e,t,r,n){const a=n||error$1;var o=e.createShader(r);let i=0;if(spaceRE.test(t)&&(i=1,t=t.replace(spaceRE,"")),e.shaderSource(o,t),e.compileShader(o),e.getShaderParameter(o,COMPILE_STATUS))return o;n=e.getShaderInfoLog(o);return a(`${addLineNumbersWithError(t,n,i)}\nError compiling ${glEnumToString(e,r)}: ${n}`),e.deleteShader(o),null}function getProgramOptions(e,n,t){let r,a;if("function"==typeof n&&(t=n,n=void 0),"function"==typeof e)t=e,e=void 0;else if(e&&!Array.isArray(e)){if(e.errorCallback)return e;var o=e;t=o.errorCallback,e=o.attribLocations,r=o.transformFeedbackVaryings,a=o.transformFeedbackMode}const i={errorCallback:t||error$1,transformFeedbackVaryings:r,transformFeedbackMode:a};if(e){let r={};Array.isArray(e)?e.forEach(function(e,t){r[e]=n?n[t]:t}):r=e,i.attribLocations=r}return i}const defaultShaderType=["VERTEX_SHADER","FRAGMENT_SHADER"];function getShaderTypeFromScriptType(e,t){return 0<=t.indexOf("frag")?FRAGMENT_SHADER:0<=t.indexOf("vert")?VERTEX_SHADER:void 0}function deleteShaders(t,e){e.forEach(function(e){t.deleteShader(e)})}function createProgram(n,e,t,r,a){const o=getProgramOptions(t,r,a),i=[],s=[];for(let r=0;r<e.length;++r){let t=e[r];if("string"==typeof t){var u=getElementById(t),f=u?u.text:t;let e=n[defaultShaderType[r]];u&&u.type&&(e=getShaderTypeFromScriptType(n,u.type)||e),t=loadShader(n,f,e,o.errorCallback),s.push(t)}isShader(n,t)&&i.push(t)}if(i.length!==e.length)return o.errorCallback("not enough shaders for program"),deleteShaders(n,s),null;const c=n.createProgram();i.forEach(function(e){n.attachShader(c,e)}),o.attribLocations&&Object.keys(o.attribLocations).forEach(function(e){n.bindAttribLocation(c,o.attribLocations[e],e)});let l=o.transformFeedbackVaryings;if(l&&(l.attribs&&(l=l.attribs),Array.isArray(l)||(l=Object.keys(l)),n.transformFeedbackVaryings(c,l,o.transformFeedbackMode||SEPARATE_ATTRIBS)),n.linkProgram(c),n.getProgramParameter(c,LINK_STATUS))return c;a=n.getProgramInfoLog(c);return o.errorCallback(`${i.map(e=>{var t=addLineNumbersWithError(n.getShaderSource(e),"",0),e=n.getShaderParameter(e,n.SHADER_TYPE);return`${glEnumToString(n,e)}\n${t}}`}).join("\n")}\nError in program linking: ${a}`),n.deleteProgram(c),deleteShaders(n,s),null}function createShaderFromScript(e,t,r,n){var a=getElementById(t);if(!a)throw new Error(`unknown script element: ${t}`);var o=a.text,a=r||getShaderTypeFromScriptType(e,a.type);if(!a)throw new Error("unknown shader type");return loadShader(e,o,a,n)}function createProgramFromScripts(t,r,e,n,a){var o=getProgramOptions(e,n,a);const i=[];for(let e=0;e<r.length;++e){var s=createShaderFromScript(t,r[e],t[defaultShaderType[e]],o.errorCallback);if(!s)return null;i.push(s)}return createProgram(t,i,o)}function createProgramFromSources(t,r,e,n,a){var o=getProgramOptions(e,n,a);const i=[];for(let e=0;e<r.length;++e){var s=loadShader(t,r[e],t[defaultShaderType[e]],o.errorCallback);if(!s)return null;i.push(s)}return createProgram(t,i,o)}function isBuiltIn(e){const t=e.name;return t.startsWith("gl_")||t.startsWith("webgl_")}const tokenRE=/(\.|\[|]|\w+)/g,isDigit=e=>"0"<=e&&e<="9";function addSetterToUniformTree(e,t,r,n){var a=e.split(tokenRE).filter(e=>""!==e);let o=0,i="";for(;;){var s=a[o++];i+=s;var u=isDigit(s[0]),f=u?parseInt(s):s;if(u&&(i+=a[o++]),o===a.length){r[f]=t;break}s=a[o++],u=r[f]||("["===s?[]:{});r[f]=u,r=u,n[i]=n[i]||function(t){return function(e){setUniformTree(t,e)}}(u),i+=s}}function createUniformSetters(s,t){let u=0;const r={};var n={},a=s.getProgramParameter(t,ACTIVE_UNIFORMS);for(let e=0;e<a;++e){var o=s.getActiveUniform(t,e);if(!isBuiltIn(o)){let e=o.name;e.endsWith("[0]")&&(e=e.substr(0,e.length-3));var i=s.getUniformLocation(t,o.name);i&&(i=function(e,t){var r,n=e.name.endsWith("[0]");const a=e.type,o=typeMap[a];if(!o)throw new Error(`unknown type: 0x${a.toString(16)}`);let i;return i=o.bindPoint?(r=u,u+=e.size,n?o.arraySetter(s,a,r,t,e.size):o.setter(s,a,r,t,e.size)):o.arraySetter&&n?o.arraySetter(s,t):o.setter(s,t),i.location=t,i}(o,i),r[e]=i,addSetterToUniformTree(e,i,n,r))}}return r}function createTransformFeedbackInfo(t,r){const n={};var a=t.getProgramParameter(r,TRANSFORM_FEEDBACK_VARYINGS);for(let e=0;e<a;++e){var o=t.getTransformFeedbackVarying(r,e);n[o.name]={index:e,type:o.type,size:o.size}}return n}function bindTransformFeedbackInfo(e,t,r){t.transformFeedbackInfo&&(t=t.transformFeedbackInfo);for(const o in r=r.attribs?r.attribs:r){var n,a=t[o];a&&((n=r[o]).offset?e.bindBufferRange(TRANSFORM_FEEDBACK_BUFFER,a.index,n.buffer,n.offset,n.size):e.bindBufferBase(TRANSFORM_FEEDBACK_BUFFER,a.index,n.buffer))}}function createTransformFeedback(e,t,r){var n=e.createTransformFeedback();return e.bindTransformFeedback(TRANSFORM_FEEDBACK,n),e.useProgram(t.program),bindTransformFeedbackInfo(e,t,r),e.bindTransformFeedback(TRANSFORM_FEEDBACK,null),n}function createUniformBlockSpecFromProgram(n,a){var t=n.getProgramParameter(a,ACTIVE_UNIFORMS);const o=[],i=[];for(let e=0;e<t;++e){i.push(e),o.push({});var r=n.getActiveUniform(a,e);o[e].name=r.name}[["UNIFORM_TYPE","type"],["UNIFORM_SIZE","size"],["UNIFORM_BLOCK_INDEX","blockNdx"],["UNIFORM_OFFSET","offset"]].forEach(function(e){var t=e[0];const r=e[1];n.getActiveUniforms(a,i,n[t]).forEach(function(e,t){o[t][r]=e})});const s={};var u=n.getProgramParameter(a,ACTIVE_UNIFORM_BLOCKS);for(let e=0;e<u;++e){var f=n.getActiveUniformBlockName(a,e);const c={index:n.getUniformBlockIndex(a,f),usedByVertexShader:n.getActiveUniformBlockParameter(a,e,UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER),usedByFragmentShader:n.getActiveUniformBlockParameter(a,e,UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER),size:n.getActiveUniformBlockParameter(a,e,UNIFORM_BLOCK_DATA_SIZE),uniformIndices:n.getActiveUniformBlockParameter(a,e,UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES)};c.used=c.usedByVertexShader||c.usedByFragmentShader,s[f]=c}return{blockSpecs:s,uniformData:o}}const arraySuffixRE=/\[\d+\]\.$/,pad=(e,t)=>((e+(t-1))/t|0)*t;function createUniformBlockUniformSetter(a,e,t,o){if(e||t){o=o||1;const i=a.length/4;return function(t){let r=0,n=0;for(let e=0;e<i;++e){for(let e=0;e<o;++e)a[r++]=t[n++];r+=4-o}}}return function(e){e.length?a.set(e):a[0]=e}}function createUniformBlockInfoFromProgram(e,t,r,n){var a=r.blockSpecs;const i=r.uniformData,o=a[n];if(!o)return warn$1("no uniform block object named:",n),{name:n,uniforms:{}};const s=new ArrayBuffer(o.size);r=e.createBuffer(),a=o.index;e.bindBuffer(UNIFORM_BUFFER,r),e.uniformBlockBinding(t,o.index,a);let u=n+".";arraySuffixRE.test(u)&&(u=u.replace(arraySuffixRE,"."));const f={},c={},l={};return o.uniformIndices.forEach(function(e){var t=i[e];let r=t.name;r.startsWith(u)&&(r=r.substr(u.length));var n=r.endsWith("[0]");n&&(r=r.substr(0,r.length-3));var a=typeMap[t.type];const o=a.Type;e=n?pad(a.size,16)*t.size:a.size*t.size,e=new o(s,t.offset,e/o.BYTES_PER_ELEMENT),a=createUniformBlockUniformSetter(f[r]=e,n,a.rows,a.cols);c[r]=a,addSetterToUniformTree(r,a,l,c)}),{name:n,array:s,asFloat:new Float32Array(s),buffer:r,uniforms:f,setters:c}}function createUniformBlockInfo(e,t,r){return createUniformBlockInfoFromProgram(e,t.program,t.uniformBlockSpec,r)}function bindUniformBlock(e,t,r){t=(t.uniformBlockSpec||t).blockSpecs[r.name];if(t){t=t.index;return e.bindBufferRange(UNIFORM_BUFFER,t,r.buffer,r.offset||0,r.array.byteLength),!0}return!1}function setUniformBlock(e,t,r){bindUniformBlock(e,t,r)&&e.bufferData(UNIFORM_BUFFER,r.array,DYNAMIC_DRAW)}function setBlockUniforms(e,t){var r,n=e.setters;for(const a in t){const o=n[a];o&&(r=t[a],o(r))}}function setUniformTree(e,t){for(const r in t){const n=e[r];"function"==typeof n?n(t[r]):setUniformTree(e[r],t[r])}}function setUniforms(e,...t){var r=e.uniformSetters||e,n=t.length;for(let e=0;e<n;++e){var a=t[e];if(Array.isArray(a)){var o=a.length;for(let e=0;e<o;++e)setUniforms(r,a[e])}else for(const i in a){const s=r[i];s&&s(a[i])}}}const setUniformsAndBindTextures=setUniforms;function createAttributeSetters(t,r){const n={};var a=t.getProgramParameter(r,ACTIVE_ATTRIBUTES);for(let e=0;e<a;++e){var o=t.getActiveAttrib(r,e);if(!isBuiltIn(o)){var i=t.getAttribLocation(r,o.name);const s=attrTypeMap[o.type],u=s.setter(t,i,s);u.location=i,n[o.name]=u}}return n}function setAttributes(e,t){for(const r in t){const n=e[r];n&&n(t[r])}}function setBuffersAndAttributes(e,t,r){r.vertexArrayObject?e.bindVertexArray(r.vertexArrayObject):(setAttributes(t.attribSetters||t,r.attribs),r.indices&&e.bindBuffer(ELEMENT_ARRAY_BUFFER$1,r.indices))}function createProgramInfoFromProgram(e,t){const r={program:t,uniformSetters:createUniformSetters(e,t),attribSetters:createAttributeSetters(e,t)};return isWebGL2(e)&&(r.uniformBlockSpec=createUniformBlockSpecFromProgram(e,t),r.transformFeedbackInfo=createTransformFeedbackInfo(e,t)),r}function createProgramInfo(e,t,r,n,a){const o=getProgramOptions(r,n,a);let i=!0;if(t=t.map(function(e){var t;return e.indexOf("\n")<0&&((t=getElementById(e))?e=t.text:(o.errorCallback("no element with id: "+e),i=!1)),e}),!i)return null;t=createProgramFromSources(e,t,o);return t?createProgramInfoFromProgram(e,t):null}var programs=Object.freeze({__proto__:null,createAttributeSetters:createAttributeSetters,createProgram:createProgram,createProgramFromScripts:createProgramFromScripts,createProgramFromSources:createProgramFromSources,createProgramInfo:createProgramInfo,createProgramInfoFromProgram:createProgramInfoFromProgram,createUniformSetters:createUniformSetters,createUniformBlockSpecFromProgram:createUniformBlockSpecFromProgram,createUniformBlockInfoFromProgram:createUniformBlockInfoFromProgram,createUniformBlockInfo:createUniformBlockInfo,createTransformFeedback:createTransformFeedback,createTransformFeedbackInfo:createTransformFeedbackInfo,bindTransformFeedbackInfo:bindTransformFeedbackInfo,setAttributes:setAttributes,setBuffersAndAttributes:setBuffersAndAttributes,setUniforms:setUniforms,setUniformsAndBindTextures:setUniformsAndBindTextures,setUniformBlock:setUniformBlock,setBlockUniforms:setBlockUniforms,bindUniformBlock:bindUniformBlock});const TRIANGLES=4,UNSIGNED_SHORT$3=5123;function drawBufferInfo(e,t,r,n,a,o){r=void 0===r?TRIANGLES:r;var i=t.indices,s=t.elementType,n=void 0===n?t.numElements:n;a=void 0===a?0:a,s||i?void 0!==o?e.drawElementsInstanced(r,n,void 0===s?UNSIGNED_SHORT$3:t.elementType,a,o):e.drawElements(r,n,void 0===s?UNSIGNED_SHORT$3:t.elementType,a):void 0!==o?e.drawArraysInstanced(r,a,n,o):e.drawArrays(r,a,n)}function drawObjectList(o,e){let i=null,s=null;e.forEach(function(t){if(!1!==t.active){var r=t.programInfo,n=t.vertexArrayInfo||t.bufferInfo;let e=!1;var a=void 0===t.type?TRIANGLES:t.type;r!==i&&(i=r,o.useProgram(r.program),e=!0),!e&&n===s||(s&&s.vertexArrayObject&&!n.vertexArrayObject&&o.bindVertexArray(null),s=n,setBuffersAndAttributes(o,r,n)),setUniforms(r,t.uniforms),drawBufferInfo(o,n,a,t.count,t.offset,t.instanceCount)}}),s&&s.vertexArrayObject&&o.bindVertexArray(null)}var draw=Object.freeze({__proto__:null,drawBufferInfo:drawBufferInfo,drawObjectList:drawObjectList});const FRAMEBUFFER=36160,RENDERBUFFER=36161,TEXTURE_2D$2=3553,UNSIGNED_BYTE$3=5121,DEPTH_COMPONENT$1=6402,RGBA$1=6408,DEPTH_COMPONENT24$1=33190,DEPTH_COMPONENT32F$1=36012,DEPTH24_STENCIL8$1=35056,DEPTH32F_STENCIL8$1=36013,RGBA4$1=32854,RGB5_A1$1=32855,RGB565$1=36194,DEPTH_COMPONENT16$1=33189,STENCIL_INDEX=6401,STENCIL_INDEX8=36168,DEPTH_STENCIL$1=34041,COLOR_ATTACHMENT0=36064,DEPTH_ATTACHMENT=36096,STENCIL_ATTACHMENT=36128,DEPTH_STENCIL_ATTACHMENT=33306,CLAMP_TO_EDGE$1=33071,LINEAR$1=9729,defaultAttachments=[{format:RGBA$1,type:UNSIGNED_BYTE$3,min:LINEAR$1,wrap:CLAMP_TO_EDGE$1},{format:DEPTH_STENCIL$1}],attachmentsByFormat={};function getAttachmentPointForFormat(e,t){return attachmentsByFormat[e]||attachmentsByFormat[t]}attachmentsByFormat[DEPTH_STENCIL$1]=DEPTH_STENCIL_ATTACHMENT,attachmentsByFormat[STENCIL_INDEX]=STENCIL_ATTACHMENT,attachmentsByFormat[STENCIL_INDEX8]=STENCIL_ATTACHMENT,attachmentsByFormat[DEPTH_COMPONENT$1]=DEPTH_ATTACHMENT,attachmentsByFormat[DEPTH_COMPONENT16$1]=DEPTH_ATTACHMENT,attachmentsByFormat[DEPTH_COMPONENT24$1]=DEPTH_ATTACHMENT,attachmentsByFormat[DEPTH_COMPONENT32F$1]=DEPTH_ATTACHMENT,attachmentsByFormat[DEPTH24_STENCIL8$1]=DEPTH_STENCIL_ATTACHMENT,attachmentsByFormat[DEPTH32F_STENCIL8$1]=DEPTH_STENCIL_ATTACHMENT;const renderbufferFormats={};function isRenderbufferFormat(e){return renderbufferFormats[e]}function createFramebufferInfo(i,e,s,u){const f=FRAMEBUFFER;var t=i.createFramebuffer();i.bindFramebuffer(f,t),s=s||i.drawingBufferWidth,u=u||i.drawingBufferHeight,e=e||defaultAttachments;let c=0;const l={framebuffer:t,attachments:[],width:s,height:u};return e.forEach(function(e){let t=e.attachment;var r=e.samples,n=e.format;let a=e.attachmentPoint||getAttachmentPointForFormat(n,e.internalFormat);if(a=a||COLOR_ATTACHMENT0+c++,!t)if(void 0!==r||isRenderbufferFormat(n))t=i.createRenderbuffer(),i.bindRenderbuffer(RENDERBUFFER,t),1<r?i.renderbufferStorageMultisample(RENDERBUFFER,r,n,s,u):i.renderbufferStorage(RENDERBUFFER,n,s,u);else{const o=Object.assign({},e);o.width=s,o.height=u,void 0===o.auto&&(o.auto=!1,o.min=o.min||o.minMag||LINEAR$1,o.mag=o.mag||o.minMag||LINEAR$1,o.wrapS=o.wrapS||o.wrap||CLAMP_TO_EDGE$1,o.wrapT=o.wrapT||o.wrap||CLAMP_TO_EDGE$1),t=createTexture(i,o)}if(isRenderbuffer(i,t))i.framebufferRenderbuffer(f,a,RENDERBUFFER,t);else{if(!isTexture(i,t))throw new Error("unknown attachment type");void 0!==e.layer?i.framebufferTextureLayer(f,a,t,e.level||0,e.layer):i.framebufferTexture2D(f,a,e.target||TEXTURE_2D$2,t,e.level||0)}l.attachments.push(t)}),l}function resizeFramebufferInfo(a,o,e,i,s){i=i||a.drawingBufferWidth,s=s||a.drawingBufferHeight,o.width=i,o.height=s,(e=e||defaultAttachments).forEach(function(e,t){var r=o.attachments[t],n=e.format,t=e.samples;if(void 0!==t||isRenderbuffer(a,r))a.bindRenderbuffer(RENDERBUFFER,r),1<t?a.renderbufferStorageMultisample(RENDERBUFFER,t,n,i,s):a.renderbufferStorage(RENDERBUFFER,n,i,s);else{if(!isTexture(a,r))throw new Error("unknown attachment type");resizeTexture(a,r,e,i,s)}})}function bindFramebufferInfo(e,t,r){r=r||FRAMEBUFFER,t?(e.bindFramebuffer(r,t.framebuffer),e.viewport(0,0,t.width,t.height)):(e.bindFramebuffer(r,null),e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight))}renderbufferFormats[RGBA4$1]=!0,renderbufferFormats[RGB5_A1$1]=!0,renderbufferFormats[RGB565$1]=!0,renderbufferFormats[DEPTH_STENCIL$1]=!0,renderbufferFormats[DEPTH_COMPONENT16$1]=!0,renderbufferFormats[STENCIL_INDEX]=!0,renderbufferFormats[STENCIL_INDEX8]=!0;var framebuffers=Object.freeze({__proto__:null,bindFramebufferInfo:bindFramebufferInfo,createFramebufferInfo:createFramebufferInfo,resizeFramebufferInfo:resizeFramebufferInfo});const ELEMENT_ARRAY_BUFFER$2=34963;function createVertexArrayInfo(t,e,r){var n=t.createVertexArray();return t.bindVertexArray(n),(e=!e.length?[e]:e).forEach(function(e){setBuffersAndAttributes(t,e,r)}),t.bindVertexArray(null),{numElements:r.numElements,elementType:r.elementType,vertexArrayObject:n}}function createVAOAndSetAttributes(e,t,r,n){var a=e.createVertexArray();return e.bindVertexArray(a),setAttributes(t,r),n&&e.bindBuffer(ELEMENT_ARRAY_BUFFER$2,n),e.bindVertexArray(null),a}function createVAOFromBufferInfo(e,t,r){return createVAOAndSetAttributes(e,t.attribSetters||t,r.attribs,r.indices)}var vertexArrays=Object.freeze({__proto__:null,createVertexArrayInfo:createVertexArrayInfo,createVAOAndSetAttributes:createVAOAndSetAttributes,createVAOFromBufferInfo:createVAOFromBufferInfo});const defaults$2={addExtensionsToContext:!0};function setDefaults$2(e){copyExistingProperties(e,defaults$2),setDefaults(e),setDefaults$1(e)}const prefixRE=/^(.*?)_/;function addExtensionToContext(t,e){glEnumToString(t,0);const r=t.getExtension(e);if(r){const u={};var n=prefixRE.exec(e)[1],a="_"+n;for(const f in r){var o=r[f],i="function"==typeof o,s=i?n:a;let e=f;f.endsWith(s)&&(e=f.substring(0,f.length-s.length)),void 0!==t[e]?i||t[e]===o||warn(e,t[e],o,f):i?t[e]=function(e){return function(){return e.apply(r,arguments)}}(o):(t[e]=o,u[e]=o)}u.constructor={name:r.constructor.name},glEnumToString(u,0)}return r}const supportedExtensions=["ANGLE_instanced_arrays","EXT_blend_minmax","EXT_color_buffer_float","EXT_color_buffer_half_float","EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2","EXT_frag_depth","EXT_sRGB","EXT_shader_texture_lod","EXT_texture_filter_anisotropic","OES_element_index_uint","OES_standard_derivatives","OES_texture_float","OES_texture_float_linear","OES_texture_half_float","OES_texture_half_float_linear","OES_vertex_array_object","WEBGL_color_buffer_float","WEBGL_compressed_texture_atc","WEBGL_compressed_texture_etc1","WEBGL_compressed_texture_pvrtc","WEBGL_compressed_texture_s3tc","WEBGL_compressed_texture_s3tc_srgb","WEBGL_depth_texture","WEBGL_draw_buffers"];function addExtensionsToContext(t){for(let e=0;e<supportedExtensions.length;++e)addExtensionToContext(t,supportedExtensions[e])}function create3DContext(t,r){var n=["webgl","experimental-webgl"];let a=null;for(let e=0;e<n.length;++e)if(a=t.getContext(n[e],r),a){defaults$2.addExtensionsToContext&&addExtensionsToContext(a);break}return a}function getWebGLContext(e,t){return create3DContext(e,t)}function createContext(t,r){var n=["webgl2","webgl","experimental-webgl"];let a=null;for(let e=0;e<n.length;++e)if(a=t.getContext(n[e],r),a){defaults$2.addExtensionsToContext&&addExtensionsToContext(a);break}return a}function getContext(e,t){return createContext(e,t)}function resizeCanvasToDisplaySize(e,t){t=t||1,t=Math.max(0,t);var r=e.clientWidth*t|0,t=e.clientHeight*t|0;return(e.width!==r||e.height!==t)&&(e.width=r,e.height=t,!0)}export{addExtensionsToContext,attributes,bindFramebufferInfo,bindTransformFeedbackInfo,bindUniformBlock,canFilter,canGenerateMipmap,createAttribsFromArrays,createAttributeSetters,createBufferFromArray,createBufferFromTypedArray,createBufferInfoFromArrays,createBuffersFromArrays,createFramebufferInfo,createProgram,createProgramFromScripts,createProgramFromSources,createProgramInfo,createProgramInfoFromProgram,createSampler,createSamplers,createTexture,createTextures,createTransformFeedback,createTransformFeedbackInfo,createUniformBlockInfo,createUniformBlockInfoFromProgram,createUniformBlockSpecFromProgram,createUniformSetters,createVAOAndSetAttributes,createVAOFromBufferInfo,createVertexArrayInfo,draw,drawBufferInfo,drawObjectList,framebuffers,getArray as getArray_,getBytesPerElementForInternalFormat,getContext,getFormatAndTypeForInternalFormat,getGLTypeForTypedArray,getGLTypeForTypedArrayType,getNumComponentsForFormat,getNumComponents as getNumComponents_,getTypedArrayTypeForGLType,getWebGLContext,glEnumToString,isArrayBuffer,isWebGL1,isWebGL2,loadTextureFromUrl,m4,primitives,programs,resizeCanvasToDisplaySize,resizeFramebufferInfo,resizeTexture,setAttribInfoBufferFromArray,setDefaults as setAttributeDefaults_,setAttributePrefix,setAttributes,setBlockUniforms,setBuffersAndAttributes,setDefaultTextureColor,setDefaults$2 as setDefaults,setEmptyTexture,setSamplerParameters,setDefaults$1 as setTextureDefaults_,setTextureFilteringForSize,setTextureFromArray,setTextureFromElement,setTextureParameters,setUniformBlock,setUniforms,setUniformsAndBindTextures,textures,typedarrays,utils,v3,vertexArrays};