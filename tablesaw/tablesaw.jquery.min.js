!function(e,a){"function"==typeof define&&define.amd?define(["jquery"],function(t){return e.Tablesaw=a(t,e)}):"object"==typeof exports?module.exports=a("document"in e?require("jquery"):require("jquery")(e),e):e.Tablesaw=a(jQuery,e)}("undefined"!=typeof window?window:this,function(P,E){"use strict";var R=E.document,e=/complete|loaded/.test(R.readyState);R.addEventListener("DOMContentLoaded",function(){e=!0});var t,s,n,a,i,o,l,r,c,b,h,d,u,I={i18n:{modeStack:"Stack",modeSwipe:"Swipe",modeToggle:"Toggle",modeSwitchColumnsAbbreviated:"Cols",modeSwitchColumns:"Columns",columnToggleButton:"Columns",columnToggleError:"No eligible columns.",sort:"Sort",swipePreviousColumn:"Previous column",swipeNextColumn:"Next column"},mustard:"head"in R&&(!E.blackberry||E.WebKitPoint)&&!E.operamini,$:P,_init:function(t){I.$(t||R).trigger("enhance.tablesaw")},init:function(t){(e=e||/complete|loaded/.test(R.readyState))?I._init(t):"addEventListener"in R&&R.addEventListener("DOMContentLoaded",function(){I._init(t)})}};return P(R).on("enhance.tablesaw",function(){"undefined"!=typeof TablesawConfig&&TablesawConfig.i18n&&(I.i18n=P.extend(I.i18n,TablesawConfig.i18n||{})),I.i18n.modes=[I.i18n.modeStack,I.i18n.modeSwipe,I.i18n.modeToggle]}),I.mustard&&P(R.documentElement).addClass("tablesaw-enhanced"),function(){var a="tablesaw",s="tablesaw-bar",e={create:"tablesawcreate",destroy:"tablesawdestroy",refresh:"tablesawrefresh",resize:"tablesawresize"},n={};I.events=e;var t=function(t){if(!t)throw new Error("Tablesaw requires an element.");this.table=t,this.$table=P(t),this.$thead=this.$table.children().filter("thead").eq(0),this.$tbody=this.$table.children().filter("tbody"),this.mode=this.$table.attr("data-tablesaw-mode")||"stack",this.$toolbar=null,this.attributes={subrow:"data-tablesaw-subrow",ignorerow:"data-tablesaw-ignorerow"},this.init()};t.prototype.init=function(){if(!this.$thead.length)throw new Error("tablesaw: a <thead> is required, but none was found.");if(!this.$thead.find("th").length)throw new Error("tablesaw: no header cells found. Are you using <th> inside of <thead>?");this.$table.attr("id")||this.$table.attr("id",a+"-"+Math.round(1e4*Math.random())),this.createToolbar(),this._initCells(),this.$table.data(a,this),this.$table.trigger(e.create,[this])},t.prototype.getConfig=function(t){var e=P.extend(n,t||{});return P.extend(e,"undefined"!=typeof TablesawConfig?TablesawConfig:{})},t.prototype._getPrimaryHeaderRow=function(){return this._getHeaderRows().eq(0)},t.prototype._getHeaderRows=function(){return this.$thead.children().filter("tr").filter(function(){return!P(this).is("[data-tablesaw-ignorerow]")})},t.prototype._getRowIndex=function(t){return t.prevAll().length},t.prototype._getHeaderRowIndeces=function(){var t=this,e=[];return this._getHeaderRows().each(function(){e.push(t._getRowIndex(P(this)))}),e},t.prototype._getPrimaryHeaderCells=function(t){return(t||this._getPrimaryHeaderRow()).find("th")},t.prototype._$getCells=function(t){var s=this;return P(t).add(t.cells).filter(function(){var t=P(this),e=t.parent(),a=t.is("[colspan]");return!(e.is("["+s.attributes.subrow+"]")||e.is("["+s.attributes.ignorerow+"]")&&a)})},t.prototype._getVisibleColspan=function(){var e=0;return this._getPrimaryHeaderCells().each(function(){var t=P(this);"none"!==t.css("display")&&(e+=parseInt(t.attr("colspan"),10)||1)}),e},t.prototype.getColspanForCell=function(t){var e=this._getVisibleColspan(),a=0;return t.closest("tr").data("tablesaw-rowspanned")&&a++,t.siblings().each(function(){var t=P(this),e=parseInt(t.attr("colspan"),10)||1;"none"!==t.css("display")&&(a+=e)}),e-a},t.prototype.isCellInColumn=function(t,e){return P(t).add(t.cells).filter(function(){return this===e}).length},t.prototype.updateColspanCells=function(s,n,i){var o=this,t=o._getPrimaryHeaderRow();this.$table.find("[rowspan][data-tablesaw-priority]").each(function(){var t=P(this);if("persist"===t.attr("data-tablesaw-priority")){var e=t.closest("tr"),a=parseInt(t.attr("rowspan"),10);1<a&&((e=e.next()).data("tablesaw-rowspanned",!0),a--)}}),this.$table.find("[colspan],[data-tablesaw-maxcolspan]").filter(function(){return P(this).closest("tr")[0]!==t[0]}).each(function(){var t=P(this);if(void 0===i||o.isCellInColumn(n,this)){var e=o.getColspanForCell(t);s&&void 0!==i&&t[0===e?"addClass":"removeClass"](s);var a=parseInt(t.attr("data-tablesaw-maxcolspan"),10);a?a<e&&(e=a):t.attr("data-tablesaw-maxcolspan",t.attr("colspan")),t.attr("colspan",e)}})},t.prototype._findPrimaryHeadersForCell=function(t){for(var e=this._getPrimaryHeaderRow(),a=this._getRowIndex(e),s=[],n=0;n<this.headerMapping.length;n++)if(n!==a)for(var i=0;i<this.headerMapping[n].length;i++)this.headerMapping[n][i]===t&&s.push(this.headerMapping[a][i]);return s},t.prototype.getRows=function(){var t=this;return this.$table.find("tr").filter(function(){return P(this).closest("table").is(t.$table)})},t.prototype.getBodyRows=function(t){return(t?P(t):this.$tbody).children().filter("tr")},t.prototype.getHeaderCellIndex=function(t){for(var e=this.headerMapping[0],a=0;a<e.length;a++)if(e[a]===t)return a;return-1},t.prototype._initCells=function(){this.$table.find("[data-tablesaw-maxcolspan]").each(function(){var t=P(this);t.attr("colspan",t.attr("data-tablesaw-maxcolspan"))});var t=this.getRows(),o=[];t.each(function(t){o[t]=[]}),t.each(function(n){var i=0;P(this).children().each(function(){for(var t=parseInt(this.getAttribute("data-tablesaw-maxcolspan")||this.getAttribute("colspan"),10),e=parseInt(this.getAttribute("rowspan"),10);o[n][i];)i++;if(o[n][i]=this,t)for(var a=0;a<t-1;a++)i++,o[n][i]=this;if(e)for(var s=1;s<e;s++)o[n+s][i]=this;i++})});for(var e=this._getHeaderRowIndeces(),a=0;a<o[0].length;a++)for(var s=0,n=e.length;s<n;s++){var i,l=o[e[s]][a],r=e[s];for(l.cells||(l.cells=[]);r<o.length;)l!==(i=o[r][a])&&l.cells.push(i),r++}this.headerMapping=o},t.prototype.refresh=function(){this._initCells(),this.$table.trigger(e.refresh,[this])},t.prototype._getToolbarAnchor=function(){var t=this.$table.parent();return t.is(".tablesaw-overflow")?t:this.$table},t.prototype._getToolbar=function(t){return t||(t=this._getToolbarAnchor()),t.prev().filter("."+s)},t.prototype.createToolbar=function(){var t=this._getToolbarAnchor(),e=this._getToolbar(t);e.length||(e=P("<div>").addClass(s).insertBefore(t)),this.$toolbar=e,this.mode&&this.$toolbar.addClass("tablesaw-mode-"+this.mode)},t.prototype.destroy=function(){this._getToolbar().each(function(){this.className=this.className.replace(/\btablesaw-mode\-\w*\b/gi,"")});var t=this.$table.attr("id");P(R).off("."+t),P(E).off("."+t),this.$table.trigger(e.destroy,[this]),this.$table.removeData(a)},P.fn[a]=function(){return this.each(function(){P(this).data(a)||new t(this)})};var i=P(R);i.on("enhance.tablesaw",function(t){if(I.mustard){var e=P(t.target);e.parent().length&&(e=e.parent()),e.find("table").filter("[data-tablesaw],[data-tablesaw-mode],[data-tablesaw-sortable]")[a]()}});var o,l,r=!1;i.on("scroll.tablesaw",function(){r=!0,E.clearTimeout(o),o=E.setTimeout(function(){r=!1},300)}),P(E).on("resize",function(){r||(E.clearTimeout(l),l=E.setTimeout(function(){i.trigger(e.resize)},150))}),I.Table=t}(),s="tablesaw-cell-label",n="tablesaw-cell-content",a=t="tablesaw-stack",i="data-tablesaw-no-labels",o="data-tablesaw-hide-empty",(l=function(t,e){this.tablesaw=e,this.$table=P(t),this.labelless=this.$table.is("["+i+"]"),this.hideempty=this.$table.is("["+o+"]"),this.$table.data(a,this)}).prototype.init=function(){if(this.$table.addClass(t),!this.labelless){var a=this;this.$table.find("th, td").filter(function(){return!P(this).closest("thead").length}).filter(function(){return!(P(this).is("["+i+"]")||P(this).closest("tr").is("["+i+"]")||a.hideempty&&!P(this).html())}).each(function(){var o=P(R.createElement("b")).addClass(s),t=P(this);P(a.tablesaw._findPrimaryHeadersForCell(this)).each(function(t){var e=P(this.cloneNode(!0)),a=e.find(".tablesaw-sortable-btn");e.find(".tablesaw-sortable-arrow").remove();var s=e.find("[data-tablesaw-checkall]");if(s.closest("label").remove(),s.length)o=P([]);else{0<t&&o.append(R.createTextNode(", "));for(var n,i=a.length?a[0]:e[0];n=i.firstChild;)o[0].appendChild(n)}}),o.length&&!t.find("."+n).length&&t.wrapInner("<span class='"+n+"'></span>");var e=t.find("."+s);e.length?e.replaceWith(o):(t.prepend(R.createTextNode(" ")),t.prepend(o))})}},l.prototype.destroy=function(){this.$table.removeClass(t),this.$table.find("."+s).remove(),this.$table.find("."+n).each(function(){P(this).replaceWith(P(this.childNodes))})},P(R).on(I.events.create,function(t,e){"stack"===e.mode&&new l(e.table,e).init()}).on(I.events.refresh,function(t,e){"stack"===e.mode&&P(e.table).data(a).init()}).on(I.events.destroy,function(t,e){"stack"===e.mode&&P(e.table).data(a).destroy()}),I.Stack=l,r="tablesawbtn",c={_create:function(){return P(this).each(function(){P(this).trigger("beforecreate."+r)[r]("_init").trigger("create."+r)})},_init:function(){var t=P(this),e=this.getElementsByTagName("select")[0];return e&&P(this).addClass("btn-select tablesaw-btn-select")[r]("_select",e),t},_select:function(t){var e=function(t,e){var a,s,n=P(e).find("option"),i=R.createElement("span"),o=!1;if(i.setAttribute("aria-hidden","true"),i.innerHTML="&#160;",n.each(function(){this.selected&&(i.innerHTML=this.text)}),s=t.childNodes,0<n.length){for(var l=0,r=s.length;l<r;l++)(a=s[l])&&"SPAN"===a.nodeName.toUpperCase()&&(t.replaceChild(i,a),o=!0);o||t.insertBefore(i,t.firstChild)}};e(this,t),P(this).on("change refresh",function(){e(this,t)})}},P.fn[r]=function(t,e,a,s){return this.each(function(){return t&&"string"==typeof t?P.fn[r].prototype[t].call(this,e,a,s):P(this).data(r+"active")?P(this):(P(this).data(r+"active",!0),void P.fn[r].prototype._create.call(this))})},P.extend(P.fn[r].prototype,c),b="tablesaw-coltoggle",(h=function(t){this.$table=P(t),this.$table.length&&(this.tablesaw=this.$table.data("tablesaw"),this.attributes={btnTarget:"data-tablesaw-columntoggle-btn-target",set:"data-tablesaw-columntoggle-set"},this.classes={columnToggleTable:"tablesaw-columntoggle",columnBtnContain:"tablesaw-columntoggle-btnwrap tablesaw-advance",columnBtn:"tablesaw-columntoggle-btn tablesaw-nav-btn down",popup:"tablesaw-columntoggle-popup",priorityPrefix:"tablesaw-priority-"},this.set=[],this.$headers=this.tablesaw._getPrimaryHeaderCells(),this.$table.data(b,this))}).prototype.initSet=function(){var t=this.$table.attr(this.attributes.set);if(t){var e=this.$table[0];this.set=P("table["+this.attributes.set+"='"+t+"']").filter(function(){return this!==e}).get()}},h.prototype.init=function(){if(this.$table.length){var e,t,a,s,n,i,o=this,l=this.tablesaw.getConfig({getColumnToggleLabelTemplate:function(t){return"<label><input type='checkbox' checked>"+t+"</label>"}});this.$table.addClass(this.classes.columnToggleTable),t=(e=this.$table.attr("id"))+"-popup",i=P("<div class='"+this.classes.columnBtnContain+"'></div>"),a=P("<a href='#"+t+"' class='btn tablesaw-btn btn-micro "+this.classes.columnBtn+"' data-popup-link><span>"+I.i18n.columnToggleButton+"</span></a>"),s=P("<div class='"+this.classes.popup+"' id='"+t+"'></div>"),n=P("<div class='tablesaw-btn-group'></div>"),this.$popup=s;var r=!1;this.$headers.each(function(){var t=P(this),e=t.attr("data-tablesaw-priority"),a=o.tablesaw._$getCells(this);e&&"persist"!==e&&(a.addClass(o.classes.priorityPrefix+e),P(l.getColumnToggleLabelTemplate(t.text())).appendTo(n).find('input[type="checkbox"]').data("tablesaw-header",this),r=!0)}),r||n.append("<label>"+I.i18n.columnToggleError+"</label>"),n.appendTo(s),n.find('input[type="checkbox"]').on("change",function(e){var a;p(e.target),o.set.length&&(P(o.$popup).find("input[type='checkbox']").each(function(t){if(this===e.target)return a=t,!1}),P(o.set).each(function(){var t=P(this).data(b).$popup.find("input[type='checkbox']").get(a);t&&(t.checked=e.target.checked,p(t))}))}),a.appendTo(i);var c,h=P(this.$table.attr(this.attributes.btnTarget));i.appendTo(h.length?h:this.tablesaw.$toolbar),a.on("click.tablesaw",function(t){t.preventDefault(),i.is(".visible")?f():(i.addClass("visible"),a.removeClass("down").addClass("up"),P(R).off("click."+e,f),E.clearTimeout(c),c=E.setTimeout(function(){P(R).on("click."+e,f)},15))}),s.appendTo(i),this.$menu=n;var d,u=this.$table.closest(".tablesaw-overflow");u.css("-webkit-overflow-scrolling")&&u.on("scroll",function(){var t=P(this);E.clearTimeout(d),d=E.setTimeout(function(){t.css("-webkit-overflow-scrolling","auto"),E.setTimeout(function(){t.css("-webkit-overflow-scrolling","touch")},0)},100)}),P(E).on(I.events.resize+"."+e,function(){o.refreshToggle()}),this.initSet(),this.refreshToggle()}function p(t){var e=t.checked,a=o.getHeaderFromCheckbox(t),s=o.tablesaw._$getCells(a);s[e?"removeClass":"addClass"]("tablesaw-toggle-cellhidden"),s[e?"addClass":"removeClass"]("tablesaw-toggle-cellvisible"),o.updateColspanCells(a,e),o.$table.trigger("tablesawcolumns")}function f(t){t&&P(t.target).closest("."+o.classes.popup).length||(P(R).off("click."+e),a.removeClass("up").addClass("down"),i.removeClass("visible"))}},h.prototype.getHeaderFromCheckbox=function(t){return P(t).data("tablesaw-header")},h.prototype.refreshToggle=function(){var e=this;this.$menu.find("input").each(function(){var t=e.getHeaderFromCheckbox(this);this.checked="table-cell"===e.tablesaw._$getCells(t).eq(0).css("display")}),this.updateColspanCells()},h.prototype.updateColspanCells=function(t,e){this.tablesaw.updateColspanCells("tablesaw-toggle-cellhidden",t,e)},h.prototype.destroy=function(){this.$table.removeClass(this.classes.columnToggleTable),this.$table.find("th, td").each(function(){P(this).removeClass("tablesaw-toggle-cellhidden").removeClass("tablesaw-toggle-cellvisible"),this.className=this.className.replace(/\bui\-table\-priority\-\d\b/g,"")})},P(R).on(I.events.create,function(t,e){"columntoggle"===e.mode&&new h(e.table).init()}),P(R).on(I.events.destroy,function(t,e){"columntoggle"===e.mode&&P(e.table).data(b).destroy()}),P(R).on(I.events.refresh,function(t,e){"columntoggle"===e.mode&&P(e.table).data(b).refreshToggle()}),I.ColumnToggle=h,function(){function f(t){var e=[];return P(t.childNodes).each(function(){var t=P(this);t.is("input, select")?e.push(t.val()):t.is(".tablesaw-cell-label")||e.push((t.text()||"").replace(/^\s+|\s+$/g,""))}),e.join("")}var d="tablesaw-sortable",l="data-tablesaw-sortable-col",h="data-tablesaw-sortable-default-col",b="data-tablesaw-sortable-numeric",g="data-tablesaw-subrow",w="data-tablesaw-ignorerow",u={head:d+"-head",ascend:d+"-ascending",descend:d+"-descending",switcher:d+"-switch",tableToolbar:"tablesaw-bar-section",sortButton:d+"-btn"},t={_create:function(t){return P(this).each(function(){if(P(this).data(d+"-init"))return!1;P(this).data(d+"-init",!0).trigger("beforecreate."+d)[d]("_init",t).trigger("create."+d)})},_init:function(){var n,i,t,e,s,a,o=P(this),r=o.data("tablesaw");function c(t){P.each(t,function(t,e){var a=P(e);a.removeAttr(h),a.removeClass(u.ascend),a.removeClass(u.descend)})}o.addClass(d),n=o.children().filter("thead").find("th["+l+"]"),t=n,P.each(t,function(t,e){P(e).addClass(u.head)}),e=n,s=function(t){if(!P(t.target).is("a[href]")){t.stopPropagation();var e=P(t.target).closest("["+l+"]"),a=t.data.col,s=n.index(e[0]);c(e.closest("thead").find("th").filter(function(){return this!==e[0]})),e.is("."+u.descend)||!e.is("."+u.ascend)?(o[d]("sortBy",a,!0),s+="_asc"):(o[d]("sortBy",a),s+="_desc"),i&&i.find("select").val(s).trigger("refresh"),t.preventDefault()}},P.each(e,function(t,e){var a=P("<button class='"+u.sortButton+"'/>");a.on("click",{col:e},s),P(e).wrapInner(a).find("button").append("<span class='tablesaw-sortable-arrow'>")}),a=n,P.each(a,function(t,e){var a=P(e);a.is("["+h+"]")&&(a.is("."+u.descend)||a.addClass(u.ascend))}),o.is("[data-tablesaw-sortable-switch]")&&function(a){i=P("<div>").addClass(u.switcher).addClass(u.tableToolbar);var l=["<label>"+I.i18n.sort+":"];l.push('<span class="btn tablesaw-btn"><select>'),a.each(function(t){var e=P(this),a=e.is("["+h+"]"),s=e.is("."+u.descend),n=e.is("["+b+"]"),i=0;P(this.cells.slice(0,5)).each(function(){isNaN(parseInt(f(this),10))||i++});var o=5===i;n||e.attr(b,o?"":"false"),l.push("<option"+(a&&!s?" selected":"")+' value="'+t+'_asc">'+e.text()+" "+(o?"&#x2191;":"(A-Z)")+"</option>"),l.push("<option"+(a&&s?" selected":"")+' value="'+t+'_desc">'+e.text()+" "+(o?"&#x2193;":"(Z-A)")+"</option>")}),l.push("</select></span></label>"),i.html(l.join(""));var t=r.$toolbar.children().eq(0);t.length?i.insertBefore(t):i.appendTo(r.$toolbar),i.find(".tablesaw-btn").tablesawbtn(),i.find("select").on("change",function(){var t=P(this).val().split("_"),e=a.eq(t[0]);c(e.siblings()),o[d]("sortBy",e.get(0),"asc"===t[1])})}(n)},sortRows:function(t,e,a,s,n){var i,o,l,r,c,h,d,u=(o=s.cells,l=n,r=[],P.each(o,function(t,e){for(var a=e.parentNode,s=P(a),n=[],i=s.next();i.is("["+g+"]");)n.push(i[0]),i=i.next();var o=a.parentNode;s.is("["+g+"]")||o===l&&r.push({element:e,cell:f(e),row:a,subrows:n.length?n:null,ignored:s.is("["+w+"]")})}),r),p=P(s).data("tablesaw-sort");return i=!(!p||"function"!=typeof p)&&p(a)||(c=a,h=P(s).is("["+b+"]")&&!P(s).is("["+b+'="false"]'),d=/[^\-\+\d\.]/g,c?function(t,e){return t.ignored||e.ignored?0:h?parseFloat(t.cell.replace(d,""))-parseFloat(e.cell.replace(d,"")):t.cell.toLowerCase()>e.cell.toLowerCase()?1:-1}:function(t,e){return t.ignored||e.ignored?0:h?parseFloat(e.cell.replace(d,""))-parseFloat(t.cell.replace(d,"")):t.cell.toLowerCase()<e.cell.toLowerCase()?1:-1}),function(t){var e,a,s=[];for(e=0,a=t.length;e<a;e++)s.push(t[e].row),t[e].subrows&&s.push(t[e].subrows);return s}(u.sort(i))},makeColDefault:function(t,e){var a=P(t);a.attr(h,"true"),e?(a.removeClass(u.descend),a.addClass(u.ascend)):(a.removeClass(u.ascend),a.addClass(u.descend))},sortBy:function(o,l){var r,c=P(this),h=c.data("tablesaw");h.$tbody.each(function(){var t,e,a,s=P(this),n=h.getBodyRows(this),i=h.headerMapping[0];for(e=0,a=i.length;e<a;e++)if(i[e]===o){r=e;break}for(e=0,a=(t=c[d]("sortRows",n,r,l,o,this)).length;e<a;e++)s.append(t[e])}),c[d]("makeColDefault",o,l),c.trigger("tablesaw-sorted")}};P.fn[d]=function(t){var e,a=Array.prototype.slice.call(arguments,1);return t&&"string"==typeof t?void 0!==(e=P.fn[d].prototype[t].apply(this[0],a))?e:P(this):(P(this).data(d+"-active")||(P(this).data(d+"-active",!0),P.fn[d].prototype._create.call(this,t)),P(this))},P.extend(P.fn[d].prototype,t),P(R).on(I.events.create,function(t,e){e.$table.is("table[data-tablesaw-sortable]")&&e.$table[d]()})}(),function(){var n="disabled",B="tablesaw-fix-persist",N="tablesaw-swipe-cellhidden",A="tablesaw-swipe-cellpersist",i="tablesaw-all-cols-visible",o="data-tablesaw-no-touch";function a(c,d){var u=d.data("tablesaw"),t=P("<div class='tablesaw-advance'></div>"),a=P("<a href='#' class='btn tablesaw-nav-btn tablesaw-btn btn-micro left'>"+I.i18n.swipePreviousColumn+"</a>").appendTo(t),s=P("<a href='#' class='btn tablesaw-nav-btn tablesaw-btn btn-micro right'>"+I.i18n.swipeNextColumn+"</a>").appendTo(t),p=c._getPrimaryHeaderCells(),f=p.not('[data-tablesaw-priority="persist"]'),h=[],b=[],g=P(R.head||"head"),w=d.attr("id");if(!p.length)throw new Error("tablesaw swipe: no header cells found.");function e(){d.css({width:"1px"}),d.find("."+N).removeClass(N),h=[],b=[],p.each(function(){var t=this.offsetWidth;h.push(t),C(this)||b.push(t)}),d.css({width:""})}function v(t){u._$getCells(t).removeClass(N)}function m(t){u._$getCells(t).addClass(N)}function C(t){return P(t).is('[data-tablesaw-priority="persist"]')}function y(){d.removeClass(B),P("#"+w+"-persist").remove()}function $(){var s,n=[];return f.each(function(t){var e=P(this),a="none"===e.css("display")||e.is("."+N);if(a||s){if(a&&s)return n[1]=t,!1}else s=!0,n[0]=t}),n}function T(){var t=$();return[t[1]-1,t[0]-1]}function k(t){return-1<t[1]&&t[1]<f.length}function x(){if(!(t=d.attr("data-tablesaw-swipe-media"))||"matchMedia"in E&&E.matchMedia(t).matches){var t,a=d.parent().width(),s=[],n=0,i=[],o=p.length;p.each(function(t){var e=P(this).is('[data-tablesaw-priority="persist"]');s.push(e),n+=h[t],i.push(n),(e||a<n)&&o--});var l=0===o;p.each(function(t){i[t]>a&&m(this)});var r=!0;p.each(function(t){if(s[t])return e=this,u._$getCells(e).addClass(A),void(r&&(u._$getCells(this).css("width",i[t]+"px"),r=!1));var e;(i[t]<=a||l)&&(l=!1,v(this),u.updateColspanCells(N,this,!0))}),y(),d.trigger("tablesawcolumns")}}function _(){S(!0)}function M(){S(!1)}function S(t){var e;if(k(e=t?$():T())){isNaN(e[0])&&(e[0]=t?0:f.length-1);var a,s=function(){var t,a="#"+w+".tablesaw-swipe ",s=[],n=d.width(),i=n,o=[];if(p.each(function(t){var e;C(this)&&(e=this.offsetWidth,i-=e,e<.75*n&&(o.push(t+"-"+e),s.push(a+" ."+A+":nth-child("+(t+1)+") { width: "+e+"px; }")))}),t=o.join("_"),s.length){d.addClass(B);var e=P("#"+w+"-persist");e.length&&e.data("tablesaw-hash")===t||(e.remove(),P("<style>"+s.join("\n")+"</style>").attr("id",w+"-persist").data("tablesaw-hash",t).appendTo(g))}return i}(),n=e[0],i=e[1],o=f.get(n),l=!1,r=!1;m(o),u.updateColspanCells(N,o,!0);for(var c=n+(t?1:-1);0<=c&&c<b.length;){s-=b[c];var h=f.eq(c);h.is(".tablesaw-swipe-cellhidden")?0<s&&(r=l=!0,v(a=h.get(0)),u.updateColspanCells(N,a,!1)):r=!0,t?c++:c--}r?!l&&k(t?$():T())&&S(t):(v(a=f.get(i)),u.updateColspanCells(N,a,!1)),d.trigger("tablesawcolumns")}}function H(t,e){return(t.touches||t.originalEvent.touches)[0][e]}d.addClass("tablesaw-swipe"),e(),t.appendTo(u.$toolbar),w||(w="tableswipe-"+Math.round(1e4*Math.random()),d.attr("id",w)),a.add(s).on("click",function(t){P(t.target).closest(s).length?_():M(),t.preventDefault()}),d.is("["+o+"]")||d.on("touchstart.swipetoggle",function(t){var n,i,o=H(t,"pageX"),l=H(t,"pageY"),r=E.pageYOffset;P(E).off(I.events.resize,x),P(this).on("touchmove.swipetoggle",function(t){n=H(t,"pageX"),i=H(t,"pageY")}).on("touchend.swipetoggle",function(){var t=c.getConfig({swipeHorizontalThreshold:30,swipeVerticalThreshold:30}),e=t.swipe?t.swipe.verticalThreshold:t.swipeVerticalThreshold,a=t.swipe?t.swipe.horizontalThreshold:t.swipeHorizontalThreshold,s=Math.abs(E.pageYOffset-r)>=e;Math.abs(i-l)>=e||s||(n-o<-1*a&&_(),a<n-o&&M()),E.setTimeout(function(){P(E).on(I.events.resize,x)},300),P(this).off("touchmove.swipetoggle touchend.swipetoggle")})}),d.on("tablesawcolumns.swipetoggle",function(){var t=k(T()),e=k($());a[t?"removeClass":"addClass"](n),s[e?"removeClass":"addClass"](n),u.$toolbar[t||e?"removeClass":"addClass"](i)}).on("tablesawnext.swipetoggle",function(){_()}).on("tablesawprev.swipetoggle",function(){M()}).on(I.events.destroy+".swipetoggle",function(){var t=P(this);t.removeClass("tablesaw-swipe"),u.$toolbar.find(".tablesaw-advance").remove(),P(E).off(I.events.resize,x),t.off(".swipetoggle")}).on(I.events.refresh,function(){y(),e(),x()}),x(),P(E).on(I.events.resize,x)}P(R).on(I.events.create,function(t,e){"swipe"===e.mode&&a(e,e.$table)})}(),d={attr:{init:"data-tablesaw-minimap"},show:function(t){var e=t.getAttribute(d.attr.init);return""===e||!!(e&&"matchMedia"in E)&&E.matchMedia(e).matches}},P(R).on(I.events.create,function(t,e){"swipe"!==e.mode&&"columntoggle"!==e.mode||!e.$table.is("[ "+d.attr.init+"]")||function(t){var e=t.data("tablesaw"),a=P('<div class="tablesaw-advance minimap">'),s=P('<ul class="tablesaw-advance-dots">').appendTo(a),n="tablesaw-advance-dots-hide";function i(){if(d.show(t[0])){a.css("display","block");var e=s.find("li").removeClass(n);t.find("thead th").each(function(t){"none"===P(this).css("display")&&e.eq(t).addClass(n)})}else a.css("display","none")}t.data("tablesaw")._getPrimaryHeaderCells().each(function(){s.append("<li><i></i></li>")}),a.appendTo(e.$toolbar),i(),P(E).on(I.events.resize,i),t.on("tablesawcolumns.minimap",function(){i()}).on(I.events.destroy+".minimap",function(){var t=P(this);e.$toolbar.find(".tablesaw-advance").remove(),P(E).off(I.events.resize,i),t.off(".minimap")})}(e.$table)}),I.MiniMap=d,u={selectors:{init:"table[data-tablesaw-mode-switch]"},attributes:{excludeMode:"data-tablesaw-mode-exclude"},classes:{main:"tablesaw-modeswitch",toolbar:"tablesaw-bar-section"},modes:["stack","swipe","columntoggle"],init:function(e){var t,a=P(e),s=a.data("tablesaw"),n=a.attr(u.attributes.excludeMode),i=s.$toolbar,o=P("<div>").addClass(u.classes.main+" "+u.classes.toolbar),l=['<label><span class="abbreviated">'+I.i18n.modeSwitchColumnsAbbreviated+'</span><span class="longform">'+I.i18n.modeSwitchColumns+"</span>:"],r=a.attr("data-tablesaw-mode");l.push('<span class="btn tablesaw-btn"><select>');for(var c=0,h=u.modes.length;c<h;c++)n&&n.toLowerCase()===u.modes[c]||(t=r===u.modes[c],l.push("<option"+(t?" selected":"")+' value="'+u.modes[c]+'">'+I.i18n.modes[c]+"</option>"));l.push("</select></span></label>"),o.html(l.join(""));var d=i.find(".tablesaw-advance").eq(0);d.length?o.insertBefore(d):o.appendTo(i),o.find(".tablesaw-btn").tablesawbtn(),o.find("select").on("change",function(t){return u.onModeChange.call(e,t,P(this).val())})},onModeChange:function(t,e){var a=P(this),s=a.data("tablesaw");s.$toolbar.find("."+u.classes.main).remove(),s.destroy(),a.attr("data-tablesaw-mode",e),a.tablesaw()}},P(R).on(I.events.create,function(t,e){e.$table.is(u.selectors.init)&&u.init(e.table)}),function(){var i="tablesawCheckAll";function a(t){this.tablesaw=t,this.$table=t.$table,this.attr="data-tablesaw-checkall",this.checkAllSelector="["+this.attr+"]",this.forceCheckedSelector="["+this.attr+"-checked]",this.forceUncheckedSelector="["+this.attr+"-unchecked]",this.checkboxSelector='input[type="checkbox"]',this.$triggers=null,this.$checkboxes=null,this.$table.data(i)||(this.$table.data(i,this),this.init())}a.prototype._filterCells=function(t){return t.filter(function(){return!P(this).closest("tr").is("[data-tablesaw-subrow],[data-tablesaw-ignorerow]")}).find(this.checkboxSelector).not(this.checkAllSelector)},a.prototype.getCheckboxesForButton=function(t){return this._filterCells(P(P(t).attr(this.attr)))},a.prototype.getCheckboxesForCheckbox=function(t){return this._filterCells(P(P(t).closest("th")[0].cells))},a.prototype.init=function(){var t=this;this.$table.find(this.checkAllSelector).each(function(){P(this).is(t.checkboxSelector)?t.addCheckboxEvents(this):t.addButtonEvents(this)})},a.prototype.addButtonEvents=function(t){var n=this;P(t).on("click",function(t){t.preventDefault();var e,a=n.getCheckboxesForButton(this),s=!0;a.each(function(){this.checked||(s=!1)}),e=!!P(this).is(n.forceCheckedSelector)||!P(this).is(n.forceUncheckedSelector)&&!s,a.each(function(){this.checked=e,P(this).trigger("change."+i)})})},a.prototype.addCheckboxEvents=function(a){var e=this;P(a).on("change",function(){var t=this.checked;e.getCheckboxesForCheckbox(this).each(function(){this.checked=t})});var s=e.getCheckboxesForCheckbox(a);s.on("change."+i,function(){var t=0;s.each(function(){this.checked&&t++});var e=t===s.length;a.checked=e,a.indeterminate=0!==t&&!e})},P(R).on(I.events.create,function(t,e){new a(e)}),I.CheckAll=a}(),I});