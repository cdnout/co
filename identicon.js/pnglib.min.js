!function(){function _(i,t){for(var s=2;s<arguments.length;s++)for(var h=0;h<arguments[s].length;h++)i[t++]=arguments[s].charAt(h)}function u(i){return String.fromCharCode(i>>24&255,i>>16&255,i>>8&255,255&i)}function p(i){return String.fromCharCode(255&i,i>>8&255)}var i=function(i,t,s){this.width=i,this.height=t,this.depth=s,this.pix_size=t*(i+1),this.data_size=2+this.pix_size+5*Math.floor((65534+this.pix_size)/65535)+4,this.ihdr_offs=0,this.ihdr_size=25,this.plte_offs=this.ihdr_offs+this.ihdr_size,this.plte_size=8+3*s+4,this.trns_offs=this.plte_offs+this.plte_size,this.trns_size=8+s+4,this.idat_offs=this.trns_offs+this.trns_size,this.idat_size=8+this.data_size+4,this.iend_offs=this.idat_offs+this.idat_size,this.iend_size=12,this.buffer_size=this.iend_offs+this.iend_size,this.buffer=new Array,this.palette=new Object,this.pindex=0;for(var o=new Array,h=0;h<this.buffer_size;h++)this.buffer[h]="\0";_(this.buffer,this.ihdr_offs,u(this.ihdr_size-12),"IHDR",u(i),u(t),"\b"),_(this.buffer,this.plte_offs,u(this.plte_size-12),"PLTE"),_(this.buffer,this.trns_offs,u(this.trns_size-12),"tRNS"),_(this.buffer,this.idat_offs,u(this.idat_size-12),"IDAT"),_(this.buffer,this.iend_offs,u(this.iend_size-12),"IEND");var f,e=30912;e+=31-e%31,_(this.buffer,this.idat_offs+8,(f=e,String.fromCharCode(f>>8&255,255&f)));for(h=0;(h<<16)-1<this.pix_size;h++){var r,n;h+65535<this.pix_size?(r=65535,n="\0"):(r=this.pix_size-(h<<16)-h,n=""),_(this.buffer,this.idat_offs+8+2+(h<<16)+(h<<2),n,p(r),p(~r))}for(h=0;h<256;h++){for(var d=h,a=0;a<8;a++)d=1&d?-306674912^d>>1&2147483647:d>>1&2147483647;o[h]=d}this.index=function(i,t){var s=t*(this.width+1)+i+1;return this.idat_offs+8+2+5*Math.floor(s/65535+1)+s},this.color=function(i,t,s,h){var f=(((h=0<=h?h:255)<<8|i)<<8|t)<<8|s;if(void 0===this.palette[f]){if(this.pindex==this.depth)return"\0";var e=this.plte_offs+8+3*this.pindex;this.buffer[e+0]=String.fromCharCode(i),this.buffer[e+1]=String.fromCharCode(t),this.buffer[e+2]=String.fromCharCode(s),this.buffer[this.trns_offs+8+this.pindex]=String.fromCharCode(h),this.palette[f]=String.fromCharCode(this.pindex++)}return this.palette[f]},this.getBase64=function(){for(var i,t,s,h,f,e,r,o=this.getDump(),n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",d=o.length,a=0,_="";h=(i=o.charCodeAt(a))>>2,f=(3&i)<<4|(t=o.charCodeAt(a+1))>>4,s=o.charCodeAt(a+2),e=d<a+2?64:(15&t)<<2|s>>6,r=d<a+3?64:63&s,_+=n.charAt(h)+n.charAt(f)+n.charAt(e)+n.charAt(r),(a+=3)<d;);return _},this.getDump=function(){for(var i=65521,t=1,s=0,h=5552,f=0;f<this.height;f++)for(var e=-1;e<this.width;e++)s+=t+=this.buffer[this.index(e,f)].charCodeAt(0),0==(h-=1)&&(t%=i,s%=i,h=5552);function r(i,t,s){for(var h=-1,f=4;f<s-4;f+=1)h=o[255&(h^i[t+f].charCodeAt(0))]^h>>8&16777215;_(i,t+s-4,u(-1^h))}return t%=i,s%=i,_(this.buffer,this.idat_offs+this.idat_size-8,u(s<<16|t)),r(this.buffer,this.ihdr_offs,this.ihdr_size),r(this.buffer,this.plte_offs,this.plte_size),r(this.buffer,this.trns_offs,this.trns_size),r(this.buffer,this.idat_offs,this.idat_size),r(this.buffer,this.iend_offs,this.iend_size),"Â‰PNG\r\n\n"+this.buffer.join("")}};"undefined"!=typeof module&&void 0!==module.exports?module.exports=i:window.PNGlib=i}();