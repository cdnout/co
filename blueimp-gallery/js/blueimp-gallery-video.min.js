!function(e){"use strict";"function"==typeof define&&define.amd?define(["./blueimp-helper","./blueimp-gallery"],e):e(window.blueimp.helper||window.jQuery,window.blueimp.Gallery)}(function(P,e){"use strict";var o=e.prototype;P.extend(o.options,{videoContentClass:"video-content",videoLoadingClass:"video-loading",videoPlayingClass:"video-playing",videoIframeClass:"video-iframe",videoCoverClass:"video-cover",videoPlayClass:"video-play",videoPlaysInline:!0,videoPreloadProperty:"preload",videoPosterProperty:"poster"});var t=o.handleSlide;return P.extend(o,{handleSlide:function(e,o){t.call(this,e,o),this.setTimeout(function(){this.activeVideo&&this.activeVideo.pause()})},videoFactory:function(e,o,t){var i,s,a,l=this,n=this.options,r=this.elementPrototype.cloneNode(!1),d=P(r),p=[{type:"error",target:r}],v=t||document.createElement("video"),c=this.elementPrototype.cloneNode(!1),u=document.createElement("a"),y=this.getItemProperty(e,n.urlProperty),C=this.getItemProperty(e,n.sourcesProperty),m=this.getItemProperty(e,n.titleProperty),h=this.getItemProperty(e,n.videoPosterProperty),g=[u];if(d.addClass(n.videoContentClass),P(u).addClass(n.videoPlayClass),P(c).addClass(n.videoCoverClass).hasClass(n.toggleClass)||g.push(c),c.draggable=!1,m&&(r.title=m,u.setAttribute("aria-label",m)),h&&(c.style.backgroundImage='url("'+h+'")'),v.setAttribute?n.videoPlaysInline&&v.setAttribute("playsinline",""):d.addClass(n.videoIframeClass),v.preload=this.getItemProperty(e,n.videoPreloadProperty)||"none",this.support.source&&C)for(a=0;a<C.length;a+=1)v.appendChild(P.extend(this.sourcePrototype.cloneNode(!1),C[a]));return y&&(v.src=y),u.href=y||C&&C.length&&C[0].src,v.play&&v.pause&&((t||P(v)).on("error",function(){l.setTimeout(o,p)}).on("pause",function(){v.seeking||(s=!1,d.removeClass(l.options.videoLoadingClass).removeClass(l.options.videoPlayingClass),i&&l.container.addClass(l.options.controlsClass),v.controls=!1,v===l.activeVideo&&delete l.activeVideo,l.interval&&l.play())}).on("playing",function(){s=!1,c.removeAttribute("style"),d.removeClass(l.options.videoLoadingClass).addClass(l.options.videoPlayingClass)}).on("play",function(){window.clearTimeout(l.timeout),s=!0,d.addClass(l.options.videoLoadingClass),l.container.hasClass(l.options.controlsClass)?(i=!0,l.container.removeClass(l.options.controlsClass)):i=!1,v.controls=!0,l.activeVideo=v}),P(g).on("click",function(e){l.preventDefault(e),l.activeVideo=v,s?v.pause():v.play()}),r.appendChild(t&&t.element||v)),r.appendChild(c),r.appendChild(u),this.setTimeout(o,[{type:"load",target:r}]),r}}),e});