!function(t){"use strict";"function"==typeof define&&define.amd?define(["./blueimp-helper","./blueimp-gallery"],t):t(window.blueimp.helper||window.jQuery,window.blueimp.Gallery)}(function(s,t){"use strict";var i=t.prototype;s.extend(i.options,{indicatorContainer:"ol",activeIndicatorClass:"active",thumbnailProperty:"thumbnail",thumbnailIndicators:!0});var e=i.initSlides,n=i.addSlide,a=i.resetSlides,o=i.handleClick,r=i.handleSlide,d=i.handleClose;return s.extend(i,{createIndicator:function(t){var i,e,n=this.indicatorPrototype.cloneNode(!1),a=this.getItemProperty(t,this.options.titleProperty),o=this.options.thumbnailProperty;return this.options.thumbnailIndicators&&(o&&(i=this.getItemProperty(t,o)),void 0===i&&(e=t.getElementsByTagName&&s(t).find("img")[0])&&(i=e.src),i&&(n.style.backgroundImage='url("'+i+'")')),a&&(n.title=a),n.setAttribute("role","link"),n},addIndicator:function(t){var i;this.indicatorContainer.length&&((i=this.createIndicator(this.list[t])).setAttribute("data-index",t),this.indicatorContainer[0].appendChild(i),this.indicators.push(i))},setActiveIndicator:function(t){this.indicators&&(this.activeIndicator&&this.activeIndicator.removeClass(this.options.activeIndicatorClass),this.activeIndicator=s(this.indicators[t]),this.activeIndicator.addClass(this.options.activeIndicatorClass))},initSlides:function(t){t||(this.indicatorContainer=this.container.find(this.options.indicatorContainer),this.indicatorContainer.length&&(this.indicatorPrototype=document.createElement("li"),this.indicators=this.indicatorContainer[0].children)),e.call(this,t)},addSlide:function(t){n.call(this,t),this.addIndicator(t)},resetSlides:function(){a.call(this),this.indicatorContainer.empty(),this.indicators=[]},handleClick:function(t){var i=t.target||t.srcElement,e=i.parentNode;if(e===this.indicatorContainer[0])this.preventDefault(t),this.slide(this.getNodeIndex(i));else{if(e.parentNode!==this.indicatorContainer[0])return o.call(this,t);this.preventDefault(t),this.slide(this.getNodeIndex(e))}},handleSlide:function(t,i){r.call(this,t,i),this.setActiveIndicator(i)},handleClose:function(){this.activeIndicator&&this.activeIndicator.removeClass(this.options.activeIndicatorClass),d.call(this)}}),t});