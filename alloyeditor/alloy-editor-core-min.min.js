window.AlloyEditor=function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=42)}([function(e,t){e.exports=window[void 0]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.className,n=void 0===t?"":t,i=e.symbol;return o.default.createElement(r.default.Consumer,null,function(e){var t=e.editor,r=t.get("nativeEditor"),a=r.config.spritemap||"",l=a+"#"+i,s=n?" "+n:"",u="ae-svg-icon"+s;return o.default.createElement("svg",{className:u,height:"18",width:"18"},o.default.createElement("use",{href:l}))})};var o=i(n(0)),r=i(n(2));function i(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r=function(e){return e&&e.__esModule?e:{default:e}}(n(0));var i=r.default.createContext({});i.toProps=function(e){var t=r.default.forwardRef(function(t,n){return r.default.createElement(i.Consumer,null,function(i){return r.default.createElement(e,o({},t,{context:i,ref:n}))})});return t.key=e.key,t},t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){return e&&e.__esModule?e:{default:e}}(n(2));function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}t.default=function(e){var t,n;return n=t=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,a=Array(i),l=0;l<i;l++)a[l]=arguments[l];return n=o=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),o.execCommand=function(e){var t=o.context.editor.get("nativeEditor");t.execCommand(o.props.command,e),t.fire("actionPerformed",o)},r(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(e),t.contextType=o.default,n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=function(e){return e&&e.__esModule?e:{default:e}}(n(5));t.default=function(e){return function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"getStateClasses",value:function(){var e="";return r.default.isFunction(this.isActive)&&this.isActive()&&(e+="ae-button-pressed"),e}}]),t}(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r={isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},isBoolean:function(e){return"boolean"==typeof e},isFunction:function(e){return"function"==typeof e},isNull:function(e){return null===e},isNumber:function(e){return"number"==typeof e&&isFinite(e)},isObject:function(e){var t=void 0===e?"undefined":o(e);return e&&("object"===t||r.isFunction(e))},isString:function(e){return"string"==typeof e},mix:function(e,t){var n=Object.prototype.hasOwnProperty;for(var o in t)n.call(t,o)&&(e[o]=t[o])},toInt:function(e){return parseInt(e,10)}};t.default=r},function(e,t){e.exports=window[void 0]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=function e(t,n,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,o)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(o):void 0},i=l(n(2)),a=l(n(5));function l(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t,n;return n=t=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"componentWillMount",value:function(){a.default.isFunction(r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillMount",this))&&r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillMount",this).call(this);var e=this.props.style;if(a.default.isString(e)){for(var n=e.split("."),o=this.context.editor.get("nativeEditor").config,i=n.shift();i&&a.default.isObject(o)&&a.default.isObject(o[i]);)o=o[i],i=n.shift();a.default.isObject(o)&&(e=o)}this._style=new CKEDITOR.style(e)}},{key:"componentWillUnmount",value:function(){a.default.isFunction(r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillUnmount",this))&&r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillUnmount",this).call(this),this._style=null}},{key:"getStyle",value:function(){return this._style}},{key:"isActive",value:function(){var e=this.context.editor.get("nativeEditor"),t=e.elementPath();return this.getStyle().checkActive(t,e)}}]),t}(e),t.contextType=i.default,n}},function(e,t,n){e.exports=n(47)()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=function(e){return e&&e.__esModule?e:{default:e}}(n(2));t.default=function(e){var t,n;return n=t=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"isActive",value:function(){var e=this.context.editor.get("nativeEditor").getCommand(this.props.command);return!!e&&e.state===CKEDITOR.TRISTATE_ON}}]),t}(e),t.contextType=r.default,n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=function e(t,n,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,o)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(o):void 0},i=l(n(6)),a=l(n(5));function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var u=1,c=2;t.default=function(e){return function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=o=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),o.focus=function(e){if((!e||o._isValidTarget(e.target))&&o._descendants&&o._descendants.length){var t=o._descendants[o._activeDescendant];document.activeElement===t||o.props.focusFirstChild||-1===o._descendants.indexOf(document.activeElement)&&t.focus(),e&&(e.stopPropagation(),e.preventDefault())}},o.handleKey=function(e){if(o._isValidTarget(e.target)&&o._descendants){var t=o._getFocusAction(e);t.type&&(e.stopPropagation(),e.preventDefault(),t.type===u&&o._moveFocus(t.direction),t.type===c&&o.props.onDismiss(t.direction))}},s(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"componentDidMount",value:function(){a.default.isFunction(r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidMount",this))&&r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this),this._refresh()}},{key:"componentDidUpdate",value:function(){a.default.isFunction(r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidUpdate",this))&&r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidUpdate",this).call(this),this._refresh()}},{key:"moveFocus",value:function(e){e=a.default.isNumber(e)?e:0,this._moveFocus(e)}},{key:"_getFocusAction",value:function(e){var t={type:0};if(this.props.keys){var n=this._getFocusMoveDirection(e);n&&(t.direction=n,t.type=u);var o=this._getFocusDismissAction(e,n);o.dismiss&&(t.direction=o.direction,t.type=c)}return t}},{key:"_getFocusDismissAction",value:function(e,t){var n={direction:t,dismiss:!1};return this.props.onDismiss&&(this._isValidKey(e.keyCode,this.props.keys.dismiss)&&(n.dismiss=!0),this._isValidKey(e.keyCode,this.props.keys.dismissNext)&&(n.dismiss=!0,n.direction=1),this._isValidKey(e.keyCode,this.props.keys.dismissPrev)&&(n.dismiss=!0,n.direction=-1),n.dismiss||this.props.circular||!t||(n.dismiss=-1===t&&0===this._activeDescendant||1===t&&this._activeDescendant===this._descendants.length-1)),n}},{key:"_getFocusMoveDirection",value:function(e){var t=0;return this._isValidKey(e.keyCode,this.props.keys.next)&&(t=1),this._isValidKey(e.keyCode,this.props.keys.prev)&&(t=-1),e.shifKey&&(t*=-1),t}},{key:"_isValidKey",value:function(e,t){return a.default.isArray(t)?-1!==t.indexOf(e):e===t}},{key:"_isValidTarget",value:function(e){var t=e.tagName.toLowerCase();return"input"!==t&&"select"!==t&&"textarea"!==t}},{key:"_moveFocus",value:function(e){var t=this._descendants.length,n=this._descendants[this._activeDescendant];n.setAttribute("tabIndex",-1),this._activeDescendant+=e,this.props.circular?this._activeDescendant=(this._activeDescendant%t+t)%t:this._activeDescendant=Math.max(Math.min(this._activeDescendant,t-1),0),(n=this._descendants[this._activeDescendant]).setAttribute("tabIndex",0),n.focus()}},{key:"_refresh",value:function(){var e=this,t=i.default.findDOMNode(this);if(t){var n=t.querySelectorAll(this.props.descendants),o=[];this._descendants=[],Array.prototype.slice.call(n).forEach(function(t){t.getAttribute("data-tabindex")?o.push(t):e._descendants.push(t)}),o=o.sort(function(e,t){return a.default.toInt(e.getAttribute("data-tabindex"))>a.default.toInt(t.getAttribute("data-tabindex"))}),this._descendants=o.concat(this._descendants),this._activeDescendant=0,this._descendants.some(function(t,n){if("0"===t.getAttribute("tabindex"))return e._activeDescendant=n,e.focus(),!0})}}}]),t}(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=function e(t,n,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,o)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(o):void 0},i=l(n(2)),a=l(n(5));function l(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t,n;return n=t=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"componentWillMount",value:function(){a.default.isFunction(r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillMount",this))&&r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillMount",this).call(this);var e=this.context.editor.get("nativeEditor"),n=this.props.keystroke,o="keystroke:"+n.name,i=e.getCommand(o);i||(i=new CKEDITOR.command(e,{exec:function(e){var t=n.fn;a.default.isString(t)?this[t].call(this,e):a.default.isFunction(t)&&t.call(this,e)}.bind(this)}),e.addCommand(o,i)),this._defaultKeystrokeCommand=e.keystrokeHandler.keystrokes[n.keys],e.setKeystroke(n.keys,o)}},{key:"componentWillUnmount",value:function(){a.default.isFunction(r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillUnmount",this))&&r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillUnmount",this).call(this),this.context.editor.get("nativeEditor").setKeystroke(this.props.keystroke.keys,this._defaultKeystrokeCommand)}}]),t}(e),t.contextType=i.default,n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=a(n(0)),i=a(n(10));function a(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),o(t,[{key:"render",value:function(){return r.default.createElement("div",{className:"ae-arrow-box ae-arrow-box-top-left ae-dropdown",onFocus:this.focus,onKeyDown:this.handleKey,tabIndex:"0"},r.default.createElement("ul",{className:"ae-listbox",role:"listbox"},this.props.children))}}]),t}();l.defaultProps={circular:!1,descendants:".ae-toolbar-element",keys:{dismiss:[27],dismissNext:[39],dismissPrev:[37],next:[40],prev:[38]}},l.key="dropdown",t.default=(0,i.default)(l)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=l(n(0)),i=l(n(10)),a=l(n(27));function l(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._ref=r.default.createRef(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),o(t,[{key:"componentDidMount",value:function(){this._ref.current.focus()}},{key:"render",value:function(){return r.default.createElement("div",{className:"ae-arrow-box ae-arrow-box-top-left ae-dropdown",onFocus:this.focus,onKeyDown:this.handleKey,ref:this._ref,tabIndex:"0"},r.default.createElement("ul",{className:"ae-listbox",id:this.props.listId,role:"listbox"},this._renderActions(this.props.commands)))}},{key:"_renderActions",value:function(e){var t=void 0;return e&&e.length&&(t=e.map(function(e){return r.default.createElement("li",{key:e.command,role:"option"},r.default.createElement(a.default,{command:e.command,description:"string"==typeof e.label?e.label:e.label(),icon:e.icon}))})),t}}]),t}();s.defaultProps={circular:!1,descendants:".ae-toolbar-element",keys:{dismiss:[27],dismissNext:[39],dismissPrev:[37],next:[40],prev:[38]}},s.key="buttonCommandsList",t.default=(0,i.default)(s)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(2)),r=i(n(5));function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}t.default=function(e){var t,n;return n=t=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,l=Array(i),s=0;s<i;s++)l[s]=arguments[s];return n=o=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),o.applyStyle=function(){if(r.default.isFunction(o.isActive)&&r.default.isFunction(o.getStyle)){var e=o.context.editor.get("nativeEditor");e.getSelection().lock(),o.isActive()?e.removeStyle(o.getStyle()):e.applyStyle(o.getStyle()),e.getSelection().unlock(),e.fire("actionPerformed",o)}},a(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(e),t.contextType=o.default,n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=f(n(0)),i=f(n(6)),a=f(n(10)),l=f(n(12)),s=f(n(23)),u=f(n(24)),c=f(n(25));function f(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),o(t,[{key:"componentDidMount",value:function(){i.default.findDOMNode(this).focus()}},{key:"componentWillMount",value:function(){var e=[],t=[],n=[];this.props.styles.forEach(function(o){var r=new CKEDITOR.style(o.style);r.type===CKEDITOR.STYLE_BLOCK?e.push(o):r.type===CKEDITOR.STYLE_INLINE?t.push(o):r.type===CKEDITOR.STYLE_OBJECT&&n.push(o)}),this._blockStyles=e,this._inlineStyles=t,this._objectStyles=n}},{key:"render",value:function(){var e=void 0;return this.props.showRemoveStylesItem&&(e=r.default.createElement(u.default,{onDismiss:this.props.toggleDropdown})),r.default.createElement(l.default,this.props,e,r.default.createElement(s.default,{name:AlloyEditor.Strings.blockStyles,styles:this._blockStyles}),this._renderStylesItems(this._blockStyles),r.default.createElement(s.default,{name:AlloyEditor.Strings.inlineStyles,styles:this._inlineStyles}),this._renderStylesItems(this._inlineStyles),r.default.createElement(s.default,{name:AlloyEditor.Strings.objectStyles,styles:this._objectStyles}),this._renderStylesItems(this._objectStyles))}},{key:"_renderStylesItems",value:function(e){var t=this,n=void 0;return e&&e.length&&(n=e.map(function(e){return r.default.createElement("li",{key:e.name,role:"option"},r.default.createElement(c.default,{activeStyle:t.props.activeStyle,name:e.name,style:e.style,styleFn:e.styleFn}))})),n}}]),t}();d.defaultProps={circular:!1,descendants:".ae-toolbar-element",keys:{dismiss:[27],dismissNext:[39],dismissPrev:[37],next:[40],prev:[38]},showRemoveStylesItem:!0},d.key="buttonStylesList",t.default=(0,a.default)(d)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=function e(t,n,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,o)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(o):void 0},a=s(n(6)),l=s(n(5));function s(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){return function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.mergeDropdownProps=function(e,t){return CKEDITOR.tools.merge(e,{expanded:n.state.itemDropdown===t,tabIndex:n.state.dropdownTrigger===t?0:-1,toggleDropdown:n.toggleDropdown.bind(n,t)})},n.toggleDropdown=function(e,t){n.setState({dropdownTrigger:e,itemDropdown:e!==n.state.itemDropdown?e:null},function(){n.state.itemDropdown||(n.moveFocus?n.moveFocus(t):a.default.findDOMNode(n).focus())})},n.state=o({},n.state,{dropdownTrigger:null,itemDropdown:null}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"componentWillReceiveProps",value:function(e){l.default.isFunction(i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillReceiveProps",this))&&i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillReceiveProps",this).call(this,e),this.setState({dropdownTrigger:null,itemDropdown:null})}}]),t}(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=function e(t,n,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,o)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(o):void 0},i=function(e){return e&&e.__esModule?e:{default:e}}(n(5));function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}t.default=function(e){return function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),l=0;l<r;l++)i[l]=arguments[l];return n=o=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),o.requestExclusive=function(e){o.setState({itemExclusive:e})},a(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"cancelExclusive",value:function(e){this.state.itemExclusive===e&&this.setState({itemExclusive:null})}},{key:"componentWillReceiveProps",value:function(e){i.default.isFunction(r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillReceiveProps",this))&&r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillReceiveProps",this).call(this,e),this.setState({itemExclusive:null})}},{key:"filterExclusive",value:function(e){var t=this;return e.filter(function(e){return t.state.itemExclusive?t.state.itemExclusive===e.key?e:void 0:e})}},{key:"mergeExclusiveProps",value:function(e,t){return CKEDITOR.tools.merge(e,{cancelExclusive:this.cancelExclusive.bind(this,t),renderExclusive:this.state.itemExclusive===t,requestExclusive:this.requestExclusive.bind(this,t)})}}]),t}(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=p(n(0)),a=p(n(2)),l=p(n(5)),s=p(n(16)),u=p(n(10)),c=p(n(1)),f=p(n(30)),d=p(n(32));function p(e){return e&&e.__esModule?e:{default:e}}var h=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._clearLink=function(){n.setState({linkHref:""}),n._focusLinkInput()},n._handleKeyDown=function(e){if(13!==e.keyCode&&27!==e.keyCode||e.preventDefault(),13===e.keyCode)n._updateLink();else if(40===e.keyCode)n.setState({autocompleteSelected:!0});else if(27===e.keyCode){var t=n.context.editor.get("nativeEditor");new CKEDITOR.Link(t).advanceSelection(),n.context.editor.get("nativeEditor").fire("actionPerformed",n)}},n._handleLinkHrefChange=function(e){n.setState({linkHref:e.target.value}),n._focusLinkInput()},n._handleLinkTargetChange=function(e){n.setState({itemDropdown:null,linkTarget:e.target.getAttribute("data-value")}),n._focusLinkInput()},n._removeLink=function(){var e=n.context.editor.get("nativeEditor"),t=new CKEDITOR.Link(e),o=e.getSelection(),r=o.createBookmarks();t.remove(n.state.element,{advance:!0}),o.selectBookmarks(r),n.props.cancelExclusive(),e.fire("actionPerformed",n)},n._updateLink=function(){var e=n.context.editor.get("nativeEditor"),t=new CKEDITOR.Link(e,{appendProtocol:n.props.appendProtocol}),o={target:n.state.linkTarget||null},r={advance:!0};n.state.linkHref&&(n.state.element?(o.href=n.state.linkHref,t.update(o,n.state.element,r)):(n.state.linkTarget||(o={}),t.create(n.state.linkHref,o,r)),e.fire("actionPerformed",n)),n.props.cancelExclusive()},n.linkInput=i.default.createRef(),n.state=n._getInitialState(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),r(t,[{key:"componentDidMount",value:function(){(this.props.renderExclusive||this.props.manualSelection)&&this._focusLinkInput()}},{key:"componentWillReceiveProps",value:function(){this.setState(this._getInitialState())}},{key:"render",value:function(){var e={allowedTargets:this.props.allowedTargets,editor:this.context.editor,handleLinkTargetChange:this._handleLinkTargetChange,selectedTarget:this.state.linkTarget||AlloyEditor.Strings.linkTargetDefault};e=this.mergeDropdownProps(e,d.default.key);var t=void 0;if(this.props.data){var n=this.props.data;if(!l.default.isFunction(n)){var r=this.props.data;n=function(){return r}}var a={autocompleteSelected:this.state.autocompleteSelected,data:n,editor:this.context.editor,handleLinkAutocompleteClick:this._handleLinkAutocompleteClick,onDismiss:this.props.toggleDropdown,setAutocompleteState:this._setAutocompleteState,term:this.state.linkHref};a=this.mergeDropdownProps(a,f.default.key),t=i.default.createElement(f.default,a)}var s=void 0;this.state.linkHref&&(s=i.default.createElement("button",{"aria-label":AlloyEditor.Strings.clearInput,className:"ae-button ae-button-clear",onClick:this._clearLink,title:AlloyEditor.Strings.clear},i.default.createElement(c.default,{symbol:"times-circle"})));var u={};return!CKEDITOR.env.ie&&AlloyEditor.Strings&&(u.placeholder=AlloyEditor.Strings.editLink),i.default.createElement("div",{className:"ae-container-edit-link"},i.default.createElement("button",{"aria-label":AlloyEditor.Strings.removeLink,className:"ae-button",disabled:!this.state.element,onClick:this._removeLink,title:AlloyEditor.Strings.remove},i.default.createElement(c.default,{symbol:"chain-broken"})),i.default.createElement("div",{className:"ae-container-input xxl"},this.props.showTargetSelector&&i.default.createElement(d.default,e),i.default.createElement("div",{className:"ae-container-input"},i.default.createElement("input",o({className:"ae-input",onChange:this._handleLinkHrefChange,onKeyDown:this._handleKeyDown},u,{ref:this.linkInput,type:"text",value:this.state.linkHref})),t),s),i.default.createElement("button",{"aria-label":AlloyEditor.Strings.confirm,className:"ae-button",disabled:!this._isValidState(),onClick:this._updateLink,title:AlloyEditor.Strings.confirm},i.default.createElement(c.default,{className:"ae-icon-svg-check",symbol:"check"})))}},{key:"_getInitialState",value:function(){var e=this.props.context.editor,t=this.props.defaultLinkTarget,n=new CKEDITOR.Link(e.get("nativeEditor")).getFromSelection(),o=n&&n.getAttribute("href")||"",r=n&&n.getAttribute("target")||t;return{autocompleteSelected:!1,element:n,initialLink:{href:o,target:r},linkHref:o,linkTarget:r}}},{key:"_focusLinkInput",value:function(){var e=this,t=function(){e.linkInput.current.focus()};window.requestAnimationFrame?window.requestAnimationFrame(t):setTimeout(t,0)}},{key:"_handleLinkAutocompleteClick",value:function(e){this.setState({itemDropdown:null,linkHref:e.target.getAttribute("data-value")}),this._focusLinkInput()}},{key:"_isValidState",value:function(){return this.state.linkHref&&(this.state.linkHref!==this.state.initialLink.href||this.state.linkTarget!==this.state.initialLink.target)}},{key:"_setAutocompleteState",value:function(e){this.setState({autocompleteSelected:e.selected})}}]),t}();h.contextType=a.default,h.defaultProps={appendProtocol:!0,autocompleteUrl:"",circular:!0,customIndexStart:!0,defaultLinkTarget:"",descendants:".ae-toolbar-element",keys:{dismiss:[27],dismissNext:[39],dismissPrev:[37],next:[40],prev:[38]},showTargetSelector:!0},h.key="linkEdit",t.default=a.default.toProps((0,s.default)((0,u.default)(h)))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=function(e){return e&&e.__esModule?e:{default:e}}(n(2));t.default=function(e){var t,n;return n=t=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"mergeButtonCfgProps",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=this.context.editor.get("nativeEditor").config.buttonCfg||{};return CKEDITOR.tools.merge(e,t.linkEdit)}}]),t}(e),t.contextType=r.default,n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=u(n(0)),a=u(n(6)),l=u(n(2)),s=u(n(5));function u(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t,n;return n=t=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"cancelAnimation",value:function(){this._animationFrameId&&window.cancelAnimationFrame(this._animationFrameId)}},{key:"getArrowBoxClasses",value:function(){var e="ae-arrow-box";return this.getInteractionPoint().direction===CKEDITOR.SELECTION_TOP_TO_BOTTOM?e+=" ae-arrow-box-top":e+=" ae-arrow-box-bottom",e}},{key:"getConstrainedPosition",value:function(e,t){t=t||new CKEDITOR.dom.window(window).getViewPaneSize();var n=e.left,o=e.top;return e.left+e.width>t.width&&(n-=e.left+e.width-t.width),o<0&&(o=0),{x:n,y:o}}},{key:"getInteractionPoint",value:function(){var e=this.props.editorEvent?this.props.editorEvent.data:null;if(e){var t=e.selectionData,n=e.nativeEvent,o={x:e.nativeEvent.pageX,y:t.region.top},r=t.region.direction,i=t.region.endRect,a=t.region.startRect;i&&a&&a.top===i.top&&(r=CKEDITOR.SELECTION_BOTTOM_TO_TOP);var l=void 0,s=void 0;return o.x&&o.y?(l=this._getXPoint(t,o.x),s=r===CKEDITOR.SELECTION_BOTTOM_TO_TOP?Math.min(o.y,t.region.top):Math.max(o.y,this._getYPoint(t,n))):(l=t.region.left+t.region.width/2,s=r===CKEDITOR.SELECTION_TOP_TO_BOTTOM?this._getYPoint(t,n):t.region.top),{direction:r,x:l,y:s}}}},{key:"_getXPoint",value:function(e,t){var n=e.region,o=n.startRect?n.startRect.left:n.left,r=n.endRect?n.endRect.right:n.right,i=void 0;o<t&&r>t?i=t:i=Math.abs(o-t)<Math.abs(r-t)?o:r;return i}},{key:"_getYPoint",value:function(e,t){var n=0;if(e&&t){var o=new CKEDITOR.dom.element(t.target);n=o.$&&"auto"===o.getStyle("overflow")?t.target.offsetTop+t.target.offsetHeight:e.region.bottom}return n}},{key:"getWidgetXYPoint",value:function(e,t,n){var o=a.default.findDOMNode(this),r=this.props.gutter;return n===CKEDITOR.SELECTION_TOP_TO_BOTTOM||n===CKEDITOR.SELECTION_BOTTOM_TO_TOP?(e=e-r.left-o.offsetWidth/2,t=n===CKEDITOR.SELECTION_TOP_TO_BOTTOM?t+r.top:t-o.offsetHeight-r.top):n!==CKEDITOR.SELECTION_LEFT_TO_RIGHT&&n!==CKEDITOR.SELECTION_RIGHT_TO_LEFT||(e=n===CKEDITOR.SELECTION_LEFT_TO_RIGHT?e+r.left+o.offsetHeight/2:e-3*o.offsetHeight/2-r.left,t=t-r.top-o.offsetHeight/2),e<0&&(e=0),t<0&&(t=0),[e,t]}},{key:"isVisible",value:function(){var e=a.default.findDOMNode(this);return!!e&&new CKEDITOR.dom.element(e).hasClass("alloy-editor-visible")}},{key:"moveToPoint",value:function(e,t){var n=new CKEDITOR.dom.element(a.default.findDOMNode(this));n.setStyles({left:e[0]+"px",top:e[1]+"px",opacity:0,pointerEvents:"none"}),n.removeClass("alloy-editor-invisible"),this._animationFrameId=window.requestAnimationFrame(function(){n.addClass("ae-toolbar-transition"),n.addClass("alloy-editor-visible"),n.setStyles({left:t[0]+"px",top:t[1]+"px",opacity:1}),setTimeout(function(){n.setStyles({pointerEvents:""})},150)})}},{key:"show",value:function(){var e=a.default.findDOMNode(this),t=this.context.editor.get("uiNode"),n=t?t.scrollTop:0;if(!this.isVisible()&&e){var o=this.getInteractionPoint();if(o){var r,i,l=new CKEDITOR.dom.element(e),s=void 0,u=void 0;if(s=r=parseFloat(l.getStyle("left")),u=parseFloat(l.getStyle("top")),this.props.constrainToViewport){var c=this.getConstrainedPosition({height:parseFloat(e.offsetHeight),left:s,top:u,width:parseFloat(e.offsetWidth)});s=c.x,u=c.y}i=o.direction===CKEDITOR.SELECTION_TOP_TO_BOTTOM?this.props.selectionData.region.bottom+n:this.props.selectionData.region.top+n,this.moveToPoint([r,i],[s,u])}}}},{key:"updatePosition",value:function(){var e=this.getInteractionPoint(),t=a.default.findDOMNode(this);if(e&&t){var n=this.context.editor.get("uiNode")||document.body,o=getComputedStyle(n),r=parseInt(o.getPropertyValue("margin-left"),10),i=parseInt(o.getPropertyValue("margin-right"),10),l=r+document.body.clientWidth+i,s="BODY"!==n.tagName?n.scrollTop:0,u=this.getWidgetXYPoint(e.x,e.y,e.direction);u[1]+=s,u[0]<0&&(u[0]=0),u[0]>l-t.offsetWidth&&(u[0]=l-t.offsetWidth),new CKEDITOR.dom.element(t).setStyles({left:u[0]+"px",top:u[1]+"px"})}}},{key:"getToolbarButtonGroups",value:function(e,t){var n=this;return s.default.isFunction(e)&&(e=e.call(this)||[]),e.reduce(function(o,r){return Array.isArray(r)?(o.push(n.getToolbarButtons(r,t)),o):n.getToolbarButtons(e,t)},[])}},{key:"getToolbarButtons",value:function(e,t){var n={},o=this.context.editor.get("nativeEditor").config.buttonCfg||{};return s.default.isFunction(e)&&(e=e.call(this)||[]),this.filterExclusive(e.filter(function(e){return e&&(AlloyEditor.Buttons[e]||AlloyEditor.Buttons[e.name])}).map(function(e){return s.default.isString(e)?(n[e]=o[e],e=AlloyEditor.Buttons[e]):s.default.isString(e.name)&&(n[AlloyEditor.Buttons[e.name].key]=CKEDITOR.tools.merge(o[e],e.cfg),e=AlloyEditor.Buttons[e.name]),e})).map(function(e,o){var r=this.mergeExclusiveProps({editor:this.context.editor,key:"separator"!==e.key?e.key:e.key+"-"+o,tabKey:e.key,tabIndex:this.props.trigger&&this.props.trigger.props.tabKey===e.key?0:-1,trigger:this.props.trigger},e.key);return r=this.mergeDropdownProps(r,e.key),t&&(r=CKEDITOR.tools.merge(r,t)),r=CKEDITOR.tools.merge(r,n[e.key]),i.default.createElement(e,r)},this)}}]),t}(e),t.contextType=l.default,t.defaultProps=o({},e.defaultProps,{gutter:{left:0,top:10},constrainToViewport:!0}),n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){return e&&e.__esModule?e:{default:e}}(n(5));t.default=function(e,t,n,r){if(!t||!e)throw new Error("extend failed, verify dependencies");var i=t.prototype,a=Object.create(i);return e.prototype=a,a.constructor=e,e.superclass=i,t!==Object&&i.constructor===Object.prototype.constructor&&(i.constructor=t),n&&o.default.mix(a,n),r&&o.default.mix(e,r),e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={embed:function(e){var t=e.data.selectionData;return!(!t.element||"ae_embed"!==t.element.getAttribute("data-widget"))},embedUrl:function(e){var t=e.data.selectionData;return!(!t.element||"embedurl"!==t.element.getAttribute("data-widget"))},header:function(e){var t=e.editor.get("nativeEditor"),n=e.data.selectionData,o=t.isSelectionEmpty();return!(n.element||!n.region||o||t.getSelection().getCommonAncestor().isReadOnly()||!t.elementPath().contains(["h1","h2","h3","h4","h5","h6"]))},image:function(e){var t=e.data.selectionData.element,n=!!t&&!!t.findOne("img"),o=!!t&&"img"===t.getName();return!(!t||!n&&!o)},link:function(e){var t=e.editor.get("nativeEditor"),n=t.getSelection().getRanges()[0],o=e.data.selectionData,r=new CKEDITOR.Link(t).getFromSelection(),i=t.isSelectionEmpty(),a=!o.element||"img"!==o.element.getName();return!(!(i&&a&&r&&r.getText().length!==n.endOffset&&r)||r.isReadOnly()||function(e,t){return t.getText().length===e.endOffset||t.equals(e.startContainer)&&t.equals(e.endContainer)&&e.startOffset===e.endOffset&&1===e.endOffset}(n,r))},table:function(e){var t=e.editor.get("nativeEditor"),n=new CKEDITOR.Table(t),o=n.getFromSelection();return!(!o||!n.isEditable(o))},text:function(e){var t=e.editor.get("nativeEditor"),n=t.isSelectionEmpty(),o=e.data.selectionData;return!(o.element||!o.region||n||t.getSelection().getCommonAncestor().isReadOnly())}};t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=function(e){return e&&e.__esModule?e:{default:e}}(n(0));var i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),o(t,[{key:"render",value:function(){return this.props.styles&&this.props.styles.length?r.default.createElement("span",{className:"ae-list-header"},this.props.name):null}}]),t}();i.key="buttonStylesListHeader",t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=a(n(0)),i=a(n(2));function a(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=o=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),o._removeStyles=function(){var e=o.context.editor.get("nativeEditor");e.execCommand("removeFormat"),o.props.removeBlocks.forEach(function(t){var n=new CKEDITOR.style({element:t});e.removeStyle(n)}),e.fire("actionPerformed",o)},l(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),o(t,[{key:"render",value:function(){return r.default.createElement("li",{role:"option"},r.default.createElement("button",{className:"ae-toolbar-element",onClick:this._removeStyles,tabIndex:this.props.tabIndex},AlloyEditor.Strings.normal))}}]),t}();s.contextType=i.default,s.defaultProps={removeBlocks:["h1","h2","h3","h4","h5","h6","pre"]},s.key="buttonStylesListItemRemove",t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=s(n(0)),i=s(n(2)),a=s(n(14)),l=s(n(7));function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var c=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=o=u(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),o._onClick=function(){o.props.styleFn?o.props.styleFn():(o.context.editor.get("nativeEditor").execCommand("removeFormat"),o.applyStyle())},u(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),o(t,[{key:"componentWillMount",value:function(){var e={element:"span",styles:{margin:0}};e=CKEDITOR.tools.merge(e,this.props.style),this._preview=new CKEDITOR.style(e).buildPreview(this.props.name)}},{key:"render",value:function(){var e=this.props.name===this.props.activeStyle?"ae-toolbar-element active":"ae-toolbar-element";return r.default.createElement("button",{className:e,dangerouslySetInnerHTML:{__html:this._preview},onClick:this._onClick,tabIndex:this.props.tabIndex})}}]),t}();c.contextType=i.default,c.key="buttonStylesListItem",t.default=(0,a.default)((0,l.default)(c))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=a(n(0)),i=a(n(2));function a(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.takePhoto=function(){var e=n._videoContainerRef.current,t=n._canvasContainerRef.current,o=t.getContext("2d"),r=n._videoHeight,i=n.props.videoWidth;if(i&&r){t.width=i,t.height=r,o.drawImage(e,0,0,i,r);var a=t.toDataURL("image/png"),l=CKEDITOR.dom.element.createFromHtml('<img src="'+a+'">'),s=n.context.editor.get("nativeEditor");s.insertElement(l),n.props.cancelExclusive(),s.fire("actionPerformed",n),s.fire("imageCameraAdd",l)}},n._handleStreamError=function(e){window.alert("An error occurred! "+e)},n._handleStreamSuccess=function(e){var t=n._videoContainerRef.current,o=n._canvasContainerRef.current;t.addEventListener("canplay",function(){var e=t.videoHeight/(t.videoWidth/n.props.videoWidth);isNaN(e)&&(e=n.props.videoWidth/(4/3)),t.setAttribute("width",n.props.videoWidth),t.setAttribute("height",e),o.setAttribute("width",n.props.videoWidth),o.setAttribute("height",e),n._videoHeight=e},!1),n._stream=e,navigator.mozGetUserMedia?t.mozSrcObject=e:t.srcObject=e,t.play(),n._buttonTakePhotoRef.current.disabled=!1},n._buttonTakePhotoRef=r.default.createRef(),n._canvasContainerRef=r.default.createRef(),n._videoContainerRef=r.default.createRef(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),o(t,[{key:"componentDidMount",value:function(){this._buttonTakePhotoRef.current.focus()}},{key:"componentWillUnmount",value:function(){this._stream&&(this._stream.stop?this._stream.stop():this._stream.getVideoTracks&&this._stream.getVideoTracks().forEach(function(e){e.stop()}),this._stream=null)}},{key:"render",value:function(){return(navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia).call(navigator,{video:!0,audio:!1},this._handleStreamSuccess,this._handleStreamError),r.default.createElement("div",{className:"ae-camera"},r.default.createElement("video",{ref:this._videoContainerRef},"Video stream not available."),r.default.createElement("button",{className:"ae-camera-shoot",onClick:this.takePhoto,ref:this._buttonTakePhotoRef},"Take photo"),r.default.createElement("canvas",{className:"ae-camera-canvas",ref:this._canvasContainerRef}))}}]),t}();l.contextType=i.default,l.defaultProps={videoWidth:320},l.key="cameraImage",t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=a(n(0)),i=a(n(3));function a(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),o(t,[{key:"render",value:function(){return r.default.createElement("button",{"aria-label":this.props.description,className:this._getClassName(),onClick:this.execCommand,tabIndex:this.props.tabIndex},this.props.description)}},{key:"_getClassName",value:function(){return"ae-container ae-toolbar-element"}}]),t}();l.key="buttonCommandListItem",t.default=(0,i.default)(l)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=l(n(0)),i=l(n(2)),a=l(n(1));function l(e){return e&&e.__esModule?e:{default:e}}var s=13,u=27,c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._clearLink=function(){n.setState({linkHref:""})},n._embedLink=function(){n.context.editor.get("nativeEditor").execCommand("embedUrl",{url:n.state.linkHref}),n.props.cancelExclusive()},n._focusLinkInput=function(){n.linkInput.current.focus()},n._handleKeyDown=function(e){if(e.keyCode!==s&&e.keyCode!==u||e.preventDefault(),e.keyCode===s)n._embedLink();else if(e.keyCode===u){var t=n.context.editor.get("nativeEditor");n.props.cancelExclusive(),t.fire("actionPerformed",n)}},n._handleLinkHrefChange=function(e){n.setState({linkHref:e.target.value})},n._removeEmbed=function(){var e=n.context.editor.get("nativeEditor");n.state.element.getAscendant(function(e){return e.hasClass("cke_widget_wrapper")}).remove(),e.fire("actionPerformed",n)},n.linkInput=r.default.createRef(),n.state=n.getInitialState(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),o(t,[{key:"componentDidMount",value:function(){(this.props.renderExclusive||this.props.manualSelection)&&(window.requestAnimationFrame?window.requestAnimationFrame(this._focusLinkInput):setTimeout(this._focusLinkInput,0))}},{key:"componentWillReceiveProps",value:function(){this.setState(this.getInitialState())}},{key:"getInitialState",value:function(){var e=void 0,t=this.props.context.editor.get("nativeEditor").getSelection();if(t){var n=t.getSelectedElement();n&&(e=n.findOne('[data-widget="ae_embed"]'))}var o=e?e.getAttribute("data-ae-embed-url"):"";return{element:e,initialLink:{href:o},linkHref:o}}},{key:"render",value:function(){var e={opacity:this.state.linkHref?1:0};return r.default.createElement("div",{className:"ae-container-edit-link"},r.default.createElement("button",{"aria-label":AlloyEditor.Strings.deleteEmbed,className:"ae-button","data-type":"button-embed-remove",disabled:!this.state.element,onClick:this._removeEmbed,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.deleteEmbed},r.default.createElement(a.default,{className:"ae-icon-svg-trash",symbol:"trash"})),r.default.createElement("div",{className:"ae-container-input xxl"},r.default.createElement("input",{className:"ae-input",onChange:this._handleLinkHrefChange,onKeyDown:this._handleKeyDown,placeholder:AlloyEditor.Strings.editLink,ref:this.linkInput,type:"text",value:this.state.linkHref}),r.default.createElement("button",{"aria-label":AlloyEditor.Strings.clearInput,className:"ae-button ae-button-clear",onClick:this._clearLink,style:e,title:AlloyEditor.Strings.clear},r.default.createElement(a.default,{symbol:"times-clear"}))),r.default.createElement("button",{"aria-label":AlloyEditor.Strings.confirm,className:"ae-button",disabled:!this._isValidState(),onClick:this._embedLink,title:AlloyEditor.Strings.confirm},r.default.createElement(a.default,{className:"ae-icon-svg-check",symbol:"check"})))}},{key:"_isValidState",value:function(){return this.state.linkHref&&this.state.linkHref!==this.state.initialLink.href}}]),t}();c.contextType=i.default,c.key="embedEdit",t.default=i.default.toProps(c)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=s(n(0)),i=s(n(6)),a=s(n(2)),l=s(n(1));function s(e){return e&&e.__esModule?e:{default:e}}var u=13,c=27,f=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._embedVideoURL=function(){n.context.editor.get("nativeEditor").execCommand("embedUrl",{type:"video",url:n.state.videoURL}),n.props.cancelExclusive()},n._focusVideoUrlInput=function(){i.default.findDOMNode(n.refs.linkInput).focus()},n._handleKeyDown=function(e){e.keyCode!==u&&e.keyCode!==c||e.preventDefault(),e.keyCode===u?n._embedVideoURL():e.keyCode===c&&n.props.cancelExclusive()},n._handleVideoURLChange=function(e){n.setState({videoURL:e.target.value})},n.state=n.getInitialState(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),o(t,[{key:"componentDidMount",value:function(){(this.props.renderExclusive||this.props.manualSelection)&&(window.requestAnimationFrame?window.requestAnimationFrame(this._focusVideoUrlInput):setTimeout(this._focusVideoUrlInput,0))}},{key:"componentWillReceiveProps",value:function(){var e=this.getInitialState();this.setState({all:void 0,keys:void 0,new:e,old:void 0})}},{key:"getInitialState",value:function(){var e=void 0,t=this.props.context.editor.get("nativeEditor").getSelection();if(t){var n=t.getSelectedElement();n&&(e=n.findOne('[data-widget="videoembed"]'))}var o=e?e.getAttribute("data-embed-video-url"):"";return{element:e,initialEmbed:{videoURL:o},videoURL:o}}},{key:"render",value:function(){var e=AlloyEditor.Strings.pasteVideoLink,t={opacity:this.state.videoURL?1:0};return r.default.createElement("div",{className:"ae-container-embed-video-edit"},r.default.createElement("div",{className:"ae-container-input xxl"},r.default.createElement("input",{className:"ae-input",onChange:this._handleVideoURLChange,onKeyDown:this._handleKeyDown,placeholder:e,ref:"linkInput",type:"text",value:this.state.videoURL}),r.default.createElement("button",{"aria-label":AlloyEditor.Strings.clearInput,className:"ae-button ae-icon-remove",onClick:this._clearLink,style:t,title:AlloyEditor.Strings.clear})),r.default.createElement("button",{"aria-label":AlloyEditor.Strings.confirm,className:"ae-button",disabled:!this._isValidState(),onClick:this._embedVideoURL,title:AlloyEditor.Strings.confirm},r.default.createElement(l.default,{symbol:"check"})))}},{key:"_clearLink",value:function(){this.setState({videoURL:""})}},{key:"_isValidState",value:function(){return this.state.videoURL&&this.state.videoURL!==this.state.initialEmbed.videoURL}}]),t}();f.contextType=a.default,f.key="embedVideoEdit",t.default=a.default.toProps(f)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=l(n(0)),i=l(n(10)),a=l(n(12));function l(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={items:[]},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),o(t,[{key:"componentWillReceiveProps",value:function(e){e.term&&e.term===this.props.term||(clearTimeout(this._timeout),e.term?this._timeout=setTimeout(this._updateItems,this.props.delay):this.setState({items:[]})),e.autocompleteSelected&&(setTimeout(this.focus,0),this.props.setAutocompleteState({selected:!1}))}},{key:"componentWillUnmount",value:function(){clearTimeout(this._timeout)}},{key:"render",value:function(){return this.props.expanded&&this.state.items.length?r.default.createElement(a.default,null,this._renderAutocompleteItems(this.state.items)):null}},{key:"shouldComponentUpdate",value:function(e,t){return e.expanded!==this.props.expanded||e.term!==this.props.term||t.items!==this.state.items}},{key:"_renderAutocompleteItems",value:function(e){var t=this;e=e||[];var n=this.props.handleLinkAutocompleteClick;return e.map(function(e){var o=t.props.term===e.url?"ae-toolbar-element active":"ae-toolbar-element";return r.default.createElement("li",{key:e.url,role:"option"},r.default.createElement("button",{className:o,"data-value":e.url,onClick:n},e.title))})}},{key:"_updateItems",value:function(){var e=this;this.props.term&&Promise.resolve(this.props.data(this.props.term)).then(function(t){t.length&&!e.props.expanded&&e.props.toggleDropdown(),e.setState({items:t})})}}]),t}();s.defaultProps={circular:!1,data:[],delay:100,descendants:".ae-toolbar-element",keys:{dismiss:[27],dismissNext:[39],dismissPrev:[37],next:[40],prev:[38]}},s.key="buttonLinkAutocompleteList",t.default=(0,i.default)(s)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=c(n(0)),a=c(n(2)),l=c(n(5)),s=c(n(1)),u=c(n(18));function c(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n._browseClick=function(){var e=n.context.editor.get("nativeEditor"),t=e.config.documentBrowseLinkUrl,o=e.config.documentBrowseLinkCallback,r=n.linkEditButtonRef.current?n.linkEditButtonRef.current.state.linkTarget:"";l.default.isFunction(o)&&o.apply(null,[e,t,function(e){n._updateLink(e.value,r,e.title)}])},n._updateLink=function(e,t,o){var r=n.context.editor.get("nativeEditor"),i=new CKEDITOR.Link(r,{appendProtocol:!1}),a={target:t},l={advance:!0};e&&(r.plugins&&r.plugins.creole&&!o&&(e=location.origin+e),n.state.element?(a.href=e,i.update(a,n.state.element,l)):i.create(e,a,l),r.fire("actionPerformed",n))};var o=new CKEDITOR.Link(n.props.context.editor.get("nativeEditor")).getFromSelection(),r=o?o.getAttribute("href"):"";return n.linkEditButtonRef=i.default.createRef(),n.state={element:o,linkHref:r},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),r(t,[{key:"render",value:function(){return i.default.createElement("div",{className:"ae-container-link-edit-browse"},i.default.createElement(u.default,o({ref:this.linkEditButtonRef},this.props)),i.default.createElement("button",{"aria-label":"Browse",className:"ae-button",onClick:this._browseClick,title:"browse"},i.default.createElement(s.default,{symbol:"folder"})))}}]),t}();f.contextType=a.default,f.key="linkEditBrowse",t.default=a.default.toProps(f)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=l(n(0)),i=l(n(1)),a=l(n(33));function l(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),o(t,[{key:"render",value:function(){var e=this.props.handleLinkTargetChange,t=this.props.allowedTargets;return r.default.createElement("div",{className:"ae-container-dropdown ae-container-dropdown-medium ae-container-edit-link-target ae-has-dropdown",tabIndex:"0"},r.default.createElement("button",{"aria-expanded":this.props.expanded,"aria-label":this.props.selectedTarget,className:"ae-toolbar-element",onClick:this.props.toggleDropdown,role:"combobox",tabIndex:this.props.tabIndex,title:this.props.selectedTarget},r.default.createElement("div",{className:"ae-container"},r.default.createElement("span",{className:"ae-container-dropdown-selected-item"},this.props.selectedTarget),r.default.createElement(i.default,{symbol:"caret-bottom"}))),this.props.expanded&&r.default.createElement(a.default,{allowedLinkTargets:t,handleLinkTargetChange:e,onDismiss:this.props.toggleDropdown,selectedTarget:this.props.selectedTarget}))}},{key:"shouldComponentUpdate",value:function(e){return e.expanded!==this.props.expanded||e.selectedTarget!==this.props.selectedTarget}}]),t}();s.key="linkTargetEdit",t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=s(n(0)),i=s(n(6)),a=s(n(10)),l=s(n(12));function s(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),o(t,[{key:"componentDidMount",value:function(){i.default.findDOMNode(this).focus()}},{key:"render",value:function(){var e=this._renderListTargets();return r.default.createElement(l.default,this.props,e)}},{key:"_getAllowedTargetItems",value:function(){return this.props.allowedLinkTargets||[{label:AlloyEditor.Strings.linkTargetDefault,value:""},{label:AlloyEditor.Strings.linkTargetSelf,value:"_self"},{label:AlloyEditor.Strings.linkTargetBlank,value:"_blank"},{label:AlloyEditor.Strings.linkTargetParent,value:"_parent"},{label:AlloyEditor.Strings.linkTargetTop,value:"_top"}]}},{key:"_renderListTargets",value:function(){var e=this,t=this._getAllowedTargetItems(),n=this.props.handleLinkTargetChange;return t=t.map(function(t){var o=e.props.selectedTarget===t.value?"ae-toolbar-element active":"ae-toolbar-element";return r.default.createElement("li",{key:t.value,role:"option"},r.default.createElement("button",{className:o,"data-value":t.value,onClick:n},t.label))})}}]),t}();u.defaultProps={circular:!0,descendants:".ae-toolbar-element",keys:{dismiss:[27],dismissNext:[39],dismissPrev:[37],next:[40],prev:[38]}},u.key="targetList",t.default=(0,a.default)(u)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=f(n(0)),i=f(n(2)),a=f(n(11)),l=f(n(19)),s=f(n(4)),u=f(n(1)),c=f(n(18));function f(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=o=d(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),o._requestExclusive=function(){o.props.requestExclusive(t.key)},d(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),o(t,[{key:"isActive",value:function(){return null!==new CKEDITOR.Link(this.context.editor.get("nativeEditor")).getFromSelection()}},{key:"render",value:function(){var e="ae-button "+this.getStateClasses();if(this.props.renderExclusive){var t=this.mergeButtonCfgProps();return r.default.createElement(c.default,t)}return r.default.createElement("button",{"aria-label":AlloyEditor.Strings.link,className:e,"data-type":"button-link",onClick:this._requestExclusive,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.link},r.default.createElement(u.default,{symbol:"link"}))}}]),t}();p.contextType=i.default,p.defaultProps={keystroke:{fn:"_requestExclusive",keys:CKEDITOR.CTRL+76,name:"link"}},p.key="link",t.default=(0,l.default)((0,a.default)((0,s.default)(p)))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=l(n(0)),i=l(n(2)),a=l(n(1));function l(e){return e&&e.__esModule?e:{default:e}}var s=13,u=27,c="cols",f="rows",d=1,p=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._createTable=function(){var e=n.context.editor.get("nativeEditor"),t=new CKEDITOR.Table(e),o=n.state,r=o.cols,i=o.rows;t.create({attrs:n.props.tableAttributes,cols:Math.max(d,r),rows:Math.max(d,i)}),n.props.cancelExclusive(),e.fire("actionPerformed",n)},n._handleChange=function(e,t){n.setState(function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},e,t.target.value))},n._handleKeyDown=function(e){e.keyCode!==s&&e.keyCode!==u||e.preventDefault(),e.keyCode===s?n._createTable():e.keyCode===u&&n.props.cancelExclusive()},n.rowsRef=r.default.createRef(),n.colsRef=r.default.createRef(),n.state={cols:3,rows:3},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),o(t,[{key:"componentDidMount",value:function(){this.rowsRef.current.focus()}},{key:"render",value:function(){var e=Date.now(),t=e+f,n=e+c;return r.default.createElement("div",{className:"ae-container-edit-table"},r.default.createElement("label",{htmlFor:t},AlloyEditor.Strings.rows),r.default.createElement("div",{className:"ae-container-input small"},r.default.createElement("input",{className:"ae-input",id:t,min:d,onChange:this._handleChange.bind(this,f),onKeyDown:this._handleKeyDown,placeholder:"Rows",ref:this.rowsRef,type:"number",value:this.state.rows})),r.default.createElement("label",{htmlFor:n},AlloyEditor.Strings.columns),r.default.createElement("div",{className:"ae-container-input small"},r.default.createElement("input",{className:"ae-input",id:n,min:d,onChange:this._handleChange.bind(this,c),onKeyDown:this._handleKeyDown,placeholder:"Colums",ref:this.colsRef,type:"number",value:this.state.cols})),r.default.createElement("button",{"aria-label":"Confirm",className:"ae-button",onClick:this._createTable},r.default.createElement(a.default,{symbol:"check"})))}}]),t}();p.contextType=i.default,p.defaultProps={tableAttributes:{border:1,cellPadding:0,cellSpacing:0,style:"table-layout: fixed; width: 100%;"}},p.key="tableEdit",t.default=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={propTypes:{editorEvent:function(e){return e&&e.__esModule?e:{default:e}}(n(8)).default.object},getInteractionPoint:function(){var e=this.props.editorEvent?this.props.editorEvent.data:null;if(e){var t=e.selectionData,n=e.nativeEvent,o={x:e.nativeEvent.pageX,y:t.region.top},r=t.region.direction,i=t.region.endRect,a=t.region.startRect;i&&a&&a.top===i.top&&(r=CKEDITOR.SELECTION_BOTTOM_TO_TOP);var l=void 0,s=void 0;return o.x&&o.y?(l=this._getXPoint(t,o.x),s=r===CKEDITOR.SELECTION_BOTTOM_TO_TOP?Math.min(o.y,t.region.top):Math.max(o.y,this._getYPoint(t,n))):(l=t.region.left+t.region.width/2,s=r===CKEDITOR.SELECTION_TOP_TO_BOTTOM?this._getYPoint(t,n):t.region.top),{direction:r,x:l,y:s}}},_getXPoint:function(e,t){var n=e.region,o=n.startRect?n.startRect.left:n.left,r=n.endRect?n.endRect.right:n.right,i=void 0;o<t&&r>t?i=t:i=Math.abs(o-t)<Math.abs(r-t)?o:r;return i},_getYPoint:function(e,t){var n=0;if(e&&t){var o=new CKEDITOR.dom.element(t.target);n=o.$&&"auto"===o.getStyle("overflow")?t.target.offsetTop+t.target.offsetHeight:e.region.bottom}return n}};t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){return e&&e.__esModule?e:{default:e}}(n(5));function r(e){this.__config__=e||{},this.__ATTRS__={}}r.prototype={constructor:r,get:function(e){var t=this.constructor.ATTRS[e];if(t){this._isInitialized(e)||this._init(e);var n=this.__ATTRS__[e];return t.getter&&(n=this._callStringOrFunction(t.getter,n)),n}},set:function(e,t){var n=this.constructor.ATTRS[e];n&&(this._isInitialized(e)||this._init(e),n.readOnly||n.writeOnce&&this._isInitialized(e)||n.validator&&!this._callStringOrFunction(n.validator,t)||(n.setter&&(t=this._callStringOrFunction(n.setter,t)),this.__ATTRS__[e]=t))},_callStringOrFunction:function(e,t){var n=null;return o.default.isArray(t)||(t=[t]),o.default.isString(e)&&o.default.isFunction(this[e])?n=this[e].apply(this,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(t)):o.default.isFunction(e)&&(n=e.apply(this,t)),n},_init:function(e){var t=void 0,n=this.constructor.ATTRS[e],o=Object.prototype.hasOwnProperty.call(n,"value"),r=Object.prototype.hasOwnProperty.call(this.__config__,e);if(n.valueFn)t=this._callStringOrFunction(n.valueFn,t),this.__ATTRS__[e]=t;else if(n.readOnly)t=n.value;else if(n.writeOnce)if(r)t=this.__config__[e];else{if(!o)return;t=n.value}else r?t=this.__config__[e]:o&&(t=n.value);if(n.validator&&r&&!this._callStringOrFunction(n.validator,t)){if(!o)return;t=n.value}n.setter&&r&&(t=this._callStringOrFunction(n.setter,t)),this.__ATTRS__[e]=t},_isInitialized:function(e){return Object.prototype.hasOwnProperty.call(this.__ATTRS__,e)}},t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={table:function(){return"ae-arrow-box ae-arrow-box-bottom"}};t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){return e&&e.__esModule?e:{default:e}}(n(6));var r={left:0,top:0},i=function(e,t){var n=o.default.findDOMNode(e),i=e.context.editor.get("nativeEditor"),a=i.config.uiNode||document.body,l=getComputedStyle(a),s=parseInt(l.getPropertyValue("margin-left"),10),u=parseInt(l.getPropertyValue("margin-right"),10),c=s+a.clientWidth+u,f=n.offsetWidth/2,d=new CKEDITOR.dom.window(window).getScrollPosition(),p=e.props.gutter||r,h=e.getWidgetXYPoint(t.left+t.width/2-d.x,t.top+d.y,CKEDITOR.SELECTION_BOTTOM_TO_TOP),m=i.getSelection().getRanges(),y=0;if(m&&1===m.length){var b=m[0].startContainer;if(b.$.nodeType!==Node.ELEMENT_NODE&&(b=b.getParent()),b)y=b.getClientRect().y-t.top}var g=[t.left+t.width/2-f-d.x,t.top+y-n.offsetHeight+d.y-p.top];g[0]<0?g[0]=0:g[0]>c-n.offsetWidth&&(g[0]=c-n.offsetWidth),e.moveToPoint(h,g)},a={image:function(e){var t=e.selectionData?e.selectionData:e.editorEvent?e.editorEvent.data.selectionData:null;if(t&&t.element){var n=e.editor.get("nativeEditor").config.uiNode,o=n?n.scrollTop:0,r=t.element.getClientRect();return r.top+=o,i(this,r),!0}},table:function(e){var t=e.editor.get("nativeEditor"),n=t.config.uiNode,o=n?n.scrollTop:0,r=new CKEDITOR.Table(t).getFromSelection().getClientRect();return r.top+=o,i(this,r),!0}};t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a(n(38)),r=a(n(39)),i=a(n(22));function a(e){return e&&e.__esModule?e:{default:e}}var l=[{name:"embed",buttons:["embedRemove","embedEdit"],test:i.default.embed},{name:"embedUrl",buttons:["embedVideo","embedVideoEdit"],test:i.default.embedUrl},{name:"link",buttons:["linkEdit"],test:i.default.link},{name:"image",buttons:["imageLeft","imageCenter","imageRight","removeImage"],setPosition:r.default.image,test:i.default.image},{name:"text",buttons:{full:[["Font","FontSize","separator","bold","italic","underline","strike","separator","link"],["paragraphAlign","separator","ul","ol","separator","h1","h2","separator","indentBlock","outdentBlock","separator","TextColor","BGColor","separator","code","quote","separator","removeFormat"]],simple:["styles","bold","italic","underline","link"]},test:i.default.text},{name:"table",buttons:["tableHeading","tableRow","tableColumn","tableCell","tableRemove"],getArrowBoxClasses:o.default.table,setPosition:r.default.table,test:i.default.table}];t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.embedurl=void 0,n(119),n(120),n(121),n(122),n(123),n(124);var o=function(e){return e&&e.__esModule?e:{default:e}}(n(126));n(129),n(130),n(131),n(132),n(133),n(134),t.embedurl=o.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerBridgeButton=t.regexBasePath=t.loadLanguageResources=t.implementEventTarget=t.getUrl=t.getButtons=t.getBasePath=t.editable=t.Toolbars=t.Selections=t.SelectionTest=t.SelectionSetPosition=t.SelectionGetArrowBoxClasses=t.OOP=t.Lang=t.Core=t.Compat=t.Buttons=t.Base=t.Attribute=void 0;var o=y(n(43)),r=m(n(44)),i=y(n(93)),a=m(n(107)),l=m(n(37)),s=m(n(5)),u=m(n(21)),c=m(n(38)),f=m(n(39)),d=m(n(22)),p=m(n(40)),h=m(n(110));function m(e){return e&&e.__esModule?e:{default:e}}function y(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}n(41);var b={},g={extend:u.default};t.Attribute=l.default,t.Base=o,t.Buttons=r.default,t.Compat=i,t.Core=h.default,t.Lang=s.default,t.OOP=g,t.SelectionGetArrowBoxClasses=c.default,t.SelectionSetPosition=f.default,t.SelectionTest=d.default,t.Selections=p.default,t.Toolbars=a.default,t.editable=function(e,t){return(t=t||{}).srcNode=e,AlloyEditor.implementEventTarget(),new h.default(t)},t.getBasePath=function(){var e=window.ALLOYEDITOR_BASEPATH||"";if(!e)for(var t=document.getElementsByTagName("script"),n=0;n<t.length;n++){var o=t[n].src.match(AlloyEditor.regexBasePath);if(o){e=o[1];break}}if(-1===e.indexOf(":/")&&"//"!==e.slice(0,2)&&(e=0===e.indexOf("/")?location.href.match(/^.*?:\/\/[^\/]*/)[0]+e:location.href.match(/^[^?]*\/(?:)/)[0]+e),!e)throw new Error('The AlloyEditor installation path could not be automatically detected. Please set the global variable "ALLOYEDITOR_BASEPATH" before creating editor instances.');return e},t.getButtons=function(e){return function(){return e.reduce(function(e,t){return t=b[t]||[t],e.concat(t)},[])}},t.getUrl=function(e){var t=AlloyEditor.getBasePath();return-1===e.indexOf(":/")&&0!==e.indexOf("/")&&(e=t+e),CKEDITOR.timestamp&&"/"!==e.charAt(e.length-1)&&!/[&?]t=/.test(e)&&(e+=(e.indexOf("?")>=0?"&":"?")+"t="+CKEDITOR.timestamp),e},t.implementEventTarget=function(){AlloyEditor.fire||AlloyEditor.on||CKEDITOR.event.implementOn(AlloyEditor)},t.loadLanguageResources=function(e){if(AlloyEditor.implementEventTarget(),s.default.isFunction(e)&&(AlloyEditor.Strings?setTimeout(e,0):AlloyEditor.once("languageResourcesLoaded",function(){setTimeout(e,0)})),!AlloyEditor._langResourceRequested){AlloyEditor._langResourceRequested=!0;var t=["af","ar","bg","bn","bs","ca","cs","cy","da","de","el","en-au","en-ca","en-gb","en","eo","es","et","eu","fa","fi","fo","fr-ca","fr","gl","gu","he","hi","hr","hu","id","is","it","ja","ka","km","ko","ku","lt","lv","mk","mn","ms","nb","nl","no","pl","pt-br","pt","ro","ru","si","sk","sl","sq","sr-latn","sr","sv","th","tr","tt","ug","uk","vi","zh-cn","zh"],n=(navigator.language||navigator.userLanguage||"en").toLowerCase().match(/([a-z]+)(?:-([a-z]+))?/),o=n[1],r=n[2];t.indexOf(o+"-"+r)>=0?o=o+"-"+r:-1===t.indexOf(o)&&(o="en"),CKEDITOR.scriptLoader.load(AlloyEditor.getUrl("lang/alloy-editor/"+o+".js"),function(e){e&&AlloyEditor.fire("languageResourcesLoaded")},this)}},t.regexBasePath=/(^|.*[\\\/])(?:alloy-editor[^\/]+|alloy-editor)\.js(?:\?.*|;.*)?$/i,t.registerBridgeButton=function(e,t){b[t]||(b[t]=[]),b[t].push(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(14);Object.defineProperty(t,"ButtonActionStyle",{enumerable:!0,get:function(){return h(o).default}});var r=n(9);Object.defineProperty(t,"ButtonCommandActive",{enumerable:!0,get:function(){return h(r).default}});var i=n(3);Object.defineProperty(t,"ButtonCommand",{enumerable:!0,get:function(){return h(i).default}});var a=n(11);Object.defineProperty(t,"ButtonKeystroke",{enumerable:!0,get:function(){return h(a).default}});var l=n(19);Object.defineProperty(t,"ButtonProps",{enumerable:!0,get:function(){return h(l).default}});var s=n(4);Object.defineProperty(t,"ButtonStateClasses",{enumerable:!0,get:function(){return h(s).default}});var u=n(7);Object.defineProperty(t,"ButtonStyle",{enumerable:!0,get:function(){return h(u).default}});var c=n(20);Object.defineProperty(t,"ToolbarButtons",{enumerable:!0,get:function(){return h(c).default}});var f=n(16);Object.defineProperty(t,"WidgetDropdown",{enumerable:!0,get:function(){return h(f).default}});var d=n(17);Object.defineProperty(t,"WidgetExclusive",{enumerable:!0,get:function(){return h(d).default}});var p=n(10);function h(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"WidgetFocusManager",{enumerable:!0,get:function(){return h(p).default}})},function(e,t,n){"use strict";var o;Object.defineProperty(t,"__esModule",{value:!0});var r=pe(n(45)),i=pe(n(46)),a=pe(n(49)),l=pe(n(26)),s=pe(n(50)),u=pe(n(51)),c=pe(n(52)),f=pe(n(27)),d=pe(n(13)),p=pe(n(12)),h=pe(n(28)),m=pe(n(29)),y=pe(n(53)),b=pe(n(54)),g=pe(n(55)),v=pe(n(56)),_=pe(n(57)),E=pe(n(58)),O=pe(n(59)),w=pe(n(60)),C=pe(n(61)),k=pe(n(62)),T=pe(n(63)),x=pe(n(64)),S=pe(n(65)),P=pe(n(66)),I=pe(n(30)),D=pe(n(67)),R=pe(n(31)),j=pe(n(18)),A=pe(n(32)),K=pe(n(34)),M=pe(n(68)),N=pe(n(69)),L=pe(n(70)),F=pe(n(71)),B=pe(n(72)),H=pe(n(73)),z=pe(n(74)),U=pe(n(75)),$=pe(n(76)),W=pe(n(77)),q=pe(n(78)),V=pe(n(79)),G=pe(n(80)),Y=pe(n(23)),X=pe(n(24)),J=pe(n(25)),Z=pe(n(15)),Q=pe(n(81)),ee=pe(n(82)),te=pe(n(83)),ne=pe(n(84)),oe=pe(n(85)),re=pe(n(35)),ie=pe(n(86)),ae=pe(n(87)),le=pe(n(88)),se=pe(n(89)),ue=pe(n(33)),ce=pe(n(90)),fe=pe(n(91)),de=pe(n(92));function pe(e){return e&&e.__esModule?e:{default:e}}function he(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.default=(he(o={},r.default.key,r.default),he(o,i.default.key,i.default),he(o,a.default.key,a.default),he(o,l.default.key,l.default),he(o,s.default.key,s.default),he(o,u.default.key,u.default),he(o,c.default.key,c.default),he(o,f.default.key,f.default),he(o,d.default.key,d.default),he(o,p.default.key,p.default),he(o,h.default.key,h.default),he(o,b.default.key,b.default),he(o,m.default.key,m.default),he(o,y.default.key,y.default),he(o,g.default.key,g.default),he(o,v.default.key,v.default),he(o,_.default.key,_.default),he(o,E.default.key,E.default),he(o,O.default.key,O.default),he(o,w.default.key,w.default),he(o,C.default.key,C.default),he(o,k.default.key,k.default),he(o,T.default.key,T.default),he(o,x.default.key,x.default),he(o,S.default.key,S.default),he(o,P.default.key,P.default),he(o,I.default.key,I.default),he(o,D.default.key,D.default),he(o,R.default.key,R.default),he(o,j.default.key,j.default),he(o,A.default.key,A.default),he(o,K.default.key,K.default),he(o,M.default.key,M.default),he(o,N.default.key,N.default),he(o,B.default.key,B.default),he(o,L.default.key,L.default),he(o,F.default.key,F.default),he(o,H.default.key,H.default),he(o,z.default.key,z.default),he(o,U.default.key,U.default),he(o,$.default.key,$.default),he(o,W.default.key,W.default),he(o,q.default.key,q.default),he(o,V.default.key,V.default),he(o,G.default.key,G.default),he(o,Y.default.key,Y.default),he(o,X.default.key,X.default),he(o,J.default.key,J.default),he(o,Z.default.key,Z.default),he(o,Q.default.key,Q.default),he(o,ee.default.key,ee.default),he(o,te.default.key,te.default),he(o,ne.default.key,ne.default),he(o,oe.default.key,oe.default),he(o,re.default.key,re.default),he(o,ie.default.key,ie.default),he(o,ae.default.key,ae.default),he(o,le.default.key,le.default),he(o,se.default.key,se.default),he(o,ue.default.key,ue.default),he(o,ce.default.key,ce.default),he(o,fe.default.key,fe.default),he(o,de.default.key,de.default),o)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=s(n(0)),i=s(n(6)),a=s(n(2)),l=s(n(1));function s(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));c.call(n);var o=e.context.editor.get("nativeEditor").getSelection(),r=o.getSelectedElement()||o.getStartElement();n._element=r;var i=n._element.findOne("img"),a=i?i.getAttribute("alt"):n._element.getAttribute("alt");return n.state={imageAlt:a},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),o(t,[{key:"render",value:function(){return this.props.renderExclusive?r.default.createElement("div",{className:"ae-container-edit-link"},r.default.createElement("div",{className:"ae-container-input xxl"},r.default.createElement("input",{"aria-label":"alt",className:"ae-input",onChange:this._handleAltChange,onKeyDown:this._handleKeyDown,placeholder:"alt",ref:"refAltInput",title:"alt",type:"text",value:this.state.imageAlt})),r.default.createElement("button",{"aria-label":AlloyEditor.Strings.confirm,className:"ae-button",onClick:this._updateImageAlt,title:AlloyEditor.Strings.confirm},r.default.createElement(l.default,{symbol:"check"}))):r.default.createElement("button",{className:"ae-button",onClick:this._requestExclusive,tabIndex:this.props.tabIndex},r.default.createElement("small",{className:"ae-icon small"},"Alt"))}},{key:"_focusAltInput",value:function(){var e=this,t=function(){i.default.findDOMNode(e.refs.refAltInput).focus()};window.requestAnimationFrame?window.requestAnimationFrame(t):setTimeout(t,0)}}]),t}();u.contextType=a.default,u.key="imageAlt";var c=function(){var e=this;this._handleAltChange=function(t){e.setState({imageAlt:t.target.value}),e._focusAltInput()},this._handleKeyDown=function(t){13===t.keyCode&&(t.preventDefault(),e._updateImageAlt())},this._requestExclusive=function(){e.props.requestExclusive(u.key)},this._updateImageAlt=function(){var t=e.context.editor.get("nativeEditor"),n=e.refs.refAltInput.value;e.setState({imageAlt:n}),(e._element.findOne("img")||e._element).setAttribute("alt",n),t.fire("actionPerformed",e),e.props.cancelExclusive()}};t.default=a.default.toProps(u)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=u(n(8)),i=u(n(0)),a=u(n(2)),l=u(n(1)),s=u(n(15));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),o(t,[{key:"render",value:function(){var e=this,t=AlloyEditor.Strings.normal,n="",o=this._getColors(),r={element:"span",attributes:{class:""}};o.forEach(function(o){r.attributes.class=o.styleClass,e._checkActive(r)&&(t=o.name,n=o.style.attributes.class)});var a=this.props,u=a.expanded,c=a.tabIndex,f=a.toggleDropdown,d={activeStyle:t,onDismiss:f,showRemoveStylesItem:!1,styles:o};return i.default.createElement("div",{className:"ae-container ae-has-dropdown"},i.default.createElement("button",{"aria-expanded":u,className:"ae-toolbar-element",onClick:f,role:"combobox",tabIndex:c},i.default.createElement("span",{className:n},i.default.createElement(l.default,{symbol:"textbox"}))),u&&i.default.createElement(s.default,d))}},{key:"_applyStyle",value:function(e){var t=this,n=this.context.editor.get("nativeEditor"),o={element:"span",attributes:{class:e}};n.getSelection().lock(),this._getColors().forEach(function(e){o.attributes.class=e.styleClass,t._checkActive(o)&&n.removeStyle(new CKEDITOR.style(o))}),o.attributes.class=e;var r=new CKEDITOR.style(o);n.applyStyle(r),n.getSelection().unlock(),n.fire("actionPerformed",this)}},{key:"_checkActive",value:function(e){var t=this.context.editor.get("nativeEditor");return e=CKEDITOR.tools.merge({element:"span"},e),new CKEDITOR.style(e).checkActive(t.elementPath(),t)}},{key:"_getColors",value:function(){return this.props.styles||[{name:AlloyEditor.Strings.normal,style:{element:"span",attributes:{class:"text-body"}},styleClass:"",styleFn:this._applyStyle.bind(this,"")},{name:AlloyEditor.Strings.primary,style:{element:"span",attributes:{class:"text-primary"}},styleClass:"bg-primary",styleFn:this._applyStyle.bind(this,"bg-primary")},{name:AlloyEditor.Strings.disabled,style:{element:"span",attributes:{class:"text-secondary"}},styleClass:"bg-secondary",styleFn:this._applyStyle.bind(this,"bg-secondary")},{name:AlloyEditor.Strings.success,style:{element:"span",attributes:{class:"text-success"}},styleClass:"bg-success",styleFn:this._applyStyle.bind(this,"bg-success")},{name:AlloyEditor.Strings.danger,style:{element:"span",attributes:{class:"text-danger"}},styleClass:"bg-danger",styleFn:this._applyStyle.bind(this,"bg-danger")},{name:AlloyEditor.Strings.warning,style:{element:"span",attributes:{class:"text-warning"}},styleClass:"bg-warning",styleFn:this._applyStyle.bind(this,"bg-warning")},{name:AlloyEditor.Strings.info,style:{element:"span",attributes:{class:"text-info"}},styleClass:"bg-info",styleFn:this._applyStyle.bind(this,"bg-info")}]}}]),t}();c.contextType=a.default,c.key="backgroundColor",c.propTypes={expanded:r.default.bool,label:r.default.string,showRemoveStylesItem:r.default.bool,styles:r.default.arrayOf(r.default.object),tabIndex:r.default.number,toggleDropdown:r.default.func},t.default=c},function(e,t,n){"use strict";var o=n(48);function r(){}function i(){}i.resetWarningCache=r,e.exports=function(){function e(e,t,n,r,i,a){if(a!==o){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:r};return n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=c(n(0)),i=c(n(3)),a=c(n(11)),l=c(n(4)),s=c(n(7)),u=c(n(1));function c(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),o(t,[{key:"render",value:function(){var e="ae-button  "+this.getStateClasses();return r.default.createElement("button",{"aria-label":AlloyEditor.Strings.bold,"aria-pressed":-1!==e.indexOf("pressed"),className:e,"data-type":"button-bold",onClick:this.execCommand,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.bold},r.default.createElement(u.default,{symbol:"bold"}))}}]),t}();f.defaultProps={command:"bold",keystroke:{fn:"execCommand",keys:CKEDITOR.CTRL+66,name:"bold"},style:"coreStyles_bold"},f.key="bold",t.default=(0,i.default)((0,a.default)((0,l.default)((0,s.default)(f))))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=l(n(0)),i=l(n(26)),a=l(n(1));function l(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),o(t,[{key:"render",value:function(){if(this.props.renderExclusive)return r.default.createElement(i.default,this.props);var e=!(navigator.getUserMedia||navigator.webkitGetUserMedia&&"https"===location.protocol||navigator.mozGetUserMedia||navigator.msGetUserMedia),n=e?AlloyEditor.Strings.cameraDisabled:AlloyEditor.Strings.camera;return r.default.createElement("button",{"aria-label":n,className:"ae-button","data-type":"button-image-camera",disabled:e,onClick:this.props.requestExclusive.bind(t.key),tabIndex:this.props.tabIndex,title:n},r.default.createElement(a.default,{symbol:"camera"}))}}]),t}();s.key="camera",t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=u(n(0)),i=u(n(14)),a=u(n(4)),l=u(n(7)),s=u(n(1));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),o(t,[{key:"render",value:function(){var e="ae-button "+this.getStateClasses();return r.default.createElement("button",{"aria-label":AlloyEditor.Strings.code,"aria-pressed":-1!==e.indexOf("pressed"),className:e,"data-type":"button-code",onClick:this.applyStyle,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.code},r.default.createElement(s.default,{symbol:"code"}))}}]),t}();c.defaultProps={style:{element:"pre"}},c.key="code",t.default=(0,i.default)((0,a.default)((0,l.default)(c)))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=u(n(8)),i=u(n(0)),a=u(n(2)),l=u(n(1)),s=u(n(15));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),o(t,[{key:"render",value:function(){var e=this,t=AlloyEditor.Strings.normal,n=this._getColors();n.some(function(n){e._checkActive(n.style)&&(t=n.name)});var o=this.props,r=o.expanded,a=o.tabIndex,u=o.toggleDropdown,c={activeStyle:t,onDismiss:u,showRemoveStylesItem:!1,styles:n};return i.default.createElement("div",{className:"ae-container ae-has-dropdown"},i.default.createElement("button",{"aria-expanded":r,className:"ae-toolbar-element",onClick:u,role:"combobox",tabIndex:a},i.default.createElement("span",null,i.default.createElement(l.default,{symbol:"color-picker"}))),r&&i.default.createElement(s.default,c))}},{key:"_applyStyle",value:function(e){var t=this,n=this.context.editor.get("nativeEditor"),o={element:"span",attributes:{class:e}},r=new CKEDITOR.style(o);n.getSelection().lock(),this._getColors().forEach(function(e){t._checkActive(e.style)&&n.removeStyle(new CKEDITOR.style(e.style))}),n.applyStyle(r),n.getSelection().unlock(),n.fire("actionPerformed",this)}},{key:"_checkActive",value:function(e){var t=this.context.editor.get("nativeEditor");return e=CKEDITOR.tools.merge({element:"span"},e),new CKEDITOR.style(e).checkActive(t.elementPath(),t)}},{key:"_getColors",value:function(){return this.props.styles||[{name:AlloyEditor.Strings.primary,style:{element:"span",attributes:{class:"text-primary"}},styleFn:this._applyStyle.bind(this,"text-primary")},{name:AlloyEditor.Strings.success,style:{element:"span",attributes:{class:"text-success"}},styleFn:this._applyStyle.bind(this,"text-success")},{name:AlloyEditor.Strings.danger,style:{element:"span",attributes:{class:"text-danger"}},styleFn:this._applyStyle.bind(this,"text-danger")},{name:AlloyEditor.Strings.warning,style:{element:"span",attributes:{class:"text-warning"}},styleFn:this._applyStyle.bind(this,"text-warning")},{name:AlloyEditor.Strings.info,style:{element:"span",attributes:{class:"text-info"}},styleFn:this._applyStyle.bind(this,"text-info")},{name:AlloyEditor.Strings.dark,style:{element:"span",attributes:{class:"text-dark"}},styleFn:this._applyStyle.bind(this,"text-dark")},{name:AlloyEditor.Strings.darkGray,style:{element:"span",attributes:{class:"text-gray-dark"}},styleFn:this._applyStyle.bind(this,"text-gray-dark")},{name:AlloyEditor.Strings.secondary,style:{element:"span",attributes:{class:"text-secondary"}},styleFn:this._applyStyle.bind(this,"text-secondary")},{name:AlloyEditor.Strings.light,style:{element:"span",attributes:{class:"text-dark"}},styleFn:this._applyStyle.bind(this,"text-light")},{name:AlloyEditor.Strings.lighter,style:{element:"span",attributes:{class:"text-dark"}},styleFn:this._applyStyle.bind(this,"text-lighter")},{name:AlloyEditor.Strings.white,style:{element:"span",attributes:{class:"text-dark"}},styleFn:this._applyStyle.bind(this,"text-white")}]}}]),t}();c.contextType=a.default,c.key="color",c.propTypes={expanded:r.default.bool,label:r.default.string,showRemoveStylesItem:r.default.bool,styles:r.default.arrayOf(r.default.object),tabIndex:r.default.number,toggleDropdown:r.default.func},t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=s(n(8)),i=s(n(0)),a=s(n(29)),l=s(n(1));function s(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),o(t,[{key:"render",value:function(){return this.props.renderExclusive?i.default.createElement(a.default,this.props):i.default.createElement("button",{"aria-label":AlloyEditor.Strings.video,className:"ae-button","data-type":"button-embed-video",onClick:this.props.requestExclusive,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.video},i.default.createElement(l.default,{symbol:"video"}))}}]),t}();u.key="embedVideo",u.propTypes={label:r.default.string,tabIndex:r.default.number},t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=s(n(0)),i=s(n(11)),a=s(n(28)),l=s(n(1));function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var c=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=o=u(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),o._requestExclusive=function(){o.props.requestExclusive(t.key)},u(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),o(t,[{key:"render",value:function(){return this.props.renderExclusive?r.default.createElement(a.default,this.props):r.default.createElement("button",{"aria-label":AlloyEditor.Strings.link,className:"ae-button","data-type":"button-embed",onClick:this._requestExclusive,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.link},r.default.createElement(l.default,{symbol:"plus"}))}}]),t}();c.defaultProps={keystroke:{fn:"_requestExclusive",keys:CKEDITOR.CTRL+CKEDITOR.SHIFT+76,name:"embed"}},c.key="embed",t.default=(0,i.default)(c)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=u(n(0)),i=u(n(14)),a=u(n(4)),l=u(n(7)),s=u(n(1));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),o(t,[{key:"render",value:function(){var e="ae-button "+this.getStateClasses();return r.default.createElement("button",{"aria-label":AlloyEditor.Strings.h1,"aria-pressed":-1!==e.indexOf("pressed"),className:e,"data-type":"button-h1",onClick:this.applyStyle,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.h1},r.default.createElement(s.default,{symbol:"h1"}))}}]),t}();c.defaultProps={style:{element:"h1"}},c.key="h1",t.default=(0,i.default)((0,a.default)((0,l.default)(c)))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=u(n(0)),i=u(n(14)),a=u(n(4)),l=u(n(7)),s=u(n(1));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),o(t,[{key:"render",value:function(){var e="ae-button "+this.getStateClasses();return r.default.createElement("button",{"aria-label":AlloyEditor.Strings.h2,"aria-pressed":-1!==e.indexOf("pressed"),className:e,"data-type":"button-h2",onClick:this.applyStyle,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.h2},r.default.createElement(s.default,{symbol:"h2"}))}}]),t}();c.defaultProps={style:{element:"h2"}},c.key="h2",t.default=(0,i.default)((0,a.default)((0,l.default)(c)))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=l(n(0)),i=l(n(3)),a=l(n(1));function l(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),o(t,[{key:"render",value:function(){return r.default.createElement("button",{"aria-label":AlloyEditor.Strings.horizontalrule,className:"ae-button","data-type":"button-hline",onClick:this.execCommand,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.horizontalrule},r.default.createElement(a.default,{symbol:"hr"}))}}]),t}();s.defaultProps={command:"horizontalrule"},s.key="hline",t.default=(0,i.default)(s)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=u(n(0)),i=u(n(3)),a=u(n(9)),l=u(n(4)),s=u(n(1));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),o(t,[{key:"render",value:function(){var e="ae-button "+this.getStateClasses();return r.default.createElement("button",{"aria-label":AlloyEditor.Strings.alignCenter,"aria-pressed":-1!==e.indexOf("pressed"),className:e,"data-type":"button-image-align-center",onClick:this.execCommand,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.alignCenter},r.default.createElement(s.default,{symbol:"align-image-center"}))}}]),t}();c.defaultProps={command:"justifycenter"},c.key="imageCenter",t.default=(0,i.default)((0,a.default)((0,l.default)(c)))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=u(n(0)),i=u(n(3)),a=u(n(9)),l=u(n(4)),s=u(n(1));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),o(t,[{key:"render",value:function(){var e="ae-button "+this.getStateClasses();return r.default.createElement("button",{"aria-label":AlloyEditor.Strings.alignLeft,"aria-pressed":-1!==e.indexOf("pressed"),className:e,"data-type":"button-image-align-left",onClick:this.execCommand,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.alignLeft},r.default.createElement(s.default,{symbol:"align-image-left"}))}}]),t}();c.defaultProps={command:"justifyleft"},c.key="imageLeft",t.default=(0,i.default)((0,a.default)((0,l.default)(c)))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=u(n(0)),i=u(n(3)),a=u(n(9)),l=u(n(4)),s=u(n(1));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),o(t,[{key:"render",value:function(){var e="ae-button "+this.getStateClasses();return r.default.createElement("button",{"aria-label":AlloyEditor.Strings.alignRight,"aria-pressed":-1!==e.indexOf("pressed"),className:e,"data-type":"button-image-align-right",onClick:this.execCommand,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.alignRight},r.default.createElement(s.default,{symbol:"align-image-right"}))}}]),t}();c.defaultProps={command:"justifyright"},c.key="imageRight",t.default=(0,i.default)((0,a.default)((0,l.default)(c)))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=l(n(0)),i=l(n(2)),a=l(n(1));function l(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleClick=function(){n.fileInput.current.click()},n._onInputChange=function(){var e=n.fileInput.current;if(e.files.length){var t=new FileReader,o=e.files[0];t.onload=function(e){var t=n.context.editor.get("nativeEditor");if(t.fire("beforeImageAdd",{imageFiles:o})){var r=CKEDITOR.dom.element.createFromHtml('<img src="'+e.target.result+'">');t.insertElement(r),t.fire("actionPerformed",n);var i={el:r,file:o};t.fire("imageAdd",i)}},t.readAsDataURL(o),e.value=""}},n.fileInput=r.default.createRef(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),o(t,[{key:"render",value:function(){return r.default.createElement("div",null,r.default.createElement("button",{"aria-label":AlloyEditor.Strings.image,className:"ae-button","data-type":"button-image",onClick:this.handleClick,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.image},r.default.createElement(a.default,{symbol:"document-image"})),r.default.createElement("input",{accept:"image/*",onChange:this._onInputChange,ref:this.fileInput,style:{display:"none"},type:"file"}))}}]),t}();s.contextType=i.default,s.key="imageFromFile",t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=u(n(0)),i=u(n(3)),a=u(n(9)),l=u(n(4)),s=u(n(1));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),o(t,[{key:"render",value:function(){var e="ae-button "+this.getStateClasses();return r.default.createElement("button",{"aria-label":AlloyEditor.Strings.indent,"aria-pressed":-1!==e.indexOf("pressed"),className:e,"data-type":"button-indent-block",onClick:this.execCommand,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.indent},r.default.createElement(s.default,{symbol:"indent-less"}))}}]),t}();c.defaultProps={command:"indent"},c.key="indentBlock",t.default=(0,i.default)((0,a.default)((0,l.default)(c)))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=c(n(0)),i=c(n(3)),a=c(n(11)),l=c(n(4)),s=c(n(7)),u=c(n(1));function c(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),o(t,[{key:"render",value:function(){var e="ae-button "+this.getStateClasses();return r.default.createElement("button",{"aria-label":AlloyEditor.Strings.italic,"aria-pressed":-1!==e.indexOf("pressed"),className:e,"data-type":"button-italic",onClick:this.execCommand,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.italic},r.default.createElement(u.default,{symbol:"italic"}))}}]),t}();f.defaultProps={command:"italic",keystroke:{fn:"execCommand",keys:CKEDITOR.CTRL+73,name:"italic"},style:"coreStyles_italic"},f.key="italic",t.default=(0,i.default)((0,a.default)((0,l.default)((0,s.default)(f))))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=l(n(0)),i=l(n(3)),a=l(n(1));function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var u=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=o=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),o._handleClick=function(){o.execCommand(null)},s(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),o(t,[{key:"render",value:function(){return r.default.createElement("button",{"aria-label":AlloyEditor.Strings.audio,className:"ae-button","data-type":"button-audio",onClick:this._handleClick,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.audio},r.default.createElement(a.default,{symbol:"audio"}))}}]),t}();u.defaultProps={command:"audioselector"},u.key="audio",t.default=(0,i.default)(u)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=l(n(0)),i=l(n(3)),a=l(n(1));function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var u=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=o=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),o._handleClick=function(){o.execCommand(null)},s(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),o(t,[{key:"render",value:function(){return r.default.createElement("button",{"aria-label":AlloyEditor.Strings.image,className:"ae-button","data-type":"button-image",onClick:this._handleClick,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.image},r.default.createElement(a.default,{symbol:"picture"}))}}]),t}();u.defaultProps={command:"imageselector"},u.key="image",t.default=(0,i.default)(u)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=l(n(0)),i=l(n(3)),a=l(n(1));function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var u=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=o=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),o._handleClick=function(){o.execCommand(null)},s(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),o(t,[{key:"render",value:function(){return r.default.createElement("button",{"aria-label":AlloyEditor.Strings.video,className:"ae-button","data-type":"button-video",onClick:this._handleClick,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.video},r.default.createElement(a.default,{symbol:"video"}))}}]),t}();u.defaultProps={command:"videoselector"},u.key="video",t.default=(0,i.default)(u)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=c(n(8)),i=c(n(0)),a=c(n(11)),l=c(n(19)),s=c(n(31)),u=c(n(34));function c(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),o(t,[{key:"render",value:function(){return this.props.renderExclusive?(this.props=this.mergeButtonCfgProps(),i.default.createElement(s.default,this.props)):i.default.createElement(u.default,this.props)}},{key:"_requestExclusive",value:function(){this.props.requestExclusive(t.key)}}]),t}();f.defaultProps={keystroke:{fn:"_requestExclusive",keys:CKEDITOR.CTRL+76,name:"linkBrowse"}},f.key="linkBrowse",f.propTypes={label:r.default.string,tabIndex:r.default.number},t.default=(0,l.default)((0,a.default)(f))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=u(n(0)),i=u(n(3)),a=u(n(4)),l=u(n(7)),s=u(n(1));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),o(t,[{key:"render",value:function(){var e="ae-button "+this.getStateClasses();return r.default.createElement("button",{"aria-label":AlloyEditor.Strings.numberedlist,"aria-pressed":-1!==e.indexOf("pressed"),className:e,"data-type":"button-ol",onClick:this.execCommand,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.numberedlist},r.default.createElement(s.default,{symbol:"list-ol"}))}}]),t}();c.defaultProps={command:"numberedlist",style:{element:"ol"}},c.key="ol",t.default=(0,i.default)((0,a.default)((0,l.default)(c)))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=u(n(0)),i=u(n(3)),a=u(n(9)),l=u(n(4)),s=u(n(1));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),o(t,[{key:"render",value:function(){var e="ae-button "+this.getStateClasses();return r.default.createElement("button",{"aria-label":AlloyEditor.Strings.outdent,"aria-pressed":-1!==e.indexOf("pressed"),className:e,"data-type":"button-outdent-block",onClick:this.execCommand,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.outdent},r.default.createElement(s.default,{symbol:"indent-more"}))}}]),t}();c.defaultProps={command:"outdent"},c.key="outdentBlock",t.default=(0,i.default)((0,a.default)((0,l.default)(c)))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=u(n(0)),i=u(n(3)),a=u(n(9)),l=u(n(4)),s=u(n(1));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),o(t,[{key:"render",value:function(){var e="ae-button "+this.getStateClasses();return r.default.createElement("button",{"aria-label":AlloyEditor.Strings.alignLeft,"aria-pressed":-1!==e.indexOf("pressed"),className:e,"data-type":"button-paragraph-align-left",onClick:this.execCommand,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.alignLeft},r.default.createElement(s.default,{symbol:"align-left"}))}}]),t}();c.defaultProps={command:"justifyleft"},c.key="paragraphLeft",t.default=(0,i.default)((0,a.default)((0,l.default)(c)))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=u(n(0)),i=u(n(3)),a=u(n(9)),l=u(n(4)),s=u(n(1));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),o(t,[{key:"render",value:function(){var e="ae-button "+this.getStateClasses();return r.default.createElement("button",{"aria-label":AlloyEditor.Strings.alignRight,"aria-pressed":-1!==e.indexOf("pressed"),className:e,"data-type":"button-paragraph-align-right",onClick:this.execCommand,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.alignRight},r.default.createElement(s.default,{symbol:"align-right"}))}}]),t}();c.defaultProps={command:"justifyright"},c.key="paragraphRight",t.default=(0,i.default)((0,a.default)((0,l.default)(c)))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=s(n(0)),i=s(n(2)),a=s(n(13)),l=s(n(1));function s(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),o(t,[{key:"render",value:function(){var e=void 0,n=void 0;this.props.expanded&&(n=t.key+"List",e=r.default.createElement(a.default,{commands:this._getCommands(),inlineIcons:!1,listId:n,onDismiss:this.props.toggleDropdown}));var o=this.context.editor.get("nativeEditor"),i=this._getCommands().filter(function(e){var t=o.getCommand(e.command);return!!t&&t.state===CKEDITOR.TRISTATE_ON}).pop(),s=i.icon;return r.default.createElement("div",{className:"ae-container-dropdown ae-container-dropdown-xsmall ae-has-dropdown"},r.default.createElement("button",{"aria-expanded":this.props.expanded,"aria-label":i.label,"aria-owns":n,className:"ae-toolbar-element",onClick:this.props.toggleDropdown,role:"combobox",tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.row},r.default.createElement("div",{className:"ae-container"},r.default.createElement(l.default,{symbol:s}),r.default.createElement(l.default,{symbol:"caret-bottom"}))),e)}},{key:"_getCommands",value:function(){return this.props.commands||[{command:"justifyleft",icon:"align-left",label:AlloyEditor.Strings.alignLeft},{command:"justifycenter",icon:"align-center",label:AlloyEditor.Strings.alignCenter},{command:"justifyright",icon:"align-right",label:AlloyEditor.Strings.alignRight},{command:"justifyblock",icon:"align-justify",label:AlloyEditor.Strings.alignJustify}]}}]),t}();u.contextType=i.default,u.key="paragraphAlign",t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=u(n(0)),i=u(n(3)),a=u(n(9)),l=u(n(4)),s=u(n(1));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),o(t,[{key:"render",value:function(){var e="ae-button "+this.getStateClasses();return r.default.createElement("button",{"aria-label":AlloyEditor.Strings.alignCenter,"aria-pressed":-1!==e.indexOf("pressed"),className:e,"data-type":"button-paragraph-center",onClick:this.execCommand,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.alignCenter},r.default.createElement(s.default,{symbol:"align-center"}))}}]),t}();c.defaultProps={command:"justifycenter"},c.key="paragraphCenter",t.default=(0,i.default)((0,a.default)((0,l.default)(c)))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=u(n(0)),i=u(n(3)),a=u(n(9)),l=u(n(4)),s=u(n(1));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),o(t,[{key:"render",value:function(){var e="ae-button "+this.getStateClasses();return r.default.createElement("button",{"aria-label":AlloyEditor.Strings.alignJustify,"aria-pressed":-1!==e.indexOf("pressed"),className:e,"data-type":"button-paragraph-justify",onClick:this.execCommand,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.alignJustify},r.default.createElement(s.default,{symbol:"align-justify"}))}}]),t}();c.defaultProps={command:"justifyblock"},c.key="paragraphJustify",t.default=(0,i.default)((0,a.default)((0,l.default)(c)))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=u(n(0)),i=u(n(3)),a=u(n(4)),l=u(n(7)),s=u(n(1));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),o(t,[{key:"render",value:function(){var e="ae-button "+this.getStateClasses();return r.default.createElement("button",{"aria-label":AlloyEditor.Strings.quote,"aria-pressed":-1!==e.indexOf("pressed"),className:e,"data-type":"button-quote",onClick:this.execCommand,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.quote},r.default.createElement(s.default,{symbol:"quote-right"}))}}]),t}();c.defaultProps={command:"blockquote",style:{element:"blockquote"}},c.key="quote",t.default=(0,i.default)((0,a.default)((0,l.default)(c)))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=l(n(0)),i=l(n(3)),a=l(n(1));function l(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),o(t,[{key:"render",value:function(){return r.default.createElement("button",{"aria-label":AlloyEditor.Strings.removeformat,className:"ae-button","data-type":"button-removeformat",onClick:this.execCommand,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.removeformat},r.default.createElement(a.default,{symbol:"remove-style"}))}}]),t}();s.defaultProps={command:"removeFormat"},s.key="removeFormat",t.default=(0,i.default)(s)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=l(n(0)),i=l(n(3)),a=l(n(1));function l(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),o(t,[{key:"render",value:function(){return r.default.createElement("button",{"aria-label":AlloyEditor.Strings.removeImage,"aria-pressed":!1,className:"ae-button",onClick:this.execCommand,title:AlloyEditor.Strings.removeImage},r.default.createElement(a.default,{symbol:"times-circle"}))}}]),t}();s.defaultProps={command:"removeImage"},s.key="removeImage",t.default=(0,i.default)(s)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){return e&&e.__esModule?e:{default:e}}(n(0));function r(e){return o.default.createElement("span",{className:"ae-separator"})}r.key="separator",t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=u(n(8)),i=u(n(0)),a=u(n(2)),l=u(n(1)),s=u(n(15));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),o(t,[{key:"render",value:function(){var e=this,t="1.0x",n=this._getSpacings();n.forEach(function(n){e._checkActive(n.style)&&(t=n.name)});var o=this.props,r=o.editor,a=o.expanded,u=o.tabIndex,c=o.toggleDropdown,f={activeStyle:t,editor:r,onDismiss:c,showRemoveStylesItem:!1,styles:n};return i.default.createElement("div",{className:"ae-container ae-container-dropdown-small ae-has-dropdown"},i.default.createElement("button",{"aria-expanded":a,className:"ae-toolbar-element",onClick:c,role:"combobox",tabIndex:u},i.default.createElement("span",null,i.default.createElement(l.default,{symbol:"separator"})," ",t)),a&&i.default.createElement(s.default,f))}},{key:"_applyStyle",value:function(e){var t=this,n=this.context.editor.get("nativeEditor"),o={element:"div",attributes:{class:e}},r=new CKEDITOR.style(o);n.getSelection().lock(),this._getSpacings().forEach(function(e){t._checkActive(e.style)&&n.removeStyle(new CKEDITOR.style(e.style))}),n.applyStyle(r),n.getSelection().unlock(),n.fire("actionPerformed",this)}},{key:"_checkActive",value:function(e){var t=this.context.editor.get("nativeEditor"),n=!0,o=t.elementPath();return o&&o.lastElement?e.attributes.class.split(" ").forEach(function(e){n=n&&o.lastElement.hasClass(e)}):n=!1,n}},{key:"_getSpacings",value:function(){return this.props.styles||[{name:"1.0x",style:{element:"div",attributes:{class:""},type:1},styleFn:this._applyStyle.bind(this,"")},{name:"1.5x",style:{element:"div",attributes:{class:"mt-1 mb-1"},type:1},styleFn:this._applyStyle.bind(this,"mt-1 mb-1")},{name:"2.0x",style:{element:"div",attributes:{class:"mt-2 mb-2"},type:1},styleFn:this._applyStyle.bind(this,"mt-2 mb-2")},{name:"3.0x",style:{element:"div",attributes:{class:"mt-3 mb-3"},type:1},styleFn:this._applyStyle.bind(this,"mt-3 mb-3")},{name:"4.0x",style:{element:"div",attributes:{class:"mt-4 mb-4"},type:1},styleFn:this._applyStyle.bind(this,"mt-4 mb-4")},{name:"5.0x",style:{element:"div",attributes:{class:"mt-5 mb-5"},type:1},styleFn:this._applyStyle.bind(this,"mt-5 mb-5")}]}}]),t}();c.contextType=a.default,c.key="spacing",c.propTypes={expanded:r.default.bool,label:r.default.string,showRemoveStylesItem:r.default.bool,styles:r.default.arrayOf(r.default.object),tabIndex:r.default.number,toggleDropdown:r.default.func},t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=u(n(0)),i=u(n(3)),a=u(n(4)),l=u(n(7)),s=u(n(1));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),o(t,[{key:"render",value:function(){var e="ae-button "+this.getStateClasses();return r.default.createElement("button",{"aria-label":AlloyEditor.Strings.strike,"aria-pressed":-1!==e.indexOf("pressed"),className:e,"data-type":"button-strike",onClick:this.execCommand,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.strike},r.default.createElement(s.default,{symbol:"strikethrough"}))}}]),t}();c.defaultProps={command:"strike",style:"coreStyles_strike"},c.key="strike",t.default=(0,i.default)((0,a.default)((0,l.default)(c)))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=s(n(0)),i=s(n(2)),a=s(n(1)),l=s(n(15));function s(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),o(t,[{key:"render",value:function(){var e=this,t=AlloyEditor.Strings.normal,n=this._getStyles();n.forEach(function(n){e._checkActive(n.style)&&(t=n.name)});var o=void 0;return this.props.expanded&&(o=r.default.createElement(l.default,{activeStyle:t,onDismiss:this.props.toggleDropdown,showRemoveStylesItem:this.props.showRemoveStylesItem,styles:n})),r.default.createElement("div",{className:"ae-container-dropdown ae-has-dropdown"},r.default.createElement("button",{"aria-expanded":this.props.expanded,"aria-label":AlloyEditor.Strings.styles+" "+t,className:"ae-toolbar-element",onClick:this.props.toggleDropdown,role:"combobox",tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.styles+" "+t},r.default.createElement("div",{className:"ae-container"},r.default.createElement("span",{className:"ae-container-dropdown-selected-item"},t),r.default.createElement(a.default,{symbol:"caret-bottom"}))),o)}},{key:"_checkActive",value:function(e){var t=this.context.editor.get("nativeEditor");return e=CKEDITOR.tools.merge({element:"span"},e),new CKEDITOR.style(e).checkActive(t.elementPath(),t)}},{key:"_getStyles",value:function(){return this.props.styles||[{name:AlloyEditor.Strings.h1,style:{element:"h1"}},{name:AlloyEditor.Strings.h2,style:{element:"h2"}},{name:AlloyEditor.Strings.formatted,style:{element:"pre"}},{name:AlloyEditor.Strings.cite,style:{element:"cite"}},{name:AlloyEditor.Strings.code,style:{element:"code"}}]}}]),t}();u.contextType=i.default,u.key="styles",t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=u(n(0)),i=u(n(3)),a=u(n(4)),l=u(n(7)),s=u(n(1));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),o(t,[{key:"render",value:function(){var e="ae-button "+this.getStateClasses();return r.default.createElement("button",{"aria-label":AlloyEditor.Strings.subscript,"aria-pressed":-1!==e.indexOf("pressed"),className:e,"data-type":"button-subscript",onClick:this.execCommand,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.subscript},r.default.createElement(s.default,{symbol:"subscript"}))}}]),t}();c.defaultProps={command:"subscript",style:"coreStyles_subscript"},c.key="subscript",t.default=(0,i.default)((0,a.default)((0,l.default)(c)))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=u(n(0)),i=u(n(3)),a=u(n(4)),l=u(n(7)),s=u(n(1));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),o(t,[{key:"render",value:function(){var e="ae-button "+this.getStateClasses();return r.default.createElement("button",{"aria-label":AlloyEditor.Strings.superscript,"aria-pressed":-1!==e.indexOf("pressed"),className:e,"data-type":"button-superscript",onClick:this.execCommand,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.superscript},r.default.createElement(s.default,{symbol:"superscript"}))}}]),t}();c.defaultProps={command:"superscript",style:"coreStyles_superscript"},c.key="superscript",t.default=(0,i.default)((0,a.default)((0,l.default)(c)))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=l(n(0)),i=l(n(13)),a=l(n(1));function l(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),o(t,[{key:"render",value:function(){var e=void 0,n=void 0;return this.props.expanded&&(n=t.key+"List",e=r.default.createElement(i.default,{commands:this._getCommands(),listId:n,onDismiss:this.props.toggleDropdown})),r.default.createElement("div",{className:"ae-container ae-has-dropdown"},r.default.createElement("button",{"aria-expanded":this.props.expanded,"aria-label":AlloyEditor.Strings.cell,"aria-owns":n,className:"ae-button",onClick:this.props.toggleDropdown,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.cell},r.default.createElement(a.default,{symbol:"add-cell"})),e)}},{key:"_getCommands",value:function(){return this.props.commands||[{command:"cellInsertBefore",label:AlloyEditor.Strings.cellInsertBefore},{command:"cellInsertAfter",label:AlloyEditor.Strings.cellInsertAfter},{command:"cellDelete",label:AlloyEditor.Strings.cellDelete},{command:"cellMerge",label:AlloyEditor.Strings.cellMerge},{command:"cellMergeDown",label:AlloyEditor.Strings.cellMergeDown},{command:"cellMergeRight",label:AlloyEditor.Strings.cellMergeRight},{command:"cellHorizontalSplit",label:AlloyEditor.Strings.cellSplitHorizontal},{command:"cellVerticalSplit",label:AlloyEditor.Strings.cellSplitVertical}]}}]),t}();s.key="tableCell",t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=l(n(0)),i=l(n(13)),a=l(n(1));function l(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),o(t,[{key:"render",value:function(){var e=void 0,n=void 0;return this.props.expanded&&(n=t.key+"List",e=r.default.createElement(i.default,{commands:this._getCommands(),listId:n,onDismiss:this.props.toggleDropdown})),r.default.createElement("div",{className:"ae-container ae-has-dropdown"},r.default.createElement("button",{"aria-expanded":this.props.expanded,"aria-label":AlloyEditor.Strings.column,"aria-owns":n,className:"ae-button",onClick:this.props.toggleDropdown,role:"listbox",tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.column},r.default.createElement(a.default,{symbol:"add-column"})),e)}},{key:"_getCommands",value:function(){return this.props.commands||[{command:"columnInsertBefore",label:AlloyEditor.Strings.columnInsertBefore},{command:"columnInsertAfter",label:AlloyEditor.Strings.columnInsertAfter},{command:"columnDelete",label:AlloyEditor.Strings.columnDelete}]}}]),t}();s.key="tableColumn",t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=s(n(0)),i=s(n(2)),a=s(n(13)),l=s(n(1));function s(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),o(t,[{key:"render",value:function(){var e=void 0,n=void 0;this.props.expanded&&(n=t.key+"List",e=r.default.createElement(a.default,{commands:this._getCommands(),listId:n,onDismiss:this.props.toggleDropdown}));var o=new CKEDITOR.Table(this.context.editor.get("nativeEditor")).getHeading(),i=AlloyEditor.Strings.headers+":",s=AlloyEditor.Strings["headers"+o];return r.default.createElement("div",{className:"ae-container-dropdown-xl ae-has-dropdown"},r.default.createElement("button",{"aria-expanded":this.props.expanded,"aria-label":"",className:"ae-toolbar-element",onClick:this.props.toggleDropdown,role:"combobox",tabIndex:this.props.tabIndex,title:""},r.default.createElement("div",{className:"ae-container"},r.default.createElement("span",{className:"ae-container-dropdown-selected-item"},i," ",r.default.createElement("strong",null,s)),r.default.createElement(l.default,{symbol:"caret-bottom"}))),e)}},{key:"_getCommands",value:function(){return this.props.commands||[{command:"tableHeadingNone",label:AlloyEditor.Strings.headersNone},{command:"tableHeadingRow",label:AlloyEditor.Strings.headersRow},{command:"tableHeadingColumn",label:AlloyEditor.Strings.headersColumn},{command:"tableHeadingBoth",label:AlloyEditor.Strings.headersBoth}]}}]),t}();u.contextType=i.default,u.key="tableHeading",t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=l(n(0)),i=l(n(2)),a=l(n(1));function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var u=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=o=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),o._removeTable=function(){var e=o.context.editor.get("nativeEditor");new CKEDITOR.Table(e).remove(),e.fire("actionPerformed",o)},s(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),o(t,[{key:"render",value:function(){return r.default.createElement("button",{"aria-label":AlloyEditor.Strings.deleteTable,className:"ae-button","data-type":"button-table-remove",onClick:this._removeTable,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.deleteTable},r.default.createElement(a.default,{symbol:"trash"}))}}]),t}();u.contextType=i.default,u.key="tableRemove",t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=l(n(0)),i=l(n(13)),a=l(n(1));function l(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),o(t,[{key:"render",value:function(){var e=void 0,n=void 0;return this.props.expanded&&(n=t.key+"List",e=r.default.createElement(i.default,{commands:this._getCommands(),listId:n,onDismiss:this.props.toggleDropdown})),r.default.createElement("div",{className:"ae-container ae-has-dropdown"},r.default.createElement("button",{"aria-expanded":this.props.expanded,"aria-label":AlloyEditor.Strings.row,"aria-owns":n,className:"ae-button",onClick:this.props.toggleDropdown,role:"combobox",tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.row},r.default.createElement(a.default,{symbol:"add-row"})),e)}},{key:"_getCommands",value:function(){return this.props.commands||[{command:"rowInsertBefore",label:AlloyEditor.Strings.rowInsertBefore},{command:"rowInsertAfter",label:AlloyEditor.Strings.rowInsertAfter},{command:"rowDelete",label:AlloyEditor.Strings.rowDelete}]}}]),t}();s.key="tableRow",t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=l(n(0)),i=l(n(1)),a=l(n(35));function l(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),o(t,[{key:"render",value:function(){return this.props.renderExclusive?r.default.createElement(a.default,this.props):r.default.createElement("button",{"aria-label":AlloyEditor.Strings.table,className:"ae-button","data-type":"button-table",onClick:this.props.requestExclusive,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.table},r.default.createElement(i.default,{symbol:"table"}))}}]),t}();s.key="table",t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=s(n(0)),i=s(n(2)),a=s(n(4)),l=s(n(1));function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var c=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=o=u(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),o.handleClick=function(){var e=o.context.editor.get("nativeEditor"),t=new CKEDITOR.Link(e);o.isActive()?t.remove(t.getFromSelection()):t.create(o._getHref(),{class:"ae-twitter-link",target:"_blank"}),e.fire("actionPerformed",o)},u(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),o(t,[{key:"isActive",value:function(){var e=new CKEDITOR.Link(this.context.editor.get("nativeEditor")).getFromSelection();return e&&-1!==e.getAttribute("href").indexOf("twitter.com/intent/tweet")}},{key:"render",value:function(){var e="ae-button "+this.getStateClasses();return r.default.createElement("button",{"aria-label":AlloyEditor.Strings.twitter,className:e,"data-type":"button-twitter",onClick:this.handleClick,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.twitter},r.default.createElement(l.default,{symbol:"twitter"}))}},{key:"_getHref",value:function(){var e=this.context.editor.get("nativeEditor").getSelection().getSelectedText().substring(0,280),t=this.props.url,n=this.props.via,o="https://twitter.com/intent/tweet?text="+e;return t&&(o+="&url="+t),n&&(o+="&via="+n),o}}]),t}();c.contextType=i.default,c.key="twitter",t.default=(0,a.default)(c)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=u(n(0)),i=u(n(3)),a=u(n(4)),l=u(n(7)),s=u(n(1));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),o(t,[{key:"render",value:function(){var e="ae-button "+this.getStateClasses();return r.default.createElement("button",{"aria-label":AlloyEditor.Strings.bulletedlist,"aria-pressed":-1!==e.indexOf("pressed"),className:e,"data-type":"button-ul",onClick:this.execCommand,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.bulletedlist},r.default.createElement(s.default,{symbol:"list-ul"}))}}]),t}();c.defaultProps={command:"bulletedlist",style:{element:"ul"}},c.key="ul",t.default=(0,i.default)((0,a.default)((0,l.default)(c)))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=c(n(0)),i=c(n(3)),a=c(n(11)),l=c(n(4)),s=c(n(7)),u=c(n(1));function c(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),o(t,[{key:"render",value:function(){var e="ae-button "+this.getStateClasses();return r.default.createElement("button",{"aria-label":AlloyEditor.Strings.underline,"aria-pressed":-1!==e.indexOf("pressed"),className:e,"data-type":"button-underline",onClick:this.execCommand,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.underline},r.default.createElement(u.default,{symbol:"underline"}))}}]),t}();f.defaultProps={command:"underline",keystroke:{fn:"execCommand",keys:CKEDITOR.CTRL+85,name:"underline"},style:"coreStyles_underline"},f.key="underline",t.default=(0,i.default)((0,a.default)((0,l.default)((0,s.default)(f))))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(94);Object.defineProperty(t,"ButtonActionStyle",{enumerable:!0,get:function(){return b(o).default}});var r=n(95);Object.defineProperty(t,"ButtonCommandActive",{enumerable:!0,get:function(){return b(r).default}});var i=n(96);Object.defineProperty(t,"ButtonCommand",{enumerable:!0,get:function(){return b(i).default}});var a=n(97);Object.defineProperty(t,"ButtonKeystroke",{enumerable:!0,get:function(){return b(a).default}});var l=n(98);Object.defineProperty(t,"ButtonProps",{enumerable:!0,get:function(){return b(l).default}});var s=n(99);Object.defineProperty(t,"ButtonStateClasses",{enumerable:!0,get:function(){return b(s).default}});var u=n(100);Object.defineProperty(t,"ButtonStyle",{enumerable:!0,get:function(){return b(u).default}});var c=n(101);Object.defineProperty(t,"ToolbarButtons",{enumerable:!0,get:function(){return b(c).default}});var f=n(102);Object.defineProperty(t,"WidgetArrowBox",{enumerable:!0,get:function(){return b(f).default}});var d=n(103);Object.defineProperty(t,"WidgetDropdown",{enumerable:!0,get:function(){return b(d).default}});var p=n(104);Object.defineProperty(t,"WidgetExclusive",{enumerable:!0,get:function(){return b(p).default}});var h=n(105);Object.defineProperty(t,"WidgetFocusManager",{enumerable:!0,get:function(){return b(h).default}});var m=n(36);Object.defineProperty(t,"WidgetInteractionPoint",{enumerable:!0,get:function(){return b(m).default}});var y=n(106);function b(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"WidgetPosition",{enumerable:!0,get:function(){return b(y).default}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){return e&&e.__esModule?e:{default:e}}(n(5));var r={applyStyle:function(){if(o.default.isFunction(this.isActive)&&o.default.isFunction(this.getStyle)){var e=this.props.editor.get("nativeEditor");e.getSelection().lock(),this.isActive()?e.removeStyle(this.getStyle()):e.applyStyle(this.getStyle()),e.getSelection().unlock(),e.fire("actionPerformed",this)}}};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={isActive:function(){var e=this.props.editor.get("nativeEditor").getCommand(this.props.command);return!!e&&e.state===CKEDITOR.TRISTATE_ON}};t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){return e&&e.__esModule?e:{default:e}}(n(8));var r={propTypes:{command:o.default.string.isRequired,modifiesSelection:o.default.bool},execCommand:function(e){var t=this.props.editor.get("nativeEditor");t.execCommand(this.props.command,e),this.props.modifiesSelection&&t.selectionChange(!0),t.fire("actionPerformed",this)}};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(8)),r=i(n(5));function i(e){return e&&e.__esModule?e:{default:e}}var a={propTypes:{keystroke:o.default.object.isRequired},componentWillMount:function(){var e=this.props.editor.get("nativeEditor"),t=this.props.keystroke,n=t.name||(1e9*Math.random()>>>0).toString(),o=e.getCommand(n);o||(o=new CKEDITOR.command(e,{exec:function(e){var n=t.fn;r.default.isString(n)?this[n].call(this,e):r.default.isFunction(n)&&n.call(this,e)}.bind(this)}),e.addCommand(n,o)),this._defaultKeystrokeCommand=e.keystrokeHandler.keystrokes[t.keys],e.setKeystroke(t.keys,n)},componentWillUnmount:function(){this.props.editor.get("nativeEditor").setKeystroke(this.props.keystroke.keys,this._defaultKeystrokeCommand)}};t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(8)),r=i(n(18));function i(e){return e&&e.__esModule?e:{default:e}}var a={propTypes:{editor:o.default.object.isRequired},mergeButtonCfgProps:function(e){e=e||this.props;var t=this.props.editor.get("nativeEditor").config.buttonCfg||{};return CKEDITOR.tools.merge(e,t[r.default.key])}};t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){return e&&e.__esModule?e:{default:e}}(n(5));var r={getStateClasses:function(){var e="";return o.default.isFunction(this.isActive)&&this.isActive()&&(e+="ae-button-pressed"),o.default.isFunction(this.isDisabled)&&this.isDisabled()&&(e+=" ae-button-disabled"),e}};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(8)),r=i(n(5));function i(e){return e&&e.__esModule?e:{default:e}}var a={propTypes:{style:o.default.oneOfType([o.default.object,o.default.string]),styleFn:o.default.func},componentWillMount:function(){var e=this.props.style;if(r.default.isString(e)){for(var t=e.split("."),n=this.props.editor.get("nativeEditor").config,o=t.shift();o&&r.default.isObject(n)&&r.default.isObject(n[o]);)n=n[o],o=t.shift();r.default.isObject(n)&&(e=n)}this._style=new CKEDITOR.style(e)},componentWillUnmount:function(){this._style=null},getStyle:function(){return this._style},isActive:function(){var e=this.props.editor.get("nativeEditor"),t=e.elementPath();return this.getStyle().checkActive(t,e)}};t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(0)),r=i(n(5));function i(e){return e&&e.__esModule?e:{default:e}}var a={getToolbarButtonGroups:function(e,t){var n=this;return r.default.isFunction(e)&&(e=e.call(this)||[]),e.reduce(function(o,r){return Array.isArray(r)?(o.push(n.getToolbarButtons(r,t)),o):n.getToolbarButtons(e,t)},[])},getToolbarButtons:function(e,t){var n={},i=this.props.editor.get("nativeEditor").config.buttonCfg||{};return r.default.isFunction(e)&&(e=e.call(this)||[]),this.filterExclusive(e.filter(function(e){return e&&(AlloyEditor.Buttons[e]||AlloyEditor.Buttons[e.name])}).map(function(e){return r.default.isString(e)?(n[e]=i[e],e=AlloyEditor.Buttons[e]):r.default.isString(e.name)&&(n[AlloyEditor.Buttons[e.name].key]=CKEDITOR.tools.merge(i[e],e.cfg),e=AlloyEditor.Buttons[e.name]),e})).map(function(e,r){var i=this.mergeExclusiveProps({editor:this.props.editor,key:"separator"!==e.key?e.key:e.key+"-"+r,tabKey:e.key,tabIndex:this.props.trigger&&this.props.trigger.props.tabKey===e.key?0:-1,trigger:this.props.trigger},e.key);return i=this.mergeDropdownProps(i,e.key),t&&(i=CKEDITOR.tools.merge(i,t)),i=CKEDITOR.tools.merge(i,n[e.key]),o.default.createElement(e,i)},this)}};t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){return e&&e.__esModule?e:{default:e}}(n(5));var r={getArrowBoxClasses:function(){var e="ae-arrow-box";return o.default.isFunction(this.getInteractionPoint)&&this.getInteractionPoint()&&(this.getInteractionPoint().direction===CKEDITOR.SELECTION_TOP_TO_BOTTOM?e+=" ae-arrow-box-top":e+=" ae-arrow-box-bottom"),e}};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){return e&&e.__esModule?e:{default:e}}(n(6));var r={componentWillReceiveProps:function(e){this.setState({dropdownTrigger:null,itemDropdown:null})},getInitialState:function(){return{dropdownTrigger:null,itemDropdown:null}},mergeDropdownProps:function(e,t){return CKEDITOR.tools.merge(e,{expanded:this.state.itemDropdown===t,tabIndex:this.state.dropdownTrigger===t?0:-1,toggleDropdown:this.toggleDropdown.bind(this,t)})},toggleDropdown:function(e,t){this.setState({dropdownTrigger:e,itemDropdown:e!==this.state.itemDropdown?e:null},function(){this.state.itemDropdown||(this.moveFocus?this.moveFocus(t):o.default.findDOMNode(this).focus())})}};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={cancelExclusive:function(e){this.state.itemExclusive===e&&this.setState({itemExclusive:null})},componentWillReceiveProps:function(e){this.setState({itemExclusive:null})},filterExclusive:function(e){var t=this;return e.filter(function(e){return t.state.itemExclusive?t.state.itemExclusive===e.key?e:void 0:e})},mergeExclusiveProps:function(e,t){return CKEDITOR.tools.merge(e,{cancelExclusive:this.cancelExclusive.bind(this,t),renderExclusive:this.state.itemExclusive===t,requestExclusive:this.requestExclusive.bind(this,t)})},requestExclusive:function(e){this.setState({itemExclusive:e})}};t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a(n(8)),r=a(n(6)),i=a(n(5));function a(e){return e&&e.__esModule?e:{default:e}}var l={propTypes:{onDismiss:o.default.func,circular:o.default.bool.isRequired,focusFirstChild:o.default.bool,descendants:o.default.string.isRequired,keys:o.default.object.isRequired},componentDidMount:function(){this._refresh()},componentDidUpdate:function(){this._refresh()},focus:function(e){if((!e||this._isValidTarget(e.target))&&this._descendants&&this._descendants.length){var t=this._descendants[this._activeDescendant];document.activeElement===t||this.props.focusFirstChild||-1===this._descendants.indexOf(document.activeElement)&&t.focus(),e&&(e.stopPropagation(),e.preventDefault())}},handleKey:function(e){if(this._isValidTarget(e.target)&&this._descendants){var t=this._getFocusAction(e);t.type&&(e.stopPropagation(),e.preventDefault(),1===t.type&&this._moveFocus(t.direction),2===t.type&&this.props.onDismiss(t.direction))}},moveFocus:function(e){e=i.default.isNumber(e)?e:0,this._moveFocus(e)},_getFocusAction:function(e){var t={type:0};if(this.props.keys){var n=this._getFocusMoveDirection(e);n&&(t.direction=n,t.type=1);var o=this._getFocusDismissAction(e,n);o.dismiss&&(t.direction=o.direction,t.type=2)}return t},_getFocusDismissAction:function(e,t){var n={direction:t,dismiss:!1};return this.props.onDismiss&&(this._isValidKey(e.keyCode,this.props.keys.dismiss)&&(n.dismiss=!0),this._isValidKey(e.keyCode,this.props.keys.dismissNext)&&(n.dismiss=!0,n.direction=1),this._isValidKey(e.keyCode,this.props.keys.dismissPrev)&&(n.dismiss=!0,n.direction=-1),n.dismiss||this.props.circular||!t||(n.dismiss=-1===t&&0===this._activeDescendant||1===t&&this._activeDescendant===this._descendants.length-1)),n},_getFocusMoveDirection:function(e){var t=0;return this._isValidKey(e.keyCode,this.props.keys.next)&&(t=1),this._isValidKey(e.keyCode,this.props.keys.prev)&&(t=-1),e.shifKey&&(t*=-1),t},_isValidKey:function(e,t){return i.default.isArray(t)?-1!==t.indexOf(e):e===t},_isValidTarget:function(e){var t=e.tagName.toLowerCase();return"input"!==t&&"select"!==t&&"textarea"!==t},_moveFocus:function(e){var t=this._descendants.length,n=this._descendants[this._activeDescendant];n.setAttribute("tabIndex",-1),this._activeDescendant+=e,this.props.circular?this._activeDescendant=(this._activeDescendant%t+t)%t:this._activeDescendant=Math.max(Math.min(this._activeDescendant,t-1),0),(n=this._descendants[this._activeDescendant]).setAttribute("tabIndex",0),n.focus()},_refresh:function(){var e=this,t=r.default.findDOMNode(this);if(t){var n=t.querySelectorAll(this.props.descendants),o=[];this._descendants=[],Array.prototype.slice.call(n).forEach(function(t){t.getAttribute("data-tabindex")?o.push(t):e._descendants.push(t)}),o=o.sort(function(e,t){return i.default.toInt(e.getAttribute("data-tabindex"))>i.default.toInt(t.getAttribute("data-tabindex"))}),this._descendants=o.concat(this._descendants),this._activeDescendant=0,this._descendants.some(function(t,n){if("0"===t.getAttribute("tabindex"))return e._activeDescendant=n,e.focus(),!0})}}};t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(8)),r=i(n(6));function i(e){return e&&e.__esModule?e:{default:e}}var a={mixins:[i(n(36)).default],propTypes:{constrainToViewport:o.default.bool,gutter:o.default.object},getDefaultProps:function(){return{gutter:{left:0,top:10},constrainToViewport:!0}},cancelAnimation:function(){window.cancelAnimationFrame&&window.cancelAnimationFrame(this._animationFrameId)},getConstrainedPosition:function(e,t){t=t||new CKEDITOR.dom.window(window).getViewPaneSize();var n=e.left,o=e.top;return e.left+e.width>t.width&&(n-=e.left+e.width-t.width),o<0&&(o=0),{x:n,y:o}},getWidgetXYPoint:function(e,t,n){var o=r.default.findDOMNode(this),i=this.props.gutter,a=o.offsetWidth/2;return n===CKEDITOR.SELECTION_TOP_TO_BOTTOM||n===CKEDITOR.SELECTION_BOTTOM_TO_TOP?(e=e-i.left-a,t=n===CKEDITOR.SELECTION_TOP_TO_BOTTOM?t+i.top:t-o.offsetHeight-i.top):n!==CKEDITOR.SELECTION_LEFT_TO_RIGHT&&n!==CKEDITOR.SELECTION_RIGHT_TO_LEFT||(e=n===CKEDITOR.SELECTION_LEFT_TO_RIGHT?e+i.left+o.offsetHeight/2:e-3*o.offsetHeight/2-i.left,t=t-i.top-o.offsetHeight/2),e<0&&(e=0),e>document.body.offsetWidth-a&&(e=document.body.offsetWidth-a),t<0&&(t=0),[e,t]},isVisible:function(){var e=r.default.findDOMNode(this);return!!e&&new CKEDITOR.dom.element(e).hasClass("alloy-editor-visible")},moveToPoint:function(e,t){var n=new CKEDITOR.dom.element(r.default.findDOMNode(this));n.setStyles({left:e[0]+"px",top:e[1]+"px",opacity:0,pointerEvents:"none"}),n.removeClass("alloy-editor-invisible"),this._animate(function(){n.addClass("ae-toolbar-transition"),n.addClass("alloy-editor-visible"),n.setStyles({left:t[0]+"px",top:t[1]+"px",opacity:1}),setTimeout(function(){n.setStyles({pointerEvents:""})},150)})},show:function(){var e=r.default.findDOMNode(this),t=this.props.editor.get("uiNode"),n=t?t.scrollTop:0;if(!this.isVisible()&&e){var o=this.getInteractionPoint();if(o){var i,a,l=new CKEDITOR.dom.element(e),s=void 0,u=void 0;if(s=i=parseFloat(l.getStyle("left")),u=parseFloat(l.getStyle("top")),this.props.constrainToViewport){var c=this.getConstrainedPosition({height:parseFloat(e.offsetHeight),left:s,top:u,width:parseFloat(e.offsetWidth)});s=c.x,u=c.y}a=o.direction===CKEDITOR.SELECTION_TOP_TO_BOTTOM?this.props.selectionData.region.bottom+n:this.props.selectionData.region.top+n,this.moveToPoint([i,a],[s,u])}}},updatePosition:function(){var e=this.getInteractionPoint(),t=r.default.findDOMNode(this);if(e&&t){var n=this.props.editor.get("uiNode")||document.body,o=getComputedStyle(n),i=parseInt(o.getPropertyValue("margin-left"),10),a=parseInt(o.getPropertyValue("margin-right"),10),l=i+n.clientWidth+a,s="BODY"!==n.tagName?n.scrollTop:0,u=this.getWidgetXYPoint(e.x,e.y,e.direction);u[1]+=s,u[0]<0&&(u[0]=0),u[0]>l-t.offsetWidth&&(u[0]=l-t.offsetWidth),new CKEDITOR.dom.element(t).setStyles({left:u[0]+"px",top:u[1]+"px"})}},_animate:function(e){window.requestAnimationFrame?this._animationFrameId=window.requestAnimationFrame(e):e()}};t.default=a},function(e,t,n){"use strict";var o;Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(108)),i=a(n(109));function a(e){return e&&e.__esModule?e:{default:e}}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.default=(l(o={},r.default.key,r.default),l(o,i.default.key,i.default),o)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=d(n(0)),i=d(n(6)),a=d(n(2)),l=d(n(20)),s=d(n(16)),u=d(n(17)),c=d(n(10)),f=d(n(1));function d(e){return e&&e.__esModule?e:{default:e}}var p=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),o(t,[{key:"componentDidMount",value:function(){this._updatePosition()}},{key:"componentDidUpdate",value:function(e,t){this._updatePosition(),this.props.renderExclusive&&this.focus()}},{key:"render",value:function(){if(!this.state.itemExclusive&&this.props.editorEvent&&this.props.editorEvent.data.nativeEvent.target&&!this.props.editorEvent.data.nativeEvent.target.isContentEditable)return null;var e=this._getButtons(),t=this._getToolbarClassName();return r.default.createElement("div",{"aria-label":AlloyEditor.Strings.add,className:t,"data-tabindex":this.props.config.tabIndex||0,onFocus:this.focus.bind(this),onKeyDown:this.handleKey.bind(this),role:"toolbar",tabIndex:"-1"},r.default.createElement("div",{className:"ae-container"},e))}},{key:"_getButtons",value:function(){var e=void 0;return this.props.renderExclusive?e=this.getToolbarButtons(this.props.config.buttons):this.props.selectionData&&this.props.selectionData.region&&(e=r.default.createElement("button",{"aria-label":AlloyEditor.Strings.add,className:"ae-button ae-button-add",onClick:this.props.requestExclusive.bind(this,t.key),title:AlloyEditor.Strings.add},r.default.createElement(f.default,{symbol:"plus"}))),e}},{key:"_getToolbarClassName",value:function(){var e="ae-toolbar-add";return this.props.renderExclusive&&(e="ae-toolbar "+this.getArrowBoxClasses()),e}},{key:"_updatePosition",value:function(){var e=void 0;if(i.default.findDOMNode(this))if(this.props.renderExclusive)this.updatePosition(),this.show();else if(this.props.selectionData&&(e=this.props.selectionData.region),e){var t,n=i.default.findDOMNode(this),o=new CKEDITOR.dom.element(n),r=e.startRect||e,a=this.context.editor.get("nativeEditor"),l=a.editable().getClientRect();t=1===(this.props.config.position||this.props.position)?l.left-n.offsetWidth-this.props.gutterExclusive.left+"px":l.right+this.props.gutterExclusive.left+"px",n.style.left=t,n.style.top=Math.floor((e.bottom+e.top)/2)+"px";var s=this.context.editor.get("uiNode"),u=s?s.scrollTop:0;"auto"!==a.element.getStyle("overflow")?n.style.top=Math.floor(e.top-n.offsetHeight/2+r.height/2+u)+"px":n.style.top=Math.floor(a.element.$.offsetTop+r.height/2-n.offsetHeight/2)+"px",n.style.opacity=1,o.removeClass("ae-arrow-box"),this.cancelAnimation()}}}]),t}();p.contextType=a.default,p.key="add",p.left=1,p.right=2,p.defaultProps={circular:!0,descendants:".ae-button",gutterExclusive:{left:10,top:0},keys:{dismiss:[27],next:[39,40],prev:[37,38]},position:1},t.default=(0,s.default)((0,u.default)((0,c.default)((0,l.default)(p))))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=p(n(0)),a=p(n(6)),l=p(n(2)),s=p(n(5)),u=p(n(20)),c=p(n(16)),f=p(n(17)),d=p(n(10));function p(e){return e&&e.__esModule?e:{default:e}}var h=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),r(t,[{key:"componentDidMount",value:function(){this._updatePosition()}},{key:"componentDidUpdate",value:function(e,t){this._updatePosition()}},{key:"render",value:function(){var e=this._getCurrentSelection();if(e){var t=this._getSelectionFunction(e.getArrowBoxClasses),n="ae-toolbar-styles "+(t?t():this.getArrowBoxClasses()),r=e.buttons;"object"!==(void 0===r?"undefined":o(r))||Array.isArray(r)||(r=r[this.context.editor.get("mode")]||r.simple);var a=this.getToolbarButtonGroups(r,{manualSelection:this.props.editorEvent?this.props.editorEvent.data.manualSelection:null,selectionType:e.name}),l="ae-container";return a.filter(function(e){return Array.isArray(e)}).length>0&&(l+=" ae-container-column"),i.default.createElement("div",{"aria-label":AlloyEditor.Strings.styles,className:n,"data-tabindex":this.props.config.tabIndex||0,onFocus:this.focus.bind(this),onKeyDown:this.handleKey.bind(this),role:"toolbar",tabIndex:"-1"},i.default.createElement("div",{className:l},a.map(function(e,t){return Array.isArray(e)?i.default.createElement("div",{className:"ae-row",key:t},e.map(function(e){return e})):e})))}return null}},{key:"_getSelectionFunction",value:function(e){var t=void 0;if(s.default.isFunction(e))t=e;else if(s.default.isString(e)){for(var n=e.split("."),o=window,r=n.shift();r&&s.default.isObject(o)&&s.default.isObject(o[r]);)o=o[r],r=n.shift();s.default.isFunction(o)&&(t=o)}return t}},{key:"_getCurrentSelection",value:function(){var e=this.props.editorEvent?this.props.editorEvent.data:null,t=void 0;return e&&this.props.config.selections.some(function(n){var o=this._getSelectionFunction(n.test),r=void 0;return o&&(r=e.manualSelection===n.name||o({data:e,editor:this.context.editor})),r&&(t=n),r},this),t}},{key:"_updatePosition",value:function(){if(a.default.findDOMNode(this)){var e=this._getCurrentSelection(),t=void 0;if(e){var n=this._getSelectionFunction(e.setPosition);n&&(t=n.call(this,{editor:this.context.editor,editorEvent:this.props.editorEvent,selectionData:this.props.selectionData}))}t||(this.updatePosition(),this.show())}}}]),t}();h.contextType=l.default,h.defaultProps={circular:!0,descendants:".ae-input, .ae-button:not([disabled]), .ae-toolbar-element",keys:{dismiss:[27],next:[39,40],prev:[37,38]}},h.key="styles",t.default=(0,c.default)((0,f.default)((0,d.default)((0,u.default)(h))))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(111),n(41),n(135);var o=d(n(0)),r=d(n(6)),i=n(142),a=d(n(144)),l=d(n(145)),s=d(n(5)),u=d(n(21)),c=d(n(40)),f=d(n(2));function d(e){return e&&e.__esModule?e:{default:e}}function p(e){p.superclass.constructor.call(this,e)}(0,u.default)(p,l.default,{initializer:function(e){var t=this,n=this.get("srcNode");this.get("enableContentEditable")&&n.setAttribute("contenteditable","true");var o=CKEDITOR.inline(n);if(o.config.allowedContent=this.get("allowedContent"),o.config.toolbars=this.get("toolbars"),o.config.removePlugins=this.get("removePlugins"),o.config.extraPlugins=this.get("extraPlugins"),o.config.embedProviders=this.get("embedProviders"),o.config.placeholderClass=this.get("placeholderClass"),o.config.pasteFromWordRemoveStyles=!1,o.config.pasteFromWordRemoveFontStyles=!1,o.config.selectionKeystrokes=this.get("selectionKeystrokes"),o.config.spritemap=this.get("spritemap"),s.default.mix(o.config,e),CKEDITOR.env.ie&&!CKEDITOR.env.edge){var r="ae_dragresize_ie11";o.config.extraPlugins=o.config.extraPlugins.replace("ae_dragresize",r),o.config.removePlugins=o.config.removePlugins.replace("ae_dragresize",r)}o.once("contentDom",function(){t._addReadOnlyLinkClickListener(o);for(var e=o.editable(),n=t.get("extraCommands"),r=Object.keys(n),i=0;i<r.length;i++){var a=r[i];o.commands[a]||o.addCommand(a,n[a])}e.addClass("ae-editable")}),this._editor=o,AlloyEditor.loadLanguageResources(this._renderUI.bind(this))},destructor:function(){this._destroyed=!0,this._editorUIElement&&(r.default.unmountComponentAtNode(this._editorUIElement),this._editorUIElement.parentNode.removeChild(this._editorUIElement));var e=this.get("nativeEditor");if(e){var t=e.editable();t&&(t.removeClass("ae-editable"),this.get("enableContentEditable")&&this.get("srcNode").setAttribute("contenteditable","false")),this._clearSelections(),e.destroy()}},_clearSelections:function(){var e=this.get("nativeEditor");"function"!=typeof window.getSelection?e.document.$.selection.empty():e.document.getWindow().$.getSelection().removeAllRanges()},_addReadOnlyLinkClickListener:function(e){e.editable().on("click",this._defaultReadOnlyClickFn,this,{editor:e})},_defaultReadOnlyClickFn:function(e){var t=e.data.$,n=t.ctrlKey||t.metaKey,o=this._editor.config.readOnly||n;if(t.preventDefault(),o&&!1!==e.listenerData.editor.editable().editor.fire("readOnlyClick",e.data)){var r=new CKEDITOR.dom.elementPath(e.data.getTarget(),this).lastElement;if(r){var i=r.$.attributes.href?r.$.attributes.href.value:null,a=n?"_blank":r.$.attributes.target?r.$.attributes.target.value:null;this._redirectLink(i,a)}}},_getNativeEditor:function(){return this._editor},_redirectLink:function(e,t){t&&e?window.open(e,t):e&&(window.location.href=e)},_renderUI:function(){var e=this;if(!this._destroyed){var t=document.createElement("div");t.className="ae-ui",(this.get("uiNode")||document.body).appendChild(t);r.default.render(o.default.createElement(f.default.Provider,{value:{editor:this}},o.default.createElement(a.default,{eventsDelay:this.get("eventsDelay"),ref:function(t){!e._mainUI&&t&&(e._mainUI=t,e.get("nativeEditor").fire("uiReady"))},toolbars:this.get("toolbars")})),t),this._editorUIElement=t}},_toElement:function(e){return s.default.isString(e)&&(e=document.getElementById(e)),e},_validateAllowedContent:function(e){return s.default.isString(e)||s.default.isObject(e)||s.default.isBoolean(e)},_validateToolbars:function(e){return s.default.isObject(e)||s.default.isNull(e)}},{ATTRS:{allowedContent:{validator:"_validateAllowedContent",value:!0,writeOnce:!0},documentBrowseLinkCallback:{validator:s.default.isFunction,value:void 0},documentBrowseLinkUrl:{validator:s.default.isString,value:void 0},embedProviders:{validator:s.default.isArray,value:[{id:"facebook",tpl:'<iframe allowFullScreen="true" allowTransparency="true"\n\t\t\t\t\t\t\t\t\t\t\t\t frameborder="0" height="315"\n\t\t\t\t\t\t\t\t\t\t\t\t src="https://www.facebook.com/plugins/video.php?href={embedId}\'\n\t\t\t\t\t\t\t\t\t\t\t\t &show_text=0&width=560&height=315" scrolling="no"\n\t\t\t\t\t\t\t\t\t\t\t\t style="border:none;overflow:hidden" width="560}"></iframe>',type:"video",urlSchemes:["(https?:\\/\\/(?:www\\.)?facebook.com\\/\\S*\\/videos\\/\\S*)"]},{id:"twitch",tpl:'<iframe allowfullscreen="true" frameborder="0"\n\t\t\t\t\t\t\t\t\t\t\t\t height="315"\n\t\t\t\t\t\t\t\t\t\t\t\t src="https://player.twitch.tv/?autoplay=false&video={embedId}"\n\t\t\t\t\t\t\t\t\t\t\t\t scrolling="no" width="560"></iframe>',type:"video",urlSchemes:["https?:\\/\\/(?:www\\.)?twitch.tv\\/videos\\/(\\S*)$"]},{id:"vimeo",tpl:'<iframe allowfullscreen frameborder="0" height="315"\n\t\t\t\t\t\t\t\t\t\t\t\t mozallowfullscreen src="https://player.vimeo.com/video/{embedId}"\n\t\t\t\t\t\t\t\t\t\t\t\t webkitallowfullscreen width="560"></iframe>',type:"video",urlSchemes:["https?:\\/\\/(?:www\\.)?vimeo\\.com\\/album\\/.*\\/video\\/(\\S*)","https?:\\/\\/(?:www\\.)?vimeo\\.com\\/channels\\/.*\\/(\\S*)","https?:\\/\\/(?:www\\.)?vimeo\\.com\\/groups\\/.*\\/videos\\/(\\S*)","https?:\\/\\/(?:www\\.)?vimeo\\.com\\/(\\S*)$"]},{id:"youtube",tpl:'<iframe allow="autoplay; encrypted-media" allowfullscreen\n\t\t\t\t\t\t\t\t\t\t\t\t height="315" frameborder="0"\n\t\t\t\t\t\t\t\t\t\t\t\t src="https://www.youtube.com/embed/{embedId}?rel=0"\n\t\t\t\t\t\t\t\t\t\t\t\t width="560"></iframe>',type:"video",urlSchemes:["https?:\\/\\/(?:www\\.)?youtube.com\\/watch\\?v=(\\S*)$"]}]},enableContentEditable:{validator:s.default.isBoolean,value:!0,writeOnce:!0},eventsDelay:{validator:s.default.isNumber,value:100},extraCommands:{validator:s.default.isObject,value:{removeImage:i.removeImageCommand},writeOnce:!0},extraPlugins:{validator:s.default.isString,value:"ae_uicore,ae_selectionregion,ae_selectionkeystrokes,ae_imagealignment,ae_addimages,ae_placeholder,ae_tabletools,ae_tableresize,ae_autolink,ae_embed,ae_autolist,ae_dragresize,ae_uibridge,ae_richcombobridge,ae_panelmenubuttonbridge,ae_menubridge,ae_menubuttonbridge,ae_buttonbridge,font,colorbutton",writeOnce:!0},mode:{validator:s.default.isString,value:"simple"},nativeEditor:{getter:"_getNativeEditor",readOnly:!0},placeholderClass:{validator:s.default.isString,value:"ae-placeholder",writeOnce:!0},removePlugins:{validator:s.default.isString,value:"contextmenu,toolbar,elementspath,resize,liststyle,link",writeOnce:!0},selectionKeystrokes:{validator:s.default.isArray,value:[{keys:CKEDITOR.CTRL+76,selection:"link"},{keys:CKEDITOR.CTRL+CKEDITOR.SHIFT+76,selection:"embed"}]},spritemap:{validator:s.default.isString,value:"alloy-editor/assets/icons/icons.svg",writeOnce:!0},srcNode:{setter:"_toElement",writeOnce:!0},toolbars:{validator:"_validateToolbars",value:{add:{buttons:["imageFromFile","embed","camera","hline","table"],tabIndex:2},styles:{selections:c.default,tabIndex:1}}},uiNode:{setter:"_toElement",writeOnce:!0}}}),CKEDITOR.event.implementOn(p),t.default=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.debounce=void 0;var o=function(e){return e&&e.__esModule?e:{default:e}}(n(112));n(113),n(114),n(115),n(116),n(117),n(118),t.debounce=o.default},function(e,t,n){"use strict";function o(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=void 0,i=function(){for(var i=arguments.length,a=Array(i),l=0;l<i;l++)a[l]=arguments[l];var s=n||this;clearTimeout(r),r=setTimeout(function(){e.apply(s,[].concat(a,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(o)))},t)};return i.detach=function(){clearTimeout(r)},i}Object.defineProperty(t,"__esModule",{value:!0}),CKEDITOR.tools.debounce=CKEDITOR.tools.debounce||o,t.default=o},function(e,t,n){"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=/^#.*/i,i=/^[a-z0-9\u0430-\u044F._-]+@/i,a=/^(?:[a-z][a-z0-9+\-.]*):|^\//i;function l(e,t){this._editor=e,this.appendProtocol=!t||!1!==t.appendProtocol}l.prototype={constructor:l,advanceSelection:function(e){e=e||this.getFromSelection();var t=this._editor.getSelection().getRanges()[0];if(e){t.moveToElementEditEnd(e);var n=t.getNextEditableNode();if(n&&!this._editor.element.equals(n.getCommonAncestor(e))){var o=/\s/.exec(n.getText()),r=o?o.index+1:0;t.setStart(n,r),t.setEnd(n,r)}}this._editor.getSelection().selectRanges([t])},create:function(e,t,n){var o=this._editor.getSelection().getRanges()[0];if(o.collapsed){var r=new CKEDITOR.dom.text(e,this._editor.document);o.insertNode(r),o.selectNodeContents(r)}e=this._getCompleteURI(e);var i=CKEDITOR.tools.merge({"data-cke-saved-href":e,href:e},t),a=new CKEDITOR.style({attributes:i,element:"a"});a.type=CKEDITOR.STYLE_INLINE,a.applyToRange(o,this._editor),n&&n.advance?this.advanceSelection():o.select()},getFromSelection:function(){var e=this._editor.getSelection(),t=e.getSelectedElement();if(t&&t.is("a"))return t;if(t&&CKEDITOR.env.ie)for(var n=t.getChildren(),o=n.count(),r=0;r<o;r++){var i=n.getItem(r);if(i.is("a"))return i}var a=e.getRanges()[0];return a?(a.shrink(CKEDITOR.SHRINK_TEXT),this._editor.elementPath(a.getCommonAncestor()).contains("a",1)):null},remove:function(e,t){var n=this._editor;if(e)t&&t.advance&&this.advanceSelection(),e.remove(n);else{var o=new CKEDITOR.style({alwaysRemoveElement:1,element:"a",type:CKEDITOR.STYLE_INLINE}),r=n.getSelection();r.selectElement(r.getStartElement()),n.removeStyle(o)}},update:function(e,t,n){var r=this;if(t=t||this.getFromSelection(),"string"==typeof e){var i=r._getCompleteURI(e);t.setAttributes({"data-cke-saved-href":i,href:i})}else if("object"===(void 0===e?"undefined":o(e))){var a=[],l={};Object.keys(e).forEach(function(t){if(null===e[t])"href"===t&&a.push("data-cke-saved-href"),a.push(t);else if("href"===t){var n=r._getCompleteURI(e[t]);l["data-cke-saved-href"]=n,l[t]=n}else l[t]=e[t]}),t.removeAttributes(a),t.setAttributes(l)}n&&n.advance&&this.advanceSelection(t)},_getCompleteURI:function(e){return r.test(e)?e:(i.test(e)?e="mailto:"+e:a.test(e)||(e=this.appendProtocol?"http://"+e:e),e)}},CKEDITOR.Link=CKEDITOR.Link||l},function(e,t,n){"use strict";CKEDITOR.plugins.load=CKEDITOR.tools.override(CKEDITOR.plugins.load,function(e){return function(t,n,o){e.call(this,t,function(e){n&&(Object.keys(e).forEach(function(t){var n=e[t];n.requires&&(n.requires=function(e){return"string"==typeof e&&(e=e.split(",")),e.filter(function(e){return"toolbar"!==e})}(n.requires)),function(e){["beforeInit","init","afterInit"].forEach(function(t){e[t]&&(e[t]=CKEDITOR.tools.override(e[t],function(n){var o={phase:t,plugin:e};return function(e){e.__processingPlugin__=o,n.call(this,e),e.__processingPlugin__=null}}))})}(n)}),n.call(o,e))})}})},function(e,t,n){"use strict";if(!CKEDITOR.plugins.get("ae_selectionregion")){function o(){}CKEDITOR.SELECTION_TOP_TO_BOTTOM=0,CKEDITOR.SELECTION_BOTTOM_TO_TOP=1,CKEDITOR.SELECTION_LEFT_TO_RIGHT=2,CKEDITOR.SELECTION_RIGHT_TO_LEFT=3,o.prototype={constructor:o,createSelectionFromPoint:function(e,t){this.createSelectionFromRange(e,t,e,t)},createSelectionFromRange:function(e,t,n,o){var r=void 0,i=void 0,a=void 0,l=void 0,s=void 0,u=void 0,c=void 0;if("function"==typeof document.caretPositionFromPoint?(s=document.caretPositionFromPoint(e,t),r=document.caretPositionFromPoint(n,o),u=s.offsetNode,i=r.offsetNode,c=s.offset,a=r.offset,l=this.createRange()):"function"==typeof document.caretRangeFromPoint&&(s=document.caretRangeFromPoint(e,t),r=document.caretRangeFromPoint(n,o),u=s.startContainer,i=r.startContainer,c=s.startOffset,a=r.startOffset,l=this.createRange()),l&&document.getSelection)l.setStart(new CKEDITOR.dom.node(u),c),l.setEnd(new CKEDITOR.dom.node(i),a),this.getSelection().selectRanges([l]);else if("function"==typeof document.body.createTextRange){this.getSelection().unlock(),(l=document.body.createTextRange()).moveToPoint(e,t);var f=l.duplicate();f.moveToPoint(n,o),l.setEndPoint("EndToEnd",f),l.select(),this.getSelection().lock()}},getCaretRegion:function(){var e={bottom:0,left:0,right:0,top:0},t=this.getSelection().createBookmarks();if(!t.length)return e;var n=t[0].startNode.$;n.style.display="inline-block",e=new CKEDITOR.dom.element(n).getClientRect(),n.parentNode.removeChild(n);var o=new CKEDITOR.dom.window(window).getScrollPosition();return e.bottom=o.y+e.bottom,e.left=o.x+e.left,e.right=o.x+e.right,e.top=o.y+e.top,e},getSelectionData:function(){var e=this.getSelection();if(!e.getNative())return null;var t={element:e.getSelectedElement(),text:e.getSelectedText()};return t.region=this.getSelectionRegion(e),t},getSelectionRegion:function(){var e=this.getClientRectsRegion();return e.direction=this.getSelectionDirection(),e.height=e.bottom-e.top,e.width=e.right-e.left,e},isSelectionEmpty:function(){var e=this.getSelection();if(e.getType()===CKEDITOR.SELECTION_NONE)return!0;var t=e.getRanges();return t&&1===t.length&&t[0].collapsed},getClientRectsRegion:function(){var e=this.getSelection().getNative(),t={bottom:0,height:0,left:0,right:0,top:0,width:0},n={bottom:0,endRect:t,left:0,right:0,top:0,startRect:t};if(!e)return n;var o,r=0,i=1/0,a=-1/0,l=1/0;if(0===(o=e.createRange?e.createRange().getClientRects():e.rangeCount>0?e.getRangeAt(0).getClientRects():[]).length)n=this.getCaretRegion();else{for(var s=0,u=o.length;s<u;s++){var c=o[s];c.left<i&&(i=c.left),c.right>a&&(a=c.right),c.top<l&&(l=c.top),c.bottom>r&&(r=c.bottom)}var f=new CKEDITOR.dom.window(window).getScrollPosition();if(n.bottom=f.y+r,n.left=f.x+i,n.right=f.x+a,n.top=f.y+l,o.length){var d=o[o.length-1],p=o[0];n.endRect={bottom:f.y+d.bottom,height:d.height,left:f.x+d.left,right:f.x+d.right,top:f.y+d.top,width:d.width},n.startRect={bottom:f.y+p.bottom,height:p.height,left:f.x+p.left,right:f.x+p.right,top:f.y+p.top,width:p.width}}}return n},getSelectionDirection:function(){var e=CKEDITOR.SELECTION_TOP_TO_BOTTOM,t=this.getSelection().getNative();if(!t)return e;var n=void 0;if((n=t.anchorNode)&&n.compareDocumentPosition){var o=n.compareDocumentPosition(t.focusNode);(!o&&t.anchorOffset>t.focusOffset||o===Node.DOCUMENT_POSITION_PRECEDING)&&(e=CKEDITOR.SELECTION_BOTTOM_TO_TOP)}return e}},CKEDITOR.plugins.add("ae_selectionregion",{init:function(e){var t=void 0,n=Object.prototype.hasOwnProperty;for(t in o.prototype)n.call(o.prototype,t)&&void 0===e[t]&&(e[t]=o.prototype[t])}})}},function(e,t,n){"use strict";var o={table:1,col:1,colgroup:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1};function r(e){this._editor=e}r.HEADING_BOTH="Both",r.HEADING_COL="Column",r.HEADING_NONE="None",r.HEADING_ROW="Row",r.prototype={constructor:r,create:function(e){var t=this._editor,n=this._createElement("table");e=e||{};for(var o=n.append(this._createElement("tbody")),r=e.rows||1,i=e.cols||1,a=0;a<r;a++)for(var l=o.append(this._createElement("tr")),s=0;s<i;s++){l.append(this._createElement("td")).appendBogus()}this.setAttributes(n,e.attrs),this.setHeading(n,e.heading),t.insertElement(n);var u=new CKEDITOR.dom.element(n.$.rows[0].cells[0]),c=t.createRange();return c.moveToPosition(u,CKEDITOR.POSITION_AFTER_START),c.select(),n},getFromSelection:function(){var e=void 0,t=this._editor.getSelection(),n=t.getSelectedElement();if(n&&n.is("table"))e=n;else{var o=t.getRanges();o.length>0&&(CKEDITOR.env.webkit&&o[0].shrink(CKEDITOR.NODE_ELEMENT),e=this._editor.elementPath(o[0].getCommonAncestor(!0)).contains("table",1))}return e},isEditable:function(e){return CKEDITOR.env.ie&&e.is(o)?e.hasAttribute("contenteditable")?"false"!==e.getAttribute("contenteditable"):this.isEditable(e.getParent()):!e.isReadOnly()},getHeading:function(e){if(!(e=e||this.getFromSelection()))return null;for(var t=null!==e.$.tHead,n=!0,o=0;o<e.$.rows.length;o++){var i=e.$.rows[o].cells[0];if(i&&"th"!==i.nodeName.toLowerCase()){n=!1;break}}var a=r.HEADING_NONE;return t&&(a=r.HEADING_ROW),n&&(a=a===r.HEADING_ROW?r.HEADING_BOTH:r.HEADING_COL),a},remove:function(e){var t=this._editor;if(e)e.remove();else if(e=t.elementPath().contains("table",1)){var n=e.getParent(),o=t.editable();1!==n.getChildCount()||n.is("td","th")||n.equals(o)||(e=n),t.createRange().moveToPosition(e,CKEDITOR.POSITION_BEFORE_START),e.remove()}},setAttributes:function(e,t){t&&Object.keys(t).forEach(function(n){e.setAttribute(n,t[n])})},setHeading:function(e,t){var n=void 0,o=void 0,i=void 0,a=(e=e||this.getFromSelection()).getElementsByTag("tbody").getItem(0),l=this.getHeading(e),s=l===r.HEADING_COL||l===r.HEADING_BOTH,u=t===r.HEADING_COL||t===r.HEADING_BOTH,c=t===r.HEADING_ROW||t===r.HEADING_BOTH;if(!e.$.tHead&&c){var f=a.getElementsByTag("tr").getItem(0),d=f.getChildCount();for(n=0;n<d;n++){var p=f.getChild(n);p.type!==CKEDITOR.NODE_ELEMENT||p.data("cke-bookmark")||(p.renameNode("th"),p.setAttribute("scope","col"))}(i=this._createElement(e.$.createTHead())).append(f.remove())}if(null!==e.$.tHead&&!c){i=this._createElement(e.$.tHead);for(var h=a.getFirst();i.getChildCount()>0;){var m=i.getFirst(),y=m.getChildCount();for(n=0;n<y;n++)(o=m.getChild(n)).type===CKEDITOR.NODE_ELEMENT&&(o.renameNode("td"),o.removeAttribute("scope"));m.insertBefore(h)}i.remove()}if(!((l=this.getHeading(e))===r.HEADING_COL||l===r.HEADING_BOTH)&&u)for(n=0;n<e.$.rows.length;n++)"th"!==e.$.rows[n].cells[0].nodeName.toLowerCase()&&((o=new CKEDITOR.dom.element(e.$.rows[n].cells[0])).renameNode("th"),o.setAttribute("scope","row"));if(s&&!u)for(n=0;n<e.$.rows.length;n++){var b=new CKEDITOR.dom.element(e.$.rows[n]);"tbody"===b.getParent().getName()&&((o=new CKEDITOR.dom.element(b.$.cells[0])).renameNode("td"),o.removeAttribute("scope"))}},_createElement:function(e){return new CKEDITOR.dom.element(e,this._editor.document)}},CKEDITOR.on("instanceReady",function(e){var t=[r.HEADING_NONE,r.HEADING_ROW,r.HEADING_COL,r.HEADING_BOTH],n=new r(e.editor);t.forEach(function(t){e.editor.addCommand("tableHeading"+t,{exec:function(e){n.setHeading(null,t)}})})}),CKEDITOR.Table=CKEDITOR.Table||r},function(e,t,n){"use strict";CKEDITOR.tools.jsonp=function(e,t,n,o){var r=CKEDITOR.tools.getNextNumber();(t=t||{}).callback="CKEDITOR._.jsonpCallbacks["+r+"]",CKEDITOR._.jsonpCallbacks||(CKEDITOR._.jsonpCallbacks={}),CKEDITOR._.jsonpCallbacks[r]=function(e){setTimeout(function(){a(),n(e)})};var i=new CKEDITOR.dom.element("script");function a(){i&&(i.remove(),delete CKEDITOR._.jsonpCallbacks[r],i=null)}return i.setAttribute("src",e.output(t)),i.on("error",function(){a(),o&&o()}),CKEDITOR.document.getBody().append(i),{cancel:a,id:r}},CKEDITOR.tools.merge=CKEDITOR.tools.merge||function(){for(var e={},t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];for(var r=0;r<n.length;++r){var i=n[r];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},CKEDITOR.tools.simulate=function(e,t){var n=document.createEvent("Events");n.initEvent(t,!0,!1),e.dispatchEvent(n)}},function(e,t,n){"use strict";CKEDITOR.plugins.get("ae_uicore")||CKEDITOR.plugins.add("ae_uicore",{init:function(e){var t=[],n=this._createAriaElement(e.id),o=e.config.uicore?e.config.uicore.timeout:50,r=CKEDITOR.tools.debounce(function(n){if(t=[],"keyup"!==n.name||27!==n.data.$.keyCode||e.config.allowEsc){var o=e.getSelectionData();o&&e.fire("editorInteraction",{nativeEvent:n.data.$,selectionData:o})}},o),i=CKEDITOR.tools.debounce(function(e){n.innerHTML=t.join(". ")},o),a=CKEDITOR.tools.debounce(function(e){for(var t=document.querySelectorAll(".ae-ui"),n=void 0,o=0;o<t.length;o++)if(t[o].contains(e.data.$.relatedTarget)){n=!0;break}n||r(e)},o);e.on("ariaUpdate",function(e){t.push(e.data.message),i()}),e.once("contentDom",function(){var t=e.editable(),n=t.attachListener(t,"focus",function(e){n.removeListener(),t.attachListener(t,"keyup",r),t.attachListener(t,"mouseup",r),t.attachListener(t,"mouseleave",a),r(e)})}),e.on("destroy",function(e){n.parentNode.removeChild(n),r.detach()})},_createAriaElement:function(e){var t=document.createElement("div");return t.className="ae-sr-only",t.setAttribute("aria-live","polite"),t.setAttribute("role","status"),t.setAttribute("id",e+"LiveRegion"),document.body.appendChild(t),t}})},function(e,t,n){"use strict";var o=CKEDITOR.env.ie;CKEDITOR.plugins.get("ae_addimages")||CKEDITOR.plugins.add("ae_addimages",{init:function(e){var t=this;e.once("contentDom",function(){var n=e.editable();n.attachListener(n,"dragenter",t._onDragEnter,t,{editor:e}),n.attachListener(n,"dragover",t._onDragOver,t,{editor:e}),n.attachListener(n,"drop",t._onDragDrop,t,{editor:e}),n.attachListener(n,"paste",t._onPaste,t,{editor:e})})},_handleFiles:function(e,t){var n=void 0,o=void 0,r=[];for(o=0;o<e.length;o++)0===(n=e[o]).type.indexOf("image")&&r.push(n);if(t.fire("beforeImageAdd",{imageFiles:r}))for(o=0;o<r.length;o++)n=r[o],this._processFile(n,t);return!1},_onDragDrop:function(e){var t=e.data.$,n=t.dataTransfer.files;if(n.length>0){new CKEDITOR.dom.event(t).preventDefault();var o=e.listenerData.editor;e.listenerData.editor.createSelectionFromPoint(t.clientX,t.clientY),this._handleFiles(n,o)}},_onDragEnter:function(e){o&&this._preventEvent(e)},_onDragOver:function(e){o&&this._preventEvent(e)},_onPaste:function(e){if(e.data&&e.data.$&&e.data.$.clipboardData&&e.data.$.clipboardData.items&&e.data.$.clipboardData.items.length>0){var t=e.data.$.clipboardData.items[0];if(0===t.type.indexOf("image")){var n=t.getAsFile();this._processFile(n,e.listenerData.editor)}}},_preventEvent:function(e){(e=new CKEDITOR.dom.event(e.data.$)).preventDefault(),e.stopPropagation()},_processFile:function(e,t){var n=new FileReader;n.addEventListener("loadend",function(){var o=n.result,r=CKEDITOR.dom.element.createFromHtml('<img src="'+o+'">');t.insertElement(r);var i={el:r,file:e};t.fire("imageAdd",i)}),n.readAsDataURL(e)}})},function(e,t,n){"use strict";if(!CKEDITOR.plugins.get("ae_autolink")){/MSIE ([^;]*)|Trident.*; rv:([0-9.]+)/.test(navigator.userAgent)&&document.execCommand("AutoUrlDetect",!1,!1);var o=[188,13,186,32],r=/[^\s]+/gim,i="^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$",a=/[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}/i;CKEDITOR.plugins.add("ae_autolink",{init:function(e){var t=this;e.once("contentDom",function(){var n=e.editable();n.attachListener(n,"keyup",t._onKeyUp,t,{editor:e})}),e.on("paste",function(e){if("paste"===e.data.method){if(e.data.dataValue.indexOf("<")>-1||e.data.dataValue.indexOf("&lt;")>-1)return void(e.data.dataValue.indexOf('<u><font color="')>-1&&(e.data.dataValue=e.data.dataValue.replace(/<u><font color="#(.*?)">|<\/font><\/u>/g,"")));var n=t;e.data.dataValue=e.data.dataValue.replace(RegExp(i,"gim"),function(e){if(n._isValidURL(e))return n._isValidEmail(e)?'<a href="mailto:'+e+'">'+e+"</a>":'<a href="'+e+'">'+e+"</a>"})}})},_getLastWord:function(e){var t=e.getSelection().getRanges()[0];if(t){var n=t.startOffset,o="";if(13===this._currentKeyCode){var i=t.startContainer.getPrevious(),a=void 0;if(i){for(;!i.getLast;)i=i.getPrevious();for(a=i.getLast();a&&!a.getText();)a=a.getPrevious()}a&&a.$.href||(this._startContainer=a,o=a?a.getText():"",this._offset=o.length)}else this._startContainer=t.startContainer,o=this._startContainer.getText().substring(0,n-1),this._offset=n-1;var l="",s=o.match(r);return s&&(l=s.pop()),l}},_isValidEmail:function(e){return a.test(e)},_isValidURL:function(e){return RegExp(i,"i").test(e)},_onKeyDown:function(e){var t=e.data.$,n=e.listenerData.editor;n.editable().removeListener("keydown",this._onKeyDown),8===t.keyCode&&(e.cancel(),e.data.preventDefault(),this._removeLink(n)),this._ckLink=null},_onKeyUp:function(e){var t=e.data.$;if(this._currentKeyCode=t.keyCode,-1!==o.indexOf(this._currentKeyCode)){var n=e.listenerData.editor,r=this._getLastWord(n);this._isValidURL(r)&&this._replaceContentByLink(n,r)}},_replaceContentByLink:function(e,t){var n=e.createRange(),o=CKEDITOR.dom.element.get(this._startContainer),r=this._offset;n.setStart(o,r-t.length),n.setEnd(o,r),n.select();var i=new CKEDITOR.Link(e);i.create(t),this._ckLink=i;var a=i.getFromSelection();if(e.fire("autolinkAdd",a),this._subscribeToKeyEvent(e),n=e.getSelection().getRanges()[0],13===this._currentKeyCode){var l=n.getNextEditableNode();n.setStart(l,0),n.setEnd(l,0)}else{var s=n.getEnclosedNode();n.setStart(s,0),n.setEnd(s,0)}n.select()},_removeLink:function(e){var t=e.getSelection().getRanges()[0],n=t.startOffset,o=this._startContainer.getNext()||this._startContainer,r=e.createRange();r.setStart(o,0),r.setEndAfter(o),r.select(),this._ckLink.remove(),t.setEnd(t.startContainer,n),t.setStart(t.startContainer,n),t.select()},_subscribeToKeyEvent:function(e){var t=e.editable();t.attachListener(t,"keydown",this._onKeyDown,this,{editor:e},1)}})}},function(e,t,n){"use strict";if(!CKEDITOR.plugins.get("ae_autolist")){var o=[{regex:/^\*$/,type:"bulletedlist"},{regex:/^1\.$/,type:"numberedlist"}];CKEDITOR.plugins.add("ae_autolist",{init:function(e){var t=this;e.once("contentDom",function(){var n=e.editable();n.attachListener(n,"keydown",t._onKeyDown,t,{editor:e})})},_checkForBackspaceAndUndo:function(e){var t=e.listenerData.editor,n=e.data.$;t.editable().removeListener("keydown",this._checkForBackspaceAndUndo),8===n.keyCode&&(t.execCommand("undo"),t.insertHtml(e.listenerData.bullet+"&nbsp;"),e.data.preventDefault())},_getListConfig:function(e){for(var t=e.config.autolist||o,n=e.getSelection().getRanges()[0],r=n.endContainer.getText(),i=r.substring(0,n.startOffset),a=r.substring(n.startOffset,r.length),l=0,s=t.length,u=null;!u&&s>l;){var c=t[l];if(c.regex.test(i)){u={bullet:i,editor:e,text:a,type:c.type};break}l++}return u},_createList:function(e){var t=e.editor;t.getSelection().getRanges()[0].endContainer.setText(e.text),t.execCommand(e.type);var n=t.editable();n.attachListener(n,"keydown",this._checkForBackspaceAndUndo,this,{editor:t,bullet:e.bullet},1)},_onKeyDown:function(e){if(32===e.data.$.keyCode){var t=this._getListConfig(e.listenerData.editor);t&&(e.data.preventDefault(),this._createList(t))}}})}},function(e,t,n){"use strict";if(!CKEDITOR.plugins.get("ae_dragresize")){var o={both:["tl","tm","tr","lm","rm","bl","bm","br"],height:["tl","tm","tr","bl","bm","br"],scale:["tl","tr","bl","br"],width:["tl","tr","lm","rm","bl","br"]},r={bl:function(e,t,n,o){f(e,-3+t,o.height-4+n)},bm:function(e,t,n,o){f(e,Math.round(o.width/2)-3+t,o.height-4+n)},br:function(e,t,n,o){f(e,o.width-4+t,o.height-4+n)},lm:function(e,t,n,o){f(e,-3+t,Math.round(o.height/2)-3+n)},tl:function(e,t,n,o){f(e,t-3,n-3)},tm:function(e,t,n,o){f(e,Math.round(o.width/2)-3+t,-3+n)},tr:function(e,t,n,o){f(e,o.width-4+t,-3+n)},rm:function(e,t,n,o){f(e,o.width-4+t,Math.round(o.height/2)-3+n)}},i=7,a="MozAppearance"in document.documentElement.style,l="WebkitAppearance"in document.documentElement.style||a;function s(e,t){this.editor=e,this.window=e.window.$,this.document=e.document.$,this.cfg=t||{},this.init()}function u(e,t){this.window=e,this.document=t,this.events={mousemove:c(this.mousemove,this),keydown:c(this.keydown,this),mouseup:c(this.mouseup,this)}}function c(e,t){return e.bind?e.bind(t):function(){for(var n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];e.apply(t,o)}}function f(e,t,n){e.style.left=String(t)+"px",e.style.top=String(n)+"px"}function d(e,t){var n=t.getBoundingClientRect();return{left:n.left+e.pageXOffset,top:n.top+e.pageYOffset,width:n.width,height:n.height}}l&&CKEDITOR.addCss("img::selection{color:rgba(0,0,0,0)}img.ckimgrsz{outline:1px dashed #000}#ckimgrsz{position:absolute;width:0;height:0;cursor:default;z-index:10001}#ckimgrsz span{display:none;position:absolute;top:0;left:0;width:0;height:0;background-size:100% 100%;opacity:.65;outline:1px dashed #000}#ckimgrsz i{position:absolute;display:block;width:5px;height:5px;background:#fff;border:1px solid #000}#ckimgrsz i.active,#ckimgrsz i:hover{background:#000}#ckimgrsz i.br,#ckimgrsz i.tl{cursor:nwse-resize}#ckimgrsz i.bm,#ckimgrsz i.tm{cursor:ns-resize}#ckimgrsz i.bl,#ckimgrsz i.tr{cursor:nesw-resize}#ckimgrsz i.lm,#ckimgrsz i.rm{cursor:ew-resize}body.dragging-br,body.dragging-br *,body.dragging-tl,body.dragging-tl *{cursor:nwse-resize!important}body.dragging-bm,body.dragging-bm *,body.dragging-tm,body.dragging-tm *{cursor:ns-resize!important}body.dragging-bl,body.dragging-bl *,body.dragging-tr,body.dragging-tr *{cursor:nesw-resize!important}body.dragging-lm,body.dragging-lm *,body.dragging-rm,body.dragging-rm *{cursor:ew-resize!important}"),CKEDITOR.plugins.add("ae_dragresize",{onLoad:function(){},init:function(e){l&&e.once("contentDom",function(t){!function(e){var t=e.window.$,n=e.document.$;a&&n.execCommand("enableObjectResizing",!1,!1);var o=void 0===i?null:i;e.config.imageScaleResize=e.config.imageScaleResize||"both";var r=new s(e,{imageScaleResize:e.config.imageScaleResize,snapToSize:o}),l=function(e){r.isHandle(e.target)&&r.initDrag(e)};function u(){var n=e.getSelection();n&&(n.getType()!==CKEDITOR.SELECTION_NONE&&n.getStartElement().is("img")?t.event&&t.event.button&&0!==t.event.button||r.show(n.getStartElement().$):r.hide())}n.addEventListener("mousedown",l,!1),e.on("selectionChange",u),e.on("getData",function(e){var t=e.data.dataValue||"";t=(t=t.replace(/<div id="ckimgrsz"([\s\S]*?)<\/div>/i,"")).replace(/\b(ckimgrsz)\b/g,""),e.data.dataValue=t}),e.on("beforeUndoImage",function(){r.hide()}),e.on("afterUndoImage",function(){u()}),e.on("blur",function(){r.hide()}),e.on("beforeModeUnload",function t(){e.removeListener("beforeModeUnload",t),r.hide()}),e.on("destroy",function(){var e=n.getElementById("ckimgrsz");e&&e.remove(),a&&n.execCommand("enableObjectResizing",!1,!0),n.removeEventListener("mousedown",l)});var c=void 0;e.window.on("resize",function(){clearTimeout(c),c=setTimeout(u,50)})}(e)})}}),s.prototype={init:function(){var e=this,t=this.container=this.document.createElement("div");t.id="ckimgrsz",this.preview=this.document.createElement("span"),t.appendChild(this.preview);var n=this.handles={};for(var r in o[this.cfg.imageScaleResize].forEach(function(t){n[t]=e.handles[t]=e.createHandle(t)}),n)Object.prototype.hasOwnProperty.call(n,r)&&t.appendChild(n[r])},createHandle:function(e){var t=this.document.createElement("i");return t.classList.add(e),t},isHandle:function(e){var t=this.handles;for(var n in t)if(t[n]===e)return!0;return!1},show:function(e){var t=this.editor.config.uiNode,n=t?t.scrollTop:0;this.el=e,this.cfg.snapToSize&&(this.otherImages=function(e){for(var t=e.length,n=new Array(t),o=0;o<t;o++)n[o]=e[o];return n}(this.document.getElementsByTagName("img")),this.otherImages.splice(this.otherImages.indexOf(e),1));var o=this.box=d(this.window,e);f(this.container,o.left,o.top+n),(t=t||document.body).appendChild(this.container),this.el.classList.add("ckimgrsz"),this.showHandles()},hide:function(){for(var e=this.document.getElementsByClassName("ckimgrsz"),t=0;t<e.length;++t)e[t].classList.remove("ckimgrsz");this.hideHandles(),this.container.parentNode&&this.container.parentNode.removeChild(this.container)},initDrag:function(e){if(0===e.button){var t=this,n=new u(this.window,this.document);n.onStart=function(){t.showPreview(),t.isDragging=!0,t.editor.getSelection().lock()},n.onDrag=function(){t.calculateSize(this),t.updatePreview();var e=t.previewBox;t.updateHandles(e,e.left,e.top)},n.onRelease=function(){t.isDragging=!1,t.hidePreview(),t.hide(),t.editor.getSelection().unlock(),t.editor.fire("saveSnapshot")},n.onComplete=function(){t.resizeComplete(),t.editor.fire("saveSnapshot")},n.start(e)}},updateHandles:function(e,t,n){t=t||0,n=n||0;var o=this.handles;for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&r[i](o[i],t,n,e)},showHandles:function(){var e=this.handles;for(var t in this.updateHandles(this.box),e)Object.prototype.hasOwnProperty.call(e,t)&&(e[t].style.display="block")},hideHandles:function(){var e=this.handles;for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(e[t].style.display="none")},showPreview:function(){this.preview.style.backgroundImage='url("'+this.el.src+'")',this.calculateSize(),this.updatePreview(),this.preview.style.display="block"},updatePreview:function(){var e=this.previewBox;f(this.preview,e.left,e.top),this.preview.style.width=this.previewBox.width+"px",this.preview.style.height=this.previewBox.height+"px"},hidePreview:function(){var e=d(this.window,this.preview);this.result={width:e.width,height:e.height},this.preview.style.display="none"},calculateSize:function(e){var t=this.previewBox={top:0,left:0,width:this.box.width,height:this.box.height};if(e){var n=e.target.className;if(~n.indexOf("r")&&(t.width=Math.max(32,this.box.width+e.delta.x)),~n.indexOf("b")&&(t.height=Math.max(32,this.box.height+e.delta.y)),~n.indexOf("l")&&(t.width=Math.max(32,this.box.width-e.delta.x)),~n.indexOf("t")&&(t.height=Math.max(32,this.box.height-e.delta.y)),n.indexOf("m")<0&&!e.keys.shift){var o=this.box.width/this.box.height;t.width/t.height>o?t.height=Math.round(t.width/o):t.width=Math.round(t.height*o)}var r=this.cfg.snapToSize;if(r)for(var i=this.otherImages,a=0;a<i.length;a++){var l=d(this.window,i[a]);if(Math.abs(t.width-l.width)<=r&&Math.abs(t.height-l.height)<=r){t.width=l.width,t.height=l.height;break}}~n.indexOf("l")&&(t.left=this.box.width-t.width),~n.indexOf("t")&&(t.top=this.box.height-t.height)}},resizeComplete:function(){(function(e,t,n){var o=this.editor.config.imageScaleResize;"both"===o?(e.setAttribute("width",String(t)),e.style.width=String(t)+"px",e.setAttribute("height",String(n)),e.style.height=String(n)+"px"):"width"===o||"scale"===o?(e.removeAttribute("height"),e.style.height="auto",e.setAttribute("width",String(t)),e.style.width=String(t)+"px"):"height"===o&&(e.setAttribute("height",String(n)),e.style.height=String(n)+"px",e.removeAttribute("width"),e.style.width="auto")}).call(this,this.el,this.result.width,this.result.height)}},u.prototype={start:function(e){e.preventDefault(),e.stopPropagation(),this.target=e.target,this.attr=e.target.className,this.startPos={x:e.clientX,y:e.clientY},this.update(e);var t=this.events;this.document.addEventListener("mousemove",t.mousemove,!1),this.document.addEventListener("keydown",t.keydown,!1),this.document.addEventListener("mouseup",t.mouseup,!1),this.document.body.classList.add("dragging-"+this.attr),this.onStart&&this.onStart()},update:function(e){this.currentPos={x:e.clientX,y:e.clientY},this.delta={x:e.clientX-this.startPos.x,y:e.clientY-this.startPos.y},this.keys={shift:e.shiftKey,ctrl:e.ctrlKey,alt:e.altKey}},mousemove:function(e){this.update(e),this.onDrag&&this.onDrag(),0===e.which&&this.mouseup(e)},keydown:function(e){27===e.keyCode&&this.release()},mouseup:function(e){this.update(e),this.release(),this.onComplete&&this.onComplete()},release:function(){this.document.body.classList.remove("dragging-"+this.attr);var e=this.events;this.document.removeEventListener("mousemove",e.mousemove,!1),this.document.removeEventListener("keydown",e.keydown,!1),this.document.removeEventListener("mouseup",e.mouseup,!1),this.onRelease&&this.onRelease()}}}},function(e,t,n){"use strict";(function(){if(!CKEDITOR.plugins.get("ae_dragresize_ie11")){var e='<img alt="" src="" />',t=new CKEDITOR.template('<figure class="{captionedClass}">'+e+"<figcaption>{captionPlaceholder}</figcaption></figure>"),n={left:0,center:1,right:2},o=/^\s*(\d+%)\s*$/i;CKEDITOR.plugins.add("ae_dragresize_ie11",{requires:"widget",onLoad:function(){CKEDITOR.addCss(".cke_image_nocaption{line-height:0}.cke_editable.cke_image_ne, .cke_editable.cke_image_ne *{cursor:ne-resize !important}.cke_editable.cke_image_nw, .cke_editable.cke_image_nw *{cursor:nw-resize !important}.cke_editable.cke_image_sw, .cke_editable.cke_image_sw *{cursor:sw-resize !important}.cke_editable.cke_image_se, .cke_editable.cke_image_se *{cursor:se-resize !important}.cke_image_resizer{display:none;position:absolute;width:10px;height:10px;background:#000;outline:1px solid #fff;line-height:0;cursor:se-resize;}.cke_image_resizer_wrapper{position:relative;display:inline-block;line-height:0;}.cke_image_resizer.cke_image_resizer_ne{cursor:ne-resize;left:auto;right:-5px;top:-5px;}.cke_image_resizer.cke_image_resizer_nw{cursor:nw-resize;left:-5px;right:auto;top:-5px;}.cke_image_resizer.cke_image_resizer_se{bottom:-5px;cursor:se-resize;left:auto;right:-5px;}.cke_image_resizer.cke_image_resizer_sw{bottom:-5px;cursor:sw-resize;left:-5px;right:auto;}.cke_widget_wrapper:hover .cke_image_resizer,.cke_image_resizing>.cke_image_resizer{display:block}.cke_widget_wrapper>a{display:inline-block}")},init:function(e){var t=i(e);e.widgets.add("image",t),e.on("selectionChange",function(t){var n=e.getSelection();if(n){var o=n.getSelectedElement();if(o){var r=o.findOne("img");if(r){var i=o.getClientRect(),a=new CKEDITOR.dom.window(window).getScrollPosition();i.left-=a.x,i.top+=a.y,i.direction=CKEDITOR.SELECTION_BOTTOM_TO_TOP,e.fire("editorInteraction",{nativeEvent:{},selectionData:{element:r,region:i}})}}}})},afterInit:function(e){var t={left:1,right:1,center:1,block:1},n=function(e){var t=[],n=void 0;return function(o){var i=e.getCommand("justify"+o);i&&(t.push(function(){i.refresh(e,e.elementPath())}),o in{right:1,left:1,center:1}&&i.on("exec",function(n){var i=c(e);if(i){i.data.align===o?(r(i,o),delete i.data.align):i.setData("align",o);for(var a=t.length;a--;)t[a]();n.cancel()}}),i.on("refresh",function(t){var r=c(e);r&&(void 0===n&&(n=e.filter.checkFeature(e.widgets.registered.image.features.align)),n?this.setState(r.data.align==o?CKEDITOR.TRISTATE_ON:o in{right:1,left:1,center:1}?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED):this.setState(CKEDITOR.TRISTATE_DISABLED),t.cancel())}))}}(e);for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&n(o)}}),CKEDITOR.plugins.ae_dragresize_ie11={stateShifter:function(e){var n=e.document,o=e.config.ae_dragresize_ie11_alignClasses,r=e.config.ae_dragresize_ie11_captionedClass,i=e.editable(),a=["hasCaption","align","link"],l={align:function(t,n,r){var i=t.element;t.changed.align||"auto"===i.$.style.marginLeft&&"auto"===i.$.style.marginRight?t.newData.hasCaption||(("center"==r||"auto"===i.$.style.marginLeft&&"auto"===i.$.style.marginRight)&&(t.deflate(),t.element=s(e,i)),t.changed.hasCaption||"center"!=n||"center"==r||(t.deflate(),t.element=function(e){var t=e.findOne("a,img");return t.replace(e),t}(i))):"center"==r&&t.changed.hasCaption&&!t.newData.hasCaption&&(t.deflate(),t.element=s(e,i)),!o&&i.is("figure")&&("center"==r?i.setStyle("display","inline-block"):i.removeStyle("display"))},hasCaption:function(o,i,a){if(o.changed.hasCaption){var l=void 0;if(l=o.element.is({img:1,a:1})?o.element:o.element.findOne("a,img"),o.deflate(),a){var s=CKEDITOR.dom.element.createFromHtml(t.output({captionedClass:r,captionPlaceholder:e.lang.ae_dragresize_ie11.captionPlaceholder}),n);c(s,o.element),l.replace(s.findOne("img")),o.element=s}else l.replace(o.element),o.element=l}},link:function(t,n,o){if(t.changed.link){var r=t.element.is("img")?t.element:t.element.findOne("img"),i=t.element.is("a")?t.element:t.element.findOne("a"),a=t.element.is("a")&&!o||t.element.is("img")&&o,l=void 0;if(a&&t.deflate(),o){n||(l=u(r,t.newData.link));var s=CKEDITOR.plugins.ae_dragresize_ie11.getLinkAttributesGetter()(e,o);CKEDITOR.tools.isEmpty(s.set)||(l||i).setAttributes(s.set),s.removed.length&&(l||i).removeAttributes(s.removed)}else l=function(e){var t=e.findOne("img");return t.replace(e),t}(i);a&&(t.element=l)}}};function s(e,t){var r={};o?r.attributes={class:o[1]}:r.styles={"text-align":"center"};var i=n.createElement(e.activeEnterMode==CKEDITOR.ENTER_P?"p":"div",r);return c(i,t),t.move(i),i}function u(e,t){var o=n.createElement("a",{attributes:{href:t.url}});return o.replace(e),e.move(o),o}function c(t,n){if(n.getParent()){var o=e.createRange();o.moveToPosition(n,CKEDITOR.POSITION_BEFORE_START),n.remove(),i.insertElementIntoRange(t,o)}else t.replace(n)}return function(e){var t=void 0,n=void 0;for(e.changed={},n=0;n<a.length;n++)t=a[n],e.changed[t]=!!e.oldData&&e.oldData[t]!==e.newData[t];for(n=0;n<a.length;n++)l[t=a[n]](e,e.oldData?e.oldData[t]:null,e.newData[t]);e.inflate()}},checkHasNaturalRatio:function(e){var t=e.$,n=this.getNatural(e);return Math.round(t.clientWidth/n.width*n.height)==t.clientHeight||Math.round(t.clientHeight/n.height*n.width)==t.clientWidth},getNatural:function(e){var t=void 0;if(e.$.naturalWidth)t={width:e.$.naturalWidth,height:e.$.naturalHeight};else{var n=new Image;n.src=e.getAttribute("src"),t={width:n.width,height:n.height}}return t},getLinkAttributesGetter:function(){return CKEDITOR.plugins.link.getLinkAttributes},getLinkAttributesParser:function(){return CKEDITOR.plugins.link.parseLinkAttributes}};var r=function(e,t){"left"===t||"right"===t?e.wrapper.removeStyle("float"):"center"===t&&(e.editor.execCommand("justifyleft"),e.editor.execCommand("justifyleft"))}}function i(t){var o=t.config.ae_dragresize_ie11_alignClasses,r=t.config.ae_dragresize_ie11_captionedClass;function i(){this.deflated||(t.widgets.focused==this.widget&&(this.focused=!0),t.widgets.destroy(this.widget),this.deflated=!0)}function s(){var e=t.editable(),n=t.document;if(this.deflated){if(this.widget=t.widgets.initOn(this.element,"image",this.widget.data),this.widget.inline&&!new CKEDITOR.dom.elementPath(this.widget.wrapper,e).block){var r=n.createElement(t.activeEnterMode==CKEDITOR.ENTER_P?"p":"div");r.replace(this.widget.wrapper),this.widget.wrapper.move(r)}this.focused&&(this.widget.focus(),delete this.focused),delete this.deflated}else a(this.widget,o)}return{allowedContent:f(t),requiredContent:"img[src,alt]",features:function(e){var t=e.config.ae_dragresize_ie11_alignClasses;return{dimension:{requiredContent:"img[width,height]"},align:{requiredContent:"img"+(t?"("+t[0]+")":"{float}")},caption:{requiredContent:"figcaption"}}}(t),styleableElements:"img figure",contentTransformations:[["img[width]: sizeToAttribute"]],editables:{caption:{selector:"figcaption",allowedContent:"br em strong sub sup u s; a[!href,target]"}},parts:{image:"img",caption:"figcaption"},template:e,data:function(){var e=this.features;if(this.data.hasCaption&&!t.filter.checkFeature(e.caption)&&(this.data.hasCaption=!1),"none"==this.data.align||t.filter.checkFeature(e.align)||(this.data.align="none"),this.shiftState({widget:this,element:this.element,oldData:this.oldData,newData:this.data,deflate:i,inflate:s}),this.data.link?this.parts.link||(this.parts.link=this.parts.image.getParent()):this.parts.link&&delete this.parts.link,this.parts.image.setAttributes({src:this.data.src,"data-cke-saved-src":this.data.src,alt:this.data.alt}),this.oldData&&!this.oldData.hasCaption&&this.data.hasCaption)for(var n in this.data.classes)Object.prototype.hasOwnProperty.call(this.data.classes,n)&&this.parts.image.removeClass(n);t.filter.checkFeature(e.dimension)&&function(e){var t=e.data,n={width:t.width,height:t.lock?null:t.height},o=e.parts.image;for(var r in n)n[r]?o.setAttribute(r,n[r]):o.removeAttribute(r)}(this),this.oldData=CKEDITOR.tools.extend({},this.data)},init:function(){var e=CKEDITOR.plugins.ae_dragresize_ie11,r=this.parts.image,i={hasCaption:!!this.parts.caption,src:r.getAttribute("src"),alt:r.getAttribute("alt")||"",width:r.getAttribute("width")||"",lock:!this.ready||e.checkHasNaturalRatio(r)};i.height=i.lock?null:r.getAttribute("height")||"";var a=r.getAscendant("a");if(a&&this.wrapper.contains(a)&&(this.parts.link=a),!i.align){var l=i.hasCaption?this.element:r;o?(l.hasClass(o[0])?i.align="left":l.hasClass(o[2])&&(i.align="right"),i.align?l.removeClass(o[n[i.align]]):i.align="none"):(i.align=l.getStyle("float")||"none",l.removeStyle("float"))}if(t.plugins.link&&this.parts.link){i.link=e.getLinkAttributesParser()(t,this.parts.link);var s=i.link.advanced;s&&s.advCSSClasses&&(s.advCSSClasses=CKEDITOR.tools.trim(s.advCSSClasses.replace(/cke_\S+/,"")))}this.wrapper[(i.hasCaption?"remove":"add")+"Class"]("cke_image_nocaption"),this.setData(i),t.filter.checkFeature(this.features.dimension)&&!0!==t.config.ae_dragresize_ie11_disableResizer&&function(e){var t=e.editor,n=t.editable(),o=t.document,r=e.resizer=o.createElement("span"),i=o.createElement("span"),a=o.createElement("span"),l=o.createElement("span"),s=o.createElement("span");if(i.addClass("cke_image_resizer"),i.addClass("cke_image_resizer_ne"),a.addClass("cke_image_resizer"),a.addClass("cke_image_resizer_nw"),l.addClass("cke_image_resizer"),l.addClass("cke_image_resizer_se"),s.addClass("cke_image_resizer"),s.addClass("cke_image_resizer_sw"),r.append(i),r.append(a),r.append(l),r.append(s),r.append(new CKEDITOR.dom.text("​",o)),e.inline)e.wrapper.append(r);else{var u=e.parts.link||e.parts.image,c=u.getParent(),f=o.createElement("span");f.addClass("cke_image_resizer_wrapper"),f.append(u),f.append(r),e.element.append(f,!0),c.is("span")&&c.remove()}r.on("mousedown",function(i){var a=e.parts.image,l=i.data.$.screenX,s=i.data.$.screenY,u=a.$.clientWidth,c=a.$.clientHeight,f=u/c,d=[],p=i.data.getTarget(),h=void 0,m=void 0,y=void 0,b=void 0,g=void 0,v=void 0,_=void 0,E=void 0;p.hasClass("cke_image_resizer_ne")?(h=1,m=1):p.hasClass("cke_image_resizer_nw")?(h=-1,m=1):p.hasClass("cke_image_resizer_se")?(h=1,m=-1):p.hasClass("cke_image_resizer_sw")&&(h=-1,m=-1);var O="cke_image_"+(~m?"n":"s")+(~h?"e":"w");function w(e,t,n){var r=CKEDITOR.document,i=[];if(o.equals(r)||i.push(r.on(e,t)),i.push(o.on(e,t)),n)for(var a=i.length;a--;)n.push(i.pop())}function C(){_=u+h*y,v=Math.round(_/f)}function k(){v=c+m*b,_=Math.round(v*f)}t.fire("saveSnapshot"),w("mousemove",function(t){g=t.data.$,y=g.screenX-l,b=s-g.screenY,1==h?y<=0?k():C():y<=0?C():k(),_>=15&&v>=15?(a.$.style.width=_+"px",a.$.style.height=e.data.lock?"auto":v+"px",E=!0):E=!1},d),w("mouseup",function(){var o=void 0;for(;o=d.pop();)o.removeListener();n.removeClass(O),r.removeClass("cke_image_resizing"),E&&(e.setData({height:e.data.lock?null:v,width:_}),t.fire("saveSnapshot")),E=!1},d),n.addClass(O),r.addClass("cke_image_resizing")})}(this);var u=this.dragHandlerContainer.$.style;u.setAttribute("backgroundColor","rgba(255, 255, 255, 1"),u.setAttribute("opacity","1"),this.shiftState=e.stateShifter(this.editor),this.on("contextMenu",function(e){e.data.image=CKEDITOR.TRISTATE_OFF,(this.parts.link||this.wrapper.getAscendant("a"))&&(e.data.link=e.data.unlink=CKEDITOR.TRISTATE_OFF)})},addClass:function(e){d(this).addClass(e)},hasClass:function(e){return d(this).hasClass(e)},removeClass:function(e){d(this).removeClass(e)},getClasses:function(){var e=new RegExp("^("+[].concat(r,o).join("|")+")$");return function(){var t=this.repository.parseElementClasses(d(this).getAttribute("class"));for(var n in t)e.test(n)&&delete t[n];return t}}(),upcast:l(t),downcast:function(e){var t=e.config.ae_dragresize_ie11_alignClasses;return function(e){var o="a"==e.name?e.getFirst():e,r=o.attributes,i=this.data.align;if(!this.inline){var a=e.getFirst("span");a&&a.replaceWith(a.getFirst({img:1,a:1}))}if(i&&"none"!=i){var l=CKEDITOR.tools.parseCssText(r.style||"");"center"==i&&"figure"==e.name?e=e.wrapWith(new CKEDITOR.htmlParser.element("div",t?{class:t[1]}:{style:"text-align:center"})):i in{left:1,right:1}&&(t?o.addClass(t[n[i]]):l.float=i),t||CKEDITOR.tools.isEmpty(l)||(r.style=CKEDITOR.tools.writeCssText(l)+";")}return e}}(t),getLabel:function(){var e=(this.data.alt||"")+" "+this.pathName;return this.editor.lang.widget.label.replace(/%1/,e)}}}function a(e,t){var o=e.wrapper,r=e.data.align,i=e.data.hasCaption;if(t){for(var a=3;a--;)o.removeClass(t[a]);"center"==r?i&&o.addClass(t[1]):"none"!=r&&o.addClass(t[n[r]])}else{"center"==r?(i?o.setStyle("text-align","center"):o.removeStyle("text-align"),o.removeStyle("float")):("none"==r?o.removeStyle("float"):o.setStyle("float",r),o.removeStyle("text-align"));var l=o.$.querySelector("img"),s=l.getAttribute("style");if(s){var u="",c=/(height:.+?;)/.exec(s);c&&(u+=c[0]);var f=/(width:.+?;)/.exec(s);f&&(u+=f[0]),l.setAttribute("style",u)}}}function l(e){var t=s(e),n=e.config.ae_dragresize_ie11_captionedClass;return function(e,r){var i={width:1,height:1},a=e.name,l=void 0;if(!e.attributes["data-cke-realelement"]){if(t(e)){if("div"==a){var s=e.getFirst("figure");s&&(e.replaceWith(s),e=s)}r.align="center",l=e.getFirst("img")||e.getFirst("a").getFirst("img")}else"figure"==a&&e.hasClass(n)?l=e.getFirst("img")||e.getFirst("a").getFirst("img"):u(e)&&(l="a"==e.name?e.children[0]:e);if(l){for(var c in i)if(Object.prototype.hasOwnProperty.call(i,c)){var f=l.attributes[c];f&&f.match(o)&&delete l.attributes[c]}return e}}}}function s(e){var t=e.config.ae_dragresize_ie11_captionedClass,n=e.config.ae_dragresize_ie11_alignClasses,o={figure:1,a:1,img:1};return function(r){if(!(r.name in{div:1,p:1}))return!1;var i=r.children;if(1!==i.length)return!1;var a=i[0];if(!(a.name in o))return!1;if("p"==r.name){if(!u(a))return!1}else if("figure"==a.name){if(!a.hasClass(t))return!1}else{if(e.enterMode==CKEDITOR.ENTER_P)return!1;if(!u(a))return!1}return!(n?!r.hasClass(n[1]):"center"!=CKEDITOR.tools.parseCssText(r.attributes.style||"",!0)["text-align"])}}function u(e){return"img"==e.name||"a"==e.name&&1==e.children.length&&e.getFirst("img")}function c(e){var t=e.widgets.focused;return t&&"image"==t.name?t:null}function f(e){var t=e.config.ae_dragresize_ie11_alignClasses,n={div:{match:s(e)},p:{match:s(e)},img:{attributes:"!src,alt,width,height"},figure:{classes:"!"+e.config.ae_dragresize_ie11_captionedClass},figcaption:!0};return t?(n.div.classes=t[1],n.p.classes=n.div.classes,n.img.classes=t[0]+","+t[2],n.figure.classes+=","+n.img.classes):(n.div.styles="text-align",n.p.styles="text-align",n.img.styles="float",n.figure.styles="float,display"),n}function d(e){return e.data.hasCaption?e.element:e.parts.image}})(),CKEDITOR.config.ae_dragresize_ie11_captionedClass="image"},function(e,t,n){"use strict";var o=n(125);if(!CKEDITOR.plugins.get("ae_embed")){var r=/^https?/,i=/<a href=/;CKEDITOR.DEFAULT_AE_EMBED_URL_TPL="http://alloy.iframe.ly/api/oembed?url={url}&callback={callback}",CKEDITOR.DEFAULT_AE_EMBED_WIDGET_TPL='<div data-ae-embed-url="{url}"></div>',CKEDITOR.DEFAULT_AE_EMBED_DEFAULT_LINK_TPL='<a href="{url}">{url}</a>',CKEDITOR.plugins.add("ae_embed",{requires:"widget",init:function(e){var t=new CKEDITOR.template(e.config.embedUrlTemplate||CKEDITOR.DEFAULT_AE_EMBED_URL_TPL),n=new CKEDITOR.template(e.config.embedWidgetTpl||CKEDITOR.DEFAULT_AE_EMBED_WIDGET_TPL),a=new CKEDITOR.template(e.config.embedLinkDefaultTpl||CKEDITOR.DEFAULT_AE_EMBED_DEFAULT_LINK_TPL),l=function(e,t){if("div"===e.name&&e.attributes["data-ae-embed-url"])return t.url=e.attributes["data-ae-embed-url"],!0};e.addCommand("embedUrl",{exec:function(e,t){e.insertHtml(n.output({url:t.url}))}}),e.widgets.add("ae_embed",{mask:!0,requiredContent:"div[data-ae-embed-url]",data:function(e){var n=this,o=e.data.url;o&&CKEDITOR.tools.jsonp(t,{url:encodeURIComponent(o)},function(e){e.html?i.test(e.html)?n.createATag(o):n.element.setHtml(e.html):n.createATag(o)},function(e){n.createATag(o)})},createATag:function(e){this.editor.execCommand("undo");var t=a.output({url:e});this.editor.insertHtml(t),this.editor.fire("actionPerformed",this)},upcast:function(t,n){return(e.config.embedWidgetUpcastFn||l)(t,n)}}),e.once("contentDom",function(){e.on("paste",function(t){var n=t.data.dataValue;r.test(n)&&(t.stop(),e.execCommand("embedUrl",{url:t.data.dataValue}))},null,null,o.HIGH_PRIORITY)}),e.on("selectionChange",function(t){var n=e.getSelection();if(n){var o=n.getSelectedElement();if(o){var r=o.findOne('[data-widget="ae_embed"]');if(r){var i=o.getClientRect(),a=new CKEDITOR.dom.window(window).getScrollPosition();i.left-=a.x,i.top+=a.y,i.direction=CKEDITOR.SELECTION_BOTTOM_TO_TOP,e.fire("editorInteraction",{nativeEvent:{},selectionData:{element:r,region:i}})}}}}),e.filter.addElementCallback(function(e){if("data-ae-embed-url"in e.attributes)return CKEDITOR.FILTER_SKIP_TREE})}})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_PRIORITY=10,t.HIGH_PRIORITY=5},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){return e&&e.__esModule?e:{default:e}}(n(127));if(!CKEDITOR.plugins.get("embedurl")){var r=/^https?/;CKEDITOR.DEFAULT_LFR_EMBED_WIDGET_TPL='<div data-embed-url="{url}" class="embed-responsive embed-responsive-16by9">{content}<div class="embed-help-message">{helpMessageIcon}<span> {helpMessage}</span></div></div><br>';var i={CENTER:"center",LEFT:"left",RIGHT:"right"},a=[i.CENTER,i.LEFT,i.RIGHT],l=[{name:"display",value:"block"},{name:"margin-left",value:"auto"},{name:"margin-right",value:"auto"}],s=function(e){var t=e.getStyle("float");(t&&"inherit"!==t&&"none"!==t||(t=e.getAttribute("align")),t)||(t=l.every(function(t){var n=e.getStyle(t.name)===t.value;return!n&&t.vendorPrefixes&&(n=t.vendorPrefixes.some(function(n){return e.getStyle(n+t.name)===t.value})),n})?i.CENTER:null);return t},u=function(e,t){t===i.LEFT||t===i.RIGHT?(e.removeStyle("float"),t===s(e)&&e.removeAttribute("align")):t===i.CENTER&&l.forEach(function(t){e.removeStyle(t.name),t.vendorPrefixes&&t.vendorPrefixes.forEach(function(n){return e.removeStyle(n+t.name)})})},c=function(e,t){u(e,s(e)),t===i.LEFT||t===i.RIGHT?e.setStyle("float",t):t===i.CENTER&&l.forEach(function(t){e.setStyle(t.name,t.value),t.vendorPrefixes&&t.vendorPrefixes.forEach(function(n){return e.setStyle(n+t.name,t.value)})})},f=function(e){setTimeout(function(){var t=e.getSelection();if(t){var n=t.root.find("[data-cke-widget-wrapper]");if(n){var o=n.$;if(o.length>0){var r=new CKEDITOR.dom.element(o[o.length-1]),i=r.findOne("img"),a=r.findOne('[data-widget="embedurl"]');if(i&&a){var l=e.createRange();l.setStart(a,0),l.setEnd(i,1),t.selectRanges([l]),t.selectElement(r)}}}}},0)},d=null,p=null,h=null;CKEDITOR.plugins.add("embedurl",{requires:"widget",init:function(e){var t=new CKEDITOR.template(e.config.embedWidgetTpl||CKEDITOR.DEFAULT_LFR_EMBED_WIDGET_TPL),n=e.config.embedProviders||[];n=n.map(function(e){return{id:e.id,tpl:new CKEDITOR.template('<div data-embed-id="{embedId}">'+e.tpl+"</div>"),type:e.type,urlSchemes:e.urlSchemes.map(function(e){return new RegExp(e)})}});var i=function(e,n){return t.output({content:n,helpMessage:AlloyEditor.Strings.videoPlaybackDisabled,helpMessageIcon:Liferay.Util.getLexiconIconTpl("info-circle"),url:e})},a=function(e,t){var n=!1;if("div"===e.name&&e.attributes["data-embed-url"])t.url=e.attributes["data-embed-url"],n=!0;else if("div"===e.name&&e.attributes["data-embed-id"]){var o=e.children[0];t.url=o.attributes.src,delete e.attributes.style;var r=i(t.url,e.getOuterHtml());(n=new CKEDITOR.htmlParser.fragment.fromHtml(r).children[0]).attributes["data-styles"]=e.attributes["data-styles"],n.removeClass("embed-responsive"),n.removeClass("embed-responsive-16by9"),e.replaceWith(n)}return n},l=function(t){e.fire("error",t),setTimeout(function(){e.getSelection().removeAllRanges(),e.focus(),h.hide()},0)};e.addCommand("embedUrl",{exec:function(e,t){var o=t.type,a=t.url,s=void 0;if(r.test(a))if(n.filter(function(e){return!o||e.type===o}).some(function(e){var t=e.urlSchemes.find(function(e){return e.test(a)});if(t){var n=t.exec(a)[1];s=e.tpl.output({embedId:n})}return t})){e._selectEmbedWidget=a;var u=i(a,s);e.insertHtml(u)}else l(AlloyEditor.Strings.platformNotSupported);else l(AlloyEditor.Strings.enterValidUrl)}}),e.widgets.add("embedurl",{draggable:!1,mask:!0,requiredContent:"div[data-embed-url]",data:function(t){var n=this,o=null,r=n.element.getAttribute("data-styles");if(r)try{o=JSON.parse(r)}catch(e){o=null}if(!o){var i=n.wrapper.findOne("iframe"),a=n.wrapper.$.getBoundingClientRect(),l=i.getAttribute("width");o={width:(l>=a.width?100:Math.round(l/a.width*100))+"%"}}n.wrapper.setAttribute("style",CKEDITOR.tools.writeCssText(o)),e._selectEmbedWidget===t.data.url&&f(e)},downcast:function(e){var t=e.children[0];return t.attributes.class="embed-responsive embed-responsive-16by9",t.attributes["data-styles"]=JSON.stringify(CKEDITOR.tools.parseCssText(e.parent.attributes.style)),t.attributes.style=e.parent.attributes.style,t},upcast:function(t,n){return(e.config.embedWidgetUpcastFn||a)(t,n)}}),window.addEventListener("resize",function(){h.hide(),f(e)},!1),e.on("selectionChange",function(t){var n=e.getSelection();if(n){var o=n.getSelectedElement();if(o){var r=o.findOne('[data-widget="embedurl"]');if(r){var i=new CKEDITOR.dom.window(window).getScrollPosition(),a=o.getClientRect();a.direction=CKEDITOR.SELECTION_BOTTOM_TO_TOP,a.left-=i.x,a.top+=i.y,e.fire("editorInteraction",{nativeEvent:{},selectionData:{element:r,region:a}})}var l=o.findOne("img.cke_widget_mask");l&&h.show(l.$)}else h.hide()}}),e.on("destroy",function(){var e=document.getElementById("ckimgrsz");e&&e.remove(),document.removeEventListener("mousedown",u)}),e.on("blur",function(){h.hide()}),e.filter.addElementCallback(function(e){if("data-embed-url"in e.attributes)return CKEDITOR.FILTER_SKIP_TREE});var u=function(t){var n=function(e){var t={alignment:null,element:null},n=e.getSelection();if(n){var o=n.getSelectedElement();o&&o.getAttribute("data-cke-widget-wrapper")&&(t.alignment=s(o),t.element=o)}return t}(e);d=n.alignment,p=n.element,h.isHandle(t.target)&&h.initDrag(t)};h=new o.default(e,{onComplete:function(t,n,o){(function(e,t,n){var o=e.parentElement;if(o&&t>0&&n>0){var r=o.getBoundingClientRect(),i="width:"+(t>=r.width?100:Math.floor(t/r.width*100))+"%;";o.setAttribute("style",i);var a=o.querySelector('[data-widget="embedurl"]');if(a){var l=JSON.parse(a.getAttribute("data-styles"))||{};l.width=t+"px",l.height=n+"px",a.setAttribute("data-styles",JSON.stringify(l));var s=a.querySelector("iframe");s&&(s.setAttribute("width",t),s.setAttribute("height",n))}}})(t,n,o),d&&p&&c(p,d),f(e)}}),document.addEventListener("mousedown",u,!1)},afterInit:function(e){a.forEach(function(t){var n=e.getCommand("justify"+t);n&&(n.on("exec",function(n){var o=e.getSelection().getSelectedElement();if(o&&o.getAttribute("data-cke-widget-wrapper")&&o.findOne('[data-widget="embedurl"] [data-embed-id]')){s(o)===t?u(o,t):c(o,t),p=o,d=s(o);var r=o.findOne("img");r&&h.show(r.$),n.cancel();var i=new CKEDITOR.dom.elementPath(o);a.forEach(function(t){var n=e.getCommand("justify"+t);n&&n.refresh(e,i)})}}),n.on("refresh",function(e){var n=e.data.path.lastElement;if(n&&n.getAttribute("data-cke-widget-wrapper")&&n.findOne("[data-widget] [data-embed-id]")){var o=s(n);e.sender.setState(o===t?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF),e.cancel()}}))})}})}t.default=CKEDITOR.plugins.get("embedurl")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Resizer=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=function(e){return e&&e.__esModule?e:{default:e}}(n(128));var i=["tl","tr","bl","br"],a={bl:function(e,t,n,o){l(e,-3+t,o.height-4+n)},br:function(e,t,n,o){l(e,o.width-4+t,o.height-4+n)},rm:function(e,t,n,o){l(e,o.width-4+t,Math.round(o.height/2)-3+n)},tl:function(e,t,n,o){l(e,t-3,n-3)},tr:function(e,t,n,o){l(e,o.width-4+t,-3+n)}},l=function(e,t,n){e.style.left=t+"px",e.style.top=n+"px"},s=function(e,t){var n=t.getBoundingClientRect();return{height:n.height,left:n.left+e.pageXOffset,top:n.top+e.pageYOffset,width:n.width}},u=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.cfg=n,this.editor=t,this.document=t.document?t.document.$:document,this.window=t.window?t.window.$:window,this.box=null,this.container=null,this.handles={},this.preview=null,this.previewBox=null,this.result=null,this.init()}return o(e,[{key:"init",value:function(){var e=this;this.container=this.document.createElement("div"),this.container.id="ckimgrsz",this.preview=this.document.createElement("span"),this.container.appendChild(this.preview),this.handles={},i.forEach(function(t){e.handles[t]=e.createHandle(t)});for(var t=Object.keys(this.handles),n=0;n<t.length;n++)this.container.appendChild(this.handles[t[n]])}},{key:"createHandle",value:function(e){var t=this.document.createElement("i");return t.classList.add(e),t}},{key:"isHandle",value:function(e){for(var t=Object.keys(this.handles),n=!1,o=0;o<t.length;o++)this.handles[t[o]]===e&&(n=!0);return n}},{key:"show",value:function(e){var t=this.editor.config.uiNode||document.body;this.el=e,this.box=s(this.window,this.el),l(this.container,this.box.left,this.box.top+t.scrollTop),t.appendChild(this.container),this.el.classList.add("ckimgrsz"),this.showHandles()}},{key:"hide",value:function(){for(var e=this.document.getElementsByClassName("ckimgrsz"),t=0;t<e.length;t++)e[t].classList.remove("ckimgrsz");this.hideHandles(),this.container.parentNode&&this.container.parentNode.removeChild(this.container)}},{key:"initDrag",value:function(e){var t=this;if(0===e.button){var n=new r.default(this.window,this.document);n.onStart=function(){t.showPreview(),t.isDragging=!0,t.editor.getSelection().lock()},n.onDrag=function(){t.calculateSize(n);var e=t.editor.element.$.getBoundingClientRect();if(!(t.previewBox.width>=e.width)){t.updatePreview();var o=t.previewBox;t.updateHandles(o,o.left,o.top)}},n.onRelease=function(){t.hidePreview(),t.isDragging=!1,t.hide(),t.editor.getSelection().unlock(),t.editor.fire("saveSnapshot")},n.onComplete=function(){t.resizeComplete(),t.editor.fire("saveSnapshot")},n.start(e)}}},{key:"updateHandles",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=Object.keys(this.handles),r=0;r<o.length;r++)a[o[r]](this.handles[o[r]],t,n,e)}},{key:"showHandles",value:function(){this.updateHandles(this.box);for(var e=Object.keys(this.handles),t=0;t<e.length;t++)this.handles[e[t]].style.display="block"}},{key:"hideHandles",value:function(){for(var e=Object.keys(this.handles),t=0;t<e.length;t++)this.handles[e[t]].style.display="none"}},{key:"showPreview",value:function(){this.calculateSize(),this.updatePreview(),this.preview.style.display="block"}},{key:"updatePreview",value:function(){l(this.preview,this.previewBox.left,this.previewBox.top),this.preview.style.height=this.previewBox.height+"px",this.preview.style.width=this.previewBox.width+"px"}},{key:"hidePreview",value:function(){var e=s(this.window,this.preview);this.result={height:e.height,width:e.width},this.preview.style.display="none"}},{key:"calculateSize",value:function(e){if(this.previewBox={height:this.box.height,left:0,top:0,width:this.box.width},e){var t=e.target.className;if(t.indexOf("r")>=0&&(this.previewBox.width=Math.max(32,this.box.width+e.delta.x)),t.indexOf("b")>=0&&(this.previewBox.height=Math.max(32,this.box.height+e.delta.y)),t.indexOf("l")>=0&&(this.previewBox.width=Math.max(32,this.box.width-e.delta.x)),t.indexOf("t")>=0&&(this.previewBox.height=Math.max(32,this.box.height-e.delta.y)),t.indexOf("m")<0&&!e.keys.shift){var n=this.box.width/this.box.height;this.previewBox.width/this.previewBox.height>n?this.previewBox.height=Math.round(this.previewBox.width/n):this.previewBox.width=Math.round(this.previewBox.height*n)}t.indexOf("l")>=0&&(this.previewBox.left=this.box.width-this.previewBox.width),t.indexOf("t")>=0&&(this.previewBox.top=this.box.height-this.previewBox.height)}}},{key:"resizeComplete",value:function(){this.cfg.onComplete(this.el,this.result.width,this.result.height)}}]),e}();t.Resizer=u,t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var r=function(){function e(t,n){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.document=n,this.window=t,this.events={keydown:this.keydown.bind(this),mousemove:this.mousemove.bind(this),mouseup:this.mouseup.bind(this)}}return o(e,[{key:"start",value:function(e){e.preventDefault(),e.stopPropagation(),this.target=e.target,this.className=this.target.className,this.startPos={x:e.clientX,y:e.clientY},this.update(e),this.document.addEventListener("keydown",this.events.keydown,!1),this.document.addEventListener("mousemove",this.events.mousemove,!1),this.document.addEventListener("mouseup",this.events.mouseup,!1),this.document.body.classList.add("dragging-"+this.className),"function"==typeof this.onStart&&this.onStart()}},{key:"update",value:function(e){this.currentPos={x:e.clientX,y:e.clientY},this.delta={x:e.clientX-this.startPos.x,y:e.clientY-this.startPos.y},this.keys={alt:e.altKey,ctrl:e.ctrlKey,shift:e.shiftKey}}},{key:"mousemove",value:function(e){this.update(e),"function"==typeof this.onDrag&&this.onDrag(),0===e.which&&this.mouseup(e)}},{key:"keydown",value:function(e){27===e.keyCode&&this.release()}},{key:"mouseup",value:function(e){this.update(e),this.release(),"function"==typeof this.onComplete&&this.onComplete()}},{key:"release",value:function(){this.document.body.classList.remove("dragging-"+this.className),this.document.removeEventListener("keydown",this.events.keydown,!1),this.document.removeEventListener("mousemove",this.events.mousemove,!1),this.document.removeEventListener("mouseup",this.events.mouseup,!1),"function"==typeof this.onRelease&&this.onRelease()}}]),e}();t.DragEvent=r,t.default=r},function(e,t,n){"use strict";var o=function(e){return e&&e.__esModule?e:{default:e}}(n(22));function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}if(!CKEDITOR.plugins.get("ae_imagealignment")){var i,a={CENTER:"center",LEFT:"left",RIGHT:"right"},l=[a.LEFT,a.RIGHT,a.CENTER],s=(r(i={},a.LEFT,[{name:"display",value:"inline-block"},{name:"float",value:"left"},{name:"margin-right",value:"1.2rem"}]),r(i,a.CENTER,[{name:"display",value:"block"},{name:"margin-left",value:"auto"},{name:"margin-right",value:"auto"}]),r(i,a.RIGHT,[{name:"display",value:"inline-block"},{name:"float",value:"right"},{name:"margin-left",value:"1.2rem"}]),i),u=function(e){var t=e.getStyle("float");if(t&&"inherit"!==t&&"none"!==t||(t=e.getAttribute("align")),!t){var n=s[a.CENTER].every(function(t){var n=e.getStyle(t.name)===t.value;return!n&&t.vendorPrefixes&&(n=t.vendorPrefixes.some(function(n){return e.getStyle(n+t.name)===t.value})),n});if(!t){var o=e.$.parentNode;o.style.textAlign==a.CENTER&&(s[a.CENTER].forEach(function(t){e.setStyle(t.name,t.value),t.vendorPrefixes&&t.vendorPrefixes.forEach(function(n){e.setStyle(n+t.name,t.value)})}),n=!0,o.style.textAlign="")}t=n?a.CENTER:null}if(!CKEDITOR.env.edge&&CKEDITOR.env.ie){var r=e.findOne("p");r&&(t=r.getStyle("text-align"))}return t},c=function(e,t){if(t===a.LEFT||t===a.RIGHT)t===u(e)&&e.removeAttribute("align");else if(t===a.CENTER){var n=e.$.parentNode;n.style.textAlign==a.CENTER&&(n.style.textAlign="")}var o=s[t];o&&o.forEach(function(t){e.removeStyle(t.name),t.vendorPrefixes&&t.vendorPrefixes.forEach(function(n){e.removeStyle(n+t.name)})})};CKEDITOR.plugins.add("ae_imagealignment",{afterInit:function(e){var t=this;l.forEach(function(n){var r=e.getCommand("justify"+n);r&&(r.on("exec",function(r){var i=e.getSelectionData();if(i&&o.default.image({data:{selectionData:i}})){var a=i.element;u(a)===n?c(a,n):function(e,t){c(e,u(e));var n=s[t];n&&n.forEach(function(t){e.setStyle(t.name,t.value),t.vendorPrefixes&&t.vendorPrefixes.forEach(function(n){e.setStyle(n+t.name,t.value)})})}(a,n),r.cancel(),t.refreshCommands(e,new CKEDITOR.dom.elementPath(a))}}),r.on("refresh",function(e){var t={element:e.data.path.lastElement};if(o.default.image({data:{selectionData:t}})){var r=u(t.element);this.setState(r===n?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF),e.cancel()}}))})},refreshCommands:function(e,t){l.forEach(function(n){var o=e.getCommand("justify"+n);o&&o.refresh(e,t)})}})}},function(e,t,n){"use strict";CKEDITOR.plugins.get("ae_pasteimages")||CKEDITOR.plugins.add("ae_pasteimages",{init:function(e){var t=this;e.once("contentDom",function(){var n=e.editable();n.attachListener(n,"paste",t._onPaste,t,{editor:e})})},_onPaste:function(e){if(e.data.$.clipboardData){var t=e.data.$.clipboardData.items[0],n=e.listenerData.editor;if(0===t.type.indexOf("image")){var o=new FileReader,r=t.getAsFile();o.onload=function(e){if(n.fire("beforeImageAdd",{imageFiles:r})){var t=CKEDITOR.dom.element.createFromHtml('<img src="'+e.target.result+'">');n.insertElement(t);var o={el:t,file:r};n.fire("imageAdd",o)}},o.readAsDataURL(r)}}}})},function(e,t,n){"use strict";if(!CKEDITOR.plugins.get("ae_placeholder")){var o=CKEDITOR.env.needsBrFiller?"<br>":"",r={1:["<p>"+o+"</p>"],2:[""," ",o],3:["<div>"+o+"</div>"]};CKEDITOR.plugins.add("ae_placeholder",{init:function(e){e.on("blur",this._checkEmptyData,this),e.on("change",this._checkEmptyData,this),e.on("focus",this._removePlaceholderClass,this),e.once("contentDom",this._checkEmptyData,this)},_checkEmptyData:function(e){var t=e.editor,n=t.editable(),o=n.$.innerHTML.trim();r[t.config.enterMode].some(function(e){return o===e})?n.addClass(t.config.placeholderClass):n.removeClass(t.config.placeholderClass)},_removePlaceholderClass:function(e){var t=e.editor;new CKEDITOR.dom.element(t.element.$).removeClass(t.config.placeholderClass)}})}},function(e,t,n){"use strict";CKEDITOR.plugins.get("ae_selectionkeystrokes")||CKEDITOR.plugins.add("ae_selectionkeystrokes",{requires:"ae_selectionregion",init:function(e){e.config.selectionKeystrokes&&e.config.selectionKeystrokes.forEach(function(t){var n=new CKEDITOR.command(e,{exec:function(e){e.fire("editorInteraction",{manualSelection:t.selection,nativeEvent:{},selectionData:e.getSelectionData()})}}),o="selectionKeystroke"+t.selection;e.addCommand(o,n),e.setKeystroke(t.keys,o)})}})},function(e,t,n){"use strict";if(!CKEDITOR.plugins.get("ae_tableresize")){var o=CKEDITOR.tools.cssLength;function r(e){return CKEDITOR.env.ie?e.$.clientWidth:parseInt(e.getComputedStyle("width"),10)}function i(e,t){var n=e.getComputedStyle("border-"+t+"-width"),o={thin:"0px",medium:"1px",thick:"2px"};return n.indexOf("px")<0&&(n=n in o&&"none"!=e.getComputedStyle("border-style")?o[n]:0),parseInt(n,10)}function a(e){for(var t=[],n=-1,o="rtl"===e.getComputedStyle("direction"),r=function(e){for(var t=e.$.rows,n=0,o=void 0,r=void 0,i=void 0,a=0,l=t.length;a<l;a++)(o=(i=t[a]).cells.length)>n&&(n=o,r=i);return r}(e),a=new CKEDITOR.dom.element(e.$.tBodies[0]),l=a.getDocumentPosition(),s=0,u=r.cells.length;s<u;s++){var c=new CKEDITOR.dom.element(r.cells[s]),f=r.cells[s+1]&&new CKEDITOR.dom.element(r.cells[s+1]);n+=c.$.colSpan||1;var d=void 0,p=void 0,h=c.getDocumentPosition().x;o?p=h+i(c,"left"):d=h+c.$.offsetWidth-i(c,"right"),f?(h=f.getDocumentPosition().x,o?d=h+f.$.offsetWidth-i(f,"right"):p=h+i(f,"left")):(h=e.getDocumentPosition().x,o?d=h:p=h+e.$.offsetWidth);var m=Math.max(p-d,4);t.push({table:e,index:n,x:d,y:l.y,width:m,height:a.$.offsetHeight,rtl:o})}return t}function l(e){(e.data||e).preventDefault()}function s(e,t){var n=void 0,a=void 0,s=void 0,u=void 0,c=void 0,f=void 0,d=void 0,p=e.document,h=CKEDITOR.dom.element.createFromHtml('<div data-cke-temp=1 contenteditable=false unselectable=on style="position:absolute;cursor:col-resize;filter:alpha(opacity=0);opacity:0;padding:0;background-color:#004;background-image:none;border:0px none;z-index:10"></div>',p),m=this.isResizing=function(){return u},y=this.move=function(e){var t=e-Math.round(h.$.offsetWidth/2);if(m){if(t===a||t===c)return;t=Math.max(t,a),t=Math.min(t,c),n=t-d}h.setStyle("left",o(t))};function b(){h.removeListener("mouseup",_),h.removeListener("mousedown",v),h.removeListener("mousemove",E)}function g(){u=0,h.setOpacity(0),n&&function(){for(var e=this,a=t.rtl,l=a?f.length:s.length,u=function(l){var u=s[l],c=f[l],d=t.table;CKEDITOR.tools.setTimeout(function(e,t,n,r,i,l){e&&e.setStyle("width",o(Math.max(t+l,1))),n&&n.setStyle("width",o(Math.max(r-l,1))),i&&d.setStyle("width",o(i+l*(a?-1:1)))},0,e,[u,u&&r(u),c,c&&r(c),(!u||!c)&&r(d)+i(d,"left")+i(d,"right"),n])},c=0;c<l;c++)u(c)}();var e=t.table;setTimeout(function(){e.removeCustomData("_cke_table_pillars")},0),p.removeListener("dragstart",l)}function v(e){l(e),function(){for(var e=t.index,o=CKEDITOR.tools.buildTableMap(t.table),i=[],m=[],y=Number.MAX_VALUE,b=y,g=t.rtl,v=0,_=o.length;v<_;v++){var O=o[v],w=O[e+(g?1:0)],C=O[e+(g?0:1)];w=w&&new CKEDITOR.dom.element(w),C=C&&new CKEDITOR.dom.element(C),w&&C&&w.equals(C)||(w&&(y=Math.min(y,r(w))),C&&(b=Math.min(b,r(C))),i.push(w),m.push(C))}s=i,f=m,a=t.x-y,c=t.x+b,h.setOpacity(.5),d=parseInt(h.getStyle("left"),10),n=0,u=1,h.on("mousemove",E),p.on("dragstart",l)}(),p.on("mouseup",_,this)}function _(e){e.removeListener(),g()}function E(e){y(e.data.getPageOffset().x)}e.on("destroy",function(){b(),h.remove()}),p.getDocumentElement().append(h),h.setStyles({width:o(t.width),height:o(t.height),left:o(t.x),top:o(t.y)}),h.on("mousedown",v,this),p.getBody().setStyle("cursor","col-resize"),h.show(),this.destroy=function(){b(),p.getBody().setStyle("cursor","auto"),h.remove()}}function u(e){var t=e.data.getTarget();if("mouseout"===e.name){if(!t.is("table"))return;for(var n=new CKEDITOR.dom.element(e.data.$.relatedTarget||e.data.$.toElement);n&&n.$&&!n.equals(t)&&!n.is("body");)n=n.getParent();if(!n||n.equals(t))return}t.getAscendant("table",1).removeCustomData("_cke_table_pillars"),e.removeListener()}CKEDITOR.plugins.add("ae_tableresize",{requires:"ae_tabletools",init:function(e){e.on("contentDom",function(){var t=void 0,n=e.editable();n.attachListener(n.isInline()?n:e.document,"mousemove",function(n){var o=(n=n.data).getTarget();if(o.type===CKEDITOR.NODE_ELEMENT){var r=n.getPageOffset().x;if(t){if(t.isResizing())return t.move(r),void l(n);t.destroy(),t=null}var i=void 0;if(o.is("table")||o.getAscendant("tbody",1)){var c=o.getAscendant("table",1);if(e.editable().contains(c)){(i=c.getCustomData("_cke_table_pillars"))||(c.setCustomData("_cke_table_pillars",i=a(c)),c.on("mouseout",u),c.on("mousedown",u));var f=function(e,t){for(var n=0,o=e.length;n<o;n++){var r=e[n];if(t>=r.x&&t<=r.x+r.width)return r}return null}(i,r);f&&(t=new s(e,f))}}}})})}})}},function(e,t,n){"use strict";if(!CKEDITOR.plugins.get("ae_tabletools")){var o=/^(?:td|th)$/;function r(e){var t=e.getRanges(),n=[],r={};function i(e){n.length>0||e.type==CKEDITOR.NODE_ELEMENT&&o.test(e.getName())&&!e.getCustomData("selected_cell")&&(CKEDITOR.dom.element.setMarker(r,e,"selected_cell",!0),n.push(e))}for(var a=0;a<t.length;a++){var l=t[a];if(l.collapsed){var s=l.getCommonAncestor(),u=s.getAscendant("td",!0)||s.getAscendant("th",!0);u&&n.push(u)}else{var c=new CKEDITOR.dom.walker(l),f=void 0;for(c.guard=i;f=c.next();)if(f.type!=CKEDITOR.NODE_ELEMENT||!f.is(CKEDITOR.dtd.table)){var d=f.getAscendant("td",!0)||f.getAscendant("th",!0);d&&!d.getCustomData("selected_cell")&&(CKEDITOR.dom.element.setMarker(r,d,"selected_cell",!0),n.push(d))}}}return CKEDITOR.dom.element.clearAllMarkers(r),n}function i(e,t){for(var n=r(e.getSelection()),o=n[0],i=o.getAscendant("table"),a=o.getDocument(),l=n[0].getParent(),s=l.$.rowIndex,c=n[n.length-1],f=c.getParent().$.rowIndex+c.$.rowSpan-1,d=new CKEDITOR.dom.element(i.$.rows[f]),p=t?s:f,h=t?l:d,m=CKEDITOR.tools.buildTableMap(i),y=m[p],b=t?m[p-1]:m[p+1],g=m[0].length,v=a.createElement("tr"),_=0;y[_]&&_<g;_++){var E=void 0;y[_].rowSpan>1&&b&&y[_]==b[_]?(E=y[_]).rowSpan+=1:((E=new CKEDITOR.dom.element(y[_]).clone()).removeAttribute("rowSpan"),E.appendBogus(),v.append(E),E=E.$),_+=E.colSpan-1}t?v.insertBefore(h):v.insertAfter(h),u(e,new CKEDITOR.dom.element(v.$).getChild(n[0]?n[0].$.cellIndex:0))}function a(e,t){for(var n=e.getParent().$.cells,o=0,r=0;r<n.length;r++){var i=n[r];if(o+=t?1:i.colSpan,i==e.$)break}return o-1}function l(e,t){for(var n=t?1/0:0,o=0;o<e.length;o++){var r=a(e[o],t);(t?r<n:r>n)&&(n=r)}return n}function s(e,t){for(var n=r(e.getSelection()),o=n[0],i=o.getAscendant("table"),a=l(n,1),s=l(n),c=t?a:s,f=CKEDITOR.tools.buildTableMap(i),d=[],p=[],h=f.length,m=0;m<h;m++){d.push(f[m][c]);var y=t?f[m][c-1]:f[m][c+1];p.push(y)}for(var b=[],g=0;g<h;g++){var v=void 0;d[g]&&(d[g].colSpan>1&&p[g]==d[g]?(v=d[g]).colSpan+=1:((v=new CKEDITOR.dom.element(d[g]).clone()).removeAttribute("colSpan"),v.appendBogus(),v[t?"insertBefore":"insertAfter"].call(v,new CKEDITOR.dom.element(d[g])),v=v.$),b[g]=v,g+=v.rowSpan-1)}u(e,new CKEDITOR.dom.element(b[o.getParent().$.rowIndex]))}function u(e,t){var n=e.createRange();n.moveToPosition(t,CKEDITOR.POSITION_AFTER_START),e.getSelection().selectRanges([n])}function c(e,t){var n=e.getStartElement(),o=n.getAscendant("td",1)||n.getAscendant("th",1);if(o){var r=o.clone();r.appendBogus(),t?r.insertBefore(o):r.insertAfter(o)}}function f(e){if(e instanceof CKEDITOR.dom.selection){for(var t=r(e),n=t[0]&&t[0].getAscendant("table"),o=function(e){for(var t=0,n=e.length-1,o={},r=void 0,i=void 0,a=void 0;r=e[t++];)CKEDITOR.dom.element.setMarker(o,r,"delete_cell",!0);for(t=0;r=e[t++];)if((i=r.getPrevious())&&!i.getCustomData("delete_cell")||(i=r.getNext())&&!i.getCustomData("delete_cell"))return CKEDITOR.dom.element.clearAllMarkers(o),i;return CKEDITOR.dom.element.clearAllMarkers(o),(a=(a=e[0].getParent()).getPrevious())?a.getLast():(a=(a=e[n].getParent()).getNext())?a.getChild(0):null}(t),i=t.length-1;i>=0;i--)f(t[i]);o?p(o,!0):n&&n.remove()}else if(e instanceof CKEDITOR.dom.element){var a=e.getParent();1==a.getChildCount()?a.remove():e.remove()}}function d(e){var t=e.getBogus();t&&t.remove(),e.trim()}function p(e,t){var n=e.getDocument(),o=CKEDITOR.document;CKEDITOR.env.ie&&10==CKEDITOR.env.version&&(o.focus(),n.focus());var r=new CKEDITOR.dom.range(n);r["moveToElementEdit"+(t?"End":"Start")](e)||(r.selectNodeContents(e),r.collapse(!t)),r.select(!0)}function h(e,t,n){var o=e[t];if(void 0===n)return o;for(var r=0;o&&r<o.length;r++){if(n.is&&o[r]==n.$)return r;if(r==n)return new CKEDITOR.dom.element(o[r])}return n.is?-1:null}function m(e,t,n){var o=r(e),i=void 0;if((t?1!=o.length:o.length<2)||(i=e.getCommonAncestor())&&i.type==CKEDITOR.NODE_ELEMENT&&i.is("table"))return!1;var a=void 0,l=o[0],s=l.getAscendant("table"),u=CKEDITOR.tools.buildTableMap(s),c=u.length,f=u[0].length,p=l.getParent().$.rowIndex,m=h(u,p,l);if(t){var y=void 0;try{var b=parseInt(l.getAttribute("rowspan"),10)||1,g=parseInt(l.getAttribute("colspan"),10)||1;y=u["up"==t?p-b:"down"==t?p+b:p]["left"==t?m-g:"right"==t?m+g:m]}catch(e){return!1}if(!y||l.$==y)return!1;o["up"==t||"left"==t?"unshift":"push"](new CKEDITOR.dom.element(y))}for(var v=l.getDocument(),_=p,E=0,O=0,w=!n&&new CKEDITOR.dom.documentFragment(v),C=0,k=0;k<o.length;k++){var T=(a=o[k]).getParent(),x=a.getFirst(),S=a.$.colSpan,P=a.$.rowSpan,I=T.$.rowIndex,D=h(u,I,a);if(C+=S*P,O=Math.max(O,D-m+S),E=Math.max(E,I-p+P),!n){if(d(a),a.getChildren().count()){if(I!=_&&x&&(!x.isBlockBoundary||!x.isBlockBoundary({br:1}))){var R=w.getLast(CKEDITOR.dom.walker.whitespaces(!0));!R||R.is&&R.is("br")||w.append("br")}a.moveChildren(w)}k?a.remove():a.setHtml("")}_=I}if(n)return E*O==C;w.moveChildren(l),l.appendBogus(),O>=f?l.removeAttribute("rowSpan"):l.$.rowSpan=E,E>=c?l.removeAttribute("colSpan"):l.$.colSpan=O;for(var j=new CKEDITOR.dom.nodeList(s.$.rows),A=j.count(),K=A-1;K>=0;K--){var M=j.getItem(K);M.$.cells.length||(M.remove(),A++)}return l}CKEDITOR.plugins.add("ae_tabletools",{init:function(e){function t(e){return CKEDITOR.tools.extend(e||{},{contextSensitive:1,refresh:function(e,t){this.setState(t.contains({td:1,th:1},1)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)}})}function n(t,n){var o=e.getCommand(t);o||(o=e.addCommand(t,n),e.addFeature(o))}n("rowDelete",t({requiredContent:"table",exec:function(e){p(function e(t){if(t instanceof CKEDITOR.dom.selection){for(var n=r(t),o=n[0].getAscendant("table"),i=CKEDITOR.tools.buildTableMap(o),a=n[0].getParent().$.rowIndex,l=n[n.length-1],s=l.getParent().$.rowIndex+l.$.rowSpan-1,u=[],c=a;c<=s;c++){for(var f=i[c],d=new CKEDITOR.dom.element(o.$.rows[c]),p=0;p<f.length;p++){var h=new CKEDITOR.dom.element(f[p]),m=h.getParent().$.rowIndex;if(1==h.$.rowSpan)h.remove();else if(h.$.rowSpan-=1,m==c){var y=i[c+1];y[p-1]?h.insertAfter(new CKEDITOR.dom.element(y[p-1])):new CKEDITOR.dom.element(o.$.rows[c+1]).append(h,1)}p+=h.$.colSpan-1}u.push(d)}for(var b=o.$.rows,g=new CKEDITOR.dom.element(b[s+1]||(a>0?b[a-1]:null)||o.$.parentNode),v=u.length;v>=0;v--)e(u[v]);return g}if(t instanceof CKEDITOR.dom.element){var _=t.getAscendant("table");1==_.$.rows.length?_.remove():t.remove()}return null}(e.getSelection()))}})),n("rowInsertBefore",t({requiredContent:"table",exec:function(e){i(e,!0)}})),n("rowInsertAfter",t({requiredContent:"table",exec:function(e){i(e)}})),n("columnDelete",t({requiredContent:"table",exec:function(e){var t=function(e){for(var t=r(e),n=t[0],o=t[t.length-1],i=n.getAscendant("table"),a=CKEDITOR.tools.buildTableMap(i),l=void 0,s=void 0,u=[],c=0,f=a.length;c<f;c++)for(var d=0,p=a[c].length;d<p;d++)a[c][d]==n.$&&(l=d),a[c][d]==o.$&&(s=d);for(var h=l;h<=s;h++)for(var m=0;m<a.length;m++){var y=a[m],b=new CKEDITOR.dom.element(i.$.rows[m]),g=new CKEDITOR.dom.element(y[h]);g.$&&(1==g.$.colSpan?g.remove():g.$.colSpan-=1,m+=g.$.rowSpan-1,b.$.cells.length||u.push(b))}var v=i.$.rows[0]&&i.$.rows[0].cells,_=new CKEDITOR.dom.element(v[l]||(l?v[l-1]:i.$.parentNode));return null==u.length&&i.remove(),_}(e.getSelection());t&&p(t,!0)}})),n("columnInsertBefore",t({requiredContent:"table",exec:function(e){s(e,!0)}})),n("columnInsertAfter",t({requiredContent:"table",exec:function(e){s(e)}})),n("cellDelete",t({requiredContent:"table",exec:function(e){f(e.getSelection())}})),n("cellMerge",t({allowedContent:"td[colspan,rowspan]",requiredContent:"td[colspan,rowspan]",exec:function(e){p(m(e.getSelection()),!0)}})),n("cellMergeRight",t({allowedContent:"td[colspan]",requiredContent:"td[colspan]",exec:function(e){p(m(e.getSelection(),"right"),!0)}})),n("cellMergeDown",t({allowedContent:"td[rowspan]",requiredContent:"td[rowspan]",exec:function(e){p(m(e.getSelection(),"down"),!0)}})),n("cellVerticalSplit",t({allowedContent:"td[rowspan]",requiredContent:"td[rowspan]",exec:function(e){p(function(e,t){var n=r(e);if(n.length>1)return!1;if(t)return!0;var o=n[0],i=o.getParent(),a=i.getAscendant("table"),l=CKEDITOR.tools.buildTableMap(a),s=i.$.rowIndex,u=h(l,s,o),c=o.$.rowSpan,f=void 0,d=void 0,p=void 0,m=void 0;if(c>1){d=Math.ceil(c/2),p=Math.floor(c/2),m=s+d;var y=new CKEDITOR.dom.element(a.$.rows[m]),b=h(l,m),g=void 0;f=o.clone();for(var v=0;v<b.length;v++){if((g=b[v]).parentNode==y.$&&v>u){f.insertBefore(new CKEDITOR.dom.element(g));break}g=null}g||y.append(f)}else{p=d=1;var _=i.clone();_.insertAfter(i),_.append(f=o.clone());for(var E=h(l,s),O=0;O<E.length;O++)E[O].rowSpan++}return f.appendBogus(),o.$.rowSpan=d,f.$.rowSpan=p,1==d&&o.removeAttribute("rowSpan"),1==p&&f.removeAttribute("rowSpan"),f}(e.getSelection()))}})),n("cellHorizontalSplit",t({allowedContent:"td[colspan]",requiredContent:"td[colspan]",exec:function(e){p(function(e,t){var n=r(e);if(n.length>1)return!1;if(t)return!0;var o=n[0],i=o.getParent(),a=i.getAscendant("table"),l=CKEDITOR.tools.buildTableMap(a),s=h(l,i.$.rowIndex,o),u=o.$.colSpan,c=void 0,f=void 0;if(u>1)c=Math.ceil(u/2),f=Math.floor(u/2);else{f=c=1;for(var d=function(e,t){for(var n=[],o=0;o<e.length;o++){var r=e[o];n.push(r[t]),r[t].rowSpan>1&&(o+=r[t].rowSpan-1)}return n}(l,s),p=0;p<d.length;p++)d[p].colSpan++}var m=o.clone();return m.insertAfter(o),m.appendBogus(),o.$.colSpan=c,m.$.colSpan=f,1==c&&o.removeAttribute("colSpan"),1==f&&m.removeAttribute("colSpan"),m}(e.getSelection()))}})),n("cellInsertBefore",t({requiredContent:"table",exec:function(e){c(e.getSelection(),!0)}})),n("cellInsertAfter",t({requiredContent:"table",exec:function(e){c(e.getSelection())}}))},getSelectedCells:r})}CKEDITOR.tools.buildTableMap=function(e){for(var t=e.$.rows,n=-1,o=[],r=0;r<t.length;r++){o[++n]||(o[n]=[]);for(var i=-1,a=0;a<t[r].cells.length;a++){var l=t[r].cells[a];for(i++;o[n][i];)i++;for(var s=isNaN(l.colSpan)?1:l.colSpan,u=isNaN(l.rowSpan)?1:l.rowSpan,c=0;c<u;c++){o[n+c]||(o[n+c]=[]);for(var f=0;f<s;f++)o[n+c][i+f]=t[r].cells[a]}i+=s-1}}return o}},function(e,t,n){"use strict";n(136),n(137),n(138),n(139),n(140),n(141)},function(e,t,n){"use strict";var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=a(n(0)),i=a(n(2));function a(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}if(!CKEDITOR.plugins.get("ae_buttonbridge")){var s={};function u(e,t,n){var a,u,c=AlloyEditor.Buttons[e];return s[n.name]=s[n.name]||{},s[n.name][e]=s[n.name][e]||t,c||(u=a=function(t){function n(){var t,o,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var i=arguments.length,a=Array(i),u=0;u<i;u++)a[u]=arguments[u];return o=r=l(this,(t=n.__proto__||Object.getPrototypeOf(n)).call.apply(t,[this].concat(a))),r._handleClick=function(){var t=r.context.editor.get("nativeEditor"),n=s[t.name][e].command,o=s[t.name][e].onClick;o?o.call(r):t.execCommand(n),t.fire("actionPerformed",r)},l(r,o)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,r.default.Component),o(n,[{key:"toFeature",value:function(){}},{key:"render",value:function(){var t=this.context.editor.get("nativeEditor"),n=s[t.name][e].name||s[t.name][e].command||e,o=s[t.name][e].label,i="button-"+n,a="ae-icon-"+n,l={},u=CKEDITOR.skin.getIconStyle(n);if(u){var c=u.split(";");l.backgroundImage=c[0].substring(c[0].indexOf(":")+1),l.backgroundPosition=c[1].substring(c[1].indexOf(":")+1),l.backgroundSize=c[2].substring(c[2].indexOf(":")+1)}return r.default.createElement("button",{"aria-label":o,className:"ae-button ae-button-bridge","data-type":i,onClick:this._handleClick,tabIndex:this.props.tabIndex,title:o},r.default.createElement("span",{className:a,style:l}))}}]),n}(),a.contextType=i.default,a.displayName=e,a.key=e,c=u,AlloyEditor.Buttons[e]=c),c}CKEDITOR.plugins.get("button")||(CKEDITOR.UI_BUTTON="button",CKEDITOR.plugins.add("button",{})),CKEDITOR.plugins.add("ae_buttonbridge",{requires:["ae_uibridge"],beforeInit:function(e){e.ui.addButton=function(e,t){this.add(e,CKEDITOR.UI_BUTTON,t)},e.ui.addHandler(CKEDITOR.UI_BUTTON,{add:u,create:function(e){return new(u("buttonBridge"+(1e9*Math.random()>>>0),e))}})}})}},function(e,t,n){"use strict";var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=l(n(0)),i=l(n(2)),a=l(n(12));function l(e){return e&&e.__esModule?e:{default:e}}if(!CKEDITOR.plugins.get("ae_menubuttonbridge")){var s={};function u(e,t,n){var l,u,c=AlloyEditor.Buttons[e];return s[n.name]=s[n.name]||{},s[n.name][e]=s[n.name][e]||t,c||(u=l=function(n){function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,r.default.Component),o(i,[{key:"toFeature",value:function(){}},{key:"render",value:function(){var t=this.context.editor.get("nativeEditor"),n=s[t.name][e].name||s[t.name][e].command||e,o="ae-icon-"+n,i={},l=CKEDITOR.skin.getIconStyle(n);if(l){var u=l.split(";");i.backgroundImage=u[0].substring(u[0].indexOf(":")+1),i.backgroundPosition=u[1].substring(u[1].indexOf(":")+1),i.backgroundSize=u[2].substring(u[2].indexOf(":")+1)}return r.default.createElement("div",{className:"ae-container ae-has-dropdown"},r.default.createElement("button",{"aria-expanded":this.props.expanded,"aria-label":s[t.name][e].label,className:"ae-button ae-button-bridge",onClick:this.props.toggleDropdown,role:"combobox",tabIndex:this.props.tabIndex,title:s[t.name][e].label},r.default.createElement("span",{className:o,style:i})),this.props.expanded&&r.default.createElement(a.default,{onDismiss:this.props.toggleDropdown},this._getMenuItems()))}},{key:"_getMenuItems",value:function(){var e=this.context.editor.get("nativeEditor"),n=t.onMenu();return Object.keys(n).map(function(t){var o=e.getMenuItem(t);if(!o)return null;var i=o.definition||o,a=n[t],l="ae-toolbar-element "+(a===CKEDITOR.TRISTATE_ON?"active":""),s=a===CKEDITOR.TRISTATE_DISABLED;return r.default.createElement("li",{key:o.name,role:"option"},r.default.createElement("button",{className:l,disabled:s,onClick:function(){i.command?e.execCommand(i.command):i.onClick&&i.onClick.apply(i)}},i.label))})}}]),i}(),l.contextType=i.default,l.displayName=e,l.key=e,c=u,AlloyEditor.Buttons[e]=c),c}CKEDITOR.plugins.get("menubutton")||(CKEDITOR.UI_MENU_BUTTON="menubutton",CKEDITOR.plugins.add("menubutton",{})),CKEDITOR.plugins.add("ae_menubuttonbridge",{requires:["ae_uibridge","ae_menubridge"],beforeInit:function(e){e.ui.addMenuButton=function(e,t){this.add(e,CKEDITOR.UI_MENUBUTTON,t)},e.ui.addHandler(CKEDITOR.UI_MENUBUTTON,{add:u,create:function(e){return new(u("buttonBridge"+(1e9*Math.random()>>>0),e))}})}})}},function(e,t,n){"use strict";CKEDITOR.plugins.get("ae_menubridge")||CKEDITOR.plugins.add("ae_menubridge",{beforeInit:function(e){if(!CKEDITOR.plugins.get("menu")){for(var t=[],n=e._.menuGroups={},o=e._.menuItems={},r=0;r<t.length;r++)n[t[r]]=r+1;e.addMenuGroup=function(e,t){n[e]=t||100},e.addMenuItem=function(e,t){n[t.group]&&(o[e]={name:e,definition:t})},e.addMenuItems=function(e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&this.addMenuItem(t,e[t])},e.getMenuItem=function(e){return o[e]},e.removeMenuItem=function(e){delete o[e]}}}})},function(e,t,n){"use strict";var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=l(n(0)),i=l(n(2)),a=l(n(12));function l(e){return e&&e.__esModule?e:{default:e}}if(!CKEDITOR.plugins.get("ae_panelmenubuttonbridge")){var s={},u=function(e,t,n){var l,u,c=AlloyEditor.Buttons[e];return s[n.name]=s[n.name]||{},s[n.name][e]=s[n.name][e]||t,c||(u=l=function(t){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,r.default.Component),o(n,[{key:"createPanel",value:function(){}},{key:"render",value:function(){var t=this.context.editor.get("nativeEditor"),n=s[t.name][e].name||s[t.name][e].command||e,o="ae-icon-"+n,i={},a=CKEDITOR.skin.getIconStyle(n);if(a){var l=a.split(";");i.backgroundImage=l[0].substring(l[0].indexOf(":")+1),i.backgroundPosition=l[1].substring(l[1].indexOf(":")+1),i.backgroundSize=l[2].substring(l[2].indexOf(":")+1)}var u=void 0;return this.props.expanded&&(u=this._getPanel()),r.default.createElement("div",{className:"ae-container ae-has-dropdown"},r.default.createElement("button",{"aria-expanded":this.props.expanded,"aria-label":s[t.name][e].label,className:"ae-button ae-button-bridge",onClick:this.props.toggleDropdown,role:"combobox",tabIndex:this.props.tabIndex,title:s[t.name][e].label},r.default.createElement("span",{className:o,style:i})),u)}},{key:"_getPanel",value:function(){var t=this.context.editor.get("nativeEditor"),n=s[t.name][e].onBlock,o={hide:this.props.toggleDropdown,show:this.props.toggleDropdown},i=new CKEDITOR.dom.element("div"),l={element:i,keys:{}};return n&&n.call(this,o,l),r.default.createElement(a.default,{onDismiss:this.props.toggleDropdown},r.default.createElement("div",{className:i.getAttribute("class"),dangerouslySetInnerHTML:{__html:i.getHtml()}}))}}]),n}(),l.contextType=i.default,l.displayName=e,l.key=e,c=u,AlloyEditor.Buttons[e]=c),c};CKEDITOR.plugins.get("panelmenubutton")||(CKEDITOR.UI_PANELBUTTON="panelmenubutton",CKEDITOR.plugins.add("panelmenubutton",{})),CKEDITOR.plugins.get("panelbutton")||(CKEDITOR.UI_PANELBUTTON="panelbutton",CKEDITOR.plugins.add("panelbutton",{})),CKEDITOR.plugins.add("ae_panelmenubuttonbridge",{requires:["ae_uibridge"],beforeInit:function(e){e.ui.addPanelMenuButton=function(e,t){this.add(e,CKEDITOR.UI_PANELBUTTON,t)},e.ui.addHandler(CKEDITOR.UI_PANELBUTTON,{add:u,create:function(e){var t="panelMenuButtonBridge"+(1e9*Math.random()>>>0);return new(u(t,e))}})}})}},function(e,t,n){"use strict";var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=s(n(0)),i=s(n(2)),a=s(n(12)),l=s(n(1));function s(e){return e&&e.__esModule?e:{default:e}}if(!CKEDITOR.plugins.get("ae_richcombobridge")){var u={},c=function(e,t,n){var s,c,f=AlloyEditor.Buttons[e];return u[n.name]=u[n.name]||{},u[n.name][e]=u[n.name][e]||t,u[n.name][e].currentValue=void 0,f||(c=s=function(i){function s(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,t));return o._onClick=function(t){var n=o.context.editor.get("nativeEditor"),r=u[n.name][e];if(r.onClick){var i=t.currentTarget.getAttribute("data-value");r.onClick.call(o,i),u[n.name][e].currentValue=i,n.fire("actionPerformed",o)}},o.state={value:u[n.name][e].currentValue},o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(s,r.default.Component),o(s,[{key:"commit",value:function(){}},{key:"createPanel",value:function(){}},{key:"disable",value:function(){}},{key:"enable",value:function(){}},{key:"getState",value:function(){}},{key:"hideGroup",value:function(){}},{key:"hideItem",value:function(){}},{key:"mark",value:function(){}},{key:"showAll",value:function(){}},{key:"startGroup",value:function(){}},{key:"unmarkAll",value:function(){}},{key:"add",value:function(e,t,n){this._items.push({preview:t,title:n,value:e})}},{key:"componentWillMount",value:function(){var t=this.context.editor.get("nativeEditor"),n=u[t.name][e];this._items=[],this.setValue=this._setValue,n.init&&n.init.call(this),n.onRender&&n.onRender.call(this)}},{key:"componentWillUnmount",value:function(){this._cacheValue(this.state.value),this.setValue=this._cacheValue}},{key:"getValue",value:function(){return this.state.value}},{key:"render",value:function(){var n=this.context.editor.get("nativeEditor"),o=u[n.name][e].currentValue||t.label;return r.default.createElement("div",{className:"ae-container-dropdown ae-has-dropdown"},r.default.createElement("button",{"aria-expanded":this.props.expanded,"aria-label":o,className:"ae-toolbar-element",onClick:this.props.toggleDropdown,role:"combobox",tabIndex:this.props.tabIndex,title:o},r.default.createElement("div",{className:"ae-container"},r.default.createElement("span",{className:"ae-container-dropdown-selected-item"},o),r.default.createElement(l.default,{symbol:"caret-bottom"}))),this.props.expanded&&r.default.createElement(a.default,{onDismiss:this.props.toggleDropdown},this._getItems()))}},{key:"_cacheValue",value:function(t){var n=this.context.editor.get("nativeEditor");u[n.name][e].currentValue=t}},{key:"_getItems",value:function(){var e=this,t=this;return this._items.map(function(n){var o="ae-toolbar-element "+(n.value===e.state.value?"active":"");return r.default.createElement("li",{key:n.title,role:"option"},r.default.createElement("button",{className:o,dangerouslySetInnerHTML:{__html:n.preview},"data-value":n.value,onClick:t._onClick}))})}},{key:"_setValue",value:function(e){this._cacheValue(e),this.setState({value:e})}}]),s}(),s.contextType=i.default,s.displayName=e,s.key=e,f=c,AlloyEditor.Buttons[e]=f),f};CKEDITOR.plugins.get("richcombo")||(CKEDITOR.UI_RICHCOMBO="richcombo",CKEDITOR.plugins.add("richcombo",{})),CKEDITOR.plugins.add("ae_richcombobridge",{requires:["ae_uibridge"],beforeInit:function(e){e.ui.addRichCombo=function(e,t){this.add(e,CKEDITOR.UI_RICHCOMBO,t)},e.ui.addHandler(CKEDITOR.UI_RICHCOMBO,{add:c,create:function(e){var t="richComboBridge"+(1e9*Math.random()>>>0);return new(c(t,e))}})}})}},function(e,t,n){"use strict";CKEDITOR.plugins.get("ae_uibridge")||CKEDITOR.plugins.add("ae_uibridge",{beforeInit:function(e){var t=e.ui.add;e.ui.add=function(n,o,r){t.call(this,n,o,r);var i=this._.handlers[o];i&&i.add&&(i.add(n,r,e),AlloyEditor.registerBridgeButton(n,e.__processingPlugin__.plugin.name))}}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeImageCommand=void 0;var o=function(e){return e&&e.__esModule?e:{default:e}}(n(143));t.removeImageCommand=o.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={exec:function(e){var t=e.getSelection();if(t){var n=t.getRanges()[0].startContainer,o=new CKEDITOR.dom.range(n);o.setStart(n,0),o.setEnd(n,0);var r=t.getSelectedElement();if(r&&"img"===r.getName()){var i=t.getNative();i&&i.removeAllRanges(),t.selectRanges([o]),r.remove()}}}};t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=c(n(8)),i=c(n(0)),a=c(n(6)),l=c(n(2)),s=c(n(17)),u=c(n(10));function c(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._onDismissToolbarFocus=function(){n.context.editor.get("nativeEditor").focus()},n.state={hidden:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),o(t,[{key:"componentDidMount",value:function(){var e=this,t=this.context.editor.get("nativeEditor");t.on("editorInteraction",this._onEditorInteraction,this),t.on("actionPerformed",this._onActionPerformed,this),t.on("key",this._onEditorKey,this),this._mousedownListener=function(t){e._setUIHidden(t.target)},this._keyDownListener=CKEDITOR.tools.debounce(function(t){e._setUIHidden(document.activeElement)},this.props.eventsDelay,this),document.addEventListener("mousedown",this._mousedownListener),document.addEventListener("keydown",this._keyDownListener)}},{key:"componentDidUpdate",value:function(e,t){var n=a.default.findDOMNode(this),o=this.context.editor.get("nativeEditor");n&&o.fire("ariaUpdate",{message:this._getAvailableToolbarsMessage(n)}),o.fire("editorUpdate",{prevProps:e,prevState:t,props:this.props,state:this.state})}},{key:"_getAriaUpdateTemplate",value:function(e){return this._ariaUpdateTemplates||(this._ariaUpdateTemplates={}),this._ariaUpdateTemplates[e]||(this._ariaUpdateTemplates[e]=new CKEDITOR.template(this._getAriaUpdates()[e])),this._ariaUpdateTemplates[e]}},{key:"_getAriaUpdates",value:function(){return this.props.ariaUpdates||{noToolbar:AlloyEditor.Strings.ariaUpdateNoToolbar,oneToolbar:AlloyEditor.Strings.ariaUpdateOneToolbar,manyToolbars:AlloyEditor.Strings.ariaUpdateManyToolbars}}},{key:"_getAvailableToolbarsMessage",value:function(e){var t=e.querySelectorAll('[role="toolbar"]');if(t.length){var n=Array.prototype.slice.call(t).map(function(e){return e.getAttribute("aria-label")}),o=1===n.length?"oneToolbar":"manyToolbars";return this._getAriaUpdateTemplate(o).output({toolbars:n.join(",").replace(/,([^,]*)$/," and $1")})}return this._getAriaUpdates().noToolbar}},{key:"componentWillUnmount",value:function(){this._mousedownListener&&document.removeEventListener("mousedown",this._mousedownListener),this._keyDownListener&&(this._keyDownListener.detach(),document.removeEventListener("keydown",this._keyDownListener))}},{key:"render",value:function(){var e=this;if(this.state.hidden)return null;var t=Object.keys(this.props.toolbars).map(function(e){return AlloyEditor.Toolbars[e]||window[e]});return t=this.filterExclusive(t).map(function(t){var n=e.mergeExclusiveProps({config:e.props.toolbars[t.key],editor:e.context.editor,editorEvent:e.state.editorEvent,key:t.key,onDismiss:e._onDismissToolbarFocus,selectionData:e.state.selectionData},t.key);return i.default.createElement(t,n)}),i.default.createElement("div",{className:"ae-toolbars",onKeyDown:this.handleKey},t)}},{key:"_onActionPerformed",value:function(e){var t=this.context.editor.get("nativeEditor");t.focus(),this.setState({itemExclusive:null,selectionData:t.getSelectionData()})}},{key:"_onEditorInteraction",value:function(e){this.setState({editorEvent:e,hidden:!1,itemExclusive:null,selectionData:e.data.selectionData})}},{key:"_onEditorKey",value:function(e){var t=e.data.domEvent.$;t.altKey&&121===t.keyCode&&this.focus()}},{key:"_setUIHidden",value:function(e){var t=a.default.findDOMNode(this);if(t){var n=this.context.editor.get("nativeEditor").editable(),o=e.parentNode,r=new CKEDITOR.dom.node(e);if(n){var i=n.$===e||n.contains(r)||new CKEDITOR.dom.element(t).contains(r);o&&(i=i||"ckimgrsz"===o.id),i||this.setState({hidden:!0})}else this.setState({hidden:!0})}}}]),t}();f.contextType=l.default,f.defaultProps={circular:!0,descendants:"[class^=ae-toolbar-]",eventsDelay:0,keys:{next:9}},f.propTypes={ariaUpdates:r.default.object,eventsDelay:r.default.number,toolbars:r.default.object.isRequired},t.default=(0,s.default)((0,u.default)(f))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(37)),r=i(n(5));function i(e){return e&&e.__esModule?e:{default:e}}function a(e){a.superclass.constructor.call(this,e),this.init(e)}(0,i(n(21)).default)(a,o.default,{init:function(e){this._callChain("initializer",e)},destroy:function(){this._callChain("destructor")},_callChain:function(e,t){for(var n=[],o=this.constructor;o;)r.default.isFunction(o.prototype[e])&&n.push(o.prototype[e]),o=o.superclass?o.superclass.constructor:null;n=n.reverse(),t=r.default.isArray(t)?t:[t];for(var i=0;i<n.length;i++){n[i].apply(this,t)}}}),t.default=a}]);