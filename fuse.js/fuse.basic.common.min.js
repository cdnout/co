"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ownKeys(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function _objectSpread2(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(r),!0).forEach(function(e){_defineProperty(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function isArray(e){return Array.isArray?Array.isArray(e):"[object Array]"===getTag(e)}var INFINITY=1/0;function baseToString(e){if("string"==typeof e)return e;var t=e+"";return"0"==t&&1/e==-INFINITY?"-0":t}function toString(e){return null==e?"":baseToString(e)}function isString(e){return"string"==typeof e}function isNumber(e){return"number"==typeof e}function isBoolean(e){return!0===e||!1===e||isObjectLike(e)&&"[object Boolean]"==getTag(e)}function isObject(e){return"object"===_typeof(e)}function isObjectLike(e){return isObject(e)&&null!==e}function isDefined(e){return null!=e}function isBlank(e){return!e.trim().length}function getTag(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}var EXTENDED_SEARCH_UNAVAILABLE="Extended search is not available",LOGICAL_SEARCH_UNAVAILABLE="Logical search is not available",INCORRECT_INDEX_TYPE="Incorrect 'index' type",LOGICAL_SEARCH_INVALID_QUERY_FOR_KEY=function(e){return"Invalid value for key ".concat(e)},PATTERN_LENGTH_TOO_LARGE=function(e){return"Pattern length exceeds max of ".concat(e,".")},MISSING_KEY_PROPERTY=function(e){return"Missing ".concat(e," property in key")},INVALID_KEY_WEIGHT_VALUE=function(e){return"Property 'weight' in key '".concat(e,"' must be a positive integer")},hasOwn=Object.prototype.hasOwnProperty,KeyStore=function(){function n(e){var t=this;_classCallCheck(this,n),this._keys=[],this._keyMap={};var r=0;e.forEach(function(e){e=createKey(e);r+=e.weight,t._keys.push(e),t._keyMap[e.id]=e,r+=e.weight}),this._keys.forEach(function(e){e.weight/=r})}return _createClass(n,[{key:"get",value:function(e){return this._keyMap[e]}},{key:"keys",value:function(){return this._keys}},{key:"toJSON",value:function(){return JSON.stringify(this._keys)}}]),n}();function createKey(e){var t=null,r=null,n=null,i=1;if(isString(e)||isArray(e))t=createKeyPath(n=e),r=createKeyId(e);else{if(!hasOwn.call(e,"name"))throw new Error(MISSING_KEY_PROPERTY("name"));var o=e.name,n=o;if(hasOwn.call(e,"weight")&&(i=e.weight)<=0)throw new Error(INVALID_KEY_WEIGHT_VALUE(o));t=createKeyPath(o),r=createKeyId(o)}return{path:t,id:r,weight:i,src:n}}function createKeyPath(e){return isArray(e)?e:e.split(".")}function createKeyId(e){return isArray(e)?e.join("."):e}function get(e,t){var s=[],c=!1;return function e(t,r,n){if(isDefined(t))if(r[n]){var i=t[r[n]];if(isDefined(i))if(n===r.length-1&&(isString(i)||isNumber(i)||isBoolean(i)))s.push(toString(i));else if(isArray(i)){c=!0;for(var o=0,a=i.length;o<a;o+=1)e(i[o],r,n+1)}else r.length&&e(i,r,n+1)}else s.push(t)}(e,isString(t)?t.split("."):t,0),c?s:s[0]}var MatchOptions={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},BasicOptions={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:function(e,t){return e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1}},FuzzyOptions={location:0,threshold:.6,distance:100},AdvancedOptions={useExtendedSearch:!1,getFn:get,ignoreLocation:!1,ignoreFieldNorm:!1},Config=_objectSpread2({},BasicOptions,{},MatchOptions,{},FuzzyOptions,{},AdvancedOptions),SPACE=/[^ ]+/g;function norm(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:3,r=new Map,n=Math.pow(10,e);return{get:function(e){var t=e.match(SPACE).length;if(r.has(t))return r.get(t);e=1/Math.sqrt(t),e=parseFloat(Math.round(e*n)/n);return r.set(t,e),e},clear:function(){r.clear()}}}var FuseIndex=function(){function t(){var e=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).getFn,e=void 0===e?Config.getFn:e;_classCallCheck(this,t),this.norm=norm(3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}return _createClass(t,[{key:"setSources",value:function(e){e=0<arguments.length&&void 0!==e?e:[];this.docs=e}},{key:"setIndexRecords",value:function(e){e=0<arguments.length&&void 0!==e?e:[];this.records=e}},{key:"setKeys",value:function(e){var r=this,e=0<arguments.length&&void 0!==e?e:[];this.keys=e,this._keysMap={},e.forEach(function(e,t){r._keysMap[e.id]=t})}},{key:"create",value:function(){var r=this;!this.isCreated&&this.docs.length&&(this.isCreated=!0,isString(this.docs[0])?this.docs.forEach(function(e,t){r._addString(e,t)}):this.docs.forEach(function(e,t){r._addObject(e,t)}),this.norm.clear())}},{key:"add",value:function(e){var t=this.size();isString(e)?this._addString(e,t):this._addObject(e,t)}},{key:"removeAt",value:function(e){this.records.splice(e,1);for(var t=e,r=this.size();t<r;t+=1)--this.records[t].i}},{key:"getValueForItemAtKeyId",value:function(e,t){return e[this._keysMap[t]]}},{key:"size",value:function(){return this.records.length}},{key:"_addString",value:function(e,t){isDefined(e)&&!isBlank(e)&&(e={v:e,i:t,n:this.norm.get(e)},this.records.push(e))}},{key:"_addObject",value:function(t,e){var a=this,s={i:e,$:{}};this.keys.forEach(function(e,i){var o=a.getFn(t,e.path);isDefined(o)&&(isArray(o)?function(){for(var e=[],r=[{nestedArrIndex:-1,value:o}];r.length;){var t=r.pop(),n=t.nestedArrIndex,t=t.value;isDefined(t)&&(isString(t)&&!isBlank(t)?(n={v:t,i:n,n:a.norm.get(t)},e.push(n)):isArray(t)&&t.forEach(function(e,t){r.push({nestedArrIndex:t,value:e})}))}s.$[i]=e}():isBlank(o)||(e={v:o,n:a.norm.get(o)},s.$[i]=e))}),this.records.push(s)}},{key:"toJSON",value:function(){return{keys:this.keys,records:this.records}}}]),t}();function createIndex(e,t){var r=(2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}).getFn,r=void 0===r?Config.getFn:r,r=new FuseIndex({getFn:r});return r.setKeys(e.map(createKey)),r.setSources(t),r.create(),r}function parseIndex(e){var t=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).getFn,r=void 0===t?Config.getFn:t,t=e.keys,e=e.records,r=new FuseIndex({getFn:r});return r.setKeys(t),r.setIndexRecords(e),r}function computeScore(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=t.errors,n=void 0===r?0:r,i=t.currentLocation,o=void 0===i?0:i,r=t.expectedLocation,i=void 0===r?0:r,r=t.distance,r=void 0===r?Config.distance:r,t=t.ignoreLocation,t=void 0===t?Config.ignoreLocation:t,e=n/e.length;if(t)return e;o=Math.abs(i-o);return r?e+o/r:o?1:e}function convertMaskToIndices(){for(var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Config.minMatchCharLength,n=[],i=-1,o=0,a=t.length;o<a;o+=1){var s=t[o];s&&-1===i?i=o:s||-1===i||(r<=(e=o-1)-i+1&&n.push([i,e]),i=-1)}return t[o-1]&&r<=o-i&&n.push([i,o-1]),n}var MAX_BITS=32;function search(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},i=n.location,o=void 0===i?Config.location:i,a=n.distance,s=void 0===a?Config.distance:a,c=n.threshold,i=void 0===c?Config.threshold:c,a=n.findAllMatches,h=void 0===a?Config.findAllMatches:a,c=n.minMatchCharLength,a=void 0===c?Config.minMatchCharLength:c,c=n.includeMatches,c=void 0===c?Config.includeMatches:c,n=n.ignoreLocation,u=void 0===n?Config.ignoreLocation:n;if(t.length>MAX_BITS)throw new Error(PATTERN_LENGTH_TOO_LARGE(MAX_BITS));for(var l,d=t.length,f=e.length,v=Math.max(0,Math.min(o,f)),y=i,g=v,p=1<a||c,_=p?Array(f):[];-1<(l=e.indexOf(t,g));){var m=computeScore(t,{currentLocation:l,expectedLocation:v,distance:s,ignoreLocation:u}),y=Math.min(m,y),g=l+d;if(p)for(var A=0;A<d;)A+=_[l+A]=1}g=-1;for(var S=[],b=1,I=d+f,k=1<<d-1,E=0;E<d;E+=1){for(var C=0,L=I;C<L;)computeScore(t,{errors:E,currentLocation:v+L,expectedLocation:v,distance:s,ignoreLocation:u})<=y?C=L:I=L,L=Math.floor((I-C)/2+C);I=L;var M=Math.max(1,v-L+1),O=h?f:Math.min(v+L,f)+d,x=Array(O+2);x[O+1]=(1<<E)-1;for(var T=O;M<=T;--T){var w=T-1,N=r[e.charAt(w)];if(p&&(_[w]=+!!N),x[T]=(x[T+1]<<1|1)&N,E&&(x[T]|=(S[T+1]|S[T])<<1|1|S[T+1]),x[T]&k&&(b=computeScore(t,{errors:E,currentLocation:w,expectedLocation:v,distance:s,ignoreLocation:u}))<=y){if(y=b,(g=w)<=v)break;M=Math.max(1,2*v-g)}}if(y<computeScore(t,{errors:E+1,currentLocation:v,expectedLocation:v,distance:s,ignoreLocation:u}))break;S=x}i={isMatch:0<=g,score:Math.max(.001,b)};return p&&((a=convertMaskToIndices(_,a)).length?c&&(i.indices=a):i.isMatch=!1),i}function createPatternAlphabet(e){for(var t={},r=0,n=e.length;r<n;r+=1){var i=e.charAt(r);t[i]=(t[i]||0)|1<<n-r-1}return t}var BitapSearch=function(){function f(e){var r=this,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=t.location,i=void 0===n?Config.location:n,o=t.threshold,a=void 0===o?Config.threshold:o,s=t.distance,c=void 0===s?Config.distance:s,h=t.includeMatches,n=void 0===h?Config.includeMatches:h,o=t.findAllMatches,s=void 0===o?Config.findAllMatches:o,h=t.minMatchCharLength,o=void 0===h?Config.minMatchCharLength:h,h=t.isCaseSensitive,h=void 0===h?Config.isCaseSensitive:h,t=t.ignoreLocation,t=void 0===t?Config.ignoreLocation:t;if(_classCallCheck(this,f),this.options={location:i,threshold:a,distance:c,includeMatches:n,findAllMatches:s,minMatchCharLength:o,isCaseSensitive:h,ignoreLocation:t},this.pattern=h?e:e.toLowerCase(),this.chunks=[],this.pattern.length){var u=function(e,t){r.chunks.push({pattern:e,alphabet:createPatternAlphabet(e),startIndex:t})},h=this.pattern.length;if(MAX_BITS<h){for(var l=0,e=h%MAX_BITS,d=h-e;l<d;)u(this.pattern.substr(l,MAX_BITS),l),l+=MAX_BITS;e&&(h=h-MAX_BITS,u(this.pattern.substr(h),h))}else u(this.pattern,0)}}return _createClass(f,[{key:"searchIn",value:function(n){var e=this.options,t=e.isCaseSensitive,i=e.includeMatches;if(t||(n=n.toLowerCase()),this.pattern===n){var r={isMatch:!0,score:0};return i&&(r.indices=[[0,n.length-1]]),r}var r=this.options,o=r.location,a=r.distance,s=r.threshold,c=r.findAllMatches,h=r.minMatchCharLength,u=r.ignoreLocation,l=[],d=0,f=!1;this.chunks.forEach(function(e){var t=e.pattern,r=e.alphabet,e=e.startIndex,t=search(n,t,r,{location:o+e,distance:a,threshold:s,findAllMatches:c,minMatchCharLength:h,includeMatches:i,ignoreLocation:u}),r=t.isMatch,e=t.score,t=t.indices;r&&(f=!0),d+=e,r&&t&&(l=[].concat(_toConsumableArray(l),_toConsumableArray(t)))});r={isMatch:f,score:f?d/this.chunks.length:1};return f&&i&&(r.indices=l),r}}]),f}(),registeredSearchers=[];function createSearcher(e,t){for(var r=0,n=registeredSearchers.length;r<n;r+=1){var i=registeredSearchers[r];if(i.condition(e,t))return new i(e,t)}return new BitapSearch(e,t)}var LogicalOperator={AND:"$and",OR:"$or"},KeyType={PATH:"$path",PATTERN:"$val"},isExpression=function(e){return!(!e[LogicalOperator.AND]&&!e[LogicalOperator.OR])},isPath=function(e){return!!e[KeyType.PATH]},isLeaf=function(e){return!isArray(e)&&isObject(e)&&!isExpression(e)},convertToExplicit=function(t){return _defineProperty({},LogicalOperator.AND,Object.keys(t).map(function(e){return _defineProperty({},e,t[e])}))};function parse(e,a){var t=(2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}).auto,s=void 0===t||t,t=function t(r){var e=Object.keys(r),n=isPath(r);if(!n&&1<e.length&&!isExpression(r))return t(convertToExplicit(r));if(isLeaf(r)){var i=n?r[KeyType.PATH]:e[0],n=n?r[KeyType.PATTERN]:r[i];if(!isString(n))throw new Error(LOGICAL_SEARCH_INVALID_QUERY_FOR_KEY(i));i={keyId:createKeyId(i),pattern:n};return s&&(i.searcher=createSearcher(n,a)),i}var o={children:[],operator:e[0]};return e.forEach(function(e){e=r[e];isArray(e)&&e.forEach(function(e){o.children.push(t(e))})}),o};return isExpression(e)||(e=convertToExplicit(e)),t(e)}function computeScore$1(e,t){var t=t.ignoreFieldNorm,i=void 0===t?Config.ignoreFieldNorm:t;e.forEach(function(e){var n=1;e.matches.forEach(function(e){var t=e.key,r=e.norm,e=e.score,t=t?t.weight:null;n*=Math.pow(0===e&&t?Number.EPSILON:e,(t||1)*(i?1:r))}),e.score=n})}function transformMatches(e,r){e=e.matches;r.matches=[],isDefined(e)&&e.forEach(function(e){var t;isDefined(e.indices)&&e.indices.length&&(t={indices:e.indices,value:e.value},e.key&&(t.key=e.key.src),-1<e.idx&&(t.refIndex=e.idx),r.matches.push(t))})}function transformScore(e,t){t.score=e.score}function format(e,n){var t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},r=t.includeMatches,r=void 0===r?Config.includeMatches:r,t=t.includeScore,t=void 0===t?Config.includeScore:t,i=[];return r&&i.push(transformMatches),t&&i.push(transformScore),e.map(function(t){var e=t.idx,r={item:n[e],refIndex:e};return i.length&&i.forEach(function(e){e(t,r)}),r})}var Fuse=function(){function n(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=2<arguments.length?arguments[2]:void 0;if(_classCallCheck(this,n),this.options=_objectSpread2({},Config,{},t),this.options.useExtendedSearch)throw new Error(EXTENDED_SEARCH_UNAVAILABLE);this._keyStore=new KeyStore(this.options.keys),this.setCollection(e,r)}return _createClass(n,[{key:"setCollection",value:function(e,t){if(this._docs=e,t&&!(t instanceof FuseIndex))throw new Error(INCORRECT_INDEX_TYPE);this._myIndex=t||createIndex(this.options.keys,this._docs,{getFn:this.options.getFn})}},{key:"add",value:function(e){isDefined(e)&&(this._docs.push(e),this._myIndex.add(e))}},{key:"remove",value:function(e){for(var t=0<arguments.length&&void 0!==e?e:function(){return!1},r=[],n=0,i=this._docs.length;n<i;n+=1){var o=this._docs[n];t(o,n)&&(this.removeAt(n),--n,--i,r.push(o))}return r}},{key:"removeAt",value:function(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}},{key:"getIndex",value:function(){return this._myIndex}},{key:"search",value:function(e,t){var r=(1<arguments.length&&void 0!==t?t:{}).limit,n=void 0===r?-1:r,i=this.options,o=i.includeMatches,a=i.includeScore,t=i.shouldSort,r=i.sortFn,i=i.ignoreFieldNorm,e=isString(e)?isString(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return computeScore$1(e,{ignoreFieldNorm:i}),t&&e.sort(r),isNumber(n)&&-1<n&&(e=e.slice(0,n)),format(e,this._docs,{includeMatches:o,includeScore:a})}},{key:"_searchStringList",value:function(e){var a=createSearcher(e,this.options),e=this._myIndex.records,s=[];return e.forEach(function(e){var t,r,n=e.v,i=e.i,o=e.n;isDefined(n)&&(t=(r=a.searchIn(n)).isMatch,e=r.score,r=r.indices,t&&s.push({item:n,idx:i,matches:[{score:e,value:n,norm:o,indices:r}]}))}),s}},{key:"_searchLogical",value:function(){throw new Error(LOGICAL_SEARCH_UNAVAILABLE)}},{key:"_searchObjectList",value:function(e){var i=this,o=createSearcher(e,this.options),e=this._myIndex,t=e.keys,e=e.records,a=[];return e.forEach(function(e){var r,n=e.$,e=e.i;isDefined(n)&&(r=[],t.forEach(function(e,t){r.push.apply(r,_toConsumableArray(i._findMatches({key:e,value:n[t],searcher:o})))}),r.length&&a.push({idx:e,item:n,matches:r}))}),a}},{key:"_findMatches",value:function(e){var a=e.key,t=e.value,s=e.searcher;if(!isDefined(t))return[];var r,n,i,c=[];return isArray(t)?t.forEach(function(e){var t,r,n=e.v,i=e.i,o=e.n;isDefined(n)&&(t=(r=s.searchIn(n)).isMatch,e=r.score,r=r.indices,t&&c.push({score:e,key:a,value:n,idx:i,norm:o,indices:r}))}):(r=t.v,n=t.n,e=(i=s.searchIn(r)).isMatch,t=i.score,i=i.indices,e&&c.push({score:t,key:a,value:r,norm:n,indices:i})),c}}]),n}();Fuse.version="6.4.6",Fuse.createIndex=createIndex,Fuse.parseIndex=parseIndex,Fuse.config=Config,Fuse.parseQuery=parse,module.exports=Fuse;