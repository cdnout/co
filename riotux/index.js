"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};!function(t,e){"function"==typeof define&&define.amd?define([],e()):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports={dispatch:e().dispatch,getState:e().getState,setState:e().setState,setActions:e().setActions,subscribe:e().subscribe,middleware:e().middleware,unsubscribe:e().unsubscribe}:t.Riotux=e()}(this,function(){var t={_store:{state:{},actions:{},components:[],middleware:{}},store:{subscribe:function(e,n){t._store.components.push({component:e,handler:n})},unsubscribe:function(e){t._store.components.forEach(el,function(n){el===e&&t._store.components.splice(n,1)})},middleware:function(e){t._store.middleware=e},dispatch:function(e){for(var n=arguments.length,o=Array(n>1?n-1:0),s=1;n>s;s++)o[s-1]=arguments[s];var r=void 0,i=function(){var n=Promise.resolve(t._store.actions[e].apply(null,[].concat(t._store.state,o))).then(function(n){r={action:e,value:n},"function"==typeof t._store.middleware&&t._store.middleware.call(null,r,t._store.state);var o=t._store.components;o.forEach(function(t,e){void 0!==t.component&&"function"==typeof t.handler&&t.handler(r)})}).then(function(){return r});return n};return i()},setState:function(e){Object.assign(t._store.state,e)},getState:function(e){return t._store.state[e]},setActions:function(e){Object.assign(t._store.actions,e)}}};return t.store});