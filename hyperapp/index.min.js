var SSR_NODE=1,TEXT_NODE=3,EMPTY_OBJ={},EMPTY_ARR=[],SVG_NS="http://www.w3.org/2000/svg",id=e=>e,map=EMPTY_ARR.map,isArray=Array.isArray,enqueue="undefined"!=typeof requestAnimationFrame?requestAnimationFrame:setTimeout,createClass=e=>{var t="";if("string"==typeof e)return e;if(isArray(e))for(var r,o=0;o<e.length;o++)(r=createClass(e[o]))&&(t+=(t&&" ")+r);else for(var o in e)e[o]&&(t+=(t&&" ")+o);return t},shouldRestart=(e,t)=>{for(var r in{...e,...t})if("function"==typeof(isArray(e[r])?e[r][0]:e[r]))t[r]=e[r];else if(e[r]!==t[r])return!0},patchSubs=(e,t,r)=>{for(var o,n,a=[],l=0;l<e.length||l<t.length;l++)o=e[l],n=t[l],a.push(n&&!0!==n?!o||n[0]!==o[0]||shouldRestart(n[1],o[1])?[n[0],n[1],(o&&o[2](),n[0](r,n[1]))]:o:o&&o[2]());return a},getKey=e=>null==e?e:e.key,patchProperty=(e,t,r,o,n,a)=>{if("key"===t);else if("style"===t)for(var l in{...r,...o})r=null==o||null==o[l]?"":o[l],"-"===l[0]?e[t].setProperty(l,r):e[t][l]=r;else"o"===t[0]&&"n"===t[1]?((e.events||(e.events={}))[t=t.slice(2)]=o)?r||e.addEventListener(t,n):e.removeEventListener(t,n):!a&&"list"!==t&&"form"!==t&&t in e?e[t]=null==o?"":o:null==o||!1===o||"class"===t&&!(o=createClass(o))?e.removeAttribute(t):e.setAttribute(t,o)},createNode=(e,t,r)=>{var o=e.props,n=e.type===TEXT_NODE?document.createTextNode(e.tag):(r=r||"svg"===e.tag)?document.createElementNS(SVG_NS,e.tag,{is:o.is}):document.createElement(e.tag,{is:o.is});for(var a in o)patchProperty(n,a,null,o[a],t,r);for(var l=0;l<e.children.length;l++)n.appendChild(createNode(e.children[l]=maybeVNode(e.children[l]),t,r));return e.node=n},patch=(e,t,r,o,n,a)=>{if(r===o);else if(null!=r&&r.type===TEXT_NODE&&o.type===TEXT_NODE)r.tag!==o.tag&&(t.nodeValue=o.tag);else if(null==r||r.tag!==o.tag)t=e.insertBefore(createNode(o=maybeVNode(o),n,a),t),null!=r&&e.removeChild(r.node);else{var l,i,d,s,p=r.props,u=o.props,c=r.children,y=o.children,f=0,m=0,h=c.length-1,v=y.length-1;for(var g in a=a||"svg"===o.tag,{...p,...u})("value"===g||"selected"===g||"checked"===g?t[g]:p[g])!==u[g]&&patchProperty(t,g,p[g],u[g],n,a);for(;m<=v&&f<=h&&null!=(d=getKey(c[f]))&&d===getKey(y[m]);)patch(t,c[f].node,c[f],y[m]=maybeVNode(y[m++],c[f++]),n,a);for(;m<=v&&f<=h&&null!=(d=getKey(c[h]))&&d===getKey(y[v]);)patch(t,c[h].node,c[h],y[v]=maybeVNode(y[v--],c[h--]),n,a);if(f>h)for(;m<=v;)t.insertBefore(createNode(y[m]=maybeVNode(y[m++]),n,a),(i=c[f])&&i.node);else if(m>v)for(;f<=h;)t.removeChild(c[f++].node);else{var N={},E={};for(g=f;g<=h;g++)null!=(d=c[g].key)&&(N[d]=c[g]);for(;m<=v;)d=getKey(i=c[f]),s=getKey(y[m]=maybeVNode(y[m],i)),E[d]||null!=s&&s===getKey(c[f+1])?(null==d&&t.removeChild(i.node),f++):null==s||r.type===SSR_NODE?(null==d&&(patch(t,i&&i.node,i,y[m],n,a),m++),f++):(d===s?(patch(t,i.node,i,y[m],n,a),E[s]=!0,f++):null!=(l=N[s])?(patch(t,t.insertBefore(l.node,i&&i.node),l,y[m],n,a),E[s]=!0):patch(t,i&&i.node,null,y[m],n,a),m++);for(;f<=h;)null==getKey(i=c[f++])&&t.removeChild(i.node);for(var g in N)null==E[g]&&t.removeChild(N[g].node)}}return o.node=t},propsChanged=(e,t)=>{for(var r in e)if(e[r]!==t[r])return!0;for(var r in t)if(e[r]!==t[r])return!0},maybeVNode=(e,t)=>!0!==e&&!1!==e&&e?"function"==typeof e.tag?((!t||null==t.memo||propsChanged(t.memo,e.memo))&&((t=e.tag(e.memo)).memo=e.memo),t):e:text(""),recycleNode=e=>e.nodeType===TEXT_NODE?text(e.nodeValue,e):createVNode(e.nodeName.toLowerCase(),EMPTY_OBJ,map.call(e.childNodes,recycleNode),SSR_NODE,e),createVNode=(e,t,r,o,n)=>({tag:e,props:t,key:t.key,children:r,type:o,node:n});export var memo=(e,t)=>({tag:e,memo:t});export var text=(e,t)=>createVNode(e,EMPTY_OBJ,EMPTY_ARR,TEXT_NODE,t);export var h=(e,t,r=EMPTY_ARR)=>createVNode(e,t,isArray(r)?r:[r]);export var app=({init:e=EMPTY_OBJ,view:t,subscriptions:r,dispatch:o=id,node:n})=>{var a,l,i=n&&recycleNode(n),d=[],s=e=>{a!==e&&(a=e,r&&(d=patchSubs(d,r(a),o)),t&&!l&&enqueue(p,l=!0))},p=()=>n=patch(n.parentNode,n,i,i=t(a),u,l=!1),u=function(e){o(this.events[e.type],e)};return(o=o((e,t)=>"function"==typeof e?o(e(a,t)):isArray(e)?"function"==typeof e[0]?o(e[0],e[1]):e.slice(1).map(e=>e&&!0!==e&&e[0](o,e[1]),s(e[0])):null==e?patchSubs(d,EMPTY_ARR,o=id):s(e)))(e),o};