var HeatCanvas=function(t){return"string"==typeof t?this.canvas=document.getElementById(t):this.canvas=t,null==this.canvas?null:(this.worker=new Worker(HeatCanvas.getPath()+"heatcanvas-worker.js"),this.width=this.canvas.width,this.height=this.canvas.height,this.onRenderingStart=null,this.onRenderingEnd=null,void(this.data={}))};HeatCanvas.prototype.resize=function(t,a){this.width=this.canvas.width=t,this.height=this.canvas.height=a,this.canvas.style.width=t+"px",this.canvas.style.height=a+"px"},HeatCanvas.prototype.push=function(t,a,e){if(!(0>t||t>this.width||0>a||a>this.height)){var n=t+a*this.width;this.data[n]?this.data[n]=this.data[n]+e:this.data[n]=e}},HeatCanvas.prototype.render=function(t,a,e){t=t||1,a=a||HeatCanvas.LINEAR;var n=this;this.worker.onmessage=function(t){n.value=t.data.value,n.data={},n._render(e),n.onRenderingEnd&&n.onRenderingEnd()};var i={data:n.data,width:n.width,height:n.height,step:t,degree:a,value:n.value};this.worker.postMessage(i),this.onRenderingStart&&this.onRenderingStart()},HeatCanvas.prototype._render=function(t){t=t||HeatCanvas.defaultValue2Color;var a=this.canvas.getContext("2d");a.clearRect(0,0,this.width,this.height),defaultColor=this.bgcolor||[0,0,0,255];for(var e=a.createImageData(this.width,this.height),n=0;n<e.data.length;n+=4)e.data[n]=defaultColor[0],e.data[n+1]=defaultColor[1],e.data[n+2]=defaultColor[2],e.data[n+3]=defaultColor[3];var i=0;for(var s in this.value)i=Math.max(this.value[s],i);for(var h in this.value){var r=Math.floor(h%this.width),o=Math.floor(h/this.width),d=o*this.width*4+4*r,v=HeatCanvas.hsla2rgba.apply(null,t(this.value[h]/i));e.data[d]=v[0],e.data[d+1]=v[1],e.data[d+2]=v[2],e.data[d+3]=v[3]}a.putImageData(e,0,0)},HeatCanvas.prototype.clear=function(){this.data={},this.value={},this.canvas.getContext("2d").clearRect(0,0,this.width,this.height)},HeatCanvas.prototype.exportImage=function(){return this.canvas.toDataURL()},HeatCanvas.defaultValue2Color=function(t){var a=1-t,e=.6*t,n=.8,i=1;return[a,n,e,i]},HeatCanvas.hsla2rgba=function(t,a,e,n){function i(t,a,e){return 0>e&&(e+=1),e>1&&(e-=1),1/6>e?t+6*(a-t)*e:.5>e?a:2/3>e?t+(a-t)*(2/3-e)*6:t}var s,h,r;if(0==a)s=h=r=e;else{var o=.5>e?e*(1+a):e+a-e*a,d=2*e-o;s=i(d,o,t+1/3),h=i(d,o,t),r=i(d,o,t-1/3)}return[255*s,255*h,255*r,255*n]},HeatCanvas.LINEAR=1,HeatCanvas.QUAD=2,HeatCanvas.CUBIC=3,HeatCanvas.getPath=function(){for(var t=document.getElementsByTagName("script"),a=0;a<t.length;a++){var e=t[a].src,n=e.indexOf("heatcanvas.js");if(n>0)return e.substring(0,n)}return""};
//# sourceMappingURL=heatcanvas.min.js.map