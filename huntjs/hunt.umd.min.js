!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Hunt=e()}(this,function(){function s(){}function e(t,e){var n,i,s;return void 0===e&&(e=100),function(){!0===n?(clearTimeout(i),i=setTimeout(function(){Date.now()-s>=e&&(t.apply(this,arguments),s=Date.now())},e-(Date.now()-s))):(t.apply(this,arguments),s=Date.now(),n=!0)}}function i(t,e){for(var n in this.element=t,this.visible=!1,e)Object.hasOwnProperty.call(e,n)&&(this[n]=e[n]);if(void 0!==t.dataset){if(void 0!==t.dataset.huntPersist)try{this.persist=JSON.parse(t.dataset.huntPersist)}catch(t){}if(void 0!==t.dataset.huntOffset)try{this.offset=JSON.parse(t.dataset.huntOffset)}catch(t){}}}i.prototype.offset=0,i.prototype.persist=!1,i.prototype.enter=s,i.prototype.leave=s;function t(t,e){if(!(t&&1===t.nodeType||"number"==typeof t.length))throw new TypeError("hunt: observer first argument should be a node or a list of nodes");if("object"!=typeof e)throw new TypeError("hunt: observer second argument should be an object");if(1===t.nodeType)this.__huntedElements__=[new i(t,e)];else{var n=[].slice.call(t);this.__huntedElements__=n.map(function(t){return new i(t,e)})}this.__viewportHeight__=window.innerHeight,this.__connect__(e.throttleInterval)}return t.prototype.__connect__=function(t){this.__throttledHuntElements__=e(this.__huntElements__.bind(this),t),this.__throttledUpdateMetrics__=e(this.__updateMetrics__.bind(this),t),window.addEventListener("scroll",this.__throttledHuntElements__),window.addEventListener("resize",this.__throttledUpdateMetrics__),this.__huntElements__()},t.prototype.__huntElements__=function(){for(var t=this.__huntedElements__.length;t;){var e=this.__huntedElements__[--t],n=e.element.getBoundingClientRect(),i=n.top-e.offset<this.__viewportHeight__&&n.top>=-(n.height+e.offset);!1===e.visible&&!0==i&&(e.enter.call(null,e.element),e.visible=!0,e.leave===s&&!0!==e.persist&&(this.__huntedElements__.splice(t,1),0===this.__huntedElements__.length&&this.disconnect())),!0===e.visible&&!1==i&&(e.leave.call(null,e.element),!(e.visible=!1)!==e.persist&&(this.__huntedElements__.splice(t,1),0===this.__huntedElements__.length&&this.disconnect()))}},t.prototype.__updateMetrics__=function(){this.__viewportHeight__=window.innerHeight,this.__huntElements__()},t.prototype.disconnect=function(){window.removeEventListener("scroll",this.__throttledHuntElements__),window.removeEventListener("resize",this.__throttledUpdateMetrics__)},t.prototype.trigger=function(){this.__huntElements__()},t});