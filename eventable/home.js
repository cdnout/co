(function(a,b){if(typeof define==="function"&&define.amd){define("eventable",function(){return(a.Eventable=b())})}else{if(typeof exports!=="undefined"){module.exports=b()}else{a.Eventable=b()}}}(this,function(){var e=[];var g=e.slice;function b(k){var j,l=2;return function(){if(--l>0){j=k.apply(this,arguments)}else{k=null}return j}}var a={on:function(j,m,l){if(!f(this,"on",j,[m,l])||!m){return this}this._events||(this._events={});var k=this._events[j]||(this._events[j]=[]);k.push({callback:m,context:l,ctx:l||this});return this},once:function(k,n,l){if(!f(this,"once",k,[n,l])||!n){return this}var j=this;var m=b(function(){j.off(k,m);n.apply(this,arguments)});m._callback=n;return this.on(k,m,l)},off:function(m,v,n){var t,u,w,s,r,o,q,p;if(!this._events||!f(this,"off",m,[v,n])){return this}if(!m&&!v&&!n){this._events={};return this}s=m?[m]:Object.keys(this._events);for(r=0,o=s.length;r<o;r++){m=s[r];if(w=this._events[m]){this._events[m]=t=[];if(v||n){for(q=0,p=w.length;q<p;q++){u=w[q];if((v&&v!==u.callback&&v!==u.callback._callback)||(n&&n!==u.context)){t.push(u)}}}if(!t.length){delete this._events[m]}}}return this},trigger:function(l){if(!this._events){return this}var k=g.call(arguments,1);if(!f(this,"trigger",l,k)){return this}var m=this._events[l];var j=this._events.all;if(m){d(m,k)}if(j){d(j,arguments)}return this},stopListening:function(m,j,o){var k=this._listeners;if(!k){return this}var l=!j&&!o;if(typeof j==="object"){o=this}if(m){(k={})[m._listenerId]=m}for(var n in k){k[n].off(j,o,this);if(l){delete this._listeners[n]}}return this}};var i=/\s+/;var f=function(r,p,k,o){if(!k){return true}if(typeof k==="object"){for(var n in k){r[p].apply(r,[n,k[n]].concat(o))}return false}if(i.test(k)){var q=k.split(i);for(var m=0,j=q.length;m<j;m++){r[p].apply(r,[q[m]].concat(o))}return false}return true};var d=function(p,n){var q,o=-1,m=p.length,k=n[0],j=n[1],r=n[2];switch(n.length){case 0:while(++o<m){(q=p[o]).callback.call(q.ctx)}return;case 1:while(++o<m){(q=p[o]).callback.call(q.ctx,k)}return;case 2:while(++o<m){(q=p[o]).callback.call(q.ctx,k,j)}return;case 3:while(++o<m){(q=p[o]).callback.call(q.ctx,k,j,r)}return;default:while(++o<m){(q=p[o]).callback.apply(q.ctx,n)}}};var c={listenTo:"on",listenToOnce:"once"};function h(k,j){a[k]=function(n,l,p){var m=this._listeners||(this._listeners={});var o=n._listenerId||(n._listenerId=(new Date()).getTime());m[o]=n;if(typeof l==="object"){p=this}n[j](l,p,this);return this}}h("listenTo","on");h("listenToOnce","once");a.bind=a.on;a.unbind=a.off;return a}));