!function(u){u.fn.drag=function(t,e,a){var n="string"==typeof t?t:"",r=u.isFunction(t)?t:u.isFunction(e)?e:null;return 0!==n.indexOf("drag")&&(n="drag"+n),a=(t==r?e:a)||{},r?this.on(n,a,r):this.trigger(n)};var g=u.event,r=g.special,h=r.drag={defaults:{which:1,distance:0,not:":input",handle:null,relative:!1,drop:!0,click:!1},datakey:"dragdata",noBubble:!0,add:function(t){var a=u.data(this,h.datakey),n=t.data||{};a.related+=1,u.each(h.defaults,function(t,e){void 0!==n[t]&&(a[t]=n[t])})},remove:function(){--u.data(this,h.datakey).related},setup:function(){var t;u.data(this,h.datakey)||(t=u.extend({related:0},h.defaults),u.data(this,h.datakey,t),g.add(this,"touchstart mousedown",h.init,t),this.attachEvent&&this.attachEvent("ondragstart",h.dontstart))},teardown:function(){(u.data(this,h.datakey)||{}).related||(u.removeData(this,h.datakey),g.remove(this,"touchstart mousedown",h.init),h.textselect(!0),this.detachEvent&&this.detachEvent("ondragstart",h.dontstart))},init:function(t){if(!h.touched){var e,a=t.data;if(!(0!=t.which&&0<a.which&&t.which!=a.which)){var n=u(t.target).attr("class")||"";if(!u(t.target).is(a.not)&&n&&-1!==n.toString().indexOf("slick")&&(!a.handle||u(t.target).closest(a.handle,t.currentTarget).length)&&(h.touched="touchstart"==t.type?this:null,a.propagates=1,a.mousedown=this,a.interactions=[h.interaction(this,a)],a.target=t.target,a.pageX=t.pageX,a.pageY=t.pageY,a.dragging=null,e=h.hijack(t,"draginit",a),a.propagates))return(e=h.flatten(e))&&e.length&&(a.interactions=[],u.each(e,function(){a.interactions.push(h.interaction(this,a))})),a.propagates=a.interactions.length,!1!==a.drop&&r.drop&&r.drop.handler(t,a),h.textselect(!1),h.touched?g.add(h.touched,"touchmove touchend",h.handler,a):g.add(document,"mousemove mouseup",h.handler,a),!(!h.touched||a.live)&&void 0}}},interaction:function(t,e){e=t&&t.ownerDocument&&u(t)[e.relative?"position":"offset"]()||{top:0,left:0};return{drag:t,callback:new h.callback,droppable:[],offset:e}},handler:function(t){var e=t.data;switch(t.type){case!e.dragging&&"touchmove":t.preventDefault();case!e.dragging&&"mousemove":if(Math.pow(t.pageX-e.pageX,2)+Math.pow(t.pageY-e.pageY,2)<Math.pow(e.distance,2))break;t.target=e.target,h.hijack(t,"dragstart",e),e.propagates&&(e.dragging=!0);case"touchmove":t.preventDefault();case"mousemove":if(e.dragging){if(h.hijack(t,"drag",e),e.propagates){!1!==e.drop&&r.drop&&r.drop.handler(t,e);break}t.type="mouseup"}case"touchend":case"mouseup":default:h.touched?g.remove(h.touched,"touchmove touchend",h.handler):g.remove(document,"mousemove mouseup",h.handler),e.dragging&&(!1!==e.drop&&r.drop&&r.drop.handler(t,e),h.hijack(t,"dragend",e)),h.textselect(!0),!1===e.click&&e.dragging&&u.data(e.mousedown,"suppress.click",(new Date).getTime()+5),e.dragging=h.touched=!1}},hijack:function(a,n,r,t,e){if(r){var o,i,d,s={event:a.originalEvent,type:a.type},c=n.indexOf("drop")?"drag":"drop",l=t||0,p=isNaN(t)?r.interactions.length:t;a.type=n;t=function(){};a.originalEvent=new jQuery.Event(s.event,{preventDefault:t,stopPropagation:t,stopImmediatePropagation:t}),r.results=[];do{if(i=r.interactions[l]){if("dragend"!==n&&i.cancelled)continue;d=h.properties(a,r,i),i.results=[],u(e||i[c]||r.droppable).each(function(t,e){if(d.target=e,!(a.isPropagationStopped=function(){return!1})===(o=e?g.dispatch.call(e,a,d):null)?("drag"==c&&(i.cancelled=!0,--r.propagates),"drop"==n&&(i[c][t]=null)):"dropinit"==n&&i.droppable.push(h.element(o)||e),"dragstart"==n&&(i.proxy=u(h.element(o)||i.drag)[0]),i.results.push(o),delete a.result,"dropinit"!==n)return o}),r.results[l]=h.flatten(i.results),"dropinit"==n&&(i.droppable=h.flatten(i.droppable)),"dragstart"!=n||i.cancelled||d.update()}}while(++l<p);return a.type=s.type,a.originalEvent=s.event,h.flatten(r.results)}},properties:function(t,e,a){var n=a.callback;return n.drag=a.drag,n.proxy=a.proxy||a.drag,n.startX=e.pageX,n.startY=e.pageY,n.deltaX=t.pageX-e.pageX,n.deltaY=t.pageY-e.pageY,n.originalX=a.offset.left,n.originalY=a.offset.top,n.offsetX=n.originalX+n.deltaX,n.offsetY=n.originalY+n.deltaY,n.drop=h.flatten((a.drop||[]).slice()),n.available=h.flatten((a.droppable||[]).slice()),n},element:function(t){if(t&&(t.jquery||1==t.nodeType))return t},flatten:function(t){return u.map(t,function(t){return t&&t.jquery?u.makeArray(t):t&&t.length?h.flatten(t):t})},textselect:function(t){u(document)[t?"off":"on"]("selectstart",h.dontstart).css("MozUserSelect",t?"":"none"),document.unselectable=t?"off":"on"},dontstart:function(){return!1},callback:function(){}};h.callback.prototype={update:function(){r.drop&&this.available.length&&u.each(this.available,function(t){r.drop.locate(this,t)})}};var e=g.dispatch;g.dispatch=function(t){if(!(0<u.data(this,"suppress."+t.type)-(new Date).getTime()))return e.apply(this,arguments);u.removeData(this,"suppress."+t.type)},r.draginit=r.dragstart=r.dragend=h}(jQuery);