!function(m){m.extend(!0,window,{Slick:{DraggableGrouping:function(c){var n,p,u,a,i,g,f,l={},o=new Slick.Event,s=new Slick.EventHandler;var h=[];function t(s,t){var d=t.attr("id").replace(p,""),l=!0;h.forEach(function(e,o,r){e.id==d&&(l=!1)}),l&&(u.forEach(function(e,o,r){var l,n,a,i;e.id==d&&(null==e.grouping||m.isEmptyObject(e.grouping)||(l=m("<div id='"+p+e.id+"_entry' data-id='"+e.id+"' class='slick-dropped-grouping'>"),n=t.children(".slick-column-name").first(),m("<div style='display: inline-flex'>"+(n.length?n:t).text()+"</div>").appendTo(l),n=m("<div class='slick-groupby-remove'>&nbsp;</div>"),c.deleteIconCssClass&&n.addClass(c.deleteIconCssClass),c.deleteIconImage&&n.css("background","url("+c.deleteIconImage+") no-repeat center right"),c.deleteIconCssClass||c.deleteIconImage||n.addClass("slick-groupby-remove-image"),n.appendTo(l),m("</div>").appendTo(l),l.appendTo(s),h.push(e),v("add-group"),a=e.id,i=l,m("#"+p+a+"_entry >.slick-groupby-remove").on("click",function(){m(this).off("click"),function(e,o){o.remove();var l=[];u.forEach(function(e,o,r){l[e.id]=e}),function(e){var o,r,l=arguments,n=l.length;for(;1<n&&e.length;)for(o=l[--n];-1!=(r=e.indexOf(o));)e.splice(r,1)}(h,l[e]),0===h.length&&g.show();v("remove-group")}(a,i)})))}),f.css("display","block"))}function v(e){if(0===h.length)return a.setGrouping([]),void o.notify({caller:e,groupColumns:[]});var l=[];h.forEach(function(e,o,r){l.push(e.grouping)}),a.setGrouping(l),o.notify({caller:e,groupColumns:l})}m.extend(this,{init:function(e){c=m.extend(!0,{},l,c),p=(n=e).getUID(),u=n.getColumns(),a=n.getData(),i=m(n.getPreHeaderPanel()),e=c.dropPlaceHolderText||"Drop a column header here to group by the column",i.html("<div class='slick-placeholder'>"+e+"</div><div class='slick-group-toggle-all expanded' style='display:none'></div>"),g=i.find(".slick-placeholder"),f=i.find(".slick-group-toggle-all"),i.droppable({activeClass:"ui-state-default",hoverClass:"ui-state-hover",accept:":not(.ui-sortable-helper)",deactivate:function(e,o){i.removeClass("slick-header-column-denied")},drop:function(e,o){t(this,o.draggable)},over:function(e,o){var l=o.draggable.attr("id").replace(p,"");u.forEach(function(e,o,r){e.id==l&&null==e.grouping&&i.addClass("slick-header-column-denied")})}}),i.sortable({items:"div.slick-dropped-grouping",cursor:"default",tolerance:"pointer",helper:"clone",update:function(e,o){for(var r=m(this).sortable("toArray",{attribute:"data-id"}),l=[],n=0,a=r.length;n<a;n++)for(var i=0,s=h.length;i<s;i++)if(h[i].id==r[n]){l.push(h[i]);break}h=l,v("sort-group")}}),i.html(),f.on("click",function(e){this.classList.contains("collapsed")?(this.classList.remove("collapsed"),this.classList.add("expanded"),a.expandAllGroups()):(this.classList.add("collapsed"),this.classList.remove("expanded"),a.collapseAllGroups())}),s.subscribe(n.onHeaderCellRendered,function(e,o){var r=o.column,o=o.node;m.isEmptyObject(r.grouping)||(r=m("<span class='slick-column-groupable' />"),c.groupIconCssClass&&r.addClass(c.groupIconCssClass),c.groupIconImage&&r.css("background","url("+c.groupIconImage+") no-repeat center center"),m(o).css("cursor","pointer").append(r))});for(var o=0;o<u.length;o++){var r=u[o].field;n.updateColumnHeader(r)}},destroy:function(){o.unsubscribe(),s.unsubscribeAll()},pluginName:"DraggableGrouping",onGroupChanged:o,setDroppedGroups:function(e){var o=e instanceof Array?e:[e];g.hide();for(var r=0;r<o.length;r++){var l=m(n.getHeaderColumn(o[r]));t(i,l)}},clearDroppedGroups:function(){h=[],v("clear-all"),i.find(".slick-dropped-grouping").remove(),f.css("display","none"),g.show()},getSetupColumnReorder:function(d,c,e,p,u,g,f,h,v){c.filter(":ui-sortable").sortable("destroy");var r=m(d.getPreHeaderPanel());c.sortable({distance:3,cursor:"default",tolerance:"intersection",helper:"clone",placeholder:"slick-sortable-placeholder ui-state-default slick-header-column",forcePlaceholderSize:!0,appendTo:"body",start:function(e,o){m(o.helper).addClass("slick-header-column-active"),r.find(".slick-placeholder").show(),r.find(".slick-dropped-grouping").hide()},beforeStop:function(e,o){m(o.helper).removeClass("slick-header-column-active"),0<r.find(".slick-dropped-grouping").length&&(r.find(".slick-placeholder").hide(),r.find(".slick-dropped-grouping").show())},stop:function(e){if(d.getEditorLock().commitCurrentEdit()){var o=c.sortable("toArray");if(1<c.length)for(var r=1,l=c.length;r<l;r+=1)for(var n=m(c[r]).sortable("toArray"),a=0,i=n.length;a<i;a+=1)o.push(n[a]);for(var s=[],t=0;t<o.length;t++)s.push(g[f(o[t].replace(h,""))]);p(s),v(d.onColumnsReordered,{grid:d}),e.stopPropagation(),u()}else m(this).sortable("cancel")}})}})}}})}(jQuery);