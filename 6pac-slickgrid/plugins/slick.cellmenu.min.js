!function(k){k.extend(!0,window,{Slick:{Plugins:{CellMenu:function(t){var m,p,f,g,d=-1,c=-1,r="",i=new Slick.EventHandler,u=this,o={autoAdjustDrop:!0,autoAlignSide:!0,autoAdjustDropOffset:0,autoAlignSideOffset:0,hideMenuOnScroll:!0,maxHeight:"none",width:"auto"};function l(e){var t=p.getCellFromEvent(e);d=t&&t.cell,c=t&&t.row;var i=p.getColumns()[d],o=p.getDataItem(c),l=m.commandItems||[],n=m.optionItems||[];if(i&&i.cellMenu&&(l.length||!n.length)&&(C(),0!=u.onBeforeMenuShow.notify({cell:d,row:c,grid:p},e,u))){var s,a=isNaN(m.maxHeight)?m.maxHeight:m.maxHeight+"px",t=isNaN(m.width)?m.width:m.width+"px",t=k('<div class="slick-cell-menu '+r+'" style="'+("width: "+t+"; max-height: "+a)+'" />').css("top",e.pageY+5).css("left",e.pageX).css("display","none"),a='<button type="button" class="close" data-dismiss="slick-cell-menu" aria-label="Close"><span class="close" aria-hidden="true">&times;</span></button>';if(!m.hideOptionSection&&0<n.length&&(s=k('<div class="slick-cell-menu-option-list" />'),m.hideCloseButton||k(a).on("click",C).appendTo(t),s.appendTo(t),function(e,t,i,o){if(!o||!i||!e)return;e&&e.optionTitle&&k('<div class="title"/>').append(e.optionTitle).appendTo(t);for(var l=0,n=i.length;l<n;l++){var s=i[l],a=b(s.itemVisibilityOverride,o),d=b(s.itemUsabilityOverride,o);a&&(Object.prototype.hasOwnProperty.call(s,"itemUsabilityOverride")&&(s.disabled=!d),a=k('<div class="slick-cell-menu-item"></div>').data("option",s.option||"").data("item",s).on("click",w).appendTo(t),s.divider||"divider"===s?a.addClass("slick-cell-menu-item-divider"):(!s.disabled&&d||a.addClass("slick-cell-menu-item-disabled"),s.hidden&&a.addClass("slick-cell-menu-item-hidden"),s.cssClass&&a.addClass(s.cssClass),s.tooltip&&a.attr("title",s.tooltip),d=k('<div class="slick-cell-menu-icon"></div>').appendTo(a),s.iconCssClass&&d.addClass(s.iconCssClass),s.iconImage&&d.css("background-image","url("+s.iconImage+")"),a=k('<span class="slick-cell-menu-content"></span>').text(s.title).appendTo(a),s.textCssClass&&a.addClass(s.textCssClass)))}}(m,s,n,{cell:d,row:c,column:i,dataContext:o,grid:p})),!m.hideCommandSection&&0<l.length&&(s=k('<div class="slick-cell-menu-command-list" />'),m.hideCloseButton||0!==n.length&&!m.hideOptionSection||k(a).on("click",C).appendTo(t),s.appendTo(t),function(e,t,i,o){if(!o||!i||!e)return;e&&e.commandTitle&&k('<div class="title"/>').append(e.commandTitle).appendTo(t);for(var l=0,n=i.length;l<n;l++){var s=i[l],a=b(s.itemVisibilityOverride,o),d=b(s.itemUsabilityOverride,o);a&&(Object.prototype.hasOwnProperty.call(s,"itemUsabilityOverride")&&(s.disabled=!d),a=k('<div class="slick-cell-menu-item"></div>').data("command",s.command||"").data("item",s).on("click",v).appendTo(t),s.divider||"divider"===s?a.addClass("slick-cell-menu-item-divider"):(!s.disabled&&d||a.addClass("slick-cell-menu-item-disabled"),s.hidden&&a.addClass("slick-cell-menu-item-hidden"),s.cssClass&&a.addClass(s.cssClass),s.tooltip&&a.attr("title",s.tooltip),d=k('<div class="slick-cell-menu-icon"></div>').appendTo(a),s.iconCssClass&&d.addClass(s.iconCssClass),s.iconImage&&d.css("background-image","url("+s.iconImage+")"),a=k('<span class="slick-cell-menu-content"></span>').text(s.title).appendTo(a),s.textCssClass&&a.addClass(s.textCssClass)))}}(m,s,l,{cell:d,row:c,column:i,dataContext:o,grid:p})),t.show(),t.appendTo("body"),0!=u.onAfterMenuShow.notify({cell:d,row:c,grid:p},e,u))return t}}function C(e,t){(g=g||k(".slick-cell-menu."+r))&&g.remove&&(0<g.length&&0==u.onBeforeMenuClose.notify({cell:t&&t.cell,row:t&&t.row,grid:p,menu:g},e,u)||(g.remove(),g=null))}function n(e){var t,i,o=k(e.target).closest(".slick-cell"),l=o?o.offset().left:e.pageX,n=o?o.offset().top:e.pageY,s=o.outerWidth(),a=g.outerHeight()||0,d=g.outerWidth()||m.width||0,c=f.rowHeight,r=m.autoAdjustDropOffset,u=m.autoAlignSideOffset;m.autoAdjustDrop&&(t=o,i=k(window).innerHeight()||0,e=k(window).scrollTop()||0,t=t&&t.offset&&0<t.length?i-(t.offset().top-e):0,e=o,o=k(window).scrollTop()||0,o=e&&e.offset&&0<e.length?e.offset().top-o:0,n="top"==((t=t+r-c)<a&&t<o-r+c?"top":"bottom")?(g.removeClass("dropdown").addClass("dropup"),n-a-r):(g.removeClass("dropup").addClass("dropdown"),n+c+r)),m.autoAlignSide&&("left"==(l+d>=p.getGridPosition().width?"left":"right")?(g.removeClass("dropright").addClass("dropleft"),l=l-(d-s)-u):(g.removeClass("dropleft").addClass("dropright"),l+=u)),g.css("top",n),g.css("left",l)}function s(e,t){var i=p.getCellFromEvent(e),o=p.getDataItem(i.row),i=p.getColumns()[i.cell];i&&i.cellMenu&&e.preventDefault(),m=k.extend({},m,i.cellMenu),(t=t||{}).columnDef=i,t.dataContext=o,t.grid=p,b(m.menuUsabilityOverride,t)&&((g=l(e))&&(n(e),g.data("cell",d).data("row",c).show()),k("body").on("mousedown."+r,a))}function a(e){g&&g[0]!=e.target&&!k.contains(g[0],e.target)&&h(e,{cell:d,row:c})}function h(e,t){g&&0<g.length&&0!=u.onBeforeMenuClose.notify({cell:t&&t.cell,row:t&&t.row,grid:p,menu:g},e,u)&&g&&g.remove&&(g.remove(),g=null)}function v(e){var t,i,o,l,n=k(this).data("command"),s=k(this).data("item");!s||s.disabled||s.divider||"divider"===s||(t=g.data("row"),i=g.data("cell"),o=p.getColumns()[i],l=p.getDataItem(t),null!==n&&""!==n&&(h(e,{cell:i,row:t}),l={cell:i,row:t,grid:p,command:n,item:s,column:o,dataContext:l},u.onCommand.notify(l,e,u),"function"==typeof s.action&&s.action.call(this,e,l)))}function w(e){var t,i,o,l,n=k(this).data("option"),s=k(this).data("item");!s||s.disabled||s.divider||"divider"===s||p.getEditorLock().commitCurrentEdit()&&(t=g.data("row"),i=g.data("cell"),o=p.getColumns()[i],l=p.getDataItem(t),void 0!==n&&(h(e,{cell:i,row:t}),l={cell:i,row:t,grid:p,option:n,item:s,column:o,dataContext:l},u.onOptionSelected.notify(l,e,u),"function"==typeof s.action&&s.action.call(this,e,l)))}function b(e,t){return"function"!=typeof e||e.call(this,t)}k.extend(this,{init:function(e){f=(p=e).getOptions(),m=k.extend({},o,t),r=e&&e.getUID?e.getUID():"",i.subscribe(p.onClick,s),m.hideMenuOnScroll&&i.subscribe(p.onScroll,C)},closeMenu:C,destroy:function(){u.onAfterMenuShow.unsubscribe(),u.onBeforeMenuShow.unsubscribe(),u.onBeforeMenuClose.unsubscribe(),u.onCommand.unsubscribe(),u.onOptionSelected.unsubscribe(),i.unsubscribeAll(),g&&g.remove&&g.remove(),g=null},pluginName:"CellMenu",setOptions:function(e){m=k.extend({},m,e)},onAfterMenuShow:new Slick.Event,onBeforeMenuShow:new Slick.Event,onBeforeMenuClose:new Slick.Event,onCommand:new Slick.Event,onOptionSelected:new Slick.Event})}}}})}(jQuery);