!function(e,n){"undefined"!=typeof module&&module.exports?module.exports=n():"function"==typeof define&&define.amd?define([],n):e.canvid=n()}(this,function(){function e(e){function n(e,n){function o(){r--,0===r&&n(null,t)}var t={},r=Object.keys(e).length;if(0===r)return n("You need to define at least one video object.");for(var i in e)t[i]=new Image,t[i].onload=o,t[i].onerror=n,t[i].src=e[i].src}function o(){var e=document.createElement("canvas");return e.width=l.width,e.height=l.height,e.classList.add("canvid"),m.appendChild(e),e.getContext("2d")}function t(){[].forEach.call(m.children,function(e){e.classList.contains("canvid")||(e.style.display="none")})}function r(){[].forEach.call(m.children,function(e){e.classList.contains("canvid")&&m.removeChild(e)})}function i(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return setTimeout(e,1e3/60)}}function a(){var e=document.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))}function c(e){return"function"==typeof e||!!(e&&e.constructor&&e.call&&e.apply)}function s(){for(var e,n={},o=0;o<arguments.length;o++)for(e in arguments[o])arguments[o].hasOwnProperty(e)&&(n[e]=arguments[o][e]);return n}var u={width:800,height:450,selector:".canvid-wrapper"},d=!0,f={play:function(){console.log("Cannot play before images are loaded")}},l=s(u,e),m="string"==typeof l.selector?document.querySelector(l.selector):l.selector;if(!m)return console.warn("Error. No element found for selector",l.selector);if(!l.videos)return console.warn("Error. You need to define at least one video object");if(a())n(l.videos,function(e,n){if(e)return console.warn("Error while loading video sources.",e);var a=o(),s=i();f.play=function(e,o,i){function u(){E||(m(y),y=+y+(o?-1:1),0>y&&(y+=+p.frames),y>=p.frames&&(y=0),(o?y!=p.frames-1:y)||F++,p.loops&&F>=p.loops&&(C=!1,p.onEnd&&c(p.onEnd)&&p.onEnd())),E=(E+1)%b,C&&p.frames>1&&s(u)}function m(e){var n=Math.floor(e%p.cols)*v,o=Math.floor(e/p.cols)*w;a.clearRect(0,0,l.width,l.height),a.drawImage(h,n,o,v,w,0,0,l.width,l.height)}f.pause&&f.pause();var h=n[e],p=l.videos[e],v=h.width/p.cols,w=h.height/Math.ceil(p.frames/p.cols),g=i||p.fps||15,y=o?p.frames-1:0,E=0,C=!0,F=0,b=60/g;s(u),f.resume=function(){C=!0,s(u)},f.pause=function(){C=!1,s(u)},f.isPlaying=function(){return C},f.destroy=function(){f.pause(),r()},f.getCurrentFrame=function(){return y},f.setCurrentFrame=function(e){return 0>e||e>=p.frames?!1:(f.isPlaying()||m(e),void(y=e))},d&&(d=!1,t())},c(l.loaded)&&l.loaded(f)});else if(opts.srcGif){var h=new Image;h.src=opts.srcGif,m.appendChild(h)}return f}return e});
//# sourceMappingURL=canvid.min.js.map