(function(c){var d=c.define;var b=c.require;var a=c.Ember;if(typeof a==="undefined"&&typeof b!=="undefined"){a=b("ember")}a.libraries.register("Ember Simple Auth Cookie Store","0.8.0");d("simple-auth-cookie-store/configuration",["simple-auth/utils/load-config","exports"],function(h,f){var e=h["default"];var g={cookieName:"ember_simple_auth:session",cookieDomain:null,cookieExpirationTime:null};f["default"]={cookieDomain:g.cookieDomain,cookieName:g.cookieName,cookieExpirationTime:g.cookieExpirationTime,load:e(g)}});d("simple-auth-cookie-store/ember",["./initializer"],function(f){var e=f["default"];a.onLoad("Ember.Application",function(g){g.initializer(e)})});d("simple-auth-cookie-store/initializer",["./configuration","simple-auth/utils/get-global-config","simple-auth-cookie-store/stores/cookie","exports"],function(j,g,e,h){var f=j["default"];var k=g["default"];var i=e["default"];h["default"]={name:"simple-auth-cookie-store",before:"simple-auth",initialize:function(l,n){var m=k("simple-auth-cookie-store");f.load(l,m);n.register("simple-auth-session-store:cookie",i)}}});d("simple-auth-cookie-store/stores/cookie",["simple-auth/stores/base","simple-auth/utils/objects-are-equal","./../configuration","exports"],function(k,h,e,j){var f=k["default"];var i=h["default"];var g=e["default"];j["default"]=f.extend({cookieDomain:null,cookieName:"ember_simple_auth:session",cookieExpirationTime:null,_secureCookies:window.location.protocol==="https:",_syncDataTimeout:null,renewExpirationTimeout:null,isPageVisible:null,init:function(){this.cookieName=g.cookieName;this.cookieExpirationTime=g.cookieExpirationTime;this.cookieDomain=g.cookieDomain;this.isPageVisible=this.initPageVisibility();this.syncData();this.renewExpiration()},persist:function(m){m=JSON.stringify(m||{});var l=this.calculateExpirationTime();this.write(m,l);this._lastData=this.restore()},restore:function(){var l=this.read(this.cookieName);if(a.isEmpty(l)){return{}}else{return JSON.parse(l)}},clear:function(){this.write(null,0);this._lastData={}},read:function(l){var m=document.cookie.match(new RegExp(l+"=([^;]+)"))||[];return decodeURIComponent(m[1]||"")},calculateExpirationTime:function(){var l=this.read(this.cookieName+":expiration_time");l=!!l?new Date().getTime()+l*1000:null;return !!this.cookieExpirationTime?new Date().getTime()+this.cookieExpirationTime*1000:l},write:function(p,m){var r="; path=/";var o=a.isEmpty(this.cookieDomain)?"":"; domain="+this.cookieDomain;var l=a.isEmpty(m)?"":"; expires="+new Date(m).toUTCString();var q=!!this._secureCookies?";secure":"";document.cookie=this.cookieName+"="+encodeURIComponent(p)+o+r+l+q;if(m!==null){var n=this.read(this.cookieName+":expiration_time");document.cookie=this.cookieName+":expiration_time="+encodeURIComponent(this.cookieExpirationTime||n)+o+r+l+q}},syncData:function(){var l=this.restore();if(!i(l,this._lastData)){this._lastData=l;this.trigger("sessionDataUpdated",l)}if(!a.testing){a.run.cancel(this._syncDataTimeout);this._syncDataTimeout=a.run.later(this,this.syncData,500)}},initPageVisibility:function(){var m={hidden:"visibilitychange",webkitHidden:"webkitvisibilitychange",mozHidden:"mozvisibilitychange",msHidden:"msvisibilitychange"};for(var n in m){if(n in document){var l=m[n];break}}return function(){return !document[n]}},renew:function(){var m=this.restore();if(!a.isEmpty(m)&&m!=={}){m=a.typeOf(m)==="string"?m:JSON.stringify(m||{});var l=this.calculateExpirationTime();this.write(m,l)}},renewExpiration:function(){if(this.isPageVisible()){this.renew()}if(!a.testing){a.run.cancel(this.renewExpirationTimeout);this.renewExpirationTimeout=a.run.later(this,this.renewExpiration,60000)}}})})})(this);