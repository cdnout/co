(function(e){Ember.libraries.register("Ember Simple Auth Cookie Store","0.8.0");var f,b;(function(){var h={},g={};f=function(i,j,k){h[i]={deps:j,callback:k}};b=function(j){if(g.hasOwnProperty(j)){return g[j]}g[j]={};if(!h[j]){throw new Error("Could not find module "+j)}var p=h[j],t=p.deps,s=p.callback,n=[],m;for(var o=0,k=t.length;o<k;o++){if(t[o]==="exports"){n.push(m={})}else{n.push(b(r(t[o])))}}var q=s.apply(this,n);return g[j]=m||q;function r(z){if(z.charAt(0)!=="."){return z}var y=z.split("/");var v=j.split("/").slice(0,-1);for(var x=0,u=y.length;x<u;x++){var w=y[x];if(w===".."){v.pop()}else{if(w==="."){continue}else{v.push(w)}}}return v.join("/")}};b.registry=h})();f("simple-auth-cookie-store/configuration",["simple-auth/utils/load-config","exports"],function(j,h){var g=j["default"];var i={cookieName:"ember_simple_auth:session",cookieDomain:null,cookieExpirationTime:null};h["default"]={cookieDomain:i.cookieDomain,cookieName:i.cookieName,cookieExpirationTime:i.cookieExpirationTime,load:g(i)}});f("simple-auth-cookie-store/ember",["./initializer"],function(h){var g=h["default"];Ember.onLoad("Ember.Application",function(i){i.initializer(g)})});f("simple-auth-cookie-store/initializer",["./configuration","simple-auth/utils/get-global-config","simple-auth-cookie-store/stores/cookie","exports"],function(l,i,g,j){var h=l["default"];var m=i["default"];var k=g["default"];j["default"]={name:"simple-auth-cookie-store",before:"simple-auth",initialize:function(n,p){var o=m("simple-auth-cookie-store");h.load(n,o);p.register("simple-auth-session-store:cookie",k)}}});f("simple-auth-cookie-store/stores/cookie",["simple-auth/stores/base","simple-auth/utils/objects-are-equal","./../configuration","exports"],function(m,j,g,l){var h=m["default"];var k=j["default"];var i=g["default"];l["default"]=h.extend({cookieDomain:null,cookieName:"ember_simple_auth:session",cookieExpirationTime:null,_secureCookies:window.location.protocol==="https:",_syncDataTimeout:null,renewExpirationTimeout:null,isPageVisible:null,init:function(){this.cookieName=i.cookieName;this.cookieExpirationTime=i.cookieExpirationTime;this.cookieDomain=i.cookieDomain;this.isPageVisible=this.initPageVisibility();this.syncData();this.renewExpiration()},persist:function(o){o=JSON.stringify(o||{});var n=this.calculateExpirationTime();this.write(o,n);this._lastData=this.restore()},restore:function(){var n=this.read(this.cookieName);if(Ember.isEmpty(n)){return{}}else{return JSON.parse(n)}},clear:function(){this.write(null,0);this._lastData={}},read:function(n){var o=document.cookie.match(new RegExp(n+"=([^;]+)"))||[];return decodeURIComponent(o[1]||"")},calculateExpirationTime:function(){var n=this.read(this.cookieName+":expiration_time");n=!!n?new Date().getTime()+n*1000:null;return !!this.cookieExpirationTime?new Date().getTime()+this.cookieExpirationTime*1000:n},write:function(r,o){var t="; path=/";var q=Ember.isEmpty(this.cookieDomain)?"":"; domain="+this.cookieDomain;var n=Ember.isEmpty(o)?"":"; expires="+new Date(o).toUTCString();var s=!!this._secureCookies?";secure":"";document.cookie=this.cookieName+"="+encodeURIComponent(r)+q+t+n+s;if(o!==null){var p=this.read(this.cookieName+":expiration_time");document.cookie=this.cookieName+":expiration_time="+encodeURIComponent(this.cookieExpirationTime||p)+q+t+n+s}},syncData:function(){var n=this.restore();if(!k(n,this._lastData)){this._lastData=n;this.trigger("sessionDataUpdated",n)}if(!Ember.testing){Ember.run.cancel(this._syncDataTimeout);this._syncDataTimeout=Ember.run.later(this,this.syncData,500)}},initPageVisibility:function(){var o={hidden:"visibilitychange",webkitHidden:"webkitvisibilitychange",mozHidden:"mozvisibilitychange",msHidden:"msvisibilitychange"};for(var p in o){if(p in document){var n=o[p];break}}return function(){return !document[p]}},renew:function(){var o=this.restore();if(!Ember.isEmpty(o)&&o!=={}){o=Ember.typeOf(o)==="string"?o:JSON.stringify(o||{});var n=this.calculateExpirationTime();this.write(o,n)}},renewExpiration:function(){if(this.isPageVisible()){this.renew()}if(!Ember.testing){Ember.run.cancel(this.renewExpirationTimeout);this.renewExpirationTimeout=Ember.run.later(this,this.renewExpiration,60000)}}})});f("simple-auth/stores/base",["exports"],function(g){g["default"]=e.SimpleAuth.Stores.Base});f("simple-auth/utils/objects-are-equal",["exports"],function(g){g["default"]=e.SimpleAuth.Utils.objectsAreEqual});f("simple-auth/utils/get-global-config",["exports"],function(g){g["default"]=e.SimpleAuth.Utils.getGlobalConfig});f("simple-auth/utils/load-config",["exports"],function(g){g["default"]=e.SimpleAuth.Utils.loadConfig});var d=b("simple-auth-cookie-store/initializer")["default"];var c=b("simple-auth-cookie-store/configuration")["default"];var a=b("simple-auth-cookie-store/stores/cookie")["default"];e.SimpleAuth.Configuration.CookieStore=c;e.SimpleAuth.Stores.Cookie=a;b("simple-auth-cookie-store/ember")})((typeof global!=="undefined")?global:window);